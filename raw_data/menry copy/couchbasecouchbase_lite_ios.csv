couchbase-lite-ios,"Lightweight, embedded, syncable NoSQL database engine for iOS and MacOS apps."
username,timestamp,url,sha,message
jayahariv,2019-09-12 21:19:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/124b6bc142cc51fbab7305eafe79f347985ac73b,124b6bc142cc51fbab7305eafe79f347985ac73b,"CBL-333: feat: xcframework script (#2544)

* made the project release configuration: build library for distribution true."
jayahariv,2019-09-12 17:42:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/51a205f5e95f9436b15b17057c3ddcfbe0bd8335,51a205f5e95f9436b15b17057c3ddcfbe0bd8335,"fix: jenkins updated to xcode 11 

* no more iphone X"
jayahariv,2019-09-10 21:37:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/37b6ba0e9219352b4df723b7fdeebf575f52671f,37b6ba0e9219352b4df723b7fdeebf575f52671f,"fix: run time error - arg null (#2543)

* when starts the db with null instance, it causes a run time error."
jayahariv,2019-09-09 23:44:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e91c20415e6f517173038adeebf4b191e6a3b54,4e91c20415e6f517173038adeebf4b191e6a3b54,"submodule: cbl-171

-Subproject commit b7a94380bdd5ade8d6efa74fadfacb6e586cfd56
+Subproject commit ef476f590e36e57423832ee1ee4110707c52fc46"
jayahariv,2019-09-09 22:17:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/021b8d9ee9acb6c01ea8123fbf464041aee9e926,021b8d9ee9acb6c01ea8123fbf464041aee9e926,"CBL-342: fix: race condition (#2541)

* when replicator starts before its handle being created the nullptr was returned.
* fix by returning replicator handle, and then start the replicator."
jayahariv,2019-09-09 21:55:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9b2c98c9909febfc4f88399cf36069654ec24334,9b2c98c9909febfc4f88399cf36069654ec24334,"CBL-369: unit: FTS and alias issue with db.db.rowid (#2542)

* add unit: FTS and alias issue with db.db.rowid
* update the litecore fix submodule"
jayahariv,2019-09-09 18:28:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b179b457e4276d6c3b4d5c78945ef5d2e9983d89,b179b457e4276d6c3b4d5c78945ef5d2e9983d89,"submodule update

-Subproject commit af17bc2a01b1b1eb8b91177154cbac4b5934c646
+Subproject commit dfacbf4c24ff6e3e0df8dc336b75a258f16088d5"
jayahariv,2019-08-21 18:04:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/493150ad6acb7c0a8cc5466fc58d5f1dde45b867,493150ad6acb7c0a8cc5466fc58d5f1dde45b867,"CBL-138: fix: retry logic (#2533)

* previous retry was not cancelled, in case retry already scheduled.
* used the CBLTimer to schedule it.
* CBL-138"
jayahariv,2019-08-20 21:27:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/602d1a5ba5ad6c20708844cf69288c42089b4ed4,602d1a5ba5ad6c20708844cf69288c42089b4ed4,"feat: add dispatch source set timer (#2532)

* create a wrapper for dispatch source set timer, for all cbl timer tasks.
* use timer in the document expiry code block.
* cancel included to CBLTimer, more encapsulated"
jayahariv,2019-08-15 23:59:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4d95cb16e5c6cd9aa2d758a89b5e35f67f6c2f3,a4d95cb16e5c6cd9aa2d758a89b5e35f67f6c2f3,"submodule update

-Subproject commit b2bb1326cc10a64112e892c76f78f224c12f7e5b
+Subproject commit af17bc2a01b1b1eb8b91177154cbac4b5934c646"
jayahariv,2019-07-12 18:14:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa176b5b214b7c2408ba471f06ad6a14350f5111,fa176b5b214b7c2408ba471f06ad6a14350f5111,"submodule update - lite core

-Subproject commit 00aee2143b835aae87b29aa23e3f92116f8e47c6
+Subproject commit b2bb1326cc10a64112e892c76f78f224c12f7e5b"
jayahariv,2019-07-12 17:36:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/001a07107d2baef107e99fe353333ca8513badc8,001a07107d2baef107e99fe353333ca8513badc8,"CBL-148: feat: revision id add to document (#2530)

* expose revision id"
jayahariv,2019-07-11 22:20:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/68540d57e9249b4db96a3be25ec806700e6de121,68540d57e9249b4db96a3be25ec806700e6de121,"fix: swift header missing issue (#2528)

* swift was not finding the CBLConflict instance or so. and it was returning an empty instance when used class pointer as variable in struct.
* we suspect it might be due to the removal of private headers
* validated with a sample project"
jayahariv,2019-07-11 22:19:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/edd10a84a620afa1e00acfeec4f994e338d728ea,edd10a84a620afa1e00acfeec4f994e338d728ea,"fix: include doxygen installation information (#2527)

#2526"
jayahariv,2019-07-03 17:48:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b78ec68670726195a6955ff95833c66aefd7741f,b78ec68670726195a6955ff95833c66aefd7741f,"submodule update

-Subproject commit 09601444d15d2c2e68a5366d98e6c65f30fc8ccf
+Subproject commit 00aee2143b835aae87b29aa23e3f92116f8e47c6"
jayahariv,2019-07-01 22:28:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ddfa43fa2e82cd9c89ea3d0baeb5f9f9d22abca3,ddfa43fa2e82cd9c89ea3d0baeb5f9f9d22abca3,"CBSE-6945: fix: show appropriate message when db not open (#2524)

* query when the db is not open case handled.
* corrected the replicator test variable using Int instead if the NSUInteger"
pasin,2019-06-25 17:21:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6004780b0218ffb0d3c039829da25ad3da401016,6004780b0218ffb0d3c039829da25ad3da401016,"Move CouchbaseLite-EE.exp to EE repo (#2522)

* Moved CouchbaseLite-EE.exp to EE repo and renamed the file to CouchbaseLite.exp.
* Changed the CBL_EXPORTED_SYMBOLS_FILE in Project_Release_EE.xcconfig to point to the moved file."
pasin,2019-06-24 23:54:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d610214a74d000ffe77d14c173e82cc42070349,5d610214a74d000ffe77d14c173e82cc42070349,Move Predictive Query Codes to EE repo (#2521)
jayahariv,2019-06-24 21:28:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27ea59c85973d67e8ef83922f779d2913423d152,27ea59c85973d67e8ef83922f779d2913423d152,Merge branch 'master' of https://github.com/couchbase/couchbase-lite-ios
jayahariv,2019-06-24 21:28:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7747f053c31372a9424d39aab7ce9602a64fc731,7747f053c31372a9424d39aab7ce9602a64fc731,"fix: hide internal class

* hide internal class from exposing."
pasin,2019-06-22 05:32:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ba311fa0185205f5f5dd0141e5e5e7bcfc460818,ba311fa0185205f5f5dd0141e5e5e7bcfc460818,Update lite-core submodule
jayahariv,2019-06-21 20:29:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6604886f2a4ae768e2e1201b3598c7433ebaab16,6604886f2a4ae768e2e1201b3598c7433ebaab16,"CBL-109:  fix: remove specific branch name (#2520)

* remove specific version number from title, cocoapods(will anyways gets the latest) and carthage(same)."
jayahariv,2019-06-21 20:03:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98b0d76e332db8dab81828e08618e1f268b16b27,98b0d76e332db8dab81828e08618e1f268b16b27,"submodule commit

-Subproject commit 485cf85c399d0ba577adce6f16c34a041964eec0
+Subproject commit b6e953da3aa5008c06a33d6ce46c526b40a1a5ea"
jayahariv,2019-06-21 18:05:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3ed9c0d0bb611d010e9bca3d4c505abdb25258ac,3ed9c0d0bb611d010e9bca3d4c505abdb25258ac,"submodule update

-Subproject commit fddc6a89a78f645e3c629d4253ba2b770167b92d
+Subproject commit 485cf85c399d0ba577adce6f16c34a041964eec0"
jayahariv,2019-06-21 17:59:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce00ea409285a5ecb0e5a6189c8f0e68ae141ab2,ce00ea409285a5ecb0e5a6189c8f0e68ae141ab2,"fix: expose protocols (#2518)

* fix: expose other protocols

* * unexpose the Fragment and MutableFragment

* * expose for consistency"
pasin,2019-06-21 17:59:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/727e7e28a542f360c521567eaca2e74bccfaa806,727e7e28a542f360c521567eaca2e74bccfaa806,"Fix CBL-107 Swift xcode editor crash due to BridgingConflictResolver (#2519)

* BridgingConflictResolver referenced to CBLConflictResolverProtocol which is not visible publicly in CouchbaseLiteSwift.framework, as a result, the swift xcode editor couldn’t fine the definition of CBLConflictResolverProtocol and crashed.

* Briged between Swift and Objective-C conflict resolver by using Resolver Block instead. The bridging resolver class calling to the Resolver Block is done internally in Objective-C"
jayahariv,2019-06-21 17:42:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c14efeb60244c502d6b9676dcdb08d2fd767ec5,0c14efeb60244c502d6b9676dcdb08d2fd767ec5,* expose for consistency
jayahariv,2019-06-21 17:33:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/53ea4443399fe1fb3af030b45f313603d494241d,53ea4443399fe1fb3af030b45f313603d494241d,* unexpose the Fragment and MutableFragment
jayahariv,2019-06-21 17:31:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62f777d5c6a775f9d306c40df154ec1bec0fde0e,62f777d5c6a775f9d306c40df154ec1bec0fde0e,fix: expose other protocols
jayahariv,2019-06-20 22:49:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a681f39ec97c78cf6a7eec317f8e19938957b19,9a681f39ec97c78cf6a7eec317f8e19938957b19,"fix: change resolution to resolve (#2517)

* updated class to adopt the naming of ConflictResolve.default
* removed the ConflictResolution class, which we copied to ConflictResolver class.
* swift we named the protocol with a suffix, and objc kept same name for both.
* updated tests with changes
* make default conflict resolver instance a singleton
* make conflict resolver a final class
* comments updated"
pasin,2019-06-20 20:03:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fe7737f72a9d8a1fa54b10f96158ae5f1e711956,fe7737f72a9d8a1fa54b10f96158ae5f1e711956,"Fix VALID_ARCHS mapping warnings (#2516)

Removed VALID_ARCHS manual settings to use the default valid arcs automatically determined by the SDK parameter of the xcodebuild command."
jayahariv,2019-06-19 18:44:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b69dd036472d71bf89b5130405188cf7bfbdf958,b69dd036472d71bf89b5130405188cf7bfbdf958,"fix: only one warning about skip resolution (#2515)

* only one log per conflict skipping.
* return success, in case of no conflict in the document
* reset & update error merged
* refactor"
jayahariv,2019-06-17 23:22:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a5b853af9169473df74a1c24ad59115f6d8fa30,7a5b853af9169473df74a1c24ad59115f6d8fa30,* fix test case failure
jayahariv,2019-06-17 20:28:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8063fe98a1734b4fe989fe100cd2479a2766af3d,8063fe98a1734b4fe989fe100cd2479a2766af3d,* remove reduntant save document method call
jayahariv,2019-06-17 20:23:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dfd1433153dc1f31df7cd05f704a4d4464627fcf,dfd1433153dc1f31df7cd05f704a4d4464627fcf,Merge branch 'master' of https://github.com/couchbase/couchbase-lite-ios
jayahariv,2019-06-17 20:23:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e0b67658d7ea6bcd48ad9869a28f19bbd93a544,3e0b67658d7ea6bcd48ad9869a28f19bbd93a544,* fix: minor refactoring
jayahariv,2019-06-17 20:22:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d216a357eea00087f115eb902985be97068ba904,d216a357eea00087f115eb902985be97068ba904,"unit: purge when resolver (#2513)

* check behavior of purge doc during resolver
* needs a CBLNotFOund error"
jayahariv,2019-06-17 20:22:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f5f53e3cf0a2cb383c959d9f4da8a9ce9a0819ba,f5f53e3cf0a2cb383c959d9f4da8a9ce9a0819ba,"CBL-73: unit: purge during conflict resolution (#2512)

* check purge during conflict resolver returns NotFound error"
jayahariv,2019-06-17 18:39:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f5c9be4acf27343273a1314de83cef7ac9725e7,1f5c9be4acf27343273a1314de83cef7ac9725e7,"fix: minor mistakes

* spelling, un-assignment of variables are handled with this.
* more checking for sequence numbers in deleted cases."
jayahariv,2019-06-17 18:02:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0aea1e73c8bc85f7c19ff7c80d410fb694f1aaf2,0aea1e73c8bc85f7c19ff7c80d410fb694f1aaf2,* fix unit test which was breaking
jayahariv,2019-06-16 14:45:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b27dd68cb21b8435b23b14a6b1b56a8eba569432,b27dd68cb21b8435b23b14a6b1b56a8eba569432,"submodule update

-Subproject commit 5f3c48831ef00009af8bd3641e9b20db242032c6
+Subproject commit fddc6a89a78f645e3c629d4253ba2b770167b92d"
jayahariv,2019-06-15 01:16:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f1b67da5f27d4174f30ba19e22709443667358ca,f1b67da5f27d4174f30ba19e22709443667358ca,fix: string format makes test fail
jayahariv,2019-06-15 01:13:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c7c8d1c2197d0fc86483d25add8b4eeda4670c8,9c7c8d1c2197d0fc86483d25add8b4eeda4670c8,"fix: error message update (#2511)

* update error message with more clear"
jayahariv,2019-06-15 01:01:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8fe53d91708f4d0cde6d9dc9cb52a8449bf59697,8fe53d91708f4d0cde6d9dc9cb52a8449bf59697,"CBL-73: unit: test blob from different db (#2509)

* check added similar to objc test.
* message also validated when error returned."
jayahariv,2019-06-15 00:41:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c18ce65d1eafdf7f8a33d604955b996fd2b28d0c,c18ce65d1eafdf7f8a33d604955b996fd2b28d0c,"CBL-73: unit: double conflict (#2510)

* check which one saves the doc
* check second one is throwing a warning with no conflict."
pasin,2019-06-14 23:21:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b09f2d2f51b1dbcb406fbdddd46bd46b0841f41,6b09f2d2f51b1dbcb406fbdddd46bd46b0841f41,"Format codes to use one line spacing

Formatted codes to use one line spacing for both objc and swift."
jayahariv,2019-06-14 21:12:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9814264695a545e11a73f1e3ec5a5df1f7ab4110,9814264695a545e11a73f1e3ec5a5df1f7ab4110,"CBL-73: unit: non blocking conflicts (#2508)

* removed this test previously, since we updated the logic to incorporate this. so adding it back.
* add swift and objc"
pasin,2019-06-14 21:11:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1553aaef1592ca1d952b44cde93f1adbdb4016d6,1553aaef1592ca1d952b44cde93f1adbdb4016d6,Correct comment in the conflict resolution test code
pasin,2019-06-14 21:07:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c4c6ab99d752e6ad1d24dd80fe2444c4baf5762,4c4c6ab99d752e6ad1d24dd80fe2444c4baf5762,"Remove suspending cancel state (#2507)

* Removed suspending cancel state and change the logic to use _cancelSuspending variable to signal resuming after suspended.
* Added some comments to flag variables"
pasin,2019-06-14 18:26:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ed759341bb64b50cd0788d79ccf5df8e5488566,1ed759341bb64b50cd0788d79ccf5df8e5488566,"Fix break point in replicator tests when an exception is thrown (#2506)

* Wrapped the replicator tests that have an expcetion thrown in either ignoreException() or expectException() so that the tests will not be breaked.
* In ReplicatorTest.run(), check if the replicator is stopped or not before calling stop() to avoid the warning message."
pasin,2019-06-14 18:25:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05d74d077f6bfc0b14d813c9a6ba821625fe77a0,05d74d077f6bfc0b14d813c9a6ba821625fe77a0,"Separate started state into running and offline state (#2505)

* Separated started state into running and offline state so that the state can identify when the replicator is offline.
* Renamed kCBLStateUnsuspending to kCBLStateSuspendingCancel.
* Rearraged logic in c4StatusChanged:.
* Add description comment to each state"
jayahariv,2019-06-14 17:14:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da5969e092ff0ed29bb09cb71a5e61f645c62d53,da5969e092ff0ed29bb09cb71a5e61f645c62d53,"CBL-72: unit: throws an exception in save-handler (#2499)

* when exception thrown in save handler, it should show a warning log. and fail the save.
* add warning message.
* update comments in save method"
pasin,2019-06-14 03:07:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a8a062b55415b8c63f94875cfa5cf1ae611b36a,9a8a062b55415b8c63f94875cfa5cf1ae611b36a,"Made conflict resolution concurrent and defer stopped until done (#2504)

* Refactor the replicator to use a state enum
* Make conflict resolution concurrent and defer stopped until done
* Fixed per code review"
jayahariv,2019-06-13 02:24:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f2cd0edfecffcec1212fa0aa108a9019fced8eb,0f2cd0edfecffcec1212fa0aa108a9019fced8eb,"unit: save handler twice (#2501)

* check scneario with save handler called twice."
jayahariv,2019-06-13 02:22:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/907b24e4a8a2c94773ac9d76edd720cc3ad8124b,907b24e4a8a2c94773ac9d76edd720cc3ad8124b,"CBL-72: unit: check save handler with deleted old doc (#2500)

* check the deleted old doc test in swift
* check for keeping deleted and non-deleted doc."
jayahariv,2019-06-13 02:18:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e031986416778069e3fd41c51f3f4349fff63eee,e031986416778069e3fd41c51f3f4349fff63eee,"unit: when document purges - save handler - swift (#2498)

* save handler when document is already purged, should return NotFound error, since the file already purged."
jayahariv,2019-06-13 02:14:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5564832390ebceaeec1986726b4f25996e67cf4d,5564832390ebceaeec1986726b4f25996e67cf4d,"unit: save handler cancel in swift (#2497)

* check when save handler return false, in swift .
* Tests folder kept near the folders, and files below the folder for objc.
* rename the cur to use doc for save handler test method.
* minor open bracket kept same line and not next line."
jayahariv,2019-06-13 02:14:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/695cb2fe24bc090a41d91474d986c56f21a5e282,695cb2fe24bc090a41d91474d986c56f21a5e282,"unit: non blocking db operation (#2496)

* make sure, conflict resolution is not blocking any db opertions."
jayahariv,2019-06-13 02:10:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ac2023cb5e10eb1cdff9fe351476bc1ccee4877f,ac2023cb5e10eb1cdff9fe351476bc1ccee4877f,"fix: error caught and update ReplicatedDocument.error (#2495)

* previously, if the error happened during the conflict was not updating the existing c4Error. Now updated.
* add test to verify if the blob which is from a different database saved, returns error which traverse back to document-replication-listener."
jayahariv,2019-06-13 02:05:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ff099f07383866325effc2cd83d9d0ea688c45d,9ff099f07383866325effc2cd83d9d0ea688c45d,"unit: check resolver returning blob (#2494)

* check whats the behavior when resolver returns the doc with and without blob.
* since the doc.toDictionary() comparison is not working, we did validated the contents via key-values."
jayahariv,2019-06-13 02:02:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0dc142355cddee1afaf432ca21aeced2551abf70,0dc142355cddee1afaf432ca21aeced2551abf70,"unit: correct wrong doc id test swift (#2493)

* corrected the wrong doc id test case
* extracted customLogger from logTest and kept separate, so we can validate any log messages
* validated the warning log when there is a wrong doc-id is passed and resolves"
jayahariv,2019-06-13 02:02:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/15ae05ff7679c3bf3b885495a8e8a84d091bd343,15ae05ff7679c3bf3b885495a8e8a84d091bd343,"unit: default resolver for swift (#2492)

* check the default conflict resolver logic.
* add one more case in objc and swift with deleting the local and saves the remote with higher generation."
jayahariv,2019-06-11 04:54:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70e31647e348ba689dae95539b6e4576f1a1e07d,70e31647e348ba689dae95539b6e4576f1a1e07d,"unit: swift unit tests for replication events (#2485)

* validated whether there is only single events are fired when document replication custom conflict resolution happens, and when CCR exception is thrown(skips the ccr)."
jayahariv,2019-06-11 04:50:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e35bf2a72e282b029b9e4f9bd17cb50df9cea384,e35bf2a72e282b029b9e4f9bd17cb50df9cea384,"feat: update custom conflict resolution for objc (#2486)

* added document id in the conflict model.
* wrong doc-id handling updated with warning message and no error thrown.
* Extracted out the custom-logger helper class to verify the log messages.
* verified wrong-doc-id is sending warning logs as well as no error thrown.
* swift conflict model updated
* disable swift unit tests and enable via a separate PR"
jayahariv,2019-06-11 04:50:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1b3af1286c280fc186f79a0ac153156eee4d85b,c1b3af1286c280fc186f79a0ac153156eee4d85b,"fix: remove invalid test (#2491)

* remove the invalid test"
jayahariv,2019-06-11 00:27:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee1ca990e0fcf0dcc7fef99cad649c2562c804d5,ee1ca990e0fcf0dcc7fef99cad649c2562c804d5,"fix: database alias issue (#2490)

* alias was using twice, after the SelectAll(withAlias), we were again passing in the alias. which duplicated the alias.
* removed the redundant test
* updated the lite-core to latest."
jayahariv,2019-06-10 22:55:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/89cb3694c76afca4efcf64bf4de3f65678b68158,89cb3694c76afca4efcf64bf4de3f65678b68158,"fix: replicator queue add (#2488)

* changed the replicator to use an independent serial queue instead of the database queue.
* added test to verify the database operations are not blocked due to this serial queue.
* reverted the replicator to use separate queue"
jayahariv,2019-06-10 21:46:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2666aa8e15d8e340b4bc3ef9ff7747842dde5f43,2666aa8e15d8e340b4bc3ef9ff7747842dde5f43,"unit: blob test (#2489)

* check when blob is added to local and remote, but resolved remote and local.
* check when resolved local or remote with blob.
* check when resolved with newly created doc with blob."
jayahariv,2019-06-10 21:45:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c8236ecb751b6e770dce668ed52475cd32fd4111,c8236ecb751b6e770dce668ed52475cd32fd4111,"unit: exception cases handled (#2478)

* exception cases handled with wrong-doc-id, different-db, and exception thrown inside custom conflict method.
* unlike objc, swift is not showing memory isssue with conflict handler thorwing method."
jayahariv,2019-06-10 21:45:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dce28c5a664a36279e77d4723108317e9d6b22b0,dce28c5a664a36279e77d4723108317e9d6b22b0,"unit: validate the behaviour when saving a purged doc (#2480)

* validated the behavior, also make sure we can create the same docID for creating new."
jayahariv,2019-06-06 19:45:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f37b6c47cbbbf1794ccda6072bb80e3b802cda8e,f37b6c47cbbbf1794ccda6072bb80e3b802cda8e,"revert: submodule commit

-Subproject commit 6be086e373efbcbd8c4cfa147f9854bf961e411c
+Subproject commit 92b24bd5a3847d2bafdbd68f6e4df44694daea9c

* since the latest changes are breaking CBL"
jayahariv,2019-06-06 18:54:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43c572719520f8719be6edf9b7c5747b119e2b16,43c572719520f8719be6edf9b7c5747b119e2b16,"unit: cancel conflict handler (#2465)

* check with/without update to the current document if we return false from the conflict handler, how the save behaves."
jayahariv,2019-06-06 18:52:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d15b3387f6bbca6f37366710cb7366fc72ac9746,d15b3387f6bbca6f37366710cb7366fc72ac9746,"unit: deleted old doc (#2466)

* keeping the new doc when old doc is deleted.
* keeping the old deleted doc, and ignoring the new changes."
jayahariv,2019-06-06 18:49:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c5ba2e6c1396598850e1814d38ea51b53bcfdbc9,c5ba2e6c1396598850e1814d38ea51b53bcfdbc9,"unit: resolver read from/to config (#2475)

* check whether we can set or get conflict resolver to/from config.
* cannot check whether it is readonly, since setting readonly will result in fatalError."
jayahariv,2019-06-06 18:48:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87182e77497a48146ad6ea71033a2d0000207f2c,87182e77497a48146ad6ea71033a2d0000207f2c,"unit: merged doc swift (#2476)

* swift version of the merged doc test case"
jayahariv,2019-06-06 18:43:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5a7cdca474eb807ae093524d53218bd97220887d,5a7cdca474eb807ae093524d53218bd97220887d,"unit: resolver called twice (#2477)

* swift test to validate when resolver is conflicted and called twice working fine.
* added helper methods which needs to be removed before merging. or at least one of these set of methods should be merged."
jayahariv,2019-06-06 18:42:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0694135f6a86d3d186cd79284532a02730f98ac4,0694135f6a86d3d186cd79284532a02730f98ac4,"unit: conflict handler called twice (#2479)

* add conflict handler to be called twice test."
jayahariv,2019-06-06 17:43:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e871a292be0e3a4961753752bdfe7cbfc0dbfd0,1e871a292be0e3a4961753752bdfe7cbfc0dbfd0,"sub: submodule update

-Subproject commit 0a13079b670ce2924e4a81a141c6689c648be958
+Subproject commit 6be086e373efbcbd8c4cfa147f9854bf961e411c"
jayahariv,2019-06-06 03:33:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81009e8c2cd700c3fa7c2a9b4d7f46f232ef801a,81009e8c2cd700c3fa7c2a9b4d7f46f232ef801a,"unit: test conflict resolver (#2464)

* check if return true and when some updates are done."
jayahariv,2019-06-06 03:31:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f152df3bf276c5602784ebc7fdb87961fc5b20b1,f152df3bf276c5602784ebc7fdb87961fc5b20b1,"unit: non-blocking resolver (#2462)

* validate the non blocking by making the first document to sleep.
* then second document should resolve in between.
* order should be doc1(whichever is resolved first) will start, doc2(whichever resolves second) will start, doc2 ends, doc1 ends."
jayahariv,2019-06-06 03:28:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/39219ca7f228f8aca6073c87180c3ff73a09e8fc,39219ca7f228f8aca6073c87180c3ff73a09e8fc,"unit: default resolution check (#2463)

* check the default resolution logic
  * when generation is different
  * when one revision is deleted.
* equality check with the success revision also added"
jayahariv,2019-06-06 02:15:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e6b8a99cea83740fce3e397ca3c8e9459237fcf,9e6b8a99cea83740fce3e397ca3c8e9459237fcf,"refact: replicator test (#2474)

* refactored the class, and kept the custom conflict in separate class
* kept the replicatorTest alone in with only helper class.
* replicatorTest_Main & replicatorTest_CustomConflict are the new classes."
jayahariv,2019-06-06 02:12:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2ea43e1435ef6d96e862f52501bc3739f961a4b,c2ea43e1435ef6d96e862f52501bc3739f961a4b,* fix build error
jayahariv,2019-06-06 01:55:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/945db2caafc14ccb18341e84121305ba77f5e397,945db2caafc14ccb18341e84121305ba77f5e397,"unit: check replicator listener events (#2458)

* when conflicts happens, make sure there is only single event is fired.
* validated when exception happens and when resolver succeeds"
jayahariv,2019-06-04 21:17:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84a6220f9e0f374a50b070438b04fc808d12b21b,84a6220f9e0f374a50b070438b04fc808d12b21b,"refact: clean check (#2482)

* checking database exists, can be done only for the exception case, not necessary to assign the database, since the database has no role in conflict resolution."
jayahariv,2019-06-04 17:41:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2d0b805f31396befe04fc24d0c134fc73b5db9f,e2d0b805f31396befe04fc24d0c134fc73b5db9f,"unit: verify the sequence-id to check whether to push resolved  (#2456)

* config function accepted the type parameter, to re-use the configs.
* sequence check logic changed in other-DB"
jayahariv,2019-06-03 23:02:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a707c3ef765c9e3bbe21d3e8936577961ae967b,1a707c3ef765c9e3bbe21d3e8936577961ae967b,"fix: exception in conflict handler (#2472)

* exception in conflict handler was not handling properly before.
* now it handles and returns conflict error, with save error.
* returns NO, and conflict error.
* test case added but disabled due to memory issue when exception thrown from the block."
jayahariv,2019-06-03 23:01:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c43fcfaf995f8592a3f519a3769819a7f0d15ba,8c43fcfaf995f8592a3f519a3769819a7f0d15ba,"fix: no transaction required (#2469)

* while reading the latest document from the db. no need for transaction since c4doc_get doesn't require it.
* remove transaction when reading in database save handler"
jayahariv,2019-06-03 22:56:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/161a41b6039023192c2ec26ca3f75a5fc72d72b0,161a41b6039023192c2ec26ca3f75a5fc72d72b0,"fix: empty slice as body is crashing when pushing the doc (#2470)

when doc is pushed back to remote, the crash happened due to fromData(s) == nullptr.
fixed by handling the .NET way"
jayahariv,2019-06-03 22:55:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05984841aee9b25ec3a0ff557654b66f0c70bc03,05984841aee9b25ec3a0ff557654b66f0c70bc03,"fix: get doc expiry cause an error (#2471)

*  since cocoa not throws exception in this case.
* update lite-core sub-module"
jayahariv,2019-06-03 22:54:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/396e8de2596754ae3e770966c35db5d53a4fe73e,396e8de2596754ae3e770966c35db5d53a4fe73e,"fix: purge during save conflict (#2473)

* when purge happened during save, we should return NotFound error.
* should also return save false, which is already doing."
jayahariv,2019-05-30 02:06:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf0116b0caf3bdcd3b8740ff998b81246988d4cb,bf0116b0caf3bdcd3b8740ff998b81246988d4cb,"remove logging, since the replicator failure is fixed"
snej,2019-05-29 16:35:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81b0869387bc74d62852e219bcdb7322d7dd8279,81b0869387bc74d62852e219bcdb7322d7dd8279,"Merge pull request #2467 from couchbase/fix/failureHandle

fix: on save handler false - return conflict error"
jayahariv,2019-05-28 17:30:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e74b3df60c0977eebbe762a9c018332d9d604aa8,e74b3df60c0977eebbe762a9c018332d9d604aa8,"* remove the assertion for not nil, when document returned from the conflict-handler method."
jayahariv,2019-05-28 17:27:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3cb8b52e6fb3f08748f126d7e8258d609283e0b,e3cb8b52e6fb3f08748f126d7e8258d609283e0b,Merge branch 'master' of https://github.com/couchbase/couchbase-lite-ios into fix/failureHandle
jayahariv,2019-05-24 23:13:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d702185dae5a3015dee3ba1d24f9f8261a43123b,d702185dae5a3015dee3ba1d24f9f8261a43123b,"fix: on failure should return conflict

* on false from save handler, error object shouldn't be empty.
* return conflict error on fail."
jayahariv,2019-05-24 22:27:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c7901328779f7c7b94841208e72431c4f779c0c,3c7901328779f7c7b94841208e72431c4f779c0c,"unit: add exception when resolution cases (#2457)

* exception when wrong doc-id
* exception when wrong database instance. 
* exception from resolve method seems to be causing memory leaks, since the @try @catch in objc causing memory issues.
http://clang.llvm.org/docs/AutomaticReferenceCounting.html#exceptions"
snej,2019-05-24 22:23:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e9101f7693464864de589f97cf64a94e0c6cf92e,e9101f7693464864de589f97cf64a94e0c6cf92e,"Merge pull request #2452 from couchbase/feat/exposeDictionary

feat: expose dictionary"
snej,2019-05-24 22:22:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7040257079c621d894a7cc83a9327fe05e128cfe,7040257079c621d894a7cc83a9327fe05e128cfe,"Merge pull request #2455 from couchbase/unit/mergeDoc

fix: issue with newly created doc without database"
snej,2019-05-24 22:00:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b54a35606c0af598e33a844eb398a77c454e16b5,b54a35606c0af598e33a844eb398a77c454e16b5,"Merge pull request #2461 from couchbase/unit/resolveTwice

unit: resolver function called twice"
jayahariv,2019-05-23 23:33:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6a256b578eb2171213c15b02122f8c424a1b036,e6a256b578eb2171213c15b02122f8c424a1b036,nits: format
jayahariv,2019-05-23 23:30:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d3653269e6f64c36044532a5df195d8addb17c1,3d3653269e6f64c36044532a5df195d8addb17c1, made sure the resolve is called twice
jayahariv,2019-05-23 23:28:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da9ca0b4595c70a04e0175f32227d91228a7acd3,da9ca0b4595c70a04e0175f32227d91228a7acd3,"unit: resolver method twice

* make sure the resolver will call twice."
jayahariv,2019-05-22 20:23:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/93eca2fb24d519b7d273909e35fdb9822e50e72f,93eca2fb24d519b7d273909e35fdb9822e50e72f,"sub: lite-core update

-Subproject commit ca04c898fa71b03938df8ef4fca791cb791f4d7d
+Subproject commit 614b594ce170a897df77b2242c9eae8a0d2d41d4"
snej,2019-05-21 23:17:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da85a6994e6921a12db2a38574d091b5f94d1677,da85a6994e6921a12db2a38574d091b5f94d1677,"Merge pull request #2460 from couchbase/fix/queryTestMove

fix: query test refactor caused it to run twice"
jayahariv,2019-05-21 19:50:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f566548cd3cccefd016ed2b0a67a7c8e8a672ae,5f566548cd3cccefd016ed2b0a67a7c8e8a672ae,"fix: query test refactor casued it to run twice

* querytest +Join and +Meta which were inherited from the parent was using all the super class tests to run with it.
* removed the tests from parent and only used the shared methods in the QueryTest.m implementation.
* added the tests in QueryTest+Main.m."
jayahariv,2019-05-15 19:28:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a8576346c1b50e69e7c17dde80f7155aaee26db,8a8576346c1b50e69e7c17dde80f7155aaee26db,fix: test failure due to invalid check
jayahariv,2019-05-14 21:54:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75d89100060a4db40548f057d9741e3c94d8cd3c,75d89100060a4db40548f057d9741e3c94d8cd3c,"fix: issue with newly created doc without database

* when newly created docment was returned from the resolve, it will lack the database, handled that scenario by assigning the local-doc.database.
* add merge document conditions to handle, local, remote and newly document returns from the resolve method."
jayahariv,2019-05-13 18:31:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ace4f65aed396dcdde7ea0d24d8b279f5daa65c1,ace4f65aed396dcdde7ea0d24d8b279f5daa65c1,"refactor: replicator test class (#2451)

* refactored the replicator class, so that we can reuse and start dividing up the replicator tests.
* already >2000 lines.
* add merge-doc unit test.
* makeConflict function added to avoid the duplication of code."
jayahariv,2019-05-10 04:51:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b212b469000a936e243fd126789662dbbeec2ae8,b212b469000a936e243fd126789662dbbeec2ae8,feat: expose dictionary
jayahariv,2019-05-08 17:25:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f78e003127a5ce654659d18ff4f96a88e3d685c,0f78e003127a5ce654659d18ff4f96a88e3d685c,"unit: add basic unit tests for custom conflict - swift (#2443)

* add basic unit tests for localWin, remoteWin, localDelete, remoteDelete, noDeleteButReturnNil"
jayahariv,2019-05-08 16:55:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a630a815bf3aefa44fcd1f8d1d628c53b03389a2,a630a815bf3aefa44fcd1f8d1d628c53b03389a2,"feat: database save conflict handler implementation in swift (#2435)

* save conflict method called from swift
* implemented the save conflict method in swift
* added one unit test to validate."
jayahariv,2019-05-07 18:54:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96ce975221754c66fbbd40d867af1f54116e5929,96ce975221754c66fbbd40d867af1f54116e5929,"unit: add basic unit tests for custom conflict - objc (#2441)

* test conflict handler with remote win, local win, delete local , delete remote
* name the tests and made consistent with document
* kept the resolver as constructor."
snej,2019-05-07 18:51:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3178ab8746b2f8c646d7b627b31647d6bd9bd872,3178ab8746b2f8c646d7b627b31647d6bd9bd872,"Removed timeout checks from CBLWebSocket (#2447)

LiteCore is handling timeouts now"
snej,2019-05-07 18:51:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f51786f6af412ee28ff7c231ae33bd894128a48,2f51786f6af412ee28ff7c231ae33bd894128a48,"Fix for heartbeat, checkpoint intervals not getting set (#2445)

Fixes #2442"
jayahariv,2019-05-06 21:59:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/721d7c6055439db64488bbf026f067343891b664,721d7c6055439db64488bbf026f067343891b664,"feat: custom conflict resolution implementation in Swift (#2434)

* add conflict handler property in config
* add conflicts files in EE module map"
jayahariv,2019-05-06 20:13:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92de17ffbba9d3a23f05ee467d994522693487f1,92de17ffbba9d3a23f05ee467d994522693487f1,"feat: custom conflict error handling (#2446)

* when the conflict happens, it shouldn't immediately respond with failure. It should send only for documents which finished processing. else wait and send response when it is done/
* kept separate array and added to it, since removing requires search through algorithm or shifting.
* added functions to avoid the same repetition"
jayahariv,2019-05-03 23:31:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea7e7a9ada0fb017c1c81b814a7f8eca378a4e15,ea7e7a9ada0fb017c1c81b814a7f8eca378a4e15,"fix: query column title correction (#2422)

* removed the workaround and added the fix for the query column title issue.
* fixed the issue with selectResult with alias in Swift."
jayahariv,2019-05-03 22:42:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40d60d826f137dc72d89beae38f4ca73010ccc7c,40d60d826f137dc72d89beae38f4ca73010ccc7c,"feat: custom conflict resolution implementation in ObjC (#2431)

* adds interface for ConflictResolver, ConflictResolution
* adds the default conflict resolution static function.
* adds property to the replication configuration instance. not handled the property for now.
* add resolution into concurrent dispatch queue, from the replicator.
* add deleted case"
jayahariv,2019-05-03 18:27:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd2af77d0cb30d982d317b3af66f98f09349473a,dd2af77d0cb30d982d317b3af66f98f09349473a,Update README.md (#2440)
jayahariv,2019-05-03 01:17:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77ed98f945fed5f2fb5984a72e11cc1aebb8bfe6,77ed98f945fed5f2fb5984a72e11cc1aebb8bfe6,"feat: database save conflict handler implementation in ObjC (#2432)

* add method to save with conflict handler.
* rebased with base revision."
jayahariv,2019-05-02 22:45:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f170ff6c2b83c854f0a042ab62b62ba0bd310189,f170ff6c2b83c854f0a042ab62b62ba0bd310189,"unit: add uniary missing checks (#2412)

* validated the result when checking for not null or not missing with  function."
jayahariv,2019-05-02 22:45:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b5ce899e43255535decd6ae4b86c5e9b5e418ee,7b5ce899e43255535decd6ae4b86c5e9b5e418ee,"refact: query test class (#2423)

* separated the class into three, (i) QueryWithMeta will include all tests on meta, (ii) QueryWithJoins include all tests for Join statements and (iii) QueryTests include all the remaining.
* couldn't find anything else to keep them separate, as the tests are getting increased and the class is growing quickly. made us to reduce the size from 2500 to 1800."
jayahariv,2019-05-02 17:40:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6ae73982afe84cfeba65a5f174f9854426f038cb,6ae73982afe84cfeba65a5f174f9854426f038cb,"doc: update script to reflect the latest README (#2436)

* update script to reflect the latest README
* remove README from the Support section"
pasin,2019-04-30 19:42:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ec81fd5b1e0418fc1b82c3f9e76822bec7431c1,9ec81fd5b1e0418fc1b82c3f9e76822bec7431c1,Update README.md
pasin,2019-04-30 19:19:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d0660176dcd2cf89667fde1590b69846b84d0c9,2d0660176dcd2cf89667fde1590b69846b84d0c9,Update couchbase-lite-core
jayahariv,2019-04-29 23:02:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de2d6582253d6ceaa9c478ea50ed620dbfeae995,de2d6582253d6ceaa9c478ea50ed620dbfeae995,"fix: console log not printing

* checks why the console logs are not printing, might be because of the xcpretty. hence we disable the XCPretty and try"
jayahariv,2019-04-24 22:21:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c209d021ce2e83d8e7dd107e50ac67284cf13c57,c209d021ce2e83d8e7dd107e50ac67284cf13c57," debug: replicator intermittent issue (#2426)

* enable logging since the replicator is showing some intermittent issue"
jayahariv,2019-04-24 16:41:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cbe1b1581cdb69191782d7f0ed3f06eeb2d15926,cbe1b1581cdb69191782d7f0ed3f06eeb2d15926,"debug: add logs in push filter (#2425)

* add logs to unit tests so that we can identify next time it happens."
pasin,2019-04-19 18:28:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/460e4709aa731441b3c420eb5ac53ad9aaec95fd,460e4709aa731441b3c420eb5ac53ad9aaec95fd,"Fix XCode couldn’t resolve precessor definition correctly (#2421)

* Instead of using variable (EE_PP_DEFS) for declaring COUCBHASE_ENTERPRISE variable, defining COUCBHASE_ENTERPRISE directly.
* Added GCC_PREPROCESSOR_DEFINITIONS_DEF to storing the default setting.
* Reformat the file.

#2419"
jayahariv,2019-04-18 17:25:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/15e981429093ec7130dec962248c6277784000c5,15e981429093ec7130dec962248c6277784000c5,"refact: more readable (#2414)

* more readable and clear statements.
* include inner join and join. check for number2 as well as number1.
* add comments to the select statements, to distinguish between select and selectDistinct."
jayahariv,2019-04-18 01:05:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5969074d68bc7370f7ff393b746b3fa9297bc624,5969074d68bc7370f7ff393b746b3fa9297bc624,"unit: add check for remaining query result (#2409)

* unit: add check for remaining query result

* add check for number, integer, longLong, boolean, date, and float

*  adds double in the query result checking"
jayahariv,2019-04-18 01:05:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e504a11fa6f0ef57adfe02f1928f21c39e85f507,e504a11fa6f0ef57adfe02f1928f21c39e85f507,"unit: add misc cpp tests (#2410)

* there are a few tests in CPP, which needs to be done from cpp test class itself. so kept a common test file with cpp tests in it.
* convertError method was not tested with some valid and invalid test scenarios."
jayahariv,2019-04-17 20:12:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee11e1ec998da0542814aae2ad9f685536064f2c,ee11e1ec998da0542814aae2ad9f685536064f2c, adds double in the query result checking
jayahariv,2019-04-17 18:08:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa77b0d17366897847b34bc2a3bb52334332a924,aa77b0d17366897847b34bc2a3bb52334332a924, conflict resolved when merging
jayahariv,2019-04-16 17:16:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c34a7430dfa73a5b58ad931f06ad87361a2dc71,3c34a7430dfa73a5b58ad931f06ad87361a2dc71,"fix: unwanted check removed (#2418)

* removed the unwanted check, which always succeed."
jayahariv,2019-04-16 17:16:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7e21156bf5a6b1feaf7a2f3fd22fffd2566d07d9,7e21156bf5a6b1feaf7a2f3fd22fffd2566d07d9,"refact: code cleanup (#2416)

* add pragma marks, group the related functions
* will separate the class into multiple classes if needed, after discussing."
jayahariv,2019-04-16 17:15:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d440bbb765c3439150c6c549c8b91bb7f35ac7e7,d440bbb765c3439150c6c549c8b91bb7f35ac7e7,"refact: remove unused function (#2413)

* removed the function convertExpires from the class. which was used before #2016 and now it is not used."
jayahariv,2019-04-16 17:14:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4cf4c0acfd165ecc74e4adc01c2e75fb50ce2d6a,4cf4c0acfd165ecc74e4adc01c2e75fb50ce2d6a,"unit: replicator config setter methods (#2411)

* add replicator config setter methods verification.
* helper method added for getting the certificateID."
jayahariv,2019-04-16 17:14:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9410a84df6ee602227ebcc43d370a11d4bd6aa1,f9410a84df6ee602227ebcc43d370a11d4bd6aa1,"unit: check the maxRotateCount (#2415)

* made the max-rotate-count to 2 and validated with 2KB of logs."
jayahariv,2019-04-16 17:13:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02991ea00b050c48e59d488678d0f68c1109f039,02991ea00b050c48e59d488678d0f68c1109f039,"unit: check the method with init tests (#2408)

* check for dataWithJSONObject and stringForJSONObject"
jayahariv,2019-04-10 22:06:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/edceba3a57fc3854f4967d8e82870dae307b789c,edceba3a57fc3854f4967d8e82870dae307b789c,"unit: add check for remaining query result

* add check for number, integer, longLong, boolean, date, and float"
pasin,2019-04-10 07:00:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86452eadea263b6f0efa443d1c1926f391b8c9a2,86452eadea263b6f0efa443d1c1926f391b8c9a2,"Not reformat the log message in logCallback() (#2407)

The log message has been reformatted so there is no need to reformat (which doesn’t take care of % character).

#2405"
pasin,2019-04-10 06:42:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b791c2a7bf7615be7cba80ed8a8d9a944b99610a,b791c2a7bf7615be7cba80ed8a8d9a944b99610a,"Fix select all with database alias (#2406)

If the title string is '*' or has '* #' as the prefix, fallback to 2.1.x approach by getting the column name from the SelectResult.columnName."
pasin,2019-04-03 20:26:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96930456037418e6abf7e0941c2c073c6b4a8b81,96930456037418e6abf7e0941c2c073c6b4a8b81,Update license files
pasin,2019-04-02 18:22:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/181992884a7d94236afc35528a6fb0e585892a5a,181992884a7d94236afc35528a6fb0e585892a5a,"Update API docs for LogLevel and LogDomain

Updated API docs for LogLevel and LogDomain"
pasin,2019-04-02 17:59:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e06197bcc9b3d0af7754549be5c0b803bebef54b,e06197bcc9b3d0af7754549be5c0b803bebef54b,"Changed from Developer Preview to Uncomitted

Changed from Developer Preview to Uncomitted to match CB Server."
jayahariv,2019-04-10 03:12:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/301302b043190a2814d92890d643f72c7f7f4dd6,301302b043190a2814d92890d643f72c7f7f4dd6,"unit: test join by docID (#2404)

* add test which is failing in dot net to validate the failure."
jayahariv,2019-04-06 13:18:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6473f5e5ea0adb0429cd78fdc60eac5ceea6ec3d,6473f5e5ea0adb0429cd78fdc60eac5ceea6ec3d,"unit: query parameter test for array & dictionary (#2395)

* check for array, blob, and dictionary
* add constructor in the test case, so that it returns a valid QueryParameter with another instance. via.,`[[CBLQueryParameters alloc] initWithParameters: <params>];`"
jayahariv,2019-04-06 13:13:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/195f5448550d41708da3afef0b48ed303e531110,195f5448550d41708da3afef0b48ed303e531110,"unit: check query result (#2397)

* add checking for query result for array, dictionary, subscripted with index and key, keys.
* checking for multiple types can be done after merging the students loading PR."
jayahariv,2019-04-06 13:13:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b3dc5c87e4413fb5e3c18b19564f96f4a37ad3a5,b3dc5c87e4413fb5e3c18b19564f96f4a37ad3a5,"unit: check misc functions (#2400)

* check for CBLFileExistsError method.
* check by adding an existing file to same location and validated the error.
* check by adding an invalid file location and validated the inverse.
* remove unused methods"
jayahariv,2019-04-06 13:08:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f622967bed7e67b8ff6334c93a495a35db2a404,1f622967bed7e67b8ff6334c93a495a35db2a404,"unit: check base64 encoder decoder (#2401)

* add base64 encode-decode unit tests with basic tests.
* no false case where added."
jayahariv,2019-04-06 13:05:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fac7c3705a3823fda37e132c565a1f9b811bde14,fac7c3705a3823fda37e132c565a1f9b811bde14,"unit: check the trustCheck class (#2399)

* use the self signed certificate for trust check. it should return a valid credentials instead of nil.
* updated the self signed certificate, since it's expired.
* add SSL policy, which will reject the self signed certificate when check trust.
* refactored and kept the trust check methods into separate file.
* refactored code to get the certificate, trust and anchor cert array all together.
* check for pinned certificate."
jayahariv,2019-04-06 13:03:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c94d6fea9a49bf7775fdc1ef70f006a49037e8c7,c94d6fea9a49bf7775fdc1ef70f006a49037e8c7,"unit: check parse date (#2398)

* check parse date with a known date string and double return value."
jayahariv,2019-04-06 02:51:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d6d14bd065d2763ab4ede96153375497f693483e,d6d14bd065d2763ab4ede96153375497f693483e,"unit: query params set method (#2392)

* add type setter with string, integer, number and value.
* made most of the simple tests into a single function.
* remaining are dictionary, blob and array which will be added as separate function, so that we don't over crowd.
* wrote a loadStudents method for validating different types."
jayahariv,2019-04-03 21:50:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78dad7a901fb142280d5d091225d9eecf8fb3378,78dad7a901fb142280d5d091225d9eecf8fb3378,"unit: validate valueExpression (#2396)

* check the JSON conversion with different types of input.
* validate if there is any invalid type is passed in."
jayahariv,2019-04-01 20:46:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/299fc21560e903b0f0dc64100838ed7590ff82eb,299fc21560e903b0f0dc64100838ed7590ff82eb,"unit: check authenticate method (#2391)

* check authenticate method for the basic and session authenticator"
jayahariv,2019-04-01 19:28:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bff0b21d07b20ef377066076876e56242930deea,bff0b21d07b20ef377066076876e56242930deea,"unit: query result array add coverage (#2390)

* add coverage for query result array"
farktronix,2019-04-01 17:13:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16269397b4b9f928452aa7bd3bed527a4cb90fd7,16269397b4b9f928452aa7bd3bed527a4cb90fd7,Convert to Swift 5.0 (#2386)
pasin,2019-03-29 18:15:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d00a2cb71e5da65183a61fc7d7b31cf383c34c96,d00a2cb71e5da65183a61fc7d7b31cf383c34c96,"Fix AddressSanitizer issue in CBLFileLogger’s apply method

* Created CBLStringBytes directory outside C4LogFileOptions’s initializer scope.

#2393"
jayahariv,2019-03-27 19:20:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1e9c21585a6cce715870e493395c3e3bad4cd41,c1e9c21585a6cce715870e493395c3e3bad4cd41,"unit: fragment missing test cases (#2389)

* add fragment test cases"
jayahariv,2019-03-27 19:12:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f627b11a23a54190d3d62c847f6beaf187db9df2,f627b11a23a54190d3d62c847f6beaf187db9df2,"unit: dict and doc type setter methods (#2387)

* add tests for CBLMutableDictionary
* add tests for type setter methods."
jayahariv,2019-03-27 18:35:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e275b6a44568eb8d2c36da2522892e81c89baff5,e275b6a44568eb8d2c36da2522892e81c89baff5,"unit: check creation of document replicator (#2388)

* creation of CBLDocumentReplicator and CBLReplicatedDocument."
jayahariv,2019-03-26 20:56:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7612dad12ed8b177de288880e5892728ba4298bc,7612dad12ed8b177de288880e5892728ba4298bc,"unit: check replicator listener (#2384)

* unit: check replicator listener

* verify the add document listener returns a non null reference to token.

* unit: remove listener tests

* remove listener tests and add filter tests
* since the coverage was more uncovering than adding."
pasin,2019-03-26 19:27:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94c5768150bd84ae60d255cf40aa010ac9c0271f,94c5768150bd84ae60d255cf40aa010ac9c0271f,"Update xcode version in .travis.yml

Updated xcode version to 10.2"
pasin,2019-03-26 18:58:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27c1c9559f48d0eceec14a10de6d1d381347685a,27c1c9559f48d0eceec14a10de6d1d381347685a,"Update project settings to 10.2

Updated project settings to 10.2"
jayahariv,2019-03-26 18:25:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/195a3750855886be8fd4bb2168b4ae639d3d432a,195a3750855886be8fd4bb2168b4ae639d3d432a,"unit: query builder join tests (#2383)

* add test for select(distinct) from join where groupby having.
* select from join where groupby having orderby limiyt
* select from join where orderby"
jayahariv,2019-03-26 18:25:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7d21a2011c482fae8d45973f777513b58d9c5d2,b7d21a2011c482fae8d45973f777513b58d9c5d2,"unit: add missing method check individually (#2385)

* add{Type} methods were not verified in the unit tests.
* set{Type}:atIndex were not verified in the unit tests.
* insert{Type}: atIndex: were not verified in the unit tests."
jayahariv,2019-03-23 07:16:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ef18def773dd56521bdf3cd04e7a87d41d0ca40,1ef18def773dd56521bdf3cd04e7a87d41d0ca40,"unit: improve query builder code coverage  (#2379)

* add select from where groupby tests
* add select from where orderby tests
* add select from where groupby having
* add everyones respective distinct methods too."
pasin,2019-03-22 21:56:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3cea2c629b3e9de84ee5245348d91e0001a3f099,3cea2c629b3e9de84ee5245348d91e0001a3f099,"Fix CBLLog callback log message fomatting issue

* Used c4slog() instead of c4log() as we have already preformatted the log message.
* Sent the log messages directly to callback loggers (console logger and file logger) after calling c4slog() as c4slog() will not call the log callback.
* Added unit tests."
pasin,2019-03-20 16:40:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00abd1bb6179b34c66f836cb960068b31d91f321,00abd1bb6179b34c66f836cb960068b31d91f321,"Tag Predictive Query as Developer Preview (More)

Tagged Predictive Query as Developer Preview."
pasin,2019-03-20 16:30:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75ef9f88545c46f2bf199f2d621ece85afea04a9,75ef9f88545c46f2bf199f2d621ece85afea04a9,"Tag Predictive Query as Developer Preview

Tagged Predictive Query API as Developer Preview."
pasin,2019-03-18 05:42:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96d4eebd5cf272d216c43789a1263d640fbc2dd8,96d4eebd5cf272d216c43789a1263d640fbc2dd8,"Improve generate_release_zip.sh

* Cleaned project derived data directory.
* Ignored Tests folder when generating code coverage report"
pasin,2019-03-16 05:22:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87fbf3f523c2622aabafc9ad05deb448d6ac1abc,87fbf3f523c2622aabafc9ad05deb448d6ac1abc,"Update coverage zip file name

Seperated coverage zip file name between EE and CE."
pasin,2019-03-16 01:29:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c4e1330432c092ce30952a11bb3812cd82f6d332,c4e1330432c092ce30952a11bb3812cd82f6d332,"Use slather to generage coverage report

Updated generage_release_zip.sh to use slather to generage code coverage reports."
pasin,2019-03-14 20:27:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/224ac6541477b927771615901b53966df80cf726,224ac6541477b927771615901b53966df80cf726,"Fix checking reachability bug that prevents retry logic

Fixed if condition check that prevents to retry after becoming online again. This is a regression bug.

#2372"
pasin,2019-03-21 16:56:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fe62a5d2c23492c013e706f81472c0000d8e507e,fe62a5d2c23492c013e706f81472c0000d8e507e,"Fixed #2373 : Upgrade Swift Version to 4.2 (#2381)

* Upgraded Swift Version from 3.3 to 4.2.
* Updated SWIFT_OPTIMIZATION_LEVEL to -O (Release) and -Onone (Debug)
* Updated SWIFT_COMPILATION_MODE to wholemodule (Release) and singlefile (Debug)"
jayahariv,2019-03-21 09:19:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94972376dc0766f8dc9aaa16a99c67250df31857,94972376dc0766f8dc9aaa16a99c67250df31857,"unit: add more query builder tests (#2380)

* add join where tests
* add distinct join tests"
pasin,2019-03-20 21:30:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c578b0b364f1d9d99837e9399a59385e126a68e,3c578b0b364f1d9d99837e9399a59385e126a68e,"Add -Wunguarded-availability to enable API availability warning

* Added -Wunguarded-availability to enable API availability warning for iOS target < 11 or macOS < 10.13.
* Noted that -Wunguarded-availability-new for iOS target >=11 and macOS >=10.13 is ON by default.

#1804"
jayahariv,2019-03-19 17:21:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e5345d94906385be8550aec129c69568eeeedb82,e5345d94906385be8550aec129c69568eeeedb82,"unit: imporve coverage for QueryBuilder (#2378)

* increase code coverage for the CBLQueryBuilder from 25% to 37.50%"
jayahariv,2019-03-19 17:12:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5b3e76c30d8aff7004421fb4b733680822707e59,5b3e76c30d8aff7004421fb4b733680822707e59,"unit: update slather script (#2377)

* avoid unit tests files, which was improving the test results by 10-15%
* add more tests for Authenticator."
pasin,2019-03-11 21:31:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3214698c156f1c65f078c5067da6db540600c2a1,3214698c156f1c65f078c5067da6db540600c2a1,Update version number to 2.6.0
pasin,2019-03-07 21:12:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74e8ac18b71259df8333297907df1050bfa92eda,74e8ac18b71259df8333297907df1050bfa92eda,"Add Input Transformer to CoreMLPredictiveModel

Added the Input Transformer to CoreMLPredictiveModel so that the input can be transformed as well as the output."
pasin,2019-03-05 19:44:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/350586f597b67144b2267c068ef1cc4e9f2c9eb1,350586f597b67144b2267c068ef1cc4e9f2c9eb1,"Add output transformer to CoreMLPredictiveModel

Added output transformer to CoreMLPredictiveModel for transforming prediction output."
pasin,2019-03-05 15:54:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84b70b6cc31ca614873f94f4980b6e15fbb87e72,84b70b6cc31ca614873f94f4980b6e15fbb87e72,"Make Swift CoreMLPredictiveModel class open

Maded Swift CoreMLPredictiveModel class open so that it can be overriden by a different module."
pasin,2019-03-05 02:07:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb5972ce6392285ed6df7a651b2530bb210c3d52,bb5972ce6392285ed6df7a651b2530bb210c3d52,"Update log messages in CBLReplicator

Updated log messages in CBLReplicator to log when start, stop, and retry."
pasin,2019-03-05 01:56:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ff2684078b4d51de6b4d28bff037b4320151363,1ff2684078b4d51de6b4d28bff037b4320151363,Update couchbase-lite-core submodule
pasin,2019-02-28 23:10:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/197a48ece43fc7c856f4e851460c82b793f5f57b,197a48ece43fc7c856f4e851460c82b793f5f57b,Update version number to 2.5.0
pasin,2019-02-28 23:09:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/261959b0b7f9de641b08f51145e6aa5920a65759,261959b0b7f9de641b08f51145e6aa5920a65759,Update couchbase-lite-core submodule
pasin,2019-02-26 19:06:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b1ad8082b11caebd9b93d39e8b84f47ea6fc9f9,6b1ad8082b11caebd9b93d39e8b84f47ea6fc9f9,"Update unit tests to cover Int, Int64, true, false tests

* Updated Document and PredictiveQuery unit test to cover both Int and Int64.
* Updated PredictiveQuery unit test to cover both boolean true and false."
pasin,2019-02-26 19:04:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e37dc4dd30c172cbf2cbee389de6d12e345e966,0e37dc4dd30c172cbf2cbee389de6d12e345e966,Update couchbase-lite-core submodule
pasin,2019-02-23 19:53:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8a6a2c36da42d91d0541796be6e07e51b3428ef,a8a6a2c36da42d91d0541796be6e07e51b3428ef,"Fixed testSquenceDataConversion availability

Used if (@available(macOS 10.14, iOS 12.0, *)) instead."
pasin,2019-02-23 04:39:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e1d7e4dba2494ebdc4da4e3c104216efae6d7164,e1d7e4dba2494ebdc4da4e3c104216efae6d7164,"Fix MacOS EE build issue that requires to link with CoreImage

In the CoreMLPredictiveModel, we have used CoreImage to handle PixelBuffer conversion. For some reason, it’s required to explictly link to the framework."
pasin,2019-02-22 20:57:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49a897f450008e349f8372d7e5a8293ae862c4e1,49a897f450008e349f8372d7e5a8293ae862c4e1,"Implement Core ML Predictive Model (#2366)

* Implement Core ML Predictive Model

* Automatically converted b/w CBL data and Core ML data when calling into the MLModel object to return prediction results. All Core ML data types including Int64, Double, String, Dictionary, MultiArray, Image, and Sequence are supported.

* When the MLObject has a single input and the input type is Image, CoreMLPredictiveModel will use Vision framework via the VNCoreMLModel to process the input image and call into the MLObject object to return the prediction result. If the condition doesn’t meet, the regular MLModel will be used.

* When using VNCoreMLModel, all VNObservation types including VNClassificationObservation, VNCoreMLFeatureValueObservation, and VNPixelBufferObservation are supported. However there is a limitation for supporting VNCoreMLFeatureValueObservation and VNPixelBufferObservation that the MLModel must return a single output as currently there is no way to map the result from VNCoreMLModel back to MLModel if the output are multiple.

* When converting blob data to VNPixelBuffer for an input image, only ARGB pixel format is currently supported. However this limitation is applied only when the VNCoreMLModel cannot be used.

#2282"
pasin,2019-02-16 06:02:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/519ae8ac25791605b8240f1e1c38bf30c6ff72de,519ae8ac25791605b8240f1e1c38bf30c6ff72de,Update couchbase-lite-core submodule
jayahariv,2019-02-15 21:49:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/775bac3bd79599d5adb76e7261413fdafff8f53a,775bac3bd79599d5adb76e7261413fdafff8f53a,"sub: update submodule

* update submodule core to - 69943106eec379ef140aafca9c2469f8531674be"
jayahariv,2019-02-13 23:17:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef6b6f50ae62984a64ef960ed0e0c167e2649e79,ef6b6f50ae62984a64ef960ed0e0c167e2649e79,"sub: update submodule

* update submodule with fix for bidirectional conflicts"
pasin,2019-02-08 17:28:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ac16dfee2aedaab6f18b5225667d9cb29fa8cf5b,ac16dfee2aedaab6f18b5225667d9cb29fa8cf5b,Update couchbase-lite-core
pasin,2019-02-06 03:47:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/122e8a3988a519663f9540ea0215da31d02524fc,122e8a3988a519663f9540ea0215da31d02524fc,"Fix xcpretty crash on non ascii text on jenkins

Set export LC_CTYPE=en_US.UTF-8 when using xcpretty."
jayahariv,2019-02-05 19:44:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4dde6b3ea2c5acda20e69e2879c576a8619cb015,4dde6b3ea2c5acda20e69e2879c576a8619cb015,submodule: update the submodule
pasin,2019-02-05 06:03:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b2bca367b0ae860a5a4f5f2db67f8f9a88f53457,b2bca367b0ae860a5a4f5f2db67f8f9a88f53457,"Commented out sleep workaround in Swift ReplicatorTest

* Commented out sleep workaround in Swift ReplicatorTest
* Ensured to delete otherdb in ReplicatorTest.setup()
* Added TODO: marker to cleanup later"
pasin,2019-02-05 05:54:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d327b9844385ca55ff12702da23cfd4dec3cea51,d327b9844385ca55ff12702da23cfd4dec3cea51,"Reset console log level to default in LogTest

Reset console log level to warning after test."
pasin,2019-02-05 05:53:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/589edd295dd55c90c5ef808c2ad4693a4b896cc8,589edd295dd55c90c5ef808c2ad4693a4b896cc8,"Cleanup QueryTest

Deleted testCrossJoin2 which is for testing."
pasin,2019-02-05 04:33:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf3ae8eafb66586ad151065d30ebac9a55863499,cf3ae8eafb66586ad151065d30ebac9a55863499,"Remove writing test logs to files in generate_release_zip.sh

As Jenkins will wipe out the workspace on every run, writing the test logs to files doesn’t give us much benefits."
pasin,2019-02-05 04:30:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1a06a24cd809ca871425b5d404e47e1c8db764b,c1a06a24cd809ca871425b5d404e47e1c8db764b,"Remove assertion check when deleting the database

If the database doesn’t exist, deleting the database will return false."
pasin,2019-02-04 23:45:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c46a2b0b52b03720ecc6c14cc1b53afd7e60ac4,2c46a2b0b52b03720ecc6c14cc1b53afd7e60ac4,Add an option to use xcpretty in build script
pasin,2019-02-04 23:00:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9e38e6a1e3fe92bdaa65173b72b027ed102ff90,c9e38e6a1e3fe92bdaa65173b72b027ed102ff90,Make sure to delete otherdb in ReplicatorTest’s setup
pasin,2019-02-04 22:21:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e4afbe417773760c5baf3bb1dd4c4dd20c11276,2e4afbe417773760c5baf3bb1dd4c4dd20c11276,"Fix generate_release_zip.sh

Removed -quiet from running build_frameworks.sh"
pasin,2019-02-04 21:58:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/acb004168d54a87a0be173847f8a99b590ebbe1c,acb004168d54a87a0be173847f8a99b590ebbe1c,Disable some tests to investigate test failures on Jenkins
pasin,2019-02-04 19:31:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ac4517162400d7b0a5291bbf2482326b7aa43c58,ac4517162400d7b0a5291bbf2482326b7aa43c58,"Fix Swift QueryTest failure

Changed to use ${n} for expression/function columns."
pasin,2019-02-04 19:11:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36b2e371f24e59b7e35c9da27152cedf15cf1bfa,36b2e371f24e59b7e35c9da27152cedf15cf1bfa,"Fix QueryTest failure

Changed to use ${n} for expression/function columns."
pasin,2019-02-04 18:40:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a519f18549a90c2d23e98e04a76249372bc62f26,a519f18549a90c2d23e98e04a76249372bc62f26,"Comment out sleep workaround in ReplicatorTest

Commented out sleep workaround in ReplicatorTest to see if the tests could be passed on Jenkins."
pasin,2019-02-04 18:29:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/577de9d16a56f8a59a5a503e682d91f97a5727a8,577de9d16a56f8a59a5a503e682d91f97a5727a8,Update couchbase-lite-core submodule
pasin,2019-02-02 21:26:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c86c6ad1b316539d2e1e05033487b5f733a35ac,4c86c6ad1b316539d2e1e05033487b5f733a35ac,"Fix date time function name in Swift (#2362)

Fixed date time function name in Swift to match the query language."
jayahariv,2019-02-01 07:03:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5bf87ccf10c9960da5b6fe741f1c3050d0a06797,5bf87ccf10c9960da5b6fe741f1c3050d0a06797,"fix: assert param for non-null (#2359)

* assert param for non-null in CBLQueryResult"
jayahariv,2019-02-01 07:02:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/06855a03da6cb774c373fb797afaa783033156e0,06855a03da6cb774c373fb797afaa783033156e0,"fix: query parameter type (#2358)

* corrected the array, dictionary and blob type as optional."
jayahariv,2019-02-01 07:02:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7ec04ece9d0d8cab6d572475419350806b10151d,7ec04ece9d0d8cab6d572475419350806b10151d,"fix: assert the parameter non-null check (#2357)

* assert the parameter non-null check in CBLDocumentFragment"
jayahariv,2019-02-01 07:01:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/54e1a9a4ddcdb7327e9eb192e4d49492a5f669b4,54e1a9a4ddcdb7327e9eb192e4d49492a5f669b4,"fix: assert non-nullable param check (#2356)

* assert non-nullable param check in CBLDictionary"
jayahariv,2019-01-31 20:40:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f97465af37e07666230cfe0ebda381697f7f142c,f97465af37e07666230cfe0ebda381697f7f142c,"fix: document-id assertion removed

* since the document id is validated in the constructor, we will remove duplicate checking."
jayahariv,2019-01-30 19:17:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/212040bbbf7842be71da46fb128a91893bc9a6a3,212040bbbf7842be71da46fb128a91893bc9a6a3,"feat: add non-null check for parameters (#2354)

* added the null check for parameters."
jayahariv,2019-01-28 22:25:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d1aa11c84f78638a34719d676d1a7998f0f5fb2,3d1aa11c84f78638a34719d676d1a7998f0f5fb2,sub: update submodule
snej,2019-01-28 21:58:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/34d73df44357539a3b380167a79708bd40831eb9,34d73df44357539a3b380167a79708bd40831eb9,"Fixed an unused-code warning from Xcode 10.2

Xcode 10.2b1 complains about one line in CBLVersion.m, saying “code
will never be executed” because the result of the strcmp call is
known at compile time, which means the result of the ?: is also
known. (IIRC, the ability to evaluate strcmp et al at compile time
is a new Clang feature.)
Clang suggested wrapping parens around the 0 to mark the expression
as explicitly unused, so I did so."
snej,2019-01-18 00:42:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7099d0209c38bb9e54252c6f6b996eea62ad1693,7099d0209c38bb9e54252c6f6b996eea62ad1693,Fixed a typo in CBLDatabase.h doc-comment
jayahariv,2019-01-28 20:27:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c4240e6181989a9052addc8fa3b6e910302cc093,c4240e6181989a9052addc8fa3b6e910302cc093,"ci: exit with same status as xcodebuild (#2352)

* CI systems usually use status codes to determine if the build has failed. When used with xcpretty it always returns zero."
pasin,2019-01-27 05:00:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bfe8692c385511a51b51bbe4518ec9daa50a0e43,bfe8692c385511a51b51bbe4518ec9daa50a0e43,"Update README.md

Added license badge"
pasin,2019-01-27 04:55:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f4207ab0c7dbc0a8695686749b45affb526b20b,3f4207ab0c7dbc0a8695686749b45affb526b20b,"Update README.md

* Added code coverage badge"
jayahariv,2019-01-26 21:27:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a48609d7bf8af191989f553c9d1350a7bbadfd7,8a48609d7bf8af191989f553c9d1350a7bbadfd7,"ci: coveralls (#2350)

* add coveralls
* enable slather for ObjC"
pasin,2019-01-25 21:36:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8286676a6df7d94d83d382a153e7f33a822cbf67,8286676a6df7d94d83d382a153e7f33a822cbf67,"Change to use OptionSet type for ConsoleLogger.domains (#2349)

Instead of using Set<LogDomain>, changed to use OptionSet."
jayahariv,2019-01-25 18:50:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c0e10b9b5738a98a3e31619482eb68b8029a9075,c0e10b9b5738a98a3e31619482eb68b8029a9075,"ci: reformat the output (#2347)

* code folding removed, as that doesn't give advantages. and needs to unfold for every build, analyze steps.
* if all build, analyze is grouped to form one build and one analyze, this was helpful. but in our case, this is not helping.
* reverting to the old format."
jayahariv,2019-01-24 23:44:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c4edd0bca629103fc2e6c5112e545ad8744d13b,8c4edd0bca629103fc2e6c5112e545ad8744d13b,Submodule commit.
pasin,2019-01-24 19:26:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9353b41f5a5ff059b0b49e2311c39f92f3fc297,a9353b41f5a5ff059b0b49e2311c39f92f3fc297,"Add warning message when file logging is not configured (#2345)

* Add warning when file logging is not configured

* Added warning when file logging is not configured. The warning will display only once when a database instance is created. The warning message will not show more than once even there are multiple databases created.

* I have tested it manually for both Swift and Objective-C. I was not able to write a unit test as we always have a default testing database opened in the base test class’s setup.

#2344

* Update file header"
jayahariv,2019-01-24 05:16:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ae1f10a04131a68d499ecc514a87ebdc9f91bd2e,ae1f10a04131a68d499ecc514a87ebdc9f91bd2e,"ci: adds the xcpretty (#2343)

* made the ObjC and Swift as parallel process
* added xcpretty with travis formatter"
pasin,2019-01-23 23:24:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/345147bbc0f8529a429d0bc7f3baab4c71c2cba3,345147bbc0f8529a429d0bc7f3baab4c71c2cba3,"Remove in-transaction check in postDatabaseChanged (#2342)

We don’t need to check if the database is in transaction before posting the notification as LiteCore will post the change after the transaction is done. Checking in-transaction could also cause missing notification when there is a transaction opened on another thread.

#2291"
pasin,2019-01-23 08:45:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be676759baf35d45ac70718606a57c0401feb156,be676759baf35d45ac70718606a57c0401feb156,Update README.md
pasin,2019-01-23 03:26:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c46f99a2a24b8a975da201f0bcb0f58066fdce70,c46f99a2a24b8a975da201f0bcb0f58066fdce70,"Refactor CBLBlob to inline the implementation

* Refactored CBLBlob to inline the implementation with .NET and Android.
* In -jsonRepresentation, when there is no digest, add data into the dictionary.
* Simplified fl_encodeToFLEncoder as the logic is handled in -jsonRepresentation.
* Created constant variables for digest, length, and content_type."
pasin,2019-01-23 01:59:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efd7ebe9ad234dd94b7938851cebfa770b5ad9a7,efd7ebe9ad234dd94b7938851cebfa770b5ad9a7,"Update warning message in CBLBlob

Updated warning message when there is no digest nor content."
pasin,2019-01-22 03:00:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/448a92c7a5affaa4f6317aef2fdb1c4f3c40f7eb,448a92c7a5affaa4f6317aef2fdb1c4f3c40f7eb,"Fix Blob metadata not preserved in predictive query parameters (#2341)

* Fix Blob metadata not preserved in predictive query parameters

* Encoded blob in parameters as blob properties + content instead of content only.

* Updated TextModel in unit tests to check the content type of blob.

#2320"
pasin,2019-01-22 02:58:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d216c187c3815c7653a9fcabb4813615552af71d,d216c187c3815c7653a9fcabb4813615552af71d,"Update .travis.yml to build only master branch (#2340)

* Added master to the safelist branch in .travis.yml."
jayahariv,2019-01-19 04:52:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0c7cd20d07c951cca425bb7725c48e3c25f5a66,d0c7cd20d07c951cca425bb7725c48e3c25f5a66,"fix: travis yml file add (#2338)

* added travis yml file."
jayahariv,2019-01-19 00:22:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c80cf16f59213f65762d2d28da08c72518af0e4c,c80cf16f59213f65762d2d28da08c72518af0e4c,"test: check non-ASCII character set (#2337)

* check non-ascii character set in the logs.
* add tests for swift and objc
* checking the hebrew sentence"
jayahariv,2019-01-19 00:22:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c3685e9183ef0d835bc3857b1fcc672531d97dad,c3685e9183ef0d835bc3857b1fcc672531d97dad,"fix: removed doc test (#2336)

* swift test case was using un-edited document instance, corrected it.
* enabled test in swift
* removed push test case for removed document."
jayahariv,2019-01-19 00:21:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d8ec9e0e5293d0fb16d9ba38daae7ef05329e00f,d8ec9e0e5293d0fb16d9ba38daae7ef05329e00f,"test: check stop and restart the replication with filter (#2330)

* check stop and restart scenario
* add tests in swift and objc
* enabled the tests"
pasin,2019-01-19 00:18:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6070c96b5e04553165d917d6180f78141ecf33e3,6070c96b5e04553165d917d6180f78141ecf33e3,"Some minor fixes per PredictiveQuery code review

While reviewing predictive query code, I have made some minor fixes."
pasin,2019-01-19 00:16:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/189a32a0ce8ae6dc136d71531d89b4be6f560cc6,189a32a0ce8ae6dc136d71531d89b4be6f560cc6,"Tag enterprise API doc

Tagged enterprise API doc with “ENTERPRISE EDITION ONLY”."
jayahariv,2019-01-18 21:12:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21ef70da1cd13129e50172be0a994bacbdbe2bb9,21ef70da1cd13129e50172be0a994bacbdbe2bb9,"fix: Unit test failure (#2332)

* fixed the unit test failure by making the folder name a random one.
* issue was removing the folder to logs, while logging keeps happening."
jayahariv,2019-01-18 21:11:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7bab5e880717af58060b2a0a003d35bb1f865edf,7bab5e880717af58060b2a0a003d35bb1f865edf,"fix: issue witjh filenme in seconds (#2333)

* fixed the issue with filename in seconds instead of milliseconds
* enabled both swift and objc"
jayahariv,2019-01-18 21:11:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81b729217b0512d2c4ce1c6a70aaeecf9a69a9d6,81b729217b0512d2c4ce1c6a70aaeecf9a69a9d6,"fix: deleted doc progress issue (#2334)

* deleted doc progress issue is fixed and hence enabled the tests.
* enabled for both swift and objc"
jayahariv,2019-01-18 21:10:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/591366e0536c13782393a5869db544bd1a88ff43,591366e0536c13782393a5869db544bd1a88ff43,"fix: replicator flag setting corrected (#2335)

* replicator flag was setting to LiteCore flag value.
* enabled the objc test."
pasin,2019-01-18 04:05:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4fcc5adf1e2bd3f523421e1a7da89fa6174f08e4,4fcc5adf1e2bd3f523421e1a7da89fa6174f08e4,Update couchbase-lite-core submodule
pasin,2019-01-18 01:30:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dcf67851c4e0744383d5db560a1e505365474e7a,dcf67851c4e0744383d5db560a1e505365474e7a,Update couchbase-lite-core submodule
jayahariv,2019-01-16 21:54:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/319509dd0f59d59bc2bd685fc8ed76c12442e41f,319509dd0f59d59bc2bd685fc8ed76c12442e41f,"test: logging tests add (#2329)

* check maxRotateCount.
* check disabled file logging.
* check disable & the enabled file logging. 
* check maxSize & maxRotateCount unit test(disabled for now). 
* check the header includes the `CouchbaseLite/`, `Build/` and `Commit/` texts. 
* added above tests in both swift and objc."
jayahariv,2019-01-16 21:22:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42cdab864bd68fa7c29f0d806dfb58bff41ad91c,42cdab864bd68fa7c29f0d806dfb58bff41ad91c,"test: check replication filter with deleted docs (#2327)

* add test cases for checking the deleted docs in the push filter,.
* add for swift and objc
* disabled the tests since the issue with continuous pull replication."
jayahariv,2019-01-16 20:43:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a37e4b7212b97957a9f4a3128cb072e4aa96473,7a37e4b7212b97957a9f4a3128cb072e4aa96473,"test: check replication filter with removed doc (#2328)

* check the removed doc with the replication filter
* add tests for both swift and objc"
pasin,2019-01-16 18:05:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f23898b0e8b53f08a0dc871e1fe344e810dcc46b,f23898b0e8b53f08a0dc871e1fe344e810dcc46b,Update couchbase-lite-core submodule
jayahariv,2019-01-16 07:21:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a011d81f8068e4db39fdb15efab8cc623f5eba7e,a011d81f8068e4db39fdb15efab8cc623f5eba7e,"doc: update with custom instance set info (#2325)

* when changing a log level of the custom instance, it should be done before setting it to custom. as the synchronize call will happen only on setCustom method."
pasin,2019-01-15 22:49:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25f72a1d423d9184c92e30667de8a1d26b7349e2,25f72a1d423d9184c92e30667de8a1d26b7349e2,"Fix CBLQueryParameter calling wrong base method

Fixed CBLQueryParameter’s setDictionary and setArray calling wrong base method. They should call setValue:forName:."
pasin,2019-01-15 20:19:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f9bf6ea1231e59e9366977e98393f89d7a05a94,0f9bf6ea1231e59e9366977e98393f89d7a05a94,"Implement a new file logger API (#2326)

* Implement a new file logger API

- Implemented a new file logger API a refactor log file related settings into a single configuration file, LogFileConfiguration.

- Updated unit tests.

#2321"
jayahariv,2019-01-15 06:21:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1cf8d0a1ee8015d0bd63ed447f5289faed42fc5,d1cf8d0a1ee8015d0bd63ed447f5289faed42fc5,"test: check custom logger (#2322)

* check disable and enable logging
* check custom logging"
jayahariv,2019-01-15 06:21:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e2a7b348da5d1b125eebed6c2f8f1e97006bf13,0e2a7b348da5d1b125eebed6c2f8f1e97006bf13,"test: check push filter for single shot and continuous replication (#2324)

* check push filter for both single shot and continuous replication"
pasin,2019-01-15 03:54:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d091efe94847f1b03be0d6860696e8350c565d0,2d091efe94847f1b03be0d6860696e8350c565d0,Fix file license headers
pasin,2019-01-11 16:39:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a566ca133b1f14f9a459d8547cad7f76f3d57a24,a566ca133b1f14f9a459d8547cad7f76f3d57a24,"Fixed #2306 default log directory (#2318)

* Fix default log directory

Fixed the default log directory to the followings:

iOS : <NSCachesDirectory>/CouchbaseLite/Logs
Mac: ~/Library/Logs/<BundleID>/CouchbaseLite"
jayahariv,2019-01-11 15:51:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b0f054e78fa608dcea980cb7ff3d871f94f3f89c,b0f054e78fa608dcea980cb7ff3d871f94f3f89c,"test: check filename format  (#2316)

* check log filename for ObjC and Swift"
pasin,2019-01-11 08:07:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1cda15a637fd8fc3638a50aafe3b1a852d92cab7,1cda15a637fd8fc3638a50aafe3b1a852d92cab7,"Fix predictive model bridging between swift and objc

As we cannot declare a Swift class that implements a protocol declared in a private header. Bridged the predictive model by using block instead of using a Swift class that implements CBLPredictiveModel protocol."
pasin,2019-01-10 08:01:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f05f8bc984354a71078b0241a07287ac6496f7cf,f05f8bc984354a71078b0241a07287ac6496f7cf,"Update prediction callback

* Updated prediction callback that includes a new C4Database parameter.
* Changed the way to create CBLDictionary input by creating the CBLDictionary with MDict.
* Updated some data type conversion logic in CBLFleece.mm
* Added a new CBLDatabase’s constructor that takes C4Database. This intends to create a CBLDatabase object in shell mode for holding C4Database object. The CBLDatabase shouldn’t free or close as it will be done by the caller."
pasin,2019-01-11 05:05:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/064b7fa152b1818f2a3fabdad3567e2d997a6a98,064b7fa152b1818f2a3fabdad3567e2d997a6a98,"Fix custom logger bridging between swift and objc

The original approach that create a Swift custom logger class that implements the private CBLLogger protocol doesnt work as Swift compiler needs to read the CBLLogger definition but as the CBLLogger is private, the private CBLLogger.h is not present. This caused an internal error on XCode.

Instead the fix is using custom logger block to bridge b/w swift and objc custom logger."
pasin,2019-01-10 19:10:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0451ccf22f485421db8294432f3001ae55c06150,0451ccf22f485421db8294432f3001ae55c06150,"Fixed CBLLogger target membership

 CBLLogger target membership should be private for CBL Swift."
jayahariv,2019-01-10 18:35:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c37f8c58872d19c60cd351c14dbb052f273579c7,c37f8c58872d19c60cd351c14dbb052f273579c7,"test: add continuous logging unit tests for swift (#2313)

* add tests for default location.
* default log format.
* plain text format."
jayahariv,2019-01-10 18:31:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94edf09b373fb38f9b23ece5bd555a56af428a87,94edf09b373fb38f9b23ece5bd555a56af428a87,"feat: set header as user agent in the file options (#2315)

* set the header key with user agent"
pasin,2019-01-09 17:59:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/df41770a59e95f559f5855673f0bc836f5ac45f6,df41770a59e95f559f5855673f0bc836f5ac45f6,"Fixed #2223: Implement Predictive Index and add more unit tests (#2310)

* Implement Predictive Index and add more unit tests
- Implemented Predictive Index API
- Updated and added more unit tests

* Add API docs for predictive index
- Added API docs for predictive index and some missing API docs for predictive query.

* Fixed per review comments
- Fixed Array allocation size
- Fixed line spacing
- Fixed unit test method name typo
- Made sure to unregister model where possible in unit tests."
jayahariv,2019-01-09 04:28:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/53b31b90de27c9ce91e19252b60b82341c5c2d27,53b31b90de27c9ce91e19252b60b82341c5c2d27,"test: Add continuous logging unit tests for ObjC (#2311)

* test: default location check
* test: check default log format
* test: check plain text format"
jayahariv,2019-01-08 21:54:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35c84f215efedff4dabd3ef6311fb41a56409e96,35c84f215efedff4dabd3ef6311fb41a56409e96,"Fix: Make default file logging binary (#2307)

* fix: Default file logging is binary

* made the default logging as binary in ObjectiveC
* swift is already in binary format.

* fix: objective style corrected

* corrected the style to ObjC"
pasin,2019-01-04 05:59:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cfc7b6607cc6f15a8e820134dccd10bd4be3908f,cfc7b6607cc6f15a8e820134dccd10bd4be3908f,"Update Replication Filter and Document Replication Eventing API

* Added new DocumentFlags for isDeleted and isAccessRemoved flag.
* Updated Replication Filter and Document Replication Eventing API to use DocumentFlags.

#2304"
jayahariv,2019-01-03 23:43:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/886e4d9e7326c5c609243b430b05e630c2a1fb3f,886e4d9e7326c5c609243b430b05e630c2a1fb3f,"feat: Make LiveQuery Atomic (#2301)

* made the liveQuery functions thread safe.
* if the query is released while accessing the liveQuery updates are being fired, we check for query instance and ignore."
pasin,2018-12-22 07:38:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4ae48b9d3e79283f560c8fa60892d658e6fc5227,4ae48b9d3e79283f560c8fa60892d658e6fc5227,"Fix default log file directory

Used cache directory instead of Application Support so that the log files will not get backup.

#2292"
jayahariv,2018-12-22 06:13:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e7250dd8fa79df7c86eee1c60ea02dce7a4df1e,6e7250dd8fa79df7c86eee1c60ea02dce7a4df1e,"Add Test for Replication Eventing - Swift (#2297)

* test: Add test case - Replication Eventing - Swift"
jayahariv,2018-12-22 06:13:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ab3e680523cf87e5fdc0eeeb713a30239252afa,2ab3e680523cf87e5fdc0eeeb713a30239252afa,"Add Test for Replication Eventing - ObjC (#2295)

* Add Test for Replication Eventing"
pasin,2018-12-22 03:05:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d8f12629129be838e883dfadeea5df38e51f762a,d8f12629129be838e883dfadeea5df38e51f762a,"Fixed prediction() function parameter comment

Fixed prediction() function parameter comment as we change the type from Expression to String."
pasin,2018-11-27 16:45:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/691a275e8a1b4fe945c010e43969d3e9c1f1302d,691a275e8a1b4fe945c010e43969d3e9c1f1302d,"Implement PrediciveQuery API

* Implemented PrediciveQuery API except PredictiveQuery
* Added EuclideanDistance, SquaredEuclidientDistance, and CosineSimilarity function for comparing vectors of numbers.
* Added dictionary and array literal expressions.
* Added dictionry, array, and blob parameters."
pasin,2018-12-21 18:50:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8805a81578654b2b0d0688ab2a8b8e9e8534504b,8805a81578654b2b0d0688ab2a8b8e9e8534504b,"Enable DocumentReplicationEventWithPullConflict test

As the issue in LiteCore has been fixed, the test is now passed.

Reference:
https://github.com/couchbase/couchbase-lite-core/issues/643"
pasin,2018-12-21 05:22:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/11c9c6f8448e388588f7ad51a4da770bce76716f,11c9c6f8448e388588f7ad51a4da770bce76716f,"Removed a redundant logging encoded query

Removed a redundant logging encoded query as LiteCore also logs that."
pasin,2018-12-21 05:18:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e376e60c9ae947e161c691be72636ca217b58ccc,e376e60c9ae947e161c691be72636ca217b58ccc,"Fixed the default file logger’s maxSize

The default size is 500KB not 1024B."
pasin,2018-12-20 23:14:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30b8e7b431c35f8d5e2dab63bb6689342a24c58d,30b8e7b431c35f8d5e2dab63bb6689342a24c58d,"Fix build failure when assigning BOOL value to bool

Explicitly casted BOOL to bool."
pasin,2018-12-20 22:34:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f6a98ee80fdfa424fda3d336b3f68f43b2af4b2,9f6a98ee80fdfa424fda3d336b3f68f43b2af4b2,"Disable testStopContinuousReplicator as the test intermittenly fails

testStopContinuousReplicator is failed pretty frequently now when testing stop replicator when the replicator in busy state. Disable the test now for investigation."
pasin,2018-12-13 16:37:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/53ef58530e27e4ba11e64928b9e5e4ba902c440a,53ef58530e27e4ba11e64928b9e5e4ba902c440a,"Implement continuous logging API

* Deprecated Database.setLogLevel(level, domain) API.

* Added new Logger interface for developers to implement a custom logger.

* Added a new Database.log API which allows developers to configure console, file, and custom logger.

* A new file logger has been introduced.  File logger is enabled by default. The default log level is info and the default format is binary.

* A new custom logger via Logger interface that developers can implement and set to `Database.log.custom`. Note that the minimum log level for the custom logger is determined when the custom logger is assigned to the `Database.log.custom` property. If the log level is changed, the custom logger should be re-assigned to `Database.log.custom` property."
pasin,2018-12-20 07:30:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00ec8aaa8bbedb3a2d848ed593810597d533783f,00ec8aaa8bbedb3a2d848ed593810597d533783f,"Update DocumentReplication event API

* Updated DocumentReplication event API to deliver replicated documents in batch.

* Add isDeleted and isAccessRemoved to ReplicatedDocument (#2265)

* Add unit tests to cover push/pull conflicts and isDeleted flag (#2264)"
jayahariv,2018-12-19 21:50:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/37b1967c09c7fe599b68fea323f6726340117ea3,37b1967c09c7fe599b68fea323f6726340117ea3,"Feature/date time function (#2276)

* Add ObjC and Swift implementations to create query functions for str_to_millis, str_to_utc, millis_to_str, and millis_to_utc.
* Made consistent notes with dotnet.
* Add Test case for ObjC
* Add Test case for Swift - DateTimeFunction (#2288)"
jayahariv,2018-12-19 17:59:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4096db72605e2f6b838e93860eb02fa90559040a,4096db72605e2f6b838e93860eb02fa90559040a,"Fix: PurgeExpiredDocs from Serial Queue (#2289)

* Add Test case for checking the DB events in ObjC and Swift
* Do PurgeExpiredDocs from serial DB.dispatchQueue"
jayahariv,2018-12-18 01:16:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/690ef44079c0f53fa8cf08201f5192e7f92b211c,690ef44079c0f53fa8cf08201f5192e7f92b211c,"Feature/doc expiry tests (#2284)

* Add Doc expiry test case
* Add Test for lack of replication
* Purge before Expiry Test Add

link: #2267"
pasin,2018-12-17 18:48:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f3de6b4eecb7de7d2788dfbdba18ccaabde3294d,f3de6b4eecb7de7d2788dfbdba18ccaabde3294d,"Check database opened before purge exp docs in bg (#2285)

* Need to check whether database (_c4db) is still opened before purging the expired doc in the background.
* Add error log when purging is failed."
jayahariv,2018-12-15 01:26:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1321fba28bbd04497fd124b9a57ff024fcc31385,1321fba28bbd04497fd124b9a57ff024fcc31385,"fix: Remove Count from Tests (#2283)

* removed the count variable put in to test whether the document listener is fired more than once.
* as the test cases are now working fine, make sure whether the count has any impact on the tests."
jayahariv,2018-12-13 03:07:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2210ba07bd7237ab1b8a957a4348179deaa1314,e2210ba07bd7237ab1b8a957a4348179deaa1314,"fix: jenkins failure (#2279)

* checking whether the change.database instead of the self.db."
jayahariv,2018-12-13 01:26:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5ab6351b094fc99ee9f1fc911e3a4c3ba681611e,5ab6351b094fc99ee9f1fc911e3a4c3ba681611e,"fix: Jenkins Test Failure (#2278)

* fixing the Jenkins build failure
* added checks for listener in all ObjC & Swift test cases"
jayahariv,2018-12-12 19:22:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2b2423334a73542a0c37e01b0e713caab3fd659e,2b2423334a73542a0c37e01b0e713caab3fd659e,"test: Update with listener count (#2277)

* updated the test with documet listener count, to make sure it is fired once."
jayahariv,2018-12-10 23:01:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85f8def84c4db8c29591d8c93a82ad01b07b3371,85f8def84c4db8c29591d8c93a82ad01b07b3371,"Add more tests (#2275)

* add query after expiration including deleted docs.
* add immediate delete by setting now() test case.

links: #2267"
pasin,2018-12-10 06:30:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dab04f75f19fb94848991ebeb3094cb7736e503e,dab04f75f19fb94848991ebeb3094cb7736e503e,"Remove CBLQueryRow from exp file

* CBLQuery has already been removed from the project so removed CBLQueryRow from the exp files."
pasin,2018-12-10 05:59:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3cc6984cc84422d0d5ea6324f5772de710d9faa2,3cc6984cc84422d0d5ea6324f5772de710d9faa2,"Refactor document expiration tests (#2273)

* Moved document expiration tests into their own file, DocumentExpirationTest.
* Instead of using delay, use DocumentChangeNotification to check when the document is purged after setting expiration. This allows to reduce the overall test time and be more reliable.
* Adjusted some expiry time.
* Sync the test names b/w Objective-C and Swift.

#2271"
pasin,2018-12-09 08:19:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d240214d00259a4bb2580ae6220a0b43ced0933c,d240214d00259a4bb2580ae6220a0b43ced0933c,"Fix generate_release_zip.sh

Fixed the regression that deleted the code that actually zips the framework in 72e2557ed07329f9029abe8f2ce5a754a5cfce1d."
pasin,2018-12-09 07:38:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a67a8244a5db4313cf1e29d97ea77b9ab142dd1,7a67a8244a5db4313cf1e29d97ea77b9ab142dd1,"Fix QueryTest to use milliseconds when query doc expiration

Fixed to query document expiration by using milliseconds instead of seconds.

#2270"
pasin,2018-12-09 07:06:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f1a7e3f98d8a9c881f41ab3600301d724475627c,f1a7e3f98d8a9c881f41ab3600301d724475627c,"Fixed #2270 : Convert from sec to msec and vice versa (#2272)

* Convert from sec to msec when setting expiration date
* Convert from msec to sec when getting expiration date"
pasin,2018-12-09 05:34:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72e2557ed07329f9029abe8f2ce5a754a5cfce1d,72e2557ed07329f9029abe8f2ce5a754a5cfce1d,"Remove building cblite tool from generate_release_zip.sh

As we will release cblite tool seperately, excluded building cblite tool from generate_release_zip.sh."
pasin,2018-12-08 23:21:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc9d0fc728d33e52fdfc2cbcce51d807d510917a,bc9d0fc728d33e52fdfc2cbcce51d807d510917a,"Revert fix that checks whether the replicator has already been started

!_suspended checks is not correct."
pasin,2018-12-08 19:35:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/489df3774ad868370e7439b853ccd6da1c996fcd,489df3774ad868370e7439b853ccd6da1c996fcd,"Fix regression that prevents the suspended replicator to (re)start

Changed the check in the start method to allow the suspended replicator to restart.

#2268"
pasin,2018-12-08 18:59:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebd0596c7ee3e813cff35c6b688a9759ab46efc8,ebd0596c7ee3e813cff35c6b688a9759ab46efc8,"Fixed #2268 : Intermittenly crash in reachability when replicator was stopped after offline

* Called -c4StatusChanged: to change status from offline to stop in the _dispatchQueue
* Called to stop reachability in _dispatchQueue.
* Made sure that in stopping state, the reachability change shouldn’t trigger the retry.
* When the replicator is in offline state, calling start shouldn’t start a new replicator.
* Fixed CBLReachability to setup callback when start and remove callback when stop."
jayahariv,2018-12-07 20:34:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c0131578407810277192cf854c483f74a2535cc,9c0131578407810277192cf854c483f74a2535cc,"Fix: expiration unit test failure (#2259)

* increased the time delay while the rescheduling pf purging happens.
* increased the time delay while the document date is made farther than the current, is working or not. that also seems to tight interval for testing.
* increased the expectation to wait for one extra second, till we finish with the tests."
jayahariv,2018-12-07 20:34:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff71b57233a2e4b0d978e042397e083826156d41,ff71b57233a2e4b0d978e042397e083826156d41,"fix: Building script failure (#2260)

* building through the script was failing due to the type from lite-core. fixed it by changing the type.
* only happens when the framework was built from script."
jayahariv,2018-12-07 19:31:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5d243002b73d87eef6c8f2c3c46e8f0294d92fd,b5d243002b73d87eef6c8f2c3c46e8f0294d92fd,"Fixed #2238 : pinnedServerCertificate memory release issue (#2257)

* certificate was not retained in the constructor, but was doing in the setter method.
* setter method will be called, but when setting the configurtation through the replicator constructor, it was not retianing the certificate, and get deallocated when the allocated configuration object is automatically removed."
jayahariv,2018-12-04 16:50:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fae3792994bca3c777d5931329d7c548d8349c60,fae3792994bca3c777d5931329d7c548d8349c60,"Test: document expiry on deleted docs (#2256)

* updated the time for most of the expiration test case to finish before 4 seconds.
* added test case to check whether to set expiry on a document, which gets deleted after setting the expiry. Made sure they get purged from DB after expiry.
* add test to check whether to set an expiration on a deleted document, and is that gets purged on expiration."
jayahariv,2018-12-04 16:46:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cdeb1cb44de27c854bf518e96fd6167b3231353f,cdeb1cb44de27c854bf518e96fd6167b3231353f,"fix: Build Error Fix (#2255)

* placeholder change not reflected in the test cases"
jayahariv,2018-12-04 13:35:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80e2f3a673d2043fe613655add33d29bbcc7d68d,80e2f3a673d2043fe613655add33d29bbcc7d68d,"Feature/document expiry (#2249)

* expose the documentExpiration set and get methods.
* add test case to check whether the set and get value are correct.
* add test case to check for CBLNotFound error.
* schedule the cleanup when a document is setup with expiration
* make sure the document is getting cleared through the test case.
* check whether the document is not purged before expiry
* schedule timer when opening a db
* remove the timer when closing a db or deleting a db
* setting the timer in main thread run loop, so removing should also be done in the main run loop.
* add more test cases to check for multiple db instances, overriding, reopen.
* strong reference of self is removed and weak is passed to block. fixed the memory leak due to the same.
* fix: Review Comments
* Feature/document expiry for Swift (#2246)
* feature/document expiry Query.Meta.expiration (#2247)"
jayahariv,2018-12-04 13:33:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3230fe13362e4d06a5eb296715a2ecc0e3cd267,d3230fe13362e4d06a5eb296715a2ecc0e3cd267,"Revert ""Feature/document expiry for ObjC (#2244)"" (#2248)

This reverts commit 42321947f57287f59be994c7c8990c5a86b317d9."
jayahariv,2018-12-04 00:15:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42321947f57287f59be994c7c8990c5a86b317d9,42321947f57287f59be994c7c8990c5a86b317d9,"Feature/document expiry for ObjC (#2244)

* expose the documentExpiration set and get methods.
* add test case: to check whether the set and get value are correct.
* add test case: to check for CBLNotFound error.
* schedule the cleanup when a document is setup with expiration
* make sure the document is getting cleared through the test case.
* add test case: check whether the document is not purged before expiry
* schedule timer when opening a db
* remove the timer when closing a db or deleting a db
* add test case: to check for multiple db instances, overriding, reopen.
* strong reference of self is removed and weak is passed to block
* refactor: add pragma - mark
* fix: Review Comments
* fix: Rename the placeholder"
pasin,2018-12-01 01:35:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1f50e11329ca4f0199109fcef4c04c1810a9d7a,a1f50e11329ca4f0199109fcef4c04c1810a9d7a,"Change DocumentReplicationListener and ReplicationFilter API

Updated according to :
* https://github.com/couchbaselabs/couchbase-lite-apiv2/pull/233
* https://github.com/couchbaselabs/couchbase-lite-apiv2/pull/232"
pasin,2018-11-30 19:50:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a627c6082ef61d5ef344a129e24d53060c32ffd,2a627c6082ef61d5ef344a129e24d53060c32ffd,"Implement push and pull replication filter

* Implemented ReplicatorConfiguration.pushFilter/pullFilter that allows the application to accept or reject the replicated documents.

* Added Document.isDeleted property, a flag indicating that the document has been deleted.

# 2233"
jayahariv,2018-11-30 19:28:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed0c801dc1b56700526afdb0aa4284068752118e,ed0c801dc1b56700526afdb0aa4284068752118e,fix: build error (#2240)
jayahariv,2018-11-30 18:06:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a7bba3b4a5fa7df4670be02c0d4753fe2c2dcd37,a7bba3b4a5fa7df4670be02c0d4753fe2c2dcd37,"Feat: Implement Purge document by ID (#2239)

* Add methods for purging documents separately for document & documentWithID. 
* thread safe method
* we removed the validation of documentId by checking in the db. As it is already done at lite core. 
* copied and re-used all the test cases considered while purgingDocumentByDocument, in both ObjC and Swift.
* Verify the ObjC test case by fetching the deleted doc."
pasin,2018-11-30 01:49:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ec5cb975062ef47f638cb5a241bf1f679d41c70,9ec5cb975062ef47f638cb5a241bf1f679d41c70,"Implement document replication eventing for swift

* Added DocumentReplication which represents document replication event object.
* Added methods to add the listener in Replicatior.
* Added a unit test to test the listener.

#2234"
pasin,2018-11-29 07:07:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db9fb90541ac3c7772fa95f92cc5dc7cac6bdbbf,db9fb90541ac3c7772fa95f92cc5dc7cac6bdbbf,"Implement document replication eventing for objc

* Added CBLDocumentReplication which represents document replication event object.
* Added methods to add the listener in CBLReplicatior.
* Added a unit test to test the listener.

#2234"
jayahariv,2018-11-27 20:46:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ba10dedb37e65b0ae7622174b3b5d93721048132,ba10dedb37e65b0ae7622174b3b5d93721048132,"feat: Meta.isDeleted for Swift (#2237)

* add methods to handle the swift isDeleted call.
* refactored and grouped the sequence and isDeleted methods calls.
* removed unused variable from CBLQueryTest
* add 3 test cases with no deleted file, single deleted doc, and multiple deleted document."
jayahariv,2018-11-27 18:54:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64e617c18e4f902463388f4d6d18f1c63efcb4ed,64e617c18e4f902463388f4d6d18f1c63efcb4ed,"Feat: Meta.isDeleted implement (#2236)

* Feat: Meta.isDeleted implement in ObjC

* add similar methods like sequence for isDeleted
* add 3 test cases for empty, single-delete, and multi-delete document."
pasin,2018-11-21 17:54:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5303777a789f0780d9a94eac88713c0d2580ffee,5303777a789f0780d9a94eac88713c0d2580ffee,Update couchbase-lite-core
snej,2018-10-22 22:34:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b9ed4c3aa6ee5a923ef384324730e5e8dc99ef0,3b9ed4c3aa6ee5a923ef384324730e5e8dc99ef0,"Removed unused NSPredicate query code

Note: CBLQueryRow was part of NSPredicateQuery but was mistakenly
made a public header. The class was also incorrectly used instead
of CBLQueryResult in ConcurrentTest.m."
pasin,2018-11-20 04:13:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f79bdc2fd375b74da749f47daf2eb67211a49aa,4f79bdc2fd375b74da749f47daf2eb67211a49aa,"Made creating Query by JSON data a private API

Made the API private until we have decided to make the API public."
snej,2018-11-19 23:44:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/260da5cb59b67dee1bd2ba42e2c7c35586cab721,260da5cb59b67dee1bd2ba42e2c7c35586cab721,"Revert ""Added CBLPredictiveModel to EE""

This reverts commit 4a46e93d6d0add8aa23e77657f034b375fa8753b.

# Conflicts:
#	vendor/couchbase-lite-core"
snej,2018-11-19 23:24:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43c2b05608285faed4105231d9e6cb14138f8470,43c2b05608285faed4105231d9e6cb14138f8470,Updated to latest LiteCore
snej,2018-11-12 21:46:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a46e93d6d0add8aa23e77657f034b375fa8753b,4a46e93d6d0add8aa23e77657f034b375fa8753b,"Added CBLPredictiveModel to EE

Code is still preliminary and API is a placeholder"
pasin,2018-11-19 22:24:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94fd796d51c6ee8c541424bb93e17c9ca7a703de,94fd796d51c6ee8c541424bb93e17c9ca7a703de,"Merge pull request #2219 from couchbase/feature/query-json-api

Allow creating Query from JSON, and getting JSON [API CHANGE]"
pasin,2018-09-13 23:03:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a745ba2711bdc774cfa1fe6afd61f39f9b4e4507,a745ba2711bdc774cfa1fe6afd61f39f9b4e4507,"Fix remove_private_headers.sh to work with XCode10

With XCode10, we can modify the output MODULE_MAP_FILE directly."
pasin,2018-10-22 20:34:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2cd980d2282cc9e1b50d54e81def3f9a87ce22e0,2cd980d2282cc9e1b50d54e81def3f9a87ce22e0,"Fix BasicAuth header not getting sent when SG GUEST is enabled

Sent the Basic Auth header without wating for challenge.

#2216"
pasin,2018-10-20 04:12:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/449dbfc28aeea1a0c5408df597106965fe0c881a,449dbfc28aeea1a0c5408df597106965fe0c881a,"Fix pinnedServerCertificate not getting retained

CBLReplicatorConfiguration.pinnedServerCertificate is Core Foundation type so explicitly retaining and releasing are required."
snej,2018-10-19 19:20:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e67e8a6c261e8ff2b765c81db4009643fd34eaa,0e67e8a6c261e8ff2b765c81db4009643fd34eaa,"Allow creating Query from JSON, and getting JSON [API CHANGE]

Added to CBLQuery:
  - initWithDatabase:JSONRepresentation:
  @property (nonatomic, readonly) NSData* JSONRepresentation;
(API is provisional. In particular, should there be a factory method
on CBLDatabase, instead of an initializer?)

Restructured the implementation to avoid dependencies on the
query-builder objects (CBLQuerySelectResult, etc.) Instead, the
existing initializer translates to JSON immediately and only stores
JSON. The column names are obtained from a new LiteCore function
(c4query_columnTitle) instead of the builder objects.

Removed some unused code: the properties for the builder objects,
and the -encodeExpressions: method.

couchbaselabs/couchbase-lite-apiv2#212"
pasin,2018-10-09 19:01:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fc0ab97004fc2cfd53b01a9d870b13af9c0fb79,9fc0ab97004fc2cfd53b01a9d870b13af9c0fb79,Update LiteCore
snej,2018-10-05 18:48:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e26e3c9d7a88343ae554251afbd9ae308d6da8d,1e26e3c9d7a88343ae554251afbd9ae308d6da8d,Updated LiteCore: upgrade to SQLite 3.25.2
snej,2018-06-18 18:37:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78d9d068d768d3c477d7482bb77b19df78d563c6,78d9d068d768d3c477d7482bb77b19df78d563c6,Xcode 10 compatibility check
snej,2018-10-03 21:54:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c5d8fb93f120a13ca030768d73f94e102a1bb05,9c5d8fb93f120a13ca030768d73f94e102a1bb05,"Compatibility with LiteCore replicator-eventing API changes

This fixes the build, but CBL won’t receive per-doc or per-attachment
notifications from LiteCore until it sets the replicator option
kC4ReplicatorOptionProgressLevel (see C4Replicator.h)"
snej,2018-10-02 23:43:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7bac69b0a1d2dc2315a7cb499acce5cdddbb67a,c7bac69b0a1d2dc2315a7cb499acce5cdddbb67a,"Updated implementation of sliceResult2data

…since alloc_slice has a method for it now."
pasin,2018-10-03 03:17:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21d591ea21521045f9cd0c81eab98b3d938e2f6d,21d591ea21521045f9cd0c81eab98b3d938e2f6d,Update couchbase-lite-core submodule
snej,2018-10-02 19:12:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/129835a94d23cf25749049addd242f53ec16954c,129835a94d23cf25749049addd242f53ec16954c,"Enabled Undefined Behavior sanitizer, fixed 2 issues

* -[CBLDatabase initWithName:…] should return CBLErrorInvalidParameter,
  not CBLErrorWrongFormat, if the name is empty/nil.
* If the current process has no bundle ID, CBLDatabaseConfiguration’s
  defaultDirectory method would pass nil to
  stringByAppendingPathComponent, which is illegal, and ended up
  returning an undesirable result anyway. I changed it to detect this
  and return the current directory, which seems the most sensible
  thing to do.
* Added some missing ‘nullable’ annotations."
snej,2018-10-02 19:05:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dbed306cf001a01bf4bcfbe37406e277e6754f6b,dbed306cf001a01bf4bcfbe37406e277e6754f6b,"Updated LiteCore to latest

Prerequisite for turning on Undefined Behavior sanitizer"
pasin,2018-09-18 22:22:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f7c110a68c4028128c9da269a33e6eb418057d2,4f7c110a68c4028128c9da269a33e6eb418057d2,"Remove Carthage binary definition file from repo

We have moved the definition files to

https://packages.couchbase.com/releases/couchbase-lite-ios/carthage/CouchbaseLite-Community.json

https://packages.couchbase.com/releases/couchbase-lite-ios/carthage/CouchbaseLite-Enterprise.json"
pasin,2018-09-12 21:48:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a2b48e9bf91b1434ed5ee637950340a6c03191d,6a2b48e9bf91b1434ed5ee637950340a6c03191d,"Fix ConcurrentTest to support XCode 10

#2192"
pasin,2018-09-12 20:56:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01d2a772f629934d5419ace46196603f92b059b5,01d2a772f629934d5419ace46196603f92b059b5,"Update gitignore

Updated gitignore to ignore EE schemes"
pasin,2018-09-10 19:33:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed4806b9a65a98dae10da82be1ed5d3a45ecc2be,ed4806b9a65a98dae10da82be1ed5d3a45ecc2be,"Add CBLMessageEndpointListenerConfiguration to exp file

#2202"
snej,2018-09-04 19:08:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e101e79674c576265b3f119a87549726039d627f,e101e79674c576265b3f119a87549726039d627f,Updated LiteCore to fix EE Fleece build
snej,2018-08-31 23:53:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/232b27bcc4f8074db2f91654532a9ae37b8b07e3,232b27bcc4f8074db2f91654532a9ae37b8b07e3,Merge branch 'feature/fleece_doc'
snej,2018-08-31 22:54:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a39b2a0232ab92f48a9e9488c6319a35ba6ff79,1a39b2a0232ab92f48a9e9488c6319a35ba6ff79,Updated LiteCore again
snej,2018-08-31 22:48:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/188bc84d32e19cb318bd6c95adf0dc73677a8780,188bc84d32e19cb318bd6c95adf0dc73677a8780,Merge branch 'master' into feature/fleece_doc
snej,2018-08-31 22:48:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a86dba2d3a005f167ca95ec5e5010dec9037ae2,1a86dba2d3a005f167ca95ec5e5010dec9037ae2,Updated LiteCore
snej,2018-08-29 19:48:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35d19485847da8dcfcbd97292b2e70612a78527b,35d19485847da8dcfcbd97292b2e70612a78527b,"Updated LiteCore: Fixes EE build, reduces # of threads"
pasin,2018-08-28 04:11:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b42cf2694db48006e790f28dcdebfec1e401b481,b42cf2694db48006e790f28dcdebfec1e401b481,"Fix casting nagative to unsigned value when reading bytes from NSInputStream

When an error occurred from reading an NSInputStream, a nagative value will be retured. Casting the value to size_t which is an usigned type will result to a very large number and cause bad_alloc when trying to allocate memory for the invalid bytes read.

#2196"
snej,2018-08-18 01:01:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e5dc23babd6b1f9613e6d4bb297971aad076077,0e5dc23babd6b1f9613e6d4bb297971aad076077,Updated LiteCore: Don’t call assert()
snej,2018-08-16 17:14:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/864e18180082bb6cbe06aaa07aeee63d843f5503,864e18180082bb6cbe06aaa07aeee63d843f5503,Changes for compatibility with Fleece branch feature/doc
snej,2018-08-15 23:22:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49e88baae41c6a1f6247a9980f5de61354673407,49e88baae41c6a1f6247a9980f5de61354673407,"Updated LiteCore to master

Fixed Fleece include paths accordingly."
pasin,2018-08-07 02:29:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3c3c1f2e02cdf1dd60c493c3d1129e930e44e4c,e3c3c1f2e02cdf1dd60c493c3d1129e930e44e4c,"Add unit tests for P2P replication with DocumentIDs filter

https://github.com/couchbase/couchbase-lite-android/issues/1749"
pasin,2018-08-02 21:31:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b1f68ddead1f37f9135666c5ee28dad85cb5ee4,3b1f68ddead1f37f9135666c5ee28dad85cb5ee4,"Fix ReplicatorTest build failed when testing on device

Casted status variable to long."
snej,2018-08-02 20:07:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81cacca0c1372b4c80c6bd54335f46502df0d6b1,81cacca0c1372b4c80c6bd54335f46502df0d6b1,"Merge pull request #2190 from couchbase/feature/fix-redirect-proxy

Fix HTTP redirect not working when using client proxy"
pasin,2018-08-02 18:16:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a29f5cfb94dbf19efae81cb47e60235edce4fb40,a29f5cfb94dbf19efae81cb47e60235edce4fb40,Update couchbase-lite-core
pasin,2018-08-02 18:13:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01d51b02802507f989897199ecfdede949e59e72,01d51b02802507f989897199ecfdede949e59e72,Update couchbase-lite-core
pasin,2018-08-02 17:51:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6734c23578a105373d29388d563db2d2599df6f0,6734c23578a105373d29388d563db2d2599df6f0,"Fix HTTP redirect not working when using client proxy

* When HTTP redirect happens, if using proxy, need to send a CONNECT request to the redirected host as well.

* The _logic.useProxyCONNECT is reset to NO after the CONNECT response is received. When sending the second CONNECT request for the redirected HOST, need to ensure that _logic.useProxyCONNECT is set to YES, otherwise the CONNECT request will not be sent.

* Moved `_logic.useProxyCONNECT = YES` from -initWithURL:c4socket:options:  to -_connect method where the CONNECT request will be sent.

#2179"
pasin,2018-08-02 17:38:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5fd5e65ac81a088d3f033ff0e663d3572bf47627,5fd5e65ac81a088d3f033ff0e663d3572bf47627,Update LiteCore to release/CBL2.1.x branch
pasin,2018-08-02 17:37:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0ebc64d2102b28ea4cc9aba757a4475f56b5b72,d0ebc64d2102b28ea4cc9aba757a4475f56b5b72,Merge branch 'feature/nsstream-webSocket'
pasin,2018-08-01 19:02:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3e525ebd23d74da757d4149b3b2e8b4613054b0,e3e525ebd23d74da757d4149b3b2e8b4613054b0,"Use CloseUserPermanent for non-recoverable messaging errors

* Changed kWebSocketCloseCustomTransient  to kCBLWebSocketCloseUserTransient
* Used kCBLWebSocketCloseUserPermanent instead of WebSocketAbnormalClose for non-recoverable messaging errors.
* Added CBLErrorWebSocketCloseUserTransient and CBLErrorWebSocketCloseUserPermanent to public API
* Fixed unit tests accordingly"
pasin,2018-08-01 04:38:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02c7f86994a0607ecf68490788cf4db290765f04,02c7f86994a0607ecf68490788cf4db290765f04,"Fix minor compilation errors after merging new CBLWebSocket implementation in

* Added MYURLUtils to the project.
* Used a new C4Socket factory.
* Fixed return type of ReplicatorTest’s run method."
snej,2018-06-18 18:24:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a230e05bb3ce246aef69f98ca9e4366df6f43f3,7a230e05bb3ce246aef69f98ca9e4366df6f43f3,"Proxy fixes: TLS, redirect, test setup (#2170)

* When configuring NSStream TLS settings after making a proxy conn-
  nection, set the server name property to the actual server hostname,
  otherwise cert verification will expect the proxy’s hostname and fail.
* Handle redirect/auth status returned from proxy and retry.
* ReplicatorTest should set up proxy overrides at init time, not in
  -remoteEndpointWithName:, because not all the tests call that method.
# Conflicts:
#	CouchbaseLite.xcodeproj/xcshareddata/xcschemes/CBL ObjC.xcscheme"
snej,2018-06-15 23:04:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3960289f4939e34c98628f870a173c34f7bf9f3d,3960289f4939e34c98628f870a173c34f7bf9f3d,"Added Proxy AutoConnect (PAC) support.

Not really tested yet…"
pasin,2018-06-15 20:19:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/834128240601a3f668560f908c1de196bf11e2f0,834128240601a3f668560f908c1de196bf11e2f0,"Fixed CBLWebSocket and ReplicatorTest after picking NSStream Impl

* Fixed CBLWebSocket to use the old C4Socket/C4SocketFactory.
* Fixed ReplicatorTest: remote reset checkpoint tests and etc.

# Conflicts:
#	CouchbaseLite.xcodeproj/project.pbxproj
#	Objective-C/Tests/ReplicatorTest.m"
pasin,2018-06-15 19:06:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/011a6530a22335a15979ca8644a4161bee6b7497,011a6530a22335a15979ca8644a4161bee6b7497,"Update CBLHTTPLogic.useTLS to return NO when using HTTPProxy

Assumed that the connection from client to proxy (for sending CONNECT request) is non TLS. This seems to be a common settings. If in the future, it seems that we need to support TLS connection with the proxy, we need to adjust this logic."
snej,2018-06-13 23:47:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b93b63c5c4e2ac75b157c1347501c3ead850c270,b93b63c5c4e2ac75b157c1347501c3ead850c270,Added support for HTTP proxy authentication (untested)
snej,2018-06-13 18:40:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5c687df0841251c5f7aca5e660a7b9185495ce5b,5c687df0841251c5f7aca5e660a7b9185495ce5b,"SOCKS proxy support

Not tested yet, as I don’t have a SOCKS proxy set up.
Also:
* ReplicatorTests allows forcing use of a SOCKS proxy (see comments)
* Now handles a 305 Use Proxy response code (redirects to proxy)
* After a regular redirect, looks up the proxy settings for the new
  URL, since they could be different.

# Conflicts:
#	Objective-C/Internal/Replicator/CBLHTTPLogic.h
#	Objective-C/Internal/Replicator/CBLHTTPLogic.m
#	Objective-C/Tests/ReplicatorTest.m"
snej,2018-06-12 23:51:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/93c2bb0d69612c7dc98d7be3e856b9f10bdb20ec,93c2bb0d69612c7dc98d7be3e856b9f10bdb20ec,Reimplemented CBLWebSocket connect/idle timeouts
snej,2018-06-12 23:09:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f7578d363ea87dd2d1a1ea29a377731c58f0348,7f7578d363ea87dd2d1a1ea29a377731c58f0348,"Got HTTP proxy support working again

# Conflicts:
#	Objective-C/Internal/Replicator/CBLWebSocket.mm"
snej,2018-06-12 21:48:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27f238ba393fca9bb72a93114e2a5de5ada886b4,27f238ba393fca9bb72a93114e2a5de5ada886b4,"Switched CBLWebSocket to use NSStream

# Conflicts:
#	Objective-C/Internal/Replicator/CBLWebSocket.mm
#	Objective-C/Tests/ReplicatorTest.m

# Conflicts:
#	Objective-C/Internal/Replicator/CBLWebSocket.mm"
pasin,2018-08-02 01:00:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8afc5753ed71a5a15695189668aacb104512de5a,8afc5753ed71a5a15695189668aacb104512de5a,"Merge pull request #2189 from eric-robinson/fix/unowned-query-crash

Use weak reference / guard in place of unowned in Query addChangeListener closure."
pasin,2018-07-31 18:38:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/165672cc472f3aa61a99f0c0567141d8f1ef25c6,165672cc472f3aa61a99f0c0567141d8f1ef25c6,"Fix swift single-shot replicator crashed when notifying change listener

Removed unowned marker as we should retain the self instance.

#1926"
pasin,2018-07-31 03:09:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cef15c7fb3801cdf1f7c214ede82e45d9dd8d180,cef15c7fb3801cdf1f7c214ede82e45d9dd8d180,"Fixed System Test crash when accessing CBLReplicator.status from Swift API

* Made CBLReplicator.status property atomic (#2187)
* Changed CBLReplicator to use the dispatch queue from the CBLDatabase instead of using Main queue (#2127)"
pasin,2018-07-31 00:13:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b15819d853782e1b021ebd6dbb1ba2eb1538638,0b15819d853782e1b021ebd6dbb1ba2eb1538638,"Fix a param name typo in Swift ReplicatorConnection

* Changed ReplicatorConnection.receive(messge:) to ReplicatorConnection.receive(message:).
* Removed Extra sample from project"
pasin,2018-07-27 02:48:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/824c7c7bd7d100ec4baeaf864758f08c07df247a,824c7c7bd7d100ec4baeaf864758f08c07df247a,Update LiteCore submodule to match .NET 2.1 RC
pasin,2018-07-26 19:29:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38a6d195a7df85f252ee1e9d7a23002d6da7b1a1,38a6d195a7df85f252ee1e9d7a23002d6da7b1a1,Update LiteCore submodule to the latest
pasin,2018-07-24 21:31:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b5743e01cbbe266b0ffd6237d8292df7ba1bef3,0b5743e01cbbe266b0ffd6237d8292df7ba1bef3,"Fixed MockServerConnection issue when the connection is closed

Set the _connection in  to nil so that when the client reports disconnected, the -closed: method on the connection will not get called."
pasin,2018-07-24 19:34:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fa9f9a69f08c9b561b6bee9ac24af8c19004164,2fa9f9a69f08c9b561b6bee9ac24af8c19004164,Update Carthage instruction in README.md
pasin,2018-07-24 19:18:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1cd6e54ccd31dd8df83e4b1dc743d739d3fb0a1e,1cd6e54ccd31dd8df83e4b1dc743d739d3fb0a1e,"Fixed concurrency issue in CBLMockConnection

* Used a serial disapatch queue to simulator asynchronous behavior.
* Ensured to dispatch calls to the _dispatchQueue."
pasin,2018-07-20 20:26:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f12675f99822a4cb602d75fa29c4d0b55698f53a,f12675f99822a4cb602d75fa29c4d0b55698f53a,"Include strip framework script in the framework bundle

Included strip framework script in the framework bundle under Scripts folder.

#1610"
pasin,2018-07-18 03:01:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ed1ced17e52df3e21f3eacd70766bde9a311384,1ed1ced17e52df3e21f3eacd70766bde9a311384,"Change CBLMockConnection to use serial queue instead of global queue

Fixed the race b/w close socket and write to the socket. caused by using the global queue."
pasin,2018-07-18 02:16:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c4045f28a249ba98a24b49be7701e7f259c5be88,c4045f28a249ba98a24b49be7701e7f259c5be88,"Add delay b/w stop the replicator and delete database in ReplicatorTest

This is a workaround to prevent intermittently test failures."
pasin,2018-07-17 23:50:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d62e8aae70795183bfd2f4daf07dc631b466b13d,d62e8aae70795183bfd2f4daf07dc631b466b13d,"Merge pull request #2183 from couchbase/feature/p2pmock

Port P2P unit tests and Mock Connection classes from .NET"
pasin,2018-07-17 16:38:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef511fc5b0f89f9997c2afc5916641ca459de401,ef511fc5b0f89f9997c2afc5916641ca459de401,"Fix MockConnection and test issues

* Moved CBLMockConnection classes to couchbase-lite-ios.
* Fixed CBLMockConnection issue that causes duplicating calls to close the connection.
* Fixed minor issues in ReplicatorTest."
borrrden,2018-06-29 02:27:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b1712f8ccc6b5a8c86ef0752cc03d9d27b42f4b,3b1712f8ccc6b5a8c86ef0752cc03d9d27b42f4b,"Ported the rest of the P2P tests (.NET)

They all seem to pass, but style and such should be evaluated before merging"
borrrden,2018-06-26 01:39:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2980e7a0c9962627a494d78227f02944432743d,f2980e7a0c9962627a494d78227f02944432743d,"Add p2p mock tests

Not sure of the correct procedure for all of this, but here is the implementation and some tests using the mock connection"
pasin,2018-07-13 23:46:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b3d55a9d06c74b75fe63e752650cec73f1ad8faf,b3d55a9d06c74b75fe63e752650cec73f1ad8faf,"Add Sample ReplicatorTcpConnector and Listener to project

Added Sample ReplicatorTcpConnector.swift and ReplicatorTcpListener.swift to project."
pasin,2018-06-18 23:58:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ababc38d8a476085726bd6980099a37f62da557b,ababc38d8a476085726bd6980099a37f62da557b,"Enable build tool generation in generate_release_zip.sh

This was fixed by https://github.com/couchbase/couchbase-lite-core/commit/516b07ef43313df4c583fd2dbfacc74d53d52b5e.

Reference: https://github.com/couchbase/couchbase-lite-core/issues/518"
pasin,2018-06-18 22:55:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ea62b04d481ff480ab56bfcdda38619eac6f26d,9ea62b04d481ff480ab56bfcdda38619eac6f26d,Updated LiteCore to the latest
snej,2018-06-18 18:37:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ecee9c0ffad65a953f47ec162630f669a6233d3,1ecee9c0ffad65a953f47ec162630f669a6233d3,"Xcode 10.0b1 compatibility (fixed some new warnings)

- removed obsolete `register` keyword in LiteCore
- Added some NS_NOESCAPE keywords on blocks"
pasin,2018-06-13 18:08:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f42ccae6538d8d2d3f5e0a393201228d9b9f4a02,f42ccae6538d8d2d3f5e0a393201228d9b9f4a02,Update README.md
pasin,2018-06-13 18:07:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f60cf90f0a32cef0cf84301f16abb3378e9bba25,f60cf90f0a32cef0cf84301f16abb3378e9bba25,Update README.md
pasin,2018-06-12 23:10:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc7f182ae216864d9ce895d3484fb9b65ba7d874,bc7f182ae216864d9ce895d3484fb9b65ba7d874,Update Lite-Core
pasin,2018-06-12 22:57:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5c800943c38ad623c26ab5b1aea305b5bf9a2d1e,5c800943c38ad623c26ab5b1aea305b5bf9a2d1e,"Update Carthage binary links

Added 2.0.3 binary links."
pasin,2018-06-07 21:00:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb170d164d43fcdf05c0a0e1328f9e832ee891c7,cb170d164d43fcdf05c0a0e1328f9e832ee891c7,Removed SampleCodeTest.swift from the project
pasin,2018-06-07 20:58:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b37ca0470be3eaf3fed9e0b69ef131f29adaf652,b37ca0470be3eaf3fed9e0b69ef131f29adaf652,Removed SampleCodeTest.m from the project
jamiltz,2018-06-07 17:24:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/969e8c936f4496570267b7317aeedf9caed4a384,969e8c936f4496570267b7317aeedf9caed4a384,"[docs] remove doc sample files (#2164)

We're consolidating CBL docs in a single repo. Hence we can remove the files from the repo."
pasin,2018-06-07 05:05:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c0d5bdbf54005754e8a5dcd283e6695184580a22,c0d5bdbf54005754e8a5dcd283e6695184580a22,"Fixed Swift unit test failure

Removed dictionary comparison as the current solution to compare by converting the dictionaries to NSDictionary doesn’t work well with Blob."
pasin,2018-06-06 22:34:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3be929b176f56d02837c4d28c00969e00f1a4f54,3be929b176f56d02837c4d28c00969e00f1a4f54,"Fix converting nested swift dictionary/array to CBL objects

Detected nested native dictionary and array and properly convert them to CBL Object.

#2162"
pasin,2018-06-04 20:39:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b18a67dbb161f696ef18c2e0e7eba9e7dbcaf0a,3b18a67dbb161f696ef18c2e0e7eba9e7dbcaf0a,Update Carthage binary spec
pasin,2018-06-04 20:19:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62db549155a69920543b4e3562e34fb47836005c,62db549155a69920543b4e3562e34fb47836005c,"Remove CBL-EE shared Schemes

* Removed all EE xcscheme files to allow Carthage to build the project.
* The scheme files were move to the EE repo. For EE, run prepare_project.sh to copy the schemes before opening CouchbaseLite project in XCode."
pasin,2018-05-24 22:45:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a606f95b377900b2324fe242f472a24a3a4912c,1a606f95b377900b2324fe242f472a24a3a4912c,"Add some delay in ReplicatorTest’s tear down

This is to avoid a race between cleaning test environment and replicator’s cleaning tasks."
pasin,2018-05-24 21:39:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b315b85442d06d88638c38cbdb8283a92fa9d370,b315b85442d06d88638c38cbdb8283a92fa9d370,"Use BITCODE_GENERATION_MODE = bitcode in build_framework.sh

* Instead of using OTHER_CFLAGS=""-fembed-bitcode”, use BITCODE_GENERATION_MODE = bitcode.
* Explicitly set ONLY_ACTIVE_ARCH=NO, this is currently a default setting."
pasin,2018-05-24 05:42:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb7c2c1fcc23d58ce9375628b63693d3072584a9,cb7c2c1fcc23d58ce9375628b63693d3072584a9,"Enable logs in replicator tests to investigate disk I/O errors on Jenkins

* Enabled logs in replicator tests to investigate disk I/O errors on Jenkins
* Added more assertions"
pasin,2018-05-24 02:45:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/961aee8860930cec9d7450c256f255f7b5128389,961aee8860930cec9d7450c256f255f7b5128389,"Disable command line tool build in generate_release_zip.sh

To unblock jenkins build, disable command line tool build in generate_release_zip.sh.

https://github.com/couchbase/couchbase-lite-core/issues/518"
pasin,2018-05-24 02:43:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a8082bd2ff67bf0e0fc77be24b4be8771c8d2a4,3a8082bd2ff67bf0e0fc77be24b4be8771c8d2a4,"Re-Fixed random SQLite Disk I/O error in replicator tests

* Changed the order of deleting test database."
pasin,2018-05-22 03:33:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85b8a0eb66b914abcdd7b17b74fb8937aceee233,85b8a0eb66b914abcdd7b17b74fb8937aceee233,"Fixed random SQLite Disk I/O error in replicator tests

* In unit tests’ -tearDown, a testing database (e.g. otherDB) is closed and in -setUp, the test directory will be clear (deleted). That seems to cause random Disk I/O error as I understand that the test directory is deleted while the SQLite database is not completely closed.

* Using Database’s delete(name, directory) to delete database seems to help solving the issue."
pasin,2018-05-21 21:52:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7772d59991a7606c9198db681b96e859c3e34433,7772d59991a7606c9198db681b96e859c3e34433,"Implement MessageEndpoint API (#2157)

* Implement MessageEndpoint API

* Added kWebSocketCloseCustomTransient code to the replicator internal header.

* Not starting the reachability when using message endpoint

https://github.com/couchbase/couchbase-lite-ios/issues/2118"
pasin,2018-05-19 00:59:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b506f255fa71e87aeb65ef913e1a3a490420782,0b506f255fa71e87aeb65ef913e1a3a490420782,Update LiteCore to latest
pasin,2018-05-19 00:55:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/595ac0d333fd3d1c8022f0ad3e2e088a14bdf522,595ac0d333fd3d1c8022f0ad3e2e088a14bdf522,Update LiteCore to release/CBL2.0.x
pasin,2018-05-12 02:32:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e416e1b28ff6c06f5740b00a218874fe2b9f7ed,6e416e1b28ff6c06f5740b00a218874fe2b9f7ed,Update Carthage Binary Specs for 2.1DB001
pasin,2018-05-12 00:53:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2062ba4b98f59cdf7bf22f4b2418ab54b34dedb8,2062ba4b98f59cdf7bf22f4b2418ab54b34dedb8,"Update SampleCodeTest

* Added database encryption samples
* Fixed compilation error in SampleCodeTest.m"
jamiltz,2018-05-12 00:44:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48ffd4238668420c1d1058c36deb7130434302a8,48ffd4238668420c1d1058c36deb7130434302a8,"[docs] 2.1 updates (#2154)

* bump antora version

* [docs] database encryption

* [docs] replication checkpoints

* [docs] review encryption docs

* [docs] objc 2.1 docs"
rkazak,2018-05-12 00:39:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db2627d0757bcf05db97814b8564b02c076f9103,db2627d0757bcf05db97814b8564b02c076f9103,"Update README.md (#2155)

switched lines 78 and 79."
pasin,2018-05-07 17:50:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fcb22456ba9be4708f41296e1840810bb059d48a,fcb22456ba9be4708f41296e1840810bb059d48a,"Restructure EE source files

Grouped source files with folders."
pasin,2018-05-04 22:45:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8dda0bdd7aea652899cfa08ce224434b47ea1522,8dda0bdd7aea652899cfa08ce224434b47ea1522,Added unit tests to test resetCheckpoint() for continuous replicators
pasin,2018-05-04 21:38:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7695d93de9193875d88ca14ca606c38decf5000,b7695d93de9193875d88ca14ca606c38decf5000,"Fix #2149 Missing toMutable() in Swift’s DictionaryObject and ArrayObject

* Added missing toMutable() in Swift’s DictionaryObject and ArrayObject.

* Added unit tests."
pasin,2018-05-04 19:00:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/12d1387c68f380d3bba68b92ce96a247c0b2fa2e,12d1387c68f380d3bba68b92ce96a247c0b2fa2e,"Fixed #2148 by converting zero data w/ EOF into ENOTCONN error

* Refixed https://github.com/couchbase/couchbase-lite-ios/issues/2140 by converting zero data with EOF stream response into ENOTCONN error so that the retry logic could be kicked in.
* Made a speculative fix for #2150 by reverting fa0f92086d9a3a617ee5d4f52153772ae6cbafcc commit."
jamiltz,2018-04-18 17:14:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b98ba90eb585df84cffb1541ba3e1d24cc89fdc9,b98ba90eb585df84cffb1541ba3e1d24cc89fdc9,"[docs] .and() clause (#2143)

* [docs] `.and() clause`

* [docs] update per review."
jamiltz,2018-04-18 17:13:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7671ee3a2f2c565a9296666679ad8a8e15b4f469,7671ee3a2f2c565a9296666679ad8a8e15b4f469,"[docs] review and authentication docs (#2138)

* update supported version

* [docs] update paragraphs

* [docs] rel notes

* [docs] update paragraphs

* [docs] authentication docs

https://issues.couchbase.com/browse/DOC-3397

* EE/CE Objc

* EE/CE swift

* fix

* Update API doc references

* Update Carthage and Cocoapods instruction

* Update Carthage instructions

* Update cocoapods instruction for Swift

* [docs] mention about ordering during replication

* [docs] fix spacing, and code snippet per review.

* [docs] `.toDictionary()` method and document change events

* [docs] thread safety comment

https://issues.couchbase.com/browse/DOC-2954"
pasin,2018-04-16 22:48:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1230c65f36920442ca904c3ba02d5cce5f38dc0,d1230c65f36920442ca904c3ba02d5cce5f38dc0,"Re-fix #2140 that the completionHanlder when reading data from stream was called in loop

Detect if the data has zero length and atEOF is true, then close the socket with kWebSocketCloseProtocolError error."
pasin,2018-04-16 19:06:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa0f92086d9a3a617ee5d4f52153772ae6cbafcc,fa0f92086d9a3a617ee5d4f52153772ae6cbafcc,"Remove ignore error check from CBLWebSocket when checking an error

* The ignore error check has already been done in -didCloseWithError: which is the place where ignoring error is matter. We could remove the ignore error check from -checkError: method.
* This will fix #2140  that readHTTPResponse is called in loop when getting ENOTCONN error in some circumstances."
pasin,2018-04-16 16:35:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c24e33427964a8887c7ad39d0ecb8cf6196d00d8,c24e33427964a8887c7ad39d0ecb8cf6196d00d8,"Fix CBLDatabaseEndpoint not found error

Applied #ifdef COUCHBASE_ENTERPRISE when importing CBLDatabaseEndpoint.h."
pasin,2018-04-15 06:11:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4fb526bc492973af38d6f74f1f4b74e0f93581d2,4fb526bc492973af38d6f74f1f4b74e0f93581d2,"Update DatabaseEncryptionTest per API change

Updated DatabaseEncryptionTest as Database’s setEncryptionKey(key) has been changed to changeEncryptionKey(key)."
pasin,2018-04-13 01:00:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e39fda5ae6812c36d0bb7b15a163549a64170232,e39fda5ae6812c36d0bb7b15a163549a64170232,Update CouchbaseLite-Community.json
pasin,2018-04-12 18:00:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/669ce1ac25e19714cdc26bde334640cf1e0df60b,669ce1ac25e19714cdc26bde334640cf1e0df60b,"Update podspecs and readme

As we released 2.0.0, update podspecs and readme."
pasin,2018-04-12 17:44:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e9f9f0c47bc968d2e1aa110cccf62f1f7961824f,e9f9f0c47bc968d2e1aa110cccf62f1f7961824f,Update LiteCore to latest
pasin,2018-04-11 08:29:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62f9d32a53c272a7465df458e1a850d5bf5a43c9,62f9d32a53c272a7465df458e1a850d5bf5a43c9,"Fix using incorrect comment marker in CouchbaseLite-EE.exp

Used # instead of //"
pasin,2018-04-11 08:19:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91e92fc0c506c51d70f1a645e066399adbe1799b,91e92fc0c506c51d70f1a645e066399adbe1799b,"Implement replicator reset checkpoint feature

* Implemented replicator reset checkpoint feature.
* Updated LiteCore.

#2139"
pasin,2018-04-11 07:19:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/68a8b9679624f8ce04016ef067ed5b0150e3dfcd,68a8b9679624f8ce04016ef067ed5b0150e3dfcd,"Implement Database Encryption Feature

#2117"
pasin,2018-04-11 01:52:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/701dd1fa231bf72c23b39ab24a26a7d3c809926e,701dd1fa231bf72c23b39ab24a26a7d3c809926e,"Restructure EE source code in XCode project

Instead of adding individual files to the project, added Objective-C and Swift folder."
pasin,2018-04-11 01:21:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8ebc857dd6276c6fc3882e0216b06451930b6bc6,8ebc857dd6276c6fc3882e0216b06451930b6bc6,"Move DatabaseEndpoint to EE repo

* Moved DatabaseEndpoint implementation to EE repo.
* Seperated CouchbaseLite.h into CE and EE version.
* Seperated CouchbaseLiteSwift.modulemap into CE and EE version.
* Fixed target dependencies in unit test targets."
pasin,2018-04-10 21:55:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/499220c86a77cf3b4dd09ccd63e1706d72e7ff16,499220c86a77cf3b4dd09ccd63e1706d72e7ff16,Duplicated all of the CE targets for EE targets
pasin,2018-04-10 21:07:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f000a805934096e41ebe0534cfbb5260c46e69c0,f000a805934096e41ebe0534cfbb5260c46e69c0,Move Carthage to Release folder
pasin,2018-04-10 20:25:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/adbe99fed9a47a55b47f5629ba5316658eaac603,adbe99fed9a47a55b47f5629ba5316658eaac603,"Add Carthage’s binary project definition files

Added Carthage’s binary project definition files for community and enterprise edition."
snej,2018-04-10 03:52:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62427628590c2d3c002a622733c366b2800b72bc,62427628590c2d3c002a622733c366b2800b72bc,"Refactored change notification into CBLChangeNotifier (#2132)

* Refactored change notification into CBLChangeNotifier

CBLChangeNotifier manages a set of CBLChangeListenerTokens, and
broadcasts change objects to them.
Made CBLChangeListenerToken more self-contained by having it call the
block itself.
Replaced the listener-handling code in CBLDatabase, CBLReplicator and
CBLLiveQuery with CBLChangeNotifier.
Created CBLDocumentChangeNotifier to manage per-document change
notification, so it can keep track of the C4DocumentObserver instead
of CBLDatabase.
Removed some old incorrect logic about not posting document-changed
notifications if the database is in a transaction.

# Conflicts:
#	CouchbaseLite.xcodeproj/project.pbxproj

* Update license headers"
jamiltz,2018-04-10 03:10:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1acc698f48e084c7cc2e6f2c7c0edf03fb29b302,1acc698f48e084c7cc2e6f2c7c0edf03fb29b302,update supported version (#2137)
pasin,2018-04-09 22:04:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25f653adc0a46be3b516f60b007f4c8d032ab285,25f653adc0a46be3b516f60b007f4c8d032ab285,Update CBL_VERSION_STRING to 2.1.0.
pasin,2018-04-06 07:43:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72f7e5a8597c30210f86b55083eca566805ca37a,72f7e5a8597c30210f86b55083eca566805ca37a,"Update license for EE source codes

- Updated license to CBLDatabaseEndpoint.{h,m}.
- Made DatabaseEndpoint.swift into its own file and updated license."
pasin,2018-04-05 17:58:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b41328b87c85920bbb56a60034f0f7b405b86e61,b41328b87c85920bbb56a60034f0f7b405b86e61,"Correct version in podspec files

2.0DB21 -> 2.0DB23"
jamiltz,2018-04-05 17:29:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/184ccf88799a383afa5254c795657df61eb3841d,184ccf88799a383afa5254c795657df61eb3841d,"[docs] review (#2131)

* [docs] getting started

* [docs] changes per review

* [docs] objc getting started

* [docs] review from @waynecarter

* [docs] apply changes to objc guide.

* [docs] update headers, id prefix format.

* [docs] ifndef statement to remove TOC on site."
pasin,2018-04-03 06:49:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7700be14e9dabf2d45cbae19005b8fb1bb640c63,7700be14e9dabf2d45cbae19005b8fb1bb640c63,"Fix Swift URLEndpoint not immediately validate the URL scheme

The URL scheme validation is in the Objective-C CBLURLEndpoint. Fixed the issue by creating the CBLURLEndpoint in the URLEndpoint’s contructor.

#2119"
pasin,2018-03-31 00:13:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f2a2097de752178da31e3f7c926fff4a4b766c7,2f2a2097de752178da31e3f7c926fff4a4b766c7,"Change SWIFT_VERSION to 3.3

#2126"
snej,2018-03-29 19:56:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5eab6155dba5abf219716163dd85408f1f804bb9,5eab6155dba5abf219716163dd85408f1f804bb9,"Updated LiteCore: Fixed crash with LEFT JOIN query

Includes unit test.

couchbase/couchbase-lite-core#497"
jamiltz,2018-03-29 15:34:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38038de4d641fd4d3027ad082ead5f333bcff99d,38038de4d641fd4d3027ad082ead5f333bcff99d,"[docs] live query (#2124)

* [docs] live query example

* [docs] cleanup list

* [docs] add toc directive

* [docs] create examples folder but ignore everything inside it.

* [docs] update per review

* [docs] changes per review"
pasin,2018-03-29 04:56:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff970626642865bc7064af1b44ae9cdeb5987769,ff970626642865bc7064af1b44ae9cdeb5987769,"Added test left join with select * both side

- This is the test for // https://github.com/couchbase/couchbase-lite-core/issues/497.
- Disabled as failure."
jamiltz,2018-03-28 04:28:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b633a948ef0ca2ed8aa962ac5598ff7a1b008b27,b633a948ef0ca2ed8aa962ac5598ff7a1b008b27,[docs] remove mention of official tvOS support (#2123)
pasin,2018-03-28 04:25:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa380069eadd21d2401c0e92dd1692f180d938d6,aa380069eadd21d2401c0e92dd1692f180d938d6,Update LiteCore to CBL2.0.0-RC2
pasin,2018-03-28 04:20:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8cb627fa8943ec4222442846ebb67c12c444546,a8cb627fa8943ec4222442846ebb67c12c444546,"Fix replicator not retrying when having a network error but host may be reachable

There could be a case that sending an HTTP request to the remote results to a new work error but the host may be still reachable. For continuous replicators, we should always retry if the host may be reachable.

#2121"
pasin,2018-03-28 04:15:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44546400df3567c87050b90c43343afe0406c7c6,44546400df3567c87050b90c43343afe0406c7c6,"Made the reachability always notify the status after start

Explicitly notified the status after starting the reachability when the reachability status is known. This will fix the issue that the reachability status may not get notified when starting a newly created CBLReachability instance."
pasin,2018-03-28 02:00:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7f18517cfb5798a2cd6363ce3971aaeb1535428,b7f18517cfb5798a2cd6363ce3971aaeb1535428,"Fix NetworkDomain not getting converted to CBLErrorDomain

- Currently NetworkDomain was converted to nil, as a result, all network errors didn’t get converted correctly; Converted NetworkDomain to CBLErrorDomain.
- Updated testSelfSignedSSLFailure_SG."
pasin,2018-03-26 08:31:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e979cd161740cfac8571a65fa6dc858a46c663b,4e979cd161740cfac8571a65fa6dc858a46c663b,"Use Assert instead of NSAssert in URLEndpoint and Blob when validating values

NSAssert will be disable in release mode. Use Assert instead.

#2119"
pasin,2018-03-26 08:24:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/07f021ee7713262aea748b9210a776ba4e4a5b33,07f021ee7713262aea748b9210a776ba4e4a5b33,"Add script for stripping frameworks and dSYM files

This is a script to add to the build phase in order to strip non-valid architecture types from the frameworks and dSYM files if added to the built product directory. This is require when archiving the app for submission as currently XCode will not strip non-valid archs (e.g. simulator acrch).

The next step is to figure out where to distribute this file: [1] in release zip or [2] in the framework bundle inself.

#1610"
pasin,2018-03-23 21:51:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/182338a88dcd29c9be571b0b9c22e95454d2637e,182338a88dcd29c9be571b0b9c22e95454d2637e,"Fix Objective-C SampleCodeTest

- Fixed a wrong method name which causes the duplication error.
- Fixed invalid data type."
jamiltz,2018-03-23 17:23:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ab7b40f4cca5d83095ff12213a880a6681a1b94c,ab7b40f4cca5d83095ff12213a880a6681a1b94c,"[docs] changes: (#2115)

- add ObjC docs (asciidoc).
- insert source code include tags in ObjC unit tests.
- add database replica code example.
- remove extra line."
snej,2018-03-23 17:19:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/61f614ecb3e418e01ebd3b465a1fa5721cbf9c31,61f614ecb3e418e01ebd3b465a1fa5721cbf9c31,"Merge pull request #2116 from couchbase/couchbase-lite-ios/docs-attachment

[docs] attachment size"
jamiltz,2018-03-23 16:35:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/359fce3b05d56c3063edb1d861b804d913d3322b,359fce3b05d56c3063edb1d861b804d913d3322b,relates to https://github.com/couchbase/sync_gateway/issues/3376
jamiltz,2018-03-22 18:05:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71d66ef8e38759d2b33bff23f0af1f1c0ac87263,71d66ef8e38759d2b33bff23f0af1f1c0ac87263,"upgrade docs, code example (#2113)

* upgrade docs, code example

https://issues.couchbase.com/browse/DOC-3350

* remove duplicate SampleCodeTest.swift, add 1.x attachment code example.

* changes per review"
pasin,2018-03-22 01:03:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a4d82c5046dd7d1e73652093d13df29088860d0,4a4d82c5046dd7d1e73652093d13df29088860d0,Fixed the API doc zip file name in generate_release.zip.sh (Again)
pasin,2018-03-21 23:29:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/df31d5352ddbecfd8b1a32ff0d132cf86f18f20f,df31d5352ddbecfd8b1a32ff0d132cf86f18f20f,Fixed the API doc zip file name in generate_release.zip.sh
pasin,2018-03-21 22:38:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/41126c211e7b0ea553c779282a1c0c95d9e436f7,41126c211e7b0ea553c779282a1c0c95d9e436f7,Update LiteCore to CBL2.0.0-DB024
pasin,2018-03-21 22:37:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5564f860ae3f64c5dcd64611b93edb7dc5e887eb,5564f860ae3f64c5dcd64611b93edb7dc5e887eb,"Fixed generate_api_docs.sh and generate_release_zip.sh

- Made CE and EE api docs having different zip file name.
- Fixed objective-c api doc generation.
- Added README for API doc."
pasin,2018-03-21 22:35:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7d567501d0d40e8fa85f225b68e4d7a663697425,7d567501d0d40e8fa85f225b68e4d7a663697425,"Update DatabaseEndpoint API doc

Marked as available only in EE."
pasin,2018-03-21 19:36:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02a2754af225b49f56f8fad6e31e2a3d19755c57,02a2754af225b49f56f8fad6e31e2a3d19755c57,"Update README.md

Removed the word `Beta` for GA preparation."
pasin,2018-03-21 03:54:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3ce2138a974076516a8e428508657757b9d138f1,3ce2138a974076516a8e428508657757b9d138f1,Update LiteCore to latest
pasin,2018-03-21 03:00:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d5c258a80b725e92cd136c0bc16b284784639c49,d5c258a80b725e92cd136c0bc16b284784639c49,"Print User-Agent on the first line of the log

* Moved getUserAgent() from CBLReplicatorConfiguration to CBLVersion.

* Printed User-Agent when initializing the CBLDatabase class."
pasin,2018-03-21 01:19:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0380d2d2909eea0c29436d2952df97d7ef74002d,0380d2d2909eea0c29436d2952df97d7ef74002d,"Fixed #2098 Error Standardizing (#2111)

* Map network domain errors to CBL errors

* Instead of mapping network domain errors to CFNetwork errors, mapping them to CBL domain errors with the base error of 5000.
* Not mapping POSIX network error-> keep them in POSIX domains.

#2098

* Update error messages and explicitly null check parameters

* Added CBLAssertNotNil to do null check.
* Updated error messages

#2098

* Fixed error messages in Database.delete() method

#2098"
pasin,2018-03-20 21:57:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d049a92285097e6643e86852dca326b8aaf0a3e,0d049a92285097e6643e86852dca326b8aaf0a3e,"Set SWIFT_OPTIMIZATION_LEVEL to none

Setting SWIFT_OPTIMIZATION_LEVEL to fast, single file still doesn’t work. When disabling the optimization seems to work with the test server app.

#2109"
pasin,2018-03-20 18:50:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71a72af29efac552cc85e65801ba42aa4a92292d,71a72af29efac552cc85e65801ba42aa4a92292d,"Delete examples from docs

As we are now using SampleCodeTest for sample codes in doc, delete examples from docs."
pasin,2018-03-20 18:49:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f128123cd1266de5a32ea2a4255c7cebd8eee84e,f128123cd1266de5a32ea2a4255c7cebd8eee84e,"Fix SampleCodeTest

* Marked dontTestDatabaseReplica with COUCHBASE_ENTERPRISE.
* Fixed dontTestDatabaseReplica build failed."
pasin,2018-03-20 18:01:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38510d16af63955ebfb02e132638f2660e5a4bf6,38510d16af63955ebfb02e132638f2660e5a4bf6,Update LiteCore to latest
pasin,2018-03-20 17:58:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/403154963acf7256b1381a7700fce424b9ae825b,403154963acf7256b1381a7700fce424b9ae825b,"Attempt to fix ReplicatorTest intermittently fails on Jenkins

* Increase timeout in testStopContinuousReplicator.
* Made sure to reset the created replicator to nil at the end of the test."
jamiltz,2018-03-20 17:29:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5bd6d4d8d2c7a2fc4b7f50525119ce805f614eea,5bd6d4d8d2c7a2fc4b7f50525119ce805f614eea,"asciidoc docs (#2110)

* Changes:

- asciidoc docs
- antora file
- _attributes.adoc files (antora)
- images
- include tags in source code

* move antora files to docs folder"
pasin,2018-03-20 16:03:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2a68e7c6c3a0e4cceb92c46791a8a8e8d6c07c6,e2a68e7c6c3a0e4cceb92c46791a8a8e8d6c07c6,"Change SWIFT_OPTIMIZATION_LEVEL to fast, single file

This is a workaroud for #2109."
pasin,2018-03-19 21:51:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/55472ff52b0d12a6a3ce1a01c6bf6069f1de95cb,55472ff52b0d12a6a3ce1a01c6bf6069f1de95cb,"Added [unowned self] to prevent self reference cycle in Swift closures

I noticed that we have closures that access the self object in add change listeners. We should make it as [unowned self] to prevent reference cycle."
pasin,2018-03-18 02:05:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/963caeb403d9b7985ad78c8713db72bf80e39822,963caeb403d9b7985ad78c8713db72bf80e39822,"Change iPhone Simulator version in generate_release_zip.sh

This is an experiment to see if switching iphone simulator has any effects to the intermittenly replicator test fails on Jenkins server."
pasin,2018-03-18 01:28:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78bf7a4b94153d41fc13dfc4af510c053b781e36,78bf7a4b94153d41fc13dfc4af510c053b781e36,"Fixed testCloseDatabaseWithActiveReplicator faillure

Reset the replicator to nil at the end of test to ensure that the replicator will be free in time before tear down."
pasin,2018-03-18 00:51:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b6b7b2c299e04dcdf54498e4952c6f74c7649aa,6b6b7b2c299e04dcdf54498e4952c6f74c7649aa,"Add some logging to testStopContinuousReplicator

testStopContinuousReplicator fails when running on Jenkins but not on local mac. Added some logging to see the case that it fails."
snej,2018-03-16 21:42:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80245a8921b295e148165b2b805cb4b8e3076eb8,80245a8921b295e148165b2b805cb4b8e3076eb8,"Updated LiteCore for improved iOS 9 fix

Fixes #2097"
snej,2018-03-16 20:50:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80be869a1cb381e541b38496c65e0c67984b7f08,80be869a1cb381e541b38496c65e0c67984b7f08,"Updated LiteCore for iOS 9 fix (deflatePending)

couchbase/couchbase-lite-core#471"
snej,2018-03-15 20:34:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2b7b37b3f9a9eda18c2210a9f992ed027d800e0d,2b7b37b3f9a9eda18c2210a9f992ed027d800e0d,"Merge branch 'fix/error_codes'

# Conflicts:
#	vendor/couchbase-lite-core"
pasin,2018-03-15 19:10:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f51e29acf46773af938875ba7810bfcdad55df5a,f51e29acf46773af938875ba7810bfcdad55df5a,"Fix immutable Swift Dict / Array not converted to objc object

* Fixed DataConverter. convertSETValue(value) to check the base Dictionary and Array type.
* Added unit tests for both Swift and Objective-C.

#2104"
pasin,2018-03-15 06:20:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e5e016820162a937251185778ad3b5beb6029eda,e5e016820162a937251185778ad3b5beb6029eda,Update version number in README
pasin,2018-03-13 21:18:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5280d7821fd686eaca1aaf675f09dab3500418e1,5280d7821fd686eaca1aaf675f09dab3500418e1,"Update LiteCore to latest

#2097"
pasin,2018-03-13 18:40:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f39668a77e5ac34fe664a1a5a173c3e43f39cc44,f39668a77e5ac34fe664a1a5a173c3e43f39cc44,"Made CBLHTTPLogic writing logs to WebSocket domain

Instead of always logging to NSLog, made CBLHTTPLogic logging to WebSocket domain."
pasin,2018-03-10 03:03:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/11c5dc446b6a95634d87e7e203cc3aa226329aa6,11c5dc446b6a95634d87e7e203cc3aa226329aa6,Removed tvOS from README and podspec
pasin,2018-03-10 02:38:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78856c579833654504433397aa844588b0569f13,78856c579833654504433397aa844588b0569f13,Removed tvOS build from generate_release_zip.sh
pasin,2018-03-10 02:01:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/604f3bd60801ef9e0f8a32445248f2f1390a203b,604f3bd60801ef9e0f8a32445248f2f1390a203b,"Remove a workaround to suppress SQL logging by default

LiteCore has made the logging domain of the SQL to warning by default. We can remove the workaround."
pasin,2018-03-10 01:58:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18c10023320b9066e4494f5934bb4465f0db3bf8,18c10023320b9066e4494f5934bb4465f0db3bf8,Updated LiteCore to latest
snej,2018-03-10 01:32:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63b1e5702508e3773b5c979b13d51d39ece3292d,63b1e5702508e3773b5c979b13d51d39ece3292d,"Fixed conflict detection to find deletions (parity with .NET)

Updated -[CBLDocument selectConflictingRevisions] so that it will find
a conflicting deletion; otherwise CBL doesn't properly resolve a
conflict where the server-side doc is deleted.

This matches the current .NET code which passes functional tests.

For couchbase/couchbase-lite-core#433"
snej,2018-03-10 00:26:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a3fcd267b5eda0c9a399a0c7b889a3a446056e39,a3fcd267b5eda0c9a399a0c7b889a3a446056e39,"Update for LiteCore error code overhaul

This changes the numbering of CBL error codes."
snej,2018-03-10 00:21:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/badf5b871438026623863d3ab6ae4844a2e8ae09,badf5b871438026623863d3ab6ae4844a2e8ae09,"Removed obsolete `litecorelog` tool from Jenkins build

It's now a subcommand of the `cblite` tool."
pasin,2018-03-09 22:57:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efdce339b85f4cf2affcfa8f5a2f87330e249cb4,efdce339b85f4cf2affcfa8f5a2f87330e249cb4,"Re-enable ReplicatorTests tests that don’t fail anymore

- Re-enabled testPullConflictDeleteWins and testPushAndPullBigBodyDocument_SG as we already fixed the issue.
- Updated testPushAndPullBigBodyDocument_SG to use random strings."
pasin,2018-03-09 18:55:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b467cef8018a213d9de1c6390f162f8025cb926e,b467cef8018a213d9de1c6390f162f8025cb926e,"Add push and pull big body document test

- Added ReplicationTest.testPushAndPullBigBodyDocument_SG.
- Marked it as a failing test.

#2087"
pasin,2018-03-09 06:10:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63985b0450b5e5c1f397536bf2576ce350481a0f,63985b0450b5e5c1f397536bf2576ce350481a0f,"Fixed build failure due to a random character

Removed an accidental typed random charater `."
pasin,2018-03-09 05:20:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27e573fb5fcfc71dfd6c54801a080b12640c0234,27e573fb5fcfc71dfd6c54801a080b12640c0234,"Change the log message for the default log level

#2096"
pasin,2018-03-09 05:18:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70772902533e66d2547c62f0aa4270595a523682,70772902533e66d2547c62f0aa4270595a523682,"Add SyncBusy logging to Replicator domain

Added SyncBusy logging to Replicator domain but only show the log messages when the log level is set to verbose or below."
pasin,2018-03-09 05:13:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/994611e0bab5f5e05e57bdf325e02698feff8d65,994611e0bab5f5e05e57bdf325e02698feff8d65,"Set log level for SQL domain to warning by default

Currenly LC set the default log level for SQL domain to Info by default. As the SQL log seems to be low level info to users, as a workaround, hide the SQL logging messages  by set its log level to warning.

#2095"
snej,2018-03-09 00:11:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9c8940e4d8878c9327c2f09f082b9059f22a8ab,c9c8940e4d8878c9327c2f09f082b9059f22a8ab,Updated LiteCore to latest.
pasin,2018-03-07 19:21:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8d589c6f0192741788375e9ac393f960e29f345,b8d589c6f0192741788375e9ac393f960e29f345,"Fix testSelfSignedSSLFailure_SG failed on iOS 10.2

- In iOS 10.2, when the TLS handshake failed in URLSession:didReceiveChallenge:completionHandler, the read/write stream will be closed and then -streamClosedForTask:isWrite: will be called. While in iOS 11, the task will be canceled automatically.

- We have already assigned _cancelError to the handshake error but the  _cancelError got overriden in streamClosedForTask:isWrite: method. So to fix this we just need to make sure that if the _cancelError has already been assigned, we don’t set the _cancelError to ECONNRESET.

#2094"
pasin,2018-03-07 04:48:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21a8492457a3808e4ff0c43aa55023a23fe48cdc,21a8492457a3808e4ff0c43aa55023a23fe48cdc,Update LiteCore
pasin,2018-03-07 03:29:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e8ca47b7b6d435610e9edd4a62023dbd6ec5cfb,0e8ca47b7b6d435610e9edd4a62023dbd6ec5cfb,Update DocPerfTest to use the latest API
pasin,2018-03-07 02:13:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efb39cfa86b2c5595577303dc72e0b06db30b15b,efb39cfa86b2c5595577303dc72e0b06db30b15b,"Fix #3089 Cancel NSURLSessionStreamTask could cause a crash in iOS 10 (#2093)

* Fix cancel NSURLSessionStreamTask could cause a crash in iOS 10

- Instead of cancel, close read/write socket instead for the case of an error occurred.

- In readClosedForStreamTask: and writeClosedForStreamTask:, also validate the task if the task is still the current task. This is required because the task is canceled in - receivedHTTPResponse due to a redirect or auth challenge, and in iOS 10 (not iOS 11), it causes the -readClosedForStreamTask: and -writeClosedForStreamTask: delegate to be called as well. Without checking the -streamClosed: method will get called and there could also be a race condition which cause the new task to be canceled in the -streamClosed: method.

- We should either close the sockets or cancel the task in didCloseWithCode:reason: as well otherwise the sockets leaks. To be safe, I close the sockets instead of cancel the task.

- Enabled testStopReplicatorAfterOffline_SG.

- Ensure that the replicator will be stopped after running the replicator even though the test failed.

#2089

* Cleanup some duplicate code in CBLWebSocket

- Renamed -streamClosed: to -streamClosedForTask:isWrite: and moved code that validates the current task in there.
- checkError: doesn’t need to reset _task to nil."
snej,2018-03-06 22:58:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f2f3617c40e95e0536bc97c32557f7e0a568afc,1f2f3617c40e95e0536bc97c32557f7e0a568afc,Updated LiteCore to latest
snej,2018-03-06 16:40:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/503d35cd5755c6f0cf5b55545542fbd9e8c6addf,503d35cd5755c6f0cf5b55545542fbd9e8c6addf,"Fixed merging of conflicts involving a deletion (#2090)

* Updated LiteCore to get its half of the fix.
* When creating a merge revision to resolve a conflict, make it a
  deletion when necessary (using the new param of c4doc_resolveConflict.)
* Fixed a bug where CBLC4Document's properties referred to the current
  revision, not the selected revision (which is different when a
  conflict is being resolved.)
* Re-enabled testPullConflictDeleteWins_SG, now that it passes.

For couchbase/couchbase-lite-core#433"
pasin,2018-03-05 20:07:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e1f68c3f33f6caa557cf0ce54d7bf0ca75ba524,3e1f68c3f33f6caa557cf0ce54d7bf0ca75ba524,"Marked TestStopReplicatorAfterOffline_SG as a failing test

#2089"
pasin,2018-03-05 19:43:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b15afb3331e1fc89fb61aead5e4010d96b2d3f90,b15afb3331e1fc89fb61aead5e4010d96b2d3f90,Update LiteCore
snej,2018-03-05 19:28:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cce5e3257b0b54ba11b882409b3e421098013d2c,cce5e3257b0b54ba11b882409b3e421098013d2c,"Merge pull request #2086 from couchbase/couchbase-lite-ios/feature/issue-2085

Fix #2085 crash when canceling NSURLSession task"
pasin,2018-03-04 01:43:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/701a2d40727ba48a557f6782abbd68069a83e05c,701a2d40727ba48a557f6782abbd68069a83e05c,"Fix crash when canceling NSURLSession task

- The crash happened when canceling the task after read/write socket was closed.
- In -checkError:, also ignore the ENOTCONN error if there was a request socket close.
- In -readHTTPResponse, also call checkError: the same way as in -receive and -writeAndFree:. This is not directly related to the crash but make the error check going the same path.

#2085"
pasin,2018-03-03 05:06:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c7270bb5f34327a0c99559b93ef89b55da6a088,9c7270bb5f34327a0c99559b93ef89b55da6a088,"Add pull conflict and delete wins unit test

* Added ReplicatorTest.testPullConflictDeleteWins and testPullConflictDeleteWins_SG; currently marked them as failing tests.

* Changed log domain from Database to Sync when resolving conflicts for replicator.

* Appended _SG suffix to all replicator tests with SG.

https://github.com/couchbase/couchbase-lite-core/issues/433"
pasin,2018-03-03 05:01:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40cfcaad6242b157fd935083216c69ad49c725e1,40cfcaad6242b157fd935083216c69ad49c725e1,Update LiteCore
pasin,2018-03-03 02:17:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3342f58df1220e22e9b8d8999f853d6015f595c,e3342f58df1220e22e9b8d8999f853d6015f595c,"Fix URLEndpoint crash when copy

#2083"
pasin,2018-03-02 19:58:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d617aa9b6cf9141c7b684a0686b1efb81078c04d,d617aa9b6cf9141c7b684a0686b1efb81078c04d,"Made Swift Blob implements Equatable and Hashable

- When hiding the Objective-C API from Swift framework (#1646), we don’t do typealias to CBLBlob for Swift’s Blob anymore.

- Swift’s Blob needs to also implement Equatable and Hashable

#2082"
pasin,2018-03-02 19:56:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10f8dd3b396c349b886d04bd59808dd5acffa33b,10f8dd3b396c349b886d04bd59808dd5acffa33b,"Fix Swift BasicAuthenticator missing initializer

This is a regression bug after hiding the Objective-C API from Swift framework (#1646).

#2081"
snej,2018-03-02 18:01:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5fe9d12bd21a52ceccd869fea42ac64513168fc6,5fe9d12bd21a52ceccd869fea42ac64513168fc6,Updated LiteCore to latest
pasin,2018-03-02 00:17:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa6ad40bf9b02fd5e42d9ce0d884f8431c7f5397,aa6ad40bf9b02fd5e42d9ce0d884f8431c7f5397,"Fix missing database lock in CBLQueryResult

Added database lock in -fleeceValueToObjectAtIndex: as calling root.asNative() could access the shared key."
pasin,2018-03-02 00:08:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96413fe763a8f63e384251946f563609a217921a,96413fe763a8f63e384251946f563609a217921a,"Rename CouchbaseLite.modulemap to CouchbaseLiteSwift.modulemap

- Renamed CouchbaseLite.modulemap to CouchbaseLiteSwift.modulemap.
- Added license header to the modulemap file.

#1646"
pasin,2018-03-01 23:26:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e740ae43599516d1e90cc30fca250703555779a4,e740ae43599516d1e90cc30fca250703555779a4,"Hide objc private headers from Swift framework

- Under the CBL Swift target, moved the public headers to private headers, except CBLErrors.h. Removed the umbrella CouchbaseLite.h from the CBL Swift target.
- Created CouchbaseLite.modulemap, specified all private headers in there under the Private sub module. Added all of the Swift category headers to the private module as well.
- Added CBLErrors.h in CouchbaseLiteSwift.h umbrella header.
- Removed all of the typealias, but instead create swfit wrapper for those include: ListenerToken, DatabaseChange, DocumentChange, Blob, Authenticator, BasicAuthenticator, and SessionAuthenticator.
- Added “Remove Private Headers” run script phase that calls “Scripts/remove_private_headers.sh” which will remove all of the private header files in the framework and the modulemap file.

#1646"
pasin,2018-03-01 02:43:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84f976d709466ec4aecb4c9f46feff8d4bef4b14,84f976d709466ec4aecb4c9f46feff8d4bef4b14,"Rework socket leak fix by canceling the session task

Instead of closing the read/write socket on the stream task, canceling the session task in  -checkError: along the setting the _ _cancelError. By doing this, the -URLSession:task:didCompleteWithError: delegate will be called with kCFURLErrorCancelled error.

#2078"
pasin,2018-03-01 00:31:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bce0b732285ae817d2ffcf0796be34f329fd052d,bce0b732285ae817d2ffcf0796be34f329fd052d,"Fix socket leaks and increase idle timeout

- Ensured to close read/write socket when an error occurs; the stream task might no close the socket when an error such as operation timed out (60) occurs.

- Increased the default read/write timeout to the value (320 seconds) which is greater than the default heartbeat of 300 seconds.

#2078"
pasin,2018-02-28 00:24:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71435a240749b320ab3d98f2475797389cc2aa19,71435a240749b320ab3d98f2475797389cc2aa19,Remove verbose build option from generate_coverage.sh
pasin,2018-02-28 00:14:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5758ef8574fbda0a6d5646a7c38c4edc16082387,5758ef8574fbda0a6d5646a7c38c4edc16082387,"Refix generate_coverage.sh

Fixed the binary location for EE."
pasin,2018-02-27 23:43:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16e5499712348396ff49f858dddfc7553317fdb5,16e5499712348396ff49f858dddfc7553317fdb5,"Update generate_release_zip.sh

Use a different simulator when running EE and CE build as they could be run at the same time on the same machine."
pasin,2018-02-27 21:47:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44ca3f029d1b34e86a9b702963cd47fdd029b8ba,44ca3f029d1b34e86a9b702963cd47fdd029b8ba,"Update Script/generate_coverage.sh

* Separated DERIVED_DATA_DIR between EE and CE
* Added -verbose for debugging"
pasin,2018-02-27 20:07:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da8ab2049826e77b7330014f05e19093d316b8ff,da8ab2049826e77b7330014f05e19093d316b8ff,Update LiteCore
pasin,2018-02-27 19:58:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a0a58bbd396f05c1560106092babcccb5fe82c2,1a0a58bbd396f05c1560106092babcccb5fe82c2,"Ensure DatabaseTest to use database dir from CBLTestCase (More)

DatabaseTest should use database dir (.directory property) from CBLTestCase which haves different database directory between CE and EE run per the fix for allowing Jenkins to build CE and EE in parallel."
pasin,2018-02-27 19:58:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b981bbe33570f5f6406e6e988b7b347b0fabf561,b981bbe33570f5f6406e6e988b7b347b0fabf561,"Ensure DatabaseTest to use database dir from CBLTestCase

DatabaseTest should use database dir (.directory property) from CBLTestCase which haves different database directory between CE and EE run per the fix for allowing Jenkins to build CE and EE in parallel."
pasin,2018-02-27 19:43:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d6d88ae1f765c19b55480ea52dcf92ea1ae4bd6,9d6d88ae1f765c19b55480ea52dcf92ea1ae4bd6,"Separate test database dir and log file name between CE and EE

Currently jenkins are building CE and EE in pararell so we need to make sure that the CE and EE unit test running do not step into each other."
pasin,2018-02-27 07:03:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f19ac026fa8003eed0f49050c78b2dcc182d76c0,f19ac026fa8003eed0f49050c78b2dcc182d76c0,"Re-enable unit test running in generate_release_zip.h

Re-enable unit tests running in generate_release_zip.h as https://github.com/couchbase/couchbase-lite-core/issues/409 has been fixed."
pasin,2018-02-27 06:37:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7fa2d2bcfe376d3ab7a9f6a973cfbbc5e4602a4,c7fa2d2bcfe376d3ab7a9f6a973cfbbc5e4602a4,"Remove encryption API (More)

* Removed encryption API from Swift’s DatabaseConfiguration.
* Updated Swift’s SampleCodeTest"
pasin,2018-02-27 06:32:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/017bff88160fe5e92c6ef6f8274a1005def00bb7,017bff88160fe5e92c6ef6f8274a1005def00bb7,"Remove encryption API

* Removed encryption API from CBLDatabaseConfiguration and CBLDatabase class.
* Moved CBLEncryptionKey into internal folder.
* Removed CBLEncryptionKey and CBLEncrytionKey+Internal from all targets.
* Removed objc_class_name_CBLEncryptionKey from CouchbaseLite-EE.exp.
* Updated Unit tests; Removed reference to DatabaseEncryptionTest."
pasin,2018-02-27 01:45:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/65b8743b2e85f4aa4a9b4143c001856adfed7012,65b8743b2e85f4aa4a9b4143c001856adfed7012,"Update CBLDatabaseConfiguration EE header

Removed conflictResolver property."
pasin,2018-02-27 01:38:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b11a00834e5d5b98c7c7c9378248bd8acec9ab6b,b11a00834e5d5b98c7c7c9378248bd8acec9ab6b,"Update CBLDatabase EE header file

As a side note, we should move to use category so we don’t need to keep the header in-sync between CE and EE."
pasin,2018-02-27 00:12:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4486ab8ec2022e93628b310114c246ae07f7147e,4486ab8ec2022e93628b310114c246ae07f7147e,Update LC to uptake BLIP_3 protocol
pasin,2018-02-26 23:13:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f276b1280b6d2d3d5422256b6c6704e37420c62c,f276b1280b6d2d3d5422256b6c6704e37420c62c,"Change error code when save / delete a newly created document

Changed from CBLErrorInvalidParameter to CBLErrorNotFound.

#2075"
snej,2018-02-26 22:04:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f7c1e50904114817b97218f09b6f6062f121d65,7f7c1e50904114817b97218f09b6f6062f121d65,"Merge pull request #2068 from couchbase/couchbase-lite-ios/feature/new-save

Update save document, delete document, and conflict resolver API"
pasin,2018-02-26 21:51:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8accccf98492b512365201c6128d6cd0975b24af,8accccf98492b512365201c6128d6cd0975b24af,"Handle error when cannot get the current doc for save

It’s possible that the current doc cannot get be retrieved (e.g. IO error). We should handle it gracefully."
pasin,2018-02-26 19:28:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5ca7a6811afb1e867d7b41413f3cdb3ae850dfa,b5ca7a6811afb1e867d7b41413f3cdb3ae850dfa,"Overload swift functions that aceept variadic params

Overloaded swift functions that aceept variadic params to accept array.

#2074"
pasin,2018-02-23 20:35:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0c30e65067047c8c23e589744c63bde47466e78,f0c30e65067047c8c23e589744c63bde47466e78,"Reset c4doc to nil after purge

Instead of trying to get a new doc, reset it to nil."
pasin,2018-02-23 19:11:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0573803b876b79cdf3b09c01e73da88af15bde2a,0573803b876b79cdf3b09c01e73da88af15bde2a,"Make changes per code review

* Changed from throwing NSInvalidArgumentException to returning NSError with CBLErrorInvalidParameter code when deleting or purging a newly created doc.
* Not checking null when calling c4doc_free(doc).
* Updated unit tests and added purge doc tests to Swift."
pasin,2018-02-22 19:00:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4697b0fc49fe6a63ce9cd2da5d3e2c8c3902ec8a,4697b0fc49fe6a63ce9cd2da5d3e2c8c3902ec8a,"Rename ConcurrencyControl enum values

- Renamed: none -> lastWriteWins and optimistic -> failOnConflict.
- Fixed unit tests."
pasin,2018-02-22 21:24:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/32d073445b70289b68edcd1905c62d9cd005671b,32d073445b70289b68edcd1905c62d9cd005671b,Update LiteCore
pasin,2018-02-22 18:54:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6a300c6d9f3a73939d051162ed89713561ea73e,e6a300c6d9f3a73939d051162ed89713561ea73e,"Reload c4doc after purge

* Reloaded c4doc after purge but still preseve the current document data. This will make the document like a new document after purge. The behavior change is that purging twice is not allow (an exception will be thrown) like purging or deleting a newly created document which is expected.

* Update unit tests accordingly."
pasin,2018-02-22 05:48:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b4b981f8fa9291d104e11f05df5bb9cd0c6dcff4,b4b981f8fa9291d104e11f05df5bb9cd0c6dcff4,"Cleanup the code by releasing c4doc in @finally block

- Simplified the code by releasing curDoc and newDoc in @finally block.
- Fixed and updated unit tests."
pasin,2018-02-21 01:00:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38401e68dbe7b75f9522865271e8259d751a3b2b,38401e68dbe7b75f9522865271e8259d751a3b2b,"Fixed error message and cleanup the save logic per code review

* Fixed the error message.
* Cleanup the save logic per code review to remove duplicating code."
pasin,2018-02-21 02:53:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7df450326f03f502723fbe34634fa984d5b744d,c7df450326f03f502723fbe34634fa984d5b744d,Fix typos in Project_Release_EE.xcconfig
pasin,2018-02-21 02:17:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f8665e983d779dd929aa9db21c1d84709c1f028,5f8665e983d779dd929aa9db21c1d84709c1f028,"Fix Objective-C EE build

* Separated exported symbol file between CE and EE.
* Separated some header files between CE and EE. The EE header files are kept in the Objective-C/EE folder. As a workaround, the ee build script will copy the headers file from EE folder to Objective-C folder before building the binary. Need to explore the possibility of using build phase to do this."
snej,2018-02-20 22:32:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9e816c02e71d750f937f4d7e53f9e5b2a181c12,c9e816c02e71d750f937f4d7e53f9e5b2a181c12,Changed CBLEncryptionKey to use AES128.
snej,2018-02-20 21:41:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/68b80964c64b3e51b9322555faa5407f8f4b3f23,68b80964c64b3e51b9322555faa5407f8f4b3f23,"Updated LiteCore (replication optimizations, etc.)

Replication optimizations:
* Improved memory usage of Pusher by limiting number of queued revs
* Improved pull performance by throttling rate of handling change lists
* Fixed SequenceTracker bloat on external transactions

Other improvements:
* Avoid pushing conflicts to the server
* Convert encryption from AES256 to AES128
* Fixed Xcode 9.3 build warnings
* Better query logging

Fixes #1970"
snej,2018-02-19 23:14:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db4c300fd0fde34174e849f4aa75ae0b4c66188d,db4c300fd0fde34174e849f4aa75ae0b4c66188d,Updated MYUtilities to fix an Xcode 9.3 compiler warning
snej,2018-02-19 23:12:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/774152eca2baff643c682010782e10c465e2ac2b,774152eca2baff643c682010782e10c465e2ac2b,Fixed performance tests
pasin,2018-02-20 20:11:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d1302ea7c86cff518fcdff61f47a100223ae99b,5d1302ea7c86cff518fcdff61f47a100223ae99b,"Fix build configuration for EE

* Fixed Project_Release_EE.xcconfig not getting used when building EE in release mode.
* Added -D COUCHBASE_ENTERPRISE  to OTHER_SWIFT_FLAGS."
pasin,2018-02-20 07:15:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/776da7c17e54b9766b7ca799e705293cca9021cb,776da7c17e54b9766b7ca799e705293cca9021cb,"Update unit tests to reflect the API changes

* Updated unit tests to reflect the API changes
* Added unit tests to test the updated API in DatabaseTest."
pasin,2018-02-20 06:43:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f5c2e511050819dd4178db9be6260be5bbade06,6f5c2e511050819dd4178db9be6260be5bbade06,"Update save document, delete document, and conflict resolver API

* Removed custom Conflict Resolver API.
* Updated Database.saveDocument() API.
* Updated Database.deleteDocument() API.
* Removed Document.isDeleted."
pasin,2018-02-16 18:48:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1906f45cee66e1f3ec9429974b96d1e878443dae,1906f45cee66e1f3ec9429974b96d1e878443dae,"Update .gitignore

Ignore couchbase-lite-core-EE copied to the vendor folder."
pasin,2018-02-15 19:18:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/128c55016fd180d221097ff9457ca0f4a0025efa,128c55016fd180d221097ff9457ca0f4a0025efa,"Separate CE and EE API

- Using ifdef `COUCHBASE_ENTERPRISE` to separate between CE and EE API

- Some unit tests (encryption test and db-to-db replication tests requires EE enabled)."
pasin,2018-02-14 16:12:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21ad381acf770a711f5086bb3c085324dafbb4b7,21ad381acf770a711f5086bb3c085324dafbb4b7,"Fix generate_api_docs.sh script

Added a missing “-“ to the sdk option."
pasin,2018-02-14 09:29:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a448beb657773c628dc6f234eb6061d977572e0f,a448beb657773c628dc6f234eb6061d977572e0f,"Update build scripts

- Updated scripts to support EE build.
- Disabled running unit tests as some tests are failed with EE. Will enable it back after solving the issue."
snej,2018-02-13 03:11:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e5a476771e6553276dddf89576b542e0d3031a6d,e5a476771e6553276dddf89576b542e0d3031a6d,Fixed copyright in new source files
snej,2018-02-13 02:19:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ceddf7ce3281c7eb5dd03491863a0b805b0928f6,ceddf7ce3281c7eb5dd03491863a0b805b0928f6,"Xcode: Added EE configurations & xcconfig files.

* ""Debug-EE"" and ""Release-EE"" configurations are identical to ""Debug""
  and ""Release"" except that they use the ""Project-Debug-EE.xcconfig""
  and ""Project-Release-EE.xcconfig"" configuration files.
* Those config files override the preprocessor symbol settings to define
  COUCHBASE_ENTERPRISE, enabling enterprise feature & tests thereof.
* The matching ""Debug-EE"" and ""Release-EE"" configurations are used when
  building LiteCore, so it builds the EE version with encryption
  enabled."
pasin,2018-02-10 01:05:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5b4c33ed542ae3d188de6be8e9805023b655b831,5b4c33ed542ae3d188de6be8e9805023b655b831,Update README.md
pasin,2018-02-10 00:51:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/780737f0c06780e6b84a11fc5d9ae4fddb7e619c,780737f0c06780e6b84a11fc5d9ae4fddb7e619c,Update minimum requirements
pasin,2018-02-10 00:36:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/612cbc8968460405c236bb560ebd7ed990b34034,612cbc8968460405c236bb560ebd7ed990b34034,Add LICENSE file
pasin,2018-02-10 00:31:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bbaab05344125ca54b6073cbddaf6a6a0c4c6ba9,bbaab05344125ca54b6073cbddaf6a6a0c4c6ba9,Update README.md
pasin,2018-02-10 00:03:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0378341d6001c411fc9af8ea919036d9aefb92ac,0378341d6001c411fc9af8ea919036d9aefb92ac,"Added a missing xcworkspace file

* Added contents.xcworkspacedata."
pasin,2018-02-09 23:23:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c0aa26300c486ff8185b95f24f2f2a7566e2a0a,3c0aa26300c486ff8185b95f24f2f2a7566e2a0a,"Merge branch 'feature/2.0'

# Conflicts:
#	.gitmodules
#	CouchbaseLite.xcodeproj/project.pbxproj
#	CouchbaseLite.xcodeproj/xcshareddata/xcschemes/CBL ObjC Tests - iOS App.xcscheme
#	CouchbaseLite.xcodeproj/xcshareddata/xcschemes/CBL ObjC.xcscheme
#	CouchbaseLite.xcodeproj/xcshareddata/xcschemes/CBL Swift Tests.xcscheme
#	CouchbaseLite.xcodeproj/xcshareddata/xcschemes/PerfTests - Mac.xcscheme
#	CouchbaseLite.xcodeproj/xcshareddata/xcschemes/PerfTests - iOS.xcscheme
#	Objective-C/Info.plist
#	Objective-C/Internal/CBLBase64.m
#	Objective-C/Internal/CBLParseDate.c
#	Objective-C/Internal/Replicator/CBLReachability.m
#	Objective-C/Tests/Info.plist
#	Objective-C/Tests/SelfSigned.cer
#	Objective-C/Tests/Support/databases/ios140/iosdb.cblite2/attachments/3F58B9908FECA2CABBE39FFD04347B9048212A9B.blob
#	Objective-C/Tests/Support/databases/ios140/iosdb.cblite2/attachments/89379B9D06B399D0214411FAE32F44E89AB04A87.blob
#	Objective-C/Tests/Support/databases/ios140/iosdb.cblite2/db.sqlite3
#	Objective-C/Tests/Support/databases/ios140/iosdb.cblite2/db.sqlite3-shm
#	Objective-C/Tests/databases/ios140/iosdb.cblite2/attachments/3F58B9908FECA2CABBE39FFD04347B9048212A9B.blob
#	Objective-C/Tests/databases/ios140/iosdb.cblite2/attachments/89379B9D06B399D0214411FAE32F44E89AB04A87.blob
#	Objective-C/Tests/databases/ios140/iosdb.cblite2/db.sqlite3
#	Objective-C/Tests/databases/ios140/iosdb.cblite2/db.sqlite3-shm
#	Objective-C/Tests/iOS/Base.lproj/Main.storyboard
#	Objective-C/Tests/iOS/Info.plist
#	README.md
#	Scripts/Support/License/LICENSE_community.txt
#	Scripts/Support/License/LICENSE_enterprise.txt
#	Scripts/get_repo_version.sh
#	Swift/Tests/Info.plist
#	docs/examples/objc-api-walkthrough/objc-api-walkthrough/AppDelegate.h
#	docs/examples/objc-api-walkthrough/objc-api-walkthrough/AppDelegate.m
#	docs/examples/objc-api-walkthrough/objc-api-walkthrough/Assets.xcassets/Contents.json
#	docs/examples/objc-api-walkthrough/objc-api-walkthrough/main.m
#	docs/examples/swift-api-walkthrough/api-walkthrough/Assets.xcassets/Contents.json
#	docs/examples/swift-api-walkthrough/api-walkthrough/Info.plist
#	vendor/MYUtilities
#	xcconfigs/Project.xcconfig
#	xcconfigs/Project_Debug.xcconfig
#	xcconfigs/Project_Release.xcconfig"
pasin,2018-02-09 23:21:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e336c06b1bde85b2e741439e9cb0784354e3f00,8e336c06b1bde85b2e741439e9cb0784354e3f00,Removed all 1.x files for merging feature/2.0 into
snej,2018-01-29 19:18:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/862b1dd28f40939b261bd86adcccfda602427f2e,862b1dd28f40939b261bd86adcccfda602427f2e,"Replication conflict resolution should always update remote branch (#2048)

After conflict resolution, the doc history must include the current
remote revision, otherwise the next push will create a conflict. So
during resolution the conflicting [remote] branch must 'win'.

Fixes #2041
# Conflicts:
#	Objective-C/CBLDatabaseConfiguration.h
#	Objective-C/Tests/ReplicatorTest.m"
pasin,2018-02-09 22:53:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0970ca33e66bc9cf6f2b9d095718d4515c8366b2,0970ca33e66bc9cf6f2b9d095718d4515c8366b2,Fixed EncryptionTest and update LiteCore
pasin,2018-02-09 22:27:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/803ca94c20fc6e78a1d8664b45d828c2420af5a2,803ca94c20fc6e78a1d8664b45d828c2420af5a2,"Merge branch 'feature/2.0-dev' into feature/2.0

# Conflicts:
#	Objective-C/CBLDatabaseConfiguration.h
#	vendor/couchbase-lite-core"
pasin,2018-02-09 21:15:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4142bada7484626360c655af5344c0c182da6740,4142bada7484626360c655af5344c0c182da6740,Update sample code unit tests
snej,2018-02-08 23:19:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cbd993f288c520b76732d34fe681a763c8b582ff,cbd993f288c520b76732d34fe681a763c8b582ff,Added a new cross-join unit test taken from #2035
snej,2018-01-27 00:06:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da87ce45e6535846da367491f1674af2cb11d7a9,da87ce45e6535846da367491f1674af2cb11d7a9,"Added a JOIN unit test based on the situation in LiteCore#379

Also updated LiteCore to pick up the fix

See couchbase/couchbase-lite-core#379"
snej,2018-02-08 23:20:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f68948c4e3c1d70ec261b74ce9e57d063016c61,2f68948c4e3c1d70ec261b74ce9e57d063016c61,Updated LiteCore to latest 'dev' branch
snej,2018-02-08 21:14:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7dcab3cf423133fb678089dea86a9af588852b0c,7dcab3cf423133fb678089dea86a9af588852b0c,Fixed Mac build by making MYBackgroundMonitor compileable
pasin,2018-02-08 18:43:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd72449d3f8c36be0c03b5ebdc0117e5cf928274,fd72449d3f8c36be0c03b5ebdc0117e5cf928274,"Update version number in README

2.0DB021 -> 2.0DB022"
snej,2018-02-07 21:31:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/24f5b3597ece9925e6df4e1959274ec6e1e5faf2,24f5b3597ece9925e6df4e1959274ec6e1e5faf2,"Merge pull request #2056 from couchbase/feature/2.0-doc-thread-safe

Fixed #1967 : Make Document, Dictionary, and Array thread-safe"
pasin,2018-02-07 20:27:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/275fbe3729027718a25002fe737cc93fb218547f,275fbe3729027718a25002fe737cc93fb218547f,"Fix Database copy to non-existing directory

Somehow the setupDatabaseDirectory() was called after c4db_copy() method. It needs to be called before with the parent directory of the target database.

#2061 #1879"
pasin,2018-02-07 00:24:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7c60d47477adfc28784b04357aa80f03d177c73,c7c60d47477adfc28784b04357aa80f03d177c73,"Fixed according to code review

* Renamed _sharedLock method to setupSharedLock which doesn’t return the value.

* CBL_LOCK(_sharedLock) directly instead of CBL_LOCK(self.sharedLock).

* Reimplemented CBLDictionary’s -isEqual: to not use C++ API

#1967"
pasin,2018-02-06 05:53:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cab453631e88fde074b6a77a5441c9ed9460a394,cab453631e88fde074b6a77a5441c9ed9460a394,"Re-fix #1898 without blocking the main thread (#1994)

* Reverted the fix back to 1.4.0 that executes background / foregrounding logic on the main thread.

* In CBLRestReplicator.m, make CBLRestReplicator’s `_active` property atomic.

* In CBLRestReplicator.m, moved calling `[self setupBackgrounding]` to the end of the `-start` method.

* In `-backgroundTaskExpired` of CBLRestReplicator+Backgrounding.m, set `_deepBackground = YES` on the main thread instead of on the replicator thread as it was in 1.4.0.

#1898"
pasin,2018-02-06 05:52:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0256fb60cfc5fb079b8ab60775f75329e28630fc,0256fb60cfc5fb079b8ab60775f75329e28630fc,"Fixed #2058 : Implement replicator backgrounding support (#2059)

* Implement replicator backgrounding support

  - Added ReplicatorConfiguration.allowReplicatingInBackground flag for disabling or enabling the feature.

  - ReplicatorConfiguration.allowReplicatingInBackground=NO, the replicator will be suspended when the app goes into background and the replicator becomes idle. The replicator will be resumed when the app is brought foreground.

  - ReplicatorConfiguration.allowReplicatingInBackground=YES, the replicator will keep running the background BUT it is the applicataion’s responsibility to extend the background task to keep the replicator running properly.

  - If the replicator is started while the app is in background, the replicator will keep running until IDLE before getting suspended.

* Fixed replicator backgrounding according to the review

  - Added a todo note for refactoring to use enum based variable to represent the replicator’s state instead of using multiple boolean variables.

  - Fixed CBLReplicatorConfiguration API comment.

  - Removed unnessary if value change check in CBLReplicatorConfiguration.

#2058"
pasin,2018-02-06 02:21:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a07ff338057eb87f4676dc293cc86d391d436722,a07ff338057eb87f4676dc293cc86d391d436722,"Fixed according to code review

* Precomputed the shared lock and kept it as a weak reference in an ivar in CBLDictionary and CBLArray.
* Fixed potential cause to dead lock in CBLDictionary’s -isEqual:.
* Fixed indent in CBLDocument’s -updateDictionary.
* Locked _array in CBLArray’s objectAtIndexedSubscript:.

#1967"
pasin,2018-02-05 22:01:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72461732e9be2500d55ba5d0ca59cca8312b6a45,72461732e9be2500d55ba5d0ca59cca8312b6a45,"Make LiveQuery run in background

* Created a shared query dispatch queue to run queries.
* Executed the query from the query dispatch queue.

#1957"
pasin,2018-02-05 21:10:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3319e5d8fe5ad8cd4edf5916007d362585f4061e,3319e5d8fe5ad8cd4edf5916007d362585f4061e,"Return busy err when close or delete db if there is an active repl or live query

Instead of trying to stop the active replicators and live queries, return BUSY error. We could consider relax this in 2.x."
pasin,2018-02-02 21:54:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c9a9f35e042321f94219ee349707c579cae96b3,7c9a9f35e042321f94219ee349707c579cae96b3,"Make Document, Dictionary, and Array thread-safe

* Made Document, Dictionary, and Array thread-safe. The MutableDocument, MutableDictionary, and MutableArray are not guarantee to be thread-safe.

*  Created a shared lock which could either be the database object or the self object to lock all of the mcollection’s operations.

#1967"
pasin,2018-02-03 05:42:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e412cf6c711d31bda4e50c835ac34b8020053e9,4e412cf6c711d31bda4e50c835ac34b8020053e9,"Update copyright

#2057"
pasin,2018-02-02 21:56:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1cf2a82e4fd8a262f92eae96715b447736859e34,1cf2a82e4fd8a262f92eae96715b447736859e34,"Fix ReplicatorTest build failure

Fixed kCBLReplicatorPull > kCBLReplicatorTypePull"
pasin,2018-02-02 18:31:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28b0a07a7a0bf6f8b3d92f111e74665025582e94,28b0a07a7a0bf6f8b3d92f111e74665025582e94,"Fix API doc in CBLDatabaseConfiguration CBLReplicatorConfiguration

Fixed conflictResolver documentation."
pasin,2018-02-02 18:19:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/069da71b10c53b156fdcb79aab217df4c01fe4a7,069da71b10c53b156fdcb79aab217df4c01fe4a7,"Revert ""Replication conflict resolution should always update remote branch (#2048)""

This reverts commit 8b67103c709dbde40306a1b9b2d753e81880b9bd.

# Conflicts:
#	Objective-C/Tests/ReplicatorTest.m"
pasin,2018-02-01 21:10:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f1202033445348700650d15def615fc8f78524e5,f1202033445348700650d15def615fc8f78524e5,"Make replicator thread-safe and fix stop after offline (#2046)

* Made the replicator thread-safe by using lock.

* Fix the stop status not getting reported when calling replicator.stop() after the replicator is in the offline state.

#1981"
pasin,2018-01-30 21:31:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0cf2cafeab717c6413df1e15180df1a9a73cc41f,0cf2cafeab717c6413df1e15180df1a9a73cc41f,"Update exported symbol file

* Removed CBLFullTextIndexOptions and CBLReplicatorConfigurationBuilder.
* Added CBLIndexBuilder."
pasin,2018-01-30 21:30:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e8e6ad7c97b4aeda0267b638d4857f68f7fc661,1e8e6ad7c97b4aeda0267b638d4857f68f7fc661,"Update exported symbol file

* Removed CBLFullTextIndexOptions and CBLReplicatorConfigurationBuilder.
* Added CBLIndexBuilder"
pasin,2018-01-30 21:13:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c49c740122962e350e3e8e5461cfa4cafaf391a2,c49c740122962e350e3e8e5461cfa4cafaf391a2,"Fix Swift SampleCodeTest build failure on Mac target

Disabled the code for Mac target."
pasin,2018-01-30 21:11:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/46b967f1296627edc1bb4503bc62686486a8a987,46b967f1296627edc1bb4503bc62686486a8a987,"Fix Swift SampleCodeTest build failure on Mac target

Disabled the code for Mac target."
pasin,2018-01-30 21:00:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63a63e592aad8746edda939768c1a26b26a0560a,63a63e592aad8746edda939768c1a26b26a0560a,"Fix SampleCodeTest build failure on Mac target

Disabled the code for Mac target."
pasin,2018-01-30 20:58:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/267473191fec1efa563948d31ab6b80ca3df762a,267473191fec1efa563948d31ab6b80ca3df762a,"Fix SampleCodeTest build failure on Mac target

Disabled the code for Mac target."
pasin,2018-01-30 20:46:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4466f87b2a46412a2b4850cccb7c9dbc6703617c,4466f87b2a46412a2b4850cccb7c9dbc6703617c,"Disable some tests until updating to the lastest LC

Disable some tests that check whether the encryption is supported or not. This tests requires the latest LC without SQLCipher."
pasin,2018-01-30 20:32:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db04967177f57539550074742c3bc8faf8fef79d,db04967177f57539550074742c3bc8faf8fef79d,Merge  feature/2.0-dev into feature/2.0
pasin,2018-01-30 20:29:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4d781e0ce5d6a9375a42d5fd4f5ed852f4c386cb,4d781e0ce5d6a9375a42d5fd4f5ed852f4c386cb,"Clean Swift’s constructors and factory methods

Removed all of the withXXX label from all constructors and factory methods."
pasin,2018-01-30 19:37:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d34ac5b74194e197eab3ca62762fab2ef245cfb,1d34ac5b74194e197eab3ca62762fab2ef245cfb,"Change Swift Configuration to class

With the current API that [1] throws runtime exception when the configuration is marked as readonly and that [2] there is a constructor that talkes another config object, the configuration is more like Class not struct."
pasin,2018-01-30 13:37:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e7025dd5df97cbab5431f71aad77ec749076d2f9,e7025dd5df97cbab5431f71aad77ec749076d2f9,"Revert Configuration API back to non-builder pattern

* Reverted Configuration API back to non-builder pattern.
* Changed objects: DatabaseConfiguration, ReplicatorConfiguration, Parameters"
pasin,2018-01-30 09:40:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5cb9f9ee9619bd357ef7256da8508aa331e23628,5cb9f9ee9619bd357ef7256da8508aa331e23628,"Separate Query and Index to Builder and Object class

#2051"
pasin,2018-01-30 09:36:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0bd48861df0d98e45ea151efe8ef1796db38c3d9,0bd48861df0d98e45ea151efe8ef1796db38c3d9,"Fixed DatabaseEncryptionTest

Enabled / Disabled the test based on COUCHBASE_ENTERPRISE preprocessor as appropriate."
pasin,2018-01-26 08:37:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/beb15f5fb0ac1268bae8d96cc74ebc2dcc21f0f1,beb15f5fb0ac1268bae8d96cc74ebc2dcc21f0f1,"Add Swift SampleCodeTest for verifying sample codes

* Added SampleCodeTest.swift for verifying sample codes.
* Note that all the tests are disabled."
pasin,2018-01-26 07:25:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7efbb37e5cc013ae28a31fe0e3f5a4e0f9a3c73d,7efbb37e5cc013ae28a31fe0e3f5a4e0f9a3c73d,"Add Objective-C SampleCodeTest for verifying sample codes

* Added Objective-C SampleCodeTest.m for verifying sample codes.
* Note that all the tests are disabled."
pasin,2018-01-29 23:12:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bbc6cbadebd6b2ae45d558a3745211d0725dfa6c,bbc6cbadebd6b2ae45d558a3745211d0725dfa6c,Update LiteCore
snej,2018-01-29 19:18:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b67103c709dbde40306a1b9b2d753e81880b9bd,8b67103c709dbde40306a1b9b2d753e81880b9bd,"Replication conflict resolution should always update remote branch (#2048)

After conflict resolution, the doc history must include the current
remote revision, otherwise the next push will create a conflict. So
during resolution the conflicting [remote] branch must 'win'.

Fixes #2041"
rajagp,2018-01-27 04:26:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f51e4d7649af32f53597f0264a85a406a0575c8,9f51e4d7649af32f53597f0264a85a406a0575c8,Ported cross join and left join tests from .Net (#2049)
snej,2018-01-24 19:13:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e7696f23eabff2ae138b68d34882161f9bdc7f44,e7696f23eabff2ae138b68d34882161f9bdc7f44,"LiteCore: Removed sqlcipher and encryption functionality

* Updated LiteCore to latest 'dev' branch
* Disabled encryption tests in non-EE builds (using the same preprocessor
  flag as in LiteCore: COUCHBASE_ENTERPRISE)
* Renamed CBLErrorNotADatabaseFile to CBLErrorUnreadableDatabase,
  which makes more sense when it occurs from a wrong encryption key."
snej,2018-01-26 01:38:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98be735c69e26e09dd9c73542481b007b59d660a,98be735c69e26e09dd9c73542481b007b59d660a,"Updated LiteCore for ""Fixed crash updating pulled document > 20 times""

Pick up fix for couchbase/couchbase-lite-core#376"
pasin,2018-01-25 23:02:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d126f3df3872ce8977d045319602a7c0f2cf3943,d126f3df3872ce8977d045319602a7c0f2cf3943,"Change FullTextIndex.locale to FullTextIndex.language

* Changeed from FullTextIndex.locale to FullTextIndex.language.
Without setting the language, the current locale's language will be used.
* Setting the nil language will disable the language features such as stemming and etc.
* Setting invalid language or unsupported language will also disable the language features but there will be a warning about unsupported language shown up in the log. This is done via LiteCore.

#2042"
snej,2018-01-25 05:20:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c270555435d841c60e5c2319cc51c093a2c4d0cc,c270555435d841c60e5c2319cc51c093a2c4d0cc,"Declare NSError domain and codes in public API, and improve error mapping (#2039)

* Added public header CBLErrors.h which declares CBLErrorDomain and
  constants for all the LiteCore errors, plus HTTP and WebSocket codes.
* CBLStatus.m maps all NetworkDomain errors to NSURLErrorDomain.
* CBLStatus.m maps WebSocketDomain to CBLErrorDomain but offsets the
  codes by +10000 (as declared in CBLErrors.h)
* CBLStatus constants were folded into CBLErrorDomain codes.

Fixes #2006"
pasin,2018-01-25 04:48:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e1bddbfd6efd585a3b6f060f205ab01b80f462f,0e1bddbfd6efd585a3b6f060f205ab01b80f462f,"Fix active replicators and queries in swift are not retained

In Objective-C and other platforms, active replicators and queries are retained in the database object. Hence doing the same for Swift.

#1926"
snej,2018-01-25 01:03:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9bbbbc24b3f302252b6eeb57bf9fb4c80e1042df,9bbbbc24b3f302252b6eeb57bf9fb4c80e1042df,"Updated LiteCore for ""Fix errors saving checkpoints from SG-Accel""

couchbase/couchbase-lite-core#373"
pasin,2018-01-24 19:08:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fcd5a04025f9f329dcbb417009f97c4122c2577f,fcd5a04025f9f329dcbb417009f97c4122c2577f,"Fix non-threadsafe API left in CBLQuery

* Made setting query parameters thread-safe.
* Made add/remove change listeners thead-safe"
pasin,2018-01-24 05:41:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/793ab173b756c5111f5f666b1463df528b0966b3,793ab173b756c5111f5f666b1463df528b0966b3,"Fix invalid comment about the database name

After running some tests, the database name can contain capitalized letters."
pasin,2018-01-23 02:34:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66f8ff5d86659db3b75d990a105e7c3553e13e5f,66f8ff5d86659db3b75d990a105e7c3553e13e5f,"Fix DatabaseTest.testDeleteDBOpendByOtherInstance failed on device

* The reason that the otherDB doesn’t have the same path is because the path get normalized after calling stringByStandardizingPath on the path that already exists.

* Here is from the Apple documentation about stringByStandardizingPath: removing an initial component of “/private/var/automount”, “/var/automount”, or “/private” from the path, if the result still indicates an existing file or directory (checked by consulting the file system).

* Solution: Don’t normalize the path. In 1.x, we have’t normalized the path as well.

#1797"
pasin,2018-01-22 21:12:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2371000d535f2a7727c42c7e5abd1ec75458738c,2371000d535f2a7727c42c7e5abd1ec75458738c,Update LiteCore that back out the heartbeat commit
pasin,2018-01-22 20:42:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/306826fa0897f7d53a9db196b413add9b010e7ab,306826fa0897f7d53a9db196b413add9b010e7ab,"Add description to URL and Database Endpoint

Added description method to CBLURLEndpoint and CBLDatabaseEndpoint."
pasin,2018-01-22 18:56:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5744e1dd7b10104b83baaa5aae39bbb8c1131220,5744e1dd7b10104b83baaa5aae39bbb8c1131220,"Fix Query API static functions to hide them from subclasses

* In Swift Query API, we have been using the factory design pattern where the factory class is also the base class itself. The problem is that swift static functions can be visible by sub classes.

* Solution:
    - Create a protocol type to be returned from the fatory class.
    - The factory class will not be the base class.

#1987"
snej,2018-01-20 01:11:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f267b6f85fa805ccf3ed137da801151f5e8ba096,f267b6f85fa805ccf3ed137da801151f5e8ba096,"Added replicator heartbeat (keep-alive)

* Updated LiteCore to get the heartbeat functionality.
* Added internal API to CBLReplicatorConfiguration to customize the
  interval.

See couchbase/couchbase-lite-core#356"
pasin,2018-01-20 00:10:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0157a9b2228cd05b0909d5afc6d6609df73ad3b0,0157a9b2228cd05b0909d5afc6d6609df73ad3b0,Fix typos in CBLURLEndpoint exception message
snej,2018-01-19 23:16:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bde0a5a7a6895ac0a4b691692e59991b38fbe6e,2bde0a5a7a6895ac0a4b691692e59991b38fbe6e,Include LiteCore version in User-Agent HTTP header
pasin,2018-01-19 23:12:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0490e441a2cd01787c00b2a95093db478079f53d,0490e441a2cd01787c00b2a95093db478079f53d,"Add a unit test for saving multiple docs

#1974"
snej,2018-01-19 20:25:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9858459a679ef28389555da1aa23d7f84f4b6a06,9858459a679ef28389555da1aa23d7f84f4b6a06,"CBLWebSocket now handles unexpected socket closure

Fixes #1978"
snej,2018-01-19 00:56:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2dd57ba7d36bd0ce48fc461906d9526ca0eb123,c2dd57ba7d36bd0ce48fc461906d9526ca0eb123,Updated LiteCore for update of BLIP-Cpp with CMake fix
snej,2018-01-19 00:25:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f38c1da74ab9b9dde843ce0fb93a98b2cbc644bf,f38c1da74ab9b9dde843ce0fb93a98b2cbc644bf,"Logging cleanup

* Fixed crash regression from earlier commit
* Don't enable SQL log domain; it's TMI
* Don't use ""Database"" as a log domain; it's ""DB"".
* WebSocket logging cleanup in LiteCore and BLIP-Cpp, including
  changing ""WSMock"" domain to ""WS"".

Fixes #2032"
pasin,2018-01-19 00:13:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e2593682fb58f38c12845441f9a61e76ec55343,3e2593682fb58f38c12845441f9a61e76ec55343,"Remove LogDomainActor from CBLLog

LogDomainActor is not valid so remove it.

#2033"
pasin,2018-01-18 23:48:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49dff2d93a83d1835ce51ea62a65aef79443fa5d,49dff2d93a83d1835ce51ea62a65aef79443fa5d,"Change URLEndpoint constructor to take only an URL object

* Updated the URLEndpoint constructor to take only an URL object.
* The supported URL schemes are ws and wss."
pasin,2018-01-18 23:07:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb95a94f115c3256ab697eb3d844b49998862e53,eb95a94f115c3256ab697eb3d844b49998862e53,"Remove Actor log domain

Actor log domain doesn’t exists and could be failed when try to set the log level to it.

#2033"
pasin,2018-01-18 06:49:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ae3fd90769ccf58dd0ac97b5519912245b792238,ae3fd90769ccf58dd0ac97b5519912245b792238,"Fix Replicator’s reachability not working

* This is a regression after changing the API to use Endpoint.
* Added an internal URL property to CBLURLEndpoint to return a URL representation object of the endpont.
* When starting the reachablity, the URL is required.

#2028"
snej,2018-01-18 02:15:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d0d57914b2a9b6d7c9e75dfa5761f86107aa85a,8d0d57914b2a9b6d7c9e75dfa5761f86107aa85a,"Improve tests of replication to SG (#2029)

* These tests can be enabled via an environment variable without having
  to edit the source
* SG hostname and port can be customized
* eraseRemoteEndpoint now detects HTTP errors
* Added ATS exceptions to Info.plist so iOS can make non-SSL connections"
snej,2018-01-18 01:50:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c28ed84922d052c9e4f8a01ed923878d987e0c27,c28ed84922d052c9e4f8a01ed923878d987e0c27,Updated LiteCore to fix assertion failure in MockWebSocket
snej,2018-01-18 01:32:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8ddd5e648e249266dae8b4e32e2ef3570e3b1193,8ddd5e648e249266dae8b4e32e2ef3570e3b1193,"CBLWebSocket was logging to wrong domain (""WebSocket"" not ""WS"")

Also changed the 'canCreate' flag in the c4log_getDomain() calls to
false, so that it will fail fast if a domain name is wrong."
snej,2018-01-18 01:26:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e024b2da77619348e06940ab3d48ebdcde5f50e,6e024b2da77619348e06940ab3d48ebdcde5f50e,Updated perf tests to compile with current API
snej,2018-01-17 23:10:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc81ac88f6e6d5e1efad37076cbec5c8f5565a9f,bc81ac88f6e6d5e1efad37076cbec5c8f5565a9f,"Updated LiteCore to fix remaining compression buffer overflows

couchbase/couchbase-lite-core#354"
snej,2018-01-17 22:42:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d32a706c08c0839ed54401eb9dd02cf73afefa3,8d32a706c08c0839ed54401eb9dd02cf73afefa3,"Ignore bogus(?) ENOTCONN error when WebSocket closes

Fixes #2026"
snej,2018-01-17 21:13:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/89b749c58b62368dfbf4b4836413bc082f1cff5d,89b749c58b62368dfbf4b4836413bc082f1cff5d,"CBLBLob should use property `content_type` not `content-type`

Fixes #2025"
pasin,2018-01-17 18:27:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/453683a4866141e49ca496d1232a7b2e845e95bd,453683a4866141e49ca496d1232a7b2e845e95bd,"Update fmdb to pick up the fix to increase db busy wait time

* From #1979 issue that the database could be busy for some more time when it is in the recovery process. The current total wait time of 55ms doesn’t seem to be enough.

* The fix from the fmdb increases wait time before retry with the exponential backoff between attempts, and the total wait time of 10 retries increases to 4092ms."
pasin,2018-01-17 05:01:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6dcdb2625ef9cdb7463905e837b35e8c652e69a8,6dcdb2625ef9cdb7463905e837b35e8c652e69a8,"Fix mine type in ReplicationTest.testPushBlobToSyncGateway

The mine type should be image/jpeg instead of image/jpg."
pasin,2018-01-17 04:56:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1da53abe93359b08e73581c2f3350927253dbdc2,1da53abe93359b08e73581c2f3350927253dbdc2,"Make CBLDictionary and CBLArray conform to NSCopying

#2015"
pasin,2018-01-17 04:35:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f6edbc48e6acef74048dccf9b224dc48608e073,4f6edbc48e6acef74048dccf9b224dc48608e073,"Make the xcodebuild quiet in build_framework.sh by default

* Run xcodebuild with `-quiet` option by default to reduce the log size on the Jenkins server.
* Added —verbose option to turn off the -quiet mode"
pasin,2018-01-16 23:49:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c18884ab4748a3961e4f46022f009cd4bda68ff2,c18884ab4748a3961e4f46022f009cd4bda68ff2,"Fix Swift ReplicatorConfiguration not populating continuous value

Fixed ReplicatorConfiguration to populate the continuous value to the ObjC CBLReplicatorConfiguration."
pasin,2018-01-16 23:37:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ff961dd98581fb7da779b600b75f0bf1cad75e7,9ff961dd98581fb7da779b600b75f0bf1cad75e7,Update LiteCore
pasin,2018-01-16 23:31:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d1ea0dcbec3a13ce8f8c1b59082356727bc757a,2d1ea0dcbec3a13ce8f8c1b59082356727bc757a,"Change QueryChange.rows to QueryChange.results

Changed QueryChange.rows to QueryChange.results per API changes."
snej,2018-01-16 22:22:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fbbae0144baeb966181b4cac7e500e540feb141c,fbbae0144baeb966181b4cac7e500e540feb141c,"Updated LiteCore to pick up replication fixes

* Dangling WebSocket pointer crash (couchbase/couchbase-lite-core#353)
* Attachment compression crash (couchbase/couchbase-lite-core#354)"
pasin,2018-01-16 18:41:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42d9ab9fdcbaeb17324188db44fbade79d4a120d,42d9ab9fdcbaeb17324188db44fbade79d4a120d,"Fix isOldAttachment logic

The logic shouldn’t check the content-type as it’s an optional.

#2022"
pasin,2018-01-16 06:54:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/14d221bbd875ce39883a4187eb2078aaab816fa8,14d221bbd875ce39883a4187eb2078aaab816fa8,"Overhaul ReplicatorTest.m

* Added kCBLEnableSyncGatewayTest for enabling the tests with SGW.
* Added -eraseRemoteDB:.
* Added failTestPushBlobToSyncGateway."
pasin,2018-01-16 06:52:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/053acf7aca480e903efe6fac9e6e49256b540dad,053acf7aca480e903efe6fac9e6e49256b540dad,"Overhaul supporting test files

* Moved all supporting files into Support folder.

* Updated CBLTestCase.m’s -dataFromResource: to construct resource path from the `Support` folder instead of from root."
pasin,2018-01-16 01:11:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6cc6e947faf2f699e36790f72ba2a0e45a2c155d,6cc6e947faf2f699e36790f72ba2a0e45a2c155d,"Implement old attachment conversion

#1924"
snej,2018-01-15 23:43:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/923c733a9be74105678e2830c87821ec2c1ca383,923c733a9be74105678e2830c87821ec2c1ca383,"Merge commit '5ea9c2d4b0322cce9b5d37e5f2647ce756359139' into feature/2.0

# Conflicts:
#	vendor/couchbase-lite-core"
pasin,2018-01-15 21:34:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/092ff9e6a9a63f04d6f82ba4eb1cf0fb01e0441d,092ff9e6a9a63f04d6f82ba4eb1cf0fb01e0441d,"Fix Swift DocumentTest.testPurgeDocument failure

Database.purgeDocument(doc) now throws exception when purging a newly created document."
pasin,2018-01-15 21:14:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0e43f3535838753ecf6073d278d7e94dc88651a,d0e43f3535838753ecf6073d278d7e94dc88651a,"Fix DocumentTest.testPurgeDocument failure

Database.purgeDocument(doc) now throws exception when purging a newly created document."
pasin,2018-01-15 19:39:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bfd9c7a25643b409424642a9fbb0ff6c0fb484c9,bfd9c7a25643b409424642a9fbb0ff6c0fb484c9,"Check index bound when getting the query result value by index

Checked index bound when getting the query result value by index and throwed NSRangeException accordingly."
pasin,2018-01-15 19:38:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8664eeaf01e0537186b3100848c38c215b5da70,a8664eeaf01e0537186b3100848c38c215b5da70,"Throw invalid argument exception instead of returning error

When validating the arugment, throw invalid argument exception instead of returning an not-allow error if the arugment is not valid."
pasin,2018-01-14 09:18:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff1bdc926c96ce6ed3b2badad6d35b6469dd8b1d,ff1bdc926c96ce6ed3b2badad6d35b6469dd8b1d,"Remove litecp build from generate_release_zip.sh

Removed the colitecp tool build from the generate_release_zip.sh as the tool doesn’t exist anymore."
pasin,2018-01-14 09:10:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d83d6ac7026a64a7071f1b1fa21e40469b033139,d83d6ac7026a64a7071f1b1fa21e40469b033139,"Fix ResultSet.toDictionary() contains keys for the missing values

* Use C4QueryEnumerator.missingColumns to determine if the value is missing or null.

* Deserialized columns values to ensure that the Result object can be use later.

#1982"
pasin,2018-01-14 05:40:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9bf6afd1b4e39ed7d8097d89c90dcbd369dcbbd9,9bf6afd1b4e39ed7d8097d89c90dcbd369dcbbd9,"Fix default ConflictResolver

Need to return theirs revision if my generation is less than their generation."
pasin,2018-01-13 20:16:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57b5963293125ce717c69d3341832effac5ba963,57b5963293125ce717c69d3341832effac5ba963,"Make Expression API Type Safe (#2021)

* Made Expression API Type Safe for both Objective-C and Swift.
* Fixed ArrayExpression and make VariableExpression public.

#2020"
pasin,2018-01-13 04:11:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5fe2c6537c5ac7eddb31fd65d318d54e67a7a658,5fe2c6537c5ac7eddb31fd65d318d54e67a7a658,"Fix QueryTest failures

* Rerun the query again when checking the result from allObjects.
* Fixed bugs in TestGetAllResults()."
pasin,2018-01-13 00:53:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0647ab6f976acc18dcc900339116c411b871a0a8,0647ab6f976acc18dcc900339116c411b871a0a8,"Implement ResultSet.allResults()

Implemented Result.allResults() -> Array<Result> method that will return the current unenumerated Result objects. After calling this method, all of the Result objects will be enumerated. Subsequence calls to next() method will return null. Subsequence calls to allResults() will return an empty array.

#2019"
pasin,2018-01-12 23:35:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0338f3fc18c73bf232fe16139c2dd6c47ba7cc5,d0338f3fc18c73bf232fe16139c2dd6c47ba7cc5,"Fix test failure in Swift MacOS unit tests

Removed NSCAssert(bundleID, @""No bundle ID"") assertion in CBLDatabaseConfugurationBuilder’s +defaultDirectory. This is probably fine because we don’t have this check in CBL 1.x."
pasin,2018-01-12 22:30:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5dc14cd6718f1381ae33f0c37ff557035ac4a81d,5dc14cd6718f1381ae33f0c37ff557035ac4a81d,"Fix DatabaseTests assigning to readonly property issue

Fix the tests that try to assign the directory to the DatabaseConfiguration.directory which is a readonly property now."
pasin,2018-01-12 21:44:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/788682d92abec3fe18989587162609160f5ce4f7,788682d92abec3fe18989587162609160f5ce4f7,"Revert CBLArray and CBLDictionary to not conform to NSCopying

It doesn’t seem to be useful to make them conform to NSCopying as they are immutable. Also the implementation now is just returning self. I revert this back.

#2015"
pasin,2018-01-12 21:38:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/353e1d6a92e0b5407fa4ba01e8253da09323b663,353e1d6a92e0b5407fa4ba01e8253da09323b663,"Make document classes conform to NSCopying / NSMutableCopying

* CBLDocument <NSMutableCopying>
* CBLDictionary <NSCopying, NSMutableCopying>
* CBLArray <NSCopying, NSMutableCopying>

#2015"
pasin,2018-01-12 05:09:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/242b3ec3aa4ec7db4a6e0fc9ec4a13996f913225,242b3ec3aa4ec7db4a6e0fc9ec4a13996f913225,"Fix CBLMutableDictionary’s -copyWithZone:

Per NSCopying protocol, -copyWithZone: should return the immutable copy.

#2014"
pasin,2018-01-12 05:03:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5db11a6ffc3e202211603821d284be3b674558d0,5db11a6ffc3e202211603821d284be3b674558d0,"Fixed build failure

* Fixed Swift/Endpoint.swift invalid data type.
* Updated LiteCore submodule."
pasin,2018-01-11 22:22:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f37128c7cd3605e7f6eadaebfaf5199eec5bcce7,f37128c7cd3605e7f6eadaebfaf5199eec5bcce7,"Update per API review and updates (#2016)

https://github.com/couchbase/couchbase-lite-ios/issues/2008"
snej,2018-01-11 02:02:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5429de770c75db4295eae55af92c6dc7f6a83f48,5429de770c75db4295eae55af92c6dc7f6a83f48,"Updated LiteCore, for replication protocol change

Also updated CBLPredicateQuery, since specifying a negative LIMIT no
longer works.

Fixes #2013"
snej,2018-01-11 02:01:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/674058e2f17a999d0ccf91dce59c8b3ce16d30c2,674058e2f17a999d0ccf91dce59c8b3ce16d30c2,Enabled address sanitizer and MallocScribble in tests
snej,2018-01-10 20:09:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/529ead9e7d65a38762880c9b83a0fb0ada74c4fc,529ead9e7d65a38762880c9b83a0fb0ada74c4fc,"Merge pull request #2007 from couchbase/couchbase-lite-ios/fix/2005

Fix for #2005. Make CBLDB Query/replicator access thread safe"
rajagp,2018-01-05 21:17:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a80318f21ea31c3f2c646546d74a5a416df69fa,1a80318f21ea31c3f2c646546d74a5a416df69fa,Fix for #2005. Make CBLDB Query/replicator access thread safe
snej,2018-01-04 17:48:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e1ed20edc6c39ee05117f6b41517357d8f68356,1e1ed20edc6c39ee05117f6b41517357d8f68356,"Merge pull request #1990 from couchbase/couchbase-lite-ios/fix/1958

Fix for 1958 : When database is closed, the replicator and live query…"
pasin,2018-01-03 23:57:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/24fe2fda0796d773803effa6abaacd5784b2d57b,24fe2fda0796d773803effa6abaacd5784b2d57b,"Database and DatabaseChange clean up

* Database.name property doesn’t need to be atomic as the value is never changed.
* Made CBLDatabaseChange.isExternal internal.
* Removed unnecessary locks."
rajagp,2018-01-03 19:13:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8a1aacbc840114317e15d9238e9baf15251befe,a8a1aacbc840114317e15d9238e9baf15251befe,Unit Tests for #1958 fix
rajagp,2018-01-03 14:32:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aad3ad81c0e56a043c7b1db57ff1a471ed8680d4,aad3ad81c0e56a043c7b1db57ff1a471ed8680d4,Merge branch 'feature/2.0' into fix/1958
rajagp,2018-01-03 14:22:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35719a4bc185980667a0798f352f5aa9444247cb,35719a4bc185980667a0798f352f5aa9444247cb,Incorporated review feedback. Made copy of activeReplications and liveQueries when iterating over the set to stop them
pasin,2018-01-03 00:11:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb2a191698939b22f111d73ac0271ccf8856b5c8,bb2a191698939b22f111d73ac0271ccf8856b5c8,"Make CBLQueryResultSet.database strong reference

https://github.com/couchbase/couchbase-lite-ios/issues/1983"
pasin,2017-12-29 20:54:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/609707ab6c362fc88d66bbd12fb2d55253f2556a,609707ab6c362fc88d66bbd12fb2d55253f2556a,"Fix QueryResult.toDictionary() returns CBLDictionary

#2000"
pasin,2017-12-27 01:13:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/574b02694259c0fa7f5a1e3b290e70974f3484b8,574b02694259c0fa7f5a1e3b290e70974f3484b8,"Fix missing public accessor for Swift Documet/Array setNumber(n)

#1998"
pasin,2017-12-21 23:44:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2e20e65b2018d60e551d2ca80b687292665ab74,c2e20e65b2018d60e551d2ca80b687292665ab74,"Fix missing public accessor on MutableDictionaryObject swift API

MutableDictionaryObject’s type setters don’t have public accessor."
pasin,2017-12-20 17:34:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23ebb1ebf780a11e4baf40a4350cdbbdc222abba,23ebb1ebf780a11e4baf40a4350cdbbdc222abba,Update version to DB21
snej,2017-12-20 16:53:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fe64f08a2a2839e0cf6aa921b2cd9ff9e10e6c7f,fe64f08a2a2839e0cf6aa921b2cd9ff9e10e6c7f,"Merge #1966: Make database operations thread safe

Fixed #1948 Make database operations thread safe"
snej,2017-12-05 23:02:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5ea9c2d4b0322cce9b5d37e5f2647ce756359139,5ea9c2d4b0322cce9b5d37e5f2647ce756359139,"Replicator: Set the Sec-WS-Protocols request header

The protocol name is now conveyed in the replicator option key
kC4SocketOptionWSProtocols."
rajagp,2017-12-19 18:19:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4ab2589320cb110ccecd2c387f5993a127070070,4ab2589320cb110ccecd2c387f5993a127070070,"Fix for 1958 : When database is closed, the replicator and live query should be stopped"
pasin,2017-12-16 00:45:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/116ad68162cd6dbe204e51effb0ecbba8c8a045e,116ad68162cd6dbe204e51effb0ecbba8c8a045e,"Fix and improve code per code review

* Fixed resolve conflicting documents for replicator by restarting the process again if saving the resolved document has conflicting error.

* Various fix and improve code in CBLQuery, CBLQueryResultSet amd CBLQueryResult."
pasin,2017-12-15 23:23:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0befbff0e873bf7ecee2dad77c4aa76d9b74d3af,0befbff0e873bf7ecee2dad77c4aa76d9b74d3af,"Fix QueryTest.testGenerateJSONCollation failure

Applied the default locale for the unicode aware collation, which is the current device locale."
pasin,2017-12-15 22:37:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a376a5ef065b51051f7be147f34b3ad05e046d65,a376a5ef065b51051f7be147f34b3ad05e046d65,"Update API walkthrough code

Caught up with the latest API."
pasin,2017-12-15 22:18:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f1a86e7867f6f27f03186d527b94be6062ec1e2,5f1a86e7867f6f27f03186d527b94be6062ec1e2,"Use device locale if collation is unicode aware and .locale is null

#1880"
pasin,2017-12-15 20:33:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c4f2edf668c94ac9ecaf8ce090c61d648bcc056b,c4f2edf668c94ac9ecaf8ce090c61d648bcc056b,"Fix CBLQueryResult.toDictionary to not converting to result to array

There is no need to convert the result into array first. However this will be a question if we want to keep the key or not. In N1QL, there can decide to keep the key based on null or missing. Currently CBL always keeps the key.

#1982"
pasin,2017-12-15 20:10:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5d8e7f08c93400a19a7a178eb0b49d8812f9731,b5d8e7f08c93400a19a7a178eb0b49d8812f9731,"Fix Performance Test codes per API changes

* Fixed the code according to API changes.
* Used regular query instead of predicate query."
pasin,2017-12-14 00:04:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cfbbc52d7f51eac34344b04c3838a6c6ab2edef8,cfbbc52d7f51eac34344b04c3838a6c6ab2edef8,"Fix making thread safe when resolving conflicts

* Call to resolver to resolve the conflict needs to be done outside the database lock.
* Solving conflict when saving a document will be done inside a loop as the resolved document may cause a new conflict.
* Solving conflict by the replicator is done inside a transaction opened by the replicator’s database instance so that could guarantee that there will not be a new conflict after saving the resolved document.
* Fixed conflict resolving for deleted document. The document needs to be marked as deleted."
pasin,2017-12-13 22:00:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9103610f087af1dada6817e470d5d6f4b15ebf73,9103610f087af1dada6817e470d5d6f4b15ebf73,Fix making database thread safe per code review
pasin,2017-12-13 06:27:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/600d849e761b81b86b01038c7d543fa063697546,600d849e761b81b86b01038c7d543fa063697546,"Update API for setting platform dictionary and array content

MutableDocument
* Changed init(dictionary: Dictionary) to init(data: Dictionary?).
* Changed init(id: String?, dictionary: Dictionary) to  init(id: String?, data: Dictionary?).

MutableDictionaryObject
* Change init(dictionary: Dictionary?) to init(data: Dictionary?)
* Change setDictionary(dictionary: Dictionary?) to setData(data: Dictionary?)

MutableArrayObject
* Change init(array: Array?) to init(data: Array?)
* Change setArray(array: Array?) to setData(data: Array?)"
pasin,2017-12-12 23:48:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6241bb629d19548aca090a1587716504fddc7b7c,6241bb629d19548aca090a1587716504fddc7b7c,"Implement document equality

* Implemented equality in Document, Dictionary, Array, and Blob.

* Added DocumentTest.testEquality, testEqualityDifferentDocID, testEqualityDifferentDB.

#1963"
snej,2017-12-05 20:19:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7c193a949deb823a1385635352b00e151a9da49,c7c193a949deb823a1385635352b00e151a9da49,Xcode 9.2 upgrade check
snej,2017-12-05 01:23:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/275736377b28c36cf3b165ed62a4d7de14afc7ff,275736377b28c36cf3b165ed62a4d7de14afc7ff,"Updated LiteCore: Replicator now honors remote db path not at the root

Picked up the fix for couchbase/couchbase-lite-core#314"
snej,2017-11-13 19:12:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa9573bb0ad2ce9bab8a5cc7072c859c053f2b52,fa9573bb0ad2ce9bab8a5cc7072c859c053f2b52,"Xcode: Added 'All' target, removed obsolete 'Documentation' target"
pasin,2017-11-23 01:02:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/153836cdededd0ae8988ae73085ca3f8efed6270,153836cdededd0ae8988ae73085ca3f8efed6270,"Make database operations thread safe

* Created CBL_LOCK(m) macro for locking.
* Applied the lock to non-thread safe database operations by following the guideline from https://github.com/couchbase/couchbase-lite-core/wiki/Thread-Safety.

#1948"
pasin,2017-11-22 19:16:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c91f2776ad64573ef2c3535838aec7de00163b47,c91f2776ad64573ef2c3535838aec7de00163b47,"Remove CBLDatabase -allDocuments impl

Removed CBLDatabase.allDocuments implementation."
pasin,2017-11-22 07:30:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2103bb38e0fc2088815d706d13a7ebe29e02df91,2103bb38e0fc2088815d706d13a7ebe29e02df91,"Changed Object type getter/setter from to Value type getter/setter

* Changed CBLDictionary’s -object:forKey: to -value:forKey: (Override KVO).
* Changed CBLMutableDictionary’s -setObject:forKey: to -setValue:forKey: (Override KVO).
* Changed CBLArray’s -objectAtIndex: to -valueAtIndex:.
* Changed CBLMutableArray’s -setObject:atIndex: to -setValue:atIndex:.
* Changed CBLMutableArray’s -addObject: to -addValue:
* Changed CBLMutableArray’s -insertObject:atIndex: to -insertValue:atIndex:"
pasin,2017-11-22 03:37:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36e4b982f2cb3b004b70851156c385cbb7e0780a,36e4b982f2cb3b004b70851156c385cbb7e0780a,"Update to the latest API Spec.

Database
* getDocument(id) will return null if document is deleted or doesn’t exists.
* contains(id) will return false if document is deleted or doesn’t exist
* No Predicate Query
* No allDocuments()

Document
* Change edit() to toMutable().
* MutableDocument.toMutable() should also copy the MutableDocument.

Dictionary and Array
* Add Dictionary.toMutable() and Array.toMutable().
* Rename Dictionary.setObject(key, value) to Dictionary.setValue(key, value) for all platforms. Currently Objective-C has both setObject() and setValue() as we need to review if it’s appropriate to override setValue() as it is a part of KVO.
* Rename Array.set/add/insertObject(index) to Array.set/add/insertValue(index) for all platforms.
* Dictionary.setValue(key, null) will set null value in all platforms.
* Dictionary.getBoolean(key) and Array.getBoolean(index) will have the following behavior for all platform (I understand that LiteCore implements this behavior):
	if (value == null || value == NSNull)
		return false
	else if (value is number)
		return number != 0
	else
		return true

MutableFragment
* Add type setters

Query
* Change run() to execute()
* Meta
    * Removed Expression.meta(). Use Meta.id and Meta.sequence directly to inline with Function.
    * Removed Expression.notLessThan, notLessThanOrEqualTo, not GreaterThan, notGreaterThanOrEqualTo, notLike, notRegex, notMatch, notBetween, notIn
    * Make sure to not Remove IS and ISNOT
* ArrayExpression
    * Move Array related expressions (Any, Every, AnyAndEvery) into its own class: ArrayExpression + ArrayExpressionIn + ArrayExpressionSatisfies.
* Array Functions
    * Moved array related functions from Function to ArrayFunction.
    * See: https://github.com/couchbaselabs/couchbase-lite-apiv2/commit/7e1174ad14c76a73b6d7131f0a28e41d2dffb349
* PropertyExpression
    * Extract into its own file instead of having it nested in Expression class.
* Function
    * Not extends Expression. Each function method returns Expression.
* FullText:
    * Have FullTextExpression and FullTextFunction.
    * FullTextExpression has a static index(indexName) method for creating FullTextExpression object with the given index name.
    * Moved Expression.match(object) to FullTextExpression.match(text). Support only match string now.
    * Moved Function.rank(object) to FullTextFunction.rank(indexName)
    * See: https://github.com/couchbaselabs/couchbase-lite-apiv2/commit/7e1174ad14c76a73b6d7131f0a28e41d2dffb349
* SelectResult
    * Add SelectResult.property(property)
* Query now supports add/remove change listener. When a new listener is added, the listener will get first notified with the current query result.
* Query.setParameters() and getParameters() now have copy behavior. When setting a new Parameters, if there is a change listener added, re-run the query and notify.
* Change Parameters.setObject(name, value) to setValue(name, value).

Index
* Change Index.ValueIndexOn() and Index.FTSIndexOn() to  Index.valueIndex(items) and Index.fullTextIndex(items).
* Index.fullTextIndex(items) allows to set multiple items. Rename FTSIndex to FullTextIndex and FTSIndexItem to FullTextIndexItem.
* Add FullTextIndexItem.property(name) and remove FullTextIndexItem.expression().
* Add ValueIndexItem.property(name).

LiveQuery
* No LiveQuery. Query itself can add/remove change listeners.

ChangeListener
* addChangeListener(listener) returns ListenerToken. ListenerToken is an opaque interface with no methods.
* removeChangeListener(token) takes listener token.
* Rename Database.addChangeListener(documentID, listener) to Database.addDocumentChangeListener(id, listener).
* Add {Database, Query, Replicator}.add{Document}ChangeListener(id}, queue, listener) in all platforms.
    * Java: Executor
    * .NET: TaskFactory
    * iOS: DispatchQueue
* DatabaseChange doesn’t have .external property. We could add this later based on demand in 2.x.

ReplicatorConfiguration
* Flatten Filter
    * Move Filter.channels and Filter.documentIDs to the top level of ReplicatorConfiguration
    * https://github.com/couchbaselabs/couchbase-lite-apiv2/commit/6b2795ee8d41675efd2f68b75ac23941b7f83dd2

SessionAuthenticator
* Make expires type safe
    * Have two constructors instead of one, one for expires Date and one for expires string.
    * https://github.com/couchbaselabs/couchbase-lite-apiv2/commit/f45d3180121334ed4e97c535892b4241441258fd

Default Conflict Resolver Algorithm
* Delete always wins.
* Longest generation wins or Max RevID wins if the generations are the same.

Document Equality (Pending, not included in this commit)
* Two documents are equals when they are from the same database, they have the same ID, and they have the same content.

#1960"
pasin,2017-11-17 18:58:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ac1bc883b20fda9a0c4e72949543acd0f24f5805,ac1bc883b20fda9a0c4e72949543acd0f24f5805,"Update version to 2.0DB020

Updated version to 2.0DB020 and code walkthrough."
pasin,2017-11-16 22:23:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1de7dfd1fa90de54eadb95df64b75692e9d5e983,1de7dfd1fa90de54eadb95df64b75692e9d5e983,Update LiteCore
snej,2017-11-10 23:29:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8760083a2a1c1476bf6587ec923b379f77a69ce,b8760083a2a1c1476bf6587ec923b379f77a69ce,"Updated LiteCore

* array_agg() query function
* FTS supports stop-words
* Replicator bug fixes
* etc."
snej,2017-11-10 23:26:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/46ef8318a82913ab8275f23ffb5c20a275c5b446,46ef8318a82913ab8275f23ffb5c20a275c5b446,"Fixed some Xcode 9.1 compile errors in unit tests

It's objecting to assigning a pointer to a BOOL variable.
(I guess this is a new check, since the build-bot hasn't complained?)"
pasin,2017-11-07 16:48:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e700315cbaad7f74c5ad69b68ae0c0cada77c1c2,e700315cbaad7f74c5ad69b68ae0c0cada77c1c2,"Merge pull request #1953 from couchbase/feature/2.0-immutable-doc-refactor

Refactor to Immutable Document API"
pasin,2017-11-07 16:42:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5191939b1aa22c26ee87e145e5895362498d2844,5191939b1aa22c26ee87e145e5895362498d2844,"Rename CBLDocument -edit method to -toMutable

* Renamed CBLDocument -edit method to -toMutable.
* Commented about CBLMutableDocument’s -mutableCopyWithZone: issue that needs to be fixed."
pasin,2017-11-03 01:17:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2ccf2e4b4cbc11637554a363b0ab149421d2ba0,e2ccf2e4b4cbc11637554a363b0ab149421d2ba0,"Update Swift with Immutable Document API

* Applied Immutable Document API to Swift.
* Refactored Swift unit tests."
pasin,2017-11-02 23:16:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7426ecfa54f12e85f42b3d6a94c581277a3101cf,7426ecfa54f12e85f42b3d6a94c581277a3101cf,Refactor ObjC unit tests to use Immutable Document API
pasin,2017-11-02 22:38:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d3bd058a7daf52c422148c8518e665633432a9c,8d3bd058a7daf52c422148c8518e665633432a9c,"Refactor CBLDatabase’s saveDocument and implement CBLDocument’s edit

* Refactored CBLDatabase’s -saveDocument:error: by moving the logic from CBLMutableDocument to CBLDatabase. The saveDocument:error: method also returns a new saved CBLDocument.
* Implemented CBLDocument’s edit method to return a mutable version of the CBLDocument object.
* Fixed some renaming errors."
pasin,2017-10-24 21:21:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5b62484bb9c302ce492c1aa3623e0fd063906c75,5b62484bb9c302ce492c1aa3623e0fd063906c75,"Rename ObjC classes for applying Immutable Document API

For mutable document:
CBLDocument to CBLMutableDocument
CBLDictionary to CBLMutableDictionary
CBLArray to CBLMutableArray
CBLFragment to CBLMutableFragment
CBLDictionaryFragment to CBLMutableDictionaryFragment
CBLArrayFragment to CBLMutableArrayFragment

For immutable document:
CBLReadOnlyDocument to CBLDocument
CBLReadOnlyDictionary to CBLDictionary
CBLReadOnlyArray to CBLArray
CBLReadOnlyFragment to CBLFragment
CBLReadOnlyDictionaryFragment to CBLDictionaryFragment
CBLReadOnlyArrayFragment to CBLArrayFragment"
pasin,2017-11-04 03:03:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0bb4020f20eaad761e32920f4b5fd40a812572ac,0bb4020f20eaad761e32920f4b5fd40a812572ac,Update version to DB019
pasin,2017-11-03 18:55:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9da02f7015a4bec767b023175bbec8e7e687bc2e,9da02f7015a4bec767b023175bbec8e7e687bc2e,"Fix get_repo_version script fails when project is not in git repo

#1947"
pasin,2017-11-03 18:34:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea42f9b284a6c4218d40e77683aadc543d300495,ea42f9b284a6c4218d40e77683aadc543d300495,Update LiteCore
pasin,2017-11-03 17:58:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a777a889f5442408188f5e3b5d0e9fd0b09f3e1,0a777a889f5442408188f5e3b5d0e9fd0b09f3e1,"Fix session cookie overwritten by the cookie in shared storage (#1943)

Set request.HTTPShouldHandleCookies to NO so that the CBLHTTPLogic will not add the cookies from the shared cookie storage. Also we don’t actually use the shared cookie storage.

#1927"
snej,2017-10-24 19:58:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eda6e4de3a5b1b4b1f135586d0a24f9f2f54cb63,eda6e4de3a5b1b4b1f135586d0a24f9f2f54cb63,"Oops, I broke the tools with the last LiteCore changes. Fixed."
snej,2017-10-23 21:53:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/99cb2c4c1b838f482b7057cdd9ef327eee5edd75,99cb2c4c1b838f482b7057cdd9ef327eee5edd75,"Updated to LiteCore API changes/simplifications

* Stop using kC4DB_Bundled flag; databases are now always bundled
* No more config parameter to c4db_deleteAtPath()"
snej,2017-10-21 04:29:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10d52b1653a35717f04cb7cd6caaf7da14468db1,10d52b1653a35717f04cb7cd6caaf7da14468db1,"Fixed two more @*#%! 32-bit errors

Apparently these only show up if you build for ""Generic iOS Device"",
not a real device. Which is why I didn't encounter them."
snej,2017-10-21 04:04:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f81112fe0e58492ca3b6c69efc74f2ac29421cc2,f81112fe0e58492ca3b6c69efc74f2ac29421cc2,Fixed 32-bit build error
snej,2017-10-20 23:14:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b720e8c4f51304b0eed1d61f72f5f9d2e0f4ab7,4b720e8c4f51304b0eed1d61f72f5f9d2e0f4ab7,"Oops, fixed Swift build by updating ReadOnlyDocument"
snej,2017-10-20 19:34:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2db048caa4d2911106f56444f080f4a6ab6d7dbe,2db048caa4d2911106f56444f080f4a6ab6d7dbe,Some more mutable-fleece optimization/cleanup
snej,2017-10-20 19:33:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f8b034d5dcbc49dfd55d64de06bfd29f0d67f38,7f8b034d5dcbc49dfd55d64de06bfd29f0d67f38,"Use fileSystemRepresentation to convert path strings to C4Slice

Regular UTF-8 encoding isn't exactly the same as the filesystem's
encoding, in some edge cases with non-Roman scripts."
snej,2017-10-20 19:31:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ef2c1e57236b8a21c6b3b8744879ea882ce5b67,9ef2c1e57236b8a21c6b3b8744879ea882ce5b67,"Overhauled CBLStringBytes

Simplified the code for the heap-allocation case.
Reduced stack buffer size to 64, after some profiling.
Use CBLStringBytes consistently instead of nsstring_slice.
Removed some unnecessary #imports of its header."
snej,2017-10-20 00:55:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f96adf0d8cbcc57745f07b2590fbf817f87c932,5f96adf0d8cbcc57745f07b2590fbf817f87c932,Moved CBLFleece functions into the 'cbl' C++ namespace.
snej,2017-10-19 23:28:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/65656c140dc484990b197fb89126cb6eec7c13de,65656c140dc484990b197fb89126cb6eec7c13de,Removed CBLSharedKeys; moved its functionality into DocContext.
snej,2017-10-20 21:33:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/610b7f05f232dd2947a8059d263bbf693f6f6f8f,610b7f05f232dd2947a8059d263bbf693f6f6f8f,"Child of CBLReadOnly{Array/Dict} should also be read-only

Check the parent collection's mutableChildren property to decide which
class to instantiate."
pasin,2017-10-20 20:56:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/24aef8a9547e7c19331fd0d589ef573a19d523b6,24aef8a9547e7c19331fd0d589ef573a19d523b6,"Fix CBLDictionary’s -copyWithZone: returns readonly object

Changed from creating a CBLReadOnlyDictionary to CBLDictionary."
pasin,2017-10-20 20:52:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a1e8c4ac121fedbc4d6ca7181061b2b8c022d68,0a1e8c4ac121fedbc4d6ca7181061b2b8c022d68,"Merge pull request #1935 from couchbase/fix/1934-dict-enumeration-crash

Fixed crash in for/in loop with CBLDictionary (regression)"
snej,2017-10-20 20:34:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1600f16b9653c6dfd61274e2946fc45c6b45ae6a,1600f16b9653c6dfd61274e2946fc45c6b45ae6a,"Fixed crash in for/in loop with CBLDictionary (regression)

The NSArray backing the enumeration state was getting dealloced during
the enumeration.
Fixes #1934"
pasin,2017-10-20 16:45:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a29b18f209eba6e13cd5bc6060095bb75e53ad4,1a29b18f209eba6e13cd5bc6060095bb75e53ad4,"Merge pull request #1930 from couchbase/feature/2.0-refactor-document

Reimplemented CBL arrays/dict classes using mutable Fleece"
snej,2017-10-16 20:07:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de424bb18a1a2d49d32ae3aaacafe438e8361722,de424bb18a1a2d49d32ae3aaacafe438e8361722,Factored out type-conversions into new asXXX() functions in CBLData.h
snej,2017-10-13 23:13:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1c132acbc7ccb2f8e05454113039e4f11cf21a7,c1c132acbc7ccb2f8e05454113039e4f11cf21a7,"More Document-related cleanup

* Removed CBLDocument.isEmpty; it's unnecessary now because the .count
  property is no longer expensive to compute.
* Using new LiteCore c4db_getSharedFleeceEncoder() function, to save on
  heap allocations when encoding a document.
* Suppress some Clang static analyzer warnings in TunesPerfTest.mm
* Updated LiteCore/Fleece"
snej,2017-10-13 23:10:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43f70980ee5eac00ef9387cbd2aa99a277b21eb9,43f70980ee5eac00ef9387cbd2aa99a277b21eb9,"Optimized setting properties of new documents

Created CBLNewDictionary for use as the root of a new/empty document.
It's a simple wrapper of an NSMutableDictionary, which make it very
fast to add properties to. This significantly speeds up the Insert-
Documents performance test."
snej,2017-10-12 23:48:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d191d05c5dc9bbbf6bf7a877e7cf8ec45f50825,5d191d05c5dc9bbbf6bf7a877e7cf8ec45f50825,Reimplemented CBL arrays/dict classes using mutable Fleece
snej,2017-10-10 20:56:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d02bf93acbd3bd7c51501c08cac0ce25f55e35f,6d02bf93acbd3bd7c51501c08cac0ce25f55e35f,"Refactored CBLReadOnlyDocument to have a (not be a) dictionary

Having CBLReadOnlyDocument subclass CBLReadOnlyDictionary is problematic,
because its subclass CBLDocument needs to implement CBLDictionary but
can't make use of the base class anymore; instead it has to delegate to
a separate CBLDictionary object.

I've changed CBLReadOnlyDocument to delegate to a CBLReadOnlyDictionary
and just inherit from NSObject. This makes it easy for CBLDocument to
instantiate a CBLDictionary instead.

The downside is that CBLReadOnlyDocument has to implement all of the
CBLReadOnlyDictionary methods to delegate them; but this is canceled out
since CBLDictionary no longer has to override all those methods."
snej,2017-10-18 06:35:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cbda7142efc33d5062952cc8fa2ce70b356a093f,cbda7142efc33d5062952cc8fa2ce70b356a093f,"Fixed a compile error that only occurs in Release builds for iOS

I don't understand why this isn't an error in other builds (for Mac,
or Debug config) since the compiler error/warning settings aren't any
different..."
snej,2017-10-17 22:46:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1260957d92d09a62578df7e112c905df1bdc22d,c1260957d92d09a62578df7e112c905df1bdc22d,Oops: Updated Swift QueryRow class for CBLQueryRow changes
snej,2017-10-17 21:53:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a66195c59f7d6e638cdf295a3cbccd8e364a2c86,a66195c59f7d6e638cdf295a3cbccd8e364a2c86,"Reimplemented fragments to be more lightweight (#1932)

* Parent returns nil if it knows the fragment doesn't exist
* Fragments are always initialized with parent and key/index;
  the value is derived lazily
* Scalar accessors (int, etc.) don't create any NSObjects
* Chained subscripts reuse the same fragment object
* Removed expensive -conformsToProtocol: checks in setter
* All of CBLFragment turns out to be unnecessary except the setter
* Fixed a bug where booleanValue returned NO for non-numeric values"
snej,2017-09-06 23:42:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5eebfd14e536640e3a3240fd595e2a918fffbbf1,5eebfd14e536640e3a3240fd595e2a918fffbbf1,"Adapt to overhauled C4Query

See couchbase/couchbase-lite-core#245"
snej,2017-10-13 22:07:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86c63659b56d87406eac3b1e4db631fe67098139,86c63659b56d87406eac3b1e4db631fe67098139,"Merge pull request #1928 from couchbase/feature/fix-1918

Fixed #1918: Skip the removal rev when getting ancestor rev ids"
pasin,2017-10-12 22:09:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81e177d91a4d85e8e3c6f170e7d11d633f6fab23,81e177d91a4d85e8e3c6f170e7d11d633f6fab23,"Make the generate release zip script to also generate coverage report

* Fixed generage_coverage.sh for XCode9.
* Made generage_release_zip.sh to also execute generage_coverage.sh."
pasin,2017-10-12 00:21:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b51fbb61b37636ddbc88d41684a9beaa1fcbc70,0b51fbb61b37636ddbc88d41684a9beaa1fcbc70,"Fix crash in CBLRemoteSession when

* The issue hapens due to the race between setting the _session to nil in the -URLSession:didBecomeInvalidWithError: delegate method and calling NSURLSession’s finishTasksAndInvalidate when closing the CBLRemoteSession. The issue is a regression of fixing #1429 (race of resetting _allRequests).

* Solution: created a strong session that will exists through the block execution.

* Note: Calling NSURLSessions’s -finishTasksAndInvalidate after the sesion is invalidated is no-ops operation (from manual testing).

#1923"
pasin,2017-10-11 19:15:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e44651965ad4d6eb5d63f3ab182b7b2d3730dc00,e44651965ad4d6eb5d63f3ab182b7b2d3730dc00,"Update api-walkthrough sample code

Updated to use DB018 API."
pasin,2017-10-11 00:28:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1e64050baf2192d807afa182e3fb34e951ce860,d1e64050baf2192d807afa182e3fb34e951ce860,"Update getPossibleAncestorRevIDsWithRemovalRev test

Updated the unit test to test with giving the NULL haveBodies out variable."
pasin,2017-10-10 21:59:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c86216a1f8e921b1e9cc1a1bacf652d11903dd9,2c86216a1f8e921b1e9cc1a1bacf652d11903dd9,"Skip the removal rev when getting ancestor rev ids

This logic is ported from .NET (https://github.com/couchbase/couchbase-lite-net/commit/07c1374d373b4d0ce8a4bedb640294aeec232d71) to fix channel removal potentially disrupts attachments issue (#1918)"
pasin,2017-10-09 21:50:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/099e588ce20c15779641776aca6d4ffcaf5cd402,099e588ce20c15779641776aca6d4ffcaf5cd402,"Fixed memory leak in CBLListener

From #1921, the leak is caused by the circular references between CBLHTTPConnection and CBLHTTPListener. Making the listener property in CBLHTTPServer as a weak reference should fix the issue."
pasin,2017-10-09 14:52:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4373a8c8c4a1ae49be157b8491c1bb1b915625aa,4373a8c8c4a1ae49be157b8491c1bb1b915625aa,Bump version to DB018
pasin,2017-10-06 20:37:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77f005e42cab645d108effe9d06c2dfab5252130,77f005e42cab645d108effe9d06c2dfab5252130,Update MYUtilities
pasin,2017-10-06 00:55:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b701b383b4b8c943da44217fa9ef6accfa3f7c0,3b701b383b4b8c943da44217fa9ef6accfa3f7c0,"Fix unit tests for Mac and AppleTV

* Fixed test22c_SetCookieInHeader to always run with SSL (on Mac, it runs on non SSL previously).

* Added NSAppTransportSecurity to Apple TV Test’s info.plist to be able to run P2P tests and Replicator with SSL tests."
pasin,2017-10-05 22:10:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/51503bc3ec6ea8737a48d93df70b07a1d7690b0d,51503bc3ec6ea8737a48d93df70b07a1d7690b0d,"Update MultipartStars.mine with a new GZIP data for iOS 11

Current test_CBLMultipartWriterGZipped fails as iOS 11 produces a different GZIP result from the previous OS. Note that after updating this, testing with iOS 10 will fail."
pasin,2017-10-05 00:31:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/857027181d764d55058d7efe54011fcc0c375cee,857027181d764d55058d7efe54011fcc0c375cee,"Fix test14_FollowingAttachments unit test failed on iOS 11

Updated the digest value as the GZIP on iOS11 is different from the previous version of the OS."
pasin,2017-10-04 23:17:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7cb9929d8e3d1b84e44821c4ccfbc6c768e804e9,7cb9929d8e3d1b84e44821c4ccfbc6c768e804e9,"Fix test11_PutEncodedAttachment unit test failed on iOS 11

iOS 11 doesn’t produce a different GZIP result from the previous OS so updated the digest value accordingly."
pasin,2017-10-04 23:08:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05b4204a41835aa2dce9270c99ae736be6e28169,05b4204a41835aa2dce9270c99ae736be6e28169,"Fix test16_Reduce unit test failed on iOS 11

Based on https://openradar.appspot.com/34032848, iOS 11 has changed the way they encode/decode numbers to JSON Objects so 8.99 was encoded into 8.9900000000000002 from the string representation. Modified the unit tests to compare with the encoded JSON string instead."
snej,2017-10-04 18:57:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/240473f7c11f6edbbda72c7ff3b26deecf802b25,240473f7c11f6edbbda72c7ff3b26deecf802b25,"Merge pull request #1656 from couchbase/couchbase-lite-ios/feature/fix_change_file_protection

Fixed #1622: changing file protection level should skip non database dirs or files"
pasin,2017-10-04 18:35:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2518f8b77f4369696a86db8c8c0466d34a99f264,2518f8b77f4369696a86db8c8c0466d34a99f264,Update BLIP submodule
jamiltz,2017-04-13 19:31:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/af70596a756067cc2ef8bb4844a0fec1327b7024,af70596a756067cc2ef8bb4844a0fec1327b7024,add CORS flag to LiteServ
snej,2017-10-04 18:43:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ab34beb781127fabec33969b275d8ec1f57f634,0ab34beb781127fabec33969b275d8ec1f57f634,"Merge pull request #1909 from couchbase/couchbase-lite-ios/feature/map_version

Fixed #1758 Updated designed doc’s map function not get re-compiled"
snej,2017-10-04 18:35:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd319bffeb04de13ac0bbb3f423fb148e837aa71,dd319bffeb04de13ac0bbb3f423fb148e837aa71,"Merge pull request #1920 from couchbase/couchbase-lite-ios/feature/fix-1912

Fixed #1912 CBLWarnUntrustedCert for .local on High Sierra"
pasin,2017-10-04 18:20:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eca78a706992d4f79a582a7e154106e9be10ae3e,eca78a706992d4f79a582a7e154106e9be10ae3e,"Fix cookie storage to handle empty path and ‘/‘ as the same path

In iOS 11, creating NSHTTPCookie with no path will result to ‘/‘ path automatically. In general, the cookie storage should treat the empty path and ‘/‘ as the same path by default."
pasin,2017-10-03 00:55:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c81a6c244bdee1d06450959c72afd0cfc4aeefd,2c81a6c244bdee1d06450959c72afd0cfc4aeefd,"Fix CBLWarnUntrustedCert for .local on High Sierra

* On High Sierra, the status codes returned are @[CSSMERR_APPLETP_HOSTNAME_MISMATCH and CSSMERR_TP_NOT_TRUSTED] instead of just @[CSSMERR_APPLETP_HOSTNAME_MISMATCH].

* Changed to logic to check the status codes to check whether the codes contain CSSMERR_APPLETP_HOSTNAME_MISMATCH or not.

#1912"
snej,2017-09-30 00:13:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d373b4e9f69df5db592e1d8c2808afbada52c386,d373b4e9f69df5db592e1d8c2808afbada52c386,"Merge pull request #1919 from couchbase/couchbase-lite-ios/feature/fix-pull-mem

Fixed #1707 high mem usage when pulling a log of docs"
pasin,2017-09-29 23:22:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fbc2cd8aa71ff17ee9b8b1276fa5c48964afd4b,9fbc2cd8aa71ff17ee9b8b1276fa5c48964afd4b,"Fix high mem usage when pulling a log of docs

* There could be a lot of data available in the stream especially when pulling a lot of documents from the local server. When reading the data from the stream, also check if it needs to pause or not.

* The different from previous fixes (16c975e27c70f3d95200e8627736e4ec0e872b59 and f4c13176916e6c279e0ade50ea5168071f90933d) are that the _readyToRead needs to be set to false first in readFromInput and the end stream case needs to be handle.

#1707"
snej,2017-09-29 23:19:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/757775a577b8dbd203f1657640b990108836e973,757775a577b8dbd203f1657640b990108836e973,"Updated LiteCore: ""Continuous pushes now reliably change to idle status""

couchbase/couchbase-lite-core#267"
snej,2017-09-29 19:29:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4f2f9b2def75aef8d3b6958a4dafe17e64be599,f4f2f9b2def75aef8d3b6958a4dafe17e64be599,"Updated LiteCore for ""Allow MATCH operator nested inside multiple ANDs""

This fixes a problem reported by Priya, where LiteCore would reject a
query with a FTS match operation ANDed with two or more other tests."
pasin,2017-09-29 15:40:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5598996cdda80417bffa2922406568895104bb77,5598996cdda80417bffa2922406568895104bb77,"Revert memory fix to CBLSocketChangeTracker

Reverted as it seems to have a side effect to causes incompleted _change feed.

#1707"
pasin,2017-09-29 04:18:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec8ae6e4e32fef6601c6933941e15915dff8413f,ec8ae6e4e32fef6601c6933941e15915dff8413f,"Update Router_Tests.test_deleteDoc

Update the unit test to verify the result of getting the deleted rev.

#1750"
snej,2017-09-29 01:27:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02b9aba1a774b4f577a60050345cb3a2b111c940,02b9aba1a774b4f577a60050345cb3a2b111c940,"Merge pull request #1913 from couchbase/couchbase-lite-ios/feature/fix-1757

Fixed #1757 setting cookie in header could not be effective"
snej,2017-09-29 01:09:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/537e6105d7cbd449164035ca35b7734e14541171,537e6105d7cbd449164035ca35b7734e14541171,"Add the command-line tools to builds (#1917)

* Fixed: Build script breaks if output dir is an absolute path

generate_release_script_zip.sh would fail if the output path (-o flag)
was an absolute path. The problem was this line (and the three others
like it):

OUTPUT_OBJC_ENTERPRISE_ZIP=`pwd`/$OUTPUT_DIR/couchbase-lite-objc_enterprise$VERSION_SUFFIX.zip

This correctly converts a relative path to absolute, which is necessary
later when the zip file is being built; but if $OUTPUT_DIR is already
an absolute path, it creates a bogus path with the CWD prepended.

I fixed this by making the '*_ZIP' paths relative, but with the correct
""../"" prefix to point them to the correct directory.

* Add the command-line tools (litecp etc) to our builds

The generate_release_zip.sh script now builds the LiteCore command-line
tools (cblite, litecp, litecorelog), and copies them and their README
into a new 'Tools' directory in each build archive."
pasin,2017-09-29 01:07:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16c975e27c70f3d95200e8627736e4ec0e872b59,16c975e27c70f3d95200e8627736e4ec0e872b59,"Fixed SockerChangeTracker may not read more input after pause

Reset _readyToRead flag only when there is no more data to read.

#1707"
pasin,2017-09-29 00:44:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4c13176916e6c279e0ade50ea5168071f90933d,f4c13176916e6c279e0ade50ea5168071f90933d,"Fix high memory usage when pulling a log of docs first time

There could be a lot of data available in the stream especially when pulling a lot of documents from the local server. When reading the data from the stream, also check if it needs to pause or not.

#1707"
snej,2017-09-28 23:05:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c505992c80a98b6f1e71e4a0eb446fc4e827b3ec,c505992c80a98b6f1e71e4a0eb446fc4e827b3ec,"Updated LiteCore

A few minor bug fixes, plus updates to the tools (litecp, etc.) and a
script to build the tools."
snej,2017-09-28 16:42:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/851aba3ea8c677b85adc7b4673d0946df406cc54,851aba3ea8c677b85adc7b4673d0946df406cc54,"Merge pull request #1914 from couchbase/couchbase-lite-ios/concepts/issue_1354

Fix issue with deferred download of attachments #1354"
combinatorial,2017-02-21 23:11:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3ae20952b22ac65ffde72cfb7e27890612eedd23,3ae20952b22ac65ffde72cfb7e27890612eedd23,Fix issue with deferred download of attachments #1354
pasin,2017-09-27 20:58:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee4d55475c8a9b4f531ea05dea13ea790f82bd2e,ee4d55475c8a9b4f531ea05dea13ea790f82bd2e,"Fix per code review

* Fixed bug that doesn’t return NOT_FOUND status when compiling the design doc and there is no design doc or map function defined. Also support the case that there is a native design doc like view defined, then the design doc is queries through the REST API.

* Added isDesignDoc flag to bypass design doc compilation process (check existing and version) if the view is not a design doc view.

#1758"
snej,2017-09-27 17:15:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff52cf4916759b368cc677314acd6456c78ce659,ff52cf4916759b368cc677314acd6456c78ce659,"Merge pull request #1869 from tophatch/concepts/download_attachment_failure

Fix assert failure with attachment download failure on retry #1853"
pasin,2017-09-27 02:58:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/65811656124bcd67ac30d1cf16532f63f1e8a186,65811656124bcd67ac30d1cf16532f63f1e8a186,"Fix setting cookie in header could not be effective

Problem:

* We set all CBLReplicator.headers to the NSURLSessionConfiguration.HTTPAdditionalHeaders so that the headers will be automatically set to the NSURLRequest. However if the HTTPAdditionalHeaders  contains Cookie and there is already cookies set the the NSURLRequest by the cookie storage, the Cookie in the HTTPAdditionalHeaders will be ignored.

* SGW has a feature to auto-refresh the session before the session gets expired. The new session cookie will be sent to the Replicator vis the NSURLResponse and will be saved into the cookie storage. When the refresh happens, the cookie originally set in the HTTPAdditionalHeaders will be ignore. However the new cookie set to the header after restarting the SGW will be ignore too.  (#1757)

Solution:

When starting the replicator, transfer Cookie set in the CBLReplicator.headers to the cookie storage. This allows the Cookie set in the header to replace the Cookie in the storage if they are matched. This also simplify the logic to have only one single source of the cookies."
snej,2017-09-26 16:28:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce67fee0a261e8bc77ab939c008b0e3d4002843f,ce67fee0a261e8bc77ab939c008b0e3d4002843f,"Fixed C4 object leak stopping continuous replication (test failure)

Fix is in LiteCore.
Using new API to list the leaked object classes when a leak occurs."
snej,2017-09-25 19:53:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b7c080cd9a4a8e17db4bf39f9e8460732813962,0b7c080cd9a4a8e17db4bf39f9e8460732813962,"Updated LiteCore with fix for testStopContinuousReplicator crash

Re-enabled the test method now that it works. (I've run the entire
ReplicatorTest suite ten times in a row without failures or crashes.)

Fixes #1903"
pasin,2017-09-23 00:23:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6923714576d7d167e0c69a0b191451fac692ebf5,6923714576d7d167e0c69a0b191451fac692ebf5,"Fix updated designed doc’s map fn not get recompiled

If view’s properties is not nil, always compare the version (SHA1 hash of the new view’s properties) whether it is the same as the current version or not. If version is not the same, recompile the map/reduce fn and re-register the map/reduce fn.

#1758"
pasin,2017-09-22 17:44:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f7a630cb84b740e901a4645c609799a5bd225d9,3f7a630cb84b740e901a4645c609799a5bd225d9,"Fix threading issue in replicator backgrounding (#1905)

* Currently some variables (_active, _filesystemUnavailable, and _deepBackground) could be accessed from different threads (main thread and replicator thread). Fixing this by always executes background/forground handling codes on the replicator thread.

* This is also fixed the issue that the replicator (especially pull replicator) is suspended immediately when starting it in the background. Basically there is a race when accessing the _active variable (#1898)"
pasin,2017-09-21 21:35:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0acb6df71e624a94560d4e8f0b29180b208bac76,0acb6df71e624a94560d4e8f0b29180b208bac76,"Fix invalid CFBundleShortVersionString

* Basically, the value for key CFBundleShortVersionString must be a period-separated list of at most three non-negative integers.

* Change from 2.0DB0XX pattern to just 2.0.0.

* Set Build number to zero. The CI build will set the build number. If the developer is using Cocoapods or Carthage, the build number will always be zero."
pasin,2017-09-21 00:43:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c4aee8ad03546dd561e60cd9e34a87f5ae0c7e0b,c4aee8ad03546dd561e60cd9e34a87f5ae0c7e0b,Update MYUtilities
pasin,2017-09-20 21:23:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b47fadc17a263f3399a06fe307ac7019f8e7499d,b47fadc17a263f3399a06fe307ac7019f8e7499d,Update project file modified by XCode 9
pasin,2017-09-20 20:46:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ab70287666fcac554417bbeb95030fd886683e37,ab70287666fcac554417bbeb95030fd886683e37,Update version string to DB017
pasin,2017-09-20 20:46:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/703a1c699e4fbc5f60aa9cd6a67df51f0f503bf3,703a1c699e4fbc5f60aa9cd6a67df51f0f503bf3,"Add ReplicatorConfiguration.headers

This allows the application to add extra HTTP headers to send in all requests to the remote target.

#1889"
pasin,2017-09-20 05:11:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3464fbf89369adaf395a3f52fdaaffe7de677530,3464fbf89369adaf395a3f52fdaaffe7de677530,"Disable testStopContinuousReplicator as it causes crashes

#1903"
pasin,2017-09-20 05:10:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d2b0b35a9f3b4dcc86146863948cd024d56d44a,9d2b0b35a9f3b4dcc86146863948cd024d56d44a,Update LiteCore
pasin,2017-09-19 15:35:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3e93d78288fdb248e44ef914c702c52d190919b,e3e93d78288fdb248e44ef914c702c52d190919b,"Update ForestDB to fix compaction issue

Reference Issues:

https://github.com/couchbase/couchbase-lite-ios/issues/1860
https://github.com/couchbase/couchbase-lite-ios/issues/1886"
snej,2017-09-15 00:56:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74e10c413a52e2f850488187d973975b6c2fa3a2,74e10c413a52e2f850488187d973975b6c2fa3a2,"Fixed a crash when replicator is stopped immediately after starting

couchbase/couchbase-lite-core#264"
pasin,2017-09-15 00:27:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d54ee382ea711f671481066b37934f605c6e1a72,d54ee382ea711f671481066b37934f605c6e1a72,"Add stop continuous replicator unit test

Currently the test is disablde as it is current failed. Basically stopping active continuous replicator (in CONNECTING OR BUSY status) could cause EXC_BAD_ACCESS."
snej,2017-09-13 17:48:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0387581812aa0ccd56001023525200ef14bedf5,e0387581812aa0ccd56001023525200ef14bedf5,Minor cleanup of TunesPerfTest.mm
snej,2017-09-12 23:31:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bdbeca9b748fcc52970d982b34b398e53df0c363,bdbeca9b748fcc52970d982b34b398e53df0c363,CBLPredicateQuery: Suppress warning about x_offset/x_limit not being set
snej,2017-09-12 23:30:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60a92e2e973a2293a739368f6a20fb5a4675a2f5,60a92e2e973a2293a739368f6a20fb5a4675a2f5,"Updated LiteCore

Lots of changes since commit 3691c18 on Aug 28..."
pasin,2017-09-02 00:58:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e88a5dbd859b55ea0670b97407734b786ec6442b,e88a5dbd859b55ea0670b97407734b786ec6442b,Update version to 2.0DB016
pasin,2017-09-01 23:53:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b051bc7e630a5724f4b73de6e2464bae4e6e865,4b051bc7e630a5724f4b73de6e2464bae4e6e865,"Change createIndex:forName to createIndex:withName

Grammatically, it shoud be createIndex:withName not createIndex:forName.

#1876"
pasin,2017-08-29 22:37:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a18f098b80ecf18e9ad6424843dd07b975a71b1,0a18f098b80ecf18e9ad6424843dd07b975a71b1,"Add User-Agent custom header to replicator config

* Add User-Agent custom header to the replictor config.

* (Tentative) User-Agent format: CouchbaseLite/<Version> (Platform; OS-Name OS-Version[; Device-Name (if available)]) Build/<Build-Number> Commit/<First-8-Chars-Hash>[+CHANGES (if dirty)]

* Added Scripts/get_repo_version.sh script ; copied from BuildScripts/getRepoVersion.sh in 1.x.

* Added run script phrase to run Script/get_repo_version.sh to generate repo_version.h which includes the information about github commit.

* Added $CBL_BUILD_NUMBER for setting the build number when running xcodebuild

* Modified Script/build_framework.sh to parse the build number from the version string

#1882"
pasin,2017-08-29 16:30:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f2cd6d344a8b4e2e01d94f8b555a7d7e447c2c8,6f2cd6d344a8b4e2e01d94f8b555a7d7e447c2c8,"Fix Invalid variable name when using Any expression

* Updated LiteCore to uptake the fix.
* Added a unit test to cover the scenario.

#1875
https://github.com/couchbase/couchbase-lite-core/issues/238"
snej,2017-08-28 22:16:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d4b2c282a0057bd40884b824647a7d95fd0abc5,1d4b2c282a0057bd40884b824647a7d95fd0abc5,"Merge pull request #1878 from couchbase/feature/fix_end_bg_crash

Fix race between resetting _bgMonitor to nil and using it on different threads"
pasin,2017-08-28 22:12:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd208f598ec6ee5707a8776c1a2cb94019a3e222,fd208f598ec6ee5707a8776c1a2cb94019a3e222,"Fix race b/w resetting _bgMonitor to nil and using it

* There is a race condition between resetting _bgMonitor to nil in -endBackground on the replicator thread and accessing _bgMonitor in -okToEndBackgrounding on the main thread.

* The easiest way to fix this is to not resetting nil after stopping the bgMonitor given the fact that it could also be recreated again from the replicator thread in the -setupBackgrounding method.

#1677 #CBSE-4145"
snej,2017-08-19 00:01:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/473c7a1f29565d52a57aa12c00ab108b8dbb10b1,473c7a1f29565d52a57aa12c00ab108b8dbb10b1,"TunesPerfTest fixes/improvements

* Use updated index API
* Don't include the time to create the FTS query in the FTS query time.
  (Queries are slower to create in 2.0, but it's not fair to penalize
  for that, because they're reused.)
* Added autorelease pools around each test so garbate doesn't pile up.
* Streamlined the verbose logging code.
* Log times for each test as it happens when verbose is on.
* Split out commit times, in the above per-test logs."
pasin,2017-08-25 22:23:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/55aab4afa460eca507cf7312f2cf67b7adc952c4,55aab4afa460eca507cf7312f2cf67b7adc952c4,"Enable testCreateSameNameIndexes

The issue has been fixed in the Lite-Core so enable the test now.

#1874"
pasin,2017-08-25 21:07:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fe97ac93ad606d22f7069d7d363bf3bfb143623,2fe97ac93ad606d22f7069d7d363bf3bfb143623,"Add expectException untility to assert exception in unit tests

* Implemented expectException untility to assert exception in unit tests.
* Not accessing gC4ExpectExceptions in the test cases itself anympre."
pasin,2017-08-22 21:28:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9625fd35b2dfc7e627e54431fbf6a30fbcf58bf4,9625fd35b2dfc7e627e54431fbf6a30fbcf58bf4,"Implement Database Encryption Api

* Implemented encryption api for both ObjC and Swift
* Ported DatabaseEncryptionTest from 1.x.
* Updated Lite-Core"
pasin,2017-08-24 05:04:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1eeeb1da3fc63549890d41c99d1a4e768a104793,1eeeb1da3fc63549890d41c99d1a4e768a104793,"Fix build failure in Index.swift

Fixed calling method before super.init()."
pasin,2017-08-24 02:14:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b048d21688e4421fe4d9d9d5a2aeae7139cb158,7b048d21688e4421fe4d9d9d5a2aeae7139cb158,"Update set number test cases

#1871"
pasin,2017-08-24 02:09:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee9b868fb43e507121b86acb47c982cf7077ea48,ee9b868fb43e507121b86acb47c982cf7077ea48,"Update lite-core to uptake fleece number encoding fix

#1871"
pasin,2017-08-24 02:06:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4b93a5ca7a5f7d577f273933d0d6d9fc727ed7b,a4b93a5ca7a5f7d577f273933d0d6d9fc727ed7b,"Implement a new index API (#1873)

* Implemented a new index API for both value and full-text search index.
* Disabled testCreateSameNameIndexes as the test is failed due to two different type indexes are allowed to create with the same name.

#1666"
pasin,2017-08-23 22:09:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86f1b6cd2a56fbd04e9f6dd870f1bd3a66f59f2c,86f1b6cd2a56fbd04e9f6dd870f1bd3a66f59f2c,"Update FTS Rank() function

Instead of grouping the rank function under FTS group, just keep it along side with the other functions."
combinatorial,2017-08-12 05:32:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00e8dddde6a2cbf94f003a332fd6b7789aa9f385,00e8dddde6a2cbf94f003a332fd6b7789aa9f385,Fix assert failure with attachment download failure on retry #1853
pasin,2017-08-22 23:23:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f39573fbd32c23d3b0040ecb5bee211c75b2533,1f39573fbd32c23d3b0040ecb5bee211c75b2533,"Fix BasicAuthenticator not working

Fixed the authentication type."
pasin,2017-08-22 04:04:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0327422f028b759961ad4f48af8bdde6afb0f8b0,0327422f028b759961ad4f48af8bdde6afb0f8b0,"Enable already fixed failing query tests in Swift

* Enabled QueryTest.failingTestWhereLike() and testWhereRegex() as the issue has already been fixed.
* Fixed a minor Database.LogDomain comment."
pasin,2017-08-22 00:38:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7afc4fa824c4e0860059742a4c3681343a6ecb3,d7afc4fa824c4e0860059742a4c3681343a6ecb3,Update version number to 2.0DB015
pasin,2017-08-21 21:58:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c67637efb7f3c2beeaaf2e5c6ebf950c322105c,3c67637efb7f3c2beeaaf2e5c6ebf950c322105c,"Implement FTS ranking value expression

The implementation is based on the tentative API and may be subject to change."
pasin,2017-08-21 19:12:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a64ced5b4de7ea14eb91aa1050d07d5f0d5a5442,a64ced5b4de7ea14eb91aa1050d07d5f0d5a5442,"Implement setlog level API (#1866)

* Implemented set log level API for ObjC and Swift.
* The log domains and levels are tentative.
* Need to sync between LiteCore and Lite log domains. We should shared the domains as many as possible."
pasin,2017-08-21 17:13:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d12ad017a241f61a77a355b197eb31954fa14607,d12ad017a241f61a77a355b197eb31954fa14607,"Feature/2.0 copy db (#1865)

* Implemented Database.copy() for both objective-c and swift.
* Made Swift DatabaseConfiguration.directory non-mutable.
* Update LiteCore"
pasin,2017-08-18 16:16:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b2569b39fb44d6e1ccbbf21f755a69001796c74a,b2569b39fb44d6e1ccbbf21f755a69001796c74a,"Fix CBLExpression and: or: not being allowed in in ObjC++

Used -andExpression: and -orExpression: instead."
snej,2017-08-17 20:02:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d155de4fbd54cb2d101806b7f0918ba8c28a273,8d155de4fbd54cb2d101806b7f0918ba8c28a273,"Updated & improved TunesPerfTest

* Now using collation API instead of lowercasing strings to compare
  them. (This means it's also diacritic-insensitive, which changes the
  results of some queries where multiple spellings of an artist name
  weren't being coalesced.)
* Runs the -queryAlbums: test before indexing as well as afterwards.
  It's *much* slower without an index.
* Reports insert and update times in docs/sec.
* Added a VERBOSE variable to control how much gets logged, for
  diagnostic purposes."
snej,2017-08-16 19:51:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/080258c576eed89fd4aebd83a91c0855483ac733,080258c576eed89fd4aebd83a91c0855483ac733,"CBLPredicateQuery now supports collation

The NSComparisonPredicateOptions flags for case / diacritic insensitive
collation now result in JSON 'COLLATE' operations wrapped around the
comparison. (In Cocoa predicate syntax, these flags are set by appending
`[c]`, `[d]` or `[cd]` to the comparison operator, e.g. `X >[c] Y`.

The items in the `orderBy` property also support collation:
* If an item is a string, append the bracketed collation specifier as
  shown above, or `[]` for plain Unicode collation.
* If an item is an NSSortDescriptor, use the standard NSString comparison
  selectors like `localizedCaseInsensitiveCompare:`."
snej,2017-08-18 01:03:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/32b34af660050ec8ba27429b2f4627af51f650b7,32b34af660050ec8ba27429b2f4627af51f650b7,"Fixed an assertion failure in CBLQuery when given an invalid string

It now returns an error from NSPredicate, instead of trying to add
nil to an NSArray and crashing."
pasin,2017-08-17 18:26:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb6fa785356a93a1213077269e7b920d5cc6d8e9,eb6fa785356a93a1213077269e7b920d5cc6d8e9,"Remove _responseHeaders from CBLReplicator

We are currently not using the _responseHeaders as the auth has been implemented at the LC level so I take it out. We could add it back if we need it."
snej,2017-08-15 16:29:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff7be0f789147540fb9db3049139b02e66d17a60,ff7be0f789147540fb9db3049139b02e66d17a60,Updated LiteCore with build fixes
snej,2017-08-15 00:08:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82afcb6a006517f061598cfb9c26094352e5636c,82afcb6a006517f061598cfb9c26094352e5636c,"Statically link SQLite (updates LiteCore)

Updated to LiteCore commit that uses statically linked SQLite.
Removed libsqlite3.tbd from project & all targets.

See couchbase/couchbase-lite-core#208"
snej,2017-08-14 23:37:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ccf6825f7725ebbd03dd5ac3a5ccccfaed1eb405,ccf6825f7725ebbd03dd5ac3a5ccccfaed1eb405,"Use CLANG_WARN_UNGUARDED_AVAILABILITY to check for unavailable API calls

This is new in Xcode 9; it generates a warning if you call an API that
isn't available in the deployment-target OS version, without using a
runtime availability check.

It caught one use of an unavailable API, NSLocale.languageCode, which
I've replaced with a backwards-compatible equivalent call."
pasin,2017-08-11 21:41:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f880a10b3bd9d21b5b568599e0951c1cc428bfb,3f880a10b3bd9d21b5b568599e0951c1cc428bfb,"Cleanup CBLQuery and CBLExpression classes

* Removed unused properties.
* Extracted a method to return JSON from an expression value.
* Misc changes (e.g. parameter names)."
snej,2017-08-11 20:56:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/688d09fc9880f1f55a8364ca12b20c11c64f7ed2,688d09fc9880f1f55a8364ca12b20c11c64f7ed2,"Updated query generation to compensate for changed LiteCore ""IN"" op (#1857)

See couchbase/couchbase-lite-core#204"
snej,2017-08-11 00:06:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38a5a0fcd37b45f7e15fc75798235fb2ef86b921,38a5a0fcd37b45f7e15fc75798235fb2ef86b921,"Added missing __nullable annotations in internal CBLSharedKeys API

Xcode 9's Undefined Behavior Sanitizer pointed out that these functions
sometimes return nil/NULL.

Also updated to latest LiteCore which has more undefined behaviors and
race conditions fixed."
pasin,2017-08-10 22:45:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff4c064e0ff1db4eddea1974418324d0b0902108,ff4c064e0ff1db4eddea1974418324d0b0902108,"Fixed another unit test failed to build as missing CBLInternal.h

Renamed more CBLInternal.h to CBLDatabase+Internal.h in unit tests."
pasin,2017-08-10 21:25:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f63753c57b592b1cf0677b50f6337fcddb3363c,7f63753c57b592b1cf0677b50f6337fcddb3363c,"Rename CBLIntenal.h to CBLDatabase+Internal.h

As CBLInternal.h has mostly database related internal definition. It made more sense to rename it to CBLDatabase+Internal.h."
jamiltz,2017-08-10 20:43:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/635c932bc6d0fa94620e8b5aed01b3a700d9938f,635c932bc6d0fa94620e8b5aed01b3a700d9938f,"update examples for DB14, add query examples and canned db. (#1856)"
pasin,2017-08-10 05:34:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6340dd2b7421c77afa2805b1875196d804b74660,6340dd2b7421c77afa2805b1875196d804b74660,"Implement description to Query and Expression

Implemented description in Query, LiveQuery, and Expression that includes JSON representation of the object."
pasin,2017-08-09 01:41:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6132c007f242e1f882a60250f76ab48181354161,6132c007f242e1f882a60250f76ab48181354161,"Implement Query Collation

Implmented Collation for both ObjC and Swift."
jamiltz,2017-08-08 00:00:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/065f7ae62843b60da408491b94b70abad26f4c87,065f7ae62843b60da408491b94b70abad26f4c87,"conflict resolver example (#1848)

* objc conflict resolver example.

* swift conflict resolver example."
pasin,2017-08-07 20:58:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c948de6142dec8356eb7edf608e418dab5f4c64,4c948de6142dec8356eb7edf608e418dab5f4c64,"Create CBLQueryResultArray to serve allObjects value

* Changed CBLQueryResultsArray to CBLQueryRowsArray. This is currently used by the PredicateQuery.

* Implemented the same for the regular Query and named it CBLQueryResultArray. The reason to implement a new one instead of trying to use the same one is to clearly separate PredicateQuery and Query for now."
pasin,2017-08-07 20:40:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/769f2b9e7939bdd1e19686d0aefc5af29e8d5249,769f2b9e7939bdd1e19686d0aefc5af29e8d5249,"Fix Carthage build failure.

Changed from CBLQueryEnumerator to id."
pasin,2017-08-07 20:40:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d1fb9bfe8916f6b1e0893f5203cadfb68d864dc,9d1fb9bfe8916f6b1e0893f5203cadfb68d864dc,"Fixed Swift unit test failure

There shouldn’t be ‘/‘ as it causes a double ‘/‘."
pasin,2017-08-07 18:35:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/911b1b9a8922a0eb931431edd100a09a7976a412,911b1b9a8922a0eb931431edd100a09a7976a412,Set version number to 2.0DB014
pasin,2017-08-07 18:33:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75e22d1d5535e478e90befe5271299b2bc872c10,75e22d1d5535e478e90befe5271299b2bc872c10,"Support Int64 setters and getters

Supported Int64 or long long in ObjC setters and getters

#1768"
pasin,2017-08-05 05:34:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21154144d18776213b89a2294c9acfbd98467bc6,21154144d18776213b89a2294c9acfbd98467bc6,"Format Objc and Swift API Comments using XCode 9 doc format

* Format Objc and Swift API Comments using XCode 9 doc format.
* Fixed issue that jazzy cannot recognize parameters and return description on both Objc and Swift."
pasin,2017-08-04 23:37:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48058448968038a7e3b34e391c5198da5eec141b,48058448968038a7e3b34e391c5198da5eec141b,"Implement select all

Implemented select all for ObjC and Swift.

#1829"
pasin,2017-08-04 17:24:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/03464ea18588762ace79ce610c02afeb5138bd59,03464ea18588762ace79ce610c02afeb5138bd59,"Fix satisfies expression parameter type

Changed the type from id/Any to Expression."
pasin,2017-08-04 17:23:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ab2aef043af5b9c7dd51c8aca2dbdd54cfd10099,ab2aef043af5b9c7dd51c8aca2dbdd54cfd10099,Update LiteCore and fix query test
pasin,2017-08-03 01:52:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/13ff9f7c2a29b8bda528db2602d28f8b526723d0,13ff9f7c2a29b8bda528db2602d28f8b526723d0,"Implement type setters

* Implemented type setters in Document, Dictionary, Array, Parameters

* Reformat Swift API doc comments

#1845"
pasin,2017-08-01 22:34:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/623acf34e4e01a8cd5e8c70b818cb45ef7106f37,623acf34e4e01a8cd5e8c70b818cb45ef7106f37,"Implement NullOrMissing operator

Implemented isNullOrMissing and NotNullOrMissing operator.

#1844"
pasin,2017-08-01 18:05:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/972a4dec839b9e8e021c4fd2399a895c26fe638e,972a4dec839b9e8e021c4fd2399a895c26fe638e,"Implement Quantified operators

* Implemented Quantified operators  (ANY/ANY AND EVERY/EVERY <variable name> IN <expr> SATISFIES <expr>) for both ObjC and Swift.

* Refactor Objective-C internal expression by extracting them all into its own file.

#1843"
pasin,2017-07-29 01:31:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a85da3985455e9295728a19249567169a838c793,a85da3985455e9295728a19249567169a838c793,"Add array, math, string, and type funcs (#1850)

Implemented Array, Math, String, and Type functions to ObjC and Swift.

#1842"
snej,2017-07-27 23:50:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e91b93f7019825ef657c1eacb37c1163a89f67d7,e91b93f7019825ef657c1eacb37c1163a89f67d7,"Implemented SSL client cert authentication (no tests yet)

For #1849"
pasin,2017-07-27 02:58:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1553a87b04cbc4907c1b7c622acbbb69e646a895,1553a87b04cbc4907c1b7c622acbbb69e646a895,"Fix Swift Select Distinct

* Enabled Select Distinct tests in both Objc and Swift
* Fixed typo in the Swift code.

#1847"
pasin,2017-07-27 02:37:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30a564d87c9460c11248e42db5b163082a1c6b3a,30a564d87c9460c11248e42db5b163082a1c6b3a,"Fixed Meta.id and Meta.sequence column name

Changed from ‘_id’ to ‘id’ and ‘_sequence’ to ‘sequence’.

#1846"
pasin,2017-07-27 01:31:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d0a10e65d659d8ccd49a468bf786794fc9c474a,2d0a10e65d659d8ccd49a468bf786794fc9c474a,"Add Offline and Connecting status to Replicator’s ActivityLevel

* Included Offline and Connecting status to Replicator’s ActivityLevel (#1841)
* Prepend Replicator to the ObjC Replicator’s ActivityLevel enum (#1821)"
snej,2017-07-26 21:52:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42e580ccaf417e52809545847b783782d76f5d1a,42e580ccaf417e52809545847b783782d76f5d1a,"Updated LiteCore to pick up some replicator bug fixes

824d6cf: Fixed: Push replicator wasn't sending histories of revisions to SG
ba307c8: Fixed puller not stopping/idling, if it gets an error on a revision
b671329: Fixed: Blobs not converted to attachments on push"
jamiltz,2017-07-26 16:04:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ef298080cf387eaf93a4ae331e803590e023142,1ef298080cf387eaf93a4ae331e803590e023142,"Swift example project (#1803)

* add initial swift examples project (db13).

* link framework properly and updates to compile.

* add replication comment and change listener example."
jamiltz,2017-07-26 16:03:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2b304e06cab36e88f7f163237b95b820c07c3e4,e2b304e06cab36e88f7f163237b95b820c07c3e4,switch to DB13 and add replication change listener. (#1840)
pasin,2017-07-26 02:28:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70632fe9103be15c21ef13f4f154902f9b71c9b1,70632fe9103be15c21ef13f4f154902f9b71c9b1,"Fix Swift createIndex and removeIndex

createIndex and removeIndex should support Expression, NSExpression or String."
pasin,2017-07-25 00:19:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e3715f05036d078bffc7393a36baa94bbd7a5de,9e3715f05036d078bffc7393a36baa94bbd7a5de,"Fix createIndex and deleteIndex to support Expression

Make CBLDatabase’s createIndex and deleteIndex to support Expresion, NSExpression (for NSPredicate), and String (for NSPredicate).

#1839"
snej,2017-07-25 01:21:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e212422c2c71b226c9098496cd3dd382543cd93,5e212422c2c71b226c9098496cd3dd382543cd93,"Sped up array/dictionary conversions and Fleece encoding (#1838)

In the TuneMark benchmark's import phase, the time was dominated by
adding an NSDictionary to an empty document, and encoding the document
to Fleece. I've sped this up, and some other methods that showed up as
hot-spots.

The biggest problem was the large number of -conformsToProtoco: calls.
This check is very slow. I've replaced those with category methods on
NSObject, which the CBL classes override. These are declared in
CBLData.h.

There are some more changes in CBLDictionary to reduce the amount of
work done in -setDictionary: and -toDictionary."
snej,2017-07-24 20:38:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/03a5a5283cef3321a787700ddd7d0209e5d81ca5,03a5a5283cef3321a787700ddd7d0209e5d81ca5,"Speed up doc-contains-blob check when saving

I added a new LiteCore function c4doc_dictContainsBlobs() that's
faster than the containsBlob() function that was used here, which showed
up as a hot-spot when profiling TuneMark's insertion phase."
snej,2017-07-24 22:26:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a37bb458f745236f9f47309626be3580f9f8ce33,a37bb458f745236f9f47309626be3580f9f8ce33,"Made TunesPerfTest more amenable to profiling with Instruments

Added a ""PROFILING"" preprocessor symbol that, if set to 1, reduces the
number of iterations to 1 and adds a 1/2 sec pause between tests.

Also fixed a bogus warning logged by PerfTest sometimes."
snej,2017-07-24 22:41:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e74b332a5e7b149259f5f7bc131fea136b8c85c6,e74b332a5e7b149259f5f7bc131fea136b8c85c6,"Simplified Swift Conflict class (#1837)

Made the mine/theirs/base properties regular 'var's.

Used flatMap idiom to initialize base without needing an if/else.
(It's the first time I've used it, but it's apparently a pretty common
idiom in the Swift world.)"
snej,2017-07-20 22:56:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/22eb0bb63d341f9c114321c995c4cb88f821c3d4,22eb0bb63d341f9c114321c995c4cb88f821c3d4,"FTS index should use current locale's language by default

If the caller doesn't specify a language for an FTS index, the docs
say it should use the current locale's language. However, this wasn't
implemented. Added the code for this.

(This required changing the expected number of FTS results in the
TuneMark test, because the search for ""rock"" wasn't finding the word
""rocks"". This is actually how I noticed the bug.)"
pasin,2017-07-24 18:51:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/926c16a83f743c3c1efc6a4fbf23536b386f1fae,926c16a83f743c3c1efc6a4fbf23536b386f1fae,"Fix conflicting base is not null when there is no base

Currently the base is an empty doc instead of null when there is no base document. This is fixed by checking if the base c4doc is null or not, if it’s null, the base document should be null.

#1835"
pasin,2017-07-24 17:50:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bcfaf4c0d42e73b957f5dbcb418adc5f4e0107a7,bcfaf4c0d42e73b957f5dbcb418adc5f4e0107a7,Update version number to 2.0DB013
pasin,2017-07-22 05:24:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/831e1a0170445e558663eaffcdf346a74cf3a72f,831e1a0170445e558663eaffcdf346a74cf3a72f,"Change Meta.documentID to Meta.id

According to the update to the spec, change Meta.documentID to Meta.id. This is inline with N1QL and SQL++ syntax."
pasin,2017-07-22 05:15:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36eba1874b3a0d748320318303aa15446d65c2a5,36eba1874b3a0d748320318303aa15446d65c2a5,"Change CBLDocument.documentID to CBLDocument.id

To be consistent with the other platforms, change CBLDocument.documentID property to CBLDocument.id."
pasin,2017-07-22 04:49:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c8e3c5989d9fe7a97fe22baa0367e048eb593689,c8e3c5989d9fe7a97fe22baa0367e048eb593689,"Fix —notest argument in generate_release.zip.sh

—notest could be ignored if it appears at the last argument."
pasin,2017-07-22 04:44:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e8306ae726a1cb913652d91a9bcde29476661f40,e8306ae726a1cb913652d91a9bcde29476661f40,"Fixed c4Query not being passed to CBLQueryResultSet

* Passed c4Query object to the ResultSet in constructor
* Make CBLQueryResultSet.query strong reference to make sure that the ResultSet and Result cannot be used through out its lifetime."
pasin,2017-07-22 01:16:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1b3b1614116856cddc420fea7b2d0a8d684e2915,1b3b1614116856cddc420fea7b2d0a8d684e2915,"Implement ResultSet/Result and projection with alias names (#1833)

* Implement ResultSet and Result API according to spec; Result implements ReadOnlyArray and ReadOnlyDictionary interface.

* Separate PredicateQuery and QueryAPI; PredicateQuery still uses the  QueryRow class.

#1827 , #1828"
snej,2017-07-20 03:27:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8b95b828d7e597cc0cfdd53ce9536ad60398435,a8b95b828d7e597cc0cfdd53ce9536ad60398435,"Merge pull request #1673 from couchbase/feature/fix-puller-crash

Fixed #1655 : Race causing the change tracker to start twice"
snej,2017-07-19 01:11:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4675e6aebd4e614f79f85583091a8059fb6f8070,4675e6aebd4e614f79f85583091a8059fb6f8070,"Updated LiteCore to pick up a fix for a crashing/hanging bug

See LiteCore commit daca26a0

Fixes #1825"
pasin,2017-07-18 21:24:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a829ceab99cb869821a13fd481f7bc8177ecd313,a829ceab99cb869821a13fd481f7bc8177ecd313,"Set release STRIP_STYPE to non-global

This configuration will stripped all non-global symbol, as a result it helps reduce the binary size.

#1824"
pasin,2017-07-14 22:15:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d70b7c17d6882207fc30e076a581696b4b9c76e7,d70b7c17d6882207fc30e076a581696b4b9c76e7,"Fix fleece encoder memory leak

The fleece encoder needs to be free after being used.

#1819"
pasin,2017-07-14 00:26:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3df1f11effd0c61ad60e48be3bc20574923e9154,3df1f11effd0c61ad60e48be3bc20574923e9154,"Fix log message when suspending the replicator in background

When the app is put into the background, the replicator will start a background task to be able to complete the replication. Once the replication is inactive (e.g. IDLE), the replicator will be automatically suspended. Currently the logging message could be misleading that the replicator cannot run background task. This commit corrected the message."
pasin,2017-07-13 18:06:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/faac907ee3a35736f75c5ddc8d2662be8bb24141,faac907ee3a35736f75c5ddc8d2662be8bb24141,"Fix replicator IDLE comment

Should use inactive instead of unactive."
snej,2017-07-13 17:02:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e4885e4b60453ec5da7e7806f5cb5130e40e183,8e4885e4b60453ec5da7e7806f5cb5130e40e183,"Updated LiteCore: Changes subdoc type prop from ""_cbltype"" to ""@type"""
snej,2017-07-13 00:21:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a7fd00a7ad077783faf55110215d61a6203a950,4a7fd00a7ad077783faf55110215d61a6203a950,"Use new LiteCore string constants for blob property/value

Instead of hardcoding ""_cbltype"" and ""blob"", use new string constants
from LiteCore. That way everything will stay consistent, even if we
update these names before shipping (as seems likely.)"
snej,2017-07-13 00:20:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80af7467c87d0a66338e263961f8f9db039c3235,80af7467c87d0a66338e263961f8f9db039c3235,Actually check in the fixed replicator tests (should've been in prev commit)
snej,2017-07-12 22:12:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a2e14140cefed99452511cbe883e4bc58cca5af6,a2e14140cefed99452511cbe883e4bc58cca5af6,"Fixed continuous-replication tests

There was no bug in the actual replicator code in CBL or in LiteCore,
just some problems with the unit test class.

* Changed checkpointing interval to 1 sec (from default of 5 sec) so the
  replicator goes idle before the test's time limit expires
* Just in case, extended the time limit to 7 sec.
* Fixed the logic in the replication change listener so it stops the
  replication when it goes idle, and then doesn't stop the test until
  the replicator actually stops. (Otherwise the replicator is still
  alive when the test exits, triggering the leak checker.)

Fixes #1816"
pasin,2017-07-12 00:12:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c322e59f0e34692c721e6a7bc767af20c088481b,c322e59f0e34692c721e6a7bc767af20c088481b,"Added continuous push and pull unit tests

* Added continuous push and pull unit tests
* Maked them as failed tests"
pasin,2017-07-11 23:58:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a604392362533af28da6f1bb80c622a78d82d79,7a604392362533af28da6f1bb80c622a78d82d79,"Remove Documentation group

Removed the left over Documentation group."
snej,2017-07-11 22:27:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72147b81e36671847b7e746292827b2e5065a55c,72147b81e36671847b7e746292827b2e5065a55c,CBLReplicator.error should be nullable.
pasin,2017-07-11 22:04:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db009f2e40ba5c3325a637a63f01892c0829e75e,db009f2e40ba5c3325a637a63f01892c0829e75e,"Remove Doxygen

Use Script/generate_api_docs.sh which is using jazzy tool to generate aboth ObjC and Swift API docs instead."
pasin,2017-07-11 21:55:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f5c7560cb22d159013261984f981323253bfffa5,f5c7560cb22d159013261984f981323253bfffa5,"Fix Swift DatabaseConfiguration copy behavior

Made DatabaseConfiguration not holding the impl object (CBLDatabaseConfiguration) to make the copy behavior work correctly."
jamiltz,2017-07-11 21:52:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56a4c4693148da5605985a193d2a49df0e1a3600,56a4c4693148da5605985a193d2a49df0e1a3600,"objc-api-walkthrough project (#1814)

* add initial project.

* update per review and run against examples DB12."
pasin,2017-07-11 06:48:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d299cca4ec6b75810f2077ecab9043f830ce838,3d299cca4ec6b75810f2077ecab9043f830ce838,"Cleanup coverting LIMIT to JSON

* Made CBLQueryLimit JSONEncoding.
* CBLQueryLimit’s asJSON returns an array of limit and offset."
pasin,2017-07-11 03:03:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/322e175ed75e364f35ceaa8e564a7e77769cd442,322e175ed75e364f35ceaa8e564a7e77769cd442,"Implement Limit and Offset

Implemented Limit and Offset to ObjC and Swift"
snej,2017-07-10 23:04:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91898bc96aa65b1f96ce6133b41d5662f51698c5,91898bc96aa65b1f96ce6133b41d5662f51698c5,"Updated LiteCore query support for offset/limit

And updated CBLPredicateQuery to use it instead of the old API.

From LiteCore commit log:
-------------------------------------------------------------------
* Removed skip and limit from C4QueryOptions and Query::Options
* Instead, ""OFFSET"" and ""LIMIT"" properties in a JSON ""SELECT""
  expression are parsed.
* Implemented N1QL ifmissing() and missingif() functions, because
  they're useful in creating parameter bindings of OFFSET and LIMIT
  (for example, ""LIMIT: ['ifmissing()', ['$limit'], -1]"".)
-------------------------------------------------------------------
For #1795"
pasin,2017-07-10 22:53:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/39f4653ad1e06fe4eb545139ae265acd119b305d,39f4653ad1e06fe4eb545139ae265acd119b305d,"Update LiveQuery API

* Used start() instead of run().
* Added explan() method."
snej,2017-07-10 18:51:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7edcb26c2ae4680baf050ca1f61864529053385,b7edcb26c2ae4680baf050ca1f61864529053385,"Check base revision in replication-conflict tests

Test that a regular replication conflict has a base revision with a
body, and that in an edge case where the body isn't available, things
still work."
snej,2017-07-10 18:50:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/088acb96145f5566a86bc1e63a818d887ffa01cd,088acb96145f5566a86bc1e63a818d887ffa01cd,"Don't give a conflict resolver an empty base revision

If the base revision's body isn't available anymore (we try to avoid it
but it can happen), pass a nil document to the resolver instead of an
object with no properties."
snej,2017-07-10 18:48:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/08a433ebbc3b5367fab1d91f759317d750f12dcd,08a433ebbc3b5367fab1d91f759317d750f12dcd,Updated LiteCore. Use updated C4DocumentFlag names
pasin,2017-07-10 20:50:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/acff9a34881a35030de5e9230c77d03390514d3d,acff9a34881a35030de5e9230c77d03390514d3d,Update version number to 2.0DB012
pasin,2017-07-08 02:39:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01c8e96f9fe1931d6f6d5233021a119b0aeaf961,01c8e96f9fe1931d6f6d5233021a119b0aeaf961,"Implement Query Meta expression

* Implemented Query Meta expression for both ObjC and Swift
* Extracted PropertyExpression into its own file to be inline with MetaExpression."
pasin,2017-07-08 00:46:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b94e56d85e0733362443ac9cf6957e75cdab816,7b94e56d85e0733362443ac9cf6957e75cdab816,"Implement Query parameters

* Implemented Query parameters to both ObjC and Swift
* Applied the same signature to LiveQuery; the current LiveQuery spec is missing this."
pasin,2017-07-07 01:54:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f747cbe4a24c0905fc02dff91aeb20f81c74a51,0f747cbe4a24c0905fc02dff91aeb20f81c74a51,"Fix GroupBy Query API

* GroupBy component should be just created from a collection of the expression objects.
* Eliminated CBLQueryGroupBy in ObjC"
pasin,2017-07-07 01:26:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0608a2a788d3ffce6e1a1a9e52a880bf9cc35ebb,0608a2a788d3ffce6e1a1a9e52a880bf9cc35ebb,"Apply the updated Join spec

Joins is created from a collection of Join components."
pasin,2017-07-07 01:05:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5cd10209f05b8a369f2bab121520fdce26ea84b8,5cd10209f05b8a369f2bab121520fdce26ea84b8,"Apply the updated OrderBy API Spec

* OrderBy object is now created from an array of Ordering components.
* Updated both ObjC and Swift."
pasin,2017-07-06 22:58:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f236251c149a2e2284c42b95680d1c49704c89a5,f236251c149a2e2284c42b95680d1c49704c89a5,"Implement SelectResult, GroupBy, Having, Function to Swift

* Implemented SelectResult, GroupBy, Having, Function to Swift
* Renamed Unit Test loadJSONResource(resourceName: String) to loadJSONResource(name: String)
* Misc changes to API doc comments."
pasin,2017-07-06 22:52:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/023ff2a5e058fe7e78cdc5485ea0fdcaa5a26e01,023ff2a5e058fe7e78cdc5485ea0fdcaa5a26e01,"Implement QuerySelectResult to ObjC

Implemented QuerySelectResult that represents a query return value. This is used for projection."
pasin,2017-07-01 05:02:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/421e232aa22608dc566107d1b2b551a55c3ced5f,421e232aa22608dc566107d1b2b551a55c3ced5f,"Implement Aggr funcs, groupBy, having, and projection in ObjC

* Implemented Aggregate functions, groupBy, and having in ObjC
* Implemented Selection with column projection
* No Swift API yet."
snej,2017-07-01 01:06:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3e75c38bd47b0f104477752209c485022d10d00,d3e75c38bd47b0f104477752209c485022d10d00,"Replicator can now filter by channels and/or document IDs

Added CBLReplicatorConfiguration properties `channels`, `documentIDs`.
(Swift wrappers updated too.)"
snej,2017-07-01 00:30:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3502ed115440081a2256d8136a923c50936ebade,3502ed115440081a2256d8136a923c50936ebade,"Replicator should use config's conflictResolver, if it's not nil

When I implemented replication conflict resolving, I didn't notice that
CBLReplicatorConfig has a conflictResolver property, so the database's
conflict resolver is used instead.
This commit fixes it to use that property if it's non-nil."
pasin,2017-06-30 01:02:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5a7824bfaa632f997f29939c4bb63e08e172b802,5a7824bfaa632f997f29939c4bb63e08e172b802,"Implement Query JOIN on both ObjC and Swift

* Implemented Query JOIN on both ObjC and Swift
* Added PropertyExpression
* Fixed incorrect OrderBy API on ObjC"
pasin,2017-06-29 01:09:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00b80863440c50af22995543683ca8ff29fa50e8,00b80863440c50af22995543683ca8ff29fa50e8,"Unify change events in Database, Replicator, and LiveQuery

* Used a block as an event handler.
* When adding a change listener, return an opaque listener object used for removing the listener."
pasin,2017-06-28 01:47:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d83ec51ecf5024d09022a7a278e67b2b5eb1f85,6d83ec51ecf5024d09022a7a278e67b2b5eb1f85,Updated min OS version on podspec
pasin,2017-06-28 01:41:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48702cdaddb91301d5c49e34d8c524c11117e95d,48702cdaddb91301d5c49e34d8c524c11117e95d,"Merge pull request #1802 from couchbase/feature/2.0-resolve-conflicts

Resolve replication conflicts"
snej,2017-06-27 23:04:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e21484952a27909442c9d0c99c8ec70cc793f892,e21484952a27909442c9d0c99c8ec70cc793f892,"Auto-conflict-resolution fixes

* Moved resolver method from CBLReadOnlyDocument to CBLDatabase, because
  it has to create the document itself.
* The creation of the 'mine' doc needs to be within a transaction.
* Need to call c4doc_save after c4doc_resolveConflict.
* Added a unit test that pulls in & merges a conflict.
* Added more logging.

For #1799"
snej,2017-06-27 20:48:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d94cc2c6b42eef882b47900afc5fadc3b2522721,d94cc2c6b42eef882b47900afc5fadc3b2522721,"Update LiteCore to ensure conflicting revs never become the current rev

Pick up commit bccd0f36"
snej,2017-06-22 22:39:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/008269c895462d3d88d5679cac3d06b8257bb10b,008269c895462d3d88d5679cac3d06b8257bb10b,TunesPerfTest asserts exact numbers of artists/albums queried.
snej,2017-06-27 04:35:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9789e970ac2115c1e1ebb9b2a906d14e1b41cf27,9789e970ac2115c1e1ebb9b2a906d14e1b41cf27,"Replicator observes per-doc errors and triggers conflict resolution

Uses new LiteCore C4ReplicatorDocumentErrorCallback; triggered by code
kC4ErrorConflict."
snej,2017-06-26 18:33:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/450903bae6864ad0bd5d671e9cbb26a8ddb29708,450903bae6864ad0bd5d671e9cbb26a8ddb29708,"Updated conflict resolution code

* Added -[CBLReadOnlyDocument resolveExistingConflict:].
* Added CBLDefaultConflictResolver, implementing the default algorithm.
* Added API to switch a doc to the conflicting revision or the common
  ancestor of the conflict (used by the resolver.)
* Made -[CBLDocument encodeWith:error:] higher level, so it creates the
  encoder itself and returns an NSData, and added it to
  CBLReadOnlyDocument too.
* Moved effectiveConflictResolver down to CBLReadOnlyDocument.
* Updated .generation property implementation.
* Some nullability annotations for CBLCoreBridge.

For #1799"
snej,2017-06-23 01:22:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7618a4fc77cc6b8087273ee852e6e4090692275,d7618a4fc77cc6b8087273ee852e6e4090692275,"Moved some functionality from CBLDocument down to CBLReadOnlyDocument

... including the ability to read a document from the database, and the
database property.

Found it was possible to merge the -loadDoc_mustExist: and
-readC4Doc_mustExist: methods into the initializers that call them,
which cleans up the code a bit.

This is prep work for handling resolution of conflicts pulled from the
database, for which I'll need to create CBLReadOnlyDocuments of non-
current revisions."
pasin,2017-06-24 22:39:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c829bb27c129566d2675cfcb06ac57a3ca9546ef,c829bb27c129566d2675cfcb06ac57a3ca9546ef,"Update README.md

Added steps for building the framework files"
pasin,2017-06-24 18:21:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/93e2d01edeab57970dc9eb9f0389a27bb5df6421,93e2d01edeab57970dc9eb9f0389a27bb5df6421,"Mark LiveQuery.addChangeListener @discardableResult

As the returned result is not always required, make the method as discardableResult."
pasin,2017-06-24 17:07:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/61d6f6700a77e61b2dd42b51759eb5b7da2b3237,61d6f6700a77e61b2dd42b51759eb5b7da2b3237,"Remove CBLReplicatorTarget from the exp symbols

Removed  CBLReplicatorTarget from the exp symbols as we don’t have CBLReplicatorTarget anymore."
pasin,2017-06-24 16:58:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/79f9166b8565e642df8eef5bb27a58e0072a1341,79f9166b8565e642df8eef5bb27a58e0072a1341,"Added static factory to ceate replicator configuration

This will help shorten the line when creating the config object."
pasin,2017-06-24 16:32:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ebca820c194d3c28efa64f28ef9450ef2cdd1cf,0ebca820c194d3c28efa64f28ef9450ef2cdd1cf,"Make Swift Query.toLive() not throwing errors

* Per spec, Query.toLive() doesn’t throw errors.
* Made From statement required runtime check.
* Removed CouchbaseLiteError.swift as no usages now."
pasin,2017-06-24 05:08:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed187790447aac4219ade2e1c5f3f481f6691583,ed187790447aac4219ade2e1c5f3f481f6691583,"Make Swift DataSource’s database non optional

Database is currently required so make it non optional. We may need to rework on this to support subquery."
pasin,2017-06-24 04:49:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db50379b268a2ef31f594e1b607aadc1d10c9911,db50379b268a2ef31f594e1b607aadc1d10c9911,"Fix  LiveQuery listens for changes on all database

Ensure Query.database property will return a database.

#1801"
pasin,2017-06-23 23:59:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e18faa1a0c6b9cec97f963d93dd56929e7d7892d,e18faa1a0c6b9cec97f963d93dd56929e7d7892d,"Update CBL_VERSION_STRING to 1.4.1

Updated CBL_VERSION_STRING to 1.4.1 to match the CI build version number."
pasin,2017-06-23 23:43:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6c52f427f5346d0f10ded2a5debc7a91160ae5df,6c52f427f5346d0f10ded2a5debc7a91160ae5df,Update version number to 2.0DB011
pasin,2017-06-23 23:36:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36314c43b34c93da5fb133448f5b979dfdde8705,36314c43b34c93da5fb133448f5b979dfdde8705,"Fixed LiveQuery unit tests

Called stop at the end of the tests."
pasin,2017-06-23 23:25:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f41b54f530dc5ca2e5b5d7c86988100a2988fe9b,f41b54f530dc5ca2e5b5d7c86988100a2988fe9b,"Apply LiveQuery API from spec (#1800)

Applied LiveQuery API from spec for both ObjC and Swift"
pasin,2017-06-22 01:22:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3275dcd72d67fbe8f1bc5826d54804723fd040a7,3275dcd72d67fbe8f1bc5826d54804723fd040a7,"Fixed ReplicationConfiguration API doc

Fixed the API doc as the database and target are now readonly."
pasin,2017-06-22 01:18:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96014c7816ad718a3659b2acc18500fcc30d7bae,96014c7816ad718a3659b2acc18500fcc30d7bae,"Change ReplicatorConfiguration ctor to have database and target param

* Removed ReplicatorTarget class as no longer needed.
* ReplicatorConfiguration now has two constructors that accepts database and target as URL or Database."
pasin,2017-06-22 00:36:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a3bd60b9ff8978a9954939cff61cc682c0707c1a,a3bd60b9ff8978a9954939cff61cc682c0707c1a,Add ReplicatorConfiguration.pinnedServerCertificate to Swift
pasin,2017-06-22 00:31:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d5f04e3e2440a8789cffad78c18139236a28b53,5d5f04e3e2440a8789cffad78c18139236a28b53,Added API docs for authenticator.
pasin,2017-06-22 00:09:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d61d3e587e2fe1151ac17483bf0c98e2654c6c3d,d61d3e587e2fe1151ac17483bf0c98e2654c6c3d,"Implement Authenticator

* Implemented BasicAuthenticator and SessionAuthenticator
* Removed ReplicatorConfiguration.options
* Removed ReplicatorConfiguration.cookies (https://github.com/couchbaselabs/couchbase-lite-apiv2/issues/110). This could be replaced with customHeaders."
snej,2017-06-21 22:31:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/481a3114db1f89ff7f99b055bc0237272b6688a3,481a3114db1f89ff7f99b055bc0237272b6688a3,"Updated performance tests

* PerfTest and its subclasses needed updates for the current CBL API.
* Updated and cleaned up TunesPerfTest.
* Added querying for all albums by an artist, and full-text title search.
* Added perf tests to ""CBL ObjC Tests - iOS App"", which run in a
  Release build."
snej,2017-06-21 17:15:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33683249c18b53235949a6127d75aac5f6e3a8da,33683249c18b53235949a6127d75aac5f6e3a8da,"Fixed problems with use of `nil` in predicate queries

* The predicate literal `nil` should map to JSON `['MISSING']`,
  not `null`.
* (In)equality comparisons against `nil` should use `IS` / `IS NOT`,
  not `=` / `!=`, due to the weirdness of SQL `null` and N1QL `missing`:
  any comparison against them is always false, except for `IS`/`IS NOT`."
snej,2017-06-20 22:58:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56819cdd6ba90d23a8da855efe2010dc3f4692e6,56819cdd6ba90d23a8da855efe2010dc3f4692e6,"Oops, fixed broken build from prev commit"
snej,2017-06-20 21:04:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/11ff988fa1b31ff70837b98b78c660405f1b5e61,11ff988fa1b31ff70837b98b78c660405f1b5e61,"Fixed potential bugs adding a CBLArray/Dictionary to a different db

FLEncoder_WriteValue assumes the Value being added uses the same
SharedKeys as Encoder; but if that Value comes from a different database
that won't be true. The new Fleece fn FLEncoder_WriteValueWithSharedKeys
handles this scenario correctly."
pasin,2017-06-19 17:25:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/845577034e94c3d8ead423d8cd799efb01190b23,845577034e94c3d8ead423d8cd799efb01190b23,"Feature/2.0 changed propagation (#1789)

* Remove changed notification from sub objects to parents
* No longer notifying parent objects when sub dictionaries or arrays are changed.
* This will allow to save the document without making changes; To detect whether the document is changed or not will be done by comparing encoded documents, which will be implemented in a separated commit."
pasin,2017-06-16 23:39:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a9d5b3af3f0fa06ee93a589ffd0ad185136e04e,3a9d5b3af3f0fa06ee93a589ffd0ad185136e04e,Update LiteCore
pasin,2017-06-16 01:49:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/69720a731c12109779fb3c2d8fc6f1ac5ddb2986,69720a731c12109779fb3c2d8fc6f1ac5ddb2986,"Fixed build error in DatabaseTest

Used -expectError:code:in: instead of -checkError:domain:code."
snej,2017-06-16 01:02:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/afd0c985050b65b573774750da6bac87dafe45e0,afd0c985050b65b573774750da6bac87dafe45e0,"Fixed: Puller messes up docs by encoding them without SharedKeys

Picked up an important bug-fix from LiteCore, as well as an Obj-C unit
test by Pasin that checks for it.
(See https://github.com/couchbase/couchbase-lite-core/issues/156)

# Conflicts:
#	vendor/couchbase-lite-core"
snej,2017-06-15 23:11:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa29f22d699d3047bf7b1d3416db3938a1f0c121,fa29f22d699d3047bf7b1d3416db3938a1f0c121,"Set gC4ExpectExceptions during tests that throw exceptions

# Conflicts:
#	vendor/couchbase-lite-core"
snej,2017-06-15 23:08:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c273603d6968ad3be6c6ca2351cb30fdedc22a9,8c273603d6968ad3be6c6ca2351cb30fdedc22a9,"Made [CBLFragment setValue:] not throw exceptions in normal operation

It was calling setObject:atIndex: on its _parent without range checking,
and @catch'ing any exception. Not a good idea, because throwing an
exception is very slow, and this also gets in the way of any developer
with an exception breakpoint."
pasin,2017-06-15 00:37:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf95fdaaaea6fe6e3be67e37956c41865805b1e6,cf95fdaaaea6fe6e3be67e37956c41865805b1e6,"Set SWIFT_Version to 3.2

Set SWIFT_Version to 3.2 to allow to run the Swift Test on XCode 9. On XCode 8, the version will be interpreted as 3.0."
snej,2017-06-13 23:43:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/524b618d1df4f4e56f6056c4f1e08c2d226cb1f8,524b618d1df4f4e56f6056c4f1e08c2d226cb1f8,"Use the new c4doc_update() function, to save documents more efficiently (#1785)

c4doc_update() is faster because it uses the existing C4Document
instead of reading it from the database. It fails if the document has
been updated on disk, but that's what we want here anyway.
# Conflicts:
#	vendor/couchbase-lite-core"
snej,2017-06-12 21:44:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6fcb5564cf0297206b8199094af3ec6731b64e4e,6fcb5564cf0297206b8199094af3ec6731b64e4e,Added CBLReplicatorConfiguration.cookies [Unofficial API]
snej,2017-06-12 21:27:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f501a7e06da4f03685dbc533318387f4e693182,7f501a7e06da4f03685dbc533318387f4e693182,Enable nullability checking in the XCode 9 undefined-behavior sanitizer
snej,2017-06-12 21:27:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/344c6ebce32839e41761814d0318b761c7f9dc5f,344c6ebce32839e41761814d0318b761c7f9dc5f,"Replicator cookie support

The database now has a cookie store, which the replicator automatically
uses. The changes here are to CBLWebSocket:
* Disable NSURLSession from setting cookies
* Set the Cookie: request header from the ""cookies"" replicator option
* Make sure multiple Set-Cookie response headers are broken out into an
  array in the HTTP headers returned back to the replicator.

# Conflicts:
#	vendor/couchbase-lite-core"
pasin,2017-06-16 22:51:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf931bec524c0bffe7b0def9b3a1f124673140bc,bf931bec524c0bffe7b0def9b3a1f124673140bc,Update README.md
pasin,2017-06-16 19:41:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/141c1536e76c5f5d3b5b3b1422cbc285ee2aa902,141c1536e76c5f5d3b5b3b1422cbc285ee2aa902,Update version number to 2.0DB010
pasin,2017-06-16 18:00:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b2a933d71a270ce234cd5dbfb6e24a3ce7e4cef4,b2a933d71a270ce234cd5dbfb6e24a3ce7e4cef4,"Update LiteCore to release/2.0DB010

This update includes the fix for https://github.com/couchbase/couchbase-lite-core/issues/156."
snej,2017-06-13 23:50:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1129e49c0b12cc0ac104e148a363554b31d6e940,1129e49c0b12cc0ac104e148a363554b31d6e940,"Merge pull request #1784 from couchbase/feature/fix-1770

Fixed #1770 : Clear _docReader before retry in CBLBulkDownloader"
pasin,2017-06-13 22:53:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78bccc8f2cdfa6d5b9d5524dc98f96b7d5fc182a,78bccc8f2cdfa6d5b9d5524dc98f96b7d5fc182a,"Clear docReader before retry in CBLBulkDownloader

The crash happened due to the Assert(!_docReader) in the -startParted: delegate called. Based on the log in #1770, the issue happened after a retry.

From the code review, we don’t reset the _docReader so if the retry is successful and if the -startParted: method is called again, the assertion will fail.

Note that I have also reviewed CBLMultipartReader but I couldn’t find a possible way that it would end up calling -startedPart method twice."
pasin,2017-06-12 18:15:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e678d166fdc3b8e0611f86247376cfa5b14d5ac,3e678d166fdc3b8e0611f86247376cfa5b14d5ac,Update version to 2.0DB009
pasin,2017-06-08 21:09:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2464b62db723ca01596ead8723ee9e7cfce72eed,2464b62db723ca01596ead8723ee9e7cfce72eed,"Update generate_release.zip.sh

* Show xcodebuild version
* Show device list"
pasin,2017-06-08 16:15:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e9264d9c68357bf888a83fab0467e472f02307a5,e9264d9c68357bf888a83fab0467e472f02307a5,Added running unit tests in generate_release.zip.sh
pasin,2017-06-08 16:15:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/07e98988e9f37d4d0c228feb5cb1cd13cf4b522c,07e98988e9f37d4d0c228feb5cb1cd13cf4b522c,Fixed typo in build_framework.sh
snej,2017-06-08 05:13:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d11f6390b6796fbebb06ae7e461f3f3b7291bc7e,d11f6390b6796fbebb06ae7e461f3f3b7291bc7e,Fixed the location of SelfSigned.cer in the Xcode project
snej,2017-06-08 00:45:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a99cfb9f5688826cad65e2c72730673e3ef6331,3a99cfb9f5688826cad65e2c72730673e3ef6331,"TLS: Implemented cert pinning and better error handling (API CHANGE)

* Added CBLReplicatorConfiguration.pinnedServerCertificate
* Implemented NSURLSession auth-challenge callback in CBLWebSocket,
  which currently handles SSL server cert checks.
* Added internal CBLTrustCheck, with code adapted from 1.x, that checks
  server certs.
* Improved mapping between C4 and NS errors.

Fixes #1772"
pasin,2017-06-06 02:04:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62736fb7769c69512d491a205ae63838a25deaea,62736fb7769c69512d491a205ae63838a25deaea,"Throw NSInternalInconsistencyException when operating on a close database

* Throw NSInternalInconsistencyException when operating on a close database.
* Enabling all failing tests in DatabaseTest.

#1766, #1727, #1724"
snej,2017-06-05 23:48:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0cce57ae9404ca5f4079dc45aa9f231db86e574,a0cce57ae9404ca5f4079dc45aa9f231db86e574,"Xcode 9 upgrade check (enabled some warnings, fixed a bug)

The address sanitizer found a use-after-free bug in CBLReplicator, from
using a stack-based C++ object after it'd been destructed. Fixed."
pasin,2017-06-02 23:32:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8bda8f4b200f00ee128e5daa01f22e8b512b6a95,8bda8f4b200f00ee128e5daa01f22e8b512b6a95,"Update LiteCore to pickup asInt() fix from Fleece

#1764"
pasin,2017-06-02 23:20:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f5b7c15b1eeeb3d1e62bc7d681ccfb9b28ed4bb,6f5b7c15b1eeeb3d1e62bc7d681ccfb9b28ed4bb,"Enable compaction test

LiteCore implemented the Attachment GC so the test became passed.

#1765"
snej,2017-06-02 21:33:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c773bbee1ca14f2ac7b060dc0c8700a3fde3d9df,c773bbee1ca14f2ac7b060dc0c8700a3fde3d9df,"Merge pull request #1657 from couchbase/feature/push_forbidden_error

Fixed #1649 : pusher stopped when getting a forbidden error"
snej,2017-06-01 20:04:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4be9e5beb3f1104911b263f376a1408efbba05b,a4be9e5beb3f1104911b263f376a1408efbba05b,"Merge pull request #1674 from couchbase/feature/fix-session-close-crash

Fixed #1572: race when setting session to nil in CBLRemoteSession"
snej,2017-06-01 17:36:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec31881e313b97e40dff451b4eef443d45117d7f,ec31881e313b97e40dff451b4eef443d45117d7f,"Updated LiteCore again, with a fix for a bad regression"
pasin,2017-06-01 17:15:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6fec91a863c8d22327ada375f6ef1144908a3c9c,6fec91a863c8d22327ada375f6ef1144908a3c9c,"Extract and unify the logic to handle upload revision error

* Extracted the logic to handle upload revision error in -uploadBulkDocs:, -uploadMultipartRevision: and -uploadJSONRevision: into a single method.
* Ensured to check if the error is NOT kCBLStatusUnauthorized when handle the error from -uploadBulkDocs:"
snej,2017-06-01 16:31:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3932bd1f765b020d6ef2989fe4381662af5b6596,3932bd1f765b020d6ef2989fe4381662af5b6596,"Updated LiteCore to pick up blob garbage-collection

Compacting the database now deletes unused blobs from disk."
pasin,2017-06-01 04:41:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f91814289d07db7306d3906998d0e81fc5e04d32,f91814289d07db7306d3906998d0e81fc5e04d32,Update LiteCore
pasin,2017-05-31 03:14:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86d6f0fa997a27b437819268bf974c9e65a4a40a,86d6f0fa997a27b437819268bf974c9e65a4a40a,"Change CBLDatabase.count type to uint64_t

* Change CBLDatabase.count type to uint64_t
* Implmented Database.count to Swift"
pasin,2017-05-31 02:10:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a0c29b85b0cd899418b5b26af0470cea5e5c0ea,6a0c29b85b0cd899418b5b26af0470cea5e5c0ea,Fix .continuos not getting copied
pasin,2017-05-30 23:15:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30aa57c92c58560a30db74252f0ec710e862bbec,30aa57c92c58560a30db74252f0ec710e862bbec,Fixed missing CBLReplicatorTarget symbol
pasin,2017-05-30 19:07:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c855bb4b4775ca84b199de1cf042f1dbddc7ea0e,c855bb4b4775ca84b199de1cf042f1dbddc7ea0e,"Fixed missing CBLReplicator+Internal.h

* Renamed CBLReplication+Internal.h to CBLReplicator+Internal.h.
* Updated reference accordingly"
pasin,2017-05-30 16:44:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/650c3411c601fed77610b5e6164b44b4e4359cc7,650c3411c601fed77610b5e6164b44b4e4359cc7,Update version number to 2.0DB008
pasin,2017-05-27 02:55:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d0f2b525f35c45679734602720243ba71f16cb9,2d0f2b525f35c45679734602720243ba71f16cb9,Fix build failure due to undefined symbols
pasin,2017-05-27 02:55:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d5b86d240328477d1cbc8ab79c115be5ff0ac2e,0d5b86d240328477d1cbc8ab79c115be5ff0ac2e,"Fix Document API doc

Removed obsolete comments."
pasin,2017-05-27 02:11:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/321c68c44661ad9309e2bac82ff34f82fcb5a8b5,321c68c44661ad9309e2bac82ff34f82fcb5a8b5,"Apply the Replicator API spec

* Applied the Replicator API spec for both Objective-C and Swift
* Two pending open API issues: https://github.com/couchbaselabs/couchbase-lite-apiv2/issues/101 and and https://github.com/couchbaselabs/couchbase-lite-apiv2/issues/102"
snej,2017-05-27 00:47:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d64637ca0504ccf3baba23652a0a1c62c2dcd865,d64637ca0504ccf3baba23652a0a1c62c2dcd865,Error code mappings. (Using new C4Error NetworkDomain.)
snej,2017-05-26 21:50:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7362bc0f3291dd0567424dbd27914817d0323d1,c7362bc0f3291dd0567424dbd27914817d0323d1,"CBLReplication: Added offline and retry support

* Replication will retry connecting with exponential backoff when certain
  transient network errors cause the underlying C4Replicator to fail.
* Continuous replication will retry when network status changes, if
  host appears to be unreachable or hostname can't be resolved."
pasin,2017-05-25 20:28:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f685829104a1765d2beeebdca630ea887a2e7ecd,f685829104a1765d2beeebdca630ea887a2e7ecd,"Optimize array by lazy copy data from fleece (#1767)

* Copied data from fleece when needed
* Bring array code closer to dictionary code"
snej,2017-05-25 19:04:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/477acdb355fb73e8dc1907a66dfa571d9b22d824,477acdb355fb73e8dc1907a66dfa571d9b22d824,"Xcode: Enable C++ Container Overflow Checks For Address Sanitizer

Turned on a new build setting that lets the Address Sanitizer range-
check calls to STL containers."
pasin,2017-05-25 18:35:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8268eda3df7e9e280b3d599b4b383da7d4b3d888,8268eda3df7e9e280b3d599b4b383da7d4b3d888,"Fixed build fails on 32 bit

Basically need to explicitly cast the integer value."
pasin,2017-05-25 18:34:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f35b423edf14c25cd7a6c19b599d25e8061028f,2f35b423edf14c25cd7a6c19b599d25e8061028f,"Fix doc obs not being free after db is closed or deleted

Fixed doc observers not being free after database is closed or deleted. This also causes the NotificationTests.testDocumentChange and NotificationTest.testAddSameChangeListeners to fail occasionally."
pasin,2017-05-25 18:31:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d3b46545629d660c543e65cd353e0d3fd36aae7,5d3b46545629d660c543e65cd353e0d3fd36aae7,"Use CompleteUntilFirstUserAuthentication as the default file protection

From https://www.apple.com/business/docs/iOS_Security_Guide.pdf, NSDataWritingFileProtectionCompleteUntilFirstUserAuthentication is the default for the App Data. So this commit uses NSDataWritingFileProtectionCompleteUntilFirstUserAuthentication as the default for CBLDatabaseConfiguration.fileProtection as well."
snej,2017-05-24 23:21:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/99c2ebd7352d0d4d83a3b024a68c89a18a37748d,99c2ebd7352d0d4d83a3b024a68c89a18a37748d,"Replication: Added HTTP Basic auth support

You can put the username and password into the CBLReplication options
property:
    repl.options = @{kCBLReplicationAuthOption:
         @{kCBLReplicationAuthUserName: user,
           kCBLReplicationAuthPassword: password}};
or you can hardcode them into the remote URL:
    blip://username:password@hostname..."
snej,2017-05-24 17:20:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3cc37a1f28928a942d6c4c931183e054338adf6c,3cc37a1f28928a942d6c4c931183e054338adf6c,Import Fleece.h before c4.h so that FLSlice and C4Slice will be unified
snej,2017-05-18 20:17:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09975514e3600f07beaa4ce181935b2562415cb3,09975514e3600f07beaa4ce181935b2562415cb3,CBLReplication now takes options dict and remembers response headers.
snej,2017-05-10 20:29:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f043d38f73d5cfcb86736fd89655c50c279d622f,f043d38f73d5cfcb86736fd89655c50c279d622f,Moved CBLWebSocket & CBLHTTPLogic here from LiteCore
pasin,2017-05-24 05:05:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60bc3d43082e33232cc62b10b46a60531ac23b38,60bc3d43082e33232cc62b10b46a60531ac23b38,"Declare Swift DatabaseChange in Notification.Name extension

* Followed the Swift source code, declare Swift DatabaseChange name in Notification.Name extension.
* Reorganized Swift files."
pasin,2017-05-24 00:39:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02b4e89351dcbe6bda113aa5b5a5c5242b018e8f,02b4e89351dcbe6bda113aa5b5a5c5242b018e8f,"Fix Swift DatabaseChangeNotification not posting when specifying database

Implemented DatabaseChangeNotification forwarding from objective-c otherwise listening to the notification with setting the database object doesn’t work."
pasin,2017-05-23 23:42:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/813edbbb17fcc7a63060d9326d98c123cb98d0bb,813edbbb17fcc7a63060d9326d98c123cb98d0bb,"Implement DocumentChangeNotification

* Implemented DocumentChangeNotification for both Objective-C and Swift.
* Added CBLDatabaseChange to hold change information and kept into kCBLDatabaseChangesUserInfoKey the UserInfo key."
pasin,2017-05-22 19:24:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/697f842448b85a7e892cad9e490dbaff29350108,697f842448b85a7e892cad9e490dbaff29350108,"Implement Database .count, contains(), and compact()

* Implemented Database .count, contains(), and compact() in both Objective-C and Swift.
* Fixed missing Database.config in Swift.
* Added Objective-C DatabaseTest.testCompact() but marked it as a failing test as currently the compact doesn’t remove unused attachments after all documents are deleted."
pasin,2017-05-22 18:16:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49f8eb7d97d837c3463168cb63255d1022ad11b4,49f8eb7d97d837c3463168cb63255d1022ad11b4,"Rename Dictionary.allKeys to Dictionary.keys

Renamed Dictionary.allKeys to Dictionary.keys and did small code cleanup."
pasin,2017-05-21 17:54:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8800208b05d7897f6ad50165aa67d79336201e78,8800208b05d7897f6ad50165aa67d79336201e78,"Unify Swift Dictionary and Array method names

* Made Swift Dictionary and Array method name same style.
* Made Swift GET accessor methods swift style, basically no get Java style.
* Renamed Dictionary.allKeys to Dictionary.keys."
pasin,2017-05-19 07:08:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f32f895afb106ea8d3e8bf6de0c24a418376ca5,9f32f895afb106ea8d3e8bf6de0c24a418376ca5,"Implement Dictionary.remove(key) for both Objective-C and Swift

* Set nil value for a key to the Dictionary will convert the nil value to NSNull
* Implemented  Dictionary.remove(key)"
pasin,2017-05-20 00:57:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/adc67d42690457e43307bffa40313c87d57e06fa,adc67d42690457e43307bffa40313c87d57e06fa,"Implement ConflictResolver in Swift

* Create ConflictResolver bridge between Objective-C and Swift
* Ported ConflictTest from Objective-C"
pasin,2017-05-19 01:07:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/902cba0975c6dab917a89fd7265689fd3d764a80,902cba0975c6dab917a89fd7265689fd3d764a80,"Fix QueryEnumerator implicit cast 64 bit int to 32 bit int

Made explicit casting."
pasin,2017-05-19 01:03:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e9057bce357be56147c30cd4da52322e1fb49417,e9057bce357be56147c30cd4da52322e1fb49417,"Implement DatabaseConfiguration in Swift

* Changed from DatabaseOptions to DatabaseConfiguration
* The real ConflictResolver wrapper is still pending"
pasin,2017-05-19 01:02:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d14b291241cbfbab81295fa6a2ee8dab63fb152c,d14b291241cbfbab81295fa6a2ee8dab63fb152c,"Fix MacOS unit test failure

* Not setting fileProtection in MacOs tests
* Explictly set DatabaseConfiguration.directory in MacOs Tests."
pasin,2017-05-18 21:56:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ba4cc6e40fcf46f41e94cf93c3c40c38d7b0a7dd,ba4cc6e40fcf46f41e94cf93c3c40c38d7b0a7dd,"Implement CBLDatabaseConfiguration

* Changed from CBLDatabaseOptions to CBLDatabaseConfiguration.
* CBLDatabaseConfiguration.directory returns the default directory by default."
snej,2017-05-19 00:18:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5fceb41a7eb8212888aba6a8b0f33ae8f8b388ff,5fceb41a7eb8212888aba6a8b0f33ae8f8b388ff,"2.0: LiveQuery (#1762)

* Added CBLQueryResultsArray, a lazy implementation of allObjects

The allObjects property of a query enumerator now returns a custom
CBLQueryResultsArray, which lazily creates query row or document objects
as they're requested.

* Implemented CBLLiveQuery (with unofficial API)

Limitation: It doesn't yet run the query on a background thread, so it
may block the UI. This can be fixed later after we've made the API
thread-safe.

* LiveQuery fixes & test improvements

* Behavior was wrong when the query didn't change (I forgot that
  c4query_refresh returns nil in this case)
* Added a unit test for this situation
* Make sure the error is nil when returning nil from -refresh: in the
  no-change case
* Removed -waitForRows and -queryOptionsChanged, both unnecessary
* Tweaked some comments"
pasin,2017-05-18 19:06:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebae6ce7995a5612d22147669349d65bb091ff7b,ebae6ce7995a5612d22147669349d65bb091ff7b,"Update ConflictResolver to the latest spec

Use mine/theirs/base instead of source/target/commonAncestor/operationType."
pasin,2017-05-18 19:05:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d2f6cc0a3a1281278d6fdabeb9b35c606e3e8ea,9d2f6cc0a3a1281278d6fdabeb9b35c606e3e8ea,"Minor fix to unit tests

* Fixed ArrayTest
* Fixed comment typos and"
pasin,2017-05-16 01:44:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7ccb9dd03d12eec424ad61ce9e3eb48b2cdd6707,7ccb9dd03d12eec424ad61ce9e3eb48b2cdd6707,Update version in podspec
pasin,2017-05-15 21:26:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28b5e111fafc2e71eda62f40f3021b7e10e99fc6,28b5e111fafc2e71eda62f40f3021b7e10e99fc6,"Update README

Update version to 2.0DB007"
pasin,2017-05-15 21:24:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36df2fb3c3863cb85c5bd2003a26f9cba083b216,36df2fb3c3863cb85c5bd2003a26f9cba083b216,"Update Swift Query API comment

Added documentation for explain()."
pasin,2017-05-15 21:20:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b2c31326f7c21edaee7f2661a69fe85c87b4cb80,b2c31326f7c21edaee7f2661a69fe85c87b4cb80,"Fixed Swift API comments

Moved API comments from non-public protocol to impl class, otherwise they will not be visible."
jamiltz,2017-05-15 21:06:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d0cc841457ab28b27d7aec1b852d2a5be9ec621,9d0cc841457ab28b27d7aec1b852d2a5be9ec621,add public explain() method to CBL Swift (#1756)
pasin,2017-05-15 19:12:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e2a2e10f6476c797a2100cf06783619a53d2f47,2e2a2e10f6476c797a2100cf06783619a53d2f47,Update the version number to 2.0DB007
pasin,2017-05-15 19:11:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1811a03a0c0ca59cf6e5e81700f785cb5ccc5ecf,1811a03a0c0ca59cf6e5e81700f785cb5ccc5ecf,"Update generate_api_docs script

The script didn’t work with the lastest version of the tool when generating the Objective-C. Manually setting the xcodebuild params works."
pasin,2017-05-15 17:52:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/90a5e639e17bc18df7c239e5f372b1f13b96b329,90a5e639e17bc18df7c239e5f372b1f13b96b329,Change mod to all scripts to make them executable
snej,2017-05-15 17:49:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bbe0ff175b5d3fdd698e6a77b1f9eb32af356e08,bbe0ff175b5d3fdd698e6a77b1f9eb32af356e08,"Revert ""Added the code-coverage scripts I wrote a few months ago""

Pasin had already added improved versions.

This reverts commit acd36493be7177cfdbad0d5e39d5d84515c3f2c6."
snej,2017-05-14 00:33:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2796aca597ae99af7737b04687f934471c801cf8,2796aca597ae99af7737b04687f934471c801cf8,"Query enumerator cleanup

* Created protocol CBLQueryInternal as a common base of CBLQuery and
  CBLPredicateQuery
* Removed CBLQueryResultSet, a near-copy of CBLQueryEnumerator
* Updated CBLQueryEnumerator to use id<CBLQueryInternal> instead of
  CBLPredicateQuery, so it can work either type of query
* Updated LiteCore"
pasin,2017-05-15 06:06:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f38d8c824763d86b690748afa837552cb2045007,f38d8c824763d86b690748afa837552cb2045007,"Implement Sequence in Swift DictionaryObject and ArrayObject

* Implemented Sequence protocol in Swift {ReadOnly}DictionaryObject and {ReadOnly}ArrayObject
* Added allKeys property back to CBL{ReadOnly}Dictionary in Objective-C
* Fixed CBLReadOnlyArray.mm fast enumeration bug
* Updated Unit Tests"
pasin,2017-05-14 06:02:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e480a242251d1e8e50c8f7763a366ada5b40406f,e480a242251d1e8e50c8f7763a366ada5b40406f,"Implement NSFastEnumeration to Document, Dictionary and Array objects

* Implemented NSFastEnumeration protocol to CBLReadOnlyDictionary, CBLDictionary, CBLReadOnlyArray, CBLArray, CBLReadOnlyDocument, and CBLDocument.
* Added DictionaryTest.testEnumeratingKeys and ArrayTest. testEnumeratingArray."
pasin,2017-05-13 08:28:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7e713beca6d5ba22f13fa3b9c42ce5f48d5344a7,7e713beca6d5ba22f13fa3b9c42ce5f48d5344a7,Update Objective-C and Swift API comment docs
pasin,2017-05-13 05:40:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e7d66227a599573997b186c960994c306055cb9,1e7d66227a599573997b186c960994c306055cb9,"Fix bug setting wrong listener object in CBLData

Fixed copy & paste bug that self doesn’t get replaced with listener."
pasin,2017-05-13 05:16:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/944e1049a2372d33be3958dda8f0365d520c891d,944e1049a2372d33be3958dda8f0365d520c891d,"Fix missing subscript implementation in ArrayObject

Fixed missing subscript implementation."
pasin,2017-05-13 04:25:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18d5fda2073dbc5e6909125186ab97b30821dca7,18d5fda2073dbc5e6909125186ab97b30821dca7,"Fix DatabaseTest and FragmentTest

* Fixed DatabaseTest.failingTestPurgeDoc.
* Fixed FragmentTest.testNonExistingArrayFragmentSetObject"
snej,2017-05-13 02:12:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ecc23cdd054a25f4861fd83f522e0dba5783e2c,1ecc23cdd054a25f4861fd83f522e0dba5783e2c,"Fixed compile errors in tests

Regression from previous commit"
pasin,2017-05-13 00:04:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc71460c9ea1ff405839d3e5e1e1c17a13d415ac,fc71460c9ea1ff405839d3e5e1e1c17a13d415ac,"Fix Swift Fragment and port more unit tests

* Fixed Swift Fragment API
* Fixed CBLQueryEnumerator symbol missing
* Ported FragmentTest"
snej,2017-05-12 21:54:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a9e925145fe3cf4d8b1cb3ead6da252d4bb91d5,8a9e925145fe3cf4d8b1cb3ead6da252d4bb91d5,Updated LiteCore logging API
pasin,2017-05-12 03:02:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/830da8e527ff440bf8d7d754c04fc3583fb8995e,830da8e527ff440bf8d7d754c04fc3583fb8995e,"Implement the new document objects in Swift

* Implemented the new document objects in Swift.
* Updated unit tests."
pasin,2017-05-12 03:02:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5133c74972487432425b99aa6c6060132b28beac,5133c74972487432425b99aa6c6060132b28beac,"Fix DocumentFragment subscript when the document is nil

As _doc could be nil, make sure to return the empty Fragment object if that is the case."
snej,2017-05-12 00:08:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c6087aaaad6ceb3877117e5f65b37553be59991c,c6087aaaad6ceb3877117e5f65b37553be59991c,Use XCTAssertThrowsSpecificNamed() in tests that throw exceptions.
snej,2017-05-12 00:07:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10a13803248245f1dcc34f21c53f02ee8b97f2fb,10a13803248245f1dcc34f21c53f02ee8b97f2fb,"Overhaul of CBLQueryRow value accessor implementation (small API change)

Added CBLQueryRow.valueCount property.

I changed the LiteCore API to make accessing query row column values a
lot more efficient, and also added preliminary support for getting the
names of columns (to support by-name lookup in CBL.)

Moved CBLQueryEnumerator into its own source file."
pasin,2017-05-11 17:59:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6385e0a412fd7f1b4de4d6000a98bcec04a565c,a6385e0a412fd7f1b4de4d6000a98bcec04a565c,"Fix a unit test failed on iOS

* Fixed Database.testDeleteWithDefaultDirDB test failed."
pasin,2017-05-11 17:52:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f5e7721dfc9076dc8330159f2425b562bab6e35,8f5e7721dfc9076dc8330159f2425b562bab6e35,"Fix unit tests failed on Mac

* When running the unit tests on Mac, there is no bundle ID. If the database is created with the default configuration, the default directory is contructed using the bundle ID; this means that the default directory for Mac unit tests cannot be resolved.
* Make sure to use the based -openDBNamed:error: method to create a new database for testing. The method will set the database directory to temp so that will be working for both iOS and MacOS unit tests.
* Disabled some unit tests that test default directory on Mac."
pasin,2017-05-08 05:35:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf343b3f790cf86d1c4bfdfedcebd88115720f33,bf343b3f790cf86d1c4bfdfedcebd88115720f33,"Replace Subdocument with Dictionary

* Removed suboducument and use dictionary instead.
* Update unit tests."
snej,2017-05-11 16:28:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/83380772643b1c2693c6be1ef4e4af3de6f88c33,83380772643b1c2693c6be1ef4e4af3de6f88c33,"CBLDatabase.documentCount should explicitly return 64-bit int

A database can contain more than 4 billion documents, so NSUInteger
is the wrong property type (for 32-bit builds at least.)"
snej,2017-05-10 21:42:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f97c024c4f74ee738a0782f2f403d2fc92a258a0,f97c024c4f74ee738a0782f2f403d2fc92a258a0,"Updated LiteCore (32-bit build fixes; replicator bug fix)

There were compiler warnings/errors building for 32-bit, which broke
the iOS build.
Issue couchbase/couchbase-lite-core#113 caused the replicator to go into
a very nasty thread-spawning infinite loop if the server closed the
socket before sending an HTTP response. Now fixed."
pasin,2017-05-11 16:05:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c762a7149d19c4968f4d9e4173cd5c881eab37ae,c762a7149d19c4968f4d9e4173cd5c881eab37ae,"Implement new objects (#1742)

* Implemented Document, Subdocument, Array, ReadOnlyDocument, ReadOnlySubdocument, ReadOnlyArray API.
* Removed document cache.
* Removed document change notification from the Document; Will be implemented in Database instead).
* Fixed #1730, #1734, #1752"
snej,2017-05-08 17:43:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/acd36493be7177cfdbad0d5e39d5d84515c3f2c6,acd36493be7177cfdbad0d5e39d5d84515c3f2c6,Added the code-coverage scripts I wrote a few months ago
snej,2017-05-06 07:31:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/83b7d28be7f33ceb8c01953ad5e4c9a24e243d2c,83b7d28be7f33ceb8c01953ad5e4c9a24e243d2c,"Updated for c4log API changes / Using new lightweight logging in tests

The new logging is not yet enabled in normal use, just in the unit
tests."
borrrden,2017-05-02 01:32:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a5851e159aa9ef2106ab11185f53a7ccf3cafc0,7a5851e159aa9ef2106ab11185f53a7ccf3cafc0,Fix for 32-bit device testing
snej,2017-05-01 21:31:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b3246105ee6d1b97a7209f55d88aed66543318e2,b3246105ee6d1b97a7209f55d88aed66543318e2,"Prevent bad optimization of SQLite queries for view indexing & changes (#1738)

I’ve also added explicit JOIN syntax in a few places, since it’s said
to give the optimizer more insight into the meaning of the query.

I also removed several unnecessary indexes, where SQLite already
indexes the column in question to implement a UNIQUE constraint. This
was recommended by SQLite gurus to avoid confusing the optimizer.

Fixes #1737"
snej,2017-04-28 23:00:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bca24b48dc3f8694cb92fb4e6cb3450b99b5a43d,bca24b48dc3f8694cb92fb4e6cb3450b99b5a43d,Updated CBForest (to fix build error in Xcode 8.3)
snej,2017-04-27 21:09:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/611ab6fa6372e35eca14ce6e3925f5959389f97c,611ab6fa6372e35eca14ce6e3925f5959389f97c,Update LiteCore again
snej,2017-04-27 20:18:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6c49818b4d7a07b803af5b3b24730b0207bba15,e6c49818b4d7a07b803af5b3b24730b0207bba15,"Fixed leaks in test cases and added a check for C4 object leaks

* The -tearDown method now checks c4_getObjectCount() to make sure no
  LiteCore objects are being leaked. It waits up to 1 second for the
  count to settle down, since the replication tests have C4 objects on
  background threads that may not be freed at the moment the foreground
  test finishes.
* Getting the above check to pass required wrapping some of the setup
  and teardown code in autorelease blocks to ensure that the objects
  don’t get into the outer autorelease pool; if they do, they won’t be
  dealloced by the time the outer tearDown method runs.
* Fixed some C4Document leaks in DocumentTest."
snej,2017-04-27 15:39:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/630c7041da8b8a34bbac015096b6a8637327829d,630c7041da8b8a34bbac015096b6a8637327829d,"Clear _allDocsQuery before closing db, so SQLite db will close

Otherwise LiteCore’s SQLite database won’t close when asked to, because
the query object is holding onto a live sqlite3_stmt.
The db does close later on when the CBLDatabase is dealloced, but the
delayed close causes problems in unit tests because the database dir
can be deleted before the db has closed, which triggers a nasty warning
from SQLite.
I also added a check in CBLTestCase that no C4 objects have been leaked,
and a redundant deletion of the database during teardown to trigger
that warning earlier, during the test that caused the problem."
snej,2017-04-27 15:36:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d17b51752b7c564c682b444023e7b713bdd9c1f,0d17b51752b7c564c682b444023e7b713bdd9c1f,Update to latest LiteCore
pasin,2017-04-25 18:22:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f245f7edb66a9247b7a18fb647e0d45b7392781,7f245f7edb66a9247b7a18fb647e0d45b7392781,"Removed memory-mapped sqlite config

Using memory-mapped has a potential to cuase the database corruption issue in mac os.

#1482"
monowerker,2017-04-21 21:42:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c369fad4f9414a48049452080bdc5e8bb6d44410,c369fad4f9414a48049452080bdc5e8bb6d44410,"Update README.md (#1710)

Fix typo"
pasin,2017-04-18 04:58:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/798f6925ac468619199aa6c3a5ffd0c0fc265456,798f6925ac468619199aa6c3a5ffd0c0fc265456,Update version number to 2.0DB005
snej,2017-04-15 20:17:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a3aae55ea6b6cb78e2e916c32093b83df0904aad,a3aae55ea6b6cb78e2e916c32093b83df0904aad,Updated LiteCore: Automatic 1.x database upgrade now supported.
snej,2017-04-14 20:58:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a45ca09796a75c20d9dbb301640b486472c9079,6a45ca09796a75c20d9dbb301640b486472c9079,"Updated LiteCore, and moved Products to the bottom in the file navigator"
snej,2017-04-12 17:18:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f6742b4da8951c4b624fcc22e4e133bc0531920,9f6742b4da8951c4b624fcc22e4e133bc0531920,Updated LiteCore to latest
snej,2017-04-12 17:17:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74dc47d533f66e4129ba58d9e9788095f5af6d0c,74dc47d533f66e4129ba58d9e9788095f5af6d0c,Xcode: Dismiss ‘Update settings’ warning for Xcode 8.3
snej,2017-04-09 01:58:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/37b961cff4d140b8d25633c8f5044c4c30151db5,37b961cff4d140b8d25633c8f5044c4c30151db5,"Fixed Swift Replication.delegate

I had to add a non-weak `delegateBridge` property to CBLReplication,
for the Swift binding to use to prevent its DelegateBridge instance from
being dealloced."
snej,2017-04-03 23:54:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72e0e9ae5da2a921211e08740542da8fe71563b1,72e0e9ae5da2a921211e08740542da8fe71563b1,Updated LiteCore -- attachment replication now implemented.
pasin,2017-04-07 01:21:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d097ee47218187602794689091251188198f7ace,d097ee47218187602794689091251188198f7ace,"Reorganize code in CBLDatabase and CBLDocument

* Moved public api methods to stay together
* Moved private methods to stay together"
pasin,2017-04-05 16:44:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a429e90489d88c04f9c0085654710406f4eee811,a429e90489d88c04f9c0085654710406f4eee811,"Add unit tests to CBL Objc Test - iOS target

Add unit tests to `CBL Objc Test - iOS target` for testing on the real devices."
pasin,2017-04-05 03:41:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f76a109b63c02d893759c3c1f53522dc769cf72,4f76a109b63c02d893759c3c1f53522dc769cf72,"Refactor ObjC CBLQuery to construct JSON Query directly (#1697)

* Make CBLQuery directly construct JSON Query.
* Enable test where like and regex match which are passed now.

#1667 #1668"
pasin,2017-04-04 07:08:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2d0ddbcd8ecdaf1dbec973a585cc003a7a534f3,e2d0ddbcd8ecdaf1dbec973a585cc003a7a534f3,"Fixed Replicator header search path and imports

* Per change to do static link with Lite Core, need to add header search path for Replicators.
* Change from importing the replicator umbrella header which belongs to CouchbaseLiteReplicator framework to importing header files directly."
pasin,2017-04-04 02:39:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/52db0fe7e4493bcc1453df0264879c860a7ddca0,52db0fe7e4493bcc1453df0264879c860a7ddca0,Make ObjC and Swift static link to LiteCore
tleyden,2017-04-03 20:04:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea68b3da1fcd2b00ecb16a3edacc7b438c5a2335,ea68b3da1fcd2b00ecb16a3edacc7b438c5a2335,Update CONTRIBUTING.md (#1694)
pasin,2017-04-02 06:44:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66f082d2651e511ffe41d1022b16841b5655956a,66f082d2651e511ffe41d1022b16841b5655956a,"Add generage_coverage.sh script

generage_coverage.sh is for generating code coverage."
pasin,2017-03-31 20:45:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64e7debe845384938f141a11d9e99ba43d2b6780,64e7debe845384938f141a11d9e99ba43d2b6780,"Update build and generate release script

* Updated build_framework.sh to disable code signing from the xcodebuild command.
* Update generate_release_zip.sh to generate documentation."
pasin,2017-03-31 20:29:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa1a2516ffe25f1971f91724d7ab2417fbb648bc,fa1a2516ffe25f1971f91724d7ab2417fbb648bc,Updated LiteCore submodule
pasin,2017-03-31 20:28:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b87ec43f56a73413e2e3d51b2f0656324fd29536,b87ec43f56a73413e2e3d51b2f0656324fd29536,Make sure code signing is disable by default
pasin,2017-03-31 19:48:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01e2d56a72d3c08ef1d00b1eb08505aab3adec4b,01e2d56a72d3c08ef1d00b1eb08505aab3adec4b,Removed development team from Project.xcconfig
pasin,2017-03-31 17:44:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b9fa386d3c68665a86034945d33974652ec6ac0f,b9fa386d3c68665a86034945d33974652ec6ac0f,Update version number to 2.0DB004
pasin,2017-03-31 17:36:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b6166eb94bc0a2899506b52d98199490d875d5f,3b6166eb94bc0a2899506b52d98199490d875d5f,"Added a script for generating the API docs

The script generates both objc and swift API doc.

#1651"
pasin,2017-03-31 17:21:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fead9cd3238a04230868cb27306d8bfad210481c,fead9cd3238a04230868cb27306d8bfad210481c,"Inline Swift Property Accessors with the Spec (#1690)

* Renamed property() and setProperty(key, value) to getValue() and setValue(key, value).
* Made setValue(key, value) chainable API
* Added the missing CBLProperties’s -blobForKey: method."
pasin,2017-03-30 23:10:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/634ae6fd6a815463c262a5c2bb20adb8c3f1d57b,634ae6fd6a815463c262a5c2bb20adb8c3f1d57b,"Misc fixes to ObjC and Swift Query API

* Fixed #1688, wrong expression validation
* Fixed selectDistinct method name typos.
* Improved documentation"
snej,2017-03-29 23:30:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3134f833050284ffd66655ac8ec2d60cffea028,e3134f833050284ffd66655ac8ec2d60cffea028,Swift Replication class
snej,2017-03-29 03:42:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e667c902e2ec77fdab3a09381a3c5d8870c03f2,3e667c902e2ec77fdab3a09381a3c5d8870c03f2,Local-to-local replication support.
snej,2017-03-28 17:37:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f6d90f9b58251d23359be1f10aac303e4ca2f9f,6f6d90f9b58251d23359be1f10aac303e4ca2f9f,Added kCBLReplicationStatusChangeNotification / Added missing export
snej,2017-03-27 23:46:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/008df300a061c71bf9431e39c49b3b6b95809bb7,008df300a061c71bf9431e39c49b3b6b95809bb7,Replicator progress (percentage) information
snej,2017-03-24 22:44:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d293f608ff7fc91852b2e3d1b2c19093957fab65,d293f608ff7fc91852b2e3d1b2c19093957fab65,"Replicator updates, and iOS replicator support.

Replicator now builds & runs on iOS devices!"
snej,2017-03-14 01:52:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f59035e30a21d772790cfe3f981787f66601e249,f59035e30a21d772790cfe3f981787f66601e249,Initial CBLReplication implementation (not official API)
pasin,2017-03-24 00:36:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76b046e89311e6ef36b6aee2ed94d0244de4bed9,76b046e89311e6ef36b6aee2ed94d0244de4bed9,Update REAME
pasin,2017-03-23 23:56:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e41189f5955bac03488855211165d300dffc1d68,e41189f5955bac03488855211165d300dffc1d68,Update documentation
pasin,2017-03-23 20:57:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9cf393bea125748f5c6fadc343c2ef221294cf2a,9cf393bea125748f5c6fadc343c2ef221294cf2a,Update documentation and README
pasin,2017-03-23 18:42:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2a0e0608fddae405283a709b77b679e5fa17db7,c2a0e0608fddae405283a709b77b679e5fa17db7,"Fixed IN and NOT IN Query Expression

#1680, #1671"
pasin,2017-03-23 02:15:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44a20c84e33e00912f0564858ff99d1992a5918b,44a20c84e33e00912f0564858ff99d1992a5918b,"Implement Swift Cross Platform Query API (#1682)

* Implemented Swift Cross Platform Query API
* Renamed Query to PredicateQuery
* Made QueryRow as class instead of Struct
* Added FullTextQueryRow inherited from QueryRow
* Added orderByArray: (NSArray<CBLQueryOrderBy*>*)order to CBLQueryOrderBy as the variadic version cannot be seen in the Swift binding
* Varios small cleanup to the Objective-C Query API
#1680"
pasin,2017-03-20 16:13:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27a9fc587130b6ce9c604fb3530c073de45b93be,27a9fc587130b6ce9c604fb3530c073de45b93be,Update podspec version to 2.0DB003
pasin,2017-03-17 23:00:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f806348cb49957fa15ade428c2e9f36cd6be0260,f806348cb49957fa15ade428c2e9f36cd6be0260,"Fixed race when setting session to nil in CBLRemoteSession

_session can be also accessed from the database thread (e.g. close method). It is more thread safe to set the _session to nil on the database thread in the doAsync: block.

#1572"
pasin,2017-03-17 00:13:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c4aac21a9bbfdc96b7939dcbdbe89fb2d9b7035,8c4aac21a9bbfdc96b7939dcbdbe89fb2d9b7035,"Fixed race causing the change tracker to start twice

The issue couldn’t reproduce but here is what is speculated to happen:

There could be a race scenario between stopping the fetch remote checkpoint request when putting the replicator offine and the request itself is completed. If stopping the request is too late, the onComplete will be called in the next runloop, and that will cause a change tracker to start in offline mode.

To prevent above scenario, when the request is completed, check whether the replicator is still online or not. If the replicator is not online, just finish the request and return.

#1655"
pasin,2017-03-17 21:06:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bb369a1ddfd834f11e2ab2a5ef4ae9d7d335e15,2bb369a1ddfd834f11e2ab2a5ef4ae9d7d335e15,"Fixed logging crash in CBLRemoteSession

The crash happened due to a race condition between releasing internal CBLRemoteRequest on the database thread and logging on the session thread. Moving the log before callking the task block should fix the issue."
pasin,2017-03-17 17:54:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/899e5d8b30ca906c6b95423c739b99967fd86f31,899e5d8b30ca906c6b95423c739b99967fd86f31,Set version to 2.0DB003
pasin,2017-03-17 17:46:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f043c105f5676ce801c5a1dcd16404a23a07704e,f043c105f5676ce801c5a1dcd16404a23a07704e,Update LiteCore submodule
pasin,2017-03-17 17:33:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d0747909b3c7bd57d19d7e615475871c4935a1d,6d0747909b3c7bd57d19d7e615475871c4935a1d,"Fixed #1659: Implement Cross Platform Query API (#1672)

Implemented Cross Platform Query API.

Renamed CBLQuery to CBLPredicateQuery.

#1659"
pasin,2017-03-13 20:53:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebf99cbbdbb20aca40197c588ace643763d74a8d,ebf99cbbdbb20aca40197c588ace643763d74a8d,"Fixed CouchbaseLiteSwift using error

* Made CBLJSONEncoding protocol definded in its own header.
* CBLSubdocument+Internal includes CBLJSONEncoding.h instead of CBLInternal.h which has non-module elements defined."
snej,2017-03-10 22:37:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e09e3a7258a328e33237cf55b44f80c800206b3,6e09e3a7258a328e33237cf55b44f80c800206b3,"Merge pull request #1552 from couchbase/feature/change_tracker_timeout

Fixed #1551 Implement timeout in ChangeTracker for longpoll and websocket mode"
pasin,2017-03-10 16:30:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/07dc8e6aa06c7252b5adbc8f16772c94ab354e7f,07dc8e6aa06c7252b5adbc8f16772c94ab354e7f,Update LiteCore submodule
borrrden,2017-03-10 07:00:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/26d8051c99e925fb8bdbaddea47170da88f1aa77,26d8051c99e925fb8bdbaddea47170da88f1aa77,"Update SubdocumentTest.m

Fix test typo"
pasin,2017-03-10 05:17:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c3fbbb051fa9dda63a0c55afaaf60493d625ba1,4c3fbbb051fa9dda63a0c55afaaf60493d625ba1,"Merge pull request #1658 from thertzelle/master

Changing the protocol scheme from git to https for better support"
snej,2017-03-09 00:34:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e3bdea3731745b32a1ee181b392d170ef6db4b9,4e3bdea3731745b32a1ee181b392d170ef6db4b9,Removed map/reduce views from LiteCore.
pasin,2017-03-09 00:30:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7cf40e341976f890eaa1d4299ed01ad1cc2b326d,7cf40e341976f890eaa1d4299ed01ad1cc2b326d,"Fixed pusher stopped when getting forbidden error

Not treating 403 or forbidden error as an error when uploading multipart or non-multipart revision. This is inline with uploading bulk docs.

#1649"
snej,2017-03-03 23:46:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9052411048d8fa017961f9efdb7f03d360e97e0,f9052411048d8fa017961f9efdb7f03d360e97e0,"Updated to latest LiteCore/Fleece

* Fleece API for encoding Obj-C objects changed
* Updated call to c4dbobs_getChanges() because its API changed"
pasin,2017-03-07 19:26:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/90ff56855d1d569088f4bfde6a740ba7f6620fb7,90ff56855d1d569088f4bfde6a740ba7f6620fb7,"Fix changing file protection level by skipping non database files

Users could set the dir that also contains non database files such as temp or app group directory. So when chagning the file protections, we should skip non database files.

#1622"
pasin,2017-03-04 01:47:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/700e48ae2231e06daf10b075280d9f5a47dd80e4,700e48ae2231e06daf10b075280d9f5a47dd80e4,"Add a script to generate the release zip files

* Added Scripts/generate_release_zip.sh
* Added Scripts/Support/License/LICENSE_*.txt for release.
* Added CBL_VERSION_STRING in Xcode project file so that the version string can be set from the generate_release_zip.sh script.
* Adjusted platform output folder name and modified podspec accordingly

#1650"
pasin,2017-03-03 07:28:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23159538c39de2527e2bcef424887f41c95d6c7a,23159538c39de2527e2bcef424887f41c95d6c7a,"Fix bugs related to Subdocument and Blob

* Fixed Subdocument bug when replacing with date value in document.properties.
* Fixed CBLBlob detection in CBLDocument.
* Added more unit tests.

#1626"
pasin,2017-03-02 22:08:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e345bc1b51007b203a9da503c51644e70a5d621,2e345bc1b51007b203a9da503c51644e70a5d621,"Make .swiftDocument and .swiftSubdocument private property

Instead of using runtime association, make .swiftDocument and .swiftSuboducument private property."
pasin,2017-03-02 02:51:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/980422dc27899cbdd9f2973922845030a8cf2c64,980422dc27899cbdd9f2973922845030a8cf2c64,"Update version in Info.plist and cleanup project settings

* Update version in Info.plist to 2.0DB2
* Cleanup project settings
* Minor update to Scripts/build_framework.sh"
pasin,2017-03-02 01:48:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81895dc8f201f6adaae8abbf16b09eacac8a89f4,81895dc8f201f6adaae8abbf16b09eacac8a89f4,Fixed CBL Swift Test’s Info.plist is missing
pasin,2017-03-01 21:15:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3511741f12b7346a68de5deba39fffa1703a70ed,3511741f12b7346a68de5deba39fffa1703a70ed,"Fixed simulator swift modules not being copied when making FAT framework

When making Swift FAT framework, also copying all of the Swift modules from all sub frameworks."
pasin,2017-03-01 19:50:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6ac1070c9ebc441f26420c390ca43869c6ed6301,6ac1070c9ebc441f26420c390ca43869c6ed6301,Added message when preparing framework for Cocoapods
pasin,2017-03-01 03:11:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9751b0c8a29c27ef45304723027003a09c992fcf,9751b0c8a29c27ef45304723027003a09c992fcf,"Added CouchbaseLiteSwift.podspec

Added CouchbaseLiteSwift.podspec for CouchbaseLiteSwift.framework.

#1625"
pasin,2017-03-01 03:10:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/17452e356f7b16a9e97c612bc2a5ff80ac1b3c65,17452e356f7b16a9e97c612bc2a5ff80ac1b3c65,Updated CouchbaseLite podspec version to 2.0DB2
pasin,2017-03-01 02:52:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/456343f6331ea94c61f1f2e691b750ce8c60b254,456343f6331ea94c61f1f2e691b750ce8c60b254,"Merge pull request #1645 from couchbase/feature/2.0-build-script

Feature/2.0 build script"
pasin,2017-03-01 00:06:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2e855be0dbf57f2258eea379cab975c054323b0,c2e855be0dbf57f2258eea379cab975c054323b0,"Modify podspec to pre-built frameworks

Instead of specifying all souce codes and headers, use prepare_command to pre-build frameworks from xcode scheme and use them as vendored_framewors."
pasin,2017-02-28 04:23:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/165015a9573bd65d9d31e8457bb1257f61b5a05a,165015a9573bd65d9d31e8457bb1257f61b5a05a,"Create script for building FAT framework

Created Scripts/build_framework.sh for building FAT framework per scheme and platform."
pasin,2017-02-27 20:02:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c634e0fb4fab5c967d21d1606431d655bbac551e,c634e0fb4fab5c967d21d1606431d655bbac551e,"Moved CouchbaseLiteSwiftTests/Info.plist

Moved from CouchbaseLiteSwiftTests/Info.plist to Swift/Tests/Info.plist."
pasin,2017-02-27 19:56:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/79055a61381130804d8b4b47739b18fd1c37d8c7,79055a61381130804d8b4b47739b18fd1c37d8c7,"Merge pull request #1644 from couchbase/feature/2.0-swift-target

Reconfigure CBL Swift to link with LiteCore and use ObjC codes"
pasin,2017-02-27 19:55:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7d0b42904357a10af3e755c3ed9f1dd20b25ab7b,7d0b42904357a10af3e755c3ed9f1dd20b25ab7b,"Reconfigure CBL Swift to link with LiteCore and use ObjC codes

Instead of depending on CBL ObjC target and dynamically linking with CouchbaseLite.framework, linking with LinkCore and using Objective-C / C codes directly. In the future, when Objective-C codes getting bigger, we could create CBL ObjC Static target and link with it instead.

#1640 #1642 #1643"
pasin,2017-02-24 06:21:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4f6a193bde747013abc5573932c7b68301088d2,f4f6a193bde747013abc5573932c7b68301088d2,"Fixed CBL ObjC build warning about undefined symbol

CBLConflictResolver has only protocol defined without impl. Therefore, remove .objc_class_name_CBLConflictResolver from CouchbaseLite.exp."
pasin,2017-02-24 01:47:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ed2949cd163a6101b7b7d6db874bcbed0a89835,0ed2949cd163a6101b7b7d6db874bcbed0a89835,"Fixed cocoapod build error and warnings

* Updated MYUtilities to the latest
* Added ExceptionUtils.h,m
* Fixed warning in CBLProperties.mm"
snej,2017-02-24 00:03:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f4a1d6cbae77efbb632523868e4063260c73288,5f4a1d6cbae77efbb632523868e4063260c73288,"Merge pull request #1636 from couchbase/feature/2.0-swift-subdoc

Fixed #1624: Implement Swift Subdocument"
pasin,2017-02-23 23:07:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/958afb758bd5e8a0cac66f12c6295c5cba5d910f,958afb758bd5e8a0cac66f12c6295c5cba5d910f,Correct version in CouchbaseLite.podspec
pasin,2017-02-23 00:57:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cffd4a28757732a26f22e8e71b2932ad1042d69f,cffd4a28757732a26f22e8e71b2932ad1042d69f,"Add Swift subdocument unit tests and fix bugs

* Added Swfit SubdocumentTest ported from the ObjC version.
* Made Subdocument implement NSCopying.
* Fixed bugs in Properties.swift"
pasin,2017-02-18 21:32:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8ed76023fd385344938e8c8ff31adb702af3162,a8ed76023fd385344938e8c8ff31adb702af3162,"Implement Swift Subdocument

* Implemented Swift Subdocument by wrapping CBLSubdocument.
* Swift Subdocument is weakly cached inside CBLSubdocument. When getting the Swift Subdocument, trying to get it from the CBLSubdocument impl first before creating it."
pasin,2017-02-18 21:30:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5eaa4603f8edb0e3d0d8aa71e89392ff2f1635bc,5eaa4603f8edb0e3d0d8aa71e89392ff2f1635bc,"Cache Swift’s Document in CBLDocument

* Extended CBLDocument by adding the swiftDocument property.
* Cached Swift’s Document in CBLDocument impl when initializing the object.
* When getting the Swift’s Document by ID, return the object from the CBLDocument impl if it’s not nil."
pasin,2017-02-23 01:20:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7d8818c2594c06efcf8439aaa31d834f89a09130,7d8818c2594c06efcf8439aaa31d834f89a09130,"Cleanup Objective-C unit tests

* In DocumentTest and SubdocumentTest, when reopen the database, also reget the doc1.

* Cleanup Objective-C unit tests."
pasin,2017-02-18 19:47:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c90620b3409d97ee35508367ac6b8aae4ee70522,c90620b3409d97ee35508367ac6b8aae4ee70522,"Make CBLSubdocument’s -exists a property

* Made CBLSubdocument’s -exists a property instead of a method.
* Updated unit tests."
pasin,2017-02-18 02:13:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25f23bf25ca38364004df4e31751bdd9a9af68b7,25f23bf25ca38364004df4e31751bdd9a9af68b7,"Fixed Swift unit test failures

* Temporarily return CBLSubdocument for Swift Dictionary.
* Added CBLSubdocument.h to CBL Swift target’s public header.
* Fixed CBLSubdocument Subscripts Swift bridging.
* Fixed LD_RUNPATH_SEARCH_PATHS on CBL Swift Tests.
* Removed ALWAYS_EMBED_SWIFT_STANDARD_LIBRARIES=YES from CBL Swift Tests."
pasin,2017-02-18 00:39:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/edbbcf3d4a0890d185c10aba10147741b3b11753,edbbcf3d4a0890d185c10aba10147741b3b11753,Fixed Unit Test’s Setup error when deleting non existing folder
pasin,2017-02-18 00:26:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f7ac05dda4871ee9ad5cb17d31211563b4924f4f,f7ac05dda4871ee9ad5cb17d31211563b4924f4f,"In Unit Test’s setup, delete CouchbaseLite folder

Doing hard cleanup by deleting the whole CouchbaseLite folder."
borrrden,2017-02-18 00:08:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6e7a6e31404a660a7a0205e2c14c9991e494820,b6e7a6e31404a660a7a0205e2c14c9991e494820,Added schemes needed for Swift CI
pasin,2017-02-17 23:23:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb1b3abd8d56fa3bea7c2c8a7426764b78d6e818,eb1b3abd8d56fa3bea7c2c8a7426764b78d6e818,Cleanup Subdocument and Properties per code review
snej,2017-02-17 21:25:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e5229a9097bd86941057116bdaa63a4b61ac2ebe,e5229a9097bd86941057116bdaa63a4b61ac2ebe,"Merge pull request #1619 from couchbase/feature/2.0-subdoc

Implement subdocument"
pasin,2017-02-17 21:20:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8639d0249f7289befbfce0cd20a40f0d6cee504,a8639d0249f7289befbfce0cd20a40f0d6cee504,"Fix property accessors bugs when properties are removed

If value from _properties is nil, the property might be removed so need to check if the object has changes or not as well."
pasin,2017-02-17 19:52:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05977be0b6d778c256f3ba45548b43f08da2ee75,05977be0b6d778c256f3ba45548b43f08da2ee75,"Set custom user-agent to OpenIDController+UIKit’s webview

This is a workaround for #1621 that Google OIDC doesn't allow OAuth request by using an embedded webview."
pasin,2017-02-13 14:48:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/83f35c30b05a8f06906e02ebeb2e9890a99a9ea0,83f35c30b05a8f06906e02ebeb2e9890a99a9ea0,"Implement subdocument

* When getting a property value that the raw value is Dictionary type, the value will be converted to Subdocument.

* When getting .properties, all dictionary values will be converted to Subdocument.

* By default, setting a Subdocument property will be by reference. However if the Subdocument has already been set to a key, the value of the Subdocument will be copied instead.

* Subdocument will be invalidated when the property doesn’t exist any more or the property value has been changed to non dictionary data. When the subdocument is validated, current implementation will set its parent, root, and properties to null value. The changesKeys and flag will be reset as well.

*  The Subdocument objects in an array could be re-ordered. However if the underlining dictionary are changed, the changes will be mapped to the Subdocuments in the array by index. See SubdocumentTest’s testSubdocumentArray as an example."
snej,2017-02-13 02:09:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92195607576e6f77ad41f1d7fadb0a48e2693780,92195607576e6f77ad41f1d7fadb0a48e2693780,Improved Swift Query API
snej,2017-02-11 01:54:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05c7daa1181a1b7f8411cbadcc8f94aec503a87b,05c7daa1181a1b7f8411cbadcc8f94aec503a87b,Swift: Added preliminary query API
snej,2017-02-10 23:26:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa9244f6a285e80ad97fa1e4a25f3ecc03a488e9,aa9244f6a285e80ad97fa1e4a25f3ecc03a488e9,"Swift API improvements, and initial unit tests"
snej,2017-02-10 23:24:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/97eced0f9e280cbea024cb94ddc9585e49afde82,97eced0f9e280cbea024cb94ddc9585e49afde82,"CBLBlob initializers that can’t fail don’t need NSError** parameters

And the one that takes a file URL needs to handle failure to create the
NSInputStream."
snej,2017-02-10 05:55:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3dc5f0502e22899e1c59cd27cec8f11964bc9249,3dc5f0502e22899e1c59cd27cec8f11964bc9249,"Fixed the PerfTests target

* Fixed a link error
* Fixed a new exception caused by LiteCore now detecting that the db
  is still open when it’s being deleted — caused by PerfTest not
  closing the db when it finishes."
snej,2017-02-10 03:08:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d9551ec4ffb3ee2d36c43653f90bcd2c70723718,d9551ec4ffb3ee2d36c43653f90bcd2c70723718,Moved Swift target build settings to xcconfig file
snej,2017-02-10 02:57:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5228862805a095b9605d90a95164357b94b546e9,5228862805a095b9605d90a95164357b94b546e9,"Initial, incomplete Swift bindings

* Added target “CBL Swift” … generates framework CouchbaseLiteSwift.
* Added Swift wrappers for CBLDatabase, CBLProperties, CBLDocument.
* Query not supported yet!"
snej,2017-02-10 02:53:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3bb558ebad3cd7f988c5b4b84beb6af3ce9a1bd9,3bb558ebad3cd7f988c5b4b84beb6af3ce9a1bd9,"API tweaks to improve Swift bindings

* Parameterize NSDictionary to reflect that keys are strings
* Made CBLDatabase init methods return nullable since they can fail
* Marked block in -inBatch as NS_NOESCAPE"
pasin,2017-02-09 01:32:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4d4db641116183a15ac67dbb3d4666417df2b1a,f4d4db641116183a15ac67dbb3d4666417df2b1a,"Fix puller tests depending on a pusher test

Instead of making the puller tests depending on the pusher test, calling a method to prepare remote database."
pasin,2017-02-08 08:20:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62a4c693e763e472c2351643e90933a74edf09a4,62a4c693e763e472c2351643e90933a74edf09a4,"Change min timeout to 60 seconds

Change min timeout to 60 seconds instead of 120 seconds."
snej,2017-02-07 21:54:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/959d0ad9a5d07cb18f8bbe3f0a27e52f4d78ef67,959d0ad9a5d07cb18f8bbe3f0a27e52f4d78ef67,"LiteCore update: C4Error can now store custom error messages

An error can now have a custom message, not just a generic one based on
its domain/code. This is very useful for query parser errors because
there are a lot of possible messages and they may refer to specific
text in the JSON."
snej,2017-02-06 22:47:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a8abf3736c4da0f28549a0ada98a3d4d4cd3302,3a8abf3736c4da0f28549a0ada98a3d4d4cd3302,"Logging improvements

* CBLLog calls have much less overhead when not enabled, since their
  parameters aren’t evaluated.
* Log domains are resolved to C4LogDomain refs, not strings, which is a
  log more efficient.
* CBLDebug calls are entirely stripped out of release builds.
* Default log level can be configured with user default CBLLogLevel.
* Individual log domains can be configured with user defaults CBLLog___.
* Setting user default CBLBreakOnWarning causes debugger (if any) to
  stop at a breakpoint when any warning is logged."
snej,2017-02-06 19:55:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cbd383fa473a08957beca54535eba0ce10e170f5,cbd383fa473a08957beca54535eba0ce10e170f5,"Release build should export only the public symbols; added a .exp file

This shaves over 100k off the code size due to dead-code stripping."
snej,2017-02-05 19:21:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d9304524117b8c1fb0d8121eca1ad0d00e25fbf4,d9304524117b8c1fb0d8121eca1ad0d00e25fbf4,(db deletion fixes)
snej,2017-02-05 18:56:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aca0bf12693b401dbab92686d055f959c00f26d7,aca0bf12693b401dbab92686d055f959c00f26d7,"Fixed a roundoff error in date parsing that broke round-trip fidelity

NSString -> NSDate -> NSString conversion would sometimes result in a
different string (last digit of milliseconds changed), due to roundoff
error in the date parser.

Fixes #1611"
snej,2017-02-05 03:57:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9dcb5df53ad90ff14eaf2c94c96d8e4c9c62e0f0,9dcb5df53ad90ff14eaf2c94c96d8e4c9c62e0f0,"Added query support for CASE, via NSPredicate “TERNARY()” function

Also changed the TunesPerfTest to collate artists the same way the 1.x
test does, i.e. tracks with the ‘Compilation’ property should have their
artist be ‘-Compilation-‘ rather than the track’s Artist property.
(This required using the TERNARY operator.)"
snej,2017-02-05 03:55:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fefd76a735fef6d84eed977329b4895bfaf3f09d,fefd76a735fef6d84eed977329b4895bfaf3f09d,"Fixed test-case bugs with unsaved docs and deleting open databases

* Some tests were opening database copies and not closing them; those
  dbs didn’t close at the end of the test, so they’d stick around even
  after the db file was deleted, causing later problems when they tried
  to access the file.
* Added fixes to LiteCore to return errors when trying to delete a db
  whose file is still open by other c4databases.
* Make sure DocumentTest reverts changes to documents, otherwise there’s
  a “Database closing with unsaved docs” warning at the end of a test.
* Some improvements to existing warning messages."
snej,2017-02-05 03:49:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/39975fc0f49da4799e9dc3f53d77564ff37dfa32,39975fc0f49da4799e9dc3f53d77564ff37dfa32,Fixed: DB still thinks doc is changed even after -revert is called on it
pasin,2017-02-05 00:31:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b985665136c9301a7c6492b7caaf6b28c52c5f1,3b985665136c9301a7c6492b7caaf6b28c52c5f1,"Update README

* Update CocoaPods and Carthage to point to 2.0DP001
* Add sample apps section"
pasin,2017-02-04 23:40:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8acbd9f190302ec793745d5881e05b4495eb62e9,8acbd9f190302ec793745d5881e05b4495eb62e9,Updated version string to 2.0DP001
pasin,2017-02-04 19:22:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78ab21cce2518b752d1d9166b24926bdc52c0ad2,78ab21cce2518b752d1d9166b24926bdc52c0ad2,"Add tvOS deployment target to the podspec

Added tvOS deployment target = 9.0 to the podspec"
pasin,2017-02-04 18:39:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77b5629c98a193d352a38f0eb2db68053b240b66,77b5629c98a193d352a38f0eb2db68053b240b66,"Merge pull request #1609 from couchbase/feature/2.0-update-podspec

Update podspec"
pasin,2017-02-04 16:25:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eec941e9c36f54d68cb415c8c17c0200a536bbbd,eec941e9c36f54d68cb415c8c17c0200a536bbbd,"Update podspec

* Update version number to 2.0DP001.
* Fixed Objective-C/Internal source."
pasin,2017-02-04 05:13:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1dc62c040d2d4302de720da8e30bb78954ccc70b,1dc62c040d2d4302de720da8e30bb78954ccc70b,"Merge pull request #1608 from couchbase/feature/2.0-aggregation

Query grouping/aggregation"
pasin,2017-02-04 05:01:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76faeb076a93e2c6a5044e5de028d682ca163b4d,76faeb076a93e2c6a5044e5de028d682ca163b4d,Set version string to 2.0DP001
snej,2017-02-04 00:56:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1672c9e4475e460ae5df370c0f843a1841534c1,c1672c9e4475e460ae5df370c0f843a1841534c1,Updated iTunes-library perf test to do a grouped query & improved output
snej,2017-02-04 00:02:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72f576b615587947a5d086950e93cbea51ff9a3a,72f576b615587947a5d086950e93cbea51ff9a3a,"Fixed broken build of PerfTests target

Hadn’t updated the -inBatch: calls after the API change."
snej,2017-02-04 00:01:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33caf30fabcdb8ee81a3b2b714dccf1b60123f00,33caf30fabcdb8ee81a3b2b714dccf1b60123f00,Allow CBLQuery.orderBy to use expressions
snej,2017-02-03 23:25:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96e8b46b9fad400146b0c3e05c14ea5cb565226c,96e8b46b9fad400146b0c3e05c14ea5cb565226c,"Fixes for CBLQueryRow.h

It needs to be made a public header.
Also corrected the name of -objectAtIndexedSubscript:."
snej,2017-02-03 20:29:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48bfa6af0df8a681dddf347499d4b6badbedb9b6,48bfa6af0df8a681dddf347499d4b6badbedb9b6,"Make CBLQuery unsorted by default

The .orderBy property now defaults to nil, not @[@""_id”].
This eliminates SQLite’s overhead for sorting the results, if the app
doesn’t need them to be sorted."
snej,2017-02-03 20:28:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/051a79440e74a74fc6ecaa115fa7838df7faa717,051a79440e74a74fc6ecaa115fa7838df7faa717,"Added -[CBLQuery explain:] -- developer-readable query description

Includes the SQL “SELECT” statement and output of “EXPLAIN QUERY PLAN”."
snej,2017-02-03 20:27:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d17099298fe9123e6c548e5b4c57896e44042cf,2d17099298fe9123e6c548e5b4c57896e44042cf,Added CBLQuery.having (the N1QL/SQL “HAVING” clause)
snej,2017-02-03 06:04:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0380636add7586289602fdbcca12da25fa7a85c7,0380636add7586289602fdbcca12da25fa7a85c7,"Query: Aggregation and grouping

* Added CBLQuery.groupBy
* Added CBLQuery.distinct
* Predicate min() and max() functions map to N1QL least() and greatest()
  except in a context where aggregation is possible (the `returning` and
  `groupBy` properties.)
* Allow `least()` and `greatest()` functions in expressions."
snej,2017-02-03 00:27:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f1970bbab494304b89caf7b269aa8d739e4f736,7f1970bbab494304b89caf7b269aa8d739e4f736,"Changed CBLQuery API; queries now have .where, .orderBy, etc. properties"
snej,2017-02-02 21:36:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0e47f887c0352c0efabe845d4ef5708f9045b9d,e0e47f887c0352c0efabe845d4ef5708f9045b9d,LiteCore support for aggregation (requires 1-line change in CBLQuery.)
pasin,2017-02-03 22:49:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/055b20f1de27e2dd4195b222a02b3cb7157b7834,055b20f1de27e2dd4195b222a02b3cb7157b7834,"Update README

* Added Cocoapods and Carthage instruction
* Updated contributions."
pasin,2017-02-03 21:12:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8621bd157729fc0047e9f914732a3e6532d56517,8621bd157729fc0047e9f914732a3e6532d56517,"Added Android and .NET 1.4.0 files for import db tests

* Added Android and .NET 1.4.0 database files
* Updated unit tests"
pasin,2017-02-03 20:45:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5f33eedec02af79d2b628931a4c50b1d106a5a6,a5f33eedec02af79d2b628931a4c50b1d106a5a6,"Add more DocumentTests

* Added NSNull tests
* Added Remove properties tests
* Added ContainsKey tests"
pasin,2017-02-03 17:26:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/830a4a4839a2c5c3a7e89dbc05922d2b72733f4e,830a4a4839a2c5c3a7e89dbc05922d2b72733f4e,"Rename iOS Test App target and scheme

Changed from CBL iOS Tests {App} to CBL Objc Tests - iOS {App} to match with CBL Objc Tests."
pasin,2017-02-03 08:45:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0cd3c558dfe72bb809e8e28a5cb9d7a9cebe5c15,0cd3c558dfe72bb809e8e28a5cb9d7a9cebe5c15,"Use .cblite2 suffix as an extension to the database folder name

* Used .cblite2 suffix as an extension to the database folder name
* Modified testCreate to also test the suffix"
pasin,2017-02-03 08:23:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ce2818a0e0d78c3db1f76563b76c4bd9417b401,0ce2818a0e0d78c3db1f76563b76c4bd9417b401,"Merge pull request #1604 from couchbase/feature/2.0-unit-test-app

Add iOS Unit Test App"
pasin,2017-02-03 08:21:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/afc5e6072af6cc24f01a6d5e6a7e44f5bfe17aeb,afc5e6072af6cc24f01a6d5e6a7e44f5bfe17aeb,"Add iOS Unit Test App

* Added CBL iOS Tests App and CBL iOS Tests (Unit Test Bundle) targets
* Added CBL iOS Tests App.xcconfig and CBL iOS Tests.xcconfig
* Made CBL iOS Tests App shared scheme"
pasin,2017-02-02 21:14:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/65d945a7c1ebea65267e9b991fa71af7181df3f1,65d945a7c1ebea65267e9b991fa71af7181df3f1,"Make CBLDatabase.path property nullable

* If database is closed or deleted, the path property value will be nil.
* Updated unit tests to test database path."
pasin,2017-02-02 18:50:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4470fbaf008c611be611521feb33d78cf573afd,f4470fbaf008c611be611521feb33d78cf573afd,"Make CBLDatabase’s name and path property public

* Fixed CBLDatabase’s name property missing
* Made CBLDatabase’s path property public API per discussion in Hipchat"
pasin,2017-02-02 18:32:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c61905d85a615ed9b5e050e12cde6906f0259015,c61905d85a615ed9b5e050e12cde6906f0259015,"Add XCode defaultConfigurationName to API Docs target

XCode keeps setting this everytime so I just committed it."
pasin,2017-02-02 03:06:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84947cdef571597fdca697b3e7cb73955c378827,84947cdef571597fdca697b3e7cb73955c378827,"Fixed implicit conversion loses integer precision error

Found the error when building the framework Carthage.

Error Message:  implicit conversion loses integer precision: 'int64_t' (aka 'long long') to 'NSInteger' (aka 'int') [-Werror,-Wshorten-64-to-32]"
snej,2017-02-01 21:55:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/402bb0443269ee1505e410cba2a7e40270251779,402bb0443269ee1505e410cba2a7e40270251779,API: Added simplified query method -[CBLDatabase allDocuments]
snej,2017-02-01 21:53:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fe067bea074ad8c864c30bd09b0af0e0bac7e606,fe067bea074ad8c864c30bd09b0af0e0bac7e606,"API: -[CBLDatabase inBatch:do:] block now returns void, not BOOL

Since we’re de-emphasizing transactions, it makes sense to remove the
ability to abort. This also simplifies the developer’s code since they
don’t have to add `return YES;` at the end of the block."
snej,2017-02-01 21:49:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad46b7807b1c659429265f8f3e5dda13ddb5c433,ad46b7807b1c659429265f8f3e5dda13ddb5c433,"Added API docs (Doxygen) target.

Output is build/…/Products/Debug/com.couchbase.CouchbaseLite2.docset
Within that, the home page of the docs is
    Contents/Resources/Documents/index.html"
snej,2017-02-01 21:41:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74f02a99aa9e685f91f2541168a23fc9aecf8445,74f02a99aa9e685f91f2541168a23fc9aecf8445,"Merge pull request #1599 from couchbase/fix/sqlite-error-handles

Fixed #1596 and #1598 Ignore some SQLite errors"
pasin,2017-02-01 00:21:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0252bf01e3500d88490c94cdd056a0e185799f1a,0252bf01e3500d88490c94cdd056a0e185799f1a,"Added iOS 1.4 replacedb test data

* Added both SQLite and ForestDB test data
* Updated unit tests"
snej,2017-01-31 21:52:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7fc131435ccae0a7db2e10d241e9e59a1103bbf6,7fc131435ccae0a7db2e10d241e9e59a1103bbf6,"Rev trees are now being pruned (thanks to LiteCore). Added perf test.

Documents were being saved with unbounded max revision tree depth,
which led to massive slowdowns saving a document as the number of revs
increased (not to mention extra disk space.) I wrote a simple perf test
that exposed this.

The problem was that CBL wasn’t setting the maxRevTreeDepth parameter
of the C4DocSaveRequest, and 0 was interpreted by LiteCore as
unbounded. I decided that was bad behavior in LiteCore, and that the
value should be persistently configurable as in 1.x, defaulting to 20.
Implemented that in LiteCore."
pasin,2017-01-31 20:50:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23bebb151a12f3624b5b033ff41fac978ad21aeb,23bebb151a12f3624b5b033ff41fac978ad21aeb,"Disable rasing exception from warning in SQLite errorLogCallback

As errorLogCallback is called by SQLite, the exception shouldn’t be thrown.

#1596 #1598"
snej,2017-01-31 19:39:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/41eb2b9fadb337043f396ae085134c344444bee9,41eb2b9fadb337043f396ae085134c344444bee9,"Merge pull request #1595 from couchbase/fix/get_purged_doc_reason

Fixed #1580 get purged doc returning wrong reason"
pasin,2017-01-31 07:17:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30de2cf6c5a09a2d7bdff24d0c53bab1de513b17,30de2cf6c5a09a2d7bdff24d0c53bab1de513b17,"Ignore some SQLite errors

* Ignore `no such table: cfurl_cache_response` as using an NSURLConnection to connect to a custom scheme URL before the scheme is registered will cause this error which is harmless. #1596

* The statement error could happen when using invalid FTS query strings . Instead of crash from the warning, the error should return appropriately. #1598"
snej,2017-01-31 08:25:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/378e96a287fa4ad260a8449892e720d422985f20,378e96a287fa4ad260a8449892e720d422985f20,"Query enums are now ‘prerecorded’ so they work with database mutation

You can now run a query while in a transaction and modify the db while
enumerating the query results.
(See couchbase/couchbase-lite-core#51)"
pasin,2017-01-31 07:08:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec1617bf628b184ca017203d12d44b04e03dec5b,ec1617bf628b184ca017203d12d44b04e03dec5b,"Fix race issue in test08_LiveQuery_DispatchQueue

There is a race condition between closing the background database and deleting the database in the teardown. Fixing the issue by manually close the background database and waiting for that to finish before closing the background manager.

#1597"
snej,2017-01-31 06:26:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4bebb3235b75207f1e0a295de4793137855df09d,4bebb3235b75207f1e0a295de4793137855df09d,"Performance tests (the beginnings, at least)

* Added “PerfTests - Mac” target that builds a command-line tool to run
  performance tests. Its scheme specifies a Release build so we can test
  optimized code.
* Added an abstract PerfTest base class.
* Added TunesPerfTest, the beginnings of my iTunes-library benchmark
  that I’ve used for a while. So far it just measures the time to
  populate the database with 12000+ documents."
snej,2017-01-31 01:46:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a436c11a7462d53e36528b480c7500f3c5bbe617,a436c11a7462d53e36528b480c7500f3c5bbe617,"Doubled speed of encoding CBLProperties to Fleece

It turns out -conformsToProtocol: is really slow; it took up 45% of
the time. I avoided it by using an override of -fl_encodeTo: in
NSObject, and only doing the conformance checking there."
pasin,2017-01-31 00:55:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/abd6b57bf51188b6f70e1fc7ba7322d64cd719bb,abd6b57bf51188b6f70e1fc7ba7322d64cd719bb,"Change IncrementalStore_Tests to use its own database

IncrementalStore_Tests should use its own database to test, not the one from the base testcase database."
pasin,2017-01-30 22:57:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebc2c2465b37e05980b1231cdb4d717c20726fda,ebc2c2465b37e05980b1231cdb4d717c20726fda,"Merge pull request #1593 from couchbase/feature/2.0-properties-cleanup

Document/Properties improvements"
pasin,2017-01-30 22:40:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/166c66f85bc954e0b1aad1f42108db0c460873a4,166c66f85bc954e0b1aad1f42108db0c460873a4,"Fix get purged doc returning wrong reason

* From the REST API, when getting a purged doc, the result returns with deleted as a result. It should be returnning as missing. The issue happens on on SQLite but no ForestDB.
* Fixed CBL_SQLiteStorage’s getDocumentWithID to correctly differentiate between deleted and not-found.

#1580"
snej,2017-01-30 05:50:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9ebf8336887d9fba86c62c9a7375955214cf488,f9ebf8336887d9fba86c62c9a7375955214cf488,Added compiler warning for properties not marked as nonatomic/atomic.
snej,2017-01-30 05:49:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f07dfdc07679f1cfb606921f9bda5eefa1d43ab1,f07dfdc07679f1cfb606921f9bda5eefa1d43ab1,Some more doc-comment editing.
snej,2017-01-30 05:17:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9565503e651e3d1a3601d353f78a8409ab7d6a0d,9565503e651e3d1a3601d353f78a8409ab7d6a0d,"Document/Properties improvements

- Moved the subscript operator overrides in CBLDocument to a category,
  so they don’t actually have to be implemented in the .mm file.
- Cleaned up some method names in CBLDocument (NSError** parameters
  should always come last.)
- Cleaned up change notification handling in CBLDocument.
- Cleanup/optimizations in CBLProperties."
snej,2017-01-30 05:13:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9081ccc304538ca584516f289495d248f85e43ae,9081ccc304538ca584516f289495d248f85e43ae,"A few small changes

- Made CBLQuery’s -init method unavailable
- Added an assertion to CBLBlob preventing it from being added to a
  different database
- Autorelease pool around -[CBLTestCase loadJSONResources:], which has
  the effect of causing the CBLDocuments to be dealloced.
- Took out some verbose logging in QueryTest."
snej,2017-01-30 05:11:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c1e7d05b18a5d8dc24c15c1a336a1e132c5b52a,4c1e7d05b18a5d8dc24c15c1a336a1e132c5b52a,Comments and whitespace (no code changes)
snej,2017-01-30 05:03:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4d6c9989cdc11bbd821aac84c8f97d98877c7009,4d6c9989cdc11bbd821aac84c8f97d98877c7009,"Shared-keys and shared-strings optimizations

Created SharedKeys C++ class as a way to combine FLSharedKeys and
the shared-strings NSMapTable.
Using some new Fleece APIs I just added like FLDictIterator_GetKeyAsNSString."
snej,2017-01-29 04:57:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b33c813f5ad640c1fd9705c6035d35b7310340bd,b33c813f5ad640c1fd9705c6035d35b7310340bd,"Merge pull request #1592 from couchbase/feature/2.0-objc-swift

Fixed objective-c to swift bridging API"
pasin,2017-01-28 06:29:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/913b2afd05218ab9013476c109deabae630239ed,913b2afd05218ab9013476c109deabae630239ed,"Make objective-c to swift bridging API friendly

* Make sure to use BOOL (not bool) and NSError** pattern to get convert to throws in Swift.

* Redeclare subscription methods, otherwise it doesn’t get exposed to Swift bridging APIs."
snej,2017-01-29 02:49:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0ed6aa4e96b7fe2307404808081345249e5a771,a0ed6aa4e96b7fe2307404808081345249e5a771,"Fixed LiteCore assertion failure indexing a deleted document

Picked up a LiteCore fix: an assertion failure deleting a document
after any indexes have been created.
Also enabled the unit test that detects this problem (I’ve also added
a similar test to LiteCore itself.)

Fixes #1587"
snej,2017-01-29 02:48:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c6c01ec5ecb6e54774ca68adce6c8a8d7e3ccde8,c6c01ec5ecb6e54774ca68adce6c8a8d7e3ccde8,XCTAssert --> Assert
snej,2017-01-29 01:28:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/58368a5b2132c467643f234b298c41a19911dcbf,58368a5b2132c467643f234b298c41a19911dcbf,"Merge pull request #1591 from couchbase/feature/2.0-1590

Fix converting fleece root to dictionary"
pasin,2017-01-28 01:55:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4365ca6b534d516d1e6bf66333b14c44d455d65c,4365ca6b534d516d1e6bf66333b14c44d455d65c,"Fix converting fleece root to dictionary

* Calling -fleeceValueToObject: to convert _root directly will end up always converting the whole _root into dictionary as checking dictionary tyle (_cbltype) will always be null at the _root level. Instead, constructing the dictionary by looping through each key/value at the root level and calling fleeceValueToObject() to convert each value.

* Removed unused variable.

#1590"
snej,2017-01-28 00:49:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/20591e8c960cf67d38434f78d5510b11a52ef0ce,20591e8c960cf67d38434f78d5510b11a52ef0ce,"CBLDocument now sets the kRevHasAttachments flag when saving

…if the doc contains blobs, of course. (Needed to do a recursive scan
to look for blobs. Hope this isn’t too slow.)"
snej,2017-01-28 00:47:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d7f335899c5d48950dfa39090443b5fc540460a,8d7f335899c5d48950dfa39090443b5fc540460a,"Fix for queries being broken immediately after opening a db

If a query ran right after opening a db, before reading any documents,
the SharedKeys instance wouldn’t yet have loaded the keys from the db,
and due to a bug in Fleece, the fl_value() SQL function would fail to
find keys in documents.
Picked up the Fleece fix, and some test changes to help track this down.

(This was a cross-platform bug. Fortunately a cross-platform fix too.)

Fixes #1587"
snej,2017-01-27 22:09:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/081d34e582ff8c6af2e34700c9414c7365ea4dc1,081d34e582ff8c6af2e34700c9414c7365ea4dc1,Added some more LiteCore-to-Cocoa conversion functions
pasin,2017-01-27 22:34:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b398e12698a5c23fa27debcc0193df6d5d4e684d,b398e12698a5c23fa27debcc0193df6d5d4e684d,"Fix attachment directory path

* When options.directory is nil, the default directory should be used.
* Clean up code

#1583"
snej,2017-01-27 21:28:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/407ec8bd1e7d794761e88539079fa45bc3b29a76,407ec8bd1e7d794761e88539079fa45bc3b29a76,"Added -description methods to CBLDatabase, CBLQueryRow."
snej,2017-01-27 01:19:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7191f59350f9c7af1ed345617a26fdd46a3c156,c7191f59350f9c7af1ed345617a26fdd46a3c156,"More blob work

* Using new c4db_getBlobStore() instead of managing the BlobStore.
* More stream error handling.
* CBLBlobStream needs to override some more NSInputStream methods.
* CBLBlob.contentStream needs to return a new stream every time, b/c
  streams have state and most streams can only be opened once. This
  required a lot of internal changes, like storing a db ref instead of
  a CBLBlobInputStream.
* Need to preserve arbitrary JSON properties in a blob.
* Missing JSON properties need to be accommodated, otherwise the blob
  will be lost from the document when re-saving.
* Invalid nil parameters should be handled with assertions not NSError.
* Made some CBLBlob parameters/properties nullable."
snej,2017-01-27 17:28:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c4ddd1914ab409a776be75f73d627a815b21a04b,c4ddd1914ab409a776be75f73d627a815b21a04b,"MACOSX_DEPLOYMENT_TARGET should be 10.9, not 10.8

It’s 10.9 on the master branch."
pasin,2017-01-27 17:36:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b6cbdeddfa96701e2b4403bd5139e78dbb1455c,8b6cbdeddfa96701e2b4403bd5139e78dbb1455c,"Added 2 failing tests in QueryTest

#1584 #1587"
pasin,2017-01-27 17:23:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bfbc485526f16d8cbf5029e621b7c37d143012d,2bfbc485526f16d8cbf5029e621b7c37d143012d,"Add CBLBlob.h to public headers

Also needs to add CBLBlob.h in the public headers."
pasin,2017-01-27 06:52:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21969ed6b259271a2452cf9bd28c19b483e9e2a8,21969ed6b259271a2452cf9bd28c19b483e9e2a8,"Added CBLBlob.h into CouchbaseLite.h

Fixed missing CBLBlob.h in CouchbaseLite.h"
snej,2017-01-26 18:22:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1697434a5f081e35bb069f8983cae6f283802d5,c1697434a5f081e35bb069f8983cae6f283802d5,"Minor CBLBlob code / documentation cleanup

* Edited the API docs a bit
* Reordered methods (init methods come first)
* Added ‘nullable’ to initializer return type
* Changed ‘length’ property type to uint64_t since NSInteger is a 32-bit
  type in a 32-bit OS, but blobs can be bigger than 2GB."
snej,2017-01-26 17:36:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4eb7da9029f4add1a5d172d326d1c48ac052d00e,4eb7da9029f4add1a5d172d326d1c48ac052d00e,"Merge pull request #1578 from couchbase/feature/2.0-podspec

Add CouchbaseLite.podspec"
pasin,2017-01-26 05:14:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6f25f230652a994ee899ab5756f1f7156943942,a6f25f230652a994ee899ab5756f1f7156943942,"Fix using iOS 10 NSTimer’s -scheduledTimerWithTimeInterval

Instead of using -scheduledTimerWithTimeInterval:repeats: block:, use -scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:.

#1556"
pasin,2017-01-26 05:01:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45da991babdabb7e95f6e996223f12ace283b5db,45da991babdabb7e95f6e996223f12ace283b5db,"Use scheduledTimerWithTimeInterval with selector instead

scheduledTimerWithTimeInterval with block is only available fomr iOS10. Change to use scheduledTimerWithTimeInterval with selector instead.

#1551"
snej,2017-01-26 00:59:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6146e290d84a8505344ee40a260a8cd714ceb8f,e6146e290d84a8505344ee40a260a8cd714ceb8f,Fixed a crasher in LiteCore where FTS could access a bad pointer
snej,2017-01-26 00:59:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5cc1795120e11bfa77ddab155c60489ebc3787d3,5cc1795120e11bfa77ddab155c60489ebc3787d3,"Merge branch 'feature/2.0-blob' into feature/2.0

# Conflicts:
#	Objective-C/CBLDatabase.mm
#	Objective-C/CBLDocument.mm
#	Objective-C/Internal/CBLInternal.h
#	Objective-C/Tests/DocumentTest.m"
pasin,2017-01-26 00:54:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ba2cc0ef31dbe2dca3239a35442b1fbd9a433962,ba2cc0ef31dbe2dca3239a35442b1fbd9a433962,Fix branch name in podspec
pasin,2017-01-25 23:23:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c731142610dbefb9e54ec0aac4c104b4aa504585,c731142610dbefb9e54ec0aac4c104b4aa504585,"Add CouchbaseLite.podspec

Create a podspec that builds the binary from source."
borrrden,2017-01-26 00:26:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/abda6e8052bc52c5bf204766de702147ff20b589,abda6e8052bc52c5bf204766de702147ff20b589,Fix the failing unit test with the understanding that it will change with the introduction of subdocuments
snej,2017-01-25 23:43:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b93f6d337f307193cdc9f693908ddd68277b751f,b93f6d337f307193cdc9f693908ddd68277b751f,Two bug-fixes
borrrden,2017-01-18 21:46:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7f914d3a2b53195aaa8473f9c1ecb837fa32d3e,b7f914d3a2b53195aaa8473f9c1ecb837fa32d3e,"Realized we don't need to parse the entire object just to find out its type, and subdocument won't need an actual Objective-C object"
borrrden,2017-01-18 03:13:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1fa563881cce77f702a61799f6a165a07721b483,1fa563881cce77f702a61799f6a165a07721b483,Refactor blob to work nicely with Subdocument and any other class we may define that has a separate JSON representation
borrrden,2017-01-18 00:32:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d9aa87ead22fa032210bf24721c26397a9d255f,2d9aa87ead22fa032210bf24721c26397a9d255f,Prevent invalid blobs and add more blob tests
borrrden,2017-01-17 23:19:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9071314ba30c446dfe6fea42a941bd8ade82b925,9071314ba30c446dfe6fea42a941bd8ade82b925,Expand tests and refactor save logic (mostly) to CBLProperties
borrrden,2017-01-17 06:51:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49a1d73937b1b718ddd53c22c85bc6b3173b3655,49a1d73937b1b718ddd53c22c85bc6b3173b3655,Rough API sketch
snej,2017-01-25 22:01:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e271ccd674821b26c2cc5a3d3e407cba6cad5de,5e271ccd674821b26c2cc5a3d3e407cba6cad5de,"Improved the save method; API namesmithing; code cleanup

* Refactored the save code in CBLDocument. The merge is now done by a
  separate method.
* Fixed some edge cases in the save method, like error handling.
* If the resolver returns the same properties as “theirs”, the save
  becomes a no-op that doesn’t create a new revision.
* Resolvers can now return nil to give up, causing the save to fail.
* Implemented the “deepest wins” default resolver, hardcoded in the
  save method.
* Added CBLDocument properties .revisionID and .generation.
* Renamed the properties of CBLConflictResolver to hopefully make their
  meaning clearer.
* Moved CBLConflictResolver to its own header file."
borrrden,2017-01-24 04:52:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd495f74b4ce134693bcfe015e1ed4dbdbeee4c3,bd495f74b4ce134693bcfe015e1ed4dbdbeee4c3,"Implemented conflict resolution with test
TODO: Decide default resolution algorithm
TODO: Create a set of prebuilt resolvers"
pasin,2017-01-25 17:13:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96b1a96bad53f533ce811eb6691966426753deaf,96b1a96bad53f533ce811eb6691966426753deaf,"Merge pull request #1567 from couchbase/feature/2.0-returning

Query: Implemented “returning:” and FTS"
borrrden,2017-01-25 00:48:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de33cf87b34fdbb9eacea0951daa7b544d70ad90,de33cf87b34fdbb9eacea0951daa7b544d70ad90,Expose schemes for CI testing
snej,2017-01-24 20:44:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d83f20017663bb8a11042d5d7491f3bcba8fe33,0d83f20017663bb8a11042d5d7491f3bcba8fe33,"Simple form of -createQuery method sorts results by docID

-[CBLDatabase createQuery:error:] now uses a sort parameter of @[@“_id”]
instead of nil, when it calls the full -createQuery… method. This causes
the results to be sorted by docID, instead of an undefined order."
snej,2017-01-23 22:59:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a01073fc144005638c16df71c096538630b9389d,a01073fc144005638c16df71c096538630b9389d,"Enable sorting FTS results by rank

Use sort descriptor/string “rank(foo)” to sort by the rank of the match
against the FTS property foo. Actually you probably want to prefix with
“-“ for descending rank.
Added an FTS unit test."
snej,2017-01-23 19:38:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f5d67857bac4881865c78c9074e929e8fe61e9fe,f5d67857bac4881865c78c9074e929e8fe61e9fe,"Enable FTS, using NSPredicate “x matches y” operator.

In a regular NSPredicate “matches” does a regex match; but as there’s no
clean way to add extra functions/operators, I decided it was better to
make it be for FTS. (Especially since it’s so close to the N1QL and
SQLite “match” operator.)

I added a really awkward syntax for doing a regex, in case anyone
really needs it; see QueryTest.m for an example."
snej,2017-01-23 02:03:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3741fb224c40469dfd1da91e6d59449444c4bc01,3741fb224c40469dfd1da91e6d59449444c4bc01,"Query: Implemented “returning:”, and allow index exprs to be NSStrings

* Added “returning:” parameter to full -createQueryWhere: method. This
  takes an array of NSExpressions denoting extra ‘columns’ of values to
  return for each row.
* Added a family of xxxAtIndex: methods to CBLQueryRow to get these
  returned values, as various types.
* The `expressions` array parameter to -createIndex: can now contain
  NSStrings, which will be parsed into NSExpressions.
* Added -[CBLTestCase loadJSONResource:] as a utility to read JSON
  from a resource file into the database."
borrrden,2017-01-21 02:27:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f19bd1f5047fafd622dcd3fa167ca5ab266135e2,f19bd1f5047fafd622dcd3fa167ca5ab266135e2,"Added in notification implementation for database and document with 1 test

Jens: Squashed Jim's PR into one commit, with minor formatting changes,
and rebased onto feature/2.0."
snej,2017-01-24 19:28:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e75a7e87c54fd4610c3ed0483df4041a1b2b933,3e75a7e87c54fd4610c3ed0483df4041a1b2b933,"Some fixes for deleting databases

* In LiteCore: c4db_delete should not fail when the db’s refcount > 1.
* -[CBLDatabase deleteDatabase:] needs to free the handle afterwards.
* In DatabaseTest, add assertion that deleting the db succeeds."
snej,2017-01-24 17:42:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9135f888dba94a28881a7ebd50bf4df5a47b0ed,c9135f888dba94a28881a7ebd50bf4df5a47b0ed,"Merge pull request #1571 from couchbase/fix/1568-forestdb-attachment-revpos

Fix #1568 forestdb att revpos when doc is deleted and recreated"
pasin,2017-01-24 02:34:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43a881d395a9392712997299445ee85dbd6280fe,43a881d395a9392712997299445ee85dbd6280fe,"Fix forestdb att revpos when doc is deleted and recreated

* when a doc is deleted and recreated, inPrevRevID will be nil so the previous code to fix the attachment revpos doesn’t get executed.
* Simplify the code.

#1568 #1440"
snej,2017-01-23 02:04:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f38a245d09f9f0cfb63f21eadfe6e8f9b9e30779,f38a245d09f9f0cfb63f21eadfe6e8f9b9e30779,"Fixed an internal error in a test case, deleting a still-open database"
snej,2017-01-22 01:39:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63a34e75448553e0c5bfa29bdca8ada04a0ea8cc,63a34e75448553e0c5bfa29bdca8ada04a0ea8cc,"Oops, fixed compile errors in unit tests due to stricter warning flags"
pasin,2017-01-21 01:30:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2c8ee515622abe4dae9d36e857e4b03971cbcfd,f2c8ee515622abe4dae9d36e857e4b03971cbcfd,"Merge pull request #1566 from couchbase/feature/2.0-build-settings

Build configuration changes (warnings, optimizations)"
snej,2017-01-21 00:27:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/034af84d8609aa2edfb2477537057adad8869bd2,034af84d8609aa2edfb2477537057adad8869bd2,"Build configuration changes (warnings, optimizations)

* Added a bunch of warnings and static-analyzer checks, as used in
  LiteCore and CBL 1.x
* Added optimization settings to the Release.xcconfig
* Removed unused .xcconfig files
* Fixed some warnings triggered by the above"
pasin,2017-01-20 22:48:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/209342b30bf1e98928817f25a933b046930d9fcf,209342b30bf1e98928817f25a933b046930d9fcf,"Clean up unused and refactor code in ChangeTracker per review

* Removed unused variables.
* Move handTimeout logic in CBLSockerChangeTracker.m up to the super class.

#1551"
pasin,2017-01-20 09:59:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/571293eaf59ad83f9c5a22c91d4f485e08d93f6b,571293eaf59ad83f9c5a22c91d4f485e08d93f6b,"Merge pull request #1562 from couchbase/feature/2.0-index-exprs

Query: Added support for indexing expressions (not just properties)"
snej,2017-01-20 00:44:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c94f87c13fa50ab6bc30613125413d6315b97039,c94f87c13fa50ab6bc30613125413d6315b97039,Query: Added support for indexing expressions (not just properties)
pasin,2017-01-18 21:32:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/427716a767b01aaf72743e590bb698f37dd37bf9,427716a767b01aaf72743e590bb698f37dd37bf9,Update lite-core submodule
pasin,2017-01-18 05:36:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e56330cb365853cfd146be620b5f854f3ab7afae,e56330cb365853cfd146be620b5f854f3ab7afae,"Fix mutating enumerated attachments error

Fix to enumerate the original attachments instead of the edited one.

#1557"
pasin,2017-01-18 05:28:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5ac312a7e5429ebf06983a9d060810c494801b62,5ac312a7e5429ebf06983a9d060810c494801b62,"Fix _changesTimeout assertion failure in CBLRouter

Make sure to start timeout only when timeout value is set.

#1556"
pasin,2017-01-17 19:40:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/630ab88e00681ddda9f9ae6e7bd74263d31a3d11,630ab88e00681ddda9f9ae6e7bd74263d31a3d11,"Add some documentation to CBLProperties

* Added some documentation to CBLProperties
* Cleanup in CBLDocument"
pasin,2017-01-17 03:57:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa6ffdcaf0b9c5813a25139f01d1f52ad61f4344,aa6ffdcaf0b9c5813a25139f01d1f52ad61f4344,"Implement timeout in ChangeTracker for longpoll and websocket mode

* Implement timeout in ChangeTracker only for longpoll and websocket mode.
* Timeout value is greater than the heartbeat value 10%.
* When timeout occurs, both socket and websocket ChangeTracker will be failed with NSURLErrorTimedOut and the errors will be handled by the puller replicator with the retry logic.

#1551"
snej,2017-01-16 23:03:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dc4ccfcdaf45082f7ce9e2cd9342114e3a970d13,dc4ccfcdaf45082f7ce9e2cd9342114e3a970d13,"Merge pull request #1536 from couchbase/feature/changes_timeout

Fixed #1236 Implement longpoll and continuous _changes timeout"
pasin,2017-01-16 23:01:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cdc81b8b29b9780d64ee1ca929952a5701d198be,cdc81b8b29b9780d64ee1ca929952a5701d198be,"Fix not using __weak reference and breaking ref cycle

Per code review, added __weak marker and fixed accessing to the ivar that re-create the cycle reference again.

#1236"
snej,2017-01-16 23:00:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40ee89e94271f81a360066c645b2810c6c852adf,40ee89e94271f81a360066c645b2810c6c852adf,"Merge pull request #1547 from couchbase/fix/attachment_delete_rev

Fix #1440 attachment revpos after delete and recreate doc"
snej,2017-01-16 23:00:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/099cb63c293cb381f20bc44fdfcd44821316c6a2,099cb63c293cb381f20bc44fdfcd44821316c6a2,"Merge pull request #1548 from couchbase/fix/change_file_protection

Fix #1491 change file protection level not effected"
pasin,2017-01-16 22:55:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de1d7274f5264b232096599e37230a4277985b6a,de1d7274f5264b232096599e37230a4277985b6a,"Add comment about not setting file attrs for -shm file

Add comment explaning why we do not need to set the file attributes for -shm file.

#1491"
pasin,2017-01-16 22:50:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43313bdc0e3dd829a43c9424defa518d05e31203,43313bdc0e3dd829a43c9424defa518d05e31203,"Bypass attachment revpos patching if there are no attachments

Per code review, add checking if there are no attachments.

#1440"
snej,2017-01-16 22:36:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/79ac4e0b0ecf87ceddea4df6e028da560ef2063b,79ac4e0b0ecf87ceddea4df6e028da560ef2063b,"Merge pull request #1537 from couchbase/fix/rekey

Fixed #1343 rekey when there are multiple database handles"
snej,2017-01-16 22:24:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fd36d07b5f6c416131c3431f3a8637227be2b66,2fd36d07b5f6c416131c3431f3a8637227be2b66,"Merge pull request #1534 from couchbase/fix/CBLRemoteSession_Crash

Fix #1429 crash in CBLRemoteSession"
pasin,2017-01-16 18:09:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fdb090b6f9089e0961100d24425464031e1d9fc4,fdb090b6f9089e0961100d24425464031e1d9fc4,Move CBLQuery+Internal.h into Internal folder
pasin,2017-01-16 17:55:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0087e9dc6d4a7e48949e5d9a4ca4278736ff67c9,0087e9dc6d4a7e48949e5d9a4ca4278736ff67c9,"Change CBLDocument’s -reset to -revert

* Per Jens’s comment on https://github.com/couchbase/couchbase-lite-ios/pull/1544.
* Also the spec has been updated: https://github.com/couchbaselabs/couchbase-lite-apiv2/commit/b7684575372e177ddb8eca0404ae1c76416cf3e8"
pasin,2017-01-16 17:35:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6448d347e7aced423a1125286a8e29be408f080,b6448d347e7aced423a1125286a8e29be408f080,"Fix CBLDatabase per code review

* Made options in CBLDatabase’s -initWithName:options:error nullable.
* Fixed CBLStringBytes struct creation.

https://github.com/couchbase/couchbase-lite-ios/pull/1544"
pasin,2017-01-16 17:13:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f54ce8dffe5fed4568d752933f9cf185179e850,4f54ce8dffe5fed4568d752933f9cf185179e850,"Merge pull request #1549 from couchbase/feature/2.0-query

Initial CBLQuery implementation. (API not official)"
snej,2017-01-14 21:32:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc0b12c735dd6f01b361f7ec82e4190e7a8049de,fc0b12c735dd6f01b361f7ec82e4190e7a8049de,Initial CBLQuery implementation. (API not official)
pasin,2017-01-14 05:17:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b50f92c945e3b45ab47b93f135a473a1701b090e,b50f92c945e3b45ab47b93f135a473a1701b090e,"Fix change file protection level not effected

File protection was set only when first creating the manager directory. Need to ensure that the file protection level is set (if specified) even when the manager directory already exists.

#1491"
pasin,2017-01-14 01:08:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43e58124a61a0f1848f0c28ee7bdc94464c7068b,43e58124a61a0f1848f0c28ee7bdc94464c7068b,"Fix attachment revpos after delete and recreate doc

* Ported the fix from https://github.com/couchbase/couchbase-lite-net/pull/790.

#1440"
pasin,2017-01-13 21:34:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86a4f5c138c81948911dae8031642d36e00243f1,86a4f5c138c81948911dae8031642d36e00243f1,Update README.md
snej,2017-01-13 21:04:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84b9963b3982db43d689d756aaede9fcb4ec37fd,84b9963b3982db43d689d756aaede9fcb4ec37fd,"Merge pull request #1544 from couchbase/feature/2.0-database

[2.0] Implement CBLDatabase and CBLDocument"
snej,2017-01-13 16:49:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/65632116b7660b2e7e24fe9db70c6d6f1a5482f4,65632116b7660b2e7e24fe9db70c6d6f1a5482f4,"Merge pull request #1545 from couchbase/feature/database_change_is_deletion

Make CBLDatabaseChange’s isDeletion property public"
pasin,2017-01-12 22:36:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b817e1e0d15a95ed69ea7e5aaa492339d9ba2fd6,b817e1e0d15a95ed69ea7e5aaa492339d9ba2fd6,"Make CBLDatabaseChange’s isDeletion property public

Moved isDeletion property from private to public.

#1538"
pasin,2017-01-12 04:29:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad07f50206c08fd8cd1eed8a17f7b7b3f1645a99,ad07f50206c08fd8cd1eed8a17f7b7b3f1645a99,"Implement CBLDatabase and CBLDocument

* Create a new xcode project that builds a universal dynamic CBL library.
* Use xcconfigs
* Implement CBLDatabase and CBLDocument"
pasin,2017-01-11 23:42:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebb5f55cf0fc00f615bb857d7d8936917fb43334,ebb5f55cf0fc00f615bb857d7d8936917fb43334,"Start 2.0 from scratch

Removed everything and start 2.0 from scratch."
pasin,2017-01-07 01:35:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e663ea02c41c861bb85b6a2d4bd48a8da855403,9e663ea02c41c861bb85b6a2d4bd48a8da855403,"Fix resetting CBLRemoteSession’s _allRequests

*URLSession: didBecomeInvalidWithError: is called on the session’s operation thread so make sure that _allRequests is reset on the API thread by doing it in the -doAsync: block.
* Undo the previous fix which is not correct.

#1429"
pasin,2017-01-07 01:12:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f3b439d92ae16a7c4029ab60349cb9f749296db,9f3b439d92ae16a7c4029ab60349cb9f749296db,"Fix changes timeout impl per code review

* Made _changesSince as an ivar and use it instead of _changesTimeoutSince.
* Fixed retain cycle between self and _changesTimeoutTimer using weakSelf and strongSelf.

#1236"
snej,2017-01-06 22:32:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e1963a00ca6cf6368f3483e21ee3fccabc9af6e0,e1963a00ca6cf6368f3483e21ee3fccabc9af6e0,"Merge pull request #1533 from couchbase/fix/bg_crash

Fix #1498 crash onAppBackgrounding"
snej,2017-01-06 22:31:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e02bbb6d4b8bd171e5bae3b3aadd3d62302264f,1e02bbb6d4b8bd171e5bae3b3aadd3d62302264f,"Merge pull request #1532 from couchbase/fix/offline_retry

Fix replication retry is still active when the replicator is offline

Fixes #794"
pasin,2016-12-28 00:45:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d2fe5fd036b598eb25e2eb064bdef921dd354ad1,d2fe5fd036b598eb25e2eb064bdef921dd354ad1,"Add libCBLJSViewCompiler to podspec by default

This is a workaround until we move CBLJSViewCompiler into CouchbaseLite framework.

#1259"
pasin,2016-12-27 23:39:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4610e802b67144b67698572b48b1725bc1cab84f,4610e802b67144b67698572b48b1725bc1cab84f,"Fix rekey when there are multiple database handles

* Follow the same logic as deleting the database by closing all database handles first before rekeying. The database will be reopened and rekeyed.

* Add CBL_DatabaseWillBeRekeyedNotification to notify all database objects that the database will be rekey so that the database objects of the same database can be closed.

#1343"
pasin,2016-12-22 22:23:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36cddf8e4b122d605275dcea48afd95196fbbb92,36cddf8e4b122d605275dcea48afd95196fbbb92,"Implement longpoll and continuous _changes timeout

* Implement _changes timeout for longpoll and continuous feeds

* The default timeout of 60 seconds applied will be applied if there is no timeout as well as heartbeat param set.

#1236"
pasin,2016-12-21 02:08:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0573e48d407b77182066736d325c10696e3efe03,0573e48d407b77182066736d325c10696e3efe03,"Fix crash in CBLRemoteSession

Applied the technique to ensure that _allRequests is retained inside the block.

#1429"
pasin,2016-12-21 01:44:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c6ceda83ebce5267a017b1af4a2b6d7e82ed6612,c6ceda83ebce5267a017b1af4a2b6d7e82ed6612,"Fix crash onAppBackgrounding

Make strong self to the weakSelf in the blocks to retain the self.

#1498"
pasin,2016-12-21 00:38:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a1b6424b970734cd37125cc873ad6bba6fa65c1,0a1b6424b970734cd37125cc873ad6bba6fa65c1,"Fix /_active_tasks result not include local db name

When getting _active_tasks, the `_db` will be nil as there is no db specified in the request URL. Instead of getting the local database from `_db`, get it from the replication object.

#1243"
pasin,2016-12-20 23:07:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9cdced8c00e57c32014c0108bd59cb1407345253,9cdced8c00e57c32014c0108bd59cb1407345253,"Fix replication retry is still active when the replicator is offline

* When the replicator is offline, also cancel the retryIfRetry delayed call.

* This also fixes #794 issue caused by a race condition when a pull replicator becomes online and the retryIfRetry is called about at the same time but before fetchRemoteCheckpoint is done. If this happens, two beginReplicating will be called and results to crash as the changeTracker will be started twice."
snej,2016-12-20 22:31:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/53c168652d2c13fa4a7097093cedba327a9ebd27,53c168652d2c13fa4a7097093cedba327a9ebd27,"Turned off logging in CBLArrayDiff

Also updated the project name in the source code comments.
Fixes #1492"
snej,2016-12-20 22:08:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e13d3d421c97226f880caf11dde2d5f7cf40fb7,0e13d3d421c97226f880caf11dde2d5f7cf40fb7,"Listener: Fixed parameter parsing in POST to _changes

Don’t JSON-encode body properties that are strings; otherwise values like
`longpoll` get quoted into `”longpoll”` and won’t be recognized.
Fixes #1235"
snej,2016-12-20 19:47:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b8f5a5d094d3c989eaa9774f038f7f3a9a672f0,8b8f5a5d094d3c989eaa9774f038f7f3a9a672f0,"Made [CBLJSON JSONObjectWithDate:] work for BCE dates (negative years)

Fixes #1423"
snej,2016-12-20 19:18:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a8903b9e851d5584abeec069ead4d2637b3bb91,9a8903b9e851d5584abeec069ead4d2637b3bb91,"Improved CBLGetHostName on Mac; it was wrong in some network conditions

On my home network with my new AT&T-installed router, gethostname()
returns “jens”, not “jens.local” as expected. Apparently the router’s
DHCP server is telling my computer it has an assigned DNS hostname of
“jens”, which overrides the Sharing system pref setting.

This was breaking the P2P unit test — the URL “https://jens/“ works,
but since the hostname is not in .local our cert-validation code doesn’t
accept the self-signed cert, which causes SSL connections to fail.

Quinn from Apple support says SCDynamicStoreCopyLocalHostName is the
correct call, but it’s not available on iOS so I still have to
conditionalize the code."
snej,2016-12-20 18:07:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/639291778881aaa0b34416cdf2d55015c78f6f60,639291778881aaa0b34416cdf2d55015c78f6f60,"Fixed an ordering dependency between replication tests

In Replication_Tests, test02_RunPushReplication has to run before
test04_RunPullReplication, because the push test populates a server db
that the pull test pulls from. This means the pull test will fail if
the push test hasn’t run first or if some other test has overwritten
that db in the meantime.

I fixed this by joining the two tests into one that first pushes and
then pulls.

I also fixed some other tests that were using the wrong server db,
which wasn’t harmful but was confusing me when I looked at the db name
in logs."
snej,2016-12-20 18:03:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3abe1f011f1519346e559f9021ae5f00b75cb275,3abe1f011f1519346e559f9021ae5f00b75cb275,"Ensure unit tests close all databases before deleting them

* Some unit tests were opening custom db instances but not closing them.
* Closing the CBLManager at the end of a test case isn’t sufficient,
  because the -close method closes databases but doesn’t wait for the
  background-thread counterparts to finish closing. This means those
  background DBs can be deleted (by the next test case’s -setUp) while
  still open, triggering SQLite warnings. Fixed this by making -tearDown
  explicitly delete each open database, which _does_ wait for the
  bg counterparts to close first."
snej,2016-12-20 17:57:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c70a41e0d554b4861645e404b57e4ace593c8d1,9c70a41e0d554b4861645e404b57e4ace593c8d1,"Fixed an open-database-count error in CBLManager

It was possible for a database instance to be unregistered twice from
CBL_Shared, making the -countForOpenedDatabase: wrong. I saw this happen
in unit tests when calling first -close and then -deleteDatabase: on
a CBLDatabase."
snej,2016-12-20 17:50:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a604794f5a71de69c913f1ba53218afae7a92c0,8a604794f5a71de69c913f1ba53218afae7a92c0,"Make sure CBLDatabaseUpgrade closes the old database

* sqlite3_close failed because a statement hadn’t been freed, so the
  db was always left open.
* Even with that fixed, it wasn’t closing the db until -dealloc, which
  meant its -deleteSQLiteFiles method was deleting the open db’s files,
  which is not good."
snej,2016-12-20 17:42:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/930aa634648aa00d69bbd71f60e5a359bf3fe358,930aa634648aa00d69bbd71f60e5a359bf3fe358,"Fixed ref-cycle between CBLRemoteSession and CBLRestReplicator

Made CBLRemoteSession.requestDelegate a weak reference.
Fixes #1438 … I didn’t take the patch from that PR because it also
makes CBLRemoteRequest.delegate weak, which I don’t want."
snej,2016-12-20 17:38:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a44eda851a3b3149f6857bff24c348c2e9ba0779,a44eda851a3b3149f6857bff24c348c2e9ba0779,"Ignore some internal warnings from SQLite error log

Some of the things it warns about are errors that are recovered from
internally (like schema changes), or are expected errors that happen in
normal use (UNIQUE constraint failures). If we log these via Warn(),
it triggers a unit test failure."
jamiltz,2016-12-20 16:36:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16ccb4ba55e68dc33a004628dd363d37a3bae5f4,16ccb4ba55e68dc33a004628dd363d37a3bae5f4,Update links on readme
pasin,2016-12-19 22:53:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3e81eed4a2395e1f3293bbb9679062872cc33bf,d3e81eed4a2395e1f3293bbb9679062872cc33bf,"Fix Carthage build failure from building SwiftForest scheme

Deleted `SwiftForest` scheme from CBForest.

#1487"
pasin,2016-12-19 21:50:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/812182ef946a17618a2b1cb5555547014fdb6e2e,812182ef946a17618a2b1cb5555547014fdb6e2e,"Disable comparison with NSHTTPCookieStorage in unit tests

Since iOS 10.2 and MacOS 10.12.2, the behavior of the Apple NSHTTPCookieStorage has been changed: An NSHTTPCookie with empty path string will not be added to the storage only if the cookie storage contains some cookies in it. Such change makes some checks that compare the result with the Apple cookie storage failed so the comparison with the Apple cookie is disabled until we are sure that the new behavior is correct or is not a bug."
pasin,2016-12-19 20:50:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7259d798ce0ab6caa759e22e607d59871876052a,7259d798ce0ab6caa759e22e607d59871876052a,"Merge pull request #1522 from couchbase/fix/file_protection

Fix/file protection"
snej,2016-12-19 17:01:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/455e8744d74f482041c249cf569b4a33155c2a2a,455e8744d74f482041c249cf569b4a33155c2a2a,"Merge pull request #1479 from mpapp/master

Fix crash in `-[CBLModel propertiesToSave]` for model objects with a deleted (or otherwise nil) document"
snej,2016-12-19 16:55:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4841d937cb324cd518700e21b5c69ebbda5f0fd9,4841d937cb324cd518700e21b5c69ebbda5f0fd9,"Limit size of _bulk_get request to 100 docs

This is consistent with the C# implementation. Also, apparently some
deployments have trouble with extremely large responses from SG.
Fixes #1500"
snej,2016-11-24 00:57:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9303880a387c366bdda81a30864c9e9a70efc95a,9303880a387c366bdda81a30864c9e9a70efc95a,"Replicator: Fixed some logic in -reachabilityChanged handling _suspended

When _suspended is true it should always call goOffline regardless of
trustReachability."
snej,2016-11-24 00:53:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49dce06a811b5bea8a7d01484a7b6623310c24cc,49dce06a811b5bea8a7d01484a7b6623310c24cc,"Replicator should save checkpoint _before_ going idle

Otherwise it doesn’t save the checkpoint if it’s finishing a replication
in a background task (the process will be suspended before the timer
goes off.)"
snej,2016-11-24 00:50:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/50cc50a89992eb39edd2320d0280d1d28bb031e5,50cc50a89992eb39edd2320d0280d1d28bb031e5,"Better support for iOS file protection and backgrounding

* Enabled file protection in the iOS test app (note: only takes effect
  on a real device; simulator does not implement file protection!)
* The test app logs when app state changes in various ways, like going
  into/out of the background or files becoming inaccessible.
* Made MYBackgroundMonitor work better if the app is already backgrounded
  and if the background task expires. (See MYUtilities commit)
* Added CBLDatabase.fileProtection property
* REST replicator monitors when files become inaccessible and suspends
  the replicator for the duration.
* Thread-safety improvements in CBLRestReplicator+Backgrounding: make
  sure UIApplication is only called on the main thread.
* Defined new internal status kCBLStatusFilesystemLocked for when we
  know that file I/O failed due to file protection. It gets reported
  as a 500 status with message “Device locked”.

Should fix #1461 (background monitor); #1443 #1422 #1405 (file protection)."
snej,2016-12-06 20:24:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3311cd0c59e691cbf494ddbf850e22d5d5869c82,3311cd0c59e691cbf494ddbf850e22d5d5869c82,Updated iOS deployment target to 8.0. Enabled some more warnings.
snej,2016-12-06 19:42:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b2fa65178f52f4f323e253d097377c7d27d16cc,8b2fa65178f52f4f323e253d097377c7d27d16cc,Fixed two doxygen warnings building the Documentation target.
snej,2016-12-06 19:27:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6c8e2e8cba29718dcebfb60ca8c4aba7da56459a,6c8e2e8cba29718dcebfb60ca8c4aba7da56459a,"Accepted Xcode 8 Swift 3 upgrade alert.

No change to Couchbase Lite source code. But I did remove some old
Swift bindings from CBForest; their targets don’t get built, but Xcode
was upset about them (kept wanting to upgrade, but then couldn’t find
the source files.)"
snej,2016-11-24 00:30:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f095f1cfdd8991da4cd822dacd3a2d4b97f83e03,f095f1cfdd8991da4cd822dacd3a2d4b97f83e03,"Close SQLite database if CBL_SQLiteStorage fails during opening

If CBL_SQLiteStorage opened the SQLite database but then got an error
during the remainder of the opening process, e.g. inability to decrypt
the db, or wrong schema version or something, it would back out without
closing the SQLite handle, causing a leak.

I’ve also enabled SQLite error logging, which was actually what showed
me the above bug (it warns if you delete the db file without closing it.)"
snej,2016-11-24 00:51:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8859a68cd6ed246086d0a3d53e252fff3c95f03,b8859a68cd6ed246086d0a3d53e252fff3c95f03,Fixed: DatabaseEncryption_Tests wasn’t closing all its databases
pasin,2016-11-18 00:03:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f7c42531e2f2c8c3dcb87c64aab28dc0a8ff05d,4f7c42531e2f2c8c3dcb87c64aab28dc0a8ff05d,"Fix ForestDB compaction causing the database file to keep growing

Applied the fix from ForestDB team.

#1515"
pasin,2016-10-01 17:25:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1b8a2c34eeb61cdfa7a60781ad608027944ddd40,1b8a2c34eeb61cdfa7a60781ad608027944ddd40,"Shared in-memory cookies across cookie storage

Each database creates its own cookie storage but the loaded cookies is now kept in
CBL_Shared and shared with all cookie storage of the same db name. Thus, all cookies
storages will see and operate over the same set of cookies.

#1464"
snej,2016-10-01 00:19:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0530376a6c2b635bf597610130db6922b6d88606,0530376a6c2b635bf597610130db6922b6d88606,"WIP: Added unit test for replicating w/ session (non-persistent) cookie

The new test -[Replication_Tests test22a_SyncGatewaySessionCookie] fails
because the cookie is not sent in the initial _changes request, causing
a 401 error. Fixing the session-cookie bug in CBLCookieStorage will
allow the test to pass.

For #1464"
snej,2016-09-30 17:44:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/816e0712bfa53bb2507eea8f1301804a985635f6,816e0712bfa53bb2507eea8f1301804a985635f6,"Workaround for getting wrong `Server:` response header on first request

It's possible for an initial HTTP request sent by the replicator to hit
some middleware that returns a different Server: header, instead of SG.
In this case the replicator shouldn't hang onto that first header,
since it'll never end up using replicator optimizations like bulk_get.

I changed the logic so that if the currently cached server header is
not from SG, and we receive a different value in a subsequent response,
we switch to the new value (presumably SG.) But once we've received a
response from SG, we keep that.

Also, this commit adds some extra `ChangeTracker` logging -- the full
request headers are now logged, in an attempt to figure out why the
Cookie header isn't getting sent for one developer (which is what
triggers the above situation.)

For #1464"
mz2,2016-10-06 23:59:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be0b26b0046f8f3830eaa3f929f1a62016111f68,be0b26b0046f8f3830eaa3f929f1a62016111f68,Addresses #1454 by adding an assertion and extending -propertiesToSave API documentation entry.
snej,2016-09-27 00:15:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c72291eb1e6b533e577189d0f12977b9ba500b9,0c72291eb1e6b533e577189d0f12977b9ba500b9,"Oops, actually enable concurrent reads & writes

The earlier commit for this (ce299f66) left the CONCURRENT_READS flag
in FMDB set to 0, so the concurrency wasn't actually enabled. Fixed
that."
snej,2016-09-23 02:55:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7ec0ec2342964d03a00dbc6deaa4bfb206e4b50c,7ec0ec2342964d03a00dbc6deaa4bfb206e4b50c,"Updated BLIP submodule to fix duplicate-symbols issue with MYLogging

Fixes #1456"
snej,2016-09-22 18:29:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea204a602505d33b07505cc4bc3a4e807353d8c6,ea204a602505d33b07505cc4bc3a4e807353d8c6,"Updated CBForest to pick up destructor/RefCounted crash fixes

Fixes #105"
pasin,2016-09-14 00:27:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66133e2ec76851ed16828f3b05476de0671ced3e,66133e2ec76851ed16828f3b05476de0671ced3e,"Merge pull request #1441 from couchbase/fix/rowid_cache

Invalidate SQLite docNumericID cache after a transaction is aborted"
snej,2016-09-13 22:48:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01360a98fff0d9535d484dab295a57cfc18cdcb5,01360a98fff0d9535d484dab295a57cfc18cdcb5,"Invalidate SQLite docNumericID cache after a transaction is aborted

If the cache isn't invalidated, an entry can be left behind for a new
doc that was created inside the canceled transaction. Then that rowid
can be used for a different doc, and now the cache points to the wrong
doc...

Fixes #1437"
pasin,2016-09-13 19:10:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f0d9e4eb2c50387b13c79f04b5aa8eeb4713c14,6f0d9e4eb2c50387b13c79f04b5aa8eeb4713c14,Merge branch 'dev'
pasin,2016-09-07 23:25:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/372b6bfdffc2ea70cf1fe040b52dd05937bdec9c,372b6bfdffc2ea70cf1fe040b52dd05937bdec9c,"Merge pull request #1431 from couchbase/fix/fmdb_changes

More rigorous thread-safety checks"
snej,2016-09-07 20:56:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/89efe371e5ad37bb4be9e431fe12fea5b1a60915,89efe371e5ad37bb4be9e431fe12fea5b1a60915,"More rigorous thread-safety checks

* Ensure the test+set of the `inUse` flag is atomic
* Wrapped begin/endUse around more sqlite3 calls, including in
  FMResultSet
* Made warnInUse throw an assertion-failure, not just log a warning.

Also fixed a memory leak of FMDatabase.databaseLock when closing db

For #1424"
jamiltz,2016-09-01 16:05:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2bf2a1f092eb156f5844b5f89c3a1ea60d41563,c2bf2a1f092eb156f5844b5f89c3a1ea60d41563,Fix broken link
pasin,2016-08-26 21:06:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ca3713787e018482c47aa9778cd4e661f46d3496,ca3713787e018482c47aa9778cd4e661f46d3496,"Fix Database_Tests.test26_DocumentExpiry failed on devices

The tested failed only when testing with ForestDB. After investigation, the issue occurred only when the Address Sanitizer is ON. After turning the Address  Sanitizer off, the test can pass as expected. To make the test run without a need to turning of the Address Sanitizer, I reduce the number of documents in test from 10000 to 5000.

#1358"
pasin,2016-08-26 19:54:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c6f8f6ae1ee31375c1f34304bd32130a22bfe3fb,c6f8f6ae1ee31375c1f34304bd32130a22bfe3fb,"Fixed OIDC unit tests failed on real devices

- Removed `callback_url` from OIDC Test Provider settings as SGW can gererate the callback url based on the issuer.
- In `loginToOIDCTestProvider`, use the host name of the remote db url to generate the redirect uri instead of using 127.0.0.1. This allows the OIDC tests to be run on real devices where cannot access SGW via 127.0.0.1.
- In `assertValidOIDCLogin:authBase:forRemoteDB`, relax the login host check so that the OIDC tests can be run on real devices without reconfiguring the OIDC Test issuer in `cbl_unit_tests.json`.

#1359"
pasin,2016-08-26 16:55:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b9a1827f4bc22418501fd7f0d5b977a5ecfa7e37,b9a1827f4bc22418501fd7f0d5b977a5ecfa7e37,"Updated SyncVersionString to 1.3

We have OIDC authenticator added to the replication. Bumped the SyncVersionString to 1.3."
pasin,2016-08-26 16:55:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28ca87a98d41edb96101dc3fc95bfecb34968442,28ca87a98d41edb96101dc3fc95bfecb34968442,"Updated SyncVersionString to 1.3

We have OIDC authenticator added to the replication. Bumped the SyncVersionString to 1.3."
pasin,2016-08-26 02:05:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/97d98dda394dd4eb9f1107974bcac4015b73cd1d,97d98dda394dd4eb9f1107974bcac4015b73cd1d,"Fixed Database_Tests.test18b_AttachmentMissingFile failure

Instead of accessing temp folder with /tmp, use NSTemporaryDirectory().

#1357"
pasin,2016-08-26 02:02:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5fa037bd88bcc1be8f12ae64df5ca14563f3f68,b5fa037bd88bcc1be8f12ae64df5ca14563f3f68,"Fixed XCode8 Ignoring return value error

SecRandomCopyBytes is declared with warn_unused_result attribute. Patched it with (void) to dismiss the error."
snej,2016-08-18 21:24:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f653593bd06a03dd08a094d89a5742127cae4465,f653593bd06a03dd08a094d89a5742127cae4465,"Fix for replicator notifications not getting posted

This works around an OS bug where NSNotificationQueue doesn't post its
notifications when called in PostASAP mode while the runloop is handling
a block.

The workaround is to not call CFRunLoopPerform, but instead use our
existing MYPerformOnThread utility, which schedules the block in a
different way that doesn't trigger the bug.

Fixes #1392"
snej,2016-08-18 19:18:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63c2f34fe13eb8673c4c13f1bd4a0218a4a83dc9,63c2f34fe13eb8673c4c13f1bd4a0218a4a83dc9,"Updated BLIP again (more IPv6 fixes in PocketSocket)

Fixes #1238 some more"
snej,2016-08-18 16:22:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c78713ec5b3217f4fa877290894fb2f75a0f6b75,c78713ec5b3217f4fa877290894fb2f75a0f6b75,"Updated BLIP & PocketSocket to fix IPv6 incompatibility in PSWebSocketServer

Fixes #1238"
snej,2016-08-17 22:40:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ab527ba56a7efb6e8aa724023fba019b19804571,ab527ba56a7efb6e8aa724023fba019b19804571,"Ensure changes-feed parser state is reset when new request starts

It wasn't getting reset on some non-fatal errors, which meant that on
the next retry it would start off in mid-parse, causing more errors.

Fixes #1403"
snej,2016-08-17 21:03:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7eb6a52bc78e0aa80fb62d14b06055392c28e2c2,7eb6a52bc78e0aa80fb62d14b06055392c28e2c2,"Work around macOS 10.12 problem with SQLCipher detection

The system SQLite on 10.12 reports that it has the SQLITE_HAS_CODEC
compile option; however, 'PRAGMA key' does not work.

To work around this, also call `PRAGMA cipher_default_kdf_iter',
which is SQLCipher-specific. If that doesn't return a value, we know
we're not talking to SQLCipher.

Fixes #1406"
snej,2016-08-22 19:13:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7e7cab552012e66a72e2a04e7e327dce94ba8ea5,7e7cab552012e66a72e2a04e7e327dce94ba8ea5,README.md: Updated branch name in Carthage instructions
snej,2016-08-19 15:45:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42beec69e97a04a73c70bca6c77811fb185ce0ca,42beec69e97a04a73c70bca6c77811fb185ce0ca,"Added a #define for the 'attachments' replication property

(No effect on code; just adding this to the list of properties.)"
pasin,2016-08-19 05:43:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c353cd025b5507575f1ccf96bb6627b6b7249282,c353cd025b5507575f1ccf96bb6627b6b7249282,"Merge pull request #1409 from couchbase/fix/repl_notify_1392

Fix for replicator notifications not getting posted"
snej,2016-08-18 21:24:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e25a7e2e310ebe8271e1c3fb159fe120756d67e0,e25a7e2e310ebe8271e1c3fb159fe120756d67e0,"Fix for replicator notifications not getting posted

This works around an OS bug where NSNotificationQueue doesn't post its
notifications when called in PostASAP mode while the runloop is handling
a block.

The workaround is to not call CFRunLoopPerform, but instead use our
existing MYPerformOnThread utility, which schedules the block in a
different way that doesn't trigger the bug.

Fixes #1392"
snej,2016-08-18 19:18:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/522ab2ae049439f14bf54791d32477215985026f,522ab2ae049439f14bf54791d32477215985026f,"Updated BLIP again (more IPv6 fixes in PocketSocket)

Fixes #1238 some more"
snej,2016-08-18 16:22:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/782ff0bd017e1fddf043676c16995557605395b6,782ff0bd017e1fddf043676c16995557605395b6,"Updated BLIP & PocketSocket to fix IPv6 incompatibility in PSWebSocketServer

Fixes #1238"
snej,2016-08-17 22:40:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c6c78b3ba9feb74980dce42fbc134ede22523a78,c6c78b3ba9feb74980dce42fbc134ede22523a78,"Ensure changes-feed parser state is reset when new request starts

It wasn't getting reset on some non-fatal errors, which meant that on
the next retry it would start off in mid-parse, causing more errors.

Fixes #1403"
pasin,2016-08-17 21:19:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d937aeaf1a06050cb9de03ded97b824af8688873,d937aeaf1a06050cb9de03ded97b824af8688873,"Merge pull request #1407 from couchbase/fix/sqlite_encryption_1406

Work around macOS 10.12 problem with SQLCipher detection"
snej,2016-08-17 21:03:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c8726dec8c158f0af4147b33a92e08e2a046750,9c8726dec8c158f0af4147b33a92e08e2a046750,"Work around macOS 10.12 problem with SQLCipher detection

The system SQLite on 10.12 reports that it has the SQLITE_HAS_CODEC
compile option; however, 'PRAGMA key' does not work.

To work around this, also call `PRAGMA cipher_default_kdf_iter',
which is SQLCipher-specific. If that doesn't return a value, we know
we're not talking to SQLCipher.

Fixes #1406"
pasin,2016-08-17 18:36:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78f4e1742d61c16bf4834560f2337a16968fd525,78f4e1742d61c16bf4834560f2337a16968fd525,"Update vendor/BLIP submodule

This is to uptake tvOS build warning fixes."
snej,2016-08-16 19:42:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de910a05c37dd0630c4528d851425453e2d50746,de910a05c37dd0630c4528d851425453e2d50746,"Update view's lastSequenceIndexed correctly if last seq is a design doc

The fix is in CBForest; I added a unit test here.

Fixes #1379"
snej,2016-08-16 19:42:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1dede5c0d2446ab38aef4272d1c055436d0f840d,1dede5c0d2446ab38aef4272d1c055436d0f840d,"Update view's lastSequenceIndexed correctly if last seq is a design doc

The fix is in CBForest; I added a unit test here.

Fixes #1379"
pasin,2016-08-15 21:08:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f879b7159d3faba43d249bdd8f6e133e96db18dd,f879b7159d3faba43d249bdd8f6e133e96db18dd,Bump version string from 1.3 to 1.3.1
pasin,2016-08-04 20:39:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/998a220da6852906a83f58f072ae26a731c431cd,998a220da6852906a83f58f072ae26a731c431cd,Merge branch 'master' into dev
pasin,2016-08-03 22:19:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49d38d253d9764a8a4ec2bba051c4aab11539fb9,49d38d253d9764a8a4ec2bba051c4aab11539fb9,"Fix import in CBLAuthenticator+OpenID

Current CBL iOS Phonegap plugin extracts headers and static library from CouchbaseLite.framework and links to the user app. Importing the header with `#import <CouchbaseLite/CBLAuthenticator.h>` needs to change to #import ""CBLAuthenticator.h"" which is more correct anyway.

#1395"
pasin,2016-08-02 23:42:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f4f8c6cd275385366f01514e72ae5e05dcff667,1f4f8c6cd275385366f01514e72ae5e05dcff667,"Update podspec to include listener with lite binary

From Cocoapods 1.0, the linter validates each subspec dependently so we cannot have a subspec that depend on the other subspec the way that we have setup the listener before. Now we always include listener together with the lite framework."
pasin,2016-08-01 20:48:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6ff40489f6744bffc7c33c1a2de15a7141b088d,a6ff40489f6744bffc7c33c1a2de15a7141b088d,Added tvOS podspec
pasin,2016-08-01 19:09:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b05041ca7568861f933ff13883901e0a1b03cf0,4b05041ca7568861f933ff13883901e0a1b03cf0,Added libc++ as default dependy to cocoapod
snej,2016-07-29 19:30:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3bc31f385d2720480446ab6462481225657c41a,d3bc31f385d2720480446ab6462481225657c41a,"Finished Xcode 8 compatibility

* Added conditional compilation to Swift unit test to resolve method-
  name changes in Swift 3
* Resolved a compiler warning in PocketSocket."
pasin,2016-07-29 17:28:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b1b324dded907f459887458f9594059c197c73d5,b1b324dded907f459887458f9594059c197c73d5,"Merge pull request #1390 from couchbase/feature/concurrent_sqlite_1389

Allow SQLite read access concurrently with a write transaction"
snej,2016-07-28 17:40:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce299f667bfd70c5e453d06973a651dea977b736,ce299f667bfd70c5e453d06973a651dea977b736,"Allow SQLite read access concurrently with a write transaction

This is legal since our databases are in WAL mode. It greatly improves
concurrent access -- the ConcurrentWrites unit test (which has two
reader threads and two writers) runs 2.25x faster on my Mac!

I made a slight change to database opening to ensure that the db is
always set to WAL mode, instead of just setting the mode when the db is
first created.

Fixes #1389"
snej,2016-07-28 17:43:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/99e76bbdbf02142ab5db7337e7431fc13fc0bad9,99e76bbdbf02142ab5db7337e7431fc13fc0bad9,Merge branch 'master' into dev
snej,2016-07-28 15:53:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/743766f4430bc7b3b111cf8b8b41cfeae7b915c8,743766f4430bc7b3b111cf8b8b41cfeae7b915c8,"Merge pull request #1388 from couchbase/feature/1387

Fix tvOS Unit Tests build failure when testing on device"
pasin,2016-07-27 21:43:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ccdad600be1fc217581949612b60c17588db1739,ccdad600be1fc217581949612b60c17588db1739,"Fix tvOS Unit Tests build failure when testing on device

#1387"
snej,2016-07-26 19:28:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc02f352142f34cace43f3a23dc24d46be190a83,bc02f352142f34cace43f3a23dc24d46be190a83,"Merge pull request #1385 from couchbase/feature/issue_1383

Fixed #1383 : Link libCBLForestDBStorage.a to CBL iOS Unit Tests and CBL tvOS Unit Target"
pasin,2016-07-26 01:04:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db781e2e489fd084b8d2760b6b4ee3b438a99a94,db781e2e489fd084b8d2760b6b4ee3b438a99a94,"Link libCBLForestDBStorage.a to CBL iOS Unit Tests and CBL tvOS Unit Tests target

This is the fix for #1383."
snej,2016-07-21 20:16:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/41e2dd6cd9d6f35738689de1c822d8fe6caf9552,41e2dd6cd9d6f35738689de1c822d8fe6caf9552,"Updated CBForest to pick up ForestDB rollback of perf regression

Fixes #1378"
snej,2016-07-21 20:14:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/121c735cc6ba46ec274b119ef408bd79569eec19,121c735cc6ba46ec274b119ef408bd79569eec19,Updated submodules to resolve new Xcode 8 compiler warning
snej,2016-07-21 20:10:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9bdfa08cce7b076492cb50cedc4a1b11b0d47eca,9bdfa08cce7b076492cb50cedc4a1b11b0d47eca,"Fixed stupid regex error in BuildFatLibrary.sh with iOS SDK >= 10

The regex that computes SDK_VERSION just took the last 3 characters of
the SDK_NAME, which breaks when the version goes to ""10.0"".
Fixed by matching the trailing sequence of digits and decimal points."
pasin,2016-07-21 18:40:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bff1a0370d86154172052e5960ab1d6cf39f0bb,2bff1a0370d86154172052e5960ab1d6cf39f0bb,"Update CBForest submodule to fix warning messages

Updated CBForest submodule to get the fix for unable to find object files warning messages.

#1376"
snej,2016-07-20 19:59:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d503c20a31f0b9a21e884122b53cf9ee32617980,d503c20a31f0b9a21e884122b53cf9ee32617980,"Updated BLIP to pick up fix for deadlock/crash in -[PSWebSocket dealloc]

Fixes #1369"
snej,2016-07-20 19:52:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6bacf37aedf1796d706ddd5cd066b94c653d7f5,b6bacf37aedf1796d706ddd5cd066b94c653d7f5,Merge branch 'master' into dev
pasin,2016-07-20 18:06:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e001baa70d1157c397146cc107e68ea98aab0403,e001baa70d1157c397146cc107e68ea98aab0403,"Merge pull request #1375 from couchbase/fix/iterator_fail_1370

Fixed ForestDB iteration issue"
snej,2016-07-20 16:56:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0163342d928a347b8b1ab1a3b28718d455154ac8,0163342d928a347b8b1ab1a3b28718d455154ac8,Updated CBForest; fixes #1370
snej,2016-07-19 04:12:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ead1da1fa19a57dced8c1bee2ee204cf3479e4a,0ead1da1fa19a57dced8c1bee2ee204cf3479e4a,"Added unit test to reproduce query enumeration error found in ToDoLite

It's a ForestDB regression. No fix yet; creating this branch to help the
ForestDB team reproduce and fix it.

For #1370"
pasin,2016-07-20 04:13:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a2a141289a8591651dd1011e0fa9b134e33e719,9a2a141289a8591651dd1011e0fa9b134e33e719,"Merge pull request #1371 from couchbase/fix/encryption_in_keychain

Fixed ability to store db encryption key in (macOS) Keychain"
snej,2016-07-19 03:19:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d634d5e44b51f0353b98f50cad7a483eae95e9e0,d634d5e44b51f0353b98f50cad7a483eae95e9e0,"Fixed ability to store db encryption key in (macOS) Keychain

If in the CBL API you specify an encryption key of `@YES` when opening
a database, it'll generate a random key and store it in the Keychain.
Unfortunately the code to generate the key broke a while ago, but the
unit tests wouldn't reveal the problem if they had already been run
before, because the key would already exist.

I fixed this by:
* Correcting the bug in CBLDatabase that prevented the key from being
  generated if an existing one couldn't be found
* Adding a new private method on CBLManager to delete a database's key
  from the Keychain, which is now called before the unit test runs."
snej,2016-07-14 17:38:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c41d6d8e269afdd9120bd4c06489d0f9c8e552d3,c41d6d8e269afdd9120bd4c06489d0f9c8e552d3,Merge branch 'master' into dev
pasin,2016-07-14 00:47:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0888d12f52b3fa56a8e54a4b6f86786565dc7982,0888d12f52b3fa56a8e54a4b6f86786565dc7982,"Merge pull request #1363 from couchbase/fix/ios7_1362

Restored iOS 7 / macOS 10.9 compatibility"
snej,2016-07-14 00:33:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/936651c511b56b1824d7812392618dad5e623645,936651c511b56b1824d7812392618dad5e623645,"Restored iOS 7 / macOS 10.9 compatibility

Conditionalized some usages of NSURLComponents methods that were only
added later.
Tested both the old and new code paths.
Clean bill of health from Deploymate.

Fixes #1362"
snej,2016-07-12 21:14:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2063b56fce3dc3bdd0a627a36cb58580af3e3d0,f2063b56fce3dc3bdd0a627a36cb58580af3e3d0,"Fix link errors in iOS Test App (and iOS unit tests)

Turned off dead-code stripping in the linker build options, to prevent
undefined-symbol errors when the unit test bundle links against the app."
pasin,2016-07-12 20:27:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6ed9cd7eab37a526a95b796a840ac95503c1d42d,6ed9cd7eab37a526a95b796a840ac95503c1d42d,"Fix iOS cocoapod to always link with libc++

As of 1.3.0, couchbase-lite-ios always requires libc++."
pasin,2016-07-12 18:42:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/016d360be35f0984423d3244efcb96faa1aae125,016d360be35f0984423d3244efcb96faa1aae125,Add CBL iOS and tvOS App scheme back
snej,2016-07-12 16:54:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/acf8c2a9ca046f27129ba3a518ad592fa065b356,acf8c2a9ca046f27129ba3a518ad592fa065b356,Merge branch 'dev'
snej,2016-07-12 00:34:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5802823cca16b406139638660e2acd3fc84618b1,5802823cca16b406139638660e2acd3fc84618b1,"Updated CBForest to fix multi-threading bug (MB-20076)

The bug only showed up in a CBForest test case, but it could happen in
normal operation of CBL, and the results are pretty bad -- docs being
randomly skipped in enumerations."
snej,2016-07-12 00:33:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5624edd422dbc8b59f991660a1c3db5dd27a52e,a5624edd422dbc8b59f991660a1c3db5dd27a52e,"Extended timeout of doc-expiration test, to account for slow ForestDB

ForestDB runs pretty slowly in a debug build, esp. with Address
Sanitization turned on, so the test often takes longer than the 20-sec
timeout. I extended it to 30 sec."
pasin,2016-07-08 01:55:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3cf8c4dfd10a6d1f45b689746c566171d3e48b9b,3cf8c4dfd10a6d1f45b689746c566171d3e48b9b,"Fixed CBLCookieStorage initWithDB comment

Fixed per recent changes for #1334"
pasin,2016-07-08 01:15:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ffcdd0253b76bb2bd533300b366c993f9baf820c,ffcdd0253b76bb2bd533300b366c993f9baf820c,"Merge pull request #1353 from couchbase/dev

Merge dev into master"
pasin,2016-07-08 01:10:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7863a9ba0a40e2cae63dda73e7903b9182fd1cb4,7863a9ba0a40e2cae63dda73e7903b9182fd1cb4,"Merge pull request #1352 from couchbase/fix/deletecookies

-[CBLReplication deleteAllCookies] should only delete cookies for its URL"
snej,2016-07-08 00:58:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/057039f9cd04dc3d02ff49d9ea2a2a790a46e1ef,057039f9cd04dc3d02ff49d9ea2a2a790a46e1ef,"API: Renamed -removeStoredCredentials: to clearAuthenticationStores:

As per https://github.com/couchbaselabs/couchbase-lite-api/issues/156"
snej,2016-07-08 00:54:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f3b0af42317b84ad43991d081c69d78223b7d1d9,f3b0af42317b84ad43991d081c69d78223b7d1d9,"-[CBLReplication deleteAllCookies] should only delete cookies for its URL

Regression from the recent move of cookie storage to the database."
pasin,2016-07-07 22:36:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d3cd725798d92b3b0d239e2ccb21d88f85a44d2,6d3cd725798d92b3b0d239e2ccb21d88f85a44d2,"Merge pull request #1351 from couchbase/dev

Merge dev into master"
pasin,2016-07-07 22:29:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2745b6d9f942658cf78fc1020522c10a3b9a4c6c,2745b6d9f942658cf78fc1020522c10a3b9a4c6c,"Merge pull request #1350 from couchbase/feature/issue_1314

Fixed #1314: Add unit test for opening 1.3 databases from Android/.NET"
pasin,2016-07-07 22:28:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/649e2968d9f73311d255309ea9af0e97b36a0f6b,649e2968d9f73311d255309ea9af0e97b36a0f6b,"Add Android and .NET 1.3.0 db files to unit tests

- Added Android and .NET 1.3.0 db files to unit tests
- Refactor the test code so that we don't need to test codes repletely for each database type and version.

#1314"
pasin,2016-07-07 22:10:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8264314d8ba27fbec6594f1501f00249acba462,f8264314d8ba27fbec6594f1501f00249acba462,"Merge pull request #1349 from couchbase/fix/oidc_keychain_scope_1348

OpenID tokens in Keychain should be per-database"
snej,2016-07-07 19:09:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a7733c14fd2dcfe37d1a159946cd82cac2c613f0,a7733c14fd2dcfe37d1a159946cd82cac2c613f0,"OpenID tokens in Keychain should be per-database

Store the database UUID in the kSecAttrAccount property in the Keychain
items. That lets us scope the lookup to that database.

Fixes #1348"
snej,2016-07-07 03:35:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/517fb6bd59d2c5e2e0726f74573d17f1c43435df,517fb6bd59d2c5e2e0726f74573d17f1c43435df,"Merge pull request #1342 from couchbase/feature/change_cookies_scope

Change cookie storage scope from replicator to database"
pasin,2016-07-07 03:20:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c8343bfdc4f1585a2a50119446c2b38a057b692c,c8343bfdc4f1585a2a50119446c2b38a057b692c,"Added iOS 1.3.0 db files for replaceDB and upgradeDatabase tests

- Added TestData/replacedb/ios130 and ios130-forestdb
- Modified Database_Tests.test23_ReplaceDatabaseSQLite, test23b_ReplaceDatabaseForestDB, and test24_upgradeDatabase accordingly.

#1314"
pasin,2016-07-07 00:23:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e41c7d45cda877d2a55bad1e8c8f03de4c15618c,e41c7d45cda877d2a55bad1e8c8f03de4c15618c,"Fix changing cookie scope per the second code review

- Removed non used variables and methods.
- Fixed crash when creating mutable dictionary from non existing local checkpoint document.
- Renamed CBLCookieStorage deleteAllCookies to reset. The method will also setting the value in the database info cookies key to nil.

#1334"
snej,2016-07-06 23:16:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7b1eac1ff5a439ae5f392d2b27cd1bef4b561cf,d7b1eac1ff5a439ae5f392d2b27cd1bef4b561cf,"""CBL Mac"" scheme shouldn't build Mac Tests target for Run action

It breaks Carthage, since it tells xcodebuild to build this scheme with
the Release config, but the tests don't build in Release (they use
symbols only exposed in Debug builds.)

Fixes #1097 some more"
pasin,2016-07-06 23:04:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56492d31283807b7e1dffc696c9c6a70a53fdeb3,56492d31283807b7e1dffc696c9c6a70a53fdeb3,"Fix changing cookie scope per code review

- Use database info to store the cookies instead of local doc
- Not cache the cookie storage inside the replicator object
- Move CBLReplication.cookies property declaration to CouchbaseLitePrivate.h
- Add CBLCookieStorage reset method declaration to CBLInternal

#1334"
snej,2016-07-06 23:00:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8ee376bafd8824b24de9a84cffac9c0fb638c38d,8ee376bafd8824b24de9a84cffac9c0fb638c38d,"Removed shared schemes for 'CBL Mac+SQLCipher' and 'CBL ___ Test App'

Also turned off ""Autocreate schemes"" checkbox.

Removing the SQLCipher scheme will work around the Carthage issue #1097.
The test app schemes are just unnecessary for most uses, as those apps
are just used as hosts for the unit tests and are built automatically
by the unit test schemes.

Fixes #1097"
pasin,2016-07-04 19:24:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/062aaedf442a7d033d37afb7718f5a2da08e29f9,062aaedf442a7d033d37afb7718f5a2da08e29f9,"Change cookie storage scope from replicator to database

- Added cookieStorages properties to the internal CBLDatabase.
- Cookies are stored in the local database info document under the key named `cookies`.
- Implemented migrateOldCookieStorage to migrate cookies from checkpoint docs to the new local data info document. The old cookies are removed after the migration.
- CBLReplication always accesses the database cookie storage only from the background thread.

#1334"
snej,2016-07-05 20:19:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/074299acd5cedb71cc9ee4acbc51c4b5539d3d41,074299acd5cedb71cc9ee4acbc51c4b5539d3d41,Merge branch 'master' into release/1.3.0
pasin,2016-07-01 23:41:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45b0959089aeb931e88691fed2f7142172ab4a75,45b0959089aeb931e88691fed2f7142172ab4a75,"Merge pull request #1337 from couchbase/fix/rekey_1233

Disallow rekeying a db if it's open in multiple CBLManagers"
pasin,2016-07-01 23:40:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72c1f675795355b3fb52d25a89c1eeba1324ab82,72c1f675795355b3fb52d25a89c1eeba1324ab82,"Merge pull request #1336 from couchbase/fix/missing_attachment_1180

Detect/handle file errors when saving a new attachment"
pasin,2016-07-01 23:19:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/47900dc60818a41c08b64f428c7d8a7e3c465efa,47900dc60818a41c08b64f428c7d8a7e3c465efa,"Merge pull request #1333 from couchbase/fix/router_crash_1325

Prevent premature dealloc of CBL_Router"
pasin,2016-07-01 23:17:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44bbbdea9df127d69b93a84d6358c5a99d3d94e8,44bbbdea9df127d69b93a84d6358c5a99d3d94e8,"Merge pull request #1332 from couchbase/fix/pending_1274

Newly-pulled docs shouldn't show up in pusher's pendingDocuments"
snej,2016-06-30 21:55:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/331f30090515079a22e469800f53479f749aa858,331f30090515079a22e469800f53479f749aa858,"Disallow rekeying a db if it's open in multiple CBLManagers

We can't rewrite the db if it's open by multiple handles (SQLite or
ForestDB). The proper solution is to close the other handles and then
re-open them [with the new key] afterwards, but that would be too
difficult to do for 1.3. So for now, just detect the situation and
fail with a descriptive error.

Fixes #1233 (we think)"
snej,2016-06-30 18:57:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/080ba67b5fd248f0d969473b881b15a660693e1c,080ba67b5fd248f0d969473b881b15a660693e1c,"Detect/handle file errors when saving a new attachment

CBLAttachment checks file paths for validity when initialized, but it
doesn't check for read errors when copying the file to the blob-store.
So if the file is moved or deleted before the revision is saved, the
blob isn't created but there's no error. This causes errors later on
when trying to push the revision.

Fixed by adding error handling when reading the file, and did some
refactoring to clean up the code.

Fixes #1180"
snej,2016-06-29 22:28:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6a13f68e4030902479c91a6c9b4c9aa09d1d54a,e6a13f68e4030902479c91a6c9b4c9aa09d1d54a,"Correctly propagate attachment ""content_type"" during db upgrade from 1.1

Fixes #1335"
snej,2016-06-29 20:06:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a74e65a76a4cf85d6a960fab80ed61480f2e5707,a74e65a76a4cf85d6a960fab80ed61480f2e5707,Merge branch 'dev'
snej,2016-06-29 19:58:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1685286bed147ad6b6a1ec4ac5e570cb9a7cd5fc,1685286bed147ad6b6a1ec4ac5e570cb9a7cd5fc,"Prevent premature dealloc of CBL_Router

It was possible for a CBL_Router sending an async response to be
dealloced early, since there was nothing keeping a reference to it
during the entire duration of its lifecycle. (I couldn't actually
reproduce this crash, unfortunately.)

To fix this I added a global set sRunningRouters that the router is
added to at the start of its -run method, and removed from at the end
of its -stopNow method.

Fixes #1325"
snej,2016-06-29 17:59:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa69700e82e88af953243d6e3d1ccbe4f4db2a73,fa69700e82e88af953243d6e3d1ccbe4f4db2a73,"Newly-pulled docs shouldn't show up in pusher's pendingDocuments

When the pusher is notified of a new revision, but decides to ignore it
because it's an 'echo' from a pull replication (or because it's rejected
by the filter), it should advance the checkpoint past that rev's
sequence.

This is a good optimization in general, to prevent the next push from
re-scanning the same revisions, but more importantly it tells
CBLReplication.pendingDocuments that those revisions aren't pending.

To fix this I did have to change the timing at which the pusher adds
revs to its internal _pendingSequences set, because it needs to happen
at the same time that skipped sequences are being handled.

Fixes #1274"
pasin,2016-06-28 21:08:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef4c2799741f46b0fc52f8927d52c0f9a949d039,ef4c2799741f46b0fc52f8927d52c0f9a949d039,"Merge pull request #1331 from couchbase/fix/keep_refresh_token_1328

Fixed OIDC authenticator forgetting refresh token after 1st refresh"
snej,2016-06-28 19:40:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3661012a120741a208b0e0c39d65df64da256b55,3661012a120741a208b0e0c39d65df64da256b55,"Fixed OIDC authenticator forgetting refresh token after 1st refresh

Fixes #1328"
snej,2016-06-28 19:31:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f38e9ea87a4247530774c41ec5e3d7ec2367a3a7,f38e9ea87a4247530774c41ec5e3d7ec2367a3a7,"Sanitize URL paths logged by CBLRemoteSession with SyncVerbose logging

For #1293 (a case I didn't catch earlier)"
pasin,2016-06-28 19:16:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49daf067ec94a5b5396a094109f0fbc3ba5331fe,49daf067ec94a5b5396a094109f0fbc3ba5331fe,"Merge pull request #1330 from couchbase/feature/remove_credentials_1302

Added API to remove OpenID tokens from Keychain"
snej,2016-06-27 22:26:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7048005ca9df1cb22225497b4f32a8bfec1bba5,c7048005ca9df1cb22225497b4f32a8bfec1bba5,"Added API to remove OpenID tokens from Keychain

New method is -[CBLReplication removeStoredCredentials:]

Also moved the recently-added .username property from CBLAuthenticator
to CBLReplication -- this makes it consistent that CBLAuthenticator
has no API of its own but has to be accessed through the replication object.

Fixes #1302"
snej,2016-06-28 00:39:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d9e1c6a543b1ce756da4aa856a06ef7eb105f843,d9e1c6a543b1ce756da4aa856a06ef7eb105f843,Merge branch 'dev'
snej,2016-06-28 00:39:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b9358e614819656faa1aa824d2e2ee0924abcf3,6b9358e614819656faa1aa824d2e2ee0924abcf3,"Don't strip debug symbols from static libraries

Set STRIP_INSTALLED_PRODUCT = NO in targets that build static libraries.
Fixes #1327"
snej,2016-06-27 20:06:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e0276291139d371f7669c45105ec17631f235d5,4e0276291139d371f7669c45105ec17631f235d5,"Merge pull request #1324 from couchbase/feature/issue_1323

Fixed #1323 : attachment content length = 0 when pushing the document"
pasin,2016-06-27 20:00:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e973d0f92cb5dc8ff70c3039511cd5d6f82f1c6,8e973d0f92cb5dc8ff70c3039511cd5d6f82f1c6,"Fixed checking contentLenth per code review

Instead of checking if the attachement is encrypted, check if it's zero.

#1323"
pasin,2016-06-25 06:00:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f7599f8c26be8959c9cd111837be21b9ae3b6d3,8f7599f8c26be8959c9cd111837be21b9ae3b6d3,"Fix attachment content length = 0 when pushing the document

The issue happens only when the database is encrypted. When the attachment is encrypted, the actual content length cannot be determined when getting the attachment stream.

The fixing is to use the declared length as the content length if the attachment is encrypted.

#1323"
pasin,2016-06-25 05:50:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b4562c5b1168f8f9f4b42f39e159045971f03d4a,b4562c5b1168f8f9f4b42f39e159045971f03d4a,"Fixed test26_OpenIDConnectAuth again

Not quite sure why the fix didn't get commit last time."
pasin,2016-06-25 03:58:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/26b665dd8fed26260d6edbb3b877b832f7ae51a6,26b665dd8fed26260d6edbb3b877b832f7ae51a6,"Merge pull request #1322 from couchbase/dev

Merge dev into master"
pasin,2016-06-25 03:54:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a792a5151a71b08720c7ed530732655e4b7c7945,a792a5151a71b08720c7ed530732655e4b7c7945,"Merge pull request #1321 from couchbase/feature/issue_1316

Fix archive binaries of CBLForestDBStorage.a and CBLJSViewCompiler.a"
pasin,2016-06-25 03:53:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ccd4131fcd5b350d2f15ca318c547cd6a4947e01,ccd4131fcd5b350d2f15ca318c547cd6a4947e01,"Fix archive binaries of CBLForestDBStorage.a and CBLJSViewCompiler.a

Implemented the same fix in 1.2.1 (331e529f9a8644f68cb8b7a91c542dd85b3e1cd5).

#1316"
pasin,2016-06-21 23:53:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d26a185b887415c30716f476dcf6c2da94fe30fb,d26a185b887415c30716f476dcf6c2da94fe30fb,"Merge pull request #1313 from couchbase/dev

Patch OIDC unit tests"
pasin,2016-06-21 23:52:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1c691ab2cc9a195ebd78395ce56f11f2281c74f0,1c691ab2cc9a195ebd78395ce56f11f2281c74f0,"Patch OIDC unit tests

The previous fix (9c4dfb81b418c88cfc97dbd3e37beeca89446cff) is missing the fix in pullWithOIDCAuth: method."
pasin,2016-06-21 18:51:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d694a423731d88cd4a579b78d4b18cfd10240b40,d694a423731d88cd4a579b78d4b18cfd10240b40,"Merge pull request #1311 from couchbase/dev

Merge unit test fixes from dev to master"
pasin,2016-06-21 18:50:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6258d98b92fc0b7f0c54651e053dd10efd3e5ef4,6258d98b92fc0b7f0c54651e053dd10efd3e5ef4,"Increase timeout in Database_Tests.test26_DocumentExpiry

This is a workaround for #1309. We should reduce the timeout back to 5.0 seconds after #1309 is fixed."
pasin,2016-06-21 18:48:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8af0508d372d25a34f01759d1cdee69a31552d30,8af0508d372d25a34f01759d1cdee69a31552d30,"Fixed ChangeTracker_Tests.test_DocIDs

Removed a workaround for https://github.com/couchbase/sync_gateway/issues/1857."
pasin,2016-06-21 18:45:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c4dfb81b418c88cfc97dbd3e37beeca89446cff,9c4dfb81b418c88cfc97dbd3e37beeca89446cff,"Fix OIDC unit tests

- Fixed username assertion check. SGW now returns the username with <issuer>-<userid>_<subject>. But if the issuer contains any invalid characters (underscore, forward slash), the issuer name will be hashed (https://github.com/couchbase/sync_gateway/commit/5077268a4a5414d74fa947063171ef8f7f985f51).

- Used non-SSL db URL for testing OIDC with the test provider. Opened issue for using HTTPS (https://github.com/couchbase/couchbase-lite-ios/issues/1308)."
pasin,2016-06-20 18:13:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4c6eca0a95ab0e05d7982c36ce801c1cf08c1c6,f4c6eca0a95ab0e05d7982c36ce801c1cf08c1c6,"Merge pull request #1306 from couchbase/dev

Merge from dev to master"
pasin,2016-06-17 17:29:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98951ba730a0f4793be68949ae74b599a9174379,98951ba730a0f4793be68949ae74b599a9174379,"Merge pull request #1305 from couchbase/feature/issue-1304

Fix OpenIDController+UIKit missing import UIKit"
pasin,2016-06-17 17:27:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85c3fffa490820b68b15ce0c397b4b036d67d01c,85c3fffa490820b68b15ce0c397b4b036d67d01c,"Fix OpenIDController+UIKit missing import UIKit

Added `#import <UIKit/UIKit.h>` to OpenIDController+UIKit.h.

#1304"
pasin,2016-06-17 17:11:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b257c3f0768f280f022b9fa04fb47622cdd9b76,6b257c3f0768f280f022b9fa04fb47622cdd9b76,"Merge pull request #1303 from couchbase/feature/issue-1301

Fix OIDC Authenticator not getting refresh token"
pasin,2016-06-17 17:10:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b28ab3b7847d787c21811dececf1591ba89de2b0,b28ab3b7847d787c21811dececf1591ba89de2b0,"Fix OIDC Authenticator not getting refresh token

Add offline=true to the GET _oidc_challenge request.

#1301"
snej,2016-06-16 21:12:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6c1458a2072b42e4dad02918a0e17b84f478950,a6c1458a2072b42e4dad02918a0e17b84f478950,"OpenID: Added source files to Extras folder, description to README

Fixes #1299"
snej,2016-06-16 01:55:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8323efccfaa54bfc5ee40240b3ce686e153d7eac,8323efccfaa54bfc5ee40240b3ce686e153d7eac,"Redact OpenID & OAuth tokens in URLs being logged.

The URL sanitization method we already use has been extended to redact
the values of query params whose names include ""token"" or ""code"".

Fixes #1293"
snej,2016-06-15 23:58:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eabb64d71d4d66632d8231f6b166d7aa741cbcc8,eabb64d71d4d66632d8231f6b166d7aa741cbcc8,"OpenID: Don't use fake redirect_uri in UI controller

Fixes #1289"
snej,2016-06-10 00:37:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e080c725e28e61f8c8ae4197817ff75575b870c,3e080c725e28e61f8c8ae4197817ff75575b870c,"Updated ChangeTracker_Tests for compatibility with current SG builds

Also added CBLTestCase.remoteServerVersion, although I'm not using it yet."
snej,2016-06-09 21:24:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d82a558525ac2840b92625dfd87af1b424f57dc8,d82a558525ac2840b92625dfd87af1b424f57dc8,"Factored out login code from CBLRestReplicator

This allows for logins without replication, which we might want for
OpenID, even though this commit adds no public API for that.

It also simplifies CBLRestReplicator and makes authenticators easier to
test."
snej,2016-06-08 20:15:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce5ce79fd814948004c4334f8cf0475d87d8d08e,ce5ce79fd814948004c4334f8cf0475d87d8d08e,OIDC authorizer implements CBLSessionCookieAuthorizer.
snej,2016-05-19 23:13:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8226084f4ec1dcf09485641bb3765812e7cc9b4d,8226084f4ec1dcf09485641bb3765812e7cc9b4d,"Added OpenID Connect authorizer [API change]

API additions:
	<CouchbaseLite/CBLAuthorizer+OpenID.h>
	+[CBLAuthorizer OpenIDConnectAuthorizer:]
	CBLAuthorizer.username property
	CBLOIDCLoginCallback block type
	CBLOIDCLoginContinuation block type"
pasin,2016-06-16 01:20:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16bb32040f491337840e1e86979911746b51fecc,16bb32040f491337840e1e86979911746b51fecc,"Merge pull request #1297 from couchbase/fix/local_replication_1292

Fix local-to-local replication"
snej,2016-06-15 22:50:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad22bebd82a50f8e4ba890912335fe7867d33353,ad22bebd82a50f8e4ba890912335fe7867d33353,"Allow LiteServ (and CBLManager) to set default maxRevTreeDepth

* New private property CBLManager.defaultMaxRevTreeDepth. This defaults
  to 20. Databases that haven't had an explicit maxRevTreeDepth set will
  default to this value.
* In the REST API, GET of a database returns a property ""revs_limit""
  whose value is the database's maxRevTreeDepth
* New LiteServ flag ""--revs_limit"": the following arg is a number,
  which will set CBLManager.defaultMaxRevTreeDepth.

Fixes #1291"
snej,2016-06-15 20:20:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25bc191dd53efd9aefb8413b2e8f1e1688b8207c,25bc191dd53efd9aefb8413b2e8f1e1688b8207c,"Fixed local-to-local replication

Regression from the conversion to NSURLSession. The CBL_URLProtocol has
to be explicitly registered with the session. This restores the ability
of the replicator to reach URLs served by the router.

Fixes #1292"
snej,2016-06-15 20:18:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d456835cfd8a5105399c3e01892933816c88329e,d456835cfd8a5105399c3e01892933816c88329e,"Fixed router errors when HTTP request has indeterminate length

CBLRouter had trouble reading the response body if it was in the
form of an HTTPBodyStream instead of an HTTPBody.

Fixes #1045"
snej,2016-06-15 19:50:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2926bf436af6307c86e6d34d660aff86abca2a3c,2926bf436af6307c86e6d34d660aff86abca2a3c,"Router: Greatly improved error messages from _replicate and _active_tasks

If a one-shot replication fails, you now get full info in the response
body, instead of just a ""500 Internal Server Error"" status.

For #1292"
snej,2016-06-14 20:35:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a941a48fd12f3e8639b2197e8de7fc2dac3094ba,a941a48fd12f3e8639b2197e8de7fc2dac3094ba,"Xcode 8 compatibility (partial)

Resolved some new compiler warnings about ignoring the return value of
SecRandomCopyBytes."
snej,2016-06-10 22:55:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e5f6434a26d43c72b3a9e580a247cc49c62f5da1,e5f6434a26d43c72b3a9e580a247cc49c62f5da1,"Define sync protocol version for user-agent in source, not project config

Fixes #1044"
snej,2016-06-10 22:48:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/340e281c94e62f0d6a470ce7342222e47b599e94,340e281c94e62f0d6a470ce7342222e47b599e94,"Added public CBLQuery.view property

Simply exposing an instance variable. This allows two queries to be
compared to see if they're on the same view.

Fixes #984"
snej,2016-06-10 20:12:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc47d0c11b6c5dc4b5528cead2a6c421a5bd064c,bc47d0c11b6c5dc4b5528cead2a6c421a5bd064c,"LiteServ regression: Wasn't logging its startup message in Release builds

Fixes #1283"
pasin,2016-06-08 23:06:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec6eb43f281ae302a0a3f073ebc10f4915e58a52,ec6eb43f281ae302a0a3f073ebc10f4915e58a52,"Merge pull request #1280 from couchbase/fix/bulk_docs_error_1279

Don't stop replicator if a bulk-uploaded doc gets an error"
snej,2016-06-08 21:12:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e8edf59cdeca92a200afde28dd634b4cdb29492,3e8edf59cdeca92a200afde28dd634b4cdb29492,"Multipart response from ?open_revs shouldn't have ""ok"":{...} wrapper

The de facto standard for open_revs (as tested with CouchDB 1.6) is for
the individual parts of the multipart response to be just the plain
revision body. It's only in the JSON output format that each item of
the array has an ""ok"":{...} wrapped around the body.

For couchbaselabs/couchbase-lite-api#155"
snej,2016-06-08 20:48:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ec8603a016d298fdfe8a47d51cc12b90d1a474f,0ec8603a016d298fdfe8a47d51cc12b90d1a474f,"Don't stop replicator if a bulk-uploaded doc gets an error

If a call to _bulk_docs returns an error for one of the docs (other
than 401 or 403) we propagated that error to the replicator's error
property, which stops the replication. Unfortunately there have been
situations (due to bugs in either CBL or SG) where a specific document
always triggers a 400 error. This doc would then always abort the
replication, preventing any newer revisions from being pushed

Instead, we now just keep going. The affected revision still isn't
removed from the ""pending"" list, so the checkpoint won't advance past it
and we'll attempt to push it again the next time.

Fixes #1279"
snej,2016-06-07 22:09:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7beb985782396ffa4a2912ac0e1ee32d90dffaaa,7beb985782396ffa4a2912ac0e1ee32d90dffaaa,"Fixed exception pulling doc updates en masse (regression)

CBLBulkDownloader would trigger an exception in NSJSONSerialization if
any of the docs it's downloading already have local revisions.
Regression from the introduction of CBL_RevID. There was no unit test
covering this situation, so I've added one.

Fixes #1276"
snej,2016-06-07 21:12:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6434af8f71d8962872d0a835b5acc2fd9f611f46,6434af8f71d8962872d0a835b5acc2fd9f611f46,Merge branch 'master' into dev
snej,2016-06-07 19:06:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/32faea438b5029ad95ca2a461742cd7af1baea7b,32faea438b5029ad95ca2a461742cd7af1baea7b,"Fix 1.3 regression: Replicator isn't remembering HTTP cookies

CBLRESTReplicator wasn't instantiating its CBLCookieStorage, so
cookies were never set or used. This broke any cookie-based logins.

Regression from the switch to NSURLSession early in 1.3 development :("
snej,2016-06-06 21:02:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ae0a1578dd1ade5dd4071a655b3661bc3b5c84a,1ae0a1578dd1ade5dd4071a655b3661bc3b5c84a,Fixed some iOS compile errors (int sizes vs. format specifiers)
snej,2016-06-06 20:19:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64d46ffa50b41a1953f66f9314c0f0e6b4e006f7,64d46ffa50b41a1953f66f9314c0f0e6b4e006f7,"Merge pull request #1272 from couchbase/disable-liteserv-app-transport-security

Disable App Transport Security for Mac OS X LiteServ"
sethrosetter,2016-06-03 01:35:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3c3b39f3122ce70334da5a22bd12b4b2cced771,d3c3b39f3122ce70334da5a22bd12b4b2cced771,Remove NSExceptionDomains
sethrosetter,2016-06-02 23:55:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea4d0bac61b034f542390dffaa920449ce1a7d8c,ea4d0bac61b034f542390dffaa920449ce1a7d8c,Disable App Transport Security for Mac OS X LiteServ
pasin,2016-06-02 18:02:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5addeec0684ae200dfa31e9a09957f6052e4afb2,5addeec0684ae200dfa31e9a09957f6052e4afb2,"Merge pull request #1261 from couchbase/fix/empty_conflicts_1260

Don't return an empty ""_conflicts"" array from REST API"
snej,2016-05-25 20:56:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f15eb9e12e9e2695aabd84e7dd4bbd2df6d7a7a7,f15eb9e12e9e2695aabd84e7dd4bbd2df6d7a7a7,"Don't return an empty ""_conflicts"" array from REST API

In a document GET with ?conflicts=true, the code to find the conflicts
could filter out all the revisions and end up with an empty array, then
add the _conflicts property anyway.

Turns out most of the callers of -getAllRevisionsOfDocumentID: needed
to filter out deleted revisions, so I added an includeDeleted parameter.
This simplifies the callers a bit and saves some work, as well as
fixing this bug.

Fixes #1260"
pasin,2016-06-01 14:56:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e91bfd9a63d5f5233be27993561b1c654f887751,e91bfd9a63d5f5233be27993561b1c654f887751,"Merge pull request #1262 from couchbase/feature/ttl_rest

REST API for document expiration"
snej,2016-05-28 19:11:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e667f38e5280b7f5442d70cf34c1f95ce029affd,e667f38e5280b7f5442d70cf34c1f95ce029affd,"Work around Cloudant 403 error when POSTing to _changes

We had only seen 401 and 405 errors before, but now a 403 was reported,
so I've added it. (I also refactored the code a little for readability.)

Fixes #1267"
snej,2016-05-26 21:35:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4aa204e60e9444cba2f3f35bbc348fb8f5fb40a9,4aa204e60e9444cba2f3f35bbc348fb8f5fb40a9,"Router: Incorrect ""error"" property in response for GET of deleted doc

It should be ""error"":""not_found"", not ""error"":""deleted"".

Fixes #1263"
snej,2016-05-26 21:11:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0c85441599cd2f15b18485c573bcff1df8e5735,a0c85441599cd2f15b18485c573bcff1df8e5735,"REST API for document expiration

* In a PUT of a doc (or _bulk_docs), adding an _exp property sets the
  expiration date. Property value can be a number (Unix timestamp),
  string (ISO-8601), or JSON null. A 0 or null clears the expiration.
* To retrieve expiration date, add ?show_exp=true to the GET request,
  and the document body(ies) will contain an _exp property (with a
  string value) if the document has an expiration.

See https://github.com/couchbaselabs/couchbase-lite-api/issues/141"
snej,2016-05-26 00:03:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b0fa2652af8df143c787d71d475d43b7a28081e4,b0fa2652af8df143c787d71d475d43b7a28081e4,Removed obsolete CBForest global variable C4GenerateOldStyleRevIDs
snej,2016-04-27 22:28:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1502ee27a6ee6fc1ed7bdb9aa46e5c0528e932bd,1502ee27a6ee6fc1ed7bdb9aa46e5c0528e932bd,"Implemented doc expiration and purge notifications

* Implemented the expiration/TTL API for SQLite & ForestDB.
* Documents being purged now post DatabaseChanged notifications.

Fixes #1181"
pasin,2016-05-24 18:12:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e7081c185daf6b2e58240c64253506ae9237b43f,e7081c185daf6b2e58240c64253506ae9237b43f,"Merge pull request #1254 from couchbase/fix/wrong_conflicts_1252

Fixed: doc._conflicts passed to map function may include wrong revID"
snej,2016-05-21 00:42:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3fc496eb9b31e3e2f1054ffd5ef18514b56a98ab,3fc496eb9b31e3e2f1054ffd5ef18514b56a98ab,"Fixed: doc._conflicts passed to map function may include wrong revID

When a new revision of a doc isn't the winner (i.e. it's on a shallower
branch), the view indexing code re-indexes the existing winning revision
instead. It should add the new losing revision to the _conflicts array,
but it was getting mixed up and adding the winning rev. Fixed.

Fixes #1252"
snej,2016-05-17 00:18:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f18ecd3748ae0d731e6b54e48b27e143ffffa2a2,f18ecd3748ae0d731e6b54e48b27e143ffffa2a2,"Made CBLRemoteRequest JSON error detection work with CouchDB-type server

Fixes a minor bug in 6f3c6fcf -- the workaround for CouchDB not returning
JSON as application/json didn't have the right string constant to
detect the ""text/plain"" type it returns.

For #1245"
snej,2016-05-16 18:45:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/955e8c671507446707396f5e78a6ff9af52dd13d,955e8c671507446707396f5e78a6ff9af52dd13d,"Be more careful with attachment lengths, & other improvements

Attempting to resolve the attachment length mismatch reported in #1207.
Still haven't found the cause, but made sure the pusher and listener
set the Content-Length to the actual data length, not the value from the
""length"" property which might be inaccurate. Also added a warning when
the two lengths disagree.

Also some cleanup in CBLAttachment, like better checking of the body
object on creation.

For #1207"
pasin,2016-05-16 17:43:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b48f1d6338d3c592714f3abfc863b7d00c901e9e,b48f1d6338d3c592714f3abfc863b7d00c901e9e,"Merge pull request #1246 from couchbase/fix/better_server_errors_1245

CBLRemoteRequest reads error from JSON body when it gets a 4xx/5xx status"
snej,2016-05-13 22:52:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f3c6fcf2b4b1b64fc3fdf0afacbb74569ca69c8,6f3c6fcf2b4b1b64fc3fdf0afacbb74569ca69c8,"CBLRemoteRequest reads error from JSON body when it gets a 4xx/5xx status

- Moved the JSON buffer from CBLRemoteJSONRequest up to CBLRemoteRequest.
- Took the status code out of the error message created by
  CBLStatusToNSErrorWithInfo.
- Removed the createTarget setting from the replications run by
  ReplicatorInternal_Tests; it's not supported by SG so it just causes
  spurious 412 errors.

Fixes #1245"
snej,2016-05-13 17:43:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80c0cc1f567f0a7098c2a49f0d09ab3a6bced386,80c0cc1f567f0a7098c2a49f0d09ab3a6bced386,Merge branch 'master' into dev
snej,2016-05-11 16:21:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e073760d97d7c356160d7e36ba797acae95a15e6,e073760d97d7c356160d7e36ba797acae95a15e6,Fixed errors with release/archive build of Listener
snej,2016-05-09 21:52:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05dd9333baafbd21e3a38a77a95fb52d3a3f05ab,05dd9333baafbd21e3a38a77a95fb52d3a3f05ab,"SQLite: Don't insert unnecessary revisions in -forceInsert:

Instead of inserting every single revision in the history (and then
possibly pruning most of them later), find the common ancestor and
just insert the ones newer than it. If there's no common ancestor,
only insert maxRevTreeDepth revisions, as any more will just be
pruned."
snej,2016-05-09 21:50:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c34c8fd1d9f1b6cffc4536a3dc14271b37d9a62,2c34c8fd1d9f1b6cffc4536a3dc14271b37d9a62,"Reduce number of revs sent with GET and _bulk_get requests

The pull replicator sends more local revIDs than it needs to, as
context when requesting documents. This wastes bandwidth.

Also, it only sends these when the doc has attachments (the atts_since
parameter.) It should send them always, so SG can intelligently prune
the history it sends in the response. If there are no attachments it
will use a newly-defined 'revs_from' parameter for these instead.

Finally, if there are no known ancestors to send, it now sends a
newly-defined 'revs_limit' parameter whose value is the db's maximum
rev tree depth, to tell the server the max history size to send.

Fixes #1242"
pasin,2016-05-06 18:47:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d6e6355e46cacab46d404bfb5e7ceaa1a92a7c9,2d6e6355e46cacab46d404bfb5e7ceaa1a92a7c9,"Backout source_files setting for osx podspec

For some reason, setting source_files to the OSX couldn't pass cocoapod linting. I backed out this change and we could explore this more if somebody has an issue without setting the source file for the OSX.

#1205"
pasin,2016-05-06 18:34:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b9c071f4048475b22adcba40cff656279ce0e40,8b9c071f4048475b22adcba40cff656279ce0e40,"Merge pull request #1229 from couchbase/fix/push_empty_1228

Fixed: One-shot push from empty database never stops"
snej,2016-05-05 23:38:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/55ec67eb8e9b92ffb06fcdc50b8adf2c221790c6,55ec67eb8e9b92ffb06fcdc50b8adf2c221790c6,"Merge pull request #1237 from couchbase/fix/endless_merge_1217

More accurate rev pruning in SQLite storage (fixes endless-merge bug)"
snej,2016-05-05 22:00:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75a25b5d70f978c610e1170d14bb9d5be516d5ce,75a25b5d70f978c610e1170d14bb9d5be516d5ce,"Optimization for SQLite -getPossibleAncestorRevisionIDs:

Can just test the no_attachments flag in the SQL query instead of
doing a SELECT on every rev afterwards to read the flag."
snej,2016-05-05 18:26:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0572ee76106d7967b1e720f935a45159a8defed,a0572ee76106d7967b1e720f935a45159a8defed,Improved 'Database' logging for SQLite storage
snej,2016-05-05 22:19:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4d7e7a8f2ab611ba533ff33a403ebf5314b601a7,4d7e7a8f2ab611ba533ff33a403ebf5314b601a7,"Updated old workaround in SQLiteStorage to work with the real fix

If a revision being PUT turns out to be a duplicate, we should fix the
parent link of the pre-existing row, because it was probably nulled out
when its previous parent got pruned.

The situation is like this: we used to have
   1 <-- 2/
Where 2 is a deletion. Then rev 1 got pruned because the old pruning
algorithm was sloppy and just deleted all non-current revs below a
certain generation count:
         2/
Then 1 got pulled by the replicator because the server is behind and
still has that rev:
   1     2/
Note that there's no link from 2 to 1 now! Instead 1 is current, so it's
a false conflict. Now the app decides to resolve the conflict by
deleting 1. But this creates a revision identical to 2, so SQLite won't
add it. In this situation we used to clear 1's current flag; but that
just makes 1 go away during the pruning, putting us back in the same
state as before. We also need to fix the parent link from 2 to point to
1:
   1 <-- 2/
Now 1 is part of a branch and won't be pruned, but the branch is
deleted so the conflict is gone.

Fixes #1217"
snej,2016-05-05 01:39:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/093a6a770c3d05a3e44c449bebe527cf932f896a,093a6a770c3d05a3e44c449bebe527cf932f896a,"More accurate rev pruning in SQLite storage (fixes endless-merge bug)

The quick-and-dirty pruning algorithm for SQLite wasn't good enough. It
would get rid of all non-leaf revisions of a branch, if there was a
much deeper branch as well. This could cause the parent of the short
branch's leaf to be added again if pulled by the replicator, which
effectively re-creates the conflict if the short branch ended in a
deletion.

The code now does the Right Thing by traversing the rev tree and
preserving all revisions that are within maxRevTreeDepth generations of
a leaf.

Unfortunately this is going to slow down insertions somewhat. It could
be optimized because there are some redundant fetches of revs being
done, but honestly I'd rather save the effort for ForestDB.

Fixes #1217"
snej,2016-05-05 21:58:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e27581ab393f2fa6acba80464ad2d010595b52f8,e27581ab393f2fa6acba80464ad2d010595b52f8,Updated MYUtilities. Fixed Mac listener leak. Fixed +enableLogging: bug.
snej,2016-05-04 17:52:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2864e0bf3381fb827a783cc2ee478157b89c4a81,2864e0bf3381fb827a783cc2ee478157b89c4a81,"Fixed assertion failure pushing a rev that's already compacted/pruned

Fixes #1217"
snej,2016-05-04 16:18:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0975fca90c6466d576b7cfdfe1773bb245c2351,a0975fca90c6466d576b7cfdfe1773bb245c2351,"Better handling of missing revision bodies. Fixed a crash.

Fixes #1234"
snej,2016-04-27 19:16:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91c5f3fe7941c96e0186ba624a2c59eefc8bea75,91c5f3fe7941c96e0186ba624a2c59eefc8bea75,"Fixed: One-shot push from empty database never stops

Weird edge case: the replicator never becomes active, so it didn't
realize it should stop when it didn't find any work to do.

Fixes #1228"
snej,2016-04-26 19:51:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/51b723efd3c2cd966006762e46dac2d90652e6ec,51b723efd3c2cd966006762e46dac2d90652e6ec,"Fixed crashing regression from CBL_RevID refactoring

An array of NSStrings was being passed to a method that expected an
array of CBL_RevIDs.
Added a utility to assert that an array contains revIDs.

Fixes #1224"
snej,2016-04-25 22:23:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0cddbe0175c52a5839acd19be07aef52fa0effc,e0cddbe0175c52a5839acd19be07aef52fa0effc,Merge branch 'master' into dev
snej,2016-04-25 21:56:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e116adf2cfbe3b7f2eeb1fc74f57b45703c15bf9,e116adf2cfbe3b7f2eeb1fc74f57b45703c15bf9,"Fixed CBL iOS Framework build

* Target had no source files, which causes Xcode build to fail (it
  doesn't link the binary together), so I added noop.m.
* Now needs to link with libstdc++ because CBL has a couple of C++
  source files."
snej,2016-04-25 20:45:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0cb8c1ed678f01d76c394082d1b42aba2d5af4d,e0cb8c1ed678f01d76c394082d1b42aba2d5af4d,Fixed archive build of LiteServ.app
snej,2016-04-25 19:48:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b2c9de80352e5856573646fa02dd6481d412b2a,8b2c9de80352e5856573646fa02dd6481d412b2a,"Fixed archive build of Listener

(Regression, from factoring out part of CBLView into the listener)"
snej,2016-04-25 19:06:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4ddb042eb5c821defd7916a091c668439795bb85,4ddb042eb5c821defd7916a091c668439795bb85,"Fixed missing symbol _CBLRegisterJSViewCompiler in archive build

(This is a subset of commit 4bc9e33c from the deb branch)"
snej,2016-04-25 19:01:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4bc9e33c840411da0ec5c4ccd6f973c30790d839,4bc9e33c840411da0ec5c4ccd6f973c30790d839,"Fixed framework .exp files

* CBLRegisterJSViewCompiler is in the listener now
* CBLCompareRevIDs no longer exists

Fixes #1221"
snej,2016-04-25 18:52:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de4d8d70badcc89547d723d7f8cf22bd42b5c34c,de4d8d70badcc89547d723d7f8cf22bd42b5c34c,"CBLMultipartBuffer cleanup/optimization, and renamed to CBLByteBuffer

Follow-up to #1149"
snej,2016-04-25 16:46:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e02f23c87378ab36d35c8d4ed70fe2aada25a7ba,e02f23c87378ab36d35c8d4ed70fe2aada25a7ba,Merge branch 'feature/multipart-buffer' of https://github.com/robertjpayne/couchbase-lite-ios into robertjpayne-feature/multipart-buffer
snej,2016-04-25 16:31:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94625e30902dd3e0c3342c7b2d147877da9d61d4,94625e30902dd3e0c3342c7b2d147877da9d61d4,"ForestDB optimizations

Avoid loading document bodies unless necessary."
snej,2016-04-21 22:12:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33b4609abcd02583736cde9402a4c3542e615dd5,33b4609abcd02583736cde9402a4c3542e615dd5,"Minor change to adapt to C4 API change

Need to call new c4db_free and c4view_free functions.
Also added C4 leak detection to CBLTestCase."
snej,2016-04-19 19:56:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/46b8494273f349f46c14318683c171d285ea8f5c,46b8494273f349f46c14318683c171d285ea8f5c,"RevIDs are now represented as a new class CBL_RevID, not NSString."
snej,2016-04-17 02:32:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c32147bd6e83c4c4b24b9159ff1d52ca9d0cbaf0,c32147bd6e83c4c4b24b9159ff1d52ca9d0cbaf0,"Made CBLChangeTracker docIDs filter compatible with CouchDB

CouchDB still requires the filter= parameter in the URL.
Also added a ChangeTracker unit test for docIDs, and found two Sync
Gateway bugs using it :(

For #1139"
pasin,2016-04-15 00:47:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/479e2843c40ffda79d549bb9f0bd42c2379eef1a,479e2843c40ffda79d549bb9f0bd42c2379eef1a,"Merge pull request #1211 from couchbase/fix/revpos_zero_1200

Allow incoming attachments with revpos:0, for PouchDB compatibility"
snej,2016-04-15 00:09:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/214d021717f7019c8e50f09719d382f0ec3912d9,214d021717f7019c8e50f09719d382f0ec3912d9,"Fixed crashing bug in MYLogging

Recent regression from the rewrite of the MYUtilities logging code.
Fixes #1214"
pasin,2016-04-14 20:16:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e31c95d136def578e0e1b72ccbd4cabb91bac0a,9e31c95d136def578e0e1b72ccbd4cabb91bac0a,"Merge pull request #1212 from couchbase/fix/websocket_gzip_1074

Partially fixed CBLWebSocketChangeTracker unzip errors"
pasin,2016-04-13 06:12:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/952818545b94733fd7854ea38946d36f2018b0f0,952818545b94733fd7854ea38946d36f2018b0f0,"Merge pull request #1184 from couchbase/fix/proxy_reachability

Improved CBLReachability (proxy handling, intermittent connections)"
snej,2016-04-12 01:09:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e51641c241b0c4edacec66a9af4d49162ff06c0,9e51641c241b0c4edacec66a9af4d49162ff06c0,"Partially fixed CBLWebSocketChangeTracker unzip errors

I still don't know why the first error occurs. But after that, the
ChangeTracker wouldn't be able to recover, because it would reconnect
but keep using the same GZip decoder, which wouldn't be in an initial
state. So it would keep getting gzip errors every time. I fixed this
by nil-ing out _gzip in the -start method.

I also improved the flow of control so, after it gets an error and
decides to close the WebSocket, it will ignore subsequent queued
messages to avoid getting confused by them and logging more errors.

For #1074"
snej,2016-04-11 23:24:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d8c82e0b420dc9045c62cd2c2687b0ab9d00d858,d8c82e0b420dc9045c62cd2c2687b0ab9d00d858,"Allow incoming attachments with revpos:0, for PouchDB compatibility

Fixes #1200"
pasin,2016-04-11 19:28:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd49e3d4545906a8b40b620d23fe038f5fc264b2,bd49e3d4545906a8b40b620d23fe038f5fc264b2,"Update Podspec to include source header files

Added source header files in couchbase-lite-ios.podspec and couchbase-lite-osx.podspec.

#1205"
snej,2016-04-08 18:26:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a9c53da7761558b88eb6c60eb8187e404601c40,8a9c53da7761558b88eb6c60eb8187e404601c40,"Updated CBForest

- Updated to latest stable forestdb commit
- Fix for uncaught C++ exception from c4db_getLastSequence
- Turn off sequence trees for view databases (~7% speedup)"
snej,2016-04-07 21:55:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9186191535a625cff231f36e709ba0404ec2534f,9186191535a625cff231f36e709ba0404ec2534f,Moved some code used only by the router to CBLListener.framework
snej,2016-04-07 18:40:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e224566bef261586a7e2a83c46142c40f64196b2,e224566bef261586a7e2a83c46142c40f64196b2,"Merge pull request #1208 from couchbase/feature/put_rev_attachments_1195

Added 'attachments:' parameter to -[CBLDocument putExistingRevision...]"
snej,2016-04-04 23:45:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea29b80c6cb309961340c0589ba2690a028c1e6f,ea29b80c6cb309961340c0589ba2690a028c1e6f,"Added 'attachments:' parameter to -[CBLDocument putExistingRevision...]

Allows revisions with attachments to be added.

Fixes #1195"
pasin,2016-04-06 05:09:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b83390d451cbb974dc40a83a3f49b5da0ec2fd66,b83390d451cbb974dc40a83a3f49b5da0ec2fd66,"Merge pull request #1202 from couchbase/fix/index_busy

Don't close view index while it's being enumerated"
pasin,2016-04-06 05:04:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6aae351c79e8f67b6df0c912461060491472417,e6aae351c79e8f67b6df0c912461060491472417,"Merge pull request #1193 from couchbase/fix/bad_json_crash_1179

Speculative fixes for assertion failures caused by invalid JSON"
snej,2016-04-05 22:58:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/083f93f19645c47ab720ba4fcba7db7aef9fe4fe,083f93f19645c47ab720ba4fcba7db7aef9fe4fe,"Build settings cleanup, including factoring out common settings"
snej,2016-04-05 21:21:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4097856ca4eb5e04e00668d16ebaad5b35b1968b,4097856ca4eb5e04e00668d16ebaad5b35b1968b,Merge branch 'master' into dev
snej,2016-04-05 21:20:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76bda9265d139fce31ce1ba04570f37ae5824735,76bda9265d139fce31ce1ba04570f37ae5824735,"Immediately fail replication if URL is missing db name (or otherwise bad)

Fixes #1201"
snej,2016-04-05 21:16:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0705423d3d030b208e87f48ee63725c7b553f7ca,0705423d3d030b208e87f48ee63725c7b553f7ca,"Merge pull request #1204 from brendand/master

Added missing CBLDynamicObject.h header to CBL iOS target's Public headers…"
brendand,2016-04-05 19:23:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/17984cb3b3b5812e69589d98bf71ff9e8ac5948c,17984cb3b3b5812e69589d98bf71ff9e8ac5948c,"Added missing CBLDynamicObject.h header to CBL iOS target's Public headers.

Without this, the built framework would display a CBLDynamicObject.h not found error when trying to build your project.

Signed-off-by: Brendan Duddridge <brendand@gmail.com>"
snej,2016-02-27 02:52:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8cc40a012b61600c7e0fd8e7ffe781373d473943,8cc40a012b61600c7e0fd8e7ffe781373d473943,Improve quality of NSErrors and error logging
snej,2016-04-05 18:11:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1bca449cd768f01b77bdd431b7f024ecac1533db,1bca449cd768f01b77bdd431b7f024ecac1533db,"Xcode cleanup: Moved ""Test-*"" groups inside ""Unit Tests"" group."
snej,2016-02-16 00:33:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0663f29c7ed61b67e62b4a1e66b3392f5e4b930e,0663f29c7ed61b67e62b4a1e66b3392f5e4b930e,"Moved CBLQueryRow.asJSONDictionary implementations to listener target

These methods are only used by the listener, so I moved them out of
the main CBL target."
snej,2016-02-16 20:10:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dc8005806370d93b375cbbaf6cb926e719341bbd,dc8005806370d93b375cbbaf6cb926e719341bbd,Cleanup of -[CBLDatabase queryViewNamed:...]
snej,2016-02-15 21:58:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a564a19b13ebbe99183069f3f109c64ae1d4d896,a564a19b13ebbe99183069f3f109c64ae1d4d896,"Cleanup/fix of CBLQueryRow storage references

* Defer setting CBLQueryRow's _storage till after instantiation, because
  it might change. Instead, it's set in CBLQueryEnumerator (or in
  CBLQuery if it's async.)
* Make sure that when a filter block is called on a CBLQueryRow,
  the row has its database & storage set to the correct objects for the
  thread it's called on (because it'll be a background thread, if the
  query is async.)
* Storage classes now create the actual CBLQueryEnumerator,
  instead of an internal NSEnumerator that gets wrapped by the public one.
* Handle options==nil at the top level so the storage implementations
  don't have to check for it
* Handle common empty-result cases (limit=0 or keys=[]) at top level too
* Added minKey and maxKey convenience properties to CBLQueryOptions"
snej,2016-02-12 21:24:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36f79b173d08c59d8dad6bdbed032d13b61b2d9b,36f79b173d08c59d8dad6bdbed032d13b61b2d9b,"Use NSEnumerator instead of CBLQueryIteratorBlock

View enumeration now creates an NSEnumerator instead of just a block.

In the ForestDB view storage, this allows the C4QueryEnumerator to be freed
when the public API is done with the query, even if it didn't reach the end of
the enumeration.

ForestDB all-docs by _descending_ sequence works now -- added a unit test.

Fixes #641 (All-docs by descending sequence)"
snej,2016-04-05 15:51:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cd276763bbfac5478ad8584e1cbc55b7005fdd52,cd276763bbfac5478ad8584e1cbc55b7005fdd52,"Merge pull request #1198 from catalandres/patch-1

Update documentation reference"
catalandres,2016-04-05 10:37:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9beeff698674bf52dadb0560d8574579a3e35953,9beeff698674bf52dadb0560d8574579a3e35953,"Update documentation reference

Previous version pointed to 1.1.
Now it points to current."
snej,2016-02-13 23:29:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b1b0f39eeb6f666c5eb65d02f3e25ffa0a99b405,b1b0f39eeb6f666c5eb65d02f3e25ffa0a99b405,"Don't close view index while it's being enumerated

If the index is being auto-closed for being idle, it will just retry
the auto-close after another minute.
If the view itself is being closed, it'll log a warning that the
C4View couldn't close."
snej,2016-04-05 00:03:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d434e46cc5b370f74589ef7733b66a638384dad5,d434e46cc5b370f74589ef7733b66a638384dad5,Merge branch 'dev'
snej,2016-04-05 00:03:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa3fe50303c1df51ef26a6e5e929605c145aba2f,fa3fe50303c1df51ef26a6e5e929605c145aba2f,"Added some missing `nullable` attributes to CBLTimeSeries API.

This should fix a build error in Jenkins (I don't know why I'm not
getting it in my own builds...)"
snej,2016-04-04 20:34:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7ab6983a5cf185dac35b7d6bbbd5998cd852e70e,7ab6983a5cf185dac35b7d6bbbd5998cd852e70e,Merge branch 'dev'
snej,2016-04-01 18:29:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a4a7126a3dc7d1ab80e19904619faad7696ac58,9a4a7126a3dc7d1ab80e19904619faad7696ac58,"Check for rev with invalid JSON in CBLRestPusher

It shouldn't be possible for invalid JSON to end up in the database,
but from issue #1179 it seems to have happened. This adds a check for it
because if it isn't caught at this point, it creates trouble a bit
later when the pusher tries to prepare the dictionary to upload.

Fixes #1179 (I think)"
snej,2016-04-01 16:35:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/382ec11e9b1c8b9bbcedbfa061bec353d2db3a0c,382ec11e9b1c8b9bbcedbfa061bec353d2db3a0c,"Fixed potential CBL_Revision assertion failure when body is unparseable

For #1179"
pasin,2016-04-04 17:44:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b0aa757af9c05ab9dcfe287de57a7172f3dbcd7,0b0aa757af9c05ab9dcfe287de57a7172f3dbcd7,"Merge pull request #1189 from couchbase/feature/logging

Time-series and remote logging"
snej,2016-04-01 21:18:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/285e5636d90914fc1ec37ae47358b4f286741970,285e5636d90914fc1ec37ae47358b4f286741970,"Updated CBForest for fix for -[CBLDatabase compact]

-compact shouldn't return an error if it's called while there's
already a background auto-compact in progress.

Fixes #1192"
pasin,2016-04-01 17:13:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3376dbaed009f1708881e87ef6b995db2cfda21b,3376dbaed009f1708881e87ef6b995db2cfda21b,"Merge pull request #1190 from couchbase/fix/bgmonitor_1152

Fixed a race condition in replicator foreground/background transitions"
pasin,2016-04-01 17:12:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/50e42ee8eaeebe4cfe190bdf14b36afe056052ba,50e42ee8eaeebe4cfe190bdf14b36afe056052ba,"Merge pull request #1187 from couchbase/fix/couchdb_changes_1139

Fixed incompatibility with CouchDB's _changes feed"
snej,2016-03-31 20:30:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/df1d271565e1563dc2f0f767094678134db48179,df1d271565e1563dc2f0f767094678134db48179,"Fixed a race condition in replicator foreground/background transitions

Fixes #1152"
snej,2015-11-03 17:53:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/666add00a1f2617990874021e9350faead53e21f,666add00a1f2617990874021e9350faead53e21f,Got Mac 'demo' test app running again. Added remote-logging support.
snej,2015-10-27 22:04:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0dfa737962be6a6ce556e3c92c1767d84774bb04,0dfa737962be6a6ce556e3c92c1767d84774bb04,"Implemented CBLTimeSeries and CBLRemoteLogging

Fixes #881"
snej,2015-10-27 17:46:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a937881a53f37d2b9886f7b43dce5a2ed84aaf07,a937881a53f37d2b9886f7b43dce5a2ed84aaf07,"Added ""purgePushed"" and ""allNew"" push replicator options

* ""purgePushed"" causes docs to be purged immediately after push.
* ""allNew"" optimizes for the case where the local docs don't exist on
  the server yet: it skips the _revs_diff check and immediately uploads.

For #881"
snej,2016-03-30 20:17:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ffff4226c99b8a5c7da515d1d0bda07d6294119e,ffff4226c99b8a5c7da515d1d0bda07d6294119e,"Fixed incompatibility with CouchDB's _changes feed

CouchDB also supports POST to _changes but expects most of the parameters
to still be in the URL, not the request body.

Fixes #1139"
snej,2016-03-30 20:14:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0bd4c15c0a29255098fd5e7a2b48de197062212,a0bd4c15c0a29255098fd5e7a2b48de197062212,"Fixed potential CBForest crasher in VersionedDocument

I haven't seen an actual crash from this, but the Xcode address sanitizer
caught it while purging docs in a unit test."
snej,2016-03-30 20:02:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/199bbe47c0ee15f388b06608426f6a337a16c4e8,199bbe47c0ee15f388b06608426f6a337a16c4e8,"Fix intermittent compile errors in Mac target, by setting DEFINES_MODULE"
snej,2016-03-29 20:30:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/250ddc6bedca0908879dced686e7f7f027a0ddb4,250ddc6bedca0908879dced686e7f7f027a0ddb4,"Copied MYDynamicObject from MYUtilities into CBL, renamed CBLDynamicObject

The #define that used to rename it was causing intermittent build errors
because Xcode's module system seems to have trouble with class names
that are renamed via the preprocessor."
pasin,2016-03-30 17:26:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c24553baa6caed8fff42bc0b76d14d1fe5338d1,8c24553baa6caed8fff42bc0b76d14d1fe5338d1,"Merge pull request #1185 from couchbase/feature/updateIndex_1148

Added public CBLView methods -updateIndex and -updateIndexAsync:."
snej,2016-02-28 21:22:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e687256f3f43128fbe40cbfec4fecc743830f52,8e687256f3f43128fbe40cbfec4fecc743830f52,Added public CBLView methods -updateIndex and -updateIndexAsync:.
snej,2016-03-25 19:15:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e640a490543529817db87539c3b17823ff07d1bf,e640a490543529817db87539c3b17823ff07d1bf,"Improved CBLReachability (proxy handling, intermittent connections)

* Now takes a URL, not just a hostname.
* Supports checking for general network connectivity
* Now checks system proxy settings to see if a proxy is required to
  reach the given URL; if so, it switches to checking general
  network connectivity.
* Host is considered reachable even if the flags say 'ConnectionRequired'
  as long as the connection doesn't require user intervention.

Fixes #1005 (I think; don't have a proxied network to test with)"
snej,2016-03-25 19:10:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7e00a8179a1483f1ced7369ecb26f26707aabbe4,7e00a8179a1483f1ced7369ecb26f26707aabbe4,"Fix: Code optimization settings were missing from xcconfig files

Somehow the GCC_OPTIMIZATION_LEVEL setting didn't get exported to the
xcconfig files when I generated them. Without it, debug builds were
using full optimization, which got in the way of debugging. Fixed."
pasin,2016-03-25 16:50:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f52a0e5e2568a3ba1403e9edbcc57118b29f23f7,f52a0e5e2568a3ba1403e9edbcc57118b29f23f7,"Merge pull request #1182 from couchbase/fix/missing_attachments

Gracefully handle missing attachments when pushing a document"
pasin,2016-03-25 16:17:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6ad343109bb01c23ff93e9e099b9718b4b69676,b6ad343109bb01c23ff93e9e099b9718b4b69676,"Merge pull request #1166 from couchbase/fix/sqlite_pruning

SQLite: Prune deepest revisions when new ones are inserted"
snej,2016-03-23 16:37:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0577c8935baa2af0443ecbf641db369fd6b5ad12,0577c8935baa2af0443ecbf641db369fd6b5ad12,"Gracefully handle missing attachments when pushing a document

With lazy attachment downloading, it's possible to have a document but
not have its attachments. That document might be pushed later, i.e. to
a different server, but the replicator would end up failing an assertion
due to the missing attachment.

This commit fixes the crash by detecting the missing attachment and
bailing out of the push. The document won't be pushed, but the checkpoint
won't be advanced past it, so it will be retried on subsequent
replications to that server, so if the attachment is later downloaded,
the doc will be pushed.

Fixes #1128"
pasin,2016-03-08 21:41:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/41602841557e38a540d75e5884e11274b10ca4d7,41602841557e38a540d75e5884e11274b10ca4d7,"Add CI iOS and CI MacOS scheme for Jenkins build

Created CI iOS and CI MacOS scheme for Jenkins build.

Note:
1. LiteServ and LiteServ App target are built by CI MacOS scheme.
2. Documentation target are included in both scheme.

#1048"
pasin,2016-03-08 21:41:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/837df075360f052ea782aa4178ca74137e94fa74,837df075360f052ea782aa4178ca74137e94fa74,"Add CI iOS and CI MacOS scheme for Jenkins build

Created CI iOS and CI MacOS scheme for Jenkins build.

Note:
1. LiteServ and LiteServ App target are built by CI MacOS scheme.
2. Documentation target are included in both scheme.

#1048"
snej,2016-03-13 00:56:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fed569684669948ddb3eaa375689ccae99e2d46,2fed569684669948ddb3eaa375689ccae99e2d46,"Cleanup of xcconfig files

- Shortened the filenames
- Removed redundant overrides
- Moved some ubiquitous settings up to the project level
- Removed unnecessary settings
- etc.

For #1043"
snej,2016-03-11 23:51:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a20cd1f7a192e48239565ab008594db242a64c13,a20cd1f7a192e48239565ab008594db242a64c13,"Moved build settings to .xcconfig files

No build settings are defined in the Xcode project anymore; they've
all been moved to configuration files in the xcconfic directory. Each
target has 3 files: ""Targetname.xcconfig"" has the basic settings,
""Targetname_Debug.xcconfig"" has extra settings for Debug builds, and
""Targetname_Release.xcconfig"" has extra settings for Release builds.
The ""Project"" settings files define the base settings for the project.

Fixes #1043"
snej,2016-03-22 16:31:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/520e6ed6fd9b23fca02b4ad30b0a21de8e1a2d8a,520e6ed6fd9b23fca02b4ad30b0a21de8e1a2d8a,Fixed some accidental iOS 9 / OS X 10.10 dependencies
snej,2016-03-21 21:42:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f5f8d7966899ffadee92e66b98c7dc9b6aa6d43,1f5f8d7966899ffadee92e66b98c7dc9b6aa6d43,Merge branch 'dev' of github.com:couchbase/couchbase-lite-ios
snej,2016-03-21 20:12:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3bda46892e1d12865b715cd579e4ef6e69612522,3bda46892e1d12865b715cd579e4ef6e69612522,"Updated ForestDB; speed up views by turning off seq trees

Updates forestdb to stable branch tag ""v1.1"" (commit 122bba68)"
snej,2016-03-18 01:17:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44a7b1cf82776ff5c1a9394a9556f77365400f7c,44a7b1cf82776ff5c1a9394a9556f77365400f7c,"Go back to not using SSL in Mac unit tests

Basically undoes the effect of the recent commit 730eb288,
but more explicitly instead of relying on a bug :)"
snej,2016-03-18 00:24:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b50b2c9bec8f31913dd859cf9ceac4f95c84885,0b50b2c9bec8f31913dd859cf9ceac4f95c84885,"Fixed ForestDB view indexing of purged documents

The fixes are actually in CBForest. Here I've just updated two unit
tests to detect the problem(s).

Fixes #1164"
snej,2016-03-15 18:54:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/730eb288b07eb8508e5319a86923d6cabd101386,730eb288b07eb8508e5319a86923d6cabd101386,"Fixed: Unit tests on Mac OS weren't using all-SSL

On iOS 9+ the unit tests use only HTTPS URLs to talk to the server,
because of ATS. But on Mac OS, a bug in the method that detects the
OS version meant that this setting wasn't enabled, so it mostly
used HTTP URLs. I have no idea why this worked; it seems that
Mac unit tests aren't subject to ATS restrictions..."
snej,2016-03-15 18:18:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c490bb21e7c018a4ba9d697cc0be4ae4bbcc91d1,c490bb21e7c018a4ba9d697cc0be4ae4bbcc91d1,"Fixed -[ReplicatorInternalTests test12_Pusher_DocIDs]

It was calling the server using [NSData dataWithContentsOfURL: allDocsURL],
which failed with SSL because of the custom self-signed cert.
Changed it to use a CBLRemoteRequest."
snej,2016-03-15 17:35:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4007fd8f887034207e5640dd4df99006e60f0d99,4007fd8f887034207e5640dd4df99006e60f0d99,"Fixed two static analyzer warnings.

Both of these were actual bugs, although the one in CBLReplication was probably unlikely to occur."
snej,2016-03-15 16:23:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5a34e5dbfc1b5799c921c3613458047a54748907,5a34e5dbfc1b5799c921c3613458047a54748907,"Added some more 'nullable's to public API

No effect on Obj-C apps.
Swift apps may need to add some ""?""s."
zgramana,2016-03-14 21:20:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cda6c0c8bf99405d239f2fb5df4cfff53957832c,cda6c0c8bf99405d239f2fb5df4cfff53957832c,"Merge pull request #1169 from couchbase/fix/ssl_auth_1168

Fixed Listener not checking basic auth over SSL connections"
snej,2016-03-14 16:36:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0f562761d1fd708b1b6a42b1f8ccae151ca2d6c,e0f562761d1fd708b1b6a42b1f8ccae151ca2d6c,"Fixed Listener not checking basic auth over SSL connections

Added a unit test for this case.
Also fixed a minor issue in CBLSocketChangeTracker that was causing it
to log a warning about unexpected EOF when it gets an HTTP error.

Fixes #1168"
snej,2016-03-13 01:35:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9b772747ea2dd783dd3a1b044ed3ed2dc4b4e41a,9b772747ea2dd783dd3a1b044ed3ed2dc4b4e41a,"SQLite: Prune deepest revisions when new ones are inserted

Fixes #1165"
snej,2016-03-11 21:26:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28fa0681d1ee7bd1e83663ceeb22467f17b7e46e,28fa0681d1ee7bd1e83663ceeb22467f17b7e46e,"Animate CBLUITableSource by using the Levenshtein algorithm

* CBLUITableSource now animates changes. There are 3 new properties
  (rowInsertAnimation, etc.) to customize the animation type. If all 3
  are set to None, animations and diff-checking are disabled.
* Internal class CBLArrayDiff provides the API for computing changes
  between two NSArrays and getting the results as NSIndexSets.
* C++ class Differ is the actual implementation, using the Wagner-Fischer
  algorithm plus optimizations I came up with.

Fixes #1150"
snej,2016-03-11 19:53:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75afddf1e6a698252d421c236040e221535b500a,75afddf1e6a698252d421c236040e221535b500a,Update BLIP submodule to fix another Mac OS build break due to ENABLE_BITCODE
snej,2016-03-09 23:40:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4743a9ab4c72f1ed32ba871a4d83277cbfaf4c06,4743a9ab4c72f1ed32ba871a4d83277cbfaf4c06,Update BLIP submodule to fix Mac OS build break due to ENABLE_BITCODE
pasin,2016-03-07 18:58:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9431001bc3d438f243da39d838ebc37b23da7c0d,9431001bc3d438f243da39d838ebc37b23da7c0d,"Merge pull request #1160 from couchbase/fix/commit_in_version

Include Git commit ID in CBLVersion() in unofficial builds"
michaelkwok,2016-03-07 18:44:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94eb8a5376cf4bdd8cbe19c24cba9566706a5746,94eb8a5376cf4bdd8cbe19c24cba9566706a5746,"Merge pull request #1133 from couchbase/fix/bad_version_1131

Fix CBLVersion() in official builds of iOS simulator binaries"
snej,2016-03-06 07:31:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ccb9fcfcfbb3d42be11804fb8d8454945a5a009f,ccb9fcfcfbb3d42be11804fb8d8454945a5a009f,"Include Git commit ID in CBLVersion() in unofficial builds

CBLFullVersionInfo() also includes the git branch name and the date.

Fixes #1102"
pasin,2016-03-04 02:24:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8acd838d6811b4c65823c786ba9610ad5f776f1,f8acd838d6811b4c65823c786ba9610ad5f776f1,"Merge pull request #1157 from couchbase/feature/cblis_dispatch_queue

Fix CBLIS accessed by multiple dispatch queue issue"
pasin,2016-03-02 02:15:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/97fb89c5693720ac7e291ff6301cb0dd946fc1b0,97fb89c5693720ac7e291ff6301cb0dd946fc1b0,"Fix CBLIS accessed by multiple dispatch queue issue

- CBLIS now creates its own dispatch queue and set to its CBLManager instance.

- CBLManager set to CBLIS requires to have a dispatch queue set.

- All CBL database operations are redirected to the dispatch queue.

#1129 , #1085 , #1075"
pasin,2016-03-04 02:12:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd410f4a5c0c006aacfbd18335549273b737248d,bd410f4a5c0c006aacfbd18335549273b737248d,"Update vendor/BLIP submodule

This will uptake enable bitcode fix."
pasin,2016-03-04 01:57:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a25c06dd9561e2fe9639128e3b5ffbae4f89feaa,a25c06dd9561e2fe9639128e3b5ffbae4f89feaa,"Make CBL iOS Framework target support tvOS

This is the same fix made into release/1.2.1 branch."
pasin,2016-03-04 01:32:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45ca28ff8006e9cea95f8e48fc00b7b39cba3ced,45ca28ff8006e9cea95f8e48fc00b7b39cba3ced,"Fix vendor/CBForest submodule link

Currently it's linking to a missing commit. Linked to the current master branch of CBForest instead."
snej,2016-03-04 01:05:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef247cf398744842c6263d602c146aa9efff4769,ef247cf398744842c6263d602c146aa9efff4769,Clean up some build settings as suggested by Xcode 7.3 nag warning
snej,2016-03-04 00:33:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4faf5ff6e1d4d0922cbd997bb0c5dd4f8c1ee216,4faf5ff6e1d4d0922cbd997bb0c5dd4f8c1ee216,"Cleaned up target build settings

Removed a lot of per-target settings that should be defined at the
project level. This resulted in some targets now getting stricter
warnings, which I resolved."
snej,2016-03-03 21:38:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/628d952117dc0d6e915b4f77925255756f1157b5,628d952117dc0d6e915b4f77925255756f1157b5,"Updated CBForest to latest master

Not much change; most of the intervening commits only apply to Java and
C#."
snej,2016-03-02 20:19:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/173db71fb828446494b7b91c356794db2225a608,173db71fb828446494b7b91c356794db2225a608,Explicitly set all Mac targets to 64-bit only
snej,2016-03-03 21:11:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fcfcab275b9dd0c2bc668f6d1433e76be3a776d0,fcfcab275b9dd0c2bc668f6d1433e76be3a776d0,"Merge pull request #1155 from lucatorella/fix/customHTTPHeaders-initialization

Moved customHTTPHeaders initialization to the common initializer"
lucatorella,2016-03-03 16:42:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f050abb397ea78229042e3601c8661c1afcbd432,f050abb397ea78229042e3601c8661c1afcbd432,moved _customHTTPHeaders initialization to the common init
robertjpayne,2016-03-03 01:03:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cbea4ddfc47fac4c5c56a60dedb630a4c10bb9b7,cbea4ddfc47fac4c5c56a60dedb630a4c10bb9b7,Fix small misuse of NSData API
robertjpayne,2016-03-03 01:02:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10212e51821a11df5e1a6c38a2159166efcd71f6,10212e51821a11df5e1a6c38a2159166efcd71f6,Simplify access to a range of sub data
robertjpayne,2016-03-03 01:02:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f518093212129c25e9b053bddc644a3c81fe0266,f518093212129c25e9b053bddc644a3c81fe0266,Tweaks to buffer API
robertjpayne,2016-03-02 22:41:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d0cbabe0a90839a4e906899d06559e59957976b,0d0cbabe0a90839a4e906899d06559e59957976b,Fix bad check on buffer overflow
robertjpayne,2016-03-02 22:27:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/acb4d1970e5def02d1ea072624142f108fdb2a3c,acb4d1970e5def02d1ea072624142f108fdb2a3c,Adjust CBLMultipartBuffer API to be safer
snej,2016-03-02 19:33:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35b79c5521c901f79d75372003a3bd2d8e2b7ea2,35b79c5521c901f79d75372003a3bd2d8e2b7ea2,"Add a log message when CBLRemoteRequest gets an HTTP redirect

This would have helped diagnose #1135 much more easily -- the problem
ended up being server-side, with a bogus hostname in the redirected URL."
snej,2016-03-02 01:56:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8bd3f7f8d37a3f070c8dddd5e17b3a2327e7d61,f8bd3f7f8d37a3f070c8dddd5e17b3a2327e7d61,Merge branch 'dev'
snej,2016-03-02 01:45:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/19a7a165fbe5bf51861a75a1642b451d46530839,19a7a165fbe5bf51861a75a1642b451d46530839,"Revert ""Enable full bitcode in Release builds (not just Archive)""

This reverts commit 282f7a974b57688fd31209622de08ec8af1986b0."
snej,2016-03-02 01:04:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b2eee391af209479e90d015d9052b91f3e20adef,b2eee391af209479e90d015d9052b91f3e20adef,Merge branch 'dev'
snej,2016-03-02 01:02:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76e5abc7f6b830b265f21dd2ced832dbae7b6307,76e5abc7f6b830b265f21dd2ced832dbae7b6307,"Oops, fixed iOS test build errors

Regression from the recent logging changes."
snej,2016-03-01 17:53:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/282f7a974b57688fd31209622de08ec8af1986b0,282f7a974b57688fd31209622de08ec8af1986b0,"Enable full bitcode in Release builds (not just Archive)

(This also updates CBForest to master, which brings in a few minor
changes, most of which only affect the Java and C# builds.)

Fixes #1048"
snej,2016-02-29 21:38:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ebec67a0296dd4215b51b48d9ca59aa26edf8a7,2ebec67a0296dd4215b51b48d9ca59aa26edf8a7,Merge branch 'dev'
snej,2016-02-29 21:33:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e2d9b8cf4502aad3bc6a834459e23c7526f5730,1e2d9b8cf4502aad3bc6a834459e23c7526f5730,"Merge pull request #1136 from couchbase/fix/pendingDocIDs_1134

Reimplemented CBLReplication.pendingDocumentIDs and -isDocumentPending:"
snej,2016-02-22 22:43:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f7dc8dc3e3d231cea9de2d6010d970aa939fdf50,f7dc8dc3e3d231cea9de2d6010d970aa939fdf50,"Reimplemented CBLReplication.pendingDocumentIDs and -isDocumentPending:

Now tracking replicator's lastSequence and caching it in an ivar.
-isDocumentPending: just compares the doc's sequence with that.
pendingDocumentIDs does basically what it used to do, but it doesn't
need to do it on a background thread.

Also, the bug-fix portion of this is that pendingDocumentIDs remembers
the database's lastSequenceNumber when it's cached; if that changes,
the cached value is invalidated.

Fixes #1132"
pasin,2016-02-29 18:11:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82d114c7124f430fe71bb1b4e2b1a6add518efab,82d114c7124f430fe71bb1b4e2b1a6add518efab,"Merge pull request #1146 from couchbase/fix/active_only_1078

ChangeTracker: Only use active_only=true if db is empty"
robertjpayne,2016-02-29 13:13:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa0f88f32b7bcaea6622d39ebde6c17ab30b51ed,aa0f88f32b7bcaea6622d39ebde6c17ab30b51ed,Improve multipart reading performance using a cyclic buffer
snej,2016-02-10 00:55:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec6d264b63608ba6cde7904f2feca8453971f718,ec6d264b63608ba6cde7904f2feca8453971f718,"ChangeTracker: Only use active_only=true if db is empty

Added two unit tests to make sure that deleted docs aren't pulled if the
db is empty, and are pulled if it isn't.

Fixes #1078"
snej,2016-02-26 19:18:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f8d24026da25e6148ec112e47352d8a9da1663e,2f8d24026da25e6148ec112e47352d8a9da1663e,"Oops, fixed LiteServ build

Regression due to error logging changes in previous commit"
snej,2016-02-26 06:12:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a37dce7e0dd76519fef316de434550442ee9bf6,4a37dce7e0dd76519fef316de434550442ee9bf6,"Better NSError logging

Use new my_compactDescription method (from MYErrorUtils) when logging
an NSError. It includes the important info like domain/code, without all
the spew of the regular description. In particular, when logging an
associated URL, it sanitizes any password in it.

Fixes #1117"
snej,2016-02-24 23:46:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e1ca00de34e4e8386811022f29efeec46bac8af,4e1ca00de34e4e8386811022f29efeec46bac8af,"Logging overhaul

Replaced Logging.{h,m} with brand-new MYLogging.

* Log domains are checked. You have to declare a domain using
  DefineLogDomain or UsingLogDomain before logging to it, or you get a
  compile error.
* Several domains were renamed to remove ""CBL"" prefixes -- so
  CBLDatabase is now Database, CBL_Router is now Router, etc.
* Domains have a normal level, a Verbose level, and a Debug level.
  Use e.g. LogVerbose(Sync, ...) instead of LogTo(SyncVerbose, ...).
  You can still use -LogSyncVerbose YES to set verbose level.
* Warn() now logs the function name and line number of the caller.
* When logging's enabled, skipping over a LogTo to a disabled domain is
  faster.
* Generated code will be (very slightly) smaller.

For #1107"
pasin,2016-02-26 00:35:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/826bec65d3b49720975e6fc07e5dcfdae5b87bd1,826bec65d3b49720975e6fc07e5dcfdae5b87bd1,"Merge pull request #1145 from couchbase/fix/api_fixes

Public API tweaks for better Swift compatibility"
snej,2016-02-26 00:21:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ab28d079d437e91805d3ec69308bfa7a7e4ed24b,ab28d079d437e91805d3ec69308bfa7a7e4ed24b,"Merge pull request #1142 from couchbase/feature/issue_1140

Fixed #1140 : CBLRemoteRequest onCompletion gets called twice"
snej,2016-02-25 21:46:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a7d2c03b77aed192747ebfa57d0ed36f74d98f2,9a7d2c03b77aed192747ebfa57d0ed36f74d98f2,"Public API tweaks for better Swift compatibility

* Made some parameters nullable
* Made some parameter or return types more specific, either using
  generics or by specifying a subclass

These don't seem to break Swift apps; they just add a few warnings
that point out that a type-cast is now a no-op.

Fixes #1143"
pasin,2016-02-25 21:05:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c814725a2bf182f15443de8699b3f53a53b44d5d,c814725a2bf182f15443de8699b3f53a53b44d5d,"CBLRemoteRequest - check nil on onCompletion block before calling it

Fixed CBLRemoteRequest's respondWithResult:error to check if onCompletion is nil or not before calling it.

#1140"
pasin,2016-02-25 00:01:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aeae2ea8552d20d4085c9d4128dfa9f41e65446f,aeae2ea8552d20d4085c9d4128dfa9f41e65446f,"Fix CBLRemoteRequest onCompletion gets called twice

When there is a permanent error occurred, the onCompletion block could be called second time on stopping remote requests originated from setting error property value inside the onCompletion block. So change to break cycles before executing onCompletion block.

#1140"
pasin,2016-02-23 07:18:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ceee83a0b53b706d41e305890ae5838d7764d2b1,ceee83a0b53b706d41e305890ae5838d7764d2b1,"Merge pull request #1137 from couchbase/fix/putExistingRev_1118

API: Added -[CBLDocument putExistingRevisionWithProperties:...]"
snej,2016-02-23 01:03:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c409c361ea46113077a4a0b1e3011c1a8241475c,c409c361ea46113077a4a0b1e3011c1a8241475c,"Increase timeout of attachment-replication unit test

-[Replication_Tests test04_ReplicateAttachments] sometimes timed out
when run on a device.

Fixes #1094"
snej,2016-02-23 00:50:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a30f2fa0cabbb924d14c7d0e131f784b91fbebc1,a30f2fa0cabbb924d14c7d0e131f784b91fbebc1,"API: Added -[CBLDocument putExistingRevisionWithProperties:...]

Public API for inserting an existing revision, e.g. by a pull replicator.

Fixes #1118; part of couchbase-lite-api#135"
snej,2016-02-22 19:47:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2d69de6197c000323277246d10d488b39066502,c2d69de6197c000323277246d10d488b39066502,"Merge branch 'feature/nsurlsession' into dev

Fixes #394"
snej,2016-02-22 19:30:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/801396d2601a5b68c82bc60c392bd868122abe90,801396d2601a5b68c82bc60c392bd868122abe90,"CBLRemoteRequest: Don't add cookies if app specifies a Cookie: header

(Fixes a regression from a few commits ago)"
snej,2016-02-19 00:45:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e5eaefcd1b970eb89e4b03a2031051b448d3400,3e5eaefcd1b970eb89e4b03a2031051b448d3400,"Proactively set Authorization: header in HTTP requests

...when we have a CBLPasswordAuthorizer.
Also modified CBLRemoteRequest to never use the proposed credential,
since it might be for a different login to the same server.

Fixes #1127"
snej,2016-02-19 00:49:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2934500c97077f2c41878b7ff2e5db0f7baf329,f2934500c97077f2c41878b7ff2e5db0f7baf329,"Fix CBLVersion() in official builds of iOS simulator binaries

The build variable CURRENT_PROJECT_VERSION, which gets overridden by
the official server build script, didn't get passed through to the
simulator builds done as part of our fat (device+simulator) build script.
Updated BuildFatLibrary.sh to explicitly pass it, and two other build
variables that also get set during official builds.

Fixes #1131"
snej,2016-02-18 23:02:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60e584100f3fde50238f9c1c2e3b9afedbb80443,60e584100f3fde50238f9c1c2e3b9afedbb80443,"Split up -[CBLRemoteRequest didReceiveChallenge:useCredential:]

It handles 3 types of authentication, so I broke it into three methods;
CBLRemoteSession chooses which one to call."
snej,2016-02-18 17:57:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a72c942643c9a6a0c2b111875f002a81f14eef14,a72c942643c9a6a0c2b111875f002a81f14eef14,Create ISSUE_TEMPLATE.md
snej,2016-02-09 17:52:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa442088b485ef538f7816b85eb6b96c05fdc77e,fa442088b485ef538f7816b85eb6b96c05fdc77e,CBLRemoteRequest cleanup. Replicator doesn't keep array of requests.
snej,2016-02-08 18:53:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1adbf2499a93ae1e6081189f93ef7a83db5f72c,c1adbf2499a93ae1e6081189f93ef7a83db5f72c,"More replicator cleanup/improvements, following NSURLSession conversion"
snej,2016-02-06 01:30:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f014360957169eabe5d240435eb21743047047d3,f014360957169eabe5d240435eb21743047047d3,Cleaned up -[CBLRemoteRequest didReceiveChallenge:...]
snej,2016-02-06 01:08:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b4ba95c56da6c22eec9f803a1980cd9a9cc1e1d9,b4ba95c56da6c22eec9f803a1980cd9a9cc1e1d9,"Switched from NSURLConnection to NSURLSession

Fixes #394"
snej,2016-02-06 01:04:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b3a38ec218f9dcd10c301a03bcabe382688cc9fe,b3a38ec218f9dcd10c301a03bcabe382688cc9fe,"LiteServ: Allow non-SSL replication with localhost

Added an NSAppTransportSecurity override for domain 'localhost'."
snej,2016-02-06 01:03:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d1f2a4e572a5a3d9905cb435363d28dc72b2974,1d1f2a4e572a5a3d9905cb435363d28dc72b2974,LiteServ: Log when replicator stops (if run with --push or --pull)
snej,2016-02-05 00:25:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/180b98b40dcd3033a99be6d33c120c59b20b0a17,180b98b40dcd3033a99be6d33c120c59b20b0a17,"More cleanup of CBLRemoteRequest

Eliminated -setupRequest:withBody:, and moved JSON body handling into
base class."
snej,2016-02-04 23:35:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/53f85c7cf250355ad7db70beb3bb98da42c9f625,53f85c7cf250355ad7db70beb3bb98da42c9f625,"Made CBLRemoteRequest protected API independent of NSURLConnection

Instead of exposing the NSURLConnection delegate APIs, it now defines
its own protected callbacks for subclasses to override.

This is in preparation for migrating it to use NSURLSession. (#394)"
pasin,2016-02-17 18:22:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2f6c6f7f384fa8b39020698fd4500078b8a42df,e2f6c6f7f384fa8b39020698fd4500078b8a42df,"Merge pull request #1126 from couchbase/fix/listener_leak_1017

Fix major listener memory leak"
pasin,2016-02-17 17:03:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/115d748eb86091b54a93e83cd21015315dc4e4bf,115d748eb86091b54a93e83cd21015315dc4e4bf,"Merge pull request #1122 from couchbase/fix/nil_key_1120

Warn (but don't crash/throw) if map fn calls emit(nil"
snej,2016-02-17 01:14:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45c30d8bebbe83904fd3afe25a19a975ab3b434a,45c30d8bebbe83904fd3afe25a19a975ab3b434a,"Fix major listener memory leak

CBLHTTPConnection objects never got cleaned up, because my override of
-socketDidDisconnect:withError: wasn't calling the (undeclared)
superclass method, which is what removes the connection object from
the server's connection list.
This caused the CBLHTTPConnection, GCDAsyncSocket, and other objects
to stay in memory; not leaked exactly, but kept in the HTTPServer's
connection list.
Fixed by adding the 'super' call.

Fixes #1017"
snej,2016-02-16 23:40:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1679c4436699aa837509c5706ca49a05e744cd04,1679c4436699aa837509c5706ca49a05e744cd04,"Warn (but don't crash/throw) if map fn calls emit(nil

Also added a warning when user-provided keys/values can't be converted
to JSON.

Fixes #1120"
pasin,2016-02-12 17:30:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09bc36feb9401b05e635d78982b228aaa4a61569,09bc36feb9401b05e635d78982b228aaa4a61569,"Merge pull request #1115 from couchbase/fix/live_query_updates

Keep LiveQuery from triggering if view index didn't change"
snej,2016-02-11 23:15:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c3974af2f73ef432f22c3c49cc2c4cabd66f8459,c3974af2f73ef432f22c3c49cc2c4cabd66f8459,"Fixed two compile errors in the Test-Mac app

I think these only show up in Release builds, which is why they weren't
breaking unit testing (which builds this as the host app.)"
snej,2016-02-11 23:09:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94a62510011aec9548de0bf20cb2a0bb7691c9e8,94a62510011aec9548de0bf20cb2a0bb7691c9e8,"Fixed link errors in 'CBL iOS Framework' target

(This is the dynamic framework for iOS.) It was missing the
CBLJSViewCompiler source files."
pasin,2016-02-10 23:45:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/59b60aa01b3b0f20b1740390d83576ce15d7a015,59b60aa01b3b0f20b1740390d83576ce15d7a015,"Merge pull request #1113 from couchbase/fix/blocks_1015

Be more careful calling blocks"
snej,2016-02-10 23:24:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff799e91ce43429a3277bbfc72d0c69b739316b1,ff799e91ce43429a3277bbfc72d0c69b739316b1,"Keep LiveQuery from triggering if view index didn't change

If the database changes and a view index is updated, but doesn't change,
a LiveQuery on that view shouldn't re-run its query. I thought I'd
implemented that earlier, but I made a mistake, so the query ended up
being run anyway. (The LiveQuery still wouldn't notify, though, because
it would see that the old and new query results were the same.)

This commit fixes it so the query doesn't even happen.

Note that this optimization only works for ForestDB-based views, because
SQLite views don't implement the lastSequenceChangedAt property.

Fixes #1114"
snej,2016-02-09 20:05:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e7d17cb9b107a8dd5f049b67de7c76897fed7482,e7d17cb9b107a8dd5f049b67de7c76897fed7482,"Be more careful calling blocks

If a block ref is stored in an ivar, and the ivar might change due to
a re-entrant call during a call to the block, then be safe and copy the
block ref to a local variable before calling it. Otherwise the block
might be dealloced while its code is running, which will cause garbage
results or even crashes when it accesses a captured variable.

Fixes #1015"
pasin,2016-02-09 18:06:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c25968fc191280a70566b818114d1658eb910bf9,c25968fc191280a70566b818114d1658eb910bf9,"Merge pull request #1109 from couchbase/fix/source_1100

Set CBLDatabaseChange.source for changes made by peer via listener"
snej,2016-02-09 18:03:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3ff16f6b56580b5260fa0cf09fe1d662f543b3f,e3ff16f6b56580b5260fa0cf09fe1d662f543b3f,"Merge pull request #1091 from couchbase/tleyden-patch-1

Add Carthage instructions/badge to README"
pasin,2016-02-09 03:04:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ca19c18c6719938a48cd077d9004e904db3e5374,ca19c18c6719938a48cd077d9004e904db3e5374,"Merge pull request #1110 from couchbase/fix/post_changes_1106

Read-only listener should allow POST to _changes"
pasin,2016-02-09 02:58:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63c7fa141eef0bb096b0c5f1e9bb22fbda1b4819,63c7fa141eef0bb096b0c5f1e9bb22fbda1b4819,"Merge pull request #1108 from couchbase/fix/bg_task_1006

Fixed assertion failure due to not ending background task on app wakeup"
snej,2016-02-08 23:21:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/31b39dcba888f015aa203b1d3cbc728802a3cfae,31b39dcba888f015aa203b1d3cbc728802a3cfae,"Read-only listener should allow POST to _changes

Fixes #1106"
snej,2016-02-08 23:00:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74bf2575d472ee5d13094786472fa17745dd2102,74bf2575d472ee5d13094786472fa17745dd2102,"Set CBLDatabaseChange.source for changes made by peer via listener

Fixes #1100"
snej,2016-02-08 20:27:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91c559c16d23047722bfacba1c3976fac7b372d3,91c559c16d23047722bfacba1c3976fac7b372d3,"Merge pull request #1002 from mpapp/master

Check for currentRevision.isDeletion state in CBLDocument -isDeleted"
snej,2016-02-08 19:37:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7bf4593e2e4c218ce0448dc624dc3f3c01308c97,7bf4593e2e4c218ce0448dc624dc3f3c01308c97,"Fixed assertion failure due to not ending background task on app wakeup

CBLRestReplicator wasn't ending its background task when the app became
active, which mean that when the app backgrounded again it attempted to
set another background task, which MYBackgroundMonitor doesn't support.

Fixes #1006"
pasin,2016-02-05 17:56:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/786db317f8debae8cf3302887bcb0b98178e8eb4,786db317f8debae8cf3302887bcb0b98178e8eb4,"Merge branch 'release/1.2.0'

# Conflicts:
#	vendor/CBForest"
pasin,2016-02-05 02:28:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5a3a9471bc70881578afc3cef69711b98c20d2f,b5a3a9471bc70881578afc3cef69711b98c20d2f,"Add Cocoapod podspec files

Added podspec template files for iOS and OSX."
snej,2016-02-04 23:24:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/703ac442d94baf4074156a3b85d4a73dc42c565b,703ac442d94baf4074156a3b85d4a73dc42c565b,"CBLGZip fix for infinite loop decompressing when length==0

Fixes #1101"
snej,2016-02-04 21:14:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c43f17d6762263ebce53b67b4772ae910549f7f5,c43f17d6762263ebce53b67b4772ae910549f7f5,"Updated ForestDB to get fix for descending-queries bug (MB-17785)

And removed the workaround from CBForest.

For #1082"
pasin,2016-02-03 22:30:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e411c2f904b80dfc36f8fe1fcc8c97bfacf5cc06,e411c2f904b80dfc36f8fe1fcc8c97bfacf5cc06,"Fixed vendor/CBForest submodule link

vendor/CBForest 1e18b8b1c6a0e4c9904a909ba410ee13a97bc5b5 commit is not there anymore. Pointed to the current master instead."
snej,2016-02-03 21:47:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/204c8efb4f638629dc9fb3d38f4c68b94e3ff409,204c8efb4f638629dc9fb3d38f4c68b94e3ff409,Minor tweak to Unit-Tests/Server/README.md
snej,2016-02-03 21:43:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f6425c6f71f2f10c2d6038b6671a25e41aca9cd,1f6425c6f71f2f10c2d6038b6671a25e41aca9cd,Updated ForestDB to new 'stable' branch
snej,2016-02-03 20:06:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b26cafae4c7d0653a7cfefc5071868a31c841082,b26cafae4c7d0653a7cfefc5071868a31c841082,"Updated Unit-Tests/Server/README.md

Added in-depth explanation of how to configure for testing on a real
device, where SG has to run on a different host than the unit tests."
snej,2016-02-03 17:30:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60d120a344d8ee4e30bef87f2d2208d1ffe1d502,60d120a344d8ee4e30bef87f2d2208d1ffe1d502,"Updated doc-comment of CBLLiveQuery.updateInterval

The default value changed from 0.5sec to 0.2sec a few weeks ago but I
forgot to update the comment."
tleyden,2016-02-03 07:02:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57969626e7361e21a54b63499334a52a1e7289e4,57969626e7361e21a54b63499334a52a1e7289e4,Add Carthage instructions/badge to README
snej,2016-02-02 22:22:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d2e077dfee37c3a0f62219ff2dd9e965958a7b62,d2e077dfee37c3a0f62219ff2dd9e965958a7b62,Minor cleanup of ForestDB storage code
pasin,2016-02-02 21:31:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42f3826b420512eca23c9c40dc8a6d3470efe50e,42f3826b420512eca23c9c40dc8a6d3470efe50e,"Update ChangeTracker_Tests.testSimple

As changes feed's active_only is set to true, the deleted revision will not be sent from SG. Updated the unit test accoardingly.

#1090"
pasin,2016-02-02 21:29:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dadfb87f7f25088017ce5b09eff74f430eccd654,dadfb87f7f25088017ce5b09eff74f430eccd654,"Link tvOS Unit Test App with Security.framework

This fixes the dependency issue to LocalAuthenticator when running the unit test.

#1087"
pasin,2016-02-02 20:08:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b7069e6e25c4e26a5ca9705d3adc79ef38ec898,4b7069e6e25c4e26a5ca9705d3adc79ef38ec898,"Merge pull request #1089 from couchbase/fix/tvos_default_dir

tvOS: App Support dir is r/o, so CBLManager should use Caches dir"
snej,2016-02-02 20:04:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6297441fb74e512ef27c05ba1b72a745b6ed5007,6297441fb74e512ef27c05ba1b72a745b6ed5007,"tvOS: App Support dir is r/o, so CBLManager should use Caches dir

Without this change, on an AppleTV device [CBLManager sharedInstance]
is unusable since trying to create a database will fail.

(Copied from commit 35453d6c on the 1.1.1-appleTV branch)"
snej,2016-02-02 19:47:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/93e71718fc6a01b4adb3f4c7132e60d781a83ee1,93e71718fc6a01b4adb3f4c7132e60d781a83ee1,"Oops, fixed 32-bit build error from commit 46bd22de

Fucking NSInteger. We hates it."
snej,2016-02-02 18:55:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d59811859ff52d13d522ffe0ce671a668104930,6d59811859ff52d13d522ffe0ce671a668104930,"Merge pull request #1088 from couchbase/feature/tvOS_test_build

Fixed #1087 : tvOS Test App build missing symbol issue"
pasin,2016-02-02 18:38:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92f8468805c1d3e1e8a5924690e28efb9cfcfd9c,92f8468805c1d3e1e8a5924690e28efb9cfcfd9c,"Fix tvOS Test App build missing symbol issue

In tvOS Tet App target, set DEAD_CODE_STRIPPING=NO in debug mode. This settings is inlined with iOS Test App target.

#1087"
pasin,2016-02-02 07:57:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91dbd0e73ad277af286b953d2b268ff1746915e9,91dbd0e73ad277af286b953d2b268ff1746915e9,"Fix tvOS Unit Test App dependencies

Linked with SystemConfiguration.framework and libCBLJSViewCompiler.a.

#1087"
pasin,2016-02-02 02:27:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1a0b58b3f0bbad34731d646d7485724d0f39443,d1a0b58b3f0bbad34731d646d7485724d0f39443,"Merge pull request #1086 from couchbase/fix/1083_closed_socket

CBLWebSocketChangeTracker: Handle remote disconnect"
snej,2016-02-02 02:24:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/46bd22decc4a510e8b4013f50a5ee5b90e252ff3,46bd22decc4a510e8b4013f50a5ee5b90e252ff3,"CBLWebSocketChangeTracker: Handle remote disconnect

If the server closes the WebSocket connection, even cleanly with no error status,
the change tracker should treat it as a recoverable error and retry.
Fixes #1083"
snej,2016-02-01 21:59:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8fa7972aa9c905a20e005564f5625d751a3fb834,8fa7972aa9c905a20e005564f5625d751a3fb834,"Fixed regression caused by last CBForest fix :-p

As reported in couchbase/couchbase-lite-java-core#971, a descending
iteration of a view with no rows in it would throw a C++ exception.
Added a unit test for this too."
snej,2016-01-30 22:20:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c8bfe125f39a0d3f855c545c91067abbd401f37a,c8bfe125f39a0d3f855c545c91067abbd401f37a,Updated CBL_VERSION_STRING to 1.3
snej,2016-01-30 22:19:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71c460f9760c9ebbc4aa354c0db2d5f18d156792,71c460f9760c9ebbc4aa354c0db2d5f18d156792,"Merge branch 'release/1.2.0'

# Conflicts:
#	vendor/CBForest"
snej,2016-01-30 01:50:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f98604c69bcf6574264598cb989b541c5510cd3,6f98604c69bcf6574264598cb989b541c5510cd3,"Work around ForestDB bug in descending view queries

ForestDB's iterator can stop prematurely when iterating in descending
order while skipping deleted docs. The workaround here avoids setting
the FDB_ITR_NO_DELETES flag. Have filed a ForestDB issue to get a real
fix.

This commit includes the updated CBForest, plus a unit test.

Fixes #1082"
pasin,2016-01-30 00:34:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa0c749626f91cb607e8842d1eb851d9ffc1cc5f,aa0c749626f91cb607e8842d1eb851d9ffc1cc5f,"CBLIS : Revert code causing queryToManyRelation return outdated result

The reverted code is the code that tries to optmize the query by checking if the index is actually updated or not. It looks like that code doesn't work well in some certain circumstances that need more investigation.

#1061"
snej,2016-01-30 00:11:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d6a849932ea0db5ab97a2a2ebdb1958f38163ac4,d6a849932ea0db5ab97a2a2ebdb1958f38163ac4,"Merge pull request #1084 from couchbase/feature/1079_low_memory_warning

Check if CBL_Storage's lowMemoryWarning method is implemented before calling"
pasin,2016-01-29 23:36:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3cb77e5872f9f59a3e5ef6f59b6cf9aaee8f18c5,3cb77e5872f9f59a3e5ef6f59b6cf9aaee8f18c5,"Check if CBL_Storage's lowMemoryWarning method is implemented before calling

CBL_SQLiteStorage is not implmenting the lowMemoryWarning method so check if the method is implemented before calling.

#1079"
snej,2016-01-29 01:14:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6e9c31f007c43f04a953906e04df706e6bcfe24,e6e9c31f007c43f04a953906e04df706e6bcfe24,"Added CBLDatabaseOptions, kCBLSQLiteStorage, etc. to exported-symbols file"
snej,2016-01-29 01:14:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e41fd00b88427c3fbb2377448f6d5857ca07ced,5e41fd00b88427c3fbb2377448f6d5857ca07ced,"Added CBLDatabaseOptions, kCBLSQLiteStorage, etc. to exported-symbols file"
pasin,2016-01-29 00:19:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78a58a57841046a28be173d68623d6b0855abaf8,78a58a57841046a28be173d68623d6b0855abaf8,"Update CBForest for GENERATE_MASTER_OBJECT_FILE change

#1054"
snej,2016-01-29 00:01:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5ab375c0587eb0e09407d24ddd9a9d045f9345e6,5ab375c0587eb0e09407d24ddd9a9d045f9345e6,"Merge branch 'release/1.2.0'

# Conflicts:
#	vendor/CBForest"
snej,2016-01-28 23:54:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5333142aac7b302d117fef1a606c2d0f7a75694c,5333142aac7b302d117fef1a606c2d0f7a75694c,"Catch exceptions thrown from map blocks, and continue to the next doc

For #1071"
snej,2016-01-28 23:44:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce0ae7ba2fc19c6bd6cdf98996e22772429164e4,ce0ae7ba2fc19c6bd6cdf98996e22772429164e4,LiteServ: Added --dbpassword to allow opening encrypted databases
pasin,2016-01-28 19:36:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0856ddf866dbfb49ccb725aeae70342694da7077,0856ddf866dbfb49ccb725aeae70342694da7077,"Merge pull request #1077 from couchbase/feature/cherry-pick-cblis-fix

Cherry pick CBLIS fixes from master branch"
pasin,2015-12-11 02:03:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1768cb0ed2f3517ff19df226f2dc16625868639e,1768cb0ed2f3517ff19df226f2dc16625868639e,"CBLIS: Add purge object API

Added -(BOOL) purgeObject: (NSManagedObject*)object error: (NSError**)outError method.

#879"
pasin,2015-12-10 23:21:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3336d145ee0f65022438aa59b4bd6fb634650ab2,3336d145ee0f65022438aa59b4bd6fb634650ab2,"CBLIS : Fix incompatible code with old iOS SDK version

-objectIDsForRelationshipNamed: has been available since iOS 8.3 so we can't use it now."
pasin,2015-12-10 21:44:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/95bc90aeec4cd6cd23d103e3f27f3d3501befe64,95bc90aeec4cd6cd23d103e3f27f3d3501befe64,"CBLIS: Optimize relationship query cache

- Not using view prefix for relationship views.
- Call view's -updateIndex and check lastSequenceIndexed if the view index was changed or not. If not changed, return the cached result if it's available.

#960"
pasin,2015-12-09 22:01:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/53a1f4a865fd6b3ae87cf85e3577b94d8bd16bf5,53a1f4a865fd6b3ae87cf85e3577b94d8bd16bf5,"Handle accessing CBLIS from multiple dispatch queues

In multiple context env, such as parent (root, private) and child (main) context, each context operates on its own context. In most case, CBLIS operates on the root context's dispatch queue. However it's possible that the main context attached to the UI could access CBLIS directly for newValuesForObjectWithID and newValueForRelationship.

This commit make sure that any CBL operations on those 2 methods are executed on the root context or database dispatch queue.

#958"
pasin,2015-12-08 23:44:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8687e186b086415e3efe3079db43c71ab510b57e,8687e186b086415e3efe3079db43c71ab510b57e,"CBLIS: Fixed refresh context orders and store change notification

- Make sure that contexts get refreshed in order, root context first.

- Make sure that store change notification is done after refreshing all contexts and is posted by the root context.

- Several code format fixes."
mastohhh,2015-11-03 08:52:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77512afd56e10b4d4cf0e1efd925f029c126a13e,77512afd56e10b4d4cf0e1efd925f029c126a13e,"CBLIS: Fixed main context not getting refreshed

- Use Firing faults instead of using merge notifications.
- Also refresh to-one relation object in one-to-many relationship if members in to-many side get updated."
pasin,2015-10-20 21:58:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/47b0a8c7a31be3f3779b4984af5b33fdf7f4a707,47b0a8c7a31be3f3779b4984af5b33fdf7f4a707,"CBLIS: Optimize database change processing

- Not refreshing contexts when changes are from local database.

- Use only merge context to refresh contexts."
pasin,2015-10-20 18:26:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/242c15baa9b3add6ca231a92bda0f87333e6159e,242c15baa9b3add6ca231a92bda0f87333e6159e,"Disabled CBLIS perf test by default

- Added PERFORMANCE_TEST_ENABLED for enabling and disabling CBLIS performance test
- Added test_PerformanceFetchWithoutContextReset so we can see if the cache works.
- Several minor refactoring."
mastohhh,2015-10-19 17:59:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d1e8b05a298b547061a1ae6bc2c38c2ae5e4b3d,6d1e8b05a298b547061a1ae6bc2c38c2ae5e4b3d,Add CBLIS Performance UnitTests for save fetch inform
pasin,2015-10-20 01:17:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3bfa76fa62d9c37b4c04ea1c7fb7e1100b6efdaa,3bfa76fa62d9c37b4c04ea1c7fb7e1100b6efdaa,"Cleaned and added more logging to CBLIS code

# Conflicts:
#	Source/API/Extras/CBLIncrementalStore.m"
pasin,2015-10-19 21:20:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d1d555f6c4755da0a3bebab7f304b037ca013c2,2d1d555f6c4755da0a3bebab7f304b037ca013c2,"Fixed CBLIS crash due to missing type property

When processing CBL databas change, the changed document doesn't have type property. It's possible that the document was deleted without preserving the type property outside the CBLIS app. Now skipping the document without type property and print out a warning message.

#925"
pasin,2016-01-28 18:58:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d5f09b79b6f39416809435cba61a77611a8ba8d9,d5f09b79b6f39416809435cba61a77611a8ba8d9,"Set CBLJSViewCompiler DEBUG_INFORMATION_FORMAT to DWARF

Set Release DEBUG_INFORMATION_FORMAT=DWARF in CBLJSViewCompiler's target. This setting is inline with the other static library settings in the project.

#1054"
pasin,2016-01-28 18:47:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8ba43385f484ef0b50f9eaa37e4787059508380e,8ba43385f484ef0b50f9eaa37e4787059508380e,"Update CBForest to get DEBUG_INFORMATION_FORMAT settings change

#1054"
snej,2016-01-28 18:44:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d49c105e694607d17f62a926d76ceba7b659aec,5d49c105e694607d17f62a926d76ceba7b659aec,"Merge pull request #1076 from couchbase/feature/mac_missing_jsviewcompiler_header

Include CBLRegisterJSViewCompiler.h for Mac only"
pasin,2016-01-28 17:21:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec82c9feaedc375d40788a3e1cba79f87edc3424,ec82c9feaedc375d40788a3e1cba79f87edc3424,"Include CBLRegisterJSViewCompiler.h for Mac only

This is a regression bug after e97746843befc7987db35420bfbcddad435c9968 commit.

OSX includes CBLRegisterJSViewCompiler into the framework but iOS doesn't so we need to add CBLRegisterJSViewCompiler.h back to CouchbaesLite.h for Mac only.

#1054"
pasin,2016-01-28 17:14:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f4dd2e50061fa9874187a9363031f84b4b38cbe,8f4dd2e50061fa9874187a9363031f84b4b38cbe,"Update CBForest to uptake CLANG Module settings

#1054"
snej,2016-01-28 00:17:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/350982f5b72d0c00e9f4ac91bb934f4124fb841a,350982f5b72d0c00e9f4ac91bb934f4124fb841a,"Merge pull request #1072 from couchbase/feature/remove_CBLRegisterJSViewCompiler_h

Remove CBLRegisterJSViewCompiler.h from CouchbaseLite.h"
pasin,2016-01-28 00:15:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e97746843befc7987db35420bfbcddad435c9968,e97746843befc7987db35420bfbcddad435c9968,"Remove CBLRegisterJSViewCompiler.h from CouchbaseLite.h

#1064"
snej,2016-01-27 21:57:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b2dbb919903d9d4558ceaa174ec02d3171c48f48,b2dbb919903d9d4558ceaa174ec02d3171c48f48,"Merge pull request #1070 from couchbase/feature/missing_extras_file

Add CBLRegisterJSViewCompiler in the Extras folder"
pasin,2016-01-27 21:44:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/20c5c2c8b77aad09e204efc5deef9ad665e13aed,20c5c2c8b77aad09e204efc5deef9ad665e13aed,"Add CBLRegisterJSViewCompiler in the Extras folder

- Mark CBLRegisterJSViewCompiler as a project member in CBL iOS target.
- Copy Add CBLRegisterJSViewCompiler into the Extras folder when building CBL iOS target.

#1064"
snej,2016-01-27 21:40:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40503939d63b5c93cd758dfb1bb6f066912586fb,40503939d63b5c93cd758dfb1bb6f066912586fb,"Merge pull request #1069 from couchbase/feature/disable_clang_module

Disable CLANG_ENABLE_MODULES and CLANG_ENABLE_MODULE_DEBUGGING"
pasin,2016-01-27 20:41:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc086b85e04a5f37db919dd5ea099a795a01ea1b,fc086b85e04a5f37db919dd5ea099a795a01ea1b,"Disable CLANG_ENABLE_MODULES and CLANG_ENABLE_MODULE_DEBUGGING

These should be turned off when building static libraries for
distribution (i.e. to be linked into an app on some other computer.)
Otherwise you get linker warnings or errors.

For couchbase/couchbase-lite-ios#1054"
snej,2016-01-27 17:38:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09883c33e021acc1be3f65817b933a7bbf7476ae,09883c33e021acc1be3f65817b933a7bbf7476ae,"Merge pull request #1065 from couchbase/feature/jsviewcompiler

Fixed #1064 Restoring CBLJSViewCompiler target for iOS"
pasin,2016-01-27 06:19:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9588953a7a89d9e04610ef6da53d4d6a06d3b9e2,9588953a7a89d9e04610ef6da53d4d6a06d3b9e2,"Apply changes per code review

- Used CouchbaseLitePrefix.h instead of CBLJSViewCompiler-Prefix.pch
- Removed framework search paths
- Not overriding the deployment target
- Set ""Supported Platforms"" to iphonesimulator iphoneos appletvsimulator appletvos

#1064"
pasin,2016-01-27 02:11:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b207cfd5e383451394050b4a92efae0ae22e266f,b207cfd5e383451394050b4a92efae0ae22e266f,"Restoring CBLJSViewCompiler target for iOS

Moved CBLJSViewCompiler out of CouchbaseLite framework and stored CBLJSViewCompiler target for iOS.

#1064"
snej,2016-01-27 01:13:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a08b9b49518d7f0c49b8ae6cb595a07150d5f7c7,a08b9b49518d7f0c49b8ae6cb595a07150d5f7c7,"Fix missing CBLRegisterJSViewCompiler symbol in debug Mac build (for real)

The function CBLRegisterJSViewCompiler() was getting dead-stripped from
the Mac framework in debug builds, as a side effect of the build changes
made recently to enable SQLCipher-based frameworks.

To fix this, I added the ""-all_load"" linker flag, in debug builds only.

Adding this exposed a problem involving a duplicate definition of the
CouchbaseLiteVersion symbol generated by Xcode, which was being defined
in both the static library and final framework targets. So I turned off
versioning in the static library target, which fixes it.

Fixes #1063"
snej,2016-01-27 00:26:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/166b46f43fead2335a548d997eb563bfac1eb9ee,166b46f43fead2335a548d997eb563bfac1eb9ee,"Revert ""LiteServ: Use CouchbaseLite.exp file when linking debug build""

This reverts commit 9863c374093a784f4406c2bda7779513ca1938f5."
snej,2016-01-26 19:54:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7567853a4b9a945f26d257db7371d66c72824f7,c7567853a4b9a945f26d257db7371d66c72824f7,"Assigned bundle ID to LiteServ command-line tool so it can read defaults

Added some build settings that embed the LiteServ app's Info.plist in
the LiteServ tool's binary. This gives the binary a bundle ID of
com.couchbase.LiteServ like the app. That means it will honor user
defaults set in that domain by the 'defaults' tool, which can be useful
in testing.

Fixes #1062"
snej,2016-01-26 19:46:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e55ae6212182ce94103935b1b5c6a28852c2befd,e55ae6212182ce94103935b1b5c6a28852c2befd,"Merge branch 'release/1.2.0'

# Conflicts:
#	README.md"
snej,2016-01-26 19:37:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9863c374093a784f4406c2bda7779513ca1938f5,9863c374093a784f4406c2bda7779513ca1938f5,"LiteServ: Use CouchbaseLite.exp file when linking debug build

This fixes a weird link error building the debug version of LiteServ
(missing symbol _CBLRegisterJSViewCompiler)."
snej,2016-01-26 00:33:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/99e45036f6a664799f0cdd310c71ba7360a914bc,99e45036f6a664799f0cdd310c71ba7360a914bc,"Added ""--storage"" flag to LiteServ to set the default storage type"
snej,2016-01-26 00:33:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a804f0168478687073bc7aeec68fc43611d63569,a804f0168478687073bc7aeec68fc43611d63569,"Added ""--storage"" flag to LiteServ to set the default storage type"
snej,2016-01-25 00:47:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be3a0b3b284f1fe355a8db8191d6412894b5bb12,be3a0b3b284f1fe355a8db8191d6412894b5bb12,"Don't use MIME multipart boundary strings beginning with ""-""

It apparently triggers a bug in Go's multipart parser.

The leading ""-"" was introduced in 4/2015 by commit 611dca4a which
changed the prefix in the strings generated by CBLCreateUUID() from a
""!"" to a ""-"".

Fixes #1059"
snej,2016-01-25 00:47:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7f4d221ddcf9b8332f959aa949efc245b313413,c7f4d221ddcf9b8332f959aa949efc245b313413,"Don't use MIME multipart boundary strings beginning with ""-""

It apparently triggers a bug in Go's multipart parser.

The leading ""-"" was introduced in 4/2015 by commit 611dca4a which
changed the prefix in the strings generated by CBLCreateUUID() from a
""!"" to a ""-"".

Fixes #1059"
snej,2016-01-23 02:03:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eef3f86b0255fd852e45a3828a4784cf659da89c,eef3f86b0255fd852e45a3828a4784cf659da89c,"Optimize 1st-time pull by skipping deleted docs

Send ""?active_only=true"" as a _changes feed parameter when there's no
""since"" parameter, to tell SG 1.2+ to skip sending deleted (or removed)
docs. This can speed up the initial pull quite a lot.

Fixes #1052 (see also couchbase/sync_gateway#1503 )"
snej,2016-01-23 00:10:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9928d54175fec50e6860548336c52e8cc55fa474,9928d54175fec50e6860548336c52e8cc55fa474,"Merge pull request #1056 from couchbase/feature/fix_upgrade_localdoc

Fixed #1041 importing local docs when upgrading the database"
pasin,2016-01-23 00:06:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/771e2425a473f0969e15c661f997d2a38efb1cb6,771e2425a473f0969e15c661f997d2a38efb1cb6,"Fix importing local docs when upgrading the database

putLoalDocument:withID: doesn't expect the docID with `_local/` prefix so it added another `_local/` prefix to the ID. Need to remove `_local/` prefix from the ID.

#1041"
snej,2016-01-22 20:07:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f87cbe2dd9b51e479fc7bc491a2b32b5e78f143,2f87cbe2dd9b51e479fc7bc491a2b32b5e78f143,README: Link to better (non-versioned) URL for documentation
snej,2016-01-22 19:59:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c350befaa49d278340b8f95a770d284f3c4b88b0,c350befaa49d278340b8f95a770d284f3c4b88b0,"Updated README to bump platform versions, fix links, add more credits"
snej,2016-01-22 19:04:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f53128c7905ed6c6c7f8d05a38d666e85776e767,f53128c7905ed6c6c7f8d05a38d666e85776e767,"Tiny pbxproj change that Xcode made on its own

Seems like something got left in an incomplete state in the pbxproj,
because on re-opening the project Xcode adds these 2 lines."
snej,2016-01-21 19:04:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b94501a280e7759cd601be78e2a186170b8f469d,b94501a280e7759cd601be78e2a186170b8f469d,"Merge branch 'feature/use_c4'

# Conflicts:
#	Source/CBLForestBridge.mm
#	Source/CBL_ForestDBStorage.mm
#	Source/CBL_ForestDBViewStorage.mm"
snej,2016-01-21 18:23:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/793aa862de79c3ebf39e52b72559e9b9763751da,793aa862de79c3ebf39e52b72559e9b9763751da,Tiny pbxproj change that Xcode made on its own after the merge...
snej,2016-01-21 18:17:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b7a1d37b08d6207d661d2554da84fc99156023f,7b7a1d37b08d6207d661d2554da84fc99156023f,Merge branch 'release/1.2'
snej,2016-01-21 05:56:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4968d78abbef8eea6ef08479204142800a5b2258,4968d78abbef8eea6ef08479204142800a5b2258,"Added ""CBL tvOS Test App"" with unit tests"
snej,2016-01-21 02:19:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5cbe1c720d694c63b507397a33a0e5977695e431,5cbe1c720d694c63b507397a33a0e5977695e431,"Merge branch 'release/1.2'

# Conflicts:
#	Source/CBL_ForestDBStorage.h
#	Source/CBL_ForestDBStorage.mm
#	Source/CBL_ForestDBViewStorage.mm
#	vendor/CBForest"
snej,2016-01-20 23:44:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf83676238a68cfc255792aeb11acf421e0489dd,bf83676238a68cfc255792aeb11acf421e0489dd,Fixed a crash when failing to open a CBForest database.
snej,2016-01-20 22:59:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/178dea1f32547f7f47de8ae21ba896fe239f9d51,178dea1f32547f7f47de8ae21ba896fe239f9d51,Fixed some minor memory leaks in the new ForestDB storage code
snej,2016-01-20 19:44:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4cd003c6faf7fe8a9c65bad479cf93c0f0fa985e,4cd003c6faf7fe8a9c65bad479cf93c0f0fa985e,"CBL SQLite Storage target was missing a dependency on Tokenizer target

Fixed clean-build break"
snej,2016-01-20 19:35:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/08a901a5981007cce24fa48ef0d37fcdcb620554,08a901a5981007cce24fa48ef0d37fcdcb620554,Re-enabled compaction logging for (ForestDB) views
snej,2016-01-20 01:40:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1c18dd942a01c7436a8208ee58a843497a5896c3,1c18dd942a01c7436a8208ee58a843497a5896c3,Re-enabled compaction observation in ForestDBStorage
snej,2016-01-20 01:09:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d50d025381c8adae1cf2f82e5dfc25828796b239,d50d025381c8adae1cf2f82e5dfc25828796b239,Build fixes for iOS
snej,2016-01-20 00:17:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/50d0a8969d17b0322bf84619a161df6e7f5e402f,50d0a8969d17b0322bf84619a161df6e7f5e402f,"Fixed missing _register_unicodesn_tokenizer when building iOS app w/o ForestDB

Needed to add libTokenizer.a to the SQLite storage library.

Fixes #1047"
snej,2016-01-19 23:57:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5b548c435a3012f5dd6f22fd3471a760ff489fa4,5b548c435a3012f5dd6f22fd3471a760ff489fa4,Some code cleanup in ForestDB[View]Storage
snej,2016-01-19 20:52:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fca66db13df1a4fd238a27aff1d12d323031e9d,9fca66db13df1a4fd238a27aff1d12d323031e9d,Fixed two bugs in ForestDBViewStorage; all unit tests now pass w/C4!
tleyden,2016-01-19 20:46:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/df89f0555d9c25fe7abb9133de814cb995b9c3c8,df89f0555d9c25fe7abb9133de814cb995b9c3c8,This was pointing to a removed gitter chatroom
snej,2016-01-19 18:42:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/948acec6bdffd5da8e386e708cb603676950a946,948acec6bdffd5da8e386e708cb603676950a946,"Reduced LiveQuery update latency from 500ms to 200ms

Fixes #1046"
snej,2016-01-19 02:11:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6719288eb5ce7cf890f57b5e1f0575ed6914fe45,6719288eb5ce7cf890f57b5e1f0575ed6914fe45,Fixed a setting in CBL Mac+SQLCipher.xcscheme
snej,2016-01-19 02:09:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ba4ad06c26b6fa6d4fce5252c6b7ac9b56742215,ba4ad06c26b6fa6d4fce5252c6b7ac9b56742215,Merge branch 'fix/appletv-1042' into release/1.2
snej,2016-01-19 02:07:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e4dbc174ff20cfe8ab2ac8560a51dc4074c99d41,e4dbc174ff20cfe8ab2ac8560a51dc4074c99d41,"Made iOS targets build for AppleTV as well

By changing the SUPPORTED_PLATFORMS build setting to a list of all
platforms, I made the iOS targets buildable for both iOS and tvOS, so
we don't need any extra targets or duplicated build settings.

Build the CBL iOS and CBL Listener iOS targets, as usual.
Use the scheme destination pop-up, or the -destination arg of
xcodebuild, to specify which platform to build for.

Fixes #1042"
pasin,2016-01-19 01:26:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7ad06656ab6a80c7634b9b6b30a2cc11a3d2762d,7ad06656ab6a80c7634b9b6b30a2cc11a3d2762d,"Merge pull request #1038 from couchbase/feature/user_agent

Fixed #1029 : Updated UserAgent string"
snej,2016-01-19 00:51:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa3f80357939497aac53b1a8ad522af890e5e821,fa3f80357939497aac53b1a8ad522af890e5e821,"Merge pull request #1035 from couchbase/feature/add_1_2_replacedb_test

Fixed #1028 : Add tests for replacing iOS and Android 1.2 database"
snej,2016-01-18 19:33:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a4cf64be617e37c41675467f10879d134bfe513,3a4cf64be617e37c41675467f10879d134bfe513,"Merge pull request #1037 from couchbase/feature/upgradedb_noatts

Fixed #1025 : selecting wrong noAtts column index in CBLDatabaseUpgrade"
snej,2016-01-18 18:33:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16fe8edf8039715b131404d9950d6f0c157c75a6,16fe8edf8039715b131404d9950d6f0c157c75a6,"Added CBL Mac+SQLCipher target

This target builds a Mac OS framework that uses SQLCipher (built-in)
instead of the system SQLite.

To build this, you must have copied a 64-bit Mac OS static library of
SQLCipher into vendor/SQLCipher/libs/osx/libSQLCipher.a .

To avoid name collisions, the build output appears in directories named
""Debug-SQLCipher"" and ""Release-SQLCipher"". The framework of course has
the same name.

Fixes #976"
pasin,2016-01-18 17:50:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9583ae8ae06404fa1643d7f80c6cacd65d920d7f,9583ae8ae06404fa1643d7f80c6cacd65d920d7f,"Add replaceDB tests for testing 1.2 Database

- Added databases from iOS, Android, and .NET.

- Added test23b_ReplaceDatabaseForestDB for testing ForestDB.

#1028"
snej,2016-01-18 17:28:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f5e54966fd2e06c6ddd6d7fe19b850cc9b887e3,9f5e54966fd2e06c6ddd6d7fe19b850cc9b887e3,"Split up CBL Mac target, creating a (static) CBL Mac Library target

Prerequisite for creating the SQLCipher-based version.
For #976"
snej,2016-01-16 00:13:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/916efb2b0281b4fedb64b516f36f667640ffc418,916efb2b0281b4fedb64b516f36f667640ffc418,View.docType works again with ForestDB (reimplemented in C4)
snej,2016-01-15 19:36:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3adce53265dda3d0c83c994778dc58908909c18d,3adce53265dda3d0c83c994778dc58908909c18d,"More C4-related fixes

* All-docs query with list of docIDs should return deleted docs
* lastSequenceChangedAt was returning the wrong value

ViewInternal tests pass now. Still working on ViewTests."
pasin,2016-01-15 15:51:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2eb507176823309991e7bc770ae69e3c7535163e,2eb507176823309991e7bc770ae69e3c7535163e,"Updated UserAgent string

Updated UserAgent string to be the same pattern on all platforms.

String format:

```
CouchbaseLite/{SYNC_PROTOCOL_VERSION} ({PRODUCT_NAME} {OS}/{ARCH} {RELEASE_VERSION}/{COMMITHASH})
```

Example:

```
CouchbaseLite/1.2 (Java Linux/MIPS 1.2.1/3382EFA)
```

#1029"
snej,2016-01-15 02:00:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be2a5e443ada89ca08360a4f30795509957e0968,be2a5e443ada89ca08360a4f30795509957e0968,Lots of view-related bug fixes for using C4 API
pasin,2016-01-14 22:31:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/20ec2bd494b7baaea7af7de14d4de368944d839f,20ec2bd494b7baaea7af7de14d4de368944d839f,"Fixed selecting wrong noAtts column index in CBLDatabaseUpgrade

noAtts column index is 6 no 4.

#1025"
snej,2016-01-14 21:58:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e65bcff97cafc045a7dcd566a1a6dc78de3d6f9b,e65bcff97cafc045a7dcd566a1a6dc78de3d6f9b,C4: Fixed bugs related to rekeying
snej,2016-01-14 18:37:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d881661babacb812fcf1693779ceeca6843eda1,9d881661babacb812fcf1693779ceeca6843eda1,Merge branch 'feature/carthage-support' of https://github.com/buzzfeed/couchbase-lite-ios
snej,2016-01-14 01:21:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7264890f2cbdce98223fd346a7b77825f67e82bd,7264890f2cbdce98223fd346a7b77825f67e82bd,Bug fixes -- now passes Database and DatabaseInternal tests!
snej,2016-01-13 21:01:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98af0ffaadd048de2196e70046a30b8fcd197bbf,98af0ffaadd048de2196e70046a30b8fcd197bbf,"Better fix for pull replicator compatibility with Cloudant

Reverted previous fix (commit 8e39b05924414f44753b1b0fdee4a4338cfda3eb.)

Instead, check whether we sent a POST and either: the _changes result
code is 405; or it's 401 and the Server header indicates Cloudant).

Fixes #1020 again"
snej,2016-01-13 20:58:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/833a6901c058cfcbf2e3f37de9231702fd611946,833a6901c058cfcbf2e3f37de9231702fd611946,Fixes/improvements
snej,2016-01-12 23:03:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bbaaaaef0b2579d49423d92ca1ef9c73768cc936,bbaaaaef0b2579d49423d92ca1ef9c73768cc936,Added new error param to calls to c4view_fullTextMatched()
snej,2016-01-12 21:31:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa01f7d79b8eb7c0c6cbeb7db5504dab54227730,fa01f7d79b8eb7c0c6cbeb7db5504dab54227730,"ForestDB storage code now builds, using CBForest C API!"
snej,2016-01-08 22:15:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e39b05924414f44753b1b0fdee4a4338cfda3eb,8e39b05924414f44753b1b0fdee4a4338cfda3eb,"Fix pull replicator compatibility with Cloudant

Cloudant doesn't support POST to _changes, and the error it returns can
be hard to disambiguate, so instead I'm pre-checking whether the URL's
hostname ends with "".cloudant.com"" and if so falling back to GET.

Fixes #1020"
snej,2016-01-08 21:48:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2accc96426bb179af5fbb8375726e67c58737de3,2accc96426bb179af5fbb8375726e67c58737de3,"Fixed framework bundle version strings in Info.plist

CFBundleShortVersionString needs to contain just one to three decimal
numbers separated by periods; apparently the App Store has been getting
picky about this.
Fixes #1019"
snej,2016-01-08 21:15:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/236e2a49f73a26d9d4aef1488c54e163c48ea252,236e2a49f73a26d9d4aef1488c54e163c48ea252,More WIP
snej,2016-01-08 16:41:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb045e85727e944f4c414857e62420cee7882364,cb045e85727e944f4c414857e62420cee7882364,WIP
snej,2016-01-07 00:45:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/15df948d6bda716159e8c75ab9ef1a920bc1773b,15df948d6bda716159e8c75ab9ef1a920bc1773b,"Be careful using strongSelf in replicator callback blocks

The point of the weakSelf/strongSelf dance is to avoid a reference cycle,
but that means that when the block is called, the receiver may have been
dealloced already, so strongSelf will end up nil. In that case,
dereferencing it would crash. So check it for nil first.

Also fixed some inadvertent references to self in the blocks, which
defeat the purpose of using weakSelf.

Fixes #1015 (I think; this is a speculative fix)"
snej,2016-01-06 19:53:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ce49331d1f4a5611fddc159f7dc46ad38e3ca4a,0ce49331d1f4a5611fddc159f7dc46ad38e3ca4a,"Updated sqlite3-unicodesn: Enable all language stemmers

Fixes #983"
snej,2015-12-19 00:36:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e97b7c1e3bbc85400eb2b749e772b0c455ce282,4e97b7c1e3bbc85400eb2b749e772b0c455ce282,"CBForest: Renamed C++ namespace ""forestdb"" to ""cbforest""

No code changes."
snej,2015-12-28 18:15:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a93f30605983b796466f74a4d0de7dba43447b63,a93f30605983b796466f74a4d0de7dba43447b63,"Removed some obsolete doc-comments about ForestDB FTS limitations

Fixes #1014"
snej,2015-12-28 17:54:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/26c67aff8e2334ab8dd0c3194346422f7ff36d26,26c67aff8e2334ab8dd0c3194346422f7ff36d26,"Fixed revIDs in _local docs in ForestDB

When a _local doc was updated via the native API, it didn't get assigned
a correct _rev -- the generation number stayed at 1."
snej,2015-12-19 00:36:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7faebf23d7b0cd3e7ef20b46afbab3d475f677e1,7faebf23d7b0cd3e7ef20b46afbab3d475f677e1,"CBForest: Renamed C++ namespace ""forestdb"" to ""cbforest""

No code changes."
pasin,2015-12-19 02:56:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/22a6c7f0d52c34ab419c03eeb7ea1c359158b5ec,22a6c7f0d52c34ab419c03eeb7ea1c359158b5ec,"Merge pull request #1009 from couchbase/fix/nullable_cookie_params

Made path, expirationDate nullable in CBLReplication's cookie setter"
snej,2015-12-18 17:40:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1866b33b557ec8612ff454f387812837dbc2a1f4,1866b33b557ec8612ff454f387812837dbc2a1f4,"Made path, expirationDate nullable in CBLReplication's cookie setter

Also updated the doc-comment to explain that cookies are saved per
replication, not in the sharedHTTPCookieStorage."
snej,2015-12-16 21:52:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c5fb2ee30f0a16895c93415d9276b93366296160,c5fb2ee30f0a16895c93415d9276b93366296160,Fixed BLIP submodule commit
snej,2015-12-16 21:51:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fa6be12ba50c1e2fb0143efcfd05bd05eac80a2,2fa6be12ba50c1e2fb0143efcfd05bd05eac80a2,Updated to newer CBForest and BLIP (no code changes)
snej,2015-12-16 20:51:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2cb0717fff04442348f69cde63ce2835ff07ccd2,2cb0717fff04442348f69cde63ce2835ff07ccd2,Reworked Collatable in CBForest for 10% indexing speedup
snej,2015-12-14 20:38:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f4d097174956f4806071d9401753cdc234a33ed,8f4d097174956f4806071d9401753cdc234a33ed,"Optimizations for saving documents

Taken from feature/fleece branch but not Fleece-related

* Optimized -inTransaction: (no need to keep levels)
* Save copying a CBL_MutableRevision in -addDocID:...
* Slight speedup to -generateRevIDForJSON (don't call sprintf)
* Fixed CBLWithStringBytes to be faster when string is nil"
snej,2015-12-16 19:33:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aaec008fbe4fabcf2598a930ef58c9e5e0fa6ea9,aaec008fbe4fabcf2598a930ef58c9e5e0fa6ea9,"CBForest: Optimizations to indexing, revid"
snej,2015-12-11 18:26:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3c92deac80321ccc706ab84ade1e9b030880087,d3c92deac80321ccc706ab84ade1e9b030880087,Project settings touched by Xcode 7.2 (LastUpgradeCheck etc.)
mz2,2015-12-13 20:40:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57dab477ed27d914540a2f335573e6338ffde083,57dab477ed27d914540a2f335573e6338ffde083,Improves readability of CBLDocument -isDeleted.
mz2,2015-12-12 17:57:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43759e708deaaf1db9d02bb9458da3b269794b5b,43759e708deaaf1db9d02bb9458da3b269794b5b,Checks for currentRevision.isDeletion state in CBLDocument -isDeleted
snej,2015-12-12 00:08:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e61ab2a1d62afb45a19c0c0958d72e5a126d4b5,3e61ab2a1d62afb45a19c0c0958d72e5a126d4b5,"kCBLStatusBadAttachment no longer aborts a pull replication.

Fixes #1001 (also relevant to #986)"
pasin,2015-12-11 22:43:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c8348440fd5ba74582218de469998481b25f13a,7c8348440fd5ba74582218de469998481b25f13a,"Merge pull request #1000 from couchbase/feature/CBLIS_purge

CBLIS: Add purge object API"
pasin,2015-12-11 02:03:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c0eb0ffb581e03ba3ea4b63bd64d37dd3eb84e72,c0eb0ffb581e03ba3ea4b63bd64d37dd3eb84e72,"CBLIS: Add purge object API

Added -(BOOL) purgeObject: (NSManagedObject*)object error: (NSError**)outError method.

#879"
snej,2015-12-11 20:22:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/07a02a0c73b22576ccda67fd69ded86f29ea5526,07a02a0c73b22576ccda67fd69ded86f29ea5526,"Database read-only fixes

* Database opened with DatabaseOptions.readOnly wasn't being opened as
  read-only if the Manager wasn't read-only
* Read-only databases will now refuse to delete, compact, change
  encryption key, or upgrade to ForestDB
* ForestDB view dbs weren't being opened read-only
* SQLiteStorage now returns error 403, not 500, for r/o violation
* Added more tests for read-only databases

Fixes #998"
snej,2015-12-11 19:05:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1211c2f6a900af83ec6ce9f43af74287ce3fa71c,1211c2f6a900af83ec6ce9f43af74287ce3fa71c,"Fixed thread-safety issue handling low-mem warning in ForestDBViewStorage

Fixes #999"
snej,2015-12-11 01:29:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b6427af4b9c4f586406b7ef24aefcef0045d276,8b6427af4b9c4f586406b7ef24aefcef0045d276,"Optimized CBLCache (no longer uses NSCache, which is slow)"
snej,2015-12-11 01:02:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/699b1c7bbec5374c82343bfa83dff1d6b64648dd,699b1c7bbec5374c82343bfa83dff1d6b64648dd,CBLCache: removed old support for iOS 5 and OS X 10.7
pasin,2015-12-10 23:21:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9cbb37a8a1b83f97c24bec2fa0a2012d101d124d,9cbb37a8a1b83f97c24bec2fa0a2012d101d124d,"CBLIS : Fix incompatible code with old iOS SDK version

-objectIDsForRelationshipNamed: has been available since iOS 8.3 so we can't use it now."
pasin,2015-12-10 21:45:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/463e2733256bb09efab262c4ae73cfe519b12df0,463e2733256bb09efab262c4ae73cfe519b12df0,"Merge pull request #997 from couchbase/feature/CBLIS_Relationship_Cache

Fixed #960 CBLIS: Optimize relationship query cache"
pasin,2015-12-10 21:44:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2125b125cb4f2f6e7a5ff982e1cae1c9c27f4496,2125b125cb4f2f6e7a5ff982e1cae1c9c27f4496,"CBLIS: Optimize relationship query cache

- Not using view prefix for relationship views.
- Call view's -updateIndex and check lastSequenceIndexed if the view index was changed or not. If not changed, return the cached result if it's available.

#960"
pasin,2015-12-09 22:29:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d83d2c7b682bf001b5e9422a53850d1e3111379b,d83d2c7b682bf001b5e9422a53850d1e3111379b,"Merge pull request #996 from couchbase/feature/cblis_multi_threads

Fixed #958 Handle accessing CBLIS from multiple dispatch queues"
pasin,2015-12-09 22:01:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f1c623b9b041311f8cba12dd1c036672071a426,6f1c623b9b041311f8cba12dd1c036672071a426,"Handle accessing CBLIS from multiple dispatch queues

In multiple context env, such as parent (root, private) and child (main) context, each context operates on its own context. In most case, CBLIS operates on the root context's dispatch queue. However it's possible that the main context attached to the UI could access CBLIS directly for newValuesForObjectWithID and newValueForRelationship.

This commit make sure that any CBL operations on those 2 methods are executed on the root context or database dispatch queue.

#958"
pasin,2015-12-09 00:05:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/52ba7c10b9c9f35036c1ff9eeab06b6ad5b28517,52ba7c10b9c9f35036c1ff9eeab06b6ad5b28517,"Merge pull request #995 from couchbase/feature/issue_938_perf

Fixed #938 CBLIS execute save performance and context refreshing issue"
pasin,2015-12-08 23:44:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/544de2195ff7d884bfb08a431381da6e81fa1199,544de2195ff7d884bfb08a431381da6e81fa1199,"CBLIS: Fixed refresh context orders and store change notification

- Make sure that contexts get refreshed in order, root context first.

- Make sure that store change notification is done after refreshing all contexts and is posted by the root context.

- Several code format fixes."
mastohhh,2015-11-03 08:52:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a794038eca37506da72420b931e921afe00f1bd,2a794038eca37506da72420b931e921afe00f1bd,"CBLIS: Fixed main context not getting refreshed

- Use Firing faults instead of using merge notifications.
- Also refresh to-one relation object in one-to-many relationship if members in to-many side get updated."
pasin,2015-10-20 21:58:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf7b5b1a22180a2013314be138d844e8e9b31cc4,bf7b5b1a22180a2013314be138d844e8e9b31cc4,"CBLIS: Optimize database change processing

- Not refreshing contexts when changes are from local database.

- Use only merge context to refresh contexts."
lordkev,2015-12-08 21:35:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6bd74c5f4f987fb9df4ec5163496a030b4d9106,b6bd74c5f4f987fb9df4ec5163496a030b4d9106,Update BLIP and CBForest
lordkev,2015-11-02 19:09:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/061909a473b9b7bc814f09fe1774b870997898e1,061909a473b9b7bc814f09fe1774b870997898e1,Change team to None on Carthage framework scheme
lordkev,2015-11-02 19:08:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2cb5994e06b507e0bbb2a513ce513674a88d36b,e2cb5994e06b507e0bbb2a513ce513674a88d36b,Add shared framework scheme for Carthage
snej,2015-12-08 17:08:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d1838cb5059e3cbb2bc88f786ddd64f85451184,1d1838cb5059e3cbb2bc88f786ddd64f85451184,"Merge pull request #993 from couchbase/feature/storage_type_constants

Add constant strings for ""SQLite"" and ""ForestDB"" storage type"
pasin,2015-12-08 04:57:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ae92e391b269d2fa14dccc0ee43df72ed83baab8,ae92e391b269d2fa14dccc0ee43df72ed83baab8,"Add constant strings for ""SQLite"" and ""ForestDB"" storage type

Per discussion in https://github.com/couchbaselabs/couchbase-lite-api/issues/129, adding constant strings kCBLSQLiteStorage and kCBLForestDBStorage."
snej,2015-12-07 19:12:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9051b9e3a2da2055bd0b73286f8e21cb5fdf6ec,f9051b9e3a2da2055bd0b73286f8e21cb5fdf6ec,"Merge pull request #989 from couchbase/tleyden-patch-1

Update pointer to official docs so there is less hunting required."
tleyden,2015-12-04 21:55:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02ff5fd4f937a3ac14be0936904b5b39589578a4,02ff5fd4f937a3ac14be0936904b5b39589578a4,Update pointer to official docs so there is less hunting required.
snej,2015-11-16 17:18:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/154fefc845c682efacd9a0598cfa2397c5c0fc28,154fefc845c682efacd9a0598cfa2397c5c0fc28,"Listener: Don't warn about disconnect with GCDAsyncSocketReadTimeoutError

Fixes #973"
snej,2015-11-16 17:13:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82666f69aeabde7ef393f1943f47ac0be8730903,82666f69aeabde7ef393f1943f47ac0be8730903,"LiteServ: Convert --dir arg into absolute path if necessary

Fixes #974"
snej,2015-11-12 19:54:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f8a446edf0b31793205a00d56b2be9c9cff0caf,2f8a446edf0b31793205a00d56b2be9c9cff0caf,"Added 'nullable' attribute to a param of -[CBLManager replaceDatabase...]

Fixes #979"
snej,2015-11-10 23:07:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8be56d87bbada5e80b86abc103c90018aaf72d12,8be56d87bbada5e80b86abc103c90018aaf72d12,"ForestDB views now auto-compact

* Updated to latest ForestDB commit, which supports auto-compact for
  databases without sequence trees (such as our view-index dbs.)
* Updated CBLForestDBViewStorage to work with the different file naming
  scheme of auto-compacting databases.
* Fixed bug where CBLForestDBViewStorage didn't delete the index file
  safely.

Fixes #972"
snej,2015-11-10 23:07:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b85afff9d85b328f14a5e6982789e43df7674702,b85afff9d85b328f14a5e6982789e43df7674702,"ForestDB views now auto-compact

* Updated to latest ForestDB commit, which supports auto-compact for
  databases without sequence trees (such as our view-index dbs.)
* Updated CBLForestDBViewStorage to work with the different file naming
  scheme of auto-compacting databases.
* Fixed bug where CBLForestDBViewStorage didn't delete the index file
  safely.

Fixes #972"
snej,2015-11-10 21:22:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ef46cf75b2de8fe93925ac68cf2df4848fbbc56,1ef46cf75b2de8fe93925ac68cf2df4848fbbc56,Changed project version string to 1.3
snej,2015-11-10 00:24:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e1623f1839651cd65a4af9816542028b7772f42f,e1623f1839651cd65a4af9816542028b7772f42f,"Implemented new -[CBLManager openDatabaseWithOptions:error:] API

See design doc:
https://github.com/couchbaselabs/couchbase-lite-api/wiki/Open-Database-Options

Removed .upgradeStorage and -encryptDatabaseNamed:, which were never
in a release.

Informally deprecated -registerEncryptionKey:forDatabaseNamed by
removing its doc-comment and moving it to the bottom of the
class declaration."
snej,2015-11-03 22:57:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5da5b3dbfbb006249a826876d6914f0644276838,5da5b3dbfbb006249a826876d6914f0644276838,"Fix for 491 error inserting rev with attachments during db upgrade

The error occurred because a rev is being inserted with no history;
this exposed a bug in -[CBLDatabase processAttachmentsForRevision:...].
(The rev has no ancestors because it's an old conflict, old enough that
its ancestors all got pruned.)

The actual bug has to do with determining the generation # of the rev,
so I cleaned up that code to make it more reliable.

I also added warnings before the places where a 491 status gets set,
to make it easier in the future to determine which of those situations
is happening.

Fixes #961"
snej,2015-11-03 20:50:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/17a36cf33b554c910e0cdaeb30adc600088ab93f,17a36cf33b554c910e0cdaeb30adc600088ab93f,"CBLModel: Don't nil out _document when it's deleted

If _document is set to nil, the CBLModel is in a bad state where various
operations can crash it. Instead, leave it pointing to the deleted doc.
Fixes #965"
snej,2015-11-03 20:42:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b33a9d834732886903c15529b06a8c27dc9b1df9,b33a9d834732886903c15529b06a8c27dc9b1df9,Updated oauthconsumer submodule
snej,2015-11-03 20:39:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6737bd8ead2f576732350e00aae70f4cd216aca,e6737bd8ead2f576732350e00aae70f4cd216aca,"Router: Support POST to _changes

Needed because CBLChangeTracker now always sends a POST, as of commit
188fc8e."
snej,2015-11-03 19:04:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d2d787e54adead1ecad4a404496f8405e47f93d,2d2d787e54adead1ecad4a404496f8405e47f93d,"Changes feed POST body shouldn't contain a non-integer 'heartbeat'

The internal _heartbeat value can acquire a fractional part after being
lowered by the -handleEOF method (CBLSocketChangeTracker.m:266), but
SG can't parse a non-integer value of it, so suppress the decimal point.
Fixes #963"
snej,2015-11-03 18:44:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/188fc8e68222ab614c8750f5aa0f2ecd72c637a7,188fc8e68222ab614c8750f5aa0f2ecd72c637a7,"Always use the POST form of _changes, since CouchDB supports it

This avoids the potential of ridiculously long URLs if the replication
has a huge set of filter parameters, e.g. channel names.
Fixes #964"
snej,2015-10-21 23:14:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01ab84b5aef9d587683d6e8760b0177f1dd6bb67,01ab84b5aef9d587683d6e8760b0177f1dd6bb67,"Merge pull request #959 from couchbase/issue/957

Fixes #957"
borrrden,2015-10-21 22:14:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ca019cf900d598861bdd4014442283167c0dee8,1ca019cf900d598861bdd4014442283167c0dee8,Fixes #957 by changing the unit test to run on the correct DB
snej,2015-10-20 19:53:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63059e46189507e4276cc76d67938c12b15c24f5,63059e46189507e4276cc76d67938c12b15c24f5,"Don't upgrade, or allow replacement of, read-only databases"
pasin,2015-10-20 18:27:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea9287f2d4af7a0d640139f4a44cf1f31b61d913,ea9287f2d4af7a0d640139f4a44cf1f31b61d913,"Merge pull request #956 from couchbase/feature/CBLIS_perf_unittest

Added CBLIS performance tests"
pasin,2015-10-20 18:26:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2d62c34766f1008212c0cd4d04b9f6459b64634,e2d62c34766f1008212c0cd4d04b9f6459b64634,"Disabled CBLIS perf test by default

- Added PERFORMANCE_TEST_ENABLED for enabling and disabling CBLIS performance test
- Added test_PerformanceFetchWithoutContextReset so we can see if the cache works.
- Several minor refactoring."
mastohhh,2015-10-19 17:59:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b64f09059291072e73cce410685002f0cf7bbb2f,b64f09059291072e73cce410685002f0cf7bbb2f,Add CBLIS Performance UnitTests for save fetch inform
pasin,2015-10-20 01:17:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f78237aecadb6cb157c21a932de6a8ed623b02ca,f78237aecadb6cb157c21a932de6a8ed623b02ca,Cleaned and added more logging to CBLIS code
pasin,2015-10-19 21:21:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f170886cf0f780052f2426cded59a7dff6eda47b,f170886cf0f780052f2426cded59a7dff6eda47b,"Merge pull request #955 from couchbase/feature/issue_925_CBLIS_missing_type_property

Fixed #925 CBLIS crash due to missing type property"
pasin,2015-10-19 21:20:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87f07fc560f92f71eea37c4ba40a32258798c906,87f07fc560f92f71eea37c4ba40a32258798c906,"Fixed CBLIS crash due to missing type property

When processing CBL databas change, the changed document doesn't have type property. It's possible that the document was deleted without preserving the type property outside the CBLIS app. Now skipping the document without type property and print out a warning message.

#925"
pasin,2015-10-19 21:03:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/241bc5509e3f3e0a7782d3604afc425ffd965e7a,241bc5509e3f3e0a7782d3604afc425ffd965e7a,"Merge pull request #954 from couchbase/feature/issue_942_CBLIS_relationship_crash

Fixed #942 crash due to firing fault on faulted parent relationship object"
pasin,2015-10-19 21:03:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d340f442944ec1fe79e917504a7814e0187e24e,1d340f442944ec1fe79e917504a7814e0187e24e,"Fixed crash due to firing fault on faulted parent relationship object

Not firing fault when parent object is in faulted state.

#942"
snej,2015-10-19 20:19:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2e2fca05d2f596ef52bbaaac806e9fddd4a5b06,e2e2fca05d2f596ef52bbaaac806e9fddd4a5b06,"Don't change compaction mode of db opened read-only, or allow view deletion"
snej,2015-10-19 20:18:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/58221ba2f0e0202d27bfee739dafa0debe7ec594,58221ba2f0e0202d27bfee739dafa0debe7ec594,"Updated version string to ""1.2""

(There are other diffs in the project file but I think they're just
side effects of updating to the latest CBForest, which has some new
targets in it.)"
snej,2015-10-15 20:46:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c62fde5e9e6597f0bf8ed68b7b6d8411d7a7441,0c62fde5e9e6597f0bf8ed68b7b6d8411d7a7441,"Cleanup of CBL_QueryRowStorage protocol

Now that both storage engines store index values as JSON, there's no
need to abstract away the parsing thereof."
snej,2015-10-14 23:00:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/470dbc95d37d51895c541600f7b1c8fc0e9244b3,470dbc95d37d51895c541600f7b1c8fc0e9244b3,"Added SyncPerf logging, specifically for watching puller performance."
snej,2015-10-14 21:42:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b913a51698938f4ce36f31a8f059e855fc01e0d1,b913a51698938f4ce36f31a8f059e855fc01e0d1,"Don't limit number of changes fetched in a single _bulk_docs request

The limit of 50 was because _all_docs gets parsed as a single JSON doc,
so if the response is huge it adds to latency and memory usage. But
that doesn't apply to _bulk_docs, which is parsed incrementally as
MIME bodies."
snej,2015-10-14 21:40:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1caccb91edec96b703d57553bc2db041d4016756,1caccb91edec96b703d57553bc2db041d4016756,"Puller detects server type from change-tracker HTTP response

Important now that the change-tracker might be the first HTTP request,
because we don't ask for a checkpoint on a first replication (fc3634c)."
snej,2015-10-14 19:43:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64ae48e2ff4f0d44ae7669eb461bf94ce6d8138e,64ae48e2ff4f0d44ae7669eb461bf94ce6d8138e,"CBForest now stores view-index values as JSON, not Collatable"
snej,2015-10-13 20:51:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d63b85c89030112b7b340929beee48ffbf07ae00,d63b85c89030112b7b340929beee48ffbf07ae00,"Worked around intermittent connection failures in ListenerTest

Simulator sometimes gets weird failures trying to connect to a Bonjour
hostname, where both client and listener simultaneously get connection-
failed errors (-61 or -9806.) Workaround is to substitute localhost in
the listener URL."
snej,2015-10-13 20:19:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e9d8f1f3b7dda1230048b8e38a840f178d8e5db,1e9d8f1f3b7dda1230048b8e38a840f178d8e5db,Reduce number of ForestDB flusher threads from 4 to 1
snej,2015-10-13 20:09:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44df17aa96c488338906567716f330011e98ea9e,44df17aa96c488338906567716f330011e98ea9e,"Enable Xcode 7 address sanitizer for run & test

...in the ""Mac"" and ""iOS Test App"" schemes"
snej,2015-10-13 17:52:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c698b751b789d0ae3781822af865843ae49eb62d,c698b751b789d0ae3781822af865843ae49eb62d,Updated CBForest. Use simplified call to RevTree::insertHistory.
pasin,2015-10-13 01:11:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77355a1f35cf48eb99631db70bf0b7f41a1efd9d,77355a1f35cf48eb99631db70bf0b7f41a1efd9d,"Fixed CBLIS crash when the properties to fetch is NSPropertyDescription

- Properties to fetch is a collection of either NSPropertyDescriptions or NSString property names so we need to check and handle both type.

- Also added a method to check if the fetch request is supported and return an error if it's not supported.

#946"
pasin,2015-10-09 17:26:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e452b5e5d92d7671d551787d5e32663ae29de494,e452b5e5d92d7671d551787d5e32663ae29de494,"Merge pull request #936 from couchbase/feature/better_encryption

ForestDB auto-compact and better encryption (#922)"
pasin,2015-10-09 16:50:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/981e58621c4fedd8f1c77ac8a8bba20e2a3639f6,981e58621c4fedd8f1c77ac8a8bba20e2a3639f6,"Merge pull request #944 from couchbase/feature/fdb_upgrade

Support for upgrading SQLite databases to ForestDB (#870)"
snej,2015-10-08 23:58:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74b90aa8d70a362aba53a35be9d2d6232a811a62,74b90aa8d70a362aba53a35be9d2d6232a811a62,"QueryBuilder: Don't remove values that are redundant with the key

In some cases an item the client wants in the value (part of the ""select""
clause) also needs to go in the key so the query can sort by it. The
code used to remove that item from the value since it's redundant. But
this is confusing to the developer, who is now not sure where that item
will be found. So I'm taking that out.
Fixes #921"
snej,2015-10-08 22:42:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb70209823f10d4cc69fb664952d7f4b33249a95,bb70209823f10d4cc69fb664952d7f4b33249a95,"Support for upgrading SQLite databases to ForestDB

If you set the new property CBLManager.upgradeStorage to YES, and the
existing property storageType to @""ForestDB"", then existing SQLite
databases will be upgraded to ForestDB when first opened.
Fixes #870"
snej,2015-10-08 20:32:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7877dae19c2fd154711e284c2d1d94817517d6bb,7877dae19c2fd154711e284c2d1d94817517d6bb,"Demoted CBLSocketChangeTracker connect warning to log

CBLSocketChangeTracker may now be the first attempt to reach the server,
now that the replicator sometimes skips getting the remote checkpoint
(988ee30), so it's more likely to hit fatal errors like 404 or 401.
Having it warn in those cases is too noisy, and also triggers unit test
failures. So I demoted the call from a Warn() to a Log()."
snej,2015-10-07 23:41:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/988ee30a3d15a96b4ebc84b95975434db8cd0df4,988ee30a3d15a96b4ebc84b95975434db8cd0df4,"Replicator: Don't fetch remote checkpoint if there's no local checkpoint

Reduces replication time by eliminating an HTTP round-trip delay on an
initial replication.

I had to handle the case where the local db has no saved checkpoint but
has been copied from a pre-installed database; in that case we do need
to use the regular code path.

Also added a bit of code in CBLChangeTracker to map a low-level DNS
error to a more usual NSURL error; this was to keep a unit test working.
When we skip the checkpoint lookup, and the remote hostname is bogus,
the error that stops replication will come from the change tracker not
a RemoteRequest, so its error domain/code were different."
snej,2015-10-07 23:32:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16b64c4c15133081d06101cdf040d350a1e487a5,16b64c4c15133081d06101cdf040d350a1e487a5,"Reduce puller's insertion delay from 1sec to 0.25sec

Helps reduce latency of pull replications."
snej,2015-10-06 18:18:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5294df8aee2b07ad59d7e46fff50937f7ecefdca,5294df8aee2b07ad59d7e46fff50937f7ecefdca,"Fixed: SQLite db rekeying didn't work when removing key (decrypting)

I overlooked a subtlety of the SQLCipher API: When attaching a new
database that should _not_ be encrypted, you have to explicitly add
`KEY ''`. I was using `KEY ""x''""`, the hex form, which didn't work.
And leaving off the KEY clause doesn't work either. Weird.
Fixes #937"
snej,2015-09-29 17:39:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e522d2357e3d05bfb18b1045632c7705eb986e7,8e522d2357e3d05bfb18b1045632c7705eb986e7,"Enable ForestDB auto-compaction

* Set the proper config property to enable auto-compact. (Before
  I was setting the wrong property, so it wasn't auto-compacting.)
* Existing databases have to be explicitly upgraded to auto-compact
  by catching the error, opening w/o auto-compact, then switching
  it on.
* ForestDBStorage now requests extra time from the OS before
  suspension, if a database compaction is running when the app is
  backgrounded.
* Increased auto-compact check rate to every 15 seconds. The
  check is very quick (no I/O), and we need it to happen soon
  after launch since the app might not be running for very long.
* Now using CBForest Database::setDefaultConfig() to set default
  configuration parameters once.
* Factored CBLRestReplicator backgrounding support out into a
  utility class MYBackgroundMonitor.

Fixes #922"
snej,2015-09-29 17:42:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b971c55121d79d18571956dba5f2baaa09651278,b971c55121d79d18571956dba5f2baaa09651278,"Using new built-in ForestDB encryption API

Prerequisite for enabling auto-compaction, because
the old encryption plug-in didn't work correctly with it."
snej,2015-10-04 22:09:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62256ddaebe9301a783ea7e1a76f02f9566c0d54,62256ddaebe9301a783ea7e1a76f02f9566c0d54,"Fixed problem updating SQLite user_version

Regression from e371f53.
Fixes #935 (thanks, Brendan)"
pasin,2015-10-02 22:52:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9eabf0df8887d091ecabc6d61abce1648cedf6a2,9eabf0df8887d091ecabc6d61abce1648cedf6a2,"Merge pull request #932 from couchbase/feature/changes_compression

Compress _changes feeds"
snej,2015-10-02 21:58:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e40e61d90b7d2a3950c692d3e5bdd6090b2f9591,e40e61d90b7d2a3950c692d3e5bdd6090b2f9591,"Small error handling bug-fix in CGLBZip

Found in code review"
snej,2015-10-01 20:21:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23bef8464f69a6fd06cca447d606fa519e8a06a2,23bef8464f69a6fd06cca447d606fa519e8a06a2,"Added gzip compression support to CBLWebSocketChangeTracker

This enables compression of continuous changes feeds, if Sync Gateway
has the matching change to support it.

Fixes #927"
snej,2015-10-01 00:18:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da9e787d3f2637448f1c280f5cce8d4e931aaca4,da9e787d3f2637448f1c280f5cce8d4e931aaca4,"Added gzip compression support to CBLSocketChangeTracker

Fixes #926"
snej,2015-09-30 23:08:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57689c75345a526289afa3dcf842e13649a9b42f,57689c75345a526289afa3dcf842e13649a9b42f,Added CBLGZip class
snej,2015-09-30 23:11:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8bc599ab1d4c8d3b79a4ae51571e87e4407f6c90,8bc599ab1d4c8d3b79a4ae51571e87e4407f6c90,"Fixed problem reopening ForestDB database

Auto-compact results in database files with numeric extensions added,
so the db might be ""db.forest.0"", not the ""db.forest"" that we expected.
This broke the test in CBL_ForestDBStorage that checks whether the
database is ForestDB format."
snej,2015-09-30 20:38:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e371f531085f1f978a60c814cbadc738312c705c,e371f531085f1f978a60c814cbadc738312c705c,"After exporting re-keyed encrypted db, set SQLite user_version

Fixes #930"
snej,2015-09-30 20:29:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ddf987bf267c6752b5c44a472d1556f27bcd9276,ddf987bf267c6752b5c44a472d1556f27bcd9276,"-changeEncryptionKey: should set error if encryption not supported

Possibly involved in #917"
snej,2015-09-29 19:11:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1eeabee0ef836e7af0629d98ca76eaf0f30b2a9a,1eeabee0ef836e7af0629d98ca76eaf0f30b2a9a,"Revert ""Enable auto-compact for ForestDB databases""

This reverts commit ebef00859f51431b38ee7177a257476ce5e4a1fe."
pasin,2015-09-28 16:48:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a2636f6ef433ef52c273c0e9a0193344a9135a1,3a2636f6ef433ef52c273c0e9a0193344a9135a1,"Merge pull request #920 from popina/toonerefresh

CBLIS refresh objects with to-one relationships"
snej,2015-09-24 04:01:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebef00859f51431b38ee7177a257476ce5e4a1fe,ebef00859f51431b38ee7177a257476ce5e4a1fe,"Enable auto-compact for ForestDB databases

ForestDB config compaction_mode field has to be set to enable auto-
compact; somehow I didn't notice this (was it an API change?) and didn't
set that field, so auto-compact didn't happen. Fixed now.

For #922"
snej,2015-09-19 21:10:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/83161693ef93e375ea3e2eca8f5c59eb000197cc,83161693ef93e375ea3e2eca8f5c59eb000197cc,"Fixed: REST _changes feed may show wrong rev after resolving conflict

SQLite-only problem, and only occurs with changes feed that doesn't
include conflicts, so it doesn't affect the replicator.
Fixes #896"
snej,2015-09-19 21:01:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/58c16d0292dbaa04135270b0042ce792aec3087f,58c16d0292dbaa04135270b0042ce792aec3087f,"+modelForDocument: should set isNew if document doesn't exist in db

Fixes #909"
snej,2015-09-18 23:08:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ddce4b11eebc715ed7da7dc25566e49bd439fea1,ddce4b11eebc715ed7da7dc25566e49bd439fea1,"Pusher should send non-winning deletion revisions w/ForestDB

The push replicator should send all new leaf revisions even if they're
deletions. Otherwise a merged conflict won't get pushed properly since
one of the branches will be capped with a deletion that won't be sent.
SQLite's -changeSinceSequence method does this properly but ForestDB's
didn't.
Fixes #895"
snej,2015-08-28 22:31:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad82b1b94887df639034baf3dfaa1812508fd60a,ad82b1b94887df639034baf3dfaa1812508fd60a,"API: Database encryption key can now be changed (or added or removed)

Added public method -[CBLDatabase changeEncryptionKey:error:]
Fixes #836"
tleyden,2015-09-09 23:19:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71eae742fa3de2d40650112c6760486b59a370f3,71eae742fa3de2d40650112c6760486b59a370f3,Remove broken gitlytics link
snej,2015-09-08 22:37:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f38ef1e54338e10d299eb1ccbc6f4c4bd442eb5a,f38ef1e54338e10d299eb1ccbc6f4c4bd442eb5a,"Fixed ForestDB view queries with both descending and prefixMatch.

Fixes #908"
pasin,2015-09-08 17:13:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c857847ceb003e5fffd97c42ea5bd1e44bac8fb4,c857847ceb003e5fffd97c42ea5bd1e44bac8fb4,"Merge pull request #904 from couchbase/fix/900_auth_errors

Fixed 401 status not being propagated to CBLReplication.lastError"
snej,2015-09-04 18:27:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f73010d0fbfda497008d8d984a51292367979a75,f73010d0fbfda497008d8d984a51292367979a75,"Fixed 401 status not being propagated to CBLReplication.lastError

-[CBLRestPuller pullRemoteRevision:] was treating all errors as applying
only to the revision being pulled, i.e. it would just skip that rev and
continue. That should only be done for specific errors like a 403, 404
or 410 status. Others should set the replicator's error property.

This is actually a regression introduced a year ago in 87f3261 as part
of the fix for #377. That fix made document-level errors from this HTTP
call work correctly, but it broke connection-level errors like this one.

Fixes #900"
snej,2015-09-03 22:45:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66bd9fd1491df8e4215ec6c40d3e498faf3e2eaa,66bd9fd1491df8e4215ec6c40d3e498faf3e2eaa,"Fixed nasty bug with control chars in keys in view indexes

CBForest's Collatable encoder didn't handle control characters (or DEL)
correctly, so it ended up writing data that wouldn't parse. This
showed up as broken view indexes when the keys contained these
characters.

Fixed it, and bumped the version number of CBForest's MapReduceIndex,
which will force all existing indexes to be deleted and rebuilt.
Fixes #899."
snej,2015-09-03 22:40:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4fcd0a2585d045be878727642d4442d03bad7e92,4fcd0a2585d045be878727642d4442d03bad7e92,"Fixed regression, Database_Tests failing after commit e831224

The tests were in error so I fixed them."
pasin,2015-09-03 21:57:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/371bbb029a49387210ac84bac010cd3fb2e4618b,371bbb029a49387210ac84bac010cd3fb2e4618b,"Fixed ListenerHTTP_Tests's test03_ReadOnly fails in iOS 9

Instead of NSURLSession, use CBLRemoteRequest (ListenerTestRemoteRequest) which  has support for custom cert authentication that accepts self-signed certs in the .local domain.

#901"
snej,2015-09-02 20:40:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d2417614435de69093a949afee90c7f3c7044e01,d2417614435de69093a949afee90c7f3c7044e01,CBL_ForestDBStorage needs to track its view-storage instances
snej,2015-09-02 18:35:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e831224cd36977349e07c30979c196180870e666,e831224cd36977349e07c30979c196180870e666,Reorganized exception-handling support functions for ForestDB storage
snej,2015-08-28 22:48:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bcbcbc5c4dbb8e5c82a899682a9b36a4a1eaca3,2bcbcbc5c4dbb8e5c82a899682a9b36a4a1eaca3,"Fixed 32-bit iOS compile error in Replication_Tests.m

Pasin and I didn't see this because the error only occurs when building
32-bit, and the iOS unit tests target was set to build the active
architecture only in debug builds. I fixed it to build all archs, so
we'll see this sort of error in the future."
snej,2015-08-27 21:17:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4ded1caaa92db5a4cd177ad52f8115d2c7a2ea0e,4ded1caaa92db5a4cd177ad52f8115d2c7a2ea0e,"Fixed off-by-1 error handling limit, in query with postFilter

Oops :(
Fixes #893"
snej,2015-08-27 18:02:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/299f51bf3fee60f85591240bb5f39cdc72c40820,299f51bf3fee60f85591240bb5f39cdc72c40820,"Fixed redundant attempts to load revision of a nonexistent document

Loading the revision returns kCBLStatusNotFound (404) which was
preventing the -currentRevision method from setting the
_currentRevisionKnown flag, even though it now knows there is no
current revision."
snej,2015-08-27 18:00:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/53c9c7349680d294ea22ac6140ecf6dd03ac936a,53c9c7349680d294ea22ac6140ecf6dd03ac936a,"Xcode 'QuickLook' tooltip support for debugging

Implemented -debugQuickLookObject methods for CBLDocument, CBLRevision,
CBLQueryRow, CBLModel. This enables QuickLook in the Xcode debugger:
the tooltip from hovering over a variable will have an ""eye"" icon that
when clicked opens a window showing a description. There's also an
eye button in the debugger variables view that acts on the selected
variable."
snej,2015-08-26 23:24:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42846a7da298b89478b11ceda11e4c81e00c6040,42846a7da298b89478b11ceda11e4c81e00c6040,"CBLQueryBuilder: Better support for descending sorts

NSSortDescriptors with ascending=NO can now be handled as part of the
view key, instead of going into the query's sortDescriptors. This makes
the sorting much faster since it's done as part of the index.

This only works when all the sortDescriptors are descending. If there's
a mix of ascending and descending, the only option is in-memory sorting.

The query builder is also now smarter at detecting some other cases where
the sort descriptors can be handled as part of the key.
Fixes #889"
snej,2015-08-25 16:51:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4caef84350590e470130d9bc2128f8edf25d30d0,4caef84350590e470130d9bc2128f8edf25d30d0,"Unit test for #890

ufosky's PR that fixes #890 didn't include the unit test from the
bug report, so I'm adding it here."
snej,2015-08-24 21:28:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/722dfc564acfdb4eec3acf8c642789000a148fc8,722dfc564acfdb4eec3acf8c642789000a148fc8,"Upgrade mistakenly-non-encrypted BlobStore to use encryption

The first time an existing encrypted database is opened, its BlobStore
will detect that it wasn't encrypted, and will convert each of its blob
files to be encrypted.

The detection is done by means of a file called ""_encryption"" that's
present in the BlobStore directory iff it's encrypted. Since I just
implemented the support for this file, no existing database contains it,
so the first time a BlobStore is opened with encryption, it'll see that
it's not encrypted. (The process of adding encryption will create the
magic file.)

This commit adds the general purpose -changeEncryptionKey:error: method
which can also be used to decrypt or switch to a different key. This
will be used in 1.2 to support re-keying a database."
snej,2015-08-24 17:28:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63f0c502ce0bea1f781f86a0531dac61fc6f28d7,63f0c502ce0bea1f781f86a0531dac61fc6f28d7,Set BlobStore encryption key when opening db. (Includes unit test.)
pasin,2015-08-26 05:20:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b9e4c4e7c34a9c84289a28f8643521947e97047,8b9e4c4e7c34a9c84289a28f8643521947e97047,"Merge pull request #894 from couchbase/fix/sort_and_limit

Fixed queries that have custom sortDescriptors and skips or limits"
snej,2015-08-25 22:05:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e29c30af04bd4bf42cb32ce22d19ae3a7eb33a2f,e29c30af04bd4bf42cb32ce22d19ae3a7eb33a2f,"Fixed queries that have custom sortDescriptors and skips or limits

Don't apply the skip and limit during the actual query. Instead do them
after the in-memory sorting.
Fixes #892"
snej,2015-08-25 16:57:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3ff9d75b68b32e27746b8c2d16f296b49bb307ba,3ff9d75b68b32e27746b8c2d16f296b49bb307ba,"Merge pull request #878 from couchbase/feature/issue_875_rename_lowercase_attachments

Fixed #875 Rename lowercase attachment files in CBLDatabaseUpgrade"
snej,2015-08-25 16:50:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/246936d345601c5d221d7c2d01f242e8749340d7,246936d345601c5d221d7c2d01f242e8749340d7,"Merge pull request #888 from ufosky/master

Add support for sort descriptor using comparator, and fix multiple-comparisons exception

Fixes #890"
pasin,2015-08-24 23:26:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9660c9e83693e18edf1f5da5baff63e3307a6660,9660c9e83693e18edf1f5da5baff63e3307a6660,"Fixed success check bug for backing out attachment file renaming

#875"
snej,2015-08-21 16:29:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8296e052f24ce72b0623064473defb8508ee488f,8296e052f24ce72b0623064473defb8508ee488f,Updated to latest forestdb master branch
ufosky,2015-08-22 10:05:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21da2b8fa34b92e2c51004414bc40be4c393dc02,21da2b8fa34b92e2c51004414bc40be4c393dc02,Fix exception on predicate has more than 2 variables and a greater than condition on a variable.
pasin,2015-08-22 03:45:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30116ee760544137f1be2810ea4c1a486ff696e6,30116ee760544137f1be2810ea4c1a486ff696e6,"Optimized renaming attachment files in CBLDatabaseUpgrade

- Replaced unnecessary renaming path file logic with just renaming the file name and attaching to the dir path string.

- Used Dictionary to keep the renamed file names for backing out. Only file names are stored to save mem space.

#875"
ufosky,2015-08-22 01:42:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75af06e3a9abfd7e679bf661d22a536c0552a1da,75af06e3a9abfd7e679bf661d22a536c0552a1da,Add support for sort descriptor using comparator.
pasin,2015-08-21 23:34:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b0ac1360e6969b28fc398bd260924dadac6a04c6,b0ac1360e6969b28fc398bd260924dadac6a04c6,"Skip checking file protection level for -shm file in unit test

The -shm file has NSFileProtectionNone protection level by default regardless of the protection level of its parent director. As confirmed by an apple engineer, the file contains no sensitive information.

#883 #874"
pasin,2015-08-21 16:42:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64c51d968cb672e3cf82f5fab984ed078ee0c307,64c51d968cb672e3cf82f5fab984ed078ee0c307,"Merge pull request #886 from ndouglas/issue-880

Renames more CocoaLumberjack symbols."
snej,2015-08-20 23:23:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d07703584f6c69486e331f4e3f07b037a8ceecc,6d07703584f6c69486e331f4e3f07b037a8ceecc,"Stop using hardcoded cert fingerprint in test_08_Puller_SSL_Pinned

A different cert needs to be substituted when testing on a device
since the SG will not be on 'localhost', and this cert will have a
different digest of course. So compute the digest at runtime.
Fixes #882"
snej,2015-08-19 18:16:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63c0b661b465396601e8bb02eaebc21f9fb11ac3,63c0b661b465396601e8bb02eaebc21f9fb11ac3,"Refactoring attachment-download code to support longer-term queueing

For #859"
snej,2015-08-19 18:30:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/468458a590b0874d7fa9fdb87096a7054ae498dd,468458a590b0874d7fa9fdb87096a7054ae498dd,"Just split CBL_BlobStoreWriter out into its own source/header files.

No other changes."
snej,2015-08-20 00:40:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9bc229e47c025a0be299f1b873344e183c110aca,9bc229e47c025a0be299f1b873344e183c110aca,"Listener_Tests: Fixes for iOS 9 App Transport Security

The recently-added tests failed on iOS 9 because they didn't enable
SSL for the listener. Also cleaned up the code a bit by factoring out
some duplication."
snej,2015-08-20 17:43:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e16003e40a30281015e74dd67e10dad3f613114,8e16003e40a30281015e74dd67e10dad3f613114,"Merge pull request #872 from couchbase/objc-linker-message

helpful error message when storage classes are missing"
pasin,2015-08-20 17:27:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa159788d49ab37f8c090de6c915060e0fc5b293,aa159788d49ab37f8c090de6c915060e0fc5b293,"Fixed CBLIS DefaultConflictHandler test failures

As the conflict handler will be call on the main thread but in a synchronously manner, there is a race condition when checking for the expectation to fullfil. Add counter property to the test case so that we can use KVO expection to check if the conflict handler get called correctly or not.

#874"
pasin,2015-08-20 01:37:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b352c85b3183bcfea87e71aea227e2b1ccdf282d,b352c85b3183bcfea87e71aea227e2b1ccdf282d,"Rename lowercase attachment files in CBLDatabaseUpgrade

CBL Android 1.0.4 and .NET 1.1.0 have lowercase attachment file names. This method will detect that and uppercase the file names if needed. This makes the Database_Tests.test23_ReplaceOldVersionDatabase passed on the real device.

#875"
snej,2015-08-20 00:44:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/83c8e36bb899afd20f4e2e511742b580ec423b1a,83c8e36bb899afd20f4e2e511742b580ec423b1a,"Merge pull request #873 from couchbase/feature/issue_726_readonly_savecheckpoint

Fixed #726 CBLListener readOnly mode cannot save checkpoint doc"
pasin,2015-08-19 23:07:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1267326b00fa2b04b436fe8e9844835b8751eec5,1267326b00fa2b04b436fe8e9844835b8751eec5,"Merge pull request #876 from couchbase/feature/issue_874_test_environment

Feature/issue 874 test environment"
pasin,2015-08-19 20:11:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5a03c3c3a7f039769c09e79c3c09f4ff7d8fb09c,5a03c3c3a7f039769c09e79c3c09f4ff7d8fb09c,"Fix an iOS9 unit test failure

Fixed Replication_tests.test15_PushShouldNotSendNonModifiedAttachment unit test failure on iOS9 due to accessing https syncgateway url."
pasin,2015-08-18 21:58:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f7616e7114196982405d3d8c5b659ad36b1d1ac9,f7616e7114196982405d3d8c5b659ad36b1d1ac9,"Fix CBLListener readOnly mode cannot save checkpoint doc

- Allowed access to PUT /_local/docid (Http Sync) setCheckpoint (Blip Sync).

- Removed docID from CBLSyncConnection's OnSyncAccessCheckBlock as there is currently no usage of the docID.

- Fixed unit tests.

#726"
snej,2015-08-18 19:57:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e5678090a7701fab45961b4fd63121083d706a0,4e5678090a7701fab45961b4fd63121083d706a0,"Coalesce multiple download requests for same attachment

* If the app makes multiple requests to download an attachment, the
  replicator only starts up one task.
* Each request will return a separate NSProgress object, but the
  download task will update all of them.
* The download task is only canceled if _all_ the NSProgress objects
  are canceled.
* The unit test now starts two downloads and verifies that each one's
  progress is reported correctly, but it doesn't very that there's only
  one actual download.

Fixes #860"
snej,2015-08-18 18:26:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85d456d6bd9f83dffe759b0ffd347e82baff652c,85d456d6bd9f83dffe759b0ffd347e82baff652c,"Revert ""Fixed random test fail in test close database""

This reverts commit 3e160ce98cab9c18ba17a39c3a5bfc31bf0d2694."
snej,2015-08-18 18:26:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/756b680d3ad914a8e71f13771a69e81a70f6a56b,756b680d3ad914a8e71f13771a69e81a70f6a56b,"Revert ""Possible workaround of test20_LazyPullAttachments test exception""

This reverts commit e0909a417c640e3e71484d5f8c437c866e68e1da."
snej,2015-08-18 18:24:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c0740cfd3fdb1c7f012c27039f8976ac98d858b3,c0740cfd3fdb1c7f012c27039f8976ac98d858b3,"Added transparent workaround for XCTest keyValueObservingExpectation bug

Uses new CBLKVOProxy class to defer the KVO notifications to the main
thread.
We should back this out after the build-bot has upgraded to Xcode 7."
snej,2015-08-18 00:15:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0909a417c640e3e71484d5f8c437c866e68e1da,e0909a417c640e3e71484d5f8c437c866e68e1da,"Possible workaround of test20_LazyPullAttachments test exception

Instead of using -[XCTest keyValueObservingExpectationForObject:...],
do the KVO myself."
pasin,2015-08-17 23:48:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e160ce98cab9c18ba17a39c3a5bfc31bf0d2694,3e160ce98cab9c18ba17a39c3a5bfc31bf0d2694,"Fixed random test fail in test close database

Instead of using keyValueObservingExpectationForObject which sometimes has an issue throwing an exception as cannot unregister the observer, fall back to use the old run-loop checking style."
snej,2015-08-17 21:53:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8c07a270500df7076d3e3e6e760511c7a4722c6,f8c07a270500df7076d3e3e6e760511c7a4722c6,"Better assertion-failure handling in P2P_Tests

If the replication fails with an error, don't bother validating the
documents because it'll just produce 100 more assertion failures,
creating a lot of noise in the test log."
snej,2015-08-17 20:38:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c74e3954aaeec0a2ee9bc5548e4a9cf8dfd871d,4c74e3954aaeec0a2ee9bc5548e4a9cf8dfd871d,"Merge pull request #871 from couchbase/feature/issue_686_close_bgdb

Fix #686 close database not closing background database"
pasin,2015-08-17 20:06:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e80a597afb6e1a99082b8e96e342b2bf14b6b129,e80a597afb6e1a99082b8e96e342b2bf14b6b129,"Fix close database not closing background database

- Closed background database in CBLManager._forgetDatabase: method.
- Added CBLManager._closeDatabaseNamed: method to facilitate closing the opened database of the given name.
- Added Database_Tests.test24_CloseDatabase
- Made CBLDatabase.isOpen value change observable (used in the unit test)

#686"
pasin,2015-08-17 19:17:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fbaf6f9eb420827eb37183b0ffd9f9a9a9fd3de0,fbaf6f9eb420827eb37183b0ffd9f9a9a9fd3de0,"Updated CocoaHTTPServer submodule for parsing range request fix

Update CocoaHTTPServer submodule and add more tests to Listener_Tests.test04_GetRange.

#74"
snej,2015-08-15 17:35:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/773b2580a7453faec5e552930e03084ad4dcb9e4,773b2580a7453faec5e552930e03084ad4dcb9e4,"Merge pull request #842 from couchbase/feature/issue_74_range_request

Fix #74 CBLRouter's processRequestRanges to return 416 when the range is invalid"
pasin,2015-08-15 05:27:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c920198a359d2b67c751fd2ba7b18b3bf4a2638,4c920198a359d2b67c751fd2ba7b18b3bf4a2638,"Fixed CBLRouter.processRequestRanges bug

- Fixed a bug per code review for the case that incorrectly make ""200-201"" an invalid range if the bodyLength is 100... because from would be 200 and to would be 99.

- Rebase with the master branch

#74"
pasin,2015-08-05 04:16:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/252afcf6b819bd62327c724775a19ecf968f38b9,252afcf6b819bd62327c724775a19ecf968f38b9,"Fixed CBLRouter checking syntactically invalid range bug

The syntactically invalid range check should be done before checking unsatisfiable range.

#74"
pasin,2015-08-04 22:35:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d82b8f61dbb174f78008e16181cb6f70d6826279,d82b8f61dbb174f78008e16181cb6f70d6826279,"Fixed CBLRouter to ignore invalid syntactically range request

According to http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html, the syntactically invalid range should be ignored.

#74"
pasin,2015-08-04 07:37:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16269ab1ac76797d3e0aa043d0849a79d7980aa8,16269ab1ac76797d3e0aa043d0849a79d7980aa8,"Fix CBLRouter's processRequestRanges to return 416 when the range is invalid

- Aligned with the fix in CocoaHTTPServer (d44cf160dd72fa5a1df9924e33ad367c3e37b798), return 416 when the range is invalid.

- Added unit test cases

#74"
snej,2015-08-15 00:17:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e9a7004ba694d9d861fda8dd6f9cc096e3f8b70,1e9a7004ba694d9d861fda8dd6f9cc096e3f8b70,"Merge pull request #848 from couchbase/feature/issue_698_close_db_stop_replication

Fix #698 replication stopped notification not being sent when closing the database"
snej,2015-08-15 00:15:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d486504ee24aacf547bff39e9596e6df9c4dfe1c,d486504ee24aacf547bff39e9596e6df9c4dfe1c,"Merge pull request #867 from couchbase/feature/issue_838_synclistener_readonly

Fix #838 Implement readOnly to CBLSyncListener"
pasin,2015-08-15 00:07:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6fd7e8a1d5a6bb3c71af6df21c05fba7f56420d9,6fd7e8a1d5a6bb3c71af6df21c05fba7f56420d9,"Fixed CBLSyncConnection bug per code review

#838"
pasin,2015-08-12 22:17:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/29bcbccca1f65ea96e219e029846ee1c6c76362b,29bcbccca1f65ea96e219e029846ee1c6c76362b,"Implement readOnly to CBLSyncListener

- Added OnSyncAccessCheckBlock property to CBLSyncConnection similarly to CBL_Router.OnAccessCheckBlock property. OnSyncAccessCheckBlock (if specified) will be called to check the access for each sync request coming to the CBLSyncConnection's handlers. The handlers will then return the corresponding error responses depending on the result of the OnSyncAccessCheckBlock call.

- In read only mode, CBLSyncListener will block access to setCheckpoint, changes, and rev requests.

#838"
pasin,2015-08-07 01:18:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e897b61e9733522782e427bc49b1115ba2ecbc13,e897b61e9733522782e427bc49b1115ba2ecbc13,"Fix replication stopped notification not sent when closing database

When updating the replication on the main thread, instead of calling -doAsync: on the database, calling it on the manager object to loose the database open status check.

#698"
snej,2015-08-14 22:04:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f8596048f1b6bc012e024b858c154d0b8402c51,9f8596048f1b6bc012e024b858c154d0b8402c51,"Oops, had to merge an upstream change in PocketSocket"
snej,2015-08-14 21:59:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b1010494f09946eba0a13597178fd8462507f27f,b1010494f09946eba0a13597178fd8462507f27f,"Bug fixes & test fixes

* CBLManager: Fixed race crash if -backgroundServer called too early
* BLIPPocketSocketListener: Fixed race condition assertion failure
  if connection arrives immediately after closing
* Made -[Replication_Tests test21_SyncGatewaySessionCookie] work in iOS 9
* Partial fix of Listener_Tests in iOS 9 ... still failing in simulator,
  but that appears to be a simulator bug
* PSWebSocketServer: improved HTTP error response when receiving a
  non-WebSocket request"
pasin,2015-08-14 21:53:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a267f7e9b999db0c3be974204cc358a946e94c3,6a267f7e9b999db0c3be974204cc358a946e94c3,"Update ForestDBViewStorage to use slice.hasPrefix() function

- Updated submodule
- Updated ForestDBViewStorage to use slice.HasPrefix function

#735"
snej,2015-08-13 21:09:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dc960b8af53a04c11bd5c830653165c999a30b6f,dc960b8af53a04c11bd5c830653165c999a30b6f,"Fixed truncated-input bug in CBLSocketChangeTracker

I have no idea why this didn't manifest before today, but there were
circumstances where it could fail to read all the input: if paused
when the EOF arrived, or if the last chunk of available input was > 4kb.
The effect would be a ""Truncated changes feed"" warning, and probably
some changes being lost."
snej,2015-08-13 19:57:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3219bee9faa6b92148c25761b1b6c8349290ed48,3219bee9faa6b92148c25761b1b6c8349290ed48,"Upgraded SSL cert for unit tests to use SHA256 (not SHA1)

iOS 9's App Transport Security doesn't accept SHA1 digests in certs, so
this caused unit tests to fail.

New cert was created with:
openssl req -new -x509 -key privkey.pem -sha256 -out cert.pem -days 1095
(using the same privkey.pem as before.)"
snej,2015-07-21 18:24:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4da5ad500d3543cb879c55e9e9eaa80a906a377e,4da5ad500d3543cb879c55e9e9eaa80a906a377e,"Unit tests now pass on iOS 9

Had to make all NSURLConnection-based tests use SSL only, to comply with
App Transport Security.

(Back-ported to master from the 1.1.1 branch)"
pasin,2015-08-13 05:07:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5b858e3b62048f976efcc52afaf1e04b917ce19d,5b858e3b62048f976efcc52afaf1e04b917ce19d,Ignore .xccheckout file
pasin,2015-08-13 00:56:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5e09503692f196424f89346639686f6da015b42,a5e09503692f196424f89346639686f6da015b42,"Added a SyncGatewaySession replication test

This test is to test a custom authentication with setting _session SyncGatewaySession cookie. The test tests against a continuous pull replicator to make sure that the set cookie is passed to the web socket.

#865"
snej,2015-08-12 22:25:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/256582ff52d89867fb45a51849f4bf6a36c1adff,256582ff52d89867fb45a51849f4bf6a36c1adff,Renamed CBLReplication.downloadAttachments to .downloadsAttachments.
snej,2015-08-12 21:46:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bff4d49a3e52a1ca073eaa911fff5f3dde2f7022,bff4d49a3e52a1ca073eaa911fff5f3dde2f7022,Tweaks to last commit -- added CBLAttachment.encodedLength
snej,2015-08-12 21:12:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/314fb4e3317cc894517d674ca64a80e8a56212ce,314fb4e3317cc894517d674ca64a80e8a56212ce,"Make attachment downloads cancelable

The public API now returns an NSProgress object. The app can call
-cancel on it to cancel the download.
Fixes #861"
snej,2015-08-12 19:35:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5df4590b350f752b289f8e014fcc7e6a78d06e4f,5df4590b350f752b289f8e014fcc7e6a78d06e4f,Merge branch 'master' into feature/lazy_attachments
snej,2015-08-12 19:07:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8556fa15e72490a19d273cbbaa178799728a581,b8556fa15e72490a19d273cbbaa178799728a581,"CBLQueryBuilder: Fixed bug with ""IN"" predicate test and sort descriptor

When the predicate uses an IN test, exact key equality is needed, so
the sort descriptor key can't be appended to the emitted key.
Fixes #857"
snej,2015-08-12 16:50:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5cd484d7d102d82d212d7be8f8e6e0ca6ca846be,5cd484d7d102d82d212d7be8f8e6e0ca6ca846be,"Declare param of +[CBLManager enableLogging:] as nullable.

Fixes #854"
snej,2015-08-12 01:26:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a96a2c738711174bd4aeb96ca9d9e3f95b6cfe3,4a96a2c738711174bd4aeb96ca9d9e3f95b6cfe3,"Remove -fno-objc-arc compiler flag from MYUtilities files in iOS target

A month or two ago I updated the MYUtilities source code to use ARC,
and I turned off the disable-ARC compiler flag on the Mac target but
apparently forgot to do so on the iOS target. Was reminded of this by
the ref-leak warnings from the static analyzer. Oops!"
snej,2015-08-12 01:05:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f87f4eef93a37027ab0994cd864c8c8aeb58d13,2f87f4eef93a37027ab0994cd864c8c8aeb58d13,"Suppressed a static analyzer warning in CBL_Router.m

""Instance variable '_changesContentOptions' in class 'CBL_Router' is
never used by the methods in its @implementation"" -- It's not an actual
problem, just a false positive."
snej,2015-08-11 23:50:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60ac0fe7f43797c764e8895c89591e308474006e,60ac0fe7f43797c764e8895c89591e308474006e,"Fixed failure of -[P2P_HTTP_Tests testUploadAttachment]

Caused by a GCDAsyncSocket bug that affects the CBLListener. Problem
tends to occur when reading an HTTP request with a body larger than
48kbytes. I've applied a workaround to GCDAsyncSocket that makes the
test failure go away.
Fixes #863"
snej,2015-08-11 17:36:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6545e8d68eddf33ccd104e3cab180f49b60e9602,6545e8d68eddf33ccd104e3cab180f49b60e9602,Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into feature/lazy_attachments
snej,2015-08-11 17:34:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de85e0d6368cc2fce9722b90cca1000dd5a02a03,de85e0d6368cc2fce9722b90cca1000dd5a02a03,"Made attachment downloads resumeable (but only for a short time)

CBLAttachmentDownloader can now resume a download if it's interrupted,
using the support for Range: headers that I'm adding to Sync Gateway.
However, this only works during the retry interval -- CBLRemoteRequest
doesn't retry indefinitely, and after it gives up the data-so-far is
deleted. This should be improved later.
Fixes #858"
pasin,2015-08-09 21:20:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f852bc1d53337ee23a3d312be51cc777eda02af,4f852bc1d53337ee23a3d312be51cc777eda02af,"Fixed CBLIS Relationship Cache

- Fixed relationship cache not get initialized
- Fixed cached relationship enumerator not getting reset (the reset method is depreciated).

#793"
snej,2015-08-06 22:34:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cad9fd7d37a5ecb4e76206d63a70150dc6e5af16,cad9fd7d37a5ecb4e76206d63a70150dc6e5af16,Fixed incorrect progress reporting if attachment dl retries
snej,2015-08-06 22:11:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc78be1fa68df85c3f7317f110669aba582828ac,fc78be1fa68df85c3f7317f110669aba582828ac,API: Added -[CBLAttachment purge]
snej,2015-08-06 21:11:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e62afe4fbf48f2b14a78c14608c39cb9f4b07e3e,e62afe4fbf48f2b14a78c14608c39cb9f4b07e3e,"Skip P2P_BLIP_Tests unless ""TestNewReplicator"" user default is enabled

The other replicator tests already do this."
snej,2015-08-06 00:06:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1de87ba9f6a6d24596746c1c9c2f4bf468bd56de,1de87ba9f6a6d24596746c1c9c2f4bf468bd56de,WIP: Added ability to skip downloading attachments in a pull
snej,2015-08-05 17:13:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c421cbaa22bd30a69f1a392a8b4d358c2240812c,c421cbaa22bd30a69f1a392a8b4d358c2240812c,"WIP: Added API to download a single attachment

Only implemented for REST replicator so far."
snej,2015-08-05 17:06:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b2a96292c01e70ecd9a5b9a830d4a3d2110e0e6a,b2a96292c01e70ecd9a5b9a830d4a3d2110e0e6a,"Merge pull request #844 from couchbase/feature/issue_843_attachments_deleted_parent

Fix process attachments when the parent rev is a _deleted rev"
pasin,2015-08-05 01:08:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aefde4addfdad0f110d10fdc62f8840406883cfd,aefde4addfdad0f110d10fdc62f8840406883cfd,"Fix process attachments when the parent rev is a _deleted rev

When the intermediate parent rev is _deleted rev, the status returned when getting the parentAttachments will be kCBLStatusOK instead of kCBLStatusNotFound. So it should go to the same logic as when the stastus is kCBLStatusNotFound to get the attachment from the attachment revpos instead.

#843"
snej,2015-08-05 01:10:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ab19d82916b9448f73d37c7435847c9146c1425d,ab19d82916b9448f73d37c7435847c9146c1425d,Fixed iOS compile errors in CBLSymmetricKey.m
snej,2015-08-03 22:48:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff0c7c5275a4e8e1a2d6d4a7f08ab773ac6f6dbe,ff0c7c5275a4e8e1a2d6d4a7f08ab773ac6f6dbe,"Fixed several crashing bugs involving bogus or empty FTS query strings

Fixes #840"
snej,2015-08-03 20:59:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e7ea1aab3db6dca7cc52aa7b9be472176e8db76,3e7ea1aab3db6dca7cc52aa7b9be472176e8db76,"Added an auth-failure unit test and fixed some bugs

* Fixed cases where CBLRemoteRequest would try the same invalid credential
  multiple times.
* Prevent CBLRemoteRequest from trying a credential that has no
  associated password
* Added a timeout for replications in Replication_Tests.
* Added a unit test that tries to replicate with invalid credentials,
  both password-based an OAuth, and verifies that it immediately gets
  a 401 error with no delays or retries.

Fixes #841"
snej,2015-07-31 00:12:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de48ad16365dda42a13b7d9e5317d16ec57f74a3,de48ad16365dda42a13b7d9e5317d16ec57f74a3,"Added -[CBLManager encryptDatabaseNamed:] (Mac OS only)

This creates a random AES key and stores it in the Keychain, so the app
doesn't have to deal with creating or storing it. Not available on iOS
because all application files there are already encrypted using a secret
stored in the Keychain, so this would be redundant."
pasin,2015-08-01 01:29:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4e476908e23b1c44925d05e4eb312c864654333,f4e476908e23b1c44925d05e4eb312c864654333,"Merge pull request #839 from couchbase/feature/PR_754_CBLIS_save_doc_delegate

CBIS CBLIncrementalStoreDelegate.storeWillSaveDocument"
pasin,2015-08-01 01:26:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f63d5b54869483f895f3d87c49024fdb3fecd46c,f63d5b54869483f895f3d87c49024fdb3fecd46c,"CBLIS Refactor CBLIncrementalStoreDelegate

- Renamed keyValuesToAddToManagedObject: to storeWillSaveDocument: and use document properties as the parameter instead of the managedObject.

- Refactored to call storeWillSaveDocument when actually saving the document to the store.

- Added a unit test"
pasin,2015-07-31 18:24:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1aec9b9918971fda8cc9684a5d79d0b29a6c6dce,1aec9b9918971fda8cc9684a5d79d0b29a6c6dce,"Renamed more GCDAsyncSocket symbols

As reported in https://github.com/couchbase/couchbase-lite-ios/issues/758#issuecomment-126774199, renamed more GCDAsyncSocket symbols to CouchbaseLitePrefix.h."
pasin,2015-07-30 20:50:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28c7d98f8edfcfcbf64351b465edc5808c792359,28c7d98f8edfcfcbf64351b465edc5808c792359,"Fixed iOS unit test build error

Added vendor/CBForest/CBForest/Encryption/ to the Header Search Paths of the CBL iOS Unit Tests target."
snej,2015-07-29 21:06:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c9391a7af11caf3975bdf80453fed136da1a71f,3c9391a7af11caf3975bdf80453fed136da1a71f,"Improved some assertions

AssertEq(a, b) is better than Assert(a == b) because when it fails it
logs what the values of a and b are."
snej,2015-07-29 20:56:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5433a5aac73ebb9ff42bcb6b0dc8b0871fa7cb19,5433a5aac73ebb9ff42bcb6b0dc8b0871fa7cb19,Oops: Fixed an obsolete filename in an #import in a CBForest unit test.
snej,2015-07-29 20:54:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7dfa3ee1aefbf9daa76726875e12d2f3566364a0,7dfa3ee1aefbf9daa76726875e12d2f3566364a0,"Merge pull request #819 from couchbase/feature/issue_807_pendingDocumentIds

Fix CBLReplication.pendingDocumentIds when replication is not running"
pasin,2015-07-29 20:33:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/37a8d73124fdecfaadfb6ab22af696fdc18d465e,37a8d73124fdecfaadfb6ab22af696fdc18d465e,"Removed pendingDocIDs property from CBL_Replicator

As not being used anymore, removed pendingDocIDs property from the CBL_Replicator.

#807"
snej,2015-07-29 20:22:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f08e8c5f830b7ac58e4eec50d0d30c7499166693,f08e8c5f830b7ac58e4eec50d0d30c7499166693,"Minor DRY cleanup of CBL_Attachment initializer

With commit 4f6e505, the ""revpos"" field was being read with identical
code in two places. Combined those into one. Also updated a few comments."
snej,2015-07-29 19:18:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f6e50504aecf1647c3f67768d54a2eb21423df5,4f6e50504aecf1647c3f67768d54a2eb21423df5,"Merge pull request #830 from couchbase/feature/issue_817_follows_revpos

Fix attachment revpos not being set when follows=true"
snej,2015-07-29 04:44:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9d8d863c43853f4e0e132237139688d83cd1a13,c9d8d863c43853f4e0e132237139688d83cd1a13,"Implemented ForestDB database encryption

Fixes #826"
pasin,2015-07-29 05:04:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef0dbd53e56c0dc8e7bf354abd1f07f215c0c864,ef0dbd53e56c0dc8e7bf354abd1f07f215c0c864,"Fix attachment revpos not being set when follows=true

During the pull replication, the revpos of an attachment could be set to a parent revision while the follows=true. If the revpos value doesn't get preserved, the revpos will be set to the current generation.

Later, when pushing an updated document again, the attachment info will contain a wrong revpos and result to the missing_stub error on CouchDB. SyncGateway currently ignores the issue and doesn't overwrite the revpos value on the server side.

#817"
pasin,2015-07-28 00:35:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6fbd7a36c47f2cd753ff432801b30bb960836c09,6fbd7a36c47f2cd753ff432801b30bb960836c09,"Fix lastSequence synthesizing and log message typos

#807"
pasin,2015-07-21 23:31:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bc9a8393813ee423d9ef521378c150e4bba3e87,2bc9a8393813ee423d9ef521378c150e4bba3e87,"Fix CBLReplication.pendingDocumentIds when replication is not running

-  Query unpushed revision from the last sequence getting from the background replicator when the replicator is running otherwise from the current last sequence saved in the database.

- Exposed lastSequence property on CBL_Replicator.

- Refactored CBLManager by adding replicatorSettingsWithProperties:toDatabase:status for getting replication settings from properties.

- Added lastSequenceForReplicator: and unpushedRevisionsSince: to CBLDatabase+Replication to facilitate work.

- In CBLBlipReplicator, for non-continuous, report kCBLReplicatorStopped after connection is closed (allowing checkpoint to be sycned between remote and local).

#807"
snej,2015-07-27 19:43:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/97ec102de403e6d4efba458054566af4846b7b2b,97ec102de403e6d4efba458054566af4846b7b2b,"Major ForestDB geo-query improvements

* Can now index rectangles and query for rectangle intersection.
* GeoJSON data is preserved and can be accessed from the QueryRow.
* Emitted values are preserved
Fixes #485"
snej,2015-07-27 23:16:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66e111c0908aaa8b46e734975dcbae81749312ee,66e111c0908aaa8b46e734975dcbae81749312ee,"Merge pull request #822 from couchbase/feature/issue_806_map_conflicts

Add _conflicts to the document in the map function"
pasin,2015-07-24 21:27:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/acdccaf54824144bead23456f9e3a1cc57751a07,acdccaf54824144bead23456f9e3a1cc57751a07,"Check if VersionedDoc has conflicts before getting _conflicts in ForestDBViewStorage

#806"
pasin,2015-07-23 22:44:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/092376ab5084beb1378f9e95ef5f06f073ec4ed3,092376ab5084beb1378f9e95ef5f06f073ec4ed3,"Add _conflicts to the document in the map function

- When updating view index, gather a list of the conflict revisions if any.

- Add index conflict docs performance test to View_Benchmarks."
pasin,2015-07-23 20:55:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bae82585a3a68e7a7186a083a2e0fa6834f0c636,bae82585a3a68e7a7186a083a2e0fa6834f0c636,"Fix query design docs with stale=ok (recent regression)

- The regression introduced by a574c15b2184cd1f51cf1c51e58c4fd42fdd3f06 commit as exposing totalRows to public.

- Fixed by adding internal currentTotalRows property which doesn't update the index and making totalRows calling currentTotalRows after updating the index.

- Fixed ViewInternal_Tests.test26_TotalDocs accordingly.

#808"
snej,2015-07-22 23:30:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d9ca410702e9e17ce7e040c061a002c399ffbb09,d9ca410702e9e17ce7e040c061a002c399ffbb09,"Don't fail an assertion if CBLQueryRow.value is called after db deleted

The row's storage will be nil (it's a weak ref), but just return nil
instead of crashing.
Fixes #805"
snej,2015-07-22 23:18:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f45e49fc0e677dbb0545b39c20a4b6b1876806f,8f45e49fc0e677dbb0545b39c20a4b6b1876806f,"Merge pull request #820 from couchbase/feature/issue_808_total_rows

Make CBLView.totalRows public"
snej,2015-07-22 23:16:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8714c04c4ebea32d9145af12a470a6a138ac5cbf,8714c04c4ebea32d9145af12a470a6a138ac5cbf,"ForestDB FTS now supports fullTextSnippets

Fixes #618 (together with commit 9e80497)"
snej,2015-07-22 23:13:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c088183323c512fcd541a1268da642e7f2dcb51b,c088183323c512fcd541a1268da642e7f2dcb51b,Fixed a leak in CBLAuthorizer.m (recent regression)
pasin,2015-07-22 23:01:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a574c15b2184cd1f51cf1c51e58c4fd42fdd3f06,a574c15b2184cd1f51cf1c51e58c4fd42fdd3f06,"Make CBLView.totalRows public

- Moved totalRows property from CBLView+Internal.h to CBLView.h

- When accessing the totalRows, update the index first.

#808"
snej,2015-07-22 20:15:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/39c31debfb912562b2b5e77a40886bc637a369ab,39c31debfb912562b2b5e77a40886bc637a369ab,Fixed a WebSocket race condition that broke the P2P_Blip_Tests
snej,2015-07-22 18:28:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10e2c70e740dd05e3fe75b7f3e74f84e7ad1d096,10e2c70e740dd05e3fe75b7f3e74f84e7ad1d096,"Fixed acceptance of self-signed certs in .local, in Mac build

Turns out the hostname-mismatch error is reported differently on Mac
than on iOS, so I had to add some code to detect it."
snej,2015-07-22 18:04:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e804978823994f905dfea59fa0abca99d2008f7,9e804978823994f905dfea59fa0abca99d2008f7,"ForestDB FTS improvements (ranking, multiple matches per doc, stemmers)

* CBLQuery.fullTextRanking is now supported
* A CBLQueryRow can now include multiple matches for a search term
* Appropriate stemmer will be used for the current locale's language"
snej,2015-07-22 17:32:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7c1b5b9524687d909b38b836478e6ca1e7b64e8,b7c1b5b9524687d909b38b836478e6ca1e7b64e8,"SQLite-based FTS now uses a stemmer

Stemmer is chosen based on current locale's language."
snej,2015-07-22 18:33:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85849480373a9c5741e613ce995e6bf7ee4923de,85849480373a9c5741e613ce995e6bf7ee4923de,"Merge pull request #818 from couchbase/feature/fix_p2p_blip_tests

Fix P2P Blip Tests connectionCount race condition"
pasin,2015-07-21 23:38:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/51cbec9917eee9da0733ec1d64fe57d6d9970800,51cbec9917eee9da0733ec1d64fe57d6d9970800,"Fix P2P Blip Tests connectionCount race condition

- The connectionCount value is updated asynchronously on a background thread so it's possible after the replicator finishes running, the connectionCount value is set to 0 before the expectation is created.

- The keyValueObservingExpectationForObject:'s expectation will be fullfilled only when the observed value is changed.

- Moved connectionCount check to its parent runReplication:expectedChangesCount: method and created the expectation before running the replication."
snej,2015-07-20 22:53:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a708071bd6854d2aacc011fecabe59063c07492,4a708071bd6854d2aacc011fecabe59063c07492,"Update handling of pinned certs to work with App Transport Security

If the replicator accepts the server cert because it matches the pinned
cert data/digest, it also needs to do the same trick of updating the
SecTrust's result, otherwise App Transport Security will reject the
connection."
snej,2015-07-20 17:26:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0eb1cb54d59095f2adc3f3c8b9a7c37991d7272,f0eb1cb54d59095f2adc3f3c8b9a7c37991d7272,"Compatibility with iOS 9 App Transport Security

* When validating server trust in the NSURLConnection callback, update
  the SecTrustRef to have a result of 'proceed', otherwise ATS will
  reject the connection even though I accepted the cert.
* Configured iOS test app to accept non-forward-secrecy ciphers from
  the 'local' domain, so it can interoperate with iOS 8 or OS X 10.10
  whose SecureTransport implementations don't include the forward-secret
  ciphers.
* Updated MYAnonymousIdentity in MYUtilities to use SHA-256 when signing
  the cert. Added a unit test for it.
Fixes #816"
snej,2015-07-16 18:22:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/61ade2c0e7f2ed66c3bff3ca65239fee73ccfa5d,61ade2c0e7f2ed66c3bff3ca65239fee73ccfa5d,"Added more 'nullable' annotations to public headers

This improves the Swift bindings -- in particular, some methods with
NSError** parameters didn't map to 'throws' until I made their return
types nullable.
Doesn't affect any Objective-C clients."
snej,2015-07-16 00:05:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fe5355ff2a492f6d6f6b075a000da131c9bc7484,fe5355ff2a492f6d6f6b075a000da131c9bc7484,"Merge pull request #812 from couchbase/feature/issue_809_storageType

Move CBLManager.storageType property to public"
pasin,2015-07-15 21:04:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fb94ea8fa4beff6d3bde01ca59ea959ff6580b5f,fb94ea8fa4beff6d3bde01ca59ea959ff6580b5f,"Move CBLManager.storageType property to public

#809"
pasin,2015-07-15 20:27:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/52bbdf7745524bf7610057b2a372c8624657adba,52bbdf7745524bf7610057b2a372c8624657adba,"Merge pull request #811 from couchbase/feature/issue_793_cblis_perf

CBLIS Improve execute save request performance"
pasin,2015-07-15 20:26:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/653ebafadc11bd3a8a2a71a4654098c692a14bf7,653ebafadc11bd3a8a2a71a4654098c692a14bf7,"CBLIS Improve execute save request performance

- Use transaction in executeSaveRequest: method.
- Remove coalesced changes logic as we do not need this any more after using transaction in executeSaveRequest.
- Cache relationship query result.
- [Bug fix] When inform an ManagedObjectContext object with changes, making sure that it informed on the context object's thread.

#793"
snej,2015-07-15 18:12:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bab7a6468dd15b977773af7ad680f48df32d1f23,bab7a6468dd15b977773af7ad680f48df32d1f23,Added symbols to CouchbaseLite.exp to fix LiteServ build
pasin,2015-07-15 17:38:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36d93828d018cb35add46f29f26778383ed33a25,36d93828d018cb35add46f29f26778383ed33a25,"Merge pull request #810 from couchbase/feature/pr_795_cblis_objectid

CBLIS evaluates relationship with nsmanagedobjectid"
pasin,2015-07-15 17:36:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28b9215dc62315eeb849349548e837dfab5beb02,28b9215dc62315eeb849349548e837dfab5beb02,"CBLIS uses scanContantValue: to extract a constant value

CBLIS uses scanContantValue: to extract a constant value when evaluate expression."
mastohhh,2015-06-30 09:25:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48746ef2fe53cc12f89bc04d2d8980eb0077f919,48746ef2fe53cc12f89bc04d2d8980eb0077f919,CBLIS evaluate relationship with nsmanagedobjectid
snej,2015-07-14 20:59:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b58d6e824d508ff8c65e506655010dab23c3cd46,b58d6e824d508ff8c65e506655010dab23c3cd46,Fixed Mac symbol exports
snej,2015-07-14 04:58:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/34fc4a78ddfafa18b0ecbff3b9a30f39d4c7f59f,34fc4a78ddfafa18b0ecbff3b9a30f39d4c7f59f,"CBLWebSocketChangeTracker needs to support auth challenges/redirects

This got broken with the new replicator, when I changed this class to
use PSWebSocket. Unfortunately PSWebSocket doesn't directly support
auth challenges or redirects.
Fixed by taking the HTTPLogic of CBLSocketChangeTracker and moving it up
to the superclass so WebSocketChangeTracker inherits it too."
snej,2015-07-14 04:52:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e9b06dd590976d0d02481a6c06f1537e74b348d,4e9b06dd590976d0d02481a6c06f1537e74b348d,"Authentication rework, for better HTTP Digest auth support"
snej,2015-07-01 16:30:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad8bea4357eca523f912c757bc85d942f475f073,ad8bea4357eca523f912c757bc85d942f475f073,"WIP: Refactoring CBLAuthorizer to add better support for digest auth

BLIPHTTPLogic not working correctly with digest due to problems with
CFHTTPMessageAddAuthorization."
snej,2015-07-14 04:56:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8fb03dbea7533b11cfa18df7456153c67a4644b,a8fb03dbea7533b11cfa18df7456153c67a4644b,"Fixed sending mismatched MIME multipart boundary strings on HTTP retry

If a CBLMultipartWriter created by CBLRestPusher needed to retry the
request (on auth challenge or redirect), it would get a new body stream,
but the new stream would have a different random multipart boundary
string. Unfortunately the old boundary was still encoded in the
Content-Type header. The resulting HTTP body would be unparseable :(

Fixed by making sure to create the new body with the same boundary."
snej,2015-07-14 04:53:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/55701a7691b9300c873e446402588e1a07832c9f,55701a7691b9300c873e446402588e1a07832c9f,Fixed unintentional 100ms delay sending multipart HTTP bodies
snej,2015-07-13 17:19:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/730401e6da5d8b4f2f4b7af81fd10e82a35f206e,730401e6da5d8b4f2f4b7af81fd10e82a35f206e,Extended P2P tests to use HTTP listener/replicator as well as BLIP.
snej,2015-07-10 21:24:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/88176a8ebec8788cf545f0ea46cbe787c4b110bb,88176a8ebec8788cf545f0ea46cbe787c4b110bb,API: Added +[CBLAuthenticator SSLClientCertAuthenticatorWithAnonymousIdentity:]
snej,2015-07-10 01:26:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9110c8d45d4086778213354a9fc5e14344007305,9110c8d45d4086778213354a9fc5e14344007305,"Deprecated -[CBLQueryEnumerator reset]

Fixes #775"
snej,2015-07-09 23:16:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1533fd486065334c8e85c5b936a3ec8b9e55b8a4,1533fd486065334c8e85c5b936a3ec8b9e55b8a4,"Fixed iOS unit tests

* Added header search path for BLIP headers
* Fixed some 32-bit compile errors
* Suppressed a bogus warning in CBLHTTPConnection"
snej,2015-07-09 22:32:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e84987867b01352c0394cc5cab8c48fe96c2cfd6,e84987867b01352c0394cc5cab8c48fe96c2cfd6,Added some more checks to the ListenerHTTP_Tests
snej,2015-07-09 21:38:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efec4a43e4692086d46f21404aaba84555df9373,efec4a43e4692086d46f21404aaba84555df9373,Got CBLBlipListener SSL tests working. Added same tests for CBLHTTPListener.
snej,2015-07-08 22:27:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f79f2344a6510063fcea0263e0a26babbf5f2288,f79f2344a6510063fcea0263e0a26babbf5f2288,Enabled client-cert auth for CBLSyncListener. Added listener unit test.
snej,2015-07-08 01:33:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f6eea0fb5fed80bbb16b4d4ad849e4ce55b1f16,4f6eea0fb5fed80bbb16b4d4ad849e4ce55b1f16,Refactored CBLListener to be abstract superclass of HTTP and BLIP listeners
snej,2015-07-07 18:15:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09ab46357c96a4da24efd29bff6b72b3a765c4ad,09ab46357c96a4da24efd29bff6b72b3a765c4ad,Ignore Xcode 7 '.xcscmblueprint' file
snej,2015-07-07 18:12:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1790094f70db679b9c960865ed95c24526e1349,d1790094f70db679b9c960865ed95c24526e1349,"CBLSyncListener: Bonjour support, and enabled in LiteServ

Use flag '--nuport ##' to start a CBLSyncListener on port ## in LiteServ"
snej,2015-07-07 00:09:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78e23ef38f70e791b0b75aefefc802c2b2896c53,78e23ef38f70e791b0b75aefefc802c2b2896c53,Fixed a race condition in test10_ReplicationCookie
snej,2015-07-06 23:31:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f11c55d6258f5fc9cd3d89cf051b81a2c68016a5,f11c55d6258f5fc9cd3d89cf051b81a2c68016a5,Changed 'var' to 'let' in Swift unit test to resolve Xcode 7 warnings
snej,2015-07-06 23:06:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd76abbab7324a1903738f46cc6cbc645e08a9ad,fd76abbab7324a1903738f46cc6cbc645e08a9ad,"Added P2P attachment replication tests and fixed a new-replicator bug

The bug is that a pull replication shouldn't set its state to Stopped
until it's finished inserting all the queued documents, *even if the
connection closes*. I think this mostly affects passive replications."
snej,2015-07-06 21:35:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b432019b2bdfb26edba62ee1b1f3e8ed88edbc94,b432019b2bdfb26edba62ee1b1f3e8ed88edbc94,Got CBLSyncListner working. Added a P2P-replication unit test suite.
snej,2015-07-03 20:32:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0201f764c229a3631f1637f0b1657bfee38d6a6e,0201f764c229a3631f1637f0b1657bfee38d6a6e,"REST API: Allow ""stale=false"" in view queries for CBS compatibility

Fixes #803"
snej,2015-07-03 17:36:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8d0cc14d8b9c4c35b46d8b1190acb79e2674587,b8d0cc14d8b9c4c35b46d8b1190acb79e2674587,Oops: Fix build break (unpushed revisions in WebSockets-Cocoa)
snej,2015-07-02 21:44:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a20e014d9c4b4feabc65a66430793a1661c21c2f,a20e014d9c4b4feabc65a66430793a1661c21c2f,"Fixed error pulling doc with unchanged attachments from CouchDB

Nasty edge case where the attachment is unchanged, but the parent rev
isn't available (doc was changed multiple times remotely), _and_ the
attachment metadata doesn't contain a usable digest (CouchDB's digests
are MD5 not SHA-1.)
Fixes #802"
snej,2015-07-02 18:05:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ded11200dac1a6d4c86e372a7d5f7002fc310f1a,ded11200dac1a6d4c86e372a7d5f7002fc310f1a,"Merge branch 'feature/issue_671_removed_rev'

Fixes #671"
snej,2015-07-02 18:04:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb8187468c41d4f1c435cf08184882a27a1e7507,eb8187468c41d4f1c435cf08184882a27a1e7507,"Merge branch 'master' into feature/issue_671_removed_rev

# Conflicts:
#	Source/CBLRestPusher.m"
snej,2015-07-02 18:01:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dabfdafae96df3c8ff0084b574430ade55bca4f9,dabfdafae96df3c8ff0084b574430ade55bca4f9,Just deleted some commented-out code in GCDAsyncSocket.
snej,2015-07-02 00:25:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5037517b2596cc7ed9b0f50d5865311ee4be607f,5037517b2596cc7ed9b0f50d5865311ee4be607f,Oops: Back out unintentionally-added commit in BLIP repo
snej,2015-07-02 00:19:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/20efba81240f54d6f26787c1f42314085b5c2874,20efba81240f54d6f26787c1f42314085b5c2874,Updated BLIP to get digest-auth fix (merged from a branch)
snej,2015-07-01 22:33:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8673a955682dc9142ed08cdb0e304b0ae98bc28,f8673a955682dc9142ed08cdb0e304b0ae98bc28,"Fixed intermittent error warnings from CBLWebSocketChangeTracker

There were some flow control problems -- SSL auth failure triggered
_two_ error calls, one deferred, which confused the tracker and caused
it to attempt a retry..."
snej,2015-07-01 18:34:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/725fdcaddc212d7cdb87006cc0d63fa6adf53afa,725fdcaddc212d7cdb87006cc0d63fa6adf53afa,Fixed BLIP iOS deployment target (was 8.3; changed to 7.0)
snej,2015-07-01 18:17:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/015b12050a8be0bd4830c0fa3b5ed704813b4673,015b12050a8be0bd4830c0fa3b5ed704813b4673,Just added a TODO comment to the client-cert unit test.
snej,2015-06-29 18:00:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/22b8c66a08716c9b772e1d7db0b3b4994a603192,22b8c66a08716c9b772e1d7db0b3b4994a603192,"Allow validator block to detect external changes

The CBLValidationContext now has a 'source' property that will be nil
for a change made by the app, or the remote db URL for a change made by
the puller, or a URL of the form 'user:username' for a change made by
an authenticated user of the REST API.
Fixes #729"
snej,2015-06-29 17:55:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd1be92cf8072d4d4db879411bdf8a3b4b027043,bd1be92cf8072d4d4db879411bdf8a3b4b027043,"Added CBLListener delegate that can handle authentication.

Also made client certs optional; the delegate gets to decide whether
a missing client cert is an error or not."
snej,2015-06-25 22:56:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85d2c1cbb1bf4c542d2e2f9d4ee26739f99778b5,85d2c1cbb1bf4c542d2e2f9d4ee26739f99778b5,"Re-enabled flow control for CBLWebSocketChangeTracker

First I had to implement the readPaused property in PSWebSocket."
snej,2015-06-25 21:29:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d712d92284d9d249e043eb36777502f7233030c,2d712d92284d9d249e043eb36777502f7233030c,"Use PSWebSocket instead of CocoaWebSocket for CBLWebSocketChangeTracker

This makes CBL binary smaller because it no longer needs GCDAsyncSocket,
not to mention two different WebSocket implementations."
snej,2015-06-25 19:48:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb8aa87c65890c1f283a105baffaa42208111d75,eb8aa87c65890c1f283a105baffaa42208111d75,"Fixed puller auth test

It would fail when run as part of all unit tests, because an earlier
test left a credential installed that would automatically authenticate."
snej,2015-06-25 19:45:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf6df04c69fb6a511509440aa9a86e84171a8078,bf6df04c69fb6a511509440aa9a86e84171a8078,"SSL client cert support for listener & change tracker, via GCDAsyncSocket"
snej,2015-06-24 18:06:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/988c4d454a21b8f7485666b14006055f44bd1a5a,988c4d454a21b8f7485666b14006055f44bd1a5a,Implemented SSL client cert support in both replicators
snej,2015-07-01 23:07:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/03055ecaa68f5c9e37cd5568c0260287152a9b01,03055ecaa68f5c9e37cd5568c0260287152a9b01,"Improved the timing accuracy in test10_LiveQuery_UpdateInterval

The sleep() call in the test was delaying the LiveQuery's timer firing,
and causing it to not update often enough."
snej,2015-07-01 22:31:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fe83f1e0ca8d40ba3ff1c1c2533bd156f9d1c654,fe83f1e0ca8d40ba3ff1c1c2533bd156f9d1c654,"Added Info.plist flag allowing iOS test app to make non-SSL connections

By default iOS 9 doesn't allow apps to make non-SSL HTTP connections.
Added a flag to override this because it of course breaks our tests."
snej,2015-07-01 22:30:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fbebd646b6a4ed0a8a7452d20fc8c1a87b92684f,fbebd646b6a4ed0a8a7452d20fc8c1a87b92684f,Fixed intermittent '409 conflict' warnings in continuous replication tests
snej,2015-07-01 18:52:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/331a15756c0d6eaec3050e367b4ed7aceed9162e,331a15756c0d6eaec3050e367b4ed7aceed9162e,"iOS test app: Wire up the window's rootViewController outlet

Not having this set up triggers an assertion failure in iOS 9"
snej,2015-07-01 17:43:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7b17c2080d36a7f5b2ba24f84c770e308412c12,c7b17c2080d36a7f5b2ba24f84c770e308412c12,"Turn off warnings-raise-exceptions when exiting a CBL test case

Fixes ordering dependency when ForestDB unit tests are run after the
CBL tests."
snej,2015-06-30 19:03:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40dbc164f5a61527fd53498dccdfc8445d54d928,40dbc164f5a61527fd53498dccdfc8445d54d928,"Merge pull request #796 from popina/ios7

CBLIS: use a ios7 compatible method (fixes iOS 8 dependency)"
mastohhh,2015-06-30 16:13:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36155640542911e7683499c14446e46b1a9e528d,36155640542911e7683499c14446e46b1a9e528d,"CBLIS use a ios7 compatible method

use rangeOfString instead of containsString ios8 only method"
snej,2015-06-30 00:11:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e427bbc42e8f019e1517416d00ef29f808eaafc,5e427bbc42e8f019e1517416d00ef29f808eaafc,Fixed BLIP-Cocoa repository URL in .gitmodules
snej,2015-06-30 00:04:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7412003933473146edfe83c352e951170d9bc1a4,7412003933473146edfe83c352e951170d9bc1a4,"Re-enabled geo-query unit test

This got disabled during my ForestDB work (because I haven't gotten a
full implementation of geo-queries for ForestDB), and it wasn't re-
enabled when I went to pluggable storage engines. So it hasn't been
testing the SQLite-based geo implementation.
I've turned it back on and adapted it for the latest test API, and it
passes for SQLite."
snej,2015-06-29 23:07:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/67fcc64c1553a53ee0426867ef8f549a0deb0f9e,67fcc64c1553a53ee0426867ef8f549a0deb0f9e,"Clean up CBLBlobStore temporary directories

Fixes #788"
snej,2015-06-29 22:41:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aeb428e1b48f0bd7ec150c7096b43837173f4968,aeb428e1b48f0bd7ec150c7096b43837173f4968,"Forbid warnings in unit tests by making them throw exceptions

Unit tests now enable the gMYWarnRaisesException flag, which causes the
Warn() function to raise an exception.
If a test needs to trigger a warning (like deliberately causing an
error) it can use the -allowWarningsIn: method that disables this
behavior while running the given block."
snej,2015-06-29 21:14:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/711ffe0966e4a075bc417a3f25b3276aec9817ab,711ffe0966e4a075bc417a3f25b3276aec9817ab,"Fix error pulling attachments from CouchDB

Recent versions of CouchDB (like 1.6) send a Content-Encoding header
in the MIME part of a compressed/encoded attachment; Couchbase Lite
didn't like that.
Fixes #786"
snej,2015-06-29 19:39:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4274268e64f808bfb95ca087ef899b008b2569d5,4274268e64f808bfb95ca087ef899b008b2569d5,"Don't run new replicator tests unless user default TestNewReplicator is set

i.e. to test the new replicator, add command-line args
    -TestNewReplicator YES"
snej,2015-06-29 18:10:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6cf6cc97f8135f28a38a50ea4d3730470d5a0552,6cf6cc97f8135f28a38a50ea4d3730470d5a0552,"Merge pull request #783 from couchbase/feature/new_replicator

New replicator (disabled by default)

Fixes #702"
snej,2015-06-29 18:08:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/af679b888f4ef3242b4acf6b78130971f17cad26,af679b888f4ef3242b4acf6b78130971f17cad26,"Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into feature/new_replicator

# Conflicts:
#	CouchbaseLite.xcodeproj/project.pbxproj"
pasin,2015-06-26 03:51:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e205482e28936429f5c70f51d2fd61646d0d01fb,e205482e28936429f5c70f51d2fd61646d0d01fb,"Disable CBLIS non inverse relationship unit tests by default

#791"
pasin,2015-06-24 01:56:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3cfded3a77e94de75c518adc484cb666ba41ddfd,3cfded3a77e94de75c518adc484cb666ba41ddfd,"Fix _removed comparison and unit test per code review

- When checking _removed, wrapped with $castIf before convert it to a boolean value.

- Simplified unit test by just creating a new revision with only _removed property.

- Removed cbl_replicator_removed_rev from cbl_unit_tests.json

#671"
pasin,2015-06-18 03:29:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/afbaf04f23a05cc8c50cf2bfddba1756e0088081,afbaf04f23a05cc8c50cf2bfddba1756e0088081,"Filter out _removed revision from push replication

- Filter out _removed revision in CBL_Pusher's processInbox when preparing revisions to send to the remote server.

- No changes in CBL_Pusher.unpushedRevisions properties. Therefore unpushedRevisions could contained _removed revisions. The same for getting _changes feed from the CBLRouter.

- Added a unit test

- Added cbl_replicator_removed_rev remote database config to Unit-Tests/Server/cbl_unit_tests.json

#671"
pasin,2015-06-25 09:31:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c851ef809c464d924d2df2523a88ec8321b933e,9c851ef809c464d924d2df2523a88ec8321b933e,"Add LiveQuery with background update unit test

- Added View_Tests.test16_LiveQuery_BackgroundUpdate to verify #779.
- Reordered some unit tests so all live query tests stay together."
pasin,2015-06-25 03:02:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bdecd2000a8fb782edc690c3c06ed6f8fcbf5829,bdecd2000a8fb782edc690c3c06ed6f8fcbf5829,"Merge pull request #789 from couchbase/feature/issue_782_cblis_nullify

Fix CBLIS cannot nullify attributes and relationships (#782)"
pasin,2015-06-25 03:00:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/218d6d24bea5b69970c21467040923ff04aeee49,218d6d24bea5b69970c21467040923ff04aeee49,"Fix CBLIS cannot nullify attributes and relationship

Instead of using setValuesForKeysWithDictionary:, just set userProperties.

#782"
mastohhh,2015-06-17 00:50:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00fa835aa2ea2fd6b6cfea0e545477f42113e7c6,00fa835aa2ea2fd6b6cfea0e545477f42113e7c6,unit test to nullify attributes and relationships
pasin,2015-06-25 01:52:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea85703ae5083a633482cc2e52e5f326ff040462,ea85703ae5083a633482cc2e52e5f326ff040462,"Merge pull request #787 from couchbase/fix/717_noop_insert

Fixed: insert of already-existing rev was posting a change notification (#717)"
snej,2015-06-24 18:48:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e93b9de0398eb0c7896bc1326145dc74fac5a3b,8e93b9de0398eb0c7896bc1326145dc74fac5a3b,Updated ForestDB to fix #781
snej,2015-06-24 18:18:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fbf9e1182c74e512633002b6d27fa72fe930a37,2fbf9e1182c74e512633002b6d27fa72fe930a37,"Fixed: insert of already-existing rev was posting a change notification

* -[CBL_SQLiteStorage forceInsert:...] was posting a change notification
  even if the revision already existed in the db.
* The CBL_Revision in the CBLDocumentChange would have no sequence since
  it hadn't been added to the db.
* This would cause an assertion failure when CBLRouter's changes feed
  processed the notification.
* Fixed this and added unit-test coverage of this situation.
Fixes #717"
pasin,2015-06-24 02:34:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce482f549bea7c424b88ca27d5c1cb9a22351f6f,ce482f549bea7c424b88ca27d5c1cb9a22351f6f,"Merge pull request #785 from couchbase/fix/784_no_digest

Disable HTTP Digest auth for listener, over SSL connections"
snej,2015-06-23 18:15:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/027fea9d10e3f49288cd993fa939a6045dd66d1a,027fea9d10e3f49288cd993fa939a6045dd66d1a,"Disable HTTP Digest auth for listener, over SSL connections

...for better compatibility with .NET clients.
Fixes #784"
snej,2015-06-22 20:56:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/858247b4db2be63182e21e82f4aa3381770a0e57,858247b4db2be63182e21e82f4aa3381770a0e57,Removed some unused/obsolete source files
snej,2015-06-22 20:43:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b90deb3eb92ecb818387b48bb64f45e5aa153977,b90deb3eb92ecb818387b48bb64f45e5aa153977,"Fixed an intermittent replicator bug with ForestDB

ForestDB implementation of -findMissingRevisions:status: was reordering
the revision list. The replicator doesn't want this, because the revs
are ordered by sequence, so if the revs get reordered the replicator
won't know the max sequence it's gotten to."
snej,2015-06-22 18:09:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a63c06b348bda548a3371895ba5960288122b87f,a63c06b348bda548a3371895ba5960288122b87f,"Merge branch 'master' into feature/new_replicator

# Conflicts:
#	CouchbaseLite.xcodeproj/project.pbxproj
#	Source/CBLDatabase+Insertion.m
#	Source/CBLInternal.h
#	Source/CBLRestPuller.m
#	Source/CBLRestPusher.m"
snej,2015-06-19 23:10:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/306a7aa327cd941fd2cba42a70a87fab0360fc6f,306a7aa327cd941fd2cba42a70a87fab0360fc6f,Oops: Fixed compile error in SwiftModel_Test.swift
snej,2015-06-19 22:54:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/280f22c733f56ddb03c244b7ace57617bc2b4d7c,280f22c733f56ddb03c244b7ace57617bc2b4d7c,"Fixed CBLModel not working with namespaced Swift classes

It's an Apple bug in the Obj-C runtime, but I added a workaround in
MYDynamicObject.
Fixes #703"
snej,2015-06-19 20:46:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f6a51cf340ad567ad9b94d022820425b576dbf05,f6a51cf340ad567ad9b94d022820425b576dbf05,"Some error-handling cleanup

* Removed the url parameter from CBLStatusToNSError since it's almost
  never used.
* Renamed ReturnNSErrorFromCBLStatus to CBLStatusToOutNSError,
  and made it set *outError to nil if there's no error.
* Changed a bunch of calls like
    if (outError) *outError = CBLStatusToNSError(...)
  to
    CBLStatusToOutNSError(..., outError)

For #235"
snej,2015-06-19 19:59:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f0e0b16a618273165c6c4a4f449f96b182307f4,4f0e0b16a618273165c6c4a4f449f96b182307f4,A few new unit tests had to be updated to add 'error:' parameters
pasin,2015-04-02 22:12:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e3bde255fab742265c3338293fd22ab8a7e2733,8e3bde255fab742265c3338293fd22ab8a7e2733,"Propagate validation rejection message

- Propagate rejection message inside an NSError object. This requires to refactor several method to include out NSError object parameters.

- For Router, the result will be sent as part of the response body, for example:
{""status"": 403, ""error"": ""forbidden"", ""reason"": ""The document cannot be updated!""}

#235"
snej,2015-06-19 18:52:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efd6f235ee2c92abf09eb8dfb8cfe3f5144ce625,efd6f235ee2c92abf09eb8dfb8cfe3f5144ce625,"Merge pull request #767 from tmpduarte/fixDateParsing

Fix issue 765: dateWithJSONObject: method cannot parse ISO 8601 dates with a time zone designator ""+hhmm"" or ""-hhmm"" #766"
snej,2015-06-19 18:34:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/526a2a9f61ba18db8f0bab78ba44484bf2f74b7b,526a2a9f61ba18db8f0bab78ba44484bf2f74b7b,"Merge pull request #778 from couchbase/feature/issue_683_allDocs_prefixMatchLevel

Add prefixMatchLevel logic to allDocuments query"
snej,2015-06-19 17:47:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/750cd4b7a82fe4054821ed06d7a026507e8e96ef,750cd4b7a82fe4054821ed06d7a026507e8e96ef,"Fixed SSL errors in Listener, on iOS

Added a workaround for an iOS Keychain bug that can cause the wrong key
to be read for a SecIdentityRef (rdar://18205627).
Fixes #772"
pasin,2015-06-19 03:19:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db82e044ec8f9f5dd3192846aae494fbc384da69,db82e044ec8f9f5dd3192846aae494fbc384da69,"Add prefixMatchLevel logic to allDocuments query

- Extracted keyForPrefixMatch(key, depth) from CBL_SQLiteViewStorage and CBL_ForestDBViewStorage to CBLMisc as CBLKeyForPrefixMatch(key, depth) so same implementation can be reused.

- Added prefixMatchLevel logic to the -getAllDocs:status: method of CBL_SQLiteStorage and CBL_ForestDBStorage.

- Added Database_Tests.test12_AllDocumentsPrefixMatchLevel.

#683"
snej,2015-06-18 18:23:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a46d407c502b35794ea7d95f91f36acaf6ed095,8a46d407c502b35794ea7d95f91f36acaf6ed095,"Fixed a confusing assertion message in -[CBLQueryEnumerator reset]

For #775"
pasin,2015-06-18 07:05:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1db57578cc2a42bb3d5dd33aba12ccd9272e0f53,1db57578cc2a42bb3d5dd33aba12ccd9272e0f53,"Added error code to SQLite mmap log message

#761"
snej,2015-06-18 00:01:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7bf33064cbcc8b44cdd938e60c413b8b08087bb,d7bf33064cbcc8b44cdd938e60c413b8b08087bb,Fixed LiteServ build and iOS framework
snej,2015-06-17 23:34:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8bdd95987917e3815ad73f4b76428392fe8f7d5f,8bdd95987917e3815ad73f4b76428392fe8f7d5f,"Merge pull request #771 from couchbase/feature/issue_652_CBLJSViewCompiler

Move CBLJSViewCompiler into CouchbaseLite framwork"
snej,2015-06-17 20:29:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6ccebb14c3cc771b3c4cf4518a9b138d6af84efa,6ccebb14c3cc771b3c4cf4518a9b138d6af84efa,All unit tests now pass with the new replicator!
snej,2015-06-16 16:29:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1d54619824c6513ccec5059638fd257dfdef9cd,a1d54619824c6513ccec5059638fd257dfdef9cd,"Merge pull request #769 from couchbase/feature/issue_752_needNewBodyStream

Fix CBLMultipartUploader connection:needNewBodyStream"
pasin,2015-06-15 09:35:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a3e148f3c0c04fd27f5f13fd64039458da91109,4a3e148f3c0c04fd27f5f13fd64039458da91109,"Move CBLJSViewCompiler into CouchbaseLite framwork

[CBLRegisterJSViewCompiler]
- Moved CBLRegisterJSViewCompiler.* to API/CBLRegisterJSViewCompiler.*
- Set CBLRegisterJSViewCompiler.h target to CBLMac, CBL iOS framework, and CBL iOS as a Public header
- Set CBLRebisterJSViewCompiler.m target to CBLMac and CBL iOS library
- Added #import ""CBLRegisterJSViewCompiler.h"" to CouchbaseLite.h
- Added _CBLRegisterJSViewCompiler as a public function in CoucbaseLite.exp

[CBLJSFunction and CBLJSViewCompiler]
- Moved CBLJSFunction.* and CBLJSViewCompiler.* to Group Source/JSViewCompiler
- Set CBLJSFunction.h and CBLJSViewCompiler.h target to CBL Mac and CBL iOS
- Set CBLJSFunction.m and CBLJSViewCompiler.m target to CBL Mac and CBL iOS library
  (Removed LiteServ, LiteServe App, CBLJSViewCompiler, and CBL Mac Unit Tests)

[Build Target]
- Removed CBLJSViewCompiler build target
- Removed JSViewCompiler/Supporting Files
- Removed Source/CBLJSViewCompiler-Prefix.pch

[Others]
- Increased CBL Mac Deployment Target from 10.8 to 10.9 as the new Objective-C JavaScriptCore framework was added in 10.9.

#652"
snej,2015-06-15 21:05:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6811f14e1c42e5984d1062e53b8225a2d28aab9e,6811f14e1c42e5984d1062e53b8225a2d28aab9e,WIP: Fixing new-replicator progress reporting issues
snej,2015-06-12 00:33:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75ad47f12ed593b6084241c92a47a089c029089b,75ad47f12ed593b6084241c92a47a089c029089b,"Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into feature/new_replicator

# Conflicts:
#	CouchbaseLite.xcodeproj/project.pbxproj
#	Source/API/CBLReplication.h
#	Source/API/CBLReplication.m
#	Source/CBLRestReplicator.m
#	Source/CBL_Replicator.h"
pasin,2015-06-11 23:00:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7113cd66bb2d44813d827f89ac12bf9a21f0251b,7113cd66bb2d44813d827f89ac12bf9a21f0251b,"Fix missing files in Copy Extras Build Phrases

CBLJSONValidator.m (Source)
CBLIncrementalStore.h (Source/API/Extras)
CBLIncrementalStore.m (Source/API/Extras)"
snej,2015-06-11 22:55:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/173b4cce8963b7896cc221415752cc55ccf4a05e,173b4cce8963b7896cc221415752cc55ccf4a05e,"WIP: Integrating new replicator into unit tests.

Replicator tests all now run twice, once with the old replicator and
once with the new one.
Lots of changes to the new replicator to let it pass tests."
pasin,2015-06-11 10:44:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4640cd1b94786f451fe1b580ab29464ce8ade95a,4640cd1b94786f451fe1b580ab29464ce8ade95a,"Fix CBLMultipartUploader connection:needNewBodyStream

Create a new writer after closing stream.

#752"
pasin,2015-06-11 03:15:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/12ffbbac8e90f9b50cbbc17dc064022d04f5f5bf,12ffbbac8e90f9b50cbbc17dc064022d04f5f5bf,"Fix CBLReplication stop notification timeout warning

- Calling the -stop method twice or more will cause the 'Timeout waiting for background stop notification' to show up as the _bg_replicator has already been stop so there will not be any more notification sent. To fix the issue, ignore the -stop message if the _bg_replicator is not running.

- Fix comments in test16_Restart and rename test12_StopIdlePush to test12_StopIdlePushReplication for naming consistency.

#758"
snej,2015-06-10 16:45:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/474119760dbee0aed8c91baed84e300d765850dc,474119760dbee0aed8c91baed84e300d765850dc,Use NS_UNAVAILABLE attribute to mark -init as unavailable in API classes
snej,2015-06-09 22:10:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92b7cacc97418dfd201071aaa3b9e326ff0b48bb,92b7cacc97418dfd201071aaa3b9e326ff0b48bb,Removed long-deprecated facebook/persona auth API in CBLReplication
snej,2015-06-09 21:42:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5ef566ed8c0dfc784abd1423f3b1a01f0ad9932,a5ef566ed8c0dfc784abd1423f3b1a01f0ad9932,"Use parameterized (generic-ized) NSArray/NSDictionary in public APIs

This provides cleaner APIs for Swift apps, since the Array and Dictionary
types will have the proper key/value types."
snej,2015-06-09 21:40:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f299e2127b0f42159445ed98aff7c6de2acf450,5f299e2127b0f42159445ed98aff7c6de2acf450,Fixed those benign-but-annoying build warnings.
snej,2015-06-09 20:49:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/12e628bbc1d7775aaa6fdc40c7282e8e12cd4f8c,12e628bbc1d7775aaa6fdc40c7282e8e12cd4f8c,Fixed some more new Xcode 7 compile errors.
pasin,2015-06-10 08:04:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aee770a7ebd9996171d4902a0775f4e3f13c35d5,aee770a7ebd9996171d4902a0775f4e3f13c35d5,"CBLIS - Default conflict handler also removes conflict revisions

- Improve default conflict handler by also removing conflict revisions when resolving the conflict

- Add test_DefaultConflictHandler unit test

#757"
pasin,2015-06-10 05:02:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33e4cc3fb19f16e1141a5b71a91bd6c5cf83d9dc,33e4cc3fb19f16e1141a5b71a91bd6c5cf83d9dc,"Add CBLIS conflict handler unit test

Added test_ConflictHandler.

#757"
pasin,2015-06-10 03:35:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2de12dc8b14c756d13bee3011e79fe3534e78093,2de12dc8b14c756d13bee3011e79fe3534e78093,"Fix CBLIS NotEqual boolean predicate bug

For the case of mixing boolean number and JSON boolean data, when creating an OR-compound boolean predicate for NotEqual operator, the predicate needs to invert its operator to Equal and its value to !value.

#656"
pasin,2015-06-10 01:15:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fca41ac055373ac8acdcf6832f7e6eb1bb004d7d,fca41ac055373ac8acdcf6832f7e6eb1bb004d7d,"Merge pull request #764 from couchbase/feature/issue_763_cblis_nullify_attachment

Fix CBLIS cannot nullify NSData property"
pasin,2015-06-09 10:27:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f50588ad3f5a32d286a88351316ad736aee9859,6f50588ad3f5a32d286a88351316ad736aee9859,"Fix CBLIS cannot nullify NSData property

- Remove the attachment when nullifying the NSData property

- Optimize storing the attachment by checking if the NSData property value was changed or not

#763"
mastohhh,2015-06-03 08:56:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fede45f81e0665eaeadc7b63c83b80560c06684f,fede45f81e0665eaeadc7b63c83b80560c06684f,add test for nil NSData
snej,2015-06-09 21:46:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d9f79995824f211f68d26af3139017f3f24f0bb,9d9f79995824f211f68d26af3139017f3f24f0bb,"Merge pull request #762 from couchbase/feature/issue_756_cblis_boolean_predicate

Fix CBLIS storing and querying boolean value

Fixes #756"
pasin,2015-06-09 06:32:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4d231e821bc2e4136353a2aa40cf2bd3b0c7c665,4d231e821bc2e4136353a2aa40cf2bd3b0c7c665,"Fix CBLIS storing and querying boolean value

- Store boolean value in CBL database as JSON boolean value instead of number boolean value

- Provide kCBLISCustomPropertyQueryBooleanWithNumber (Default is NO) to support querying the existing boolean number value.

- If setting the kCBLISCustomPropertyQueryBooleanWithNumber property value to YES, when scanning the predicate for CBLQueryBuilder, CBLIS will replcate the original boolean predicate with an OR-compound predicate of the original predicate and the improvised number boolean predicate without parameterizing. For example, if the predicate is 'checked == YES', CBLIS will replace the predicate with 'checked == YES or checked == 1.

#756"
mastohhh,2015-06-02 15:13:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e412fc0db7941937e3b4c9d43f82ed349f27d9f,6e412fc0db7941937e3b4c9d43f82ed349f27d9f,add failing test for predicate with bool property
snej,2015-06-09 00:33:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e0ab0eea4d6856935686c19f24c6f11236cd330,9e0ab0eea4d6856935686c19f24c6f11236cd330,Fixed two new compile errors reported in Xcode 7
snej,2015-06-08 21:35:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9146aa9affb506b97cc24f368846f354775f7bee,9146aa9affb506b97cc24f368846f354775f7bee,"Fix for push replicator loading all doc bodies, with ForestDB

-[CBLDatabase changesSinceSequence:] was returning the revision bodies
even if includeDocs=false, as long as includeConflicts=true. Fixed.
As a bonus, it's now more efficient too, because it doesn't need to
load those bodies from the database."
snej,2015-06-07 21:13:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/178565693f3ce3276036678e8a8d0030047f8566,178565693f3ce3276036678e8a8d0030047f8566,"Fixed an obsolete method name in a doc-comment in CBLQuery.h

Fixes #759"
snej,2015-06-07 18:59:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63235ea0901423fe8af6cbccabdb12c6d6e088d7,63235ea0901423fe8af6cbccabdb12c6d6e088d7,"Updated MYUtilities (converted source files to use ARC, finally)"
snej,2015-06-07 18:16:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/028a5d7e29076df22a5102b8b5b64d72b5629e99,028a5d7e29076df22a5102b8b5b64d72b5629e99,WIP: Adding Bonjour to CBLSyncListener (unfinished)
snej,2015-06-05 23:57:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a339825ed7579a1944ee77a4864a750ddc1268b,0a339825ed7579a1944ee77a4864a750ddc1268b,New replicator: Support all types of CBLAuthorizers
snej,2015-06-05 23:10:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30c518795b95cf63a8a608b05ef27f826ec8306d,30c518795b95cf63a8a608b05ef27f826ec8306d,"Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into feature/new_replicator

# Conflicts:
#	CouchbaseLite.xcodeproj/project.pbxproj
#	Source/API/CBLReplication.m
#	Source/API/CouchbaseLitePrivate.h
#	Source/CBLRestReplicator.m
#	Source/CBL_Replicator.h"
snej,2015-06-05 22:05:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1756162343824af2f6b1bd146c950efcc732cb7,d1756162343824af2f6b1bd146c950efcc732cb7,"Added CBLListener.bonjourName property

This allows the app to determine the actual name that got published,
which may be different from the name it asked for.
Fixes #725"
snej,2015-06-04 23:35:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a75f83c1fd04410c9dde44a817f5e708492dd6c,2a75f83c1fd04410c9dde44a817f5e708492dd6c,"Add replicator support for remote dbs with varying URLs

In P2P replication the target db might not have a fixed URL: the hostname
or IP address or port could change. In such cases the replicator
shouldn't use the URL to persistently identify the replication, i.e. the
checkpoint ID shouldn't be based on the URL. Instead, this commit allows
the app to specify a hopefully-unique ID string to use.

Fixes #733"
snej,2015-06-04 22:07:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f7b6e09ce7ef3c23b552e2ebea5489bda1deb0b,9f7b6e09ce7ef3c23b552e2ebea5489bda1deb0b,"Ignore SSL trust failure connecting to "".local"" domain host

It makes no sense to verify the hostname in an SSL cert when the name is
ephemeral, such as self-assigned hostnames in the mDNS "".local"" domain.
Added a check to ignore a SecTrust failure in this case.

This enables P2P SSL connections, since a peer can create a self-signed
cert and the replicator will now allow connections to it.

Fixes #724"
snej,2015-06-04 23:37:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8208fb5817eb5472af376646cc92c607d8ec198,b8208fb5817eb5472af376646cc92c607d8ec198,"Fixed regression: Async all-docs query rows have .document == nil

In an async all-docs query, the CBLQueryRows didn't get their _database
ivar set, so they'd return nil from the .document accessor.
Fixes #755"
pasin,2015-06-01 21:23:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a2692216dcf227459a4c71ba2e7cbd9e18680cc2,a2692216dcf227459a4c71ba2e7cbd9e18680cc2,"Merge pull request #750 from couchbase/feature/issue_749_cblis_sort_rel_keys

Fix CBLIS sorting with relationship keys"
pasin,2015-06-01 18:48:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e167a1fbd56cff8571d0102d3a77ee815ce9a082,e167a1fbd56cff8571d0102d3a77ee815ce9a082,"Fix CBLIS sorting with relationship keys

- Use post filter instead of CBLQueryBuilder when sort descriptors contain relationship keys.
- Fix fetchByEntityAndDoPostFilterWithRequest to support sorting with relationship keys.

#749"
pasin,2015-06-01 04:52:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/99a23f6b9316a824ce8b9e76ad135faaed077f59,99a23f6b9316a824ce8b9e76ad135faaed077f59,"Fix CBLIS predicate with NSDate value

- When generating an NSPredicate for CBLQueryBuilder, convert an NSDate object constant value to a JSON date object.

- When evaluating an expression for post filtering, convert an NSDate object constant value to a JSON date object.

#741"
pasin,2015-06-01 18:00:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b42244ca876477b9d04a3585b88d642b7e7f955d,b42244ca876477b9d04a3585b88d642b7e7f955d,Merge branch 'sort' of https://github.com/popina/couchbase-lite-ios into feature/issue_cblis_sort
snej,2015-06-01 16:38:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0e76b195b2e90952d0c0cb15b9e2014220eb3cb,a0e76b195b2e90952d0c0cb15b9e2014220eb3cb,CONTRIBUTING.md: Issue tracker is not for questions
mastohhh,2015-06-01 11:48:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8df3f7e05af7dafe363cca2fb4c2d583b490212c,8df3f7e05af7dafe363cca2fb4c2d583b490212c,add failing test for sort descriptiors with keyPaths
pasin,2015-05-29 23:13:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e27a9aa43c4ca13afccbc6c434003d8047428288,e27a9aa43c4ca13afccbc6c434003d8047428288,"Merge pull request #746 from couchbase/feature/issue_745_cblis_query_nil

Fix CBLIS query with nil value"
pasin,2015-05-29 23:11:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76389b275842ee0de2c68be128874cceff2de3ce,76389b275842ee0de2c68be128874cceff2de3ce,"Fix CBLIS query with nil value

Not templating comparison predicate with nil value.

#745"
pasin,2015-05-29 23:07:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d26b57ec7690b6c3b9b65016d0c8af76445ad4a,5d26b57ec7690b6c3b9b65016d0c8af76445ad4a,"Merge branch 'test' of https://github.com/popina/couchbase-lite-ios into feature/issue_745_cblis_query_nil

# Conflicts:
#	Unit-Tests/IncrementalStore_Tests.m"
pasin,2015-05-29 22:50:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/39e10553e195c2b948ca5d80e35e0deffce1a64b,39e10553e195c2b948ca5d80e35e0deffce1a64b,"Merge pull request #740 from couchbase/feature/issue_715_cblis_nested_rel_query

Fix #715 CBLIS fetch result via nested relationships"
pasin,2015-05-29 22:48:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d5ab7889f3b13819309a75d1f9386a572d24e4a5,d5ab7889f3b13819309a75d1f9386a572d24e4a5,"Fix CBLIS max relationship load option name

Change from kCBLISCustomPropertyMaxRelationshipSearchDepth to kCBLISCustomPropertyMaxRelationshipLoadDepth per API review.

#715"
pasin,2015-05-26 22:24:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f63609ac514e12ba29f36ce2b484e346e454a6b7,f63609ac514e12ba29f36ce2b484e346e454a6b7,"Fix CBLIS fetch result via nested relationships

- Getting the relationship document as the document id instead of the NSManagedObject object.

- Support multiple level relationship search. The default max releationship search depth of 3. Users can customize the max depth by specifiying the custom properties called `kCBLISCustomPropertyMaxRelationshipSearchDepth`.

#715"
pasin,2015-05-26 22:10:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fee911eaa98a17b4add93a03a182768ec8a3adf5,fee911eaa98a17b4add93a03a182768ec8a3adf5,"Fix IncrementalStore's test_CBLIntegration failed

- test_CBLIntegration failed in XCode Server Mac Unit Test run.
- Instead of waiting for 1 second and checking the result, wait for the kCBLISObjectHasBeenChangedInStoreNotification notification instead.

#739"
snej,2015-05-22 18:03:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1fe0752726921aaf1770b4f374027088bc26eca6,1fe0752726921aaf1770b4f374027088bc26eca6,"Merge pull request #731 from couchbase/feature/issue_727_forestdb_designdoc_index

ForestDBViewStorage, filter out _design docs when indexing"
snej,2015-05-22 17:20:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49d203a4304e4b6572b7ebc286e06b4f7bf7c8bb,49d203a4304e4b6572b7ebc286e06b4f7bf7c8bb,Update LiteServ deployment target to 10.9 so CBLJSViewCompiler will build
snej,2015-05-22 16:48:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8db45e5beddaec6d3eb0766a84888525b3648633,8db45e5beddaec6d3eb0766a84888525b3648633,"Merge pull request #734 from couchbase/feature/issue_701_javascript

Refactor CBLJSViewCompiler and CBLJSFunction"
pasin,2015-05-22 16:01:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1c03a577381dbcad2867b351e16790d8fa0f7116,1c03a577381dbcad2867b351e16790d8fa0f7116,"Wrap JS function with a parenthesis, no name required

Wrap the function with a parenthesis when evaluating the function so we don't need to assign the function name anymore.

#701"
pasin,2015-05-21 23:01:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/20b0b5f70118796bf8a50642a721c14bd5e5e906,20b0b5f70118796bf8a50642a721c14bd5e5e906,"Refactor CBLJSViewCompiler and CBLJSFunction

- Refactor CBLJSViewCompiler and CBLJSFunction to use the new Objective-C JavaScriptCore API.
- Fix out of memory issue created by JSValueMakeFromJSONString(ctx, jsStr) method for some JSON documents (#701)
- No performance degraded."
snej,2015-05-21 20:15:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4cc63fde38bb213f251380da1cc7c58e75d0e0ba,4cc63fde38bb213f251380da1cc7c58e75d0e0ba,"Fix for replicators not getting distinct checkpoints

Defer initialization of cookieStorage because this has the side effect
of setting the remoteCheckpointDocID, and we don't want to do that until
properties like the filter and filterParams are set up.
Fixes #728"
snej,2015-05-21 18:56:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc10429e995c7cf0e1bd35920d42d6c0c5d23de2,fc10429e995c7cf0e1bd35920d42d6c0c5d23de2,"Return values of -[CBLDatabase createPush/PullReplication:] aren't nullable

Fixes #730"
pasin,2015-05-21 20:14:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/259bfc77626a6c1724f376f1e9536beb25fc5308,259bfc77626a6c1724f376f1e9536beb25fc5308,"ForestDBViewStorage, filter out _design docs when indexing

- In CocoaIndexer, check to filter out a design doc.
- Update ViewInternal_Tests's -createViewNames to assert if there is a design doc get indexed.

#727"
snej,2015-05-20 21:26:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1749b15caeef2322da8a60c791b3df60f283a65e,1749b15caeef2322da8a60c791b3df60f283a65e,"Merge pull request #722 from evankyle/master

Fix error re-adding a document after it's been purged.

Fixes #714"
snej,2015-05-19 21:43:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f874bd0d6f627422239e49617d618a19b1f7dfa7,f874bd0d6f627422239e49617d618a19b1f7dfa7,"Merge pull request #720 from couchbase/feature/issue_681_db_migrate

Support replace and upgrade old version databases"
pasin,2015-05-19 20:29:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2148f05be7a3abe3c9b9a5c2ccae5ef361a19759,2148f05be7a3abe3c9b9a5c2ccae5ef361a19759,"Support replace and upgrade old version databases

- Brought the old -replaceDatabaseNamed: withDatabaseFile:withAttachments: error back to support replacing the old version databases.

- When replacing the old version databases, called upgrading the replaced database as well.

- Fixed attachment issue when upgrading .NET 1.1.0 database (change attachment json from stub=true to follows=true).

- Bumped the db schema version to 101 and the incompaatibility version check to >= 200. These are inlined with v1.1.0

- Added replace database unit tests and test files.

#681 #695"
snej,2015-05-19 20:10:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d99b6ee4d3bc7d6cc7ef407dbe65ec8f591edf9d,d99b6ee4d3bc7d6cc7ef407dbe65ec8f591edf9d,"Merge pull request #719 from couchbase/feature/issue_718_unsavedrev_properites

Fix UnsavedRevision.properties synthesizing"
pasin,2015-05-19 17:44:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c49f596d4420b699ebd5dc911b5192e3ceb6df2f,c49f596d4420b699ebd5dc911b5192e3ceb6df2f,"Remove @synchronized from UnsavedRevision.properties

Per code review, Remove @synchronized from UnsavedRevision.properties get/set method as the API is not thread safe.

#718"
pasin,2015-05-19 17:34:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70127ece60c8b5d270f413be7855962b9c694735,70127ece60c8b5d270f413be7855962b9c694735,"Fix UnsavedRevision.properties synthesizing

The UnsavedRevision.properties propery is declared as copy and that causes an issue that the new NSMutableDictionary object set to the property is changed to an immutable one at runtime by the SDK. Instead of synthesizing, implementing a pair get/set method with doing mutableCopy instead.

#718"
snej,2015-05-15 22:31:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7991932453bfd6a1211ae5de14b9b21c47d34b83,7991932453bfd6a1211ae5de14b9b21c47d34b83,"Restore deleted CBLQuery fullTextSnippets/Ranking API

Was accidentally removed during ForestDB storage development.
These aren't supported yet with ForestDB but are with SQLite.
Fixes #709"
pasin,2015-05-15 22:17:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a95cef8ecd962686b860261f0d1b2ad4e937e8e1,a95cef8ecd962686b860261f0d1b2ad4e937e8e1,"Add CBLEncryptionController.m,.h to Extras folder

iOS only, added CBLEncryptionController.m,.h to the Extras folder."
snej,2015-05-15 20:58:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9bb2d53ae1f62135db74b38d05e24a1a33a23de7,9bb2d53ae1f62135db74b38d05e24a1a33a23de7,"Updated ForestDB to pick up 32-bit fix

Fixes #700"
snej,2015-05-15 20:04:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02585d17f84881cff3e043ac8e3ce101de93c076,02585d17f84881cff3e043ac8e3ce101de93c076,"Fixed 32-bit compile errors in unit tests

These only show up if you try to test on a 32-bit device like an
iPhone 4s. Newer devices run the tests in 64-bit, and of course the
tests aren't compiled at all in a release build."
snej,2015-05-15 18:11:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/37818a09ae5bc92058ed13022b8f51a6e80b8304,37818a09ae5bc92058ed13022b8f51a6e80b8304,"Merge pull request #699 from couchbase/feature/issue_696_replication_restart

Fix replicator restart issue"
pasin,2015-05-15 17:50:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e32b56a3b30b5bc1270c561e62d5c16916f052d0,e32b56a3b30b5bc1270c561e62d5c16916f052d0,"Change CBLReplicator stopLock to _bg_stopLock

Comply with the rule that the variable that is used in the background thread should be prefix with _bg_.

#696"
snej,2015-05-14 21:35:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d06096007640fc6ee30a781167b55a31489d9a4,9d06096007640fc6ee30a781167b55a31489d9a4,"Fixed test_PutAttachmentToExistingDoc

It was checking for the wrong HTTP status."
snej,2015-05-14 21:03:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c055fa3e867c423bb045b767902ca8554a6854f2,c055fa3e867c423bb045b767902ca8554a6854f2,Add DDExtractFileNameWithoutExtension to list of renamed 3rd party symbols
pasin,2015-05-13 23:42:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d1281186482336a8c45dcdf599e5913b8f45327,6d1281186482336a8c45dcdf599e5913b8f45327,"Fix stopLock race condition

Per code review, fix stopLock race condition by always creating and nulling the lock object on the replicator thread."
snej,2015-05-13 23:11:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64a3b02b4a56f7ad91a441a4479cd170859b6afa,64a3b02b4a56f7ad91a441a4479cd170859b6afa,Added new BLIP replicator
snej,2015-05-13 21:43:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7864b13b015f14530d08dad0e149dca03ca98145,7864b13b015f14530d08dad0e149dca03ca98145,"Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into feature/new_replicator

# Conflicts:
#	CouchbaseLite.xcodeproj/project.xcworkspace/xcshareddata/CouchbaseLite.xccheckout
#	Source/API/CBLReplication.m"
pasin,2015-05-13 18:51:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5210c53f0623c345f7acb7ddba72a32a1321cb92,5210c53f0623c345f7acb7ddba72a32a1321cb92,"Fix replicator restart issue

- In CBLReplication -stop method, before returning, wait until the background stop notification comes.

- In CBLReplication -restart method, spin the -start method call into the next runloop or the next dispatching if the dispatch queue is used.

#696"
snej,2015-05-12 23:03:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40dbab99e83a8b834b062693aa5383991db9d804,40dbab99e83a8b834b062693aa5383991db9d804,CONTRIBUTING.md: Added issue tracker links
snej,2015-05-12 03:47:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38f760c527c9987f7076c243bedd38905a8e6052,38f760c527c9987f7076c243bedd38905a8e6052,"Updated to latest ForestDB

Fixes #694"
snej,2015-05-11 17:28:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e819b9dbc2babb1a150254dce84cdfceab27fba3,e819b9dbc2babb1a150254dce84cdfceab27fba3,Added CBLRouter unit tests for PUT to attachment URL
snej,2015-05-11 23:52:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/06d9ead2dafa9a839cbadac4266f0662b7260472,06d9ead2dafa9a839cbadac4266f0662b7260472,"Merge pull request #692 from couchbase/feature/issue_691_cookie_thread_safe

Fix threading issue in CBLReplication -setCookieNamed: and deleteCookieNamed: method"
snej,2015-05-11 23:51:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f07be2ab261a78b5aff64269c74a3cada746098,1f07be2ab261a78b5aff64269c74a3cada746098,"Merge pull request #693 from couchbase/feature/issue_107_changes_descending

Fix REST API getting _changes feed in descending mode

NOTE: Not implemented for ForestDB storage (ForestDB itself cannot iterate
by sequence in descending order.)"
snej,2015-05-11 22:55:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a58656ff1efb76960d658b2fd1d9efb89d00e9d,7a58656ff1efb76960d658b2fd1d9efb89d00e9d,"Make CBLAuthorizer.h a private header, for replicator implementations."
snej,2015-05-11 22:27:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43e54018217e347e4eaf40cda105b8eeb74d54d3,43e54018217e347e4eaf40cda105b8eeb74d54d3,Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into feature/new_replicator
snej,2015-05-11 22:18:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a43f5ffe078c41ad87f42775d96f5fe6c6e4e48,6a43f5ffe078c41ad87f42775d96f5fe6c6e4e48,Export and header fixes for dynamic iOS framework
snej,2015-05-11 22:16:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71c027335b24d80ef45f3e83a1859eea8de5e54f,71c027335b24d80ef45f3e83a1859eea8de5e54f,"Allow replicator impl to use a dispatch-queue-based CBLServer

The new replicator needs the db to have a dispatch queue; the old one
needs a runloop. CBLServer now has a subclass for each."
pasin,2015-05-07 23:51:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/344c15a670015ebae4e4f764789f393721043471,344c15a670015ebae4e4f764789f393721043471,"Fix REST API getting _changes feed in descending mode

- Descending mode will be only working when the feed mode is normal mode. The bad param error will be returned when using the descending mode with continuous and long poll mode.

- Currently ForestDB storage doesn't support this option. The not implemented error will be returned. (https://github.com/couchbase/couchbase-lite-ios/issues/641).

#107"
pasin,2015-05-05 17:20:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9deab3792ef7d83bdcc4b7802f7eea0e7a3fe662,9deab3792ef7d83bdcc4b7802f7eea0e7a3fe662,"Use non-block tellReplicator in CBLReplication set/delete cookie method

Fixed per code review to use -tellReplicator: instead of -tellReplicatorAndWait:

#691"
snej,2015-05-05 05:02:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb4ff92f9f17372c49ca5b0c11a42f000a24c4f0,eb4ff92f9f17372c49ca5b0c11a42f000a24c4f0,"Fix for CBLModel getters of type 'id' (or Swift 'String')

For some reason the prior fix was only implemented for setter methods,
not getters, and the unit tests didn't notice because they only tested
the untyped setter...
Fixes #648"
pasin,2015-05-04 23:22:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa34ed6c630ef424e970927cbc0ce12c36dd29b9,fa34ed6c630ef424e970927cbc0ce12c36dd29b9,"Fix threading issue in CBLReplication -setCookieNamed: and deleteCookieNamed:

- Rename _pendingCookies to _bg_pendingCookies.
- Wrap the code that access _bg_replicator and _bg_pendingCookies in the -tellReplicatorAndWait block."
snej,2015-05-04 20:12:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e70adcba9744d8880d20169742c4b9b24a62b777,e70adcba9744d8880d20169742c4b9b24a62b777,More replicator refactoring.
snej,2015-05-02 18:25:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e4e5e5d2ff11faf3f00f07e0723a98579162e0d6,e4e5e5d2ff11faf3f00f07e0723a98579162e0d6,Refactoring settings out of CBL_Replicator & cleaning up CouchbaseLitePrivate.h
snej,2015-05-01 19:11:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aac4f02b2ebea40283cbda1b93fe4f5304fa1c48,aac4f02b2ebea40283cbda1b93fe4f5304fa1c48,Added CouchbaseLiteReplicator framework for iOS (dynamic only)
snej,2015-04-30 21:59:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e384e6b16039792039d297aea5490f4d4e51a24,2e384e6b16039792039d297aea5490f4d4e51a24,"Split replicator out into new framework (only on Mac, not iOS)"
snej,2015-04-30 19:58:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b1464e9e023d53332209e7221113ee8fc91402b7,b1464e9e023d53332209e7221113ee8fc91402b7,"Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into feature/new_replicator

# Conflicts:
#	Source/CBL_BlobStore.m"
snej,2015-04-30 19:53:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00320b7dc4e3c5814760550f6ba36186722c62ec,00320b7dc4e3c5814760550f6ba36186722c62ec,Created CBL_ReplicatorAPI protocol to help make replicator pluggable
snej,2015-04-29 22:43:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2159f3e15447a15298f7ef309f0425fd77a90eb4,2159f3e15447a15298f7ef309f0425fd77a90eb4,Added a new -getPossibleAncestors method for the new replicator to use
snej,2015-04-28 16:33:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd48be06aaa37fb3a010798e581ecd7d5248b68f,fd48be06aaa37fb3a010798e581ecd7d5248b68f,Fixed compile errors from recent MYUtilities change to Test.h
snej,2015-04-24 23:47:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/defd57a1700a392438a039135f2d53784c00e43b,defd57a1700a392438a039135f2d53784c00e43b,Updated MYUtilities (for MYErrorUtils)
snej,2015-04-24 22:30:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/feb7ff5eda1e80bd00e5eb19f1d46c793f7a1951,feb7ff5eda1e80bd00e5eb19f1d46c793f7a1951,"Merge pull request #673 from couchbase/feature/issue_672_stub_attachment

Fix pulling documents with sub attachments failure"
pasin,2015-04-24 20:59:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7047ed43394bb3f0c116781ae84505b97a6fca3,d7047ed43394bb3f0c116781ae84505b97a6fca3,"Make -processAttachmentsForRevision ignore the return value of -mutateAttachments

Per code review, Make -processAttachmentsForRevision ignore the return value of -mutateAttachments."
snej,2015-04-23 22:49:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5b98b28308bc9b3f3d1f07adda34accb1de0dbc0,5b98b28308bc9b3f3d1f07adda34accb1de0dbc0,"Major optimization for updating docs with large numbers of revisions

Use an O(1) NSDictionary instead of an O(n) CBL_RevisionList to look up
locally-known revisions by revID when inserting an existing revision.

In the database I'm testing with, this sped up the entire replication
by a factor of 8x! (From ~55sec down to ~7sec.)"
snej,2015-04-23 22:49:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b4d0ed7eb8d48e3faeb60c18b65602075fbd2974,b4d0ed7eb8d48e3faeb60c18b65602075fbd2974,"Major optimization for updating docs with large numbers of revisions

Use an O(1) NSDictionary instead of an O(n) CBL_RevisionList to look up
locally-known revisions by revID when inserting an existing revision.

In the database I'm testing with, this sped up the entire replication
by a factor of 8x! (From ~55sec down to ~7sec.)"
pasin,2015-04-23 00:07:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2b214e455e8f61d813e887dba38d7e65e39a43c1,2b214e455e8f61d813e887dba38d7e65e39a43c1,"Fix pulling documents with sub attachments failure

A few related issues have been fixed:
1. Correct minRevPos value when stripping the (non modified) attachments. This corrects the performance optimization when pushing documents that have non-modified attachments.
2. Applying a patch from @snej that ""if the attachment is a stub, and the parent revision's JSON isn't known, but the attachment exists locally (based on its digest), just leave the stub alone"".
3. Fix the issue that atts_since parameter has never been sent.

#672"
snej,2015-04-22 17:29:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5c6eed47464d0b09d227d1c60cc610baccf70c4a,5c6eed47464d0b09d227d1c60cc610baccf70c4a,"Merge pull request #666 from couchbase/feature/multipart_retry

Fix multipart streams need to be recreated when doing retry"
snej,2015-04-22 17:25:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fbbe006526706c372ff6241555cc41f434abbd84,fbbe006526706c372ff6241555cc41f434abbd84,"Merge pull request #647 from couchbase/feature/issue_638_cblis_many_to_many

Add CBLIS support for many-to-many relationship"
snej,2015-04-19 19:55:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42226732161725242283db072903a13c1046d29b,42226732161725242283db072903a13c1046d29b,"Added support for handling attachment proof challenges

When I push a revision with attachments, the server (remote peer) may now,
instead of requesting the attachment data, request just a proof that I have the
data. This is used by peers that already have the attachment (as indicated by
its digest) but are paranoid that I might be claiming to have the attachment even
though I don't have it, I just know its digest."
pasin,2015-04-17 15:48:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d6cf16aa28c9e37a70446ea78aa3cff47a2e701,6d6cf16aa28c9e37a70446ea78aa3cff47a2e701,"Merge pull request #667 from couchbase/feature/issue_655

Updated CBL Mac Test app scheme to include mac unit tests"
pasin,2015-04-16 22:49:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/67e591b190c96632e21ab23872d12c05200e7363,67e591b190c96632e21ab23872d12c05200e7363,Fix Mac build issue on OSX10.9 and XCode 6.0
pasin,2015-04-16 22:18:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5c80e7013c9d3994dc4703577fc1bbf3203c4868,5c80e7013c9d3994dc4703577fc1bbf3203c4868,"Fix CBLIS NSRelationshipDescription.ordered property mac build failed

The ordered property has been available since OSX v10.7 so we need to guared that for OSX version less than 10.7."
pasin,2015-04-16 20:26:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a26dec87a726b2f1846f6001266f22bb6af57cea,a26dec87a726b2f1846f6001266f22bb6af57cea,"Fix multipart streams need to be recreated when doing retry

Refactor the CBLMultipartUploader's init method to accept a block for creating a new mutipart writer object instead of a multipart writer object that cannot be reused when doing retry.

#665"
pasin,2015-04-16 03:19:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e495866b93a0c5a51c9f3cef0cea3b29857b5c02,e495866b93a0c5a51c9f3cef0cea3b29857b5c02,"Fix CBL Mac Test App Build Fail

Removed old and missing CBLJSONValidator.m and CBLJSONValidatorTests.m from the CBL Mac Test App Compile Source."
pasin,2015-04-15 19:05:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25f98a764f0371097296eed8e4768304acdbaf87,25f98a764f0371097296eed8e4768304acdbaf87,"Merge pull request #663 from couchbase/feature/issue_661_docid

Change docid prefix"
pasin,2015-04-15 18:53:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/611dca4a39705303dd13a81605bd6ceeeae8533d,611dca4a39705303dd13a81605bd6ceeeae8533d,"Change docid prefix

Change docid prefix from '!' to '-'. Using '!' doesn't work with sync function for the case of using the docid to construct a channel name. Sync gateway doesn't allow '!' as part of the channel name.

#661"
snej,2015-04-14 17:14:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4cf832484258e3b639d9fd954a3938ccec5ab610,4cf832484258e3b639d9fd954a3938ccec5ab610,"Merge pull request #657 from couchbase/feature/issue_649_mapped_file

Remove NSDataReadingMappedIfSafe when reading attachment content"
pasin,2015-04-13 23:17:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c073243c2c5d052fedeee3994c6c0862bab7b6cd,c073243c2c5d052fedeee3994c6c0862bab7b6cd,"Remove NSDataReadingMappedIfSafe from CBL_BlobStore.blobForKey

Remove NSDataReadingMappedIfSafe and use NSDataReadingUncached option when reading blob data for a key.

#649"
snej,2015-04-14 14:56:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43e23ec5bcda171c969a90437a49005c19f2364e,43e23ec5bcda171c969a90437a49005c19f2364e,Added private property CBLQuery.filterBlock for new replicator
snej,2015-04-14 00:17:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/02eb6f6aa05f0068407e0f509c59ab41629abf3f,02eb6f6aa05f0068407e0f509c59ab41629abf3f,"Merge pull request #659 from couchbase/feature/attachment_memleak

Fix circular reference between CBLUnsavedRevision and CBLAttachment"
pasin,2015-04-14 00:12:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/79ada94abd9200fba39e4322ab9c347fb90cc43d,79ada94abd9200fba39e4322ab9c347fb90cc43d,Removed body property from CBLAttachment per code review
pasin,2015-04-13 23:45:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed0fc7449c87be2cb9374575fa6232c4d2b4de6b,ed0fc7449c87be2cb9374575fa6232c4d2b4de6b,"Remove overriden attachmentNamed: from CBLUnsavedRevision

- Per code review, removed the overriden attachmentNamed: from the CBLUnsavedRevision class.
- The new added CBLAttachments get from the attachmentNamed: of the CBLUnsavedRevision will not have revision object set. Updated the unit test accordingly."
snej,2015-04-13 23:02:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/868a9b0c9b993f7294d3cd38d1ae50f46b75d719,868a9b0c9b993f7294d3cd38d1ae50f46b75d719,"Merge pull request #658 from couchbase/feature/issue_649_file_handlers

Not pre-open stream in CBL_BlobStore's blobInputStreamForKey"
pasin,2015-04-13 21:58:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a3f63880da6894260f51f78c3aea4566c3a0c35a,a3f63880da6894260f51f78c3aea4566c3a0c35a,"Fix circular reference between CBLUnsavedRevision and CBLAttachment

- As CBLUnsavedRevision keeps CBLAttachment objects in an array so setting the revision (self) object to the CBLAttachment objects will cause circular reference memory leak.

- Instead of setting the revision (self) object when adding a CBLAttachment to the CBLUnsavedRevision object, overiding the attachmentNamed: method and creating a new CBLAttachment object and adding a revision object there."
pasin,2015-04-13 18:47:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7f0855471164b21db68677cceb7c432b969f80b,d7f0855471164b21db68677cceb7c432b969f80b,"Remove NSDataReadingMappedIfSafe when reading attachment content

NSDataReadingMappedIfSafe option can keep the file descriptors of the attachments open if the client application keeps holding the NSData object returned by CBLAttachment.content.

For a very big attachment, alternatively, users can call contentURL and read the NSData with the NSDataReadingMappedIfSafe option themselves.

#649"
pasin,2015-04-10 23:23:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/066d3289658d25e4006685ccdcbbb670ad6ca666,066d3289658d25e4006685ccdcbbb670ad6ca666,"Not pre-open stream in CBL_BlobStore's blobInputStreamForKey

There is no needs to pre-open the stream except when decrypting the stream. This helps reduce number of opened file descriptors when pushing high volumn of documents with attachments in multipart mode.

#649"
snej,2015-04-10 04:33:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d64ec996eb145615dc9a69fccb0b785f92903344,d64ec996eb145615dc9a69fccb0b785f92903344,Added -lengthOfAttachmentWithDigest: method for replicator
snej,2015-04-09 03:27:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bbd3b72649634388a3a881edbfc7336bfff7d15e,bbd3b72649634388a3a881edbfc7336bfff7d15e,"Merge pull request #650 from couchbase/feature/issue_649_attachment_crash

Handle unable to create a blob store writer for the attachment

For #649 (should prevent the crash, at least)"
pasin,2015-04-09 00:45:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0586286cda24fbfee52ac75af1f9c30cdbd70206,0586286cda24fbfee52ac75af1f9c30cdbd70206,"Merge pull request #651 from couchbase/feature/issue_356_all_docs

Add all_docs with keys body test case"
pasin,2015-04-09 00:43:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a61bd337866f9d88d53fd43e75ee8e02e5faacb9,a61bd337866f9d88d53fd43e75ee8e02e5faacb9,"Add all_docs with keys body test case

Add POST all_docs with keys in the body to confirm that the issue doesn't exist.

#356"
snej,2015-04-08 23:59:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff5b28501a9fe8ee277e15ab94dedb25e39c0cea,ff5b28501a9fe8ee277e15ab94dedb25e39c0cea,"Merge branch 'feature/changesAPI' into feature/new_replicator

Conflicts:
	Source/API/CouchbaseLitePrivate.h
	Source/CBLDatabase+Attachments.m"
snej,2015-04-08 23:56:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7cb7334e29ba35fd8c0c5a7111ac6e1f4a01aa4,c7cb7334e29ba35fd8c0c5a7111ac6e1f4a01aa4,"Don't use NSFileManager to create the CBL_BLobStoreWriter's temp file

It creates an NSProgress object, which screws up the progress tracking
used by the new replicator."
pasin,2015-04-08 23:52:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94f510747560f2f603175237714485ffb8718564,94f510747560f2f603175237714485ffb8718564,"Handle unable to create a blob store writer for the attachment

- Return AttachmentError when cannot  create a blob store writer for the attachment.

- Add warning messages to pin point where the issue is."
snej,2015-04-08 16:24:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fcbed11d56376c9977b027546cfc556e1e0c8740,fcbed11d56376c9977b027546cfc556e1e0c8740,"Added test for CBLModel properties of type ""id""

For #648"
snej,2015-04-08 16:24:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d2fc8dfd879862eadecdbb10c3f11440ed3d1523,d2fc8dfd879862eadecdbb10c3f11440ed3d1523,Fixed 2 small attachment-installation issues exposed by the new replicator
snej,2015-04-08 16:23:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed6714b0e37d54e8f6626f07eafe46fce2fbeace,ed6714b0e37d54e8f6626f07eafe46fce2fbeace,Added some private APIs for the new replicator to call
snej,2015-04-08 16:09:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d4fe3c53e0484a4a09b451d84002f871a737dd1b,d4fe3c53e0484a4a09b451d84002f871a737dd1b,"Fixed regression with CBLModel properties of type ""id""

Fixes #648"
pasin,2015-04-08 00:14:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/69c83b1d585936232cfa863c29c0cfbcddce6575,69c83b1d585936232cfa863c29c0cfbcddce6575,"Add CBLIS support for many-to-many relationship

- Store embeded array of doc ids in the documents for many-to-many relationship.
- Bug fix: add relationship name as part of to-many inverse key view name.
- Small code clean up.

#638"
snej,2015-04-05 18:02:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b4850d3a1f4bd944eb9db8fe20fb4a409ebeff82,b4850d3a1f4bd944eb9db8fe20fb4a409ebeff82,"Merge pull request #645 from couchbase/feature/issue_637_cblis_ordered_relationship

Add ordered relationship warning message to CBLIS"
pasin,2015-04-03 21:03:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ae6022ad079b450a4848e95fbda2a0d9e0cf363f,ae6022ad079b450a4848e95fbda2a0d9e0cf363f,"Add ordered relationship warning message to CBLIS

With the current approach of using inverse relationship view for storing to-many relationship, we are not supporting ordered many relationship. This commit prints warning messages when detecting that the core data model uses ordered many relationship.

#637"
snej,2015-04-03 21:46:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3ab3189b3be69039a9c7e56222f81e43ef2c930d,3ab3189b3be69039a9c7e56222f81e43ef2c930d,Use separate dispatch queues for sync activity & database
snej,2015-04-03 15:33:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38dd697f6d84abda382107a2af68881734da78ec,38dd697f6d84abda382107a2af68881734da78ec,"Merge pull request #642 from couchbase/feature/issue_639_replicator_stop

Fix stop idle replicator not getting change notification"
snej,2015-04-02 01:02:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/af8b681b73e10c2aaa0d7ba846f81a1602f804e8,af8b681b73e10c2aaa0d7ba846f81a1602f804e8,"Cleaned up document revision-history API & added private CBLRevision method

* There are no longer two near-identical CBL_Storage history methods.
* Code for creating a REST-API _revisions dict is now in only one place,
  a class method on CBLDatabase.
* Added -[CBLSavedRevision getRevisionHistoryBackToRevisionIDs:error:],
  currently private (in CouchbaseLitePrivate.h) but could be made public
  later on."
pasin,2015-04-01 23:53:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f8655cac7e1ad969630c48bd343991180b55fa0,3f8655cac7e1ad969630c48bd343991180b55fa0,"Merge pull request #643 from couchbase/feature/changesAPI

API: Added kCBLBySequence to CBLAllDocsOptions (aka ""changes feed"")"
snej,2015-04-01 22:34:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a40250ad710ba827a5acf0f26579989330d59538,a40250ad710ba827a5acf0f26579989330d59538,"API: Added kCBLBySequence to CBLAllDocsOptions (aka ""changes feed"")

In this mode an all-docs query returns docs in order by sequence number.
The startKey and endKey are interpreted as sequence numbers.
Note: Descending order isn't yet supported."
pasin,2015-03-31 01:23:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5438f4727a9713100c1e5814774687042acc272c,5438f4727a9713100c1e5814774687042acc272c,"Fix stop idle replicator not getting change notification

- In CBL_Replicator's stop method, post progress changed notification after calling stopped.

- Refactor CBLReplication's stop method to just calling stop method on the background replicator.

- The rest of the logic including forgetting the replicator and setting _started variable will be done in the updateStatus:error:processed:ofTotal: serverCert: method after getting the progress changed notitification after the replication get stopped.

#639"
snej,2015-03-31 01:20:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42094f2aa697f24b7ab0c9864085d4c18c06b964,42094f2aa697f24b7ab0c9864085d4c18c06b964,"Better error handling downloading multipart documents

1. Fixed assertion in CBLBulkDownloader about _docReader not being nil
2. Shouldn't retry _bulk_get requests if there's an error
3. Fixed a self-being-dealloced crash in CBLMultipartReader"
snej,2015-03-30 20:09:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70f036eaae6885db99f3a434141ff43dedcd5360,70f036eaae6885db99f3a434141ff43dedcd5360,"Fixed multipart attachment upload bug

This was introduced last month by earlier attachment handling changes,
but wasn't showing up because of another bug that prevented attachments
from being sent as multipart...

Fixes #640"
snej,2015-03-30 20:06:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf1d39223e5e97d8447e13ae4f1a37ec034bbdda,cf1d39223e5e97d8447e13ae4f1a37ec034bbdda,Removed some unnecessary Xcode project items (files were already deleted)
snej,2015-03-30 19:16:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ffa910cda2eca1c0b21b3883d61209bdf01ffe6,2ffa910cda2eca1c0b21b3883d61209bdf01ffe6,"Minor optimization to -[CBLDocument _cachedDocumentWithID:]

Yes, this shows up as a hot spot when profiling doc updates..."
snej,2015-03-28 00:02:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/04c331f22aa7a38821eda78c3c66b7cf97a49956,04c331f22aa7a38821eda78c3c66b7cf97a49956,Optimizations to JSON storage in CBL_Revisions
snej,2015-03-27 16:44:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fca4bea2a30e5984744916cde8738213b980604,9fca4bea2a30e5984744916cde8738213b980604,"CBJSONEncoder optimization

Instead of doing a bunch of -isKindOfClass: tests, add a
cbjson_encodeTo:canonical: method to every JSON-encodable class
(NSString, NSArray, etc.)
This will also allow us to add JSON encodability to other classes like
NSDecimalNumber, NSURL, etc. in the future."
snej,2015-03-27 00:07:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a67351aca9f19392e9dbd2cbf9b36453365f16d,4a67351aca9f19392e9dbd2cbf9b36453365f16d,"Fixed performance regression in CBLDocument

-loadCurrentRevisionFrom: wasn't working, making .prefetch on CBLQuery useless."
snej,2015-03-26 21:26:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c5869fa6fe7b262bb099cac638ca075e30c4d045,c5869fa6fe7b262bb099cac638ca075e30c4d045,"Optimization for -[CBL_Revision asCanonicalJSON]

Instead of copying the dictionary and removing metadata keys,
tell the JSON encoder to skip them."
pasin,2015-03-27 00:23:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b19a4c355d0858a35c6ce82b90915ff78f2d988,0b19a4c355d0858a35c6ce82b90915ff78f2d988,Change Gitter URL to mobile
snej,2015-03-26 21:28:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/387ebb68d94f1a3059e882a255a3227489fc0fa9,387ebb68d94f1a3059e882a255a3227489fc0fa9,"Merge pull request #634 from couchbase/feature/issue_624_crash

Fix crash due to notification race condition in CBLReplication"
pasin,2015-03-26 20:59:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f268336529027c3e842e4e3b9df930e3eb58538,8f268336529027c3e842e4e3b9df930e3eb58538,Fix remove observer in CBLReplication per code review
snej,2015-03-26 18:14:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fdf3e086e723ca28e15fbd0f05c39918920eb07,2fdf3e086e723ca28e15fbd0f05c39918920eb07,"Fix: Pusher sending all attachments as inline base64

A regression from attachment-handling changes of the past few months.
Fixes #328"
snej,2015-03-25 23:17:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4cfbdd315fd0ba633138abfbe2cf107a44d8f5bd,4cfbdd315fd0ba633138abfbe2cf107a44d8f5bd,"Fix build by removing _OBJC_IVAR_$_CBLQueryOptions.content from link map

An ivar that got removed in a recent commit."
snej,2015-03-25 23:03:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d2a91262e93377f5dea57777b92a7c152665577f,d2a91262e93377f5dea57777b92a7c152665577f,"Added ""CouchbaseLiteListener.h"" header to resolve new Xcode warning

When building framework as a module, there needs to be an ""umbrella
header"" with the same name as the module."
snej,2015-03-25 04:43:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42e557618f891b177a028893733faed910625ace,42e557618f891b177a028893733faed910625ace,"Fixed usage of 'nullable', for Xcode 6.3b4"
snej,2015-03-23 05:23:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/503f00066a95fb3d5de4f2372f50fc8557dc7aa2,503f00066a95fb3d5de4f2372f50fc8557dc7aa2,"Move generation of magic doc metadata props from CBLDatabase to CBLRouter

Moved CBLContentOptions and the code to add metadata properties like
""_revs"", ""_conflicts"", etc. out of the CBL_Storage implementations and
into CBLRouter, since it's only needed by the REST API."
snej,2015-03-23 05:23:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c237c09f77a9a1a47e3231ceb9b0c1b698b836c7,c237c09f77a9a1a47e3231ceb9b0c1b698b836c7,Moved checkpoint methods from CBLDocument+Internal to +Replication
snej,2015-03-25 22:51:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/313ea46bc4e6319c55d6c3350f331bf782d31ecf,313ea46bc4e6319c55d6c3350f331bf782d31ecf,"Merge pull request #633 from couchbase/feature/issue_536_reachability_alwaysoffline

Try to connect when rechability reports not-reachable"
snej,2015-03-25 22:50:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed26a7019db75d7ec5448d2e77e03c51408addec,ed26a7019db75d7ec5448d2e77e03c51408addec,"Merge pull request #635 from couchbase/feature/issue_605_subentities

Add CBLIS support for NSFetchRequest.includesSubentities"
pasin,2015-03-25 19:46:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb4df2afcc004debf54ef8508f93d21134b6000c,eb4df2afcc004debf54ef8508f93d21134b6000c,"Add CBLIS support for NSFetchRequest.includesSubentities

Add support for NSFetchRequest.includesSubentities property. If the includesSubentities value is YES (default value is YES) so the fetch result should includes its child entity object. On the other hand, if the includesSubentities is set to NO, the fetch result shouldn't includes its child entity objects.

#605"
pasin,2015-03-24 17:57:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/917c451169f6de51546aea22e217bfed62c4132e,917c451169f6de51546aea22e217bfed62c4132e,"Fix crash due to notification race condition in CBLReplication

- Ensure to remove the progress change notification in the replication thread before forgetting the CBLReplication self object.

- Remove previous crash fix that added retainSelf in the bg_updateProgress method.

#624"
pasin,2015-03-23 21:07:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dda5a4f5c7ee50701a1dce2e4bbdf0109c6fdce5,dda5a4f5c7ee50701a1dce2e4bbdf0109c6fdce5,"Add trust_reachability option to replicator and fix per code review

- Add kCBLReplicatorOption_TrustReachability option. The default value is 'YES'. Also setting a value to the kCBLReplicatorOption_Network option will take precendence over and result to always 'Trust'.

- If settings kCBLReplicatorOption_TrustReachability to NO, when the reachability reports offline, the replicator will try to connect to the host and see if it receives any offline related erros or not.

- Rename mayGoOffline method to checkIfOffline.

- Revert CBLMisc.CBLIsOfflineError and add checking NSURLErrorCannotConnectToHost and NSURLErrorNetworkConnectionLost directly to the checkIfOffline method.

#536"
pasin,2015-03-19 02:31:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/791270eca9b5fa497ed143cd981a8b6895d22758,791270eca9b5fa497ed143cd981a8b6895d22758,"Try to connect when rechability reports not-reachable

- Attempt to connect to the remote url when the rechability reports not-reachable. If an offline error returns, bring the replicator offline. Otherwise, bring the replicator online.

- Used request timeout of 10 seconds.

- Added autoRetry parameter to CBLRemoteRequest to be able to enable/disable retry feature; set auto retry to NO when trying to check if the server is reachable nor not.

- Extended NSURLErrorCannotConnectToHost, NSURLErrorCannotFindHost, and NSURLErrorNetworkConnectionLost to the CBLMisc.CBLIsOfflineError method.

#536"
snej,2015-03-19 16:00:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85f405c59a1f54ad099446d826071d351f960c85,85f405c59a1f54ad099446d826071d351f960c85,"Proper fix for missing SQLITE_CONFIG_MMAP_SIZE

Define it if it's not found in <sqlite3.h>.
That way it'll be enabled at runtime even if the builder didn't know about it."
snej,2015-03-19 15:57:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e39b6383a2294e2ec2651654b2ab1d4ee652d55,0e39b6383a2294e2ec2651654b2ab1d4ee652d55,"Conditionalize use of SQLITE_CONFIG_MMAP_SIZE

The older Xcode SDK on the Jenkins builder doesn't have it in <sqlite3.h.>"
snej,2015-03-19 15:42:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f3c263cb71e5ceab9110f97f845fdcc4744baf13,f3c263cb71e5ceab9110f97f845fdcc4744baf13,"Tweak ForestDB config for performance

* Lower WAL size to 1024 entries (increases speed on iOS)
* Turn off sequence tree in index DBs (saves space + time)"
snej,2015-03-19 15:36:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/32123fadaad3d770aeb38fd3dbbaa8a492d4d271,32123fadaad3d770aeb38fd3dbbaa8a492d4d271,"Reduce memory usage of CBLDatabaseChanges if lots of them pile up

Fixes #631"
snej,2015-03-18 18:13:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0c5cca08630ba663bb254f327d7b59becb64d96,e0c5cca08630ba663bb254f327d7b59becb64d96,"Misc SQLite document-insertion optimizations

* Enable WAL journaling (this was in 1.0.x but accidentally didn't make
  it into CBL_SQLiteStorage until now.)
* Enable SQLite memory-mapped I/O. This doesn't help much on Mac OS, at
  least with an SSD, but it's a big improvement on iOS devices.
* Avoid creating a nested transaction when inserting a revision; it's a
  noticeable performance hit. Instead, explicitly delete the new 'revs'
  row if the subsequence modification of the parent fails.
* Optimize registering a new doc ID in the `docs` table by doing an
  INSERT OR IGNORE instead of looking it up first.
* Don't create the SQL indexes for a `maps_#` table until the associated
  view is queried. When the view is first indexed, it's faster to write
  rows to the table if there is no SQL index on it yet.
* When indexing, don't read the `doc_type` column from the `revs` table
  unless it'll be needed. (Incurs less I/O.)
* Don't read the `no_attachments` column at all; it's not needed.
* Cache the `INSERT INTO maps_#...` SQL statement string instead of
  assembling it every time we insert a row."
snej,2015-03-18 17:35:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a2491c142b612e291ae557f41d7a4ee1989df558,a2491c142b612e291ae557f41d7a4ee1989df558,"Get rid of kCBLNoAttachments flag; it doesn't do anything anymore

""Don't say '...of fish', Bishop: it doesn't mean anything."""
snej,2015-03-18 17:30:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/13edb232adf51faf022c4f4ffcf108cac1249b94,13edb232adf51faf022c4f4ffcf108cac1249b94,"Optimization for -[CBLDatabase createDocument]

The new CBLDocument now knows that it has no currentRevision, so it
won't try to look one up from the DB."
snej,2015-03-18 17:26:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4cd465c12fd6514c3a91d596a022c18866fe4a0,a4cd465c12fd6514c3a91d596a022c18866fe4a0,"Better exception handling in ForestDB storage, & test findMissingRevisions edge case

CBL_ForestDBStorage's `_try:` method catches Obj-C exceptions as well as
C++, but it wasn't logging them.
Also convert some other ad-hoc `try` blocks to either use `_try:` or
report the Obj-C exceptions.
Finally, add a test case to make sure findMissingRevisions: doesn't
throw an exception if given an empty array.

For #629"
pasin,2015-03-18 21:33:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f5ed4aaeb972453526da83f964c7d19bfb5cdb63,f5ed4aaeb972453526da83f964c7d19bfb5cdb63,"CBLIS - Add warning when detecting to-many without inverse relationship and fix bug

* Add warning when detecting to-many relationship without inverse relationship.

* Add test_DocTypeKey and test_DocTypeKeyBackwardCompat unit tests and fix a bug calling a wrong method when getting metadata document when resolving document type key.

#569 , #591"
snej,2015-03-18 15:35:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea9239af13ed88d75f84f4c7648972b35ac10cf6,ea9239af13ed88d75f84f4c7648972b35ac10cf6,"Merge pull request #630 from couchbase/feature/issue_591_cblis_doc_type

CBLIS Change type key from CBLIS_Type to type"
pasin,2015-03-18 01:43:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d417b1b32d92e2636b8f3da0faf58d8167b74e4,6d417b1b32d92e2636b8f3da0faf58d8167b74e4,"CBLIS Change type key from CBLIS_Type to type

* Change type key from 'CBLIS_Type' to 'type'. For an existing app, will continue to use CBLIS_type. There is no custom type key at this moment.

* Store metadata property in a local doc instead of a normal document.

* Clean up error generation code and some very long length code.

#591"
pasin,2015-03-18 02:08:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c3f2f1f0066d1a2c446dfb769a904cc65f16247,3c3f2f1f0066d1a2c446dfb769a904cc65f16247,"Apply weak/strong self to blocks in CBLReplication

Apply weak/strong self to the blocks that have a reference to self in CBLReplication. This should hold up the self object through the end of the block operation and handle the case the the weak self object is released before the block is called.

#624"
pasin,2015-03-16 23:46:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c145608dc0a7af0b616c64553397a00e14d6b34,9c145608dc0a7af0b616c64553397a00e14d6b34,"Change assert check to warning in bg_replicationProgressChanged

Per discussion with @snej about #624, it seems possible that replication progress change notifications posted to the NSNotificationQueue in CBL_Replicator could come late after the replication was already stopped. A fix here was loosening the assertion check by changing it into a warning instead.

#624"
pasin,2015-03-13 09:06:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cd692fcd7816b9f854e273b73abd756e3fc41e2d,cd692fcd7816b9f854e273b73abd756e3fc41e2d,"Remove custom dealloc from cookie storage

There is no needs to have a custom dealloc as both _db and _cookies will be released by ARC and there is no circle references here as well."
snej,2015-03-13 01:45:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dfc4d3c874057638e37a7de992757f6833f33153,dfc4d3c874057638e37a7de992757f6833f33153,Oops: Export _CBLGetReduceFunc fn so CBLJSViewCompiler can call it
snej,2015-03-13 01:27:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b915ac7e257f8efa458979dc563047dbea0cd1e,4b915ac7e257f8efa458979dc563047dbea0cd1e,"Support built-in JavaScript reduce functions like ""_sum"", ""_count"", ""_stats""

Fixes #76"
snej,2015-03-12 23:11:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/747d98d5f1e4f22acb9b179c7a49b113caa3a7f2,747d98d5f1e4f22acb9b179c7a49b113caa3a7f2,"Make 'linked doc' view feature work without having to set 'prefetch'

Fixes #626"
snej,2015-03-12 21:05:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82ec99c7566448a69cece593e8381136c74cd39c,82ec99c7566448a69cece593e8381136c74cd39c,Updated MYUtilities (fixing broken build)
snej,2015-03-12 20:29:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b9a05491d8e616f7aeb66b5fc9f8862161da0764,b9a05491d8e616f7aeb66b5fc9f8862161da0764,Fixed compile errors when logging is disabled (MY_DISABLE_LOGGING)
snej,2015-03-12 18:22:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bd944a17e0fa799222cb4ee29a55e0d3e636195,2bd944a17e0fa799222cb4ee29a55e0d3e636195,"Allow Asserts to be disabled (but we don't do it in our builds)

Defining the preprocessor symbol MY_BLOCK_ASSERTS will cause all Assert
calls to become no-ops, with some small gain to performance and code
size. (Pretty small, I think.)
We do not do this ourselves. I was investigating it as a code-size
optimization that didn't pan out, and I could see a developer wanting to
do it in their app."
snej,2015-03-12 18:18:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a681b10fe0b8a7408eef6bf045c365d953b8ddc,0a681b10fe0b8a7408eef6bf045c365d953b8ddc,"Added (dylib-based) iOS framework target

The ""CBL iOS Framework"" target builds a true dynamic-library framework
for use in iOS 8.
Note: This library isn't fat. I'm actually unsure whether we should
build a fat dynamic library; I don't know if the simulator code will get
stripped out when the developer's app is built.

Changed the way the static library is built, slightly:
* The ""CBL iOS Library"" target builds a static library, but it's no
  longer fat.
* A new ""CBL iOS fat library"" target simply creates a fat version of the
  above static library.
Fixes #597"
pasin,2015-03-12 20:34:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb90cd719a8871d5964aa00532ea2b67953a5d5c,cb90cd719a8871d5964aa00532ea2b67953a5d5c,"Merge pull request #625 from couchbase/feature/issue_624

Prevent CBLReplicator to be released when the bg notification is called"
pasin,2015-03-12 20:34:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/11b85f22bcf2ba1e2e1f4721e728882f589c5933,11b85f22bcf2ba1e2e1f4721e728882f589c5933,"Prevent CBLReplicator to be released when the bg notification is called

Added a little trick to retain itself at the beginning of the method."
snej,2015-03-12 17:51:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad361bac3d6e3f0355da633223a8c117a64cc085,ad361bac3d6e3f0355da633223a8c117a64cc085,"Merge pull request #623 from notjosh/master

Fixed CBLSocketChangeTracker to use correct OS proxy settings"
notjosh,2015-03-12 17:05:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0ba083d20e8101b77c4ae15a73a7a83e19b7e69,f0ba083d20e8101b77c4ae15a73a7a83e19b7e69,CFRelease-ing when we know it's a non-NULL object
notjosh,2015-03-12 10:12:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05d94d825d1a537310144dc8df251c007bf16943,05d94d825d1a537310144dc8df251c007bf16943,Fixed CBLSocketChangeTracker to use correct proxy settings
snej,2015-03-11 22:43:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/789d0d899a2bed9c6e3e21b81af5b633dee267ee,789d0d899a2bed9c6e3e21b81af5b633dee267ee,"Allow JS views to take advantage of documentType optimization

Just set the ""documentType"" property of the design doc's view object,
i.e. next to the ""map"" property."
snej,2015-03-11 22:42:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/281bedf2ba70c887ced4ec7b0b5a7cddc293df75,281bedf2ba70c887ced4ec7b0b5a7cddc293df75,"Oops, fixed iOS build error (""isEqualTo:"" should be ""isEqual:"")"
snej,2015-03-11 21:23:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa0375fc341ec28e0eb612440800e1b80b94aafc,aa0375fc341ec28e0eb612440800e1b80b94aafc,"Implemented View.documentType indexing optimization for SQLite

Added a benchmark too (View_Benchmarks.m)
Fixes #590

WATCH OUT: This optimization won't work correctly in SQLite-based dbs
used with earlier revisions of CBL 1.1. (It does work correctly with
existing 1.0.x dbs that are upgraded by this commit or later.)
The reason is that the existing rows in the 'revs' table don't have the
new 'doc_type' column filled in. I could write code to fill it in when
adding the new column, but I don't think the work is justified since
this will never affect actual users, only a few bleeding-edge adopters."
snej,2015-03-11 19:36:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66c4d797f08a183874650abca509e4bbacbefbac,66c4d797f08a183874650abca509e4bbacbefbac,"Fixed bug in SQLite version of -[CBLView deleteIndex]

It wasn't resetting lastSequence to 0, so subsequent updateIndex calls
wouldn't rebuild the index if the db hadn't changed.
Also added some logging to ForestDB index updating."
snej,2015-03-11 18:27:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5b83af215da6b4c286648b89a48f689e5468b4d4,5b83af215da6b4c286648b89a48f689e5468b4d4,Fixed some intermittent unit test failures
pasin,2015-03-11 00:10:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eda5f905338daba0280c7339bc92624c1aac9f8c,eda5f905338daba0280c7339bc92624c1aac9f8c,Fix using iOS8+ NSHTTPCookie.sessionOnly
snej,2015-03-10 23:10:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7920d7a9a5ba58b7fe072fc102c2d41d56ee9321,7920d7a9a5ba58b7fe072fc102c2d41d56ee9321,"Build fix: mark some vars as __unused since they are in the Release build

Now that we enable NDEBUG in the Release build of CBForest, assert()
calls get disabled, and that means a few variables don't get used."
snej,2015-03-10 22:28:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09cd66e6c93bb27a8db1508144f9bcd6373d28dd,09cd66e6c93bb27a8db1508144f9bcd6373d28dd,"Store values in ForestDB FTS indexes

Fixes #620"
pasin,2015-03-10 21:30:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b31913980f4f14b21deb778d2219b80b571397c,3b31913980f4f14b21deb778d2219b80b571397c,"Merge pull request #621 from couchbase/feature/cblis_coding_style

Fix cblis coding style"
pasin,2015-03-10 21:28:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e0d34432b651a56832266d56b9063cae477616b,3e0d34432b651a56832266d56b9063cae477616b,"Fix cblis coding style

Fixed cblis coding style to have only one coding style and inline with the other source codes the project."
snej,2015-03-10 16:36:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0990b1d6327f715d770e138187f8308818079393,0990b1d6327f715d770e138187f8308818079393,"CBLQueryBuilder detects `type = ""...""` tests and sets view.documentType

This will automatically optimize the view indexing for a lot of common queries.
For #590"
snej,2015-03-10 15:18:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2dd833d837b72e60318942f27a497fab1a2df22,f2dd833d837b72e60318942f27a497fab1a2df22,"[9a0a61e] Added CBLView.documentType, for indexing optimization [API CHANGE]

Also incorporated CBForest fix for serious MapReduceIndex bug.
Fixes #590"
pasin,2015-03-10 18:23:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/579e69d6243f09cf305f997bbe505cf0a266e262,579e69d6243f09cf305f997bbe505cf0a266e262,Add cbl_replicator_cookies database to sgw config
snej,2015-03-10 16:55:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c6e6c7ea0d441b6f04c889d62ecb70159a33566,9c6e6c7ea0d441b6f04c889d62ecb70159a33566,"Merge pull request #609 from couchbase/feature/issue_543_cookie_store

Implement a cookie store per replicator

Fixes #543"
snej,2015-03-06 17:56:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf99389851c82ff6ec9e435afaded9796872c782,bf99389851c82ff6ec9e435afaded9796872c782,Updated forestdb (fixes ARM 32-bit crash)
snej,2015-03-05 22:33:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b59b3ee22545d5b706c1745309916be094139a5d,b59b3ee22545d5b706c1745309916be094139a5d,"Oops, restore rev-tree pruning for SQLite storage

This got lost while refactoring the SQLite code into a CBLStorageEngine."
snej,2015-03-05 21:40:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/29639eeb1651bed1f96b5f71c34782b13cdddaf6,29639eeb1651bed1f96b5f71c34782b13cdddaf6,"View indexing optimization (deleting obsolete rows)

The SQLite query to delete obsolete rows was not using optimal indexes.
This caused performance to degrade linearly with the # of rows.
As part of this fix, periodically run an ""ANALYZE"" command, which
helps SQLite optimize its query planning.

(This is the same series of fixes as on the fix/issue_615 branch, which
is based on 1.0.4; I couldn't merge it because the code has changed and
moved around so much on the master branch.)

Fixes #615"
snej,2015-03-03 22:12:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5cd7bac684712dd69580eeaf4c9c345b3826ed61,5cd7bac684712dd69580eeaf4c9c345b3826ed61,"Fixed: Corrupted data when decrypting >4kbyte attachment as stream

CBLSymmetricKey's -decryptStream method didn't work correctly with data
longer than 4kbytes; past that point some of the cleartext would be
garbage. This affected data read from CBLAttachment.openContentStream
when used in an encrypted database."
snej,2015-03-03 17:44:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7c2c03bc02dd2cc1c02b69a948619311cc3b9ed,c7c2c03bc02dd2cc1c02b69a948619311cc3b9ed,"Merge pull request #616 from couchbase/feature/issue_613_puller_crash

Fix CBLPuller crash (#613)"
pasin,2015-03-03 09:30:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f06efd9821a0573b93140e321835e7f19e6dd172,f06efd9821a0573b93140e321835e7f19e6dd172,"Fix CBLPuller crash

If a permanent error occurrs during bulk downloading, the completion block will get called twice, one from the error itself and the other one from cancelling the request when setting the error (strongSelf.error == error).

To prevent the above to happen, move the removeRequest to the top of the block so that the request will not get cancelled.

#613"
snej,2015-02-26 04:09:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3658764981855da972ce4384ef401984d66850c0,3658764981855da972ce4384ef401984d66850c0,Build fix: Export ivar CBLQueryOptions.indexUpdateMode from dynamic framework
snej,2015-02-26 03:53:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56ec56b1e735b8876435fc8e1353051162475ebe,56ec56b1e735b8876435fc8e1353051162475ebe,Fix build break with 10.9 SDK (.includesPeerToPeer unavailable)
pasin,2015-02-26 01:13:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4231a470d1dffb503940b2951b1424dc29009f76,4231a470d1dffb503940b2951b1424dc29009f76,"Fix CBLCookieStorage per code review

- Removed forward method declaration
- Used fast-forward for..in and CollectionUtil.my_map instead of enumerateObjectsUsingBlock:
- Renamed addCookieHeaderForRequest: to addCookieHeaderToRequest:
- Renamed setCookieForResponse: to setCookieFromResponse:
- Removed one left-off NSLog.
- Removed CBLCookieStorageAcceptPolicyChangedNotification as there is no usage."
pasin,2015-02-26 02:21:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/258557049d42ffb4af005d166084b6ba0e976dff,258557049d42ffb4af005d166084b6ba0e976dff,"Merge pull request #607 from couchbase/feature/inverse_rel

Added CBLModel support for inverse relations [API CHANGE]"
pasin,2015-02-25 21:44:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cfaaf58f1d40abed233cbaea38c8e7f87c88bf04,cfaaf58f1d40abed233cbaea38c8e7f87c88bf04,"Fix CBLCookieStorage integration with replicators issue

- Fixed CBLReplication's deletedCookieNamed: issue that the deletion may not have any effects when deleting cookies before starting the replicator.

- Fixed CBLSocketChangeTracker not using CBLCookeStorage issue.

- Fixed test10_ReplicationCookie Unit test."
pasin,2015-02-25 21:41:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3881c5ea95e95c6ee6f9bfe4eabec6ce4d3e08b7,3881c5ea95e95c6ee6f9bfe4eabec6ce4d3e08b7,"Save cookies into the local checkpoint document

CBLCookieStorage:
- Save cookies into the local checkpoint document instead of into generic local documents.
- Added deleteCookiesNamed: method.
- Implemented CBLCookieStorageCookiesChangedNotification and CBLCookieStorageAcceptPolicyChangedNotification.

CBLDatabase:
- Renamed createLocalCheckpointDocument: method to saveLocalUUIDInLocalCheckpointDocument: to reflect what the method is actually doing.
- Added putLocalCheckpointDocumentWithKey:value:outErrror: method for putting a property into the local checkpoint document.
- Added getLocalCheckpointDocumentPropertyValueForKey: method for getting a property value by key from the local checkpoint document."
pasin,2015-02-24 19:13:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f80d5887701493b3f3c80359ccabb1a1d51673d4,f80d5887701493b3f3c80359ccabb1a1d51673d4,"Integrate CBLCookieStorage to Replicator

- Integrate to CBLRemoteRequest

- Integrate to CBL_Replicator, CBL_Puller, CBLChangeTracker, CBLSocketChangeTracker, and CBLWebSocketChangeTracker

- For CBLSocketChangeTracker and CBLWebSocketChangeTracker: only adding cookies to the request header is supported, no set cookies from the received responses as we can assume that there will be no set-cookie from the responses."
pasin,2015-02-19 03:25:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f0a8270c242a1bd474fa2d84d4e4d8043d8a526,5f0a8270c242a1bd474fa2d84d4e4d8043d8a526,"Add cookie storage and unit tests

* The cookie storage that stores cookies in a local document referenced by a given unique storage key.

* Implement the same feature sets as NSHTTPCookieStorage. But there are 3 features that haven't been supported yet including

1. NSHTTPCookieAcceptPolicyOnlyFromMainDocumentDomain policy
2. setCookies:forURL:mainDocumentURL: method
3. Notifications"
snej,2015-02-20 19:28:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0030a654beced97272896eac849e9728fa8799f,f0030a654beced97272896eac849e9728fa8799f,"Listener publishes Bonjour service over BlueTooth and P2P-WiFi

This allows the HTTP server to be discoverable and reachable over
Bluetooth and 'infrastructure' (no-base-station) WiFi.
(Thanks to @joshblour for the patch!)
For #315"
snej,2015-02-20 01:59:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/04450163b78c1fdab171c8a6dac779500c7351d8,04450163b78c1fdab171c8a6dac779500c7351d8,"Added CBLModel support for inverse relations [API CHANGE]

* -[CBLModel findInverseOfRelation:fromClass:] explicitly computes an
  inverse relation.
* An array-of-models-valued property can be declared as a computed
  inverse relation by overriding +inverseRelationForArrayProperty or by
  implementing +{property}InverseRelation. (See doc-comments)

Fixes #606"
snej,2015-02-19 22:42:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d14c96fed56cd97cc609d411cff1fd8b35c4b66d,d14c96fed56cd97cc609d411cff1fd8b35c4b66d,"Fixed unintentional iOS 8 dependency

Was using constant QOS_CLASS_DEFAULT that was added in the iOS 8 SDK.
Changed back to the equivalent DISPATCH_QUEUE_PRIORITY_DEFAULT.
This should fix the Jenkins build."
pasin,2015-02-18 22:24:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9c373d1c85b52c88553b79e128d7e0ed5ab4ebc,f9c373d1c85b52c88553b79e128d7e0ed5ab4ebc,"Merge pull request #604 from couchbase/fix/lazy_fts

Don't create SQLite FTS or RTree tables until needed"
snej,2015-02-18 21:12:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fecc442f028a0530b3646619db10f54ae1a3c81b,fecc442f028a0530b3646619db10f54ae1a3c81b,"Don't create SQLite FTS or RTree tables until needed

This allows CBL to work with a SQLite build that doesn't include the fts3 or rtree modules
(for example, a stock build of SQLCipher.)
It probably also speeds up database creation somewhat.
Also, I noticed we didn't have any unit tests for geo anymore, so I went back in time and
restored the old one."
snej,2015-02-18 17:03:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/578d270b5c76013629adc3f50a767154c5cbba9e,578d270b5c76013629adc3f50a767154c5cbba9e,"Merge pull request #603 from couchbase/feature/issue_542_live_query

Reset _willUpdate at the top of the update method"
pasin,2015-02-18 02:07:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b1f4d089a86769f0dbeb63434b2e8dc7d6c591d,3b1f4d089a86769f0dbeb63434b2e8dc7d6c591d,"Reset _willUpdate at the top of the update method

Adding a new document which will not get emitted prior to creating a live query object could cause the _lastSequence tracked by the live query object equal to the database lastsequence (e.g. both are one). This could happen easily during the first luanch of the app and the database is fresh.

When the above situation happens, _willUpdate flag will never get reset as the update method will return immedidately before the flag is reset due to an if check at the top. As a result, the live query stops updating itself when there are new documents added to the database as the databaseChanged: call back method will return immdiately when it sees _willUpdate flag = YES.

#542"
pasin,2015-02-18 02:14:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5141052d62b4f0a0a22bd726853689635d308e86,5141052d62b4f0a0a22bd726853689635d308e86,"Call stop LiveQuery at the end of LiveQuery option changed unit test

Not calling stop and removing the observer could cause an exception that an observer is still registered with the live query which has been released to be thrown."
snej,2015-02-17 23:58:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/701bb7a3c50743f16154fc70be1e3eabec1527c6,701bb7a3c50743f16154fc70be1e3eabec1527c6,"Added some missing copyright notices & Apache licenses to comments

...and deleted two obsolete source files (old API tests)"
snej,2015-02-16 23:28:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38ed14147d7a0bb026fc0f65dfb69ac4b21e28e9,38ed14147d7a0bb026fc0f65dfb69ac4b21e28e9,Added Apache license to CBLEncryptionController.m
snej,2015-02-17 20:48:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/640c684e78875300000e7136e93922b66b1e063c,640c684e78875300000e7136e93922b66b1e063c,Merge branch 'feature/encryption'
snej,2015-02-17 20:48:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4266fdf75df04c79efb73501d74ab4df95256193,4266fdf75df04c79efb73501d74ab4df95256193,"Oops, fixed some compile warnings in CBLEncryptionController"
snej,2015-02-17 20:37:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2326d8cd6d5f409b18e6703c56359e68009d988,f2326d8cd6d5f409b18e6703c56359e68009d988,"Merge pull request #600 from couchbase/feature/issue_596_rerun_livequery

Add a method to notify LiveQuery when query options changed

Fixes #596"
pasin,2015-02-17 19:57:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98726d6af9ae6913aafcc34796e1c665f1ac58a4,98726d6af9ae6913aafcc34796e1c665f1ac58a4,"Remove _queryOptionDidChange var per code review

Instead of using _queryOptionDidChange to reset the since-last-sequence-number when querying the view, use the exiting _lastSequence varaible.

This also fixes a side bug that when the view is changed, we should also reset the since-last-sequence-number value before requerying the view as well."
pasin,2015-02-17 00:13:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cffaf9b864c9172f1458d5d9c5cb56f17a75f918,cffaf9b864c9172f1458d5d9c5cb56f17a75f918,"Add a method to nofiy LiveQuery when query options changed

Added a method called 'queryOptionsChanged', used for notifying LiveQuery that query params were changed and LiveQuery should re-run the query from scratch.

#596"
snej,2015-02-17 17:01:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8aa4d49544b0e9122e645e811a3325bf294959c9,8aa4d49544b0e9122e645e811a3325bf294959c9,"Merge pull request #601 from notjosh/patch-1

Fixed typo in CBLView documentation"
notjosh,2015-02-17 10:25:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8a7d16184b5cd018effde9557b6389d83b8745a,f8a7d16184b5cd018effde9557b6389d83b8745a,Fixed typo in CBLView documentation
pasin,2015-02-16 23:25:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/064236c659dd754d83def3e45a61f7a26af173f0,064236c659dd754d83def3e45a61f7a26af173f0,"Merge pull request #595 from gitter-badger/gitter-badge

Add a Gitter chat badge to README.md"
snej,2015-02-16 23:05:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/035f28dfc962e3e3d959728747514ec5f24566d1,035f28dfc962e3e3d959728747514ec5f24566d1,"Added CBLEncryptionController to the ""Extras"" folder."
snej,2015-02-16 21:51:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e36f87c149c02ff958b29461dd35ed135e368ae0,e36f87c149c02ff958b29461dd35ed135e368ae0,Merge branch 'master' into feature/encryption
snej,2015-02-16 21:14:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c45468b55ed334409f0b01a86c7915ebdd1de7b,0c45468b55ed334409f0b01a86c7915ebdd1de7b,"Fixed crash doing async query of view that emits doc as value

The CBLQueryRows' _storage ivars still point to background-thread
objects, and need to be moved to point to the equivalent ones on the
querying thread, otherwise FMDB ends up complaining about cross-thread
access."
snej,2015-02-16 19:01:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/562f7c5f15c3d1e0f347fc8a5c4942a07afafb99,562f7c5f15c3d1e0f347fc8a5c4942a07afafb99,"Added ""mock encryption"" support to SQLite storage

...and more encryption unit tests."
snej,2015-02-14 19:51:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b01a5634c7cde4670830cac092a3512117b0b8cb,b01a5634c7cde4670830cac092a3512117b0b8cb,"Merge pull request #598 from couchbase/feature/issue_584_stale

Add stale parameter support on view query requests

Fixes #584"
pasin,2015-02-13 20:47:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36b7fd6314fa39755ad148d9fb216e5d2e85f4ca,36b7fd6314fa39755ad148d9fb216e5d2e85f4ca,"Add stale parameter support on view query requests

- Based on CouchDB spec (http://wiki.apache.org/couchdb/HTTP_view_API), the stale option can be 'ok' or 'update_after'.

- If there is no stale specified or if the view has never updated its index before (first time), the index will be updated first. The result will be queried and returned after the index is updated.

- If stale=ok is set, the view will not update its index and the result will be returned as is.

- If stale=update_after, the view will return the result and then update its index after.

#584"
snej,2015-02-13 17:49:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5232db5f1d98363d81551da50a3dce346364abb8,5232db5f1d98363d81551da50a3dce346364abb8,Opening encrypted db now fails with 501 if not supported
snej,2015-02-13 01:16:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/387110d06dc4b82a2b8411b3b014f1e1d9fc70db,387110d06dc4b82a2b8411b3b014f1e1d9fc70db,"Attachment encryption support [API CHANGE]

* Added CBLSymmetricKey, an API for AES-256 encryption.
* CBL_BlobStore can now be encrypted with a CBLSymmetricKey.
* It's not possible to get the file paths of attachments when the blob
  store is encrypted (because the files are encrypted.)
* Added public method -[CBLAttachment openContentStream] which returns
  an opened NSInputStream to read the attachment from.
* Updated doc-comment of CBLAttachment.contentURL to indicate that you
  probably shouldn't use it."
snej,2015-02-12 20:05:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6c09edcb3cd3c5de44c4d348cd7117a71423012,a6c09edcb3cd3c5de44c4d348cd7117a71423012,"[Re]starting work on database encryption. [API CHANGE]

* Added -[CBLManager registerEncryptionKey:forDatabaseNamed:].
* SQLite storage now calls ""pragma key"" if a key is provided.
  Of course this will be a no-op unless the app is built with SQLCipher.

Based on old commit a8e98bf (not a direct cherry-pick, as code has
moved around too much since then.)"
gitter-badger,2015-02-12 18:27:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1eade6f4de95616954502201d9cd42b3c2c3e2ee,1eade6f4de95616954502201d9cd42b3c2c3e2ee,Added Gitter badge
snej,2015-02-12 06:39:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/041e3b0b0f5eeffb4eae482403b8c121bd417e3e,041e3b0b0f5eeffb4eae482403b8c121bd417e3e,"Added ""nullable"" annotations to public interfaces

Xcode 6.3 adds new attributes on method/function parameters and return
values that specify whether object references are allowed to be nil.
This improves bridged Swift interfaces by getting rid of unnecessary
optionals, and also helps Obj-C code by triggering an error if you try
to pass a (constant) nil value to a parameter that doesn't accept it.

This is wrapped in an #if test so it's backward compatible."
snej,2015-02-12 07:02:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0aa5bdc123328fe80e21b6c2cc72022f3dd30d33,0aa5bdc123328fe80e21b6c2cc72022f3dd30d33,Fixed a bug found by the Xcode 6.3 static analyzer
snej,2015-02-12 00:51:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b7f39d607b25a979c57d9a38e4f385597cf1dbc,6b7f39d607b25a979c57d9a38e4f385597cf1dbc,"Fixed unit tests not being able to run on iOS devices

The CBForest tests are considered ""logic tests"" because they don't have
an associated iOS app executable to run in; and that means they can't
run on a real device.
To resolve this I made the CBL iOS Test App scheme stop invoking the
CBForest tests. Instead, I added the CBForest test classes' source code
to the CBL iOS Tests target so they'll run along with the rest of the
CBL unit tests.
This should fix the Xcode unit-test bot (fingers crossed!)"
snej,2015-02-11 19:37:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40c8ec621f3d0a0afe55a15c2420feabde91e0cb,40c8ec621f3d0a0afe55a15c2420feabde91e0cb,"Reimplemented iOS file protection, more simply

Turns out all I need to to is set the file protection mode of the
CBLManager's directory, and all files/directories created within it will
inherit that protection. So I don't have to worry about setting the
protection for SQLite, ForestDB and attachments.
Fixes #594"
snej,2015-02-11 20:38:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30d012dfef407c2b14e36bbc8e16fd148e085060,30d012dfef407c2b14e36bbc8e16fd148e085060,"ForestDB option flags weren't getting set properly when opening a db

I think the only side effect of the bug was that opening a db read-only
would actually open it writeable."
snej,2015-02-11 20:28:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c73f92b79fb8d490f971cbee57b05056b11d8b22,c73f92b79fb8d490f971cbee57b05056b11d8b22,"Resolved new compile warnings from Xcode 6.3b5

(Nothing wrong with our code; just the compiler being pickier.)"
snej,2015-02-11 18:37:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ecfce41bfeee62762c8786fee0fac2ea8d5bfc0c,ecfce41bfeee62762c8786fee0fac2ea8d5bfc0c,Split CBLQueryEnumerator and CBLQueryRow into their own source files.
snej,2015-02-11 16:43:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1e325b2054722de3b68c0ab9d0e412ee31564f3,a1e325b2054722de3b68c0ab9d0e412ee31564f3,Further CBForest indexing optimizations
snej,2015-02-11 00:10:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5c9635ece1053e94e98d3402e7bf03b033aa7cc1,5c9635ece1053e94e98d3402e7bf03b033aa7cc1,"Don't compile CBLView.m as Obj-C++

This was accidentally left on from earlier in the forestdb branch's history.
It causes a dependency on libc++.dylib, and link errors in apps not built with it."
snej,2015-02-10 18:30:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9289e59980f8c44b8c9bfc8722d45d05ea52227,a9289e59980f8c44b8c9bfc8722d45d05ea52227,"Optimization to ForestDB view index updating (2x speedup!)

Also added some C++ exception handling to query iterators."
snej,2015-02-10 17:52:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d7ce70ad37cb052467c72ff6e0e3cfb2f1caf42,2d7ce70ad37cb052467c72ff6e0e3cfb2f1caf42,Fixed compile error in Release build (regression from 56ef7a2)
pasin,2015-02-10 02:16:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5262c8ee67d4969f277b92ec180e0b2d3639adae,5262c8ee67d4969f277b92ec180e0b2d3639adae,"Merge pull request #589 from couchbase/fix/256_update_doc

Allow a doc to be updated more than once in a single transaction"
snej,2015-02-10 01:42:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56ef7a202480885ad33a27e299b667fbcdb86f9a,56ef7a202480885ad33a27e299b667fbcdb86f9a,"Allow a doc to be updated more than once in a single transaction

This didn't use to work correctly because the CBLDocument's currentRevision didn't
update to the new revision after the first update; then the second update would use
an obsolete _rev and fail with a conflict.
Added code to inform the CBLDocument immediately, even during a transaction, but
prevent the change notification from being posted till the transaction ends.
Fixes #256"
snej,2015-02-09 23:07:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1ff760f430b324f39f2b94a0c30d567f1076d62,a1ff760f430b324f39f2b94a0c30d567f1076d62,"Made limit and offset work correctly for queries with postFilters

Fixes #574"
snej,2015-02-09 21:26:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d26d3b842c9fb9b5c99cea6870effb9182dd6cf0,d26d3b842c9fb9b5c99cea6870effb9182dd6cf0,"Fixed compile errors in CBLIncrementalStore.m

Illegally assigning an id to a BOOL.
For some reason the iOS unit-test target doesn't complain about this, while the Mac one does,
even though they have the same warning flags configured.
Was unable to figure out why."
snej,2015-02-09 20:06:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9980b359d61de8a69e3c7810fe5b99bb2ddbb53,a9980b359d61de8a69e3c7810fe5b99bb2ddbb53,"Merge pull request #582 from couchbase/feature/issue_571_cblis_query

CBLIncrementalStore - Utilize CBLQueryBuilder and add relationship search (#571)"
snej,2015-02-09 19:14:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/29f45861646b7a1c0b6433595c375697334b1880,29f45861646b7a1c0b6433595c375697334b1880,Better error handling if a ForestDB index fails to open (fixes #588)
snej,2015-02-09 17:44:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/69378af6c63dfcd6465b28c94a1868e4235c538b,69378af6c63dfcd6465b28c94a1868e4235c538b,"Fixed a leftover reference to obsolete 'attachments' table in SQLiteStorage

Fixes #585"
pasin,2015-02-06 22:09:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a958d8b8cb4add786c622c3e573c768c9759ce6,9a958d8b8cb4add786c622c3e573c768c9759ce6,"Fix per code review (CBLIncrementalStore)

- QueryBuilder caching in the fetchByUsingQueryBuilderWithPredicate mthod.
- Handle invalid data type when converting from CBL value to Core Data value
- Use CBLJSON to serialize cache key.

#571"
pasin,2015-01-21 23:49:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb8f632c9cee221598232afc059757080233f8e7,bb8f632c9cee221598232afc059757080233f8e7,"CBLIncrementalStore - Utilize CBLQueryBuilder and add relationship search

- Use CBLQueryBuilder to fetch documents with predicates that do not have relationship keypath, otherwise fall back to the old way of using view and post filtering.
- Scan the original predice to generate a new predicate with template and a variable dictionary.
- Refator executeRequest:request:context:error method by seperating out each type of requests into its own method.
- Update unit tests

#571"
snej,2015-02-06 20:38:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cfb80632332e2ab8cf63776facc167e5c1208ec2,cfb80632332e2ab8cf63776facc167e5c1208ec2,"Fixed a build problem when archiving on iOS

""can't open file: libTokenizer-iOS.a (No such file or directory)"""
snej,2015-02-06 18:36:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd20d33b4bc759bd76e3c84d0ed6e5dfbe313819,dd20d33b4bc759bd76e3c84d0ed6e5dfbe313819,"Sped up heartbeat unit tests (from 22 sec to 5)

Tests were slow because heartbeat is restricted to at least 5 sec
and the tests need to wait for a total of 4 heartbeats.
I ""fixed"" this by making the min-heartbeat configurable in debug
builds and lowering it to 0 during the tests, so they can use a
heartbeat of 1 sec."
snej,2015-02-06 18:21:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a805b3c6d767dca631c9712f38b10556a6818a4d,a805b3c6d767dca631c9712f38b10556a6818a4d,Updated forestdb
snej,2015-02-06 01:29:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3fad527e3ce2f97c341150a57428f20f83ff0b2f,3fad527e3ce2f97c341150a57428f20f83ff0b2f,Unit tests now run each test once with SQLite and once with ForestDB.
snej,2015-02-06 01:17:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/910323c0b4ac619b99136009b2067553d70601d8,910323c0b4ac619b99136009b2067553d70601d8,Made -test_IndexingOlderRevision work correctly with ForestDB
snej,2015-02-06 01:07:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d2397fdb0c83f35602a1fcad1a26cd163da8aa92,d2397fdb0c83f35602a1fcad1a26cd163da8aa92,"Add libCBLSQLiteStorage to CouchbaseLite.framework

Don't make apps have to change their build process -- include the
SQLite storage library in the framework so it's always available.
We can take it back out later when ForestDB becomes commonly used."
snej,2015-02-06 01:05:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be507827f8f2b09c645872e5c174d95c25902db2,be507827f8f2b09c645872e5c174d95c25902db2,View bug fixes
snej,2015-02-05 19:53:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28fafacfd9bf975506e004a32eac445c57250b82,28fafacfd9bf975506e004a32eac445c57250b82,"Hand-merged 2b465f7, which got lost during the previous merge from master

This is the ""Fix for view not indexing older revisions""."
snej,2015-02-05 19:47:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cc57ba297fc69975de6b3fcf67f14f0a315f8e5d,cc57ba297fc69975de6b3fcf67f14f0a315f8e5d,"Backed out WIP (cab5436)

This should have been committed on a branch..."
snej,2015-02-05 19:43:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8861cbcc0869e66b02c56a99624a9b3487170a5,f8861cbcc0869e66b02c56a99624a9b3487170a5,"Merge branch 'master' into forestdb

Conflicts:
	Source/API/CBLQuery.m
	Source/API/CBLView.m
	Source/CBLDatabase+Internal.m
	Source/CBLMisc.h
	Source/CBLView+Internal.h
	Unit-Tests/QueryBuilder_Tests.m
	Unit-Tests/ViewInternal_Tests.m"
snej,2015-02-05 19:04:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aeb996a79b3c38be10245f9c3d68dc518ce76693,aeb996a79b3c38be10245f9c3d68dc518ce76693,"Fixed query builder sometimes creating redundant views

The algorithm that generates a unique name for a view (based on its
predicate/expression/etc) was not reliably producing the same output,
so sometimes the builder would create a new view identical to an
existing one.
To fix this, stopped using NSArchiver to generate binary data from the
objects, and instead use JSON encoding from the string-formatted versions
of the expression/predicate.
Broke this out into a new function CBLDigestFromObject in CBLMisc so
Pasin can use it in the incremental-store implementation."
snej,2015-02-03 18:14:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cab54361b831111418b0248f0ca6f2a67c4614b4,cab54361b831111418b0248f0ca6f2a67c4614b4,WIP: Updating SQLite schema to optimize conflict handling & indexing #581
pasin,2015-02-03 08:59:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e9978572cbbf84249529f02daf0d0a42f853043,6e9978572cbbf84249529f02daf0d0a42f853043,"Merge pull request #583 from couchbase/feature/issue_576

Fix fault has not been fired when adding a new doc from sync"
pasin,2015-02-03 08:57:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cab0902406504373b4669ccd31e0e0e89492e06b,cab0902406504373b4669ccd31e0e0e89492e06b,"Fix fault has not been fired when adding a new doc from sync

* Fixed NSIncrementalStore not firing fault when adding a new document from sync. The solution (calling willAccessValueForKey: method with nil value on an NSManagedObject) to ensure that fault is firing was suggested by https://github.com/couchbase/couchbase-lite-ios/pull/383 posted by @Rostmen. The solution is inline with what Apple suggests in the willAccessValueForKey: API doc.

* Fixed crash when deleting an nsmanaged object.

#576"
snej,2015-02-02 23:39:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c8086703d2afb05a6629c812fea40294b421e3f,8c8086703d2afb05a6629c812fea40294b421e3f,"CBLQueryBuilder fix for descending sort descriptors

Fixes #580"
pasin,2015-02-02 22:56:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf5ebaaeed0803239af33d5733e45eb7a03b4185,bf5ebaaeed0803239af33d5733e45eb7a03b4185,"Add unit test to test CBLQueryBuilder sorting

Add test00_Sorting to QueryBuilder_Tests. As this test is currently failed so I commented it out for now."
snej,2015-02-02 22:27:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2b465f77852239335b8a743d4254c546d92ae719,2b465f77852239335b8a743d4254c546d92ae719,"Fix for view not indexing older revisions

The view indexer needs to look at new deletions,
since a deletion of one branch of a conflict will cause the
other branch to become current and indexable.
Fixes #578"
snej,2015-02-02 20:25:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e951e2712859f82f6cd6098f0474474c8357a47,2e951e2712859f82f6cd6098f0474474c8357a47,"Fixed crash with unregistered map blocks in design-doc based views

This was a bad interaction between JS-based views and the 1.0.3(?)
optimization that indexes multiple views at once. When the optimization
looks up the associated views (with the same name prefix), their map fns
weren't being read+compiled from the design doc, triggering an assertion
failure.

To fix this I made the CBLView.mapBlock accessor look up and compile
a design-doc-based map function if none was set already.

Fixes #577"
snej,2015-01-30 21:17:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16c15608ea7743692bade086dc8b2b0e80f03d04,16c15608ea7743692bade086dc8b2b0e80f03d04,Updated to latest forestdb
snej,2015-01-30 21:13:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16b30515b3321f9dd75df4a4958a8bc2cb5e90ae,16b30515b3321f9dd75df4a4958a8bc2cb5e90ae,Updated to latest CBForest
snej,2015-01-20 23:58:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a89bd4a44c1d80085d70b10c9fb36f683807d94,6a89bd4a44c1d80085d70b10c9fb36f683807d94,"Slight optimization to SQLite storage

* When inserting existing revs (-forceInsert:), if the document ID is new,
  don't bother looking for the winning revision.
* Fixed a static-analyzer warning, but I don't think it was an actual problem.
* Some code cleanup."
pasin,2015-01-29 19:53:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6bd2fc9b38109e8c423378236052f2a9570e79f9,6bd2fc9b38109e8c423378236052f2a9570e79f9,"Fix prefixMatchLevel doesn't have any effect

Set prefixMatchLevel to the options object."
snej,2015-01-29 04:37:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3134230fbab290a0c5efb24498bfb2ec0944f05c,3134230fbab290a0c5efb24498bfb2ec0944f05c,"Fixed: CBLQuery.inclusiveStart/End didn't have any effect

Fixes #575"
snej,2015-01-23 23:36:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c79263c10632c501fe31344408ba740dbf53af52,c79263c10632c501fe31344408ba740dbf53af52,"Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	CouchbaseLite.xcodeproj/xcshareddata/xcschemes/CBL iOS Test App.xcscheme
	Source/CBL_Router+Handlers.m"
snej,2015-01-23 23:24:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a2a2eea107dd3d3fb0cb2d419c6d97a51e7b7b8,7a2a2eea107dd3d3fb0cb2d419c6d97a51e7b7b8,"Storage implementations now linked into separate static libraries

There are two important new build products: libCBLSQLiteStorage.a and
libCBLForestDBStorage.a. Any app using Couchbase Lite *MUST* link one
or both of those! If not, it will build but will throw an exception
as soon as it tries to open or create a database.
(This only applies to iOS! Mac OS X builds both storage engines into
CouchbaseLite.framework.)
Fixes #572"
snej,2015-01-20 19:58:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf48b03439dae84ecc063ab04b0e169fbd197ec8,cf48b03439dae84ecc063ab04b0e169fbd197ec8,Documentation (and slight refactoring) of internal storage APIs.
snej,2015-01-20 01:19:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4513efb4d8f058f25aaab8c4b87264a4dc8e859e,4513efb4d8f058f25aaab8c4b87264a4dc8e859e,"Made default db storage class configurable

There's a (private) property CBLManager.storageType that can be set to
  @""SQLite"" (the default) or @""ForestDB"".
Also, the user default @""CBLStorageType"" can be set to one of those
  strings, providing the default value of that property."
snej,2015-01-19 20:07:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0358d8e7280d4463e203fbe51f427081c60a4b4,f0358d8e7280d4463e203fbe51f427081c60a4b4,SQLite optimization: Use a table per view instead of a shared 'maps' view
snej,2015-01-19 20:07:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70c389fbde7fbceec7b8ca6570724744c1958882,70c389fbde7fbceec7b8ca6570724744c1958882,Fixed build problems on iOS.
snej,2015-01-17 05:40:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c7c12f8a942bdd5e057a37e64ab273e26b2946a,7c7c12f8a942bdd5e057a37e64ab273e26b2946a,Open an existing db using whichever storage engine created it.
snej,2015-01-17 00:03:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd0cc858fb5775c25339bdeeeb66008c48ed2672,bd0cc858fb5775c25339bdeeeb66008c48ed2672,Implemented CBL_SQLiteViewStorage. All tests pass!
snej,2015-01-16 16:56:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fb6bece823542279ec92a331ef73e56bc422e1d0,fb6bece823542279ec92a331ef73e56bc422e1d0,"WIP: Adding CBL_SQLiteStorage

Database tests pass. Haven't implemented view storage yet."
snej,2015-01-14 23:24:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/847a1c6db3ee0bcfe47707d7423839eddae02991,847a1c6db3ee0bcfe47707d7423839eddae02991,"Cleanup, and fixed remaining tests. All tests pass on OS X!"
snej,2015-01-14 21:51:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c8ab7bc0675a4488b4f51127f0af45a17097a49,2c8ab7bc0675a4488b4f51127f0af45a17097a49,WIP: Created CBL_ViewStorage. Project builds!
snej,2015-01-14 03:48:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/959a99d8c573e414acb85bd83b9e55c1fb6176ac,959a99d8c573e414acb85bd83b9e55c1fb6176ac,"WIP: Added CBL_Storage, moving all ForestDB code to it.

So far have ported everything but views/queries.
Obviously the project doesn't build right now..."
snej,2015-01-13 01:12:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e3f81517e5b1b87d440c9c938412fbaba5368c5d,e3f81517e5b1b87d440c9c938412fbaba5368c5d,"Implemented _changes?feed=eventsource in router

This is functionally identical to feed=continuous except it returns the
changes in event-stream format that can be parsed by a JavaScript browser
EventSource object. See:
https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events

This has been supported by CouchDB for a while.

/_active_tasks also supports this feed type.

Fixes #514"
snej,2015-01-12 19:53:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efb4661ce6f805729dd8fa95fbdcc715ebb1de38,efb4661ce6f805729dd8fa95fbdcc715ebb1de38,"Added CONTRIBUTING.md (Thanks, Traun!)"
snej,2015-01-12 19:28:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57d72c2413f578a2d7a34ea1a9409f56a8adfd9a,57d72c2413f578a2d7a34ea1a9409f56a8adfd9a,"Ported db-upgrade test, and corrected makeRevisionHistoryDict test"
snej,2015-01-10 01:51:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8519a8dff66d613f72394206c21dc5f11df418b,b8519a8dff66d613f72394206c21dc5f11df418b,"Fixed false failure in test_CBLGetHostName

It was requiring that the hostname be of the form ""xxx.local"", which
obviously isn't always true."
snej,2015-01-10 01:26:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/17591f1aea245b6df56a2fde9dd5a6a3d21ee5df,17591f1aea245b6df56a2fde9dd5a6a3d21ee5df,Updated to latest forestdb.
snej,2015-01-10 01:17:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3fc6c82c4799aa2b47893995ca088884bd396c62,3fc6c82c4799aa2b47893995ca088884bd396c62,Changed SG server URL for unit tests from jens.local to localhost
snej,2015-01-10 00:15:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/131d94b40fa18a9d953794dce1f4b5f3a9315e4e,131d94b40fa18a9d953794dce1f4b5f3a9315e4e,Fixed broken build (Bad merge in Replication_Tests.m)
snej,2015-01-10 00:03:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36599a76f059b6cc38b59e02c7d1194aca0e8c5b,36599a76f059b6cc38b59e02c7d1194aca0e8c5b,Run the CBForest unit tests as well.
snej,2015-01-09 23:47:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a05136434ac8c05dab524bd4e5ba330d7ec7646c,a05136434ac8c05dab524bd4e5ba330d7ec7646c,Uncommented -test_Attachments and got it to work
snej,2015-01-09 23:26:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3fdde02aae51f3c928a8ca2a7f088e25a9905bfb,3fdde02aae51f3c928a8ca2a7f088e25a9905bfb,Got the refactored unit tests running on ForestDB.
snej,2015-01-09 22:24:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/946f3ee9bcb8cec855d67c6f339d5cafe36947e8,946f3ee9bcb8cec855d67c6f339d5cafe36947e8,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/API/APITests.m
	Source/API/CBLManager.m
	Source/API/ReplicationAPITests.m
	Source/CBLDatabase+Internal.h
	Source/CBLDatabase+Internal.m
	Source/CBLReplicator_Tests.m
	Unit-Tests/ChangeTracker_Tests.m
	Unit-Tests/DatabaseInternal_Tests.m
	Unit-Tests/JSViewCompiler_Tests.m
	Unit-Tests/Router_Tests.m
	Unit-Tests/ViewInternal_Tests.m
	Unit-Tests/View_Tests.m"
snej,2015-01-09 19:24:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/078494fdf54199ed1d06ef35a0e76d8d2ca0f646,078494fdf54199ed1d06ef35a0e76d8d2ca0f646,"Merge master as of 12/22/14 into forestdb

Merged commit e512547d9b73c496a285e4a9b8ef949e4d56ef51 ... this is immediately before the unit test
refactoring, which I want to tackle as a separate merge, so I'm only going up to here first.

Conflicts:
	Source/CBLDatabase+Internal.m
	Source/CBL_Pusher.m"
snej,2015-01-09 19:00:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c35b29d4c66e17baa5380ceecab2aef2bab9ddbc,c35b29d4c66e17baa5380ceecab2aef2bab9ddbc,"Merge pull request #562 from couchbase/feature/issue_406

Import last seq for replication when replace a db (#406)"
snej,2015-01-09 18:59:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/feaf20c44ea68a1b7b9757ae762f0a8e788409ad,feaf20c44ea68a1b7b9757ae762f0a8e788409ad,"Small fix to previous commit (PR #561)

* Make it work when the model class has been registered as an NSString
  instead of a Class
* Unit test for the above
* Tweaks to doc-comments and code style"
pasin,2015-01-09 18:53:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c8bf393d8c260e8c091f0621e361f5fd3f3b4e8,7c8bf393d8c260e8c091f0621e361f5fd3f3b4e8,"Add error param to createLocalCheckpointDocument

#406"
snej,2015-01-09 18:40:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7fdf96acbc1e59827dcb24a79925ef01db2b8c0b,7fdf96acbc1e59827dcb24a79925ef01db2b8c0b,"Merge pull request #561 from sarbogast/master

Set new CBLModel's ""type"" property if specified in CBLModelFactory"
snej,2015-01-09 00:57:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d368525dbd298de4b2cc4eb8c062e2d2a751bd9b,d368525dbd298de4b2cc4eb8c062e2d2a751bd9b,"Oops, CBLJSViewCompiler got removed from some targets it should be in"
snej,2015-01-09 00:46:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5eb237c27467e2c5d06a5867c96a27f428e27ab,a5eb237c27467e2c5d06a5867c96a27f428e27ab,Ported the remaining unit tests.
snej,2015-01-09 00:13:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf6eb7c25248bda11d6d5ae147074188d27fcb03,bf6eb7c25248bda11d6d5ae147074188d27fcb03,"Getting the unit tests to run on a real iOS device

* Code-sign the test bundle and fix a dead-stripping linker error
* Set up the right env variables in the scheme's Debug section
* Make the SSL ChangeTracker test ignore the SSL hostname mismatch in
  the server cert
* Fewer iterations in DB ConcurrentWrites test; it takes too long on a
  device
* Prevent a crash on test failure"
pasin,2015-01-07 01:07:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a2edce709c36e4fbd7d326c7cc012c200dd9371,8a2edce709c36e4fbd7d326c7cc012c200dd9371,"Import last seq for replication when replace a db

* When replacing a database, creating a local checkpoint document containing the replacing database's localUUID (ID before getting replaced).

* When a replicator fetches remote checkpoint document to setup the last sequence info, if the last sequence is nil, try to get the imported last sequence which is obtained by using the localUUID stored in the local checkpoint document if it's available.

* Added test11_ReplicationWithReplacedDatabase unit test.

#406"
snej,2015-01-08 23:23:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fbea4fd5087fb530c0b6f3919ce1d3152b5570d4,fbea4fd5087fb530c0b6f3919ce1d3152b5570d4,"Ported more unit tests

CBLFacebookAuthorizer
CBLPersonaAuthorizer
CBLQuery_KeyPathForQueryRow"
snej,2015-01-08 22:58:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d9e03a42493aae27d58e1aeda9f8adae94d268d3,d9e03a42493aae27d58e1aeda9f8adae94d268d3,"CBLDatabase shouldn't run/post async stuff after it's been closed

The unit tests were running into some race conditions where a CBLDatabase
is closed, but then immediately thereafter either posts a change
notification or runs an async block. The consumers thereof would then
try to use the closed database and fail an assertion in FMDB."
snej,2015-01-08 22:00:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea1ee8ed60c34fb205a5bcd00247a9f68a1c0a83,ea1ee8ed60c34fb205a5bcd00247a9f68a1c0a83,"Port more unit tests to XCTest

Added:
IncrementalStore_Tests
JSON_Tests
JSViewCompiler_Tests
Misc_Tests"
snej,2015-01-07 19:13:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91d283078dcfdbed15c58c648310f26525e2441e,91d283078dcfdbed15c58c648310f26525e2441e,"Made the SSL-based unit tests portable.

Also ensured that all the replication/changetracker tests will give up
immediately if CBL_TEST_SERVER or CBL_SSL_TEST_SERVER is set to an
empty string; this helps when running unit tests on the train!"
snej,2015-01-06 21:49:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1731b28f2b0ce6b6839c46cf64f5d1e1ea62d89d,1731b28f2b0ce6b6839c46cf64f5d1e1ea62d89d,"Make replication tests portable

* Replication tests now all use Sync Gateway, not CouchDB.
* There's a new directory Unit-Tests/Server that contains SG config
  files, certs, and Walrus databases for the dbs needed by the tests."
snej,2015-01-06 21:50:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5eda3ab813eec773d8e594e415de0ec6580651a1,5eda3ab813eec773d8e594e415de0ec6580651a1,"Fixed bogus 405 error from push replication with createTarget=YES

Fixes #560"
snej,2015-01-05 23:09:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff129acfcf718e144c9fdb5ee7119d1ebbf4b4db,ff129acfcf718e144c9fdb5ee7119d1ebbf4b4db,Add Xcode 'CouchbaseLite.xccheckout' file to source control
pasin,2015-01-06 01:44:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb660623758ff23ec64a3f95161f085d6c61997a,cb660623758ff23ec64a3f95161f085d6c61997a,"Merge pull request #558 from couchbase/feature/issue_521_bugfix

Fix awakeFromInitializer document assertion fail (#521)"
pasin,2015-01-02 07:46:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a61cea03968efe0397043710ddff894a5c8440a1,a61cea03968efe0397043710ddff894a5c8440a1,"Fix awakeFromInitializer doc assertion failure

* Change initWithDocument to initWithDocument:orDatabase so that we could set the database object when initializing a new fresh model.

* Add AwakeFromInitializer unit test to Model_tests.m.

#521"
snej,2015-01-03 01:21:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9430f708c8b191be2e96a0dfce9c8b0d855715ba,9430f708c8b191be2e96a0dfce9c8b0d855715ba,"API-doc tweaks: Show full class description at top of page, not summary."
snej,2015-01-05 19:28:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1fe5fe0267302607eeba3935673453a73f41beb,c1fe5fe0267302607eeba3935673453a73f41beb,"Fixed cert pinning on iOS; changed interpretation of ""pinnedCert"" property

A 20-byte value of ""pinnedCert"" no longer denotes the SHA-1 digest of a
cert's public key; instead it denotes the digest of the cert _itself_.
This is because I couldn't find a good way to determine the key digest
on iOS."
snej,2014-12-22 23:16:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f207549809ebb720fe2f075fadd5f8b0871be3f,6f207549809ebb720fe2f075fadd5f8b0871be3f,"Created XCTest unit tests for all the existing tests.

They're attached to the ""iOS Empty App"" and ""CBL Mac"" schemes."
snej,2014-12-22 18:26:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e512547d9b73c496a285e4a9b8ef949e4d56ef51,e512547d9b73c496a285e4a9b8ef949e4d56ef51,"Merge pull request #434 from couchbase/feature/issue_426

Add heartbeat parameter to _changes REST API"
pasin,2014-12-20 04:14:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23a4e46ca04035614582ae69e71048105a899f04,23a4e46ca04035614582ae69e71048105a899f04,"Merge pull request #557 from couchbase/feature/unpushed

Adds methods to CBLReplication to determine doc IDs of unpushed changes. (For #442)"
snej,2014-12-20 02:36:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/132f89ff6551a26986aa8827675c6959998a7491,132f89ff6551a26986aa8827675c6959998a7491,"Fix link error regression in ""CBL iOS Test"" target"
pasin,2014-08-27 23:44:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/97bb52bc3e5dcf40961823b3aebf0b9e41af8b3a,97bb52bc3e5dcf40961823b3aebf0b9e41af8b3a,"Add heartbeat parameter to _changes REST API

* Add heartbeat (CRLF ping) to _changes REST API
in continuous and longpoll mode. The heartbeat
parameter will accept a value in millisecond and
the value needs to be more than zero.

* Set the minimum heartbeat to 5 seconds.

* Update unit tests accordingly."
snej,2014-12-19 22:46:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35febf58180d27b85ebd9aaa7a779a73b0a391ea,35febf58180d27b85ebd9aaa7a779a73b0a391ea,"Merge pull request #555 from couchbase/feature/issue_308

Rename the attachment store folder before delete (fixes #308)"
snej,2014-12-19 22:43:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/183d2dd3847c8b6838b761888b6fc4d7454cd727,183d2dd3847c8b6838b761888b6fc4d7454cd727,Prevent build from breaking on earlier Xcode without NS_DESIGNATED_INITIALIZER
pasin,2014-12-16 23:05:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f59cf063a2ccfc6181996687559245b780569b8b,f59cf063a2ccfc6181996687559245b780569b8b,"Rename the attachment store folder before delete

When deleting a database, renaming the attachment store folder if it exists and delete it in a dispatch queue. #308."
snej,2014-12-19 22:19:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a8edb9f4e8e6c7d71a9f3de3da35e8b157ef7b7,7a8edb9f4e8e6c7d71a9f3de3da35e8b157ef7b7,"Merge pull request #533 from couchbase/feature/issue_521

Remove all init methods from CBLModel API"
snej,2014-12-19 21:38:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fe092a93e5b8b5dce390d299bcd032f5bb645a0e,fe092a93e5b8b5dce390d299bcd032f5bb645a0e,"Back out single-object-prelink for iOS libraries

Good news: this will get rid of the 100+ link warnings when building an
  iOS app using Couchbase Lite.
Bad news: It reopens #413, the problem that internal symbols are exposed
  in the library, which can cause duplicate-symbol errors when building
  an app using libraries (like yajl) that CBL also uses.
Fixes #460"
snej,2014-12-19 19:24:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a2d5853b78972405f916972422571f0fc7c94a7,9a2d5853b78972405f916972422571f0fc7c94a7,"Fix for view index being invalidated when database is reopened

Fixes #540"
snej,2014-12-19 18:41:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f4bc829e086a2fb4b4f7271be53f5210e8d79b8,7f4bc829e086a2fb4b4f7271be53f5210e8d79b8,"Moved some full-text indexing code down into CBForest, for portability"
snej,2014-12-18 23:10:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8746761b62a3f913f082c13f3f64cb0aa5540961,8746761b62a3f913f082c13f3f64cb0aa5540961,"View index now supports duplicate keys emitted by the same doc

(This worked in 1.0.x, but didn't work earlier with ForestDB because
each index entry would end up with the same key.)"
snej,2014-12-18 20:22:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c5be054370a45c9a726498410c95dc73da565fe0,c5be054370a45c9a726498410c95dc73da565fe0,"Full-text query rows need to match _all_ the search words

...for compatibility with SQLite's FTS syntax.
Also this just seems to make more sense.
(Eventually we should add AND and OR keywords.)"
snej,2014-12-18 19:33:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/309e5db104c53736bf145a921b82a56e2dc46e55,309e5db104c53736bf145a921b82a56e2dc46e55,"Merge pull request #556 from couchbase/feature/issue_544

#544 Don't check for reachability for non-continuous replication"
pasin,2014-12-18 02:43:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e36b6ed30cf347978f70d6e626fea98348aa3e7,8e36b6ed30cf347978f70d6e626fea98348aa3e7,"Not check for reachability for non-continuous replication

* Rework per code review

* Not check for reachability for non-continuous replication as
the reachability for non-existent host sometimes first report
that the host is unreachable, then a moment later say it's reachable."
snej,2014-12-18 17:45:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f370fba77ed73b27dcdf5d2e08c934c617e7926,1f370fba77ed73b27dcdf5d2e08c934c617e7926,"API: Full-text tweaks

* Removed CBLQuery.fullTextRanking and .fullTextSnippets properties.
* Updated doc-comments, removing some outdated info.
* Match text ranges reported in the REST API are now character-based not byte-based."
snej,2014-12-18 01:59:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0deb94b7b5827aedabbb95658a6b3096b180a6b0,0deb94b7b5827aedabbb95658a6b3096b180a6b0,"Full-text indexing improvements

* Re-implemented CBLFullTextQueryRow.fullText
* Removed CBLFullTextQueryRow snippet API (it's unimplemented)
* Improved handling of contractions and curly-quotes
* Pruned English stop-word list (removed a lot of non-noise words)"
snej,2014-12-17 18:23:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a67b536a18494214f2f43a4650279766d905b9b,1a67b536a18494214f2f43a4650279766d905b9b,Updated to latest ForestDB
snej,2014-12-17 00:07:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/611491fdeb86de1739eb2fd9ae40ccc21625f26f,611491fdeb86de1739eb2fd9ae40ccc21625f26f,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/API/APITests.m
	Source/API/CBLQuery.m
	Source/CBLDatabase+Insertion.m
	Source/CBLDatabase+Internal.h
	Source/CBLDatabase+Internal.m
	Source/CBLReplicator_Tests.m
	Source/CBLView+Internal.m
	Source/CBL_View_Tests.m
	Source/CouchbaseLitePrefix.h
	vendor/fmdb"
snej,2014-12-16 22:23:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ba7dd4b3f49f1ecbab88c49103abfdd5f92af854,ba7dd4b3f49f1ecbab88c49103abfdd5f92af854,"Add CBLQueryBuilder.h to framework headers

and #import it in CouchbaseLite.h"
snej,2014-12-16 21:53:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f1a15ac44f28fb38c3ebbeef21a7276161c3f96,2f1a15ac44f28fb38c3ebbeef21a7276161c3f96,"CBLQueryBuilder: Fixed bugs with CONTAINS, added unit test for IN"
snej,2014-12-16 21:51:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ee8e85a884be21c495729ef4448695305eacff9,9ee8e85a884be21c495729ef4448695305eacff9,Silenced two minor static analyzer unused-assignment warnings
snej,2014-12-16 00:10:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d9e62ae9a5c4231b51a872764560779ffa767602,d9e62ae9a5c4231b51a872764560779ffa767602,"CBLQueryBuilder: Fixed case where illegal OR conjunction was accepted

Also fixed some glitches in the explanation string."
snej,2014-12-15 23:02:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b95fef80015a2e00fa72ffc6a1c9919010c8bcd,0b95fef80015a2e00fa72ffc6a1c9919010c8bcd,"CBLQueryBuilder: Simple reduce support (one numerically reduced value)

Supported functions are count, sum, min, max, avg, stddev, median.
See TestCase(CBLQueryBuilder_Reduce) for an example of usage."
snej,2014-12-15 17:26:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c4fb6627313334384958d01a21789209da73863,4c4fb6627313334384958d01a21789209da73863,"CBLQueryBuilder: Reject more invalid predicates

* Predicates that don't specify any view key
* Expressions that contain both doc properties and $-variables
* Comparison predicates where both sides use variables

Added a unit test for checking known illegal predicates.

Also don't turn off inclusiveEnd in a query without an endKey."
snej,2014-12-13 01:06:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92d0b7586ca3ff0e9a75942006cbd57918df53c9,92d0b7586ca3ff0e9a75942006cbd57918df53c9,"CBLQueryBuilder: Allow OR, NOT operators if args are not $-variable-based"
snej,2014-12-13 00:26:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc60a87a27103ea8d0390d344d30770d8e498add,fc60a87a27103ea8d0390d344d30770d8e498add,Another attempt to fix build error with MYAnonymousIdentity
snej,2014-12-13 00:07:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cd16a599422d5f76292ac5b0281689637d463e28,cd16a599422d5f76292ac5b0281689637d463e28,Updated MYUtilities
snej,2014-12-12 23:41:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a047889bc6e12a602ae0e1fa1a83f032596fbf8,2a047889bc6e12a602ae0e1fa1a83f032596fbf8,Speculative fix for LiteServ build error on Jenkins bot
snej,2014-12-12 22:57:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2bc39cf8791809fdecb70629855a63f70199091,f2bc39cf8791809fdecb70629855a63f70199091,"CBLQueryBuilder fixes/improvements

* Wrong query was generated for some cases that have compound keys: should have been using prefix-match.
* Now using Query.prefixMatchLevel for the above queries, and for string prefix matching.
* explanation method now prints square brackets for arrays, not curly braces.
* Generated view names start with ""builder-"", not ""planned-"".
* Added simple unit test for explanation method."
snej,2014-12-12 05:49:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74352af62f29b510f880b3b0ab4767a81d0f9a9c,74352af62f29b510f880b3b0ab4767a81d0f9a9c,"Removed CBLJSViewCompiler dependency on Log function

The Log functions are internal to the frameworks, not exported, so
outside code like CBLJSViewCompiler (which is compiled into an app)
shouldn't use them."
snej,2014-12-11 21:57:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0725799933e1de4da34efc5966fd573edac570e7,0725799933e1de4da34efc5966fd573edac570e7,"Merge pull request #425 from featurist/master

streamed requests return a proper response"
snej,2014-12-11 20:15:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a50ffd872a0d48284e12d9c13a37a2fd74df620,4a50ffd872a0d48284e12d9c13a37a2fd74df620,"API: CBLQueryPlanner -> CBLQueryBuilder. Added to CBL framework.

This class used to be provided in source form in the Extras folder, but
is now part of the framework.
Also added is an enhancement that allows sortDescriptors to be
expressed as strings instead of NSSortDescriptors."
snej,2014-12-11 00:59:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80dc7fd9bb00227ab70b75c5968398510e07aa36,80dc7fd9bb00227ab70b75c5968398510e07aa36,"Made CBL_View_FullTextQuery unit test not fail

...by removing tests for functionality that no longer exists with ForestDB."
snej,2014-11-24 20:01:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b1c013c5ce75fe546da5e5e635f17e754b59d8be,b1c013c5ce75fe546da5e5e635f17e754b59d8be,Use updated CBForest enumerator API.
snej,2014-12-10 23:03:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1eddcc9a895543c115ded2159b313e60432e201d,1eddcc9a895543c115ded2159b313e60432e201d,"Allow CBLQueryPlanner to create its own view

This simplifies the API and allows multiple planner instances to share
the same view even if they provide different queries (as long as the
map functions are the same.)"
snej,2014-12-10 19:24:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f6d4ba9019e971a03317feba2040508eb374f29,6f6d4ba9019e971a03317feba2040508eb374f29,"Renamed ""Demo-"" dirs to ""Test-"" to avoid confusion"
snej,2014-12-09 19:15:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd28768a79509434bfa28ade0195de1ebde15d42,bd28768a79509434bfa28ade0195de1ebde15d42,"API: Added CBLReplication.serverCertificate

This allows the client to capture the server's SSL certificate, and
later pin the replication to that same cert. It can also examine the
certificate's metadata if it wants."
snej,2014-12-09 19:12:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35795b08be33e645e2ac211470ee684eca7d1802,35795b08be33e645e2ac211470ee684eca7d1802,"Oops, added missing ""}"" from last commit :("
snej,2014-12-08 23:15:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ac3a008942c953f17bd133a3441509ee948d2bd,2ac3a008942c953f17bd133a3441509ee948d2bd,"Added CBL_Replicator option to pin to a specific SSL cert

Set the option ""pinnedCert"" to the data of the desired certificate, or
to the SHA-1 digest of its public key. (A string of hex is OK too.)
Any non-matching SSL server cert will be rejected."
snej,2014-12-08 19:59:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e0dc7f30d959958069f28d2515498e3bbfcd2e5,1e0dc7f30d959958069f28d2515498e3bbfcd2e5,"Fixed: ""Cookie:"" headers added to replication by app get lost

Fixes #532"
snej,2014-12-08 19:46:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1db5f655b102efecf1eb1758e11381b5a3bac705,1db5f655b102efecf1eb1758e11381b5a3bac705,"API: Added CBLListener support for easily using an anonymous SSL identity

LiteServ uses this if you give it the ""--ssl"" flag.
Also added the ability for the Mac test app to run the listener
framework's test cases."
snej,2014-12-03 17:46:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e930bf1732ff51fc0f76cd3ada3fb6252577017,4e930bf1732ff51fc0f76cd3ada3fb6252577017,"-[CBLListener URL] now uses a Bonjour (.local) hostname instead of a raw IPv4 address

This will make the URL useable over Bluetooth or ad-hoc WiFi networks.
I've verified that the correct hostname is used on iOS simulator, iOS device and Mac OS."
snej,2014-11-21 17:16:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60b1b1a9a1d421c6d68bcfbc64d04f93d7d0b097,60b1b1a9a1d421c6d68bcfbc64d04f93d7d0b097,Use KeyStores in db file for local docs and db metadata
pasin,2014-11-20 23:50:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc2cff788d8d19199cf9e3fbcc913e2736f24976,fc2cff788d8d19199cf9e3fbcc913e2736f24976,"Move awakeFromInitializer to the end of CBLModel initWithDocument:

Move awakeFromInitializer to the end of CBLModel initWithDocument: so that document data if available can be accessed."
snej,2014-11-20 07:23:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dbf00aeaf28f0fbbb8e58fdcb05886d23a1e33d8,dbf00aeaf28f0fbbb8e58fdcb05886d23a1e33d8,"Merge pull request #525 from couchbase/feature/issue_516

Fix #516 Create and Register log() function"
pasin,2014-11-20 01:29:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18461e0ab9b804d2328edb4e08599cc32ec5be90,18461e0ab9b804d2328edb4e08599cc32ec5be90,"Remove all init methods from CBLModel API

* Removed all init methods from CBLModel public api.

* Added modelForNewDocumentInDatabase: (CBLDatabase*)database in replacement of the initWithNewDocumentInDatabase: method.

* #521"
pasin,2014-11-20 01:23:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd90db0c9a2d6765f36460b7fdae1b82d33fe168,dd90db0c9a2d6765f36460b7fdae1b82d33fe168,"Fix crash in CBLModel when setOnMutate is not defined in CBLJSONEncoding submodel

The issue happens when CBLJSONEncoding objects in an array property do not have setOnMutate: method implemented. Need to check if the setOnMutate selector exists before calling. #517"
snej,2014-11-18 21:12:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60ea9b299d1e5357f78c3648c7e49f4208a1ccf4,60ea9b299d1e5357f78c3648c7e49f4208a1ccf4,"Updated to new CBForest multi-key-value-store API

(Not yet using multiple stores per file, though.)"
pasin,2014-11-13 22:55:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3aa03f9a05f59525ddb0bd4497c615656fe4a86b,3aa03f9a05f59525ddb0bd4497c615656fe4a86b,"Fix #516 Create and Register log() function

Create and register log function, supported by couchdb so that the JS map function including log function calls can be run inside CBL Lite without any issues."
snej,2014-11-11 23:07:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/73152960c042db8aaee1e13d85601675770cc0c0,73152960c042db8aaee1e13d85601675770cc0c0,Updated to latest ForestDB.
snej,2014-11-11 01:42:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66f135011d178ed8b7193dc8fa03e4ac20b6912f,66f135011d178ed8b7193dc8fa03e4ac20b6912f,Fixed a compile error due to a CBForest change in the last commit
snej,2014-11-11 00:46:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7168f02b100ebfbf446952af43c41f382b27ad3d,7168f02b100ebfbf446952af43c41f382b27ad3d,"WIP: Basic geo-indexing support. No queries yet

For #485"
snej,2014-11-10 23:48:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9c0034d6d5f2192885729a7d7960760ae612977,a9c0034d6d5f2192885729a7d7960760ae612977,"Merge pull request #519 from couchbase/feature/issue_517

Propagate changes in CBLJSONEncoding array to its parent model"
pasin,2014-11-10 19:13:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/658f6226510e151714bbfa75778b41df29dc9a2e,658f6226510e151714bbfa75778b41df29dc9a2e,"Propagate changes in CBLJSONEncoding array to its parent model

Fixed #517. Propagate changes in CBLJSONEncoding array to its parent model so that the model can detect changes."
snej,2014-11-04 06:03:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18b01900f610a294077ee478e6dcf20a515af213,18b01900f610a294077ee478e6dcf20a515af213,"Merge pull request #513 from couchbase/feature/issue_512

API: Renamed -[CBLDocumentModel CBLDocument:didChange:]"
pasin,2014-11-04 05:18:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/625c3dbd86cf8e83acaddf1b5a3ec59cbee9354c,625c3dbd86cf8e83acaddf1b5a3ec59cbee9354c,"Fix conflict between function and class name in Swift

Declaring the delegate method the same name as the class name leads to a conflit between function and class name in Swift.

There is also the discussion about the same issue here : https://devforums.apple.com/message/1002447#1002447."
snej,2014-10-30 19:48:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b3fca59e88b2281802425fa0c8d3659c8186a6a,7b3fca59e88b2281802425fa0c8d3659c8186a6a,"Workaround + speculative fix for messed-up db revision tree

* -winningRevIDOfDocNumericID: now signals a SQLite error with an outStatus parameter.
  Before it would just return nil, just as though the doc had no revisions. This might have
  been what caused the situation in #509 to occur.
* If an added rev turns out to already exist, clear the parent rev's 'current' flag just to be
  sure. This helps fix #509 by correcting the broken rev tree.

Fixes #509 (I think)"
snej,2014-10-30 18:21:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ccd92843acb0004dc2eaa8ed306018cebc60fce,1ccd92843acb0004dc2eaa8ed306018cebc60fce,"Fixed: WebSocket connecting to wrong port if HTTPS URL had no port number

Fixes couchbase/sync_gateway#472"
snej,2014-10-29 18:20:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48cb51f87de4ef17b64d8ed117b046fe412e85c9,48cb51f87de4ef17b64d8ed117b046fe412e85c9,"Merge pull request #507 from olivierpascal/bug/issue_506

Renamed classes and ext. vars to avoid collisions."
snej,2014-10-29 18:17:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18fa9e2f421a3341f902c63a7025338087232d54,18fa9e2f421a3341f902c63a7025338087232d54,"Speculative but harmless fix for crash in CBLBatcher

Fixes #508 (I think)"
snej,2014-10-28 22:44:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00983a1e06e10dd2a872acaa446a725abc9a855d,00983a1e06e10dd2a872acaa446a725abc9a855d,"Use CBForest's descending option for view & all_docs queries

...instead of enumerating forwards and then reversing the array."
snej,2014-10-28 00:20:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b4d2e6854fe378334eea2c18f94064b4db6c953,3b4d2e6854fe378334eea2c18f94064b4db6c953,"Updated forestdb to latest master

(Was previously on 1.0b branch)"
snej,2014-10-27 20:00:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28b886e1f576bba4040a3c4f1c975daaa7e5ec51,28b886e1f576bba4040a3c4f1c975daaa7e5ec51,Oops: Added an #import to fix iOS build break
snej,2014-10-25 00:21:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d450ce93059c680b3cee0200ef2278ea43f988a3,d450ce93059c680b3cee0200ef2278ea43f988a3,Merge branch 'master' into feature/unpushed
snej,2014-10-24 23:35:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/090a27989e9bbdf574f5b84015a8bcc8e4d7c4b4,090a27989e9bbdf574f5b84015a8bcc8e4d7c4b4,"Limit puller memory use, by throttling ChangeTracker

With a fast network the ChangeTracker can read changes much faster than
the puller can add them to the database. This caused a lot of JSON
change descriptions and CBL_Revisions to pile up in memory.
I fixed this by allowing the puller to pause the ChangeTracker when it
has too many revisions pending. The ChangeTracker implementations
stop reading from their sockets while paused.
Fixes #502"
snej,2014-10-24 18:49:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8afb76111ef0aacaebfe8d41db7c30a04f3fafb3,8afb76111ef0aacaebfe8d41db7c30a04f3fafb3,"Added a constant for the ""websocket"" replicator option key"
pasin,2014-10-24 22:12:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e1d4d9ee228c5461a278a14bb808a9c36c2f4001,e1d4d9ee228c5461a278a14bb808a9c36c2f4001,"Add CreateIdenticalParentContentRevisions Test and reorganize conflict tests

* Added CreateIdenticalParentContentRevisions Test

* Created Conflict Test section and move conflict Tests together

* Add API_Conflict, API_Resolve_Conflict, and API_CreateIdenticalParentContentRevisions to TestCase(API)"
snej,2014-10-23 20:11:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f3fd3b4b7124398a73f6782207629b3bbbbfd42,9f3fd3b4b7124398a73f6782207629b3bbbbfd42,"FMDB: Fixed locking calls to avoid a deadlock

Fixes #500 (I think)"
snej,2014-10-23 16:55:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7774787577ae4b55915c0d1d3686806b3ca328b0,7774787577ae4b55915c0d1d3686806b3ca328b0,"Restore the ""no map block registered"" assertion when it makes sense

Minor amendment to bd377ff -- if the view that triggered the index
update has no map block set, we should fail instead of just skipping
it, because that genuinely is an error (otherwise we'd go on to query
it and just return missing or obsolete data.)
For #438"
snej,2014-10-23 16:47:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74c8572f9139f404d017bd99487db57f4511bcb4,74c8572f9139f404d017bd99487db57f4511bcb4,"CBL_Shared fixes

* -isDatabaseOpened: and -countForOpenedDatabase: weren't thread-safe.
* During many unit tests the FMDatabase didn't have a lock at all, so
  lock-related stuff wasn't being exercised enough.
Potentially for #500"
snej,2014-10-23 16:42:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd377ff85b8e96853b6f664529da30788309c4cd,bd377ff85b8e96853b6f664529da30788309c4cd,"When indexing a view group, skip views with no map block registered yet

Fixes #438"
snej,2014-10-22 20:52:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0bdb041e851087e17d7d65e430397f132fe26f74,0bdb041e851087e17d7d65e430397f132fe26f74,"Re-implementing full-text search. (Still incomplete)

Many parts of it aren't re-implemented yet:
* No query syntax; the query string is just a list of words
* Query implicitly ANDs the words together
* No snippets available
* Not optimized; performance may suck.
* No way to specify language; hardcoded to English

For #484"
snej,2014-10-21 23:22:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb701e67cbeee870adface41b51865dba9c7f931,cb701e67cbeee870adface41b51865dba9c7f931,"Merge pull request #501 from couchbase/feature/issue_499

Rework error status when no matched selectors in CBLRouter"
pasin,2014-10-21 22:20:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e50446f7ef75f8f8a35a0d75436a5040ad6c609,9e50446f7ef75f8f8a35a0d75436a5040ad6c609,"Rework error status when no matched selectors in CBLRouter

In case of no mached selectors, the CBLRouter will return 405 (method not allowed) if there is an alternative method available otherwise returning 404 (not found). This implementation is in sync with the current SG's implementation. #499"
pasin,2014-10-20 22:23:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/edfa4dc74e5658beac8b9a93ad5c38a308b43eb5,edfa4dc74e5658beac8b9a93ad5c38a308b43eb5,"Add a test to verify if the puller works correctly with DB Validation

Added CBL_Puller_DatabaseValidation to verify if the puller works
correctly when there is a database validation set.

The result showed that the puller works fine. When there were more
than one docs pulled together and one failed the validation,
the rest of the docs were inserted to the database correctly.

#496"
snej,2014-10-17 18:51:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1015cb3ae1b18c497cad03372af5e8b9f939a2e,d1015cb3ae1b18c497cad03372af5e8b9f939a2e,"Speculative fix of a crash in RevTree::compact()

Fixes #495 (I think)"
snej,2014-10-16 21:25:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2893f4ce88eefe5ca3344d2697ca887678ff81c4,2893f4ce88eefe5ca3344d2697ca887678ff81c4,"Router: Fixed a hang handling DELETE /db

It also incorrectly returned 200, not 404, if db didn't exist.
Fixes #493"
snej,2014-10-16 20:07:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fcdf862eacdbdefddc21e905130eb2e390bf253,9fcdf862eacdbdefddc21e905130eb2e390bf253,Unit tests: More assertions around closing temp dbs
tleyden,2014-10-16 00:48:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/06a753be527516e1e3c8ca1e9a0511512a527618,06a753be527516e1e3c8ca1e9a0511512a527618,Add link to CRM demo app
snej,2014-10-15 22:37:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/425746d200052fafa541decdb0932b2c351c8b5b,425746d200052fafa541decdb0932b2c351c8b5b,"Change SSL settings to TLSv1, to avoid SSLv3 POODLE vulnerability

Fixes #492"
snej,2014-10-15 22:35:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e5f785f847003f043666c9ae1d18506c7b98261,0e5f785f847003f043666c9ae1d18506c7b98261,"Remove unused-but-confusing duplicate GCDAsyncSocket.m from project

Both CocoaHTTPServer and WebSocket use GCDAsyncSocket, so there are two
copies of the source code in the tree, but we only build one of them
(obviously) so that should be the only one in the project."
snej,2014-10-14 01:18:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4884ae7a55a7dfef77b31ebc91fe707b5fe3a8e2,4884ae7a55a7dfef77b31ebc91fe707b5fe3a8e2,"ForestDB logging, routed through existing logging infrastructure"
snej,2014-10-13 20:25:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec8b53f17d5e91d117cd05325678266aeb8c7d2d,ec8b53f17d5e91d117cd05325678266aeb8c7d2d,Tweaked LiveQuery unit test to avoid occasional timing-based failures
snej,2014-10-13 20:21:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8746f9f325d5872f9f9d8275c151db27eadb4eb5,8746f9f325d5872f9f9d8275c151db27eadb4eb5,"Don't convert CoreData relation names to lowercase

(Fix by ManuTroquet, pull-request #461)"
snej,2014-10-13 20:09:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c8f06990c4c052d49291fee8a4080cc50a72348,7c8f06990c4c052d49291fee8a4080cc50a72348,"CBLJSViewCompiler target no longer links static JavaScriptCore framework

It complicates the build, and is no longer needed on iOS 7+.
Fixes #451"
snej,2014-10-13 20:00:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0cdb1f3d16613e190260133411414c9ff7d189b8,0cdb1f3d16613e190260133411414c9ff7d189b8,Fixed a typo in a doc-comment in CBLReplication.
snej,2014-10-10 21:45:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f20387ebfb98fefeb60041056c15dad50a0f57f4,f20387ebfb98fefeb60041056c15dad50a0f57f4,"Fixed insertion-speed regression with SQLite 3.8 (i.e. Yosemite)

The new query planner in SQLite 3.8 was using the very inefficient index
revs_cur_deleted for the query that finds a doc's winning revision,
which made the query very slow. Fixed it by replacing that index with
a souped-up version of the existing revs_current.
Fixes #487"
snej,2014-10-10 19:10:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1de02466a8a2497b070091ef85ca5b58faeaa7a4,1de02466a8a2497b070091ef85ca5b58faeaa7a4,"Fix db import SQLite error by defining a collation

SQLite seems to want the REVID collation to be defined for some reason,
even though it shouldn't need it, so I defined a bogus one.
Fixes #486 (I think; I couldn't reproduce it myself)"
snej,2014-10-10 19:07:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b86bea1eea6188c1fd46428fa18c7a6f92450cb7,b86bea1eea6188c1fd46428fa18c7a6f92450cb7,"Fixed a regression in CBL_Attachment handling encoded attachments

(Caused during the ForestDB conversion; no need to back port to master.)"
snej,2014-10-10 17:28:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/877fe2e65d441c8fe9568480f138a237cce3be68,877fe2e65d441c8fe9568480f138a237cce3be68,"Make sure pre-existing view indexes are invalidated

...because index keys changed their format in CBForest."
snej,2014-10-09 22:50:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/65b2983116fadb3dd8421eccb5ae62032b7d748a,65b2983116fadb3dd8421eccb5ae62032b7d748a,"Floats can now be used in view keys.

Fixes #483. (The fix is actually in CBForest.)"
snej,2014-10-09 18:29:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/15e51086b9cedc0963212fb6a2a31f9bc72f811a,15e51086b9cedc0963212fb6a2a31f9bc72f811a,"Improvements to runloop task scheduling & live queries

* CBLLiveQuery no longer makes redundant queries when the database
  hasn't changed since the last query.
* -[CBLQuery waitForRows] no longer waits in the default runloop mode,
  as this can cause nasty re-entrant calls when user events arrive.
  Instead, we use a custom runloop mode.
* Added a utility method -[CBLDatabase waitFor:] to encapsulate this
  improved waiting behavior.
* Don't use dispatch-queue mode on the main thread. In dispatch-queue
  mode, operations like waitForRows are impossible because you can't
  do the equivalent of spinning a nested runloop.
Fixes #477"
snej,2014-10-02 21:48:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1da8f4707170467482609fe9d54fd7e278043635,1da8f4707170467482609fe9d54fd7e278043635,"API: Added CBLLiveQuery.updateInterval

For couchbaselabs/couchbase-lite-api#111"
snej,2014-10-02 16:14:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e8802cd89ea214272fe67e5f4b9391df6f210aa,4e8802cd89ea214272fe67e5f4b9391df6f210aa,"Updated test API_ConcurrentWrites (diagnosing forestdb bug MB-12287)

Also pick up the foresdb fix for that bug"
snej,2014-10-01 05:53:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/253d33186fc18db5a5381f5690f4996ac6e6a98c,253d33186fc18db5a5381f5690f4996ac6e6a98c,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/API/APITests.m
	Source/API/APIViewTests.m
	Source/API/CBLManager.m
	Source/API/CBLQuery.m
	Source/API/CBLView.m
	Source/CBLDatabase+Insertion.m
	Source/CBLDatabase+Internal.m
	Source/CBLReplicator_Tests.m
	Source/CBLView+Internal.h
	Source/CBLView+Internal.m
	Source/CBL_Database_Tests.m
	Source/CBL_View_Tests.m
	vendor/fmdb"
snej,2014-09-30 22:43:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a988c3dcc8e96d615293f6ecc2a975a3d53311f3,a988c3dcc8e96d615293f6ecc2a975a3d53311f3,"CBJSONEncoder: Use 6 decimal places, not 16, for 32-bit floats"
snej,2014-09-30 22:21:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a7c93af22ec84114187343b9ccfd2c9b65902075,a7c93af22ec84114187343b9ccfd2c9b65902075,Merge branch 'master' into feature/unpushed
snej,2014-09-30 20:06:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77309d253a2541a7746274da41284f47da41db46,77309d253a2541a7746274da41284f47da41db46,"Unit tests: make certain databases are closed at end of each test

Leaving a db open between tests can cause problems if it's reopened by
another test and already has things like docs or validations in it.

Conflicts:
	Source/CBLReplicator_Tests.m"
snej,2014-09-26 00:25:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8bd61f22a85e1025b23d124f6f590fdeb9b63171,8bd61f22a85e1025b23d124f6f590fdeb9b63171,"Merge pull request #473 from mglasgow/bug-updateViewShouldUpdateLiveQueries

CBLLiveQuery will now refresh after the view's mapBlock is changed.

Fixes #471"
mglasgow,2014-09-25 02:09:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d5853e1730569e99860d0a903480a6a47efba34,3d5853e1730569e99860d0a903480a6a47efba34,CBLView now post as notification when the mapblock changes of an existing view. CBLLiveQuery now listens for this and updates itself accordingly. unit test included
snej,2014-09-23 21:29:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8f12c39c21b457f180e009186f475ba0c075336,f8f12c39c21b457f180e009186f475ba0c075336,"Merge pull request #470 from mglasgow/bug-newMapBlockHasLessRows

view reset should not count initial deletes as changes, otherwise total ..."
mglasgow,2014-09-23 20:32:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d1ea45f471d4a8a81b0f54b07afb0e2e0dc2f86,2d1ea45f471d4a8a81b0f54b07afb0e2e0dc2f86,update CBLView setMapBlock: to post kCBLDatabaseChangeNotification. this causes any live queries to be updated
mglasgow,2014-09-23 19:45:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5a9809504b63753dce56fcf2d770f4dea2e956aa,5a9809504b63753dce56fcf2d770f4dea2e956aa,"view reset should not count initial deletes as changes, otherwise total docs might end up as negative if new view mapblock emits less rows than the previous"
snej,2014-09-22 22:51:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d513c5c264b1b38e88fc13de7b76c6c06988d151,d513c5c264b1b38e88fc13de7b76c6c06988d151,Fixed the CBL_Database_Purge test case
snej,2014-09-22 21:50:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/735472e3af57ed564cfdad91f8168753fc21d4a0,735472e3af57ed564cfdad91f8168753fc21d4a0,Fixed a warning during validation
snej,2014-09-22 21:06:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/227b4c18d5c345c34e00316684fa160011882212,227b4c18d5c345c34e00316684fa160011882212,"Fixed bugs creating large numbers of generations

* After gen 20 an older revision would be purged, moving the Revision
  objects around and invalidating a pointer.
* The revid::expand method in CBForest had two severe bugs,  handling
  revs with generations bigger than 58, another bigger than 127.

Fixes #458"
snej,2014-09-19 17:57:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c1b2e1ca6cd3dd28775b98b150a77fcba3efd39,3c1b2e1ca6cd3dd28775b98b150a77fcba3efd39,"Merge pull request #462 from ManuTroquet/NSAttributeType

[coredata] NSDecimalAttributeType change type NSNumber to NSDecimalNumber"
snej,2014-07-10 21:22:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f06b374a304b3230ea4fa492402917c962a3d99,8f06b374a304b3230ea4fa492402917c962a3d99,Improved SQLite busy handling by using an in-memory lock
pasin,2014-09-13 02:49:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4bf12b8abcdb2da61671ea181a4d89875ce42707,4bf12b8abcdb2da61671ea181a4d89875ce42707,"Merge pull request #455 from couchbase/feature/issue_316

#316 Add 'type' document property to the CBLModel"
pasin,2014-09-13 02:46:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57ca1f20f75c16079a7411541ef35dfb73653c5d,57ca1f20f75c16079a7411541ef35dfb73653c5d,"#316 Move the property to the protected section

Move the property to the protected section and improve comment per code review."
snej,2014-09-12 23:38:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98bf57bda08d70e3ce09896d39b47da9eef7bca4,98bf57bda08d70e3ce09896d39b47da9eef7bca4,Merge branch 'master' into feature/unpushed
snej,2014-09-12 23:37:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da6f39f9f296c27a778d39768d80203883fad782,da6f39f9f296c27a778d39768d80203883fad782,API: Added -[CBLReplication isDocumentPending:]
snej,2014-09-12 22:12:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d4554de6554323a13f4f5377138dc15d704d9294,d4554de6554323a13f4f5377138dc15d704d9294,"Renamed the .mm files back to .m

Git didn't understand about the initial renaming to .mm, so it thought
they were different files. That made merging from master a lot harder!
So I've renamed them back to .m, and added custom ""-x objective-c++""
compiler flags in the build stages source-file list."
snej,2014-09-12 21:51:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33ba42838c095aafdb650b4f5e1201efcfaeceea,33ba42838c095aafdb650b4f5e1201efcfaeceea,Merge branch 'master' into forestdb
snej,2014-09-12 21:49:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d0dd281f2eb30e213d44d54e9feaf028e1090cb,0d0dd281f2eb30e213d44d54e9feaf028e1090cb,"Unit tests for CBJSONEncoder

Also added some improvements to handling of booleans vs. small integers."
snej,2014-09-12 21:27:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21ba6a18438f870f8cd4444840fb20fbc6b6950e,21ba6a18438f870f8cd4444840fb20fbc6b6950e,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/API/CBLQuery.m
	Source/API/CBLView.m
	Source/CBLDatabase+Insertion.m
	Source/CBLDatabase+Internal.h
	Source/CBLDatabase+Internal.m
	Source/CBLView+Internal.h
	Source/CBLView+Internal.m
	Source/CBLView+Querying.m
	Source/CBL_Database_Tests.m
	Source/CBL_Router+Handlers.m
	Source/CBL_View_Tests.m
	Source/CouchbaseLite.exp"
snej,2014-09-12 21:10:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48e51c5b82f35348eb04d3dc73b1af0706075f36,48e51c5b82f35348eb04d3dc73b1af0706075f36,"Back-ported CBJSONEncoder from the forestdb branch

This replaces CBLCanonicalJSON. It's a faster encoder that uses the C
yajl library."
snej,2014-04-28 20:06:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f1ef76cf35458226c56badb8654fc5338ba59c0,3f1ef76cf35458226c56badb8654fc5338ba59c0,"Finally converted CBLQueryOptions from a struct to an Obj-C class.

Cherry-picked from forestdb branch.

Conflicts:
	Source/API/CBLQuery.m
	Source/CBLDatabase+Internal.h
	Source/CBLDatabase+Internal.m
	Source/CBLView+Internal.h
	Source/CBLView+Querying.m
	Source/CBL_Database_Tests.m
	Source/CBL_Router+Handlers.m
	Source/CBL_View_Tests.m
	vendor/CBForest"
snej,2014-09-12 18:59:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8d989072e8043023fc01e4f22073ff041616198,b8d989072e8043023fc01e4f22073ff041616198,"Merge pull request #445 from couchbase/feature/issue_435

Fix #435 Missing the last group when there is no reduce"
snej,2014-09-12 17:38:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78f3d85803a73872aab814f2763f197ec17d6217,78f3d85803a73872aab814f2763f197ec17d6217,"Updated submodule URLs for cbforest, forestdb

Need to use https: scheme because ""git@..."" doesn't work for non-public
repositories."
snej,2014-09-12 16:07:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0afc16ea4c2e55bb3f132441f1e00c3ca0a3d653,0afc16ea4c2e55bb3f132441f1e00c3ca0a3d653,Updated cbforest repo URL
snej,2014-09-12 16:01:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a38a24d529d2f3ef8cd70192ce406bda44320ba1,a38a24d529d2f3ef8cd70192ce406bda44320ba1,"Post-merge fixes

* Fixed duplicate source files in iOS target in pbxproj file
* Removed obsolete source files that reappeared in the merge
* Fixed 32-bit compile warning in CBLView.mm
* Fixed submodule URLs"
pasin,2014-09-12 14:25:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/95e97a735466b5fd5cefcd4e42d89f75f1899cd1,95e97a735466b5fd5cefcd4e42d89f75f1899cd1,"#316 Add 'type' document property to the CBLModel

* Add 'type' document property to the CBLModel.

* Add API_ModelTypeProperty test to ModelTests."
snej,2014-09-12 00:10:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3bd87bb1b7991886a2aec7bff3b49f076941f7d8,3bd87bb1b7991886a2aec7bff3b49f076941f7d8,Updated forestdb
snej,2014-09-11 22:51:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f6d57bbbfc5efceb08249aafbc21773a33407341,f6d57bbbfc5efceb08249aafbc21773a33407341,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/API/APITests.m
	Source/API/CBLDatabase.m
	Source/API/CBLQuery.h
	Source/API/CBLQuery.m
	Source/API/CBLReplication.h
	Source/API/CBLView.m
	Source/API/ReplicationAPITests.m
	Source/CBLCanonicalJSON.h
	Source/CBLCanonicalJSON.m
	Source/CBLDatabase+Insertion.m
	Source/CBLDatabase+Internal.h
	Source/CBLDatabase+Internal.m
	Source/CBLDatabase+LocalDocs.m
	Source/CBLMisc.h
	Source/CBLMisc.m
	Source/CBLReplicator_Tests.m
	Source/CBLView+Internal.h
	Source/CBLView+Internal.m
	Source/CBLView+Querying.m
	Source/CBL_Database_Tests.m
	Source/CBL_Pusher.m
	Source/CBL_Replicator.m
	Source/CBL_View_Tests.m
	Source/CouchbaseLitePrefix.h"
snej,2014-09-11 00:17:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9d1da0df847e56a5763d790e78fc49d830096e3,c9d1da0df847e56a5763d790e78fc49d830096e3,"Fixed the (disabled) logging of SQLite features at launch

This code is useful for checking what SQLite features are enabled in the OS.
I also added a line that logs the current SQLite version number."
snej,2014-09-10 22:38:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4ba63cc4f558f2cae2669e47917e90a4a0e0f645,4ba63cc4f558f2cae2669e47917e90a4a0e0f645,"API: Added CBLReplication.pendingDocumentIDs property

Allows app to see which docs have local changes that haven't been pushed
yet.
For #442"
snej,2014-09-10 22:36:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/466525e8e28fe3b44d1d3d7598f6171e0798becc,466525e8e28fe3b44d1d3d7598f6171e0798becc,"CBLReplication implementation cleanup

Removed old RUN_IN_BACKGROUND flag. Simplified calling background methods."
snej,2014-09-09 21:20:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a0b319fb650b8a65765f8e779a1b73aa0c19665,1a0b319fb650b8a65765f8e779a1b73aa0c19665,"Merge pull request #450 from couchbase/feature/issue_447

Fix #447 NAN in a document property"
snej,2014-09-09 20:18:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d8776f703134b1ed2ed794b68bcbc6a501cb58db,d8776f703134b1ed2ed794b68bcbc6a501cb58db,"Merge pull request #454 from couchbase/feature/issue_439

#439 Add NSURL support to the CBLModel property"
snej,2014-09-09 19:49:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/58c3da90913495cc7d3f32526623fad9172e49b8,58c3da90913495cc7d3f32526623fad9172e49b8,"Merge pull request #453 from couchbase/feature/issue_432

Fix #432 Add index on maps and attachments table"
pasin,2014-09-09 14:13:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85024431a2c7c5bd8ef149b384709878c2b02534,85024431a2c7c5bd8ef149b384709878c2b02534,"#439 Add NSURL support to the CBLModel property

Implement NSURL support to the CBLModel property and update unit tests accordingly."
pasin,2014-09-09 04:57:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86c3a4f4bfd76cf05d47653a676f143dd0762f1f,86c3a4f4bfd76cf05d47653a676f143dd0762f1f,"Fix #432 Add index on maps and attachments table

* Add sequence index on maps and attachments for revs(sequence) on DELETE CASCADE

* The fix was taken from
https://github.com/hermanccw/couchbase-lite-ios/commit/efa70ee9e18986dd62488fa1d7d4ac7b91c185f0"
pasin,2014-09-09 03:26:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82767cd202245776fa765ae5ebc1c5fddeaa4d00,82767cd202245776fa765ae5ebc1c5fddeaa4d00,"#447 Simplify encoding methods per code review

Simplify encoding methods by not passing an error around and just setting the _error ivar."
pasin,2014-09-08 13:08:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45eb73c284fd9203ee1700ae47242f46f5edd87f,45eb73c284fd9203ee1700ae47242f46f5edd87f,"Fix #447 NAN in a document property

* Modify CBLCanonicalJSON to check NaN value and return an error when there is a NaN property in the document

* Update CBL_Pusher, CBL_Replicator, CBLDatabase, CBLView+Insertion, and CBLView+LocalDocs according to the fix

* Add unit tests to validate the fix"
snej,2014-09-05 00:44:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f78152f35bc8790328ae46f07177b83f058ae880,f78152f35bc8790328ae46f07177b83f058ae880,"Made continuous change tracker able to handle self-signed server certs

Made WebSocket class able to use custom SSL settings and added a delegate
method to report the SecTrustRef. CBLWebSocketChangeTracker then checks
the trust the same way as CBLSocketChangeTracker.
For #444"
pasin,2014-09-05 00:06:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/502362c1c4bd35341bcee87a075dc601392db876,502362c1c4bd35341bcee87a075dc601392db876,"#435 Remove reduce test accoarding to code review

Per code review, removing reduce test as the callReduce method will return nil when there is no reduce. The code is also cleaner without the test."
snej,2014-09-04 16:05:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28fbef0a77b60417938ccdb82cab8028b6bc88f5,28fbef0a77b60417938ccdb82cab8028b6bc88f5,Fixed a Release-only compile error in CBLQueryPlanner
snej,2014-09-04 16:03:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/15bfb58fa76cf5c128e38e404c0acf1066cd3702,15bfb58fa76cf5c128e38e404c0acf1066cd3702,"Fixed more unexported-symbol issues

Missed CBLHTTPErrorDomain (an NSString constant).
Also, I renamed the classes GCDAsyncSocket and WebSocket to have a ""CBL_""
prefix but forgot to update them in the .exp file.
For some reason both of these mistakes only manifested as errors in the
Release build, not Debug -- I thought the symbol exporting would be the
same in both cases but apparently not."
snej,2014-09-04 22:53:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0085481077646a7301826ccc5b26d25521845ee4,0085481077646a7301826ccc5b26d25521845ee4,"Replication unit test tweaks

Added the self-signed X.509 cert (used by CBL_Puller_SSL test case) to
the project, and changed the way external test files are loaded to make
it work on iOS too."
snej,2014-09-04 16:05:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75d0d853a5a1b418b432b74c123bcf6846826611,75d0d853a5a1b418b432b74c123bcf6846826611,Fixed a Release-only compile error in CBLQueryPlanner
snej,2014-09-04 16:03:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1e72e0888ce871601d1978718fc0b6bc935f99c,a1e72e0888ce871601d1978718fc0b6bc935f99c,"Fixed more unexported-symbol issues

Missed CBLHTTPErrorDomain (an NSString constant).
Also, I renamed the classes GCDAsyncSocket and WebSocket to have a ""CBL_""
prefix but forgot to update them in the .exp file.
For some reason both of these mistakes only manifested as errors in the
Release build, not Debug -- I thought the symbol exporting would be the
same in both cases but apparently not."
pasin,2014-09-04 01:47:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fb136b1b1d14c7d1b8b95a2cb063acd6e195337c,fb136b1b1d14c7d1b8b95a2cb063acd6e195337c,"Fix #435 Missing the last group when there is no reduce

* Fix the bug in CBLView that the last entry is not included into the rows result when there is no reduce block given.

* Add CBL_View_Grouped_NoReduce to CBL_View_Tests.m.

* Add all missing CBLView Tests into TestCase(CBLView)."
pasin,2014-09-03 05:25:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bbd25f6fdf24c31785baebeb0888db44b715c2c4,bbd25f6fdf24c31785baebeb0888db44b715c2c4,"Fix compilation errors

Fix XCode5 compilation errors."
snej,2014-09-02 16:20:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1be4665811733564d7b50b55e149f31bdf28ce70,1be4665811733564d7b50b55e149f31bdf28ce70,"Autosave on correct thread when app backgrounds

Fixes #441"
snej,2014-08-29 18:49:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7bb6de6e04350edab628bb84ea7df120c9b2bc4c,7bb6de6e04350edab628bb84ea7df120c9b2bc4c,"Fixed bogus SSL untrusted-cert errors with self-signed certs

Some RemoteRequest objects weren't getting their delegate property set.
This caused them to not check the list of explicitly authorized root
certs during SSL handshakes, which means they'd reject self-signed
certs (or other certs without globally recognized roots.)"
snej,2014-08-29 18:28:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f54f3a727c021a9d7f62daaf2c37e8d291d347a,5f54f3a727c021a9d7f62daaf2c37e8d291d347a,"Fixed CBLManager_Close test case

It was using the shared instance of CBLManager, which made the results
unreliable, causing occasional exceptions.
It tested 'out' error parameters that actually have undefined values.
It deleted a CBLDatabase whose manager had already been closed."
snej,2014-08-29 18:09:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c250fba59e7a9d8e6c657fbb62386d5e094882bc,c250fba59e7a9d8e6c657fbb62386d5e094882bc,"Rename Obj-C classes from 3rd party libraries, like DDLog & HTTPServer

Since Obj-C has a global class name table at runtime, there will be
trouble if a process ever contains two classes with the same name (even
though we're careful not to export symbols we don't need to.) This has
led to trouble in apps that link both with CBL and with libraries we
use such as CocoaLumberjack and CocoaHTTPServer.
To fix this, I've added some #defines in the prefix header that rename
all the 3rd party classes  to have a ""CBL_"" prefix."
snej,2014-08-28 22:37:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a018e147fcd0c0c8ea63b73a9f694a488297dda7,a018e147fcd0c0c8ea63b73a9f694a488297dda7,"Fixed iOS compile error in CBLQueryPlanner

Another integer-size vs. format string warning."
snej,2014-08-28 20:26:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa2bec070161117cd021c44b6d6c02dbcec1e4c2,aa2bec070161117cd021c44b6d6c02dbcec1e4c2,Wrapped long comment lines in CBLQuery.h
snej,2014-08-28 19:33:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/907f63c0112b1d5e9b04cb22109ea799a2a97cf9,907f63c0112b1d5e9b04cb22109ea799a2a97cf9,"Added view-query prefix match option to REST API

Use ?prefix_match_level=n
where ""n"" is the level"
snej,2014-08-28 18:10:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a1ccb28cf398bdab7f0b3c536fdbb5c4f9dc4d2,0a1ccb28cf398bdab7f0b3c536fdbb5c4f9dc4d2,"Moved CBLQueryPlanner to ""Extras"", removed from framework

Since it's still experimental.
It's still in the Test app targets."
snej,2014-08-28 17:57:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3511978a4e7e0ed66c3e10796aff2cc21095ad3a,3511978a4e7e0ed66c3e10796aff2cc21095ad3a,"Merge branch 'master' into feature/query

Conflicts:
	Source/API/APITests.m
	Source/API/ModelTests.m"
pasin,2014-08-27 23:46:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/96af91ab9c1c7d4cc8dbbcdd500d32a70d1458a2,96af91ab9c1c7d4cc8dbbcdd500d32a70d1458a2,Fix compilation error
snej,2014-08-27 18:55:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a03005829ae81828e6e724a08fdb9090cb311734,a03005829ae81828e6e724a08fdb9090cb311734,"Add exported-symbol checks to iOS and Mac test app targets

Each target now references every public class in the API, which will trigger a compile error (in a Release build) if a class hasn't been exported in the .exp file."
snej,2014-08-26 22:00:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b14b6c520bb6508b9946087c940916efcde8959,7b14b6c520bb6508b9946087c940916efcde8959,Added CBLReplication to exported-symbols list too.
snej,2014-08-26 21:44:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1304c7d34a304be40769ca272a075e332bbddb2,d1304c7d34a304be40769ca272a075e332bbddb2,"Added more missing classes to the exported-symbols file

Added:
* CBLAuthenticator
* CBLLiveQuery
* CBLModelArray
Sorted the class & function lists alphabetically to make names easier to find."
snej,2014-08-26 00:13:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec3d4ecc74226de2289b1f6e07e904d0864e0234,ec3d4ecc74226de2289b1f6e07e904d0864e0234,Fixed some warnings when building with Xcode 6
snej,2014-08-25 23:10:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9c38f8b4610b04d6f7a65468fe406068e0d33b30,9c38f8b4610b04d6f7a65468fe406068e0d33b30,"API CHANGE: Added public -[CBLDatabase close:] method

Fixes #429"
snej,2014-08-26 16:02:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dbdb71d66854ddd8f02c3328596decebf881857a,dbdb71d66854ddd8f02c3328596decebf881857a,"Merge pull request #430 from couchbase/feature/escape_url_params

Update the characters to be escaped in URL params"
snej,2014-08-26 15:59:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c4270968728485acc87333d2d23562a64a94ac3,0c4270968728485acc87333d2d23562a64a94ac3,"Merge pull request #431 from couchbase/feature/issue_424

Fix #424 Crash in CoreFoundation boundPairReadClose()"
pasin,2014-08-25 23:28:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1dc75d42b05557490d11b51bfb08b0218f1a2d2,c1dc75d42b05557490d11b51bfb08b0218f1a2d2,"Update the characters to be escaped in URL params

* Add all of the reserved characters according to section 2.2 in rfc3986 that haven't get escaped automatically by the Apple library

* Consolidate CBLEscapeID and CBLEscapeURLParam into just CBLEscapeURLParam

* Update test case and others accordingly"
pasin,2014-08-25 22:24:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/06263ea5ee6d402e21f6a1bb741d8b8dc63d2d3f,06263ea5ee6d402e21f6a1bb741d8b8dc63d2d3f,"Fix #424 Crash in CoreFoundation boundPairReadClose()

* Apply the workaround according to the discussion in https://github.com/AFNetworking/AFNetworking/issues/907."
snej,2014-08-25 21:47:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28ad328a71b79ccb437efc43587a789f2d58df0d,28ad328a71b79ccb437efc43587a789f2d58df0d,"Merge pull request #428 from couchbase/feature/issue_418

Fix #418 deleteDatabase: blocking thread"
pasin,2014-08-25 21:08:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a780fdb057caaa48747b10720f0bc3f52e00a09c,a780fdb057caaa48747b10720f0bc3f52e00a09c,"#418 Revert changes in CBL_Shared and update unit test

* Per code review, revert changes in CBL_Shared back to use usleep instead of using NSRunLoop to wait.

* Update API_DeleteDatabase to ensure that the copied manager is closed and add test for the case that multiple managers working on different threads."
snej,2014-08-25 19:01:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea87b10cf802b9314d7b1f72b4e382277ae23d5f,ea87b10cf802b9314d7b1f72b4e382277ae23d5f,Added CBLUITableSource class to library exported-symbols list
snej,2014-08-25 18:53:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/346df6c8afa20367ebffffac04767e0878c69b8b,346df6c8afa20367ebffffac04767e0878c69b8b,"Renamed CBLView.totalDocs to totalRows

(Not public so this isn't an API change.)"
snej,2014-08-25 18:41:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ef259e7d2c76acac6da37abbaaea6c308326b36,1ef259e7d2c76acac6da37abbaaea6c308326b36,Fixed unit tests by making sure resources get cleaned up
snej,2014-08-25 18:41:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d51f6d7e929d558dec001076ae672517d916df3,6d51f6d7e929d558dec001076ae672517d916df3,Fixed unit tests by making sure resources get cleaned up
snej,2014-08-25 18:27:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee1469fe57e222b4f6a3a180b3eeb6ad2e8a3503,ee1469fe57e222b4f6a3a180b3eeb6ad2e8a3503,Made CBLView.totalDocs work
pasin,2014-08-22 22:08:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f964a124c802572ad9eb16b3d512f57b81e5f93,3f964a124c802572ad9eb16b3d512f57b81e5f93,"Fix #418 deleteDatabase: blocking thread

* CBL_Shared's forgetDatabaseNamed: blocks CBLDatabase objects from closing when they receive DatabaseWillBeDeleted notification. Instead of doing sleep, calling runloop to spin to allow the other CBLDatabase objects to get closed.

* When closing CBLManager, closing all databases in the CBL_Shared object as well."
snej,2014-08-22 18:40:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4729a62b2658c4a8782412fb8436d7461b734bdb,4729a62b2658c4a8782412fb8436d7461b734bdb,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/API/CBLView.m
	Source/CBLDatabase+Internal.m
	Source/CBLRouter_Tests.m
	Source/CBLView+Internal.h
	Source/CBLView+Internal.m
	Source/CBL_Router+Handlers.m"
snej,2014-08-22 16:45:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad0786be92fab3200db3373f406be165a6571987,ad0786be92fab3200db3373f406be165a6571987,Avoid dependency on remote server in RunReplicationWithError unit test
refractalize,2014-08-22 13:15:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7477fb1f25b4782eb318eb3ec8720d21d058893e,7477fb1f25b4782eb318eb3ec8720d21d058893e,streamed requests return a proper response
snej,2014-08-21 00:02:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b332162eb58cc9c26b0220f5d7f35e0658470fc7,b332162eb58cc9c26b0220f5d7f35e0658470fc7,Fixed a bug in view querying found by the static analyzer
snej,2014-08-20 23:58:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d4cfeb6743f5f03e2131970646fb398eb04bc24,0d4cfeb6743f5f03e2131970646fb398eb04bc24,Updated to latest forestdb
snej,2014-08-20 23:48:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/947bc9d55e0870b18ba02246db18248e71c1c2dd,947bc9d55e0870b18ba02246db18248e71c1c2dd,Merge branch 'master' into feature/query
snej,2014-08-20 23:46:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/528882470c52a6d77c9a2c249b338f829ceb68fd,528882470c52a6d77c9a2c249b338f829ceb68fd,"API: Added CBLQuery.prefixMatchLevel

Implemented prefix matching on strings or arrays in queries."
snej,2014-08-20 17:56:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/503be52e35aeffb0e8d5b7b7ce9c7f86c960c257,503be52e35aeffb0e8d5b7b7ce9c7f86c960c257,"Merge pull request #422 from couchbase/feature/issue_417

Fixes #417 Not fetch each individual rev when _all_docs returns an error"
snej,2014-08-20 17:53:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/007eb7371bc5d462c05613163c444cfeee776217,007eb7371bc5d462c05613163c444cfeee776217,"Merge pull request #423 from couchbase/feature/issue_414

Fixes #414 Add index for getting a doc with doc and rev id"
pasin,2014-08-19 23:40:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d6981d8fc4735ac18950b64811c72ee8f108be0a,d6981d8fc4735ac18950b64811c72ee8f108be0a,"Fixes #414 Add index for getting a doc with doc and rev id

Add an index on revs table for getting a document with doc and revision ID."
pasin,2014-08-19 23:21:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cea3942e4a7ec6bf0165d443a863755046ee457f,cea3942e4a7ec6bf0165d443a863755046ee457f,"Fixes #417 Not fetching each individual rev when _all_docs returns an error

* In CBL_Puller's pullBulkWithAllDocs: method, when _all_docs request fails, all the docs are not treated as leftever docs and will not be fetched individually as the retry process will kick in.

* With this fix, the completed change count issue describing in #417 will be resolved as well."
snej,2014-08-19 17:15:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00f6829b2914adb9b3fdce9cf71fc27ac1de06df,00f6829b2914adb9b3fdce9cf71fc27ac1de06df,"Merge pull request #420 from couchbase/feature/issue_354

Fixes #354 Return 404 for unknown resources"
snej,2014-08-19 17:14:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74f8c82389e789e1b53d90b3a823bb7b819e19f4,74f8c82389e789e1b53d90b3a823bb7b819e19f4,"Merge pull request #421 from couchbase/feature/issue_163

Fixes #163 REST total_rows should return number of rows in the view"
pasin,2014-08-14 21:54:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5b0890d92c0cc80d28d04d0d0753f3d73c586d0,a5b0890d92c0cc80d28d04d0d0753f3d73c586d0,"Fixes #163 REST total_rows should return number of rows in the view

* Add total_docs column to views table and set its default value to -1 (means 'unknown' for the old version of the api that do not have this fix)

* Add totalDocs property to CBLView() category. The totalDocs property will first try to get the value from views.total_docs columns and if the value is '-1', it will count the number of docs from the maps table, update the value to views.total_docs and return.

* Update the views.total_rows every time when the view's index is updated.

* Update CBL_Router's handler to return view.totalDocs for the total_rows attribute in query responses.

* Add CBL_View_TotalDocs test case and fix CBL_Router_Views accordingly."
pasin,2014-08-13 17:59:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/906747764f59dee1473e49899eaa95e3ef5f05c8,906747764f59dee1473e49899eaa95e3ef5f05c8,"Fixes #354 Return 404 for unknown resources

* Fixes CBL_Router to return 404 instead of 400 for unknown resourcess.

* Fixes CBLRouter_tests accordingly."
snej,2014-08-15 22:47:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ef5bf4f0954d1d62aba220ddaab3f01671bab88,0ef5bf4f0954d1d62aba220ddaab3f01671bab88,"Type-check CBLModel getters for string/array/dict properties

CBLModel dynamic properties of type NSString, NSArray, NSDictionary, NSNumber
now type-check the value in the document. If it's not of the correct type, the
property value will be nil.
This is very useful when dealing with other platforms or apps that are in the habit of
setting empty properties to a JSON 'null' value instead of just leaving them out.
Fixes #419"
snej,2014-08-15 22:22:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/256aaecbf012b7935a0db697192874f39d9f7567,256aaecbf012b7935a0db697192874f39d9f7567,"Add NS_REQUIRES_PROPERTY_DEFINITIONS declaration to CBLModel

This will catch a common bug where someone implementing a concrete
model class forgets to declare a document property as @dynamic.

The annotation will trigger a compiler warning in this situation, i.e.
whenever a subclass doesn't explicitly provide an @dynamic (or
@synthesize or accessor method) for a property it declares."
snej,2014-08-15 22:08:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5dc9788930dccaf0791071d94637ce2b0d0734f1,5dc9788930dccaf0791071d94637ce2b0d0734f1,"Merge pull request #416 from couchbase/feature/issue_405

Fixes #405 asyncTaskCount out of sync in Puller"
snej,2014-08-15 22:03:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f981bd727964a8cb4e36cb9089c036b755058c30,f981bd727964a8cb4e36cb9089c036b755058c30,"all-docs query optimizations

* Don't look up attachments if rev's no_attachments column is true
* Get document contents if there's a filter, because it's almost certain to look at them."
snej,2014-08-15 21:45:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d1846d9163decc6995703015d70885da996f4b7,5d1846d9163decc6995703015d70885da996f4b7,Added postFilter support to all-docs queries.
snej,2014-08-15 21:18:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66dbbd9cc007b0697500b9cce1b8cd23ec496051,66dbbd9cc007b0697500b9cce1b8cd23ec496051,"More CBLQueryPlanner improvements

* Added convenience init that takes predicate as an NSString.
* Added -explanation method for troubleshooting & learning.
* Handle _queryKeys expression evaluating to an NSSet or NSDictionary."
pasin,2014-08-15 21:14:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/004e861cb99c837b240dc8c4dc86a531390633eb,004e861cb99c837b240dc8c4dc86a531390633eb,"Fixes #405 Rework

Testing against ChangeTracker's continuous property instead of replicator._ continuous variable when syncing asyncTaskCount in CBL_Puller's startChangeTracker, changeTrackerStopped: and stop method."
snej,2014-08-14 22:11:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c561b7d8b9a166e9cd319fa4904c438d65fffc71,c561b7d8b9a166e9cd319fa4904c438d65fffc71,Query planner: Simplify map block by precomputing a single expression for key and for value.
snej,2014-08-14 21:20:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/483bb85730a9f7a2323743961c2d57f8964d339c,483bb85730a9f7a2323743961c2d57f8964d339c,"Query planner handles ""IN"" expressions; other fixes

* For ""expr IN $VALUES"", emits expr as key and uses the CBLQuery.keys property with the runtime value of $VALUES.
* Fixed a bug where an expr could appear twice in the key if it were also given as a sort key.
* Made most of the class properties only appear in debug builds, to save code size."
snej,2014-08-14 17:28:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16fe9efe8b915b006a22de14ef7be6e3400a2faf,16fe9efe8b915b006a22de14ef7be6e3400a2faf,"Query planner now supports case-insensitive string comparison

i.e. the ""[c]"" modifier on string comparison operators"
snej,2014-08-13 19:10:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18b649ec2a283fa83ccdc18df4d3b099e5e08918,18b649ec2a283fa83ccdc18df4d3b099e5e08918,"Query planner now precomputes startKey and endKey as NSExpressions at init time.

Mostly this improves testability, as unit tests can assert that those expressions are correct."
pasin,2014-08-13 17:50:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77dc3c7e5fe2a25067aad1f810ada8d5d3df508e,77dc3c7e5fe2a25067aad1f810ada8d5d3df508e,Add CBL iOS Test target to the CBLRouter_Tests
snej,2014-08-13 16:55:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e8546756b23db4259668d322804bc215e1b54f03,e8546756b23db4259668d322804bc215e1b54f03,Checked in current version of CBLQueryPlanner.
pasin,2014-08-12 20:38:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c671ff5cde8c28abb3238e2ce00f75eec9b02704,c671ff5cde8c28abb3238e2ce00f75eec9b02704,"Fixes #405 asyncTaskCount out of sync in Puller

* The issue happens in the continous mode where there is a permanent error occurred. The asyncTaskCount was decreased unexpectedly as a result of the continous flag was reset while stopping the replication due to the permanent error.

* Fix the issue by getting the continous flag before setting the error which could trigger the replication to stop if the error is a permanent error.

* Add CBL_Puller_Continuous_PermanentError Test that reflects the fix."
snej,2014-08-12 17:18:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a73be1c61af8bb73c36f0040d06d14e2be83ebb,0a73be1c61af8bb73c36f0040d06d14e2be83ebb,"API CHANGE: Added CBLQuery.inclusiveStart property

Defaults to YES (compatible with existing behavior.)
In the REST API, it's a query param ?inclusive_start."
snej,2014-08-11 22:41:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f3748f8dc688ea160e92fe7f74c1a25717a72d13,f3748f8dc688ea160e92fe7f74c1a25717a72d13,Added query-filter support for reduced/grouped and full-text queries.
snej,2014-08-09 01:33:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/03a7f8bad13e256dfc7d42916f64190da4aba726,03a7f8bad13e256dfc7d42916f64190da4aba726,"API CHANGE: Added CBLQuery.postFilter

Query results can now be post-processed by an NSPredicate that can
remove any rows its wants to."
snej,2014-08-05 16:15:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e7ef5a95d000a6766f769b6da9a6f09738b9d894,e7ef5a95d000a6766f769b6da9a6f09738b9d894,"Fixed: Query.inclusiveEnd option was missing from public API

Fixes couchbaselabs/couchbase-lite-api#105"
snej,2014-08-11 19:46:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/606072f701e53f9f10a21c0b34c8ef583026b766,606072f701e53f9f10a21c0b34c8ef583026b766,"Fixed the targets so the test apps can still access+run the unit tests.

The debug builds of the static framework need to export all
symbols publicly so that the test apps can call the unit tests.

For #413"
snej,2014-08-11 16:22:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49b384fce1bec492c4399ed8d1e540eb3c6369ec,49b384fce1bec492c4399ed8d1e540eb3c6369ec,"Don't make internal symbols public, in the iOS static library

For #413"
snej,2014-08-11 17:41:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b90e231025478760ca0761c8278796333dbf68d9,b90e231025478760ca0761c8278796333dbf68d9,"Merge pull request #412 from couchbase/feature/issue_319

Fixes #319 overriding the response content-type"
snej,2014-08-11 17:37:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d3fff99a6e7e8f4958fd2a4417c547bdd7c4b68,8d3fff99a6e7e8f4958fd2a4417c547bdd7c4b68,"Merge pull request #407 from couchbase/feature/issue_336

Fix #336 Assertion Failed : _asyncTaskCount >= 0"
snej,2014-08-11 16:29:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c6c89f8f9e0ac26a2ea5f9e1f0abea329580da1,4c6c89f8f9e0ac26a2ea5f9e1f0abea329580da1,"Merge pull request #404 from couchbase/feature/issue_310

Fix #310 Mutated sub model not being saved issue"
pasin,2014-08-08 21:49:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f44c496abbbbde38d5ec2d604ace3bb253d6b9f6,f44c496abbbbde38d5ec2d604ace3bb253d6b9f6,"Fixes #319 overriding the response content-type

Setting the response content-type to 'application/json' when the
response has a body object but there is no content-type value given."
pasin,2014-08-05 21:12:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40076cbaef319013cd68ab81344f1a37af64c3a3,40076cbaef319013cd68ab81344f1a37af64c3a3,Write a test case for #319
pasin,2014-08-07 06:54:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f3a21e09da6f60ec2ba25dccc74a415c8a57204,3f3a21e09da6f60ec2ba25dccc74a415c8a57204,"Fixes Puller bugs that can cause asyncTaskCount out of sync

* Similar to the fix for #336 to the Pusher, ensure that we pass the
right request object to the removeRemoteRequest method inside the
OnCompletion block of the CBLMultipartDownloader and CBLBulkDownloader.

* Correct result type of the CBLBulkDownloader’s onCompletion block.

* Call removeRemoteRequest to remove the CBLBulkDownloader object
inside the onCompletion block."
pasin,2014-08-07 06:35:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/874c7104724881be36776fe24885ff1bfa603bf1,874c7104724881be36776fe24885ff1bfa603bf1,"Fixes #336 Assertion Failed : _asyncTaskCount >= 0

The issue is that the result of the onCompletion block of the
CBLMultipartUploader could be null when there was an error occurred.
Hence passing the result object of the block to the removeRemoteRequest
method is not correct and will result to an error that the finished
uploader will not be removed from the remote request array.

When the app is suspended in the background, the replication (pusher)
will stop all of the requests that are in the remote request array.
Calling stop on the finished uploader will cause the onCompletion block
to be called again and will lead to the ‘Assertion Failed :
_asyncTaskCount >= 0’ error when asyncTasksFinished: method is invoked
inside the onCompletion block.

The fix is to use the original uploader object to pass to
removeRemoteRequest method instead of using the result object from the
onCompletion block."
pasin,2014-08-05 17:36:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/29637e2f54eb78d89dfb1a7e10fc23a67538fcdb,29637e2f54eb78d89dfb1a7e10fc23a67538fcdb,"Fix #310 Mutated sub model not being saved issue

* Add the code that checks for 'CBLJSONEncoding' protocol and assign
OnMutate block if the value implements 'setOnMutate' in the
'impForSetterOfProperty' method.
* Add 'API_SaveMutatedSubModel' test."
snej,2014-08-04 17:45:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef926b09d5e8677971ab0bf270d4949ddddf34b3,ef926b09d5e8677971ab0bf270d4949ddddf34b3,"Removed implicit key./value. prefix support in query sort descriptors.

Had second thoughts about this; too much ""magic"" for not enough benefit."
snej,2014-08-03 23:05:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05a8ab07bebe4c6bf5b0e4b713ac4d14a290a963,05a8ab07bebe4c6bf5b0e4b713ac4d14a290a963,"Fixed failing assertion in CBLQueryRow due to unset _database

Recent regression due to the view indexing optimizations.
Fixes #403"
snej,2014-08-02 18:06:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f863246ea64581e8d0d19c73936340c43e6021fc,f863246ea64581e8d0d19c73936340c43e6021fc,"Custom sorting of CBLQueryEnumerators

Added CBLQuery.sortDescriptors,
and -[CBLQueryEnumerator sortUsingDescriptors:].

Conflicts:
	Source/API/CBLQuery.m"
snej,2014-08-02 18:06:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/299da13433d3e71fb7ed3d31d7319627f897f9dc,299da13433d3e71fb7ed3d31d7319627f897f9dc,"Custom sorting of CBLQueryEnumerators

Added CBLQuery.sortDescriptors,
and -[CBLQueryEnumerator sortUsingDescriptors:]."
snej,2014-08-02 18:03:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c8d0b5f024cdbd2a0dd46e587ff492390effb02,2c8d0b5f024cdbd2a0dd46e587ff492390effb02,"Removed asynchronous generation of JSON during document save

The GCD overhead significantly slows down saving, on an iOS device. :("
snej,2014-08-01 23:53:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70c74324905e70dcdc91a76edcc80cc1ab9f575e,70c74324905e70dcdc91a76edcc80cc1ab9f575e,"Optimizations for saving revisions

* Replaced canonical JSON encoder with a faster one.
* Don't need to create CBL_MutableRevision object up-front.
* Optimized creation of CBLDocumentChange."
snej,2014-08-01 20:53:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a85d56b67e54d3fe12cb8736d06bf53aeebb84af,a85d56b67e54d3fe12cb8736d06bf53aeebb84af,"Fixed a db-upgrader bug

Some revs have no JSON data; that means an empty doc.
So translate that into ""{}"".
Also added extra autorelease pools."
snej,2014-08-01 00:37:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e45290c3b445e3f95ce05cd6fe4ddff8c5c014f8,e45290c3b445e3f95ce05cd6fe4ddff8c5c014f8,"Merge branch 'master' into forestdb

Conflicts:
	Source/CBLChangeTracker_Tests.m
	Source/CBLReplicator_Tests.m
	vendor/fmdb"
snej,2014-08-01 00:29:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8fbfcbcc6f90ac04d5cd1a97712d598a76985271,8fbfcbcc6f90ac04d5cd1a97712d598a76985271,Updated forestdb (long-path support)
snej,2014-07-31 22:37:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/500fa800f4e3534d026d44a68d263f8243a86670,500fa800f4e3534d026d44a68d263f8243a86670,Unit tests for SSL replication
snej,2014-07-31 21:28:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d222ba163f7a461185c45ca79c708d31fe69e277,d222ba163f7a461185c45ca79c708d31fe69e277,"Fixes for SSL server cert trust checking

* CBLSocketChangeTracker now allows a self-signed cert, provided the
  replicator allows it (i.e. app has configured that root cert.)
* Treat SSL errors as permanent so the replicator will stop on one.
* CBLRemoteRequest now returns the correct error when it comes across
  an untrusted server cert. (Invalid-cert, not auth-canceled.)"
snej,2014-07-31 18:42:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e8b5c79346ee0d9020ed63e28bae2117b621eda,5e8b5c79346ee0d9020ed63e28bae2117b621eda,Added unit tests that force replicator auth failures
snej,2014-07-31 18:16:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f90b97d9cd9c3e609cf9e9ca799c3cb737f6d34,3f90b97d9cd9c3e609cf9e9ca799c3cb737f6d34,"ChangeTracker should map NSURLErrorUserAuthenticationRequired to 401

The HTTPLogic class returns the lower-level code, but everywhere else
we use 401."
snej,2014-07-31 18:15:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3ff9c7a7213b59646dcfec489ef8d86a7bdfebf5,3ff9c7a7213b59646dcfec489ef8d86a7bdfebf5,"When retrying a replication, make sure to get session & checkpoint

Especially important if the replication initially failed to create a
session or fetch the remote checkpoint, because then we don't have one
at all. (This could have been causing checkpoint conflict errors.)"
snej,2014-07-30 18:10:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b00f8704e45c4055905d2a21c52b615618778a12,b00f8704e45c4055905d2a21c52b615618778a12,"Merge pull request #401 from monowerker/topic/date_w_tz

Add time zone support to CBLJSON date formatter"
snej,2014-07-30 17:21:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e71905063dfd65a83218611213336a7b96f66b9e,e71905063dfd65a83218611213336a7b96f66b9e,"Added more auth-failure error codes to CBLIsPermanentError

See https://groups.google.com/d/msgid/mobile-couchbase/35f2db0b-bd47-4579-9afa-23f92745eeb0%40googlegroups.com"
monowerker,2014-07-30 15:15:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84777b8cbb2250bc63a9907cc9ee794c8a4a3e18,84777b8cbb2250bc63a9907cc9ee794c8a4a3e18,Add Tests for +JSONObjectWithDate:timeZone.
monowerker,2014-07-24 10:42:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bff409c1ad52cf3ee00474334b3bdc35dce47d18,bff409c1ad52cf3ee00474334b3bdc35dce47d18,Add JSONObjectWithDate:timeZone: to get a date with tz-offset.
snej,2014-07-30 00:49:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a6e77a90680c5e9d6fb1463363b1eec9b0c87cc,3a6e77a90680c5e9d6fb1463363b1eec9b0c87cc,"Allow logging to be redirected, and use NSLog on iOS devices

* Added +[CBLManager redirectLogging:]
* On iOS devices, always log to NSLog, since stderr output doesn't get
  saved anywhere that can be viewed later.
Fixes #395"
snej,2014-07-30 00:34:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c870bf54c8b997ed32ddf4f64d274d86d3a21140,c870bf54c8b997ed32ddf4f64d274d86d3a21140,"Oops, actually enable JS filters in LiteServ"
snej,2014-07-29 23:26:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/812cf64ca74859b5e525ab9752bfee2316aa8e51,812cf64ca74859b5e525ab9752bfee2316aa8e51,"Enable JS filter compiler support

The function CBLRegisterJSViewCompiler() now also registers the JS
filter compiler.
Also, enabled JS filters in LiteServ."
snej,2014-07-29 19:56:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0442194279ec16f0e5f974eb6aeddfc6295462e,e0442194279ec16f0e5f974eb6aeddfc6295462e,"Better handling of a model's document being deleted

* Clear all properties
* Clear needsSave flag, remove from db's docs-to-be-saved set
* Detach from document even if the model didn't initiate the save
* Don't call didLoadFromDocument
Fixes #363"
snej,2014-07-29 17:52:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/79a7494f46d7e02bd1fbad4f18b24eb09f269f6d,79a7494f46d7e02bd1fbad4f18b24eb09f269f6d,"Skip FMDB thread-safety check when running on dispatch queues.

Fixes #376"
snej,2014-07-29 16:44:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2652e88287e34773333762bed4e4b5e92ac7efe6,2652e88287e34773333762bed4e4b5e92ac7efe6,"Merge branch 'master' into forestdb

Conflicts:
	Source/CBLChangeTracker_Tests.m
	Source/CBLDatabase+Internal.m
	Source/CBLView+Internal.m
	Source/CBLView+Querying.m
	Source/CBL_Replicator.m
	Source/CBL_View_Tests.m
	vendor/fmdb"
snej,2014-07-29 16:14:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd6429a2b7f5163fa1addaea3630a787ecf5c781,dd6429a2b7f5163fa1addaea3630a787ecf5c781,Remove provisioning profile ID from project file
snej,2014-07-29 16:01:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6cf26e2829104bc2c5a1f17cfbeb4e163b8f1f71,6cf26e2829104bc2c5a1f17cfbeb4e163b8f1f71,Some more optimizations for inserting docs
snej,2014-07-29 16:01:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b1e4b96237789eb046ba2d6a882dabad71af178,0b1e4b96237789eb046ba2d6a882dabad71af178,Implemented multiple-view indexing for forestdb
snej,2014-07-28 20:20:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43305dc38a27d469b3431b1a5e8f987bab06fb69,43305dc38a27d469b3431b1a5e8f987bab06fb69,emit-doc optimization is working now.
snej,2014-07-28 17:32:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/22c2f766b7cfadf2a95ffbca5bcd0bf5f42008e6,22c2f766b7cfadf2a95ffbca5bcd0bf5f42008e6,WIP: Implementing the emit-entire-doc optimization for forestdb branch
snej,2014-07-28 16:22:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/359f7e1f72a3548ff0c820c7af039b16826ac02a,359f7e1f72a3548ff0c820c7af039b16826ac02a,"Merge commit '42e2fdb04a4f36fbe00b4104c24c4d73e71e54e9' into forestdb

Conflicts:
	Source/API/CBLView.m
	Source/CBLDatabase+Internal.m
	Source/CBLInternal.h
	Source/CBLView+Internal.h
	Source/CBLView+Internal.m
	Source/CBLView+Querying.m
	Source/CBL_View_Tests.m

WIP: Haven't implemented forestdb-based view optimizations yet."
snej,2014-07-28 15:24:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f154bc363f14ee42a938dc3f8633f6283856f89a,f154bc363f14ee42a938dc3f8633f6283856f89a,"Merge commit 'be8551b9755d8fbb8ecfabeda0c37672c05df3f6' into forestdb

Conflicts:
	Source/CBL_Puller.m

Partway through merging with master"
snej,2014-07-28 15:19:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a666b0f15b1bc7cb02a9dd6fa3a1a32cc1852bba,a666b0f15b1bc7cb02a9dd6fa3a1a32cc1852bba,Updated forestdb
snej,2014-07-28 02:30:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc9520872f2627ffed0fa687a30877fc4e4f0ad5,fc9520872f2627ffed0fa687a30877fc4e4f0ad5,"Made CBLWebSocketChangeTracker work correctly with CBLAuthorizer

Also found that it didn't work correctly if usePOST property wasn't set,
so I fixed that too.
Fixes #400"
snej,2014-07-25 21:51:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92cefc6e8d63a4e084818b715233fc7b681f8974,92cefc6e8d63a4e084818b715233fc7b681f8974,"Using new MapReduceIndexer class from CBForest

A stepping stone toward being able to update multiple views at once."
snej,2014-07-23 20:23:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b3b64f38b6278f39b5e90362906f443100e9f536,b3b64f38b6278f39b5e90362906f443100e9f536,"Change CBL_Replicator progress notification postingStyle to NSPostASAP

This will deliver progress information more quickly.
Fixes #396"
snej,2014-07-22 22:38:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/307b69e09217a0535e3a615e30d509249ee32760,307b69e09217a0535e3a615e30d509249ee32760,Minor CBLQuery fixes
snej,2014-07-18 00:24:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77a58d23e24367252ae8c72b3a035b125141fc65,77a58d23e24367252ae8c72b3a035b125141fc65,Updated CBForest
snej,2014-07-21 23:13:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8bf60318ec828d8172a6dfc6275663505b57bf60,8bf60318ec828d8172a6dfc6275663505b57bf60,"Router should not try to parse URL params as JSON for changes feed

From the CouchDB docs it seems pretty clear that the extra URL query params in
_changes feed requests are passed directly as strings to the filter function, without
any JSON parsing.
(See http://docs.couchdb.org/en/latest/couchapp/ddocs.html#filterfun )
Fixes #321"
snej,2014-07-21 18:23:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92d3da2ca3ddec1e7baf6f7ad42f19f32c47e61c,92d3da2ca3ddec1e7baf6f7ad42f19f32c47e61c,"Fixed bugs saving replication checkpoint

* Updating the checkpoint should not be canceled when the replication goes offline or is told to stop.
* The lastSequence stored in the db at the end should be the lastSequence saved remotely, _not_ the current lastSequence (which may have changed.)
* Added a Sync log message when the checkpoint is successfully saved, for future debugging."
snej,2014-07-21 16:27:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1ee3ab6ba4b4f7a09b1c68eb97f0e0d0a81960c,d1ee3ab6ba4b4f7a09b1c68eb97f0e0d0a81960c,"Fixed a case where a view query could use -1 instead of the view_id in the SQL query

https://groups.google.com/d/msgid/mobile-couchbase/aa81a906-188f-445f-b67c-3898503e3683%40googlegroups.com"
snej,2014-07-20 16:40:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5d399d470a19e491820086734c303e441427823,b5d399d470a19e491820086734c303e441427823,Fixed FMDB submodule commit reference.
snej,2014-07-18 22:16:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a33d6ef3acc61fbc99deedd5658dc5ee897bd399,a33d6ef3acc61fbc99deedd5658dc5ee897bd399,"Fixed mistake in JSON string collation Unicode ordering

Character comparison was using ASCII order instead of the real Unicode
collation order. (For example, '_' and '~' were sorting after letters
instead of before.)

This commit also bumps the db version number; the next time a database
is opened its view indexes will be cleared, so they'll be re-indexed
with the new ordering instead of getting an inconsistent mixture of the
old and new orderings."
snej,2014-07-18 21:02:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce3ea09c88fe1b8b68bccf1f0b51f0ab7a182363,ce3ea09c88fe1b8b68bccf1f0b51f0ab7a182363,Avoid unnecessary JSON data-to-string conversions during view indexing
snej,2014-07-18 03:31:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0d5f7868391b59626cf96b4adece75bb41ab9e8,d0d5f7868391b59626cf96b4adece75bb41ab9e8,"Workaround to keep CBLJSONReader from being dealloced prematurely

I think this will fix #369."
snej,2014-07-17 18:19:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e8c4e592fca4c776aecf09b1c7b824e7644ee34,2e8c4e592fca4c776aecf09b1c7b824e7644ee34,Added a unit test for emitting nil values. Fixed some Xcode 6 compile issues.
snej,2014-07-17 19:07:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ca8c403a15021fa32bff7242da5c85faa4d32291,ca8c403a15021fa32bff7242da5c85faa4d32291,"Merge pull request #389 from ManuTroquet/master

fix conform path for #import"
snej,2014-07-17 15:28:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/106bf9afa34b2f491b08e08ae150c452e6737c10,106bf9afa34b2f491b08e08ae150c452e6737c10,"Fixed equality test for query rows whose value is 'doc'

Regression from the emit-doc optimization (03454e8)"
snej,2014-07-16 01:11:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42e2fdb04a4f36fbe00b4104c24c4d73e71e54e9,42e2fdb04a4f36fbe00b4104c24c4d73e71e54e9,"Changed indexing behavior so views with no “/“ in name don’t index together.

There’s a compile-time flag GROUP_VIEWS_BY_DEFAULT that can be defined
to change this back to having all those views form one group."
snej,2014-07-15 21:12:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/59594d427db0ec22ad62587c84bd45b1caa00f5d,59594d427db0ec22ad62587c84bd45b1caa00f5d,A few more view-indexing optimizations
snej,2014-07-15 18:56:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/03454e8c1a9cb0312720d7b9012f28b04969b7af,03454e8c1a9cb0312720d7b9012f28b04969b7af,"Optimization for naughty map functions that emit 'doc' as value

Instead of storing the whole doc dictionary, store a placeholder (""*"").
At query time, detect the placeholder and load the revision body."
snej,2014-07-14 23:24:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09b9a75d6518dd1dcf87e9bd88dbfd2e5e00da8d,09b9a75d6518dd1dcf87e9bd88dbfd2e5e00da8d,"Re-index multiple views together

When updating a view's index, also update other views' indexes. This
saves time because a lot of the work (iterating through the sequences,
fetching the documents, looking for conflicts) is shared.

Like CouchDB, I'm grouping views together for this purpose. The other
views that will get updated are the ones sharing the same prefix up
through the first ""/"". Or if the view name has no ""/"", it's all the
other views without a ""/""."
snej,2014-07-13 01:27:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be8551b9755d8fbb8ecfabeda0c37672c05df3f6,be8551b9755d8fbb8ecfabeda0c37672c05df3f6,"WebSocketChangeTracker: Reset retry interval after successful connection

Fixes #335"
snej,2014-07-13 01:23:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/455dd44260cd1039f80c8b9b79a80304f23d9d8a,455dd44260cd1039f80c8b9b79a80304f23d9d8a,"Oops, forgot to push CocoaHTTPServer."
snej,2014-07-12 00:27:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/feaabdb1b76e6c125b8542ee0934602e0476245b,feaabdb1b76e6c125b8542ee0934602e0476245b,"Improved handling of CBL_Puller changesTotal count

This should fix the changesTotal temporarily going negative.
Also, if some incoming revisions already exist, it now responds by
increasing changesProcessed instead of lowering changesTotal, which
makes more sense.
Fixes #351

Conflicts:
	Source/CBL_Puller.m"
snej,2014-07-12 00:27:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84536b9b0d82e585607221e1b60e7026250e6d4a,84536b9b0d82e585607221e1b60e7026250e6d4a,"Improved handling of CBL_Puller changesTotal count

This should fix the changesTotal temporarily going negative.
Also, if some incoming revisions already exist, it now responds by
increasing changesProcessed instead of lowering changesTotal, which
makes more sense.
Fixes #351"
snej,2014-07-12 00:25:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be24fa07db8cccb116665b79fbafbcc9959529bc,be24fa07db8cccb116665b79fbafbcc9959529bc,"Fixed an issue with revision properties during a validation callback

CBLRevision object passed to callback didn't have _id or _rev properties"
snej,2014-07-11 21:47:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea1d0c8210235ed0996c1e1d9afac432179d4f6a,ea1d0c8210235ed0996c1e1d9afac432179d4f6a,"Tweaked CBLCreateUUID to avoid ‘+’ character.

The ‘+’ is special in URLs and triggers a Gateway bug."
snej,2014-07-11 20:49:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc220c6861a42f695049a8f9d8a74a477c6b94e8,bc220c6861a42f695049a8f9d8a74a477c6b94e8,"Simplified some logic in CBLPuller

Traun pointed out that _caughtUp will always be NO at this point,
since -startChangeTracker is only called from -beginReplicating
after clearing _caughtUp."
snej,2014-07-11 20:04:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80e07bdce06e97a8d0cb4c0535a13c0a61e40176,80e07bdce06e97a8d0cb4c0535a13c0a61e40176,"Fix KVO exceptions after saving a CBLModel

When KVO-observing an object that is itself a property of a model, and then saving the model, the _properties dictionary was cleared —
 this caused the object being observed to be dealloced, triggering an exception.
Fixes #244"
snej,2014-07-11 19:04:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8a024982c699ea2b4086bebfa875fe46bc65033,f8a024982c699ea2b4086bebfa875fe46bc65033,"Fixed Listener handling of conditional GETs with Range headers

If a request had both a Range header and an If-None-Match, and
the Etag matched, the response status was incorrectly set to 206
instead of 304. (This was a bug in the CocoaHTTPServer submodule.)

I also fixed a bug with Range requests of gzip-encoded attachments:
the attachment has to be decoded otherwise the byte range applies to
the gzipped data, not the actual attachment content.
Fixes #317"
snej,2014-07-11 03:46:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e1bee6f4df9dcf3aae9165caf349bc8495cca93,4e1bee6f4df9dcf3aae9165caf349bc8495cca93,"Fixed a crash in CBForest, setting a nil replication checkpoint

Fixes #385"
snej,2014-07-10 21:48:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43bf99c7fb55529cb78d61eb250947fd5f84d6a7,43bf99c7fb55529cb78d61eb250947fd5f84d6a7,Updated CBForest
snej,2014-07-10 21:33:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/59b977a295953be06cd5fc197c0b6904e0c7a52a,59b977a295953be06cd5fc197c0b6904e0c7a52a,"Merge branch 'master' of github.com:couchbase/couchbase-lite-ios into forestdb

Conflicts:
	Source/CBLDatabase+Internal.m
	Source/CBL_BlobStore.h
	Source/CBL_Revision.h
	Source/CBL_Revision.m"
snej,2014-07-10 21:19:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e4e9814eb3f52126f7acec9f6b9aeab29688fce5,e4e9814eb3f52126f7acec9f6b9aeab29688fce5,"Fix incorrect JSON parse errors handling _changes entries with empty 'revs' arrays

Triggered by a recent Gateway commit (1da4ee4) -- it now sends _changes entries when
the user's settings change, and those entries have an empty 'revs' array.
Fixes #384 (I think)"
jessliu,2014-07-09 18:07:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7ecb6c4edd5f14cde2316ce24b2e4b2ca81092fa,7ecb6c4edd5f14cde2316ce24b2e4b2ca81092fa,"Quick documentation link update

Moving from docs.couchbase to developer.couchbase."
snej,2014-07-08 21:46:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87f32616d405d00da798a45450c15fa97aa3485c,87f32616d405d00da798a45450c15fa97aa3485c,"Fixed: Puller checkpoint not updated on 404 error getting a document

CBLPuller needs to recognize permanent failures downloading revisions.
Fixes #377"
snej,2014-07-08 19:08:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf9d665b6ad8e9812f2804046a2bd9c2dd7be63e,cf9d665b6ad8e9812f2804046a2bd9c2dd7be63e,Updated forestdb with a fix for the regression.
snej,2014-07-08 00:14:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ca3018e23cc4e0fdc08d1d2c187d56e6789a12b3,ca3018e23cc4e0fdc08d1d2c187d56e6789a12b3,"Allow customization of iOS file protection settings

Added CBLManagerOptions.fileProtection.
Made CBLBlobStore default to using CompleteUntilFirstUserAuthentication.
Fixes #374 (I think)"
snej,2014-07-07 20:16:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4113f013175ca98e35eca17a04066a7e2500ed0d,4113f013175ca98e35eca17a04066a7e2500ed0d,Log revision trees on get/save of doc. Revert forestdb due to a bug.
snej,2014-07-06 19:47:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e8cbc2681af8b1c31a79f8a0bc4ac70f89003bc,6e8cbc2681af8b1c31a79f8a0bc4ac70f89003bc,Upgrade to latest forestdb.
snej,2014-07-06 19:47:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/970c552039350264d96a3ec8e7746bfbb64a8985,970c552039350264d96a3ec8e7746bfbb64a8985,Renamed CBLDatabaseImport --> CBLDatabaseUpgrade. Made it log less.
snej,2014-07-06 19:28:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed8901589599cab6bbb3db8809ab9efdec6a18dc,ed8901589599cab6bbb3db8809ab9efdec6a18dc,"Fixed compile issue for non-ARC client apps

Somehow Clang didn't like the declaration of CBLReplication.authenticator
in a non-ARC compile. Added 'strong' attribute to it."
snej,2014-07-06 19:07:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd0d11cdf087c0856b0573a9cc9b0f4b53cd8b3a,dd0d11cdf087c0856b0573a9cc9b0f4b53cd8b3a,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Demo-iOS/iOS Demo-Info.plist"
snej,2014-07-06 19:00:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea3e037bae003097959098f0ceda84628cb6bde6,ea3e037bae003097959098f0ceda84628cb6bde6,"Renamed test apps & their targets

""Grocery Sync iOS Demo"" --> ""CBL iOS Test""
""CBL Mac Demo"" --> ""CBL Mac Test"""
snej,2014-07-04 05:41:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/16fde7f3349c60b89729551488e0e2c9fcf239ce,16fde7f3349c60b89729551488e0e2c9fcf239ce,"Xcode 6 compatibility

The module-import feature didn't like the extension interface of
CBLDatabaseChange being in CBLInternal.h, so I moved it to
CouchbaseLitePrivate.h. Still not entirely sure what was going on, but
this way it compiles..."
snej,2014-07-03 21:54:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6020d764ded28b51c6d4cee6ef1736b98cd3aff,b6020d764ded28b51c6d4cee6ef1736b98cd3aff,"Re-enabled wal_flush_before_commit, and set up a forestdb log callback"
snej,2014-07-03 20:43:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fb7a64924618be6c8c9f4b01cc71b894d7a05f43,fb7a64924618be6c8c9f4b01cc71b894d7a05f43,Improved local-doc access (workaround for Traun's problem)
snej,2014-07-01 01:59:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a9235c607fc49dde891a8d9af8f19bf2ec66419,1a9235c607fc49dde891a8d9af8f19bf2ec66419,Fixed bug in handling of limit and skip in getAllDocs
snej,2014-07-01 01:27:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/692fd85457936a056fb69793e7740caaa92a8b2d,692fd85457936a056fb69793e7740caaa92a8b2d,"Fixed a subtlety of doc insertion

allowConflict=YES in -putRevision: allows a duplicate revision to be
created but only if the _rev property was given; it doesn't apply if
creating a new document. (Caught by the functional test suite.)"
snej,2014-06-30 23:33:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b4dec5cd079a92593a9305b70b82c6fd195738d,3b4dec5cd079a92593a9305b70b82c6fd195738d,Fixed skip/limit options to getAllDocs
snej,2014-06-30 22:12:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f24a9edc7affd2f1f88b3ea9a03a5101e7b0823,1f24a9edc7affd2f1f88b3ea9a03a5101e7b0823,"Fixed behavior of doc purging

The new ForestDB-based implementation wasn't compatible with version 1.0
or CouchDB. Brought its behavior back in line."
snej,2014-06-30 22:07:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66784213240c96fc08f9c155d3f2ba9dc928a42e,66784213240c96fc08f9c155d3f2ba9dc928a42e,Fixed test failure involving doc validation
snej,2014-06-30 17:48:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33c36de4a40296d6aa7913df182527cbf13261c5,33c36de4a40296d6aa7913df182527cbf13261c5,"Some db importer bug-fixes

* Better error logging
* Some old databases didn't yet have a 'revs.no_attachments' column, so
  don't rely on it
* On failure, restore the old attachments directory
* Don't bother upgrading the old _replicator db (its name will be
  rejected as illegal anyway); just delete it."
snej,2014-06-27 01:50:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/346d494b2ce415fab57f1023ea58191e6e7729ef,346d494b2ce415fab57f1023ea58191e6e7729ef,"Attachment handling fixes & improvements

* CBForest now tracks whether a revision/doc has attachments
* garbageCollectAttachments skips docs with no attachments
* -forceInsert: processes attachments now
* Implemented onlyAttachments flag of -getPossibleAncestorRevisionIDs:
* DB importer now needs to copy the attachment dir before importing docs"
snej,2014-06-26 22:25:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d35df90ddbf68252e0f6425480849fa571c59a32,d35df90ddbf68252e0f6425480849fa571c59a32,Code cleanup.
snej,2014-06-26 21:27:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c8855551a9c4f3258b815ea54734e196ebb62fef,c8855551a9c4f3258b815ea54734e196ebb62fef,"Oops, missed some changes in the last commit"
snej,2014-06-26 20:31:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78dad0332fe22f8b4b245d8cdc14dcc94ad7bfed,78dad0332fe22f8b4b245d8cdc14dcc94ad7bfed,Further optimizations for document insertion.
snej,2014-06-25 23:08:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74c4170d67675a4a343f02c9ab1243d4fd6d755f,74c4170d67675a4a343f02c9ab1243d4fd6d755f,Finished implementation of v1.0 database importer.
snej,2014-06-25 21:29:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b5a381164370657a8dd46bc15d8f6d0452167cf,8b5a381164370657a8dd46bc15d8f6d0452167cf,WIP: Implementing import from v1.0 SQLite database format
snej,2014-06-24 21:36:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76c6ba7893dd671f5dd07248984185bb9386de9e,76c6ba7893dd671f5dd07248984185bb9386de9e,Minor changes to get everything running again after the merge
snej,2014-06-24 21:28:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76d7dea46998037716231a3e966dabc4388830e6,76d7dea46998037716231a3e966dabc4388830e6,"Merge branch 'master' into forestdb

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/API/CBLQuery.m
	Source/API/CBLView.m
	Source/API/Extras/CBLIncrementalStore.m
	Source/CBL_Database_Tests.m"
snej,2014-06-24 18:34:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f6a3d8e686b897310e12071cdf07954a35960d64,f6a3d8e686b897310e12071cdf07954a35960d64,"Merge pull request #345 from sazze/master

Fixes assertion failure in CBLChangeTracker when no data received on socket

Fixes #337"
snej,2014-06-24 18:26:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fb2d1eae80a6c314d1edd23dfe7edbacf87b78fb,fb2d1eae80a6c314d1edd23dfe7edbacf87b78fb,"Use more-correct code to dynamically dispatch to handler method in CBL_Router

Technique described at: http://stackoverflow.com/questions/7017281
This might fix a reported crash handling a GET request in 64-bit iOS (#360)"
snej,2014-06-24 16:54:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45e26e4376cce2e18e2665a84aebd2d7a28230cc,45e26e4376cce2e18e2665a84aebd2d7a28230cc,"Fixed: Database-change notifications weren’t delivered on dispatch queues

If the CBLManager.dispatchQueue property is set, kCBLDatabaseChangeNotification notifications weren’t
being delivered. This in turn was causing CBLLiveQuery instances not to re-run the query and update.
Fixes #364 (again!)"
snej,2014-06-24 03:52:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5647350b9a483c48134c5f27af4a2ed8a245c8f2,5647350b9a483c48134c5f27af4a2ed8a245c8f2,"Make CBLQueryEnumerator implement NSFastEnumeration

This makes for(in) loops more efficient."
snej,2014-06-24 03:52:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c0479ad89a5b077a925a44cf64f5476e88ec708,2c0479ad89a5b077a925a44cf64f5476e88ec708,"CBLCreateUUID creates shorter strings (with more entropy)

Use base64 instead of hex to encode the UUID."
snej,2014-06-24 03:51:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2979295fa8baccac158f16b3d555a4837ac5e902,2979295fa8baccac158f16b3d555a4837ac5e902,More optimizations
snej,2014-06-22 06:42:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd3049f45b509b0a65fd4fb639daf4a40d1ca9ea,fd3049f45b509b0a65fd4fb639daf4a40d1ca9ea,Bug fixes & optimizations
snej,2014-06-21 00:27:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/631e9cf735fd53fe8b97f8a014a4980028f8dffb,631e9cf735fd53fe8b97f8a014a4980028f8dffb,Load configuration from config.json
snej,2014-06-20 22:11:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87668217454f9c6c4e1fa3eb3356ffa35d13e595,87668217454f9c6c4e1fa3eb3356ffa35d13e595,CBForest code cleanup
snej,2014-06-20 19:17:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8752ed9e2b93da60efd50e430c9c98d7332c1cf0,8752ed9e2b93da60efd50e430c9c98d7332c1cf0,Get iOS targets to build
snej,2014-06-20 01:25:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b35e8eebcc8ebfc804f667fff5186ef4d75b94c1,b35e8eebcc8ebfc804f667fff5186ef4d75b94c1,All unit tests pass!
snej,2014-06-20 00:44:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/151ce36d4c11d10ec0a4ce41bfec7f809ea2eb06,151ce36d4c11d10ec0a4ce41bfec7f809ea2eb06,"Added property CBLReplication.suspended to support apps that do background fetches

The app delegate’s -application:didReceiveRemoteNotification:fetchCompletionHandler: method
should set replication.suspended=NO, wait for the replication to download the new stuff, and
then set replication.suspended=YES before finishing.

NOTE: This is not part of the official cross-platform API, rather an
iOS-specific addition.

Fixes #339"
snej,2014-06-19 22:39:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f515e25af22b7ecd678104132cb337151d3b7635,f515e25af22b7ecd678104132cb337151d3b7635,"Fixed: CBLQuery doesn't call observer on dispatch queue

Added a unit test to exercise running CBLQuery on a dispatch queue.
Fixes #364"
snej,2014-06-19 20:57:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4d96a8b5361ea697e2e3d4751b0ff1e5c7c7b12f,4d96a8b5361ea697e2e3d4751b0ff1e5c7c7b12f,"Added CBLManager.excludedFromBackup property

Note that this defaults to NO. For a lot of iOS apps it will probably make sense to use YES,
but I was leery of making Couchbase Lite default to a setting that could lose user data. I’d
rather the developer explicitly set this.
Fixes #357"
snej,2014-06-19 20:01:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a0af502d33e2a133d46492d11f2c73d15f4ccdc,2a0af502d33e2a133d46492d11f2c73d15f4ccdc,"Re-enabling manual compaction

Currently, ForestDB will crash soon after compacting a database if
""Guard Malloc"" is enabled, due to a buffer overrun. This is a bug in
ForestDB: MB-11483."
snej,2014-06-19 17:30:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c616cf7c562d4586953cf355a5712e19873c3407,c616cf7c562d4586953cf355a5712e19873c3407,Some more bug fixes found by unit tests
snej,2014-06-18 18:31:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/17b9e2a1fd41890a4ad87733df6b84b1d13a31b9,17b9e2a1fd41890a4ad87733df6b84b1d13a31b9,"_all_docs unit tests work now, too"
snej,2014-06-18 15:15:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/59b84630679fd2b7636d247e62dc88c33216543a,59b84630679fd2b7636d247e62dc88c33216543a,Getting CBL_View_AllDocsQuery working
snej,2014-06-18 04:09:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/24aed27bfaafc1dc76f8ab18996fa4f1a7831088,24aed27bfaafc1dc76f8ab18996fa4f1a7831088,All CBLView unit tests pass!
snej,2014-06-16 20:26:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8288e52ea60e8fccecfcbdfae5a09945b1dfeb1,b8288e52ea60e8fccecfcbdfae5a09945b1dfeb1,All CBLDatabase unit tests pass!
snej,2014-06-14 20:12:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ace8772b95e4a9f9a3ad4c00be114842f4246ce1,ace8772b95e4a9f9a3ad4c00be114842f4246ce1,CBL_Database_CRUD unit test passes!
snej,2014-06-13 22:58:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c4f51bb3036c21302dea6fea12554a27f1987e4,8c4f51bb3036c21302dea6fea12554a27f1987e4,"WIP: Fuck yeah, it compiles and links!"
snej,2014-06-11 22:06:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ca076b08ccade307f5763e43c081efc3e665a1e,1ca076b08ccade307f5763e43c081efc3e665a1e,"Make [-CBLQueryRow description] not crash if the row's value is nil

Fixes #318"
snej,2014-06-11 22:02:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b347adde2196b3260b03fbd4853e28e9ab8ee5b4,b347adde2196b3260b03fbd4853e28e9ab8ee5b4,"Fixed some mistakes in CBLQuery doc-comments

Fixes #342. Fixes #343."
snej,2014-06-05 00:57:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c22ce7020f2893c1c8af25296216214985fe579,2c22ce7020f2893c1c8af25296216214985fe579,Xcode 6 compatibility. Build a module. More Obj-C syntax modernization.
snej,2014-06-11 21:55:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/573be6f7cb11ec71f1c42697297618af9994e8be,573be6f7cb11ec71f1c42697297618af9994e8be,"Merge pull request #347 from hermanccw/fix-346

Hide password in URL logged by CBLSocketChangeTracker

Fixes #346"
snej,2014-06-11 21:54:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d5bf0e96d8165516e8b0086da29069d6190a0da6,d5bf0e96d8165516e8b0086da29069d6190a0da6,"Merge pull request #350 from hermanccw/fix-349

Fix infinite loop in -[CBLDocument update:]

fixes #349"
snej,2014-06-11 21:16:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/73a49e11554772c6e25a2d82a0d8bdf37c0f2b53,73a49e11554772c6e25a2d82a0d8bdf37c0f2b53,WIP: Converting to C++ CBForest API (cont'd)
snej,2014-06-04 22:39:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4964a3572efb69178fe7285072112b53c176dc98,4964a3572efb69178fe7285072112b53c176dc98,WIP: Converting to C++ CBForest API
snej,2014-05-12 19:16:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1619686e6e09e446eb208740e043b261277a6add,1619686e6e09e446eb208740e043b261277a6add,"LiteServ.app: Fixed assertion failure on quit

Don't close the shared CBLManager."
snej,2014-05-12 19:16:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5cd801f1feeba3f964bafaee9ef069247281ff3,a5cd801f1feeba3f964bafaee9ef069247281ff3,CBLT-268: Fix version # displayed in LiteServ About-box
snej,2014-05-12 02:30:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d4ca2f356cd4ee2bdf37723153bccf06ba591c5,8d4ca2f356cd4ee2bdf37723153bccf06ba591c5,"Updated to latest ForestDB (config changes, auto-compact)"
snej,2014-05-10 00:38:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed49e0c07d3c756eb9b294f3cfca3e5e6da41662,ed49e0c07d3c756eb9b294f3cfca3e5e6da41662,Fixed bundle version strings.
snej,2014-05-10 00:22:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75a0af622669caae2f0d73437cea7cb290f5c452,75a0af622669caae2f0d73437cea7cb290f5c452,"CBForest optimizations, focusing on iOS devices"
snej,2014-05-09 14:44:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5df934fb4497458d6216fb1d83ab8ed610185013,5df934fb4497458d6216fb1d83ab8ed610185013,"Doc-insertion optimizations, including async db writes."
snej,2014-05-08 21:59:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6185b98765cccb82956a68655be50fd499973c5b,6185b98765cccb82956a68655be50fd499973c5b,(fixes for canonical JSON)
snej,2014-05-08 20:20:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bac9be868f0e7bf532b6907462fe061022efef8a,bac9be868f0e7bf532b6907462fe061022efef8a,Fixed a logic error in yesterday's commit 1d73dec
snej,2014-05-08 20:19:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5fced6c1a2c750aac4a8e06a154b04bff97f0c9,a5fced6c1a2c750aac4a8e06a154b04bff97f0c9,"Optimizations to CBLCanonicalJSON

* Sped up encoding numbers quite a bit (this was actually a noticeable
  performance issue during bulk inserts of documents.)
* Reordered the class testing in -encodeObject: to check for NSNull last
  because it's rarely used."
snej,2014-05-07 20:50:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d73dec52d42fc18e4e532a359c8e33d367eb1c1,1d73dec52d42fc18e4e532a359c8e33d367eb1c1,"Optimization: Don't update LiveQuery if view update doesn't change anything

* CBLView tracks the last sequence at which anything changed in the
  index (lastSequenceChangedAt). This may be less than lastSequenceIndexed.
* CBLQueryEnumerator.stale returns NO if the view index is up to date and
  the lastSequenceChangedAt hasn't changed since the query ran.
* CBLLiveQuery doesn't send a notification if the view updates but its
  index doesn't change."
snej,2014-05-07 20:47:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/89ae3c2dbb923602ceb234bba15191938b7cf4fe,89ae3c2dbb923602ceb234bba15191938b7cf4fe,Better mapping of CBForest errors to CBL status codes
snej,2014-05-06 18:51:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eba8ab1a2bd105ad96b49b636a15c0b7d1a6b0a8,eba8ab1a2bd105ad96b49b636a15c0b7d1a6b0a8,"Lowered ForestDB cache sizes, fixed an insertion bug, fixed target"
snej,2014-05-05 23:44:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/88602386b6eef99f872a9ca2e5f65734464f2aaa,88602386b6eef99f872a9ca2e5f65734464f2aaa,Fixed crash calling -description of CBLQueryRow with a nil value
snej,2014-05-05 22:53:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c1cf2a97b37a0b1b06bdfd65cc0682d4b5ae39e,4c1cf2a97b37a0b1b06bdfd65cc0682d4b5ae39e,"Oops, fixed some mistakes in the last commit"
snej,2014-05-05 22:41:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25b9ffcc1f4d68063c8a184f94530a0bb80a9884,25b9ffcc1f4d68063c8a184f94530a0bb80a9884,"Limited full-text search support

* Need to set the view's indexType to kCBLFullTextIndex.
* Query's fullTextSnippets and fullTextRanking are ignored.
* Query rows are normal CBLQueryRows, not FBLFullTextQueryRows.
* In a query row only the docID is meaningful."
snej,2014-05-05 19:48:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/17a2e1e89fb59a114353d6c1f77d9df7747d5a7c,17a2e1e89fb59a114353d6c1f77d9df7747d5a7c,"On Mac, link against CBForest static lib, not framework

That way clients don't have to link the CBForest.framework too"
snej,2014-05-05 00:03:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/97e888978ffe137876ee7636f53bae22b77d7f21,97e888978ffe137876ee7636f53bae22b77d7f21,"Don't store sequence in CBL_Revision on document put

This doesn't have any benefits yet, but will eventually let me make
puts asynchronous (since the sequence number is only known after the
put completes.)"
snej,2014-05-02 23:45:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43873d9ddd34ec1a97561409d2061d9ed6bf6838,43873d9ddd34ec1a97561409d2061d9ed6bf6838,Removed sqlite3-unicodesn submodule
snej,2014-05-02 19:15:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0028f6f9b4c0a1927d19fded7e53aacfd591cf76,0028f6f9b4c0a1927d19fded7e53aacfd591cf76,"Fixes for replication unit tests, and updated CBForest."
snej,2014-05-02 19:14:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3164e6fe08a476ae058f039a11ce71d82d5f9f95,3164e6fe08a476ae058f039a11ce71d82d5f9f95,Fixed attachment bodies not getting loaded in doc requests
snej,2014-05-02 18:29:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/477c2e239304cf747866e8ae932600d35f58fc34,477c2e239304cf747866e8ae932600d35f58fc34,Merge branch 'master' into forestdb
snej,2014-05-02 17:55:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e5b49185d0ee99e6c1e472a5c69b7ea9a105f4a,5e5b49185d0ee99e6c1e472a5c69b7ea9a105f4a,"Fixed: WebSocket _changes feed wouldn't connect over SSL

It would try to connect over plain HTTP and fail, because I put the
-startTLS: call too early.
Also, I enabled cert hostname verification, which is an important safe-
guard against MITM attacks.

Fixes #332
Fixes #333"
snej,2014-05-02 15:05:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cfca2bf414dbf32e153789318c4ac836f0bda2a1,cfca2bf414dbf32e153789318c4ac836f0bda2a1,Cleaned up a few nits the static analyzer noticed.
snej,2014-05-02 15:02:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b9393aabeec32d877fb2b5b13eb9cc4250ddf1e,0b9393aabeec32d877fb2b5b13eb9cc4250ddf1e,Refactored doc-loading. Avoid reading doc twice when adding metadata.
snej,2014-05-01 20:48:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7cdfb58689be280d79e6d079a4148ea26e07ac7,b7cdfb58689be280d79e6d079a4148ea26e07ac7,"Moved CBLView+Internal.m into CBLView.m.

No functional changes, just reorganizing source files."
snej,2014-05-01 18:27:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/14671a61f18d82a6b43b8c2024a8b4bd66dbaae4,14671a61f18d82a6b43b8c2024a8b4bd66dbaae4,"Close view indexes after a minute of inactivity, or on low-memory warning."
snej,2014-05-01 15:49:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35999b84003d2218d8ec2ee36b962f6da846cd67,35999b84003d2218d8ec2ee36b962f6da846cd67,"Merge pull request #324 from couchbase/cblite_java_issue_164

Verify that revisions with identical content have the same rev id."
snej,2014-05-01 14:45:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/130dafaaf57a5a6eaf0cd697fbf970c5a26387aa,130dafaaf57a5a6eaf0cd697fbf970c5a26387aa,Merge branch 'feature/issue_326'
snej,2014-05-01 14:44:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a75c314413153a54135a1274f878c058cd69c0b,2a75c314413153a54135a1274f878c058cd69c0b,"Fixed regression where unchanged attachments get re-sent on every push

Fixes #326"
snej,2014-04-30 20:14:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed0926d931df05ca3ff0f33fc25fb4450174eae5,ed0926d931df05ca3ff0f33fc25fb4450174eae5,"Some build fixes

* Fixed a typo that broke the iOS build
* Add CBLAuthenticator.h to framework headers directory"
march44,2014-04-29 16:22:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ecf087fe080feef5387721e5b534fa6be3eee181,ecf087fe080feef5387721e5b534fa6be3eee181,Added test for behaviour of attachments not being push replicated for new document revision if only JSON body is updated.
snej,2014-04-29 03:50:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7babd5ed277b583c883aa418d6ad97973a7e34b,b7babd5ed277b583c883aa418d6ad97973a7e34b,Improved CBForest enumerator implementation
snej,2014-04-28 20:06:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be613766b853c9eb0c855b5b7d405853059a19af,be613766b853c9eb0c855b5b7d405853059a19af,Finally converted CBLQueryOptions from a struct to an Obj-C class.
snej,2014-04-28 16:25:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff39f5dcb3b05c26d3ed372a2913c02a9e342afe,ff39f5dcb3b05c26d3ed372a2913c02a9e342afe,WIP: Query enumeration
snej,2014-04-25 22:14:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01fcfb3dd28de424bd834b3ea7ba214417690025,01fcfb3dd28de424bd834b3ea7ba214417690025,Updated to latest CBForest (lots of GCD optimization)
snej,2014-04-25 22:13:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d83521bcedd07ccd53636e15c15ff84a2f20b7e,9d83521bcedd07ccd53636e15c15ff84a2f20b7e,"Overhauled the view performance test in DemoAppDelegate.m

It's now a copy of Ashvinder's view index/query test."
snej,2014-04-25 00:03:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec9e759aa6b3cbcdfa243d63cc3711d5d0e51f4c,ec9e759aa6b3cbcdfa243d63cc3711d5d0e51f4c,Using updated CBForest enumeration API (faster!)
snej,2014-04-23 22:26:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6ab31ec5818d2440edc6d6d8a5c18c9a8d6df6ee,6ab31ec5818d2440edc6d6d8a5c18c9a8d6df6ee,"Overhauled project/build versioning.

* Existing CURRENT_PROJECT_VERSION setting is used as the ""serial
  number"" of the build. This will be set only by the automated build
  environment (not checked into the project.)
* A custom build setting CBL_VERSION_STRING defines the ""marketing
  version number"", e.g. ""1.0"" or ""1.1 beta 3"". This is checked into
  the project but will be overridden by the automated builds.
* An optional custom build setting CBL_SOURCE_REVISION contains the Git
  revision ID of the source code. This is only set by automated builds.
* The result of CBLVersionString() is generated from the project version
  and version string.
* The HTTP User-Agent header sent by the replicator is generated from
  the version string and OS/platform name (Mac OS X or iOS.)
* All three versions are logged at startup time using Log()."
snej,2014-04-23 22:20:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5de1c782cd79acf02eebd39ed1092a9ade457b89,5de1c782cd79acf02eebd39ed1092a9ade457b89,"Oops, fixed a compile error from the previous commit"
snej,2014-04-21 21:34:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf4dcc3e1e98ac3a54a74dc71a069228e6bbb7a3,cf4dcc3e1e98ac3a54a74dc71a069228e6bbb7a3,"API Change: Added set/delete cookie methods to CBLReplication

This is used for setting custom session/auth cookies. Most useful if
the cookie was returned from a different subdomain and should also be
used with the replication server."
snej,2014-04-21 01:46:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf7f0cc78b5a4686da3f5c1faec2ca7842c88ba3,cf7f0cc78b5a4686da3f5c1faec2ca7842c88ba3,Optimizations to CBForest indexer
snej,2014-04-20 00:36:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81aa0084b6a9d8f18f678e12b4cd8b6c565c340a,81aa0084b6a9d8f18f678e12b4cd8b6c565c340a,Updated CBForest (more efficient by-sequence iteration)
snej,2014-04-19 23:38:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e90a5413590edfccca54797a856b7c867a97b342,e90a5413590edfccca54797a856b7c867a97b342,Added view test based on Ashvinder's test#12. Fixed a bug in CBForest.
snej,2014-04-19 22:03:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c2004a71d5b20a7c9518f9ad39dd39e0357069e,0c2004a71d5b20a7c9518f9ad39dd39e0357069e,"Removed sqlite3-unicodesn sources, and libsqlite3.dylib."
snej,2014-04-19 20:27:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b9d9b4d3e72415bc01a750c368063abc9875aa10,b9d9b4d3e72415bc01a750c368063abc9875aa10,Reimplemented garbage-collection of attachments.
snej,2014-04-19 16:58:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/46165e393dde50fd7bb0d461760e8c40dae1dac9,46165e393dde50fd7bb0d461760e8c40dae1dac9,Minor cleanup of CBLDatabase+Attachments
snej,2014-04-19 16:58:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6c09932a1156f68c1402dba741be0dc54b5574c2,6c09932a1156f68c1402dba741be0dc54b5574c2,"Wrap a transaction around all code that does a get-update-put.

Now that transactions enforce a single writer, this will prevent race
conditions that overwrite another thread's write."
snej,2014-04-18 20:13:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7281338ab3555ed2bb4ca00590f750ec543a4c15,7281338ab3555ed2bb4ca00590f750ec543a4c15,Got iOS build working.
snej,2014-04-18 16:30:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa253a05b02cfea79d5b6e0b4147cbbf0043b8e0,aa253a05b02cfea79d5b6e0b4147cbbf0043b8e0,Using CBForestDB transactions. All unit tests now pass!
snej,2014-04-17 18:16:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f62f42ffbee63c7fcf905836984f886a8262ff34,f62f42ffbee63c7fcf905836984f886a8262ff34,"Almost all the unit tests pass!

The only holdout is ReplicationWithEncoding -- looks like a
concurrency issue with the main thread not committing the database
changes before the push replicator starts, so it doesn't see them."
snej,2014-04-17 02:21:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd8daecdc4ba87ce97577d5b18a98340428912af,bd8daecdc4ba87ce97577d5b18a98340428912af,CBL_Router tests now pass.
snej,2014-04-16 22:14:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4cb240dbf4e59712c06e9db2c5a5c5ee6083d0f4,4cb240dbf4e59712c06e9db2c5a5c5ee6083d0f4,Finished removing all sqlite dependencies! Removed FMDB submodule.
snej,2014-04-16 21:24:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94c12f09a804f1af0d3a6c4f2478820a6a623ec7,94c12f09a804f1af0d3a6c4f2478820a6a623ec7,Local docs now use ForestDB.
snej,2014-04-16 20:20:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1b9c75b4d724c8454b564f9725d00f5af049394a,1b9c75b4d724c8454b564f9725d00f5af049394a,"Converted attachment code. Unit tests pass.

Attachment metadata isn't stored separately in the db anymore. Instead,
each revision's JSON keeps its _attachments dictionary (in stub form)."
snej,2014-04-16 15:42:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ae423b5983180b8cbb6218af08cdf713783cb75e,ae423b5983180b8cbb6218af08cdf713783cb75e,Updating map fn version clears view index. Also removed more FMDB stuff.
snej,2014-04-16 04:16:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c384ce395a0e4b9287ef14e110824e0db360658f,c384ce395a0e4b9287ef14e110824e0db360658f,"More work on views. The view unit tests pass except for special keys.

* Implemented queries with sets of keys
* Implemented start/endKeyDocID
* Allow view names with ""/"" characters in them"
snej,2014-04-16 03:16:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0c87eca095f3d57be496e3779c5b535e48f6c68,f0c87eca095f3d57be496e3779c5b535e48f6c68,WIP: Working on views. Some basic indexing/querying works.
snej,2014-04-15 22:19:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d4ffe54c752b7fa4b62dd1dc8ea531da1ffee58a,d4ffe54c752b7fa4b62dd1dc8ea531da1ffee58a,Implemented all-docs query using ForestDB.
snej,2014-04-15 15:40:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7ebfe4babea1f9f857463da741519e8c8343347,b7ebfe4babea1f9f857463da741519e8c8343347,Reimplemented -purgeRevisions: using ForestDB.
snej,2014-04-15 16:18:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9d1fb38814ee85a0d539db2ef2f27c6421cf0686,9d1fb38814ee85a0d539db2ef2f27c6421cf0686,"Revert ""CBLT-268:  product version now set to a token, instantiated at build time:""

This reverts commit ee5212dd5c79c0e40587a55659478d5eb621d01d."
snej,2014-04-15 03:19:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/603f1476a07a4f375ee3830e57597db13c8fee39,603f1476a07a4f375ee3830e57597db13c8fee39,WIP: Almost all usage of 'revs' table is now using CBForest instead.
jessliu,2014-04-15 00:29:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/afc1e5cfb5ec30c77d8d7d5168081518bcba8326,afc1e5cfb5ec30c77d8d7d5168081518bcba8326,"Comply with EE change for 2014-04-14

This is for packaging only."
snej,2014-04-13 00:57:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9ded8971cf6e00914ee9ff4fa51fb99c1cee484,a9ded8971cf6e00914ee9ff4fa51fb99c1cee484,WIP: Added ForestDB version of -forceInsert:
snej,2014-04-12 22:14:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/55fd2d54132fe9f96c27a13fcd6dabe242a47f32,55fd2d54132fe9f96c27a13fcd6dabe242a47f32,WIP: ForestDB version of -putRevision:...
snej,2014-04-12 06:05:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/06de1a5a0c7628c567bd2e0875c76c2fdaf54ccb,06de1a5a0c7628c567bd2e0875c76c2fdaf54ccb,Added CBForest (not used yet). Wrapped db file in a directory.
snej,2014-04-12 00:10:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/db1e1a90b0cc17d4fc3ccc319862f1ab1101201f,db1e1a90b0cc17d4fc3ccc319862f1ab1101201f,Bumped version number to 1.5 for GA
snej,2014-04-11 22:10:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9d4bb78bc11f4b3e4e050fe8c3ac3231b045c26,a9d4bb78bc11f4b3e4e050fe8c3ac3231b045c26,"Catch uncaught exceptions in CBLDatabase doAsync etc.

Otherwise GCD tends to kill the process, which means unit testing can’t complete.
Fixes #309"
snej,2014-04-11 20:24:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a5042e1fbe483f7efaee844e096fb80a0a945a2,0a5042e1fbe483f7efaee844e096fb80a0a945a2,Added some missing copyright/license comments.
snej,2014-04-11 20:23:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e51a2ea5901bded4e1d7ef967bf4e1e46281904,9e51a2ea5901bded4e1d7ef967bf4e1e46281904,"API Change: Added CBLAuthenticator

Pre-existing CBLReplication auth methods are still present,
but the ones supported by CBLAuthenticator are deprecated.
REST API replication auth works as before."
jessliu,2014-04-08 01:20:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ae53aeca90fa4dd5110ca65a9d4a84311be37cce,ae53aeca90fa4dd5110ca65a9d4a84311be37cce,"Updating LICENSE.txt to 2011-12-07 CE License

This is per requirement"
snej,2014-04-07 18:03:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4d18eef6dfabdf7f2354adfe2e77e2c253a3954e,4d18eef6dfabdf7f2354adfe2e77e2c253a3954e,Added a unit test verifying revpos changes when attachment is updated.
snej,2014-04-03 14:42:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6811afd89c0f1c47223d91cd75b8e71782e466f7,6811afd89c0f1c47223d91cd75b8e71782e466f7,"Safer handling of unexpected revisions returned from _bulk_get

Don’t process such a revision; it’ll cause an exception later.
For #300"
snej,2014-04-02 22:02:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/327ef6e775533a79a46b0e84cda1d86d5e2cd829,327ef6e775533a79a46b0e84cda1d86d5e2cd829,"Fix replicator checkpoint issue by making sure checkpoint doc ID stays constant

Memoize the value returned by .remoteCheckpointDocID so it stays the same even
if a setting changes — namely, the -stop method sets _continuous=NO for some reason.
Fixes #301"
snej,2014-04-02 19:58:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/547eb8bddf8ecf25b36587716a65440605fe46af,547eb8bddf8ecf25b36587716a65440605fe46af,"Removed support for “_conflicts” property in doc passed to map blocks.

It didn’t work quite right (could miss some conflicts) and taking it out speeds up
view indexing a little bit.
Developers who want to find conflicts should use an allDocs query with the
only-conflicts option instead.
Fixes #159"
snej,2014-04-01 22:20:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb1842dbbb0095e4c1c0d0c99283af8ccc5fb4ca,bb1842dbbb0095e4c1c0d0c99283af8ccc5fb4ca,"Merge pull request #302 from couchbase/delete_conflict_test

Unit test regarding conflict resolution behavior"
snej,2014-03-31 18:46:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27c4ccdf32bfa441f2a76dfd2ce7302e5d3cc048,27c4ccdf32bfa441f2a76dfd2ce7302e5d3cc048,"Removed “Slow comparison” log message from JSON collator

This wasn’t supposed to be checked in…"
snej,2014-03-31 16:45:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5984543fed10accf4d0532d1e0ffd5ea987142aa,5984543fed10accf4d0532d1e0ffd5ea987142aa,"Reduced max memory usage of push replicator

- Added some fixes to avoid keeping redundant data in memory
- Constrained max size of a _bulk_docs request to keep the object tree from getting too large
Fixes #270"
snej,2014-03-27 23:40:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0469300672a2087feb46b84ca498facd49e0066,e0469300672a2087feb46b84ca498facd49e0066,"Fixed -[CBLDatabase existingDocumentWithID:] not returning nil for nonexistent doc

(Reported in post to mailing list)"
snej,2014-03-27 17:56:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cae8f21d7a0ba9c3a5d2bf145a0e00c00732a2c2,cae8f21d7a0ba9c3a5d2bf145a0e00c00732a2c2,"Added CBLIncrementalStore source files to Extras

The “Extras” folder generated by the iOS build target now includes CBLIncrementalStore.{h,m}.
Also, the README in that folder has been updated to describe it."
snej,2014-03-27 17:39:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8ad681da02138b14a068f8eaf698ca0a28a67f4a,8ad681da02138b14a068f8eaf698ca0a28a67f4a,"Back to $ARCHS_STANDARD for iOS builds

Removes the “Release-64bit” build configuration.
With Xcode 5.1+, the regular iOS frameworks will include 64-bit.
With earlier Xcodes only 32-bit.
NOTE: This commit breaks the automated Jenkins build.
The build script will need to remove the steps to build with Release-64bit,
and to copy extra 64-bit frameworks."
snej,2014-03-25 14:32:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f09690de7a4d9052790911e83732a1a17467eed,5f09690de7a4d9052790911e83732a1a17467eed,"Declare public C functions as `extern “C”` when compiled in C++ mode

Otherwise Obj-C++ apps get link errors using functions like CBLTextKey.
Fixes #291"
snej,2014-03-24 21:27:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/65e1d72907f4459971954a911c7e6b1845123dcf,65e1d72907f4459971954a911c7e6b1845123dcf,Tweaked logging in CBLReplication.m some more.
snej,2014-03-24 21:26:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9ec0a98848df872a2c649a4bef2c271e6156c79,c9ec0a98848df872a2c649a4bef2c271e6156c79,"Finally fixed the multipart JSON-decoding bugs

Fixes #288
Fixes #289"
snej,2014-03-24 18:15:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb8152df9682c9c62a4d408f0eef878c27c4c3ed,cb8152df9682c9c62a4d408f0eef878c27c4c3ed,Tweaked some logging in CBLReplication.m.
snej,2014-03-24 18:15:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b2d67f95ac3cebcb23269912ae4db46b1b7a00b,3b2d67f95ac3cebcb23269912ae4db46b1b7a00b,"Fixed another assertion-failure when a _bulk_get download can’t parse a JSON doc

Found a piece that was missing from the prior fix 24f6381. The same assertion failure was occurring,
under slightly different circumstances.
Fixes #288 (speculatively). Also see #271, #232."
snej,2014-03-22 23:20:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d8dc9244527532c59728a123e363622c265a6ed2,d8dc9244527532c59728a123e363622c265a6ed2,"Fix for when transformer block rejects a pulled doc

Needed to mark the doc's sequence as no longer pending. Otherwise the
checkpoint doesn't advance, and the puller will keep trying to pull that
doc on subsequent runs."
snej,2014-03-20 23:06:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ac8e4175747e8716bd397a6af750dffddf53913e,ac8e4175747e8716bd397a6af750dffddf53913e,"Test class names should start with “CBL”

They’re baked into debug builds of the framework, and I just ran into a name conflict
when trying to build a developer’s app with a debug CBL, because he had a class
called “TestModel” too."
snej,2014-03-20 23:05:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/081d703c5c82b3649c380e44dbe49e41263e0994,081d703c5c82b3649c380e44dbe49e41263e0994,"Thread-safety fix in CBLWebSocketChangeTracker

I haven’t seen this cause problems, but fixed it just in case."
snej,2014-03-20 20:05:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3649df81df0b3aafc0e85dc5627e7a1a87dd010e,3649df81df0b3aafc0e85dc5627e7a1a87dd010e,"Replication encoding/encryption improvements

* Transformation block can now return nil to skip the document (useful on pull if it’s invalid)
* Assign correct revpos to an attachment created by a transformer during a push"
snej,2014-03-20 15:33:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/119dcdb388cb2ca60020b04b9958c3ee9768cba2,119dcdb388cb2ca60020b04b9958c3ee9768cba2,"CBLModel improvements (-willSave:, empty _attachments)

* Made -willSave: public (it was always meant to be but I forgot to add it to the header)
* Fixed some situations where a model could end up with an _attachments dictionary with zero elements
* -propertiesToSave wasn’t including _id prop if doc was new; caused trouble for signed documents."
snej,2014-03-19 17:50:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f46b69ff6fc81f5135fd6968cd45d0e0d3549a5d,f46b69ff6fc81f5135fd6968cd45d0e0d3549a5d,"Puller was getting confused receiving JSON-only docs (no attachments) with gzip response encoding

It was looking at the “Content-Encoding: gzip” header and thinking that this was a JSON _part_ that
was encoded, so it tried to decode it itself. Whereas the top-level gzip decoding is done already by
NSURLConnection. So it was trying to gzip-decode plaintext, oops.
Fixes #281"
snej,2014-03-19 00:21:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2ab1d99ed1f904b4272404415bef6c109eaab8e,f2ab1d99ed1f904b4272404415bef6c109eaab8e,"Oops, removed some leftover debugging code from the last commit"
snej,2014-03-18 19:09:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e67e276b7b05a179b0f165be421bcce12dbe80c1,e67e276b7b05a179b0f165be421bcce12dbe80c1,"WebSocket changes feed was sending ‘since’ to SG as string, not number

This unfortunately caused the changes feed to start from the beginning every time."
snej,2014-03-18 01:00:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33ffa2df37e2351199044bca6d50ca96bbdae3a8,33ffa2df37e2351199044bca6d50ca96bbdae3a8,"Optimizations for view indexing and querying

These shave a significant amount of time off of Ashvinder’s Test 12."
snej,2014-03-16 19:16:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/41226c2453951c6e94675b10120c5a65787df4d2,41226c2453951c6e94675b10120c5a65787df4d2,"Fixed incorrect values from CBLUnsavedRevision and CBLAttachment, for unsaved attachments

CBLUnsavedRevision:
-attachmentMetadataFor: and -attachmentNamed: would return nil for an unsaved attachment.
-attachments wouldn’t return any unsaved attachments.

CBLAttachment:
.length would return 0 for an unsaved attachment."
snej,2014-03-15 23:06:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd50fed7ab1550449e13658001376f8e6c9976e9,dd50fed7ab1550449e13658001376f8e6c9976e9,Removed all deprecated API methods.
snej,2014-03-14 18:11:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ec5e5dc6656c349c80fec9fcacc7335ba3c7ddb,0ec5e5dc6656c349c80fec9fcacc7335ba3c7ddb,"Replication encoding/encryption API now supports attachments.

During a pull, the _attachments objects for large attachments will have
a temporary ""file"" property that points to the local file path where
the attachment data can be found. The transformation block can read this
file, but must not modify it."
snej,2014-03-13 15:41:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6d4394ed3fbc4c466d7744721a0772675eaf8252,6d4394ed3fbc4c466d7744721a0772675eaf8252,"Fixed WebSockets bug with zero-length messages

The WebSocket class broke when it received a zero-length message, which
is what the _changes feed sends when it's caught up.
Fixes #272"
snej,2014-03-12 17:25:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d774a11b44d3e4165453b559a41abfc527cc44cd,d774a11b44d3e4165453b559a41abfc527cc44cd,Fixed a couple of minor warnings reported by Xcode 5.1
snej,2014-03-12 00:54:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c42a6612a3f215e7cb3d894f42fba42f0be4f625,c42a6612a3f215e7cb3d894f42fba42f0be4f625,"Don’t set replication progress to 0/0 when stopping

Instead the progress should remain the way it was.
Also, improved Traun’s great new test for verifying that progress counts make sense.
Fixes #274"
snej,2014-03-12 00:31:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/15930feb51ff5ae7c2fe3ba5ed66139cc6f0b654,15930feb51ff5ae7c2fe3ba5ed66139cc6f0b654,Merge branch 'replicator_observer_issue' of github.com:couchbase/couchbase-lite-ios
snej,2014-03-12 00:25:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/24f6381bf5f130226085c7f98cfe8272fed8d18a,24f6381bf5f130226085c7f98cfe8272fed8d18a,"Fixed an assertion-failure when a _bulk_get download can’t parse a JSON doc

Fixes #232
Fixes #271"
snej,2014-03-10 21:06:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/902aa1fb9c6865c82d4aac1e4770bc96d984a5af,902aa1fb9c6865c82d4aac1e4770bc96d984a5af,Bumped version to 1.495 for beta 3
snej,2014-03-06 23:43:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5fb9707f2f511d5e89b28efb87861e023b0a1b38,5fb9707f2f511d5e89b28efb87861e023b0a1b38,Fixed compiler error in Release build
snej,2014-03-06 23:25:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d8b0e9c5a49b8ddacbd295624e267b7a2a87c665,d8b0e9c5a49b8ddacbd295624e267b7a2a87c665,"Removed CBLReplication.propertiesTransformationBlock from public headers

The API hasn’t been through review, and it’s almost certainly subject to future change because
it doesn’t support attachments. We’ve decided it shouldn’t be exposed in a public header yet.
(See #251)

Clients can keep using it but they’ll need to declare it themselves, like:

@interface CBLReplication
@property (strong) CBLPropertiesTransformationBlock propertiesTransformationBlock;
@end"
snej,2014-03-06 22:34:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/910d71e9de3bf45f23a4a602188efe43f985117c,910d71e9de3bf45f23a4a602188efe43f985117c,More MIME gzip encoding unit tests
snej,2014-03-06 21:57:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2294fa8311bcb727273623715ce29bb0ed341870,2294fa8311bcb727273623715ce29bb0ed341870,"Added unit tests for CBLMultipartDocumentReader, including gzip support"
snej,2014-03-03 19:37:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/08e7668bc15c0d16ab3878964c1a511fe0ae09f4,08e7668bc15c0d16ab3878964c1a511fe0ae09f4,"Minor tweak to unit test to suppress static-analyzer warning

Just marking a variable as unused."
snej,2014-03-03 19:36:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/95d245a3cf9325294dc553ce7876c3d6c49e581f,95d245a3cf9325294dc553ce7876c3d6c49e581f,"Fixed crash in WebSocket-based _changes feed handling an HTTP redirect

Fixes #246"
snej,2014-03-01 01:02:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64f2047c75e60c4cda741211740d3186d5be391d,64f2047c75e60c4cda741211740d3186d5be391d,"Fixed target OS requirements

* Some iOS targets were still set to iOS 5; updated everything to iOS 6.
* Updated Mac OS target to OS X 10.8.
* Added a (strong) annotation to a dispatch_queue_t property in CBLManager.h
to avoid a warning with OS X 10.8+.
* Updated ErrorUtils in MYUtilities to stop using a deprecated function."
snej,2014-02-28 20:35:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78ba766439c94f1a1eea16d689fb247f0c32dd77,78ba766439c94f1a1eea16d689fb247f0c32dd77,"Initialize CBReplication.status to ‘offline’ in the -start call

This makes tracking the status easier. Before this change it would stay at ‘stopped’ for a little while
until the background replicator thread started up."
snej,2014-02-28 19:06:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8e137050240a521e320c334ba483fddc6207cbb,b8e137050240a521e320c334ba483fddc6207cbb,"Replication transformation tweaks

* Assert that the transformation block didn’t alter the “_revisions” property.
* Edited the doc-comments to clarify that all _-prefixed properties have to be preserved."
snej,2014-02-28 00:05:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5ebb91608b651d8c728e1cb8154e71de7391a456,5ebb91608b651d8c728e1cb8154e71de7391a456,"Update README.md

Removed the (out of date) summary of the build instructions. Let's just have one set of real instructions, on the wiki."
snej,2014-02-27 21:41:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2b870efa9e464446c50a3b143374b4c6479bbcb,f2b870efa9e464446c50a3b143374b4c6479bbcb,"Fix crash caused by premature dealloc of CBLMultipartDocumentReader

See #266"
snej,2014-02-27 21:00:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f2a456872943c13c39bf6a2ca7baf7ccd513b1a7,f2a456872943c13c39bf6a2ca7baf7ccd513b1a7,"Support for transforming/encoding revisions during replication

This enables encryption of documents on the server, for example.
Based on a patch from Alan McKean; thanks!
Fixes #253"
snej,2014-02-27 20:54:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/decdddc2ad759536536e033444728aed3a46fd44,decdddc2ad759536536e033444728aed3a46fd44,"Oops, fixed compiler warning/error introduced in last commit."
snej,2014-02-27 18:28:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/af5d0ba40643f85eb4b77dbb90c63ab11806f61d,af5d0ba40643f85eb4b77dbb90c63ab11806f61d,"Extended draconian thread-safety check to support dispatch queues.

If the CBLManager.dispatchQueue property has been set, databases will check for the
correct queue, _not_ the correct thread."
snej,2014-02-27 16:17:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5804cb7ab75e5b8477883bfdb5cb9eb5d0fbfbf3,5804cb7ab75e5b8477883bfdb5cb9eb5d0fbfbf3,"Made CBLUITableSource.m more portable

Removed usages of MYUtilities so the source file will build in an external app project
with no dependencies other than public Couchbase Lite API. This helps developers who
want to copy the source to extend the class’s functionality."
snej,2014-02-27 15:57:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b1ac032122730dfd5b880d4a5cb480a2291b3827,b1ac032122730dfd5b880d4a5cb480a2291b3827,"Draconian thread-safety check for FMDatabase

People keep trying to call CBLDatabases on multiple threads and don’t understand the generic “database in use”
warnings. So I put in an explicit same-thread test that triggers an unblockable assertion failure with a very explicit
message about CBL thread safety."
snej,2014-02-27 15:22:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/304c0f0787f5284b91658a117313c49e807b8991,304c0f0787f5284b91658a117313c49e807b8991,"CBLDocument.currentRevision should be nil after deleting doc

Fixes #265"
snej,2014-02-24 20:27:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/541220d05131c72e301fcf11b450b136aac076e5,541220d05131c72e301fcf11b450b136aac076e5,"Fixed FMDB memory leak, and removed a now-unused variable.

Leak was introduced in prior FMDB update on 1/24 (c2f6d7e).
Fixes #263."
snej,2014-02-23 22:53:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36c3e70757133a34390717cf0b98363720fdc297,36c3e70757133a34390717cf0b98363720fdc297,"Made newRev.parentRevID work in a validation block

Also, newRev.revisionID will consistently be nil for a newly-added revision,
instead of incorrectly being the parent’s revision ID. (It would be best if it were
the actual new revision ID, but that hasn’t yet been computed by the time the
validation block is called.)
For #233"
snej,2014-02-19 05:24:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f6d0896312cd16c874b874424682b70bb04f9ba,8f6d0896312cd16c874b874424682b70bb04f9ba,"API change: Added -[CBLModel revertChanges]

Fixes #95"
snej,2014-02-16 20:11:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/223fc1a3df2389afd97bcd57c014198eb9658376,223fc1a3df2389afd97bcd57c014198eb9658376,"API change: Added CBLModel.propertiesToSaveForDeletion

(Not part of cross-platform API, though.)
This allows extra properties to be saved in the model’s document when it’s deleted."
snej,2014-02-11 19:38:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7137de5b2b680b82f3d0383e2fa37affa4d83dd7,7137de5b2b680b82f3d0383e2fa37affa4d83dd7,Updated WebSockets-Cocoa and MYUtilities.
snej,2014-02-07 15:04:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c0cfedf33dd9460ffb98ef615c8119b61590855,7c0cfedf33dd9460ffb98ef615c8119b61590855,"Fixed instantiation of nil-valued CBLModel JSON-encodable property

Fixes #247"
snej,2014-02-06 03:36:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5cf97fe858758b1b7953496a3161faa5db896b61,5cf97fe858758b1b7953496a3161faa5db896b61,"DDData should be compiled into CBL itself, not listener

Fixes #246"
snej,2014-02-05 20:52:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c172db5043e6a72408e7b317d085c68043fe63b6,c172db5043e6a72408e7b317d085c68043fe63b6,"Router: Added ""vendor"" property to GET /"
snej,2014-02-05 18:41:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dfc4f718e55f55202ba92ad489c04c2b12c3c1d3,dfc4f718e55f55202ba92ad489c04c2b12c3c1d3,"Router: GET /db/doc?attachments=true should default to multipart

For compatibility with CouchDB. Same goes for ?open_revs.
Fixes #100"
snej,2014-02-05 17:45:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e39ae4781adc83db7134aec945625d5e0305e58,4e39ae4781adc83db7134aec945625d5e0305e58,"Support POST to _changes

When using WebSocket, instead send the options in a JSON message after
opening the connection.
Fixes #110"
snej,2014-02-03 18:50:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d033f77a64dc8e39f02e9fb87d2f983e79c14d43,d033f77a64dc8e39f02e9fb87d2f983e79c14d43,"Implemented CBLQuery.startKeyDocID, .endKeyDocID

As well as the corresponding REST API.
Fixes #111"
snej,2014-02-01 00:08:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91593df49f1e749949abf014e686878addc90c07,91593df49f1e749949abf014e686878addc90c07,Improved the ordering of KVO notifications sent by CBLReplication.
snej,2014-01-30 20:45:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/990f3d3232ac65674586fe09b7b2585a5be2f0c6,990f3d3232ac65674586fe09b7b2585a5be2f0c6,"Return 501, not 404, on JS view query if view-compiler isn’t installed"
snej,2014-01-29 16:39:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa9c98d9c98a5ac11cf690d18a941567b7b13996,fa9c98d9c98a5ac11cf690d18a941567b7b13996,"Fixed another spurious CBLDocumentChange.inConflict value

The logic for setting inConflict in -forceInsert:… was broken. It needs
to check whether the local revision it's going to add a child of is
currently a leaf or not.
Fixes #243."
snej,2014-01-28 00:53:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78b68039641f88dee20a71fd828544bd377161e2,78b68039641f88dee20a71fd828544bd377161e2,"Fixed spurious CBLDocumentChange.inConflict value

When a previously nonexistent document is created via a pull replication,
the inConflict flag was mistakenly getting set (because technically a new
branch of the document is being created; it just happens to be the first
one.)
Fixes #243"
snej,2014-01-27 20:16:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23f513994b25144c219f92a3bc6dac2c6b42813a,23f513994b25144c219f92a3bc6dac2c6b42813a,"Better validation of “_id”, “_rev”, “_deleted”, “_attachments” properties"
snej,2014-01-24 16:49:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2f6d7efc0374255f2958d05db7cb0ae0aec2d35,c2f6d7efc0374255f2958d05db7cb0ae0aec2d35,FMDB fix: Better error handling in FMResultSet
snej,2014-01-22 20:26:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78307ef92c2d98ab1cacec2429b5c862a7afca2f,78307ef92c2d98ab1cacec2429b5c862a7afca2f,"Add “_local_seq” property to doc passed to map block

Its value is the sequence number of the revision. The map function can
emit this as the key (or part of the key) to sort the index chronologically
like a _changes feed."
snej,2014-01-22 20:18:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8146c35059422e98879d6531dee0d7783f2b453a,8146c35059422e98879d6531dee0d7783f2b453a,Fixed a bug in the previous commit’s unit test
snej,2014-01-17 18:44:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f1e8af6aeae9d1d879592104033e13382d69417,7f1e8af6aeae9d1d879592104033e13382d69417,"CBLModel support for CBLJSONEncoding properties with mutable state

See the docs of the new -[CBLJSONEncoding setOnMutate:] method for details.
Also fixed a typo in the name of the -initWithJSON: method.
Fixes #221"
snej,2014-01-17 15:49:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56933dfc631eddbfda8d2e6b3d904bc5d6623da7,56933dfc631eddbfda8d2e6b3d904bc5d6623da7,"API: Renamed CBLVersionString() -> CBLVersion()

Fixes couchbaselabs/couchbase-lite-api#60"
snej,2014-01-17 15:48:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b672e0ca41b636a20967cd4e4383b62e1f2c1be,4b672e0ca41b636a20967cd4e4383b62e1f2c1be,"Improvements to HTML doc generation

* Functions (like CBLVersion, CBLGeoPointToJSON…) are now emitted.
* Moved CBLJSON.* and CBLGeometry.* into API folder so all the public
  headers live in one place, which makes it easier for Doxygen to find
  them.
* Added timestamps to footers of pages."
snej,2014-01-16 16:22:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb27792d982d4197422828244338ba91cecf240c,cb27792d982d4197422828244338ba91cecf240c,"Decode compressed JSON MIME bodies in multipart server responses

Support Gzip Content-Encoding of a document body encoded in a MIME
part (as when downloading a doc with attachments.)
For couchbase/sync_gateway#238"
snej,2014-01-16 16:30:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d5afe611eedcb2348540b2da76525ea954679ac7,d5afe611eedcb2348540b2da76525ea954679ac7,"Compress outgoing doc JSON bodies in multipart format

For #240"
snej,2014-01-15 23:29:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7d54535f08d2d9e6f47adae5000873d08d4187a7,7d54535f08d2d9e6f47adae5000873d08d4187a7,"GZip-compress HTTP request bodies, when server supports it

Compressing requests is somewhat nonstandard. There’s no built-in way to
tell if the server supports it (unlike compressing responses, where the
server can check the request’s Accept-Encoding header.) So yet again we
check for a specific min version of Sync Gateway to decide whether to
enable it.
For #240"
snej,2014-01-14 21:30:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff9946e632aa365dc8e83780619871c5b5a62d36,ff9946e632aa365dc8e83780619871c5b5a62d36,"Made CBLDatabase.lastSequenceNumber faster

Instead of doing SELECT MAX(sequence) FROM revs
it now does SELECT seq FROM sqlite_sequence WHERE name='revs'
The sqlite_sequence table is where sqlite stores the last generated
primary key for that table."
snej,2014-01-13 23:52:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a15baae9f032dc8cd51b9f0e8fd4b7f9bad7a33c,a15baae9f032dc8cd51b9f0e8fd4b7f9bad7a33c,Improved the code coverage checks in the MYUtilities test utils
snej,2014-01-13 21:59:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a3d5e1f412574942329aee6c9cbb030599874f9e,a3d5e1f412574942329aee6c9cbb030599874f9e,"Made CBLCache work correctly on OS X 10.7 (No effect on iOS)

Fixes #238 (speculatively, since I don’t have a 10.7 system to test on.)"
snej,2014-01-13 21:28:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1b47b22bf87a9283a240f3a736585a0b78c391e1,1b47b22bf87a9283a240f3a736585a0b78c391e1,"Oops, fix iOS build breakage from the unit-test reporting change

I forgot iOS doesn’t have NSXML…"
snej,2014-01-13 20:54:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7a7aafd2cd735d291321465b62991ea9a74f5481,7a7aafd2cd735d291321465b62991ea9a74f5481,"Fixed crash closing database when there are unsaved models

Reported on this thread:
https://groups.google.com/d/msgid/mobile-couchbase/33d8a66d-c4b7-47e2-891f-6c7b345df51d%40googlegroups.com"
snej,2014-01-13 19:10:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c24977b8676cbaded23a52972386612c6947100f,c24977b8676cbaded23a52972386612c6947100f,"Fixed crash regression in Listener

The WebSocket library had a conflict with CocoaHTTPServer that caused an
exception when receiving the first HTTP request. Fixed in the WebSocket
library."
snej,2014-01-13 18:52:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0176b713d894c098c99841b13293bd8b49e2093e,0176b713d894c098c99841b13293bd8b49e2093e,"Unit-test framework can now emit a JUnit-compatible XML report file

Add the command-line arg “Test_Report”, and the file will be written to
the current directory as “test_report.xml”."
snej,2014-01-09 23:21:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c3c421c4c8435c467029e6475f43c1b3465ad73f,c3c421c4c8435c467029e6475f43c1b3465ad73f,"Use more-correct NSMapTable options in CBLCache

Fixes an incompatibility with OS X 10.7."
snej,2014-01-09 23:20:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/405eaa4fbe858b11987155af8f48425204e15e96,405eaa4fbe858b11987155af8f48425204e15e96,Fixed some bugs in the Mac test/demo app
snej,2014-01-09 23:17:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/470de391334591741cc108b376f9e08fb6dd0e4c,470de391334591741cc108b376f9e08fb6dd0e4c,"API: Renamed replicationToURL: -> createPushReplication:, etc.

This should have happened before beta 2; apologies…
Fixes couchbaselabs/couchbase-lite-api#68"
snej,2014-01-09 22:46:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d37cb6f8e0fcfb45278616218add1d7d90baf31,8d37cb6f8e0fcfb45278616218add1d7d90baf31,Updated the submodule initialization instructions in the README.
snej,2013-12-20 16:09:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d05943f1b038e0337c4c02d53124850cc9b17ec8,d05943f1b038e0337c4c02d53124850cc9b17ec8,Updated WebSockets-Cocoa submodule.
snej,2013-12-20 15:45:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18deed05c8747668f9c2b8860754badd3474016d,18deed05c8747668f9c2b8860754badd3474016d,Require gateway version 0.91 to use WebSockets
snej,2013-12-19 22:36:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0422158faf50bc8d3c396f59074177cf501836d9,0422158faf50bc8d3c396f59074177cf501836d9,"Don’t use WebSocket for _changes feed if an HTTP proxy is required

…because my WebSocket class doesn’t support proxies yet."
snej,2013-12-18 23:44:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dc258a24216f591b5e954037ce8a10a98a1b3284,dc258a24216f591b5e954037ce8a10a98a1b3284,Implemented -changeTrackerCaughtUp
snej,2013-11-14 01:53:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e871a463da72359178531f50dee030315e0bb333,e871a463da72359178531f50dee030315e0bb333,WIP: WebSocket improvements. Use HTTPLogic class in SocketChangeTracker.
snej,2013-11-13 00:10:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b578ce81a6d370770a755de5b23c41b83ad73f42,b578ce81a6d370770a755de5b23c41b83ad73f42,WIP: WebSocket-based _changes feed is basically working
snej,2013-11-12 19:46:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/502fdf4ff3227dd5a56e13c0e94b91ef5001a68b,502fdf4ff3227dd5a56e13c0e94b91ef5001a68b,Added WebSockets-Cocoa library as submodule
snej,2013-12-18 23:44:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c5a9abd90aedcbd4b5895ecad09362d239d8c35d,c5a9abd90aedcbd4b5895ecad09362d239d8c35d,Replicator should try /db/_session before /_session
snej,2013-12-16 20:01:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b8433ae649843cb6db9690703df46a886dbc181,6b8433ae649843cb6db9690703df46a886dbc181,Slight cleanup after replication API merge.
snej,2013-12-16 19:42:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e3b39bd3d4d9791d96be7ce72005a90cf500310,5e3b39bd3d4d9791d96be7ce72005a90cf500310,"Fixing unit tests

The CBLIncrementalStore unit tests weren’t closing their databases.
Also added a warning in CBLManager if -forgetDatabaseNamed: has to wait too long."
snej,2013-12-16 19:32:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b70d39118fea293e9b21706548d49b079742301a,b70d39118fea293e9b21706548d49b079742301a,"Merge branch 'master' into replication_cleanup

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Demo-Mac/DemoAppController.m
	Source/API/CBLDatabase.h
	Source/API/CBLDatabase.m
	Source/API/CBLManager.h
	Source/API/CBLManager.m
	Source/API/CBLReplication.h
	Source/API/CBLReplication.m
	Source/API/CouchbaseLitePrivate.h
	Source/API/ReplicationAPITests.m
	Source/CBLReplicator_Tests.m
	Source/CBL_ReplicatorManager.m"
snej,2013-12-16 17:15:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f7c6ee0d3a10124191ac1a6ff09cb984d00d3c7,5f7c6ee0d3a10124191ac1a6ff09cb984d00d3c7,"Merge pull request #203 from featurist/master

Custom HTTP header support (for CORS)"
snej,2013-12-16 17:10:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad10744c116a779653c5b276732f490155da5f0a,ad10744c116a779653c5b276732f490155da5f0a,"IncrementalStore: Fixed 64-bit compile error. Moved out of ‘iOS’ group in project tree.

CBLIncrementalStore should work on Mac too."
snej,2013-12-16 17:02:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/29642226e850a611cafc42589fa8c41a20a27680,29642226e850a611cafc42589fa8c41a20a27680,"Fix use of wrong enum constant in CBLDatabase+Internal

Fixes #219"
snej,2013-12-16 17:00:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8636c6d65c00f02c6e236c0a3c55f5c4075938de,8636c6d65c00f02c6e236c0a3c55f5c4075938de,"Merge pull request #214 from chbeer/feature/CBLIncrementalStore

Merge: CoreData adapter (CBLIncrementalStore)"
chbeer,2013-12-15 21:01:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8626ccf28fc3a3d6a407d5e424ab9c626372ab90,8626ccf28fc3a3d6a407d5e424ab9c626372ab90,Fixed attachment storage by switching to native CBLAttachment instead of base64 storage.
chbeer,2013-12-15 21:01:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c8c4615a5a7d1efff0fa89af6cf8748fba506a74,c8c4615a5a7d1efff0fa89af6cf8748fba506a74,Changed reference to observed NSManagedObjectContexts to NSHashTable for weak referencing.
chbeer,2013-12-14 11:10:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a2c22318ec202c288b60865cf33337692b7ab34,4a2c22318ec202c288b60865cf33337692b7ab34,Removed dependency on private property for change observing. Improved cleanup on dealloc.
chbeer,2013-12-14 11:03:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a14a836433a4ca0e81050506705f1150f8bdd1a,6a14a836433a4ca0e81050506705f1150f8bdd1a,Merge branch 'master' of https://github.com/couchbase/couchbase-lite-ios into feature/CBLIncrementalStore
snej,2013-12-13 22:33:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a2bddf085db35412698b328c5652262e0048a7fc,a2bddf085db35412698b328c5652262e0048a7fc,Bumped project version to 1.49
chbeer,2013-12-13 10:28:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b0d19d5f4e50c3da0cc8f7e459c1720d9ca7bea0,b0d19d5f4e50c3da0cc8f7e459c1720d9ca7bea0,Renamed error domain to short CBLISErrorDomain
snej,2013-12-12 23:33:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43d7e2b8b9448bebee2766513c7164642efa3cdd,43d7e2b8b9448bebee2766513c7164642efa3cdd,"Allow doc property “_removed” which comes from Sync Gateway

Fixes #218"
snej,2013-12-11 23:33:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/286cd45450793bb1c8c9205e7d947e0735eeece1,286cd45450793bb1c8c9205e7d947e0735eeece1,API: Just added some more deprecation markings
chbeer,2013-12-10 21:24:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/93b9626d7225c37840dc85edf88b6ea4e324628a,93b9626d7225c37840dc85edf88b6ea4e324628a,post-merge framework update
chbeer,2013-12-10 21:23:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0a7ae0168b71905e83ca440aebdee00ca021629,f0a7ae0168b71905e83ca440aebdee00ca021629,Improved view naming for to-many views
chbeer,2013-12-10 21:23:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef6d301bb4b0dbcb4dc9a6ee7060fbf30baa97e5,ef6d301bb4b0dbcb4dc9a6ee7060fbf30baa97e5,Improved conflicts handling
chbeer,2013-12-10 20:55:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c8321ac630f6109a430c2c35836349614e5fd84,3c8321ac630f6109a430c2c35836349614e5fd84,Uses all documents query with kCBLOnlyConflicts for conflicts recognition
chbeer,2013-12-10 20:55:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebeeb0529514800b4af0e4976264a9f07bff1eca,ebeeb0529514800b4af0e4976264a9f07bff1eca,Fixes typo for recognizing and skipping internal documents
chbeer,2013-12-10 20:54:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/31307aa5064e3a4d983128300909e08fc431ba25,31307aa5064e3a4d983128300909e08fc431ba25,Uses kCBLDatabaseChangeNotification for database change observing
chbeer,2013-12-10 20:40:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ec3e4792cd916cea97e1582aa6167d5330be57d,2ec3e4792cd916cea97e1582aa6167d5330be57d,Methods and constants declared as static. Smaller cleanups.
chbeer,2013-12-10 20:39:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ca26686260e018b6fefb35869acae3eaf4b6b04e,ca26686260e018b6fefb35869acae3eaf4b6b04e,Improved documentation and method formatting.
chbeer,2013-12-10 20:20:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/736425bfc55660283b28216db20ae50d2d914ec0,736425bfc55660283b28216db20ae50d2d914ec0,Added CBLIncrementalStore and tests to project after merge. Moved tests to Extras folder. Smaller cleanups
chbeer,2013-12-10 20:12:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0951233bbe834bd52be679107211fb403939c1a8,0951233bbe834bd52be679107211fb403939c1a8,Fixed missing 'L' in kCBISObjectHasBeenChangedInStoreNotification
chbeer,2013-12-10 20:11:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4dbdd76114e76b374ca8bbd1282ba21d1ff87b68,4dbdd76114e76b374ca8bbd1282ba21d1ff87b68,"Merge branch 'master' of https://github.com/couchbase/couchbase-lite-ios into feature/CBLIncrementalStore

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj"
snej,2013-12-09 18:36:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/50b57c875b58d5e431180886be480bb50fe9d43e,50b57c875b58d5e431180886be480bb50fe9d43e,"API: Renamed -[CBLQuery rows:] to -run:

couchbaselabs/couchbase-lite-api#37"
snej,2013-12-09 18:23:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf9fa787fb432884ea60c4cd55df1d492a51f98e,bf9fa787fb432884ea60c4cd55df1d492a51f98e,"API: Renamed CBLQueryRow.documentRevision —> documentRevisionID

couchbaselabs/couchbase-lite-api#38"
snej,2013-12-06 23:18:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e01eac3ad0396b687f55c862802f79a65cfe06dc,e01eac3ad0396b687f55c862802f79a65cfe06dc,Bumped project version to 1.486
snej,2013-12-06 22:35:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9af9f0749572b24e3eaea5167e4ab21d2040fc53,9af9f0749572b24e3eaea5167e4ab21d2040fc53,API: Updated CBLValidationContext
snej,2013-12-06 16:32:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da11f5fcd15b90462ad1678c05f11d1c6ec8022a,da11f5fcd15b90462ad1678c05f11d1c6ec8022a,"Updated .exp file

* Export CBLDatabaseChange class
* Export CBLGeoCoordsStringToRect
* Reorganized the file to make it clearer what’s public"
snej,2013-12-06 16:31:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ddc6d01fda9428e237ccf7b08af3b94a0e7a309c,ddc6d01fda9428e237ccf7b08af3b94a0e7a309c,"Don’t use MYReportException in CBLRouter.m

Reverts part of 6479c5813c1b; this broke the Release
build of CouchbaseLiteListener on Mac OS."
snej,2013-12-06 16:23:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cd701ded0dbc61e205e34eba0a54c4ffbcd861e4,cd701ded0dbc61e205e34eba0a54c4ffbcd861e4,<CouchbaseLite.h> should import “CBLDatabaseChange.h”
snej,2013-12-06 16:03:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/383a5f3a9065a6e32e7c3bc3791b67d301547b1e,383a5f3a9065a6e32e7c3bc3791b67d301547b1e,"Make REST geo query compatible with GeoCouch

Make “?bbox=“ view query param a string of four comma-separated numbers,
instead of a JSON array. This is more compatible with GeoCouch.
Fixes #171"
snej,2013-12-06 00:17:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5423d0c0db8cca3cbc71048a504e30b7e7c568ff,5423d0c0db8cca3cbc71048a504e30b7e7c568ff,"API: Changed CBLValidationBlock to take CBLRevision* not CBLSavedRevision*

For couchbaselabs/couchbase-lite-api#47"
snej,2013-12-05 22:31:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c5c199d81c77c001341cc7912a80743f4c2ad74,3c5c199d81c77c001341cc7912a80743f4c2ad74,"Made -[CBLReplication restart] work for non-persistent replications.

Fixes #213"
snej,2013-12-05 19:50:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6479c5813c1bf844a1df564d283b8ce3bb4aa7b7,6479c5813c1bf844a1df564d283b8ce3bb4aa7b7,Log backtraces of exceptions caught in CBLDatabase transaction
snej,2013-12-05 17:37:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8389cc6d02e89714d1183520e5689f36ebc40453,8389cc6d02e89714d1183520e5689f36ebc40453,Moved CBLView instance variable declarations out of the public header
snej,2013-12-05 17:33:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da9bf2aee7a73b634b94c3ad01dd2d0ece902f50,da9bf2aee7a73b634b94c3ad01dd2d0ece902f50,API: Added deprecated typedefs for the old names of some enum types
snej,2013-12-05 01:17:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71f7bd91071a849e25a2f27ece88ba1d70b933d5,71f7bd91071a849e25a2f27ece88ba1d70b933d5,"API: Updated validation API

Block should now call [context reject] instead of returning NO.
For couchbaselabs/couchbase-lite-api#47"
snej,2013-12-04 19:58:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5c0262c8e37282a6d1572afec3c04b0a3659ffc3,5c0262c8e37282a6d1572afec3c04b0a3659ffc3,"Fixed broken build of CBLJSViewCompiler target

One of the copied JavaScriptCore headers had a mistake in its doc-
comment, which triggered an Xcode warning. Fixed it.
Also added this target (and the Documentation target) to the All target,
so they’ll get built more often."
snej,2013-12-04 19:38:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c983bcb6adba2dc62ac65bcef3508e79f478915,0c983bcb6adba2dc62ac65bcef3508e79f478915,"API: Renamed CBLReplication.mode to .status

For couchbaselabs/couchbase-lite-api#45"
snej,2013-12-04 19:24:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5ac3ea88cc9af06abc4c029e35f649c4cb314503,5ac3ea88cc9af06abc4c029e35f649c4cb314503,"Fixed asyncTask count error in -[CBL_Pusher uploadMultipartRevision:]

Fixes #211"
snej,2013-12-04 17:17:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f1bc8f69b98c6f828d74320fe1912e929843db87,f1bc8f69b98c6f828d74320fe1912e929843db87,"API: Renamed CBLDatabaseChange.maybeConflict to .inConflict

Fixes #196"
snej,2013-12-04 04:49:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0dd2312298d9ec5da5666dcbc5dacb941539c5a3,0dd2312298d9ec5da5666dcbc5dacb941539c5a3,"Revert ""Set ‘Skip Install’ build setting on CBL iOS and CBL Listener iOS targets""

This reverts commit 04c8c8aa8e25ec9292296a1f1edbe948826e6386."
snej,2013-12-02 23:54:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/04c8c8aa8e25ec9292296a1f1edbe948826e6386,04c8c8aa8e25ec9292296a1f1edbe948826e6386,"Set ‘Skip Install’ build setting on CBL iOS and CBL Listener iOS targets

Fixes #204"
snej,2013-12-02 21:43:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/41f6e2b69c659246f975e559ba584de010bb85e0,41f6e2b69c659246f975e559ba584de010bb85e0,"Added clarification to kCBLDocumentChangeNotification doc-comment

…to say that only existing instances post notifications."
snej,2013-12-02 20:31:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cecba320026b49e2af7ac5450a164762a7e0368d,cecba320026b49e2af7ac5450a164762a7e0368d,"API: Rename CBLQuery.updateIndex to .indexUpdateMode

Renamed the enum correspondingly.
For couchbaselabs/couchbase-lite-api#25"
snej,2013-12-02 20:22:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d11a2ad74b50a4d4ad96d76a3b23a0ccb551b0cb,d11a2ad74b50a4d4ad96d76a3b23a0ccb551b0cb,"Add missing oauthconsumer source files to make OAuth replication work

Without these you’d get exceptions at runtime.
Also updated the oauthconsumer library to prefix system class category
method names with “oa_”.
Fixes #210"
chbeer,2013-12-02 08:32:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2772da0eb7a8afbdbd900636f92a19c51a46da41,2772da0eb7a8afbdbd900636f92a19c51a46da41,"Improved documentation, cleanup and improved error messages."
chbeer,2013-12-02 08:32:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c187b275d3dc613435715d656eb8a3ce28158912,c187b275d3dc613435715d656eb8a3ce28158912,Removed entity type from _id and changed deletion to keep the kCBLISType key.
chbeer,2013-12-01 17:45:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0263c7e00b72c6ba9b2ba1591d3717e71eec873b,0263c7e00b72c6ba9b2ba1591d3717e71eec873b,"Added test case ""CBLIncrementalStoreFetchWithPredicates""."
chbeer,2013-12-01 16:30:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e9efbdb10016940db497914acb5555a344b4947,2e9efbdb10016940db497914acb5555a344b4947,Post-Merge fixes
chbeer,2013-12-01 16:18:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b412d096a65bd057359081f0bf92c62cd755c2c8,b412d096a65bd057359081f0bf92c62cd755c2c8,Merge branch 'master' of https://github.com/couchbase/couchbase-lite-ios into feature/CBLIncrementalStore
chbeer,2013-12-01 15:05:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a4b313e9099e7a31d00d6d1e9f8f5cf79e77de7,8a4b313e9099e7a31d00d6d1e9f8f5cf79e77de7,Added CBLIncrementalStore to CouchbaseLite.xcodeproj and added unit tests for it. Changed change handling in CBLIncrementalStore.
chbeer,2013-12-01 15:04:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/68a13b27936a290a631578e8ea81e3091db8f0a3,68a13b27936a290a631578e8ea81e3091db8f0a3,Some cleanup and added some documentation
chbeer,2013-12-01 15:03:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27c17f67fa94a492dab859994827e44cfaa97c90,27c17f67fa94a492dab859994827e44cfaa97c90,Added missing setPersistentStore: call in convenience method.
chbeer,2013-12-01 15:03:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c02e1714787cc026a0ff893d2a6f072997af4bb1,c02e1714787cc026a0ff893d2a6f072997af4bb1,Moved conflict handling to a block that can be replaced by the user. The block is called for every conflict.
chbeer,2013-12-01 14:59:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d16e20ba8dd4c08db5ea64fd16531bfa89da9dba,d16e20ba8dd4c08db5ea64fd16531bfa89da9dba,Removed replication methods and made database property public so that it can be used to setup replication.
chbeer,2013-11-29 23:15:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10739813bf272b3d3f0384fcc93aed337c79f4b2,10739813bf272b3d3f0384fcc93aed337c79f4b2,Fixed renaming error because of out-of-line committing.
chbeer,2013-11-29 23:11:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e900e69c5125449982b0e4ac21d3e45616242ceb,e900e69c5125449982b0e4ac21d3e45616242ceb,Big improvement on error handling with a lot of new error codes. Marked more private methods with underscore.
chbeer,2013-11-29 23:10:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1c60365cdae5de3d7d7a690bf611c906160d8f2d,1c60365cdae5de3d7d7a690bf611c906160d8f2d,"Improved views to not emit whole documents or superfluid data, but nil."
chbeer,2013-11-29 22:34:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e46e884892d321d10dd4b75848eb67b52ae61a0b,e46e884892d321d10dd4b75848eb67b52ae61a0b,"Added new method to import old Core Data database that can be of any supported persistent store. Ideal for switching from SQLite to CouchbaseLite, for example."
refractalize,2013-11-28 13:27:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c1b066a3bddff0f1a174bfb66b3277b191fdea2,2c1b066a3bddff0f1a174bfb66b3277b191fdea2,added support for CORS
chbeer,2013-11-27 22:55:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed337fb16254fab3d03e2af067b2aaaaf2d96536,ed337fb16254fab3d03e2af067b2aaaaf2d96536,Added CBLIncrementalStore to Extras folder
snej,2013-11-26 20:33:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc6aee8bfbf14bf55a91231ec39ae4baeff4a180,bc6aee8bfbf14bf55a91231ec39ae4baeff4a180,"Merge pull request #200 from chbeer/master

Makes CBLDatabaseChanges.h public so that change notifications can be..."
chbeer,2013-11-26 20:26:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82cf48d15c23f8893899565669351760f214539f,82cf48d15c23f8893899565669351760f214539f,"Makes CBLDatabaseChanges.h public do that change notifications can be processed by apps, etc."
snej,2013-11-26 20:18:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1dd830b78ca277175837cf087e9270103b600a10,1dd830b78ca277175837cf087e9270103b600a10,"Removed CBLSavedRevision.propertiesAreLoaded from public API

Fixes couchbaselabs/couchbase-lite-api#32"
snej,2013-11-26 20:18:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fb05ef8b36eb883b9e5b1108fc155b5fa3c7063,2fb05ef8b36eb883b9e5b1108fc155b5fa3c7063,"Renamed CBLNewRevision to CBLUnsavedRevision (per API spec)

Fixes couchbaselabs/couchbase-lite-api#33"
snej,2013-11-22 05:30:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2397b18d72616fb073a81a26ce1b6939ebd0ee1e,2397b18d72616fb073a81a26ce1b6939ebd0ee1e,"Added CBLModel support for nested custom objects as properties

A dynamic property can be of any class that conforms to the new CBLJSONEncoding protocol
(or an array of such a class.)
Fixes #197"
snej,2013-11-22 03:33:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f084e0e5abcc565f6e90f2687faae61667f4ba8,9f084e0e5abcc565f6e90f2687faae61667f4ba8,Renamed CBLQuery.staleness to .updateMode
snej,2013-11-22 01:07:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd8ac882a781b09c6ad3f92a5f226ed2d62d286d,bd8ac882a781b09c6ad3f92a5f226ed2d62d286d,"Rename -deleteAttachmentNamed: back to -removeAttachmentNamed:

“remove” is more idiomatically Cocoa than “delete”."
snej,2013-11-21 23:16:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bd00362b374e6d973e33a667e7230c5e3fb9e94,2bd00362b374e6d973e33a667e7230c5e3fb9e94,"Oops, shouldn't've committed WebSockets-Cocoa"
snej,2013-11-21 22:19:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7257b1aa6d5a81464c4213f51afa2cacddcaec5a,7257b1aa6d5a81464c4213f51afa2cacddcaec5a,Updated CBLReplication API
snej,2013-11-21 21:40:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5053e63c1c3ab79972e9272b6939419f16c3ff10,5053e63c1c3ab79972e9272b6939419f16c3ff10,Updated CBLQuery (etc.) API
snej,2013-11-21 17:11:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c7d5f33af4ee2956d8a44058b1261fc017a2c1d9,c7d5f33af4ee2956d8a44058b1261fc017a2c1d9,"Updated CBLDocument API

No changes from the API spec. But I did make some changes:
* Renamed -tdDocumentChanged: to -CBLDocument:didChange:.
* .modelObject now must conform to the CBLDocumentModel protocol
* kCBLDocumentChangeNotification now includes a CBLDatabaseChange object
* Cleaned up some formatting and edited some doc-comments"
snej,2013-11-21 16:36:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc78b7e28c7a4f511382de1f34e2a2860af07fe9,bc78b7e28c7a4f511382de1f34e2a2860af07fe9,"More CBLRevision API updates

* Moved -revisionHistory: up to CBLRevision
* Made CBLNewRevision.userProperties settable."
snej,2013-11-21 01:16:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/835f4b29770e95f8c03df9ef77b9d73702a05c81,835f4b29770e95f8c03df9ef77b9d73702a05c81,Updated CBLDatabase API
snej,2013-11-20 22:28:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a119dd91203706a54edd9da877d37ded45109afd,a119dd91203706a54edd9da877d37ded45109afd,Updated API of CBLManager
snej,2013-11-20 21:37:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/85ef150e37cebf8b80aeced3c5ac6db7b9a36f3e,85ef150e37cebf8b80aeced3c5ac6db7b9a36f3e,Updated the rest of the CBLAttachment API.
snej,2013-11-20 21:19:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/343503b1fadea4add77721ff2dd58bdbfac8e23f,343503b1fadea4add77721ff2dd58bdbfac8e23f,"Updated API of CBLRevision

…plus some side effects on CBLAttachment and CBLModel."
snej,2013-11-19 19:28:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b55d1362185b531623b26d60dfca2e99208e6219,b55d1362185b531623b26d60dfca2e99208e6219,"CBLManager needs to forget replications involving deleted database

When a database is deleted, CBLManager now removes all replications
involving it from its _replications array. Otherwise those replications
could be re-used if a new database with the same name is created; this
results in conflicts if the replications are persistent, since their
documents have already been deleted.
Fixes #180"
snej,2013-11-19 02:21:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9557f54819f1f1f18f06c1ee4aa165cf40bf6b6a,9557f54819f1f1f18f06c1ee4aa165cf40bf6b6a,"CBLReplicator: Make more ivars private, move them into the .m file

This limits the ability of the subclasses to use them incorrectly.
Just being paranoid."
snej,2013-11-19 02:19:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6af824136e405b7cc42c1ccddee98d82433d2967,6af824136e405b7cc42c1ccddee98d82433d2967,"CBLReplicator should suspend, but not stop, when iOS app is backgrounded

This functionality used to be provided for persistent replications by
the CBLReplicatorManager. It’s now built into CBLReplication itself."
snej,2013-11-19 02:16:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72b8472d8a1bc727aaa8628c2b7be5a31e496201,72b8472d8a1bc727aaa8628c2b7be5a31e496201,"Oops, broke the build of the iOS demo app."
snej,2013-11-18 23:48:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/88ab32c3292e8fea98dd100ea558e9458da728ae,88ab32c3292e8fea98dd100ea558e9458da728ae,"Clean up CBLReplication factory API

Removed public initializers.
Factory methods always create a new instance.
CBLDatabase.allReplications only keeps running instances.
Removed -deleteReplication.
Made .properties private."
snej,2013-11-18 17:42:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ebf4fe6fe855e5cef6804ca8a4a2e5b7ad23e88,2ebf4fe6fe855e5cef6804ca8a4a2e5b7ad23e88,Bumped version to 1.485
snej,2013-11-16 05:53:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc90c101e40061e3326ed5129f60996dfa5f79f3,fc90c101e40061e3326ed5129f60996dfa5f79f3,Removed CBLReplicatorManager. More cleanup of CBLReplication.
snej,2013-11-16 03:20:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d369740a0c0440dc6a0fa7c6714de762e7506ff9,d369740a0c0440dc6a0fa7c6714de762e7506ff9,WIP: Removed persistent replication support from public API
snej,2013-11-16 01:17:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ec531b3e88848783f39416de2f4a7b0c44370ab,9ec531b3e88848783f39416de2f4a7b0c44370ab,"Better notification of database/document changes

CBLDatabaseChangeNotification now has a “changes” key in its userInfo
that contains an NSArray of CBLDatabaseChange objects. Each of those
describes a revision that was added. This is basically equivalent to an
in-process _changes feed (though without historical data.)
Fixes #174"
snej,2013-11-15 18:24:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f051d2ed89c7155a19c35791f4529c6497ecb169,f051d2ed89c7155a19c35791f4529c6497ecb169,README: updated build instructions.
snej,2013-11-14 17:54:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b834d5656b6de9829735855f788259966d1aeed9,b834d5656b6de9829735855f788259966d1aeed9,"Fix problems stopping a replicator

The -stop method can end up being called re-entrantly, and it wasn’t
expecting that, so Bad Stuff could happen.

Also made the CBLReplicator’s -stop method simply clear the batcher
instead of flushing it, since any queued changes in it shouldn’t be
processed anyway (they’d result in remote requests that would just
immediately be stopped.)

For #187, #191, #193"
snej,2013-11-12 18:21:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/580c5f65ebda159ce5d0ce1f75adc16955a2a6ff,580c5f65ebda159ce5d0ce1f75adc16955a2a6ff,Added missing Apache license notices. Updated copyright statements.
snej,2013-11-14 01:51:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/634c3b6ca46a1b94a852d94a1f6687c7e0f71e17,634c3b6ca46a1b94a852d94a1f6687c7e0f71e17,Make replicator progress logging less spammy
snej,2013-11-12 15:49:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d0185b82b084cc6620637421ea0777e5b355c62,5d0185b82b084cc6620637421ea0777e5b355c62,Be more careful using weak-reference ivars. Enable some warnings.
snej,2013-11-12 00:17:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d982240201b4e3730bee1d583d17594ff09b7afe,d982240201b4e3730bee1d583d17594ff09b7afe,"Made CBLRemoveFileIfExists more reliable

I was seeing warnings while deleting databases, about file-not-found
errors (which are normal.) This should keep those from being logged."
snej,2013-11-11 19:33:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e659e213e74bbbe6c352558a9504080c6984df57,e659e213e74bbbe6c352558a9504080c6984df57,"Make -[CBLDatabase doSync:] public

This method is dangerous (will deadlock if called on the CBLManager’s
thread/queue) but useful for apps using GCD."
snej,2013-11-11 19:32:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/420b231749e74aa930a57326f8600f4a4cf37c93,420b231749e74aa930a57326f8600f4a4cf37c93,"Turn off SQLite shared-cache mode

Backs out part of commit f12e420 from Nov. 6.
Shared-cache mode has some very disruptive effects on concurrency
if one connection is stepping through query results while another connection
tries to make changes.
See http://thread.gmane.org/gmane.comp.db.sqlite.general/73960
Fixes #189 (and possibly other recent regressions?)"
snej,2013-11-09 02:45:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da25c1af9b93c465ce5e25a180ba46b941baf3d5,da25c1af9b93c465ce5e25a180ba46b941baf3d5,Fixed the Doxygen config to ignore __attribute() annotations
snej,2013-11-08 19:30:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c22105278c3fb7cb9a84c2745bd5ae19e45034ba,c22105278c3fb7cb9a84c2745bd5ae19e45034ba,"64-bit iOS support (one more try)

Added a new build configuration “Release 64bit” that overrides the
Architecture setting in the iOS targets to add 64-bit flavors.
To use it, edit the scheme (CBL iOS or Listener iOS), select Archive in
the list at the left, and change the “Build configuration” pop-up to
“Release 64bit”. Then dismiss the dialog box and choose Product > Archive.

I’ve tried not to disturb the existing configurations or targets, so
this shouldn’t break anything on Xcode 4.6 (famous last words!)"
snej,2013-11-08 18:25:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b017c451de92c21e98ff23667725fedb07fc041,6b017c451de92c21e98ff23667725fedb07fc041,"Recognize SQLITE_LOCKED error code and map to kCBLStatusDBBusy.

For #180"
snej,2013-11-07 22:37:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/099c4f4e55afbae45a19e900c26e2bb1302057c8,099c4f4e55afbae45a19e900c26e2bb1302057c8,"Make deleteDatabase: wait till all threads have closed the DB

I think bugs like #180 and #169 may be caused by the replicator thread
not closing the database till after the main thread has deleted it; this could
result in the file existing and having data in it, which would confuse the
next CBLDatabase instance to open that database name."
snej,2013-11-07 21:33:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c12f208a99c8b4c33b5b48b46793eb3d51c8475c,c12f208a99c8b4c33b5b48b46793eb3d51c8475c,"Added “CBL_” prefix to FMDB class names to avoid conflicts in apps

If an app uses Couchbase Lite and regular FMDB, this way the FMDB
classes won’t conflict and break everything."
jessliu,2013-11-07 19:11:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b559e9cc6257a37caf1cc6bf29cf050fdf4f14c,7b559e9cc6257a37caf1cc6bf29cf050fdf4f14c,Improving appearance of README.md from previous commit
jessliu,2013-11-07 19:08:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d4e28f8b3caf0e202253a45e3b1895c9fa6c8789,d4e28f8b3caf0e202253a45e3b1895c9fa6c8789,Adding analytics
snej,2013-11-07 18:40:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/105b463ef85bc8f24563f48f5130a4f1a0f4a949,105b463ef85bc8f24563f48f5130a4f1a0f4a949,"Updated FMDB: Use sqlite3_busy_timeout to handle busy/locked errors

Also increased busy timeout to 5 seconds."
snej,2013-11-07 17:35:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/013b14abb1b9b5254e2990889b232ee3edc6141f,013b14abb1b9b5254e2990889b232ee3edc6141f,"Oops, took out some temporary logging calls"
snej,2013-11-07 16:52:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/26168e708ab96b08fb0c2868a0415c05098f0645,26168e708ab96b08fb0c2868a0415c05098f0645,Removed broken link to automated build. Other minor edits.
snej,2013-11-07 16:33:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce5f934caee174dea3f20827e13d5b2fcbdd612d,ce5f934caee174dea3f20827e13d5b2fcbdd612d,"Added -doAsync: to CBLManager too, for completeness.

To avoid confusion I renamed the existing -asyncTellDatabaseNamed:to:
to backgroundTellDatabaseNamed:to: since it has a different purpose."
snej,2013-11-07 16:16:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0d6b35d027d915192439d15a1309bf1e890861a,d0d6b35d027d915192439d15a1309bf1e890861a,"Allow public objects to be bound to a dispatch queue

By setting the CBLManager’s dispatchQueue property, the manager and the
objects it creates will run on that queue instead of the thread it was created on.
Most importantly this means that callbacks like notifications and model autosaves
will be scheduled on that dispatch queue.

Also added the related method -[CBLDatabase doAsync:] which runs a block
asynchronously on the database’s thread or dispatch queue. This can be called
from any thread."
snej,2013-11-07 01:53:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87c2b1ae94d27e29f21a3ae1321633e7b82dbb9f,87c2b1ae94d27e29f21a3ae1321633e7b82dbb9f,Speed up database creation by wrapping it in a SQLite transaction
snej,2013-11-06 17:15:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f12e420951585ae7954fa787e74de61365f2c270,f12e420951585ae7954fa787e74de61365f2c270,"Update FMDB for shared-cache mode and better busy retry behavior

* Use SQLite3 shared-cache mode, to save memory with multi-threaded
  access.
* FMDB now treats busyRetryTimeout as a time interval not an iteration
  count, and uses a more realistic interval between retries.
Fixes #178, I think."
snej,2013-11-06 01:23:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3bfb8d85de270d1fac7c3e0cbc749cb3fa5af5ed,3bfb8d85de270d1fac7c3e0cbc749cb3fa5af5ed,"Fix ref-cycles by making CBLRevision.document a weak ref

Fixes #177"
snej,2013-11-06 00:28:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7aa83208c50d775c93d61ce6e57dbb00c37a3f46,7aa83208c50d775c93d61ce6e57dbb00c37a3f46,"Added isGone property to CBLDocument and CBLRevision

This indicates that a document is no longer available because it’s been removed from available channels,
or has been deleted. (That is, it detects a “_removed” or “_deleted” property.)
Fixes #29"
snej,2013-11-05 21:38:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c5a558233968a75f2634da8097f6a2137ffdbd1,3c5a558233968a75f2634da8097f6a2137ffdbd1,"Fix race condition deleting a persistent replication

Fixes #176"
snej,2013-11-05 00:11:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86f092c062d5c5035f430931277accd2710d3cf0,86f092c062d5c5035f430931277accd2710d3cf0,"Improved documentation of -[CBLView setMapBlock:reduceBlock:version:]

In particular, the meaning of the return value was previously undocumented."
snej,2013-11-04 21:21:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fdee67826ac0319339eb71cafa6230e781046d6f,fdee67826ac0319339eb71cafa6230e781046d6f,"Added polling mode to pull replicator

Add property “poll” to a continuous pull replicator’s options.
Value is poll interval in ms; minimum 30000."
snej,2013-11-02 18:29:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c0d4e259fac1f6a9a0b71c615fe935123e9aa1db,c0d4e259fac1f6a9a0b71c615fe935123e9aa1db,"Oops, added missing vendor/yajl/build/yajl-2.0.5/include dir"
snej,2013-11-02 04:02:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18680c05718ee71edb3c28e302826d05484043b5,18680c05718ee71edb3c28e302826d05484043b5,"Implemented rev-tree pruning.

During database compaction, excessively-deep revision trees will have their oldest revisions removed
entirely. The depth limit can be configured as CBLDatabase.maxRevTreeDepth.
Fixes #118."
snej,2013-10-31 22:39:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e87c8b5adcba3c817155d4ba95f88a27c94f7647,e87c8b5adcba3c817155d4ba95f88a27c94f7647,An FMDB optimization (for binding objects to query columns)
snej,2013-10-31 22:34:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1ce5ac414a38859112fd499a3f7fa953e93aac0,c1ce5ac414a38859112fd499a3f7fa953e93aac0,"Added -Woverriding-method-mismatch warning flag

…and cleaned up the things it caught."
snej,2013-07-15 17:19:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/710fe4fc5b3892833922ed2c824a2a66b608963b,710fe4fc5b3892833922ed2c824a2a66b608963b,Use streaming JSON parser for _changes feed
snej,2013-10-31 13:59:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef76aac5d5d318e8bddc0814ce91b35df9cc6b99,ef76aac5d5d318e8bddc0814ce91b35df9cc6b99,"Fixed ReplicatorManager not detecting replications on 1st launch of app

Fixes #170"
snej,2013-10-30 19:15:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5304bb9b30ead57f914bccb0aef6ad362d393516,5304bb9b30ead57f914bccb0aef6ad362d393516,Just removed an unused internal method.
snej,2013-10-29 03:28:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9f8f2d8ef147e06b5cd7d12404caef6048248d4,f9f8f2d8ef147e06b5cd7d12404caef6048248d4,"Added continuous-build scheme for iOS

For use by the Xcode continuous-integration bots, which require a
shared scheme to use."
snej,2013-10-26 18:33:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4f828657e7a448cda2ee4b989355be879ab0e3aa,4f828657e7a448cda2ee4b989355be879ab0e3aa,Made CBLModel work with Capitalized dynamic property names
snej,2013-10-26 18:17:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/425c939ffa9b5f4cfca47bd4b5fef702006858dd,425c939ffa9b5f4cfca47bd4b5fef702006858dd,Tweaks to the README
snej,2013-10-25 17:44:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de07d352af997278b5295f7c6985cff2429aea04,de07d352af997278b5295f7c6985cff2429aea04,"CBLDatabase should close if another thread deletes the database.

Fixes #169 (I think)"
snej,2013-10-25 17:07:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/37892c67af85b0865debc5ff305d9f41b52b21ea,37892c67af85b0865debc5ff305d9f41b52b21ea,"Only use _bulk_get if sync gateway version is >= 0.81

Fixes #28"
snej,2013-10-25 15:53:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3e1924131c0c6838d0d6856c44d95f6d4dbf37a,d3e1924131c0c6838d0d6856c44d95f6d4dbf37a,Fix unit tests on iOS (wrong constant for M_PI)
snej,2013-10-25 15:52:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/379a2ab6f49ac72123702efe51db1d2170699a9a,379a2ab6f49ac72123702efe51db1d2170699a9a,"Save some memory while pulling

Toss out the parsed NSDictionary form of CBL_Revisions that have been pulled and
are waiting to be inserted into the db, leaving only the JSON."
snej,2013-08-20 22:20:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6640eb2daf1d9602afc02d9d6357e1a2f3d1450f,6640eb2daf1d9602afc02d9d6357e1a2f3d1450f,"_bulk_get implementation

Calling nonstandard REST API that speeds up pull replications.
Only used with compatible servers, i.e. Sync Gateway for now.
https://github.com/couchbase/sync_gateway/wiki/Bulk-GET
Fixes #45."
snej,2012-12-07 01:12:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b0e541079c45e867bbd5c9be29b68d16df0e8b5,4b0e541079c45e867bbd5c9be29b68d16df0e8b5,"TDReplicator keeps track of what server type it's talking to

Specifically it remembers the ""Server:"" response header.
This can be used to conditionally use REST API extensions that only some servers support.

Conflicts:
	Source/CBLRemoteRequest.h
	Source/CBL_Replicator.h
	Source/CBL_Replicator.m"
snej,2013-10-23 20:15:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a62f2d62092d5a626d522bf64bbea689ae984d60,a62f2d62092d5a626d522bf64bbea689ae984d60,"Clear cache and save models when database is closed

Clearing the cache breaks a ref cycle that caused the db to stay in
memory until its doc cache got purged by the OS, at which time a
deadlock was possible. (Fixes #164.)"
snej,2013-10-23 15:17:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6a423e30e54402181228d5cdef58fecd21807eb,a6a423e30e54402181228d5cdef58fecd21807eb,"CBLModel now supports remaining scalar (int/float) property types.

Added support for 64-bit integers and 32-bit floats.
Added unit tests for all scalar types.
Thanks to Žymantas Paulauskas for the 64-bit support!"
snej,2013-10-17 20:04:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/88f59f729ebff0dad7bdd9e1b2c64f80347fa086,88f59f729ebff0dad7bdd9e1b2c64f80347fa086,"Better recovery by SocketChangeTracker if none of response body arrives

If the server is behind a gateway that’s buffering chunked responses, and also killing sockets after inactivity, then the change tracker might see an empty response when the socket is closed (instead of the prologue “{“results”:” that it expects). Updated -handleInvalidResponse for this case.
Fixes #155"
snej,2013-10-16 21:36:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80d5d7b6d5a7a4ca2303f3fcb8c9aa1809a61f17,80d5d7b6d5a7a4ca2303f3fcb8c9aa1809a61f17,Avoid a Clang static analyzer warning
snej,2013-10-16 21:34:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bbebaa7be9bf1ee645dc55f8f419c47a6982ce34,bbebaa7be9bf1ee645dc55f8f419c47a6982ce34,"Querying for conflicts [API change]

* In an allDocs query you can now request extra information about document conflicts,
  or you can have _only_ docs in conflict returned. (See doc-comments in CBLQuery.h.)
* This is especially powerful if you set up a CBLLiveQuery with it — you’ll get immediate
  notifications of conflicts.
* The same options are available in the REST API as ?include_conflicts=true and
  ?only_conflicts=true parameters to _all_docs.
* New method -{CBLNewRevision saveAllowingConflict:] allows you to save over a
  non-default revision, to resolve or create a conflict (similar to the new_edits=false mode
  in CouchDB.)
* CBLQuery.includeDeleted property is now deprecated; use allDocsMode instead."
tleyden,2013-10-14 23:49:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/abe95efbe9cbefd9c8dce2633a1129a321de06dd,abe95efbe9cbefd9c8dce2633a1129a321de06dd,Add Checkers-iOS
snej,2013-10-14 15:30:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5def2d55c2ea85d697dbf7491eb7787f45f769b0,5def2d55c2ea85d697dbf7491eb7787f45f769b0,"Fixed -[CBLView removeIndex]

It didn’t do anything, because its transaction always failed due to bad error-checking.
Fixes #160"
snej,2013-10-14 14:55:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6c2e30bfcfb00fd9037311cf86e299581c52e61a,6c2e30bfcfb00fd9037311cf86e299581c52e61a,"Fixed #import in CBLUICollectionSource

Fixes #156"
snej,2013-10-14 14:54:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9afd81d81c4bea2432106956e2dc6226036ed6e2,9afd81d81c4bea2432106956e2dc6226036ed6e2,"Oops, fixed iOS test app (it was calling now-deprecated replication methods)"
snej,2013-10-11 03:59:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/08261098725093604c7dd22d31f1ccdc3fa0b780,08261098725093604c7dd22d31f1ccdc3fa0b780,"Detect if app was built without -ObjC and log a fatal error message.

Fixes #153."
tleyden,2013-10-10 23:19:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c1445fd68a3524b6228ebdb408d6f19406d02a8,8c1445fd68a3524b6228ebdb408d6f19406d02a8,Add links to demo apps
snej,2013-10-10 00:54:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21e13744050642694c8a8ad1c7cc0f0ae10ebc47,21e13744050642694c8a8ad1c7cc0f0ae10ebc47,"Fixed memory/thread leakage of CBL_Servers

There was a reference cycle between CBLManager, CBLShared and CBLServer
that kept the CBLServer alive even after all CBLManagers were closed.
CBLServer owns a thread, which was also staying alive.
Also fixed a bunch of leaks in the unit tests where they weren't closing
a CBLManager they created."
snej,2013-10-10 00:52:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/551ce200035b98c1df396dc3aacc97b0ef6172c5,551ce200035b98c1df396dc3aacc97b0ef6172c5,"Implemented doc_ids support in replications

Fixes #102"
snej,2013-10-09 22:05:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b3b460927dbcc98899bf994a7ae4fd04ccfedcd,3b3b460927dbcc98899bf994a7ae4fd04ccfedcd,"Improved -[CBLListener URL]

Now handles IPv6 addresses.
Also using official API to decode IP addresses to strings."
snej,2013-10-09 19:40:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc059f684699bada85d003dcf587185eff065dde,bc059f684699bada85d003dcf587185eff065dde,"Added explicit -startPersistentReplications call to CBLManager [API Change]

You can control when persistent replications start, by creating the manager
with the .noReplicator option and then later calling -startPersistentReplications.
Fixes #151"
snej,2013-10-09 17:37:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b96a6f2ef5f7caf33d0986e4ba3ce58f11d04606,b96a6f2ef5f7caf33d0986e4ba3ce58f11d04606,"CBLReplications shouldn’t start automatically. [API change]

Deprecated the existing CBLDatabase methods that create CBLReplications,
and added new equivalent ones that don’t call -start.
Fixes #150."
snej,2013-10-08 22:16:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d577c265c3dab78c9cd71c58afbcde56bd6a7c61,d577c265c3dab78c9cd71c58afbcde56bd6a7c61,Added an #include to make Xcode 4.6 happier about the last commit
snej,2013-10-08 22:06:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3819863bec37cb9bc8113e67823c446ab5562850,3819863bec37cb9bc8113e67823c446ab5562850,"Added property CBLListener.URL [API change!]

Provides an easy way to find out where to connect to the listener."
snej,2013-10-08 00:15:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c1b27a09f7b49cdb5e8ac3d439ec9422a5935eb1,c1b27a09f7b49cdb5e8ac3d439ec9422a5935eb1,"Added comments, cleaned up logging in CBLHTTPResponse."
snej,2013-10-08 00:14:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7895900d2d758c1a634eb7b92a6d840d85cd54a0,7895900d2d758c1a634eb7b92a6d840d85cd54a0,"Fixed: Listener was truncating HTTP responses longer than 500kbytes

Fixes #149"
snej,2013-10-07 23:25:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c581cfc64795ed211a09cb4991c21a85e1da557,2c581cfc64795ed211a09cb4991c21a85e1da557,"Improve latency of CBLBatcher

The batcher (used by the replicator) will now pass objects through immediately if no
objects have been processed in its configured delay time.
tl;dr: In a continuous replication, individual changes should be processed sooner,
without the artificial 1.5sec of delay.
FIxes #55"
snej,2013-10-07 19:52:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6446f8830a64a6b10cf2d3ee77f1301ec3b2412e,6446f8830a64a6b10cf2d3ee77f1301ec3b2412e,"Fixed regression wherein _attachments didn’t get passed to map function

Fixes #148 (I think?)"
snej,2013-10-04 20:58:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb0e3477a44903cd16b9a47e7979c52e3e4821f9,bb0e3477a44903cd16b9a47e7979c52e3e4821f9,"Delete persistent replication when its source/target database is deleted

This used to work in TouchDB, but regressed a while ago, I think during the conversion
to Couchbase Lite.
Fixes #146"
snej,2013-10-04 20:34:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64eec663a793277bfdf203c6b8abe6c4c4d0218b,64eec663a793277bfdf203c6b8abe6c4c4d0218b,"Persistent replications (CBL_ReplicatorManager) should run on background thread

Cleaned up the creation of background CBLManagers.
Fixes #147"
snej,2013-10-02 18:05:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b06bf1a7db954a5f36c5ead88396e0f387c675c8,b06bf1a7db954a5f36c5ead88396e0f387c675c8,CBLGeometry.h was mistakenly not made public on iOS
snej,2013-10-02 18:02:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4941db38ae17e7132c91e8cb9090adc6fdd25c70,4941db38ae17e7132c91e8cb9090adc6fdd25c70,Added status code to warning “CBL_ReplicatorManager: Can't create replicator…”
snej,2013-10-01 23:15:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bed3ea9cd5b10c954a4508fb5f3796a6d5f15e0f,bed3ea9cd5b10c954a4508fb5f3796a6d5f15e0f,"Made -replaceUUIDs: public and gave it a unit test

For #145 (+1 squashed commit)
Squashed commits:
[277ff34] Made -replaceUUIDs: public so afflicted databases can be fixed.

See #145."
snej,2013-10-01 21:28:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c37c026078a4cc345876c179a5e83eaefa7f0000,c37c026078a4cc345876c179a5e83eaefa7f0000,"Create new db UUIDs after -replaceDatabase… call

Otherwise every instance of the app will have the same UUID for its database,
which then creates tons of conflicts storing checkpoints on a remote db server.
Fixes #145"
snej,2013-10-01 00:18:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fe36f251ce7a89e95e241bdea7500d64d0213ba,9fe36f251ce7a89e95e241bdea7500d64d0213ba,Added +[CBLManager enableLogging:] for programmatic control over logs
snej,2013-09-30 04:23:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6bbb23e14e9766913b1c483114817b208684308,e6bbb23e14e9766913b1c483114817b208684308,"Tweaks to SQL indexing and statement caching
 "
snej,2013-09-29 23:04:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8a8c0917fae25ce83d7ed6a4c6e41d58afe0a55,b8a8c0917fae25ce83d7ed6a4c6e41d58afe0a55,"Optimization: In-memory docID cache

Use an NSCache to map docID strings to the internal numeric IDs
(the row numbers in the ‘docs’ table.)"
snej,2013-09-28 22:26:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3e27f0369a4a9380f30ab7bdc15874c2a6c43884,3e27f0369a4a9380f30ab7bdc15874c2a6c43884,"Optimization: Don't fetch _attachments if there are none

Document lookup incurs a wasted extra SQL ""SELECT FROM attachments...""
if the revision has no attachments. To avoid this, I added a flag
revs.no_attachments that's true if the revision has no associated row
in the attachments table. When the revision is loaded, this flag in
turn sets a CBLContentsFlags flag kCBLNoAttachments, which indicates
that the _attachments dictionary shouldn't be populated. (This flag
could be used in other contexts where the caller doesn't care whether
the doc has attachments.)"
snej,2013-09-28 22:13:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/affa8d75a25f4ca0090e4651001bd1e70823ec5d,affa8d75a25f4ca0090e4651001bd1e70823ec5d,"Turn on FMDB SQL statement caching -- significant speedup for DB ops.

Testing on an iPod Touch, I saw a 20-30% speedup in some db-heavy
activities like creating docs en masse or big replications."
snej,2013-09-28 22:19:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b85fa4593f2aeb20b266b6adc54dffe34a7fbb4,8b85fa4593f2aeb20b266b6adc54dffe34a7fbb4,"Added a simple performance test to the iOS demo app target

It just creates, indexes and queries a few thousand documents."
snej,2013-09-28 04:37:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8b4d95b4dc1d1504d84a2d93e0a0b892a8f2bdf,a8b4d95b4dc1d1504d84a2d93e0a0b892a8f2bdf,Replicator: Fixed a bg-replication crash
snej,2013-09-27 19:43:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/893718a05e1dcb707d74e14a9827f43d9be5a768,893718a05e1dcb707d74e14a9827f43d9be5a768,"Replicator: Run on background thread.

Mostly I just enabled the RUN_IN_BACKGROUND flag of CBLReplication, and
added unit tests to verify that things work properly and the main runloop
isn't getting janked.

I also tweaked CBLManager so that copied sub-managers will inherit its
background server instead of spawning their own.
Fixes #18."
snej,2013-09-27 19:28:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9c1b37b07df8fdf15f99a9ed777f2dce30ded54,f9c1b37b07df8fdf15f99a9ed777f2dce30ded54,Split up CBLView+Internal.m
snej,2013-09-27 19:27:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f24e3507e0db5410521fc47e0779838b254068d,9f24e3507e0db5410521fc47e0779838b254068d,CBLSocketTracker shouldn't warn when it reads 0 bytes
snej,2013-09-27 19:27:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d591c29d2d4bae14612e852a8a0db435b4495144,d591c29d2d4bae14612e852a8a0db435b4495144,"Fixed a bug where a CBLPuller reports it's stopped _twice_

Was balancing the asyncTask count improperly; sometimes the task could
finish before it got marked as started."
snej,2013-09-27 17:49:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/250f29b160f17d82509e5f70b8c1e808f9da817a,250f29b160f17d82509e5f70b8c1e808f9da817a,"Oops, fixed a bug in the last commit"
snej,2013-09-27 16:58:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80f1c806491c52b14c85798be59728d1b25f69e2,80f1c806491c52b14c85798be59728d1b25f69e2,Replicator: Adjust validation fn so ‘headers’ and ‘network’ can be changed in a persistent replication.
snej,2013-09-27 16:53:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc7472ac5474a0d80abf783c515c1a10ce7439b3,fc7472ac5474a0d80abf783c515c1a10ce7439b3,"Replicator: Changing custom headers shouldn’t reset to sequence 0

Fixes #143"
snej,2013-09-27 15:20:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bab13a748912b221ac98f5a8ff5d952b3d294c10,bab13a748912b221ac98f5a8ff5d952b3d294c10,"Unit tests are fully portable now -- can configure credentials at runtime

Set environment variables CBL_TEST_SERVER, CBL_TEST_USERNAME, etc.
to configure what server the unit tests will use for replication. See detailed info at
CBLReplicatorTests.m:43.
For #93"
snej,2013-09-27 01:09:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/90542944d15aa4868811d46ff91c04982413589e,90542944d15aa4868811d46ff91c04982413589e,"Fixed failure in basic-auth of change tracker

Regression introduced by commit e4c2115. Fixes #121."
snej,2013-09-27 00:22:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bce63fd6824e8bb1f5d9f821ed639200d14e78e9,bce63fd6824e8bb1f5d9f821ed639200d14e78e9,"Unit test tweaks

More progress making the unit tests able to run anywhere. (+1 squashed commit)
Squashed commits:
[ca97c95] Updated to latest MYUtilities, to prevent a test failure"
snej,2013-09-26 23:16:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7496676b5894ce61ccf8ef181b251fa569a11ef5,7496676b5894ce61ccf8ef181b251fa569a11ef5,"Oops, fixed a missing export for CBLGeoCoordsToRect."
snej,2013-09-26 21:26:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/26a7d4db2595bbbd705fc5c8bae601968f236c3f,26a7d4db2595bbbd705fc5c8bae601968f236c3f,"Merge branch 'fulltext'

Conflicts:
	CouchbaseLite.xcodeproj/project.pbxproj
	Source/CBLJSON.m
	vendor/MYUtilities"
snej,2013-09-26 21:21:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3432fb08adf14921cb1fd9ceb98174b50f921dc,d3432fb08adf14921cb1fd9ceb98174b50f921dc,Ignore the pesky .xccheckout file
snej,2013-09-26 21:14:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64e88b6d0027a7c86400bc3b7e8bb161be19df97,64e88b6d0027a7c86400bc3b7e8bb161be19df97,Turned off Mac OS code signing (until build machine gets it configured)
snej,2013-09-26 20:59:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4ee01256b6856677632a2add1f18bf9d63bce310,4ee01256b6856677632a2add1f18bf9d63bce310,"Added control over whether a replication runs over cell networks.

See new property CBLReplication.network.
From the REST API, set the replication-object property “network” to “WiFi” or “Cell”.
Fixes #103."
snej,2013-09-26 20:04:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/95dd63a64e972bfba17c001245ec0fc1e48440e1,95dd63a64e972bfba17c001245ec0fc1e48440e1,Fixed code signing issues (wrong identity configured)
snej,2013-09-26 18:13:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6cf93da4a7a6583a4af39f3291f6cd5828272829,6cf93da4a7a6583a4af39f3291f6cd5828272829,"I give up on 64-bit support :-p

Xcode 5 GM (but _not_ the ""GM seed"") refuses to build 64-bit iOS unless
the deployment target is bumped to 7.0, which we can't do because we
support 6.0. Taking out the 64-bit architecture settings."
snej,2013-09-26 17:14:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a951457bb215961e11e8dd90f9283318ebf0acf,8a951457bb215961e11e8dd90f9283318ebf0acf,"Fix Xcode 4 build some more

I think I have $ARCHS set up correctly now."
snej,2013-09-26 02:36:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6d07cb73f3aabae34d65c18c4e032ef1bf141be,a6d07cb73f3aabae34d65c18c4e032ef1bf141be,Fixed a misleading doc-comment for -[CBLDatabase untitledDocument].
snej,2013-09-26 02:06:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a36d26965e7e32384d380b3893ca7ec67875836,8a36d26965e7e32384d380b3893ca7ec67875836,"Fixed: LiveQuery doesn't update if map fn emits nil values

CBLQueryRow’s equality test needs to compare sequence numbers if there are no values to go on.
Fixes #115"
snej,2013-09-25 05:21:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a2d6eacbe01408cde353ad57ad1f25cb6eb7d55c,a2d6eacbe01408cde353ad57ad1f25cb6eb7d55c,"Added CBLRevision.propertiesAvailable [API CHANGE]

This is to detect revisions whose contents have been lost by compaction,
or which were never downloaded by a pull replication."
snej,2013-09-24 16:04:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c510da0f5630d97580f08cf7a4d5afd380486f17,c510da0f5630d97580f08cf7a4d5afd380486f17,"LiteServ: Improvements to logging

* Redirected logs to ~/Library/Logs/LiteServ.log
* ...unless running in Xcode
* Added ""View Logs"" menu command
* Shut down CBLManager and CBLListener cleanly on quit."
snej,2013-09-24 15:02:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63ba1f1dab96476c06b27fefdd488dbdc5b9ee7c,63ba1f1dab96476c06b27fefdd488dbdc5b9ee7c,"LiteServ: Added ""Install Tool..."" menu command"
snej,2013-09-24 14:26:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d316ec36dc233a623377680fdedf6b9bb5841ab2,d316ec36dc233a623377680fdedf6b9bb5841ab2,"LiteServ.app: Added CLI tool. Signed. Fixed duplicate-class warning.

Fixes #114 (CLI tool)
Fixes #125 (the warning)"
snej,2013-09-24 05:12:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70c3d03c9081659252640901ab25f3cde83da3e5,70c3d03c9081659252640901ab25f3cde83da3e5,"Added ""LiteServ App"" target that builds LiteServ as a GUI app.

For #114 ... not closing the issue yet because the app still needs a
way to start it from a command-line like the old LiteServ tool."
snej,2013-09-24 01:52:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a3dfaa5a373758b181f521426c5239ff1000d36d,a3dfaa5a373758b181f521426c5239ff1000d36d,FTS: Fixed value of “snippets” property in JSON/REST query row.
snej,2013-09-24 01:05:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57d932138e2d2eed4e62e48c08449cc10beb0fe1,57d932138e2d2eed4e62e48c08449cc10beb0fe1,"REST API support for geo & full-text queries

View query options for geo are:
 ?full_text= (FTS query string)
 ?snippets (true to enable snippets in output)
 ?ranking (false to disable ranked sort order)
Output rows will have properties ""matches"" and maybe ""snippet"".

View query options for geo are:
?bbox (JSON array of 4 numbers: [x0, y0, x1, y1])
Output rows will have properties ""geometry"" and ""bbox""."
snej,2013-09-23 22:29:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f6c34416c33b23d409cce9c83afb476b8787f960,f6c34416c33b23d409cce9c83afb476b8787f960,Fixed incorrect doc-comment on -[CBLReplicator facebookEmailAddress].
snej,2013-09-23 19:15:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b95f6c0bda7bc3bda5953ce9fac125471a87104f,b95f6c0bda7bc3bda5953ce9fac125471a87104f,"GEO: Use SQLite R*tree. Preserve emitted GeoJSON geometry.

Also split out the geo query API into CBLQuery+Geo.h.
Updated the .exp file."
snej,2013-09-23 05:01:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42490a0b69817e096e0ee1a6f8f1aed6b4c3655a,42490a0b69817e096e0ee1a6f8f1aed6b4c3655a,"GEO: Oops, GeoJSON doesn’t have a Rect type so I have to use Polygon.

Also moved all the geometry related stuff to CBLGeometry.h, a new public header."
snej,2013-09-23 02:35:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d270a0da8ba4259c462f4ad316534d0fbef788bb,d270a0da8ba4259c462f4ad316534d0fbef788bb,GEO/FTS: Minor fixes
snej,2013-09-23 02:01:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/33c0bc83202affd4889cdec8624767a1cfbee156,33c0bc83202affd4889cdec8624767a1cfbee156,"GEO: Added support for bounding-boxes.

* Use CBLGeoRectKey to emit a bounding-box as a key.
* CBLGeoJSONKey now understands rects.
* CBLQueryRow now has a boundingBox instead of a geoPoint."
snej,2013-09-20 00:25:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e76f9d892c9992344108a0c4b71816fb425738ea,e76f9d892c9992344108a0c4b71816fb425738ea,Added public API on CBLQuery to do a bounding-box query.
snej,2013-09-20 00:14:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff7831bb4187bcee5ca8d67df40e55f147a49d27,ff7831bb4187bcee5ca8d67df40e55f147a49d27,Switch to emitting geo point as the key in a regular emit() call.
snej,2013-09-19 21:42:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4e1b135e409515ea38a8629e56e614fbe73b5c8,f4e1b135e409515ea38a8629e56e614fbe73b5c8,"Lots more work on geo stuff.

* Fixed some coding errors
* Use native structs instead of objects to hold points/rects
* Made bounds test (in SQL query) use half-open intervals
* Made unit test pass."
snej,2013-09-22 17:24:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f480bb23a43513961a2e44d8d6f4029e9c6ae6f,0f480bb23a43513961a2e44d8d6f4029e9c6ae6f,"FTS: Improved language support by integrating Unicode Snowball tokenizer

Tokenizer from <https://github.com/illarionov/sqlite3-unicodesn>.
Supports Unicode, and stemming for many European languages plus Russian
and Turkish (see full list in file modules_utf8.txt)"
snej,2013-09-22 05:01:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4014466c4cb7a52502be3a8521553a4ae67978cc,4014466c4cb7a52502be3a8521553a4ae67978cc,FTS: Text keys now denoted by CBLTextKey() rather than a special dictionary.
snej,2013-09-22 00:51:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b334ce0ded2a10819b14dfabcf7e44cb27950dfe,b334ce0ded2a10819b14dfabcf7e44cb27950dfe,"FTS: Ranked sorting; header refactoring

* Implemented sorting by ranking (can be turned off for speed)
* Order and limit options honored
* Split FTS stuff out into CBLQuery+FullTextSearch"
snej,2013-09-21 23:31:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a7ee1ee6e37161852e293cb6fe58537175b72b4,1a7ee1ee6e37161852e293cb6fe58537175b72b4,FTS: Query results should be restricted to those from the view being queried!
snej,2013-09-21 20:36:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5c72810ab71ba8e159b020f0be117d6eec3872de,5c72810ab71ba8e159b020f0be117d6eec3872de,FTS: Added support for snippets in the query rows.
snej,2013-09-21 20:02:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9bcc6b6fe0bc5a6eacb5bc887653c9ef2070a71,a9bcc6b6fe0bc5a6eacb5bc887653c9ef2070a71,FTS: Added API to get the match range(s) in the text.
snej,2013-09-21 17:54:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b4356027c11d652c7bac7f61127bd8361915b882,b4356027c11d652c7bac7f61127bd8361915b882,FTS: Don't return text as key; it's now a separate .fullText property
snej,2013-09-20 06:52:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a7cd72de0907cbe730e9566bd140e2530759e26,9a7cd72de0907cbe730e9566bd140e2530759e26,Implemented full-text search using SQLite's FTS4 extension.
snej,2013-09-19 15:54:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e483d62adfc563afbbb00e5abc9b8b10fd850df4,e483d62adfc563afbbb00e5abc9b8b10fd850df4,Tiny tweak to JSON collator
snej,2013-09-19 15:02:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/13a95c3e0f51b8c127e418efe102a7456c952358,13a95c3e0f51b8c127e418efe102a7456c952358,Fix Xcode 4 build by making the 64-bit iOS setting only apply to iOS 7.
snej,2013-09-18 20:56:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad85d17e0cbef23e9b0ae3d7d6ab9f0e245a4ab4,ad85d17e0cbef23e9b0ae3d7d6ab9f0e245a4ab4,"Support for 64-bit iOS

NOT TESTED YET! But the iOS frameworks now include 64-bit binaries.
A side effect of this is that I had to bump the minimum supported iOS
version from 5.0 to 6.0, which for some reason is a prerequisite for
enabling 64-bit.
Fixes #130"
snej,2013-09-18 19:12:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ee52ba63457a34db18d0d26a96d5a513cdeaba6,1ee52ba63457a34db18d0d26a96d5a513cdeaba6,"Added Base64 conversion methods to CBLJSON class.

Fixes #129"
snej,2013-09-18 18:14:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b125085cdf2a7c363230448ac3c1a3284c6e1c05,b125085cdf2a7c363230448ac3c1a3284c6e1c05,Replications created by -replicateWithURL:exclusively: should be continuous
snej,2013-09-18 04:57:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b59aa60bc4d1999f7c187c94201423d3786b40c4,b59aa60bc4d1999f7c187c94201423d3786b40c4,Updated MYUtilities
snej,2013-09-18 03:19:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f5084d9f39e1b4244cae0049ebd495ad8389a23,3f5084d9f39e1b4244cae0049ebd495ad8389a23,"Fix for replication never going idle after checkpoint-save conflict

Fixes #128"
snej,2013-09-10 16:25:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef3b1856bec5ee4642a81c09d8ad89fe45faf52e,ef3b1856bec5ee4642a81c09d8ad89fe45faf52e,Added some code-coverage testing to CBLCollateJSON & fixed test holes
jessliu,2013-09-10 19:43:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e036cd33d4e8fd78003bc259282c6c73d832c93,8e036cd33d4e8fd78003bc259282c6c73d832c93,"Adding Apache 2.0 License                                  Apache License                            Version 2.0, January 2004                         http://www.apache.org/licenses/     TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION     1. Definitions.        ""License"" shall mean the terms and conditions for use, reproduction,       and distribution as defined by Sections 1 through 9 of this document.        ""Licensor"" shall mean the copyright owner or entity authorized by       the copyright owner that is granting the License.        ""Legal Entity"" shall mean the union of the acting entity and all       other entities that control, are controlled by, or are under common       control with that entity. For the purposes of this definition,       ""control"" means (i) the power, direct or indirect, to cause the       direction or management of such entity, whether by contract or       otherwise, or (ii) ownership of fifty percent (50%) or more of the       outstanding shares, or (iii) beneficial ownership of such entity.        ""You"" (or ""Your"") shall mean an individual or Legal Entity       exercising permissions granted by this License.        ""Source"" form shall mean the preferred form for making modifications,       including but not limited to software source code, documentation       source, and configuration files.        ""Object"" form shall mean any form resulting from mechanical       transformation or translation of a Source form, including but       not limited to compiled object code, generated documentation,       and conversions to other media types.        ""Work"" shall mean the work of authorship, whether in Source or       Object form, made available under the License, as indicated by a       copyright notice that is included in or attached to the work       (an example is provided in the Appendix below).        ""Derivative Works"" shall mean any work, whether in Source or Object       form, that is based on (or derived from) the Work and for which the       editorial revisions, annotations, elaborations, or other modifications       represent, as a whole, an original work of authorship. For the purposes       of this License, Derivative Works shall not include works that remain       separable from, or merely link (or bind by name) to the interfaces of,       the Work and Derivative Works thereof.        ""Contribution"" shall mean any work of authorship, including       the original version of the Work and any modifications or additions       to that Work or Derivative Works thereof, that is intentionally       submitted to Licensor for inclusion in the Work by the copyright owner       or by an individual or Legal Entity authorized to submit on behalf of       the copyright owner. For the purposes of this definition, ""submitted""       means any form of electronic, verbal, or written communication sent       to the Licensor or its representatives, including but not limited to       communication on electronic mailing lists, source code control systems,       and issue tracking systems that are managed by, or on behalf of, the       Licensor for the purpose of discussing and improving the Work, but       excluding communication that is conspicuously marked or otherwise       designated in writing by the copyright owner as ""Not a Contribution.""        ""Contributor"" shall mean Licensor and any individual or Legal Entity       on behalf of whom a Contribution has been received by Licensor and       subsequently incorporated within the Work.     2. Grant of Copyright License. Subject to the terms and conditions of       this License, each Contributor hereby grants to You a perpetual,       worldwide, non-exclusive, no-charge, royalty-free, irrevocable       copyright license to reproduce, prepare Derivative Works of,       publicly display, publicly perform, sublicense, and distribute the       Work and such Derivative Works in Source or Object form.     3. Grant of Patent License. Subject to the terms and conditions of       this License, each Contributor hereby grants to You a perpetual,       worldwide, non-exclusive, no-charge, royalty-free, irrevocable       (except as stated in this section) patent license to make, have made,       use, offer to sell, sell, import, and otherwise transfer the Work,       where such license applies only to those patent claims licensable       by such Contributor that are necessarily infringed by their       Contribution(s) alone or by combination of their Contribution(s)       with the Work to which such Contribution(s) was submitted. If You       institute patent litigation against any entity (including a       cross-claim or counterclaim in a lawsuit) alleging that the Work       or a Contribution incorporated within the Work constitutes direct       or contributory patent infringement, then any patent licenses       granted to You under this License for that Work shall terminate       as of the date such litigation is filed.     4. Redistribution. You may reproduce and distribute copies of the       Work or Derivative Works thereof in any medium, with or without       modifications, and in Source or Object form, provided that You       meet the following conditions:        (a) You must give any other recipients of the Work or           Derivative Works a copy of this License; and        (b) You must cause any modified files to carry prominent notices           stating that You changed the files; and        (c) You must retain, in the Source form of any Derivative Works           that You distribute, all copyright, patent, trademark, and           attribution notices from the Source form of the Work,           excluding those notices that do not pertain to any part of           the Derivative Works; and        (d) If the Work includes a ""NOTICE"" text file as part of its           distribution, then any Derivative Works that You distribute must           include a readable copy of the attribution notices contained           within such NOTICE file, excluding those notices that do not           pertain to any part of the Derivative Works, in at least one           of the following places: within a NOTICE text file distributed           as part of the Derivative Works; within the Source form or           documentation, if provided along with the Derivative Works; or,           within a display generated by the Derivative Works, if and           wherever such third-party notices normally appear. The contents           of the NOTICE file are for informational purposes only and           do not modify the License. You may add Your own attribution           notices within Derivative Works that You distribute, alongside           or as an addendum to the NOTICE text from the Work, provided           that such additional attribution notices cannot be construed           as modifying the License.        You may add Your own copyright statement to Your modifications and       may provide additional or different license terms and conditions       for use, reproduction, or distribution of Your modifications, or       for any such Derivative Works as a whole, provided Your use,       reproduction, and distribution of the Work otherwise complies with       the conditions stated in this License.     5. Submission of Contributions. Unless You explicitly state otherwise,       any Contribution intentionally submitted for inclusion in the Work       by You to the Licensor shall be under the terms and conditions of       this License, without any additional terms or conditions.       Notwithstanding the above, nothing herein shall supersede or modify       the terms of any separate license agreement you may have executed       with Licensor regarding such Contributions.     6. Trademarks. This License does not grant permission to use the trade       names, trademarks, service marks, or product names of the Licensor,       except as required for reasonable and customary use in describing the       origin of the Work and reproducing the content of the NOTICE file.     7. Disclaimer of Warranty. Unless required by applicable law or       agreed to in writing, Licensor provides the Work (and each       Contributor provides its Contributions) on an ""AS IS"" BASIS,       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or       implied, including, without limitation, any warranties or conditions       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A       PARTICULAR PURPOSE. You are solely responsible for determining the       appropriateness of using or redistributing the Work and assume any       risks associated with Your exercise of permissions under this License.     8. Limitation of Liability. In no event and under no legal theory,       whether in tort (including negligence), contract, or otherwise,       unless required by applicable law (such as deliberate and grossly       negligent acts) or agreed to in writing, shall any Contributor be       liable to You for damages, including any direct, indirect, special,       incidental, or consequential damages of any character arising as a       result of this License or out of the use or inability to use the       Work (including but not limited to damages for loss of goodwill,       work stoppage, computer failure or malfunction, or any and all       other commercial damages or losses), even if such Contributor       has been advised of the possibility of such damages.     9. Accepting Warranty or Additional Liability. While redistributing       the Work or Derivative Works thereof, You may choose to offer,       and charge a fee for, acceptance of support, warranty, indemnity,       or other liability obligations and/or rights consistent with this       License. However, in accepting such obligations, You may act only       on Your own behalf and on Your sole responsibility, not on behalf       of any other Contributor, and only if You agree to indemnify,       defend, and hold each Contributor harmless for any liability       incurred by, or claims asserted against, such Contributor by reason       of your accepting any such warranty or additional liability.     END OF TERMS AND CONDITIONS     APPENDIX: How to apply the Apache License to your work.        To apply the Apache License to your work, attach the following       boilerplate notice, with the fields enclosed by brackets ""[]""       replaced with your own identifying information. (Don't include       the brackets!)  The text should be enclosed in the appropriate       comment syntax for the file format. We also recommend that a       file or class name and description of purpose be included on the       same ""printed page"" as the copyright notice for easier       identification within third-party archives.     Copyright [yyyy] [name of copyright owner]     Licensed under the Apache License, Version 2.0 (the ""License"");    you may not use this file except in compliance with the License.    You may obtain a copy of the License at         http://www.apache.org/licenses/LICENSE-2.0     Unless required by applicable law or agreed to in writing, software    distributed under the License is distributed on an ""AS IS"" BASIS,    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.    See the License for the specific language governing permissions and    limitations under the License."
jessliu,2013-09-10 19:13:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff864060c02e5f5eb7885c8c73e43e33b44f565b,ff864060c02e5f5eb7885c8c73e43e33b44f565b,"Removing CE License

For source we use Apache 2.0"
snej,2013-09-10 14:37:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d2a395686366cf598f6f9d938d9bea3e1a08bd4,0d2a395686366cf598f6f9d938d9bea3e1a08bd4,Fixed some integer-size build issues.
snej,2013-09-08 23:29:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cdc9c418a9eeb28f604d94bc87ca4a4763404ac5,cdc9c418a9eeb28f604d94bc87ca4a4763404ac5,"Made +[CBLJSON dateWithJSONObject:] about 30x faster

...by using C code excerpted from sqlite3 to parse ISO-8602 date strings,
instead of NSDateFormatter.

Also added a new +absoluteTimeWithJSONObject: that returns the time-
stamp as a double (time since reference date), which is even faster
since it doesn't have to allocate an NSDate object.

Thanks to @nirvana for suggesting this to me, and for @AnuragMishra
for initially discovering how much faster sqlite is!

Fixes #122"
snej,2013-09-06 19:22:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c44645fd5126125b90392ab2122f69e3ce54bb54,c44645fd5126125b90392ab2122f69e3ce54bb54,"Don’t send atts_since param on pull, if doc doesn’t have attachments

The list of revs in that param can get pretty lengthy, so it’s a good optimization
to skip it if it’s not needed."
snej,2013-09-06 03:01:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/14327841df77fbb5208792614a48749f47145789,14327841df77fbb5208792614a48749f47145789,"Make sure CBLJSON gets documented

Also add it (and CBLUITableSource) to CouchbaseLite.h."
snej,2013-09-05 23:57:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c1eb5426680cdbce6b090441249fc665babf66e,7c1eb5426680cdbce6b090441249fc665babf66e,"Pusher now sends only the necessary rev IDs in _revisions property

It now looks at the ‘possible_ancestors’ result from the server and omits any revisions from the history that are ancestors of any of those.
This should mean in general that only one a small number of rev IDs are sent; just the number of changes made locally before syncing.
Fixes #119"
snej,2013-09-05 00:11:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2b39074738ce636aa40a45d311e23002307d37c5,2b39074738ce636aa40a45d311e23002307d37c5,"Make continuous replicators retry after errors

Fixes #108"
snej,2013-09-04 22:59:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e4c2115cae3335367ef6e5709738efd1ddb6abbf,e4c2115cae3335367ef6e5709738efd1ddb6abbf,"Make change-tracker not stop on errors, in continuous replication

For #108"
snej,2013-09-05 00:30:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/19729e2c1cae288dca9058f42950268259a9f151,19729e2c1cae288dca9058f42950268259a9f151,Bumped version to 1.479 (beta candidate)
snej,2013-09-04 06:05:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d921873f133b5080541decee973af2707839938,3d921873f133b5080541decee973af2707839938,Fixed bug in FMDB that could cause weird errors in optimized builds
snej,2013-08-30 00:18:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c1d248b3f807ae0eae6134b7394792abf9b4512,0c1d248b3f807ae0eae6134b7394792abf9b4512,"Added -[CBLDocument update:error:]. (API CHANGE)

Easy way to update a document and handle conflicts."
snej,2013-08-28 04:14:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a78fa4f01f72b0ec7288d6ad5847df5f1dbef97,8a78fa4f01f72b0ec7288d6ad5847df5f1dbef97,Added -[CBLQuery waitForRows]
snej,2013-08-23 16:30:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c52b7300b69020f2c30342d63c354f9f4e4f9b76,c52b7300b69020f2c30342d63c354f9f4e4f9b76,"Fixed crashes using .skip in view queries

Also added unit tests. Fixes #109"
snej,2013-08-22 20:55:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a9030fca89e56c4cdc8d3c724eb9385ae4a7b4bd,a9030fca89e56c4cdc8d3c724eb9385ae4a7b4bd,"Switch database file extension from “.touchdb” to “.cblite”

Existing database files will be renamed.
Fixes #105"
snej,2013-08-22 19:43:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f53185c1f20da85cbd98867cf38f9449dda6fb4c,f53185c1f20da85cbd98867cf38f9449dda6fb4c,"Made CBL_Revision immutable[ish], added CBL_MutableRevision subclass"
snej,2013-08-22 19:52:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f3141989672ce45082e1606a7407930af58886bf,f3141989672ce45082e1606a7407930af58886bf,"Fix build by exporting CBLFacebookAuthorizer

It's in CBL.framework but used by CBLListener.framework."
snej,2013-08-21 22:59:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c72ad96b2010901242af05aab2b1cc841fb367f1,c72ad96b2010901242af05aab2b1cc841fb367f1,"Fixed NASTY bug with internal properties appearing in public revisions

When implementing CBLRevision, I forgot CBL_Revision is semi-mutable
(its body property can be changed) and stored a CBL_Revision in an ivar
without copying it first. This had very bad side effects when the CBL_Pusher
got ahold of the same CBL_Revision and later added internal properties
to it…
The visible bug this caused was spurious 400 errors saving documents.
Fixes #101"
snej,2013-08-20 17:41:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d808666c995d073d6370059b88a216f93f859abb,d808666c995d073d6370059b88a216f93f859abb,"ChangeTracker needs to escape “+” char in ?since URL param

Otherwise it produces incorrect URLs pulling from Sync Gateway
channels whose names include “+” chars.
Fixes #99"
snej,2013-08-20 16:45:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72162bc816a8073a99b4ff3a0f41695931844e86,72162bc816a8073a99b4ff3a0f41695931844e86,"Added CGLReplication.channels convenience property

It’s a wrapper around .filter and .query_params that sets the appropriate values for Sync Gateway channel filtering."
snej,2013-08-20 01:43:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42c210e3d54ed5dca07ca105711e7dc0205704a4,42c210e3d54ed5dca07ca105711e7dc0205704a4,"oops, remove yajl submodule (wasn't supposed to be checked in)"
snej,2013-08-20 00:33:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9362dcacf619aac1aed1be9304369dc422a13250,9362dcacf619aac1aed1be9304369dc422a13250,"Better creation of empty databases in unit tests

Added private debug-build-only CBLManager method -createEmptyDatabase:,
for use in API unit tests."
snej,2013-08-20 00:32:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05d2b03437fccb06684b062a6f3f87d86082fe7f,05d2b03437fccb06684b062a6f3f87d86082fe7f,"Delete sqlite -wal and -shm files along with rest of database

-[CBLDatabase deleteDatabase:] should clean up the side files created
by SQLite. (I hate hardcoding their names, but I don't know any
alternative.)"
snej,2013-08-19 19:00:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/884b6a905fd2309e5eba9c66f03b71eded582e25,884b6a905fd2309e5eba9c66f03b71eded582e25,"Some unit tests weren’t being run on iOS

Configuration glitches made a few tests run on Mac only, not iOS. Fixed."
snej,2013-08-19 18:09:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/438ea7229334aede188c3cecb9be254c7f56205c,438ea7229334aede188c3cecb9be254c7f56205c,"Fixed duplicate revisions returned from longpoll changes feed

Fixes #97"
snej,2013-08-19 17:21:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/adfc10e77379fe61ea71ddf92b33777c4612977f,adfc10e77379fe61ea71ddf92b33777c4612977f,"Added CBLViewOptions.reduceSpecified

This allows the options to represent whether the REST ?reduce= parameter is absent.
The map/reduce implementation then interprets reduce as true if it’s absent but there
is a reduce function defined.
Fixes #98"
snej,2013-08-17 19:58:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa4f4c221a50211429e96ca9f77a597a4e0a512c,aa4f4c221a50211429e96ca9f77a597a4e0a512c,"Added some basic unit tests for the public CBLReplication class

For #94"
snej,2013-08-17 19:57:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a1711243db42ba4cad724c447ff360ce7649406,8a1711243db42ba4cad724c447ff360ce7649406,"Fixed an exception when closing db immediately after creating replication

By the time the replication started an instant later, the db was already
closed, so FMDB threw an exception when trying to query it.
(Discovered with new public-replication-API tests!)"
snej,2013-08-17 19:55:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/26700d7aad0c894dd10c36a557012977e2f96e40,26700d7aad0c894dd10c36a557012977e2f96e40,"Fixed a bug in SSL server trust evaluation

(Discovered by the Clang static analyzer!)"
snej,2013-08-17 19:54:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b4878ebe8cd19314d4142b4e351bae482921eca,7b4878ebe8cd19314d4142b4e351bae482921eca,Tweaks to keep the static analyzer from complaining about valid code
snej,2013-08-15 20:50:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aac17db9334338ee8ce4bf3bdc068527367d52d7,aac17db9334338ee8ce4bf3bdc068527367d52d7,"ChangeTracker shouldn’t stop if it receives _more_ changes than its limit

It’s supposed to stop if it receives fewer than the limit, because that indicates it hit the end;
but the test was using “==“ instead of “>=“, so it also stopped if it got more than it
expected, which is wrong. (Sync Gateway had a bug that cause it to send too many changes,
which triggered this bug.)"
snej,2013-08-15 18:15:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/89ec01d5b83571a2525cdd5d074338527b39ad87,89ec01d5b83571a2525cdd5d074338527b39ad87,"Replicator now runs in background, using iOS background-task API

Instead of stopping when the app goes into the background, each active
CBL_Replicator now registers a background task with the OS and keeps
running until it goes idle or the task runs out of time."
snej,2013-08-14 23:03:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/07150a7d272651c42b80fad91599e330e30a7fb3,07150a7d272651c42b80fad91599e330e30a7fb3,"Increase code coverage of public API in unit tests

...In response to Tommie's code-coverage analysis.
Part of #94."
snej,2013-08-14 23:00:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1254908fcab7aef46570564f7abce1f934f51834,1254908fcab7aef46570564f7abce1f934f51834,CBLModel shouldn't reflexively reload itself during -saveAllModels
snej,2013-08-14 21:48:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a84f545c269b316c88f9eb4f1945fc152494870,9a84f545c269b316c88f9eb4f1945fc152494870,Fixed an NSLock misuse warning triggered by -waitForDatabaseNamed:
snej,2013-08-14 21:47:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/68e19545ab77fe3b77903b6a85352422f3d99bca,68e19545ab77fe3b77903b6a85352422f3d99bca,"Proper implementation of CBLQueryRow.localSequence

* It now always has the correct value even if includeDocs wasn't true
* Removed CBLView.sequences property; it's now a no-op"
snej,2013-08-14 17:15:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77886de15c69edcf98e3e10f72c9fa857ab7b1ad,77886de15c69edcf98e3e10f72c9fa857ab7b1ad,"Fix debug iOS build; clean up iOS public headers

* The last commit broke the debug build on iOS with a link error; fixed.
* The Headers directory in the iOS framework had lots of private headers; removed."
snej,2013-08-13 23:06:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/32ba2a612ef6ca932858247518278a7cfcf27977,32ba2a612ef6ca932858247518278a7cfcf27977,"Make server URL used for replication tests configurable

Instead of being hardcoded to “http://localhost:5984”,
it can now be overridden by setting the environment variable “CBL_TEST_SERVER”.
Part of issue #93"
snej,2013-08-09 23:42:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eecead74a48e70039293a8793b13b0eb61df656c,eecead74a48e70039293a8793b13b0eb61df656c,Updated MYUtilities
snej,2013-08-09 23:38:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/746de88475e867e4b9c8c8df62af04dcfba46eb9,746de88475e867e4b9c8c8df62af04dcfba46eb9,Unit test for continuous replication
snej,2013-08-08 23:49:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2799e8e9c7eb9fc1330effd16d5d256a706d64c8,2799e8e9c7eb9fc1330effd16d5d256a706d64c8,"Avoid 409 Conflict errors caused by duplicate replicators

Prevent two CBL_Replicator instances with the same settings from being
active at the same time. Also ensure that replicators with different settings
always have different checkpoint doc IDs to avoid collisions.
Fixes #92"
snej,2013-08-08 17:35:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cd28407be400e77a935c9ab94056d0da85e4119c,cd28407be400e77a935c9ab94056d0da85e4119c,"Skip unnecessary calls to SecTrustEvaluate

I learned that the trust has usually already been evaluated by the caller, so
calling SecTrustGetTrustResult is usually enough."
snej,2013-08-08 00:13:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc469b81e50b362820da3e588c800928bbccd23e,bc469b81e50b362820da3e588c800928bbccd23e,Make CBLVersionString() function public API
snej,2013-08-08 00:13:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fbe3ea055f6bd4ff5ee32de9fede0a85387fff5c,fbe3ea055f6bd4ff5ee32de9fede0a85387fff5c,Fixed a build warning
snej,2013-08-07 22:08:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c13c73c2b1bb6c9b3fad1396f680dea2d7d63eef,c13c73c2b1bb6c9b3fad1396f680dea2d7d63eef,"Facebook auth support

For #86 (not tested yet)"
snej,2013-08-06 20:52:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6dac5658a7a3586001a3d7df290d67d0d259b90,b6dac5658a7a3586001a3d7df290d67d0d259b90,"Allow app to register additional trusted root/anchor SSL certs

If an app replicates with a server whose SSL certificate isn't signed by
a known CA, it can now register the cert (or its CA cert) with the
replicator so it will be treated as a trusted root.
Fixes couchbaselabs/TouchDB-iOS#171"
snej,2013-08-06 02:13:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b33788c6f48f3ec61721705c9d229f3c094f24d8,b33788c6f48f3ec61721705c9d229f3c094f24d8,"LiteServ reports error if HTTP listener fails to start

It used to just pretend it was running…"
snej,2013-08-05 21:40:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/661e67f029ce90560e2ed566fd9d2751c855318f,661e67f029ce90560e2ed566fd9d2751c855318f,"Enabled SSL serving in LiteServ

To use:
* Import/create an SSL identity (key+cert) in the Keychain
* Right-click, choose “New Identity Preference…”
* Give it a name
* Run LiteServe with args “-ssl NAME” where NAME is the identity pref."
snej,2013-08-05 19:42:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b94e6fa4f72cd13183a883c9bf488d6dfb5a06b,3b94e6fa4f72cd13183a883c9bf488d6dfb5a06b,"Allow listener to serve over SSL

If CBLListener.SSLIdentity is set, the listener will accept (only) SSL connections.
Fixes #82"
snej,2013-08-05 18:55:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de6199aed7c5c529207525d4b89e09159434f5fe,de6199aed7c5c529207525d4b89e09159434f5fe,"Fix wrong value of CBLModel property after setting it to nil

After setting a transformed property’s value to nil in an already-saved model,
the old value would still be returned.
See https://github.com/couchbaselabs/CouchCocoa/pull/73"
snej,2013-08-02 21:47:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71c7dc0e19921f813c91d81846fd3a1b47411cd7,71c7dc0e19921f813c91d81846fd3a1b47411cd7,"Return instance_start_time and other metadata from GET /db

Fixes #89"
snej,2013-08-02 18:19:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e4dd682da5e4a5e1a3d569122441d9e2ed013c23,e4dd682da5e4a5e1a3d569122441d9e2ed013c23,"Enable local-to-local replication

Replication properties parser now handles the case where both “source” and “target” are local database names.
It converts “target” into the corresponding cbl: URL so the replicator will be happy.
Fixes #5"
snej,2013-08-01 21:58:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0576aa4a806b59a7523a1516811295976e4e2a8d,0576aa4a806b59a7523a1516811295976e4e2a8d,"CBLMultipartDocumentReader should log doc ID in warnings

Tracking down #84"
snej,2013-07-31 02:55:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce9528f2008bbb08eb12221ae1f5f47b2451f24e,ce9528f2008bbb08eb12221ae1f5f47b2451f24e,"Make “Attachment has incorrect MD5 digest” warning more descriptive/accurate.

Diagnosing #84"
snej,2013-07-25 18:41:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b63725ce8b418267066d28bccc0adb6137745167,b63725ce8b418267066d28bccc0adb6137745167,"Warn about inline (base64) attachments received during pull

Log a warning if a document’s attachments are sent from the server as inline JSON instead of as MIME parts.
Diagnosing #70."
snej,2013-07-24 23:11:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8ff5b64d374512d0d74c9630f7e086e9f872a1af,8ff5b64d374512d0d74c9630f7e086e9f872a1af,Fixed project references to CBLJSViewCompiler source files
snej,2013-07-24 21:00:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc7b40ec82b63d2b9b5fa7ca2c34b388834db8b6,bc7b40ec82b63d2b9b5fa7ca2c34b388834db8b6,"Return correct _attachments dict in putRevision result

The CBL_Revision returned from putRevision:, and posted in the database-changed notification,
was in the same form as input, meaning that it contained entries with “follows” or “data” instead
of stubs. This caused problems when these revisions were modified and stored again.
Fixes #63"
snej,2013-07-23 21:50:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/15a67bfebfed8d09f9778c30357b2c0f0290ee18,15a67bfebfed8d09f9778c30357b2c0f0290ee18,"API doc improvements (build as a target, docset support, etc.)

* Added ""Documentation"" target that builds the Doxygen docs and outputs
  them in the main build output directory.
* Builds a 'docset' bundle that can be imported into Xcode or Dash.
* Some file-layout cleanup, i.e. moving some stuff from the top level
  directory into appropriate subdirectories."
snej,2013-07-18 21:30:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d28f32b5f184047d4c3c33741ef03ef561a9af1,1d28f32b5f184047d4c3c33741ef03ef561a9af1,"More CouchDB conformance fixes

* On upload of doc with attachments, reject if stub attachment has a bogus “revpos”.
* DELETE of attachment with no revid given should return 409, not 404.
* “reduce” view option should default to true if view has a reduce function.
* _compact should return 202, not 206."
snej,2013-07-17 23:38:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c96cfb91e51d64918a0b0e4e80cc0ca9b07a228,4c96cfb91e51d64918a0b0e4e80cc0ca9b07a228,"Implement CouchDB “connection_timeout” replication option

Value is desired timeout in milliseconds, e.g. 60000 for 1 minute.
This applies to all HTTP requests sent by the replicator.
Default is 1 minute.
Fixes couchbaselabs/touchdb-ios#270

Conflicts:
	Source/CBLRemoteRequest.h
	Source/CBLRemoteRequest.m
	Source/CBL_Replicator.m"
snej,2013-07-17 21:54:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09497abf1a1df88cbe4ad9b59955cacd0c7ec666,09497abf1a1df88cbe4ad9b59955cacd0c7ec666,Enable JavaScript views in LiteServ
snej,2013-07-17 21:38:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e5563e1b0abc572ec1f1beab7b09e237d65772f5,e5563e1b0abc572ec1f1beab7b09e237d65772f5,More conformance fixes
snej,2013-07-17 20:03:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a97bc3fb565c6d58e335c2760d5d7727eadb7369,a97bc3fb565c6d58e335c2760d5d7727eadb7369,"Fixed some CouchDB REST conformance issues

Discovered by the couchdb-harness unit test suite.

* Doc PUT/DELETE should use ?rev= query or If-Match: header, and
  complain on mismatch.
* Multiple range in a Range: header caused an assertion failure.
* A no-op Range: header (entire content range) should return 200.
* Unsatisfiable Range: header wasn't causing a 416 response."
snej,2013-07-15 16:53:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bab910da355fe0bfb2ef68f71f6f3ad99812fc30,bab910da355fe0bfb2ef68f71f6f3ad99812fc30,"Handle HTTP digest auth correctly in TDRemoteRequest

Fixes couchbaselabs/touchdb-ios#269"
snej,2013-07-10 20:45:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/277d734d329f3842e24d163224177513dea725cc,277d734d329f3842e24d163224177513dea725cc,Added some more CBLModel unit tests.
snej,2013-07-09 17:34:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f01664926ce2df218c73b6fd051be32022e8b9c8,f01664926ce2df218c73b6fd051be32022e8b9c8,"Added CBLQuery.includeDeleted property, for _all_docs queries

Simply plumbing a public API for the existing CBLQueryOptions field.
Fixes #68."
snej,2013-06-25 17:21:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c58b40ed18178112573b5c36a17e2b277420c613,c58b40ed18178112573b5c36a17e2b277420c613,"Fixed crasher instantiating a model from an array-of-models property

* Improved the unit test to catch this.
* Also optimized saving an array-of-models (-propertiesToSave can just use the CBLModelArray’s array of docIDs rather than using the normal NSArray case.)
* Also added a nice -description method for CBLModelArray.

FIxes #62."
snej,2013-06-24 20:24:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aec433449a49e6753d0c640114fb9f08d0b8e33a,aec433449a49e6753d0c640114fb9f08d0b8e33a,"Fix for crash whereby TDRouter could get messaged after deallocation

Fixes #266.

Conflicts:
	Source/CBL_Router+Handlers.m"
snej,2013-06-21 18:05:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d675f2efd52e96330b887c4bfeebb6bd49890e3c,d675f2efd52e96330b887c4bfeebb6bd49890e3c,"Better recovery from failure to save replication checkpoint

On 404, clear the saved checkpoint (including its _rev) and retry.
On 409, load the checkpoint again to pick up the current rev, then retry."
snej,2013-06-20 18:03:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01f956af36708d5cffb04775a23f54ed69b442d5,01f956af36708d5cffb04775a23f54ed69b442d5,"Router: Make ""POST /_replicate"" synchronous as in CouchDB"
snej,2013-06-19 23:44:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c5e107b46256d312d9c9a5a5f38ec96b4145748,4c5e107b46256d312d9c9a5a5f38ec96b4145748,"Added options -dir, -port, -help to LiteServ

Also a usage message that’s printed if you give an unknown arg."
snej,2013-06-18 06:02:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b54878147055b657c75352549c23b11bffef9199,b54878147055b657c75352549c23b11bffef9199,Updated CBLJSONValidator to draft 4 of JSON-Schema spec.
snej,2013-06-14 20:36:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/46262ac358a105f33c6005953a13b3d5cb24f398,46262ac358a105f33c6005953a13b3d5cb24f398,API tweaks for JSON-Schema validation
snej,2013-06-14 20:36:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e74b644a951dfacebcee30ed5d1915fffed4ca8a,e74b644a951dfacebcee30ed5d1915fffed4ca8a,"Implemented JSON-Schema validation via optional CBLJSONValidator class.

This class is in the ""Extras"" folder in a binary distribution.
You'll need to compile it into your app yourself."
snej,2013-06-13 20:15:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d6eaa3e955d1899be4a6ef5601795bf6a321385,5d6eaa3e955d1899be4a6ef5601795bf6a321385,"Oops, some new files were in the wrong iOS targets"
snej,2013-06-13 20:03:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6159a9d405d0797de955ee1cdf6696ad5cfe85de,6159a9d405d0797de955ee1cdf6696ad5cfe85de,Two small fixes suggested by the Clang static analyzer
snej,2013-06-13 20:02:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/907289c7ba568a784f057f4d9a6523584d3674b2,907289c7ba568a784f057f4d9a6523584d3674b2,"CBLModel support for typed array properties (including arrays of models)

Docs on the wiki at:
https://github.com/couchbase/couchbase-lite-ios/wiki/Guide%3A-Models
Fixes #51."
snej,2013-06-12 16:23:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2d098e5577f3f7c16892a6c8f4357b93a68119a,c2d098e5577f3f7c16892a6c8f4357b93a68119a,"Speculative fix of a warning from CBLSocketChangeTracker

Fixes the only way I can find to reach the warning ""input stream read
returned 0"".

See Message-ID 292d3b0e-b304-4306-9d9a-a80da31c0b70@googlegroups.com"
snej,2013-06-11 23:31:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/940fd7c58c0c02ed1f2366de08ee06d4a8bb6767,940fd7c58c0c02ed1f2366de08ee06d4a8bb6767,"CBLModel's save method shouldn't trigger -didLoadFromDocument call

CBLModel saw an echo of its own document change and treated it as an
external change, causing it to reload its properties. This was
wasteful. Fixed it. (Fixes #52)"
snej,2013-06-11 22:32:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5ecc07c8688a5d834992a51a23cd99faf8be0db,b5ecc07c8688a5d834992a51a23cd99faf8be0db,"Allow incoming attachment with bogus revpos (but fix it and warn)

Fixes #44"
snej,2013-06-11 17:15:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b8ccfc93602b18a1f764e921f0225e31db5b5304,b8ccfc93602b18a1f764e921f0225e31db5b5304,Checked in new Xcode '.xccheckout' file
snej,2013-06-11 17:12:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/07f6084d4ea6b64542bc1603886c869869d4c065,07f6084d4ea6b64542bc1603886c869869d4c065,"Tweaked warning for failed NSDecimalNumber parsing in CBLModel

(see #48)"
snej,2013-06-11 16:57:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5afad5c095be41fa9e96b28f958472fa8a3a8957,5afad5c095be41fa9e96b28f958472fa8a3a8957,"Pull request #48 (Added NSDecimalNumber support to CBLModel)

Merged branch 'master' of git://github.com/Zymantas/couchbase-lite-ios"
snej,2013-06-11 16:34:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6d51561e31d65e4c75082e8520297ae18c97f40,e6d51561e31d65e4c75082e8520297ae18c97f40,Tweaks for compatibility with new version of Xcode
snej,2013-05-27 20:10:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/867626dd0f983168c61207f6fe26a112baa68bd6,867626dd0f983168c61207f6fe26a112baa68bd6,"Explicitly set proxy settings for TDSocketChangeTracker.

CFStream doesn't automatically look up the system HTTP proxy settings; you have to get those
settings and then set the stream to use them. :-p
Fixes #259 (I think — haven't verified this in an environment with a proxy)"
snej,2013-05-26 20:07:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77d2aeb02f82e23f71cc8b90a89c613a2349fca2,77d2aeb02f82e23f71cc8b90a89c613a2349fca2,"Fix crash handling ?key= query parameter, and implement ?keys=

Fixes #260

Conflicts:
	Source/CBL_Router.h
	Source/CBL_Router.m"
tspacek,2013-05-20 07:28:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed54c7a38b165e44dc10ad7791582a3dea7cf3d8,ed54c7a38b165e44dc10ad7791582a3dea7cf3d8,"Add support for filtering _changes by doc_ids, to facilitate named document replication"
snej,2013-05-07 01:01:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/93418c6f16bff717c5aa3e1c437f628ed295fcab,93418c6f16bff717c5aa3e1c437f628ed295fcab,Bumped version to 1.407 (alpha candidate 2)
snej,2013-05-06 18:50:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bde4983939cf0108d590719899eb6dca199c98e3,bde4983939cf0108d590719899eb6dca199c98e3,Made -[CBLModel markNeedsSave] public.
snej,2013-04-22 23:00:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1ddc21283e33368191301bdc45142ef4cd048b5b,1ddc21283e33368191301bdc45142ef4cd048b5b,Doc-comment tweaks.
snej,2013-04-22 22:26:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d4f18ba344d0107d7b8c06c5de598f78a752183e,d4f18ba344d0107d7b8c06c5de598f78a752183e,"Make Persona authorizer more tolerant of variant forms of origin URL

I.e. different capitalizations of ""http"", adding explicit port 80, etc.
Fixes #49"
snej,2013-05-06 17:39:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25b9d8d2fd80886cc2340d2a8a4b6a40d84ad4ac,25b9d8d2fd80886cc2340d2a8a4b6a40d84ad4ac,"Merge pull request #50 from ewanmellor/fix-wiki-links

Fix some wiki links in the README."
Zymantas,2013-05-06 06:36:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40ee780042938cfa573002eec3b1d2dbc055d08a,40ee780042938cfa573002eec3b1d2dbc055d08a,"The value stored in _properties should be the parsed NSDecimalNumber, not the raw string."
ewanmellor,2013-05-04 17:06:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c88ccec27bd67a17a681259d5d413443771e890b,c88ccec27bd67a17a681259d5d413443771e890b,Fix some wiki links in the README.
Zymantas,2013-04-29 13:50:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fb25fd95a02771afa7aa53ec0be573bed327cc22,fb25fd95a02771afa7aa53ec0be573bed327cc22,Added NSDecimalNumber support to CBLModel
snej,2013-04-22 17:53:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec0368d0a1782ea0340b098fa9a7b9b2c1f397af,ec0368d0a1782ea0340b098fa9a7b9b2c1f397af,Bump version to 1.406 (alpha candidate 1)
snej,2013-04-19 19:19:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1aec39d3a36f49a3833444a77e45ae3605c2d138,1aec39d3a36f49a3833444a77e45ae3605c2d138,"Persona 'origin' URL should not end with '/'

It's not entirely clear whether it should or shouldn't, but the examples on the Persona developer site show it without.
A disagreement about this was breaking logins in LiteGap, because the strings didn't match."
snej,2013-04-18 20:05:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed50d5294c6394bd61ba4f62d1d8886e8f467e97,ed50d5294c6394bd61ba4f62d1d8886e8f467e97,"Fix memory leaks (reference cycles) in replicator

Fixes couchbase/couchbase-lite-ios#37

Conflicts:
	Source/CBLMultipartReader.h
	Source/CBL_Puller.m
	Source/CBL_Pusher.m"
snej,2013-04-18 17:53:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f264b85f54d089f6613c76430f3443d9e44a04e,9f264b85f54d089f6613c76430f3443d9e44a04e,"Workaround for truncated _changes feed responses

If TDSocketChangeTracker gets an unparseable response whose beginning
looks like the expected JSON, assume the socket got cut off by some
intermediary and go through the usual retry mechanism.
Fixes #241."
snej,2013-04-18 05:14:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8ee5c3d30c64250a8e557a233814b5f06f45ee26,8ee5c3d30c64250a8e557a233814b5f06f45ee26,"Fix ""removePending: sequence %lld not in set"" warnings

Fixes #42"
snej,2013-04-17 16:52:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78b79f703c8512a5bba8c37e9d7a206ba92554ac,78b79f703c8512a5bba8c37e9d7a206ba92554ac,"Oops, fixed release build"
snej,2013-04-17 16:23:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b7b1844574c4537d802d03397d48590ddaa83d1,7b7b1844574c4537d802d03397d48590ddaa83d1,"Added unit tests for +[CBLManager isValidDatabaseName:]

Investigating issue #43 ... these tests don't reproduce it.
Added a restriction that db name be < 240 characters long, so it fits in
an HFS+ filename even after adding a suffix to it."
snej,2013-04-17 15:33:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/93489514f7cb8d181a259411c5565f453c07f61a,93489514f7cb8d181a259411c5565f453c07f61a,"Oops, fixed build (stupid missing semicolon)"
snej,2013-04-05 22:51:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c3fa3681580bd762306506aeaa5746e9336d5e97,c3fa3681580bd762306506aeaa5746e9336d5e97,"Some correctness tweaks to TDSocketChangeTracker

A futile attempt to address truncated feeds (#241); but I think these are
good changes to make anyway even if they didn't help that."
snej,2013-04-05 22:40:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5f1ad7b4e951446c75257f2398f03c915f855679,5f1ad7b4e951446c75257f2398f03c915f855679,"Basic-auth improvements

* If a TDRemoteRequest gets an auth challenge and finds a new credential based on the Realm string,
  it now remembers that in its authorizer, and the replicator will pick it up and use that as its
  authorizer from then on. This should help pick up credentials registered with non-empty realms.
* TDRemoteRequest now tries the 'proposed' credential, if there is one, on its first pass through
  the auth challenge handler.
* Added more logging about the auth flow, for future debugging needs.

I am not sure if these will fix issue #242 but they should help.

Conflicts:
	Listener/TouchServ.m
	Source/CBL_Replicator.m"
snej,2013-04-17 05:08:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bf20439b085d4d6beb21803b2ce9982d0642de5c,bf20439b085d4d6beb21803b2ce9982d0642de5c,Tweaks to the new transaction code
snej,2013-04-16 23:15:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf41808dc997ab42bdab7889b8c7d478ad45cd64,cf41808dc997ab42bdab7889b8c7d478ad45cd64,Catch & report exceptions thrown by map/reduce/filter/validate blocks
snej,2013-04-16 23:10:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/99fcca376cb9c6c5d7ccf03a5b775df5dd42a839,99fcca376cb9c6c5d7ccf03a5b775df5dd42a839,"Handle SQLite database-busy errors by retrying transactions (fixes #34)

It's possible for a SQLite transaction to hit a SQLITE_BUSY error partway
through (when it first tries to write) because another thread's
transaction got the exclusive lock first. In this situation it has to
back out of the transaction and then retry it from the start.

I added a new status code kCBLStatusDBBusy.

I added CBLDatabase.lastDbError to return the error status of the last
SQLite call, and added a whole lot of calls to it so that we get the
correct status code, so callers can detect a busy error.

-[CBLDatabase _inTransaction:] now handles kCBLStatusDBBusy by retrying
the entire transaction after aborting it, including calling the block
again. It gives up after 10 retries.

I removed the beginTransaction and endTransaction methods and changed
all the callers to use _inTransaction: instead. This took a lot of
gnarly changes to low-level code, especially in TD_Database+Insertion.m."
snej,2013-04-15 21:05:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/61c7917de40a90cba94c757de25be2c3be10cc59,61c7917de40a90cba94c757de25be2c3be10cc59,"Use correct _session API URL for Sync Gateway

Now tries both /_session and /db/_session. Fixes #41."
snej,2013-04-15 21:00:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cfef6609dc56df5b87d9dcf960134e39e8d52157,cfef6609dc56df5b87d9dcf960134e39e8d52157,"Added extra sanity checks around transactions.

Trying to figure out #34."
snej,2013-04-15 18:47:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25f7860f4b87f80a1738b5e748b16242361b26c4,25f7860f4b87f80a1738b5e748b16242361b26c4,"Fixed broken links in README.

Fixes #35."
snej,2013-04-03 23:06:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4bf5a7046d93ef42c4e1973d7a878dbe60365a0,f4bf5a7046d93ef42c4e1973d7a878dbe60365a0,"CBLJSON should use milliseconds in ISO-8601 dates

CBLJSON was using an ISO-8601 date format string without milliseconds in it.
But ECMAScript specifies that date strings should have milliseconds.
I extended the code to (a) generate strings with millis, and (b) parse strings with or without them.
Added a test case, too.
Fixes #33."
snej,2013-03-29 18:17:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b28b1f71e81c7640be365474068bdd812ab843c,8b28b1f71e81c7640be365474068bdd812ab843c,"Make TDPusher more careful abut bumping the checkpoint

It now works similarly to the puller, using an NSIndexSet to keep track of which sequences haven't
yet been uploaded, and only advancing the checkpoint to just before the first sequence in the set.
This will fix possible edge cases/race conditions where the checkpoint may have been advanced too
optimistically, causing a doc that failed to be pushed once to never be retried. (Fixes #246)

Conflicts:
	Source/CBL_Pusher.m"
snej,2013-03-29 18:14:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dfff5a4fadc7d8fdace98bb1c92308615eb509f4,dfff5a4fadc7d8fdace98bb1c92308615eb509f4,"Make returned error strings more compatible with CouchDB's

These strings are in JSON ""error"" properties in error responses and in individual items
of a _bulk_docs response.

Conflicts:
	Source/CBL_Router+Handlers.m
	Source/TDStatus.m"
snej,2013-03-28 21:34:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e87c1dc283fdc968adb3cc34cbf20f4db55ffbe6,e87c1dc283fdc968adb3cc34cbf20f4db55ffbe6,"Hide passwords embedded in logged URLs

Passwords in URLs are replaced with ""*****"" when logged.
I don't think I've fixed all the places where URLs get logged yet.
File bugs if there are others."
snej,2013-03-28 21:24:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f16e4a85b4967418c08dc39b7ef3973f6e08390,9f16e4a85b4967418c08dc39b7ef3973f6e08390,Added CBLJSViewCompiler to the 'Extras' folder.
snej,2013-03-28 18:03:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f4be64ba0d57a0ccc9b4a6137626ad901905704,0f4be64ba0d57a0ccc9b4a6137626ad901905704,"Better logging if change tracker fails HTTP auth

If TDSocketChangeTracker gets a 401 or 407 and can't find a credential, or the credential is rejected,
it now logs a message of the form
    TDSocketChangeTracker[...]: HTTP auth failed; sent Authorization: %@  ;  got WWW-Authenticate: %@
showing the Authorization header it sent (if any, else null) and the WWW-Authenticate response header.
These headers are also returned in the NSError as keys ""HTTPAuthorization"" and ""HTTPAuthenticateHeader""
(although this is of limited use since this info won't make it all the way up to the public replication API, yet.)
This should help in diagnosing issue #242.

Conflicts:
	Source/ChangeTracker/CBLSocketChangeTracker.m
	Source/TDStatus.h
	Source/TDStatus.m"
snej,2013-03-28 16:40:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cde55a63f29ed6f6d4233a01a901caf1e701a4df,cde55a63f29ed6f6d4233a01a901caf1e701a4df,"REST: Added continuous feed version of _active_tasks

This lets REST clients get continuously-pushed replication activity updates.

If you add ""?feed=continuous"" to an /_active_tasks request:
* The response uses HTTP chunked mode.
* Each task object is sent as a separate top-level JSON object followed by a newline.
* The connection stays open forever, and subsequent activity changes are written immediately.

Fixes #27"
snej,2013-03-27 23:14:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cae0313ae69fdb756e83fc1dea3659e8d599d464,cae0313ae69fdb756e83fc1dea3659e8d599d464,"Turned off build flag GCC_INCREASE_PRECOMPILED_HEADER_SHARING

I'm getting build failures in Jenkins between the regular and stable builds of CBL
that look like misused precompiled headers, so turning this off may fix them."
snej,2013-03-27 22:12:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e7456c5272195231caee80e8b8e57f14c9eedc5,9e7456c5272195231caee80e8b8e57f14c9eedc5,Bump version to 1.405 (aka 1.5d5)
snej,2013-03-27 21:46:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c249b343479aa03ed2368fdd6bc6f0c2e419f698,c249b343479aa03ed2368fdd6bc6f0c2e419f698,"Generate an ""Extras"" folder in the iOS build output

Extra optional source files go in it -- currently CBLUICollectionSource.
This will then be copied into the archives the buildbot generates."
snej,2013-03-26 21:09:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98503c0d8af5d892c24e5bebdf6a1c7e67a4c7e5,98503c0d8af5d892c24e5bebdf6a1c7e67a4c7e5,"Fix: Puller would lose checkpoint if first doc couldn't be pulled

If the first new revision received by the puller fails to be read or
written, the last-sequence ID won't advance. But the puller was instead
getting a null sequence ID instead of the checkpointed one, and trying
to save that, which deleted the checkpoint. So the next pull would start
over from the beginning.

Conflicts:
	Source/CBL_Puller.m"
snej,2013-03-26 21:07:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/188f912bce538a55f726f917216d28bae3e5886d,188f912bce538a55f726f917216d28bae3e5886d,"Fix: ""?"" in doc ID wasn't being escaped

TDEscapeID wasn't escaping ""?"". This led to the replicator constructing
invalid URLs for docs whose ID contains ""?"", which meant they'd never get
replicated."
snej,2013-03-26 21:05:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d15bac28cf9534af90c8614a095442e7730a1c7b,d15bac28cf9534af90c8614a095442e7730a1c7b,"Fix: Pull checkpoints weren't getting restored correctly

TDPuller was saving its checkpoints to the remote JSON doc as numbers but
they were then read back and cast to string, causing the comparison to
fail. This meant the puller would start over from the beginning every time.

I also added some more logging.

Conflicts:
	Source/CBL_Pusher.m
	Source/CBL_Replicator.m"
snej,2013-03-25 23:37:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c5db1a5e8384f9c8ecf3f9563bb94b9c4ba6c10,8c5db1a5e8384f9c8ecf3f9563bb94b9c4ba6c10,Added some more __attribute__((nonnull)) to public headers.
snej,2013-03-25 23:33:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/490720ad706be15b1fbab62d78921b55e27ad448,490720ad706be15b1fbab62d78921b55e27ad448,"Restart persistent replication after change of filter etc.

If you change the .filter, .query_params, .continuous or .doc_ids property of a
persistent replication, CBLReplication will ensure that the replicator manager
restarts the replication immediately (with the new settings.)

This may be worth doing for non-persistent replications too; but this commit
doesn't cover that."
snej,2013-03-25 23:30:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/658d2a287a099ef152c25abf09b9c8c68de18d0e,658d2a287a099ef152c25abf09b9c8c68de18d0e,"Added public API for local documents

This differs a bit from the CouchDB API in that
* You don't have to give the ""_local/"" prefix, since it's already implicit;
* No MVCC: You don't have to specify the revision ID you're replacing.
  Since the database is local to your app, and these docs aren't replicated,
  it seems like overkill to insist on this.
Fixes #6."
snej,2013-03-25 21:34:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/677836ecd6576fef0ddb09813f5998c4c18fb4cc,677836ecd6576fef0ddb09813f5998c4c18fb4cc,"Added public CBLReplication initializers

This allows a client to create multiple replications between the same source and target.
This can be useful if they have different filters.
Also edited doc-comments on existing replication creation methods to clarify behavior."
snej,2013-03-25 20:38:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed06844fc95c86fb9f0ab1d8b3b3fe2ede380e5f,ed06844fc95c86fb9f0ab1d8b3b3fe2ede380e5f,"Another logic fix in CBLReplication

Fixes #24 some more."
snej,2013-03-25 16:47:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80f08592f5617c38be4d7c1b415135f56e98c86b,80f08592f5617c38be4d7c1b415135f56e98c86b,"Logic fix in CBLReplication; should take care of a reported assertion failure

Fixes #24 (I think…)"
snej,2013-03-23 18:42:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e87721c75f76eb479b4368908b51a03b871ced22,e87721c75f76eb479b4368908b51a03b871ced22,"PUT with new_edits=false should return JSON body like regular PUT

Conflicts:
	Source/CBL_Router+Handlers.m"
snej,2013-03-25 16:06:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff879902b1a4595acdf41a767e10ec8af419a82a,ff879902b1a4595acdf41a767e10ec8af419a82a,Fixed some new bugs in CBLQuery found by the static analyzer
snej,2013-03-23 01:48:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9560a2930975be8eceb7db9f2989a88a7b51daf,c9560a2930975be8eceb7db9f2989a88a7b51daf,"Fixed out-of-order change notifications

CBLReplication model objects were often getting change notifications in the wrong order,
causing confusion. This happened due to the ReplicatorManager updating a document
in response to getting a change notification for it, which then caused a re-entrant call into
the notification code, resulting in the document getting the second notification first. Yuck.

Fixes couchbaselabs/CouchChat-iOS#5"
snej,2013-03-22 21:16:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/321dac40840921e8545bfbc8b9093def75b8225b,321dac40840921e8545bfbc8b9093def75b8225b,"Async support!

* Added -[CBLManager asyncTellDatabaseNamed:to:].
* Added -[CBLQuery runAsync:].
* CBLLiveQuery now runs its query asynchronously in the background.
* CBLLiveQuery.rows returns nil initially (as documented), before the background query completes.
* Added -start and -stop to CBLLiveQuery.
* Fixed: CBLLiveQuery was notifying that its .rows changed even if the result of the query didn't change.
* Added CBLQueryEnumerator.error (for use with async queries.)
* kCBLStaleUpdateAfter is now implemented.
* Fixed: CBLQueryEnumerator.sequenceNumber wasn't being set.
* CBLQueryRow uses less memory (parsed versions of .key and .value are now weak.)
* More unit tests of CBLQuery.
* 'Query' logging key logs info about running async and live queries.
* Logging now writes a double-bar instead of a ""|"" after the timestamp if the message is from a background thread."
snej,2013-03-21 18:19:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d30192e5764f4687d259f6d43b18b3a468ed088d,d30192e5764f4687d259f6d43b18b3a468ed088d,Updated README
snej,2013-03-20 21:07:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/111859cb5efd8e330b9b1034678adeaa799c99ed,111859cb5efd8e330b9b1034678adeaa799c99ed,"Rename ""BrowserID"" --> ""Persona""

Note that this invalidates all saved persistent replications that used Persona/BrowserID auth,
because the property in the replication doc was renamed too.
It also changes the server endpoint that the replicator hits to log in from /db/browserid to /db/persona.
Fixes #25."
snej,2013-03-20 20:42:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/daab43d76d4057391aace055c1e7fd50bac5b460,daab43d76d4057391aace055c1e7fd50bac5b460,"Share map/reduce/filter/validate fns with background dbs

When a CBLManager runs a background-thread manager, the CBLDatabases in the background manager
need to have access to the callback blocks defined in the main manager, or they won't work right.
Created a CBL_Shared object to hold this shared state. Fixes #26."
snej,2013-02-26 05:13:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f8fce1c2d9aa59f10d42d93feca906b3488aeaf,0f8fce1c2d9aa59f10d42d93feca906b3488aeaf,"Fix for TDMultipartDownloader in case NSURLConnection gets two responses

It's possible in rare cases for the didReceiveResponse: delegate method to be called twice.
Handle this correctly by creating a new _reader within that call.
Thanks to @kjots, @chaisehocking, @drekka for tracking this down!
Speculatively fixes #236.

Conflicts:
	Source/CBLMultipartDownloader.m
	Source/TDMultipartDownloader.h"
snej,2013-03-08 20:02:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48573f0ef40a1b3ef2a3f25f8abea115152b5ded,48573f0ef40a1b3ef2a3f25f8abea115152b5ded,"Push replicator now encodes non-string filter params as JSON.

I'm not sure whether such parameters are allowed, but JSON encoding seems like the reasonable
way to send them to the remote _changes feed (as opposed to calling ObjC -description on them,
which the code used to do...)
Potential fix for issue #239.

Conflicts:
	Source/ChangeTracker/CBLChangeTracker.m"
snej,2013-03-18 23:59:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ab98c3b4dc02a73b82e14896be03393c0307924e,ab98c3b4dc02a73b82e14896be03393c0307924e,"Change BrowserID login path to /db/_browserid, for Sync Gateway."
snej,2013-03-13 23:10:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9be2b054d436cd8048154da722a678b145d6c7b6,9be2b054d436cd8048154da722a678b145d6c7b6,"Fix build by exporting CBLBrowserIDAuthorizer from the framework.

Actually this only broke Mac builds, and only in release mode."
snej,2013-03-13 22:58:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/617f4521f6f9d4959a046576aedabeeceaaf6343,617f4521f6f9d4959a046576aedabeeceaaf6343,"Merge pull request #20 from nickkitto/master

Corrected link in readme.md"
nickkitto,2013-03-13 22:42:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0526878c9fa8c630f3f9c138068fc258ccd37c9c,0526878c9fa8c630f3f9c138068fc258ccd37c9c,"Updated readme.md

Updated readme.md to point to correct location or developer preview
builds"
jchris,2013-03-07 21:48:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2938ebc82be358493d29b52b5781ad7d340b81ef,2938ebc82be358493d29b52b5781ad7d340b81ef,fix comment to align to real API
jchris,2013-03-07 00:27:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f50cf44da7d6ef658042f3555d6422bba7e8d6de,f50cf44da7d6ef658042f3555d6422bba7e8d6de,add rest endpoint _browserid_assertion to register browserid assertions for replications. returns the email address for the assertion
snej,2013-03-05 02:03:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/122455d4d9d933ce12b6391464af58e95d178781,122455d4d9d933ce12b6391464af58e95d178781,"CouchUITableSource: allow delegate to handle row deletion on its own

This allows for situations where 'deleting' a row doesn't actually
involve deleting its document. (For instance, it might instead remove
the user's ID from the document's member list, or something like that.)"
snej,2013-02-26 23:15:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b18fb16e62f2e3a5bd37969866fb498517b0107c,b18fb16e62f2e3a5bd37969866fb498517b0107c,"Merge pull request #13 from couchbase/hostname

hostname now looks like http://lite.couchbase./"
snej,2013-02-26 22:44:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bfb445a8c0ec7602df481751919f2d83d86d959f,bfb445a8c0ec7602df481751919f2d83d86d959f,"Minor changes

* Write a link-map file.
* Updated a comment."
snej,2013-02-26 22:43:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e48a53de5318465ba335a4e3d51863785bdb8090,e48a53de5318465ba335a4e3d51863785bdb8090,"Propagate change notifications between multiple DB objects on the same physical database

In multi-threaded environment, there will be multiple CBLDatabase instances on the same database.
They need to notify each other when they make changes. For example, a background instance run by
the router will make changes due to REST API requests, which need to be relayed to the foreground
db so the UI can be updated.
This used to be implemented but broke during refactoring. Once I fixed that, I found it had problems
anyway, so I fixed those.
Fixes #15."
snej,2013-02-26 17:41:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6b8462db42d59263eca2bd34d276c2bd0574177,a6b8462db42d59263eca2bd34d276c2bd0574177,"Merge pull request #14 from tfmd/patch-1

Fix broken links in README.md"
tfmd,2013-02-21 17:52:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/43b4739d11e3e24cec5c5ff2ff8b788ac991bc4a,43b4739d11e3e24cec5c5ff2ff8b788ac991bc4a,"Update README.md

Some links result in a 404 error page. The reason seem to be a reference to ""couchbaselabs"" in URL. A change to ""couchbase"" in URL seem to fix the error."
jchris,2013-02-20 21:32:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/77029c5af559a6e28ddf1211976dc84134bca364,77029c5af559a6e28ddf1211976dc84134bca364,hostname looks like http://lite.couchbase./
snej,2013-02-15 19:32:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1dd670ed1cc45b3100b669198717d38974a5aeae,1dd670ed1cc45b3100b669198717d38974a5aeae,"Oops, need to export new fn CBLStatusFromNSError."
snej,2013-02-15 19:11:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/95d22e0dd4e11ed71f05f7b1044c9b4af9124d34,95d22e0dd4e11ed71f05f7b1044c9b4af9124d34,"Fixed exception handling REST _all_docs request

Recent regression from when I merged the public/private view classes.
There's a unit test that should have caught this, but it turned out that
CBLRouter_Tests.m was accidentally never being compiled."
snej,2013-02-15 18:54:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/982c808baea6366a5d499516d4617f699fe3ffb6,982c808baea6366a5d499516d4617f699fe3ffb6,"CBLUITableSource cleanup. Added CBLUICollectionSource.

CBLUICollectionSource written by Ewan Mcdougall. It's not compiled into
the framework by default, to keep the code size down, but apps can
compile it in. (It is included in the iOS demo app, to ensure that it
keeps compiling.)"
snej,2013-02-15 18:51:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7682a95f5ea50da740d4ef05d5096f873748023,d7682a95f5ea50da740d4ef05d5096f873748023,"Fixed regression where databases fail to open

""PUT /dbname"" was failing with a 500. Underlying causes was a mixup due
to ""open"" being both a verb and an adjective :-p. Renamed the property
""isOpen"" to disambiguate."
snej,2013-02-14 23:04:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9f823d4f5121a39bd294fdfb26b246805ba4840,f9f823d4f5121a39bd294fdfb26b246805ba4840,"Changed weak-memory mode in CBLCache to avoid crashes

For some reason the ""ZeroingWeakMemory"" option doesn't work; it might
only support GC, not ARC. Switched to ""WeakMemory"", which does work."
snej,2013-02-14 23:02:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76e68f70bf5a593b6f763da95d42d79c3b7de885,76e68f70bf5a593b6f763da95d42d79c3b7de885,Allow setting CBLNewRevision property value to nil.
snej,2013-02-14 23:01:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/205fcc05b51fbb13f93fba6c097c78bc62a49870,205fcc05b51fbb13f93fba6c097c78bc62a49870,"Added CBLQuery.mapOnly property

This was in CouchQuery but hadn't been ported yet, for some reason."
snej,2013-02-14 16:49:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f8cdfacd6420b43e456886b6681ee2df6fe00ca,0f8cdfacd6420b43e456886b6681ee2df6fe00ca,"Merge pull request #9 from mrloop/attachment_body_url

Stop attachment bodyURL crashing when outEncoding is NULL"
mrloop,2013-02-14 08:51:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed5cfa67b8d5c17a4f0eac4b1f5fc657e918e2da,ed5cfa67b8d5c17a4f0eac4b1f5fc657e918e2da,Stop attachment bodyURL crashing
snej,2013-02-11 19:43:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0004e53c9df20684d77ea166378e4ece37ddb97e,0004e53c9df20684d77ea166378e4ece37ddb97e,"Fixed: CBLNewRevision.isDeleted always returns YES

Also some other cleanup of the CBLRevision classes."
snej,2013-02-11 18:53:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0934ff4b04b39cea65bffda48113a645ca26edd1,0934ff4b04b39cea65bffda48113a645ca26edd1,"Unified CBL_QueryRow with CBLQueryRow

More simplification/refactoring!"
snej,2013-02-10 21:04:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e90e588520eee752f9c08589e5ef5ef12e6ddf6d,e90e588520eee752f9c08589e5ef5ef12e6ddf6d,"Don't stop a push replication if the _revs_diff call gets an error

Took out the -stop call. The remaining call to -revisionFailed will ensure that the
pull is retried later. And in the case being reported, where the call fails due to being
canceled when going offline, the replication will continue when it goes back online.
Fixes #233."
pegli,2013-02-06 17:19:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b389c7eda2ee492e1a8906ae6e6ac9e9d325a66,3b389c7eda2ee492e1a8906ae6e6ac9e9d325a66,remove CBLDocument from database document cache when purged
snej,2013-02-10 01:29:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76593c342e5d3707b33f836e7a00c3eaaeb2fc4f,76593c342e5d3707b33f836e7a00c3eaaeb2fc4f,"Fix: Creating DB with invalid name fails silently

-[CBLManager createDatabaseNamed:error:] wasn't setting the error if the
call failed due to an invalid database name. (Fixes #4.)
Also added an out error parameter to databaseNamed:.
Internal cleanup of database-instantiation API."
snej,2013-02-10 00:49:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/11ad25da83c9bf07e232a489d6fb30be5bc78c38,11ad25da83c9bf07e232a489d6fb30be5bc78c38,Renamed -[CBLRevision initWithCBLDB:] to -initwithDatabase:
snej,2013-02-07 00:16:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/20a461f5d5824ac20ee00eea239927ebef98dc12,20a461f5d5824ac20ee00eea239927ebef98dc12,"Finished renaming CBL_Database to CBLDatabase

(Just search/replace and file renaming in this commit)"
snej,2013-02-07 00:03:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee47543ecec2dd116a8229e4990c1cacd9aecae7,ee47543ecec2dd116a8229e4990c1cacd9aecae7,"Merged CBL_Database into CBLDatabase

*whew*!"
snej,2013-02-06 21:51:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0018c03b1df5e5c6795c4a8daa54866ca6aa9faf,0018c03b1df5e5c6795c4a8daa54866ca6aa9faf,API doc-comment cleanup.
snej,2013-02-05 02:31:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/594525498114fdaf2113e9f1cdb190be1f5fcb3d,594525498114fdaf2113e9f1cdb190be1f5fcb3d,"Finished renaming CBL_View to CBLView.

This continues the previous commit; this one's just a search/replace."
snej,2013-02-05 02:10:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56c19ea213d79ea70fcf9ddaaacb03c0de026224,56c19ea213d79ea70fcf9ddaaacb03c0de026224,Merged CBL_View into CBLView.
snej,2013-02-05 01:04:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/320f8f761ef159815c4a6a89e832d3897aaee2d8,320f8f761ef159815c4a6a89e832d3897aaee2d8,"API cleanup: enable better compile-time checks

* Use 'instancetype' instead of 'id' as return type where appropriate.
* Add 'nonnull' attribute, to flag pointer params that can't be null
  (only in public API and CBLMisc so far)"
snej,2013-02-04 23:39:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81223f69b09d38caf9a8712b670d0fa0a2f0b819,81223f69b09d38caf9a8712b670d0fa0a2f0b819,"Clean up binding of CBL_Database to CBLDatabase

* CBL_Database.touchDatabase renamed to .publicDatabase
* .publicDatabase accessor now instantiates the CBLDatabase on demand
* CBL_Database now knows its CBLManager (needed to implement the above)"
snej,2013-02-04 22:28:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/967d2b2fbf0f027b05b56c71150fb5d050eee3b8,967d2b2fbf0f027b05b56c71150fb5d050eee3b8,"Finished renaming CBL_DatabaseManager to CBLManager.

This continues the previous commit; this one's just a search/replace."
snej,2013-02-04 22:22:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b15118e96ca51f4e6a0c410221722224221fe4a,3b15118e96ca51f4e6a0c410221722224221fe4a,Merged CBL_DatabaseManager into CBLManager.
snej,2013-02-04 18:48:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c79bf453a84028f6a975a30ee6e38f358885c3dd,c79bf453a84028f6a975a30ee6e38f358885c3dd,"Expose filter compilers in public API

Unexpectedly difficult because I had to unify the public CBLFilterBlock
with the underlying CBL_FilterBlock (and the same for validation blocks,
while I was at it.)"
snej,2013-02-05 18:01:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d5f175c19ca6d6e141216ef68b216decaba742b3,d5f175c19ca6d6e141216ef68b216decaba742b3,"Fixed compile error in CocoaHTTPServer submodule

Xcode 4.6 found an uninitialized-variable error, so CocoaHTTPServer now fails
to compile. The fix was simple but to be able to make a change I had to fork
CocoaHTTPServer, so I've changed the submodule's URL.

** You need to run ""git submodule sync"" after pulling this fix **"
snej,2013-02-05 02:18:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6c236a1f9f1ee76342b5fe5272b13bc1df8f488b,6c236a1f9f1ee76342b5fe5272b13bc1df8f488b,"Merge pull request #2 from PaulCapestany/fix

Convert `TDUITableSource` to `CBLUITableSource` in Interface Builder."
PaulCapestany,2013-02-05 02:14:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3f66437e1ae01f0efd35535e668e2ba997e1f233,3f66437e1ae01f0efd35535e668e2ba997e1f233,Convert `TDUITableSource` to `CBLUITableSource` in Interface Builder.
snej,2013-02-02 01:59:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1ec89cc2efa8b731af6cb3cd0529ec4656ad143,a1ec89cc2efa8b731af6cb3cd0529ec4656ad143,"CBLListener should use the public API

Also made .internalURL return the http: form, not the cbl: URL."
snej,2013-02-01 23:20:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7f215b12aeaf7ce80f9a786b86594f2e398051e,b7f215b12aeaf7ce80f9a786b86594f2e398051e,"Fixed the ""http:__.cblite./"" form of the REST API URLs."
snej,2013-02-01 23:07:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a945385c0b01df786ededf4c0c6ffbe6eb48de68,a945385c0b01df786ededf4c0c6ffbe6eb48de68,"Take out -Wdocumentation compile flag; causes error in Xcode 4.5

I thought this would just be ignored in pre-4.6 Xcodes, but no..."
snej,2013-02-01 22:57:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/98a5a3c1ba2be861d4256d45bbd735fab292c32d,98a5a3c1ba2be861d4256d45bbd735fab292c32d,"Public API cleanup

* Moved replaceDatabase method from CBL_Database to CBLManager.
* Moved CBLViewCompiler API from CBL_View to CBLView.
* Added Doxygen config file"
snej,2013-01-31 21:18:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/986d704085c6a355649fa0644158fbd4fd60137c,986d704085c6a355649fa0644158fbd4fd60137c,"The Great Renaming #2: TouchDB --> CouchbaseLite, TD --> CBL"
snej,2013-01-30 21:16:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/26c02df3e87d20ac0d85e90205ad29d704db4a71,26c02df3e87d20ac0d85e90205ad29d704db4a71,"Fixed TDReplication.setCredential

It was mixing up the 'source' and 'target' properties, causing the
replication doc to fail validation."
snej,2013-01-30 16:53:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76d85f25f2ec2df0076ae5b4e3188440e372a922,76d85f25f2ec2df0076ae5b4e3188440e372a922,Make TDJSON class public.
snej,2013-01-30 16:44:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dbf9f154cbed24c7b704dee280ab14a6f4b093de,dbf9f154cbed24c7b704dee280ab14a6f4b093de,Fixed a new warning about a reference cycle in a block
snej,2013-01-30 16:43:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/813a616997d1914846f795cb63702f41f3302103,813a616997d1914846f795cb63702f41f3302103,Documentation/header cleanup.
snej,2013-01-28 23:06:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7f53cb8b2b5c07fc6f832f3ce0af0074e1d05e6,d7f53cb8b2b5c07fc6f832f3ce0af0074e1d05e6,JS filter function support.
snej,2013-01-28 21:37:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23926cfbc00edc277e3d6ca277e6f2cd4aab0455,23926cfbc00edc277e3d6ca277e6f2cd4aab0455,"Merge branch 'master' of github.com:couchbaselabs/TouchDB-iOS into public-api

Conflicts:
	Source/TDReplicatorManager.m
	Source/TD_Database.h
	Source/TD_Database.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2013-01-28 21:24:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/57ddb43811c1f9e36e9930ebdb046c5dddc08e06,57ddb43811c1f9e36e9930ebdb046c5dddc08e06,"Make sure views compiled from JS get rebuilt if the map/reduce fn changes

…Although currently this only takes effect next time the app is launched, i.e.
it isn't watching for edits of the design docs while running.

Also moved the code that triggers the compilation out of TDRouter and into
TD_View and TD_Database."
snej,2013-01-25 23:59:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45ab43eedac6b1a498f580a1e9286873b2f418da,45ab43eedac6b1a498f580a1e9286873b2f418da,"Added TDReplication.credential property

This is a convenience for getting/setting the Keychain login credential."
snej,2013-01-25 21:09:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e426dc77a2f8df182cf1757a6bb97061e312f389,e426dc77a2f8df182cf1757a6bb97061e312f389,"Merge pull request #225 from pegli/public-api_delete-attachment

[public-api] bug fix: setting an attachment's body to null should delete the attachment"
snej,2013-01-24 21:28:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75b9cebd6320bca64946b1beeb91fdf22f20a811,75b9cebd6320bca64946b1beeb91fdf22f20a811,"Don't do reachability checks on replication to a local touchdb: URL.

Fixes #228"
snej,2013-01-23 21:28:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f765301e7abc1f93c3a287478936f6887c9c6b81,f765301e7abc1f93c3a287478936f6887c9c6b81,"Fix crash in TDJSViewCompiler

The compiled function objects were getting GC'd, after which calling them would crash."
snej,2013-01-23 21:28:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1aadf8003cbeb0ac859f94ecaa500e6ad5a5c9c,d1aadf8003cbeb0ac859f94ecaa500e6ad5a5c9c,"Fix crash in TDJSViewCompiler

The compiled function objects were getting GC'd, after which calling them would crash."
snej,2013-01-23 02:25:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd704874a80e0b9620886be72d5619ecb0e91628,dd704874a80e0b9620886be72d5619ecb0e91628,"Fixed regression where persistent TDReplication never notified

Persistent TDReplications were never posting progress-changed
notifications. Fixed now."
snej,2013-01-18 22:17:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a28082cd144dc225fb302e565ab4c452200cc8f5,a28082cd144dc225fb302e565ab4c452200cc8f5,"Internal change notification improvements

Created a TD_DatabaseChange class to encapsulate info about a new
revision. Added a flag that indicates whether the document may be in
conflict (not used yet.)"
snej,2013-01-18 21:51:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3a901056e0c159dc56846a956fc694c422bab832,3a901056e0c159dc56846a956fc694c422bab832,"Allow nonpersistent TDReplication to be started again if it stops

Also made the -stop method work."
snej,2013-01-18 21:25:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/015b45870ebe5cc2fe23caef655affae94185a71,015b45870ebe5cc2fe23caef655affae94185a71,"TDModel autosave delay is now extendable

Just override -autosaveDelay in your TDModel subclass.
(Default value is 0.0.)"
pegli,2013-01-17 22:03:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8452c10a332ff3d7e6625d1d6587ab383e3477fd,8452c10a332ff3d7e6625d1d6587ab383e3477fd,bug fix: setting an attachment's body to null should delete the attachment
snej,2013-01-17 19:53:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64fbf8eadd434dac589c1dcfde5e11232e4b2c02,64fbf8eadd434dac589c1dcfde5e11232e4b2c02,"Fix a path-escaping bug with replication

Regression from the initial BrowserID patch (649d14f)"
snej,2013-01-16 19:06:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6375d6c72221d7daaa869f03c6759b4e7c1713cc,6375d6c72221d7daaa869f03c6759b4e7c1713cc,"BrowserID improvements

* Parse email address out of assertion rather than requiring it to be provided separately.
* Also get the expiration date, and don't return assertions that have expired.

Conflicts:
	Source/API/TDReplication.h
	Source/API/TDReplication.m"
snej,2013-01-17 19:53:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bcb5ee87b07eaa95d3988b0adf5b3da64ef58c54,bcb5ee87b07eaa95d3988b0adf5b3da64ef58c54,"Fix a path-escaping bug with replication

Regression from the initial BrowserID patch (649d14f)"
snej,2013-01-16 19:39:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f63a20855cb8d7fdf14dd0f136dc3cc807575ae,1f63a20855cb8d7fdf14dd0f136dc3cc807575ae,"Added public API for starting the REST API

Just access the .internalURL property of a TDDatabase or TDDatabaseManager to get its touchdb: URL.
Requires linking with the TouchDBListener framework, or building TDURLProtocol & TDRouter into your app."
snej,2013-01-16 19:06:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/319755f540957aeb79a15e20ccc273a43d4f1be9,319755f540957aeb79a15e20ccc273a43d4f1be9,"BrowserID improvements

* Parse email address out of assertion rather than requiring it to be provided separately.
* Also get the expiration date, and don't return assertions that have expired."
snej,2013-01-15 21:22:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dfbb9456ed9fc72d2de34c31d933bfd2a93527f0,dfbb9456ed9fc72d2de34c31d933bfd2a93527f0,"Oops, I broke replication with that last commit

Fixes #219"
snej,2013-01-15 00:19:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91a6d34e5e89f36d11917d488e0dceee1fb84016,91a6d34e5e89f36d11917d488e0dceee1fb84016,"More BrowserID work (don't store assertion in database)

BrowserID assertions are extremely short-lived, so it doesn't make sense
to store them in a persistent replication's document. Instead, store the
email address only. The assertion is registered with the authorizer
before starting replication.

Conflicts:
	Source/API/TDReplication.h
	Source/API/TDReplication.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2013-01-13 21:46:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9917fe728730fa815fd6eb766d2497ae70b16221,9917fe728730fa815fd6eb766d2497ae70b16221,"Change tracker needs to send cookies in its request

TDSocketChangeTracker uses CFHTTPMessageCreateRequest, which is too low-level to use the shared
cookie store, so it doesn't send any cookies. This breaks BrowserID auth, which is session-based.
Fixed this by explicitly getting the cookies from the NSHTTPCookieStore and adding their headers."
snej,2013-01-13 18:48:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5d27889629816406b083d876991ac25bd1d5c480,5d27889629816406b083d876991ac25bd1d5c480,"Dumb bug fixes (TDReplication, TDBrowserIDAuthorizer)

Conflicts:
	Source/API/TDReplication.m"
snej,2013-01-11 23:00:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6fbb4f2974b0379988cc5af6cdcbeefcd6faa081,6fbb4f2974b0379988cc5af6cdcbeefcd6faa081,"More replicator improvements

* Created a TD_DatabaseManager method to create replicators

Conflicts:
	Source/TDReplicatorManager.m
	Source/TD_DatabaseManager.m"
snej,2013-01-15 22:36:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/84b700315e7a490e8981f45a4b57ecfa8360b9ed,84b700315e7a490e8981f45a4b57ecfa8360b9ed,"Merge branch 'stable'

1.0.1 release

Conflicts:
	TouchDB.xcodeproj/project.pbxproj"
snej,2013-01-15 22:33:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a96bcc208424aa8d6f9192fd16c73f5894ec1dc,8a96bcc208424aa8d6f9192fd16c73f5894ec1dc,Bumped version to 1.01. Updated README.
snej,2013-01-15 21:22:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c00beaf77438b1652ebac4adeaf5702cd49e9566,c00beaf77438b1652ebac4adeaf5702cd49e9566,"Oops, I broke replication with that last commit

Fixes #219"
snej,2013-01-15 18:34:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/496919466e92ce91ae7fcafb80038641f3b2e68b,496919466e92ce91ae7fcafb80038641f3b2e68b,"Support for BigCouch array-format sequence IDs

BigCouch is now using arrays as sequence IDs; TouchDB didn't format these properly.
Fixes #218."
snej,2013-01-15 00:19:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3832e70a1ff4eae51c59f3546c51edaa3d6c569e,3832e70a1ff4eae51c59f3546c51edaa3d6c569e,"More BrowserID work (don't store assertion in database)

BrowserID assertions are extremely short-lived, so it doesn't make sense
to store them in a persistent replication's document. Instead, store the
email address only. The assertion is registered with the authorizer
before starting replication."
snej,2013-01-13 21:46:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f527f6591ea537eae4341c6f0f323950134fdc73,f527f6591ea537eae4341c6f0f323950134fdc73,"Change tracker needs to send cookies in its request

TDSocketChangeTracker uses CFHTTPMessageCreateRequest, which is too low-level to use the shared
cookie store, so it doesn't send any cookies. This breaks BrowserID auth, which is session-based.
Fixed this by explicitly getting the cookies from the NSHTTPCookieStore and adding their headers."
snej,2013-01-13 18:48:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/86bc1e3f5a2d35037fed7042dceda0878e1f556f,86bc1e3f5a2d35037fed7042dceda0878e1f556f,"Dumb bug fixes (TDReplication, TDBrowserIDAuthorizer)"
snej,2013-01-11 23:00:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c56d06a1b580967fcb114df59148cd5ea9e92e89,c56d06a1b580967fcb114df59148cd5ea9e92e89,"More replicator improvements

* Added TDReplication.browserIDAssertion property
* Non-persistent TDReplications now correctly get filters/authorizers.
* Proper error reporting if a non-persistent TDReplication can't be created.
* Created a TD_DatabaseManager method to create replicators"
snej,2013-01-11 22:04:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ad511b5d8d1177f60d24141eb64f340d33b2a3b,2ad511b5d8d1177f60d24141eb64f340d33b2a3b,"Merge branch 'master' of github.com:couchbaselabs/TouchDB-iOS into public-api

Conflicts:
	TouchDB.xcodeproj/project.pbxproj"
snej,2013-01-10 23:03:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/649d14f71b51338e761784b6af6d165f75c556fb,649d14f71b51338e761784b6af6d165f75c556fb,"BrowserID support for replicator (untested)

To use it with non persistent replications, set a TDBrowserIDAuthorizer.

With persistent replications, add a ""auth"" sub-object of the ""source""
or ""target"" object (just as for OAuth) and in it put a ""browserid""
object with an ""assertion"" property whose value is the BrowserID
assertion.

This obviously requires that the remote server have BrowserID support.
There is a CouchDB-BrowserID plugin, and IrisCouch's servers have it."
snej,2013-01-11 21:38:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2b474a553c36e8223c31b51f49f08609b68c02b9,2b474a553c36e8223c31b51f49f08609b68c02b9,"Added -[TDDatabaseManager copy], for multithreaded usage

To run on another thread, -copy your database manager and use the copy
on the other thread. The -copy method ensures that the .noReplicator
option is set, so there won't be multiple replicator tasks."
snej,2013-01-11 21:35:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c9755426e23d905022448ae29465f3cfb679a530,c9755426e23d905022448ae29465f3cfb679a530,"Merge branch 'master' of github.com:couchbaselabs/TouchDB-iOS into public-api

Conflicts:
	Source/TDReplicator.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2013-01-11 20:09:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efb7fb50cf9aebd6577f26dae56750b78516d2aa,efb7fb50cf9aebd6577f26dae56750b78516d2aa,"Oops, broke TouchServ with last commit. Fixed."
snej,2013-01-11 19:14:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/371a311aefbd9e49d92a0daaa5f0d1989e15471e,371a311aefbd9e49d92a0daaa5f0d1989e15471e,"Allow multiple replications with the same (source, target) dbs

It can be useful to have multiple replications with the same source and target,
if their filters are different."
snej,2013-01-09 17:28:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c5df1fd4e79d8e6e8fc4817690275de97770d7f,7c5df1fd4e79d8e6e8fc4817690275de97770d7f,Bump version to 1.004
snej,2013-01-09 17:28:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d85ee934b108ecd85e2e9b14aeebc33d3e16264f,d85ee934b108ecd85e2e9b14aeebc33d3e16264f,Bump version to 1.004
snej,2013-01-04 17:22:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/48c3d7de4cea4adc1b2e95efadfde8d36c6f921e,48c3d7de4cea4adc1b2e95efadfde8d36c6f921e,"Fix a crash when TDSocketChangeTracker gets an error

During the -errorOccurred: method's call to [self stop], the delegate would end up releasing the tracker,
causing it to be dealloced prematurely. Moved the stop call to the end, and for safety's sake added a
temporary retain during the entire stream:handleEvent: call.
(Bug reported by Joerg Birkhold.)"
snej,2013-01-08 19:56:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f34c02577d998a02dbff767660d5d550fe5f89b0,f34c02577d998a02dbff767660d5d550fe5f89b0,"Fix assertion failure starting up non-persistent replication

Fixes #211."
snej,2013-01-05 00:56:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/52aa7f78c2911503685f47ba5d2453d2b391ed4a,52aa7f78c2911503685f47ba5d2453d2b391ed4a,"Added optional JavaScript map/reduce capability.

TDJSViewCompiler is a plugin that allows TouchDB to run JavaScript
map/reduce functions. It requires JavaScriptCore, which on iOS you'll
need to build and link into your app.

This class is included as source code but not built into TouchDB.
If you want to use it, compile it into your app."
snej,2013-01-04 17:22:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/19b862dc4d3937b1c61c0a1311f9110bd1b73245,19b862dc4d3937b1c61c0a1311f9110bd1b73245,"Fix a crash when TDSocketChangeTracker gets an error

During the -errorOccurred: method's call to [self stop], the delegate would end up releasing the tracker,
causing it to be dealloced prematurely. Moved the stop call to the end, and for safety's sake added a
temporary retain during the entire stream:handleEvent: call.
(Bug reported by Joerg Birkhold.)"
snej,2013-01-03 18:08:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/850c99aef0a9e7e0012e8c3d2ac13efe5ab3e51b,850c99aef0a9e7e0012e8c3d2ac13efe5ab3e51b,Updated MYUtilities to latest
snej,2013-01-02 21:19:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7d20d0eb0cddc6e232bc4591dcccb12c6cb7c69c,7d20d0eb0cddc6e232bc4591dcccb12c6cb7c69c,Updated FMDB to same commit as master branch
snej,2013-01-02 20:11:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91ef715e69f9b80ec73d7a9b69ab6f0256177075,91ef715e69f9b80ec73d7a9b69ab6f0256177075,Merge branch 'master' into stable
snej,2013-01-02 20:11:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1328a5cad19203bbba251ba9c6563a35951603b,a1328a5cad19203bbba251ba9c6563a35951603b,Update version to 1.003 (1.0.1 candidate 3)
snej,2013-01-02 20:09:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e852e4a111777542f45785aa89e1c069133b1945,e852e4a111777542f45785aa89e1c069133b1945,Merge branch 'master' into stable
snej,2013-01-02 20:06:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/beca16c7dea6ac046840439843477e4aa09ac197,beca16c7dea6ac046840439843477e4aa09ac197,Merge branch 'master' of /Couchbase/TouchDB into public-api
snej,2013-01-02 19:50:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5e05a8a650670c1ba926ceb0d183b34d4c41b8da,5e05a8a650670c1ba926ceb0d183b34d4c41b8da,"Real fix for 'resurrection' of deleted doc

A PUT, DELETE, PUT sequence should result in a rev with generation 3
that's a child of the tombstone revision.
This fixes #207 and is the real fix for #205."
snej,2013-01-02 18:30:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/18944f03311bb2652d0f9b8679b6cf9c6fce14d2,18944f03311bb2652d0f9b8679b6cf9c6fce14d2,Fixed an unused-result static analyzer warning
snej,2013-01-02 18:27:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd976f0cd887cae9c2a1881f86233a18cc48043f,fd976f0cd887cae9c2a1881f86233a18cc48043f,"Merge branch 'master' of /Couchbase/TouchDB into public-api

Conflicts:
	Source/TDPusher.m
	Source/TDReplicatorManager.m
	Source/TD_Database.m
	Source/TD_Server.h
	Source/TD_Server.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2013-01-01 02:04:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1007274fc0e14ea12131af26a0f1e43558a39b3c,1007274fc0e14ea12131af26a0f1e43558a39b3c,"Merge pull request #201 from pegli/public-api-import2quote

normalized import directives to use quotes (public-api branch)"
snej,2013-01-01 02:02:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5084b6c9d6500cce01cd5893c75adfc56ee84db8,5084b6c9d6500cce01cd5893c75adfc56ee84db8,"More renaming

Bunch of Touch* -> TD* renaming that I'd overlooked before.
This is almost all in comments, but I did rename TouchUITableDelegate."
snej,2013-01-01 01:54:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e8aa48b34806048852468ae84d1471a489a59065,e8aa48b34806048852468ae84d1471a489a59065,"Better error handling in _bulk_docs

Fixes #200."
snej,2013-01-01 00:55:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4414cb2477c3d93861df0f878e872e74b5f0d224,4414cb2477c3d93861df0f878e872e74b5f0d224,Updated FMDB
snej,2012-12-31 21:50:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d95e46f27f76cfcd23134c71b7f822935810aad,1d95e46f27f76cfcd23134c71b7f822935810aad,"Properly handle identical re-creation of deleted document

If a document is deleted and then re-created with the same contents as its former first revision,
the new revision's revID is the same as the former one, causing a SQLite table constraint violation.
Fixed this by re-using the old row and setting its 'current' back to 1.
Fixes #205."
snej,2012-12-21 23:04:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a66ac2cac96008f7fee79243ac9ec30035fda128,a66ac2cac96008f7fee79243ac9ec30035fda128,"Helpful validation logging

Enable TDValidation logging (-LogTDValidation YES) to get logs when docs fail validation.
Log messages include old and new doc contents and the error code and message."
snej,2012-12-21 23:03:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d9ec4abe05d614674614242d192e56d263da3bc,8d9ec4abe05d614674614242d192e56d263da3bc,"TDUITableSource improvements

* Added -rowAtIndexPath:.
* Implement UIDataSourceModelAssociation on iOS 6+."
snej,2012-12-21 22:57:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d8f8c4ebf3c130c68852b0d5aa8261118cffb119,d8f8c4ebf3c130c68852b0d5aa8261118cffb119,"Persistent TDReplication (public API) fixes

The public API for persistent replications Just Didn't Work At All.
Fixed it."
snej,2012-12-20 23:40:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f56210b0b190f93ed93f528ee0151d73a387111d,f56210b0b190f93ed93f528ee0151d73a387111d,"Replicator now proactively sends auth credentials on every request.

I think this will fix the remaining Cloudant errors (timeout / socket-closed errors pushing large docs).
Speculatively fixes #185."
snej,2012-12-20 23:40:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d6942e8a107abaefcf33c97ffaeec97604f362c,8d6942e8a107abaefcf33c97ffaeec97604f362c,"Replicator now proactively sends auth credentials on every request.

I think this will fix the remaining Cloudant errors (timeout / socket-closed errors pushing large docs).
Speculatively fixes #185."
snej,2012-12-20 17:33:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ffd694d2ae0055e8a96225d50892ac0abc3e9117,ffd694d2ae0055e8a96225d50892ac0abc3e9117,"Prevent unsaved models from being dealloced

TDDatabase now keeps a set of all TDModels with unsaved changes (needsSave=YES).
This keeps them in memory, and also enables a new database method to save all models."
pegli,2012-12-19 18:14:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b16212e57865c75a517c3a74776f0aba3d5a3064,b16212e57865c75a517c3a74776f0aba3d5a3064,normalized import directives to use quotes
snej,2012-12-14 16:59:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a66b2d539307d813bdaed01c975d8d90c5ed4877,a66b2d539307d813bdaed01c975d8d90c5ed4877,Merge branch 'master' into stable
snej,2012-12-14 16:57:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2658f99da240c75f158e342bd92542a73945fe67,2658f99da240c75f158e342bd92542a73945fe67,Bump version to 1.002 (1.0.1 candidate 2)
snej,2012-12-13 20:15:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9645e894dab690ed59fa06b6683cd9eadbced1e2,9645e894dab690ed59fa06b6683cd9eadbced1e2,"Fix an assertion failure in TDSocketChangeTracker

-start should just return NO if called when tracker is already running.
Fixes #196."
snej,2012-12-13 19:38:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/69797ac1e1c397301df241b12122abcbd79989ba,69797ac1e1c397301df241b12122abcbd79989ba,"Oops, wrong submodule commit ID for MYUtilities."
snej,2012-12-13 19:34:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c61530c941183b396aaf4e7d7a7fb784bd1ec872,c61530c941183b396aaf4e7d7a7fb784bd1ec872,"Fix unnecessary 401 challenges

MYURLUtils' method -my_credentialForRealm: is returning a credential with no persistence
when the URL has a baked-in username and password. This turns out to prevent NSURLConnection
from proactively sending the same credential on the next connection to the host, with the bad
effect that every connection initially gets a 401 and only then gets the credential and retries. This
slows down performance.
Fixed this by changing the persistence to NSURLCredentialPersistenceForSession.
I believe this fixes #197 in TouchDB."
snej,2012-12-13 18:57:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7687f07b3b9a78ea6d754545dd066ae5080aa300,7687f07b3b9a78ea6d754545dd066ae5080aa300,"Better retry behavior on failure to get password from keychain

For some reason TDSocketChangeTracker sometimes fails to get the password of the credential it's just looked up.
Added some fallback code to make a second attempt to reload the credential.
Also, if it fails to get the password it will clear the busted credential so that it can try to look it up again when it gets
the 401 response.
Fixes #195 ... I hope?"
snej,2012-12-12 23:00:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d752da8a0869e2dbb0606cf7054e2ee2c7da0ec0,d752da8a0869e2dbb0606cf7054e2ee2c7da0ec0,"Make direct PUT to attachment URL work with streamed request body

This case was accidentally not fixed back in commit 7f24896.
Fixes #198."
snej,2012-12-05 22:31:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0ce1482f834a5d07e04470ff1485f1033740c78d,0ce1482f834a5d07e04470ff1485f1033740c78d,"Merge branch 'master' into stable

Conflicts:
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-12-05 22:26:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f6ba321413099aba0a3b5a0df9ed35b33e9e700,8f6ba321413099aba0a3b5a0df9ed35b33e9e700,Bump project version # to 1.001
snej,2012-12-03 22:26:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/05632d581a2640c63040c7b19e1897c4464426fb,05632d581a2640c63040c7b19e1897c4464426fb,"Avoid race condition registering filters on startup

It was possible for a persistent push replication to start running on  startup before the app had a chance to install filter blocks.
This meant the replication would ignore the filter and send all documents, which is pretty bad.

* Changed TDPusher to make a missing filter function an error.
* Changed TD_Server to wait till the next runloop iteration to start the replicator, giving the caller time to set up filters and validations.
Fixes #193."
snej,2012-11-16 21:51:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8171c7cfbc65d617339df15683b5433661f2f73d,8171c7cfbc65d617339df15683b5433661f2f73d,"Fixes for TDReplication

It was basically broken :(
Now it's less broken, although I don't recommend trying to change an existing replication's .persistent property."
snej,2012-11-16 19:39:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2e9855a6813cfbc5e627a98d6c41f071747e94c,c2e9855a6813cfbc5e627a98d6c41f071747e94c,"-[TD_Server close] should be synchronous

Closing the server at app quit time is currently a race condition because the -close call returns before the server thread has finished closing stuff, so the process might exit before it finishes. Fixed this by making the -close call synchronous. (Related to #189.)"
snej,2012-11-16 19:37:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7373805956db259a1813c95e95694f57e96b8f18,7373805956db259a1813c95e95694f57e96b8f18,"Improve _compact to clear out SQLite WAL file

_compact wasn't really freeing space (at least not immediately) because the changes got appended to the SQLite write-ahead log file. So I extended the -compact method by having it issue a SQL pragma to flush the WAL, and then close and re-open the database. This resets the ""___.touchdb-wal"" file to zero length.
Fixes #189."
snej,2012-11-15 18:51:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01bd71c2e7ec004cb27ba1110563c5b7efd0c976,01bd71c2e7ec004cb27ba1110563c5b7efd0c976,"Fix crash after resuming pull due to location change

Shouldn't create a new _pendingChanges when resuming activity, or it'll be out of sync with the _batcher.
(Found by @tleyden; see his patch in #190.)
Fixes #188."
snej,2012-11-15 18:46:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f3f49e2cd8042bf1eb0a34dc9a204ee41700c693,f3f49e2cd8042bf1eb0a34dc9a204ee41700c693,"Revert ""Merge pull request #190 from signaturelabs/stable""

This pull request should have gone into master, not stable.

This reverts commit 90cee8130737cfa9fe2c82df4a35c76244cf974a, reversing
changes made to 37ae2e1fe14d0f86a78cfd8d58a3b0cbd2c742db."
snej,2012-11-15 18:14:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/90cee8130737cfa9fe2c82df4a35c76244cf974a,90cee8130737cfa9fe2c82df4a35c76244cf974a,"Merge pull request #190 from signaturelabs/stable

Fixes #188; Fix by not instantiating _pendingSequences if it was previou..."
snej,2012-11-15 17:35:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e84892ca9996b1ba89d8e6fc8e0036371c32d3f,8e84892ca9996b1ba89d8e6fc8e0036371c32d3f,Updated MYUtilities
keynuker,2012-11-15 04:46:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/29bdc67c19d10aded5a1f3da69600a0eef6b5eba,29bdc67c19d10aded5a1f3da69600a0eef6b5eba,"Fixes #188; Fix by not instantiating _pendingSequences if it was previously instantiating.  Otherwise, _batcher and _pendingSequences get out of sync and an assertion fails later and causes a crash.  Needs review - can this change have any unwanted side effects?"
snej,2012-11-14 19:38:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a0826b9f708b16bb870746e4ffbaf0465d2ed1c1,a0826b9f708b16bb870746e4ffbaf0465d2ed1c1,"Allow client to reset replication state

Setting the ""reset"" property in a replication request will cause the local checkpoint to be erased, meaning the next replication will start over from scratch (sequence 0).
The Mac demo app now has a menu item that exercises this.
Fixes #186."
snej,2012-11-14 19:35:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dee1afe553a5c1b78289aee9c92cd7fc3b9b6324,dee1afe553a5c1b78289aee9c92cd7fc3b9b6324,"Better error if a pushed document fails to be saved

If remote _bulk_docs indicates an error saving a document,
(a) Map ""unauthorized"" message to 401 status (instead of default 502)
(b) Put the document's URL in the NSError object's userInfo."
snej,2012-11-12 22:38:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/738be8250f60d6709c0600a95be9da079e6a0e9c,738be8250f60d6709c0600a95be9da079e6a0e9c,"Added API for mutable new revisions

TDNewRevision is a clearer way to modify a document. It's a mutable form of TDRevision. You can call -newRevision on a TDRevision or TDDocument, modify the new revision's properties or attachments, and then save it."
snej,2012-11-12 21:22:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/24562d0aa4d3e81c66f2af86975f2dd095fd8738,24562d0aa4d3e81c66f2af86975f2dd095fd8738,"Fix framework headers

Added TDUITableSource.h and MYDynamicObject.h.
Removed reference to TDCache.h."
snej,2012-11-12 16:45:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7292a563228f8cbbcdc73961d30befb02081dbda,7292a563228f8cbbcdc73961d30befb02081dbda,"Optimized the way query results are returned

TD_View returns result rows as new TD_QueryRow class, not NSDictionary.
Key and value are only parsed on demand."
snej,2012-11-12 07:55:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/22d3f9f50d022e0e921692d00209729dd3f95b6d,22d3f9f50d022e0e921692d00209729dd3f95b6d,Added TDAttachment.bodyURL property
snej,2012-11-09 21:45:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e6c9d7a1c05d96a05cf5a1f750683309aa03bfa,6e6c9d7a1c05d96a05cf5a1f750683309aa03bfa,"Added CouchToTD conversion script

App developers can run this script on their source files
to convert 'Couch*' identifiers to 'TD*'."
snej,2012-11-09 19:49:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a916cb8799fa63ce82b9effcc1c61c3f83901c2c,a916cb8799fa63ce82b9effcc1c61c3f83901c2c,Turn iOS demo into complete Grocery Sync app
snej,2012-11-09 19:48:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ea21b1f2098209513da2f9dbb951d689f724000,9ea21b1f2098209513da2f9dbb951d689f724000,"Fix callback blocks for new API

Added public TDValidationBlock and TDFilterBlock.
Also moved ivars out of @interface sections."
snej,2012-11-08 23:24:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/95495b5d4edaf82d12bafdbe4cd2ee8784b6d777,95495b5d4edaf82d12bafdbe4cd2ee8784b6d777,Suppress some static-analyzer warnings
snej,2012-11-08 23:17:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/404050c72045f6e535761fc7da4b1cf228367965,404050c72045f6e535761fc7da4b1cf228367965,"Merge branch 'master' of /Couchbase/TouchDB into public-api

Conflicts:
	Demo-Mac/DemoAppController.m
	Demo-iOS/EmptyAppDelegate.m
	Listener/TouchServ.m
	Source/API/TouchDB.h
	Source/TDInternal.h
	Source/TDMisc.h
	Source/TDPusher.m
	Source/TDReplicator.h
	Source/TDReplicatorManager.h
	Source/TDReplicatorManager.m
	Source/TDRouter+Handlers.m
	Source/TDRouter.m
	Source/TD_Body.h
	Source/TD_Database+Insertion.h
	Source/TD_Database+Insertion.m
	Source/TD_Database.h
	Source/TD_Database.m
	Source/TD_DatabaseManager.m
	Source/TD_Database_Tests.m
	Source/TD_Revision.h
	Source/TD_Server.h
	Source/TD_Server.m
	Source/TouchDB.exp
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-11-08 22:47:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/399d4779158b702ee8f3cf3585db3bcdaa995bac,399d4779158b702ee8f3cf3585db3bcdaa995bac,"Minor ARC fix in the unit tests

The test files weren't being built with ARC in the iOS demo target."
snej,2012-11-07 02:46:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/677ba7c11aecdbe9fe01cff9d42bc349f496b99e,677ba7c11aecdbe9fe01cff9d42bc349f496b99e,"Mass renaming of ""TD"" classes to ""TD_""

Preparing for the public API which will have non-underscored names;
for instance, TDDatabase will be the public class, while the existing internal
class is TD_Database."
snej,2012-11-07 20:30:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09c8c1661f9113fd34cfe91c538f4dcd0d9c53c8,09c8c1661f9113fd34cfe91c538f4dcd0d9c53c8,Renamed public API classes from Touch* to TD*
snej,2012-11-07 04:36:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0e3b12cdb59d8879c1c1833be19140f654d6e05c,0e3b12cdb59d8879c1c1833be19140f654d6e05c,"Merge branch 'master' of /Couchbase/TouchDB into public-api

(Includes the great renaming of TDxx -> TD_xx)

Conflicts:
	Demo-Mac/DemoAppController.m
	Demo-iOS/EmptyAppDelegate.m
	Listener/TouchServ.m
	Source/API/TouchDB.h
	Source/TDInternal.h
	Source/TDPusher.m
	Source/TDReplicator.h
	Source/TDReplicatorManager.h
	Source/TDReplicatorManager.m
	Source/TDRouter+Handlers.m
	Source/TDRouter.m
	Source/TD_Body.h
	Source/TD_Database+Insertion.m
	Source/TD_Database.h
	Source/TD_Database.m
	Source/TD_DatabaseManager.m
	Source/TD_Database_Tests.m
	Source/TD_Revision.h
	Source/TD_Server.h
	Source/TD_Server.m
	Source/TouchDB.exp
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-11-07 02:46:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f65aeaeffab2de165eba76ae6017c59e3530dd94,f65aeaeffab2de165eba76ae6017c59e3530dd94,"Mass renaming of ""TD"" classes to ""TD_""

Preparing for the public API which will have non-underscored names;
for instance, TDDatabase will be the public class, while the existing internal
class is TD_Database."
snej,2012-11-06 22:15:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9b4fa47819a2c984144a72a6dc76690dc35ca25a,9b4fa47819a2c984144a72a6dc76690dc35ca25a,TDChangeTracker.error property should be strong.
snej,2012-11-06 20:08:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0f22d27dded29f37f2b5d435a1e21ba57373b3d8,0f22d27dded29f37f2b5d435a1e21ba57373b3d8,"Moved public-API source files to Source/API.

Also updated public/private headers of framework."
snej,2012-11-06 01:38:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/166848a11942c3af8be0ef12f052f176bdb86c37,166848a11942c3af8be0ef12f052f176bdb86c37,"Get TouchReplication working

* Temporarily abandon running TDReplicationManager on background thread; too complex.
* Make sure replication manager is started on launch.
* Enabled replication support in iOS demo."
snej,2012-11-06 01:35:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4539c00d63453c654149b43d769ee79ce3d62aa7,4539c00d63453c654149b43d769ee79ce3d62aa7,"Improve TDCache

Take advantage of ARC zeroing weak refs"
snej,2012-11-05 19:00:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e81b50cf03ea1cbd1d6a7b9dac5bfa23257dcbe7,e81b50cf03ea1cbd1d6a7b9dac5bfa23257dcbe7,Updated README for version 1.0.
snej,2012-11-05 17:17:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b14a2d14d4f959f783d44b3d5508e3bc5d899f60,b14a2d14d4f959f783d44b3d5508e3bc5d899f60,Bump version to 1.0!!
snej,2012-11-05 19:00:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/37ae2e1fe14d0f86a78cfd8d58a3b0cbd2c742db,37ae2e1fe14d0f86a78cfd8d58a3b0cbd2c742db,Updated README for version 1.0.
snej,2012-11-05 17:17:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/60fae245433a0019dc68486a1c6d5fea1eedeacd,60fae245433a0019dc68486a1c6d5fea1eedeacd,Bump version to 1.0!!
snej,2012-11-02 22:58:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/541c79ed36efd080094ed1ca79435b839771eca8,541c79ed36efd080094ed1ca79435b839771eca8,"Merge remote-tracking branch 'origin/master' into public-api

Includes ARC conversion.
Converted new API classes (Touch*) to ARC.

Conflicts:
	Demo-Mac/DemoAppController.m
	Demo-Mac/DemoQuery.m
	Demo-Mac/ShoppingItem.m
	Demo-iOS/EmptyAppDelegate.m
	Demo-iOS/RootViewController.m
	Source/ChangeTracker/TDChangeTracker.m
	Source/TDDatabase.m
	Source/TDReplicator.h
	Source/TDServer.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-11-02 19:09:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/340159d3907b91c2a20f6606b13bd9b4a41fa949,340159d3907b91c2a20f6606b13bd9b4a41fa949,ARC-ify TouchServ.m
snej,2012-11-02 17:06:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0cd5ab1f886290b573a825aa113ef8ee8ecbb1fd,0cd5ab1f886290b573a825aa113ef8ee8ecbb1fd,Updated MYUtilities.
mz2,2012-09-30 17:36:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de15dba1ee06bb373d01431f43c96ee92f989a7e,de15dba1ee06bb373d01431f43c96ee92f989a7e,"Converted to ARC.

Merged, and more fixes added, by Jens."
snej,2012-10-31 18:06:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ad9cc877a95122adc515244cb2ad63188558f03,2ad9cc877a95122adc515244cb2ad63188558f03,"Optimize reduced/grouped queries through lazy parsing

Avoid parsing the keys and values from the index unless it's necessary.
This can speed up some queries a lot, if the reduce function doesn't access the keys or the values."
snej,2012-10-30 15:43:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8b3cb50afb86dbab8cd2ad9664848c5d67d77b46,8b3cb50afb86dbab8cd2ad9664848c5d67d77b46,"Fixed an exception in the iOS demo's validation function

It would raise an exception if the ""created_at"" property of a doc was a non-string."
snej,2012-10-30 15:42:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0d9afa2d4b256922711af0a56dd075a6f7b3dd0b,0d9afa2d4b256922711af0a56dd075a6f7b3dd0b,"Increase max number of puller connections from 4 to 12

This was lowered from 8 to 4 a month ago by commit facc703, but
(a) that had a pretty major hit on performance, and
(b) I think the bug that fixed was actually caused by the _changes feed deadlock I just eliminated by restoring TDSocketChangeTracker."
snej,2012-10-30 00:31:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/deb5ef239f3354ea0b45b0f86eba07486b682447,deb5ef239f3354ea0b45b0f86eba07486b682447,TDSocketChangeTracker should stop when it gets an HTTP response error.
snej,2012-10-29 21:26:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/abe1bfc0578a1d90b5e01d6e935805fa722c9de5,abe1bfc0578a1d90b5e01d6e935805fa722c9de5,Make new change-tracker able to use custom TDAuthorizer (incl. OAuth)
snej,2012-10-29 18:39:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aa55bf159d1ea2e5c809a2efe61f6f0c88f7fe49,aa55bf159d1ea2e5c809a2efe61f6f0c88f7fe49,"Fix incorrect _changes entry after attachment update

Direct PUT or DELETE of an attachment was sending an incorrect notification to
pending _changes feeds that had include_docs -- the doc body was missing the _attachments property.
Fixes #180."
snej,2012-10-26 23:53:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2fc5fea62e56247f60b94aeaf7a51a26bf96658,c2fc5fea62e56247f60b94aeaf7a51a26bf96658,"The return of TDSocketChangeTracker

* Fixes #177: Using it instead of TDConnectionChangeTracker to get around running out of sockets with 5+ replications active at once. (Also fixes #124 since the hostname-munging workaround is no longer needed.)
* It now uses CFReadStreamCreateForHTTPRequest.
* It now supports one-shot and long-poll modes, not just continuous."
snej,2012-10-26 17:08:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/517c46c55d38ffc118dc685032657c925161c960,517c46c55d38ffc118dc685032657c925161c960,Fix initialization of persistent TouchReplication.
snej,2012-10-25 22:19:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/19f61c284e4f3ba071d3aec1155f9f6b6a531a1a,19f61c284e4f3ba071d3aec1155f9f6b6a531a1a,The rest of the recent changes from CouchCocoa.
snej,2012-10-25 22:04:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e1370e2dddfe0e1dc4be2897350d483fc996ca16,e1370e2dddfe0e1dc4be2897350d483fc996ca16,"Incorporating recent (post-June) CouchCocoa changes

Also modernizing Obj-C syntax."
snej,2012-10-25 20:48:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4993ec351b78acc52bb7fd9c812d30ae228b6f9b,4993ec351b78acc52bb7fd9c812d30ae228b6f9b,"Merge remote-tracking branch 'origin/master' into public-api
(Version 0.981)

Conflicts:
	Demo-Mac/DemoAppController.m
	Source/TDDatabase.m
	Source/TDDatabaseManager.h
	Source/TDDatabaseManager.m
	Source/TDDatabase_Tests.m
	Source/TDReplicator_Tests.m
	Source/TDRevision.m
	Source/TDRouter.m
	Source/TDView_Tests.m
	Source/TouchDB.exp
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-10-25 19:55:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cef05f886f0daf019242f20f1be71c1c24ea878c,cef05f886f0daf019242f20f1be71c1c24ea878c,Merge branch 'master' into stable
snej,2012-10-25 19:55:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4e35e564b1d1fc608473e7c2fb4f4b60fc53682,a4e35e564b1d1fc608473e7c2fb4f4b60fc53682,Bump version to 0.981 (beta 8 candidate 1)
snej,2012-10-25 18:35:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e24ddde26901c33b410f4e3ea151ea5d24d7340,6e24ddde26901c33b410f4e3ea151ea5d24d7340,"Avoid intermittent crash after stopping TDPuller

If a TDPuller remote request completes after the puller's been stopped,
avoid trying to send more requests, since the database connection is gone.
Fixes #179"
snej,2012-10-25 00:03:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/354aa9c09c943b62f23202a2eb6edafa70ce0088,354aa9c09c943b62f23202a2eb6edafa70ce0088,"TDConnectionChangeTracker should honor a username in the URL

When looking up an auth credential, use the username in the URL if present.
This will prevent trying to use the wrong credentials if another username exists
in the keychain/credential store."
snej,2012-10-17 19:28:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0daa4aac6f1abe53d2c77ccd99867d9b5626fe7,e0daa4aac6f1abe53d2c77ccd99867d9b5626fe7,"Really fix edge case where TDPuller never stops if told to stop before it catches up

There was a second place in the code where I needed to make the same change,
to make the fix really work...
Fixes #169 (I hope, again)"
snej,2012-10-15 20:18:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd0a84825a664f0c8162562e29e6a7ff4ff6a84b,fd0a84825a664f0c8162562e29e6a7ff4ff6a84b,"Fix edge case where TDPuller never stops if told to stop before it catches up

This in turn was resulting in the puller never re-starting after the app was reactivated.
Fixes #169 (I hope)"
snej,2012-10-12 22:15:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38327b320e610efc4993b8f260c67eedd3a8febc,38327b320e610efc4993b8f260c67eedd3a8febc,TDPusher supports servers that don't accept multipart PUTs
snej,2012-10-09 00:42:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/50a0c6d2cddf1854cbc2ead78f44f0fe74da144b,50a0c6d2cddf1854cbc2ead78f44f0fe74da144b,Merge branch 'master' into stable
snej,2012-10-09 00:42:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c595ba44a05bd65229b8af0f71d6bf3b5db5be2f,c595ba44a05bd65229b8af0f71d6bf3b5db5be2f,Bump version to 0.971 (beta 7 candidate 1)
snej,2012-10-09 00:39:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4304230d1976af03b16710c5463e57fdf812a237,4304230d1976af03b16710c5463e57fdf812a237,Merge branch 'master' into stable
snej,2012-10-09 00:36:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/22948c19c7b787f7b1079739f31538af2ef1bf06,22948c19c7b787f7b1079739f31538af2ef1bf06,"Oops, _bulk_docs response is an array not a dictionary

Fixes regression introduced by 2c6692a."
snej,2012-10-08 22:50:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef92a2a013f1f807ccc2cfa05de63b974994b34a,ef92a2a013f1f807ccc2cfa05de63b974994b34a,"Set correct Accept: header when GETting remote docs

TDMultipartDownloader was setting the Accept header to just ""multipart/related"",
but it does also accept JSON. Added "", application/json"" to the Accept value so that
a remote server that doesn't do multipart won't reject the request with a 415."
snej,2012-10-08 22:49:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9377d88d50efa917e70e59c871714aee288b8405,9377d88d50efa917e70e59c871714aee288b8405,"Fix TDPusher never starting sometimes after creating the remote DB

If TDPusher created the remote database, a logic glitch would sometimes cause it to never
start the replication."
snej,2012-10-08 22:47:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ded7b75af51a895c82ea52b1469622c765ea6fe8,ded7b75af51a895c82ea52b1469622c765ea6fe8,"Fixed a race condition saving checkpoint

If the _db reference got nilled out before the remote checkpoint could be saved,
the local checkpoint wouldn't be updated. Then on the next sync the two checkpoints
would be out of sync, forcing sync to restart from sequence 0."
snej,2012-10-08 22:45:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c6692a86307b7b3368667ddd9efd6794f9171e2,2c6692a86307b7b3368667ddd9efd6794f9171e2,"TDPusher: Detect errors from _bulk_docs calls

If some of the docs fail to save it doesn't cause _bulk_docs to return an error;
rather, the JSON response will include individual errors for each doc. TDPusher
wasn't checking these, so it never found out about errors."
snej,2012-09-26 01:33:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/34d8d718c9bd319663b32f9a153700bca2cfbc95,34d8d718c9bd319663b32f9a153700bca2cfbc95,"Fix handling of auth failure in TDRemoteRequest

Avoid infinite auth loop by giving up after 1st failure.
Fixes #168"
snej,2012-09-25 21:19:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/47f196fb8bb0fd47c3cc7b1919c7c591ce2a057c,47f196fb8bb0fd47c3cc7b1919c7c591ce2a057c,"Better detection of proxy server aborting _changes feed socket

When looking to see if the response equals ""{\""results\"":["", ignore any amount of trailing whitespace.
Fixes #167."
snej,2012-09-24 21:03:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f0a96bb840658f17a9b81d2f0494c443bfdb736,9f0a96bb840658f17a9b81d2f0494c443bfdb736,"Better handling of bad data from upstream server

* Changed kTDStatusUpstreamError from 502 to 589 to avoid confusion
* Report detailed info about what went wrong parsing _changes feed
* Report detailed info about what went wrong parsing multipart response"
snej,2012-09-24 17:14:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e7729f81d97dd8af8298b9e90bef797706ed65bd,e7729f81d97dd8af8298b9e90bef797706ed65bd,Mac demo: More sync status logging
snej,2012-09-21 18:18:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74346090f2756dea595723f9cc9c1b7ce0cf018b,74346090f2756dea595723f9cc9c1b7ce0cf018b,"Reimplement the caught-up check for TDPuller

Don't compare sequence IDs; it doesn't work with BigCouch.
Instead, watch for the _changes feed returning fewer changes
than the limit we asked for."
snej,2012-09-19 21:08:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b5cebafe34215260fbeff2b0fb3d16b4e375505,3b5cebafe34215260fbeff2b0fb3d16b4e375505,Bump version to 0.97 (post-beta6)
snej,2012-09-19 00:51:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/416346604f12bf1fd01d7e4e07a2684e726f2417,416346604f12bf1fd01d7e4e07a2684e726f2417,"Added missing Apache licenses

Some of the newer .m files didn't have Apache licenses yet.
Also moved TouchServ.m from the iOS demo folder to the Listener folder."
snej,2012-09-18 19:22:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/facc703c6ffdd8ad8efbf05f81aa0d909b7e3cdf,facc703c6ffdd8ad8efbf05f81aa0d909b7e3cdf,"Lower TDPuller's kMaxOpenHTTPConnections to 4

Fixes #163"
snej,2012-09-18 18:39:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9940aefbfcdc3513bd939a85a5d9d8f49528e1bd,9940aefbfcdc3513bd939a85a5d9d8f49528e1bd,"Retry continuous replication if some revisions failed to transfer

If some revisions couldn't be transferred due to errors, the replicator needs to eventually go back and try them again.
This patch implements this by having it start over from the last checkpoint, a minute after it goes idle.
Fixes #101"
snej,2012-09-18 18:32:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f0c6dacb1ca1476d8ace48c49cb7721fe6419251,f0c6dacb1ca1476d8ace48c49cb7721fe6419251,"Added ""fake failure"" mode to TDRemoteRequest, for testing

Setting the user default TDFakeFailureRate to a float between 0 and 1 will cause that fraction of requests to fail, at random.
The failure status will be 567, but you can set TDFakeFailureStatus to an integer value to override that."
snej,2012-09-18 18:29:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef4846b8dc577bfa064bec76dd50f35baaa6e754,ef4846b8dc577bfa064bec76dd50f35baaa6e754,"Added --continuous flag to TouchServ, for use with --push / --pull."
snej,2012-09-10 17:33:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4da9c25be9ab9cb019ec3b7440d33593ef647a8,a4da9c25be9ab9cb019ec3b7440d33593ef647a8,Merge branch 'master' into stable
snej,2012-09-10 17:32:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a727f2cc97038c9edd82697b9c17208c2507d49,9a727f2cc97038c9edd82697b9c17208c2507d49,Bump version to 0.961 (beta 6 candidate 1)
snej,2012-09-10 15:41:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92c0af8caaa7fd15f1b509f2bfa385653a78958a,92c0af8caaa7fd15f1b509f2bfa385653a78958a,"Commented out some listener logging code

Accidentally left in some code that turns on verbose logging in the listener."
snej,2012-09-06 00:43:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1002e0eb71dbe042330b1251ade512e03a6d38d1,1002e0eb71dbe042330b1251ade512e03a6d38d1,"Avoid blocking in SCNetwork from checking reachability too early

Don't call SCNetworkReachabilityGetFlags until it's scheduled with the runloop,
else it could block for a long time on a flaky network doing a DNS lookup.
Fixes #156"
snej,2012-09-04 21:17:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b45db1f5e19d483d94a96a3036b365bfb99161e,7b45db1f5e19d483d94a96a3036b365bfb99161e,"REST: _all_docs and ?open_revs=all now support ?include_deleted option

This option makes it feasible to find deleted docs and deleted revisions.
This is nonstandard but I'm going to propose CouchDB support it too."
snej,2012-09-04 21:12:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b14959de54c579112c77eb4e51d2cb98e20c0bc1,b14959de54c579112c77eb4e51d2cb98e20c0bc1,"Fix: Queries don't return any ""doc"" property if doc has no custom properties"
snej,2012-08-31 22:12:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1cfc1ca43d89f65769ee4d0ee5493bb20701042,d1cfc1ca43d89f65769ee4d0ee5493bb20701042,"Better fix for _all_docs

The previous fix didn't account for the fact that a POST to _all_docs should return entries for
deleted documents.
Also, such a POST needs to return the entries in the order of the input doc IDs.
Added unit tests to check these."
snej,2012-08-31 21:23:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3157355e0424e9018f414020043d74cb7e04acc6,3157355e0424e9018f414020043d74cb7e04acc6,Allow POST to _all_docs or _revs_diff when listener is in read-only mode
snej,2012-08-31 21:21:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/638d2196d8ce3dbc290b27c82851f37e64051229,638d2196d8ce3dbc290b27c82851f37e64051229,"Don't return deleted revs from -getDocsWithIDs:

POSTing to _all_docs was sometimes returning the wrong revision of a document, if the highest-numbered
revision was deleted. Fixed now."
snej,2012-08-31 16:07:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb8e59ba54e6759c788a93110013bccd6c0eeb5a,eb8e59ba54e6759c788a93110013bccd6c0eeb5a,"Change tracker should react to change in credential

If the credential (username) to be used for a remote server is changed,
TDConnectionChangeTracker should use the new credential instead of
continuing to connect with the previously-used one.
Fixes #155

(Adapted from a patch by Nick Van den Bleeken)"
snej,2012-08-31 00:38:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e9e1ae4cff01fee25980e332aa8f1b7c75e96423,e9e1ae4cff01fee25980e332aa8f1b7c75e96423,Fix link error by exporting _kTDDatabaseManagerDefaultOptions
snej,2012-08-30 20:20:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5bb6cffa70beefc0bad3525de83012625a28a8a,b5bb6cffa70beefc0bad3525de83012625a28a8a,"Handle 'missing' revisions more compatibly

* Non-leaf revs pulled from another db should be marked as missing (json=null) not just empty.
* _revs_info should show status ""missing"" for missing revs.
* GETting a missing revision should return 404, not 200 and an empty document.
* The 404 error for GETting a deleted doc should say ""deleted"" as the reason.

Related:
* In read-only mode, return 404 not 400 for a missing database."
snej,2012-08-28 22:02:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a192d786a9d33b1fb51433d4eefd640265e370bc,a192d786a9d33b1fb51433d4eefd640265e370bc,Support new read-only option in TouchServ
snej,2012-08-28 21:15:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fd85203aa11554bc461e5a98865000f9ac4ba69,9fd85203aa11554bc461e5a98865000f9ac4ba69,"Added ability to open server read-only or without replicator

This is for TouchDB Viewer, but others might have a use for it too."
snej,2012-08-28 18:49:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3817422823142b5aee28a80e866cf7b4ec6ba53f,3817422823142b5aee28a80e866cf7b4ec6ba53f,Some build fixes.
snej,2012-08-24 23:53:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5fce7f341537ec19b96afdb2f0c03c8ec38a011c,5fce7f341537ec19b96afdb2f0c03c8ec38a011c,More Obj-C subscripting syntax conversion
snej,2012-08-24 23:37:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf9e8b1e28e418225ade66329a44b46db95af11e,cf9e8b1e28e418225ade66329a44b46db95af11e,Fixed 2 minor static-analyzer issues.
snej,2012-08-24 23:15:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cd9ed89e919452710572567c8b2f15bf9331ebd6,cd9ed89e919452710572567c8b2f15bf9331ebd6,"Fixed some static-analyzer issues

Nothing serious; mostly just no-op changes to get it to be quiet."
snej,2012-08-24 23:06:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c833dcf2473041ed99d25d41a8bd5365f2ebbf62,c833dcf2473041ed99d25d41a8bd5365f2ebbf62,"Merge remote-tracking branch 'origin/master' into public-api

Conflicts:
	Demo-Mac/DemoAppController.m
	Demo-Mac/DemoQuery.m
	Source/TDDatabase+Insertion.m
	Source/TDDatabase.h
	Source/TDDatabase.m
	Source/TDDatabase_Tests.m
	Source/TDInternal.h
	Source/TDPusher.m
	Source/TDReplicatorManager.m
	Source/TDRouter+Handlers.m
	Source/TDRouter.m
	Source/TDRouter_Tests.m
	Source/TDView_Tests.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-08-24 20:43:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9dbdaf8ea9128ca18eb7c0dadd7d1809a09c8638,9dbdaf8ea9128ca18eb7c0dadd7d1809a09c8638,"Better fix for _changes feed

The previous fix for #152 (03e4dcd) didn't produce the right results when a new deletion was added
to an already-deleted document; this one does. It's also more efficient, and can pretty easily be
improved post-1.0 to cache the current winning revID in the 'docs' row."
snej,2012-08-24 17:16:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f327c94e4480c2807c6a7013a802b94a7ca7b69,8f327c94e4480c2807c6a7013a802b94a7ca7b69,Fixed bug with TouchDatabase deletion. Some work on localSeq option for queries.
snej,2012-08-23 23:15:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9f766e62332bec42248d9b658bb7662a87fab554,9f766e62332bec42248d9b658bb7662a87fab554,"Added API tests (copied from CouchCocoa).

Had to add API and fix a lot of bugs to get them to pass. Not done yet."
snej,2012-08-23 21:34:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6b972c3c64f6a24ca416773549c66c1b1e528d23,6b972c3c64f6a24ca416773549c66c1b1e528d23,"Merge branch 'master' into stable

Conflicts:
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-08-23 21:31:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e89b2763f9824c1f98ea864851904b9f3f23ef2,4e89b2763f9824c1f98ea864851904b9f3f23ef2,Update version to 0.952
snej,2012-08-23 17:05:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d9171c99caf69411b05cc5361596eaead882982f,d9171c99caf69411b05cc5361596eaead882982f,Updated the README
snej,2012-08-23 16:27:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82849484248b9c2b540ef39a25d17238b26beacf,82849484248b9c2b540ef39a25d17238b26beacf,Fix a leak when adding an attachment to a revision.
snej,2012-08-22 22:30:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a6e6ef8743d7f5d860580ed5b3ba8c109f516752,a6e6ef8743d7f5d860580ed5b3ba8c109f516752,"Return ""reason"":""deleted"" in response to GET of deleted doc

CouchCocoa actually depends on this, to be able to tell a deleted document
apart from a nonexistent one -- look at -[CouchRevision initWithOperation:].
Fixes #151"
snej,2012-08-22 20:54:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/03e4dcda976402396cccc3406fc89b752c09080c,03e4dcda976402396cccc3406fc89b752c09080c,"Send correct revisions in incremental update of _changes feed

When a TDRouter serving a _changes feed gets notified of a new revision in the database,
it now handles branchy rev trees properly. If the change doesn't affect the current 'winning'
revision, it doesn't emit it. If it does, it sends the new winning revision (which may not be the
same as the new revision, if the new one is a delete.)
This is part of #152 and may have something to do with #150."
snej,2012-08-20 23:01:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9e7195b9cacd03883b651428a6d7892d502c33e,f9e7195b9cacd03883b651428a6d7892d502c33e,Merge branch 'masterTemp' into stable
snej,2012-08-20 23:00:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ec1dc74f575a17c27f2f34feb2b6c219d3bd9c6,9ec1dc74f575a17c27f2f34feb2b6c219d3bd9c6,Bump version to 0.951 (beta 5 candidate)
snej,2012-08-20 22:54:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/83588f1fc0483704079fb357ff75037b8fb6e2ec,83588f1fc0483704079fb357ff75037b8fb6e2ec,"Merge commit 'cad9164a464d993be5c797db9af54a32dbcc2397' into stable

Conflicts:
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-08-19 21:40:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f3cf7fa0e2d9faee9428253657b2d20e86f219e8,f3cf7fa0e2d9faee9428253657b2d20e86f219e8,Use new Obj-C collection subscripting syntax.
snej,2012-08-19 03:35:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f14f3109ef7454b82fbeb69a8b8e213fcbf8d064,f14f3109ef7454b82fbeb69a8b8e213fcbf8d064,Now using Obj-C object/collection literals.
snej,2012-07-10 19:44:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4a73c04f948235e8bae23389c9fc5d108999427,a4a73c04f948235e8bae23389c9fc5d108999427,"Enable new Clang 4 warnings

...and fix up two spots in the code that they complained about.

Conflicts:

	TouchDB.xcodeproj/project.pbxproj"
snej,2012-08-16 22:45:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/66ceed713a8377a4ccfed43af8876e7514819cf2,66ceed713a8377a4ccfed43af8876e7514819cf2,Allow authorization in replicator tests
snej,2012-08-20 22:08:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cad9164a464d993be5c797db9af54a32dbcc2397,cad9164a464d993be5c797db9af54a32dbcc2397,"Honor _deleted flag of docs inserted by TDPuller

Otherwise a deleted formerly-conflicting revision could get inserted as non-deleted.
Fixes #148 (read it for the details)"
snej,2012-08-16 16:06:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f594bb67a57afaa84e5ac71aea41c2b716cff406,f594bb67a57afaa84e5ac71aea41c2b716cff406,"Enable full iOS file encryption, and read-only database access

Ensure iOS database & attachment files are encrypted and inaccessible until the app's been launched.
(The default encryption is based on a 'device key' that can be cracked if there's physical access to the device so it can be jailbroken.
Switched to CompleteUnlessOpen encryption, which uses a key derived from the user's passcode and prevents access unless the
device is unlocked. I deliberately did not go with Complete encryption because then files would become inaccessible as soon as
the device were locked, which would break any sync or other activity while the app continues running in the background.)

While I was at it, I added a '.readOnly' property to TDDatabase and TDDatabaseManager. This enables opening a database in
SQLite read-only mode. Not generally useful but I want to use this as an option in tools for examining databases."
snej,2012-08-15 21:36:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b10177256fac3a39b1db4212c59edf4926288529,b10177256fac3a39b1db4212c59edf4926288529,Bump version to 0.95 (post beta 4)
snej,2012-08-15 21:34:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/338885a9d8534593c4c7713e9ecb13831694cd16,338885a9d8534593c4c7713e9ecb13831694cd16,Bump version to 0.94 (beta 4)
snej,2012-08-15 21:19:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e20d3fb2b52bcbaf7881014f2d39dadd2ec036f,9e20d3fb2b52bcbaf7881014f2d39dadd2ec036f,"Oops, fix exception returning _active_tasks

Stupid regression introduced earlier today by d7fa11c406fb.
Fixes #145"
snej,2012-08-15 19:56:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d5d486e09cc8a1f11184aedd1148d424cb3de744,d5d486e09cc8a1f11184aedd1148d424cb3de744,"Merge pull request #142 from fabien/fix

Don't include deleted/resolved revisions in conflicts"
snej,2012-08-15 19:06:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7fa11c406fb219b8a5cf2ebf62a3771b8b03573,d7fa11c406fb219b8a5cf2ebf62a3771b8b03573,"Add info about active HTTP requests to _active_tasks

New task property ""x_active_requests"" is an array of dictionaries.
Each dict has properties ""URL"" and ""method"" that describe the request."
snej,2012-08-15 18:59:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c44481347294488f7f774e25c2561b7862ef993,8c44481347294488f7f774e25c2561b7862ef993,"_changes was returning wrong revisions when style=_all_docs

With ?style=all_docs&limit=nnn, the results were clipped to the limit _before_ being sorted by sequence,
so the wrong set of results got returned. This screwed up a remote server trying to pull from this database.
Fixes #131"
snej,2012-08-14 22:34:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2e01f9300ec757036086cf1e975ac5d9746e742,c2e01f9300ec757036086cf1e975ac5d9746e742,"Stop remote requests when replicator goes offline

Also some minor cleanup of the goOnline/goOffline logic.
Hopefully this fixes #137."
snej,2012-08-14 17:35:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3294115aa95c370ebe0e68510a9fee70652db564,3294115aa95c370ebe0e68510a9fee70652db564,"Avoid infinite regress stopping replication

Fixes #144 (I think)"
snej,2012-08-14 17:33:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36ff1e2cc8178b3a4b5ac09d65cee7859efb5c7d,36ff1e2cc8178b3a4b5ac09d65cee7859efb5c7d,"Remove obsolete warning ""Encoded attachment bigger than original"""
snej,2012-08-13 20:44:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/50ec45ff723c359765b412d5067c9e9c44139abd,50ec45ff723c359765b412d5067c9e9c44139abd,Merge commit '14e42a1ea3ad4a15621f2e909777ae7901fd90b5' into stable
snej,2012-08-13 20:42:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71d4f68629447c550a5b16e288f9e708928489a6,71d4f68629447c550a5b16e288f9e708928489a6,"Limit number of revs pusher sends at once

Pusher will send revs in batches of 100 even if a huge number of revs
have been added locally since the last checkpoint (or on initial sync.)
Fixes #143"
snej,2012-08-10 19:48:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45eb9642c835943de95eb4e0e86259615ddcbde6,45eb9642c835943de95eb4e0e86259615ddcbde6,"When stopping a replication, stop its HTTP requests

TDReplicator now tracks all of its active TDRemoteRequests,
so it can tell them all to stop if its -stop method is called.
Fixes #141"
fabien,2012-08-11 18:36:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e95c4200fcbcf6ba6d1e2de05903c619fa705f85,e95c4200fcbcf6ba6d1e2de05903c619fa705f85,Don't include deleted/resolved revisions in conflicts
snej,2012-08-09 22:56:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b23c3f243198ecfdbcc8861ebafd9e46d6095619,b23c3f243198ecfdbcc8861ebafd9e46d6095619,"Merge remote-tracking branch 'origin/master' into public-api

Conflicts:
	Source/TDRouter.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-08-09 22:46:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9fd39e62684aabb1b6eba7d6eaa12bfb156bbbbc,9fd39e62684aabb1b6eba7d6eaa12bfb156bbbbc,Updated project/targets
snej,2012-08-09 20:26:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/14e42a1ea3ad4a15621f2e909777ae7901fd90b5,14e42a1ea3ad4a15621f2e909777ae7901fd90b5,Bump version to 0.931 (beta 4 candidate)
snej,2012-08-09 19:35:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d69dada84b6e0559eed532c3d1617b953b7125e8,d69dada84b6e0559eed532c3d1617b953b7125e8,"Oops, last commit should use _local_seq, not _update_seq"
snej,2012-08-09 19:24:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/69ccf3831f14e8e431fef162473f6fdf21353fb1,69ccf3831f14e8e431fef162473f6fdf21353fb1,"Added TDView.mapContentOptions property

This enables the map function to see special doc properties like _update_seq.
Fixes #139 (when combined with the change I'm about to commit to CouchCocoa.)"
snej,2012-08-08 21:37:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f6cf0b1c4cd2084c5496144a9feff88d96183dc4,f6cf0b1c4cd2084c5496144a9feff88d96183dc4,"Fix JSON collator bug comparing numbers

Comparisons of numeric JSON values could sometimes randomly be wrong,
due to garbage digits past the end of the input strings.
Fixes #138."
snej,2012-08-08 18:16:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/887f5085fa4249c918d1fc7d2277a1508a9d93ea,887f5085fa4249c918d1fc7d2277a1508a9d93ea,"Fix new leak in TDReplicatorManager

Introduced by commit 997bb36."
snej,2012-08-08 18:15:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bcc5167fdf4cad50ae285da393a427fcd387d53,2bcc5167fdf4cad50ae285da393a427fcd387d53,"Write attachment MIME bodies in an order CouchDB will understand

In a multipart PUT, CouchDB expects that the order of the attachment MIME bodies is the same as the order in which the metadata objects appear in the JSON _attachments dictionary.
Go to some extra work to make the orders match.
Also add extra headers to attachment MIME bodies (Content-Length, Content-Type, Content-Encoding).
Fixes #133 (I hope) and possibly some other bugs too..."
snej,2012-08-06 22:47:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a421ed2c62800bcc8b3c336812ead868d6a862c2,a421ed2c62800bcc8b3c336812ead868d6a862c2,"Support for filter params in push replications

...and also in _changes feed requests.
Fixes #132."
snej,2012-08-06 20:24:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6caa80b6260d2414677a5a28108b589d485dbc97,6caa80b6260d2414677a5a28108b589d485dbc97,"Alternate 'http:' URL scheme for AJAX apps

WebKit won't send HTTP bodies to URLs that don't have 'http' or 'https' schemes.
Work around this by making an alternate root URL that TouchDB will recognize:
In addition to <touchdb://HOST/>, also <http://HOST.touchdb./>.
Fixes #134."
snej,2012-08-06 17:52:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4cee513b76eccd4351f36728c54b96a0156c9cc2,4cee513b76eccd4351f36728c54b96a0156c9cc2,"Merge pull request #128 from robin/robin-dev

allow changes of ""headers"" and ""auth"" in persistent replication settings"
snej,2012-08-05 16:53:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b41004d013dd36b0a60ced6cb6666370d1b65113,b41004d013dd36b0a60ced6cb6666370d1b65113,"Allow local client to discover filesystem path of attachments

A HEAD request to an attachment, via a touchdb: URL, will return a 'Location:' header containing the filesystem location of the attachment.
There will be a 'Content-Encoding: gzip"" header if the attachment file is gzip-compressed.
For potential security reasons this _only_ works over touchdb: URLs, not via TouchServ.
Fixes #127."
snej,2012-08-05 02:56:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f05ecbcf356e634d31873af44e79fd373433b6f0,f05ecbcf356e634d31873af44e79fd373433b6f0,Add more logging of view querying
snej,2012-08-04 17:18:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d6fd89106975e526cb28db9934a3867fb20cf6a,1d6fd89106975e526cb28db9934a3867fb20cf6a,"Fixed link to FMDB repo in README.

(Thanks, Nico)"
snej,2012-08-02 17:46:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c5f2918f67c5ad3fd39460f28022e46fc16b3a3b,c5f2918f67c5ad3fd39460f28022e46fc16b3a3b,"Removed some //TEMP bits that snuck in

Lines commented with //TEMP are temporary hacks that shouldn't be committed, but I missed some...
Fixes #130."
snej,2012-08-02 17:39:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed4d6e21752710c12c3579d169f0bbf8b47c7636,ed4d6e21752710c12c3579d169f0bbf8b47c7636,TDRouter's request logging now shows length of body
snej,2012-08-02 17:38:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/514db0f09f3e42623fc8f37eb293ca2c495fb03e,514db0f09f3e42623fc8f37eb293ca2c495fb03e,"Fix bogus (negative) retry delay in TDChangeTracker

It would keep retrying immediately instead of with the desired exponential backoff.
Fixes #129."
robin,2012-08-01 08:55:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/997bb362701585f70f299819c0e641cb1af686bd,997bb362701585f70f299819c0e641cb1af686bd,"allow changes of ""headers"" and ""auth"" in replicators"
snej,2012-07-27 23:02:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/568e267fe03b0c5678181040cddeadce5095781d,568e267fe03b0c5678181040cddeadce5095781d,"Byte-range request support, and other TDRouter improvements

* Support 'Range:' header (this is important for large attachments and media playback).
* Better parsing of complicated 'Accept:' headers (this was breaking QuickTime playback).
* Add ""Cache-Control: must-revalidate"" response header the way CouchDB does.
* Avoid copying response data in TDHTTPResponse: it slowed down large attachments.
* TDRouter logging now shows request URLs and headers.
Fixes #125."
snej,2012-07-27 16:58:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/488d8da1065ee2e8c061eb06e59b21eba9fb5a3b,488d8da1065ee2e8c061eb06e59b21eba9fb5a3b,"avoid overriding authorization header if no authorizer is specified

If Authorization header is set via 'header' property and no authorizer is set, the header is override by setAuthorizer.

[Originally by @robin, modified by @snej so that setting a nil value will correctly remove the authorizer.]"
snej,2012-07-26 22:23:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a4ba93d37fcdf5f0f2c354aab620abfad095e763,a4ba93d37fcdf5f0f2c354aab620abfad095e763,"Oops, make previous commit compile on iOS."
snej,2012-07-26 21:11:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a32b057a8e315bb0fee4af9cb243e8dcb1754141,a32b057a8e315bb0fee4af9cb243e8dcb1754141,"Proper handling of SSL server trust authentication

TDRemoteRequest and TDConnectionChangeTracker now examine the trust of
SSL servers (NSURLAuthenticationMethodServerTrust).
This fixes a problem where TDConnectionChangeTracker would fail to authenticate
if the server cert didn't match the hostname but the user had added custom trust
for it."
snej,2012-07-26 18:11:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1253d8187a95a9eaab3901420ab88ea16e412368,1253d8187a95a9eaab3901420ab88ea16e412368,"Added TDStartServer function

Provides a simple way to start TouchDB and get its root URL, so clients don't have to mess with the TDServer and TDURLProtocol classes.
Ideally this should be the only public API exported from TouchDB."
snej,2012-07-25 22:59:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2f2d20b2e43b8d2ff56ba3c109ddb06d6cb07dcd,2f2d20b2e43b8d2ff56ba3c109ddb06d6cb07dcd,"Remove obsolete -getConflictingRevisionIDsOfDocID: method

This TDDatabase method had a SQL syntax error and wouldn't run.
But nothing ever called it anyway, so it's best to just delete it.
(This was reported as https://github.com/couchbaselabs/TouchDB-Android/issues/59 )"
snej,2012-07-25 21:35:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4a778121bb4e199ff3d7e620d0cf970ea447160a,4a778121bb4e199ff3d7e620d0cf970ea447160a,"Turn off GCC_INCREASE_PRECOMPILED_HEADER_SHARING compiler option

The Jenkins build-bot is failing because it's incorrectly using a PCH from one job when building another.
This is an attempt to stop that by making PCHs less shareable between targets/projects."
snej,2012-07-25 20:52:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f22447c9a409dbf6d254b7694f18556e1f9789e0,f22447c9a409dbf6d254b7694f18556e1f9789e0,"Oops, fixed a bad link in the README."
snej,2012-07-25 20:50:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7d3d80b669be7358a976b109c72cdf8df6dea4fc,7d3d80b669be7358a976b109c72cdf8df6dea4fc,Added some useful newbie links to the README.
snej,2012-07-25 19:03:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5445d5e962a52f96c99f6fc02219fb667de13256,5445d5e962a52f96c99f6fc02219fb667de13256,Bumped version to 0.93 (post-beta3)
snej,2012-07-25 18:27:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70a04dd90bde7799ab1c1cf7645d8179b15666f8,70a04dd90bde7799ab1c1cf7645d8179b15666f8,Merge tag 'v0.92-beta3' into stable
snej,2012-07-25 18:25:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f24896b3ce7da9eac9a3387e6c1f77a9f357afd,7f24896b3ce7da9eac9a3387e6c1f77a9f357afd,"Router supports streamed NSURLRequest bodies.

Fixes #120 -- local-to-local replication.
May also fix problems with AJAX requests from UIWebView."
snej,2012-07-25 18:05:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d187091706ce6174691aa7b9edeb4ef6829ced48,d187091706ce6174691aa7b9edeb4ef6829ced48,Version 0.92 (BETA 3)
snej,2012-07-25 17:47:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fedc66e0f590e287b95d0c8035566d74030a9893,fedc66e0f590e287b95d0c8035566d74030a9893,"TDMultipartDocumentReader's ""received unparseable JSON"" warning didn't include the string."
snej,2012-07-24 16:10:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bfaea313b9e9f32318a1d5bdd6b1b1380ea7047,2bfaea313b9e9f32318a1d5bdd6b1b1380ea7047,"Fixed a small leak in TDMultipartReader.

Thanks to Eric Hammond for finding this."
snej,2012-07-23 20:13:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2e0ea709086c1e40c8bb02c47bd5b7cb3f0f39b2,2e0ea709086c1e40c8bb02c47bd5b7cb3f0f39b2,"Track separate checkpoint for each filtered replication

The replicator used to keep track of one checkpoint for each {source, target} pair. This meant that changing the filter of a replicator wouldn't work right,
because it would start from the old checkpoint instead of fetching older documents.
Now the checkpoint ID takes the filter into account (locally and remotely) so replications with different filters get different checkpoints."
snej,2012-07-23 18:25:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d7d7e6c1c2ec754dc18da5dab3d1d5b014989f1e,d7d7e6c1c2ec754dc18da5dab3d1d5b014989f1e,"Implemented -needNewBodyStream: delegate method in TDMultipartUploader

This should fix some errors pushing docs with attachments, on iOS."
snej,2012-07-23 18:14:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/71d3545c8ba913020b3c942903d72fde5e1485f8,71d3545c8ba913020b3c942903d72fde5e1485f8,(snapshot)
snej,2012-07-20 01:03:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0c80bdd672a7254ab1b21b44c6cb69540c746f7,d0c80bdd672a7254ab1b21b44c6cb69540c746f7,Updated (merged) MYUtilities.
snej,2012-07-20 00:53:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/277cf46e2ca2045f98d5d3d75a4bd180af78586a,277cf46e2ca2045f98d5d3d75a4bd180af78586a,"Yet more replication auth fixes

- Use credentials embedded in the URL
- Make sure Authorization: header gets preserved across a redirect (NSURLConnection drops it)
- Weed out ServerTrust auth 'challenges' so they don't confuse my code
- Added optional username/password args to TouchServ's replication command

Fixes problems reported by Joel at 36codes.com"
snej,2012-07-19 23:00:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/61c670d5e9ddfcbc5470923683360e4fec9d65f4,61c670d5e9ddfcbc5470923683360e4fec9d65f4,MInor changes.
snej,2012-06-26 17:00:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b1bea0816b516f58c18ea526f20b4618ddd3a4aa,b1bea0816b516f58c18ea526f20b4618ddd3a4aa,Working on replication API. Framework compiles but hasn't been tested.
snej,2012-06-23 01:19:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f12e834737de474675d9af2468b493fc747e2d9b,f12e834737de474675d9af2468b493fc747e2d9b,Added TouchReplication; not working yet
snej,2012-06-21 22:56:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/90535f9222393133e3f0a2335bb9f2df5b93bd9e,90535f9222393133e3f0a2335bb9f2df5b93bd9e,"Public API: Attachment support (CouchAttachment)

Got Mac demo app running (minus replication)."
snej,2012-06-21 00:52:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1cd82f119d927b4c0b9fac056b2caf2b1658e993,1cd82f119d927b4c0b9fac056b2caf2b1658e993,"Use ""Touch"" prefix for API; this means new classes for Database, etc.

iOS demo app works, Mac doesn't build yet."
snej,2012-06-19 01:16:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f98aa7c1bd293283b2295638a485f5239319419a,f98aa7c1bd293283b2295638a485f5239319419a,Don't put TDRouter and TDURLProtocol in the base framework.
snej,2012-06-19 00:56:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f347525a9159839b4ad71ef366fa409cbc3921d5,f347525a9159839b4ad71ef366fa409cbc3921d5,"Most of public API implemented. iOS demo app runs.

No replication yet."
snej,2012-06-04 17:13:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/19fbffedd508f155e634ae5113c944c224bba313,19fbffedd508f155e634ae5113c944c224bba313,Implementing TDDocument.
snej,2012-07-18 23:52:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92e1a7af57e3fa594dc7784d634df67576f371c8,92e1a7af57e3fa594dc7784d634df67576f371c8,An FMResultSet wasn't being closed.
snej,2012-07-18 18:06:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f046c4e62d02b62bf0d2d033e144aa5fde7180e4,f046c4e62d02b62bf0d2d033e144aa5fde7180e4,"Implemented REST API for _purge

Also allowed ""*"" as a magic revision ID that deletes _all_ revisions."
snej,2012-07-17 02:01:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/30895be943a1c1cc54c3e53630a341cec8d48cae,30895be943a1c1cc54c3e53630a341cec8d48cae,"Implement _purge command from CouchDB REST API

Fixes #105."
snej,2012-07-12 21:54:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/055a85171deac58e475803abb4a4452d4a3b891e,055a85171deac58e475803abb4a4452d4a3b891e,Updated README.
snej,2012-07-11 20:40:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/530bbff2ab336793da727d5c9cdef3db5802825c,530bbff2ab336793da727d5c9cdef3db5802825c,"Merge tag 'v0.9-beta2' into stable

Conflicts:
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-07-11 20:16:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e345d0184ce0a0b7c25cd14f24049cf9b694de82,e345d0184ce0a0b7c25cd14f24049cf9b694de82,"Support basic auth to CouchDB's without reconfigured auth headers

Out of the box, CouchDB doesn't send a WWW-Authenticate: header in its 401 responses,
which means NSURLConnection won't try to authenticate. Work around this by checking
for a 401 failure and looking up the credential to use, then sending the request again with
an Authorization: header.
Fixes #110."
snej,2012-07-10 19:25:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cde9b786b936ef0961fcd19d85d9bdf85aa58c07,cde9b786b936ef0961fcd19d85d9bdf85aa58c07,"Improve retry behavior of replicator

- ConnectionChangeTracker will keep retrying indefinitely, with max interval of 5 minutes, and will retry whenever the network config changes.
- On iOS, replicators stop when the app is backgrounded.
- On iOS, persistent continuous replications are re-started when the app is foregrounded again."
snej,2012-07-11 20:26:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5a1361a21978438c257ebafa5da72c17e8d5554,a5a1361a21978438c257ebafa5da72c17e8d5554,Bump version to 0.91 (post-beta2)
snej,2012-07-11 20:24:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee261fedefb25b65505e4c40e1072c7693747095,ee261fedefb25b65505e4c40e1072c7693747095,Beta 2! Bump version to 0.9
snej,2012-07-11 19:21:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c2edb80cc00b01682a8521a8503e1ac598d05d45,c2edb80cc00b01682a8521a8503e1ac598d05d45,Project file: stop sharing the schemes (it's too annoying when they change all the time)
snej,2012-07-10 17:11:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2acb98413b8f6822df5b1c7e228e00cd4b9aaf42,2acb98413b8f6822df5b1c7e228e00cd4b9aaf42,Fixed a leak in TDConnectionChangeTracker.
snej,2012-07-08 00:47:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/04b7d6c73b20800d20c63ac29352a7504f96ef33,04b7d6c73b20800d20c63ac29352a7504f96ef33,Better logging of auth challenges in TDConnectionChangeTracker
snej,2012-07-07 23:48:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c6184cd99233f7c5de0319324e759ef662e9278f,c6184cd99233f7c5de0319324e759ef662e9278f,Beta 2 candidate: Bump version number to 0.802
snej,2012-07-07 22:05:08,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40a32304c54cca48501843fe9cf2bb30b0c62485,40a32304c54cca48501843fe9cf2bb30b0c62485,"Another attempt to fix crash in TDHTTPResponse

I think the object was being dealloced on the HTTP thread while running its -onFinished method on the TD thread.
Fixes #107 for real (I think)."
snej,2012-07-07 00:19:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c8cff2db0fd2e200ec1f487ebeaec3862be9d608,c8cff2db0fd2e200ec1f487ebeaec3862be9d608,"Added replication test command to TouchServ

""--pull url"" or ""--push url""."
snej,2012-07-07 00:19:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/581fabcc3c5e26501422c3212cae4f0f32a646a0,581fabcc3c5e26501422c3212cae4f0f32a646a0,"Fix HTTP auth in change tracker

Have to remove the '.' from the hostname before looking up the credential."
snej,2012-07-07 00:17:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d78be2a6d83ae9467d4e296d5aaf3d785269fb61,d78be2a6d83ae9467d4e296d5aaf3d785269fb61,"TDRemoteJSONRequest shouldn't fail if response has empty body

Just treat it as an empty JSON object.
(Cloudant responds this way to some PUTs.)"
snej,2012-07-07 00:15:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e6605333efa6b567c7d53a145cb33e3f5206c79,9e6605333efa6b567c7d53a145cb33e3f5206c79,Fixed a warning about an FMDatabase not being open
snej,2012-07-03 15:43:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad5ead40b07a89b1c917a5cbfd8eca40b83ac6b3,ad5ead40b07a89b1c917a5cbfd8eca40b83ac6b3,"Keep the ""."" hostname suffix out of the Host: header sent by CouchChangeTracker

The suffix seems to confuse Cloudant/BigCouch, making it return a 503 error."
snej,2012-07-03 15:18:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e4daafecdcb243758a748465f04e047ac822eea,8e4daafecdcb243758a748465f04e047ac822eea,"Update naming of -delayResponseHeaders method in listener

CocoaHTTPServer fixed the naming of the -delayResponeHeaders [sic] method, so now I have to rename my override of it.
Fixes #108."
snej,2012-07-03 15:12:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87caf0dc121ba8dc99bc73b2316f7466cbef1a11,87caf0dc121ba8dc99bc73b2316f7466cbef1a11,"Fix a race condition in TDHTTPResponse (double-free of _data)

I haven't reproduced it myself, but I think this was the cause.
Fixes #107 (I think?)"
snej,2012-07-01 19:37:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/49613efd3c07077dc835b247d52958fd2222e174,49613efd3c07077dc835b247d52958fd2222e174,"Fixes for local-to-local replication

Allows replication between local databases, by the workaround of using the URL ""touchdb:///db-name"" for one of them.
(This mostly already worked but there were one or two things in the way.)"
snej,2012-06-30 19:12:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7895c4a07221b2b7b254dd7037e2c43731259e5e,7895c4a07221b2b7b254dd7037e2c43731259e5e,Allow remote replication URL to have 'touchdb:' scheme.
snej,2012-06-30 19:03:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a80ab0a2fec689b81fa94bfbbadbb5cb77eed7a1,a80ab0a2fec689b81fa94bfbbadbb5cb77eed7a1,"Oops, enable ARC for HTTP code in iOS listener target

The HTTP library requires ARC now."
snej,2012-06-30 17:55:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b95e71ac2231800f34d6cf05aff63958eba3d6d3,b95e71ac2231800f34d6cf05aff63958eba3d6d3,"Don't build Mac Listener or Mac Demo 32-bit

The HTTP library in the listener requires ARC."
snej,2012-06-30 00:26:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/326de59c3cb737b7eaba82c9118b2c23c30a26c2,326de59c3cb737b7eaba82c9118b2c23c30a26c2,"REALLY fixed AddDotToURLHost.

Was passing wrong encoding constant to CFURLCreateWithBytes.
For some reason Mac OS didn't mind this but iOS did."
snej,2012-06-29 22:20:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2d95cbf9dc2a9172f9e5f452e98bf8d8a2e14129,2d95cbf9dc2a9172f9e5f452e98bf8d8a2e14129,Add error checking to AddDotToURLHost
snej,2012-06-29 20:40:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/72fd11097cc3ad1e676e22690bff533dc189f8f2,72fd11097cc3ad1e676e22690bff533dc189f8f2,"Fix compiler warnings from newer Clang, and update CocoaHTTPServer

Most of these are printf format specifier inconsistencies, especially involving NSInteger and NSUInteger."
snej,2012-06-28 22:17:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aef7bba40fee6defb815350ad12983d03df16d19,aef7bba40fee6defb815350ad12983d03df16d19,"Fix ""input stream exhausted"" errors

TDMultipartWriter needs to be able to open a second time after it's been closed,
because retrying a multipart upload will add it as the new connection's body stream.
Fixes #91."
snej,2012-06-28 20:14:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/25f42f462db71de9ce6dc117d496af5660408850,25f42f462db71de9ce6dc117d496af5660408850,"Made previous TDChangeTracker workaround work with numeric hostnames

Also cleaned up the code."
snej,2012-06-28 19:05:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/514721fed25c5667e59805fc9dfce6bbeb1cfd6b,514721fed25c5667e59805fc9dfce6bbeb1cfd6b,"Oops, back out a temporary hack in TDChangeTracker"
snej,2012-06-28 19:00:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b741d89b9cda7dc9aa363a89ececb782e945124a,b741d89b9cda7dc9aa363a89ececb782e945124a,"Revert ""Oops -- fixed a merge-created glitch in the project file.""

This reverts commit ef9bb1babe7a3dabfaa34d5734c62c94d6a7d2ff."
snej,2012-06-28 18:58:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5a10f8d4f612aae151ca3c9d97844f9487724447,5a10f8d4f612aae151ca3c9d97844f9487724447,"Workaround for NSURLConnections getting stuck

Modify the hostname in the _changes feed URL (append a ""."" to it) if possible.
This causes CFNetwork to treat the connection as to a different host, so it has a different pool of sockets.
Then replicator requests won't get stuck on a queue behind a long-running _changes feed.
Fixes #100. Fixes #98."
snej,2012-06-27 23:32:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ef9bb1babe7a3dabfaa34d5734c62c94d6a7d2ff,ef9bb1babe7a3dabfaa34d5734c62c94d6a7d2ff,Oops -- fixed a merge-created glitch in the project file.
snej,2012-06-27 21:49:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a76e624413c2824125ae10d1cf6e68db1f1ad5bc,a76e624413c2824125ae10d1cf6e68db1f1ad5bc,"Make replicator retry connections that time out

Fixes #100, #98. Most of the timeouts we're seeing are actually the result of a CFNetwork bug,
but this will help work around that bug anyway."
snej,2012-06-27 03:42:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf769e42b82c1c92a356f447d6fed970ba2fcc6a,cf769e42b82c1c92a356f447d6fed970ba2fcc6a,"Only upload one multipart document at a time

Try to work around CFNetwork issues(?) by pushing docs with attachments one at a time instead of in parallel.
As part of this, changed TDRemoteRequest to have a separate -start method, so instances can be created & queued without starting."
snej,2012-06-26 18:27:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5963f99853554d66df0f6c01160436822d4685df,5963f99853554d66df0f6c01160436822d4685df,Bump version to 0.801 to reflect post-beta-1 status.
snej,2012-06-26 18:26:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/244092c21a6bcc6ba5259bc60970c8ffe8fc0f05,244092c21a6bcc6ba5259bc60970c8ffe8fc0f05,"Work around dreaded attachment push error(""sending event before being opened"")

TDMultiStreamWriter defers writing to its _output until the NSURLConnection has opened the corresponding input stream.
This works around an apparent CFNetwork bug that was causing some docs with attachments to silently fail to upload.
Fixes #99."
snej,2012-06-25 17:35:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/91da97d571554e8bb2bdc8bd46011c42f6d55073,91da97d571554e8bb2bdc8bd46011c42f6d55073,Updated the README to reflect beta status.
snej,2012-06-19 17:33:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6399624a86d9987be2bd86b49b33d83b970e9dc1,6399624a86d9987be2bd86b49b33d83b970e9dc1,"Fix PIE warning by turning off ""Position-Dependent Code"" setting"
snej,2012-06-19 17:46:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee47a8ab49fee46df377f35717c129c4abc894d0,ee47a8ab49fee46df377f35717c129c4abc894d0,Bumped version to 0.8 -- BETA 1
snej,2012-06-14 00:21:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/527c15c0910c959316ee4f2e89bf63a8150136ab,527c15c0910c959316ee4f2e89bf63a8150136ab,"Merge pull request #94 from dlvenable/td-replicator-constants-as-methods

TDReplicator notification strings as class messages"
snej,2012-06-13 01:21:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e2684acd0a53bcbcd62e1c0928498f201e2b4e4c,e2684acd0a53bcbcd62e1c0928498f201e2b4e4c,"Fixed: Continuous push replication never appears to go idle

TDPusher shouldn't treat observing local changes as an asyncTask;
it prevents the .active flag from going to NO."
snej,2012-06-13 00:54:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/38ff6f63153d902229fc1e4eff29456a206489d1,38ff6f63153d902229fc1e4eff29456a206489d1,"Added validation utility methods to TDValidationContext

These make it easier & quicker to implement validation functions."
dlvenable,2012-06-12 22:57:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb35d7c92837066648f19115d57fe1bbd2829649,bb35d7c92837066648f19115d57fe1bbd2829649,Added static methods on TDReplicator for getting the notification strings. This allows CouchCocoa to avoid linking with TDReplicator's global variables.
snej,2012-06-11 17:57:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c2469da45f49e0e0c4b06887e28b67a3fbc35b7,8c2469da45f49e0e0c4b06887e28b67a3fbc35b7,Bumped version to 0.792.
snej,2012-06-11 17:55:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/09b6f8a572504ceec2aae4a75b2fb037d4e147a9,09b6f8a572504ceec2aae4a75b2fb037d4e147a9,"Fixed: filter function called with nil body

When filtering the changes feed, local changes were being passed to the filter function as TDRevisions with a nil body.
Fixed this by making sure TDDatabaseChangedNotification is always called with a TDRevision with an up-to-date body.
Fixes #93."
snej,2012-06-06 23:26:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62745dc31f25cef83556d84d87943b14534ba5c9,62745dc31f25cef83556d84d87943b14534ba5c9,"Fix exception in view query if row value is non-dictionary

Regression introduced by 45f592f (linked documents). Oops."
snej,2012-06-06 17:26:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bd06a60db223a52f56a5dc87036fe0c1e65d7da5,bd06a60db223a52f56a5dc87036fe0c1e65d7da5,Bump version to 0.791.
snej,2012-06-06 16:53:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92a6edb94805ccffecc582fa8b37fe4ae6954772,92a6edb94805ccffecc582fa8b37fe4ae6954772,"Improved: Change tracker will retry connection if closed by proxy

Tweak the heuristic added in 6043f1c by looking at total connection time, not idle time."
snej,2012-06-05 20:32:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fced3bbf58bdc2b4f58cf87b51957d56876ba3b0,fced3bbf58bdc2b4f58cf87b51957d56876ba3b0,Bump version to 0.79 (beta candidate!)
snej,2012-06-05 20:03:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6043f1c12b2e875d2864527529075158a9ba9592,6043f1c12b2e875d2864527529075158a9ba9592,"Change tracker will retry connection if closed by proxy

The AWS Elastic Load Balancer seems to close connections after a brief idle time (45 sec?).
This breaks the _changes feed. The header of the JSON gets sent but no changes, so it's unparseable.
This patch adds code to detect this case and retry after adjusting the heartbeat interval to less than the elapsed idle time."
snej,2012-06-05 18:48:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6906a9d560431a0da6593bdc1589e6b94ca3f1ae,6906a9d560431a0da6593bdc1589e6b94ca3f1ae,"Fixed off-by-1000 error in replicator 'heartbeat' property

Forgot to convert milliseconds to seconds, so 'heartbeat' wouldn't have had any effect."
snej,2012-06-04 23:00:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45f592fd38a5fbe3c3504aeb2495d83e111102b6,45f592fd38a5fbe3c3504aeb2495d83e111102b6,"Implemented linked documents for views

Support for linked documents: http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Linked_documents
Emitting a _id key from a map function will cause include_docs to include the doc with that ID instead.
Note: This is not the most efficient way to implement this.
Fixes #92."
snej,2012-06-01 19:30:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8c3f0d5b0049c2486d17bb0956a3bcf918f0904,f8c3f0d5b0049c2486d17bb0956a3bcf918f0904,"Fixed Release build of TouchServ

Was using CollectionUtils, which aren't linked into that target."
snej,2012-06-01 19:15:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b5ca0e1b115eaf19b01314fa583355368bd940e,4b5ca0e1b115eaf19b01314fa583355368bd940e,Bumped version to 0.78
snej,2012-06-01 19:13:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2dcf61b31ed43b2b4db172b28b92209de7c74220,2dcf61b31ed43b2b4db172b28b92209de7c74220,"Fixed Release build

There was a missing ""#if DEBUG"" around a property declaration in TDInternal.h,
which broke non-debug builds."
snej,2012-05-30 20:25:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d1b165633dcc920a7540a34910d8675e0d6e27a2,d1b165633dcc920a7540a34910d8675e0d6e27a2,"Cleanup, and possible fix, of multipart upload code

Trying to address the mysterious error -1021 ""request body stream exhausted"" when pushing docs with attachments
(Issue #91).
* Moved the length computation code from TDMultipartWriter into its superclass TDMultiStreamWriter.
* Detect and report errors in the input streams the writer is reading from, in case that's the problem.
* Put in some checks to verify the bytes written match the expected length.
* Cleaned up the logic in -read:maxLength:, which I think may have been broken in some circumstances."
snej,2012-05-29 21:36:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d33c833d850ffcd82dd01f66567b6586ad2f4c9,3d33c833d850ffcd82dd01f66567b6586ad2f4c9,"Don't return compacted-away revisions as possible ancestors

The ?atts_since query param sent by TDPuller, and the possible_ancestors property returned by _revs_diff, should not return IDs of any revisions that have already been compacted away. Both of these APIs are used for syncing attachments, and a compacted-away revision has no attachments.
This improves correctness and also reduces the length of the URLs generated by TDPuller (see issue #90.)"
snej,2012-05-29 21:33:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/def3641096604f92943d0c9ce0f9648acba1b1f0,def3641096604f92943d0c9ce0f9648acba1b1f0,"Don't store 'null' for JSON of revisions with no custom properties

A revision with no custom (non-underscored) properties was storing a SQL 'null' value in its 'json' column.
It shouldn't do this -- that's reserved for revisions that have been compacted away by the /_compact command.
With the old behavior, a revision with attachments but no custom properties would lose the attachments after the next compact.

Instead, store an empty (zero-length) blob when there is no JSON to store. I had to fix an issue in FMDB to make this work right."
snej,2012-05-29 18:37:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/343b4b52bd4149494ccc9acf1dc5a37fcbe36558,343b4b52bd4149494ccc9acf1dc5a37fcbe36558,"TDConnectionChangeTracker should retry on connection failure/loss.

This is logic that used to be in TDSocketChangeTracker."
snej,2012-05-29 17:12:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a23191b2288dcbf84f775ab90d136259f87f2aa5,a23191b2288dcbf84f775ab90d136259f87f2aa5,"Limit the number of ?atts_since parameters in a replicator request URL

Fixes #90."
snej,2012-05-25 22:55:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0235b18264f73ed14303ebf50e354f7aa7fd3ec0,0235b18264f73ed14303ebf50e354f7aa7fd3ec0,"Port, auth, Bonjour config for listener

Lots of additions to TDListener:
* Set port to 0 to get a dynamically-assigned port number (access the .port property to find out what it is.)
* Can publish via Bonjour by setting service name/type and optionally TXT dictionary.
* Can require authentication by supplying usernames and passwords."
snej,2012-05-25 18:04:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b44e5453aaa945accb0d0c68a79f711face0475b,b44e5453aaa945accb0d0c68a79f711face0475b,"More change-tracker cleanup

* Remove remaining support for continuous feed.
* Instantiate TDConnectionChangeTracker directly instead of having TDChangeTracker act as a class-cluster.
* Bump version number to 0.77"
snej,2012-05-25 04:48:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9b2085d063fc3f79fe2bdaf3f554345e53155cf,f9b2085d063fc3f79fe2bdaf3f554345e53155cf,"Do away with TDSocketChangeTracker

TDPuller no longer uses the continuous _changes feed mode, only longpoll or one-shot. To avoid latency, it limits the number of revisions in the feed to 100, then parses those and gets the feed again if there's more left.
This means TDSocketChangeTracker is no longer necessary."
snej,2012-05-25 04:41:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3fd49659fb8ab3197ed2b748603ac91c403dc91f,3fd49659fb8ab3197ed2b748603ac91c403dc91f,"Clean up replicator tests

* The replic8 function had an unused parameter.
* Wait for the replication to save its checkpoint before going on to the next test."
snej,2012-05-23 21:05:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9a61c400aca57bf2977276ab957cce8b34d44897,9a61c400aca57bf2977276ab957cce8b34d44897,"Avoid a crash by being more careful in -[TDChangeTracker stopped]

I think this fixes #89."
snej,2012-05-22 19:32:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1c74015d6a14122f086bb67606763d342415be13,1c74015d6a14122f086bb67606763d342415be13,"Speculative fix for TDPuller assertion failure on wake

Issue #88 shows a replication starting when it's already got a change tracker. I think this could happen if the replication had called -stop on the change tracker,
but the tracker was in its retry state and didn't currently have an open connection; it wouldn't call its changeTrackerDidStop delegate method, so the delegate
(the puller) wouldn't clear out its reference. Fixed it so it always calls [super stop] which is what notifies the delegate."
snej,2012-05-21 21:23:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8f48fe873b453847afc5ce4df50a5a1f10816a3c,8f48fe873b453847afc5ce4df50a5a1f10816a3c,Added OAuth 1 authorizer. Wired it up to replication 'oauth' object.
snej,2012-05-18 21:26:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c716ebaa1a49788a446c93d92d314d87d100478c,c716ebaa1a49788a446c93d92d314d87d100478c,"Implemented TDMACAUthorizer, for use with OAuth.

Not tested yet!!"
snej,2012-05-22 00:23:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ed92b46d9983a64c30c41c9f421467608a204ee1,ed92b46d9983a64c30c41c9f421467608a204ee1,Updated MYUtilities (make sure assertion failure messagess are logged)
snej,2012-05-19 16:40:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d56e56016ff68d946cb5dd55b9f09f07a497169e,d56e56016ff68d946cb5dd55b9f09f07a497169e,"Accept dictionary form of replication 'source' or 'target' parameters

The 'source' or 'target' property of a JSON replication specifier may be a dictionary instead of a string.
If so, it can contain an optional 'headers' property -- store this into TDReplication.requestHeaders."
snej,2012-05-18 21:46:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1e3a3f03a97ee992c5157176b5ffee7a5d8b5014,1e3a3f03a97ee992c5157176b5ffee7a5d8b5014,"Don't crash if TDSocketChangeTracker finds a credential but can't get its password.

It might be a password-less credential (i.e. a client cert) or the user might have canceled a request to use the password.
Fixes #85 (?)"
snej,2012-05-17 00:18:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b48427a492f37b69c2435378210b9e89176f6e4f,b48427a492f37b69c2435378210b9e89176f6e4f,"Deleting a database should delete persistent replications involving it

Fixes #79."
snej,2012-05-16 21:26:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/656f5e5ffdf9125872c50439262df8a3732858e0,656f5e5ffdf9125872c50439262df8a3732858e0,"Oops, another minor build-script fix."
snej,2012-05-16 21:21:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/73b9fe103b39a8a95ab65469f036e0eb1c58397b,73b9fe103b39a8a95ab65469f036e0eb1c58397b,Added some missing target dependencies to help xcodebuild out.
snej,2012-05-16 21:17:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/346515d22bb8cd46fe51fcebcdc89ae8ac5f546a,346515d22bb8cd46fe51fcebcdc89ae8ac5f546a,"Fix glitch in build-fat-library script

It was deleting the build directory before adding the output, so if you built two targets the second would delete the first :-p
Also extracted the script into a separate file, Source/BuildFatLibrary.sh."
snej,2012-05-15 18:15:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ca216d41def0f4894c634ee52df0856ba2fc1bdc,ca216d41def0f4894c634ee52df0856ba2fc1bdc,"Don't use NSStream method to open socket

It requires an NSHost parameter, and creating an NSHost runs a synchronous DNS query.
Just use the CFStream call that's already there for iOS.

Also fixed two 64-bit compile errors."
snej,2012-05-15 17:03:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/87e5ebfa2a0fed1d22235c5f423e50ec86c21281,87e5ebfa2a0fed1d22235c5f423e50ec86c21281,"Improved HTTP auth for TDSocketChangeTracker

* Properly parses 'realm' property from HTTP response to look up credential
* Should be able to handle Digest as well as Basic auth (not able to test this yet)
* If username is given in URL, will only use stored credential for that username.
* Uses CFHTTPMessage to parse response.
* Added unit test of basic auth to IrisCouch."
snej,2012-05-14 22:44:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d43aa70f84e29603ec8097f71a6d2982cf21fc2f,d43aa70f84e29603ec8097f71a6d2982cf21fc2f,"Allow pull replication to run _changes feed in longpoll instead of continuous mode

Apparently some cell networks have trouble with the continuous-mode _changes feed (maybe due to the chunked encoding.)
If the client now sets the ""feed"" property of the replication to ""longpoll"", the change-tracker will use longpoll mode instead.
This should only be done if necessary, because it's not as fast as continuous mode.
Fixes #72."
snej,2012-05-14 22:10:33,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/01e304b7db57de6c8bb832529dc35b78ec2b0224,01e304b7db57de6c8bb832529dc35b78ec2b0224,Updated MYUtilities (just a change to the build configuration)
snej,2012-05-14 22:08:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1d8fd645f3d1305b7567616ceb69b3873a323183,1d8fd645f3d1305b7567616ceb69b3873a323183,"Make _changes feed 'heartbeat' configurable in pull replications

Some proxies like Amazon's ELB will close sockets if there's no activity. This can break the _changes feed listener.
As a workaround, this change allows the client to set the ""heartbeat"" parameter to the _changes request, which specifies how often the server will send a CRLF while the feed is idle.
The default value is 300000 (in milliseconds, i.e. 5 min).
Set the ""heartbeat"" property of the replication's JSON to a different value in milliseconds, i.e. 45000 or so to work with ELB.
Fixes #74."
snej,2012-05-14 18:33:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7d199af6c491d51580eabb77a7d3d58b53e1c67e,7d199af6c491d51580eabb77a7d3d58b53e1c67e,"Minor tweaks (exports, version #, copyright dates)"
snej,2012-05-14 18:24:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e60d46dd951863db5ba7f260a954596a05b6d6e2,e60d46dd951863db5ba7f260a954596a05b6d6e2,"Simplify TDSocketChangeTracker

* Didn't need the SSL hostname verification workaround -- all I needed to do was to set the expected hostname in the stream's SSL settings. That means I can take out the MYNetwork cert-parsing code I just added.
* Use CFHTTPMessage to generate the request instead of hardcoding it."
snej,2012-05-13 19:57:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b0101da7c7a637ce603808279ab14e86af2d6fc5,b0101da7c7a637ce603808279ab14e86af2d6fc5,"Proper SSL hostname checking in TDSocketChangeTracker

For some reason SecureTransport doesn't do wildcard matching of hostnames in SSL certs (e.g. ""*.iriscouch.com"") so in the prior commit I had to turn off hostname matching. But that's unsafe.

So in this commit I enable matching by doing the work myself. After the connection opens, read the common-name out of the server's cert and compare it against the intended hostname, obeying wildcards.

I had to bring in some source files from my MYCrypto library that do X.509 cert parsing, since iOS doesn't have SecCertificateCopyCommonName."
snej,2012-05-13 19:50:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3b946ef28135f4bc7a14b04db495ddcd75a7b3e4,3b946ef28135f4bc7a14b04db495ddcd75a7b3e4,"Improvements to _changes feed auth handling

* Use username/password baked into the URL, if present.
* On HTTP error, set .error property to true error, not just ""unparseable response""."
snej,2012-05-11 18:43:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/735a934f3fbb6325effb0b4de463ff3977e62ee0,735a934f3fbb6325effb0b4de463ff3977e62ee0,"Add Apple-approved workaround for iOS 5 TLS 1.2 compatibility issue

Disable TLS 1.2 in TDSocketChangeTracker because some servers are incompatible with it.
Fixes #75."
snej,2012-05-11 18:19:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/079d29995af2b631b83e0a4eac8bd75e8b593744,079d29995af2b631b83e0a4eac8bd75e8b593744,"SSL support for TDSocketChangeTracker

To enable pull replication over SSL. Fixes #75.
NOTE: Temporarily disabled peer name verification because it's not working right with wildcard subdomain certs such as iriscouch uses.
Added unit tests."
snej,2012-05-11 01:53:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5822cb488369fd4400038c8a06e4bfae4d9ad958,5822cb488369fd4400038c8a06e4bfae4d9ad958,"Authorization support for pull replication

TDSocketChangeTracker wasn't getting any Authorization header value to put in the request.
Added API to TDPuller, and made it look up the credential from the default credential store.
If a username/password has been added for this domain in the Keychain, it'll be used.

This partly takes care of #58, although it doesn't include lenkawell's proposed support
for using a username/password baked into the URL. I'll add that later."
snej,2012-05-09 17:32:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0900c72eb6f00940b1769e0925d39457941918e3,0900c72eb6f00940b1769e0925d39457941918e3,Updated README to add info about GNUstep. Reorganized GNUstep-specific files.
snej,2012-05-09 01:40:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/88c014b22cd9f6d6480e3a87795a1247005f2744,88c014b22cd9f6d6480e3a87795a1247005f2744,Cleanup from the GNUstep merge
snej,2012-05-09 01:18:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/526eb20ed92543e0cede14e5298e1340a24375f0,526eb20ed92543e0cede14e5298e1340a24375f0,"Merge remote-tracking branch 'refs/remotes/origin/master'
(Yeah, I already did this, but for some reason it wasn't recorded as a merge!)

Conflicts:
	Source/ChangeTracker/TDChangeTracker.m
	Source/ChangeTracker/TDSocketChangeTracker.m
	Source/TDBody.m
	Source/TDCanonicalJSON.m
	Source/TDCollateJSON.m
	Source/TDDatabase+Attachments.h
	Source/TDDatabase+Insertion.m
	Source/TDDatabase+LocalDocs.m
	Source/TDDatabase.h
	Source/TDDatabase.m
	Source/TDDatabaseManager.m
	Source/TDJSON.m
	Source/TDMisc.m
	Source/TDMultipartDocumentReader.h
	Source/TDMultipartDocumentReader.m
	Source/TDPusher.m
	Source/TDRemoteRequest.m
	Source/TDReplicatorManager.h
	Source/TDReplicator_Tests.m
	Source/TDRouter+Handlers.m
	Source/TDRouter.h
	Source/TDRouter.m
	Source/TDRouter_Tests.m
	Source/TDServer.m
	Source/TDURLProtocol.m
	Source/TDView.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-05-08 18:11:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/eb4edf8b7efa1d02e4f323061fdabe75ea5a4f5f,eb4edf8b7efa1d02e4f323061fdabe75ea5a4f5f,"More GNUstep fixes

Implement NSOperationQueue category method."
snej,2012-05-08 16:03:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3842b96205a162f728311a9894ebd61db5ee6aa,d3842b96205a162f728311a9894ebd61db5ee6aa,Updated README.
snej,2012-05-07 22:08:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/487f6f34108e0987e932982f72bcb465efd8b93a,487f6f34108e0987e932982f72bcb465efd8b93a,"Merge remote-tracking branch 'origin/master'

Conflicts:
	Source/ChangeTracker/TDChangeTracker.m
	Source/ChangeTracker/TDSocketChangeTracker.m
	Source/TDBody.m
	Source/TDCollateJSON.m
	Source/TDDatabase+Attachments.h
	Source/TDDatabase+Insertion.m
	Source/TDDatabase+LocalDocs.m
	Source/TDDatabase.m
	Source/TDJSON.h
	Source/TDJSON.m
	Source/TDMisc.m
	Source/TDMultipartDownloader.m
	Source/TDPuller.m
	Source/TDPusher.m
	Source/TDRemoteRequest.m
	Source/TDReplicatorManager.h
	Source/TDReplicator_Tests.m
	Source/TDRouter+Handlers.m
	Source/TDRouter.h
	Source/TDRouter.m
	Source/TDRouter_Tests.m
	Source/TDServer.m
	Source/TDURLProtocol.m
	Source/TDView.m
	TouchDB.xcodeproj/project.pbxproj"
snej,2012-05-07 20:21:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fd42cf58023a45ba7aa17417b0fc930db0875ab0,fd42cf58023a45ba7aa17417b0fc930db0875ab0,"Read-only mode for TDListener

New property TDListener.readOnly, and TouchServ ""--readonly"" flag.

Conflicts:

	Listener/TDListener.h"
snej,2012-05-07 19:06:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d104ecf17e95e6459a4c8975fac56c26ff8468d7,d104ecf17e95e6459a4c8975fac56c26ff8468d7,"Beginnings of authorization work on TDRouter

Added TDRouter.onAccessCheck callback so client can examine database & docID and block access."
snej,2012-05-04 17:06:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0be3071aac6fd8508bc8acbfe02d1774cd0db994,0be3071aac6fd8508bc8acbfe02d1774cd0db994,"Fixed a bunch of memory leaks and refcount cycles.

Most of these only become apparent when trying to close a CouchServer or TDServer."
snej,2012-05-02 19:13:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8719bfe9fc17887112575cf40a09c4ef7deaedf3,8719bfe9fc17887112575cf40a09c4ef7deaedf3,"Removed unnecessary dispatch_queue from TDListener

Wasn't being used at all anymore, now that TDServer and TDRouter
manage their own threading."
snej,2012-05-02 01:15:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/69e399e71d54a24c0b9eabbdc3914f1657e4783a,69e399e71d54a24c0b9eabbdc3914f1657e4783a,"Fix another race condition in TDHTTPResponse

In some cases the HTTP listener wouldn't send a response.
Fixes #73."
snej,2012-05-01 19:41:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf0e141965f4738d95e15fb4b400334d10410ec0,cf0e141965f4738d95e15fb4b400334d10410ec0,"Fixed problems inserting identical attachments

If a doc has two attachments with identical data, or if two docs with identical attachments are pulled in the same ""batch"", then insertion would fail because the second instance of the attachment couldn't be found (its writer having already been removed from the _pendingAttachments dictionary.)
Fixed this by leaving the attachment's key (digest) behind in the dictionary for the use of subsequent insertions of the same content.
This fixes #67."
snej,2012-05-01 01:12:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ffa82f2157b610bf567394d5721906df11be13fe,ffa82f2157b610bf567394d5721906df11be13fe,Removed duplicate instance of TDStatus.h in the project.
snej,2012-05-01 00:10:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f80adfe67a28e5ba4ab088debba204b2a4065f3,7f80adfe67a28e5ba4ab088debba204b2a4065f3,"Fixed mixed-up progress counting in TDPuller

It was incrementing changesTotal too much, so it looked like replications never finished.

Also fixed a case where changesProcessed didn't get incremented upon an HTTP error."
snej,2012-04-18 21:00:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/23ba2227c4a63d58410a59e80f6d12eaf63ecb42,23ba2227c4a63d58410a59e80f6d12eaf63ecb42,"Updated README, and added some Apache license comments

The README now points out that Xcode 4.3 is required (because of the use of forward references to methods.)"
snej,2012-04-18 20:45:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45fdce9f94e6a22194247998a32bae6288029639,45fdce9f94e6a22194247998a32bae6288029639,"Fixes for indexing documents in conflict

There were a couple of problems in the situation where you're indexing a new revision that conflicts with an already-indexed revision.
(a) If the new revision is the 'winner', the previously-emitted view rows for the earlier revision need to be removed, because that revision's not visible anymore. Otherwise you can have two revs of the same document showing up in the index.
(b) If the new revision is the 'loser', the *older* revision needs to be indexed again, with the new emitted rows *replacing* the old ones. This is because the map function needs to see the new _conflicts array in the doc properties.

This fixes #65, which reported case (a). Case (b) I noticed on my own and fixed at the same time."
snej,2012-04-18 20:34:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/195e59410c2695e1245a892961fce23f7dbe78c8,195e59410c2695e1245a892961fce23f7dbe78c8,"Moved TDCollateRevIDs to TDRevision.m, and added TDCompareRevIDs.

Small cleanup for the next commit, which needs TDCompareRevIDs."
snej,2012-04-18 17:45:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36b3017c4bc9409311811245c9ee58cba0f66ada,36b3017c4bc9409311811245c9ee58cba0f66ada,"Return custom HTTP error messages

Propagate the new error messages to the response from TDURLProtocol.
Unfortunately I can't get them into the regular HTTP status line, but they do show up in the JSON body."
snej,2012-04-10 00:01:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5dfded6238aaacf46e1cd2cbf797cc875a5d504,b5dfded6238aaacf46e1cd2cbf797cc875a5d504,"Add extensible authorization interface to replicator.

A TDReplicator can be given a TDAuthorizer object, which is given access to requests before they're sent and can add authorization headers.
TDAuthorizer is just a protocol, which can be implemented to do anything from basic auth to OAuth.
A TDBasicAuthorizer is provided for basic auth."
jchris,2012-04-17 20:49:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0c0eb6076f01190d58f8c6c7802fbf7716b549ec,0c0eb6076f01190d58f8c6c7802fbf7716b549ec,"Merge pull request #66 from pegli/issue64

added TDStatus.h to header files included with the iOS framework"
pegli,2012-04-17 18:43:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/185f5b9ed19feeeedc4894abbba45e9c4ba25d22,185f5b9ed19feeeedc4894abbba45e9c4ba25d22,added TDStatus.h to header files included with the iOS framework
snej,2012-04-08 20:11:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/316fe1c1f203cb594e4f75d991c72aeb511236e2,316fe1c1f203cb594e4f75d991c72aeb511236e2,"Make GET of _all_docs and _changes cacheable.

These now set the Etag response header, and check If-None-Match: and return a 304 if it matches. (Only applies to _changes in default mode, not continuous or longpoll.)

Also added some unit tests to verify cacheability."
snej,2012-04-08 20:07:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/83ec1f5212e198a0758103162d7f79bc12f5dd9a,83ec1f5212e198a0758103162d7f79bc12f5dd9a,Catch exception in TDRouter and return a 500 status.
lambmj,2012-04-06 02:53:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7af0f2555f745cc6200953835f8c5010356480e3,7af0f2555f745cc6200953835f8c5010356480e3,Include still current documents from previous indexing attempts in the list of conflicts.
snej,2012-04-06 17:13:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f9ff7800eebad454ea0d1775f20543845326630,7f9ff7800eebad454ea0d1775f20543845326630,"Status code (TDStatus) overhaul

* Use symbolic constants for codes, i.e. kTDStatusNotFound instead of 404.
* Add extra, more detailed status codes and map them to custom response messages."
snej,2012-04-05 23:34:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/be19f46de4c6acf2da932a2066a282faaa434726,be19f46de4c6acf2da932a2066a282faaa434726,"Handle a single attachment without a digest in a multipart download

Attachment metadata without a digest property is a problem in multipart downloads because we can't figure out how to match the metadata with the MIME bodies.
But the case where there's only one attachment is easy, since no mixup is possible.
This is a partial workaround for issue #61."
snej,2012-04-04 21:57:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/078be1068492b875d01f275459b67b0fb1b684ec,078be1068492b875d01f275459b67b0fb1b684ec,"Added unit tests for TDCanonicalJSON

These caught an edge case, where ASCII 31 (\037) wasn't being escaped in strings."
snej,2012-04-03 22:22:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c63524a904dd72b21d91865ac73e8b2be82f358d,c63524a904dd72b21d91865ac73e8b2be82f358d,"Revision IDs should be deterministic

Make revision ID a digest of the document & attachments. Fixes #56.
This means that if the same change is made to a document in two databases, it will not cause a conflict when they sync with each other (because the rev IDs will be the same.)
It also means that if some conflict occurs, and two peers fix it in the same way, the fixes will not conflict with each other."
snej,2012-04-04 16:20:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a571424b008620f71869d4e0413e19e133974634,a571424b008620f71869d4e0413e19e133974634,"Speculative fix for a crash in -[TDSocketChangeTracker start]

Make sure that calling -stop always cancels a pending delayed connection retry.
(Crash was reported via email, by Nicolas Lapomarda.)"
snej,2012-04-03 00:18:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6c9fee73dd330ce61af9e477b5acf34e5bf24411,6c9fee73dd330ce61af9e477b5acf34e5bf24411,"Allow TDURLProtocol and CouchCocoa to access multiple TDServers

This allows TouchDB databases in arbitrary locations in the filesystem to be accessed using CouchCocoa. Each TDServer is associated with a different hostname, which allows them to have distinct URLs.

Conflicts:

	TouchDB.xcodeproj/project.pbxproj
	TouchDB.xcodeproj/xcshareddata/xcschemes/iOS Demo.xcscheme"
snej,2012-04-01 01:03:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f8fe06a106dbf94011333610e911c7a896a3e5a4,f8fe06a106dbf94011333610e911c7a896a3e5a4,"Support multipart GETs of documents

Another missing router feature that broke replication.
Also made TDMultipartDocumentReader not fail if the document contains no attachments.
Also added some more warnings/logging."
snej,2012-03-30 17:31:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40ae2aee86965b40e9fb9055ebbb3a1fb444c289,40ae2aee86965b40e9fb9055ebbb3a1fb444c289,"Fixed a race condition in the HTTP listener

Sometimes it would never send the body of a response or close the socket.
I saw this happen with error responses like 404s; not sure it it would happen otherwise."
snej,2012-03-30 00:04:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ee1c7518f5ea2d63772fb08e46956eb46642a60b,ee1c7518f5ea2d63772fb08e46956eb46642a60b,"Add router support for PUT of document in MIME multipart format

This is necessary for allowing TouchDB to be pushed to by another server."
snej,2012-03-29 17:06:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d59f86ce89e9ffdfe7241759a6f2ab1e102314c8,d59f86ce89e9ffdfe7241759a6f2ab1e102314c8,"Fixed some issues with EOF handling in the updated TDSocketChangeTracker.

The recent changes to do async parsing didn't handle EOF correctly — the tracker shouldn't stop until *after* any pending parse finishes."
snej,2012-03-29 16:48:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/11ed0e7ce50922da1985266eb3e67c3addc05a59,11ed0e7ce50922da1985266eb3e67c3addc05a59,"Added +[TDJSON appendDictionary:toJSONDictionaryData:].

Replaces the static function appendDictToJSON in TDDatabase.m.

Also, unrelatedly, added _local_seq to the list sSpecialKeysToRemove in encodeDocumentJSON:."
snej,2012-03-28 20:47:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/35e4284b918a94808a5929b6e40a4d9b11a50d8b,35e4284b918a94808a5929b6e40a4d9b11a50d8b,"Add GET handler for _session

Send back an ""Admin Party""-like response on a GET
request to /_session. This makes CouchApps work
that rely on _session (like Mobile Futon).

Based on vmx's commit to the Android repo:
https://github.com/vmx/TouchDB-Android/commit/7509e3e8b5f0c520d32711a80e02fc16eb55f542"
snej,2012-03-28 20:25:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/608442f84e90805fefb6353e955dc9b230fcf69f,608442f84e90805fefb6353e955dc9b230fcf69f,"implemented TDNoBody content option and use it for GET attachment

When getting an attachment via the REST API, avoid loading the document JSON data.

Based on Marty's commit to TouchDB-Android:
https://github.com/couchbaselabs/TouchDB-Android/commit/6cc2407daca03529118a393c4902789e95512500"
snej,2012-03-28 19:28:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/08a5b73fc948ab7e4f8f7c68382bd979d94d749e,08a5b73fc948ab7e4f8f7c68382bd979d94d749e,"Optimization to -forceInsert:revisionHistory:source:

Don't waste time looking for previous revisions of a document, if the document's ID wasn't even in the database already.
This makes a difference during pull replications."
snej,2012-03-28 18:37:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/34ddf848610981dfde5ab7f7fdd76bc27e77f986,34ddf848610981dfde5ab7f7fdd76bc27e77f986,"Async parsing of continuous _changes feed

TDSocketChangeTracker parses batches of lines on a background thread.
It doesn't read more data from the stream until parsing has finished.
This adds parallelism, and also makes the stream buffering work a lot better because data isn't read until it's ready to be parsed."
snej,2012-03-28 16:41:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8a679332f5eee7a224954e8dae405cba255c443a,8a679332f5eee7a224954e8dae405cba255c443a,"Added TDJSON, to abstract our use of NSJSONSerialization and make it easier to replace

While I was at it, I added the ability to write fragments, and to encode directly to an NSString."
snej,2012-03-28 03:52:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a13f5edfc47a5a28f1735168b626626be40590ca,a13f5edfc47a5a28f1735168b626626be40590ca,"Suppress logging of 404 status reading remote checkpoint doc during replication

This status is expected if it's the first time replicating this pair of databases, so having it show up in the log output makes it look as though there's a problem when there isn't."
snej,2012-03-28 16:42:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/452d589dc97577738ce292ec6e41895509d7f953,452d589dc97577738ce292ec6e41895509d7f953,"Merge pull request #54 from lambmj/master

Guard against failed read in TDSocketChangeTracker."
lambmj,2012-03-28 14:59:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d81a15af6e343fa92e64fa6f49446407a6d5370,8d81a15af6e343fa92e64fa6f49446407a6d5370,Protect against a failed read.
snej,2012-03-27 01:12:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/68a065d667ab54ad5f48fdff810e09794e3c0d26,68a065d667ab54ad5f48fdff810e09794e3c0d26,Updated FMDB
snej,2012-03-27 01:05:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f1e58f4f4249691e1158990e496aeb1e6aa2e610,f1e58f4f4249691e1158990e496aeb1e6aa2e610,Two fixes for recent regressions caught by the unit tests.
snej,2012-03-27 00:05:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8760b4ec3c622c5625bf6c07bb98a8038816cc76,8760b4ec3c622c5625bf6c07bb98a8038816cc76,"Fixes for TDSocketChangeTracker

* Work around apparent CFNetwork bug(?) connecting to hostname ""localhost"" -- substitute ""127.0.0.1"" instead.
* The retry behavior wasn't working because it called -stop before retrying, which told the delegate the tracker failed. Fixed.
* Support the more efficient stream -getBuffer:length: method, even though it doesn't seem to be enabled."
snej,2012-03-26 23:59:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/308dfbbde8e7d8e59cd375541e5fd09837b33b60,308dfbbde8e7d8e59cd375541e5fd09837b33b60,Tweaked replicator logging.
snej,2012-03-26 23:58:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f570b1156d6b4ffbe86caecf994a7d0beef19567,f570b1156d6b4ffbe86caecf994a7d0beef19567,"Enable SQLite ""write-ahead log"" to improve performance

This definitely improves performance of bulk writes, i.e. during the initial pull of a remote database."
snej,2012-03-26 18:17:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c5ed4fcb999b8411def600c30135d884034ff30,7c5ed4fcb999b8411def600c30135d884034ff30,"Further pull optimizations, & improvements to TDSocketChangeTracker

* TDPuller now always uses the continuous-mode _changes feed so it can receive the changes individually. That way it can start fetching revisions before the _changes feed completes, which makes a big difference in the initial pull of a database.
* TDSocketChangeTracker still had the bug where it didn't work on URLs without an explicit port (it wasn't defaulting to port 80). This was fixed a while back in CouchCocoa but not in TouchDB itself.
* Change lines could be spread across two HTTP chunks, and the parser didn't handle that.
* Optimized the chunk parser to reduce the amount of memory copying (this was a hot-spot on iOS devices.)"
snej,2012-03-26 18:07:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6247ae457d09c2702b100cfcd6309905f611acc8,6247ae457d09c2702b100cfcd6309905f611acc8,Memory leak fixes & optimizations
snej,2012-03-24 18:57:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/135b32c5401d2b2a945b71d0fde7d6a8eaf6a867,135b32c5401d2b2a945b71d0fde7d6a8eaf6a867,"Optimize pull by fetching single-revision documents in bulk

If a document to be pulled has only a single revision (revID prefixed ""1-""), it has no revision history, so we don't need to fetch it individually.
Instead we can group these together and get them in one request by POSTing to _all_docs.
This is a major speedup in the initial pull of some large databases with small single-revision documents (like the ""bitcoin"" db)."
snej,2012-03-24 18:54:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/76461b93b99fcab3beb7e04c9688695dbab5c109,76461b93b99fcab3beb7e04c9688695dbab5c109,Fixed: replicator was saving checkpoints too often
snej,2012-03-23 23:48:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/68eadcf67079ddb598d84301756a19071b023285,68eadcf67079ddb598d84301756a19071b023285,"More threading fixes.

* Call NSURLProtocolClient on the URL-loader thread, otherwise responses get dropped sometimes.
* -[TDRouter stop] wasn't thread-safe.
* Don't need to queue a block to start the TDReplicatorManager; put it right in -runServerThread."
snej,2012-03-23 15:57:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5abe7e64d72662f7b548d4c5e8021ae677930c2e,5abe7e64d72662f7b548d4c5e8021ae677930c2e,"Make build work with logging disabled (MY_DISABLE_LOGGING)

Also restored the Info.plist file for the empty app, which had gone missing somehow."
snej,2012-03-22 19:39:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e253920164df91d0ffbb714b96b32912654c03c5,e253920164df91d0ffbb714b96b32912654c03c5,"Redo threading, again (this time without NSOperationQueue)

Changed TDServer to TDDatabaseManager, and made a new TDServer that just manages threading. It runs a background thread and schedules blocks on it. There is no access to the TDDatabaseManager except via the thread-safe async calls.
Tested on Mac OS X 10.7.3 and iOS 5.1."
snej,2012-03-22 15:46:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c7496feddb34579006855e098c9c12b8cf806a1,8c7496feddb34579006855e098c9c12b8cf806a1,"Revert ""Use NSOperationQueue to single-thread access to TDServer/Database.""

This reverts commit d111a9ff03cf30a833916ba5f1d058a0b07532db.

Conflicts:

	Listener/TDHTTPResponse.m
	Source/ChangeTracker/TDChangeTracker.m
	Source/ChangeTracker/TDRemoteRequest.m
	Source/TDURLProtocol.m"
snej,2012-03-21 19:04:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b10c59ed0e91974f9152d3541642bc3b8d718307,b10c59ed0e91974f9152d3541642bc3b8d718307,Little trivial changes
snej,2012-03-21 19:03:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9f89d7d60ee741984cd690aa4d5006927a8271d,f9f89d7d60ee741984cd690aa4d5006927a8271d,"Don't use NSURLConnection delegate-based API on main thread

It hangs on iOS, for some reason.
Fixes #51."
snej,2012-03-21 16:02:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3c70668ef35924c9455038773c6a59bfd34d4f6f,3c70668ef35924c9455038773c6a59bfd34d4f6f,"Fixed an infinite loop indexing views

Regression introduced by c251be31. Occurs if the db contains a design document."
snej,2012-03-20 23:15:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a203f4c297c9c8c96eaf79a6dd216a20a1c94771,a203f4c297c9c8c96eaf79a6dd216a20a1c94771,"Pull all conflicting revisions from remote db during sync

Adds ""?style=all_docs"" option to _changes feed."
snej,2012-03-20 20:52:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4d7f990e955c07fd58a45f934c89011a226e2ce6,4d7f990e955c07fd58a45f934c89011a226e2ce6,"Oops, needed to update MYUtilities as part of the threading changes yesterday"
snej,2012-03-20 20:50:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/349b6ebb79d5b92ad14f2a7b1b970403dc5e7423,349b6ebb79d5b92ad14f2a7b1b970403dc5e7423,"Fixed race conditions & other bugs in the HTTP listener.

I had to use @synchronized. I feel so dirty."
snej,2012-03-20 17:18:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4fc65ee17a1ec1c8552e78cc6ad1131ce7761558,4fc65ee17a1ec1c8552e78cc6ad1131ce7761558,"TDPusher should transmit properties of deleted revisions

...because it's now possible to create a deleted revision that still has properties in it.
This now fixes #50."
snej,2012-03-20 17:01:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/494975535d74e0f417da6e9657a27fc00e4bd3f9,494975535d74e0f417da6e9657a27fc00e4bd3f9,"Bump version to 0.69

and unrelatedly, added a helpful comment in TDPuller.m."
snej,2012-03-20 17:00:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e5fff181fd342e053e464bed61a5d9c3d7bcd054,e5fff181fd342e053e464bed61a5d9c3d7bcd054,"Preserve properties when doc deleted by PUT with '_deleted' property.

Fixes #50."
snej,2012-03-19 22:59:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d111a9ff03cf30a833916ba5f1d058a0b07532db,d111a9ff03cf30a833916ba5f1d058a0b07532db,"Use NSOperationQueue to single-thread access to TDServer/Database.

We no longer run everything on the NSURLConnection thread. Instead the TDServer creates an NSOperationQueue and everything else that talks to the server or its database does so via blocks posted to the queue.
This required changing a bunch of code (URL loading, stream, delayed perform) that depended on runloops to use operation or dispatch queues instead."
snej,2012-03-19 17:16:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c251be311d870243cafe725c016a0094e2402e88,c251be311d870243cafe725c016a0094e2402e88,"Map function should see a _conflicts property if doc is in conflict.

Fixes #49."
snej,2012-03-14 21:22:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f6add30b2623e29660b7720ca8444d08d531d756,f6add30b2623e29660b7720ca8444d08d531d756,"Added block-queue to TDServer to alleviate race conditions

Provides an easy way to run a block on the server's thread.
CouchCocoa now uses this (in a separate commit) when accessing map/reduce/validate functions."
snej,2012-03-14 21:20:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a62f06281823f6018053841fdf12d21a1d12a801,a62f06281823f6018053841fdf12d21a1d12a801,Made TDChangeTracker not warn on EOF of continuous feed.
snej,2012-03-13 01:49:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/74ef8e07ec3ce2f46133c57a77572ff97730b73a,74ef8e07ec3ce2f46133c57a77572ff97730b73a,Fixed 403 error POSTing to _replicator db
snej,2012-03-12 21:23:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e775e5d9dd663fc8704542a3225bce48b3833b9f,e775e5d9dd663fc8704542a3225bce48b3833b9f,"Avoid conflicts saving checkpoints

Replicators now avoid saving a checkpoint while a previous save is still in progress.
Instead they wait till the save finishes, then start the new one.
That way the second save will have the correct revision ID to replace.
Fixes #48."
snej,2012-03-12 21:14:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a463d3f6d3d13a608dfefdedf7a8786abb5908c,2a463d3f6d3d13a608dfefdedf7a8786abb5908c,Updated submodule FMDB
snej,2012-03-12 17:49:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/94986b9f61d8f076c60f783ca0936940239725d8,94986b9f61d8f076c60f783ca0936940239725d8,"Fixed some issues with filtered push

* When a revision is added while a continuous push is active, the filter block was called with nil properties (fixes issue #47).
* In a filtered push the previous revision IDs of a document wouldn't be sent over, so the history got lost."
snej,2012-03-05 23:15:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/27dbf42120ea40b732fbb93b373ac18940e88911,27dbf42120ea40b732fbb93b373ac18940e88911,"Improvements to C API

* Now actually thread-safe.
* Less data copying."
snej,2012-03-05 22:08:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/46185fa9485a398e01b3b21eb482188fc8de17a3,46185fa9485a398e01b3b21eb482188fc8de17a3,"Added basic C API, TDC.h

Not thread-safe yet: can only be called from a single thread."
snej,2012-03-04 21:07:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d16aae7fe27a1e3de075512371d6db9564e18fde,d16aae7fe27a1e3de075512371d6db9564e18fde,Updated MYUtilities submodule.
snej,2012-03-04 21:07:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/67af9c6843b8a1a8b914e342f2d085254e132eb9,67af9c6843b8a1a8b914e342f2d085254e132eb9,"Checked in two patch files that fix issues in GNUstep Base framework.

You'll need to manually apply these patches to your gnustep-base checkout, at least until these fixes get committed to SVN."
snej,2012-03-04 20:58:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/452da72be764ea5c629a650a29fb9545f11dd111,452da72be764ea5c629a650a29fb9545f11dd111,Added setup/build instructions.
snej,2012-03-04 02:04:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/92b9e4ca22ea349636bac269e4f4caf7d02f960c,92b9e4ca22ea349636bac269e4f4caf7d02f960c,"Backed out an NSString workaround, now that the bug in GNUstep is fixed."
snej,2012-03-03 01:18:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3881d67d5f4790f6af6c2f989d4152c37f39932e,3881d67d5f4790f6af6c2f989d4152c37f39932e,More GNUstep compatibility. Unit tests pass now.
snej,2012-02-28 18:22:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/82f4a7f30096f75c12844b6e4b621893ddaf8673,82f4a7f30096f75c12844b6e4b621893ddaf8673,"GNUstep compatibility (work in progress)

* Added a compatibility header TDGNUstep.h to declare stuff that isn't available in that environment.
* Abstracted JSON API in a TDJSON class so we can use a different one where NSJSONSerialization isn't available.
* Use <TouchDB/...> syntax for #imports.
* GNUstep doesn't have CoreFoundation, so work around that.
* GNUstep objects to assigning 'nil' to a non-id pointer lvalue; this usually shows up with those NSError** parameters.
* Commenting out TDReachability for now, since GNUstep doesn't have SystemConfiguration."
snej,2012-02-25 00:07:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ebe96434dc405537eacd901e7677faaade1cd703,ebe96434dc405537eacd901e7677faaade1cd703,"Speculative fix for replication issue with dup attachments

If a doc has two attachments with identical contents, TDMultipartDownloader will think there are fewer attachments than there really are (because it keys them by SHA-1 digest). This isn't a problem except for a sanity-check that was too strict. Loosened it up."
snej,2012-02-22 18:26:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa74adeb806a0512da4a470a6b9750b179fbd917,fa74adeb806a0512da4a470a6b9750b179fbd917,"Removed a bogus build setting in the Mac demo target

It was just causing a harmless link warning."
snej,2012-02-21 23:12:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5838e4e1b8a442db7bc41a156c8782a9f902688f,5838e4e1b8a442db7bc41a156c8782a9f902688f,Fix a leak and appease the static analyzer
snej,2012-02-21 22:51:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b9c4e2afc60ec989af69ae4b34feee6ce930d309,b9c4e2afc60ec989af69ae4b34feee6ce930d309,"Pull deleted revisions after live ones

Optimization for pull replication: prioritize pulling non-deleted revisions. This doesn't make the total time shorter, but it makes visible stuff show up sooner, especially in a case like the first launch of GrocerySync, where there are a lot of older documents that have been deleted already."
snej,2012-02-21 22:47:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/22db43ec3fcbbda3a1fad0ed3eb670ce5e155d80,22db43ec3fcbbda3a1fad0ed3eb670ce5e155d80,"Overhauled checkpointing for pull replications

Added TDSequenceMap to keep track of the latest sequence ID we can checkpoint.
(Should be used for push replications too, but I haven't done that work yet.)"
snej,2012-02-21 01:34:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56af126d46df280a84f55bd45eafcb70ed97ce79,56af126d46df280a84f55bd45eafcb70ed97ce79,"Allow restart of a persistent replication

Deleting the _replicator_state property of a replicator document starts a new replication.
(This is also supported by CouchDB, but undocumented.)
This makes persistent non-continuous replications more useful."
snej,2012-02-21 22:49:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/20d9fadc897d61eda6660cb7578d0238c9374e94,20d9fadc897d61eda6660cb7578d0238c9374e94,"Replication bug fixes

* Persistent replications weren't restarting on app launch (oops).
* Fix exception when persistent replication is deleted.
* Wait longer (5sec) before saving checkpoint to remote server."
snej,2012-02-20 22:28:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8da4d6e2a4d34e6abef4843de82a8d6516dbe857,8da4d6e2a4d34e6abef4843de82a8d6516dbe857,Change iOS demo app to use persistent replications
snej,2012-02-18 02:32:02,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ced96cf744c05893100021a79e95d869668ea96c,ced96cf744c05893100021a79e95d869668ea96c,"Get persistent replications working with REST API

And updated Mac demo to use them."
snej,2012-02-17 00:14:09,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/dd11aa03354f740e599149df3a947aba4d78ca54,dd11aa03354f740e599149df3a947aba4d78ca54,"Persistent replications ('_replicator' database)

Not really tested yet."
snej,2012-02-20 22:31:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ff78e839568bf1c5b0f0cdf23292af16e65774e4,ff78e839568bf1c5b0f0cdf23292af16e65774e4,"Make replicator active/idle status accurate

The 'active' property of TDReplicator wasn't being updated correctly. This in turn broke the status being reported in the _active_tasks REST API."
snej,2012-02-14 21:20:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/59131cdee7c4de324315f6f3fcaa6dd1ec022730,59131cdee7c4de324315f6f3fcaa6dd1ec022730,"Offline support

TDReplicator detects when the remote host becomes reachable/unreachable, usually as a result of the device going on/offline. Replication is stopped when offline and restarted when back online."
snej,2012-02-20 22:27:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f1d62373998d388368b30c23c54fa0e993b8ab9f,f1d62373998d388368b30c23c54fa0e993b8ab9f,Replicator now properly escapes slashes in doc IDs
snej,2012-02-17 22:04:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e0472eecad0f82dc41b9c325e65c414ae67b7f26,e0472eecad0f82dc41b9c325e65c414ae67b7f26,"Fixed missing response for some failing REST requests

Nasty bug fixed: TDRouter would react to some errors (like a request to a nonexistent database, or an invalid document ID) without returning an HTTP response, so the caller's request would fall on the floor and eventually time out.

Also improved the TDRouter unit tests to catch this type of problem."
snej,2012-02-17 00:09:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5a66eaf114412ea3f286f8dbe1720912d6ed7f56,5a66eaf114412ea3f286f8dbe1720912d6ed7f56,"Fix a crash with replication after closing a database

TDDatabase wasn't unregistering itself from replication notifications in its -dealloc method, so after a database has been dealloced any notification from any replication would likely cause an exception or crash."
snej,2012-02-15 18:17:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4079b139adf2c2a15b2328488844bef32ac9e152,4079b139adf2c2a15b2328488844bef32ac9e152,Bump version to 0.61 for alpha2 candidate.
snej,2012-02-15 19:45:51,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1702eaa2f8a0d2816ccfd69924e80e6246607aea,1702eaa2f8a0d2816ccfd69924e80e6246607aea,"Oops, fix crash in the new retry code

It shouldn't be clearing _request, just _connection."
snej,2012-02-15 17:36:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/032e55f2482fa664bc1100e0482b8cc6f993a353,032e55f2482fa664bc1100e0482b8cc6f993a353,Replicator will retry HTTP requests that fail with a 5xx error
snej,2012-02-15 00:18:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fba819cc9015c57259e9550448a26297ca213c84,fba819cc9015c57259e9550448a26297ca213c84,"Work around OS bug in NSJSONSerialization

Fixes issue #44."
snej,2012-02-13 19:31:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec4a7d41aa97001a1b80f70a373c75816c215533,ec4a7d41aa97001a1b80f70a373c75816c215533,"Oops, hadn't updated MYUtilities submodule to correspond to a new commit in that repo

Fixes #43."
snej,2012-02-12 22:05:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70c940074572f29855e84d495b5d1b9ea49e17f1,70c940074572f29855e84d495b5d1b9ea49e17f1,"Make filters work for push replications

TDPusher already had a 'filter' property but it wasn't being set by TDRouter.
While I was at it, I refactored the 'filterName' and 'filterParameters' properties from TDPuller up to TDReplicator, so TDPusher can use them too."
snej,2012-02-11 01:36:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fcecfb95a00d349d30d766544b6fa754322e0d61,fcecfb95a00d349d30d766544b6fa754322e0d61,"TDRouter honors ?atts_since in document GET requests

An optimization to avoid sending unnecessary attachments that the caller already knows about, while being passively pulled from.

Also some small refactoring:
* Moved +parseRevID: from TDDatabase to the more-appropriate TDRevision.
* Created +[TDDatabase stubOutAttachmentsIn:beforeRevPos:] from some former static functions in TDPusher."
snej,2012-02-10 21:38:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/75aabbf462688e645925f7262fad96f1c9ee5f72,75aabbf462688e645925f7262fad96f1c9ee5f72,"Better handling of ""possible_ancestors"" in replication

* Implementation of _revs_diff API now returns the possible_ancestors arrays.
* Pull replication sends better list of revs in ""atts_since"" key."
snej,2012-02-10 07:19:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1f0575fbdff48d18589e85805efc3e204c90add6,1f0575fbdff48d18589e85805efc3e204c90add6,"iOS on-device fixes

* Fixed iOS demo target settings so it'll run on a device without getting entitlements errors.
* Fixed paths to temp files generated by unit tests since /tmp isn't accessible on a real iOS device."
snej,2012-02-10 02:06:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e432544c49968060850613cf634b9b93f18fa561,e432544c49968060850613cf634b9b93f18fa561,"Added Apache license comments.

(No code changes.)"
snej,2012-02-10 00:59:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1079c7ba54561214a9a6503d06789540cb8463c9,1079c7ba54561214a9a6503d06789540cb8463c9,"Added test TDPuller_FromCouchApp

This is for testing issue #39. I can't reproduce it myself."
snej,2012-02-10 00:55:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a57b1b743bbd41a469d2112f4ea6342497ce999c,a57b1b743bbd41a469d2112f4ea6342497ce999c,"Create fewer temp directories during attachment download

Was creating a new temp dir per attachment; now just creates one per database. Still not sure why these dirs are being left behind, but I've asked about it on cocoa-dev."
snej,2012-02-10 00:54:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ecf3e9b9adadc5a1e382676006f4b496a4bafb07,ecf3e9b9adadc5a1e382676006f4b496a4bafb07,"Fix some compile errors

- Some implicit 64-to-32-bit conversions in the 64-bit build
- Missing call to [super dealloc], reported by newer version of Clang compiler."
snej,2012-02-10 00:52:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10d64923fc5f20717005e5106286bebcc0f1c6f0,10d64923fc5f20717005e5106286bebcc0f1c6f0,"Allow GET of attachment whose name contains ""/""s

...without having to escape the '/' characters, that is.
This fixes #40."
snej,2012-02-09 19:09:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/07d643d4934f78a683ae7a08c4414b46e77d6fed,07d643d4934f78a683ae7a08c4414b46e77d6fed,"Merge pull request #38 from fcandalija/master

I think this fixes #37."
snej,2012-02-07 23:12:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9de9d391619f46aa0e851518610f8871a92feea5,9de9d391619f46aa0e851518610f8871a92feea5,"Fixed winning-revision rule for conflicts

If there are conflicting revisions the one with the greater revid ""wins"" and is returned by default.
The problem is that CouchDB has a specific definition of ""greater"" for revIDs -- basically, the numeric prefix is parsed as a number, not as ASCII. This only makes a difference for revisions with generation numbers greater than 9.
For compatibility, I've added a custom collation for rebids that matches CouchDB. This fixes #10."
snej,2012-02-07 19:43:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a18c573021080d56925c35333940c4c2cf3fd894,a18c573021080d56925c35333940c4c2cf3fd894,"Make TDPusher only upload attachments that have changed.

FIxes #36."
snej,2012-02-06 23:53:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/445a6057e9676682574351585fd2bf8de7453c32,445a6057e9676682574351585fd2bf8de7453c32,"Bump version, fix unit-test issue in iOS Demo app

* Changed version to 0.5.
* Unit tests were broken in the iOS Demo app because Test_BlobStore.m needed to be added to the app target itself."
snej,2012-02-06 23:17:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d1721263fa4b68e441872aa38e56192f7a3861e,3d1721263fa4b68e441872aa38e56192f7a3861e,"Fixed the URL of the MYUtilities submodule.

If you have an existing checkout of TouchDB, you may have to change the value of the [submodule ""vendor/MYUtilities""] config property, e.g. by editing .git/config, for this change to take effect."
snej,2012-02-06 22:28:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2740568ee29d2a650f2684ab9ee452d931abe65e,2740568ee29d2a650f2684ab9ee452d931abe65e,Rewrote multipart uploader to use approved Apple API.
snej,2012-02-06 04:39:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e686104f7876211ee8ccf7b43a0bb57269bfd622,e686104f7876211ee8ccf7b43a0bb57269bfd622,"Fixed a sign-comparison warning

Fixes #35"
snej,2012-02-03 21:50:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9892dc4f76fbc1dd8a408ba43e7a56332b8f3715,9892dc4f76fbc1dd8a408ba43e7a56332b8f3715,"Streaming multipart attachment uploads

TDPusher now sends revisions with large attachments as separate PUTs using MIME multipart encoding. This makes the data size smaller (no base64) and saves memory by allowing the attachment to be streamed directly from disk without buffering it all in RAM."
snej,2012-02-03 00:45:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8e6cf50eb7e132e91b7c2e973c4355760b31174d,8e6cf50eb7e132e91b7c2e973c4355760b31174d,"Oops, fixed a wrong URL in the README update."
snej,2012-02-03 00:18:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8bfb5eb3eaa106ce1cd5564701b601dfa91734af,8bfb5eb3eaa106ce1cd5564701b601dfa91734af,Updated the README.
snej,2012-02-02 22:48:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2de05ae4686a9818b9d87c087ee24ee9283c9c60,2de05ae4686a9818b9d87c087ee24ee9283c9c60,"Support for encoded (gzipped) attachments

This includes a schema change. Existing databases will be upgraded.
iOS apps will need to link against libz.dylib."
snej,2012-01-31 01:43:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/264d7f923d95208ef0e4820526332bc1cecc4bfb,264d7f923d95208ef0e4820526332bc1cecc4bfb,"Streaming attachment downloads during replication

Optimized downloading large attachments during a pull.
The document is fetched in multipart format, in which attachments are sent as raw MIME bodies without base64 encoding.
Each attachment is streamed directly to disk without being buffered in memory."
snej,2012-02-02 17:58:12,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/54bb3dcd2a64af2c571e6f0760f99cdc8cb1caf6,54bb3dcd2a64af2c571e6f0760f99cdc8cb1caf6,"Avoid copying JSON data from SQLite

i.e. change -dataForColumnIndex: to -dataNoCopyForColumnIndex: where possible."
snej,2012-01-31 22:33:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4b0bcc02e2e597e98aa42371c44877cc27ba334d,4b0bcc02e2e597e98aa42371c44877cc27ba334d,"Fixed regression pushing when creating database

The push would stop prematurely after creating the db.
This broke the TDPusher unit test."
snej,2012-01-30 20:59:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7ee01ead3ecd6a04258dafc6c8227818e3a7e692,7ee01ead3ecd6a04258dafc6c8227818e3a7e692,"Fix a problem saving replication state

If I don't have a local record of having synced with a remote db, I need to fetch its checkpoint document anyway, because I might have synced with it in the past (and stored a checkpoint) but later been rolled back to an older backup or something. (Or maybe crashed before  could save the state locally.) Fetching the checkpoint is important in this case not for the sequence ID it contains, but for the document's _rev ID, which I need in order to save an updated version."
snej,2012-01-30 20:57:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bb3de69c450f4eca5cc5b78c99844af5b7d8e204,bb3de69c450f4eca5cc5b78c99844af5b7d8e204,"Update iOS demo for recent CouchReplication API change

Somehow didn't catch this one yesterday."
snej,2012-01-30 03:45:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3bb81b6f4013d189810a18e418f9cc4aad9a974b,3bb81b6f4013d189810a18e418f9cc4aad9a974b,"Converted some perform-after-delays to use MYAfterDelay.

Using new MYBlockUtils from MYUtilities."
snej,2012-01-30 03:39:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/80ed0306ad5e08fbc6655f845985c0f450314309,80ed0306ad5e08fbc6655f845985c0f450314309,Mac demo: Compatibility with CouchReplication API change
snej,2012-01-28 00:26:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fc8567947e665927cfc6c5e82481f6731c1c5982,fc8567947e665927cfc6c5e82481f6731c1c5982,"Better error handling for replication

* Make sure TDReplicator.error always gets set when errors occur.
* Keep failed replications in the _active_tasks list for 10 seconds after they stop so clients have time to see them and read the error.
* Mac demo has UI to display replication errors."
snej,2012-01-26 23:10:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9abe2030b64cb60815e563d80376c751dcc30bb5,9abe2030b64cb60815e563d80376c751dcc30bb5,Better exception reporting in TDPuller.
snej,2012-01-26 23:09:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d0bf771cedc88a473dcdf7293a8d23715e1daabc,d0bf771cedc88a473dcdf7293a8d23715e1daabc,"Fixed -[TDDatabase createEmptyDatabase:] regression, which broke unit tests

I keep forgetting that deleting a file is an error if the file doesn't exist..."
snej,2012-01-26 20:26:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6a7f0ca69474aa0f31f4246edcc2d912b97698a,b6a7f0ca69474aa0f31f4246edcc2d912b97698a,Build issue: Listener target should include Test.m
snej,2012-01-26 20:14:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2a19d15de0b9af3eb75f00f93cec038f0e284b6b,2a19d15de0b9af3eb75f00f93cec038f0e284b6b,"Bug-fix to TDPusher (ignoring error status)

Another place I was misinterpreting a TDStatus return as a BOOL."
snej,2012-01-26 20:13:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/472667284eb5b6682a4ff90e126d52a67daf6d55,472667284eb5b6682a4ff90e126d52a67daf6d55,MYUtilities is now a submodule with its own GitHub repo.
snej,2012-01-23 19:46:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44cf524c97f39526979fd1c3df7e9bf6545927aa,44cf524c97f39526979fd1c3df7e9bf6545927aa,"Added API to install a canned database.

-[TDDatabase replaceWithDatabaseFile:withAttachments:error:].
No unit tests for this yet."
snej,2012-01-22 20:31:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/bc1af6f799a458a2df8aba982abd38cc64c0a55b,bc1af6f799a458a2df8aba982abd38cc64c0a55b,"Make non-debug build of TouchServ work

It was using symbols like Log and Warn that are defined in TouchDB but not exported in release builds.
Put in some #ifdefs so in release builds TouchServ uses regular NSLog instead."
snej,2012-01-22 20:30:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b7ebb5d785dd62bcf2ec650160482063a8f1ef10,b7ebb5d785dd62bcf2ec650160482063a8f1ef10,"Doc validation didn't occur in many cases (oops)

Validation wasn't called for POSTs or DELETEs, and in some cases for PUTs its results were ignored.
Added unit tests for all these cases so this doesn't regress!"
snej,2012-01-21 05:33:42,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/79e00702669c4ad9d90e96c297f8d1b2adaf6193,79e00702669c4ad9d90e96c297f8d1b2adaf6193,"Proper handling of escape sequences in JSON collation

Turns out NSJSONSerialization _will_ output strings with \u escapes, though only for control characters (non-ASCII characters are output as UTF-8 literals.) It also outputs \t for tabs."
snej,2012-01-20 20:27:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2c2fe4b9489b8a2223f2181186d2b114552fb0c8,2c2fe4b9489b8a2223f2181186d2b114552fb0c8,Bumped version to 0.4 (alpha candidate).
snej,2012-01-20 19:26:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/11532df7c123c0fbcf19102edbae0bbc2f7beee3,11532df7c123c0fbcf19102edbae0bbc2f7beee3,"Some bug fixes

* _temp_view was broken because it didn't update the view's index before querying it.
* HTTP error responses weren't including the JSON body ({error: ...}).
* Fixed memory leaks in TDRouter (leaking TDDatabases!) and TDDatabase (leaking name)."
snej,2012-01-20 01:00:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f24a97412aa79b9b9bb6c41337e209e606039c44,f24a97412aa79b9b9bb6c41337e209e606039c44,"Rest of the filtered-replication work

* Fixed a few issues with the filtered replication implementation.
* Hooked it up to the REST API."
chriskau,2012-01-10 23:02:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21f6cf7874dbde2416b997a29ea95c28c5e37f4f,21f6cf7874dbde2416b997a29ea95c28c5e37f4f,Added support for filtered replication (push)
snej,2012-01-19 23:18:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6f127b9c2ef2fa7d659aa369ecb956eff8d80a09,6f127b9c2ef2fa7d659aa369ecb956eff8d80a09,"Fixed release link errors & memory leaks.

* Fixed link errors in release builds of the listener and Mac demo app.
* Fixed a memory leak in TDReplicator.
* Fixed a memory leak in the HTTP listener."
snej,2012-01-19 22:22:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a403f25cfb326a962d55cf5714ae80f5516e6772,a403f25cfb326a962d55cf5714ae80f5516e6772,Logging tweaks
snej,2012-01-19 22:21:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d3b4f2bcf758e99bb74dfa219219a698978982b6,d3b4f2bcf758e99bb74dfa219219a698978982b6,"Make replicator tests work against TouchServ

The returned sequence ID isn't exactly the same from TouchServ as it is from CouchDB."
snej,2012-01-19 22:19:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce3fa1decae2e29a4dbb8efcedc9699a6cd019bc,ce3fa1decae2e29a4dbb8efcedc9699a6cd019bc,"Updated build-fat-iOS-library script

Same version as now in CouchCocoa (fixes problem if two projects in the same workspace both use the script)"
snej,2012-01-19 21:34:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7633394f9594bd9bbcbc894964e2a4ee9db8482e,7633394f9594bd9bbcbc894964e2a4ee9db8482e,"Clean up views/replicators when a TDDatabase is closed

* Views & replicators shouldn't retain the database; that creates a ref cycle.
* -[TDDatabase close] notifies views and replicators so they can nil out their database pointer (and do other cleanup, like saving replicator state)."
snej,2012-01-19 21:32:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8961e124068b9d0ff11ae17e616bc372471d3f12,8961e124068b9d0ff11ae17e616bc372471d3f12,"Implemented createTarget option on TDPusher.

Also improved the replicator tests. They now first push to a local CouchDB, then pull from that to a different TouchDB. This avoids dependencies on external services and hand-created test databases."
snej,2012-01-19 18:10:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a1d30625850d9435e186edb0866507e25499eebe,a1d30625850d9435e186edb0866507e25499eebe,"Better Etag response for views when ?include_docs is enabled

Response body depends on doc contents as well as view index, so use the database's last-sequence as the eTag instead of the view's lastSequenceIndexed.
(This is effectively the same issue as COUCHDB-1206 which I filed last year...)"
snej,2012-01-19 19:07:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ce3ee3327cdbbc13d0c8a92cbb6db35893b3b31,2ce3ee3327cdbbc13d0c8a92cbb6db35893b3b31,"TouchServ tweaks

* Enable some logging by default.
* Store databases in a better location."
snej,2012-01-19 17:38:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/08ff0873c38ac8009b69cd07ecb4d768bf8b9d93,08ff0873c38ac8009b69cd07ecb4d768bf8b9d93,"Oops, broke TDPuller in my last commit to it :("
snej,2012-01-19 01:21:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/038ef086daeddc411aecefd399813d09bec861a4,038ef086daeddc411aecefd399813d09bec861a4,"Conditional GET support for view queries

And made view queries a bit faster by speeding up -updateIndex in the case where there's nothing to do.
Also worth noting that -[TDView queryWithOptions:] now does NOT update the index."
snej,2012-01-18 20:32:37,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cf85e05397b155671f9e63b5fad62e0f59929a55,cf85e05397b155671f9e63b5fad62e0f59929a55,Fixed a minor mistake in a test case. (Thanks Marty!)
snej,2012-01-18 20:19:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0b50cda426bae1545c6ff41736268a7e9c3ab256,0b50cda426bae1545c6ff41736268a7e9c3ab256,"Header cleanup

Added matching headers for the TDDatabase categories."
snej,2012-01-18 19:44:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5ee6fefc6d751b4d0fff232f02337eedf2406410,5ee6fefc6d751b4d0fff232f02337eedf2406410,"Fixed attachment error handling bug

Marty noticed that -[TDDatabase insertAttachment:...] returns BOOL, but in one place its return value is interpreted as a TDStatus. Since both 0 and 1 are success values for TDStatus, that means failure would be ignored.
I decided that for consistency it's best to change the method to return TDStatus.
I also moved the method declaration out of TDDatabase.h to TDInternal.h since it's only used internally by other attachment handling code and unit tests."
snej,2012-01-18 01:50:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6313c81fb0e9a45f7fd814ab3d992aa0f91e1de7,6313c81fb0e9a45f7fd814ab3d992aa0f91e1de7,"Made Mac frameworks' locations more flexible

Using @rpath in the frameworks' install-names, which allows them to be used whether or not they're embedded inside an app.
This means the 'touchserv' command-line tool can now run outside of Xcode.
Mac apps will need to update their target settings: In the ""Linker"" section, edit ""Runpath Search Paths"" and add the path ""@loader_path/../Frameworks""."
snej,2012-01-17 21:54:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1cfeaad861dd0a986751fe7af1860e4c7c9b1e80,1cfeaad861dd0a986751fe7af1860e4c7c9b1e80,"Support for BigCouch (Cloudant) replication

TDPuller and TDChangeTracker now support non-numeric sequence IDs.
Fixes #26."
snej,2012-01-17 01:52:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3280fb52f36748929d666723858b333c12457fb2,3280fb52f36748929d666723858b333c12457fb2,Fix new compiler warnings from Xcode 4.3
snej,2012-01-17 01:32:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a3d0b93e6ae8f26b577dbf6e5bc0b27f65316065,a3d0b93e6ae8f26b577dbf6e5bc0b27f65316065,"Added TouchServ target

This is a very basic command-line HTTP server that listens on port 59840."
snej,2012-01-15 20:29:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/79f0fd52a2c64ffc851e90e6bca7ee6684878910,79f0fd52a2c64ffc851e90e6bca7ee6684878910,"Added .error property to TDReplicator and TDChangeTracker.

This isn't available through the REST API yet, though."
snej,2012-01-14 02:58:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/47e70e12ac2fbb899fe828a308526eb62d8a5f4a,47e70e12ac2fbb899fe828a308526eb62d8a5f4a,"Replicator now stores state in _local doc in remote db

Like CouchDB, the last sequence number processed is now stored in the remote db as well as locally.
That way, if the remote db is restored from a backup or deleted and recreated, we can tell that it's changed and start the sync from the beginning."
snej,2012-01-13 20:07:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/45f24caafef5e6c08c39831a4485c844c6a9b72b,45f24caafef5e6c08c39831a4485c844c6a9b72b,"Added persistent UUID to TDDatabase

This will be used by the replicator for tracking state."
snej,2012-01-13 05:51:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a8d3e16a2be9d437b971c8b23e676c92e64f9b89,a8d3e16a2be9d437b971c8b23e676c92e64f9b89,"Listener: support for _changes in continuous/longpoll modes

Fixed #28: TDHTTPResponse can now send the response asynchronously, which is required for the _changes modes that wait to send data.

Also fixed a glitch in the continuous-mode implementation, where the lines were separated by a garbage char instead of a newline."
snej,2012-01-13 05:47:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/00af5f4ca9497ba462aadc34254f4408ee218cdd,00af5f4ca9497ba462aadc34254f4408ee218cdd,"Fixed 2 crashers in TDPusher (only when SyncVerbose logging on)

Recent regression, from when I added more logging earlier today :("
snej,2012-01-12 19:50:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3674722576045e55c5612999493375fe2a5666f3,3674722576045e55c5612999493375fe2a5666f3,"Added ""One-Shot Sync"" menu command to Mac demo

Also added more SyncVerbose logging to the replicator code."
snej,2012-01-12 19:46:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c8a5775b9c03917c60704d2ca3370837593fa06,8c8a5775b9c03917c60704d2ca3370837593fa06,"Fixed SQL error re-opening a database

Schema upgrade from when I added 'localdocs' table wasn't working quite right :("
snej,2012-01-11 18:24:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4119154272dfbdca9a9ee5006e61683d2cb2002b,4119154272dfbdca9a9ee5006e61683d2cb2002b,Fixed a memory leak in _revs_diff implementation
snej,2012-01-11 18:15:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/36f8181cabe5882f9843f99fd799b38635dd0293,36f8181cabe5882f9843f99fd799b38635dd0293,"Better implementation of local docs

Now using a separate 'localdocs' table, to keep them from interfering at all with regular docs."
snej,2012-01-11 01:33:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/700e9392f81fc6165e7cda03aae077321dc88159,700e9392f81fc6165e7cda03aae077321dc88159,Implemented _revs_diff API (used in syncing)
snej,2012-01-11 00:06:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f606afcff4452e16eb73b3b66be361963965a946,f606afcff4452e16eb73b3b66be361963965a946,Support multipart response for document GET with ?open_revs
snej,2012-01-10 22:19:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e58a60e7183fadf0d841da565cd33ded2c3d63f0,e58a60e7183fadf0d841da565cd33ded2c3d63f0,Implemented ?open_revs option of document GET
snej,2012-01-10 20:16:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/409330ad8d011d69889927a6003264cf1ac1aa37,409330ad8d011d69889927a6003264cf1ac1aa37,"Support for _local docs

* ""_local/"" is a valid document ID prefix.
* Local docs don't appear in the _changes feed.
* Fixed an incorrect value of last_seq in the response from _changes in show-conflicts mode.
* Fixed a race condition defining a view immediately after creating a database."
snej,2012-01-10 19:15:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/89385c12f202ef01167d5f0f4516335553b73169,89385c12f202ef01167d5f0f4516335553b73169,Fixed compile warning in 64-bit Mac build
pegli,2012-01-10 17:25:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1a15e8c4ebd16ef3449f4dfb836fc64a9ca00433,1a15e8c4ebd16ef3449f4dfb836fc64a9ca00433,added iOS library target for TouchDBListner
snej,2012-01-10 18:56:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7e093a497bc56cbb9dd1798f913574a91b7f01de,7e093a497bc56cbb9dd1798f913574a91b7f01de,"Two little fixes to _all_dbs

* In _all_dbs response, ""/""s in database names showed up as "":""s.
* _all_dbs response didn't get pretty-printed in debug builds."
snej,2012-01-10 18:02:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2bc94da2761063bc0deca25528ff44769cc39ae9,2bc94da2761063bc0deca25528ff44769cc39ae9,"Project cleanup, and bumped version to 0.3"
snej,2012-01-10 01:38:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c79d5535e8976ffaf4c8c32d9c576d6c2dc85427,c79d5535e8976ffaf4c8c32d9c576d6c2dc85427,"Allow TDViewCompiler to run on view fns in design docs

It used to only be called for temporary views. Now if there's a view that's defined in a design doc, but there's no TDView for it, or the TDView has no map block yet, invoke the compiler.

With this, and defining one JS function's block in the demo app, we now pass the view_collation_raw.js unit test :)"
snej,2012-01-10 00:20:56,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9b0f9186cca6a78e049d4a90550c79d9fd988e60,9b0f9186cca6a78e049d4a90550c79d9fd988e60,"Proper Unicode collation

Unfortunately this is slower than the earlier implementation as it requires converting strings to CFStrings.
The earlier version is still available as a different mode (selected by passing a context value to the collator when defining it.)
TDView allows its collation to be changed."
snej,2012-01-10 00:18:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0168ac2ad2e16b6a1fb8237356d83b4977a80e7e,0168ac2ad2e16b6a1fb8237356d83b4977a80e7e,Support ?key= query param for view-like URLs
pegli,2012-01-09 18:20:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1fa16fc203a268c3bf2024df16b99a15c15111c3,1fa16fc203a268c3bf2024df16b99a15c15111c3,Fixed problem with creating a database through the HTTP listener
snej,2012-01-09 19:15:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aeb415e3a1d75bf1c10fcaacea3b2380e17d0165,aeb415e3a1d75bf1c10fcaacea3b2380e17d0165,"Fixed issues with Mac framework packaging

* Some headers weren't included.
* Headers should #import each other using the full <TouchDB/XXX.h> form.
* Install path didn't work for embedding the framework in an app."
snej,2012-01-09 00:02:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/62caeab27be489d8320fcd8ceba96fa86366e52c,62caeab27be489d8320fcd8ceba96fa86366e52c,"Added explicit assertion message about -ObjC linker flag

Detect a common app build problem: TDRouter now checks whether its handlers have been dead-stripped and if so triggers an assertion failure warning about lack of -ObjC linker flag."
snej,2012-01-08 20:52:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/19014f025758c1be1db50d3fda9e0c6b4c5b2ad6,19014f025758c1be1db50d3fda9e0c6b4c5b2ad6,"Support for getting specific keys from a view

Added support for issuing a POST request to a view and adding the structure {""keys"": [""key1"", ""key2"", ...]} to the body, as per http://wiki.apache.org/couchdb/HTTP_view_API

Original patch by alexanderedge: https://github.com/couchbaselabs/TouchDB-iOS/pull/21
Cleanup & unit test by snej."
snej,2012-01-07 01:49:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/03f9a66551e16c986071cb57dd561dca1cc03f7a,03f9a66551e16c986071cb57dd561dca1cc03f7a,"Fixed nasty bug causing TDPusher to push revs with no _id

Underlying bug: When TDDatabase added a new revision it would post a notification whose TDRevision info object often had an incomplete body (no _id or _rev property). Fixed this to clear the body completely before posting the notification.

The way this caused trouble is that TDPusher would get notified, then when it sent this revision to the remote db it would include its body dictionary which had no _id property. CouchDB would actually accept this and create a document with an empty string for an _id! Must be a CouchDB bug.

Then when TDPuller got the notification of this bogus doc from the _changes feed, it would also mess up because its _id is empty, leading it to create a bogus URL to fetch the revision from..."
snej,2012-01-07 00:44:14,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a345ff13c2b660cb7bd7b5d4d91a7b4844c316d1,a345ff13c2b660cb7bd7b5d4d91a7b4844c316d1,"Fixed: demo apps weren't tracking sync progress

There were leftover calls to set server.activityPollInterval=0 that shouldn't be there anymore."
snej,2012-01-06 22:36:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0928fe1e0672540307cb85a037f4c73cc03e1140,0928fe1e0672540307cb85a037f4c73cc03e1140,"Support for direct PUT and DELETE of attachments

Now passes most of the attachments.js test suite."
snej,2012-01-06 22:34:26,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d88fb60d2a2210b41ea771652539af335b37729d,d88fb60d2a2210b41ea771652539af335b37729d,"Added disk_size property to GET response for a database

And added underlying TDDatabase.totalDataSize property."
snej,2012-01-06 07:46:00,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ea0a5349e44ea42ef9d776b1d52d666cd2e28465,ea0a5349e44ea42ef9d776b1d52d666cd2e28465,"PUT's previous revision ID can come from If-Match header.

Now passes ""etags_head.js"" tests.

In other news, fixed a potential crash querying a view with grouping enabled but no reduce block defined."
snej,2012-01-06 02:05:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/10ceb2eae58de6915465e9fd488570de56948688,10ceb2eae58de6915465e9fd488570de56948688,"_bulk_docs now supports new_edits=false

TouchDB now passes the conflicts.js unit test."
snej,2012-01-06 01:37:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/666dbcaecf6cfd99c084bd55f676af8aa16b95ce,666dbcaecf6cfd99c084bd55f676af8aa16b95ce,"Improvements to pass CouchDB bulk_docs.js unit test

* Support _bulk_docs.
* Support ?revs=true mode when getting documents.
* -[TDDatabase putRevision:...] now has a mode where it is allowed to create conflicts (needed for all_or_nothing mode of _bulk_docs.)
* Better defense against inserting invalid doc IDs (empty or _-prefixed).
* Recognize design-document URL when encoded as _design%2F..."
snej,2012-01-05 21:28:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2ae2a10337cbc4be7c653bcb872054a654dfb023,2ae2a10337cbc4be7c653bcb872054a654dfb023,Split up TDRouter.m. No code changes.
snej,2012-01-05 19:47:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9e846a80885ec3aa1840763b9294661f65b2d88a,9e846a80885ec3aa1840763b9294661f65b2d88a,"Use CouchDesignDocument(Embedded) API in demos

Can now register TouchDB map/reduce/validation blocks using the
same CouchCocoa API as for Couchbase Mobile 2."
snej,2012-01-05 00:52:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8c6c5fd5063234a6f40f449ca52ff4f5a5b04865,8c6c5fd5063234a6f40f449ca52ff4f5a5b04865,"Made TDPuller test use a public database

It used to access a database on my local CouchDB server, meaning it would fail if run on any computer other than mine :(
Fixes #19."
snej,2012-01-04 23:52:10,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a5f2231c7ce9a043a25564a5421cc18c7be3af90,a5f2231c7ce9a043a25564a5421cc18c7be3af90,"Support for getting more optional metadata in documents

Can now ask for conflicts, revs_info, local_seq. These work with regular GET, and also _all_docs and _changes when they use include_docs.
TouchDB now passes the CouchDB ""all_docs.js"" test suite."
snej,2012-01-04 22:35:19,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4e0d3944da541f710198f51dc094b20b5b73094a,4e0d3944da541f710198f51dc094b20b5b73094a,"REST _changes now supports style=all_docs, to show conflicting revision IDs."
snej,2012-01-04 18:08:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/4c866484e0bea249ac19412a8cb088a3908d63b5,4c866484e0bea249ac19412a8cb088a3908d63b5,"Partial compatibility with CouchDB 'all_docs.js' test suite

* POSTing a list of docIDs to _all_docs.
* ""?new_edits=false"" query option to PUTting a document.
* Unescape %-escapes in query parameters.
* Fixes for ?include_docs option of _changes.
* _changes now correctly skips losing conflict revisions."
snej,2012-01-04 21:45:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cd8b8ddbf42326a923a45e720433b3ace649d5f5,cd8b8ddbf42326a923a45e720433b3ace649d5f5,"Fixed a bogus warning when querying a view with group_level but not group.

Also added a new unit case for grouping when the keys are strings not arrays."
snej,2012-01-03 19:02:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e23509cc8f0f230b96ebc4162ec84e7229a40e1b,e23509cc8f0f230b96ebc4162ec84e7229a40e1b,"Now passes CouchDB ""basics.js"" tests

Lots and lots of little fixes and compatibility tweaks.
I did have to comment out a few lines in the tests that required exact error message strings."
snej,2012-01-02 21:31:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/aac1fa2fcab2c95aac15076f32555c0a01dd0d5c,aac1fa2fcab2c95aac15076f32555c0a01dd0d5c,"Make reduce/group options more compatible with CouchDB

Specifying groupLevel > 0 now implicitly sets group.
Specifying groupLevel>0 or group now implicitly sets reduce."
snej,2012-01-02 20:31:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/21bf1dadb1619d1e2e9e16d96f5e8b56a8061379,21bf1dadb1619d1e2e9e16d96f5e8b56a8061379,"Some listener fixes

Make release build work, fix some static analyzer warnings, etc."
snej,2012-01-02 19:28:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/40e53acdad9ad4486bef8c3ccc3dc810c1d1d130,40e53acdad9ad4486bef8c3ccc3dc810c1d1d130,"Added support for getting filtered _changes feed, in TDRouter."
snej,2012-01-02 19:07:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/06a899b3aa8a8b32637b400db79078ed01545831,06a899b3aa8a8b32637b400db79078ed01545831,Minor fix to Mac demo's nib.
snej,2012-01-01 22:37:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/e6b78ebd875c52307cdeefd58af99ed32aa4396c,e6b78ebd875c52307cdeefd58af99ed32aa4396c,"Add some support for filters

* -changesSinceSequence: now takes an optional filter block. This is not yet hooked up to the _changes feed implementation.
* TDPusher also takes a filter block to filter what's pushed.
* TDPuller takes a filter function _name_ that's sent to the remote database's _changes feed. (Parameters aren't supported yet.)"
snej,2011-12-31 23:11:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/95c7e30cedc0e35d996e08d7660b85205aa9c5a4,95c7e30cedc0e35d996e08d7660b85205aa9c5a4,"Router overhaul. Now supports arbitrary design docs

You can now create and manipulate design documents like ordinary documents.
You can query a view from any design document too; the view name that will be looked up in the TDDatabase is of the form ""designdocname/viewname""."
snej,2011-12-30 01:38:38,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7725b257bb3bb80502b7826f0d6709bf1bc4c3f0,7725b257bb3bb80502b7826f0d6709bf1bc4c3f0,Implemented reduce and grouping of views.
snej,2011-12-29 22:39:46,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ec35a7ab83f712d349f03f4f069d74a4c2074719,ec35a7ab83f712d349f03f4f069d74a4c2074719,"Added optional HTTP server

There's a new target that builds a ""TouchDBListener"" framework.
This framework implements a basic HTTP server on top of TouchDB.
The Mac demo app uses it and starts up the server on port 8888 at launch.

Easter egg: If you add a parameter ""pretty=true"" to the URLs given to this server, it'll pretty-print the JSON response. I also made it always do this in debug builds."
snej,2011-12-29 17:51:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ce5ddd82ecab2098d2de1490bc55dd3f51380458,ce5ddd82ecab2098d2de1490bc55dd3f51380458,"Support getting attachment data inline with a document

i.e. GET /db/docid?attachments=true"
snej,2011-12-29 16:53:05,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ccb04b6f339b18761c813568e2018233a1215ae6,ccb04b6f339b18761c813568e2018233a1215ae6,"Use SQLite savepoints to support nested transactions

TDDatabase can now abort/rollback a transaction even if it's nested inside another one.
Also simplified the transaction API a bit."
snej,2011-12-29 00:03:06,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f77426d9959d7c725d30e1c9227c4bd74f7317c2,f77426d9959d7c725d30e1c9227c4bd74f7317c2,"Implemented startKey and endKey in view queries and _all_docs.

Yes, it works even in descending mode. Even with inclusiveEnd=false."
snej,2011-12-28 21:38:01,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7c820841e7fc3e0ef37640fa5d4c0ce56fecaa55,7c820841e7fc3e0ef37640fa5d4c0ce56fecaa55,Speculative fix for a compile error with Xcode 4.3
snej,2011-12-28 21:36:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/056d683aefec7c307481bfd160e43ef4ad98a26d,056d683aefec7c307481bfd160e43ef4ad98a26d,"Use ARC in iOS demo app

as a way of flushing out obvious problems using TouchDB from ARC based apps."
snej,2011-12-28 19:09:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b5f897dde5e9db920bb44753302ee98763912caf,b5f897dde5e9db920bb44753302ee98763912caf,Updated README
snej,2011-12-28 07:49:18,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0059632882a26bbf30a16cb9549c44e6bf9325f6,0059632882a26bbf30a16cb9549c44e6bf9325f6,Eliminate use of 'goto' (use @finally instead)
snej,2011-12-27 23:35:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/987e8385032b431a0c06a7174e5a773b2ac6b63e,987e8385032b431a0c06a7174e5a773b2ac6b63e,"Code cleanup: splitting up TDDatabase.m

Broke out two more categories: Insertion and Replication.
Just to keep the file size down; no code changes."
snej,2011-12-27 23:03:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1be87033343332f75ee0d9b137c30686a4306ac9,1be87033343332f75ee0d9b137c30686a4306ac9,"Use -longLongForQuery:, to shorten some code."
snej,2011-12-27 22:00:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/44d2903b4b13887592da168489e9aad88a96038f,44d2903b4b13887592da168489e9aad88a96038f,"Miscellaneous fixes

* Factored out repeated code that reconstitutes revision bodies, to make sure all the virtual properties like _id get added consistently.
* Add _deleted key to returned bodies of deleted revisions.
* A PUT of a document containing a _deleted property deletes it.
* Keep multiple conflicting revisions from showing up in _all_docs and view results.
* Optimized and fixed bugs in the code that removes obsolete emitted rows when updating a view."
snej,2011-12-27 01:09:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/da73a203224960299ae4024e52bc2effd1b1794f,da73a203224960299ae4024e52bc2effd1b1794f,"Checkpoint: More attachment-pulling work

* Correctly copy unchanged attachment row when pulling in a revision whose parent isn't locally known.
* Added attachments.revpos column."
snej,2011-12-26 17:47:41,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7303d01d715cdce7585877e15a80f09a85d2d870,7303d01d715cdce7585877e15a80f09a85d2d870,Checkpoint; some refactoring of attachment-adding code
snej,2011-12-26 17:16:54,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1bc0ada4ac62dd5de50dfa6e031a2253b663dcde,1bc0ada4ac62dd5de50dfa6e031a2253b663dcde,Bug-fix in TDView's error handling (thanks Marty!)
snej,2011-12-23 00:40:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/980b20e72b5d55b1bab790a713afe958d7580d5a,980b20e72b5d55b1bab790a713afe958d7580d5a,"Fix iOS apps by adding -ObjC linker flag

..otherwise the categories on TDDatabase and FMDatabase get
left out of the app, causing runtime exceptions. :-p"
snej,2011-12-23 00:39:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6e07282ff1171901d1f9cbf63754ce173add2991,6e07282ff1171901d1f9cbf63754ce173add2991,"Enabled some more warnings, fixed stuff they warned about"
snej,2011-12-21 21:20:07,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8d616a225dfe61d5bd9184e5501bf3e331cde88d,8d616a225dfe61d5bd9184e5501bf3e331cde88d,"A couple of changes for ARC

Fixed an error when importing TDView.h in an ARC-enabled source file.
Tweaked a few other things for ARC compatibility of TouchDB source itself,
but it's by no means ready to build with ARC."
snej,2011-12-21 20:00:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/1477d73528215c40138d9fb076cdad2231f2dc69,1477d73528215c40138d9fb076cdad2231f2dc69,Use couchbaselabs' fork of FMDB submodule.
snej,2011-12-21 19:24:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/81b3f5ab883a94dfa1f5884da7c3432fd576d7cc,81b3f5ab883a94dfa1f5884da7c3432fd576d7cc,"TDPusher now sends attachments, non-optimally

It always sends all attachments whether or not they've changed.
It always sends them inline base64'd.
These things should be optimized later..."
snej,2011-12-20 21:25:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ad89c62fb237b8785d95ab181ee7522833f2a5bf,ad89c62fb237b8785d95ab181ee7522833f2a5bf,"Added image attachments to Mac shopping demo

The UI is awful but it does demonstrate attachments in real use!"
snej,2011-12-20 21:24:15,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a27a087ca179d9999c25d02fb404867e64daf3a5,a27a087ca179d9999c25d02fb404867e64daf3a5,"Misc improvements (compaction, deletion, versioning)

- Compaction vacuums the SQLite database.
- Deleting a database also deletes its attachment store directory.
- Using SQLite user_version property to track schema of the database
so we can refuse to open it if it's too old or new."
snej,2011-12-20 02:54:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/de40f1d51150ce48ab3afd7777ce77df0c601d7a,de40f1d51150ce48ab3afd7777ce77df0c601d7a,TDRouter now supports GETs of attachments.
snej,2011-12-20 01:24:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/edc28029d25aa94070877f2dfe824c1baf914286,edc28029d25aa94070877f2dfe824c1baf914286,"Stop storing _id and _rev in ""json"" column of database."
snej,2011-12-20 00:36:21,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7b0d75bcdc3d5d6256e503fc9231da2af27a79e5,7b0d75bcdc3d5d6256e503fc9231da2af27a79e5,Checkpoint: _attachments property supported in TDDatabase.
snej,2011-12-19 23:17:22,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fcc663f72aae17deb8275041b216f825b5f8683b,fcc663f72aae17deb8275041b216f825b5f8683b,Checkpoint: More attachment work
snej,2011-12-20 17:30:39,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b851ba1e56e061c6af57d036a5e5ca24440ed64a,b851ba1e56e061c6af57d036a5e5ca24440ed64a,"Demo apps now use CouchTouchDBServer.

Also added +[TDURLProtocol rootURL]."
snej,2011-12-19 17:27:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/63ef5f9ba14b706551727aa43cd9ec9ae0a03bb1,63ef5f9ba14b706551727aa43cd9ec9ae0a03bb1,"Get the iOS ""Empty App"" to build again."
snej,2011-12-18 17:36:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9002d6b0090056afd4b26f01f1661521e902dbc0,9002d6b0090056afd4b26f01f1661521e902dbc0,"Bug-fixes to Mac demo app

- Fill in URL field of sync sheet when it opens
- Unregister as observer when removing replications
- Copy CouchCocoa.framework into app bundle"
snej,2011-12-18 17:35:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9992ce8528f6fb0182154d908fe5f10086f7a68,f9992ce8528f6fb0182154d908fe5f10086f7a68,"Set Location: response header after POST to database

CouchCocoa expects this (it gets the document ID from it.)"
snej,2011-12-17 20:14:25,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/ac55f8932759017f540e57d003fa750d11c6afa0,ac55f8932759017f540e57d003fa750d11c6afa0,"Oops, fixed formatting glitch in README."
snej,2011-12-17 20:11:44,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b9764835f88df0475b19c85c5533d043393f2522,b9764835f88df0475b19c85c5533d043393f2522,"Cleanup

- Updated README.
- Added Apache license comment to .m files.
- Fixed Mac demo target to look for CouchCocoa.framework in 'Frameworks' subdirectory."
snej,2011-12-17 06:09:11,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8022a88ee1434a0175934445eb94dd4953a68a2a,8022a88ee1434a0175934445eb94dd4953a68a2a,"Limit number of HTTP connections used by TDPuller

Also added autorelease pools to reduce memory usage."
snej,2011-12-16 21:18:29,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/7f5c5da5212fde31a50dff051ba59c8c7a458655,7f5c5da5212fde31a50dff051ba59c8c7a458655,"Replicator progress notification

* TDReplicator tracks progress.
* Support for CouchDB _active_tasks API.
* NSNotification posted when replicator progress changes.
* Demo apps use the notification instead of polling."
snej,2011-12-16 01:10:49,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/328678e6ba143064e8f0093bc9767a75c31f6838,328678e6ba143064e8f0093bc9767a75c31f6838,TDPuller now uses async GETs from the remote db.
snej,2011-12-16 01:14:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/6a96cff4be537bb16c88aa0f9f26cbde0ca01100,6a96cff4be537bb16c88aa0f9f26cbde0ca01100,"Fixed a TDView regression

The lastSequence column wasn't always being updated to a high enough number."
snej,2011-12-14 20:16:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b0b45498ba1514baa7375e5cb948d45a3079c408,b0b45498ba1514baa7375e5cb948d45a3079c408,Mac demo now has UI for configuring sync URL.
snej,2011-12-14 20:15:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a7c2b70698ac1b92dedfce4201b670e2d773efb2,a7c2b70698ac1b92dedfce4201b670e2d773efb2,Optimizations to view rebuilding & pull replication.
snej,2011-12-14 18:02:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/28545eaeb77f6e76de36222ea12a52875fe90a9b,28545eaeb77f6e76de36222ea12a52875fe90a9b,"Mac demo: enable continuous sync, use real view, set created_at."
snej,2011-12-14 18:01:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f4129ec2760174be636f95e5b4fbb906aaaed301,f4129ec2760174be636f95e5b4fbb906aaaed301,"Oops, bug-fix for replication."
snej,2011-12-14 01:57:59,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0cb7597c9ce86de2e250c4edf713f4c7490fc3ef,0cb7597c9ce86de2e250c4edf713f4c7490fc3ef,"Document update validation.

Also a few bug fixes."
snej,2011-12-13 22:38:48,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3111ad8b9f811891c2505709c781c60b68009846,3111ad8b9f811891c2505709c781c60b68009846,"More replication work. It's working in the iOS demo now!

* Persistent storage of last sequence number pulled/pushed.
* HTTP _replicate endpoint supported.
* Fixed bugs in replicator code.
* Pusher ignores local changes pulled from the same remote database."
snej,2011-12-12 23:02:03,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/29ef2a0ef22d93edc703730b48583fbfb782f7ff,29ef2a0ef22d93edc703730b48583fbfb782f7ff,"Make iOS demos installable on real devices

Needed to tweak the bundle IDs and entitlements."
snej,2011-12-12 19:31:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/3d38026194e904e9db2f8c64dc2cdda60ecc717d,3d38026194e904e9db2f8c64dc2cdda60ecc717d,"Made Demo-iOS be a clone of GrocerySync

Basically runs. I didn't copy over all the assets so it doesn't look right.
Sync not implemented yet."
snej,2011-12-12 19:30:35,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d6c2614c61d5d55ad3fdc3f92e6ad948481f860a,d6c2614c61d5d55ad3fdc3f92e6ad948481f860a,Add view querying to TDURLProtocol
snej,2011-12-12 05:54:17,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b6c682057a48456ed81532381c1e6075e6f5dbc5,b6c682057a48456ed81532381c1e6075e6f5dbc5,Added SQL indexes. Renamed TDContentStore-->TDBlobStore.
snej,2011-12-12 02:00:34,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/666c9f770a32e428d3bb830b747365b2840bb270,666c9f770a32e428d3bb830b747365b2840bb270,"SQL optimization: factored docid string out into a separate table.

(The docs table is now named revs, and a new docs table just contains the docid.)"
snej,2011-12-12 00:54:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/08c006fd43b154805c4e11ab2d3eb4ba5dd35956,08c006fd43b154805c4e11ab2d3eb4ba5dd35956,"Added iOS app target, and beginnings of attachment support"
snej,2011-12-09 22:14:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/190c31805c9ae8691e6eeffab557d72f9b9990ec,190c31805c9ae8691e6eeffab557d72f9b9990ec,Added iOS build targets
snej,2011-12-09 20:47:32,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/9ae9ecf1da40c3e769a0687194dfe44a092de118,9ae9ecf1da40c3e769a0687194dfe44a092de118,"The Great Renaming

ToyCouch --> TouchDB
""Toy"" prefix --> ""TD"""
snej,2011-12-09 19:29:28,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/42705e21444b73a1e7f61e876bdde9c3bf38f47b,42705e21444b73a1e7f61e876bdde9c3bf38f47b,"Removing some external dependencies

Moved MYUtilities files into the repo.
Moved the experimental CouchChangeTracker stuff from CouchCocoa into
the repo, renamed to 'TDChangeTracker'."
snej,2011-12-09 06:24:13,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa110dd13fcb67eae893d46901388dfeb22d0e59,fa110dd13fcb67eae893d46901388dfeb22d0e59,"ToyCollate -- proper ordering of view keys

(Except it doesn't properly compare Unicode characters in strings, yet.)"
snej,2011-12-09 00:45:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/5fab26effa59b87b2ae128bde56facdf2a231d49,5fab26effa59b87b2ae128bde56facdf2a231d49,Moved view indexing/querying code from ToyDB into ToyView.
snej,2011-12-09 00:02:53,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a7125e79eec47dcd0be99d4a491a6e8c589dad36,a7125e79eec47dcd0be99d4a491a6e8c589dad36,Implemented view querying; simple unit test works.
snej,2011-12-08 23:07:43,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efb59b4389013a17fda31b48dde7c979dadbfdb7,efb59b4389013a17fda31b48dde7c979dadbfdb7,Creating and indexing views!
snej,2011-12-08 18:57:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/8bb5319d7b1608ae9384cf3ea92ada0d016b9bb9,8bb5319d7b1608ae9384cf3ea92ada0d016b9bb9,"Unit test improvements

Oops, ToyRouter tests weren't getting run; fixed that, and fixed a few regressions in them.
Added dependencies between tests so they run in the best order."
snej,2011-12-08 17:32:31,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/377cdfffd00b6aca646e83deab15eca192aebb02,377cdfffd00b6aca646e83deab15eca192aebb02,Got the release (archive) build working.
snej,2011-12-08 03:54:40,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/f9e41ccf2a65cf410ab76391f8c4e60a8eee6ab9,f9e41ccf2a65cf410ab76391f8c4e60a8eee6ab9,Renamed CouchDocument --> CouchBody.
snej,2011-12-08 01:44:47,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/d11d6ca9450d76bf3471ce295566baf120a57827,d11d6ca9450d76bf3471ce295566baf120a57827,"ToyPusher now sends revision history to destination.

Also, post notifications of revisions added by pull replication."
snej,2011-12-07 21:40:20,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/70e865f7d76aa0cd516cc0ac9a485dc4b9bde9c9,70e865f7d76aa0cd516cc0ac9a485dc4b9bde9c9,"Added revision-tree tests and a simple puller test.

Fixed a couple of bugs too."
snej,2011-12-07 19:25:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b57f6c386987b5eaecfd4965729aaed4fcf7fe25,b57f6c386987b5eaecfd4965729aaed4fcf7fe25,"Checkpoint: Working on revision tree

I think it's all coded, and tests pass, but haven't tried replication yet."
snej,2011-12-07 00:24:16,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/99bbf5af83994b37dea11ac7ed5b210a5d278c01,99bbf5af83994b37dea11ac7ed5b210a5d278c01,"DB now stores revision history tree.

Not really integrated into the replicator yet, though."
snej,2011-12-06 21:58:50,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/14d7b5e3d2c608d39dcdf9dc5031ea135cdcbf24,14d7b5e3d2c608d39dcdf9dc5031ea135cdcbf24,"ToyPusher!

Was able to do a simple push to CouchDB."
snej,2011-12-05 20:06:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/cb80f7c87b29621856c1d0812d8df425511a5d65,cb80f7c87b29621856c1d0812d8df425511a5d65,longpoll support for _changes feed.
snej,2011-12-05 17:48:30,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/b778a85fc011350ee42365cf1a67b146ea4e7f6e,b778a85fc011350ee42365cf1a67b146ea4e7f6e,More use of ToyRev in ToyDB. Fixed PUT in ToyRouter.
snej,2011-12-05 02:40:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/a7150a0bd08c96b81573f292eaeb518877660c00,a7150a0bd08c96b81573f292eaeb518877660c00,"WTF? Some new code didn't get into the last commit somehow.

Merge branch 'master' of github.com:snej/ToyCouch

Conflicts:
	Source/ToyPuller.h
	Source/ToyPuller.m
	Source/ToyRev.h
	Source/ToyRev.m"
snej,2011-12-05 02:31:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/56f4b33721410c2d0cc1b9fd36a4cbfa732cbf2f,56f4b33721410c2d0cc1b9fd36a4cbfa732cbf2f,"ToyPuller!

(Changes feed isn't working right yet, though.)"
snej,2011-12-05 02:31:23,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/0a98225a787a7a8adb144d84af7cafc1dfd3a1f3,0a98225a787a7a8adb144d84af7cafc1dfd3a1f3,"ToyPuller! And shopping-list demo!

(Changes feed isn't working right yet, though.)"
snej,2011-12-02 17:25:57,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/64d08e5f7e801c4cef1f71f8b4b071517cab4979,64d08e5f7e801c4cef1f71f8b4b071517cab4979,Added demo. Builds as a framework. Project restructuring.
snej,2011-12-02 00:24:36,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/c88561bc3dc9c4f989c31c38e3214e1ddcd31ae4,c88561bc3dc9c4f989c31c38e3214e1ddcd31ae4,Continuous-mode changes feed.
snej,2011-12-01 22:34:04,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/78b2b5a6e03c74aa83eefcfb3f3d08f7fb342674,78b2b5a6e03c74aa83eefcfb3f3d08f7fb342674,_all_docs
snej,2011-12-01 19:48:27,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/557167c0db570b167691f733e181871d53db65e2,557167c0db570b167691f733e181871d53db65e2,Conditional GETs and ETag-related headers
snej,2011-12-01 19:19:24,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/efc2b3ad3e536767202b8b1359594e78146c4b32,efc2b3ad3e536767202b8b1359594e78146c4b32,Added router document tests. Fixed deletion. Cleanup.
snej,2011-12-01 18:09:52,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/081fc512379df4e29f491fb1812537cef5f47a2d,081fc512379df4e29f491fb1812537cef5f47a2d,ToyProtocol!!!
snej,2011-12-01 06:36:55,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/fa7ef244616228a89f569a9683d9c0c33a3e9a1b,fa7ef244616228a89f569a9683d9c0c33a3e9a1b,ToyRouter!!
snej,2011-11-30 18:27:45,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/2fd3dba33385c9c6c7f89da9b34158e25c4c8b7b,2fd3dba33385c9c6c7f89da9b34158e25c4c8b7b,Added 'deleted' column.
snej,2011-11-30 17:20:58,https://api.github.com/repos/couchbase/couchbase-lite-ios/git/commits/599857cc9f78244d0d403e5d026fe44a8ade9d23,599857cc9f78244d0d403e5d026fe44a8ade9d23,First ToyCouch commit. CRUD basically working.
