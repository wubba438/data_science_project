nylas-mail,:love_letter: An extensible desktop mail app built on the modern web.  Forks welcome!
username,timestamp,url,sha,message
bengotow,2018-06-03 22:26:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/e16cb1982e944ae7edb69b1abef1436dd16b442d,e16cb1982e944ae7edb69b1abef1436dd16b442d,Add an Issue Template noting that Nylas Mail is unmaintained
emorikawa,2017-09-06 21:00:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/653ff9b44a16468ef37dc109a39ef604d1369ff9,653ff9b44a16468ef37dc109a39ef604d1369ff9,Change Nylas Mail to MIT License
bengotow,2017-09-06 21:00:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/f60437ff0c0ab7351031833212d62c596895f696,f60437ff0c0ab7351031833212d62c596895f696,Update README to fix links to packages/client-app/
bengotow,2017-09-06 20:58:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb1a75534e2e6651a6559ab959053649d63e06ae,cb1a75534e2e6651a6559ab959053649d63e06ae,Update README to fix hardcoded links to nylas-mail-all
jstejada,2017-08-22 19:07:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/b70e2db1cbef182c82ca2a1309ddcd1a454d84a8,b70e2db1cbef182c82ca2a1309ddcd1a454d84a8,"Merge pull request #2: Cleanup in preparation for open sourcing

Cleanup in preparation for open sourcing"
bengotow,2017-07-28 22:51:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d700e74f6045f6c79d600fb438b7c25b90286d1,8d700e74f6045f6c79d600fb438b7c25b90286d1,[Sentry] Remove DSN - don’t want errors from OSS
bengotow,2017-07-27 04:55:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac5dd64823b68302c89b3fc61948875eed92f262,ac5dd64823b68302c89b3fc61948875eed92f262,[*] README: Preserve blog posts and add them to resources
bengotow,2017-07-27 04:47:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8cd8db7b5c20a2dc5dd19c0a27700cc103b6b42,a8cd8db7b5c20a2dc5dd19c0a27700cc103b6b42,[*] README: Move explore source section beneath Running subhead
bengotow,2017-07-27 04:44:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/cae19b190cba052b2c297380b612887681570a01,cae19b190cba052b2c297380b612887681570a01,[*] README: Replace horrible themes screenshot with a better one
bengotow,2017-07-27 04:16:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ae2d00634724a3632c860bf93840f3dcff11730,8ae2d00634724a3632c860bf93840f3dcff11730,[*] README: Fix broken Kleinstein link
bengotow,2017-07-27 04:14:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/7177ef51adb94d2d996a5be1d2707836a6f45003,7177ef51adb94d2d996a5be1d2707836a6f45003,"[*] Update README to make deprecation more clear, add videos"
bengotow,2017-07-27 04:04:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b49a298e35a1e6d36ad80d2e17ddc1c2b3e8798,5b49a298e35a1e6d36ad80d2e17ddc1c2b3e8798,"[*] Update READMEs, remove Nylas-specific cloud instructions"
bengotow,2017-07-26 17:25:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/548b17f5e70d4831d873f06bbb1706f38c65198d,548b17f5e70d4831d873f06bbb1706f38c65198d,[client-app] Remove remaining references to upload-client build step
bengotow,2017-07-26 17:25:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea643a0bbd2fb3ecc817108c54a65622c763603e,ea643a0bbd2fb3ecc817108c54a65622c763603e,[client-app] Add screenshot
bengotow,2017-07-26 16:20:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2edfa67e8b3b688b98863523202ed56590b156b,b2edfa67e8b3b688b98863523202ed56590b156b,[cloud-*] Remove development config tied to Nylas
bengotow,2017-07-26 01:56:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/25a3e6723933b426eaa3985c63d25f0e00a6946e,25a3e6723933b426eaa3985c63d25f0e00a6946e,"[*] Add missing(?) config files, make entire `npm test` suite run green"
bengotow,2017-07-26 01:19:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/34d474710f61e4fdaa62627c0468a5573dddaece,34d474710f61e4fdaa62627c0468a5573dddaece,[client-app] Disable specs failing for unknown reasons
bengotow,2017-07-26 01:06:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e963e3d466502f8e177f12df717448820503d58,7e963e3d466502f8e177f12df717448820503d58,[client-app] Fix broken specs
bengotow,2017-07-25 19:38:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/360d8161e2e821ea684b9ce424deb5d032070e66,360d8161e2e821ea684b9ce424deb5d032070e66,[client-app] Fix double handling of unhandled rejections
bengotow,2017-07-25 19:19:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ea7c18b27ebf4544719e8fb14802a11e06bab25,2ea7c18b27ebf4544719e8fb14802a11e06bab25,"[client-app] Always send a password, even if no identity is present"
bengotow,2017-07-25 04:56:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/a40a87d6a35e3bae20fc2df7fa40f4ea2d74ff46,a40a87d6a35e3bae20fc2df7fa40f4ea2d74ff46,[client-app] Link to gh-pages from docs folder
bengotow,2017-07-25 04:48:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/e84ad9b3b89eb069cb63c367d382c199584168ad,e84ad9b3b89eb069cb63c367d382c199584168ad,[client-app] Remove the “identity” tab for managing your subscription
bengotow,2017-07-25 04:43:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/472a76c0d41e187b70dcf31fcb9907a16951a813,472a76c0d41e187b70dcf31fcb9907a16951a813,[client-app] Disable snooze by default since it requires cloud support as well
bengotow,2017-07-25 04:40:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/294d1535f1e58bf53cba20dc6eaab5001e261882,294d1535f1e58bf53cba20dc6eaab5001e261882,[client-app] Only use account presence to decide whether to open onboarding
bengotow,2017-07-25 04:34:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d68fe0c62955b81f7ecf1823a0555511c27bc19,6d68fe0c62955b81f7ecf1823a0555511c27bc19,[client-app] Remove old “Edegehill” API used to proxy clearbit
bengotow,2017-07-25 04:29:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/3270077baaad1bb4abd5a0add28b5565410eaa44,3270077baaad1bb4abd5a0add28b5565410eaa44,[client-app] Remove newsletter signup in preferences
bengotow,2017-07-25 04:22:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/be3badb769e8eb2173e21438316d3d8d55bc173d,be3badb769e8eb2173e21438316d3d8d55bc173d,[client-app] Rename the send-later plugin for consistency
bengotow,2017-07-25 04:19:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d419765f412b1212989f037b9546d8eb9d5e4b8,2d419765f412b1212989f037b9546d8eb9d5e4b8,[client-sync] Stop sending sync performance metrics to Honeycomb
bengotow,2017-07-25 04:16:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/6507e831ba3df61a72a532bb164a77dc8d46c46e,6507e831ba3df61a72a532bb164a77dc8d46c46e,"[client-app] Remove welcome tutorial, which depicts cloud plugins"
bengotow,2017-07-25 04:14:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/a782d72a2c508f52b7e2ec8ed9b6a37d5fdb879c,a782d72a2c508f52b7e2ec8ed9b6a37d5fdb879c,"[client-app] By default, disable plugins that require a Nylas ID"
bengotow,2017-07-25 04:10:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/367161a620fb308fc222f28bc01077c758e6a26e,367161a620fb308fc222f28bc01077c758e6a26e,[client-app] Skip “Nylas ID” step upon sign-in
bengotow,2017-07-25 03:58:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdd5683b6834d9c1e3e5feddf7ac98c050090bb7,bdd5683b6834d9c1e3e5feddf7ac98c050090bb7,[client-app] Remove autoupdates tied to Nylas server
bengotow,2017-07-25 03:51:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/e47fecb15761763d9e236e9e5d6b19a0ef9333eb,e47fecb15761763d9e236e9e5d6b19a0ef9333eb,[client-app] Remove analytics package
bengotow,2017-07-25 03:51:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecac79fe78ed3879a35eb2f058dc97b7841bbbe2,ecac79fe78ed3879a35eb2f058dc97b7841bbbe2,[client-app] Remove signing / uploading of builds
bengotow,2017-07-25 03:50:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/820eba1797fbbecff0a19f05b0f88cb691a81765,820eba1797fbbecff0a19f05b0f88cb691a81765,[client-app] Move private plugins into the client-app tree
jstejada,2017-05-09 18:22:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ca35bf24ac4ce43ece0de078ca01435765ce9d7,4ca35bf24ac4ce43ece0de078ca01435765ce9d7,[client-app] Update changelog
emorikawa,2017-04-29 00:51:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/fad4b9b181ed29f1abac7d3cb05590a040c674f6,fad4b9b181ed29f1abac7d3cb05590a040c674f6,"[client-app] remove unnecessary tracking events

Summary:
These events have massively spammed our Mixpanel.
Retry send task alone fired 6,000,000 events in the past week!
Since we pay per event, this really, really sucks.

These events made up a vast majority of our events

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4517"
hallamoore,2017-04-28 19:18:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/135c123d406ed1fbe26b664261d95e2733c2fdd6,135c123d406ed1fbe26b664261d95e2733c2fdd6,[client-sync] Use decryptedCredentials instead
hallamoore,2017-04-28 18:56:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6a11a78d182a64139e8f40eb82710d3bd254d61,c6a11a78d182a64139e8f40eb82710d3bd254d61,"[client-sync] Keep track of when SendTaskRunners expire

Summary:
Although we check if the account needs a new token before each send,
we failed to consider that the token in the account might not match
the token used in the SendTaskRunner. This could happen if the token
was refreshed somewhere outside the SendTaskManager (e.g. the sync
loop). This diff adds an `expiresAtInMs` field to the SendTaskRunner
so that the SendTaskManager can determine whether it needs an
updated SendTaskRunner or not.

Test Plan: manual

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D4515"
emorikawa,2017-04-28 17:43:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/abb3852599b2654127c17dc8ea12952bb68838f2,abb3852599b2654127c17dc8ea12952bb68838f2,"Revert ""[*] fix google auth expiry date""

This reverts commit af22c676f95ea3f4fea4f7c66029b5f3cf1d6ae2."
emorikawa,2017-04-28 04:58:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/af22c676f95ea3f4fea4f7c66029b5f3cf1d6ae2,af22c676f95ea3f4fea4f7c66029b5f3cf1d6ae2,"[*] fix google auth expiry date

Summary: EVERYTHING IN MS!!!!!!!!!!

Test Plan: manual

Reviewers: khamidou, spang, juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4512"
emorikawa,2017-04-27 18:37:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/21da07b7cfb2a9ef4a724f95a37cc93e9cfd7223,21da07b7cfb2a9ef4a724f95a37cc93e9cfd7223,"[cloud-core] fix leaking redis connections & cleanup

Summary:
The broadcast client was getting re-built (without ever getting cleaned
up) erroneously every time anyone closed a delta connection. This led to
leaking delta connections.

There were also several functions that were never used anywhere!

Test Plan: Manual local

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4508"
jstejada,2017-04-27 05:02:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d1764a7678379554572052956074a538e43bbd5,8d1764a7678379554572052956074a538e43bbd5,[client-app] Update changelog
emorikawa,2017-04-27 01:26:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/30aaae5adc5e21b43d4e7ab3e3012d08eff7a4d0,30aaae5adc5e21b43d4e7ab3e3012d08eff7a4d0,"[*] fix send later with open/link tracking

Summary: See above

Test Plan: manual

Reviewers: juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4504"
emorikawa,2017-04-27 01:25:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/44f98bdc36bc1351b9a23e96caf7d2af18196366,44f98bdc36bc1351b9a23e96caf7d2af18196366,"[*] remove draft syncback to fix send later with tracking

Summary:
Removes draft syncback
Fixing open link tracking with send later

Test Plan: manual

Reviewers: juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4502"
jstejada,2017-04-26 21:26:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3bfca9524e6da4b3df815424cae8fdbf6712c81,c3bfca9524e6da4b3df815424cae8fdbf6712c81,[client-app] Update changelog
emorikawa,2017-04-26 19:38:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/be9cc46151c4f4c8cba860fcc21a8104f92c6e4f,be9cc46151c4f4c8cba860fcc21a8104f92c6e4f,[iso-core] fix atob dependency
jstejada,2017-04-26 19:32:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/303210c38a2ca621861ba4e00c781639bc5a64f8,303210c38a2ca621861ba4e00c781639bc5a64f8,[client-app] Update changelog
emorikawa,2017-04-26 19:26:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a4e34a7e2ef1841e18baa2ead5572343e1edeaa,4a4e34a7e2ef1841e18baa2ead5572343e1edeaa,[cloud-core] fix logger error
emorikawa,2017-04-26 19:09:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f1e8fadffd5481f1d3bddf20efdde8d60f5c492,9f1e8fadffd5481f1d3bddf20efdde8d60f5c492,[cloud-core] use correct logger when logging Redis connections
emorikawa,2017-04-26 18:22:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/33648ba8dd826c4f31ce7cc148a9f2bd365d53dc,33648ba8dd826c4f31ce7cc148a9f2bd365d53dc,"[*] consolidate TrackingUtils & better documentation

Summary:

Test Plan:

Reviewers:

Subscribers:"
emorikawa,2017-04-26 17:36:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/f674b250a5e961b193627eda326879f1458205a8,f674b250a5e961b193627eda326879f1458205a8,"[*] fix self-triggering open and link tracking

Summary:
This fixes an issue with our link tracking regex begin too restrictive and
not allowing `?` or `=` characters.

Also cleans up the code and adds comments to better explain what's going
on with the link and open tracking code

Test Plan: manual

Reviewers: juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4498"
jstejada,2017-04-25 22:09:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/315ff56d1b5fb6de304018d7336aac3f326c63b1,315ff56d1b5fb6de304018d7336aac3f326c63b1,bump(version): 2.0.24
jstejada,2017-04-25 21:53:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/00575c066396eb365a42153a3396b726a00b5509,00575c066396eb365a42153a3396b726a00b5509,"[client-app] Speed up sending per recipient

Summary:
Speed up sending-per-recipient ever so slightly by sending in parallel.
We don't really need to send each message serially, we just need to wait
until all of them have sent, so let's do this in parallel with
Promise.all.

This should be especially helpful when sending to a lot of recipients
with big attachments

Test Plan: manually verify that sending per recipient still works as expected

Reviewers: evan, mark, halla

Reviewed By: mark, halla

Differential Revision: https://phab.nylas.com/D4497"
jstejada,2017-04-25 21:39:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3e52dd22ef1d8d978c2576765cd51d371d36fc6,c3e52dd22ef1d8d978c2576765cd51d371d36fc6,"[client-app] Fix tracking when sending per recipient

Summary:
When sending custom bodies per recipient for tracking, we used to copy
the message model, and then update the copy's body with the custom
body that contains the tracking links for each recipient.

However, due to recent changes that store message bodies in flat files on
disk, copying an instance of a message would actually update the body of
the original message because they both pointed to the same message body
file on disk, which is obviously not what this code initially intended
to do.

This caused all messages to go out with the tracking links of the first
recipient, causing open tracking to misreport who had actually opened a
message.

The fix for now is to not make a copy of the message model, but rather
just of its values, which we can use for sending.

Test Plan: manually test that send-per-recipient and tracking works as expected

Reviewers: evan, halla, mark

Reviewed By: halla, mark

Differential Revision: https://phab.nylas.com/D4496"
jstejada,2017-04-25 17:38:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3f9e7ef0826be0b86ac3928f2a97d30f77f8d10,f3f9e7ef0826be0b86ac3928f2a97d30f77f8d10,[client-app] Update changelog
jstejada,2017-04-25 17:37:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/dcb95ec95d9280c00d26270a7f3f654eed67f557,dcb95ec95d9280c00d26270a7f3f654eed67f557,bump(version): 2.0.23
jstejada,2017-04-25 17:29:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca1e6f4d675f4e3997e50d8f6f11d620c1f9e67d,ca1e6f4d675f4e3997e50d8f6f11d620c1f9e67d,"[client-app] Properly retry retryable errors in syncback tasks

Summary:
When the syncback task runner was refactored (https://github.com/nylas/nylas-mail-all/commit/ba37a5c7118c298b0c527764880c6c029be766a0#diff-fe83d2d1f5995869631059a5d6221f32L182), we stopped retrying
retryable errors because we ended up incorrectly marking them as failed.

This commit ensures that we mark them as NEW and that we re-throw the
error so that the sync loop is restarted and we retry the task

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4494"
emorikawa,2017-04-25 17:31:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/e750f092283133c2a13c43603c5e2b6413ba69dc,e750f092283133c2a13c43603c5e2b6413ba69dc,"[*] remove old email references

Summary: Removing references

Test Plan: manual

Reviewers: juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4493"
jstejada,2017-04-25 16:24:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/1fb4853965fcf9dea28eaec393c663fdf2961820,1fb4853965fcf9dea28eaec393c663fdf2961820,bump(version): 2.0.22
jstejada,2017-04-25 16:24:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe8a8ee547ccccd593cab7498ac1515dd9ae1bb5,fe8a8ee547ccccd593cab7498ac1515dd9ae1bb5,"Revert ""[iso-core] Fix interruptible throwing errors""

This reverts commit 2e0f231cc1c57a15e45e73e3263a010aebdbe56a.

This commit is causing errors to be swallowed"
jstejada,2017-04-25 16:10:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/d286611ecbf6dfa8eecb8149e90b017a63616f97,d286611ecbf6dfa8eecb8149e90b017a63616f97,[client-app] Update changelog
jstejada,2017-04-25 00:09:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4bb64343704261de55ceb7d1ea4325514a7e34c,e4bb64343704261de55ceb7d1ea4325514a7e34c,bump(version): 2.0.21
jstejada,2017-04-24 23:36:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d932cecc0e3517d05ff320aadb3ef58f63a2c9e,3d932cecc0e3517d05ff320aadb3ef58f63a2c9e,"[iso-core] Fix interruptible throwing errors

Summary:
If the promise that was `yield`ed to the interruptible rejects, we need
to re-throw the error inside the stack of the code the generator is
running, otherwise any error handling code inside that code wont be ran.

See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator/throw
and https://github.com/tj/co/blob/master/index.js#L79 for example usage

Test Plan: manual (plan to test it more before landing)

Reviewers: spang, mark, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4491"
emorikawa,2017-04-24 23:49:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f8b8ea1e9236cc3a13f2b290b1ebb10156f9076,5f8b8ea1e9236cc3a13f2b290b1ebb10156f9076,"[client-sync] fix sending when racing syncing of Gmail sent folder

Summary:
On gmail if you sent a message to multiple people with big attachments,
the send could take several minutes.

In the meantime, some of your individually sent messages would show up in
your Gmail's sent folder.

When the send completed, we'd try and create a new message object with the
same ID and fail.

This changes it to upsert instead

TODO to see how this behaves with replies

Test Plan: manual

Reviewers: juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4490"
jstejada,2017-04-24 20:42:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/9afa9d695b9e69e68faa13f5ff73a7d414e9357f,9afa9d695b9e69e68faa13f5ff73a7d414e9357f,"[client-app] Increment max upload size

Summary: see title

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4489"
jstejada,2017-04-24 20:18:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ff4e1b2677bcd4bd3e69c5f1d0beafc25341c4e,9ff4e1b2677bcd4bd3e69c5f1d0beafc25341c4e,[client-app] Update changelog
jstejada,2017-04-24 19:25:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/7840f5ef5eff7cc6c0fa322a2389faebb230f40f,7840f5ef5eff7cc6c0fa322a2389faebb230f40f,bump(version): 2.0.20
jstejada,2017-04-24 19:24:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1999fb4d1f4e19c9a4005d221ea1cc520d7b591,f1999fb4d1f4e19c9a4005d221ea1cc520d7b591,[iso-core] Correctly pass connSettings to convertSmtpError
jstejada,2017-04-24 18:40:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/c07994d833bc6dea196253bbb3d91f136dd74cff,c07994d833bc6dea196253bbb3d91f136dd74cff,"[client-app] Fix attachment previews

Summary:
See title

Test Plan:
manually check that we can still generate file previews.

Reviewers: halla, spang, mark, khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4487"
emorikawa,2017-04-24 18:32:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f84b4fb0f69cd41034b2fcfddbb3d420b78feea,1f84b4fb0f69cd41034b2fcfddbb3d420b78feea,"[client-app] only poll for identity every hour instead of every 10 min

Summary:
We used to poll for the identity every 10 minutes (which create quited a
bit of load on the billing site). The reason we polled was to get updates
for feature usage. If you used up all of your usage on 1 computer, the
  other needed to get updated eventually.

I don't think this needs to be every 10 minutes. Futhermore, when you make
a request against feature usage right now, it'll optimistcally refresh

Test Plan: manual

Reviewers: juan, spang, halla, khamidou

Reviewed By: khamidou

Differential Revision: https://phab.nylas.com/D4486"
emorikawa,2017-04-24 18:31:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/4086b23d709ee943e3eaf70252e15286ec3e3804,4086b23d709ee943e3eaf70252e15286ec3e3804,"[cloud-api] remove auth requirement against billing

Summary:
The Cloud API used to be dependent on the billing site to access the
redwood database for the Nylas ID. Upon further thought, there's no reason
this has to be true. We already authenticate against the account token
thereby mitigating the main concern of having unfettered access to the
metadata API. Only /metadata and /delta auth anyway.

This dramatically simplifies this code reduces this dependency and reduces
the usage of the billing API

Test Plan: Boot up app locally. Auth accounts. Ensure deltas & metadata still work.

Reviewers: spang, halla, juan, khamidou

Reviewed By: juan, khamidou

Subscribers: khamidou

Differential Revision: https://phab.nylas.com/D4485"
emorikawa,2017-04-24 18:07:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/d87b699d6d6c48b74a9dd11bc409d2d61daf06ad,d87b699d6d6c48b74a9dd11bc409d2d61daf06ad,"[client-app] fix link editor jumping away from you

Summary:
When you opened up the link box, 1 second later, the spellcheck extension
would mutate the dom, which would grab the selection back and blur the
link editor. This made it impossible to type links into the link editor!

Test Plan: manual

Reviewers: juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4479"
jstejada,2017-04-21 20:56:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/e36149812d5fd8a6b49d7766aefd75651ce68ba4,e36149812d5fd8a6b49d7766aefd75651ce68ba4,"[iso-core] Fix certificate error msg

Summary: see title

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4481"
jstejada,2017-04-21 19:27:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/1378b0ca92ea0da31ca4aa14a67d47d4aabea624,1378b0ca92ea0da31ca4aa14a67d47d4aabea624,"[client-app] Detect smtp cert errors and relax condition to detect them

Summary: see title

Test Plan: manual

Reviewers: mark, spang, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4478"
jstejada,2017-04-21 15:52:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/db4b18a3422356ec35397a8b75f886ccbe0caeae,db4b18a3422356ec35397a8b75f886ccbe0caeae,[client-app] Update 2.0.19 changelog to match public release
jstejada,2017-04-21 15:48:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/f143728c3921be840c05893442b8edc3bb3fac81,f143728c3921be840c05893442b8edc3bb3fac81,bump(version) 2.0.19
jstejada,2017-04-21 15:47:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/8eff17299cd9ff65bd113c5d94c308eb2a59e895,8eff17299cd9ff65bd113c5d94c308eb2a59e895,[client-app] Update changelog to reflect actual public releases
emorikawa,2017-04-21 15:15:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e286cb3d00726f71ff0a30c12594b33961c615b,4e286cb3d00726f71ff0a30c12594b33961c615b,bump(version): 2.0.18
emorikawa,2017-04-21 15:03:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6ef2f159d43a1f1644bd4f0f6f4bba3611cc9c9,a6ef2f159d43a1f1644bd4f0f6f4bba3611cc9c9,"[client-app, cloud-api] track all auth errors & correlate to email

Summary:
We weren't recording the email address of the account that actually
errored on Mixpanel. This made it impossible to tell what email produced
what error!

We also weren't recording when Gmail errored. This makes the cloud API now
send to Mixpanel when this happens. This way our ""Email Account Auth
Failed"" event is the singular authoritative truth on account login
failures

Test Plan: manual

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4475"
emorikawa,2017-04-21 15:03:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/14aa0b781f9cd80e64edfc23afd6f31569351114,14aa0b781f9cd80e64edfc23afd6f31569351114,"[iso-core] update imap provider settings to match Mozilla ISPDB

Summary:
See:
https://github.com/nylas/imap-provider-settings/compare/2fdcd34d59b2a4cca6f522234a26c3c791758ebe...master

This increases the number of providers from 143 to 787. A 4.5x increase

Test Plan: Manual

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4467"
hallamoore,2017-04-14 00:39:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e44c96b4840eb63267fa85857ed30d8cb434d79,3e44c96b4840eb63267fa85857ed30d8cb434d79,"[client-sync] Remove deprecated /send routes

Summary: We use Actions instead of http requests for these now.

Test Plan: manual

Reviewers: mark, evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D4438"
hallamoore,2017-04-14 00:19:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba37a5c7118c298b0c527764880c6c029be766a0,ba37a5c7118c298b0c527764880c6c029be766a0,"[client-app, client-sync] Change the send task infrastructure

Summary:
This diff attempts to improve our send time performance by changing
the send task infrastructure. The major differences are:

- We now have a separate `SendTaskManager`/`SendTaskRunner` pair,
    instead of using `SyncWorker`/`SyncbackTaskRunner`. This makes it
    so that we don't have to wait for the sync loop to interrupt and do its
    various housekeeping.

- Communication between client-app and client-sync for sending is
    now done through an Action (`runSendRequest`) instead of the API.
    The API was adding a couple hundred milliseconds to our send time
   (maybe because of hapi magic or bad performance in the `request`
   library).

- We no longer store syncbackRequests for send inside client-sync.
    The only reason we needed persisted data across app sessions was
    to know when the app was closed mid-send, but now client-app can
    do that on its own with the new `performRemoteAlreadyCalled`
    property. Not having to wait for database saves on the syncback-
    Request helps our send time.

Part of T7949

Test Plan:
[x] always throw a retryable error in send and make sure it retries (indefinitely)
[x] throw a retryable error the first 5 times within send and make sure it eventually succeeds
[x] throw a retryable error the first 5 times within a non-send task and make sure it eventually succeeds
[x] throw a non retryable error in send, make sure dialog pops up
[x] throw a non retryable error in a non-send task, make sure dialog pops up
[x] put in a really long delay and make sure the syncbackTask timeout doesn't interrupt it, since it's not retryable
[x] close app in middle of sending
[x] one recipient no tracking
[x] one recipient with tracking
[x] multiple people with tracking

Reviewers: mark, evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4437"
hallamoore,2017-04-13 22:53:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd3d4ea80e120e57628d1064103954731a275e8c,dd3d4ea80e120e57628d1064103954731a275e8c,"[client-sync] Don't save the status of non-retryable SyncbackTasks twice

Summary:
Updating the status of a SyncbackRequest is slow. Previously, we always
set the status to `INPROGRESS-RETRYABLE` and then updated it a second
time if it should actually be `INPROGRESS-NOTRETRYABLE`. This diff makes
it so that we figure out which status it should be during the first
update and eliminates the second update.

Part of T7949

Test Plan: manual

Reviewers: mark, juan, evan

Reviewed By: mark, juan, evan

Differential Revision: https://phab.nylas.com/D4440"
hallamoore,2017-04-17 23:18:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0c5647bdf79a1360b81a224a80f6664e60da6ac,b0c5647bdf79a1360b81a224a80f6664e60da6ac,"[client-sync] Move call to `_cleanupOrphanMessages()`

Summary:
This should be called within `_peformSync` so that it isn't always
run when sync is interrupted. Not only does this add time to how
long it takes us to get back to the sync loop on interrupt, but it
also might remove messages that we were in the middle of
changing.

Test Plan: Made sure the function was still called at end of loop

Reviewers: mark, evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D4443"
hallamoore,2017-04-12 21:48:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ddc209c9249ca30dfe2cad214faca894116d8a0,1ddc209c9249ca30dfe2cad214faca894116d8a0,"[client-sync] Debounce on the leading edge

Summary:
When creating a syncbackRequest from the API, we use a debounced
`wakeWorkerForAccount` to interrupt the sync loop. Previously, this
debounce was done on the trailing edge, which means we had to wait
500ms before the function was even called. This diff changes the
parameters so that we debounce on the leading edge instead, calling
`wakeWorkerForAccount` immediately if there haven't been any other
calls in the past 500ms.

Test Plan: manual

Reviewers: evan, mark, juan

Reviewed By: mark, juan

Differential Revision: https://phab.nylas.com/D4436"
hallamoore,2017-04-20 22:51:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/092554181bdd42cea1e6198b8f434f62e36df47d,092554181bdd42cea1e6198b8f434f62e36df47d,"[*] Fix the specs

Summary:
Turns out that there was a spec for the IdentityStore that made the
spec runner exit immediately without an error code. I'm not sure what
exactly causes that, so for now I've disabled the spec. This diff
also fixes some specs that have gotten out-of-date since then.

Test Plan: Ran the specs

Reviewers: juan, evan, mark

Reviewed By: evan, mark

Differential Revision: https://phab.nylas.com/D4474"
jstejada,2017-04-20 22:47:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2147703dbc39dc80118a73b94b470f27e8eaf0a,b2147703dbc39dc80118a73b94b470f27e8eaf0a,"[client-app] Allow auth for all providers to bypass cert validation upon cert failure

Summary:
This commit modifies the the account auth settings page to show a special error message
when auth fails with a certificate validation error.

In this case, the new view will allow users to connect even if we can't
validate the certificate by re-running the auth request and forcing it
to trust the certificate using the options new options added in D4470

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4473"
jstejada,2017-04-20 21:44:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/efd6e7c1044d58a207f0533e53e29c85d91afb8a,efd6e7c1044d58a207f0533e53e29c85d91afb8a,"[client-app] Allow gmail auth to bypass cert validation upon cert failure

Summary:
This commit modifies the OauthSigninPage to show a special error message
when auth fails with a certificate validation error.

In this case, the new view will allow users to connect even if we can't
validate the certificate by re-running the auth request and forcing it
to trust the certificate using the options new options added in D4470

NOTE:
When this scenario occurs it means that the client **can't** trust the
certificate, but our cloud servers **can**. If the user decides
to manually trust the certificate, it means that the account settings in
the client and the cloud will be different. This shouldn't be a problem
as long as both can auth with gmail.

Depends on D4470

Test Plan:
Manually throw certificate error, verify that we use the correct credentials
that would bypass cert validation

Reviewers: spang, evan, halla

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4471"
jstejada,2017-04-20 21:37:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/70c37fb98038cd3ea6b5878fa245eb10fe9e8310,70c37fb98038cd3ea6b5878fa245eb10fe9e8310,"[iso-core] Let /auth take options to use insecure tls settings for all providers

Summary:
Specifically let the /auth endpoint for all providers take
`imap_allow_insecure_ssl` and `smtp_allow_insecure_ssl` options so that
the client can bypass verifying certificates if it wants to.

Custom IMAP already takes these options, so we had to add them to gmail
and office365

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4470"
jstejada,2017-04-20 18:00:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa375560ca2c463d61c4fe72bb9bf955699d909d,aa375560ca2c463d61c4fe72bb9bf955699d909d,"[client-app] Include host in cert error msg and use status code 495

Summary: see title

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4465"
jstejada,2017-04-20 17:31:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/99891b59f218f4c1e9d03b17a4986a465fd54014,99891b59f218f4c1e9d03b17a4986a465fd54014,"[client-app] Don't double report auth errors

Summary:
All NylasAPIRequest failures are already reported, so by reporting here
we were double reporting the error

Test Plan: manual

Reviewers: evan, halla, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4464"
jstejada,2017-04-20 16:47:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdde2eacaef766a48fc0f8083991b22bd8b6f7e5,bdde2eacaef766a48fc0f8083991b22bd8b6f7e5,[client-app] Update changelog
jstejada,2017-04-20 02:19:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9230ef714cf407c172c45fd8884c2b9f9f1fb4c,d9230ef714cf407c172c45fd8884c2b9f9f1fb4c,bump(version): 2.0.17
jstejada,2017-04-20 02:18:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/c61b758cb52e531605c5f4e520a4d9b4ce3dfe95,c61b758cb52e531605c5f4e520a4d9b4ce3dfe95,[dev] Prevent from running daily when untracked files present in dir
emorikawa,2017-04-20 01:07:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e715774adcd6cbdde4e1bc896edc23837870a0a,0e715774adcd6cbdde4e1bc896edc23837870a0a,"[client-app] record error location to Mixpanel

Summary:
When the client reports an auth error to mixpanel, it could be because the
cloud encountered an error and then reported that back to the client,
which then reported it to mixpanel.

Before we had no way to know where the error came from.

This may help us diagnose errors that come from the client (due to local
ISPs and such) and those that come from the cloud (an AWS environment)

Test Plan: manual

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4463"
emorikawa,2017-04-20 01:06:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/49304294aa20102eeef7d741542dca013e3878c1,49304294aa20102eeef7d741542dca013e3878c1,"[iso-core] cleanup auth helpers connect fn

Summary:
No logical change. Just code re-org and comments to make it much clearer
what's going on

Test Plan: manual

Reviewers: spang, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4460"
emorikawa,2017-04-20 01:06:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/62bfc0fdd49fc7d27e1fa84c6fa60980eb8e10fd,62bfc0fdd49fc7d27e1fa84c6fa60980eb8e10fd,"[iso-core] always default to showing an error message

Summary:
Don't show the ""Unknown error contact support"" thing anymore. Show the raw
error. Also add the message we show the user and the code we think the
error is to the status page

Test Plan: manual

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4458"
jstejada,2017-04-19 22:44:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/edf46a303a4475451a2f995089c35cf3766b1cd3,edf46a303a4475451a2f995089c35cf3766b1cd3,"[iso-core] Update copy for cert errors

Summary: see title

Test Plan: manual

Reviewers: evan, halla, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4461"
jstejada,2017-04-19 22:20:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/95842b3e31221164305c362efa2c8386feb51708,95842b3e31221164305c362efa2c8386feb51708,"[iso-core] Correctly identify more certificate errors

Summary: see title

Test Plan: manual

Reviewers: halla, evan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4459"
jstejada,2017-04-19 06:41:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a10e614bfd3f983464842363520fecdd9ce8aa3,9a10e614bfd3f983464842363520fecdd9ce8aa3,"[client-app] Upgrade `is-online` package - fix online detection behind proxy

Summary:
Thus upgrade includes https://github.com/sindresorhus/is-online/pull/39
which should fix the offline notification status issues we are seeing in
T8174 for people running Nylas behind a firewall or proxy

Test Plan: manual

Reviewers: mark, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4455"
jstejada,2017-04-19 06:25:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/af2b451de241a34284091bb126bad38a20698adf,af2b451de241a34284091bb126bad38a20698adf,[client-app] Update changelog
hallamoore,2017-04-18 21:58:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9765e4ade05e4ae5c7a0830648cba24116a5b9f,b9765e4ade05e4ae5c7a0830648cba24116a5b9f,"[client-sync, iso-core] Use MIME encoded-word syntax on attachment filenames

Summary:
MIME encoded-word syntax is `=?{charset}?{encoding}?{encoded text}?=`. We need
to decode this syntax when syncing attachments from providers that properly
encode their filenames, and we need to encode our own uploads this way to be
able to load them once the message has been sent.

Fixes T7959

Test Plan:
Synced attachments from O365, sent attachments from NM, tested various
strings with the encode/decode functions (decoding `null` returns an empty string)

Reviewers: khamidou, evan, juan

Reviewed By: juan

Maniphest Tasks: T7959

Differential Revision: https://phab.nylas.com/D4454"
hallamoore,2017-03-30 20:36:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/17802fad0e11f113e387aabb3da2f0032608c8bd,17802fad0e11f113e387aabb3da2f0032608c8bd,"[client-app] Add folder mapping to preferences

Summary:
Adds a preferences page where users can change what categories are
assigned certain roles. This will help fix accounts where we have been
unable to detect sent or trash folders.

Addresses T7905/T7658

Test Plan: manual

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4301"
hallamoore,2017-03-30 20:36:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/0903195ab3de2d1bb5abfd8bac4763e09aa12899,0903195ab3de2d1bb5abfd8bac4763e09aa12899,"[client-sync] Update categories route to handle role updates

Summary:
When a `PUT` request is made with a `role` param, we will remove that
role from any other categories in the account that currently have that
role, and then add it to the target category.

Part of T7905/T7658

Test Plan: manual

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4300"
hallamoore,2017-03-30 20:33:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/250275582b6479c3bdad6738b34f0fe34ab5f240,250275582b6479c3bdad6738b34f0fe34ab5f240,"[client-app] Implemement a generic dropdown menu

Summary:
Useful for fancier rendering than what can be achieved with a `select`
tag. Will be used in another diff for a category selector that has a
search bar at the top.

Test Plan: manual

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4299"
jstejada,2017-04-18 21:38:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/f27ee937598cf1d1f5d3a8c814d4ec2808ba6f20,f27ee937598cf1d1f5d3a8c814d4ec2808ba6f20,bump(version): 2.0.16
emorikawa,2017-04-18 21:14:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a41980e090877303113001bbb702fdc85c0dcad,7a41980e090877303113001bbb702fdc85c0dcad,"[client-app] better handling of startup errors

Summary:
We ALWAYS popped open the damn inspector panel if there was a startup
error in the browser window. This would happen when we got EPERM issues
from the compile cache :(

Reporting from here is tricky since the browser windows don't setup their
error reporter until the NylasEnv.initialize call. Instead we send it to
the backend main process to handle and report.

Since there are multiple windows booting up at once, I needed only 1 of
them to pop up the dialog to users. Calling app.quit() from all 3 windows
in a row with 3 dialog boxes caused the app to not exist since the dialog
boxes stops proper code execution. This would leave the backend process
dead and the windows as zombies forever :(

This can be fixed by only having 1 window show the error message. I chose
just the ""work"" window since this error tends to happen to all windows and
it's the window most likely to be started on launch.

Test Plan:
Manually threw an error in the index.js and asserted that the error
reporter in the backend main process properly received it and emitted.
Also ensured that there was only 1 dialog box and that it fully quit the
app with all windows.

Reviewers: halla, juan

Reviewed By: juan

Subscribers: gleb

Differential Revision: https://phab.nylas.com/D4453"
emorikawa,2017-04-18 20:45:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/a09139332970af0fcab2b0aadbffcd29a92a8087,a09139332970af0fcab2b0aadbffcd29a92a8087,"[client-app] fix occasional EPERM issues on boot on Windows

Summary:
Fixes T8128
See comment on fn

Test Plan: Need steps to reproduce. This is just a defensive solution.

Reviewers: halla, juan

Reviewed By: juan

Maniphest Tasks: T8128

Differential Revision: https://phab.nylas.com/D4449"
spang,2017-04-18 18:38:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/cbcb4d2807d7da8c1d7dbd06c5574aaae7a5a2ad,cbcb4d2807d7da8c1d7dbd06c5574aaae7a5a2ad,[client-app] Remove some more references to N1
jstejada,2017-04-18 05:36:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/437cacd60be3e3b00ed23f5daaccbc84888d3ca4,437cacd60be3e3b00ed23f5daaccbc84888d3ca4,"[client-sync] Correctly pass path when processing bodies

Summary: see title

Test Plan: manual

Reviewers: mark

Differential Revision: https://phab.nylas.com/D4447"
jstejada,2017-04-18 00:44:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9cde5dcc38a39e86a83dd10f3a9cb957706e282,a9cde5dcc38a39e86a83dd10f3a9cb957706e282,"[*] postinstall: Don't try to link cloud specs if pkgs don't exist

Summary: see title

Test Plan: manual

Reviewers: evan, spang, mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4446"
jstejada,2017-04-18 00:37:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/460e0347c49623c535895c6d3f0f8fcae58e971c,460e0347c49623c535895c6d3f0f8fcae58e971c,"[*] Postinstall should install client-sync regardless of private plugins

Summary: see title

Test Plan: manual

Reviewers: spang, evan, mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4445"
emorikawa,2017-04-17 21:10:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a10c40f57a7e7db5ffee6e7676fd5375e29fcef,0a10c40f57a7e7db5ffee6e7676fd5375e29fcef,[cloud-api] fix step param on worker admin dash
emorikawa,2017-04-17 20:16:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/825005d15af7cdfe32ee50545f0120dd8894ddcd,825005d15af7cdfe32ee50545f0120dd8894ddcd,"[cloud-api] revamped worker dashboard

Summary: New worker dashboard

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4435"
jstejada,2017-04-17 18:42:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/20ced8310ae9c7d9bf2d06a2df1e0e45c4f0a438,20ced8310ae9c7d9bf2d06a2df1e0e45c4f0a438,[client-app] Update changelog
jstejada,2017-04-16 02:12:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/03921db62ff5f4f65f29050f988beeca2ac126fe,03921db62ff5f4f65f29050f988beeca2ac126fe,"[client-app] Database malformed errors shouldn't be retryable

Summary:
Given that this error is unrecoverable it shouldn't be retryable.
Additionally, this commit improves error handling for this error in a
few ways:

- Don't delete all databases, just edgehill.db which is the one we know is corrupted. (Use `handleDatabaseUnrecoverableError` instead of `Actions.resetEmailCache`)
- Message the user about the database being reset so the app doesn't restart without notice, and make sure that this message is only displayed once by moving it to the main process

Test Plan: manual

Reviewers: mark, spang, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D4433"
jstejada,2017-04-16 01:37:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/2aa49dfd34391d14779ffbc5ae12e2ba30809e5d,2aa49dfd34391d14779ffbc5ae12e2ba30809e5d,"[client-app] When resetting database, make sure to re-init db reader

Summary: see title

Test Plan: manual

Reviewers: halla, mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4432"
jstejada,2017-04-15 23:54:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/09f8561a2c4c47292c8d510a0788ee7a3fb1c95e,09f8561a2c4c47292c8d510a0788ee7a3fb1c95e,"[client-app] Correctly handle db malformed errors in main process

Summary:
This commit addressess issue T8135, which prevents the app from
starting.

This was happening because when 3111c166 landed, we added database
access from the main (backend) electron process to be able to read the
identity now stored in the database: https://github.com/nylas/nylas-mail/commit/3111c166#diff-1efa26fa0ae1603366b2c0033d971028R44
However, we omitted to add any error handling, so if the database failed to open
due to a database malformed error (which it does:
https://sentry.io/nylas/nylas-mail/?query=is%3Aunresolved+release%3A2.0.14+malformed&statsPeriod=14d), the app will just fail to start,
given that this happens during the initialization of the main process.
Additionally, the fact that we had no error handling increased the error
reports for malformed errors given that we would never handle them, so
every-time we opened the app we would report the same error

This commit adds the same error handling we have in the DatabaseStore
and moves the code around so it's available both in the main and
renderer processes.

After this commit, if the database fails to open during main process
initialization, due to malformed errors or others, we will correctly
inform the user that the database is corrupted, rebuild it, and restart
the app.

Test Plan:
manually throw errors during setup, verify that we handle them
correctly

Reviewers: mark, spang, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D4431"
jstejada,2017-04-15 22:49:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/c54c978768ca3883456975535ec9bb1988a501b5,c54c978768ca3883456975535ec9bb1988a501b5,"[client-app] Remove dead mail rules code

Summary:
Which was arguably already a code smell being inside the
DatabaseStore

Test Plan: manual

Reviewers: mark, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4430"
jstejada,2017-04-14 20:37:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/11493dfa017fb39e8a9fb5fb57860fffacf6b2fc,11493dfa017fb39e8a9fb5fb57860fffacf6b2fc,[client-app] Update changelog
jstejada,2017-04-14 20:36:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b5468433ade6c91a47f7eff8aff0e126938df82,3b5468433ade6c91a47f7eff8aff0e126938df82,[client-app] Update changelog
jstejada,2017-04-14 04:46:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/17882eb9ecd0dbc96942127d06ca50be6dd7d9c7,17882eb9ecd0dbc96942127d06ca50be6dd7d9c7,"[client-sync] Prevent duplicate accounts and sync workers

Summary:
After https://github.com/nylas/nylas-mail-all/commit/008cb4c, the shape of
account.connectionSettings changed, which means that ids for accounts
will also change, given that they are based on the connection settings (see
Account.hash()).

This is fine in most cases, except for accounts that were running on a
version of Nylas Mail before 008cb4c, then upgraded to a version
after 008cb4c, and then re-authed their account.
In this scenario, re-authing the account will create a second account with
a different `id` but with the same email address, along with an extra
sequelize database, and will start a second SyncWorker for the same
account. App-side, the `AccountStore` will correctly overwrite the first account,
so users would correctly see just 1 account in the sidebar. However, given
that 2 SyncWorkers would be running for the same account,
message ids would collide in edgehill.db and this would cause
threads to disappear from the ui as if they were being deleted.

To fix this, we need to do 2 things:

- Upon app start, we remove any duplicate accounts that might have been created due to this bug before starting any sync workers
- If we detect that we are going to create a duplicate account upon auth success, we delete the old account first. This will effectively cause sync to restart for the account.

Test Plan:
Verified problem: Checked out a commit before 008cb4c, authed an account, checked out master, re-authed account, verified that duplicate accounts are created.

Then test 2 scenarios:
- With duplicate accounts present, checked out this commit, verified that duplicate account would be removed and sync would function normally.
- With an account authed on a build before 008cb4c, checked out this commit, re-authed the account, and verified that duplicate account wouldn't be created

Reviewers: mark, halla, khamidou, spang

Reviewed By: spang

Subscribers: tomasz

Differential Revision: https://phab.nylas.com/D4425"
jstejada,2017-04-14 07:58:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/9763b8684e81a9d149643dec2414075afc0a8a67,9763b8684e81a9d149643dec2414075afc0a8a67,"[client-sync] Correctly remove sync worker reference when destroying it

Summary:
By nullifying the key inside `workersByAccountId` we would attempt to
access accountIds that no longer existed in other parts of the code by
using Object.keys()

This makes it so we correctly completely remove the record from the map

Test Plan: manual

Reviewers: halla, spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4426"
jstejada,2017-04-14 04:36:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a9f4445e3d3fb8b352aa8bacf71c82efc27274f,0a9f4445e3d3fb8b352aa8bacf71c82efc27274f,[client-sync] Init SyncProcessManager with Identity
jstejada,2017-04-13 21:02:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/c853cad0c31acb04279118da6ec348ea1d74f6db,c853cad0c31acb04279118da6ec348ea1d74f6db,[client-app] Update changelog
jstejada,2017-04-13 20:27:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1612c7897b8a9e747c257cd3f402b93954b5b53,a1612c7897b8a9e747c257cd3f402b93954b5b53,[client-app] Update changelog
jstejada,2017-04-13 19:27:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/db752260d7e3eebca8d6bf35b66e04040f4de768,db752260d7e3eebca8d6bf35b66e04040f4de768,"[client-app] Upload nupkg with correct name for win32 autoupdater to work

Summary: See title

Test Plan: manual

Reviewers: spang, khamidou, halla

Reviewed By: khamidou, halla

Differential Revision: https://phab.nylas.com/D4421"
jstejada,2017-04-13 18:41:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b41b1eb8452148726515d13f2310d36028a3a19,2b41b1eb8452148726515d13f2310d36028a3a19,"[client-app] Correctly handle window.unhandledrejection events

Summary:
It seems that sometimes we get events that don't have `event.detail.reason`.
This commits tries to make our best guess, or report info about the event shape

Test Plan: manual

Reviewers: mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4420"
jstejada,2017-04-13 18:25:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e52af21c52eda85d8db7ec9b7e9768cb1f64fcf,3e52af21c52eda85d8db7ec9b7e9768cb1f64fcf,[client-app] Update changelog
jstejada,2017-04-13 17:53:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e041c469b6a7c21327a669b8c3d0e38014a5979,2e041c469b6a7c21327a669b8c3d0e38014a5979,"[client-app] Prevent NM from overwriting N1 binary on windows

Summary:
This changes the `name` option we pass to `electron-windows-installer`,
which makes it so that the app is installed under
`AppData\Local\NylasMail` instead of `AppData\Local\Nylas` where the
old N1 binary lives

Test Plan: manually tested the builds from `ci-test-4` branch on the surface machine

Reviewers: mark, spang, khamidou, halla

Reviewed By: khamidou, halla

Differential Revision: https://phab.nylas.com/D4419"
jstejada,2017-04-13 17:46:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f13b5fe8005f792602ba029140b4e081f72c284,3f13b5fe8005f792602ba029140b4e081f72c284,"[client-app] Fix runtime error in FetchFolderList

Summary: See title

Test Plan: manual

Reviewers: mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4418"
jstejada,2017-04-13 03:38:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/9076bd007ed16118cabe7700e1cd3528f5c62d8d,9076bd007ed16118cabe7700e1cd3528f5c62d8d,"[client-app] Prevent old N1 config from getting wiped when installing Nylas Mail

Summary:
Due to a legacy migration system, users that had previously installed
old N1 (1.5.0) would get their N1 config wiped after installing Nylas
Mail (2.0) in most cases.

See https://github.com/nylas/nylas-mail/blob/n1-pro/src/browser/nylas-pro-migrator.es6 for details

Fixes T8096

Test Plan: manual

Reviewers: halla, spang, mark

Reviewed By: mark

Maniphest Tasks: T8096

Differential Revision: https://phab.nylas.com/D4417"
jstejada,2017-04-12 21:10:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/06289a1bb5b2cdf7b94b98337cc8ad7c9e7cb7df,06289a1bb5b2cdf7b94b98337cc8ad7c9e7cb7df,"[*] Remove useless docs

Summary:
This makes grepping the codebase really painful. We don't need these
docs here

Test Plan: manual

Reviewers: mark halla spang evan

Subscribers:"
jstejada,2017-04-12 20:12:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/b922523f51a49a28aac8eb9a15170f4a33d1878d,b922523f51a49a28aac8eb9a15170f4a33d1878d,[client-app] Update changelog
jstejada,2017-04-12 19:08:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/ce189cea0cda785fd58b9f2d1b405936e056bb35,ce189cea0cda785fd58b9f2d1b405936e056bb35,"Revert ""[client-sync] Poll for gmail attribute changes from `_mailListenerIMAPConn`""

This reverts commit d864efe76dd1d85efee1de3a7fd05b4737d8356d.

See https://phab.nylas.com/D4410 for details on why it was reverted"
jstejada,2017-04-12 17:36:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/21e962fc2de56a836b20b781ad816dd2605e73b3,21e962fc2de56a836b20b781ad816dd2605e73b3,"[client-app] Don't double report unhandled rejections

Summary:
We listen for unhandled rejections on both the `process` and the `window`. From
my understanding, both are necessary because some errors might escape
one or the other. However, most errors get caught by both handlers, so
we don't want to double report them to sentry (or the console).

To prevent this, this commit debounces the unhandled rejection handler
for a very short time so that the same error only gets reported once.
Additionally, it rate limits reports to sentry based on the stack trace

Test Plan: manual

Reviewers: mark, halla

Reviewed By: mark, halla

Differential Revision: https://phab.nylas.com/D4413"
jstejada,2017-04-12 17:21:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/e19ed52fbc3c57343c8c027bf4cd73f16a26ff7a,e19ed52fbc3c57343c8c027bf4cd73f16a26ff7a,"[client-app] Fix unhandled rejection handling (fix ipc parse error)

Summary:
Previously, we were listening for unhanlded rejections on both the
`window` and the `process`. However, the window handler didn't receive
an error as a parameter, but rather a window event. When trying to
report this event and sending it over IPC we would get an ipc parse
error.

This commit makes it so we correctly report the error instead of the
window event.

Test Plan: manual

Reviewers: mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4412"
jstejada,2017-04-12 16:30:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/068847af36cd4a4b610e36e5468d7e7fb65e27bb,068847af36cd4a4b610e36e5468d7e7fb65e27bb,"Revert ""[client-sync] Transaction-ify processMessage""

Summary:
This reverts commit e764545bd856467885ed60446b31ace27ab6f489.

Adding an overarching transaction to `processMessage` is causing
database locked errors when processing deltas, specifically when trying
to write to the Transaction table, given that that write happens
asynchronously inside the execution of `processMessage`, but doesn't
have access to its transaction. See T8117

Given that the performance gains from wrapping messgae processing in a
transaction were not significant, let's revert this to prevent db
locking issues

Test Plan: manual

Reviewers: halla, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4411"
jstejada,2017-04-11 20:56:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b8e8ed3a68bf9db2a5751c4de1f7f8e4ac18c42,7b8e8ed3a68bf9db2a5751c4de1f7f8e4ac18c42,"[client-app] Rate limit database malformed error reports to sentry

Summary:
We were reporting 1m+ of these events, heavily contributing towards our
quota

Test Plan: manual

Reviewers: halla, mark

Reviewed By: halla, mark

Differential Revision: https://phab.nylas.com/D4406"
jstejada,2017-04-11 22:41:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/90ab24aca433c597502526153b31d86d121ff09c,90ab24aca433c597502526153b31d86d121ff09c,[client-app] Update changelog
jstejada,2017-04-11 19:30:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/7966dd7117a2ca3cbe2a8b3ad43ee9bb2d605475,7966dd7117a2ca3cbe2a8b3ad43ee9bb2d605475,"[client-sync] Ensure allmail folder exists before trying to access it

Summary:
When checking for flag updates for gmail accounts, when syncing for the
first time the all mail folder won't be available because we haven't
fetched the folder list, so it will throw a runtime error

Test Plan: manual

Reviewers: mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4405"
hallamoore,2017-04-11 19:03:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/41835cf18e7db68a33805cf0579c9ca7c4731b00,41835cf18e7db68a33805cf0579c9ca7c4731b00,"[client-app] Fix SyncbackMetadataTask dependency

Summary:
Add a sequentialId check in isDependentOnTask() so that the first
SyncbackMetadataTask won't get blocked on other SyncbackMetadataTasks
in the queue for the same pluginId.

Addresses T8112

Test Plan: Manual

Reviewers: spang, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4404"
hallamoore,2017-04-11 18:09:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb4af5a13051c62b4fbe19da1b5d8243105a3bd4,eb4af5a13051c62b4fbe19da1b5d8243105a3bd4,[isomorphic-core] Add missing .default to require
hallamoore,2017-04-05 19:01:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f7d0976130e657f587dfdd140ff3a081ca64fe0,3f7d0976130e657f587dfdd140ff3a081ca64fe0,"[isomorphic-core] Move buildMime to MessageUtils, add includeBcc option

Summary:
Since buildMime isn't always used explictly for the send operation (we
mostly use it for stuffing the sent folder, which is a separate
operation), move it to MessageUtils. Additionally, add an includeBcc
option. We don't want the BCC header to be visible on outbound messages,
but it needs to be present on the version that is saved to the sent
folder.

When we weren't including the BCC header in the sent folder version, we
were getting an id mismatch between our optimistic message and the
message that gets processed by the sync loop (because we include the bcc
participants when computing the id hash). When the sent message was a
reply, the optimistic message included the threadId, and this had the
side effect of leaving both versions of the sent message in the thread.
Since the optimistic message never receieved it's imap UID, any action
performed on the thread would fail with the missing UID error as seen in
T7941. Adding this BCC header will allow us to compute the proper id
hash and reconcile the synced message with the optimistic message.

Test Plan: manual

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4365"
hallamoore,2017-04-05 18:17:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ba48489d64075444790ce35d121285b93821ba1,4ba48489d64075444790ce35d121285b93821ba1,"[*] MessageFactory -> MessageUtils, SendUtils -> ModelUtils

Summary: Rename some util files

Test Plan: manual

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4364"
hallamoore,2017-04-11 00:50:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ca0bfb48be84063e3dcd47a130f6f857ca3a203,3ca0bfb48be84063e3dcd47a130f6f857ca3a203,"[client-sync] Don't report stuck sync processes to Sentry

Summary: Just to mixpanel. Addresses T8095

Test Plan: Meh

Reviewers: mark, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4403"
jstejada,2017-04-11 17:37:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d497041b94bab2105518d4aee179ddd8c5260d8,9d497041b94bab2105518d4aee179ddd8c5260d8,[client-app] Update changelog
hallamoore,2017-04-10 19:35:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/d864efe76dd1d85efee1de3a7fd05b4737d8356d,d864efe76dd1d85efee1de3a7fd05b4737d8356d,"[client-sync] Poll for gmail attribute changes from `_mailListenerIMAPConn`

Summary:
Normally, the imap connection emits an 'update' event when there are any
flag changes. Gmail, however, only emits the 'update' event when there
are new or removed messages. If there's a fairly large batch size being
synced in the sync loop, we don't want to wait until the end of that to
check if the highestmodseq has changed. To get around this, this diff
updates the new mail listener connection to periodically poll for the
highestmodseq and trigger the same update handler when changes are
detected.

Test Plan: manual

Reviewers: evan, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4397"
hallamoore,2017-04-10 21:52:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/80bebe5c0c1b19667eba79e4b477c08165c24855,80bebe5c0c1b19667eba79e4b477c08165c24855,"[client-app] Re-add imap to the onboarding accounts page

Summary:
Put the IMAP option back on the provider selection page within
onboarding. Also remove the 'hidden' property on account types since I
don't think we'll be using it for any other providers, and remove the
'Add Custom IMAP Account' from the application menu.

Addresses T8097

Test Plan: Manual

Reviewers: spang, mark, juan

Reviewed By: mark, juan

Differential Revision: https://phab.nylas.com/D4402"
jstejada,2017-04-10 21:36:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa3fd488c37c2b743ef9f418c176fce4f75f1a86,fa3fd488c37c2b743ef9f418c176fce4f75f1a86,"[client-app] Fix delta streaming connection retries

Summary:
Previously, every time our NylasLongConnection changed its status to
`connected`, we would reset our backoff scheduler, assuming that
every time our status changed to `connected` it meant that we would not
receive any errors.

However, if our backend is down or overloaded (or returning 401s like in
our recent outage), we would do the following:

1. Establish connection, change status to `connected`
2. Reset backoff scheduler
3. Receive error
4. Close connection
5. Schedule next retry using backoff scheduler. Delay will be 1s or less, because scheduler was reset in 2.
6. Retry after delay,
7. Repeat from 1., ad infinitum

This caused us to consistantly hammer our servers and render our
exponential backoff useless.

This commit makes it so we conly reset the backoff scheduler when we
actually receive deltas, and increments the max backoff to 10 minutes

Test Plan:
run against local n1Cloud, manually return 401s from the api, verify that we
didn't backoff at all before this diff, verify that we backoff correctly after
this diff

Reviewers: mark, spang, halla

Reviewed By: mark, spang, halla

Differential Revision: https://phab.nylas.com/D4401"
hallamoore,2017-04-05 18:00:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/1cd9e7e23e10cca4056bc58830b5aeed76fedf70,1cd9e7e23e10cca4056bc58830b5aeed76fedf70,"[isomorphic-core] Handle weird MIME edge case with @ symbol

Summary:
Something weird happens with the mime building when the participant name
has an @ symbol in it (e.g. a name and email of hello@gmail.com turns
into 'hello@ <gmail.com hello@gmail.com>'), so replace it with
whitespace.

Test Plan: manual

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4363"
hallamoore,2017-04-07 20:59:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac7743b4999a0c7a59cfaade4303999083d94275,ac7743b4999a0c7a59cfaade4303999083d94275,"[cloud-workers] Reminders: add 'SINCE' to imap search query

Summary:
Reminders have been seeing a lot of socket timeouts, and we have a hunch
that it's because we're spending a lot of time in the imap search. To
prevent us from having to search the entire Inbox or All Mail box, this
diff adds a 'SINCE' argument to the search query. Any new replies will
be after the original message was sent. We also search a day past that
to avoid any potential timezone issues.

Test Plan: manual

Reviewers: evan, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4396"
emorikawa,2017-04-08 00:37:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe77466356d370e9bb80420cdd8668bdf540f190,fe77466356d370e9bb80420cdd8668bdf540f190,[cloud-workers] add DataDog StatsD for heartbeats
emorikawa,2017-04-07 20:06:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/3212faa0ce1264fd7eb0f69b315d35d8a2f988c7,3212faa0ce1264fd7eb0f69b315d35d8a2f988c7,[cloud-workers] restart automatically on unhandeld rejections
jstejada,2017-04-07 19:14:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/3844c4e0c4d4f53d67077797c0efd0ced141486a,3844c4e0c4d4f53d67077797c0efd0ced141486a,[client-app] Update changelog
jstejada,2017-04-07 18:37:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b167e3700601fef16834028a608d46968f309e9,0b167e3700601fef16834028a608d46968f309e9,"[client-app] Ensure SyncbackMetadataTask dependency to prevent version conflicts

Summary:
Previously, SyncbackMetadataTasks for the same plugin did not depend on
each other, so they could try to modify the same piece of metadata
concurrently, which would likely produce version conflict errors.

This was happening with send reminders because we were queuing 2 of
these tasks back to back upn send success. Adding this dependency fixes
the version conflict errors when setting the metadata

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4393"
hallamoore,2017-04-07 18:37:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/919a6675353e3e0c843c97040cb231a57d8dd64d,919a6675353e3e0c843c97040cb231a57d8dd64d,"Revert ""[client-app] Fix version conflict with send-reminders""

This reverts commit fa678425067a963b722f55c65ae896240c58b570.

The actual problem was that SyncbackMetadataTasks needed a dependency
structure"
hallamoore,2017-04-07 18:08:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/726140a52d1515741bc3b7533f869df41458347b,726140a52d1515741bc3b7533f869df41458347b,"[client-private-plugins] Reminders: make sure accountId query isn't null

Summary:
There was a call to `asyncBuildMetadata` that didn't pass in an
accountId and caused the query to fail. Rather than pulling the
accountId out of the message separately wherever we call this function,
just pull the accountId out of the message within `asyncBuildMetadata`
itself.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4392"
jstejada,2017-04-07 02:32:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/20353c19a7d9085661325ee640b748fb8ceabffc,20353c19a7d9085661325ee640b748fb8ceabffc,bump(version): 2.0.7
khamidou,2017-04-07 01:54:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/de2b7ad9c821054678b5d3f038e67fb6972e8da3,de2b7ad9c821054678b5d3f038e67fb6972e8da3,"[cloud-workers] [send-later] Fix send later token expiration

Summary:
Fixes T8076. So, the Gmail OAuth API returns us an expiration time in milliseconds, but we convert it to seconds everywhere, except in the cloud-api. This caused us to never refresh tokens because we'd be comparing seconds to milliseconds.

Fix this by converting the `expiry_date` from our credentials to seconds.

Test Plan: Tested manually. Will do more testing tomorrow, after my credentials expire.

Reviewers: evan, juan

Reviewed By: evan, juan

Maniphest Tasks: T8076

Differential Revision: https://phab.nylas.com/D4390"
jstejada,2017-04-07 01:48:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e727761c6a5ad0af09653785c56d214cdb8b1d2,4e727761c6a5ad0af09653785c56d214cdb8b1d2,"[client-plugins] Correctly scope categories by acct when setting reminder

Summary:
Previously, if you had a Gmail account and an O365 account,
and set a reminder on an O365 message that wasn't in the inbox (e.g. a
completely new draft, or a draft in sent), we would set the metadata for
that message incorrectly indicating that the folder name was `[Gmail]/All Mail`

This was because we were querying for Categories not scoped by accountId

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4391"
emorikawa,2017-04-07 01:22:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/8473f96a19698a0b5a4eba49fe99f3c1ca8e75bc,8473f96a19698a0b5a4eba49fe99f3c1ca8e75bc,"[iso-core, cloud-*] catch JSON parse errors in DB columns

Summary:
MySQL would insert bad JSON due to emoji errors. This would cause JSON
parse errors and prevent us from ever reading objects from the DB. We now
catch and return null instead with an error which will at least let the
query complete to let us isolate and deal with the malformed obeject (like
destroy it)

Test Plan: manual

Reviewers: spang, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4389"
emorikawa,2017-04-07 00:42:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/e876c36898bbda4d71d55232054ad2e3b97f5cf8,e876c36898bbda4d71d55232054ad2e3b97f5cf8,"[cloud-workers] rename ExpiredDataWorker -> CloudWorker & rearrange src

Summary:
- ExpiredDataWorker is now CloudWorker
- `/workers` got moved under `src`

Test Plan:
Manual
I also checked for usages of `path`, `require`, `__dirname` in each of the
workers

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4388"
spang,2017-04-06 23:52:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/8aa983a9594c551c08b0a688b6536a8ca8648b7b,8aa983a9594c551c08b0a688b6536a8ca8648b7b,"[cloud-*] Fix options for setting MySQL connection charset

FML: https://github.com/sequelize/sequelize/issues/1220"
spang,2017-04-06 22:57:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/9cf20e119af21bba8e2b075d1c04dc7cebed9af2,9cf20e119af21bba8e2b075d1c04dc7cebed9af2,"[cloud-*] Switch MySQL charset to utf8mb4

Summary:
We need this in order to be able to store 4-byte emoji and other
extended unicode characters in the database.

Test Plan: deploy to staging - need the change that sets the connection charset on staging :(

Reviewers: khamidou, juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D4387"
jstejada,2017-04-06 22:48:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/94cb722ec0b3a976cdc8ae003402e67b7cacffc2,94cb722ec0b3a976cdc8ae003402e67b7cacffc2,"[client-plugins] Delete drafts after they are sent later

Summary:
This commit adds a new module to the send-later plugin that listens to
all drafts with send later metadata and destroys them whenever it
detects that their expiration was cleared, not by the user

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4386"
emorikawa,2017-04-06 22:18:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/83320348626d5fba144e5eb9659703624b6cc48f,83320348626d5fba144e5eb9659703624b6cc48f,[cloud-workers] fix connection typo
emorikawa,2017-04-06 22:16:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/10301111ae8406596acd503329df3c1e40bbb8ef,10301111ae8406596acd503329df3c1e40bbb8ef,[cloud-api] change worker admin color
khamidou,2017-04-06 22:10:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe21ae891e64731fe9366dc5f4f2b789f0f360a7,fe21ae891e64731fe9366dc5f4f2b789f0f360a7,"[cloud-workers][send-later] 🔪 with 🔥 duplicate sent messages

Summary: Finally figured out the right way to get Gmail to remove duplicated sent messages.

Test Plan: Tested manually.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4385"
emorikawa,2017-04-06 22:09:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d43a5c56d133a801f527f175a3109f1ef686c92,9d43a5c56d133a801f527f175a3109f1ef686c92,"[cloud-workers] add a retryAt field to do exponential backoffs

Summary:
Add exponetial backoff and cleaned up some functions in the worker.
We now have a `retryAt`. Didn't use the `ExponentialBackoff` class because
that needs to stay in memory the whole time and isn't designed to be
backed by a retryAt field. Just implemented 2^x backoff.

Test Plan: Manual. Threw a `RetryableError`

Reviewers: juan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4384"
hallamoore,2017-04-06 20:19:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa678425067a963b722f55c65ae896240c58b570,fa678425067a963b722f55c65ae896240c58b570,"[client-app] Fix version conflict with send-reminders

Summary:
The 409 version conflict error was due to an actual version conflict
when we were syncing back metadata. When you set a reminder on a draft
that hasn't been sent yet, we initially set just the expiration date in
the metadata. Then, when the draft is actually sent, we update the
metadata with some fields that aren't finalized until after the send
(e.g. messageIdHeader, subject, replyTo). However, this second update
was being made before we received the delta for the first update, so the
version number in the second update was incorrect.

To fix this, this diff adds some special handling in the metadata route
to detect if the metadata version is off by one. If data was only added,
not changed, then we merge the two versions together.

Test Plan: manual, specs

Reviewers: juan, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4383"
emorikawa,2017-04-06 22:00:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ca21c4d89e5ee5e48d8a1e4964eb73478138c33,6ca21c4d89e5ee5e48d8a1e4964eb73478138c33,"[cloud-workers] implement IMAP connection pool

Summary: Adds IMAP connection pool to workers

Test Plan: manual

Reviewers: mark, spang, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4379"
jstejada,2017-04-06 18:57:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/111bc09d96b4e67b58a034a07700ddb0ffdccda2,111bc09d96b4e67b58a034a07700ddb0ffdccda2,"[dev] Ensure daily script grabs current version after pulling latest changes

Summary: see title

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4378"
jstejada,2017-04-06 20:55:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/79565662fa92e291e1a0220aa32e0ac032b05557,79565662fa92e291e1a0220aa32e0ac032b05557,"[cloud-workers] Fix runtime error trying to iterate over undefined

Summary: see title

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4382"
jstejada,2017-04-06 20:25:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/3519c80d13b19f9e502e5c2a5ed278edb50540e7,3519c80d13b19f9e502e5c2a5ed278edb50540e7,"[cloud-workers] Properly generate metadata deltas when clearing expiration

Summary:
Apart from not making bulk updates to metadata, we need to update both
the expiration column and the expiration field inside the json value

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4381"
jstejada,2017-04-06 20:22:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/d24205bee65b132d339e94a878677fb8f878bbee,d24205bee65b132d339e94a878677fb8f878bbee,"[client-app] Always fetch and update identity regardless of env

Summary:
This was annoying because we wouldn't fetch the identity when running `local`
env which produced all sorts of errors

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4380"
jstejada,2017-04-06 17:49:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/604342bd19b479d9b999500363f2440ed99ceaa2,604342bd19b479d9b999500363f2440ed99ceaa2,"[cloud-workers] Don't use bulk updates in foreman in order to generate deltas

Summary: see title

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4373"
jstejada,2017-04-06 17:20:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8377ad4b1e0e30ad85d7e0985dd54c800e98208,d8377ad4b1e0e30ad85d7e0985dd54c800e98208,"[cloud-workers] Increment default imap conn socket timeout in cloud workers

Summary:
We are seeing a lot of imap connection timeout errors. Let's increment
this to a high timeout to account for a large variety of imap servers.

Test Plan: manual

Reviewers: mark, halla, evan, spang

Reviewed By: evan, spang

Differential Revision: https://phab.nylas.com/D4371"
emorikawa,2017-04-06 18:54:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/de39d03f5a83c47e3cf97a3a29c3e6e068206333,de39d03f5a83c47e3cf97a3a29c3e6e068206333,"[cloud-*] add account to logging & fix typo

Summary:
So our logs can have an email and provider field. Also most workers need
the account

Test Plan: manual

Reviewers: halla, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4377"
emorikawa,2017-04-06 18:53:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/6dd4917b0fb46d29163f2845c08eb8f75f7c6e51,6dd4917b0fb46d29163f2845c08eb8f75f7c6e51,"[cloud-workers] make send later not retryable after successful send

Summary: mark the task as not retryable

Test Plan: manual

Reviewers: halla, juan, spang

Reviewed By: juan, spang

Differential Revision: https://phab.nylas.com/D4376"
emorikawa,2017-04-06 18:53:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/2bfa04487eb674131c03a920b64b6ad2e1aa3e43,2bfa04487eb674131c03a920b64b6ad2e1aa3e43,"[iso-core, cloud-*] move generate XOAuth2 & fix first auth usage

Summary:
We were not generating the XOAuth2 token on the first go when connecting
accounts. This would cause the first send later to fail. Since this
happens in ISO core, we needed to move the function out of cloud-core and
import from other places that use it

Test Plan: Manual

Reviewers: khamidou, juan, halla, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4375"
emorikawa,2017-04-06 18:02:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/a79456e7abe9c468e97619883a094717852a5db1,a79456e7abe9c468e97619883a094717852a5db1,[cloud-workers] fix stauts -> status
emorikawa,2017-04-06 18:01:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/19e45c2e59c68deeb33bf8c31facb6dc75b69f07,19e45c2e59c68deeb33bf8c31facb6dc75b69f07,[cloud-workers] adjust retry constants & fix orphan cleanup
jstejada,2017-04-06 05:35:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc1cef82a48478874dda34e7389cccc693de87ca,bc1cef82a48478874dda34e7389cccc693de87ca,"[isomorphic-core] Ensure IMAPConnPool uses updated account credentials

Summary:
Previously, we would initialize an `AccountPool` with an account
instance and reference the account as an instance variable. Then,
every time we created a connection, we used the account we had a
reference to obtain the credentials.

However, if the credentials on the account changed, e.g. when we refresh
the access token for gmail accounts, the connection pool would never
realize that the account had new credentials and always try to create
the connection with the old credentials, causing the sync worker to
enter an error loop of `Invalid credentials` errors

To fix this, we could reload the account every time we try to create a
connection, but it seems that the fresh credentials should just be
passed every time we create connections without the pool having to be
aware of potential changes under the rug.

This commit makes it so the pool no longer holds a reference to the
account, but rather it is passed in every time we check out a connection

Test Plan: manual. how did this even work before? :(

Reviewers: evan, halla, spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4370"
jstejada,2017-04-06 00:30:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/dfe59d417cdf11b01cd5e7d6e8831216bb0714d1,dfe59d417cdf11b01cd5e7d6e8831216bb0714d1,"[client-plugins] Correctly syncback metadata for send later

Summary:
Turns out we still need to call `Actions.ensureDraftSynced` so that the
metadata gets synced to n1Cloud. The correct way to do this is just to
queue the correct SyncbackMetadata tasks, because we don't actually
syncback drafts at all, but in the interest of releasing, let's fix it
like this

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4369"
spang,2017-04-06 00:34:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/008cb4cd9c0016ba14a338a2793a2f946dceae1b,008cb4cd9c0016ba14a338a2793a2f946dceae1b,"[*] Revamp SSL options (including user-facing)

Summary:
Previously, the generic IMAP auth screen presented one security option to
users: ""Require SSL"". This was ambiguous and difficult to translate into
the correct security options behind the scenes, causing confusion and problems
connecting some accounts.

This patch does the following:
* Separates security settings for IMAP and SMTP, as these different protocols
  may also require different SSL/TLS settings

* Reworks the generic IMAP auth page to allow specifying security settings
  with higher fidelity. We looked at various different email apps and decided
  that the best solution to this problem was to allow more detailed
  specification of security settings and to ease the burden of more options
  by having sane defaults that work correctly in the majority of cases.
  This new screen allows users to pick from ""SSL / TLS"", ""STARTTLS"", or ""none""
  for the security settings for a protocol, and also to instruct us that
  they're OK with us using known insecure SSL settings to connect to their
  server by checking a checkbox.

  We default to port 993 / SSL/TLS for IMAP and port 587 / STARTTLS for SMTP.
  These are the most common settings for providers these days and will work
  for most folks.

* Significantly tightens our default security. Now that we can allow folks to
  opt-in to bad security, by default we should protect folks as best we can.

* Removes some now-unnecessary jank like specifying the SSLv3 ""cipher""
  in some custom SMTP configs. I don't think this was actually necessary
  as SSLv3 is a protocol and not a valid cipher, but these custom
  configs may have been necessary because of how the ssl_required flag was
  linked between IMAP and SMTP before (and thus to specify different
  settings for SMTP you'd have to override the SMTP config).

* Removes hard-coding of Gmail & Office365 settings in several
  locations. (This was a major headache while working on the patch.)

This depends on version 2.0.1 of imap-provider-settings, which has major
breaking changes from version 1.0. See commit for more info:
https://github.com/nylas/imap-provider-settings/commit/9851054f9153476b6896d04893a40b4febc8986e

Among other things, I did a serious audit of the settings in this file and
""upgraded"" a few servers which weren't using the SSL-enabled ports for their
provider to the secure ones. Hurray for nmap and openssl.

Test Plan: manual

Reviewers: evan, mark, juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4316"
hallamoore,2017-04-05 23:04:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/573388258e8f29832a79e96a6727048df6348884,573388258e8f29832a79e96a6727048df6348884,bump(version): 2.0.2
emorikawa,2017-03-06 19:45:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/861301009a58ef46fd2ac4b10fee76c2ab43b314,861301009a58ef46fd2ac4b10fee76c2ab43b314,"[client-app] Updates to feature limiting

This is a squash of a bunch of commits releated to feature limiting.
Includes making the upgrade path seamless by accessing billing through a
WebView and making sure that the feature is enabled after upgrading, or
canceled if the upgrade path is stopped by the user in any way.

Included diffs
---------------
Differential Revision: https://phab.nylas.com/D4078
Differential Revision: https://phab.nylas.com/D4136
Differential Revision: https://phab.nylas.com/D4137
Differential Revision: https://phab.nylas.com/D4143
Differential Revision: https://phab.nylas.com/D4147
Differential Revision: https://phab.nylas.com/D4171
Differential Revision: https://phab.nylas.com/D4173"
emorikawa,2017-04-05 22:57:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/a89612d878b14ea33c0402dbc5ceecc5e4734b8c,a89612d878b14ea33c0402dbc5ceecc5e4734b8c,[cloud-api] basic view of CloudJobs
hallamoore,2017-04-05 21:32:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c83b145c3d96b5668d1c0d113b8648e5e3c3374,9c83b145c3d96b5668d1c0d113b8648e5e3c3374,"[client-sync] Fix syncWorker arg

Summary: It needs to be wrapped in an object.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4367"
emorikawa,2017-04-05 22:12:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/55beda2d630abf95751e1967b5c6f1a16ef0451c,55beda2d630abf95751e1967b5c6f1a16ef0451c,[cloud-workers] fixes to metadata on workers
jstejada,2017-04-05 20:10:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0adfd7619585fc5a4f657f528c47bdc43772631,e0adfd7619585fc5a4f657f528c47bdc43772631,"[client-sync] Fix runtime error when getting sync activity for account

Summary:
Make sure SyncActivity.getLastSyncActivityForAccount returns a sensible
default to prevent runtime errors when the SyncProcessManager uses it

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4366"
jstejada,2017-04-05 07:22:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc5edd24356dda267b3e39b284eb23464589d607,fc5edd24356dda267b3e39b284eb23464589d607,"[iso-core] IMAPConnectionPool now correctly disposes connections `onDone`

Summary:
Previously, calling the IMAPConnectionPool `onDone` callback when checking out a connection would just return the connection to the pool without re-establishing it the next time we checked it out of the pool.

When the `onDone` callback was called in an error scenario, this had the unintended consequence of returning a bad connection to the pool, and then re-using this bad connection. The only scenario when the connection was re-established was if `onConnected` threw an error, but if the connection was kept open outside the scope of onConnected, this logic would never run.

To make things simpler and more consistent, `onDone` will always destroy all connections and connections will always be re-established from scratch every time they are checked out of the pool. The pool acts more as a limit to the number of connections per account, than an actual shared pool of connections.

Test Plan: manual

Reviewers: evan, spang, halla, mark

Reviewed By: halla, mark

Differential Revision: https://phab.nylas.com/D4360"
jstejada,2017-04-05 06:22:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/fdc654b7b2396a458f741c0399bf55a8a8a1911c,fdc654b7b2396a458f741c0399bf55a8a8a1911c,"[client-sync] Prevent IMAP connection leaking in sync worker

Summary:
When the sync worker got stuck inside `performSync`, we would never
release the connection back to the connection pool. We would then try to
start a new sync worker, and it would claim a new connection. If this
happened enough times, we would eventually exhaust the whole pool and
keep the sync worker blocked forever.

Test Plan: manual

Reviewers: evan, spang, halla, mark

Reviewed By: halla, mark

Differential Revision: https://phab.nylas.com/D4359"
emorikawa,2017-04-05 17:54:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e0b5181603f758df097c042a23d39ad93c0680c,6e0b5181603f758df097c042a23d39ad93c0680c,"[cloud-worker] worker refactor

Summary:
This is a refactor of the workers to make it a bit more robust on cloud
infrastructure.

Since our tasks are crazy flaky, and the workers may be restarted at
anytime, and there may be several workers running at once, this
uses a new `CloudJob` table in the database to back every task that
happens.

Backing everything on the DB (not in Metadata) will hopefully make this
substantially more robust to failing tasks, multiple workers across
multiple processes and boxes, and easy to visualize the state of the
workers' tasks

Sorry for the HUGE diff, this was definitely a bit of a hurried effort to
get this on staging today.

Test Plan: Manual

Reviewers: spang, khamidou, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4355"
emorikawa,2017-04-05 17:51:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c5e54d813289529d3bd104c6c7e63e071eda037,0c5e54d813289529d3bd104c6c7e63e071eda037,"[cloud-*] remove old SignalFX reporter & add docs

Summary:
This removes the old SignalFX reporter that we weren't using
Adding documentation around logging

Test Plan: manual

Reviewers: juan, halla, spang

Reviewed By: juan, halla, spang

Differential Revision: https://phab.nylas.com/D4341"
emorikawa,2017-04-05 17:48:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/664198e59dbbd9bfdefa6c48849be8632da10230,664198e59dbbd9bfdefa6c48849be8632da10230,"[cloud-workers] make log an `error` not `fatal`

Summary: Also remove unused underscore

Test Plan: manual

Reviewers: juan, spang, halla

Reviewed By: spang, halla

Differential Revision: https://phab.nylas.com/D4340"
emorikawa,2017-04-05 17:47:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/210d2e62744d4e6f53a72af9324f4464f348e606,210d2e62744d4e6f53a72af9324f4464f348e606,"[cloud-*] log errors according to bunyan specs

Summary:
According to bunyan, https://github.com/trentm/node-bunyan, errors are
treated special. They either need to be the first argument of a log, or
they need to be attached to the special `err` (NOT `error`) key of the
logger object.

Test Plan: manual

Reviewers: halla, juan, spang

Reviewed By: halla, juan, spang

Differential Revision: https://phab.nylas.com/D4337"
hallamoore,2017-04-04 23:31:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/c27ecea32bbf24906feadc7490269892851b8500,c27ecea32bbf24906feadc7490269892851b8500,"[client-private-plugins] Rename onSendLater to onAssignSendLaterDate

Summary: See title

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D4351"
jstejada,2017-04-05 16:22:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/565cafc9cda6f6c99d2be48f47ed6feaf5817a59,565cafc9cda6f6c99d2be48f47ed6feaf5817a59,[client-sync] :art: logging
jstejada,2017-04-05 01:18:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/a73b96459b611416e690158128dfd8cdfcf2767c,a73b96459b611416e690158128dfd8cdfcf2767c,"[client-app] Add better logging when restarting stuck sync worker

Summary: see title

Test Plan: manual

Reviewers: halla, mark, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4358"
jstejada,2017-04-05 01:15:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/a60cf149f44890f0e3f8fbe90f7e5b0125fbc820,a60cf149f44890f0e3f8fbe90f7e5b0125fbc820,"[iso-core] Remove unused vars from IMAPConnectionPool

Summary: see title

Test Plan: manual

Reviewers: mark, halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4357"
jstejada,2017-04-05 00:38:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b932e2ba5400b372f50789961d54eb220673ac3,4b932e2ba5400b372f50789961d54eb220673ac3,"[client-plugins] Fix send later button saving state and sending action

Summary:
There were 2 things wrong with the send later button:

1. We were not displaying the `saving` state correctly-- we only showed
the button as saving for a brief moment while we called `authPlugin`, but
we didn't show it for when we were creating the draft and uploading
attachments to s3 which could take a long time. So if you had
attachments and sent later, the composer just looked unresponsive for a
very long time.

2. When clearing a send later date, we were unnecessarily re-creating
the draft body and uploading attachments to s3, also making the app feel
unresponsive. When clearing the send later date, the only thing we need
to do is set `expiration` to null

Test Plan: manual

Reviewers: khamidou, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4356"
hallamoore,2017-04-05 03:11:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb6221d20352d2c5b3a55058807908c72f09b12e,bb6221d20352d2c5b3a55058807908c72f09b12e,"[client-private-plugins] Don't syncback drafts for send later

Summary:
The SyncbackDraftTask doesn't currently do anything, so don't
bother queuing it.

Test Plan: manual

Reviewers: evan, halla

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4352"
jstejada,2017-04-05 00:13:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/af1063b5efea484e4d92817d1b238c88dd301b87,af1063b5efea484e4d92817d1b238c88dd301b87,"[cloud-workers] :art: linting

Summary: see title

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4354"
jstejada,2017-04-04 20:25:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/b09d6f8a644a9454a54d8dbca69e6fae03de7206,b09d6f8a644a9454a54d8dbca69e6fae03de7206,"[client-sync] :art: sync worker

Summary: Just renaming some stuff

Test Plan: manual

Reviewers: mark, spang, evan, halla

Reviewed By: spang, evan, halla

Differential Revision: https://phab.nylas.com/D4342"
hallamoore,2017-04-04 22:30:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/fcda02a1f5373b8765523a394afcec1d308a1456,fcda02a1f5373b8765523a394afcec1d308a1456,"[client-app] Fix the unapply transformation for overlaid components

Summary:
The unapply transformation was incorrectly passing the props parameter
to buildAnchorTag() as a string, even though it expects an object.
buildAnchorTag() goes on to stringify this parameter, which causes extra
surrounding quotations and escape slashes in front of all the other
quotations. The unapply transform is applied on several re-renders,
which causes the number of escape characters to unboundedly increase.
Firstly, this was causing inline images to not appear properly in the
draft, and secondly, the large number of escape characters was making
the draft body large enough to make the app unresponsive.

This generally wasn't an issue because the unapply transformation is
only applied when there has been an apply transformation, and this is
triggered by the SyncbackDraftTask. This task was previously only queued
upon send, in which case the user never re-opens the draft. Now,
enabling send-later on a draft will queue the task, and these issues
appear if the user re-opens the draft for editing.

This diff makes it so that the unapply transform passes in the props as
an object, like the buildAnchorTag function expects.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D4348"
hallamoore,2017-04-04 18:58:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2a6bba6c644e4b265354e5ca9dfe65a12372e84,d2a6bba6c644e4b265354e5ca9dfe65a12372e84,"[client-app] Allow the packageMigrationManager to re-enable packages

Summary:
Remove packages from the disabled package list when they have been
migrated to be enabled by default.

Also, the last migration would not have worked properly anyways because
the daily channel was already on 1.0.56, and we check for greater-than
rather than equal-to. Bump that version to match the next update.

Test Plan: manual

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D4335"
jstejada,2017-04-04 22:07:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/77e72fbb29e0d12c8137b9ccb9a80bc6711bab89,77e72fbb29e0d12c8137b9ccb9a80bc6711bab89,"[client-app] Make sure to fetch latest update url every time we check for updates

Summary:
Previously, is you signed out of your NylasID, you would not pick up new
updates because we never updated the autoupdater url to use the new id.

Test Plan: manual

Reviewers: mark, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4346"
hallamoore,2017-04-04 20:38:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/19d35a9fd1c87a06d094f035ab7ecacf1c69bca9,19d35a9fd1c87a06d094f035ab7ecacf1c69bca9,"[client-private-plugins] Don't record usage when changing feature time

Summary:
We should only count the initial enabling as a feature usage.
This diff only changes send-later and send-reminders. Snooze is more
complicated, since it's a thread-level action but the metadata is stored
on the messages, and I'm probably just gonna punt it for now.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D4349"
jstejada,2017-04-04 21:38:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/52a3e6ef815d52232b12521e3d5ba878b5e14812,52a3e6ef815d52232b12521e3d5ba878b5e14812,"[client-app] Prevent from making any requests when NylasID isn't present

Summary:
Sometimes, when logging out of your NylasID and restarting the app, we
would continue making some requests from the worker window that required a
NylasID. This would make the app enter a restart loop and become
completely unresponsive because when we made a request without a
NylasID, we would force the user to log out and restart the app, and
then we would again make the requests without the id, ad infinitum.

To fix this, we make sure we have a NylasID before making any requests
that require it

Test Plan: manual

Reviewers: halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4344"
spang,2017-04-04 22:23:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/bab3b8159f78c8bb122137f2886fbf7c2c8125b5,bab3b8159f78c8bb122137f2886fbf7c2c8125b5,"[scripts] Batch upload each row

Makes the script like 4x faster."
spang,2017-04-04 22:01:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2809a250ce311edfa550ccad2293e56b43374704,2809a250ce311edfa550ccad2293e56b43374704,"[scripts] Add script to upload benchmark data to Google Sheets

Test Plan: ran locally (need client secret for this)

Reviewers: mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4343"
jstejada,2017-04-04 19:28:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/d15556fe661c0e9d3ae0c88f02b861aed3df0f89,d15556fe661c0e9d3ae0c88f02b861aed3df0f89,"[client-sync] Ensure we use refreshed access token for mail listener conn

Summary:
Before this commit, we would just establish a single mail listener imap
connection and never check if we needed to re-connect it due to an
expired access token. Even though we correctly refreshed the access
token at the beggining of each sync loop (hidden under
`ensureSMTPConnection`), we would never re-establish the mail listener
connection with the new access token.

This would cause the app to enter an `Invalid Credentials` error loop in
the sync loop, preventing from syncing any mail at all (T8064)

Test Plan: manual

Reviewers: spang, halla, mark, evan

Reviewed By: mark, evan

Differential Revision: https://phab.nylas.com/D4338"
jstejada,2017-04-04 18:52:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/4aa7da887a74417b9191b0ad1a3b97c09acfa053,4aa7da887a74417b9191b0ad1a3b97c09acfa053,"[client-sync] Fix mail listener imap connection

Summary:
Given that we keep the imap mail listener conenction open outside of the
imap connection pool, it might close itself after a while or after
putting your computer to sleep.

Previously, if we had the connection object we just assumed it was
connected and proceeded with sync, and if it wasn't, we would fall into
an error loop in the sync worker preventing it from syncing at all (T8065)

To fix this, we just call `connect` every time to ensure the connection is open.
(This was the case before we introduced the connection pool)

Test Plan: manual

Reviewers: mark, spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4334"
emorikawa,2017-04-04 16:05:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/64769f4ae56a76388ad752d2d976d18cff21f12c,64769f4ae56a76388ad752d2d976d18cff21f12c,bump(version): 2.0.0
hallamoore,2017-03-28 00:34:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8822059625b87f59d845d03ff8420870dc6c6ef,d8822059625b87f59d845d03ff8420870dc6c6ef,"[client-sync] Don't assign duplicate roles in folder fetch

Summary:
Check that there aren't any other categories with a role before we try
to assign it to the current category.

Addresses T7835

Test Plan: manual

Reviewers: juan, evan, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4298"
emorikawa,2017-04-03 23:32:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3f4bd9b045b3fdd6e9a0586262e55ab28db5cb3,f3f4bd9b045b3fdd6e9a0586262e55ab28db5cb3,[cloud-workers] fix worker exception
emorikawa,2017-04-03 23:44:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/f22be308d532bb4f25c11290665605e947cc1667,f22be308d532bb4f25c11290665605e947cc1667,"[client-app] re-setup IdentityStore in new window

Summary:
Before this patch, the IdentityStore would initialize in our empty hot
window. However, hot windows don't receive any `action-bridge-message`s,
which include DB updates. Since the hot window loads first, it was with a
stale verison of the Identity. The main window fetches a fresh identity,
but that fresh update failed to get to new composers because the hot
window wasn't listening to changes to the DB.

This makes it such that the IdentityStore properly boots up when the
window props change.

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4327"
emorikawa,2017-04-03 22:38:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/3becf34a64fbb62784b12f880ebc3533b76c46a9,3becf34a64fbb62784b12f880ebc3533b76c46a9,"[client-app] add feature limits to reminders and send later

Summary:
This adds feature limit modals (graphics pending) for reminders and send
later

Test Plan: manual

Reviewers: juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4322"
emorikawa,2017-04-03 22:38:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/784e483a9ecb97bfef433bc878f5544aa45f42d3,784e483a9ecb97bfef433bc878f5544aa45f42d3,"[client-app] enable snooze, send later, reminders on 1.0.56

Summary: This enables packages on 1.0.56

Test Plan: manual

Reviewers: juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4320"
jstejada,2017-04-03 21:07:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/abe05459556f2c49ddf2021fcff1f59c5b568f08,abe05459556f2c49ddf2021fcff1f59c5b568f08,[client-app] Remove rogue scripts-tmp folder
jstejada,2017-04-01 00:41:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/9cca715a0c5914c529ff160bc35a6d05b4bae4b7,9cca715a0c5914c529ff160bc35a6d05b4bae4b7,[client-app] Update changelog
jstejada,2017-03-31 22:12:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b7fec549e629bd9109db5b5ddaae45ddd7b90e7,4b7fec549e629bd9109db5b5ddaae45ddd7b90e7,"[client-app] Remove unecessary db setup for mail rules

Summary: This shaves off ~150ms trying to issue this query

Test Plan: manual

Reviewers: evan, spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4317"
emorikawa,2017-03-31 23:13:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1c1e68877377d00f9ef355f1e4bbf50ee9ec1eb,b1c1e68877377d00f9ef355f1e4bbf50ee9ec1eb,"[client-app] don't override existing bodies on K2

Summary:
Bodies that already exist on K2 shouldn't be overridden.
See the comment for how this caused open/link tracking to fail in certain
cases when a lot of messages were being sent

Test Plan: manual

Reviewers: halla, mark, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4319"
hallamoore,2017-03-31 22:34:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1ce2874da151bb6bd24836328e35606c1fa78b3,f1ce2874da151bb6bd24836328e35606c1fa78b3,[client-sync] Add comment about reason for try/catch block
jstejada,2017-03-31 22:01:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/18511fff1968d32e9de9b27e0bfb38ba17d5f895,18511fff1968d32e9de9b27e0bfb38ba17d5f895,[client-app] Update changelog
emorikawa,2017-03-31 21:45:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/35a1e62621c0f2c6a6032598310fd21f183ddbec,35a1e62621c0f2c6a6032598310fd21f183ddbec,"[client-app] remove the `ANALYZE` in favor of `pragma.optimize`

Summary:
Removes some VERY long running `ANLAYZE` queries. Was taking up to 50
seconds on my 9GB database on every boot
https://sqlite.org/pragma.html#pragma_optimize

Test Plan:
I tested to make sure the app still quits quickly. It does. The SQLite
docs also say this should be fast.

Reviewers: halla, spang, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4314"
emorikawa,2017-03-31 19:17:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/fcf332f7f7d1aea2fcf2f6aee12ba5a917106122,fcf332f7f7d1aea2fcf2f6aee12ba5a917106122,"[client-app] delay building new hot window to improve win perf

Summary:
This improves window open times by about 70ms
We would spend a very long time in the backend browser process building a
new hot window when we didn't need to do that until much later

Test Plan: manual

Reviewers: halla, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4311"
jstejada,2017-03-31 17:17:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d30efda8a7698018727cddbcec85c050966e686,9d30efda8a7698018727cddbcec85c050966e686,"[client-app] Don't imeout removing sync worker when removing an account

Summary:
Most of the times when removing a sync worker (i.e. when removing an
account), we would see database errors in the console. This happened
because more often than not we would interrupt in the middle of message
processing, but `processMessage` is not interruptible, which means that
the worker would be interrupted right after processing its current
message. However, if `processMessage` would take more than 500ms (the
current timeout for stopping the worker), we would destroy the database
before processing was done and it would throw a bunch of errors.

To fix this, we just don't set a timeout when removing the worker as a consequence
of removing an account. However, when we are removing the worker when we
detect that it is stuck, we set a time out of 5 seconds.

Test Plan: manually test removing accounts, verify that it doesn't error

Reviewers: mark, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4308"
jstejada,2017-03-31 16:09:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae55ff0c55b760ed942139277a83a6b0da4fc80f,ae55ff0c55b760ed942139277a83a6b0da4fc80f,"[client-app] Ensure sync worker can never continue running after being destroyed

Summary:
Previously, it was possible for the sync worker to continue running after being
interrupted, e.g. it would break out of `performSync` and then try to run
`onSyncCompleted`. This is fine if we were just interrupting to restart the loop,
but when we stop it we don't want it to continue running anything at all.

This also refactors the syncworker to have a single `destroy` method, which sets
a `destroyed` flag and uses that one exclusively instead of the `stopped` flag.

Test Plan: manually check it works

Reviewers: spang, halla, mark, evan

Reviewed By: mark, evan

Differential Revision: https://phab.nylas.com/D4307"
jstejada,2017-03-31 00:39:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/90165c413a0962839edf0258e8ca8362145228de,90165c413a0962839edf0258e8ca8362145228de,"[client-app] Don't hit contact rankings endpoint until account is ready

Summary:
This prevents us from hitting the endpoint before the database for that
account is initialized and it's actually syncing.

Before this commit, we would throw errors upon adding an account

Test Plan: manually add, remove accounts, run benchmark script

Reviewers: mark, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4305"
hallamoore,2017-03-31 18:12:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c38ad38b6d43077b40d33f04ddd88c44e029597,9c38ad38b6d43077b40d33f04ddd88c44e029597,"[client-sync] Wrap more syncWorker args

Turns out the SyncWorker isn't the only one who initiates SyncTasks"
hallamoore,2017-03-31 17:58:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d11970b71a29b6c4d477f943d01edbe8dc50593,3d11970b71a29b6c4d477f943d01edbe8dc50593,"[client-sync] Properly wrap the SyncWorker arg in an object

The argument structure for runTask() changed and needs it this way."
hallamoore,2017-03-31 17:35:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c173558fb26a6d18384aa3f38ea79c81e9e9863,9c173558fb26a6d18384aa3f38ea79c81e9e9863,"[client-sync] Fix the new syncback-task structure

Summary:
- Change files to .es6 so they recognize the syntax
- Pass arguments down to _run()
- Make sure the responses get returned

Test Plan: manual, even though that somehow failed before. :(

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4309"
emorikawa,2017-03-31 00:38:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/49d073b636c4f0b8736803972d4983d4c587080c,49d073b636c4f0b8736803972d4983d4c587080c,"[client-app] add `DatabaseStore.write` which doesn't use Transactions

Summary:
Creates a new `DatabaseStore.write` method alongside
`DatabaseStore.inTransaction` that doesn't always wrap trivial queries in
a transaction. SQLite does this automatically.

Test Plan: manual

Reviewers: spang, mark, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4303"
emorikawa,2017-03-31 00:38:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/0dc1671593650fb51df840f107f5d48dd19c2dca,0dc1671593650fb51df840f107f5d48dd19c2dca,"[client-app] rename DatabaseTransaction -> DatabaseWriter

Summary: Renamed in prep for next few diffs

Test Plan: manual

Reviewers: juan, mark, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4302"
emorikawa,2017-03-31 00:26:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c4ebf21a03e5d750b9907e53a9ed3637c4ebc0c,8c4ebf21a03e5d750b9907e53a9ed3637c4ebc0c,"[client-app] use debug library for DB

Summary:
Use the wonderful `debug` library instead of all our random flags.
You can now do things like: `DEBUG=""app:*,sync:*"" npm start` to print out
everything.

Test Plan: manual

Reviewers: mark, halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4297"
hallamoore,2017-03-31 00:12:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffe7b6bc16935ec7148969960b91b1acd28604b1,ffe7b6bc16935ec7148969960b91b1acd28604b1,"[cloud-api] Add awaits in thread metadata reconciliation test

The created_at order matters when reconciling metadata, so add awaits to
ensure they get created in the expected order."
hallamoore,2017-03-30 23:24:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/23dc771117ab1d73ce86f8c9340f0725e554385b,23dc771117ab1d73ce86f8c9340f0725e554385b,[client-sync] Add provider to syncbackTask perf metric
hallamoore,2017-03-30 23:13:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e0010b9dde840cd1f472b3eac9fcd8bc34c5201,6e0010b9dde840cd1f472b3eac9fcd8bc34c5201,"[client-sync] Report metrics about SyncbackTask runs

Summary:
Report how long they take and if they're stopped (due to timeout).

Part of T7978

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D4272"
hallamoore,2017-03-29 23:02:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/614495975b11f62358edc0e9bf1c82b92ae2aa42,614495975b11f62358edc0e9bf1c82b92ae2aa42,"[client-sync] Convert syncback tasks to interruptible generators

Summary:
Make `run()` functions generators and change most awaits to yields

Part of T7978

Test Plan: specs from D4269, but really needs some heavy QA

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4270"
hallamoore,2017-03-29 22:05:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8542122cd4cd29b94b3a50d477a0902a6bfcf93,f8542122cd4cd29b94b3a50d477a0902a6bfcf93,"[client-sync] Interrupt long-running syncback tasks

Summary:
Interrupt retryable syncback tasks that are taking too long so that we can
return control to the sync loop. The sync loop will retry the task later.
This diff adds a `forceReject` param to `interrupt()` so that we can return
control immediately instead of waiting for the current operation to finish
(for instance, the syncback task could be stuck in an imap operation, and a
normal interrupt would still have to wait for that to finish before returning
control to the callee)

Part of T7978

Test Plan: specs

Reviewers: evan, spang, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4269"
jstejada,2017-03-30 17:18:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9a875960e4ac6baa4c54b2f50ef6869bb2b0a36,c9a875960e4ac6baa4c54b2f50ef6869bb2b0a36,[client-app] Update changelog
emorikawa,2017-03-30 16:36:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b9c000df913100080ffdd59eb10f8447f23a058,9b9c000df913100080ffdd59eb10f8447f23a058,"[client-app] Add silent flag to DB persists for thread indexing

Summary:
Every persistModel would trigger a large number of downstream updates.
These weren't necessary for thread indexing and causing a lot of
unnecessary DB thrashing. This adds a `silent` flag to `persistModel` and
its ilk that just does the write.

significantly improve performance, and also contribute to T8046

Test Plan: manual

Reviewers: spang, mark, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4295"
emorikawa,2017-03-30 16:32:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf441c41e3b662fd4c075b6c01d13eb2a486c9c0,cf441c41e3b662fd4c075b6c01d13eb2a486c9c0,"[client-app] Add better DB logging with ENABLE_SEQUELIZE_DEBUG_LOGGING

Summary:
This adds better logging to the DB

You can use `ENABLE_SEQUELIZE_DEBUG_LOGGING=true` and
`ENABLE_RXDB_DEBUG_LOGGING=true` to spit out the raw queries of both DBs.

Test Plan: manual

Reviewers: mark, halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4294"
jstejada,2017-03-29 22:46:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/4608f1c44561f0dc78ce7a2e98e8af87ba4dadc6,4608f1c44561f0dc78ce7a2e98e8af87ba4dadc6,"[client-app] Fix references to RetryableError imports

Summary: See title

Test Plan: manual

Reviewers: spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4292"
jstejada,2017-03-29 19:23:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/aff463ff28f98d1234c8dd2a9b5ff5ebc7fc4abb,aff463ff28f98d1234c8dd2a9b5ff5ebc7fc4abb,"[client-app] Log duration of db ANALYZE query

Summary: See title

Test Plan: manual

Reviewers: mark, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4290"
jstejada,2017-03-29 19:08:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/89e21da9937455b5b07c540734d344d9df8619ab,89e21da9937455b5b07c540734d344d9df8619ab,"[client-app] Improve logging for queries

Summary:
This commit makes a few changes to how we log database queries:

- We log queries in 2 different places now:
  - When `DatabaseStore._executeLocally` takes longer than 100ms. This might be due to the actual db operation taking long, or it might be due to our retry logic, or potentially other factors.
  - When the actual raw database operation takes more than 100ms.
- When raw database queries take more than 100ms, we log out the query plan if it is a `SELECT` query and we are in dev mode.
- If `DEBUG_TO_LOG` is true, we always log all queries (including background queries)

Test Plan: manual

Reviewers: mark, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4288"
jstejada,2017-03-29 18:20:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/e667ecec49ad2402235f0ccc22ca79fc7c3d4d6b,e667ecec49ad2402235f0ccc22ca79fc7c3d4d6b,"[client-app] Improve logging for background database queries

Summary:
- Rename `databaseAgent` usage to `background`, in the code and in the logs, which I
believe is less confusing. Often times found myself asking what was this agent thing in
the logs.
- Make messaging more explicit

Test Plan: manual

Reviewers: evan, mark, halla

Reviewed By: mark, halla

Differential Revision: https://phab.nylas.com/D4285"
jstejada,2017-03-29 18:02:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4a54dad27bf3f30e9d5520ba64f85cac4a9ef2c,b4a54dad27bf3f30e9d5520ba64f85cac4a9ef2c,"[client-app] Reduce max retry delay for db queries

Summary:
This commit makes it so that when we retry database queries after
encountering a db locked error, we back off for at most 500ms, instead
of the current max of 3s. This meant that a single query could
potentially take 3+ seconds and block the transaction queue for that long.

Test Plan: manual

Reviewers: evan, mark, halla

Reviewed By: mark, halla

Differential Revision: https://phab.nylas.com/D4283"
jstejada,2017-03-29 17:57:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/da0aa024b80f257464e683ca82bb03474e7625e0,da0aa024b80f257464e683ca82bb03474e7625e0,"[client-app] Don't delay db queries unless we are retrying

Summary:
After introducing retry logic, we would always defer db queries to the
next tick even if there was no retry delay present.

This would cause almost all db queries take more than 100ms even if the
actual db operation was really fast. This affected app performance
negatively

Test Plan: manual

Reviewers: evan, halla, mark

Reviewed By: halla, mark

Differential Revision: https://phab.nylas.com/D4282"
emorikawa,2017-03-29 21:53:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/7de7a3ee81f3b944a7be709be01b53a90a02f1ae,7de7a3ee81f3b944a7be709be01b53a90a02f1ae,"[client-app] ensure gmail msg to 1 person get tracking stripped

Summary:
The problem actually was that we weren't applying the transform for Gmail
messages sent to 1 recipient

Test Plan: manual

Reviewers: halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4291"
emorikawa,2017-03-29 21:53:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2917292d1bd75dad8cc58722f7ce449d26afe71,e2917292d1bd75dad8cc58722f7ce449d26afe71,"[client-app] don't trigger your own opens & link clicks

Summary:
We weren't stripping link and open items from messages we sent properly.
While we stripped it from the first outgoing message, when the sync loop
came back around it would have them back in. This adds it in the message
processor to extra ensure that ANYTHING that comes from us (or one of our
aliases) gets the open/link tracking stripped

Test Plan: New tests

Reviewers: juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4287"
emorikawa,2017-03-29 21:53:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c1196ba4c79ab8c18270976fd2f826177acac1a,0c1196ba4c79ab8c18270976fd2f826177acac1a,"[client-app] index expiration field on Metadata

Summary:
@vlad manually added the expiration index on the Metadata model. This
reflects that in code. @vlad also made sure the index name matches what
Sequelize will auto generate

Test Plan: Manual

Reviewers: juan, spang, halla

Reviewed By: spang, halla

Subscribers: vlad

Differential Revision: https://phab.nylas.com/D4281"
spang,2017-03-12 01:47:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/b36a31cbd51db2703f0a1ed053a4621514108330,b36a31cbd51db2703f0a1ed053a4621514108330,"[dev] Default billing server URL to staging for development, allow override

Summary:
By default, the 'local'/'development' environment assumes that all services
are running locally. This makes sense.

However, if you're not making changes to auxiliary services such as
billing.nylas.com and hence do not have them running locally, firing up
Nylas Mail with the 'local' env will not work. It's a bit of a pain to
get a local billing service running locally, especially if you're not
making any changes to that service. To ease development, change the
default billing URL during development to staging, and allow manually
overriding the billing server URL to point to localhost in the case
that you're making changes to the billing service also.

To override the billing URL for local development, run like this:

    npm run cloud -- --env billing_local
    BILLING_URL=http://billing.lvh.me:5555 npm start

This is both a problem that I've run into during development as well as
(my hunch) why Karim accidentally landed a global override of the
billing server URL.

Test Plan: manual

Reviewers: evan, khamidou, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4202"
jstejada,2017-03-29 17:52:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e188b373ecb040f7f7454e87976143a7d1d8882,2e188b373ecb040f7f7454e87976143a7d1d8882,[client-app] Update changelog
jstejada,2017-03-28 23:25:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/95ec679da606b01136173b758808472feba68dd5,95ec679da606b01136173b758808472feba68dd5,"[client-sync] Make sure to attach route files ending in .es6 to local-api

Summary:
This prevented the /health endpoint from being available in the
local-api

Test Plan: manual

Reviewers: mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4280"
spang,2017-03-29 00:02:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/027f590fbbf0b8daf5ced8412b5c432c2ad0bf89,027f590fbbf0b8daf5ced8412b5c432c2ad0bf89,[dev] One more newline in deploy-it output
spang,2017-03-29 00:00:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/e42b9f97ce5c972c4d0f95060a367c936dd69529,e42b9f97ce5c972c4d0f95060a367c936dd69529,[dev] Make deploy-it print link to the EB console
spang,2017-03-28 23:59:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/c47f6a83586362f418c1ca2c353c7ca95c989bb7,c47f6a83586362f418c1ca2c353c7ca95c989bb7,[dev] Make deploy-it say what it's doing instead of hanging silently
spang,2017-03-28 23:47:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/6079efc51e49ddd5666cdba01c3d92247e9c5915,6079efc51e49ddd5666cdba01c3d92247e9c5915,[dev] Make help message better on deploy-it
jstejada,2017-03-28 22:54:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/18a020146f031e52afff3d1dd98129309ff1084e,18a020146f031e52afff3d1dd98129309ff1084e,"[client-sync] Fix runtime error introduced in 08975c0

Summary:
If `gmailInitialUIDsRemaining` was defined, we need to set `initialUids`
to that value. We were previously setting it to a key in
`folder.syncState` that didn't exist, which caused a runtime error.

This was introduced in https://github.com/nylas/nylas-mail-all/commit/08975c0c68760c125a7bfe8660804d73d40324a0

Test Plan: manual

Reviewers: spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4279"
spang,2017-03-10 20:21:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/10e066d26844221f7e97fdd08213fb74e8673225,10e066d26844221f7e97fdd08213fb74e8673225,"[cloud-api] Verify SMTP credentials in /auth endpoint

Summary:
This patch will prevent users from being able to connect accounts which sync
mail but fail to send.

This commit includes a couple pieces:
* Adds a call to nodemailer's `verify()` function in the /auth endpoint
* Adds Error object conversion for SMTP errors. Since we don't implement our
  own connection object or connection pool for SMTP, we simply wrap the couple
  places we call functions from nodemailer that connect to SMTP, namely
  SendmailClient's _send() and the new verify() call in /auth.
* Moves RetryableError to the 'errors' module since it's now a base class for
  retryable IMAP //and// SMTP errors.
* Moves the main `smtpConfig()` logic which used to live on the Account model
  into AuthHelpers so it can be shared between the Account model and the verify
  code.
* Converts a few different places to use `import` syntax instead of
  `require` syntax for module imports. Apologies for not splitting this out
  into a separate diff—would have been a fair amount of work and looks not too
  difficult to skim over in the context of the rest of the patch.
* Fixing a bug in a previous commit where erroring sends would crash because of
  using `this._transporter.options` instead of `this._transporter.transporter.options`

Test Plan: manual

Reviewers: evan, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4200"
jstejada,2017-03-28 19:32:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e625474c2c28c850d49c4b76a9852d065c13596,1e625474c2c28c850d49c4b76a9852d065c13596,"[client-app] Correctly listen for new mail in between sync loops

Summary:
When using the IMAPConnectionPool in the sync-worker, we requested 2
connections from the pool: 1 to listen for new mail, and 1 to actually
operate on the mailbox. These 2 connections would be closed and returned
to the pool at the end of each sync loop iteration.

However, we never want to close the connection to listen for new mail.
Closing this connection caused us to not listen for new mail in between
sync loops, which was especially noticeable when initial sync was done
because the delay between sync loops is 5 minutes.

This commit makes it so we request the 2 connections separately from the
connection pool, and keep the listener connection always open until we
dispose of the sync-worker.

Test Plan:
manually make sure that I got new mail event listeners in between
sync loops :(

Reviewers: evan, spang, halla, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4276"
jstejada,2017-03-28 21:01:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9732cf47e4e348220594b0f22d6d81ed89d0ddc,f9732cf47e4e348220594b0f22d6d81ed89d0ddc,[client-sync] :art: typo
jstejada,2017-03-27 22:19:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f89aa57454f78a2a50a1abba0fb54142c68b240,2f89aa57454f78a2a50a1abba0fb54142c68b240,"[dev] Correctly ignore node_modules in .ebignore for faster deploys

Summary: See https://github.com/lovell/sharp/issues/373#issuecomment-226849756

Test Plan: manual

Reviewers: khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4273"
jstejada,2017-03-27 21:45:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/d165b294c60efa1f9fb9ece63ba18b6daf2bf9d5,d165b294c60efa1f9fb9ece63ba18b6daf2bf9d5,"[dev] Only bootstrap specific pkgs in postinstall for faster installs

Summary:
This commit makes it so postinstall.es6 only bootstraps the packages we
are interested in based on a new env variable, `INSTALL_TARGET`.

`INSTALL_TARGET` can be set to `cloud`, `client` or `all`, or not set at all,
and our postinstall will bootstrap the packages accordingly. This will make
build and deploy times faster.

Test Plan: manual

Reviewers: spang, halla, evan, khamidou

Reviewed By: evan, khamidou

Differential Revision: https://phab.nylas.com/D4271"
jstejada,2017-03-28 16:23:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/09f4396a4c6bfadc579e510bd585c0a177e84a6b,09f4396a4c6bfadc579e510bd585c0a177e84a6b,[client-app] Update changelog
jstejada,2017-03-28 16:15:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9d11ae18f2b37f72fac2147f93f7a9cff7eaad6,c9d11ae18f2b37f72fac2147f93f7a9cff7eaad6,"[client-app] Fix runtime error in FetchMessagesInFolderTask

We were accessing `this._db.accountId` before `this._db` was set, which
caused an error when attempting to run the task"
jstejada,2017-03-28 16:10:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/30d6edcd815e48a4cb6c87cb0fe9a86f4ea2012f,30d6edcd815e48a4cb6c87cb0fe9a86f4ea2012f,[client-app] Update changelog
jstejada,2017-03-28 16:07:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/f528f793709deb18b261bcde1d9d3336bfd30326,f528f793709deb18b261bcde1d9d3336bfd30326,"[client-app] Fix importing SyncActivity

In some places we were not accessing `.default` when using `require`,
and when using `import` we couldn't really destructure unless we
accessed `.default` too, or if the functions were regular exports
instead of properties on a default exported object.

This was causing our sync loop to error.

To remain consistent, we always just `require` or `import` the
SyncActivity singleton and access that"
hallamoore,2017-03-27 23:48:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/e769b48f3a15e0e5f041bb6b0689f2acacd2ae80,e769b48f3a15e0e5f041bb6b0689f2acacd2ae80,"[client-sync] Change where we report sync activity

Summary:
These locations will provide enough activity for monitoring and are also
more helpful in helping us debug what the sync loop was doing when it
got stuck.

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4274"
hallamoore,2017-03-27 22:44:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5e1c9c23c05e0e31e532665d24fdecc948cfc12,f5e1c9c23c05e0e31e532665d24fdecc948cfc12,"[client-app, client-sync] Add specs for detecting stuck sync/worker window

Summary: See title. Part of T7681.

Test Plan: ran the specs

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4264"
hallamoore,2017-03-27 22:34:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/34b0471b30ee5901d26cfe4c0f0ee14db58b35d3,34b0471b30ee5901d26cfe4c0f0ee14db58b35d3,"[client-app] Detect when the worker window is unavailable

Summary:
Periodically ping client-sync's /health endpoint and store the latest
sync activity. If we get an ECONNREFUSED error, the worker window is
unavailable. Report the last known activity and restart the worker
window. Part of T7681.

Test Plan: manual, specs

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4263"
hallamoore,2017-03-27 22:33:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9dc3e76d9050549919810bed1ee81a8129cd9a6,a9dc3e76d9050549919810bed1ee81a8129cd9a6,"[client-sync] Detect when sync workers are stuck

Summary:
Periodically check the latest sync activity times to determine if a sync
worker has been inactive for too long. If it has been too long, discard
the worker and create a new one for that account. Part of T7681.

Test Plan: manual, specs

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4262"
hallamoore,2017-03-27 22:32:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/d27c20588e57345d259759c9a8d0d904c9150caf,d27c20588e57345d259759c9a8d0d904c9150caf,"[client-sync] Report latest sync activity

Summary:
Add infrastructure to report and retrieve the latest sync activity, and
start reporting when we download a message or detect that a folder
has no new messages. This will be used to detect if the sync loop is
stuck. Part of T7681.

Test Plan: manual, specs

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4261"
hallamoore,2017-03-24 21:25:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/14e0d5d4305181d69d8eddc448ea7f4a52cd4e3a,14e0d5d4305181d69d8eddc448ea7f4a52cd4e3a,"[client-app] Retry queries when database is locked

Summary:
We still don't know exactly what scenarios cause us to get 'database is
locked' errors, but generically this means that we have multiple
processes trying to access the database at the same time. In an attempt
to handle this gracefully, this diff makes it so that we retry the
queries in these cases. Theoretically, the database should free up once
the other process is done using it, and the erroring process just needs
to wait its turn. We still throw an error after 5 retries, so if there's
a larger issue, we'll still be able to tell in Sentry.

Addresses T7992

Test Plan:
I opened a transaction in the worker window and then tried to
do the same in the main window. If I didn't release the transaction in
the worker window, the main window eventually errored. If I did release
the transaction, the main window continued creating its own transaction.

Reviewers: mark, juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D4254"
emorikawa,2017-03-27 21:40:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/8bfa27e2b56b88e663af6468c995a3ed1736a009,8bfa27e2b56b88e663af6468c995a3ed1736a009,[*] add ONLY_CLIENT=false support for cloud & regular install
jstejada,2017-03-27 19:12:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/d17febc9a3c07fb8cc75bbca26051b3bb16d685e,d17febc9a3c07fb8cc75bbca26051b3bb16d685e,"[cloud-api] Timeout streaming API connections every 15 minutes

Summary: Should help a fair bit with our redis connection pileup.

Test Plan: Tested manually.

Reviewers: mark, spang, juan, evan

Reviewed By: mark, spang, evan

Differential Revision: https://phab.nylas.com/D3916"
spang,2017-03-16 16:48:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/17706dff5221a823727f14a4dfb15465c66cfff8,17706dff5221a823727f14a4dfb15465c66cfff8,"[iso-core] Add indexes from SQL review

Summary:
These only really matter for n1cloud, and are being added manually in
production, so no migration file necessary. I am adding them to the
model definitions to prevent them getting out of sync with production
for development.

See T7999 for full SQL review

Test Plan: ship it

Reviewers: evan, khamidou, juan

Reviewed By: juan

Subscribers: vlad, jerm

Differential Revision: https://phab.nylas.com/D4230"
jstejada,2017-03-27 15:37:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec7cbdb5c52bf7d38f8e21ae9b53e38d18c581ce,ec7cbdb5c52bf7d38f8e21ae9b53e38d18c581ce,[client-app] Update changelog
jstejada,2017-03-24 21:04:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/e57df5b185a53197e7d5abdd17143039e3df6821,e57df5b185a53197e7d5abdd17143039e3df6821,[client-app] Fix in identity store
jstejada,2017-03-21 18:10:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/7396d35fdab9a19f96245c40f2b85fa894e173f6,7396d35fdab9a19f96245c40f2b85fa894e173f6,"[client-app] Don't try to restart sync on every IdentityStore change

Summary:
The IdentityStore can trigger any number of times, but we only want to
start sync if we previously didn't have an identity available

Test Plan: manual

Reviewers: spang, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D4246"
jstejada,2017-03-23 20:34:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e81290c6e9b5bca2c3f1105a7fe37935a639c7f,6e81290c6e9b5bca2c3f1105a7fe37935a639c7f,"[client-app] Correctly remove inline images with x button

Summary:
Before this commit, it was impossible to remove inline images via the x
button

Test Plan: manual

Reviewers: mark, halla

Reviewed By: mark, halla

Differential Revision: https://phab.nylas.com/D4257"
jstejada,2017-03-24 17:21:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/c707e8e3d88045669e38f34a92b36c52bb127639,c707e8e3d88045669e38f34a92b36c52bb127639,[ei] Update changelog
khamidou,2017-03-23 21:43:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/658eb0649c0045597a4e9af95eddf35ee5c72487,658eb0649c0045597a4e9af95eddf35ee5c72487,"[client-app] Report hard crashes using Electron's built-in crash reporter

Summary:
I had a bit of downtime this morning so I decided to look into how to store Electron crash data. Electron, like Chromium, stores crash data in an arcane file format named minidump.

There's a bunch of services you can use to store files formatted in this format, like Mozilla's Socorro or zcbenz's own mini-breakpad-server but they're all pretty hard to install. Luckily, it turns out there's a Ruby gem to process minidump files and send them to Sentry! Seeing that, I whipped up a quick sinatra service and hosted it on Heroku – you can take a look at the source code here if you're curious: https://github.com/khamidou/electron-breakpad-sentry

This diff adds the client-side code we need to start sending crash reports.

Test Plan: Tested manually.

Reviewers: juan, evan

Reviewed By: juan, evan

Maniphest Tasks: T7926

Differential Revision: https://phab.nylas.com/D4259"
jstejada,2017-03-23 20:18:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c1d767548b488ae64d135826e81b7471fb1a271,5c1d767548b488ae64d135826e81b7471fb1a271,"[client-app] Consolidate file download metric reporting

Summary: See title

Test Plan: manual

Reviewers: gleb, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4256"
jstejada,2017-03-23 19:23:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/9cb157c753c04b849fb67c0d9ef91c08cac01d8c,9cb157c753c04b849fb67c0d9ef91c08cac01d8c,[client-app] Update changelog
hallamoore,2017-03-22 19:10:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/1761fececf634072b8c3daa21b7a9daa39e4e7a5,1761fececf634072b8c3daa21b7a9daa39e4e7a5,"[client-app] Rename downloadDataForFile(s) -> getDownloadDataForFile(s)

Summary:
The original name seems like it's initiating the download, when really
it's just returning the data of an already in-progress/completed
download.

Test Plan: Manual, specs

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4251"
hallamoore,2017-03-21 22:03:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/372d808dc265e8a2fa2edbd86641da552aa3ce14,372d808dc265e8a2fa2edbd86641da552aa3ce14,"[client-app] Ensure files get transferred in forwarded messages

Summary:
We need to download the files and then treat them as uploads. Rather
than using an actual Upload object, which would require another data
transfer, we create an object with all the necessary Upload-like
properties and point it to the downloaded file.

Addresses part of T7960

Test Plan: Manual, some specs

Reviewers: evan, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4249"
khamidou,2017-03-22 18:19:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/c23803ce990d3e7af79a3a22db917e0214a0acdd,c23803ce990d3e7af79a3a22db917e0214a0acdd,"Switch type of Metadata value column

Summary:
Found a funny send-later bug I didn't catch when testing on staging: sometimes the data we're saving in the metadata table overflows. That's because MySQL's TEXT column are at most 64k, which is easy to reach when you have a draft + clearbit information and additional stuff.

To work around this, I decided to switch the database type of the metadata table to LONGTEXT. Since it can store 4Gb of text, we should be good. This diff makes those code changes. Obviously, we'll have to run migrations both on staging and prod.

Test Plan: Ran a basic smoke test. Shouldn't break anything.

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4250"
khamidou,2017-03-21 23:52:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f3e4df27ab22c1d627b0ce0edb2327dc574bd11,2f3e4df27ab22c1d627b0ce0edb2327dc574bd11,"Fix build condition

On the server the env var is defined but set to false."
hallamoore,2017-03-21 21:20:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/e17f1664173bd7f9ea5cbc4ec0805e5beb329e97,e17f1664173bd7f9ea5cbc4ec0805e5beb329e97,"[client-app] Fix DraftFactory specs

Summary: Using `await` instead of `advanceClock()` fixes all the things!

Test Plan: Ran the spec file

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4248"
jstejada,2017-03-21 18:45:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d08c1f118915a73cec5cedbf7652bbc7b6d4393,8d08c1f118915a73cec5cedbf7652bbc7b6d4393,[client-app] :art: comment
jstejada,2017-03-14 20:47:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/7639f54d5d75e5cfa30878151fda00b748c3972e,7639f54d5d75e5cfa30878151fda00b748c3972e,"[client-app] Correctly sign out of NylasID

Summary:
This fixes T7995.

Previously, attempting to log out from your NylasID would just
automatically sign you back in with the same NylasID because the webview
session was preserved.

Now, instead of relaunching the windows, we restart the app to clear the
webview session

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Maniphest Tasks: T7995

Differential Revision: https://phab.nylas.com/D4224"
jstejada,2017-03-16 22:28:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/f762fedd875100a9123ec116846825920f68844f,f762fedd875100a9123ec116846825920f68844f,"[client-app] Don't report non-reportable errors in delta connection

Summary:
Previously, the logic for deciding wether to report an APIError lived
inside NylasAPIRequest and depended on an array of ignorable
statusCodes. However, when handling APIErrors, NylasAPIRequest would
convert special error codes (for offline errors) into a statusCode of 0,
which would automatically be ignored.

Given that the delta streaming connection didn't convert status codes to
0, it wouldn't actually ignore the error and end up reporting it,
flooding sentry.

This commit makes it so that that logic lives inside APIError, and
anyone who handles APIErrors can check wether to report them or not,
including the delta streaming connection

Test Plan: manual :(

Reviewers: spang, evan, halla

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4235"
khamidou,2017-03-20 20:57:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ad7d202b179381ebe7c7a11a54b89bc2efe378a,9ad7d202b179381ebe7c7a11a54b89bc2efe378a,"[send-later][cloud-workers] Fix S3 attachment upload

Summary:
I spent a long time looking for this bug. The problem boils down to our MIME generation library not accepting run of the mill buffer or streams made out of buffers. Amusingly, the author of this library also decided it to make it semi-private; it's on npm but doesn't have any github sources.

To work around this issue I decided to simply write the contents to a temporary file on the workers machine, then read from this file. Works great, even though it's very hackish.

Test Plan: Tested manually.

Reviewers: juan, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4241"
jstejada,2017-03-21 17:39:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe85f3cb6f470f4e74c47a9d6326e615cb05acf9,fe85f3cb6f470f4e74c47a9d6326e615cb05acf9,[client-app] Update changelog
jstejada,2017-03-21 16:29:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/2216935c3244010d8de95474d2ef1827023f8a68,2216935c3244010d8de95474d2ef1827023f8a68,[dev] Actually fix tmp dir path in daily
jstejada,2017-03-21 16:25:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/b021723f41e2b8a742333898efedd8e43c2e61a1,b021723f41e2b8a742333898efedd8e43c2e61a1,[dev] Fix temp dir path in daily
jstejada,2017-03-20 22:42:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/140efdd41ad1972eefbccfcb8b299c09c2ff4567,140efdd41ad1972eefbccfcb8b299c09c2ff4567,"[client-app] Fix passing cursor to delta streams

Summary:
Currently, when we auth an account for the first time in Nylas Mail (or
we blow away the database), the app is going to request transactions
since cursor `null` from the /delta/streaming endpoint and from the local-sync
delta observable, instead of requesting transactions since cursor `0`

This is due to a subtle bug with the use of default values when
destructuring an object. Our coded did the following:
```
const {cursor = 0} = this._state
```
Which at a glance seems correct. However, this will only work as
expected if `this._state` has the following shape:
```
{cursor: undefined}
```
And unfortunately, our `this._state` looked like this when authing an
account for the first time:
```
{cursor: null}
```

Which would make `cursor === null` instead of `0`.
This is because when using default values, null is considered an
intentional argument/value, as opposed to not passing any argument/value
(which will mean that the argument is undefined).

This was a regression introduced in d60a23c and 8bc2ec5

Test Plan: manual, will add regression test in upcoming diff

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4243"
jstejada,2017-03-20 22:25:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/6eba94e1d8387be5c310865a66105350e1bd0faf,6eba94e1d8387be5c310865a66105350e1bd0faf,"[cloud-api] Fix query for delta stream transactions

Summary:
When querying transactions for the delta stream, if no cursor is provided,
we should default to 0. Otherwise this will generate a query like:
```
WHERE `transaction`.`id` > ‘null’
```
Which is obviously wrong

Test Plan: manual

Reviewers: evan, halla, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4242"
jerm,2017-03-18 22:26:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/35d0144b50712c50262be8a998c6474145b3dee3,35d0144b50712c50262be8a998c6474145b3dee3,"[deploy-it] temp override for deploy branch rules

for ei-prod only.  I set up the ei EB env as prod level, but
have been working on launch changed in master branch. Easy enough to undo,
but I didn't wan't to mess with prod branch until done because
the launch scripts affect all the n1cloud-related environments."
jerm,2017-03-18 21:06:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/e80f893fbc3b8f1a75884b5b880817e5333ee5ed,e80f893fbc3b8f1a75884b5b880817e5333ee5ed,"[n1cloud][executiveintro][docker] updating docker

launch file to be more flexible. We now have a case statement
to take the AWS_SERVICE_NAME we pass in via Dockerfile and run
a definitive list of commands, rather than having to key off the
interpreted command line directly. Makes it lots easier to add/change
commands

Added symlinks to the pm2-prod-api/workers.yml files for clearer naming
within the script, ie pm2-prod-n1cloud-api/workers.yml.  Anticipating
pm2-prod-ei-{task}.yml files to come. Didn't just rename them on the off
chance something else depends on them

Also added some minimal logging"
jstejada,2017-03-14 20:56:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/881644eb516f86f845a84b88a074e07ce6255064,881644eb516f86f845a84b88a074e07ce6255064,"[client-sync] Add error handling when creating syncback requests

Summary: see title. also convert to es6

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4225"
jstejada,2017-03-17 17:59:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ee60b5287c8878f1da4fcee71771e4b38c0836e,4ee60b5287c8878f1da4fcee71771e4b38c0836e,[client-app] Update changelog
jstejada,2017-03-17 17:49:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b8019b752e22d4ab5d2bab1a63892adc73cea8e,9b8019b752e22d4ab5d2bab1a63892adc73cea8e,[client-app] Update changelog
jstejada,2017-03-17 17:08:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/769f9d1d3f2cb8b8bb1e68dbc0f150aed543ad8d,769f9d1d3f2cb8b8bb1e68dbc0f150aed543ad8d,[dev] Fix path for tmp dir in daily script
spang,2017-03-16 22:09:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/34d6505058a465f1b30c0b002c7fedbe7ca34c45,34d6505058a465f1b30c0b002c7fedbe7ca34c45,"Revert ""[iso-core] Upgrade nodemailer""

This reverts commit e3e3cd20e54ec351442862a0d6af2a01467251a7.

Reason for revert: breaks Send Later. Needs more testing."
hallamoore,2017-03-15 20:04:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/69915cf13b25c4673f938e891d16cd94a2fea6a1,69915cf13b25c4673f938e891d16cd94a2fea6a1,"[client-app] Don't show non-existent children on folder creation

Summary:
Previously, after creating a new folder, the UI would indicate that the new
folder had children, even though it didn't. This was caused by duplicate models
in our `MutableQueryResultSet` for the user's categories. Basically, we would
sync the server version of the folder before the `SyncbackTask` for the new
folder returned its `serverId`. Without the `serverId`, the synced version of
the folder couldn't yet be tied to the optimistic folder, so a second row was
created in the database. This second row is removed when the `syncbackTask`
does return the `serverId`, because we persist the optimistic folder with a
`REPLACE INTO` query. (This deletes other rows with the same id.) However,
since this was done inside a `persist` change with the `serverId` and no
`unpersist` was ever recorded for the `clientId`, our `MutableQueryResultSet`
never removed the `clientId` model.

To address this, this diff adds a check in `updateModel` to see if the
`serverId` is being added. If it is, and both the `serverId` and `clientId`
exist in the `_ids` list, we remove the `clientId`.

The children indicator does still briefly show up while there are still two
separate rows for that folder in the database. If we want to get rid of this
completely, we would have to ensure that we do not sync the folder before the
`syncbackTask` returns the `serverId`. However, this would probably be pretty
involved, and for not much gain. This fix is much simpler and reduces most of
the issue.

Test Plan: manual

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4228"
hallamoore,2017-03-14 20:48:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/26389a32aff40a41b317c4ba05a3d33eb81a32b6,26389a32aff40a41b317c4ba05a3d33eb81a32b6,"[client-sync] Only update lastReceivedDate if the message was actually received

Summary:
We don't want to bump threads to the top of the inbox when a user sends a
reply. We originally used `!isSent` to prevent this, but that was removed in
a diff that made sure messages showed up in the inbox when users send emails
to themselves. In order to implement both of these cases properly, this diff
introduces `isReceived` and uses that to determine whether lastReceivedDate
should be updated. Addresses T7991.

Also changes the order of some `or` statements, so that we actually check that
the variable exists before comparing against it.

Test Plan: manual

Reviewers: evan, juan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4226"
emorikawa,2017-03-16 19:07:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/d560939dca69c13613ccec1b7d6db813d073470e,d560939dca69c13613ccec1b7d6db813d073470e,[client-app] don't exclude source maps
spang,2017-03-11 21:44:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3e3cd20e54ec351442862a0d6af2a01467251a7,e3e3cd20e54ec351442862a0d6af2a01467251a7,"[iso-core] Upgrade nodemailer

Summary:
We were using a version that was ~9 months old and a lot of development has
happened since.

v3 is not compatible w/v2, but it looks like we aren't using any of the
features that had breaking changes:

    http://nodemailer.com/about/migrate/

I chose not to switch to the new built-in OAuth2 token refresh support
because we already have a mechanism for refreshing oauth tokens and
adding a different implementation specifically for SMTP would introduce
more opportunities for bugs.

Since mailcomposer is no longer a dependency of nodemailer, I added this
dependency as well.

Test Plan: manual - sent a message, sent a message w/an attachment

Reviewers: evan, khamidou, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4201"
emorikawa,2017-03-14 20:39:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/79699073c63099037d0d6130cf61e3a365b809ad,79699073c63099037d0d6130cf61e3a365b809ad,"[client-app] don't bootsrap cloud stuff when building the client

Summary:
We don't need to spend the time running script/bootstrap in our cloud-*
folders!

Test Plan: manual

Reviewers: spang, juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D4214"
emorikawa,2017-03-14 20:39:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/7fea0ff2a5f2c91ca607e1e439937f6f92e7d33f,7fea0ff2a5f2c91ca607e1e439937f6f92e7d33f,"[client-app] update files ignored in build

Summary:
The ignore list was very old. It included several dozen MB of docs_src and
other crap in our builds

Test Plan: manual

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4213"
emorikawa,2017-03-14 20:35:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/11e6b52534e96fa3ac9e079c16ef5cf21e15e1bc,11e6b52534e96fa3ac9e079c16ef5cf21e15e1bc,"[client-app] upload nupkg for Windows autoupdater

Summary: We need to upload the nupkg for the Windows autoupdater to work

Test Plan: manual

Reviewers: juan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4219"
khamidou,2017-03-14 19:02:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/e384415f1a2e84a3a6d8ac972f1d962e3108c81b,e384415f1a2e84a3a6d8ac972f1d962e3108c81b,"[send-later] Add support for attachments

Summary:
This is going to be a diff way shorter than the previous one! Basically, it adds a new endpoint, `/blobs` to our API to store send later attachments. When a user schedules a draft to be sent, we send all attachments to this endpoint. Separately, we store the rest of the message as metadata.

When it's time to send the message, we fetch the attachments from S3, fetch the metadata and merge them together to get a message we can send.

Test Plan: Tested manually. Will make a final QA pass before landing.

Reviewers: juan, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4196"
emorikawa,2017-03-14 17:55:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/f114a7dbc4fb7edcb8764e6c4c81789b1c8eb7b9,f114a7dbc4fb7edcb8764e6c4c81789b1c8eb7b9,"[client-app] ""two panel"" -> ""Reading Pane On""

Summary: Minor copy change via Sachin

Test Plan: manual

Reviewers: juan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4218"
jstejada,2017-03-14 17:35:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f34843e506b32cdfecc2fa5e7d9ad0ade4e2a15e,f34843e506b32cdfecc2fa5e7d9ad0ade4e2a15e,[client-app] Fix missing depedency for imap-provider-settings
emorikawa,2017-03-14 17:37:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/50f59fb16dfe55d4dfec3abb76b646ac9e26bc6d,50f59fb16dfe55d4dfec3abb76b646ac9e26bc6d,"[client-app] only upload 7 characters of the commit hash

Summary:
On windows running `git rev-parse --short HEAD` does in fact now give you
9 characters instead of 7 like it does on Mac. This will ensure that
builds get uploaded to the same folder and help ensure we don't post a
version that doesn't exist on the release page.

Test Plan: Manual

Reviewers: juan, halla, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4217"
jstejada,2017-03-14 16:19:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd1f5ad7569a0085967bb4e1baf1c040d43c744d,fd1f5ad7569a0085967bb4e1baf1c040d43c744d,[client-app] Update changelog
jstejada,2017-03-13 23:28:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9501cda98e39883db5612fcc7f4b31dc9b73e0f,a9501cda98e39883db5612fcc7f4b31dc9b73e0f,"[client-app] Restart sync when computer awakes from sleep

Summary:
Use electron's `powerMonitor` module to detect when the computer resumes
from sleep, and restart the sync loop when that happens in order to
sync the inbox immediately, in case we received any new mail events
while the computer was asleep

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4216"
jstejada,2017-03-13 22:06:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/36982c66d65518764dab1701481a8b9d125faf45,36982c66d65518764dab1701481a8b9d125faf45,"[client-app] Make resetEmailCache work without forcing re sign-in

Summary:
This commit makes it so `resetEmailCache` works as expected, i.e. it
removes all databases, without forcing the user to re sign-in to their
accounts or NylasID

Previously, this method removed the database without removing the
accounts, left users in an un-authed state that was hard to recover
from. This was fixed in D4212 which makes sure that when we get a new
identity, sync and deltas are restarted

However, resetEmailCache would still force you to log in to yoru NylasID
because it was deleted from the database. However, if we reuse the
command `application:relaunch-to-initial-windows` instead of manually
deleting the database, we can relaunc the app while preserving the users
NylasID session, so they don't have to sign back in manually.

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4215"
jstejada,2017-03-13 21:51:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/80f24652c3ed96c8a4cde81739f2e2c4c8815416,80f24652c3ed96c8a4cde81739f2e2c4c8815416,"[client-app] Don't start sync or delta connections without an identity

Summary:
This prevents the app from entering a restart loop when there's no
identity.

Specifically, when a user logs out of their identity, or when she resets the
email cache, or any other scenario that leaves the app without an
identity but with accounts added, the sync loop (and deltas) will start
without an Identity.

This will cause NylasAPIRequest to throw an error that
forces the user to close the app. When the app restarts, sync will start
again without an identity, and the user will be forced to close the app
again, and so on and so forth for the rest of eternity

Relevant error:
https://github.com/nylas/nylas-mail-all/blob/master/packages/client-app/src/flux/nylas-api-request.es6#L165-L174

Additionaly, this makes sure that after resetting the email cache, the sync
process starts when the identity becomes available

This solves T7989

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4212"
jstejada,2017-03-13 21:06:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a7829008b4920a283b326fc22a3c67f5b42734d,6a7829008b4920a283b326fc22a3c67f5b42734d,"[client-sync] Correctly wait for sync to stop before resetting email cache

Summary:
Previously, while resetting the email cache, we would try to stop sync
and just wait for an arbitraty amount of time for it to stop and the
proceed to blow away the database.

This commit makes it so we correctly wait for sync to stop, and then we
blow away the db. It adds a timeout anyway in case sync is stuck and we
can't stop it

Depends on D4207

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: spang, halla

Differential Revision: https://phab.nylas.com/D4209"
jstejada,2017-03-13 20:44:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/94d989992fce9835681995b147224e84f6f2eaaa,94d989992fce9835681995b147224e84f6f2eaaa,"[client-sync]: Fix error in SyncProcessManager._resetEmailCache

Summary:
We no longer keep `this._accounts` state, which was being accessed
inside `_resetEmailCache`

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: spang, halla

Differential Revision: https://phab.nylas.com/D4207"
jstejada,2017-03-13 17:16:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f41a384630436ae584c1d46f9ab3ee06aa201c9,7f41a384630436ae584c1d46f9ab3ee06aa201c9,[client-app] Update changelog
emorikawa,2017-03-13 23:05:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/929ef698a5be7e7d237a4b7ba3900d58e084d4f6,929ef698a5be7e7d237a4b7ba3900d58e084d4f6,[client-app] fix travis env variables
emorikawa,2017-03-13 22:48:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/a30a48e50c39125a5584a10c6996f53f303795ed,a30a48e50c39125a5584a10c6996f53f303795ed,"[client-app] run windows build separately

Summary:
build-client, aka packaging, aka bundling is now separate from uploading.
This is both to compartmentalize our tasks a bit more and so we can add a
non-grunt windows task inbetween packaging and uploading.

No more heavily-overloaded PUBLISH_BUILD flag.
Added SIGN_BUILD flag instead.
No more TRAVIS and TRAVIS_PULL_REQUEST flag.

Test Plan: Manual

Reviewers: halla, juan, spang

Reviewed By: juan, spang

Differential Revision: https://phab.nylas.com/D4208"
emorikawa,2017-03-13 22:47:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/975b27c46cafd6b29c0602b3192f0bb646db5186,975b27c46cafd6b29c0602b3192f0bb646db5186,"[client-app] remove ability to run specs

Summary:
This removes specs from the build production version.

One of the major issues with the windows build was that one of the package
specs included a .node compiled file that the codesigner attempte to sign,
but couldn't find for some reason.

In testing, removing the specs from the build prod version fixed this.

While we could just remove the one offending test, I think we should just
remove the whole suite from the build version. That'd save in the number
of files we have to ship, save download time, save build time, and have
less chance for some symlinked issue failling a build in the future.

Test Plan: Manual

Reviewers: khamidou, halla, juan, spang

Reviewed By: juan, spang

Differential Revision: https://phab.nylas.com/D4206"
spang,2017-03-13 20:45:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac688d0117902ef687bd61b1e12136baa2b3d722,ac688d0117902ef687bd61b1e12136baa2b3d722,"[iso-core] Pin imap-provider-settings package version

I'm about to make backwards-incompatible changes to this data in
preparation for supporting setting the 'ssl' bit separately for IMAP /
SMTP."
spang,2017-03-13 19:24:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ec60a8e0905026f9df546c5d8bdea863b783b4c,3ec60a8e0905026f9df546c5d8bdea863b783b4c,"[client-app] Don't check for key membership on null

This bug snuck in when I landed the DeveloperBarCurlRequest fix
for the Content-Type header."
spang,2017-03-11 20:18:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a24ea0432e9d75fa1e8fa6581a406a9bb0ceb18,3a24ea0432e9d75fa1e8fa6581a406a9bb0ceb18,"[client-app] Some wording improvements in IMAP onboarding

Summary:
It always drives me crazy when folks use ""setup"" (no space) as a verb,
because the verb version has a space in it.

Also remove the word ""Setup"" from the displayName for custom IMAP accounts
because it doesn't make sense for how we use this field, e.g.

https://github.com/nylas/nylas-mail-all/blob/f47c0a3e19a6f85775c2c751a624801777981a15/packages/client-app/internal_packages/onboarding/lib/page-account-onboarding-success.jsx#L27

will display ""Sucessfully connected to IMAP / SMTP Setup!"" with the old
wording when you successfully auth a custom IMAP account.

Test Plan: manual

Reviewers: evan, juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4199"
spang,2017-03-12 02:47:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/a25ad1e7ad78a2d0baa015d1f3d6c391e5c5372a,a25ad1e7ad78a2d0baa015d1f3d6c391e5c5372a,"[dev] On Linux, don't run redis if already running

Summary:
Dunno what the default behaviour is on Ubuntu, but on my system (Debian
sid) when I have the redis-server package installed it starts up
automatically on system boot. In this case, placate pm2 by having the
launch script sleep forever.

Otherwise, the 'redis' process startup will fail repeatedly and spam the
console.

Test Plan: manual

Reviewers: halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4203"
spang,2017-03-13 18:42:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d43c68b36d6a1c94a3e7ca8f50f1acaf74ba03a,8d43c68b36d6a1c94a3e7ca8f50f1acaf74ba03a,"[dev] Make 'arc lint' shut up about long lines

We don't warn about this in JS, so we shouldn't warn about this in coffeescript either."
spang,2017-03-13 18:33:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc42b5a843ce42c3883566eb7a78543206357eec,dc42b5a843ce42c3883566eb7a78543206357eec,"[client-app] Specify Content-Type in developer bar curl commands

Summary:
Dunno if I'm the only one having this problem, but I spent at least an
hour over the last two days wondering why hapi just sits there and hangs
in the Joi validation step when I copy-paste calls to /auth from the
developer bar to my terminal. It turns out that if you fail to send the
correct Content-Type when sending a JSON payload, Joi just hangs
forever. (WTF!)

Test Plan: manual

Reviewers: halla, evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4204"
spang,2017-03-13 01:47:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5a3895cc4efa0409a9d91c98bf660b539ad0f64,f5a3895cc4efa0409a9d91c98bf660b539ad0f64,[dev] Fix 'arc lint'
spang,2017-03-11 16:57:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/f47c0a3e19a6f85775c2c751a624801777981a15,f47c0a3e19a6f85775c2c751a624801777981a15,"[cloud-api] Remove global override of billing identity URL

This was mistakenly landed by Karim with the Send Later implementation,
and would be REALLY BAD if it ever got deployed to production."
jstejada,2017-03-09 22:46:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/28e25beb6b74eca75c5c8c02d9fc626d1c05a8a4,28e25beb6b74eca75c5c8c02d9fc626d1c05a8a4,"[client-app] Correctly show auth error when we can't connect to n1cloud

Summary:
Previously, n1 cloud auth errors were stuffed into an account's
syncState. The problem with that is that the sync loop manages that
state, and as long as the sync loop is running it will set that state to
running. However, it might be the case that the sync loop is running but
we can't connect to n1Cloud, so even though we would set the `syncState`
to `n1_cloud_auth_failed`, the sync loop would just set it back to
'running', and the user wouldn't see the error notification indicating
that it can't connect to n1Cloud

This commit makes it so we keep tracj of the auth failure state for
n1Cloud in a separate field, and makes sure that the error notification
component shows that error.

Test Plan: manual

Reviewers: mark, spang, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D4172"
jstejada,2017-03-10 21:08:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/6683de8c15e226f70c00b43514080fa2f1c88e02,6683de8c15e226f70c00b43514080fa2f1c88e02,"[client-app] Fix runtime error during send error handler

Summary:
On rare occasions, the api error would not have a body, and we would try
to access the message prop on the body, which would in turn throw an
error.

This commit prevents this error, and adds better messaging to the sentry
report

Test Plan: manual

Reviewers: mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4194"
jstejada,2017-03-10 22:38:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5e1a78e709eeaabafff466a727b170fa7c22ac0,a5e1a78e709eeaabafff466a727b170fa7c22ac0,[client-app] Update changelog
jstejada,2017-03-10 22:05:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/151b581e447fd64276f141516bdde6d31df72035,151b581e447fd64276f141516bdde6d31df72035,[none] (dev) Fix changelog path in daily script
jstejada,2017-03-10 22:05:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/4662e6ff1cbba678834bbba2a2e3c399abf8ab21,4662e6ff1cbba678834bbba2a2e3c399abf8ab21,[client-app] Update changelog
jstejada,2017-03-10 08:09:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c52546468bc17795cea0692c0d8aa1a0626684c,9c52546468bc17795cea0692c0d8aa1a0626684c,"[client-app] Measure and report inline composer open times + consolidate timers

Summary:
This commit adds a new perf metric for inline composer times.

Additionally, it consolidates the timer logic for all other types of draft
creation (mailto links, dropping a file in the app dock icon, etc).

Test Plan: manual

Reviewers: halla, evan, mark

Reviewed By: evan, mark

Differential Revision: https://phab.nylas.com/D4186"
jstejada,2017-03-10 21:33:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/8be2fccc61cc507164c4f275a2b2903d217d4453,8be2fccc61cc507164c4f275a2b2903d217d4453,[client-app] Update changelog
jstejada,2017-03-09 23:17:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/41f8eaaa84fbaab6815d1e3d5c1f41ba57f697e1,41f8eaaa84fbaab6815d1e3d5c1f41ba57f697e1,"[client-app] Make sure we retry delta connection when reauthing account

Summary: See title

Test Plan: manual

Reviewers: halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4176"
jstejada,2017-03-09 16:08:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/d07b9320655026d7bb94b72ddbd9ffa1fbdd71d8,d07b9320655026d7bb94b72ddbd9ffa1fbdd71d8,"[client-app] More defensive error handling to prevent sync from halting

Summary:
This commit adds error handling to the sync-loop's `onSyncError` and
`scheduleNextSync`.

These functions generally don't fail, as they are in the `catch` and
`finally` blocks respectively of the sync loop. But as we've seen in
D4152, the datbase can sometime error if it's in a bad state. If it
errors inside these functions, we will never schedule the next run of
the sync loop.

Depends on D4152

Test Plan: manual

Reviewers: evan, spang, mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4153"
jstejada,2017-03-09 21:41:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/16fce8fc806265818b802df9a081a651ff690351,16fce8fc806265818b802df9a081a651ff690351,"[client-app] Prevent delta streaming connection from retrying too much

Summary:
Before this commit, we would call .close() onError and when the
connection closed. We also closed the connection onError, even though
NylasLongConnection had also closed it, so we ended up calling close a
bunch of times. This would cause us to set a bunch of timeouts to retry
unecessarilly.

This commit makes it so we ensure there's only one retry timeout and
consolidates the logic that calls .close() so we don't call it so many
times unnecessarily

Test Plan: manual

Reviewers: spang, mark, evan

Reviewed By: mark, evan

Differential Revision: https://phab.nylas.com/D4166"
jstejada,2017-03-08 21:56:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/1cfb70db1c9e5e20379fc69193d98dc87c5c8bd4,1cfb70db1c9e5e20379fc69193d98dc87c5c8bd4,"[client-app] Consolidate delta connection stores, rm deltas internal_pkg

Summary:
This commit consolidates the `DeltaConnectionStatusStore` and the
`DeltaConnectionStore` which kept track of very similar state and made
sense to be the same store (as per feedback in D4118#77647)

Given that this state needs to be available app-wide for plugins to
query the status of delta connections, `internal_packages/deltas` was
removed (given that it only activated that store), in favor of having the
unified store inside `src/flux/stores` and available via `nylas-exports`

The `deltas` package also contained some contacts-ranking code, which is
no longer in use until we restore that fetaure, so I created a
`internal_packages/contact-rankings` which contains this unused code for
now.

Test Plan:
manually open, close, end delta connections, verify that I'm getting
correct results. unit tests to come

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4145"
jstejada,2017-03-08 20:24:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/6536e0e6fd7f42ce99c236294fe820b94db57bb0,6536e0e6fd7f42ce99c236294fe820b94db57bb0,"[client-app] :art: Rename NylasSyncStatusStore to FolderSyncProgressStore

Summary: see title

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4141"
jstejada,2017-03-08 20:18:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/2fa50fa96daae3959db1d7ee1b5ef787d0e3551f,2fa50fa96daae3959db1d7ee1b5ef787d0e3551f,"[client-app] Consolidate apierror status code that we should not report

Summary:
This DRY's up code that use these status codes

Depends on D4130

Test Plan: manual

Reviewers: spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4140"
jstejada,2017-03-09 08:03:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/5cefd108095a93b2fdb4663553d02ca6ced91d09,5cefd108095a93b2fdb4663553d02ca6ced91d09,"[client-app] Fix error when attempting to report a fetch id error

Summary:
When reporting error inside `IdentityStore._fetchIdentity`, we would
pass null as the `extra` parameter for `reportError`. This would cause
us to try to assign something to null and throw an error while reporting
the error.

(Even though `extra` has a default value of `{}` (see
declaration of `NylasEnv.reportError`), passing null will be interpreted
as a valid arg and it wont get assigned the default value)

Thankfully, the second error /is/ reported to sentry: https://sentry.io/nylas/nylas-mail/issues/230589717/

Test Plan: manual

Reviewers: mark, halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4150"
jstejada,2017-03-09 08:11:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8a974566f08246f5bcca342cdda85755b6ebd88,c8a974566f08246f5bcca342cdda85755b6ebd88,"[client-app] Rate limit error reporting for message processing errors

Summary:
This should prevent us from flooding Sentry with errors like this one:
https://sentry.io/nylas/nylas-mail/issues/230605150/

Test Plan: manual

Reviewers: spang, mark, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4151"
jstejada,2017-03-08 01:02:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/956084b1eb1e4687503d68a088f1ae0902659ae4,956084b1eb1e4687503d68a088f1ae0902659ae4,"[client-app] Prevent `database malformed` error restart loop

Summary:
This error is can flood Sentry pretty badly: https://sentry.io/nylas/nylas-mail/issues/230629801/

My initial thought was to rate limit it, but rate limiting wouldn't
do any good because when we get that error we destroy the databases and
restart the app, and we will loose the in-memory rate limiting data.

The real fix, and reason why Sentry is being flooded with this error by
a single user, is that once you encounter this error the app will enter
a restart loop that constantly throws this error. The reason being that
we weren't properly awaiting for the K2 account databases to be dropped
before closing the app, so on restart, the database would still be
malformed.

The fix is to properly `await` for the database drops

Test Plan: manual

Reviewers: spang, mark, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4127"
spang,2017-03-08 02:03:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/d24ffc607f1e4cbd79101d741e8a6a8c9850b469,d24ffc607f1e4cbd79101d741e8a6a8c9850b469,"[client-app] Don't report incorrect username or password to Sentry

Summary:
This is not a bug. Maaaybe we want to report this to MixPanel for individual
user debugging (how do we do that?), but it doesn't make sense to report this
error to Sentry.

Example:

https://sentry.io/nylas/nylas-mail/issues/230530818/

Test Plan: yolo

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4130"
emorikawa,2017-03-09 20:14:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a09158df93e1b3ea86066487c04a0eeb655d8d0,7a09158df93e1b3ea86066487c04a0eeb655d8d0,"[client-app] don't re-close dev tools

Summary:
If you have the console open and are looking at the Source panel or
something, this will constantly bring you back to the Console panel. Won't
do that anymore with this chec

Test Plan: manual

Reviewers: spang, mark, halla, juan

Reviewed By: mark, halla, juan

Differential Revision: https://phab.nylas.com/D4162"
emorikawa,2017-03-09 20:11:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/f82772e84091e66bcf17a0d68ea5fe4971a620b1,f82772e84091e66bcf17a0d68ea5fe4971a620b1,"[client-app] fix circular errors and logging

Summary:
Errors weren't getting reported because of a circular reference causing
JSON.stringify to fail.

We can't add the whole API `response` object onto the error object,
because sometimes (like when the delta connection errors with a 401), the
`response` object is circular. We only use it to the extract the status
code anyway and it's a huge object. This diff excludes them from the
APIError objects.

We also have code to recover just in case JSON.stringify errors for some
other weird reason. It'll still attempt to report the error prefixed with
`Recovered Error`

Finally, we used to spit only the `error.stack` to the console. This meant
what we saw in the console didn't properly include the error messages
being incredibly not useful.

It's better to console.error the whole error object since that'll more
nicely display on the inspector console

Test Plan: manual

Reviewers: juan, spang, mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4154"
jstejada,2017-03-09 18:59:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/5794a2a1e8db03b5f2c64895d0f41445a8763bf5,5794a2a1e8db03b5f2c64895d0f41445a8763bf5,[client-app] Correctly set process title
jstejada,2017-03-09 17:53:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c58758f0cfb2289dd438655c51ec8ec6b37af19,4c58758f0cfb2289dd438655c51ec8ec6b37af19,[client-app] Update changelog
jstejada,2017-03-09 16:22:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c6ea3506fd007b90685c11e64d53b13cc7b5806,0c6ea3506fd007b90685c11e64d53b13cc7b5806,[client-app] Update changelog
jstejada,2017-03-09 08:18:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dc00017f9deb10b010ae73404a571e886e44b88,9dc00017f9deb10b010ae73404a571e886e44b88,"[client-sync] Bump sequelize version - Ensure it doesn't halt sync

Summary:
This commit bumps the version of sequelize to point to the latest
version in our fork. This version bump also includes latest updates from
upstream sequelize since the last time we bumped the version.

Notably, it includes a critical fix that will prevent the sync
loop from getting stuck on rare occasions.

Specifically, sequelize's `Query.prototype.run` could in some cases return a
Promise that would /never/ resolve or reject, effectively halting the
execution of any code that was waiting for that promise. This was due to
a lack of error handling inside a the query's `afterExecute` function; if an
error was thrown there, the enclosing Promise would never reject, and
the error would just remain uncaught. An example of such an error that
could cause this scenario is: T7742 - https://sentry.io/nylas/nylas-mail/issues/230016155/

Sync getting halted in this way can produce a variety of user facing
bugs like not being able to send or it taking an absurd amount of time
(hours), tasks never finishing or taking an absurd amount of time to
complete, new mail not arriving, among others

The commit that fixes this is: https://github.com/nylas/sequelize/commit/0deeda9e1ae058c6ce8d5bb29f4eea1a590f17f3
The full set of changes introduced by this version bump are: https://github.com/nylas/sequelize/compare/nylas-3.30.0...nylas-3.40.0

**Note:**
It is important to note that sequelize might still halt the sync loop if
there are other places in the code that can return Promises that never
resolve or reject under certain circumstances. I can consistently reproduce this
scenario when an error is thrown inside `afterExecute`, and I've seen it
happen in the wild, but I've also ran into this type of sync loop halting (db
promises never resolve) without any sequelize errors being thrown, which
suggests that there are other places in the sequelize code that might end
up returning a Promise that will halt sync.

Unfortunately, we don't have a good way to detect and report when this
happens yet, but we are adding one in upcoming diffs in order have data
on how many people are running into this, and/or if this patch completely
fixes the issue. Otherwise, we'd need to audit sequelize's code.

Should resolve T7837 and T7767

Test Plan: manual

Reviewers: spang, mark, halla, khamidou, evan

Reviewed By: evan

Subscribers: mg, tomasz

Maniphest Tasks: T7767, T7837

Differential Revision: https://phab.nylas.com/D4152"
jstejada,2017-03-09 06:32:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/19ff57bbefb9b91b5b4a4281eec402f259d4e8d1,19ff57bbefb9b91b5b4a4281eec402f259d4e8d1,[none] (dev) Fix npm version bump path in script/daily
jstejada,2017-03-09 06:24:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/342fa95145472fd883a4922b007485261c005f51,342fa95145472fd883a4922b007485261c005f51,bump(version): 1.0.34
jstejada,2017-03-09 06:24:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/a18030c0dc124f6f71e276fd27c662c6385b0ac8,a18030c0dc124f6f71e276fd27c662c6385b0ac8,[none] (dev) Fix paths in scripts/daily
jstejada,2017-03-07 06:40:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/d60a23c448150d9bf83b6b089289d8d08427e4c7,d60a23c448150d9bf83b6b089289d8d08427e4c7,"[client-app] (deltas P6) Split local and cloud deltas

Summary:
This commit splits apart the `AccountDeltaConnection` class, which was
in charge of listening to both cloud /and/ local deltas by way of an
artificial interface, `DeltaStreamingInMemoryConnection`.

Splitting this into 2 modules with separate responsibilities will hopefully
make this code easier to reason about and reduce some cruft and unnecessary
indirection.

Specifically, this commit makes it so:

- `DeltaConnectionManager` is only in charge of starting and ending `DeltaStreamingConnection`s, which are solely in charge of listening to deltas from the cloud api
- `LocalSyncDeltaEmitter` no longer unnecessarily emits events for the `deltas` package to listen to but rather directly processes and saves those deltas from the K2 db to edgehill.db
- `LocalSyncDeltaEmitter` is also in charge of keeping track of the latest received cursor, under its own JSONBlob key in edgehill.db. This migrates localSync cursors saved under the old key.
- `LocalSyncDeltaEmitter` is now instantiated and managed from within the `SyncProcessManager` as opposed to the `SyncWorker`. Apart from removing extra state from the `SyncWorker`, this removes dependencies on the client-app environment from the sync-worker.
- `DeltaStreamingInMemoryConnection` and `AccountDeltaConnection` are now gone

(Sorry for the big diff! This one was a little hard to split up without landing something broken)

Depends on D4121

Test Plan: manual + unit tests planned in upcoming diff

Reviewers: halla, mark, evan, spang

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4122"
jstejada,2017-03-07 04:28:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/049a3c2c389bd86ff0d4b0c52dce2fc7c682f1d6,049a3c2c389bd86ff0d4b0c52dce2fc7c682f1d6,"[client-app] (deltas P5) Move DeltaProcessor to nylas-exports

Summary:
This is to make it available to all plugins in the app
Depends on D4120

Test Plan: manual

Reviewers: halla, mark, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4121"
jstejada,2017-03-07 01:26:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/8bc2ec5384ae86b441c3132df09e7036be08aa9a,8bc2ec5384ae86b441c3132df09e7036be08aa9a,"[client-app] (deltas P4) Fixup DeltaStramingConnection + retry on close

Summary:
This commit completely refactors `DeltaStreamingConnection`, notably
introducing the following changes:

- Right now, `AccountDeltaConnection` establishes both delta connections to the cloud api and to the `client-sync` database (K2). This class is meant to disapper in favor of splitting into two different classes meant for syncing with the n1Cloud api and the local database. Specifically, `DeltaStreamingConnection`'s only responsibility is now to connect to the n1Cloud API and establish an http streaming connection for metadata deltas, etc. This class no longer unecessarily inherits from `NylasLongConnection`, which removes a lot of unecessary callback indirection.
- The statuses of the n1Cloud delta streaming connections are now stored in as JSONBlobs in edgehill.db under new keys. This commit ensures that the data is correctly migrated from the old key (`NylasSyncWorker:<account_id>`).
- The `DeltaStreamingConnection` now correctly retries when closed or errors. This logic previously existed, but was removed during the K2 transition: https://github.com/nylas/nylas-mail/blob/n1-pro/internal_packages/worker-sync/lib/nylas-sync-worker.coffee#L67
- Delta connection retries now backoff using the `ExponentialBackoffScheduler`
- Attempt to restore the delta connection whenever the app comes back online

Depends on D4119

Test Plan: manual + planned unit tests in upcoming diff

Reviewers: halla, mark, evan, spang

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4120"
jstejada,2017-03-06 22:31:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4d3da1e4df1caaa5a08dbe5aa610e3cf518d884,b4d3da1e4df1caaa5a08dbe5aa610e3cf518d884,"[client-app] (deltas P3) Change `onResults` interface in NylasLongConnection

Summary:
For legacy reasons, NylasLongConnection did not take the `onResults`
callback as an option, but rather it was a method you had to call on the
connection, which took the callback, and which you had to call after
instantiating the connection. This was an annoying and clunky interface.

This commit makes it so NylasLongConnection takes an `onResults` option
as one would expect it to, and updates any references to the old
interface

Depends on D4118

Test Plan: manual

Reviewers: halla, mark, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4119"
jstejada,2017-03-06 21:32:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/92bf048754c655eeafc237121788f88608b95854,92bf048754c655eeafc237121788f88608b95854,"[client-app] (deltas P2) :art: Split up NylasSyncStatusStore

Summary:
Turns out, NylasSyncStatusStore doesn't need to concern itself with the
status of delta connections.

This is legacy cruft from the days when this store used to provide the
online status of the app based on the delta connections. Now we have an
OnlineStatusStore, so we don't need this at all

Instead of stuffing that state in that store, this commit adds a small
DeltaConnectionStatusStore to provide an easy way to listen to changes
on the status of delta connections. The only part of the app concerned
with that state is the DeveloperBarStore in order to render the green
circles for delta connections in the worker window.

Depends on D4117

Test Plan: manual

Reviewers: mark, halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4118"
jstejada,2017-03-06 21:12:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffb00c7a4a6c171a53f0602527f8a5aacab755ad,ffb00c7a4a6c171a53f0602527f8a5aacab755ad,"[client-app] (deltas P1) :art: Fixup AccountDeltaConnectionPool

Summary:
- Rename to `DeltaConnectionManager`
- Convert main.coffee to main.es6
- Use async/await

Test Plan: manual

Reviewers: halla, mark, evan, spang

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4117"
jstejada,2017-03-07 08:57:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/47742f31eda51118c7117f614630787f36906128,47742f31eda51118c7117f614630787f36906128,"[none] (dev) Add script/daily

Summary:
Generating the daily build always takes a bit of effort, so I wrote the
script to automate the process and allow anyone to do it as well.

This script will:

- Check your current working directory is in a good state
- Bump the version number in package.json
- Edit CHANGELOG.md with the git log diff between current master and the last version tag (you can also manually edit it). This is so writing the CHANGELOG before a release takes less effort; you will just need to open the CHANGELOG file and edit the commit messages.
- Commit the changes with a commit message of: bump(version) <next_version>
- Add new version tags to nylas-mail and k2
- Push the changes to Github
- If provided with the flag, it will build the app. This is intended to be used in our mac mini machine

There are a few TODO's left in here, like updating the daily channel,
and emailing a notification when the channel is updated with the buid urls.

When this lands, we will configure our mac mini to run this script daily/nightly.
Also, any engineer should be able to trigger a daily build easily by just
running this script.

For sample output, see this commit which was generated by this script:
https://github.com/nylas/nylas-mail/commit/4041e59f465fda276826a134bf65a11c1eea7bcd

Test Plan: manually running it

Reviewers: halla, spang, mark, khamidou, evan

Reviewed By: evan

Subscribers: tomasz

Differential Revision: https://phab.nylas.com/D4123"
jstejada,2017-03-08 17:48:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/2da350fefa84d75692b3b5aa51ab4874e68abb17,2da350fefa84d75692b3b5aa51ab4874e68abb17,"[client-app] Handle errors when opening imap box correctly

Summary:
If an error is thrown while opening an imap box, we need to make sure to
set the `_isOpening` back to false

Test Plan: manual

Reviewers: mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4134"
spang,2017-03-08 01:08:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/673e47f62c8455f717be328bbc8a8df82dc92341,673e47f62c8455f717be328bbc8a8df82dc92341,"[iso-core] Provide better info to Sentry on send errors

Summary:
In many cases when send fails, the server settings may be incorrect.
Send this data to Sentry with the original error in order to help us
diagnose.

I think the grouping will only contain settings for a single user
getting the same error, but should still be good enough to do further
investigation, e.g. https://sentry.io/nylas/nylas-mail/issues/230529222/

We can always go look up the requests in the n1Cloud logs if more info is
needed.

Test Plan: yolo

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4131"
jstejada,2017-03-08 07:06:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc271b4f820c6c09a9f8df6343c540b47e0430bf,fc271b4f820c6c09a9f8df6343c540b47e0430bf,bump(version) 1.0.33
spang,2017-03-08 01:35:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/09949b81a2e9dd9e7d0584f222c51865df41d3bd,09949b81a2e9dd9e7d0584f222c51865df41d3bd,"[client-app] Differentiate APIError by URL also

Summary:
We have a bunch of different endpoints and it'd be helpful to know which
endpoints are failing, not just which status codes are being thrown. e.g. while
trying to reproduce send failures, I've been able to cause /auth to fail with a
504, but I couldn't tell which endpoint was failing with the 504 until I added
this extra differentiator.

Test Plan: manual

Reviewers: mark, juan

Reviewed By: mark, juan

Differential Revision: https://phab.nylas.com/D4128"
spang,2017-03-08 01:41:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee0e0ded3bb0ee93b09cb3a1df4aabdfe7901a55,ee0e0ded3bb0ee93b09cb3a1df4aabdfe7901a55,"[client-app,cloud-{api,workers}] Bump raven version

Sentry is complaining that we're sending events using an old SDK."
khamidou,2017-03-08 00:27:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/f279898275666741a617d8d7ee5f75d389e904bc,f279898275666741a617d8d7ee5f75d389e904bc,"Revert ""Revert ""[feat] Add support for send later""""

Arc land messed up and landed a not fully merged branch. (Seriously – I
had merged a copy of my branch with master to see how easy it would be.
Because I didn't want to merge the whole thing, I blindly committed my
changes and switched back to my real branch). To my great surprise, arc
decided to use the wrong branch when landing it.

Original commit message:

Summary:
    Finally, here it is! Send later, with support for open tracking but
without support for attachments yet. It took me some time to find the
right way to do things.

    **The send later dilemna**

    There's two ways we could handle send later:
    1. do everything on the client
    2. process the message in the cloud

    1. is very tempting because it would make the cloud server very
simple. Unfortunately, it has some serious limitations, for example,
setting the ""Date"" message header. That's why I chose to go with 2. When
a user presses the ""Send Later"" button, we save the open/link tracking
metadata and fills in all the required fields. I added a custom endpoint
to the K2 API to do this, `/drafts/build`. After that, we save the JSON
contents of the message as metadata.

    When we process metadata, we simply create a MIME message from the
JSON and send it.

    **Limitations**

    Right now, send later doesn't support and attachments. There's also
some minor code duplication which needs to be refactored away.

Test Plan: Tested manually. Checked that regular send still worked, too.

Reviewers: mark, spang, halla, juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4054"
khamidou,2017-03-08 00:18:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c9a26f7d88dcbfaec094e9b9abc97c44e33853b,9c9a26f7d88dcbfaec094e9b9abc97c44e33853b,"Revert ""[feat] Add support for send later""

This reverts commit 1f2061e0a7ee9cb268d489a4e5f27be779ccc07a."
khamidou,2017-03-08 00:05:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f2061e0a7ee9cb268d489a4e5f27be779ccc07a,1f2061e0a7ee9cb268d489a4e5f27be779ccc07a,"[feat] Add support for send later

Summary:
Finally, here it is! Send later, with support for open tracking but without support for attachments yet. It took me some time to find the right way to do things.

**The send later dilemna**

There's two ways we could handle send later:
1. do everything on the client
2. process the message in the cloud

1. is very tempting because it would make the cloud server very simple. Unfortunately, it has some serious limitations, for example, setting the ""Date"" message header. That's why I chose to go with 2. When a user presses the ""Send Later"" button, we save the open/link tracking metadata and fills in all the required fields. I added a custom endpoint to the K2 API to do this, `/drafts/build`. After that, we save the JSON contents of the message as metadata.

When we process metadata, we simply create a MIME message from the JSON and send it.

**Limitations**

Right now, send later doesn't support and attachments. There's also some minor code duplication which needs to be refactored away.

Test Plan: Tested manually. Checked that regular send still worked, too.

Reviewers: mark, spang, halla, juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4054"
jstejada,2017-03-07 23:15:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/a482961f7aed5f5ffdec1fa218dd0f0052d5da0b,a482961f7aed5f5ffdec1fa218dd0f0052d5da0b,[client-app] :art: rename for consistency
jstejada,2017-03-07 20:33:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/fdc4a92aeb03e09745fd0421c9aa7e1e3aa99b19,fdc4a92aeb03e09745fd0421c9aa7e1e3aa99b19,[none] (dev) Fix script name
emorikawa,2017-03-07 19:54:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5171adc2091e5e435973df87c4642cbc530ef81,f5171adc2091e5e435973df87c4642cbc530ef81,"[client-app] also upload a next-version to S3 for autoupdate testing

Summary:
We never want to ship the last release we'll ever ship.
This can happen if the new version's autoupdater is broken.
To test this we upload to a version n+1 higher than the current one.

Test Plan: manual

Reviewers: juan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4125"
emorikawa,2017-03-07 19:54:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2bf7771840e06322dd2e91a30fe9d299f54d1ec,b2bf7771840e06322dd2e91a30fe9d299f54d1ec,"[dev] change npm script names

Summary:
`npm run cloud` felt nicer than:
`npm run start-cloud`

Test Plan: manual

Reviewers: juan, spang, mark, khamidou, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4124"
emorikawa,2017-03-07 19:50:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/a653f01e43f29a24104181ed3c99fe2129c65894,a653f01e43f29a24104181ed3c99fe2129c65894,"[dev] use .cmd versions for Windows

Since spawn on Windows can't accept scripts like exec can :("
emorikawa,2017-03-07 19:24:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a48cf3eb6e311bb215ecf4cc3969cd24e8afea4,8a48cf3eb6e311bb215ecf4cc3969cd24e8afea4,"[dev] fix AppVeyor lerna bootstrap command

Needs to include `.cmd` for windows lerna builds"
emorikawa,2017-03-07 19:10:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/90de279f2ed7d0e33d4a815c3f3fde604cea1374,90de279f2ed7d0e33d4a815c3f3fde604cea1374,"[*] use hardlinked .babelrc for AppVeyor

Since babel-node won't work on AppVeyor if the babelrc is symlinked"
jstejada,2017-03-07 09:42:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8a553d52232e3dffbdf86550c419fde255da1bf,a8a553d52232e3dffbdf86550c419fde255da1bf,[client-app] Update changelog
jstejada,2017-03-07 08:45:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/89ced414248868bbe46df748de05d88feb2742ac,89ced414248868bbe46df748de05d88feb2742ac,bump(version) 1.0.32
jstejada,2017-03-07 08:24:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd2730cba75408ba25c9b7e39578cfba281b6b0a,dd2730cba75408ba25c9b7e39578cfba281b6b0a,wip
jstejada,2017-03-06 20:59:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/f6312573e01a58d694b7d8e32606a60055f84380,f6312573e01a58d694b7d8e32606a60055f84380,[client-app] :art: DRY a few lines of code
jstejada,2017-03-06 20:40:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/4af5b713924e78d866ca2f861476a61fcaf3f62b,4af5b713924e78d866ca2f861476a61fcaf3f62b,"[client-app] Report provider when reporting remove-from-threads-from-list

Summary: see title

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4103"
jstejada,2017-03-06 20:38:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc1527956afbc6eb84f06518d43fd709d02b5802,dc1527956afbc6eb84f06518d43fd709d02b5802,"[client-app] Report provider when reporting send perf metrics

Summary: see title

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4102"
emorikawa,2017-03-06 20:35:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad566813f07163d08171b05be5462757f2f6eeb7,ad566813f07163d08171b05be5462757f2f6eeb7,[client-app] use forked lerna for better npm logging
jstejada,2017-03-06 19:35:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/2413f59b1c411c602869bd59251d1bb0fd8904e0,2413f59b1c411c602869bd59251d1bb0fd8904e0,"[client-app] Fix build, add jasmine to iso-core deps"
emorikawa,2017-03-06 19:13:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/a34cf8fb07d1ae7e03972210b8371ce735161994,a34cf8fb07d1ae7e03972210b8371ce735161994,[*] remove travs_wait now bootstrap more verbose
jstejada,2017-03-06 17:04:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/649b5555211bf8bcbbbc87d1a1a527ffbf7f76e6,649b5555211bf8bcbbbc87d1a1a527ffbf7f76e6,"[client-app] Add basic rate limiting to Sentry

Summary:
This commit adds a new option to the `reportError` interface to allow
to rate limit specific kinds of errors that are known to be reported a
lot if they fall in a loop for example.

For now, it only allows to impose a fixed reporting rate per hour for a specific
error, and will not report any errors past that rate before an hour has
passed.

Depends on D4099

Test Plan:
manually check that it reports and does not report errors based on the rate
limit data passed

Reviewers: khamidou, mark, evan, halla, spang

Reviewed By: evan, halla, spang

Differential Revision: https://phab.nylas.com/D4100"
jstejada,2017-03-06 16:22:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/d20700e06817888fdd2742cc605b64700820163c,d20700e06817888fdd2742cc605b64700820163c,"[client-sync] Improve reporting of refresh access token errors

Summary:
Add better messaging and logging to the console.

Depends on D4098

Test Plan: manual

Reviewers: evan, khamidou, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4099"
jstejada,2017-03-06 16:15:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/12256ad0a1c8ce3bd4e4aedd305485fe8d8069c0,12256ad0a1c8ce3bd4e4aedd305485fe8d8069c0,"[client-sync] Don't double report refresh access token API errors

Summary:
Given that NylasAPIRequest reports all APIErrors for requests that
return 5xx, we were double reporting access token errors, which caused 2
groups in sentry and makes it difficult to track.

This commit removes the extra reporting for that error in the sync loop

Test Plan: manual

Reviewers: evan, khamidou, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4098"
jstejada,2017-03-06 07:28:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec3f39f4ce5af7c034bca3e1dde7a0ae89535ecd,ec3f39f4ce5af7c034bca3e1dde7a0ae89535ecd,"[client-sync] Sync accounts when app comes back online

Summary:
Given that we backoff exponentially in the sync loop when we encounter
RetryableErrors (e.g. network errors), if the app goes offline and
reaches the maximum retry backoff of 5 minutes, and if then the app comes
back online, in the worst case, the sync loop will idle for 5 minutes before trying to
sync, which is undesireable.

To mitigate this, everytime we come online we can wake all of the sync
workers. This shouldn't have any adverse effects

Test Plan: manual

Reviewers: evan, mark, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4097"
emorikawa,2017-03-06 17:16:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/82cd2d91e3bacd4c7f25f9fe91e8f46b18fe0287,82cd2d91e3bacd4c7f25f9fe91e8f46b18fe0287,[*] increase loglevel for lerna bootstrap
jstejada,2017-03-01 22:38:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ecd9346e728812c33cfe44962473f1dd565d267,5ecd9346e728812c33cfe44962473f1dd565d267,"[client-app] Include node-mac-notifier in build

Summary:
Given that `lerna bootstrap` does not install optional dependencies, we
need to manually run `npm install` inside `client-app` so
`node-mac-notifier` get's correctly installed and included in the build

See https://github.com/lerna/lerna/issues/121

Fixes T7887

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Maniphest Tasks: T7887

Differential Revision: https://phab.nylas.com/D4076"
emorikawa,2017-03-06 16:37:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/3bed544fed783072b9279a65f03836d64f747190,3bed544fed783072b9279a65f03836d64f747190,[*] add `travis_wait` to build
emorikawa,2017-03-06 14:42:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b6fd1a6c0e9597613fef2c72b8e206adb0d1d62,1b6fd1a6c0e9597613fef2c72b8e206adb0d1d62,[client-app] resolve symlinks in spec
jstejada,2017-03-02 22:47:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8c9aaccfdb81440458af2428ea7fac63c559f6a,b8c9aaccfdb81440458af2428ea7fac63c559f6a,"[client-sync] Use ExponentialBackoffScheduler for sync loop retries

Summary:
This is mostly to clean up the logic here a little bit.

Specifically:

- The backoff when encountering retryable errors is now truly exponential
- When encountering a permanent error, we back off for a minute
- If we don't encounter consecutive RetryableErrors, we clear the exponential backoff. Previously, we would just clear it when sync completed without errors.

Test Plan: manual

Reviewers: khamidou, spang, evan, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4086"
jstejada,2017-03-03 21:44:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc53fb958a388d885f419aa28259de6f4885924e,bc53fb958a388d885f419aa28259de6f4885924e,"[client-app] Prevent noisy uncaught errors when closing long connection

Summary:
This commit makes it so we /always/ catch errors thrown in the request
established inside `NylasLongConnection`. Specifically, it catches an
uncaught `socket hang up` error which is flooding Sentry unnecessarily
(https://sentry.io/nylas/nylas-mail-old-1030/issues/213178758/).

This error is thrown when the long connection is manually ended before
any data was received from the request (which happens most times during
search when you clear the search query).

The problem was that when we end the long connection, we remove all event listeners
from the request, and /then/ the error is thrown, at which point there is no error
handler to catch it. The solution is simply to always have an error handler attached to
the request object.

This commit also adds extra error handling that seems to have been missing.

Test Plan:
manually check that delta connection is still working, and that error
is no longer thrown when you search and then immediately clear the search

Reviewers: mark, evan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4096"
jstejada,2017-03-01 20:47:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/a09d706e607e394a03410a4cdb3ee49fa47c8ac2,a09d706e607e394a03410a4cdb3ee49fa47c8ac2,"[client-app] Correctly listen and report `abort` and `aborted` events in NylasAPIRequest

Summary:
We want to listen to both `abort` and `aborted`

- `abort` happens when we manually abort a request client side, so we don't want to report this to sentry
- `aborted` happens when the server aborts the request, so we /do/ want to report in this case

Test Plan: manual

Reviewers: spang, mark, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D4073"
emorikawa,2017-03-03 22:28:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ee3b889af4d3b2b3a1b0da232cc3f94b70ffa97,5ee3b889af4d3b2b3a1b0da232cc3f94b70ffa97,[client-app] fix hardcoded babelrc path for appveyor
emorikawa,2017-02-21 23:11:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/99da583c5c726b0715c11d62586edc15bdfe819a,99da583c5c726b0715c11d62586edc15bdfe819a,"[client-app] update appveyor

Summary:
This updates the appveyor file to get the app building on windows too!

See https://ci.appveyor.com/project/nylas/nylas-mail-all

Test Plan: Run https://ci.appveyor.com/project/nylas/nylas-mail-all

Reviewers: juan, spang, jerm

Differential Revision: https://phab.nylas.com/D4000"
emorikawa,2017-03-03 22:17:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/756fabaeea262d44882b97819d3c638039d35287,756fabaeea262d44882b97819d3c638039d35287,[isomorphic-core] move devDependencies from iso-core to repo root
emorikawa,2017-03-03 01:56:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/90481f8dc6a8c13b07bb05fc024e5d57045d533f,90481f8dc6a8c13b07bb05fc024e5d57045d533f,[client-app] fix keychain issue on OSX build
spang,2017-03-03 00:30:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/936c22ff7e88420e995e13d7ec7b068aacc2e9aa,936c22ff7e88420e995e13d7ec7b068aacc2e9aa,"[client-private-plugins] Update Sentry DSN

Summary:
Previous releases contained errors that were spamming our Sentry project
and running us out of quota. Sentry.io supports rate limits per project,
so in order to ensure quota availability for new releases, we are
switching to a new Sentry project in conjunction with adding client-side
rate limiting for errors that could be submitted repeatedly in a loop
(sync loop errors, API errors etc.)

Test Plan: ship it

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4092"
jstejada,2017-03-02 22:45:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc933b9480e3db00ccb0edd562275be29be06520,dc933b9480e3db00ccb0edd562275be29be06520,"[iso-core] :art: Rename imap-pool.es6 to imap-connection-pool

To be consistent with the name of the exported module"
jstejada,2017-03-02 20:10:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/08513d2113ed6418c9528424cc597de6c0c00c0e,08513d2113ed6418c9528424cc597de6c0c00c0e,bump(version) 1.0.31
hallamoore,2017-03-02 18:38:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/3497bc30bd92a9ed6b5de72bd43a14e33ca54e43,3497bc30bd92a9ed6b5de72bd43a14e33ca54e43,"[*] Change the symlink location for the isomorphic-core specs

Summary:
Put them in the client-app/spec folder instead of
client-app/internal_packages

Test Plan: Ran the tests

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4080"
hallamoore,2017-02-28 23:21:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/c811d8446d761e52e391bba7f2e6646a066517d1,c811d8446d761e52e391bba7f2e6646a066517d1,"[client-app, client-private-plugins] Update the pending send-reminders UI

Summary:
- Add an icon to threads that have reminders set
- Show the pending reminder message header in all perspectives, rather than
    just the Reminders perspective
- Add the ability to clear the reminder from the message header
- Condense the message header text

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Subscribers: sdw

Differential Revision: https://phab.nylas.com/D4052"
jstejada,2017-03-02 01:19:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/a41f8bb32a2522dbb0c4748ba2ac60919b3f458f,a41f8bb32a2522dbb0c4748ba2ac60919b3f458f,"[iso-core] Fix IMAPConnection.openBox

Set _isOpeningBox to true at the right moment"
jstejada,2017-03-02 00:57:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/701a913f2a12e8c520c1631d9d6d1cf29d3677c6,701a913f2a12e8c520c1631d9d6d1cf29d3677c6,"[none] Update .eslintrc

Ignore `no-unresolved` errors when importing from isomorphic-core"
jstejada,2017-03-01 23:48:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8f14a1e1fc9667d9917fb39c60553ddfba15664,e8f14a1e1fc9667d9917fb39c60553ddfba15664,[client-sync] :art: lint errors
jstejada,2017-02-28 17:56:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/1dbd4accda0c1b6c314a72ff1ea52c967bc975cc,1dbd4accda0c1b6c314a72ff1ea52c967bc975cc,"[cloud-*] (imap) :art: Fixup imap settings resolution in gmail auth

Summary: `generateXOAuth2Token` seems to be better placed inside gmail-oauth-helpers

Test Plan: none :(

Reviewers: khamidou, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D4048"
jstejada,2017-03-01 20:31:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/eac121fe8b04576f9c40bb2577f681a6df4cf68a,eac121fe8b04576f9c40bb2577f681a6df4cf68a,"[iso-core] Protect from operating on IMAP connection while opening a box

Summary: See title

Test Plan: manual

Reviewers: spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4072"
jstejada,2017-03-01 22:51:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/93b1dceddf9083283c5c6139c9c280c5ea17ee01,93b1dceddf9083283c5c6139c9c280c5ea17ee01,"[client-app] Report 100% of search performed events

Summary:
Gleb mentioned that we need the sample size of search events to be
bigger, so let's report all search events

Test Plan: manual

Reviewers: evan, gleb, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4077"
jstejada,2017-03-01 22:06:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/e511970790a73804d026a0cbdb70f197b6541607,e511970790a73804d026a0cbdb70f197b6541607,[client-app] Correctly import nylas-api-helpers
emorikawa,2017-03-01 20:16:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3ecc19c15f290211439d19a95729284377ba052,e3ecc19c15f290211439d19a95729284377ba052,"[client-app] replace `setImmediate` with `setTimeout` as Promise scheduler

Summary:
This changes the scheduler from `setImmediate` to `setTimeout`. The HUGE
difference is that Chrome's async stack traces works with `setTimeout` but
does NOT work with `setImmediate`. These two functions are adjacent to
each other in the Node event loop, so nothing should depend on the change
in ordering.

Test Plan: manual

Reviewers: mark, spang, halla, juan

Reviewed By: spang, halla

Differential Revision: https://phab.nylas.com/D4068"
emorikawa,2017-03-01 20:15:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/eff0202c748641addfbc5d2d00767601437d2651,eff0202c748641addfbc5d2d00767601437d2651,"[client-app] use new Bluebird preferred `longStackTraces` syntax

Summary: Bluebird changed the way you call `longStackTraces`. This uses the latest

Test Plan: manual

Reviewers: spang, halla, juan

Reviewed By: spang, halla

Differential Revision: https://phab.nylas.com/D4067"
emorikawa,2017-03-01 20:15:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2e16b16e4c62778fad7a38f32ce32dc0735c081,f2e16b16e4c62778fad7a38f32ce32dc0735c081,"[client-app] remove unused async message body loading & `returnsModel`

Summary:
We no longer optimistically fetch messages when we load their bodies. We
always get the full message with bodies returned via the in memory delta
stream

Test Plan: manual

Reviewers: spang, halla, juan

Reviewed By: spang, halla, juan

Differential Revision: https://phab.nylas.com/D4066"
emorikawa,2017-03-01 20:13:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e133b8adcc8f41a5956a10ca1b725b3c955f18a,0e133b8adcc8f41a5956a10ca1b725b3c955f18a,"[client-app] deprecate `returnsModel` param for `nylas-api-request`

Summary:
We no longer need to use the `returnsModel` param since we get all of our
models through the in memory delta stream. There were a ton of places
unnecessarily passing `returnsModel: false` when it defaults to false in
the first place

Depends on D4057

Test Plan: manual

Reviewers: halla, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4065"
emorikawa,2017-03-01 20:12:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2aeaca7482ae38ea89a42cf90e430af93e88ae9,f2aeaca7482ae38ea89a42cf90e430af93e88ae9,"[client-app] deprecate `ensureOnce` for NylasAPI requests

Summary:
We no longer use the `ensureOnce` bit.

Depends on D4057

Test Plan: manual

Reviewers: spang, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4064"
emorikawa,2017-03-01 20:11:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7e4007f4014e50d997eb3e408900577a1d6237f,d7e4007f4014e50d997eb3e408900577a1d6237f,"[client-app] deprecate `beforeProcessing` in `nylas-api-request`

Summary:
This removes the last reference to a now unused `beforeProcessing` feature
of the Nylas API Request.

Depends on D4057

Test Plan: manual

Reviewers: spang, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4063"
emorikawa,2017-03-01 20:11:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/6009914acd9f0616655714ab677c2b0a25ee1342,6009914acd9f0616655714ab677c2b0a25ee1342,"[client-app] have account store handle API auth errors

Summary:
The old  NylasAPIRequest helper class used to do all sorts of run-time
requiring to attempt to notify of auth errors when 401s and 403s came up
in a request. We now move that logic to the AccountStore where it belongs.

Depends on D4057

Test Plan: Manual

Reviewers: spang, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D4060"
emorikawa,2017-03-01 20:10:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea64f7901fc383a00c81a441c79efbf175a201ae,ea64f7901fc383a00c81a441c79efbf175a201ae,"[client-app] refactor nylas-api-request

Summary:
This greatly refactors the NylasAPIRequest object to be more single
purpose, easier to read, async-ified.

It also fixes issues where long stack traces weren't being reported bcause
`reportError` was being called before the error had time to make it
through Bluebird's rejection handler (which adds back in the long stack
traces).

This also fixes an issue where ignorable errors (like 404s,
ESOCKETTIMEDOUT) were being reporting to Sentry.

This also fixes subtle conditions where the request run would throw mixed
error types (sometimes regular `Error`s, sometimes `APIError`s).

The old class used to handle logging people out on 401s. This is now moved
to the AccountStore in a different diff.

We've also deprecated the `returnsModel` param in a separate diff.

This deprecates the `PriorityUICoordinator` since we no longer need to
worry about frequently making expensive API requests to pull down data
like we used to in the old cloud-based API.

This deprecates `ensureOnce` param in a separate diff.

Test Plan:
Manually boot app. Check regular 404s don't throw. Check requests get
through. Check special ESOCKETTIMEDOUT type errors are properly handled

Reviewers: juan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4057"
hallamoore,2017-02-28 23:49:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/a461efe76fd1456be5cd8ae872e102e52bfcf9cb,a461efe76fd1456be5cd8ae872e102e52bfcf9cb,"[*] Add cloud specs to node scripts

Summary:
Implements `test-cloud` to cd into each cloud package and run `npm test`.
It's easier this way because of the relative paths in the Jasmine configs,
and this also ensures that the tests can always be run within their
individual packages too.

Also calls `test-cloud` from `test` so people don't forget about it. If
someone wants to test just the client, they can explicitly do so with
the `test-client` script.

Depends on D4058, D4059, D4061, and D4062

Test Plan: Ran the tests

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4031"
hallamoore,2017-02-28 23:49:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/35e693c7e5d91783468acb00d284b35e106436db,35e693c7e5d91783468acb00d284b35e106436db,"[isomorphic-core] Make sure specs can run without electron

Summary:
Isomorphic-core should be functional outside of the client environment

Depends on D4056

Test Plan: Run the test suite

Reviewers: evan, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4062"
hallamoore,2017-02-28 23:48:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/7203870879db02d1b64555578113a0daf7da4bd5,7203870879db02d1b64555578113a0daf7da4bd5,"[cloud-workers] Implement spec runner

Summary: Depends on D4056

Test Plan: Run the (non-existent) test suite (and see that it ran 0 of 0 tests)

Reviewers: evan, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4061"
hallamoore,2017-02-28 23:47:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0cc52fb22be6c4317e6023ca38b689033ce354d,e0cc52fb22be6c4317e6023ca38b689033ce354d,"[cloud-core] Run specs without electron

Summary: Depends on D4056

Test Plan: run the test suite

Reviewers: evan, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4059"
hallamoore,2017-02-28 23:47:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/96c327f0a3b24c081747e35e99871512050220de,96c327f0a3b24c081747e35e99871512050220de,"[cloud-api] Fix specs now that Jasmine files are in isomorphic-core

Summary: Depends on D4056

Test Plan: run the suite

Reviewers: evan, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4058"
hallamoore,2017-02-28 23:46:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/cfe29db3b96295553c057bb09d4a821035a93626,cfe29db3b96295553c057bb09d4a821035a93626,"[*] Move Jasmine setup into isomorphic-core

Summary:
Move the base Jasmine spec runner into isomorphic-core to prevent
code duplication. Jasmine will look for the config file relative to
the directory it's being run in though, so we need to symlink the
config file into each package that will need it.

Test Plan: Run tests once the suites are integrated

Reviewers: evan, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4056"
hallamoore,2017-02-28 21:38:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf56bfc2245c7369d76d1e08719e239679238f2e,cf56bfc2245c7369d76d1e08719e239679238f2e,"[*] Run the isomorphic-core specs as part of the client test suite

Summary:
Convert the isomorphic-core specs to Jasmine 1 and symlink them into
client-app/internal_packages so they are run as part of the client
test suite.

Test Plan: Ran the suite with fdescribes in iso-core to ensure they were being called properly

Reviewers: evan, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D4055"
spang,2017-03-01 01:50:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/51b32f974b07b694443877ed66d6faddaa19232b,51b32f974b07b694443877ed66d6faddaa19232b,"[client-sync] Enable logging in prod builds

Summary:
Disabling verbose logging in production builds just makes it harder to help our
users help us fix their problems.

Test Plan: run app without --dev

Reviewers: mark, evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4070"
spang,2017-02-28 23:42:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/d23b4ff37908a791d6ec9301a65ec4ec66c7663d,d23b4ff37908a791d6ec9301a65ec4ec66c7663d,[none] Make deploy-it support -h/--help
jstejada,2017-02-28 21:55:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4ca416d9e8f2bd7a77f5a840f85fc8e538eaf58,a4ca416d9e8f2bd7a77f5a840f85fc8e538eaf58,"[client-app] Fix measurement of thread-list action metrics

Summary:
We detect when a thread is removed from the thread-list by listening to
`Actions.threadListDidUpdate`. However, we were not firing the action at
the correct moment.

Before this commit, we fired the action on the root `ThreadList`'s
`componentDidUpdate`, however did this not actually fire when the
child list actually updated/removed threads from the list.

This sort of used to work because before 1067dc3125b58c0470aab4e5f31a1e20772b2e16
the root ThreadList component re-rendered all the time, so it fired the
action, but after initial sync, we would never actually report any
thread-list action metrics at all

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4051"
khamidou,2017-02-28 19:27:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b52f92b1d7b17e56ec0678a5b4c0063a65e3733,3b52f92b1d7b17e56ec0678a5b4c0063a65e3733,"[deployment] Add a `deploy-it` script for our EB services

Summary: This is a simple wrapper around `eb-deploy`. It checks that you're using the `production` branch when deploying to a production service. It also creates a tag whenever you make a new deploy so that we can track them.

Test Plan: Tested manually.

Reviewers: spang, juan, jerm

Reviewed By: jerm

Maniphest Tasks: T7870

Differential Revision: https://phab.nylas.com/D4045"
jstejada,2017-02-28 21:19:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/86bb043eca57501ae0adad82f41901f351c1d712,86bb043eca57501ae0adad82f41901f351c1d712,[client-app] Update changelog
spang,2017-02-28 20:38:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/acc4172a3b1ae519cbdc285d5c847383db4008a9,acc4172a3b1ae519cbdc285d5c847383db4008a9,"[client-app] Actually fix send+archive

The previous fix only worked by coincidence. It turns out that we don't have
the right data to associate draftClientId with ChangeMailTask on task
creation, so we have to either look up this data inside the dependency
function or make the dependency check looser.

This check gets run all the time, so we chose to make the check looser
rather than putting a db call in here and changing the interface to support
an async version of isDependentOnTask().

This patch also makes it so that the fix works properly when Undo Send
is enabled.

Fixes T7889"
spang,2017-02-28 20:12:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7afc1d1c7877d3007cb6e8dd4c30c6cabefa744,a7afc1d1c7877d3007cb6e8dd4c30c6cabefa744,"[client-app] Fix ChangeMailTask dependency on SendDraftTask

Because ChangeMailTask only depended on EnsureMessageInSentFolder task,
if a user sent a message & then archived it before the send completed,
the ChangeMailTask could run in between the SendDraftTask and
EnsureMessageInSentFolderTask and fail because it's
EnsureMessageInSentFolderTask that detects the new UID for the message.

Fixes T7889"
spang,2017-02-28 18:38:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/b295afeb580c2714021db83ac55b9f7522bf22fd,b295afeb580c2714021db83ac55b9f7522bf22fd,[client-sync] Fix wording in comment
spang,2017-02-28 18:38:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/26ae0ad3ee8d9546d0970dc15788e9fd1e40a531,26ae0ad3ee8d9546d0970dc15788e9fd1e40a531,[client-sync] Add check for syncWorker to SyncbackTaskRunner
jstejada,2017-02-28 20:12:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca5bf6d237b5813107eb98e37c5aebe00b45be4b,ca5bf6d237b5813107eb98e37c5aebe00b45be4b,[client-app] Update changelog
jstejada,2017-02-28 19:47:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/3611ac5e4710a086e90b2924a653e166569c12b0,3611ac5e4710a086e90b2924a653e166569c12b0,bump(version) 1.0.30
jstejada,2017-02-28 19:26:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9e05b4315dc166dac0de936329bcb0c70f57fc6,d9e05b4315dc166dac0de936329bcb0c70f57fc6,[client-app] Fix EnsureMessageInFolderTask - no need to get acct from imap connection
hallamoore,2017-02-23 00:57:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f0d1623d9fe64646e9df37c942c5f1c99869209,4f0d1623d9fe64646e9df37c942c5f1c99869209,"[cloud-api] Fix spec with expirationDate -> expiration

Summary: The codebase uses `expiration` instead of `expirationDate`

Test Plan: ran the tests

Reviewers: evan, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4028"
jstejada,2017-02-28 19:16:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/3511e7407e0025ef9c56fc5532325b70f66883ba,3511e7407e0025ef9c56fc5532325b70f66883ba,[iso-core] Fix typo in IMAPBox
emorikawa,2017-02-28 19:08:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/4cc4756e0fca5dc349f4bf979f4429de1933467e,4cc4756e0fca5dc349f4bf979f4429de1933467e,[client-sync] add assertion about Reference not cleaned up properly
jstejada,2017-02-28 19:06:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/8541c3db1c656300a8659d03e23418e53ca922e2,8541c3db1c656300a8659d03e23418e53ca922e2,"Revert ""[client-app] Limit search to focused perspective""

Temporarily reverting this commit for 1.0.30 release.
See https://phab.nylas.com/T7910 for details
This reverts commit 7ad65558907219d685a3ff0a1a9a9f53c6ffb62b."
emorikawa,2017-02-28 18:57:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/42a94dc35664f9f04d51c97fba9e2c44a2662708,42a94dc35664f9f04d51c97fba9e2c44a2662708,[iso-core] imap-connection properly resolves `this`
emorikawa,2017-02-28 18:43:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5133576ebbef647ef0bcc7a0e597fe7fabf2603,b5133576ebbef647ef0bcc7a0e597fe7fabf2603,[iso-core] imap-box.js -> imap-box.es6
jstejada,2017-02-28 18:35:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/59b6a24158be8938c2602181bf15bce93634340b,59b6a24158be8938c2602181bf15bce93634340b,"Revert ""[client-app] Properly re-index threads when their data has changed""

Temporarily reverting this commit for 1.0.30 release because it is causing
performance issues: https://phab.nylas.com/T7910

This reverts commit 51191b76721bc1dbcc7d81d8753f7cdffb28dce3."
jstejada,2017-02-28 18:23:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a25b1c4123c4e6eed154087198352575b0c68f9,7a25b1c4123c4e6eed154087198352575b0c68f9,"[client-app] Remove contact support btn from red box

Summary: See title

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4049"
jstejada,2017-02-28 16:48:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/1067dc3125b58c0470aab4e5f31a1e20772b2e16,1067dc3125b58c0470aab4e5f31a1e20772b2e16,"[client-app] Prevent unnecessary re-rendering of thread-list

Summary:
This commit adds a `shouldComponentUpdate` to thread-list.cjsx so that
the thread list doesn't unnecessarily /try/ to re-render when state or
props haven't actually changed.

I noticed this because the thread list was constantly calling `render`
even though it didn't render any changes to the DOM. This was caused
because it listens to `NylasSyncStatusStore` which constantly triggers,
even though the piece of state the list is interested in rarely changes,
causing unnecessary calls to the `render` loop.

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4047"
jstejada,2017-02-24 19:53:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/904b622c1d1ec06b2374658f492dcd51a1c4922e,904b622c1d1ec06b2374658f492dcd51a1c4922e,"[iso-core] Loosen checks for detecting retryable errors + add new one

Summary: see title

Test Plan: manual

Reviewers: evan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D4046"
jstejada,2017-02-23 09:34:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc85d350b54856649688576fb83d38b2cbd96690,cc85d350b54856649688576fb83d38b2cbd96690,"[iso-core] (imap-P3) Fixup IMAPConnection and IMAPBox

Summary:
This commit is an attempt to cleanup duplicated code and crufty code
inside IMAPConnection and IMAPBox

Specifically:
- It replaces `_createConnectionPromise` with a more aptly named (imo) `_withPreparedConnection` helper, which provides the user a node-imap connection that will correctly time out and handle `error` and `end` events. Most of these changes are just changing existing code to use the new interface.
- Adds a subtle change to how we handle `end` and `error` events on the connections. Previously, we manually called `this.end()` on `error`, but not on `end`. From what I could gather from the old comment documenting `_createConnectionPromise`, we should /also/ call `this.end()` on `end` because node-imap doesn't clean up correctly and can leave the connection hanging (taking care not to introduce a recursion loop by `end`ing on `end`). Additionally, it no longer listens to the events via `once` but via `on`, which should be okay given that the listeners get cleared at the end.

This /might/ fix some instances of sync freezing up (T7837).

Depends on D4035

Test Plan: manual -- this really needs some unit tests :cry:

Reviewers: spang, halla, mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4036"
jstejada,2017-02-23 07:59:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/604717ba38f0e3007a60865cc49cce5c8027de3c,604717ba38f0e3007a60865cc49cce5c8027de3c,"[iso-core] (imap-P2) Actually fix constant socket timeout errors :cry:

Summary:
Remember how we made it so imap socket timeouts would increment up to 10m if
we constantly got timeout errors? Remember how we told everyone in
https://github.com/nylas/nylas-mail/issues/3232 that we'd fixed their problems, but they weren't actually fixed?

Well, we weren't /actually/ applying the correct timeout value. :cry:

Depends on D4033

Test Plan: manual

Reviewers: spang, halla, mark, evan

Reviewed By: mark, evan

Differential Revision: https://phab.nylas.com/D4035"
jstejada,2017-02-23 07:22:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a4d5bbb867deda3cac12ba6ab84f71163213215,3a4d5bbb867deda3cac12ba6ab84f71163213215,"[iso-core] (imap-P1) :art: Fixup settings resolution in IMAPConnection

Summary:
The way it was set up was a little smelly.
- `this._settings` were /not/ the actual settings. Now, internally we have access to `this._resolvedSettings`
- `this.resolvedSettings` was being set kind of out of nowhere (gmail-oauth-helpers needs it, hence adding a getter instead)

Test Plan: manual

Reviewers: spang, mark, evan, halla

Reviewed By: mark, evan, halla

Subscribers: khamidou

Differential Revision: https://phab.nylas.com/D4033"
jstejada,2017-02-28 17:13:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/50320ab3d513a4d4f7b214029adb9cd40146f722,50320ab3d513a4d4f7b214029adb9cd40146f722,"[client-app] Fix selecting and creating signatures in preferences

Summary:
This commit fixes 2 issues with signatures in the preferences:
- Creating a signature (via any of the create buttons) would create 2 signatures
- Trying to select accounts to associate with a signature in the preferences would not work (the account would not be selected)

This was a regression introduced in https://github.com/nylas/nylas-mail-all/commit/3111c166b8c949cf2a5ef60392d83a53e782ebed#diff-4f38fd25aa24b48a309354be643165d3R26

3111c16 made it so we attempt to `activate` any Stores that are registered with
the StoreRegistry. When adding stores to `nylas-exports`, they are
automatically registered in the StoreRegistry. Given that the
`SignatureStore` is in `nylas-exports`, and consequently is registered in
the StoreRegistry, it would be `activate`d upon window boot.

However, we were also manually activating it inside `internal_packages/composer-signatures/lib/main.es6`.
This caused it to register listeners for every action **twice**. For
this reason, 2 signatures would be created when trying to create 1, and
an account would be immediately unselected after being selected int he
signatures dropdown in preferences.

(Other changes in this are just stylistic)

Test Plan: manual

Reviewers: spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4043"
jstejada,2017-02-26 18:36:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/522a5927bd367263619717c4e8ac468cd90bb261,522a5927bd367263619717c4e8ac468cd90bb261,[client-sync] Fix missing pass in of syncWorker in EnsureMessageInSentFolder
spang,2017-02-24 20:41:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/6526cb9378c9b3a29a96e97a4666cf6bd1c74284,6526cb9378c9b3a29a96e97a4666cf6bd1c74284,[client-sync] Fix missing pass in of syncWorker to FetchNewMessagesInFolder
emorikawa,2017-02-24 19:04:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3dca236c8b5f5ad3cefb4f9f5a185b4e54ae17c,b3dca236c8b5f5ad3cefb4f9f5a185b4e54ae17c,"[client-sync] limit attributes returned for messages

Summary:
I did a grep for `Message.find.*` to see if there were any other places
we could limit the attributes returned

There were.

This used to be INSANELY wasteful to return all bodies when we only needed
the ids.

Test Plan: Manually bootup app and ensure search still works

Reviewers: mark, juan, spang

Reviewed By: mark, juan, spang

Differential Revision: https://phab.nylas.com/D4042"
emorikawa,2017-02-24 18:58:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc1f3d20723ff416cd72a99b215624839c30c525,fc1f3d20723ff416cd72a99b215624839c30c525,"[client-sync] fix unbouded query

Summary:
Fixes T7783

This unbounded query, plus a yet-to-be-diagnosed bug causing large numbers
of messages with no folderIds, led to frequent crashes of the worker
window at the end of every sync loop.

This took a fair amount to diagnose. Notes on that are here:
https://paper.dropbox.com/doc/Diagnosing-Crash-X329VTxevrqtIMESBtHNV

Huge thanks to @mark.

Test Plan: Reboot app with patch, no more crashes!

Reviewers: spang, halla, mark, juan

Reviewed By: mark, juan

Subscribers: mark

Maniphest Tasks: T7783

Differential Revision: https://phab.nylas.com/D4039"
spang,2017-02-24 02:56:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/87e80482327b65e0d3b9b2d3566346be526cd7c7,87e80482327b65e0d3b9b2d3566346be526cd7c7,"[client-sync] Parse comma-separated References properly

This goes against the spec, but we've seen emails which use comma-separated
References instead of space-separated references. This could cause threading
to break if the message with comma-separated references was a reply and
we hadn't yet synced the message directly in the In-Reply-To header."
jstejada,2017-02-22 22:39:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/51191b76721bc1dbcc7d81d8753f7cdffb28dce3,51191b76721bc1dbcc7d81d8753f7cdffb28dce3,"[client-app] Properly re-index threads when their data has changed

Summary:
When we detect that threads in the database have changed, if they've already
been indexed, mark them as unindexed so that the indexer picks them up and
re-indexes them with the updated data

Test Plan: manual

Reviewers: evan, spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4023"
jstejada,2017-02-23 09:54:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/625d4c8d77dbdf188107417f1ba2eae2d34c8fa8,625d4c8d77dbdf188107417f1ba2eae2d34c8fa8,"[iso-core] Fix imap error detection/coercion (again)

Summary:
If for whatever reason we passed an error with a `source` property
we weren't accounting for in `convertIMAPError`, we would return an
`undefined` error. Bad!

Instead, just return the original error

Test Plan: manual

Reviewers: spang, halla, evan, mark

Reviewed By: evan, mark

Differential Revision: https://phab.nylas.com/D4037"
jstejada,2017-02-23 21:15:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/d4ec7f491af0ca5c6c74a3fe014cb18c3782c385,d4ec7f491af0ca5c6c74a3fe014cb18c3782c385,"[client-app] When reporting search metrics, clip all times to a range

Summary:
When reporting different times to mixpanel other than `actionTimeMs` via
recordPerfMetric, we also want to clip those times to a range to have
good data in mixpanel

This commit adds an extra option to recordPerfMetrics to be able to clip
data other than the default `actionTimeMs`, and uses the new option to
report search metrics

Test Plan: manual

Reviewers: spang, evan, halla, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4038"
jstejada,2017-02-23 00:26:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee9cc39fdc7c2bbb07d81952db73d82388ac8cc5,ee9cc39fdc7c2bbb07d81952db73d82388ac8cc5,"[client-app] Fixup analytics store

Summary:
Given that we no longer report analytics or metrics in dev mode, it
doesn't make sense to include that property when reporting to mixpanel.

Otherwise, it might cause confusion to future readers of this code as to
why we are sending `inDevMode` data if we never reach that code path when we
are in dev mode.

If we want to restore this in the future, we can just revert this
commit.

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4027"
jstejada,2017-02-22 23:27:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/cefb8e98cd766244b9d32a0b02cfb62acecb6ec6,cefb8e98cd766244b9d32a0b02cfb62acecb6ec6,"[client-app] Sample metrics reporting of actions we're keeping track of

Summary:
I'm making these up based on gut feeling, so feel free to completely change
these.

Test Plan: manual

Reviewers: spang, mark, evan

Reviewed By: mark, evan

Differential Revision: https://phab.nylas.com/D4026"
jstejada,2017-02-22 23:15:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e950967cbf9ccfeec4709f788dd18ecab21f982,5e950967cbf9ccfeec4709f788dd18ecab21f982,"[client-app] Add sampling to `recordPerfMetric`

Summary:
recordPerfMetrics now takes a new arg, `sample`, which represents the
sample size of metrics to actually report, as a percentage

Test Plan: manual

Reviewers: mark, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4024"
jstejada,2017-02-22 22:16:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/e849dc54b0ae0a6661e3e33ecee560ea2bce7c27,e849dc54b0ae0a6661e3e33ecee560ea2bce7c27,"[client-app] Fix passing in nylasId and accountId to report metrics

Summary: This was really broken

Test Plan: manual

Reviewers: halla, mark, evan

Reviewed By: mark, evan

Differential Revision: https://phab.nylas.com/D4021"
jstejada,2017-02-22 21:49:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb6008a1496515a7798137527e3baa1af742f20a,cb6008a1496515a7798137527e3baa1af742f20a,"[client-app] Report `source` when reporting open times for accts window

Summary: See title

Test Plan: manual

Reviewers: mark, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4020"
jstejada,2017-02-22 19:30:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c28fe358afcbb1b77dc6f8d4dfef9106a896355,5c28fe358afcbb1b77dc6f8d4dfef9106a896355,"[client-app] Measure and report search perf metrics

Summary: See title

Test Plan: manual

Reviewers: evan, spang, halla, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4019"
jstejada,2017-02-22 19:05:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/5aeef7861a9f7b7fe74acf76ec3551f4e72e8ffb,5aeef7861a9f7b7fe74acf76ec3551f4e72e8ffb,"[client-app] Measure and report app boot time

Summary: See title

Test Plan: manual

Reviewers: spang, mark, evan, halla

Reviewed By: mark, evan, halla

Differential Revision: https://phab.nylas.com/D4018"
spang,2017-02-23 23:36:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/9318de14a6292cc1f167a18d1b58e3085e2af7c0,9318de14a6292cc1f167a18d1b58e3085e2af7c0,[client-sync] Update comment about Gmail inbox prioritization
spang,2017-02-23 23:13:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9f3720c402571a4af023baf310fdcd8eee2bf68,d9f3720c402571a4af023baf310fdcd8eee2bf68,"[client-sync] Deduplicate UID downloads across sync loop interruptions

Summary:
Since we only persist updates to fetchedmin/fetchedmax at the end of a
batch, and a batch can contain many messages, if the sync loop is
getting interrupted often we will download the same messages over and
over again and not make much progress in downloading the message
backlog. This patch keeps a set of already downloaded messages in memory
for each batch and skips downloading UIDs we've processed in interrupted
sync loops.

Messages may still be redownloaded across app restarts.

Fixes T7798

Test Plan: manual

Reviewers: juan, mark

Reviewed By: juan, mark

Maniphest Tasks: T7798

Differential Revision: https://phab.nylas.com/D4040"
jstejada,2017-02-23 20:12:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecfb2d222e8e91b87bc29920de87427540e8ce94,ecfb2d222e8e91b87bc29920de87427540e8ce94,[*] Update gitignore
jstejada,2017-02-23 19:56:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/296d69ad0228b4f55b135fee5678f195294fb817,296d69ad0228b4f55b135fee5678f195294fb817,"[cloud-api] DONT Timeout streaming API connections every 15 minutes anymore

This is a temporary commit to prevent connections from being closed
while we release logic to re-establish delta connections after they are closed.

Our infrastructure should be able to support current usage of delta
connections after our fixes to offline notification and infrastructure

This reverts commit 068de72051af899b2b5f7661d57378498f2e733f."
jstejada,2017-02-23 18:52:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5eb88540613dfa4c2a95376123cdf4f652d27e3,e5eb88540613dfa4c2a95376123cdf4f652d27e3,[client-app] Update changelog
jstejada,2017-02-23 02:30:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a520eb5794bfec27f1b3d568ddd9d9246b4d6b2,1a520eb5794bfec27f1b3d568ddd9d9246b4d6b2,"[client-sync] :art: Remove unecessary use of PromiseUtils

Given that this packages lives inside the NylasMail app, it has access
to Bluebird Promises, which already define a .each method.

Using PromiseUtils here is unecessary"
jstejada,2017-02-22 22:17:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf7a2ff1211095c8ceaefd6b391d1724d18a0a67,bf7a2ff1211095c8ceaefd6b391d1724d18a0a67,"[iso-core] Fix imap error detection!

Summary:
We were only detecting and classifying IMAP errors as retryable and non
retryable in a few places, but errors thrown in any of our imap
operations were not being properly passed through our `convertImapErrors` :(

This was broken, oh so broken

Also loosen condition to detect System Errors

Test Plan: manual

Reviewers: spang, mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D4022"
jstejada,2017-02-22 18:59:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/96643c1665cafa5ca05499f852d99fab0832c807,96643c1665cafa5ca05499f852d99fab0832c807,"[client-app] Measure and record times for opening account windows

Summary: See title

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4017"
jstejada,2017-02-22 18:42:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/be1a9e16551a820756ef816dc047901531ae9b25,be1a9e16551a820756ef816dc047901531ae9b25,"[client-app] Measure and report composer window open times

Summary: To Mixpanel and Honeycomb.

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4016"
jstejada,2017-02-22 17:55:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e61c9e6dfd218cf5878e578ff0fe71971889d8f,0e61c9e6dfd218cf5878e578ff0fe71971889d8f,"[client-app] Measure and report task performLocal times

Summary: See title

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D4015"
jstejada,2017-02-22 17:47:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/3bbd4ba77f385c46b0318cbacffb3183bbbaec98,3bbd4ba77f385c46b0318cbacffb3183bbbaec98,"[client-app] Measure and report sending times

Summary: See title

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4014"
jstejada,2017-02-22 06:50:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1508ad23d05c4b909fcc0faecfa97e533fc74c8,d1508ad23d05c4b909fcc0faecfa97e533fc74c8,"[client-app] Measure and report time to select and load a thread

Summary: See title

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4013"
jstejada,2017-02-22 05:38:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f95da2d274f95e76e6d774ff323be6ab1d74476,5f95da2d274f95e76e6d774ff323be6ab1d74476,"[client-app] Report thread-list action perf metrics to Mixpanel

Summary: See title

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4011"
jstejada,2017-02-22 05:29:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/492d10c492ca47f5651e8d387e136a606d4a503c,492d10c492ca47f5651e8d387e136a606d4a503c,"[*] Fixup MetricsReporter

Summary:
Fix errors and inconsistencies in MetricsReporter code like:

- We were modifying the passed in data object in place
- We were accessing NylasEnv without knowing we were in client env to
get the version
- We were creating an incorrect logger instance

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4010"
jstejada,2017-02-22 06:38:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/c62a5f8e3fb1214c92e943d5082827839ca4b3ce,c62a5f8e3fb1214c92e943d5082827839ca4b3ce,"[client-app] Add Actions.recordPerfMetric

Summary:
This action will report perf metrics to honeycomb /and/ mixpanel. This
commit also fixes up Analytics Store a little bit

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Subscribers: jerm

Differential Revision: https://phab.nylas.com/D4012"
jstejada,2017-02-22 04:46:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/b538343a32cb778075739827aebc8109fea18ffe,b538343a32cb778075739827aebc8109fea18ffe,"[client-app] Don't report to Mixpanel when running in dev mode

Summary: See title

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D4009"
emorikawa,2017-02-22 21:19:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/dafbb9dc962d60bfa91af1bdd4436cc67c221f75,dafbb9dc962d60bfa91af1bdd4436cc67c221f75,"[client-app] update Travis

Summary:
Also see:
https://github.com/nylas/nylas-mail-all/commit/1b2464846659eb75d29f86f35c0bfb97c1803ee3
which was hot-pushed to master in order to get Travis building.

We now have two travis files:

1. /.travis.yml
2. /packages/client-app/travis.yml

The first one is alwas in the private repo and runs `npm install && npm
run build-client`. This decrypts our keys and signs, builds, and uploads
to S3.

The second one is designed to live in our yet-to-be public mirror. It will
basically just run `npm install && npm test`.

That way the public one should just about ALWAYS pass (YAY!) except of
course when you break the tests or something in the installer!

Test Plan: Run on new https://travis-ci.com/nylas/nylas-mail-all

Reviewers: jerm, spang, juan

Reviewed By: spang, juan

Differential Revision: https://phab.nylas.com/D3999"
hallamoore,2017-02-22 02:03:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/34030462990db0a3d7c976746afe3e47e5260f5d,34030462990db0a3d7c976746afe3e47e5260f5d,"[*] Make sure cloud deploy can access .babelrc

Summary:
Now that .babelrc is in client-app, we need to make it an exception in the
.dockerignore file. Additionally, this means that the client-app directory will
exist during the postinstall script in the cloud environment, so we need a
stricter check to figure out if the client-app needs to be built or not.

Test Plan: deployed to staging

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D4008"
hallamoore,2017-02-22 02:04:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/f6c9d51df75416f211e66b570cf68f18b2cdee2f,f6c9d51df75416f211e66b570cf68f18b2cdee2f,"[isomorphic-core] Require .default

Add missing `.default` to LibHoney require"
jstejada,2017-02-22 01:44:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/eff5986af559435712f747f441ac85cb26dc364b,eff5986af559435712f747f441ac85cb26dc364b,[client-app] Update changelog
jstejada,2017-02-22 00:36:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/77cd76e6a9f713586b78830d727e4ef714ee8a0d,77cd76e6a9f713586b78830d727e4ef714ee8a0d,[*] Remove bad symlinks
spang,2017-02-22 00:15:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/32c105bcb2350d959da1f0737224f0ed6a985b7f,32c105bcb2350d959da1f0737224f0ed6a985b7f,"[client-sync] Refresh SMTP client when auth credentials change

Summary:
Previously, we would create a nodemailer SMTP transport object when the
sync worker booted up. The transport object would be passed the account
SMTP credentials at the time of object creation. If the Google auth
token later expired, we would continue to try to send mail using the
expired token, resulting in ""Invalid login"" failures.

This patch makes it so we refresh the transport object if the auth token
changes, and also turns on SMTP connection pooling to limit simultaneous
SMTP connections (& maybe make sending multiple messages faster).

Fixes T7891

Test Plan: manual

Reviewers: juan, halla

Reviewed By: juan, halla

Subscribers: mark

Maniphest Tasks: T7891

Differential Revision: https://phab.nylas.com/D3997"
spang,2017-02-21 23:56:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d48f5b335c27b7b6f8155a762f931489c9f4606,8d48f5b335c27b7b6f8155a762f931489c9f4606,"[iso-core] Fix Office365 sending from the mail app

Summary:
This fixes a regression introduced in D3980 that prevented sending from working
on Office365 and generic IMAP accounts.

Fixes T7892

Test Plan: manual - we could use unit tests for this but need to set up tests for iso-core first

Reviewers: juan, halla, evan

Reviewed By: halla, evan

Maniphest Tasks: T7892

Differential Revision: https://phab.nylas.com/D4003"
jstejada,2017-02-21 23:54:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/b829f0c882b6d577456c8a4c807e2279ac3f8067,b829f0c882b6d577456c8a4c807e2279ac3f8067,"[client-app] Fix build

Partially revert 32c85ac566c4c97f7c3a79fbfb5785b1833444c6

Symlinking instead of copying the error-logger-extensions prevents the
app from finding the appropriate dependencies required in the error
logger extensions in the main process and in the renderer processes
because globalPaths are only set in renderer processes and /after/
error-logger-extensions are loaded.

We should fix this properly in a separate diff, and move the error
logger to isomorphic-core instead of copying it or symlinking it"
hallamoore,2017-02-21 23:53:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/95cb20293a420381ae3d9a4f441d055a15aea3fc,95cb20293a420381ae3d9a4f441d055a15aea3fc,"[*] Rename postinstall.js -> postinstall.es6

The n1Cloud machines try to compile this script, even though they
never run it, and they didn't recognize it was supposed to be es6"
jstejada,2017-02-21 23:19:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a0c3573f3899e90e2f87d5b9846f630d9b3b560,3a0c3573f3899e90e2f87d5b9846f630d9b3b560,"[client-sync] Fix sending per recipient

Summary: This was broken, oh so broken

Test Plan: manual

Reviewers: halla, spang, evan, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D4001"
hallamoore,2017-02-21 22:16:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/f71a9a8df52274b8e06221736add70b400666f8e,f71a9a8df52274b8e06221736add70b400666f8e,"[cloud-core] Detect redis disconnections in the PubsubConnector

Summary:
I'm debugging an issue with send-reminders where the metadata deltas
aren't published after the reminder is processed. The cloud-worker
logs show `AbortError: PUBLISH can't be processed. The connection
is already closed`. This error appears on staging, but not locally.
This diff 1) adds a log statement so I can see when the connection
is actually closed and better determine whether this is bug in the
send-reminders code and 2) resets the cached client to null so that
the PubsubConnector will attempt to reconnect for the next delta

Test Plan: staging

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3995"
jstejada,2017-02-21 22:12:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a5d4d46ad8b4f5aaa96d526104283e51b1955e4,1a5d4d46ad8b4f5aaa96d526104283e51b1955e4,"[*] Catch more invalid login errors when sending

Summary: See title

Test Plan: manual

Reviewers: evan, halla, spang

Reviewed By: halla, spang

Differential Revision: https://phab.nylas.com/D3994"
emorikawa,2017-02-21 21:59:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b2464846659eb75d29f86f35c0bfb97c1803ee3,1b2464846659eb75d29f86f35c0bfb97c1803ee3,[client-app] update build system
jstejada,2017-02-21 21:12:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/98554bd044fac2fab21eeb0e054619831c1a939f,98554bd044fac2fab21eeb0e054619831c1a939f,bump(version) 1.0.29
emorikawa,2017-02-21 21:08:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/32c85ac566c4c97f7c3a79fbfb5785b1833444c6,32c85ac566c4c97f7c3a79fbfb5785b1833444c6,"[client-app] symlink in babelrc and resolve links

Summary:
The prod build was failing because it couldn't find the .babelrc.

I decided to put the babelrc in the main nylas-mail repo with the
expectation that it'll need to be in the open source version too. To DRY
up this for us building, we sylink the root one to the client-app babelrc

Also since we now dereference symlinks we don't need to do the full copy
of nylas-private-resources so we don't have two error reporters floating
around

Test Plan: npm run build-client

Reviewers: juan, spang

Reviewed By: juan, spang

Differential Revision: https://phab.nylas.com/D3993"
spang,2017-02-21 20:37:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/eaac872ec83004155cf07732eef2a27528aef190,eaac872ec83004155cf07732eef2a27528aef190,"[client-app] Convert nylas-env.coffee to ES6 :sweat:

Test Plan: unit tests + run the app

Reviewers: juan, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3979"
jstejada,2017-02-21 19:32:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/955402061884d636ba73752257dafa1ff9f70cf4,955402061884d636ba73752257dafa1ff9f70cf4,"[client-app] For consistency, proxy marking unread thru ThreadListActionStore

Summary: Depends on D3990

Test Plan: manual

Reviewers: spang, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3992"
jstejada,2017-02-21 19:06:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a6a68fff187922e1b88e5fc0a81442568f6ca45,2a6a68fff187922e1b88e5fc0a81442568f6ca45,"[client-app] For consistency, proxy starring thru ThreadListActionStore

Summary: See title

Test Plan: Depends on D3990

Reviewers: spang, halla, mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3991"
jstejada,2017-02-21 17:34:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/094a50eb36e684dd607a05bd963bb466350e8823,094a50eb36e684dd607a05bd963bb466350e8823,"[client-app] Measure and report times for trashing and marking as spam

Summary:
See title

Depends on D3989

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: spang, halla

Differential Revision: https://phab.nylas.com/D3990"
jstejada,2017-02-21 17:17:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/09a6729923bc0eee45a2700f7a0331a3cbb0f077,09a6729923bc0eee45a2700f7a0331a3cbb0f077,"[client-app] Measure and report times for removing labels from threads

Summary:
This commit adds new actions, `applyCategoryToThreads` and `removeCategoryFromThreads`
to be proxied and measured through the ThreadListActionsStore. These are called when
labels are added or removed via the category picker or by removing using
the label icon.

For now, we are only interested in timing actions that remove threads
from the inbox.

Test Plan: manual + reenabled unit tests for category-picker

Reviewers: spang, evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3989"
jstejada,2017-02-21 06:18:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/d50c0408cb52b534873c5253244ac31b5171756a,d50c0408cb52b534873c5253244ac31b5171756a,"[client-app]: Measure and report time when dragging threads to sidebar

Summary:
This commit adds a new action, `moveThreadsToPerspective` to be proxied and
measured through the ThreadListActionsStore. This action is called when
a thread or group of threads is dragged and dropped into an item in the
sidebar.

For now, we are only interested in timing actions that remove threads
from the inbox

Depends on D3984

Test Plan: manual

Reviewers: halla, evan, spang

Reviewed By: evan, spang

Differential Revision: https://phab.nylas.com/D3985"
jstejada,2017-02-21 01:42:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/41067869b82153667ddd8fe269f0070bfa56c422,41067869b82153667ddd8fe269f0070bfa56c422,"[client-app] Measure and report times for removing from inbox

Summary:
This commit adds a new action, `removeThreadsFromView` to be proxied and
measured through the ThreadListActionsStore

This action can encompass many different actions, e.g.:
- unstarring in starred view
- changing unread in unread view
- Moving to inbox from trash
- archiving a search result (which won't actually remove it from the thread-list)

However, for now, we are only interested in timing actions that remove threads
from the inbox

Depends on D3983

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: spang, evan

Differential Revision: https://phab.nylas.com/D3984"
jstejada,2017-02-21 00:53:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/376561af265c76d8d78112157a4ebeab2ccb2b4e,376561af265c76d8d78112157a4ebeab2ccb2b4e,"[client-app] Measure and report archiving times

Summary:
This commit makes so it we report perf metrics for archive actions.
To achieve this, I added a new `ThreadListActionsStore` which serves as
a proxy for thread actions, which allow us to time them.

The new store is in charge of listening to thread list actions, creating and
queueing  the appropriate tasks for any given action, and timing and
reporting action times to our MetricsReporter.

This commit only times archiving actions, and subsequent diffs will time
other relevant thread list actions.

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: spang, evan

Differential Revision: https://phab.nylas.com/D3983"
jstejada,2017-02-18 02:44:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/322aa62dd473513d40cb7f2f1f42b79fc8ca4272,322aa62dd473513d40cb7f2f1f42b79fc8ca4272,"[*] metrics(Part 6) MetricsReporter.reportEvent now requires a nylasId

Summary:
This will help us aggregate metrics by user. This also makes it so we
don't report events in dev mode

Test Plan: manual

Reviewers: spang, evan

Reviewed By: spang, evan

Differential Revision: https://phab.nylas.com/D3981"
jstejada,2017-02-18 00:12:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/c31e6122fd87fac77218e4a44cc8bd06efb55647,c31e6122fd87fac77218e4a44cc8bd06efb55647,"[client-sync] metrics(Part 5) Rename PerformanceMonitor to GlobalTimer

Summary:
This global module wasn't really related to performance, but rather with
timing things across different processes in the app. I believe this name
is more appropriate.

Test Plan: I can still use NylasEnv.timer (instead of NylasEnv.perf)

Reviewers: spang, evan

Reviewed By: spang, evan

Differential Revision: https://phab.nylas.com/D3972"
jstejada,2017-02-17 21:20:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a297d36e91c6534b26d161bde38b494996b844c,5a297d36e91c6534b26d161bde38b494996b844c,"[*] metrics(Part 4): Make /ingest-metrics use MetricsReporter

Summary:
This ensures that the Libhoney instance is a singleton in cloud
processes.

Test Plan: manual

Reviewers: mark, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3969"
jstejada,2017-02-17 20:58:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/3bdecd734afce70f3c27641c733586b85de92cb0,3bdecd734afce70f3c27641c733586b85de92cb0,"[*] metrics(Part 3) Don't report CPU usage on every reportEvent

Summary: See title

Test Plan: Manual

Reviewers: spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3968"
jstejada,2017-02-17 20:41:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/794cd9cc49fa5dfd5e2c1b950f61ba12130376b2,794cd9cc49fa5dfd5e2c1b950f61ba12130376b2,"[local-sync] metrics(Part 2) Move MetricsReporter to isomorphic-core

Summary:
Renamed it from SyncMetricsReporter to MetricsReporter and moved it to
iso-core.

The new metrics reporter can now be called from any environment and will
correctly report the metrics.

Test Plan: manual

Reviewers: mark, spang, evan

Reviewed By: spang, evan

Differential Revision: https://phab.nylas.com/D3967"
emorikawa,2017-02-21 19:36:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/c27815a42ac9cf5e3f3738c985f2d8319e961493,c27815a42ac9cf5e3f3738c985f2d8319e961493,"[client-app] resolve symlinks before copying files

Summary:
In client-app/node_modules Lerna symlinks isomorphic-core to '../../'.
When we copy everything over to our tmp directory when building, we copy
over the relative symlink! Damn you lerna.

We get around this by resolving the symlinks BEFORE copying and caching
them in the installer task. Then the file copy always works.

Also, for some reason the glob {absolute} param doesn't seem to work in
the latest version. I'm manually creating an absolute path for the compile
target since it's a bit more transparent what's happening anyway.

Test Plan: `npm run build-client`

Reviewers: spang, jerm, juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D3988"
emorikawa,2017-02-21 19:35:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9099b42ceb5683670b6f46e18193202005235ef,d9099b42ceb5683670b6f46e18193202005235ef,"[client-app] build tasks now use absolute paths

Summary:
Grunt is hardcoded to use paths relative to wherever the Gruntfile is
located. Unfortunately it also expects the grunt packages to be siblings
of that gruntfile. We can get around this by changing the relative base
path, but then the cwd is different for each tasks. This is okay as long
as we use absolute paths for various files in each of our tasks. This
updates our grunt tasks to use absolute paths

Test Plan: `npm run build-client`

Reviewers: spang, halla, jerm, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3987"
emorikawa,2017-02-21 19:34:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/de78536ae3b6071df75709f69a1c398642ca049c,de78536ae3b6071df75709f69a1c398642ca049c,"[client-app] actually npm install inside the /apm dir with env vars

Summary:
We weren't actually running npm install inside of apm. This meant that
/apm/node_modules was empty causing the build to fail. This will install
with the proper env required for old apm

Wow we need to get rid of this thing soon…

Test Plan: Run `npm install`

Reviewers: jerm, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3986"
emorikawa,2017-02-21 19:33:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/7266b00af8e05fbf9b36f60abba8abb25e0d6ec3,7266b00af8e05fbf9b36f60abba8abb25e0d6ec3,"[dev, cloud-*] make Docker run plain npm install and conslidate deps

Summary:
It doesn't really make sense to have the root package.json have any
dependencies since it's never ""packaged"" or built itself. Everything
really should be a dev dependency. This was only separated before because
the Dockerfile unnecessarily added the --production flag.

This will make the docker build take a smidge longer, but I think it's
worth the extra minute to keep the dependencies orderly and sematically
correct

Test Plan: re-run docker build

Reviewers: jerm, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3978"
jstejada,2017-02-19 00:43:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/e799455fce8386bdc2c04f119ac558400ba40c2e,e799455fce8386bdc2c04f119ac558400ba40c2e,"[client-sync] Make imap ended error retryable

Summary: This error should really be retryable, and will prevent more red boxes

Test Plan: manual

Reviewers: evan, spang

Reviewed By: evan, spang

Differential Revision: https://phab.nylas.com/D3982"
hallamoore,2017-02-18 02:38:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea79f4e0430221b61d19e97272c36ad5eac1b439,ea79f4e0430221b61d19e97272c36ad5eac1b439,"[isomorphic-core] Ensure smtp config exists

Summary:
We previously weren't saving the smtp settings for cloud gmail accounts,
and even though we fixed that, we still need to be able to handle the accounts
that were authed before that fix went out. This diff changes `smtpConfig()` to
always call `credentialsForProvider` instead of depending on what was saved
in the database.

Test Plan: manual

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3980"
jstejada,2017-02-21 16:56:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/13b87b3796b3877141b19fab69943c605de980e1,13b87b3796b3877141b19fab69943c605de980e1,[client-app] Fix delta-processor tests
hallamoore,2017-02-17 02:45:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/b468f842b05703dc7ea71b0469ef89d7b8ec8b26,b468f842b05703dc7ea71b0469ef89d7b8ec8b26,"[cloud-workers, isomorphic-core] Implement the SendRemindersWorker

Summary:
Process reminders metadata and send the reminder email if there
haven't been any replies. Checking for replies involves checking
each of the folders in `folderImapNames` for messages that are in
reply to the messages in `messageIdHeaders`.

Test Plan: manual

Reviewers: khamidou, juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3958"
hallamoore,2017-02-17 02:29:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba8c9380755f8db3ba702f8d09d68ab639062f9a,ba8c9380755f8db3ba702f8d09d68ab639062f9a,"[cloud-workers] Refactor cloud-workers for multiple workers

Summary: Make adding new workers an easy and DRY process

Test Plan: manual

Reviewers: khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3957"
hallamoore,2017-02-17 02:10:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/9741677160f5ece83e8c1996d137b4c79507b0df,9741677160f5ece83e8c1996d137b4c79507b0df,"[cloud-workers] Don't delete metadata after processing it

Summary:
The client-app can't properly process delete deltas for metadata,
because the transaction doesn't store the objectId or pluginId of
the metadata object. Without this information, the client doesn't
know which metadata to delete. Instead, we just nullify the value.

Test Plan: manual

Reviewers: khamidou, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3956"
hallamoore,2017-02-17 02:06:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/21d680b52be6531dcbd0bce0e93fbcf6a639c517,21d680b52be6531dcbd0bce0e93fbcf6a639c517,"[cloud-workers] Move logic for getting an IMAP connection into a helper method

Summary:
This logic will be used by send-reminders, as well as probably other workers
down the line.

Test Plan: manual

Reviewers: khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3955"
hallamoore,2017-02-17 00:10:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7fc48f88f7dab98229462b600c2f3e6e53532b4,e7fc48f88f7dab98229462b600c2f3e6e53532b4,"[cloud-core, cloud-workers, isomorphic-core] Fix sending from cloud-workers

Summary:
The SendmailClient is in isomorphic-core, but wasn't working properly when
called from cloud-workers. This diff includes a variety of fixes to get it
working:

  - Add smtp config to connection settings in cloud-core
  - Don't use `PromiseUtils.promisify` for a function that needs `this` to
    be bound properly
  - Don't reference `NylasEnv` (That error gets caught and reported
    elsewhere anyway, we don't need to report it here)
  - Default `message.uploads` to `[]` to keep iterator happy
  - Add Gmail environment variables to cloud-worker app

Test Plan: manual

Reviewers: juan, khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3954"
hallamoore,2017-02-16 23:56:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1d794d8848a03bf98a7a93d2dc278cf88792943,c1d794d8848a03bf98a7a93d2dc278cf88792943,"[client-private-plugins] Update send-reminder metadata once draft is sent

Summary:
Send-reminders involves some data that aren't finalized until after the
draft is sent (e.g. message id, subject). Update these values after send.

Test Plan: manual

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3953"
hallamoore,2017-02-16 23:55:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c9263d73047e63d05f4a5e3c123a957e4175f58,1c9263d73047e63d05f4a5e3c123a957e4175f58,"[client-app, client-private-plugins] Update the reminders metadata structure

Summary:
The new send-reminders cloud-worker needs different information to check for
replies now that the sync engine is local. Make sure we save all of the
required information to the metadata. The current values are:

  - expiration: the time the reminder should be sent, if no new replies
  - folderImapNames: the folders to check for replies
  - messageIdHeaders: the Message-Id headers of messages in the thread
    (we search for In-Reply-To headers that match these values, and also
     use them to decide whether a message is a new reply or an old reply)
  - replyTo: the message to reply to when sending the reminder email
  - subject: the subject to use when sending the reminder email

Test Plan: manual

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3952"
emorikawa,2017-02-18 01:33:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/c4e18fc3ae85ddf1b543145d636a7a23cb7db4c8,c4e18fc3ae85ddf1b543145d636a7a23cb7db4c8,"[client-app] only show cloud deltas in the developer bar

Summary:
This removes client-sync deltas from the developerbar delta list.

We ONLY show cloud deltas now.

The connection between client-sync is no longer a network delta stream,
it's a direct function call. It makes no sense to show its status.

This now shows a single dot representing the state of the cloud delta
stream.

Test Plan: Manually connect and disconnect local cloud API and see icon change

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3977"
emorikawa,2017-02-18 01:32:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/27253e1161f4f158f385af6719e54131a6ea721e,27253e1161f4f158f385af6719e54131a6ea721e,"[client-app] allow returning of message from DOM

Summary:
SFDC's task to upload an email to salesforce needs the stripped DOM of a
Message object to call `innerText`. The API was changed to return a string
instead of the DOM. This adds a flag to request the DOM instead of a
string.

Test Plan:
Manually assert `EnsureMessageOnSalesforceTask` properly can add the plain
text to the Salesforce Task object

Reviewers: halla, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3976"
emorikawa,2017-02-18 01:31:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a8a4c078ecbb665e57f6ec343c67fac394f35ce,0a8a4c078ecbb665e57f6ec343c67fac394f35ce,"[iso-core] fix error toJSON in node environments

Summary:
Node's native `Error` object does NOT implement toJSON. We attempt to call
toJSON when reporting errors. This wasn't noticed until now because
bunyan's pretty logger (which only run in dev mode) started JSONifying
errors

Test Plan:
Try and API auth with a bad username with local setup. See that it throws
toJSON error. After patch, error properly serializes

Reviewers: spang, halla, jerm, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3975"
emorikawa,2017-02-18 01:30:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe824dcab73219189c48af59ae2f6151ce95993b,fe824dcab73219189c48af59ae2f6151ce95993b,"[cloud-core] move redis to correct location

Summary:
This was supposed to be in cloud-core/scripts, but was in cloud-core root.
pm2 couldn't find it properly

Test Plan: Manually boot up and see redis is available at localhost url

Reviewers: spang, jerm, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3974"
emorikawa,2017-02-18 01:29:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/620925cb1445f1875052f5e77d8fa41155fbe484,620925cb1445f1875052f5e77d8fa41155fbe484,"[client-app] fix errors with no message

Summary:
Some API Errors, like ECONNREFUSED, have no \.message.
Catch this in the error reporter

Test Plan: Manually create a non-message error and see better error message

Reviewers: spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3973"
emorikawa,2017-02-18 01:28:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/b97b69d89a05945d4ebd2e08267b51f707e4a9f1,b97b69d89a05945d4ebd2e08267b51f707e4a9f1,"[*] update and add READMEs to each package

Summary:
Adding READMEs for easy and helpful browsing on GitHub.
Also add missing script and `--interpreter` flag

Test Plan: Run new launch commands

Reviewers: mark, spang, juan, halla

Reviewed By: spang, juan, halla

Differential Revision: https://phab.nylas.com/D3971"
jstejada,2017-02-18 00:21:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/23cf3bd44e0a5f8b5c3e983171d6cf28b18b06e0,23cf3bd44e0a5f8b5c3e983171d6cf28b18b06e0,"[*] Temporary fix for coffee linter in arc lint

For now, just update the arclint config to point to the correct grunt script"
emorikawa,2017-02-17 23:08:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c1adf50eae404aeb84e7458c98d84c6e559ac3e,0c1adf50eae404aeb84e7458c98d84c6e559ac3e,[client-app] remove rouge-committed packages folder
hallamoore,2017-02-16 23:37:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d3a3c552cb66e52a9324e88c1e11a8abd2fdc5c,9d3a3c552cb66e52a9324e88c1e11a8abd2fdc5c,"[client-app, client-sync] Save imap folder names in the client-app

Summary:
Client-sync has the full imap folder names, but used to only pass the display
name to the application. The application needs the full imap names so that it
can pass them via metadata to cloud-workers that need to open imap boxes.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3951"
hallamoore,2017-02-16 23:36:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/dde49c82be9104be27620d97ebc295d6a5cc9303,dde49c82be9104be27620d97ebc295d6a5cc9303,"[isomorphic-core] Allow use of atob() in cloud environments

Summary: atob() is a global in browser environments, but needs to be imported otherwise.

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3950"
hallamoore,2017-02-17 01:02:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/289d353c431d81c9c26bfb53dfd9917e5ff154bb,289d353c431d81c9c26bfb53dfd9917e5ff154bb,"[client-private-plugins] Change reminderDate -> expiration

Summary:
The cloud packages expect an expiration field. Update the send reminders
metadata to use expiration instead of reminderDate

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3949"
hallamoore,2017-02-17 01:00:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/a011aa1abf806a7bc3f67d58de2ce4e6744658d4,a011aa1abf806a7bc3f67d58de2ce4e6744658d4,"[cloud-api] Change expirationDate -> expiration

Summary:
Seems like I accidently overwrote some things to be expirationDate while
implementing thread metadata. The cloud workers expect expiration instead.

Test Plan: manual

Reviewers: khamidou, evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3948"
emorikawa,2017-02-17 22:17:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbd911f703fea7723bce71a35961e30a9c6f461f,dbd911f703fea7723bce71a35961e30a9c6f461f,[client-app] convert FocusedContactStore to es6
spang,2017-02-17 21:27:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9e80622b7f7b5a3d5673a64918f92abc85b473a,c9e80622b7f7b5a3d5673a64918f92abc85b473a,"[local-sync] Differentiate sync loop & other errors by additional fingerprint info

Summary:
If an exception has the same stack trace, by default Sentry will always group
it together in the same event. We don't want to do that for sync loop
errors---e.g. 'Invalid credentials' errors should not be grouped together with
stuff like 'Too many simultaneous connections'. Creating more unique groups
will allow us to better evaluate the effect of sync & other bugfixes.

Test Plan: writing unit test right now

Reviewers: juan, mark

Subscribers:

Differential Revision: https://phab.nylas.com/D3915"
spang,2017-02-17 18:18:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/05b11a877abb9d902ec335a2d882f041acd213ec,05b11a877abb9d902ec335a2d882f041acd213ec,"[*] Clean up some cruft

Summary: This stuff doesn't seem to be used for anything anymore and it's cluttering up the client-app dir.

Test Plan: ran the app, also did `npm start` with no ~/.nylas-dev

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3961"
jstejada,2017-02-17 20:30:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca3d35698bbc6e75f0d8363b2feaf03f9e0a4cce,ca3d35698bbc6e75f0d8363b2feaf03f9e0a4cce,"[*] metrics(Part 1) Add env-helpers to iso core

Summary:
This is a set of functions which will allow isomorphic-core to detect
which environment it is running on.

This will be useful for moving the metrics reporter to iso-core

Test Plan: manual

Reviewers: mark, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3966"
emorikawa,2017-02-17 20:11:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c082380c0e6399404095f2397722ba0e7c7d785,6c082380c0e6399404095f2397722ba0e7c7d785,[*] convert everyting to rx-lite
emorikawa,2017-02-17 20:05:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/37313eaf157a6988b162ea104684b79c39170718,37313eaf157a6988b162ea104684b79c39170718,[cloud-*] fix Dockerfile to correctly use postinstall script
jstejada,2017-02-17 19:22:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/74086571c5b40109724873f7f22aa388ab6c019f,74086571c5b40109724873f7f22aa388ab6c019f,"[*] Correctly copy error logger extensions in postinstall script

Summary: Also fix linter errors

Test Plan: manual

Reviewers: evan, mark, halla

Reviewed By: halla

Subscribers: halla

Differential Revision: https://phab.nylas.com/D3960"
emorikawa,2017-02-17 18:47:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8730cfbf5a262f60513c69e5111608ca2ec3444,e8730cfbf5a262f60513c69e5111608ca2ec3444,"[cloud-*] Get cloud-api and cloud-workers running on new repo

[dev] remove .tern-project

[cloud-*] move into cloud-core/build

[cloud-core] convert to launch properly via Docker"
jstejada,2017-02-17 18:11:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/072524c8b42b24c71f6562c97fa6423fb498367f,072524c8b42b24c71f6562c97fa6423fb498367f,[*] Move BackoffSchedulers into isomorphic-core
jstejada,2017-02-17 02:31:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/45adb2ef412fca85c50b718dc4afeec59c4f4216,45adb2ef412fca85c50b718dc4afeec59c4f4216,[client-app] Update changelog
emorikawa,2017-02-17 18:00:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/08813b93167cb3bbec37b101342eacf7d3b22552,08813b93167cb3bbec37b101342eacf7d3b22552,"[client-app] fix module spec

This changed because we now globally require node_modules"
emorikawa,2017-02-16 22:53:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f29032092d71e01575e161824497af3d1588b61,5f29032092d71e01575e161824497af3d1588b61,"[*] move to monorepo

[*] update babel

[client-app] remove flow-typed

[client-app] Move build/package.json to main package.json

[client-app] remove spec_integration

[client-app] fix babel support

Add client-private-plugins package.json

[client-app] add node_modules to global path for private-plugins

Move client-sync dependencies to client-app root

fix electron rebuild

[*] moved to monorepo

Summary: App now runs in monorepo

Test Plan: npm test

Reviewers: juan, mark, khamidou, halla, spang

Differential Revision: https://phab.nylas.com/D3947"
jerm,2017-02-16 23:47:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/f970c8f3e3ac90b26c3d4ed6a2eb48b2ff601d0d,f970c8f3e3ac90b26c3d4ed6a2eb48b2ff601d0d,"[n1cloud][docker][logs] added pm2 wrapper for logs

Launching pm2 via a wrapper that launches pm2 as a daemon in the background
and then runs pm2 logs --raw in the foreground. This gets us the logs that
we want without the additional cruft that pm2 outputs by default"
spang,2017-02-17 00:58:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc2f25306c72ff8cbd9722441f64f6e09cf2c5d2,fc2f25306c72ff8cbd9722441f64f6e09cf2c5d2,fix(linux-build): Update rpm spec to use new package name
spang,2017-02-17 00:06:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/0434b04921cbab9d641f6f0a4e1541683edfe495,0434b04921cbab9d641f6f0a4e1541683edfe495,"fix(linux-build): Change package name to Nylas Mail

Need this in order to allow parallel installation of Nylas Pro and Nylas
Mail."
spang,2017-02-17 00:02:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/341652a2d57e75223ef6da13930ad79fbf606bb7,341652a2d57e75223ef6da13930ad79fbf606bb7,fix(cli): s/n1/nylas-mail/
jstejada,2017-02-16 22:13:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/1089d62f2d35aff87e16a27c5a90ff171946dbb1,1089d62f2d35aff87e16a27c5a90ff171946dbb1,"Update .arcconfig to point to new repo

Summary: see title

Test Plan: manual

Reviewers: spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3945"
emorikawa,2017-02-16 21:31:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/08eb33af0f9cbdc67e76a6eed08f5c552d9d634b,08eb33af0f9cbdc67e76a6eed08f5c552d9d634b,[client-*] Rename packages folders and update readme
emorikawa,2017-02-16 21:20:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/afd941e778f018b430419fd03e09cd052aea2161,afd941e778f018b430419fd03e09cd052aea2161,Merge remote-tracking branch 'k2/master'
emorikawa,2017-02-16 21:15:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/95b68f13686791a5350eb41e32858f05e9f274f2,95b68f13686791a5350eb41e32858f05e9f274f2,[nylas-mail] move nylas-mail into /packages
emorikawa,2017-02-16 20:36:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/57b4f5796a7b2ba1f86aee242b85ee6d05c0a697,57b4f5796a7b2ba1f86aee242b85ee6d05c0a697,"fix(SFDC): fix React error in tokenizing text field

Summary:
Get ready for some SFDC diffs! Hooray getting more eyeballs on SFDC. At
this stage it's a lot of FYI to hopefully start showing more people parts
of the SFDC plugin.

This is related to the form you use to create new Salesforce Objects with.

The form window basically looks like:
```
<SalesforceObjectFormWithWindowProps>
  <SalesforceObjectForm>
    <GeneratedForm>
      <GeneratedFieldset>
        <FormItem type=""input"" />
        <FormItem type=""email"" />
        ... (lots of FormItems)
        <SalesforceObjectPicker>
          <TokenizingTextField>
            <Menu>
              some placeholder that had an error fixed by this diff!!!
            </Menu>
          </TokenizingTextField>
        </SalesforceObjectPicker>
        <FormItem type=""checkbox"" />
      </GeneratedFieldset>
    </GeneratedForm>
  </SalesforceObjectForm>
</SalesforceObjectFormWithWindowProps>
```

The whole GeneratedForm is controlled by an obejct called `formData`. This
is documented in `GeneratedForm`.

This bug prevented me from properly using SalesforceObjectPickers inside
my form.

Test Plan: manual

Reviewers: mark, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3935"
emorikawa,2017-02-16 20:33:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/f27ac0d6c0d7acf625dce5547e2d23f6c455a81a,f27ac0d6c0d7acf625dce5547e2d23f6c455a81a,"[local-sync] fix related threads

Summary:
When saving a thread, we weren't properly setting the `participants`
object. Since Sequelize has object properties under getters and setters,
doing `this.participants.push()` did nothing.

Since threads had no `participants`, the related threads widget, which
queries through there, did nothing.

Test Plan: Manually inspect DB and use the related threads widget

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3938"
emorikawa,2017-02-16 20:32:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/3549625bd83efee61366d1824bdceb812adc7dc8,3549625bd83efee61366d1824bdceb812adc7dc8,"[*] update package.json to lerna specs

Summary:
This is the result of auto package.json fixing by lerna. Would be nice to
commit this so you can run script/bootstrap without it making local
changes.

I didn't manually bump any versions.

Test Plan: manual

Reviewers: mark, halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3934"
spang,2017-02-16 20:17:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/427b8f70997adca27c6b233dfe6226ff3f27cd6b,427b8f70997adca27c6b233dfe6226ff3f27cd6b,fix(watchman): There's some stuff in build/ we don't want to ignore
emorikawa,2017-02-16 20:15:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/47cc0dc684aeacf6a98d8f6877897aa56207297c,47cc0dc684aeacf6a98d8f6877897aa56207297c,"fix(spec): re-enable NylasEnv specs and fix duplicate rejection log

Summary:
This re-enables NylasEnv spec and fixes a particularly tricky test
involving the Node event loop.

See the comments I left on process.unhandledRejection and the new spec

Test Plan: Manually run test in isolation and whole suite. All green!

Reviewers: juan, mark, halla, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3942"
jstejada,2017-02-16 20:15:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/cd7e64b3e8373db4324e33fbf7e47edbafa1e2b8,cd7e64b3e8373db4324e33fbf7e47edbafa1e2b8,:art:(backoff-scheduler) Add getters
jstejada,2017-02-16 08:18:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/4041e59f465fda276826a134bf65a11c1eea7bcd,4041e59f465fda276826a134bf65a11c1eea7bcd,bump(version): 1.0.28
jstejada,2017-02-16 07:22:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/89f5a544a0102ba2453bc774c4f112411ff7a130,89f5a544a0102ba2453bc774c4f112411ff7a130,update(changelog)
jstejada,2017-02-16 06:10:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c5d392925bb639302e8dee72704d851e872989a,1c5d392925bb639302e8dee72704d851e872989a,bump(k2)
jstejada,2017-02-15 23:50:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0bdeb53dcdca446746178640047de4a2443bf27,c0bdeb53dcdca446746178640047de4a2443bf27,"[local-sync] :art: sync loop error handler

Summary: See title

Test Plan: manual

Reviewers: evan, mark, spang

Reviewed By: spang

Subscribers: mark

Differential Revision: https://phab.nylas.com/D3932"
emorikawa,2017-02-15 23:09:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f29bbe514e62a8d2d669e80584002c2620a1a8ca,f29bbe514e62a8d2d669e80584002c2620a1a8ca,bump(K2)
emorikawa,2017-02-15 22:47:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c62727f0ecc6b434db547a9bd39c5c8013f5828,3c62727f0ecc6b434db547a9bd39c5c8013f5828,"[cloud-api] remove latest_cursor endpoint

We no longer use this in favor of storing the last known delta id and incrementing by id"
spang,2017-02-15 15:37:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/e02aa0f01ce1d583544da5ac37f26fe1a69c0e52,e02aa0f01ce1d583544da5ac37f26fe1a69c0e52,"[cloud-api] Log error info on 5xx errors

Summary:
This is consistent with how we do things in the Python API---makes
debugging 500s easier if the stack trace is directly on the logged
request event.

Test Plan: call /ping/500 locally w/prod log stream enabled, also put a throw /ping (async handler)

Reviewers: khamidou, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3921"
spang,2017-02-15 16:46:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/baafb596f479080f99b2c845fdb2fc8df8ecb5f6,baafb596f479080f99b2c845fdb2fc8df8ecb5f6,"[local-sync] Refresh Google OAuth2 tokens when Invalid Credentials occurs in sync loop

Summary:
Previously, we would only refresh Google OAuth2 access tokens at the
beginning of the sync loop, and _only_ if the access token had already
expired. This meant that if an access token expired in the middle of a
sync loop iteration, the user would get prompted with the reauth red box
for their account and would have to either go through the oauth flow
again or restart the app for sync to continue.

This diff makes two changes:

1. Adds 5min of padding to the refresh window, so if a token will expire
in <5min, we'll go ahead and refresh the token. This will reduce the
possibility that an access token can expire during a sync loop
iteration.

2. Catches Invalid Credentials IMAPAuthenticationErrors for Gmail
accounts and forces a token refresh on the next sync loop.

These should prevent a user from _ever_ having to reauth their Gmail
account unless the refresh token is revoked, or we encounter some other
permanent error trying to refresh the token.

Fixes T7775 (at least some cases)

Test Plan: manual

Reviewers: khamidou, evan, juan

Reviewed By: juan

Maniphest Tasks: T7775, T7755

Differential Revision: https://phab.nylas.com/D3908"
spang,2017-02-15 22:23:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c2c7481ebc131a0c208d3e0d7e1883f3965a0ee,5c2c7481ebc131a0c208d3e0d7e1883f3965a0ee,Add TODOs about retries in sending
jstejada,2017-02-15 21:21:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/c559c21448b72c6f5c138b1992865531e93e5204,c559c21448b72c6f5c138b1992865531e93e5204,fix(exports) Add backoff schedulers
jstejada,2017-02-15 20:33:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/01a54525809f2552b5b922b9059f4a89e260df4f,01a54525809f2552b5b922b9059f4a89e260df4f,bump(k2)
jstejada,2017-02-14 06:30:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb2c9d32f22859d64fb6174cfe2d0a7b0c353f56,cb2c9d32f22859d64fb6174cfe2d0a7b0c353f56,"[local-sync] Add exponential backoff when retrying syncback tasks

Summary:
Instead of re-implementing exponential backoff, throw the retryable
error so the sync loop handles it and backs-off

Test Plan: manual

Reviewers: spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3914"
jstejada,2017-02-15 08:31:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e255911715151caf554ff256a164488ef9e7fef,7e255911715151caf554ff256a164488ef9e7fef,"feat(offline) Re add offline status notification

Summary:
This commit rewrites the offline status notification from scratch, using
the `is-online` module (https://github.com/sindresorhus/is-online). The
react component no longer manages all of the state internally, but
rather depends on a separate OnlineStatusStore that manages the online state
for that component.

The new online status system will:

- Check online status every 30 seconds
- If status switches to offline:
  - Show notification
  - Recheck online status using exponential backoff
  - Notification will show remaining seconds until next online status
  check (like slack) (upon initial inspection this seemed to have no cpu problems.)
- If status switches to online
  - Hide notification
  - Revert to checking online status every 30 seconds

Depends on D3919

Test Plan: manual

Reviewers: spang, mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3920"
emorikawa,2017-02-15 19:33:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/5dd7e5d51f220e6399d178dc22502cfca46df9a6,5dd7e5d51f220e6399d178dc22502cfca46df9a6,bump(k2): SFDC
emorikawa,2017-02-15 19:33:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1f069c9d78284a8b67af73b61a7edf88d3669c6,f1f069c9d78284a8b67af73b61a7edf88d3669c6,"[SFDC] Update SalesforceSearchIndexer for new search indexing

Summary:
Update Salesforce to use the new search indexer

Depends on D3911

Test Plan: Manually bootup SFDC and ensure it launches and indexes models properly

Reviewers: mark, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3913"
emorikawa,2017-02-15 19:32:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c66c539e7ff3e973c26f9d9835f8b1372d59a80,0c66c539e7ff3e973c26f9d9835f8b1372d59a80,"reafctor(scheduler): Move SearchIndexer -> SearchIndexScheduler

Summary:
This renames `SearchIndexer` to `SearchIndexScheduler`

It also moves it out of internal_packages and into src/ since this is now
used across packages (like in Salesforce).

It also makes the class a Singleton and exports that instead so we don't
need to pass it via `activate`. The `activate` method of many stores and
packages are designed to be argumentless.

Test Plan:
Boot up Nylas and ensure it's still indexing threads properly.
Also allows Salesforce to bootup with the SalesforceSearchIndexer

Reviewers: juan, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3911"
jstejada,2017-02-15 00:32:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/8842aa9f28d9abfea672d53a09ccc97091905bba,8842aa9f28d9abfea672d53a09ccc97091905bba,"feat(backoff-scheduler): Add a backoff scheduler service

Summary:
This will help us dry up exponential backoffs we have scattered in
several places

Test Plan: unit tests

Reviewers: mark, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3919"
spang,2017-02-15 16:35:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/55a83ebc0343d8271ab0cbd067e876dc8d4aa321,55a83ebc0343d8271ab0cbd067e876dc8d4aa321,bump K2
spang,2017-02-15 15:54:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/4465fab4502fa27feecf215973e293898973a9e6,4465fab4502fa27feecf215973e293898973a9e6,"[cloud-api,cloud-workers,local-sync] Bump hapi version

We were two major versions behind. I upgraded and everything is working fine
in dev."
spang,2017-02-15 15:35:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/e22431cf7eab95a3a75d9b8b821acdd0a2b19b4c,e22431cf7eab95a3a75d9b8b821acdd0a2b19b4c,"[cloud-api] Reduce request timing precision

Hoek.Bench() reports ms times with 15 decimal points, which is ridiculous
and makes the logs harder to read. We only need ms precision for request
times, which Hoek.Timer() gives us."
spang,2017-02-15 14:30:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/81ad5f8210c97f9ab92859a5ea26c500a6ecc44e,81ad5f8210c97f9ab92859a5ea26c500a6ecc44e,"Bump pm2 version to 2.4.0

See https://github.com/Unitech/pm2/blob/master/CHANGELOG.md
for new features and fixes"
jstejada,2017-02-15 02:28:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/b87422a868f7430622796ca2ef23aadb456490a2,b87422a868f7430622796ca2ef23aadb456490a2,bump(k2) latest master
jstejada,2017-02-15 02:28:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/068de72051af899b2b5f7661d57378498f2e733f,068de72051af899b2b5f7661d57378498f2e733f,"[cloud-api] KEEP Timeout streaming API connections every 15 minutes

This reverts commit 91376c587cfd066c2db08de15be71a3b5e179c8a.
This is actually working correctly to reduce REDIS connections"
jstejada,2017-02-15 02:08:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/2267c8986ff456c2709c5b2731cafaae37b3ad31,2267c8986ff456c2709c5b2731cafaae37b3ad31,fix(offline): Really remove offline notification
emorikawa,2017-02-15 01:55:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/91376c587cfd066c2db08de15be71a3b5e179c8a,91376c587cfd066c2db08de15be71a3b5e179c8a,"Revert ""[cloud-api] Timeout streaming API connections every 15 minutes""

This reverts commit 50391bc7700cfee6b629a613e8140aa19624fa19."
jstejada,2017-02-15 01:02:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/22248e6b226876cd2cdbb18e1aa232c1e21baa8b,22248e6b226876cd2cdbb18e1aa232c1e21baa8b,"[cloud-*] Properly listen to stream disconnect events to close redis connections

See the following for why we need to set up the listeners on the raw
stream.
http://stackoverflow.com/questions/26221000/detecting-when-a-long-request-has-ended-in-nodejs-express
https://github.com/hapijs/discuss/issues/322#issuecomment-235999544

Hapi's disconnect event only fires on error or unexpected aborts: https://hapijs.com/api#response-events"
emorikawa,2017-02-15 00:36:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/062e9872475662106e1878aff79bdfcb4039f9a0,062e9872475662106e1878aff79bdfcb4039f9a0,bump(version): 1.0.27
jstejada,2017-02-15 00:10:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2d3553c47dca12f519b911ed9af711818b6c272,e2d3553c47dca12f519b911ed9af711818b6c272,"fix(offline-status): Temporarily remove offline status notification

Summary:
This component was running into a hard loop trying to constantly, unnecessarily,
re-establish the delta connection to our n1cloud servers.

Test Plan: manual

Reviewers: mark, evan, spang

Reviewed By: evan, spang

Differential Revision: https://phab.nylas.com/D3918"
emorikawa,2017-02-15 00:09:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d510f787c892885f712adde1376b709227bfabc,4d510f787c892885f712adde1376b709227bfabc,"fix(delta): add backoff to delta error handling

Summary: Report delta errors and exponential backoff when errors arise

Test Plan: Manually throw Errors in various parts of the delta stream

Reviewers: spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3917"
emorikawa,2017-02-14 22:42:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/225d747166baccd26eca886b15e2e48b91908ebf,225d747166baccd26eca886b15e2e48b91908ebf,"[cloud-core, cloud-api] add logging to delta connection"
khamidou,2017-02-14 22:40:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/50391bc7700cfee6b629a613e8140aa19624fa19,50391bc7700cfee6b629a613e8140aa19624fa19,"[cloud-api] Timeout streaming API connections every 15 minutes

Summary: Should help a fair bit with our redis connection pileup.

Test Plan: Tested manually.

Reviewers: mark, spang, juan, evan

Reviewed By: mark, spang, evan

Differential Revision: https://phab.nylas.com/D3916"
emorikawa,2017-02-14 18:49:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/00ac88b39a23d4d9849644000c93ff5a3ac3e7a1,00ac88b39a23d4d9849644000c93ff5a3ac3e7a1,bump(k2): adding accountId index
emorikawa,2017-02-14 18:48:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/15800d991389b4373b5b051fa9cb9b4511338674,15800d991389b4373b5b051fa9cb9b4511338674,[isomorphic-core] add accountId index definition to Transaction table
emorikawa,2017-02-14 18:46:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba3fce23427b98093a5ddfd6ca75aecd9dbb4395,ba3fce23427b98093a5ddfd6ca75aecd9dbb4395,fix(delta): report error when delta gets invalid cursor
emorikawa,2017-02-14 18:40:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/eab4ed7fb3e86b1de8b97d40af3a0155b4cee690,eab4ed7fb3e86b1de8b97d40af3a0155b4cee690,[cloud-api] recover from bad error from /n1/user
emorikawa,2017-02-14 17:07:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9107e2a15505b8fedaee426ec2ad1a5fc323dbd,d9107e2a15505b8fedaee426ec2ad1a5fc323dbd,"fix(spec): re-enable DatabaseStore specs

Summary:
Re-enable DatabaseStore specs and use new async model that awaits for the
promises to resolve

Test Plan: new tests

Reviewers: spang, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3909"
emorikawa,2017-02-14 17:03:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/c78d0cd2f67a49fc33d1dafe7d545818b3af269f,c78d0cd2f67a49fc33d1dafe7d545818b3af269f,"fix(db): wait for models to be setup before activating packages

Summary:
Some plugins (like the Salesforce Plugin) register Models with the
database store. Upon plugin load, we check to see if there are newly
registered models, if there are, we try and refresh the database.

Unfortunately the database refresh was not being `await`ed for. This means
the `activate` method of the plugin was called before the models were
created creating DB errors.

Making `refreshDatabaseSchema` something you can `await` for requied
adding an async ready hook on the DatabaseStore itself that will work in
all windows, even though setup is only happening in one window.

Test Plan:
Turn DatabaseStore.DEBUG_TO_LOG = true and run before and after the patch
with SFDC enabled. See that after the patch the DB setup happens before
activate gets called

Reviewers: halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3906"
jstejada,2017-02-14 05:52:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb8cf21198343e9524e5eb88050a3f094e4951e2,fb8cf21198343e9524e5eb88050a3f094e4951e2,[local-sync] :art: comment
jstejada,2017-02-11 22:44:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/094e5ba589796696a0ec3d0bffd4850bf8119966,094e5ba589796696a0ec3d0bffd4850bf8119966,"[local-sync] syncback(Part 5): Always keep retrying tasks if error is retryable

Summary:
This commit makes it so we always continue retrying syncback tasks as long as they
error with a retryable error. There's really no reason to not continue retrying syncback
tasks after an arbitrary number of retries (especially such a low one) if we
encounter a retryable error. Before this commit, if for example we got 2 random
network errors in a row, we would just mark the task as failed even
though it would eventually succeed in subsequent attempts.

Previously, when N1 synced against the cloud api, we would indefinitely
retry a Task if we continued getting retryable errors. This ensures that
the app can work correctly offline and prevents displaying unecessary errors to
the user, and having actions bouncing back or sending messages without putting them
in the sent folder.

Additionally, this commit ensures that when cleaning up messages without a
folderImapUID we don't delete messages that are currently being added to the sent
folder. This is relevant to this commit because given that we could retry the
EnsureMessageInSentFolder task indefinitely, we might end up deleting that
message because it wont have a uid until the task succeeds.

Depends on D3898

Test Plan: manual

Reviewers: mark, spang, evan, halla

Reviewed By: spang, evan, halla

Differential Revision: https://phab.nylas.com/D3900"
jstejada,2017-02-14 05:39:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a56f21dbe3ed994b402481d53f0695db0fac0f5,5a56f21dbe3ed994b402481d53f0695db0fac0f5,"fix(account) Properly keep tokens in sync between acct stores in different windows

Summary:
When loading accounts, if we detect any removed accounts, we should get
rid of the tokens for that account as well.

Test Plan: manually removed accounts, everything seems a-ok

Reviewers: mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3907"
spang,2017-02-14 02:16:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/50e02f88e9fdfe50d0bdf11445d9673fed106ed1,50e02f88e9fdfe50d0bdf11445d9673fed106ed1,"[local-sync] :fire: Message syncback tasks

Summary:
Since all Nylas Mail actions are thread-based except for sending,
we never use any of these. Make `git grep` less confusing by getting rid
of them.

Test Plan: use the app

Reviewers: evan, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3910"
jstejada,2017-02-13 23:13:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2a518f4375fd4752c9306f02575610b850cca32,a2a518f4375fd4752c9306f02575610b850cca32,"fix(accounts) Don't report error when removing accounts

Summary:
The current error condition check is to make sure that accounts are exclusively
removed via `Actions.removeAccount`. However, when removing accounts,
the in-memory `AccoutStore`s in each window are kept in sync via listening
to the config, as opposed to dispatching Actions globally between windows
(Actions.removeAccount is scoped to a single window, see actions.es6).
So, when we remove an account in one window, config.json will change, and the
other windows will always encounter `removedIds.length > 0` to be true
when their `_loadAccounts` runs. This will only generate unecessary noise in Sentry.

Test Plan: manual

Reviewers: mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3902"
hallamoore,2017-02-13 22:08:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/6319ce90328b02845efa8c50a9317ef3ac818360,6319ce90328b02845efa8c50a9317ef3ac818360,"[cloud-api] Change an extension from .js to .es6

Necessary to run properly on production"
jstejada,2017-02-11 20:27:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/a28b4e881b1269b978adbd452f17450493ef5c33,a28b4e881b1269b978adbd452f17450493ef5c33,"[local-sync] syncback(Part 4): Don't always mark INPROGRESS tasks as failed at beginning of sync

Summary:
Previously, if you were to close the app while you had any tasks queued,
these would be marked as failed the next time you open the app, showing
an annoying error message and reverting any optimisitic actions.

However, we don't need to be so defensive about retrying tasks because
the only tasks we can't retry are the Sending tasks. All of the other
tasks like moving or changing labels are fine to retry (trying  move the same
set of uids twice wont cause an error)

This commit adds an extra status to syncback requests, ""NOTRETRYABLE"".
Only NOTRETRYABLE requests will be marked as failed at the beginning of
the sync loop, and any INPROGRESS tasks will be marked as NEW so they
can be retried

Depends on D3896

Test Plan: manual

Reviewers: mark, evan, spang, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3898"
hallamoore,2017-02-10 00:15:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c69ea437c262aec5a434d6e801af929a0e809db,6c69ea437c262aec5a434d6e801af929a0e809db,"fix(tests): Fix some tests and add tests for thread metadata

Summary: Depends on D3875

Test Plan: run the tests

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3876"
hallamoore,2017-02-11 01:31:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/83bea7c4b6a34ddc099394fdcb74d9d5ee0f8052,83bea7c4b6a34ddc099394fdcb74d9d5ee0f8052,"fix(metadata): Fix some issues with processing metadata deltas

Summary:
- Create ghost models if we receive metadata for an object we
    haven't synced yet
- Fix logic for finding equivalent threads
- Send `messageIds` when syncing thread metadata

See D3876 for unit tests

K2 pairing: D3880

Test Plan: unit tests, local testing soon

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3875"
jstejada,2017-02-13 21:08:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e937c8c289c2035cf0964306d7ee50084b866a6,7e937c8c289c2035cf0964306d7ee50084b866a6,bump k2
jstejada,2017-02-11 10:46:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/b55d117216ffc0902266fba8f12aa4b20f467400,b55d117216ffc0902266fba8f12aa4b20f467400,"[local-sync] syncback(Part 3): Fixup `runSyncbackTasks`

Summary:
Now that we don't run Send tasks outside the sync loop, we don't need
that awful hack wich required passing a `runTask` callback to
`runSyncbackTask` in order to customize how to run the task.

Instead, runSyncbackTask now knows 2 ways to run a task, either via imap, or
via smtp, depending on the resource declared by task to run. So now
SyncbackTasks declare a resource type they need to run, and that will be
passed as their second argument when running.

Depends D3894

Test Plan: manual

Reviewers: mark, halla, spang, evan

Reviewed By: halla, spang, evan

Differential Revision: https://phab.nylas.com/D3896"
jstejada,2017-02-11 09:10:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/1718d53becddb72b49c9214b72b52c14928e596b,1718d53becddb72b49c9214b72b52c14928e596b,"[local-sync] syncback(Part 2): Reinstate send tasks back into the sync loop

Summary:
We had previously ripped send tasks outside the sync loop to make them run faster,
but they run fast enough inside the loop.

This commit will also fix the scenario where if you closed the app in the
middle of a send task, the task would just hang forever and never succeed or
fail (T7818); given that it was excluded from the loop, we also had to exclude it
from the cleanup step to mark any INPROGRESS tasks as failed at the beginning
of each loop, which caused send tasks in progress to never get cleaned.

Putting them back inside the loop allows us to  fix this without adding more messy
logic, and it cleans up ugly duplicated code. Additionally, it will prevent more
duplicated code for upcoming diffs that will improve syncback task reliability
when the app is closed or window is restarted in the middle of a task.

Depends on D3893

Test Plan:
manually test sending, it still works, it's still fast. Restarted
window in the middle of send task, task fails.

Reviewers: mark, spang, halla, evan

Reviewed By: spang, halla, evan

Differential Revision: https://phab.nylas.com/D3894"
hallamoore,2017-02-10 19:39:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5bc8c5155c2d9bf24229b238447dc41471712e1,d5bc8c5155c2d9bf24229b238447dc41471712e1,"[cloud-api] Add metadata tests

Summary: Mostly geared towards thread metadata cases

Test Plan:
Ran the tests

Depends on D3879 and D3880

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3884"
hallamoore,2017-02-10 21:37:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/063b485d19505573a8efcb2936cfc835e575d66b,063b485d19505573a8efcb2936cfc835e575d66b,"[local-sync, cloud-api] Add logic to handle thread metadata

Summary:
[cloud-api]
Based on the passed in `messageIds`, it finds any existing thread
metadata that might be under a different thread id. If it realizes
there are actually multiple threads that should be the same thread,
(due to getting a missing message link), it reconciles all of them.

[local-sync]
Return `message_ids` in `Thread.toJSON()`

See D3879 for tests

N1 Pairing: D3875

Test Plan: unit tests, local testing soon

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3880"
jstejada,2017-02-11 08:48:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/432f1f4659bf05774924b20e7d0a6947861cb2f5,432f1f4659bf05774924b20e7d0a6947861cb2f5,"[local-sync] syncback(Part 1): Refactor syncback-task-helpers

Summary:
Instead of exposing helper functions, make this a class to hold the
shared state of the db, account, and logger required to run any syncback
inside an account sync loop.

Test Plan: manual

Reviewers: mark, spang, halla, evan

Reviewed By: spang, halla, evan

Differential Revision: https://phab.nylas.com/D3893"
jstejada,2017-02-11 18:40:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/85236c5eed7b489d9e63334e17ef2b1fbc2b3fc9,85236c5eed7b489d9e63334e17ef2b1fbc2b3fc9,"fix(send) Add better error checking when sending message

Summary:
See title.
I believe this might fix T7559, or at least provide a better error message.

Depends on D3895

Test Plan: manual

Reviewers: spang, mark, halla, evan

Reviewed By: mark, halla, evan

Maniphest Tasks: T7559

Differential Revision: https://phab.nylas.com/D3897"
jstejada,2017-02-11 10:20:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e4f008d03c0249c9ee3097df9fbcf8d5009fe34,3e4f008d03c0249c9ee3097df9fbcf8d5009fe34,"fix(send): Correctly wait for send task to complete before succeeding!

Summary:
If the worker window were to restart or the app were to close in the
middle of a send task, sending to a single recipient, we would not
properly await the task and always mark as success.

This diff, along with (D3897) should fix T7559.

Test Plan: manual

Reviewers: spang, mark, evan, halla

Reviewed By: mark, evan, halla

Maniphest Tasks: T7559

Differential Revision: https://phab.nylas.com/D3895"
jstejada,2017-02-13 20:23:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff5e0be588f31ed0d8cc5d71ed661c81f227f316,ff5e0be588f31ed0d8cc5d71ed661c81f227f316,"fix(offline-notif) Try to connect immediately upon window focus

Summary: see title

Test Plan: manual

Reviewers: mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3901"
jstejada,2017-02-13 20:21:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/46c0fa86ca46cedadf1a3df8e961481f9fa07ccd,46c0fa86ca46cedadf1a3df8e961481f9fa07ccd,bump k2
jstejada,2017-02-13 19:38:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/76ff5752f8a21fb47b1889b8e0fe7f890b027b3b,76ff5752f8a21fb47b1889b8e0fe7f890b027b3b,"[iso-core] Detect more offline errors when sending

Summary:
See title.
I really wish we could clean up this error handling a bit better, but I don't
think its super important right now.

Test Plan: manual

Reviewers: spang, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3903"
spang,2017-02-10 23:33:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/68339ad2154211e8cf2451a1c09b00350743a99e,68339ad2154211e8cf2451a1c09b00350743a99e,"feat(specs): Add support for generating JUnit XML by passing --junit-xml=<path>

Summary:
A prerequesite to integrating with `arc unit` or CI for each patchset is
being able to generate JUnit XML output for spec runs. This commit adds
this feature using the JUnitXMLReporter from jasmine-reporters. Invoke it like
this:

    npm run test-junit

(We output to the terminal as well when this is run, so in the case that
you're doing `arc diff` you have some idea of what is going on.)

Test Plan: run it

Reviewers: halla, juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3891"
jstejada,2017-02-11 08:05:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/df9b0121a0d37d16b7ae8ebcb107b55bf00ede5d,df9b0121a0d37d16b7ae8ebcb107b55bf00ede5d,"[local-sync] Add a better reason when waking sync for syncback

Summary: see title

Test Plan: nil

Reviewers: mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3892"
spang,2017-02-13 19:14:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a339314acfd61c4b016c0a4d4649f7f98bb443a,3a339314acfd61c4b016c0a4d4649f7f98bb443a,:art: s/N1/Nylas Mail/ in window-event-handler.coffee
jstejada,2017-02-11 23:30:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b4fa6abfedb15c562e8cdfbb5b090f4f6d5fcbb,1b4fa6abfedb15c562e8cdfbb5b090f4f6d5fcbb,bump k2
jstejada,2017-02-11 21:03:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca78872942a1979aa0d922c4f2ddaf9077d953e5,ca78872942a1979aa0d922c4f2ddaf9077d953e5,fix(syncback-category) Return error when task fails
jstejada,2017-02-11 20:55:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/f741581156531ba94eb80250d6b81383e78dc54d,f741581156531ba94eb80250d6b81383e78dc54d,"[local-sync] More retryable IMAP errors

Summary:
I've encountered random imap errors that we mark as permanent, but that
contain try again in the error message. We should check for that

Test Plan: manual

Reviewers: spang, evan, mark

Differential Revision: https://phab.nylas.com/D3899"
jstejada,2017-02-11 03:16:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/87fd478c4d39340de12471b7d21fa98ee5a36e7b,87fd478c4d39340de12471b7d21fa98ee5a36e7b,"fix(specs) Correctly set `configDirPath` when running tests

Before this commit, running the running the tests would clear all of
your config inside `.nylas-dev` and thus your accounts, forcing you to re-add
them everytime after you ran the tests

This was happening because we weren't correctly setting the
`configDirPath` to `.nylas-spec` when running with the --test flag. When
we run with --test, both options, `specMode` and `devMode` are true, so
the logic to set the path would fall into both conditions and ultimately
set the path to `.nylas-dev`. Now it's fixed!"
jstejada,2017-02-11 03:00:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/bad9a06778fea4f4527b44b4f8dc6f51dc96b74c,bad9a06778fea4f4527b44b4f8dc6f51dc96b74c,fix(specs) :hocho: more side-effect flakiness
jstejada,2017-02-11 00:47:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/4035fa025bfef3a5f19056b66564f56c4719e400,4035fa025bfef3a5f19056b66564f56c4719e400,fix(specs) Fix FeatureUsageStore spec flakiness
emorikawa,2017-02-10 23:43:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ad07cf23412a9bf37a0885c9d248eef30b74762,7ad07cf23412a9bf37a0885c9d248eef30b74762,bump(changelog): 1.0.26
emorikawa,2017-02-10 23:41:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/167cb1adfd14cc3e36db883eb200b72b33f1c938,167cb1adfd14cc3e36db883eb200b72b33f1c938,bump(version): 1.0.26
emorikawa,2017-02-10 23:40:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/2dd8a53574cc545afde6a5399b593288bd2ae7fe,2dd8a53574cc545afde6a5399b593288bd2ae7fe,bump(changelog): 1.0.26
hallamoore,2017-02-10 00:16:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/995aafdc43c6e7742f068fb940462c40f5cd377f,995aafdc43c6e7742f068fb940462c40f5cd377f,"fix(n1-spec-runner): Make `fit` async too

Summary: Running async tests with `fit` can fail otherwise

Test Plan: unit tests

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3874"
hallamoore,2017-02-10 23:38:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/0858ca2f2ee4561a0ea4ae930ad6a79a55f79c11,0858ca2f2ee4561a0ea4ae930ad6a79a55f79c11,"fix(tests): Allow the masterBefore/AfterEach functions to be async

Summary:
The global `before/afterEach` functions were made async, but the
`masterBefore/AfterEach` functions were applied to the references
in `jasmineExports` instead of the global references. Fix that,
and await for `destroyTestDatabase()`. Also fix a random test
failure about not receiving any json.

This diff is necessary for D3878 to work properly.

Test Plan: ran the tests

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3890"
hallamoore,2017-02-10 23:22:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb6c52d0087d04ae22c0adbf97e9c53175d72249,fb6c52d0087d04ae22c0adbf97e9c53175d72249,"[local-sync] Properly clean-up in-memory test database

Summary: There's no file to unlink, we just need to drop the tables.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3878"
hallamoore,2017-02-10 19:27:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/71de2386c7892fce7bf77f229f39f3611138b17e,71de2386c7892fce7bf77f229f39f3611138b17e,"[cloud-api] Add a spec runner for cloud-api

Summary:
Implements the `npm test` script and extends Jasmine to handle
await in a more automatic way. Also mocks out the database
each test.

Test Plan: ran unit tests with it

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3879"
emorikawa,2017-02-10 23:21:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/afa1ae4ed757b8d190a79adf70c89b50370ec5e5,afa1ae4ed757b8d190a79adf70c89b50370ec5e5,bump(k2)
emorikawa,2017-02-10 23:20:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/dcacd97cf65678ea31c3165ed8d146983c7a3262,dcacd97cf65678ea31c3165ed8d146983c7a3262,"[local-sync] fix sync when no messages in inbox in gmail

Summary:
If you have no messages in your Gmail Inbox (Yay Inbox Zero!) and you
connect your account and do first sync, then we get an error where we try
and fetch a range from null to -1.

This was due to a logical error in the first sync fetch code.

This diff fixes this bug and renames some variables to make it clearer
what's going on

Fixes T7842

{F11176}

Test Plan:
1. Bring Gmail to Inbox Zero
2. Connect account
3. Verify first sync works

Reviewers: spang, halla, juan

Reviewed By: juan

Maniphest Tasks: T7842

Differential Revision: https://phab.nylas.com/D3889"
jstejada,2017-02-10 23:16:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ca1ed6033649ecc55922567238e1d281b1e2dd5,0ca1ed6033649ecc55922567238e1d281b1e2dd5,Actually fix travis
jstejada,2017-02-10 23:11:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e9635cff6b8533e500609e1d683cc4be6a594ae,0e9635cff6b8533e500609e1d683cc4be6a594ae,fix(build) Fix travis build script
jstejada,2017-02-10 23:01:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/8bd108e3e5800c5fab959312833c4a81f4e25659,8bd108e3e5800c5fab959312833c4a81f4e25659,fix(build/travis) Only run tests on mac
emorikawa,2017-02-10 21:49:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/f614a24d6cb1e31f1c92231c3f6d039b29a6de52,f614a24d6cb1e31f1c92231c3f6d039b29a6de52,"fix(specs): fix FeatureUsage spec

Summary: Damn async TaskQueue

Test Plan: fixed

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3888"
emorikawa,2017-02-10 20:52:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/b999d5038a61056a4ba3b09484c0f9127be1141a,b999d5038a61056a4ba3b09484c0f9127be1141a,"fix(identity): remove the savePromise and optimistically update

Summary:
Fixes T7832

The _savePromise mechanism of the IdentityStore was really cumbersome and
was throwing errors on the console for people. In hindsight, this is an
unnecessary complication to a very sensitive system and a source of very
hairy async bugs.

Test Plan:
I also updated the specs to ensure that when you call saveIdentity the
promise resolves after the local cache has been updated

Reviewers: spang, halla, juan

Reviewed By: juan

Maniphest Tasks: T7832

Differential Revision: https://phab.nylas.com/D3882"
emorikawa,2017-02-10 20:52:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba77219b584921f6fb137987468f041f3d3f394b,ba77219b584921f6fb137987468f041f3d3f394b,"fix(load): fix window load timing

Summary:
The app regressed to launching a blank white page for a while before
showing the UI. This was because I forgot to await for the now async
package loading

Test Plan: Manually boot app with compile cache disabled

Reviewers: mark, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3883"
jstejada,2017-02-10 20:26:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/4045481aa97498c12c672b972f52f3890997f867,4045481aa97498c12c672b972f52f3890997f867,"fix(specs) Fix Spellchecker tests

Summary:
Previously, these tests were mostly testing the library itself, instead
of our code. The library performed expensive operations and caused the
test to time out more often than not

This commit makes it so we test our code, mock out any calls to side
effects, and removes a line that was overriding our jasmine timeout

Test Plan: unit

Reviewers: spang, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3885"
jstejada,2017-02-10 20:19:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/7685e9cb166d698cdd8034e1ba77b3a89a006b86,7685e9cb166d698cdd8034e1ba77b3a89a006b86,"fix(specs) Use shallow rendering

Now that we have 15.4.2, we don't have to worry about:
https://github.com/facebook/react/pull/8097"
jstejada,2017-02-10 20:19:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/e08ad9e39d7fca8d26ab2f9052ad6548a76ca683,e08ad9e39d7fca8d26ab2f9052ad6548a76ca683,fix(specs) Synchronously render test reporting gui for better stack traces
jstejada,2017-02-10 20:17:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/2522bb6525fd4ebd37a0c48d4aa0d610d1f19067,2522bb6525fd4ebd37a0c48d4aa0d610d1f19067,bump(react) 15.4.2
jstejada,2017-02-10 17:28:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/08b68c8ff36b5d7f44771afacb729785a27f436d,08b68c8ff36b5d7f44771afacb729785a27f436d,fix(api-error) Fix APIError constructor
jstejada,2017-02-10 07:54:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/d838576ff1982dd7af33c3d4ef43f2c76ba4228b,d838576ff1982dd7af33c3d4ef43f2c76ba4228b,bump(version) 1.0.25
jstejada,2017-02-10 00:56:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d8c15026e6c68d5d12cc814c0e393e178da5c54,1d8c15026e6c68d5d12cc814c0e393e178da5c54,fix(specs) Fix react warning
jstejada,2017-02-10 00:34:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/000e364327062a7fc82f3f59a7cf3549a1e6138e,000e364327062a7fc82f3f59a7cf3549a1e6138e,fix(specs) Fix spellchecker tests
emorikawa,2017-02-10 00:07:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0859cdf302bbf34ee218755f519b8c3208dba7c,e0859cdf302bbf34ee218755f519b8c3208dba7c,fix(build): re-add specs back into build process
emorikawa,2017-02-10 00:05:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/cfa84ceab0158083104becaba62add4d49790b55,cfa84ceab0158083104becaba62add4d49790b55,fix(specs): fix util specs
emorikawa,2017-02-10 00:05:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/3390bc0783d7f17906a6884e4d757876a337506f,3390bc0783d7f17906a6884e4d757876a337506f,[local-sync] rename spec fixture folder to be correct
jstejada,2017-02-09 23:45:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b97037bef550fd015a2df232314969982a82b8a7,b97037bef550fd015a2df232314969982a82b8a7,fix(specs) lock enzyme version
jstejada,2017-02-09 23:32:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/20826181929a65fd9a8d42aa74ded817ece37632,20826181929a65fd9a8d42aa74ded817ece37632,fix(specs) Fix tokenizingfield specs
emorikawa,2017-02-09 23:29:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/5437e77d6c80bada13cc607738a0349145ff1f64,5437e77d6c80bada13cc607738a0349145ff1f64,fix(specs): fix more tests
emorikawa,2017-02-09 23:17:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/91f501bac137e2b1638954e906f2553adf13f731,91f501bac137e2b1638954e906f2553adf13f731,fix(specs): fix more broken specs
jstejada,2017-02-09 22:42:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/590a4499fea6bece4ef5da40ca8f1b4d74ba72f5,590a4499fea6bece4ef5da40ca8f1b4d74ba72f5,"[local-sync] When replying to a thread, properly add it to Sent folder

Summary:
Previously, when processing messages during folder sync, if the message already existed, and it belonged to a thread, we would update the message, but forget to update its thread with any changes that new
message would produce on the thread (e.g. updating the threads folders or labels).

One obvious manifestation of this was when replying to a thread: the EnsureMessageInSentFolderTask would create the new message, and then attempt to sync the sent folder to fetch the newly created message. When processing this message during sync, we would update the message but not update its thread, so the thread would not be associated to the sent folder, and it wouldn't show up in your sent items list in the UI.

Test Plan: manually verify that it works

Reviewers: evan, mark, spang

Reviewed By: mark, spang

Differential Revision: https://phab.nylas.com/D3872"
emorikawa,2017-02-09 22:51:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/074f581977bf3a73b5b58cb05b6a619a700e222f,074f581977bf3a73b5b58cb05b6a619a700e222f,fix(specs) fix specs logging erroneous error messages
jstejada,2017-02-09 21:57:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/528e092785e209d974641f3211f649e3345068f0,528e092785e209d974641f3211f649e3345068f0,fix(specs) Fix ClipboardService specs
jstejada,2017-02-09 21:29:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed05e188787174d29e1e3d18f7544bfc7c4f60bd,ed05e188787174d29e1e3d18f7544bfc7c4f60bd,fix(specs) Fix AutoUpdateManager specs
jstejada,2017-02-09 21:10:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5d009c4eda4de34b3814c3fbb01f7e38f152800,d5d009c4eda4de34b3814c3fbb01f7e38f152800,fix(spec) Never report errors in spec mode
emorikawa,2017-02-09 20:17:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0b314d25130c51c677bfe3ee094e2b87391e007,a0b314d25130c51c677bfe3ee094e2b87391e007,fix(spec): fix package manager spec
emorikawa,2017-02-09 20:08:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/a28a7dab47a6621fc694d1e6918c7aec35f6eddc,a28a7dab47a6621fc694d1e6918c7aec35f6eddc,fix(error): fix error reporter crashing with extra errors
spang,2017-02-09 18:52:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/677b1bf9893103cdac7a00ffd78b72e945e3b826,677b1bf9893103cdac7a00ffd78b72e945e3b826,:art: s/N1/Nylas Mail/ in window hang/crash dialogs
jstejada,2017-02-09 18:40:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/19160dcc16b772ecaf95f3c04629aea1304b9302,19160dcc16b772ecaf95f3c04629aea1304b9302,update changelog
jstejada,2017-02-09 18:30:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/d89ef389e6beee49caae9e11112319bb6da0dca8,d89ef389e6beee49caae9e11112319bb6da0dca8,bump(version) 1.0.24
jstejada,2017-02-09 18:25:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/aec6ca9b2ea35acd27a03f962868c72166ab5ef1,aec6ca9b2ea35acd27a03f962868c72166ab5ef1,"[local-sync] Fix logger for local requests

Also log send task correctly"
jstejada,2017-02-09 17:27:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/78e2a0ff8e998747092a8ec1784a10966c37e2fa,78e2a0ff8e998747092a8ec1784a10966c37e2fa,bump k2
jstejada,2017-02-09 17:27:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/f463ae3f0a1a2a166942cfe3e25c2813593cb19f,f463ae3f0a1a2a166942cfe3e25c2813593cb19f,"[local-sync] Don't crash app when reporting error and id not available

Summary:
Our sentry reporter tries to fetch the nylas identity from the database,
and access properties on it. However, if you are in a state where there
is no identity available (like having logged out, or just starting the
app), and encoutnered an error that would be reported to sentry, we
would throw an error while reporting and that would crash the app

Also, fix lint errors and some really janky code

This fixes T7810

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: spang, evan

Maniphest Tasks: T7810

Differential Revision: https://phab.nylas.com/D3867"
jstejada,2017-02-09 17:19:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/551975587ae8446f491fddc11da27e53159c1e76,551975587ae8446f491fddc11da27e53159c1e76,":art: Fix unhandled api rejections/Prefer promises over `success` option for api requests

Summary:
This commit modifies the api of NylasAPIRequest to /not/ take `success`
or `error` callback options at all, and only returns a Promise which you
can `then` and `catch` to handle the api response.

The fact that it returned a promise, and /also/ took `success` and
`error` callback options made it really confusing to use.

Additionaly, when using the callbacks intead of a promise, any errors
would be unhandled and reported to Sentry because even though the `error`
callback was being passed, the promise returned by `run()` still rejected and
no one was handling that reject, so it reached the `unhandledRejection` event
listener. This is undesirable because if you passed an `error` callback, it
means that you intended to handle it.

An example of this is calling the clearbit API, which will more often than
not return a 404, and even though we had an error handler which ignored the 404,
it still unecessarilly reported to Sentry, flooding it with events

Test Plan: manually check all updated codepaths still work

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3869"
jstejada,2017-02-09 09:34:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/87c7f8595cd075a2f2cfc35f263f6b9ffc609d58,87c7f8595cd075a2f2cfc35f263f6b9ffc609d58,"[local-sync] Prefer promises over `success` option for api requests

Summary: Companion D3869

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3868"
jstejada,2017-02-09 08:28:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/b70183a0fc24d4a8d6df7c60cf3d093501ea173b,b70183a0fc24d4a8d6df7c60cf3d093501ea173b,bump(changelog)
jstejada,2017-02-09 04:36:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f2ca94cf05a3769789e705ee581914811033335,7f2ca94cf05a3769789e705ee581914811033335,update gitignore
jstejada,2017-02-09 03:50:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/e44aebc0ac2ceded5a63b6a0634907600790d0ae,e44aebc0ac2ceded5a63b6a0634907600790d0ae,"fix(metrics) Report task perf metrics to mixpanel

Summary: see title

Test Plan: manual

Reviewers: spang, evan, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3866"
jstejada,2017-02-09 02:43:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d219bb24a3bfd98e12fb578eec76b5908af0701,1d219bb24a3bfd98e12fb578eec76b5908af0701,bump(version) 1.0.23
jstejada,2017-02-09 02:27:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/52cd011c09e19e6c665552dcf26d4f3d5263e2a7,52cd011c09e19e6c665552dcf26d4f3d5263e2a7,bump k2
jstejada,2017-02-09 02:24:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/77628a0d5c2ae38a68f8ceb62e79f1652365131f,77628a0d5c2ae38a68f8ceb62e79f1652365131f,"[local-sync] :art: logger

If the first argument to our local-sync logger is an object
(this is bunyan's api, and it's how we log from isomorphic-core and cloud-* packages
in order to have structured json logs for logstash), make sure we log
the object last and the string that comes as the second argument first."
jstejada,2017-02-09 01:52:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbe0150c701f6469980a07e2a5f24c2c11d78efc,bbe0150c701f6469980a07e2a5f24c2c11d78efc,bump k2
spang,2017-02-09 01:22:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/a971ab5e6847a5727504e16e997a8a8320585bd2,a971ab5e6847a5727504e16e997a8a8320585bd2,"[local-sync] Fix threading bug with open and link tracking enabled

Summary: Fixes T7649

Test Plan: FML writing unit tests now

Reviewers: evan, mark, juan

Reviewed By: mark, juan

Maniphest Tasks: T7649

Differential Revision: https://phab.nylas.com/D3863"
jstejada,2017-02-08 21:52:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf0b4e3f96d76dd2dea1358cf406e03b4fab7b46,bf0b4e3f96d76dd2dea1358cf406e03b4fab7b46,"[local-sync] Fix Mailbox does not exist error during sync

Summary:
This error ocurred, to the best of our knowledge, on iCloud accounts
that had been linked to other clients like Airmail.

On such accounts, node-imap would incorrectly parse the mailbox list
from imap, and return an `Airmail` folder which did not exist, causing
us to try to sync that nonexistent folder and error in the sync loop.

This error is amongst the most frequent we've seen in Sentry and
Support: https://sentry.io/nylas/nylas-mail/issues/213158962/events/4897450600/

The fix es detailed in the PR to node-imap: https://github.com/mscdex/node-imap/pull/594/files
This commit only points the node-imap dependency to our fork for now

Test Plan: manual and unit tests in node-imap

Reviewers: mark, khamidou, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3860"
emorikawa,2017-02-08 23:26:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1fdeb01e1a1e40de7b160532dc1562e3bbcdaf8,c1fdeb01e1a1e40de7b160532dc1562e3bbcdaf8,"feat(config): dev version now used ~/.nylas-dev instead of ~/.nylas-mail

Summary:
This diff (and the K2 counterpart diff) allow us to run dev-mode Nylas
Mail side-by-side with prod Nylas Mail.

There were 4 things that needed to change:

1. Use different config dir
2. Use different keychain name
3. Use different localhost port
4. Prevent Electron's app.makeSingleInstance from killing our app

All of these are activated through NylasEnv.inDevMode()

Depends on D3861

Test Plan:
Download latest prod build from nylas.com
Remove both ~/.nylas-mail and ~/.nylas-dev
Start up downloaded Nylas Mail, connect accounts.
Run `npm start` (which enables --dev)
Connect account to dev mode
Ensure both clients are syncing and can send/receive mail

Reviewers: khamidou, halla, mark, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3862"
emorikawa,2017-02-08 23:16:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b0fb08fc2416e79c06e9aad3a806ef39e5a75fa,7b0fb08fc2416e79c06e9aad3a806ef39e5a75fa,"[local-sync] use different port in dev mode

Summary:
This diff (and the K2 counterpart diff) allow us to run dev-mode Nylas
Mail side-by-side with prod Nylas Mail.

There were 4 things that needed to change:

1. Use different config dir
2. Use different keychain name
3. Use different localhost port
4. Prevent Electron's `app.makeSingleInstance` from killing our app

All of these are activated through `NylasEnv.inDevMode()`.

Test Plan: Manual

Reviewers: halla, mark, spang, khamidou, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3861"
emorikawa,2017-02-08 22:21:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/45d1613981454b5bcade378d9c910646258d9247,45d1613981454b5bcade378d9c910646258d9247,feat(config): dev version now used ~/.nylas-dev instead of ~/.nylas-mail
emorikawa,2017-02-08 22:13:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7c67eaa7cada77fe06df2493e2ed2e4fb371dbc,a7c67eaa7cada77fe06df2493e2ed2e4fb371dbc,fix(snooze): put feature usage before waiting for task move
spang,2017-02-08 21:10:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/e91bd61a24efee4ff5ad64ab61734edec79afe0e,e91bd61a24efee4ff5ad64ab61734edec79afe0e,"[cloud-api] Fix forAccount() child logger

Summary:
The global logger was keeping in memory a map of loggers for each account,
probably a holdover from the days when K2 was intended to sync mail in the
cloud. For n1cloud, we already have to create new child loggers for every
request, so keeping a map in memory results in the confusing behaviour
of wiping out any subsequent customizations of the logger, such as what
we do using a route decorator to add the endpoint, etc. to each log
line. This patch gets rid of the internal map and fixes the request
child logger for authenticated requests.

I have included unit tests more as an exercise to get in the habit of
writing tests more than these particular unit tests being super amazingly
useful. Critique on my stream-to-string implementation welcome, I have no
idea what I'm doing. It also feels weird to me to run cloud-core tests under
electron since they run under vanilla node in production, but I'm not sure how
to invoke jasmine specs properly without our N1 spec runner.

Test Plan: unit tests included + manual

Reviewers: mark, juan

Reviewed By: juan

Subscribers: halla

Differential Revision: https://phab.nylas.com/D3849"
khamidou,2017-02-08 00:49:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3d2cb0245de63495ed7f4748957ec653efda906,c3d2cb0245de63495ed7f4748957ec653efda906,"Hide snooze popover if the plugin is disabled

Summary:
Snooze is back in the mainline but not yet ready for primetime. We need to not show the popover if it's not enabled, which is what this diff does. It should be pretty simple to revert it once snooze has officially shipped.

Fixes T7791.

Test Plan: Tested manually.

Reviewers: juan, evan

Reviewed By: evan

Maniphest Tasks: T7791

Differential Revision: https://phab.nylas.com/D3855"
jstejada,2017-02-08 01:42:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/24ea3bf860418a16856da3c454b083c27e7ecde2,24ea3bf860418a16856da3c454b083c27e7ecde2,fix(onboarding) Actually trim email field value in form
jstejada,2017-02-07 22:59:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/d61b8a0715f15f9d3586c6c7e39bf1a9adc13a26,d61b8a0715f15f9d3586c6c7e39bf1a9adc13a26,fix(onboarding) Properly trim field values
jstejada,2017-02-07 22:48:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/95639477cc9727d77297a6030174fa58fff723ac,95639477cc9727d77297a6030174fa58fff723ac,Point to latest release in update notif
emorikawa,2017-02-07 20:46:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/878a2fe4defd9bb4dc66fb83036939ed16716c14,878a2fe4defd9bb4dc66fb83036939ed16716c14,"feat(usage): add new feature usage modal

Summary:
This adds the ""You've reached max features"" modal in N1.

http://g.recordit.co/9O7R0mLlXE.gif

Test Plan:
1. Pull latest nylas/cloud-core and start Billing site:
```
  cd cloud-core
  vagrant up
  vagrant ssh
  cd /vagrant
  bin/setup-up-feature-usage
  bin/launch
```
2. Blow away ~/.nylas-mail (err backup your old one first)
3. Restart N1
4. Before logging in, edit `~/.nylas-mail/config.json`
   - set env to ""local""
   - remove `thread-snooze` from the list of `disabledPlugins`
5. `cd /nylas-mail/src/k2` and run `npm start`
6. Restart N1 and create accounts & log in

Reviewers: khamidou, juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3846"
jstejada,2017-02-07 19:42:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd9678368d0496da774fb5959b88a9901b20c9c6,bd9678368d0496da774fb5959b88a9901b20c9c6,"[local-sync] Fix local-sync logs relayed to main (browser) process

Summary:
In electron, the --enable-logging flag makes it so the main browser
process logs to stdout all of the logs generated from within the renderer
processes.

Unfortunately, the main process will only log out the first argument passed to
`console.log` from within a renderer process (see https://github.com/electron/electron/issues/7061)

This commit makes it so that the local sync logger logs most of the log line in the first
argument passed to `console.log`

Test Plan: manual

Reviewers: evan, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3852"
jstejada,2017-02-07 19:19:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f203f52e0a76452acfd77affade1144ef173617f,f203f52e0a76452acfd77affade1144ef173617f,[local-sync] Fix SyncMetricsCollector logger
jstejada,2017-02-07 19:03:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/32c820d2e50607f9381392bf825b5076f5accd8f,32c820d2e50607f9381392bf825b5076f5accd8f,"[local-sync] Log account info in all logs during local sync + color code

Summary:
When multiple accounts are syncing, it's very hard to scan the local
sync logs because it is unclear to which account the logs belong to,
and it makes debugging hard.

This commit makes it so that all logs from local-sync include the
account info, with the account email prefixed at the beginning of each
log line (this allows filtering), and color coded by account.

Test Plan: manual

Reviewers: mark, spang, khamidou, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3851"
spang,2017-02-07 17:42:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a0cf2955d687add3f92d6107d72ecf17828ce4e,9a0cf2955d687add3f92d6107d72ecf17828ce4e,Update CHANGELOG.md
jstejada,2017-02-07 17:01:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbb97a36d3420c8f47963762b820844b024313d6,fbb97a36d3420c8f47963762b820844b024313d6,bump(version) 1.0.22
khamidou,2017-02-07 01:22:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/d82113aeb683e914bd5d4fa71c302eec95a3dc9d,d82113aeb683e914bd5d4fa71c302eec95a3dc9d,[snooze] s/expirationDate/expiration/g.
jstejada,2017-02-07 00:53:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a068cab31f5977577bb652e05a35d83da37d91c,6a068cab31f5977577bb652e05a35d83da37d91c,bump k2
spang,2017-02-07 00:41:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/13750c7ba3f5abb4f083ab4a8eaf0f5ab14fffce,13750c7ba3f5abb4f083ab4a8eaf0f5ab14fffce,[cloud-api] fix typo
spang,2017-02-07 00:41:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7bdbaa66b005be41179da856a5f7df81deed116,c7bdbaa66b005be41179da856a5f7df81deed116,":art: better name for nylas-k2-api

'k2 api' is ambiguous now that we embed K2 into N1.

We tag these logs using the rsyslog configuration and never use bunyan's
'name' field, so this only affects local development and won't break
anything in production."
emorikawa,2017-02-06 23:25:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd5d02f069b42fe9c5a3caef1b41e9d5d64fd719,dd5d02f069b42fe9c5a3caef1b41e9d5d64fd719,[cloud-api] fix development variable to use local billing for auth
khamidou,2017-02-06 23:00:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/6bab9bc271fd888aacac9fe9b1912157258e691a,6bab9bc271fd888aacac9fe9b1912157258e691a,[cloud-workers] Forgot more packages.
khamidou,2017-02-06 22:23:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d9591916c53f08038eed60eeda3bbb65963ce8d,6d9591916c53f08038eed60eeda3bbb65963ce8d,Add hapi to package.json
jstejada,2017-02-06 22:09:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/d83297247c741c732e1281846665d00fdb21d6a0,d83297247c741c732e1281846665d00fdb21d6a0,"[local-sync] Continously increment timeout for imap connection if we see timeout errors

Summary:
On each sync loop, we increment the socketTimeout based on how many times we've
seen socket timeouts in a row. The max socket timeout is 10m

Test Plan: manual

Reviewers: evan, spang, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3843"
khamidou,2017-02-06 21:17:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dc5eafc12fb7f04129f43f0bc8317b1ad62f3a3,3dc5eafc12fb7f04129f43f0bc8317b1ad62f3a3,"[cloud-api] Add support for database migrations

Summary:
This diff adds support for database migration to our cloud API. It's partially inspired by Halla's local-sync migration diff (D3809). You can run a migration by calling ""node-babel scripts/migrate-db up|down"" or by calling ""npm script upgrade-db|downgrade-db"".

Note that for simplicity reasons we assume that we're only writing migrations for our MySQL database – people developing locally may have to blow up there dbs whenever there's a schema change, though in practice `ALTER TABLE ADD COLUMN`statements work the same on both dbs.

Test Plan: Tested locally. Will run the metadata migration on staging.

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3840"
spang,2017-02-06 21:13:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/63e76cb3437f540a4599e402e2c35aeac7f37cc0,63e76cb3437f540a4599e402e2c35aeac7f37cc0,"[cloud-api] Force account selection during Google OAuth

Summary:
Previously, we would bounce directly to the Allow/Deny permissions grant screen
if only a single Google account was already logged in inside your browser. This
could be confusing in that if someone's friend used their computer and left
their Google account logged in, or if you were logged into an account other
than the one you wanted to connect to Nylas Mail, you could end up with a
different account connected than the one you clicked ""Gmail / G Suite""
intending to connect.

The only reason we bounce to the web is to allow users to skip entering their
password, and adding a couple more clicks for this case in order to be more
explicit will yield a better user experience.

Test Plan: manual

Reviewers: evan, juan, mike

Reviewed By: mike

Differential Revision: https://phab.nylas.com/D3842"
spang,2017-02-06 20:05:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/308601fab4da90515708d71495c41446b8518e36,308601fab4da90515708d71495c41446b8518e36,run-redis.sh must be run under bash
jstejada,2017-02-06 16:49:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b91131de6cc7413c9b48b2f3ac3cc6637c100ec2,b91131de6cc7413c9b48b2f3ac3cc6637c100ec2,"[thread-list] Convert list-tabular to JS, correctly use shouldCompUpdate

Summary:
This commit converts list-tabular to JS, and in the process re-adds shouldComponentUpdate which had been previously removed (D3837).

This time, shouldComponentUpdate will correctly check if actual data to render has changed, as opposed to checking if `itemPropsGenerator` had changed.

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3839"
khamidou,2017-02-03 21:34:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/082435585a9655525107ad898f90a45d0ccf75a6,082435585a9655525107ad898f90a45d0ccf75a6,"[cloud-workers] Add a monitoring endpoint and sentry integration

Summary:
This diff changes the following thing:
1. we now have a `/ping` endpoint which throws a 500 error if something is wrong. To check that everything is alright, we query the database, and check that we've gone through a sync loop iteration recently.
2. we now log all exceptions to sentry
3. all the `console.log` statements have been replaced by proper logging calls.

Test Plan: Tested manually. Will check everything's alright on staging.

Reviewers: halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D3836"
spang,2017-02-06 18:28:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6b1119ffc743a77ce283eb94e6f570166b40df8,d6b1119ffc743a77ce283eb94e6f570166b40df8,"[local-sync] Download message batches newest first

Summary:
In most cases (and especially so on Gmail and in the inbox on generic
IMAP), messages with higher UIDs are newer---and even if they aren't the
newest possible messages in other generic IMAP folders, they are the
most recent messages that have been moved to that folder.

Our previous batching strategy unfortunately resulted in us downloading
the lowest UID in each batch first, which was especially confusing when
connecting a new account and having the first message pop up on the
screen be a message from hours or days ago.

This patch changes the batching strategy in three ways:

1. Within a batch, we process downloaded messages from highest UID to
lowest UID.

2. We download batches in order of the ones containing the highest UIDs
first.

3. We group together more UIDs within a single batch by ignoring charset
and transfer-encoding on parts and grouping only by MIME part IDs (which
is the only thing you have to pass to the IMAP FETCH command---no idea
why we included this extraneous part data before, probably just
convenience.)

Example old grouping:

  batch key: '[{""id"":""2"",""transferEncoding"":""QUOTED-PRINTABLE"",""charset"":""UTF-8"",""mimeType"":""text/html""}]'
  batch UIDs: [356416,356418,356420,356423,356432,356433,356435,356436,356437,356442,356444]

  batch key: '[{""id"":""2"",""transferEncoding"":""QUOTED-PRINTABLE"",""charset"":""Windows-1252"",""mimeType"":""text/html""}]'
  batch UIDs: [353777]

In the new strategy, all of these messages will be downloaded with the
same FETCH command, reducing IMAP round trips before message processing
begins.

Fixes T7770

Test Plan: manual - connect a new account and see that most recent message downloads first

Reviewers: mark, evan, juan

Reviewed By: juan

Maniphest Tasks: T7770

Differential Revision: https://phab.nylas.com/D3838"
jstejada,2017-02-06 17:11:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b042f85c2972ebb6af0820b09f6147ff0f33e02,1b042f85c2972ebb6af0820b09f6147ff0f33e02,Fix local-sync logger
jstejada,2017-02-03 23:39:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/f14e363f314d0ff5c92de1e837ebea64ec5d7153,f14e363f314d0ff5c92de1e837ebea64ec5d7153,"Fix thread selection with `cmd` and `shift` keys in the thread list

Summary:
We recently added a `shouldComponentUpdate` method to ListTabular to
improve scrolling performance. However, this was preventing ListTabular
from updating the selected state of its items when we selected new
threads via cmd or shift keys.

This occurred because instead of passing data as props for each of ListTabular's
items, we are passing a function that calculates the props for each
item, so when we diffed old props and new props in shouldComponentUpdate,
given that the function reference never changes, we thought that the props
hadn't changed and prevented a re render, when in fact the props for each item
generated by that function might actually change.

Unfortunately, we can't use shouldComponentUpdate in this component
given how it is structured

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3837"
emorikawa,2017-02-04 03:27:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/03d69f5a059867016ea11dac3cd28aabd4864250,03d69f5a059867016ea11dac3cd28aabd4864250,fix(identity): properly post to identity endpoint
emorikawa,2017-02-04 03:27:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/7dbdd771b0764b1a6e1509a67876694501678889,7dbdd771b0764b1a6e1509a67876694501678889,[cloud-api] add local billing route for dev
jstejada,2017-02-03 23:52:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5730ab656b7b1f82f52db039bd8b849e125aef4,a5730ab656b7b1f82f52db039bd8b849e125aef4,bump k2
spang,2017-02-03 22:58:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/a400ce3ce9c19db1fc941fb9f3ebdd3892796630,a400ce3ce9c19db1fc941fb9f3ebdd3892796630,[cloud-api] More logging fixes
emorikawa,2017-02-03 23:33:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/f625825c4771b524984ed452b7b3b7fb95e733f4,f625825c4771b524984ed452b7b3b7fb95e733f4,bump(k2)
emorikawa,2017-02-03 21:14:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b306606c95424e5809eec0da04c888c78faf807,6b306606c95424e5809eec0da04c888c78faf807,[local-private] Use databaseReader in error reporter
emorikawa,2017-02-03 23:31:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/3111c166b8c949cf2a5ef60392d83a53e782ebed,3111c166b8c949cf2a5ef60392d83a53e782ebed,"feat(usage): Add a FeatureUsageStore and move Identity to the DB

Summary:
This is a WIP

Depends on D3799 on billing.nylas.com

This adds a `FeatureUsageStore` which determines whether a feature can be
used or not. It also allows us to record ""using"" a feature.

Feature Usage is ultimately backed by the Nylas Identity and cached
locally in the Identity object. Since feature usage is attached to the
Nylas Identity, we move the whole Identity object (except for the ID) to
the database.

This includes a migration (with tests!) to move the Nylas Identity from
the config into the Database. We still, however, need the Nylas ID to stay
in the config so it can be synchronously accessed by the /browser process
on bootup when determining what windows to show. It's also convenient to
know what the Nylas ID is by looking at the config. There's logic (with
tests!) to make sure these stay in sync. If you delete the Nylas ID from
the config, it'll be the same as logging you out.

The schema for the feature usage can be found in more detail on D3799. By
the time it reaches Nylas Mail, the Nylas ID object has a `feature_usage`
attribute that has each feature (keyed by the feature name) and
information about the plans attached to it. The schema Nylas Mail sees
looks like:

```
""feature_usage"": {
   ""snooze"": {
     quota: 10,
     peroid: 'monthly',
     used_in_period: 8,
     feature_limit_name: 'Snooze Group A',
   },
}
```

See D3799 for more info about how these are generated.

One final change that's in here is how Stores are loaded. Most of our
core stores are loaded at require time, but now things like the
IdentityStore need to do asynchronous things on activation. In reality
most of our stores do this and it's a miracle it hasn't caused more
problems! Now when stores activate we optionally look for an `activate`
method and `await` for it. This was necessary so downstream classes (like
the Onboarding Store), see a fully initialized IdentityStore by the time
it's time to use them

Test Plan: New tests!

Reviewers: khamidou, juan, halla

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3808"
hallamoore,2017-02-03 22:19:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/68f75a56347c53af1ad80dd62d972ee694d64d04,68f75a56347c53af1ad80dd62d972ee694d64d04,"[local-sync] Remove `isSending` bit

Summary:
`isSending` was an artifact from the cloud sync engine that was used to
double check that the sending process for a multi-send draft had been
initiated. I don't believe the intermediate steps are API calls anymore,
and we've had the relevant code commented out for awhile. Time to kill it!

I've revived the double-sending tests in N1 to ensure we still have sufficient
checks against sending the draft again while the first call is still sending.
See D3834

Test Plan: N1 unit tests

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3835"
hallamoore,2017-02-03 22:15:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a38305d7608abc34c971353daaf3139a6064d49,5a38305d7608abc34c971353daaf3139a6064d49,"fix(specs): Revive the ComposerView specs

Summary:
We need to wait for the `DraftEditingSession` to set it's draft before we can
pass it to the composer. I've modified these tests to properly wait for the
draft promise. Additionally, I removed the `DraftStore.isSendingDraft()` stub
so we run the actual logic for determing if a draft can be sent. We had some
tests with this stub, but then we had other tests that made sure it worked
without the stub, and I don't see why we don't just run the tests without the
stub to begin with. I added a stub to `@session.ensureCorrectAccount()`
to get around issues with committing the draft's change set.

Test Plan: Ran the suite!

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3834"
spang,2017-02-03 21:39:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/2237223b0b1a2624ea48d6a50d73a06e9acdc2af,2237223b0b1a2624ea48d6a50d73a06e9acdc2af,[cloud-api] Fix updating per-account logger after auth
spang,2017-02-03 20:36:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/b355a8a40f90b63d134240e89391920a2dbb1fe0,b355a8a40f90b63d134240e89391920a2dbb1fe0,"[cloud-api] Add googleapis dep back

This is breaking app launch when the app is deployed."
spang,2017-02-03 20:21:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d715e9bd34586e086462aa2c33838eb2f04b439,6d715e9bd34586e086462aa2c33838eb2f04b439,[cloud-core] Rename database-connector.js to database-connector.es6 for async keyword support
spang,2017-02-03 19:35:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/d837becb55cbcb497d481a3e7baf4aa1133a1bc5,d837becb55cbcb497d481a3e7baf4aa1133a1bc5,"[cloud-api] Improve logging

Summary:
This commit makes it so we log every request we serve with the path requested,
response code, and the time it takes to serve the request, using the same key
names as we use in the Python API for consistency. It also adds the public ID
of the billing identity to all logs for authorized accounts and turns down the
level of some debug logging that isn't useful in production.

Future diffs coming which consolidate error logging on the request log which
we've found super useful, and also improving local development logging (I'm
gonna fork bunyan-prettystream as it hardcodes which JSON elements it prints).

Test Plan:
need to test on staging - verified basic logging locally but hard
           to test authenticated requests locally (b/c billing)

Reviewers: evan, khamidou, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3832"
jstejada,2017-02-03 19:24:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/788a5500c10ed0c49288971eadbc2ed695e1c095,788a5500c10ed0c49288971eadbc2ed695e1c095,:art: rm bad comment
spang,2017-02-01 15:31:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0dfe588213c5dc21bae377cb59bb770162018001,0dfe588213c5dc21bae377cb59bb770162018001,"[local-api] :art: Remove unused message and file GET routes

Summary:
This code is dead and has confused me grepping around the codebase before.

If for some unexpected reason we need these routes back in the future, we
can always extract them from version control. For now the routes we aren't
using are a distraction.

Test Plan: been using Nylas Mail with this local patch all week

Reviewers: evan, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3833"
jstejada,2017-02-03 18:29:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1ab037cc9273a2ed9d863071c1b0a2790c4d46e,c1ab037cc9273a2ed9d863071c1b0a2790c4d46e,update(changelog)
flyingclimber,2017-02-03 18:20:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/00cfad928376273943649da563adcbb81248b24f,00cfad928376273943649da563adcbb81248b24f,Update CHANGELOG.md
emorikawa,2017-02-03 18:19:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/5dcf3610e642b4ecb1f5c6312e6a4edd7d341287,5dcf3610e642b4ecb1f5c6312e6a4edd7d341287,bump(appveyor): build stable branches
manicmarvin,2017-02-03 05:24:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c41ee90e416df739ac16ef7cc58c7f3fadba2f1,3c41ee90e416df739ac16ef7cc58c7f3fadba2f1,Update README.md (#3255)
jstejada,2017-02-03 01:48:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/00a5f57ef885a9d0a6edf076ad9c2c1393e02892,00a5f57ef885a9d0a6edf076ad9c2c1393e02892,Fix travis config
jstejada,2017-02-03 01:46:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/483aca9bbf9c7d1ce75a2028b610418807772818,483aca9bbf9c7d1ce75a2028b610418807772818,bump(changelog)
jstejada,2017-02-03 01:42:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d69c9a7e512c46c08a269f2589660aaca5f760f,9d69c9a7e512c46c08a269f2589660aaca5f760f,Update travis config
jstejada,2017-02-03 01:33:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/0146d52da0d05adc8186494e3e0638a8661d7913,0146d52da0d05adc8186494e3e0638a8661d7913,bump(version) 1.0.21
jstejada,2017-02-02 22:54:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/29e9eacd74b6efa00b715030bd34313752500898,29e9eacd74b6efa00b715030bd34313752500898,"fix(sync) Make sure we can correctly archive/delete/mark as spam

Summary:
Previously, when moving to trash or spam, we were not correctly removing
the inbox category. This produced slightly different results because the
generated task was slightly different.

Also, in ChangeMailTask we were removing the locks on the models before
the tasks had actually succeeded-- these locks allowed us to ignore
deltas on those models while the task was in progress, so removing them
before it completed caused threads to flicker when performing actions

This depends on D3829 which also properly addresses
archiving/deleting/moving to spam threads that contain sent messages

Addresses T7757 and #2706

Test Plan: unit

Reviewers: evan, halla, spang

Reviewed By: evan, halla, spang

Differential Revision: https://phab.nylas.com/D3830"
emorikawa,2017-02-03 00:24:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/29eeda15be6abfce3b37f06c3e2158846689a31f,29eeda15be6abfce3b37f06c3e2158846689a31f,"bump(package): upgrade Raven

fix(log): use new raven"
emorikawa,2017-02-03 00:23:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/d85ca0a9387a1f2ca059e60fd3bf59b7d381cb85,d85ca0a9387a1f2ca059e60fd3bf59b7d381cb85,[local-private] update to use hosted Sentry
jstejada,2017-02-02 22:46:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c556fe0b2096adf7bdb110ae0e7238c87657195,6c556fe0b2096adf7bdb110ae0e7238c87657195,"[local-sync] Properly set the sent label for Gmail accounts

Summary:
We can't try to set or remove the sent label on gmail accounts because
the operation will silently fail and cause the threads to later bounce
back.

This occurred when trying to delete or archive a thread that contained a
sent message, and we incorrectly tried to overwrite or remove all of the
labels on messages, without regard for sent.

This was causing https://github.com/nylas/nylas-mail/issues/2706 and
sending and archiving to immediately bounce back.

Addresses T7757

Test Plan: unit tests

Reviewers: halla, evan, spang

Reviewed By: halla, evan, spang

Differential Revision: https://phab.nylas.com/D3829"
jstejada,2017-02-03 01:17:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8cd33fdb1f066be871780241eda7bb9cb57a25a,b8cd33fdb1f066be871780241eda7bb9cb57a25a,"[local-sync] Correctly retry syncback tasks

Summary:
Previously, we attempted to immeditely retry syncback tasks when a
RetryableError was encountered. However, if the error was an
IMAPConnection error, we would keep retrying with a broken connection,
which would keep failing.

The correct way to retry is to wait for the next sync loop, since at the
beginning of each loop we ensure that we are correctly connected to
imap.

To achieve this this commit simply marks a failed task as NEW if it
encoutners a RetryableError and we haven't retried too many times. To
keep track of the number of retries, we save a new field in the `props`
field of the request.

Test Plan: manual

Reviewers: evan, halla, mark, spang

Reviewed By: spang

Subscribers: khamidou

Differential Revision: https://phab.nylas.com/D3831"
khamidou,2017-02-02 20:17:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e6301f94dc8225a1294eb5a64764636269967c9,0e6301f94dc8225a1294eb5a64764636269967c9,"[N1] Changes required for implementing snooze

Summary: This is a pretty small diff – it changes the snooze-store to save metadata for the individual messages affected instead of for the whole thread. We need this to have snoozing work without running an actual sync of the whole mailbox.

Test Plan: WIP.

Reviewers: evan, halla

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3815"
khamidou,2017-02-03 00:02:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb7836f280a535361adfd7b2867eab678d2112f3,fb7836f280a535361adfd7b2867eab678d2112f3,"[cloud-api] Base infrastructure for running cloud workers

Summary:
I've decided to break my snooze patches in multiple parts to make it easier to review. This diff contains all the code related to running workers in the cloud. Cloud workers all inherit from the `Worker` class which defines a bunch of useful things like error handling.

What's left to do:
- spawn workers based on the plugin type
- add monitoring (I'm going to add a simple HTTP endpoint for that)
- writing a migration for the local sync db and the prod metadata db.

Test Plan: Tested manually.

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3814"
emorikawa,2017-02-01 21:36:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/f195118049cc3bd1cd1a4e8dcda4d38473adf6f1,f195118049cc3bd1cd1a4e8dcda4d38473adf6f1,feat(db): extract db setup and don't send sync errors to config
emorikawa,2017-02-02 23:41:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/71046c837f76692f71c442fba3f5d917c743f5bd,71046c837f76692f71c442fba3f5d917c743f5bd,bump(k2)
jstejada,2017-02-02 22:52:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/13b2488d64ed034a29aadb550b83fe4719d6c4ff,13b2488d64ed034a29aadb550b83fe4719d6c4ff,"feat(specs) Clean up local-sync database after each spec

Summary: Clean up k2's test database after each spec. Depends on D3826

Test Plan: unit

Reviewers: evan, halla, spang

Reviewed By: halla, spang

Differential Revision: https://phab.nylas.com/D3827"
jstejada,2017-02-02 22:00:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/141a03effa294ca3b15f3f489072d57ec952445b,141a03effa294ca3b15f3f489072d57ec952445b,"[local-sync] Small restructuring of local-sync specs

Summary: Make them map the same directory structure of `src`

Test Plan: unit

Reviewers: evan, halla, spang

Reviewed By: halla, spang

Differential Revision: https://phab.nylas.com/D3826"
flyingclimber,2017-02-02 22:28:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/189745dde46ede2246f92ede419552391bdb0a20,189745dde46ede2246f92ede419552391bdb0a20,Update README.md
emorikawa,2017-02-02 02:04:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c7d559cd5874238aae7bb79a905a97c946b1aff,9c7d559cd5874238aae7bb79a905a97c946b1aff,"Revert ""feat(config): move config to database""

This reverts commit a60816c9037293e7c32c29b15701336d7ec87d24."
hallamoore,2017-02-01 22:05:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f2cd925d050beec38eb7057d1b5c3a6b7e13b19,2f2cd925d050beec38eb7057d1b5c3a6b7e13b19,"fix(SyncActivity): Add keys to ellipsis components

Summary: Just a quick fix to remove the warning in the console

Test Plan: manual

Reviewers: mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3823"
emorikawa,2017-02-01 21:36:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/a60816c9037293e7c32c29b15701336d7ec87d24,a60816c9037293e7c32c29b15701336d7ec87d24,"feat(config): move config to database

Summary: Move config to the database

Test Plan:
Launch app before commit.
Launch on commit.
Confirm all settings and accounts stay the same.
Console.logged progress

Reviewers: mark, halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3820"
spang,2017-02-01 15:16:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee3a655ebe0c4bd2793793b46716efcba6311cab,ee3a655ebe0c4bd2793793b46716efcba6311cab,"fix(sync-status): Use sync progress from K2

Summary:
Sister diff to D3817

syncState on folders may contain arbitrarily long arrays of UIDs
(particularly, failedUIDs). If we serialize this JSON column to
edgehill.db, we can end up serializing very large objects when
persisting the local task queue. When the queue contains many tasks,
this can balloon the JSON blob to megabytes, causing the main window and
the worker window to become unresponsive.

The UI doesn't need to know about IMAP bookkeeping internals, so
serialize the sync progress instead of the sync state. This has the
advantages that (1) we don't need to worry about future keys added
to the syncState being large and (2) when we add Exchange support
we already have an abstraction for sync progress.

Test Plan: manual

Reviewers: juan, mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3819"
spang,2017-02-01 00:13:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b659382d61f2774040be1e310f380bd7e0bea78,5b659382d61f2774040be1e310f380bd7e0bea78,"[local-sync] Serialize category sync progress to edgehill rather than syncState

Summary:
syncState on folders may contain arbitrarily long arrays of UIDs
(particularly, failedUIDs). If we serialize this JSON column to
edgehill.db, we can end up serializing very large objects when
persisting the local task queue. When the queue contains many tasks,
this can balloon the JSON blob to megabytes, causing the main window and
the worker window to become unresponsive.

The UI doesn't need to know about IMAP bookkeeping internals, so
serialize the sync progress instead of the sync state. This has the
advantages that (1) we don't need to worry about future keys added
to the syncState being large and (2) when we add Exchange support
we already have an abstraction for sync progress.

Test Plan: manual

Reviewers: juan, mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3817"
emorikawa,2017-02-01 14:58:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/271dcb044d38fd42e338104f99b55b1bfea6de0b,271dcb044d38fd42e338104f99b55b1bfea6de0b,bump(version): 1.0.20
emorikawa,2017-02-01 14:57:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/2531f16067dba21e7821c3000651b57f58a3fe64,2531f16067dba21e7821c3000651b57f58a3fe64,bump(k2)
emorikawa,2017-02-01 14:57:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/c993ec3b8749e73d4eb1ab8f457debfa21a05858,c993ec3b8749e73d4eb1ab8f457debfa21a05858,[local-sync] properly cleanup broken messages
emorikawa,2017-02-01 14:24:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/6dad8e7ec80e70bfb54fbe34baacea404e22dc0d,6dad8e7ec80e70bfb54fbe34baacea404e22dc0d,bump(k2)
emorikawa,2017-02-01 14:24:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c73d83b78faa2b2726c992965011cfca9a79254,1c73d83b78faa2b2726c992965011cfca9a79254,[local-sync] fix cleanup of sent messages
emorikawa,2017-02-01 02:04:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8c1f35365c25f64fcf68509db658c015eec174d,e8c1f35365c25f64fcf68509db658c015eec174d,bump(changelog)
emorikawa,2017-02-01 02:01:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2e11bcefc60947e70c56be8f0f41bcec9a5c99e,f2e11bcefc60947e70c56be8f0f41bcec9a5c99e,bump(version): 1.0.19
emorikawa,2017-02-01 02:00:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d594d26a0482605e28f2e607a74772d2d79af26,7d594d26a0482605e28f2e607a74772d2d79af26,bump(k2)
emorikawa,2017-02-01 02:00:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/f83d0aeec7d12753cb3915f9e48a8605b1f06b02,f83d0aeec7d12753cb3915f9e48a8605b1f06b02,[local-sync] fixed issue where single digit date would create dupes
emorikawa,2017-02-01 00:35:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/e09ada7f43244f98fbe603b9ca3ba591c9cda8a7,e09ada7f43244f98fbe603b9ca3ba591c9cda8a7,bump(k2)
jstejada,2017-01-31 23:59:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/735fb468f8b86ad245c7026bfa58bb8b6ba22fed,735fb468f8b86ad245c7026bfa58bb8b6ba22fed,[local-sync] Save error when clearing tasks INPROGRESS
jstejada,2017-01-31 20:45:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/f44ff52f118b115c2854c7849cad3230df971594,f44ff52f118b115c2854c7849cad3230df971594,Properly handle non-api errors in account delta conn
jstejada,2017-01-31 20:07:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d43680b59adb3d0ad1449d12fc9764d35b9ac0c,6d43680b59adb3d0ad1449d12fc9764d35b9ac0c,"[local-sync] Imrpove error handling in delta connections

Summary:
We were mostly ignoring errors in our delta streaming connections. This
commit makes it so that if we get an authentication error from n1Cloud we mark the
account as invalid so users know to re authenticate, and can properly receive metadata deltas

If the error is not an authentication error, it automatically retries
the delta connection.

Addresses T7744

Test Plan: manual

Reviewers: evan, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3813"
emorikawa,2017-01-31 18:57:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/64dd427acafb9f8cc1f0669d1bbcb175d1305a0d,64dd427acafb9f8cc1f0669d1bbcb175d1305a0d,Add redis back into pm2
jstejada,2017-01-31 18:29:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/a88923f001677c16ca6b02d1bb5307f28e8d152e,a88923f001677c16ca6b02d1bb5307f28e8d152e,"[local-sync] Retry syncback tasks that throw retryable errors

Summary:
This will prevent us from showing error messages to the user when we
can automatically recover from the error

Test Plan: manual-- throw error from syncback task, check expected results

Reviewers: evan, mark, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3812"
jstejada,2017-01-31 07:36:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee50a1cbdff50db77eb62eef5db0df904dd9cd95,ee50a1cbdff50db77eb62eef5db0df904dd9cd95,"[local-sync] Account for additional IMAP retryable errors

Summary:
There are 2 types of IMAP errors that need to be treated as retryable. See code
comments as to why.

Test Plan: manual

Reviewers: khamidou, evan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3811"
jstejada,2017-01-31 06:28:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/eacb5eeb0f41a1494e5a7ba3406f70a8709fdaba,eacb5eeb0f41a1494e5a7ba3406f70a8709fdaba,:art: remove outdated comments
jstejada,2017-01-31 06:00:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/6114e7b05d253a7c62525ff5cef9516b5553f825,6114e7b05d253a7c62525ff5cef9516b5553f825,bump(k2)
jstejada,2017-01-31 05:58:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/439ba5737fa9a991caf8aa6be802d908b20f8cae,439ba5737fa9a991caf8aa6be802d908b20f8cae,[local-sync] Report permanent sync errors to sentry
hallamoore,2017-01-31 00:14:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/2170926dc7faea8d524c3139a11c3d33625cb418,2170926dc7faea8d524c3139a11c3d33625cb418,update(docs): Add note about Linux dependencies
emorikawa,2017-01-30 23:55:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/f10e388338b39a4d83893a42e5f4af8285f637d4,f10e388338b39a4d83893a42e5f4af8285f637d4,bump(electron): bump electron to 1.4.15
emorikawa,2017-01-30 23:40:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b3c4a2c5b2343854243c44adaa25df3d3c7b414,7b3c4a2c5b2343854243c44adaa25df3d3c7b414,"fix(ci): add linux dependencies for keyboard-layout plugin build

https://github.com/atom/keyboard-layout/issues/27"
emorikawa,2017-01-30 23:23:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/c97e016c72c444361e109d1966af5ab7c6eeca27,c97e016c72c444361e109d1966af5ab7c6eeca27,bump(version): 1.0.18
emorikawa,2017-01-30 23:23:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/854a44737eb4c6d8f45c8e50e1ba2c9c022409bf,854a44737eb4c6d8f45c8e50e1ba2c9c022409bf,bump(changelog): 1.0.18
grinich,2017-01-30 20:02:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc8c1c85fa6a851950680b7ced23870b9094fcf2,dc8c1c85fa6a851950680b7ced23870b9094fcf2,"Update docs config

- Don't ignore built class docs
- pin requirement versions for docs
- update docs build instructions
- update repo URL"
emorikawa,2017-01-30 19:50:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/28bffac41a9129702110b85f713c2984072ac2ae,28bffac41a9129702110b85f713c2984072ac2ae,fix(rename): update nylas/N1 to nylas/nylas-mail Github references
emorikawa,2017-01-30 19:50:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/78edc7078c8f379bb470bf6001e6e2003bf7952b,78edc7078c8f379bb470bf6001e6e2003bf7952b,[*] update nylas/N1 to nylas/nylas-mail GitHub link
emorikawa,2017-01-30 19:39:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6cc740a71640ad5d3f89e5dfd6990eaeabcecdf,e6cc740a71640ad5d3f89e5dfd6990eaeabcecdf,fix(rename): remove n1-next references & update changelog link
jstejada,2017-01-30 19:39:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/c56b9dec12897d9316ba040b8eab45eed7262b5e,c56b9dec12897d9316ba040b8eab45eed7262b5e,bump(k2)
grinich,2017-01-30 11:18:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/176cfcd59dccbac89a39d6250e561c33cae16be2,176cfcd59dccbac89a39d6250e561c33cae16be2,Update README.md
grinich,2017-01-30 10:49:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/90b89a26fdac6e173f0c1266ec9c32d21c95ca77,90b89a26fdac6e173f0c1266ec9c32d21c95ca77,Add built docs
ForbesLindesay,2017-01-21 23:52:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/02f83e97aff010999f752f50006e22d80b7579c0,02f83e97aff010999f752f50006e22d80b7579c0,Add the GitHub community plugin (#3197)
rclai,2017-01-21 23:52:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab28a66d6aef721e38058b0554894daf81b17222,ab28a66d6aef721e38058b0554894daf81b17222,Fix typo (#3173)
paulxuca,2017-01-21 23:51:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/610751ba7c3d0e44ce03ba94bdaa3a24c02559d9,610751ba7c3d0e44ce03ba94bdaa3a24c02559d9,"Normalized size of buttons in preferences (fixes #2753) (#3112)

Normalized size of buttons across signature, accounts and mail rules preferences. Also make signature pane same size as other preference panels"
oksas,2017-01-06 23:02:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/819e10ed775327e45adae97c8853ed7c84ec7f41,819e10ed775327e45adae97c8853ed7c84ec7f41,"Fix link to Flux diagram in Architecture.md (#3147)

It looks like the location of the Flux architecture diagrams got moved around on the Flux docs; this change updates the link here to the new location of the diagram."
grinich,2017-01-30 10:45:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/4984ba58d47400bc998acf73e8519f1b9514c7de,4984ba58d47400bc998acf73e8519f1b9514c7de,Merge branch 'master' into n1-next
grinich,2017-01-27 19:42:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ef4a6fd9869f7220ec9ae48fef224b5f7245f48,6ef4a6fd9869f7220ec9ae48fef224b5f7245f48,Update documentation with GitBook
jstejada,2017-01-28 10:23:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/da1a358cc34ad20fc7425382be773994c856dc55,da1a358cc34ad20fc7425382be773994c856dc55,"[cloud-*] Move babel devDependencies to dependencies in pkg.json

Our Dockerfile only install production dependencies `--production`, so
lerna and babel dependencies need to be listed under `dependencies`"
jstejada,2017-01-28 09:58:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/73d8cc50ff9dd66f8bffb307d2eb7c33ff5b636e,73d8cc50ff9dd66f8bffb307d2eb7c33ff5b636e,"[cloud-*] Fix n1-cloud build

We added new presets and plugins to the k2 .babelrc but didn't add the
respective dependencies in our package.json, so the build was failing.

Add the required dependencies, and make sure that `build-n1-cloud.js`
uses the correct babel presets and plugins"
jstejada,2017-01-28 09:40:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/87d1683c00b230c12b6907374453a2dce8607a2f,87d1683c00b230c12b6907374453a2dce8607a2f,bump(k2)
emorikawa,2017-01-27 23:15:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e0d953f6105405c8d8534362701100071cdb82a,1e0d953f6105405c8d8534362701100071cdb82a,[cloud-api] properly log and report authentication errors
emorikawa,2017-01-27 22:49:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0ce77b60ccbfa4b6208a6a8cb7651cd6aaaa9b1,c0ce77b60ccbfa4b6208a6a8cb7651cd6aaaa9b1,bump(k2)
emorikawa,2017-01-27 22:49:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/05ba9e2e879a73588624cb1a1e5b223fe06c3f24,05ba9e2e879a73588624cb1a1e5b223fe06c3f24,[cloud-workers] remove babel
emorikawa,2017-01-27 22:46:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/c90c62a3192a3a20560ec6ccb5e93cec1ce091a9,c90c62a3192a3a20560ec6ccb5e93cec1ce091a9,bump(k2)
jstejada,2017-01-27 22:22:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/34a880e797fef3b47f2c88c6c833377e0441c595,34a880e797fef3b47f2c88c6c833377e0441c595,[cloud-*] Fix request.logger
jstejada,2017-01-27 22:02:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/c87a66ad613b3638f1645736b9e2296fc34af6e3,c87a66ad613b3638f1645736b9e2296fc34af6e3,"fix(tasks) ChangeMailTask should depend on EnsureMessagesInSentFolder

Summary:
See title
Add specs

Test Plan: unit

Reviewers: halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D3805"
jstejada,2017-01-27 21:50:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/76664cb67df7d17d9ddeb79f899195b4bf808976,76664cb67df7d17d9ddeb79f899195b4bf808976,"[local-sync] Fix compilation of FetchNewMessagesInFolder operation

Summary: This was broken because babel could not compile the `super` keyword

Test Plan: manual

Reviewers: evan, mark, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3804"
emorikawa,2017-01-27 21:34:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3b9c75219b9541ede42e5028baceda784f40a06,c3b9c75219b9541ede42e5028baceda784f40a06,Use babel-cli in devDependencies instead
emorikawa,2017-01-27 21:31:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/77da6d07da4a8bdf157155c2cbd07db966fd4f71,77da6d07da4a8bdf157155c2cbd07db966fd4f71,Make K2 babelrc match Nylas Mail babelrc
emorikawa,2017-01-27 21:26:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed2adb463d751ab912145456b7066074e6897191,ed2adb463d751ab912145456b7066074e6897191,Add babel-node as a dev dependency
jstejada,2017-01-27 20:54:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/0aa3668899f158a1e8982f188b659b9d357f71a8,0aa3668899f158a1e8982f188b659b9d357f71a8,bump(changelog)
jstejada,2017-01-27 20:51:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc0593875e541c8571a041577f5a4467ddd8e135,fc0593875e541c8571a041577f5a4467ddd8e135,bump(version) 1.0.17
jstejada,2017-01-27 20:50:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/dfe4b0f809818d7a54d3c8c528c5f2838e187478,dfe4b0f809818d7a54d3c8c528c5f2838e187478,bump(k2)
jstejada,2017-01-27 20:43:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3a962c55814823336f3b744d0fc7d2e34b9bea3,a3a962c55814823336f3b744d0fc7d2e34b9bea3,"[local-sync] Sync new uid in sent folder when moving to msg to sent

Summary:
EnsureMessageInSentFolder also needs to sync the sent folder to fetch
the uid of the newly moved message (like `MoveThreadToFolder` does)

Test Plan: manual

Reviewers: halla, mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3803"
jstejada,2017-01-27 20:15:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/1eb75adf5557801d5c52e88d1a7d5bac73538419,1eb75adf5557801d5c52e88d1a7d5bac73538419,"[local-sync] When fetching /new/ messages, make sure we have fetchedmax

Summary:
In `FetchNewMessagesInFolder`, sometimes we haven't synced anything in the folder
we are trying to fetch new messages in. Previously this would just throw
an error, now we properly check if we have a fetchedmax, and if not just
run a normal fetch.

Also, when the target folder box was already open, we were not fetching the /latest/ box status to check the latest uidnext value, so we would skip fetching new messages when in fact there were new messages to fetch

(This can happen for example when moving a sent message to the Sent
folder before we've started syncing the Sent folder)

Test Plan: manual

Reviewers: halla, mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3802"
emorikawa,2017-01-27 20:27:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff9d089e860b0674c9b1fa961eaa9eb0ef97c442,ff9d089e860b0674c9b1fa961eaa9eb0ef97c442,[cloud-core] fix scope of STORAGE_DIR for local K2 running
jstejada,2017-01-27 19:47:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/c74d0feab397489b4b5367834b8aeeded85445fc,c74d0feab397489b4b5367834b8aeeded85445fc,"[cloud-*] Add more detailed logs to auth endpoints

Summary: see title

Test Plan: manual, deploy to staging, check that it works

Reviewers: evan, spang, tomasz, khamidou

Reviewed By: tomasz

Differential Revision: https://phab.nylas.com/D3800"
emorikawa,2017-01-27 19:19:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b35d3276c8a625ff6f2465443a5c7afc3e8d6d5,4b35d3276c8a625ff6f2465443a5c7afc3e8d6d5,bump(k2)
jstejada,2017-01-27 18:36:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/7114eac49f897f889ef21a70f541588b272cf388,7114eac49f897f889ef21a70f541588b272cf388,[cloud-*] Add more logging
jstejada,2017-01-27 17:09:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/96115c3a7ef0c601b0dce334f1857fdd526e2b79,96115c3a7ef0c601b0dce334f1857fdd526e2b79,bump(changelog)
jstejada,2017-01-27 16:29:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/50485496c1d9e36656c627d57bb5afbb868a6d21,50485496c1d9e36656c627d57bb5afbb868a6d21,bump(k2)
jstejada,2017-01-27 16:28:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/33000b88305c18dcd2d50ee1bf56f89db0a68317,33000b88305c18dcd2d50ee1bf56f89db0a68317,"[local-sync] Ensure messages always have a uid after syncback tasks

Summary:
Syncback tasks that move messages to a different folder used to leave
those messages without a uid because it was unknown at the moment, and
it would only be discovered later on in the sync loop.
This had the unwanted effect of not allowing you to perform more than 1
syncback action on the same thread back to back (e.g. undoing an archive, or
sending and archiving immediately)

This commit makes it so that `SetThreadFolderAndLabels` and
`MoveThreadToFolder` runs a new sync task to fetch the new uids for the
moved messages.

We do this via a new sync task, `FetchNewMessagesInFolder` which /only/
fetches new messages in a folder (no fetching old messages or attribute
updates). This is a first step to cleaning up the gigantic
`FetchMessagesInFolder` task into smaller parts-- but that will come in
a separate diff. For now we want to fix the immediate problem.

See D3788 and D3789 for more details

Test Plan:
manually move threads around, undo moving threads, reply on a thread
and immediately archive

Reviewers: khamidou, mark, spang, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3798"
emorikawa,2017-01-27 15:11:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/36f9dd9ad28a7b7a46af78409268ba334a049773,36f9dd9ad28a7b7a46af78409268ba334a049773,bump(version): 1.0.16
emorikawa,2017-01-27 15:11:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/83a28ae5abbef0a016f941343ce0ed1d6529d2b7,83a28ae5abbef0a016f941343ce0ed1d6529d2b7,bump(changelog): 1.0.16
jstejada,2017-01-27 08:16:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0963e116a732738ba4a4f74e77b564357b1bf681,0963e116a732738ba4a4f74e77b564357b1bf681,[cloud-*] Prevent runtime errors while logging in auth routes
jstejada,2017-01-27 08:08:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d870f54af6e0d6211ed4bae31ee3d859f94697e,5d870f54af6e0d6211ed4bae31ee3d859f94697e,[cloud-*] Add more logging to auth endpoints
jstejada,2017-01-27 00:06:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/c371fa4ff6e1b852ae1f6b7dc819f47cc847ac60,c371fa4ff6e1b852ae1f6b7dc819f47cc847ac60,"[local-sync] Correctly check presence of messages when updating thread

Summary:
updateMessagesFromThread requires `messages` to be an array only when
recompute is falsy

Test Plan: manual

Reviewers: halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3797"
jstejada,2017-01-27 00:03:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/90481e877c4a09fdad4e20fc032448a225701580,90481e877c4a09fdad4e20fc032448a225701580,"[local-sync] Correctly check uidvalitity when syncing and save when updated

Summary:
If there were any uidvalidity changes after we've completely synced a folder, we
would completely ignore them and not attempt to sync the folder.

Also, we weren't saving the latest uidvalidity from the box to the folder
syncState as soon as we recovered, we only saved it until after fetching
messages. This meant that if the operation was interrupted before updating
syncState.uidvalidity, we would always think that we were in a state of uid invalidity

Recovering from uidvalidity was also broken because we weren't resetting the
fetched ranges, and unnecessarily setting the folderId to null, which meant that
we would never restore the uids of messages we had already fetched.

Test Plan: manual

Reviewers: evan, khamidou, mark, halla

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3796"
jstejada,2017-01-26 23:06:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/6aa7e3ffab0bdaecc233909ab0ab39e964a83e36,6aa7e3ffab0bdaecc233909ab0ab39e964a83e36,"[local-sync] Correctly close imap connections when downloading files

Summary: Addresses T7708

Test Plan: manual

Reviewers: evan, khamidou, mark, halla

Reviewed By: khamidou, mark, halla

Subscribers: halla

Differential Revision: https://phab.nylas.com/D3795"
jstejada,2017-01-26 21:38:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3e0aa2c2024018dc1dc63e21abe667b9bfc6dd9,b3e0aa2c2024018dc1dc63e21abe667b9bfc6dd9,bump(k2)
jstejada,2017-01-26 19:50:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ce412288de568802cc089ea7db9bbdde41253c1,7ce412288de568802cc089ea7db9bbdde41253c1,"[local-sync] Make invalid imap box errors retryable

Summary:
If we attempt to operate on a box that is no longer open, we should make
the error retryable so that we re-open the correct box and continue
syncing instead of showing the scary red box to users

Addresses T7680

Test Plan: manual

Reviewers: evan, spang, halla, mark

Reviewed By: halla, mark

Subscribers: mark

Differential Revision: https://phab.nylas.com/D3792"
jstejada,2017-01-26 18:46:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/048c240229aeac9f78689d4137ba71fbd82dcae9,048c240229aeac9f78689d4137ba71fbd82dcae9,"[local-sync] Ensure syncback actions have uids available before running

Summary:
Given that we perform syncback actions optimistically, i.e. we save the changes to the database before they are synced, some messages might not have an IMAP UID if they haven't been synced in the loop.

When we encounter messages without uid, we could just skip them, but this would mean that we end up moving only a subset of the messages we intended to move, or not move any at all, while thinking that we /did/ move everything, which might cause the thread to bounceback later on when we sync the messages that were missing.

The permanent fix is for syncback actions to not succeed until their changes have been synced, which is coming up in a separate diff

Test Plan: manual

Reviewers: evan, spang, khamidou, mark

Reviewed By: mark

Subscribers: mark

Differential Revision: https://phab.nylas.com/D3789"
jstejada,2017-01-26 21:21:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/86e4bbd0f9d09e8f5e6734cdc8f4dfad0dfdb96b,86e4bbd0f9d09e8f5e6734cdc8f4dfad0dfdb96b,"fix(tasks) Notify when actions on threads fail

Summary: It is better to notify that a task failed rather than having a thread or group of threads randomly bounce back.

Test Plan: manual

Reviewers: evan, spang, mark, halla

Reviewed By: mark, halla

Subscribers: mark

Differential Revision: https://phab.nylas.com/D3790"
jstejada,2017-01-26 17:19:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe940941a5c1eee34d336b00e46284be0995d514,fe940941a5c1eee34d336b00e46284be0995d514,bump(k2)
jstejada,2017-01-26 17:19:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/009673dc5e32bfb20e63759cb27d57e8312647f3,009673dc5e32bfb20e63759cb27d57e8312647f3,[local-sync] Fix transaction syntax
jstejada,2017-01-26 17:11:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/62ec7504f4a0a33f912826c2ba65d062dace8bb7,62ec7504f4a0a33f912826c2ba65d062dace8bb7,bump(k2)
jstejada,2017-01-26 08:06:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/aedc1bb3e5ff60a1b446484a00bcbf4505ef9d45,aedc1bb3e5ff60a1b446484a00bcbf4505ef9d45,Add comment
jstejada,2017-01-26 07:57:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/9fd9b5c7ff22e6d9c3e93381264b2175b1384b6e,9fd9b5c7ff22e6d9c3e93381264b2175b1384b6e,[local-sync] Make sure folder move syncback actions clear folderImapUID
jstejada,2017-01-26 06:41:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbc54ab26d98708cfe7f3f8192a14a99496fe417,bbc54ab26d98708cfe7f3f8192a14a99496fe417,"fix(plugins) Unbreak plugins support in Nylas Mail

Properly use plugins specified in babelrc.json when using the babel
compiler. #3187"
khamidou,2017-01-26 00:57:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d0cf5c8f1c03ad4191269122421e48d686908df,5d0cf5c8f1c03ad4191269122421e48d686908df,Snooze and send-later worker is running on a single worker right now.
jstejada,2017-01-26 00:47:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/26c935fe750d48c103377eb66d4ed0aa63dfe315,26c935fe750d48c103377eb66d4ed0aa63dfe315,bump(version) 1.0.15
jstejada,2017-01-26 00:37:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f101ea03b93d27f649473e5122defc372ddf3ce,0f101ea03b93d27f649473e5122defc372ddf3ce,bump(k2)
spang,2017-01-26 00:21:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc0e0f753412f9da4044fd7608f19c2ca0096776,dc0e0f753412f9da4044fd7608f19c2ca0096776,"[local-sync] Avoid skipping All Mail updates if no new messages during Gmail inbox sync

Summary:
In JavaScript, null <= null is truthy. So if you set fetchedmax but not
fetchedmin and minUID, and then highestmodseq doesn't increment, we will
incorrectly skip updates on All Mail after the first batch of Gmail
inbox UID downloads, only making further progress on sync if the user
receives a new mail.

This patch tightens isSyncComplete() to require that all variables used
in the math comparisons are set.

Test Plan: manual :cry:

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3787"
khamidou,2017-01-26 00:26:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/36a3cac13173512a44e9053f20cc49fb77b5be7f,36a3cac13173512a44e9053f20cc49fb77b5be7f,"Changes to get the cloud workers to run in our staging environment

Summary:
Summary of the changes:
- renamed some files to es6 to be able to use babel
- only try to create a db folder when we're using sqlite
- drop use of redis
- create a skeleton folder for workers.

Test Plan: Works on staging.

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3784"
jstejada,2017-01-25 23:06:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/23903178a4c41a8a351b239f05bcc3e1be7dd3ed,23903178a4c41a8a351b239f05bcc3e1be7dd3ed,"fix(onboarding) Allow users who only have custom imap to auth

Summary:
Users who only had a custom imap account could not open the window to
add a custom imap account the first time the auth was opened, rendering
the app useless for them.

Github issue #3185 and T7691

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3783"
emorikawa,2017-01-25 22:43:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/4cefe70e29df8acd9cd484dbf149bb5328b640f1,4cefe70e29df8acd9cd484dbf149bb5328b640f1,"fix(specs): change spec scheduler back to setTimeout

Summary:
Adds a new `npm run test-window` that will launch specs in a window so you
can use the debugger

The spec window wouldn't close because `onbeforeunload` was unnecessarily
preventing close. This circumvents this in spec mode.

Most significantly I discovered we can't use the synchronous timer for the
promise scheduler anymore. Suppose you do:

```
it('should error', async () => {
  try {
    await doSomething()
    throw new Error(""doSomething should have thrown!"")
  } catch (err) {
    expect(err.message).toMatch(/my message/)
  }
})
```

The way async/await is transpiled, when `doSomething` throws, the error
will propagate all the way back up to the uncaughtPromiseException handler
before the `catch` gets called and registered. The transpilation method
assumes that when the function gets executed it can synchrously advance
beyond the call before the `then` or `catch` resolve. When the promise
scheduler is synchronous this doesn't happen.

I chose to use `setTimeout` instead of `process.nextTick` or
`setImmediate` as the promise scheduler. `setTimeout` seems to work better
with Chrome's async function call stacks. `nextTick` and `setImmediate`,
being Node methods, skip Chrome's async watchers.

Test Plan:
I talked with Juan about these changes, in an upcoming diff he will be
testing these in the context of our broader test suite.

Reviewers: mark, khamidou, halla, spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3779"
emorikawa,2017-01-25 22:11:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f51d80a745eff1ab494ebc5d8675634792c714c,1f51d80a745eff1ab494ebc5d8675634792c714c,bump(k2)
jstejada,2017-01-25 21:53:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/95e840cf827ae8e7a936c42295bbb5cafd63d1e0,95e840cf827ae8e7a936c42295bbb5cafd63d1e0,bump(k2)
jstejada,2017-01-25 21:50:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f63d5b60d230727e08b3ce02ca63ef4efcdd7419,f63d5b60d230727e08b3ce02ca63ef4efcdd7419,"[local-sync] Fix isDraft check (check array exists)

Summary: see title

Test Plan: manual

Reviewers: spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3781"
jstejada,2017-01-25 20:28:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1c0e248d1f07c3369bec8d48105213e452b123c,e1c0e248d1f07c3369bec8d48105213e452b123c,bump(version) 1.0.14
emorikawa,2017-01-25 20:28:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/a621392c34b8a8f49a6eb1b0c6dc91077b8498a8,a621392c34b8a8f49a6eb1b0c6dc91077b8498a8,bump(k2)
emorikawa,2017-01-25 20:26:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/57cf9178b269021d390f127eb0b0f5745cc2d781,57cf9178b269021d390f127eb0b0f5745cc2d781,"bump(spellcheck) upgrade to 1.0.0

Summary: This bumps the spellcheck and restores the specs

Test Plan:
Manually open a composer, type some text and ensure it underlines them as
misspelled. Also restore test coverage

Reviewers: mark, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3776"
jstejada,2017-01-25 20:17:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/f6029c99362bf19e138ad41caad9b0cb347c5210,f6029c99362bf19e138ad41caad9b0cb347c5210,"[local-sync] Fix attribute updates

Summary:
Previously, when updating message attributes during folder sync, we
would fetch local db messages only by folderImapUID. This was incorrect,
because messages in different folders could have the same uid, so our
query would return messages from other folders, causing us to
incorrectly update their attributes.

This commit ensures we fetch local messages in the current folder

Test Plan: manual

Reviewers: evan, halla, mark, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3777"
jstejada,2017-01-25 19:12:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/21cb8d2997427764ca15cb701bfa4868ed558980,21cb8d2997427764ca15cb701bfa4868ed558980,[cloud-*] Catch and log errors when creating storage dir
jstejada,2017-01-25 19:08:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/93c229861690f8fa04f8cc1853c384715a400854,93c229861690f8fa04f8cc1853c384715a400854,[cloud-*] Disable cloudwatch logs
jstejada,2017-01-25 19:04:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b6ed6937a085fcd1e2af46248dd15f957356f1d,2b6ed6937a085fcd1e2af46248dd15f957356f1d,bump(changelog)
jstejada,2017-01-25 18:57:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a7a708d3905f49200067f20b70fb7f2d9a70268,0a7a708d3905f49200067f20b70fb7f2d9a70268,bump(k2)
jstejada,2017-01-25 18:47:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/526964b61964cc84b89644b6c81633237f2f65fe,526964b61964cc84b89644b6c81633237f2f65fe,"[local-sync] Make sure thread is saved before updating folders/labels

We now correctly `await` for the `setFolders` and `setLabels`
operations, and make sure that the thread is always saved.

Apparently the `thread.id` check wasn't working as expected and we were skipping a
thread save, which only became apparent when we awaited for `setFolders`
and `setLabels`. Now, we always save the thread (like we did before this
method got updated)"
spang,2017-01-25 18:28:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/363a81b49ea93f42adf72deaf537d9927640452e,363a81b49ea93f42adf72deaf537d9927640452e,"[local-sync] Sync isDraft correctly on Gmail

Summary:
When I tested if we could use labels in place of the flag, I had the
Drafts folder selected, not All Mail, and the label did not show up.
Turns out that if you have All Mail selected, all draft messages will be
correctly tagged with the Draft label.

With this patch, we should correctly sync isDraft on all supported
providers and suppress these messages from the app until if or when we
decide to implement draft sync.

Thanks Brandon Long from the Gmail team for the help in getting this right.

Test Plan: manual

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3775"
jstejada,2017-01-25 08:21:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/15ce4983a919841fa7bebc96060cf8574fe0e50d,15ce4983a919841fa7bebc96060cf8574fe0e50d,"[local-sync] Outbox shouldn't be included in localized names for `sent`

Summary:
Otherwise accounts with `Sent` and an `Outbox` will both get the `sent`
role, causing inconsistencies in sync

Addresses T7682

Test Plan: manual

Reviewers: khamidou, spang

Reviewed By: khamidou, spang

Differential Revision: https://phab.nylas.com/D3773"
spang,2017-01-24 04:11:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/59c1fcb121cfe24e27a1eea3a65015baf45259d0,59c1fcb121cfe24e27a1eea3a65015baf45259d0,"[local-sync] Remove duplicate db calls for looking up existing messages

Summary:
Now that message processing is serialized, this is unnecessary. I
was debugging something else and watched the code step through the
exact same db query twice in a row.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3764"
spang,2017-01-25 17:48:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d4acc9110994ab8edcc5961cead5bdd59dbb73d,9d4acc9110994ab8edcc5961cead5bdd59dbb73d,"[local-sync] Still sync new mail during Gmail inbox UID prioritization

Summary: Fixes T7620

Test Plan: manual

Reviewers: mark, juan

Reviewed By: juan

Maniphest Tasks: T7620

Differential Revision: https://phab.nylas.com/D3765"
spang,2017-01-25 02:48:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a39415f113dc58a62d4ca1c3c9facf739fc15e7,9a39415f113dc58a62d4ca1c3c9facf739fc15e7,"[iso-core] Split cert validation error handling off socket error handling

Summary:
Now that we don't do strict validation of certificates for non-major IMAP
providers this shouldn't come up as much, but when it does we're gonna
want a better error message to help support out.

I am not 100% sure there aren't other socket errors that should be fatal,
but this was the one I could figure out by test authing against a server
with a self-signed cert and grepping around the node socket source code.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3774"
emorikawa,2017-01-25 15:20:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/55fc90f54349d9ae829ceba8249c75492aefec81,55fc90f54349d9ae829ceba8249c75492aefec81,bump(version): 1.0.13
emorikawa,2017-01-25 15:20:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b372caa1f38118f5de4a0bed787fb19bf6db54c,3b372caa1f38118f5de4a0bed787fb19bf6db54c,bump(changelog): 1.0.13
emorikawa,2017-01-25 15:13:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e59c86b5dccc93df04b58ac70499009ea918db3,2e59c86b5dccc93df04b58ac70499009ea918db3,bump(k2)
emorikawa,2017-01-25 15:12:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7ed7ffecf1c10574c4ab847dd5cc91da7a3a865,d7ed7ffecf1c10574c4ab847dd5cc91da7a3a865,"refactor(account): remove unused accont refresh methods

Summary:
This removes `refreshHealthOfAccounts`, which I originally found because I
was trying to refactor it out of the IdentityStore. We need it gone from
the IdentityStore so that store can trigger frequently as things like the
usageLimits constantly update on it.

This also fixes T7520 where we'd get `ECONNREFUSED 127.0.0.1:2578` on
launch unnecessarily.

The concept of refreshing the health of accounts by occassionally polling
the /accounts endpoint is obsolete. This depends on
D3769 which entirely removes the /accounts endpoint
from K2.

Account health is pushed to us by `Actions.updateAccount` which is fired
directly from the main local-sync sync loop.

This also removes `refreshAccounts` and `Actions.refreshAllDeltaConnections`. These were fired by the Identity Store whenever it updated. We no longer need the Identity Store to tell us to reset the delta connections with our local-sync accounts. The delta connections will either be reset by our offline notification button, or when adding or removing an account. The Identity Store was a redundant mechanisms

Test Plan:
Manually verify things work with an existing account. Add a new account
and ensure sync starts. Remove an account and ensure it gets cleaned up.

Reviewers: halla, khamidou, mark, juan

Reviewed By: juan

Maniphest Tasks: T7520

Differential Revision: https://phab.nylas.com/D3770"
emorikawa,2017-01-25 15:10:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/869e6aa11f0422417cfacdba69ae7d99f9dd8255,869e6aa11f0422417cfacdba69ae7d99f9dd8255,"[local-sync] remove /account API endpoint

Summary:
It turns out we don't ever use the /account API endpoint.

The GET /accounts endpoint was designed to query all accounts connected to
a system for old K2, but we don't use that anymore. The environment
variable protecting the endpoint isn't set anywhere.

We used to `GET /account` from the N1 AccountStore to attempt to refresh
the health of the accounts. The accompianing diff to this one makes that
obsolete. We never need to query for the account health since the sync
loop pushes it to us through `Actions.updateAccount`.

We also never `DELETE /account` because our local-sync runs a function
called `ensureK2Consistency` that compares its DB against the Nylas Mail
`AccountStore`.

This file has always been a huge source of confusion to me and a massive
red herring for anyone trying to understand how the account system work.
The accompyaning diff has more comments explaining the existing system

Depends on https://phab.nylas.com/D3770

Test Plan:
Manually boot N1. Ensure existing account works. Add a new account. Remove
an account. Open the developer tools and check that all the tabs still
work.

Lots of grepping through the code base.

Reviewers: halla, mark, juan, khamidou

Reviewed By: juan, khamidou

Differential Revision: https://phab.nylas.com/D3769"
emorikawa,2017-01-25 15:08:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/b56d2b64dd42c31178fa5e8b694d3ee39f30410d,b56d2b64dd42c31178fa5e8b694d3ee39f30410d,"refactor(name): rename worker-sync package to deltas

Summary:
This diff is a rename. No logical changes.

We used to have a set of files called `nylas-sync-worker`. In Old N1 these
used to have a lot of logic to slowly sync mail from our API. Since we
exclusively use local-sync via a soon-to-be-obsolesced delta stream, these
files really just manage the delta streaming connection.

It's incredibly confusing to have a set of files called worker-sync when
there's a sync-worker already in the codebase. This renames everything to
refer to them as account sync workers.

The reason I wanted this rename is because the IdentityStore on initial
launch triggers and fires a fairly scary-sounding
`Actions.refreshAllSyncWorkers()`. In reality all it does is
`Actions.refreshAllDeltaConnections()`. I'm also tired of staring at files
for a full minute before realizing that this is not the sync worker I was
  looking for.

Test Plan:
After rename, booted the app and ensured that deltas were coming through
for new mail and no errors were being thrown

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3767"
jstejada,2017-01-25 08:26:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/dea987f44e4fb0fd075a4df63edec4ee77ab8f9a,dea987f44e4fb0fd075a4df63edec4ee77ab8f9a,"[local-sync] Make EnsureMessageInSentFolder save db changes after imap success

Summary:
This will solve T7579 when saving messages to the sent folder. I
attempted to clean up the references code but decided it was better left for a
new diff, so added a bunch of TODO's in this diff

Test Plan: manual

Reviewers: halla, spang, evan

Reviewed By: spang, evan

Differential Revision: https://phab.nylas.com/D3766"
spang,2017-01-25 03:21:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/b884f2d847253ff411427673fd47f46d8d472f10,b884f2d847253ff411427673fd47f46d8d472f10,[iso-core] :art: Use a more descriptive variable name in _resolveIMAPSettings()
spang,2017-01-24 20:29:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/859530aa4cb6494fb3806f44eebd9f80441f461f,859530aa4cb6494fb3806f44eebd9f80441f461f,"[iso-core] Allow self-signed certificates in IMAP connections to non-major providers

Summary:
Unfortunately, many IMAP hosts outside the major ones do not have
certificates issued by a certificate authority, and it is very confusing
to folks to have their account auth not work. This patch relaxes our
certificate requirements for IMAP hosts outside the major providers.

It's cool that node 6 has secure TLS settings by default!

Fixes: T7673

Test Plan: manual

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3771"
jstejada,2017-01-25 01:43:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a8567cf1b459c6ae5f6db804d09cdbca28ffd5c,9a8567cf1b459c6ae5f6db804d09cdbca28ffd5c,bump(k2)
jstejada,2017-01-25 01:43:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/72cd27ff1c4c4b80444f659a3e625a8312df21dc,72cd27ff1c4c4b80444f659a3e625a8312df21dc,fix(auth) Dont allow invalid form submission with Enter key
jstejada,2017-01-25 01:19:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/6701f117bf7097571948584909dc11be0b979b9e,6701f117bf7097571948584909dc11be0b979b9e,[cloud-api] Disable hapi logging to fix logs format
hallamoore,2017-01-25 00:45:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdf09bfff04fcae619e9466147201d73e2ae9a5c,cdf09bfff04fcae619e9466147201d73e2ae9a5c,"fix(unpersistModel) Add default value for `opts` param

Just an empty object, so looking up a property on it doesn't error.
(Also some whitespace changes that automatically changed on save.)"
jstejada,2017-01-25 00:24:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/107faab0f1a7f78ae5c02af352fad87b4338e06f,107faab0f1a7f78ae5c02af352fad87b4338e06f,":art: Fix to using imap-provider-settings package

Summary: see title

Test Plan: manual

Reviewers: spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3772"
jstejada,2017-01-25 00:19:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/81a48d1fbb410608583b4556f95b569c0c5b889b,81a48d1fbb410608583b4556f95b569c0c5b889b,[cloud-api] :art: logs
jstejada,2017-01-24 23:08:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8941b59da1d62090b194c273100b31c9b819c47,d8941b59da1d62090b194c273100b31c9b819c47,"[cloud-api] When token refresh fails, correctly stop execution"
spang,2017-01-24 21:57:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd3c1542e44929e2c05f310cb0f75c427c8ce1bd,dd3c1542e44929e2c05f310cb0f75c427c8ce1bd,fix typo
jstejada,2017-01-24 21:13:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5f48003b932925b62ec7eff5222ac49e1da57cc,b5f48003b932925b62ec7eff5222ac49e1da57cc,[*] report sending errors to sentry
jstejada,2017-01-24 20:06:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/1aa83cdb7db363facf27b55234798e078ec7fdc2,1aa83cdb7db363facf27b55234798e078ec7fdc2,fix(auth) fix timeouts
jstejada,2017-01-24 20:01:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/24abdafbc79b7eeb65cefd66cd9537f7771157ca,24abdafbc79b7eeb65cefd66cd9537f7771157ca,"fix(auth) Increment IMAP auth timeout

Given that imap connections can take up to 90 seconds (see `auth-helpers` in k2),
we don't want to hang up our local connection too soon"
spang,2017-01-24 19:56:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/53a6df35fd274c81e5a73dcce2543a808ac378c3,53a6df35fd274c81e5a73dcce2543a808ac378c3,fix(updater): s/N1/Nylas Mail/
emorikawa,2017-01-24 19:51:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/d46ee217bede0f1d8e0a81f119f56431f4de4b0e,d46ee217bede0f1d8e0a81f119f56431f4de4b0e,bump(changelog)
jstejada,2017-01-24 19:46:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8311a0b7cc53cb4128d67b98d1e39c46ee6165f,f8311a0b7cc53cb4128d67b98d1e39c46ee6165f,bump(k2)
jstejada,2017-01-24 19:46:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/84ec152c85e45c665371dc39e9cffb4ab69b5720,84ec152c85e45c665371dc39e9cffb4ab69b5720,bump(changelog)
jstejada,2017-01-24 19:35:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f7f161dc7a7bb938d9f2f513f0e307c73152f42,6f7f161dc7a7bb938d9f2f513f0e307c73152f42,"[*] Increment IMAP auth timeout

- More than 50% of auth errors we're seeing still seem to be geniune
timeouts. Increment the timeout to account for this."
emorikawa,2017-01-24 19:27:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/59d86d7c5a5e5b186f6013f6c630e7d3739b2634,59d86d7c5a5e5b186f6013f6c630e7d3739b2634,fix(build): add output log interval to prevent travis from dying
emorikawa,2017-01-24 19:05:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2e461fa4b46efaeef8dec61677e0b4414b88a0e,d2e461fa4b46efaeef8dec61677e0b4414b88a0e,feat(build) add `npm run local-ci`
flyingclimber,2017-01-24 17:36:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe5546d3c31dd64bac0180e849418d542043227c,fe5546d3c31dd64bac0180e849418d542043227c,bump(changelog)
emorikawa,2017-01-24 17:23:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/43c0dc68400bf8d54d575dd9b69c07f6ad1a0854,43c0dc68400bf8d54d575dd9b69c07f6ad1a0854,bump(version): 1.0.12
emorikawa,2017-01-24 17:22:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/81ddbe9f563b907f2e35adad1c170f5cd708e81a,81ddbe9f563b907f2e35adad1c170f5cd708e81a,"feat(analytics): add analytics for change mail tasks

Summary:
Adds the following new events:

- Threads Moved to Folder
  - isArchive
  - source
  - folderType
  - folderDisplayName
  - numThreads
  - numMessages
  - description
  - isUndo

- Threads Changed Labels
  - isArchive
  - source
  - labelTypesToAdd
  - labelTypesToRemove
  - labelDisplayNamesToAdd
  - labelDisplayNamesToRemove
  - numThreads
  - numMessages
  - description
  - isUndo

- Threads Starred
  - source
  - numThreads
  - description
  - isUndo

- Threads Unstarred
  - source
  - numThreads
  - description
  - isUndo

- Threads Marked as Read
  - source
  - numThreads
  - description
  - isUndo

- Threads Marked as Unread
  - source
  - numThreads
  - description
  - isUndo

Each new action has a ""source"" property that's one of the following:
- Category Picker: New Category
- Category Picker: Existing Category
- Toolbar Button: Message List
- Toolbar Button: Thread List
- Send and Archive
- Context Menu: Thread List
- Thread List Icon
- Quick Actions: Thread List
- Swipe
- Keyboard Shortcut
- Dragged Out of List
- Snooze Move
- Important Icon
- Label Remove Icon
- Thread Selected
- Mail Rules
- Dragged Into List

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3760"
jstejada,2017-01-24 15:34:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/11c15abd2eb9605a0b00e4d0a144c5ade38cac89,11c15abd2eb9605a0b00e4d0a144c5ade38cac89,"fix(auth): Properly wait for acct to be inited before adding to sidebar

Summary:
Previously, when adding an account, we waited for it to be completely loaded (which meant having fetched the folder list) before focusing it on the sidebar. This could take several seconds, so it made the app feel unresponsive or slow when adding an account.

Then, we changed the logic to wait an arbitrary amount of time to focus the newly added account in the sidebar, with the hope that it would be enough time to focus it correctly but that it wouldn't seem too long. This still caused the unwanted effect of focusing it before it had been fully loaded.

This commit changes the auth flow so that the onboarding shows a Success page until the newly added account is fully loaded, and only /then/ closes itself, focuses the main window, and allows the account to be correctly focused in the sidebar.

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3751"
jstejada,2017-01-24 15:31:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/b305f44645252e1870d13a089d0383c93fcab59f,b305f44645252e1870d13a089d0383c93fcab59f,"fix(sync) Make category syncback tasks save changes after imap success

Summary:
This will solve T7579 for actions involving categories (folders/labels)
Depends on D3753

Test Plan: manual

Reviewers: halla, mark, khamidou, evan, spang

Reviewed By: evan, spang

Differential Revision: https://phab.nylas.com/D3754"
jstejada,2017-01-20 18:47:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/3210ff20b6b2f16f59f3b563fa4a8baca0ff992f,3210ff20b6b2f16f59f3b563fa4a8baca0ff992f,"[local-sync] Make category syncback tasks save changes after imap success

Summary: This will solve T7579 for actions involving categories (folders/labels)

Test Plan: manual

Reviewers: khamidou, halla, mark, evan, spang

Reviewed By: evan, spang

Differential Revision: https://phab.nylas.com/D3753"
jstejada,2017-01-20 19:35:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/476d60f2956205b2338acf2ed5b6a49727ff57ac,476d60f2956205b2338acf2ed5b6a49727ff57ac,"[local-sync] Make thread syncback tasks save changes after imap success

Summary: This will solve T7579 for thread operations

Test Plan: manual

Reviewers: evan, mark, khamidou, halla, spang

Reviewed By: halla, spang

Differential Revision: https://phab.nylas.com/D3755"
spang,2017-01-24 04:36:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/35b64a66c51bcab3d3da3c895356454d7d19dcf9,35b64a66c51bcab3d3da3c895356454d7d19dcf9,"[local-sync] Sync draft flag from provider to K2 & exclude drafts from Edgehill

Summary:
We've been syncing drafts messages but not the drafts flag in K2, making
them appear in Edgehill as regular old messages.

This commit makes K2 sync the drafts flag, and also correctly label
folders called ""Drafts"" with the 'drafts' role.

Because 2-way syncing of drafts is very complex and error-prone since
you need to add new drafts and delete the old ones on every update, and
we reaally don't want to do things like create multiplying draft copies
or accidentally lose a draft someone started composing elsewhere, we
simply exclude messages marked as drafts from being serialized to
Edgehill through the delta stream for now. This removes the confusing
behaviour and also sets a better stage for completing drafts sync later.

Eventually we will also want to add functionality to allow users to
select their drafts folder, but for now this code does the right thing
in many more cases.

While investigating this behaviour, I also discovered a bug we've never
seen before where Gmail isn't applying the \Draft flag to draft
messages, no matter which folder we fetch them from. :-/ This is very
unfortunate and there's no way for us to work around it other than to
fetch messages in the Drafts folder and manually apply the flag locally,
since ""drafts"" is not a label in Gmail, only another IMAP folder. Brandon
Long from the Gmail team says that this is because they've had
problems with clients which sync drafts, so the Gmail web client and
mobile apps do not set the \Draft flag on drafts. (I don't get how this
solves their problem, but okay.) Let's solve the issue on Gmail if it
comes up by user demand—should be relatively straightforward to
implement, but it adds sync work & complexity.

Fixes T7593

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Maniphest Tasks: T7593

Differential Revision: https://phab.nylas.com/D3749"
spang,2017-01-24 04:54:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/daac91c459e27d8b92841d696529b02a4f938e9e,daac91c459e27d8b92841d696529b02a4f938e9e,"[local-sync] Don't be so strict about updating threads from messages

This is how we _add_ messages to a thread in the first place, so we cannot
place the constraint that the thread must contain the message already."
hallamoore,2017-01-23 23:50:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d5441530f62404f0261220307a723a69dbb7d95,9d5441530f62404f0261220307a723a69dbb7d95,"[local-sync]: Update threads when they have messages removed

Summary:
See title

Depends on D3744

Test Plan: tested locally

Reviewers: spang, evan, juan

Reviewed By: spang, evan, juan

Differential Revision: https://phab.nylas.com/D3745"
jstejada,2017-01-23 21:30:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b722e506437d601aa22d22fa833b4d627f94d2a,1b722e506437d601aa22d22fa833b4d627f94d2a,build(notif) Remove appveyor notifs for now
khamidou,2017-01-23 20:18:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/d92eeabf47ad7e942a63a6d8d90fd65cfff702a3,d92eeabf47ad7e942a63a6d8d90fd65cfff702a3,"Add Sentry support to cloud-api

Summary: This diff adds sentry support to the cloud API. It's mostly based on Ben Drucker's hapi-sentry plugin.

Test Plan: Deployed to staging and checked that things weren't broken, however no events were making it to sentry (even though they were being sent correctly). I think that Sentry is somehow discarding them because they're not frequent enough.

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3758"
emorikawa,2017-01-23 20:02:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b202a19524ebe8bcbd181df884a0aff7c070fba,3b202a19524ebe8bcbd181df884a0aff7c070fba,bump(k2)
hallamoore,2017-01-23 19:32:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/18572836de58769456886457c2c262eb07ef51bf,18572836de58769456886457c2c262eb07ef51bf,"fix(unindexModel): Don't re-persist unpersisted models

Summary: See title

Test Plan: tested locally

Reviewers: juan, mark, evan

Reviewed By: juan, mark

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3744"
ForbesLindesay,2017-01-21 23:52:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/7682bd937cc88660cd4ec34f5de79929648d2bb2,7682bd937cc88660cd4ec34f5de79929648d2bb2,Add the GitHub community plugin (#3197)
rclai,2017-01-21 23:52:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/18c5a332572f4ac3628d50dcbeb7dab90976c8f5,18c5a332572f4ac3628d50dcbeb7dab90976c8f5,Fix typo (#3173)
paulxuca,2017-01-21 23:51:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed2235ce8602660f66fef167868d76abed3a8b33,ed2235ce8602660f66fef167868d76abed3a8b33,"Normalized size of buttons in preferences (fixes #2753) (#3112)

Normalized size of buttons across signature, accounts and mail rules preferences. Also make signature pane same size as other preference panels"
sachinag,2017-01-21 23:48:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/eaa3059dc07c776351709b0e2f94b5bf5583b2f3,eaa3059dc07c776351709b0e2f94b5bf5583b2f3,"Update CHANGELOG.md (#3194)

N1 > Nylas Mail"
spang,2017-01-20 03:33:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2836e7f44631f4f8a6dbf3d418e25320adfc652,b2836e7f44631f4f8a6dbf3d418e25320adfc652,"[local-sync] Keep only one HTML part in multipart/alternative structures

Summary:
I thought it was gonna be OK that we kept all HTML parts in a multipart/alternative
MIME structure because the world is a sane place and nobody would ever put more
than one HTML part in a multipart/alternative structure.

I was wrong.

We have found extraterrestrial life^W^WI mean emails which contain duplicate,
exactly the same MIME parts within a multipart/alternative MIME structure: two
text/plain parts and two text/html parts. This is likely due to a broken MIME
implementation, or perhaps a bug in someone's email script. So, we should
only keep one text/html MIME part if there are multiple.

Test Plan:
manual for now---added this to my mail parsing regression test list
for implementation once we unify the DBs and have a roughly stable code
structure

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3750"
emorikawa,2017-01-20 21:55:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1249b731bb470e8a21f951367c6f9828ec4ef32,d1249b731bb470e8a21f951367c6f9828ec4ef32,bump(version): 1.0.11
emorikawa,2017-01-20 21:48:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/5640f266aac1b5c29fc3942768deb8af2f3844b7,5640f266aac1b5c29fc3942768deb8af2f3844b7,bump(changelog)
hallamoore,2017-01-20 21:54:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/30d69a09cd5e8273b5ae74b391419bc4d44d2d0e,30d69a09cd5e8273b5ae74b391419bc4d44d2d0e,"[local-sync] Be more permissive with content transfer encodings (CTEs)

Summary:
Rather than having a strict model where we don't decode the message if we
don't specifically recognize the CTE, treat any CTEs we don't recognize as
having no encoding. There are several CTE strings that could mean this (e.g.
7bit, 7BITS, 8-bit, binary, NONE, utf8), and we don't want to check for them
all. Additionally, if there is a CTE we don't support, the user will likely
see rendering issues and contact support. This will allow us to obtain more
concrete information about these messages.

Test Plan: manual

Reviewers: spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3748"
jstejada,2017-01-20 21:46:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e85aa4056adf5622d5f524ba4c35865ed940607,3e85aa4056adf5622d5f524ba4c35865ed940607,"fix(crash): Fix error reporting for unhandled promise rejections

When handling unhandled promise rejections, our error reporter would
completely freeze the worker window when trying to send a Promise
through the ipc bridge, rendering the app unusuable

This fixes T7621"
emorikawa,2017-01-20 20:01:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/88f882898d43dc9e6085425af02a2e8326b80711,88f882898d43dc9e6085425af02a2e8326b80711,"feat(build): build DMG

Summary:
We need people to manually drag into their /Applications folders due to
OSX gatekeeper protections.

Test Plan: manual

Reviewers: juan, khamidou

Reviewed By: khamidou

Differential Revision: https://phab.nylas.com/D3756"
emorikawa,2017-01-20 18:25:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/30412ce763799cdbdaf4db4f1ebc02c185ff1676,30412ce763799cdbdaf4db4f1ebc02c185ff1676,bump(k2)
jstejada,2017-01-20 16:36:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/8aeed8e813da392573f80817dc9067b600653c3f,8aeed8e813da392573f80817dc9067b600653c3f,"[local-sync] Never show red box on retryable errors

Summary:
Given that we were marking the account as errored if we've encountered
enough RetryableErrors, we would show the red box to the user when in
fact the problem was the user was offline, causing confusion

If the user is offline, we will constantly get RetryableErrors in the
sync loop, and we can't mark the account as errored in that case.

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3752"
jstejada,2017-01-20 07:33:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/dcf0281438841a57a65bef79402b9107e454f304,dcf0281438841a57a65bef79402b9107e454f304,:art: Error message
spang,2017-01-20 03:27:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8d57a5d6a47b737a798b2b06ab2c23a0d882660,f8d57a5d6a47b737a798b2b06ab2c23a0d882660,[local-sync] typo fix
khamidou,2017-01-20 00:59:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d0310c2251ca7a816d320c05bd6b2853b2a86b6,3d0310c2251ca7a816d320c05bd6b2853b2a86b6,"[mini-feat] Display the IMAP commands we're sending when NYLAS_DEBUG is set.

Makes debugging a bit easier."
spang,2017-01-20 00:36:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2750de369d98cec313574fd0b16699c29287695,a2750de369d98cec313574fd0b16699c29287695,"[cloud-api] Make Gmail auth CTA stronger

Test Plan: ship it

Reviewers: mike, halla

Reviewed By: mike, halla

Differential Revision: https://phab.nylas.com/D3747"
jstejada,2017-01-20 00:44:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/61314fb1910513b432e1310942cb8596470f0e20,61314fb1910513b432e1310942cb8596470f0e20,fix(auth) Don't show error message when auth is successful
jstejada,2017-01-20 00:06:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/c268936cdfbf66596199fcf819ae2bfeb6706ed1,c268936cdfbf66596199fcf819ae2bfeb6706ed1,fix(auth) Increment timeout for requests that initiate imap connections
jstejada,2017-01-19 23:37:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ce7fab79da0c4a0a8854273aba49acc08ca0cc9,3ce7fab79da0c4a0a8854273aba49acc08ca0cc9,:art:
jstejada,2017-01-19 23:30:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6ed90678938603354f5e3770f5ad62c3b180f2f,e6ed90678938603354f5e3770f5ad62c3b180f2f,update(changelog)
hallamoore,2017-01-19 19:39:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e144cf01e62e1bef72f499c7fc949bbb5239a9b,5e144cf01e62e1bef72f499c7fc949bbb5239a9b,bump(version)
hallamoore,2017-01-19 19:36:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/73fe63808bb5f620d68e090c0ff0f5fdde659d46,73fe63808bb5f620d68e090c0ff0f5fdde659d46,bump(changelog)
emorikawa,2017-01-19 19:28:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/07286f26130eb4af76cbd5f4042f7570e3142a4a,07286f26130eb4af76cbd5f4042f7570e3142a4a,fix(changelog): link to correct changelog
jstejada,2017-01-19 19:25:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/6072bc7869135dd89320f6c4b5a98050dd440632,6072bc7869135dd89320f6c4b5a98050dd440632,bump k2
jstejada,2017-01-19 19:25:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c88e8b0f40a116ed796f62c00b9288ec884ccce,2c88e8b0f40a116ed796f62c00b9288ec884ccce,[local-sync]: Token error handler fix
jstejada,2017-01-19 19:15:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/772444cbfa0089ed49440433a1a21158e8a8ebfc,772444cbfa0089ed49440433a1a21158e8a8ebfc,"[local-sync] Properly handle errors when refreshing tokens

Summary:
This commit ensures that we handle transient errors correctly when refreshing
tokens

Test Plan: manual

Reviewers: khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3740"
jstejada,2017-01-19 18:52:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/105dc2af059ce4f54d6c9154ce62260c62c7e0e7,105dc2af059ce4f54d6c9154ce62260c62c7e0e7,"fix(error-mgmt): Add a few improvements to error management

Summary:
- Add a new button to the sync error notification to ""Debug"" sync. This will open the activity window and dev tools in that window. Depends on D3736
- Update the ""Contact Support"" link in error notifications to prepopulate the support ticket with the sync error in the account
- Make the ""Check Again"" button react when clicking it

Test Plan: manual

Reviewers: evan, khamidou

Reviewed By: evan, khamidou

Differential Revision: https://phab.nylas.com/D3737"
jstejada,2017-01-18 23:55:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/48389d5d8cb4b40b67dbec7dfe279f97dc7ba80b,48389d5d8cb4b40b67dbec7dfe279f97dc7ba80b,"[local-sync] Add a few improvements to error management

Summary:
In the sync worker:
- Move the backoff logic inside `scheduleNextSync`, where all logic to schedule the next sync loop now lives
- If we've retried a RetryableError a bunch of times, show the error to the user, otherwise the user might think the app is not working for no reason
- Clean up logging

In the message processor:
- Report message processing errors to sentry!

Sync Process Manager:
- Listen to new `Actions.debugSync` to show the Activity Window and open dev tools

Test Plan: manual

Reviewers: khamidou, evan

Reviewed By: khamidou, evan

Differential Revision: https://phab.nylas.com/D3736"
emorikawa,2017-01-19 18:46:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/1740cef27f80be663c884f3a33a48ab37ae28ddf,1740cef27f80be663c884f3a33a48ab37ae28ddf,bump(k2)
jstejada,2017-01-19 17:42:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/167f3551d290fb8b8fdf0c131e24e185f0ab216e,167f3551d290fb8b8fdf0c131e24e185f0ab216e,"[local-sync] Batch imap operations in syncback tasks for faster performance

Summary:
This commit makes it so our syncback tasks send as few imap commands as possible by passing a set of UIDs whenever possible. Previously, we would send 1 command per message, with a single UID, which was very wasteful given that we can pass a set of UIDs. This is especially helpful for operating on threads with a large number of messages.

Syncback actions will now group all messages in a thread by the folder they belong to, and issue a single operation on the folder box. When removing all labels from a thread (setting labels to []), we need to issue a command of the form `box.delLabels(uids, labels)`, so we also group messages by set their set of labels to issue as few commands as possible.

This commit only batches imap commands, but we can still batch syncback actions themselves, which can be implemented in a separate patch.

Test Plan: manual

Reviewers: evan, mark, spang

Reviewed By: spang

Subscribers: halla, mg

Differential Revision: https://phab.nylas.com/D3719"
jstejada,2017-01-19 00:16:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/214558cafe1ed9db35c3e70c74a83169fdd13930,214558cafe1ed9db35c3e70c74a83169fdd13930,"fix(offline-notif): Add some offline notification improvements

Summary:
- Make the try again button react when clicked
- Don't mark as offline until after we've tried again at least 3 times

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3738"
emorikawa,2017-01-19 01:44:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b5405c9bba43d6b2fc0771c9b1a557f7dbf1fba,5b5405c9bba43d6b2fc0771c9b1a557f7dbf1fba,"fix(auth): Gmail auth screen now shows error states

Summary:
- Refactor Gmail auth functions
- Add Analytics in
- Show error states

Depends on D3735

Test Plan: manual

Reviewers: khamidou, juan

Reviewed By: khamidou, juan

Differential Revision: https://phab.nylas.com/D3732"
emorikawa,2017-01-19 01:31:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/bfed1312b2c8b90380670226aad04802a8687c95,bfed1312b2c8b90380670226aad04802a8687c95,"fix(db): reset db if we encounter malformed error

Summary:
Very occasionally the db can become malformed for some reason. If this
happens all DB requests will fail and flood sentry with errors. This will
attempt to reset the db if we encounter this error

Depends on D3730

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3731"
emorikawa,2017-01-19 01:30:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/08541e6bf76cf602c2670dccb24331b59a57a76b,08541e6bf76cf602c2670dccb24331b59a57a76b,"[local-sync] protection from reset action being double-fired

Summary: Double-firing protection since the DatabaseStore can now fire this

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3730"
emorikawa,2017-01-19 01:29:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/215ea71feab84c518bfe1132481df45a2ec41cb7,215ea71feab84c518bfe1132481df45a2ec41cb7,"[isomorphic-core] have IMAP auth retry

Summary: IMAP auth retries

Test Plan: manual

Reviewers: khamidou, juan

Reviewed By: khamidou, juan

Differential Revision: https://phab.nylas.com/D3735"
khamidou,2017-01-18 22:49:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/87423ab08140ecf64ad6c7774ffa080c28b5e76c,87423ab08140ecf64ad6c7774ffa080c28b5e76c,"[cloud-api] Log N1 id too

Summary: This is going to make looking at the logs a lot easier.

Test Plan: Will ship to staging.

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3734"
jstejada,2017-01-18 21:53:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/88bc142d5c7d4c873614d77a696d0bf40cb3fb1c,88bc142d5c7d4c873614d77a696d0bf40cb3fb1c,"[*] Increment default timeout connection

Summary:
We are getting to many imap timeout connection errors because the
authTimeout was just 5 secs

Test Plan: manual

Reviewers: khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3733"
jstejada,2017-01-18 21:36:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/c47b8a89d17fae9324a8bbb885ca4e6e09e15724,c47b8a89d17fae9324a8bbb885ca4e6e09e15724,[cloud-api] Improve auth error logging
emorikawa,2017-01-18 20:07:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/557124e7f8fff33a51da182345dd0174a5ea2651,557124e7f8fff33a51da182345dd0174a5ea2651,fix(err) re-add Draft Sending Errored event into Nylas Mail
jstejada,2017-01-18 18:56:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/39d4b519c52727dfe872f0413dfb414225e2980a,39d4b519c52727dfe872f0413dfb414225e2980a,bump k2
jstejada,2017-01-18 18:56:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2f84a9603af3cc679fa1ea69dc608b382afddbd,f2f84a9603af3cc679fa1ea69dc608b382afddbd,fix(add-account) Increment delay before expanding sidebar
jstejada,2017-01-18 18:35:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b55ed406988d98d88be3fa8b8346614226f0063,1b55ed406988d98d88be3fa8b8346614226f0063,:art:
jstejada,2017-01-17 06:38:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/746ec201da2e3bd8fa0cf287bb4943314a93b940,746ec201da2e3bd8fa0cf287bb4943314a93b940,"[local-sync] Ensure all imap operations are wrapped with timeout

Summary:
Specifically, these imap connections have been known to hang when you close your laptop or go offline/online, even though we are passing a `socketTimeout` to node-imap. When they hang, everything freezes because the promise waiting for the result never resolves.

`_createConnectionPromise` wraps the operations with a timeout we implemented ourselves, and correctly rejects on timeout.

This commit wraps other imap operations that were missing. (I notices because I encountered the hanging on one of these operations)

Test Plan: manual

Reviewers: evan, mark, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3720"
emorikawa,2017-01-18 00:33:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/673fd83df6eb8331bcbdbe13777ce0ea84bcaea2,673fd83df6eb8331bcbdbe13777ce0ea84bcaea2,bump(version): 1.0.9
emorikawa,2017-01-18 00:33:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/6203ad9c3a46a49d8355223b474b3a0a1b81794e,6203ad9c3a46a49d8355223b474b3a0a1b81794e,bump(changelog)
jstejada,2017-01-18 00:27:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba9d68be30b49b42f6f44aa7bae510a60a0e2563,ba9d68be30b49b42f6f44aa7bae510a60a0e2563,"fix(offline-notif) Make it less aggressive

Summary: Add a timeout before displaying the offline notif

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3727"
jstejada,2017-01-18 00:30:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaa0b405e400a3751d339f22f83738f893cf1a86,aaa0b405e400a3751d339f22f83738f893cf1a86,add comment
emorikawa,2017-01-18 00:18:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/663f5961774f1d5f94ec79054d5d57e740d3d8b1,663f5961774f1d5f94ec79054d5d57e740d3d8b1,bump(changelog)
emorikawa,2017-01-18 00:04:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2b4eac1443bc933f3ac142580ed7d3fbc96fc3e,b2b4eac1443bc933f3ac142580ed7d3fbc96fc3e,fix(db): don't assert transaction anymore
emorikawa,2017-01-17 23:11:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e52a434cfcf6aafd9e51d630ff0d549243101e2,3e52a434cfcf6aafd9e51d630ff0d549243101e2,"[cloud-api] add a /ping-db endpoint

Summary: basic db ping endpoint

Test Plan: manual

Reviewers: khamidou, jerm

Reviewed By: jerm

Differential Revision: https://phab.nylas.com/D3726"
jstejada,2017-01-17 21:16:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8be30b181e2e0aa52ac62294083d8d60b24bc98,b8be30b181e2e0aa52ac62294083d8d60b24bc98,fix(logging) Don't log error out unecessarily
emorikawa,2017-01-17 20:42:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/09fc56b93258fb0a124b34156548276d838ebc4b,09fc56b93258fb0a124b34156548276d838ebc4b,fix(clearbit): catch API errors
emorikawa,2017-01-17 16:23:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc43302e00c23b07c80c0a4be3e28082e582ecc6,cc43302e00c23b07c80c0a4be3e28082e582ecc6,fix(pref): remove default send preferences for now in basic
pfista,2017-01-17 19:13:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/93db8075a40e1acb1cc5141c6e96b30b1670f4b7,93db8075a40e1acb1cc5141c6e96b30b1670f4b7,[cloud-api] Add github star to gmail auth success
hallamoore,2017-01-17 16:49:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d690d46ab03297be84307e416fda641cf13d1d4,4d690d46ab03297be84307e416fda641cf13d1d4,"rm(provider-setting): Remove duplicate ""fastmail.com"""
hallamoore,2017-01-17 15:49:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/66f8416cea4d5622f14288ab3d0726b55e67b0cb,66f8416cea4d5622f14288ab3d0726b55e67b0cb,"fix(onboarding): Change how we determine default IMAP settings

Summary:
If we don't have IMAP settings for a particular email domain,
try to choose based on which provider was selected instead.

Fixes #3168

Test Plan: tested locally

Reviewers: spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3721"
emorikawa,2017-01-17 04:21:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/a638f3ef3281308b663e619ab475ffedfa582421,a638f3ef3281308b663e619ab475ffedfa582421,bump(version): 1.0.8
emorikawa,2017-01-17 04:21:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/27d354e685364313b388837ecc890bb065bdcbfd,27d354e685364313b388837ecc890bb065bdcbfd,bump(k2)
jstejada,2017-01-17 04:18:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d5dd59d1a8d95921c9f89afc27da6739a95cd16,6d5dd59d1a8d95921c9f89afc27da6739a95cd16,fix(accounts) Make account adding look fast
spang,2017-01-17 03:41:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6d6b2fd9961b733cb8d214e6ed73487347bd406,e6d6b2fd9961b733cb8d214e6ed73487347bd406,"[local-sync] Set threading headers when uploading message to Sent folder

Summary:
We weren't, which meant that us sending with multi-send or generic IMAP
broke threading. :(

Test Plan: manual

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3718"
jstejada,2017-01-17 03:20:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ff46b1b3667d83361a0593450a5777a49d5cd46,9ff46b1b3667d83361a0593450a5777a49d5cd46,"fix(deltas) Prevent app from crashing when processing deltas

Summary:
Some strange scenario is causing us to attempt to redefine the object property `_delta` on our `delta.attributes` object inside `DeltaProcessor._decorateDeltas`, which throws an error, and consequently throws the app into an error loop. I haven't been able to track down how to reproduce this, but when it happens it completely takes the app down.

From testing with tomasz's copy of N1, this seemed to have originated from the lack of Account tokens, which was hard to discover because the `_deltas` object completely floods the console with errors.

From what I gather, `_decorateDeltas` is only called from a single place, `DeltaProcessor.process`, which is also only called from a single place, and its unclear how it would be called multiple times with the same delta object references.

In order to prevent this error from completely destroying the app, I've added the `configurable` option when defining the property, so that redifining it doesn't throw an error. It should be safe to redefine this property with the latest delta reference, and will also allow us to discover other errors more easily in the console like the lack of account tokens which might be the original cause of this problem.

Test Plan: manual

Reviewers: mark, spang, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3717"
hallamoore,2017-01-17 03:31:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/b95645bf146d895e5c747b796a251cff9910dcc2,b95645bf146d895e5c747b796a251cff9910dcc2,rm(calendar): Comment out more calendar things
jstejada,2017-01-17 03:20:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c4ee478aba77d9166ad8e9799ca45e8dfd124d6,0c4ee478aba77d9166ad8e9799ca45e8dfd124d6,bump(k2)
emorikawa,2017-01-17 03:17:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d58cb8e43d1045d9168d343709b33e44b88a65c,3d58cb8e43d1045d9168d343709b33e44b88a65c,"fix(send): temporarily disable ensureOnce protection

Since we catch any post-send errors now in K2 and if there is a temporary
error, this protection won't let you send a message again"
jstejada,2017-01-17 01:24:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/41317f1b1ee4d8946ff53e133232dc6df098767d,41317f1b1ee4d8946ff53e133232dc6df098767d,"[local-sync] Fix attribute sync for non Gmail accounts

Summary:
Before this commit, if folder sync was complete, and the account didn't support CONDSTORE (e.g. Office365, Yahoo), we would only check for attribute updates every 10 minutes.

This commit makes it so we always check for attribute updates if the server doesn't support CONDSTORE

So for example, when marking a thread as read, we would perform the optimistic update in N1, queue the syncback task which would succeed, but the thread in k2s db would never get updated and become stale, with an unreadCount > 0. If we emitted a delta for that thread during the window of time where we ignored attribute updates, it would be set as unread again in N1, even though all of its messages were read.

This still doesn't guarantee that it wont happen (we could still get a delta for the thread before we actually fetch the attribute updates from IMAP), but before this commit it was sure to happen. This should be properly fixed with the sync scheduler refactor

Test Plan: manual

Reviewers: evan, mark, spang

Reviewed By: mark, spang

Differential Revision: https://phab.nylas.com/D3714"
emorikawa,2017-01-17 02:36:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a4df85201cf57d8c9b978b27c4555b659e0c6d7,6a4df85201cf57d8c9b978b27c4555b659e0c6d7,bump(version): 1.0.7
emorikawa,2017-01-17 02:36:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/196fa97594b5966c301595dd23c497e5dd40b800,196fa97594b5966c301595dd23c497e5dd40b800,bump(k2)
emorikawa,2017-01-17 01:59:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e1208df8fdff8ca939f71fa32f94684834c3b81,0e1208df8fdff8ca939f71fa32f94684834c3b81,"Changelog version bump to 1.5.0

Changelog to 1.5.0"
hallamoore,2017-01-17 00:17:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/200761d9735af8330056ab99715788a2bf17800c,200761d9735af8330056ab99715788a2bf17800c,"fix(sync-messaging): Have ""Looking for messages..."" update properly

Summary:
Makes these messages update even if the user doesn't force a
re-render by switching perspectives.

Test Plan: tested manually

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3715"
jstejada,2017-01-17 01:27:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b6e801ab53737c0154ff7314f2bb705babfb30c,9b6e801ab53737c0154ff7314f2bb705babfb30c,"[local-sync] Prioritize syncing archive for non Gmail accounts!

Summary:
Previously, we were not pripritizing archive sync when getting folders to sync, causing it to be synced almost last. I believe this was causing the issues regarding archived items coming back, because we would optimistically archive in N1, but the changes wouldn't be reflected in K2's database until we synced the archive, causing the data to become out of sync. If for whatever reason we got a delta for any of those messages before the archive was synced, they would pop back in the inbox because in k2, they were still in the inbox. This was exacerbated by the fact that all syncback tasks would interrupt the loop, so we would reach the archive until very late, making this scenario way more likely.

This still wont guarantee that it wont happen, because we dont do /any/ optimistic updates in K2, so we could still get deltas before we actually sync the folder, but makes the scenario way less likely. This should be properly fixed with the sync scheduler refactor

Test Plan: manual

Reviewers: spang, evan, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3716"
jstejada,2017-01-17 01:33:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/808cf1e0614eb96bec8ca3395e241a85d4c084bc,808cf1e0614eb96bec8ca3395e241a85d4c084bc,[local-sync] Correctly interrup! (don't wait for interruption)
khamidou,2017-01-13 21:34:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/384932e70eabdaea3887956eddfd0c373a30f0cb,384932e70eabdaea3887956eddfd0c373a30f0cb,"Remove UpdateChannelSection

Use staging autoupdater for staging.

fixed failing test

Fix autoupdater – we were using the wrong command.

Revert ""Bump version to 1.5.0""

Temporarily reverting this because I need to test the upgrade path from
0.4.2 => 1.5.0

Revert ""Revert ""Bump version to 1.5.0""""

Had to do this to test the autoupdater.

[fix] [channel drop-down list] Show the stable channel in all cases.

Conflicts:
	internal_packages/preferences/lib/tabs/update-channel-section.jsx

Fix broken autoupdater, for reals.

[master] Replace ""Nylas N1"" by ""Nylas Mail"" in build scripts

Summary: As discussed --- we need to make those changes to make the autoupdater work across versions.

Test Plan: Will run a build.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3701

Revert ""Revert ""Revert ""Bump version to 1.5.0""""""

Need to set the version to 0.4.402 for testing purposes.

Set preferredChannel in the autoupdater instead of in the ChannelStore

It turns out that Squirrel checks for update at program launch. In some
cases, it would put Pro users on the ""nylas-mail"" channel because that's
the default channel if you don't pass a preferredChannel.

Conflicts:
	src/flux/stores/update-channel-store.es6

Set the autoupdater preferredChannel to stable.

Don't try to move the app file to the Application folder ourselves

Because of MacOS Gatekeeper path randomization issues
(https://github.com/Squirrel/Squirrel.Mac/issues/182) we need the user
to move the app themselves. Changed the dialog to ask them to do this
politely.

Conflicts:
	internal_packages/verify-install-location/lib/main.es6"
hallamoore,2017-01-16 22:43:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d116e2d7859f200829280cd3eb5935634d79296,7d116e2d7859f200829280cd3eb5935634d79296,"fix(category): Update `isSyncComplete()`

Summary:
When we've optimistically created a category and haven't seen
it come back through the remote yet, `.object` does not
exist. Just look up the sync state for the entire account in
this case.

Fixes T7556

Test Plan: tested manually

Reviewers: spang, evan, juan

Reviewed By: juan

Maniphest Tasks: T7556

Differential Revision: https://phab.nylas.com/D3711"
emorikawa,2017-01-16 23:53:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/914ef12701a51c39d49a5de900b35da129655ffa,914ef12701a51c39d49a5de900b35da129655ffa,fix(migrator): fix bug for people simply upgrading existing pro
hallamoore,2017-01-16 22:35:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/9891790eb668de0635a3b09810a520def4c5045b,9891790eb668de0635a3b09810a520def4c5045b,rename(N1): one more N1 -> Nylas Mail change
emorikawa,2017-01-16 22:14:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea2db19764848931a1bdf373a690234c7522f86b,ea2db19764848931a1bdf373a690234c7522f86b,fix(package): bump debug to 2.4.5
emorikawa,2017-01-16 20:56:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/444910703230c4fb0595e5cfd4704578dacaa119,444910703230c4fb0595e5cfd4704578dacaa119,fix(lint): fix linter error
khamidou,2017-01-13 21:34:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/36cfccb16927e342ac133031f4473b4f0f641bda,36cfccb16927e342ac133031f4473b4f0f641bda,"Remove UpdateChannelSection

Use staging autoupdater for staging.

fixed failing test

Fix autoupdater – we were using the wrong command.

Revert ""Bump version to 1.5.0""

Temporarily reverting this because I need to test the upgrade path from
0.4.2 => 1.5.0

Revert ""Revert ""Bump version to 1.5.0""""

Had to do this to test the autoupdater.

[fix] [channel drop-down list] Show the stable channel in all cases.

Conflicts:
	internal_packages/preferences/lib/tabs/update-channel-section.jsx

Fix broken autoupdater, for reals.

[master] Replace ""Nylas N1"" by ""Nylas Mail"" in build scripts

Summary: As discussed --- we need to make those changes to make the autoupdater work across versions.

Test Plan: Will run a build.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3701

Revert ""Revert ""Revert ""Bump version to 1.5.0""""""

Need to set the version to 0.4.402 for testing purposes.

Set preferredChannel in the autoupdater instead of in the ChannelStore

It turns out that Squirrel checks for update at program launch. In some
cases, it would put Pro users on the ""nylas-mail"" channel because that's
the default channel if you don't pass a preferredChannel.

Conflicts:
	src/flux/stores/update-channel-store.es6

Set the autoupdater preferredChannel to stable.

Don't try to move the app file to the Application folder ourselves

Because of MacOS Gatekeeper path randomization issues
(https://github.com/Squirrel/Squirrel.Mac/issues/182) we need the user
to move the app themselves. Changed the dialog to ask them to do this
politely.

Conflicts:
	internal_packages/verify-install-location/lib/main.es6"
khamidou,2017-01-16 20:31:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/47296e9c772f54845cbf3ca44bfdbc2c657bb4c4,47296e9c772f54845cbf3ca44bfdbc2c657bb4c4,"Don't try to move the app file to the Application folder ourselves

Because of MacOS Gatekeeper path randomization issues
(https://github.com/Squirrel/Squirrel.Mac/issues/182) we need the user
to move the app themselves. Changed the dialog to ask them to do this
politely.

Conflicts:
	internal_packages/verify-install-location/lib/main.es6"
emorikawa,2017-01-16 20:33:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/1aa14ce31ff9c4715420f06b617ed3c46f9025a8,1aa14ce31ff9c4715420f06b617ed3c46f9025a8,bump(changelog)
jstejada,2017-01-16 20:31:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/48683e0c6450666f87dc283906d61f0a417f9275,48683e0c6450666f87dc283906d61f0a417f9275,"fix(send-errors): Properly surface net and auth errors from send

Summary: See title. Depends on D3708

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3709"
khamidou,2017-01-16 20:31:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/45a094e80df0c3d3913c28d29c301f5da3c9173f,45a094e80df0c3d3913c28d29c301f5da3c9173f,"Don't try to move the app file to the Application folder ourselves

Because of MacOS Gatekeeper path randomization issues
(https://github.com/Squirrel/Squirrel.Mac/issues/182) we need the user
to move the app themselves. Changed the dialog to ask them to do this
politely."
jstejada,2017-01-16 20:14:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/110f33173940f8fb78739a601dc6973d64773bb4,110f33173940f8fb78739a601dc6973d64773bb4,"[local-sync] Surface send network errors

Summary: see title

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3708"
jstejada,2017-01-16 20:12:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b23cad780b8a1227d09253a1cc39eee34e999b66,b23cad780b8a1227d09253a1cc39eee34e999b66,fix(offline-notif) Properly check and clear offline notification
emorikawa,2017-01-16 19:27:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/985b3b5408315a7e23fce63de51a086f043ff165,985b3b5408315a7e23fce63de51a086f043ff165,bump(k2)
emorikawa,2017-01-16 18:56:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/d456f4b8bc35f83ec0a7d01520c3cd7debe3bad8,d456f4b8bc35f83ec0a7d01520c3cd7debe3bad8,"[cloud-core] make DB_NAME an environment variable

Default to nylasmailclouddb"
emorikawa,2017-01-16 18:47:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/d48fc27a3592c306cfd1a6bca68c3111277aa83d,d48fc27a3592c306cfd1a6bca68c3111277aa83d,bump(version): 1.0.6
emorikawa,2017-01-16 18:47:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/03272b1b16849442d2a59005655a6e5c7d065277,03272b1b16849442d2a59005655a6e5c7d065277,bump(k2)
spang,2017-01-16 16:06:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2f30b40dd1568f6a1c8b194780d49ab8efa84ae,a2f30b40dd1568f6a1c8b194780d49ab8efa84ae,"[local-sync] On Gmail initial sync, prioritize up to 1k inbox UIDs

Summary:
All we do is use the SEARCH X-GM-RAW IMAP extension to find the UIDs
to prioritize at the beginning of initial sync, and download these UIDs
until there are none left. Then we continue downloading All Mail as
usual.

Because of the way we batch via ranges, the most expedient way to
implement this means that all prioritized emails will end up being
downloaded twice (the second time we'll detect that the message exists
and do nothing).

This seems like a worthwhile tradeoff for quick appearance of the
messages in a user's inbox.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3706"
emorikawa,2017-01-16 18:43:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa920a5e13127af6225ddafecf93a661cb77ff10,aa920a5e13127af6225ddafecf93a661cb77ff10,fix(db): don't exclude message bodies in deltas for drafts
hallamoore,2017-01-16 03:19:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a3a6124615827a34024d7a107858e1c71fedfd1,5a3a6124615827a34024d7a107858e1c71fedfd1,"fix(sync-state): Make sure folder progress goes between 0 and 1

Summary:
Also fix a related rendering issue and remove unused code.

Fixes T7538

Test Plan: tested locally

Reviewers: evan, spang, juan

Reviewed By: spang, juan

Maniphest Tasks: T7538

Differential Revision: https://phab.nylas.com/D3704"
emorikawa,2017-01-16 18:31:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac6e36440c7881c9504238b61d967a87b5ea9caf,ac6e36440c7881c9504238b61d967a87b5ea9caf,bump(k2)
emorikawa,2017-01-16 03:59:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/24b2632b0771714de6c0cd295663be42418bb831,24b2632b0771714de6c0cd295663be42418bb831,[local-private] use new action name
emorikawa,2017-01-16 18:28:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6f221d95bb5d5ee6c3514ef375b5c25e44c5395,c6f221d95bb5d5ee6c3514ef375b5c25e44c5395,"perf(sync): don't send message bodies across IPC & limit global IPC

Summary: don't send unnecessary crap over IPC

Test Plan: manual

Reviewers: spang, mark, juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D3705"
khamidou,2017-01-16 18:25:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0a6b50d149f05124fc713f5d691c07a2a260f47,f0a6b50d149f05124fc713f5d691c07a2a260f47,Reset the preferredChannel to stable.
khamidou,2017-01-16 18:24:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/f234a5aa3c72aac25abdba01e09121e5139a37ff,f234a5aa3c72aac25abdba01e09121e5139a37ff,"Set preferredChannel in the autoupdater instead of in the ChannelStore

It turns out that Squirrel checks for update at program launch. In some
cases, it would put Pro users on the ""nylas-mail"" channel because that's
the default channel if you don't pass a preferredChannel."
khamidou,2017-01-16 17:15:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/42fa1ce081acd4f69dc6b2bc545ac582cb2ee108,42fa1ce081acd4f69dc6b2bc545ac582cb2ee108,"Set preferredChannel in the autoupdater instead of in the ChannelStore

It turns out that Squirrel checks for update at program launch. In some
cases, it would put Pro users on the ""nylas-mail"" channel because that's
the default channel if you don't pass a preferredChannel."
spang,2017-01-16 00:04:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/949690f1921abf0adbc64ece969ac6374c3cfe0a,949690f1921abf0adbc64ece969ac6374c3cfe0a,[local-sync] throw proper error if invalid range passed to FETCH
emorikawa,2017-01-16 01:53:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/21983499284fb1cc16a59631dbb857a20308bbf1,21983499284fb1cc16a59631dbb857a20308bbf1,bump(version): 1.0.5
khamidou,2017-01-16 01:53:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/92e10a668a3ae67b65b05e13dc24cfce17c47303,92e10a668a3ae67b65b05e13dc24cfce17c47303,"[master] Replace ""Nylas N1"" by ""Nylas Mail"" in build scripts

Summary: As discussed --- we need to make those changes to make the autoupdater work across versions.

Test Plan: Will run a build.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3701"
jstejada,2017-01-16 01:38:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc7db122f9b1528f6e3fdba94826f2e434701485,dc7db122f9b1528f6e3fdba94826f2e434701485,":art:(send): Don't try to multi-send when only sending to 1 recipient

Summary:
This will make send for a single recipient faster, and open/link
tracking will continue to work as expected

Test Plan: manual

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3702"
jstejada,2017-01-16 01:20:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2138a36f65bec707c834fea8281abae6059dddb,c2138a36f65bec707c834fea8281abae6059dddb,"[local-sync] Fix yahoo sending

Summary: Was missing from in envelope when sending custom message

Test Plan: manual, tested sending from Gmail, Office365, Yahoo, all work

Reviewers: evan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3700"
khamidou,2017-01-16 01:06:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/de50ac0935ed6a48539593a506060b3d5bb2f22d,de50ac0935ed6a48539593a506060b3d5bb2f22d,"Fix broken autoupdater, for reals.

Conflicts:
	spec/auto-update-manager-spec.coffee
	src/browser/auto-update-manager.es6"
khamidou,2017-01-16 00:21:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8c023aa6ede38e7e80100e0cd4f7e3d06a5a8e8,f8c023aa6ede38e7e80100e0cd4f7e3d06a5a8e8,"[fix] [channel drop-down list] Show the stable channel in all cases.

Conflicts:
	internal_packages/preferences/lib/tabs/update-channel-section.jsx"
hallamoore,2017-01-16 01:01:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/52defbb828baf3db836f7945b2a217e1e6be80ce,52defbb828baf3db836f7945b2a217e1e6be80ce,"fix(icloud-sending): Add custom smtp settings

Summary: iCloud needs TLS

Test Plan: tested locally

Reviewers: tomasz

Reviewed By: tomasz

Differential Revision: https://phab.nylas.com/D3699"
hallamoore,2017-01-16 00:28:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1859049c6eea03826623b8eeb83b914f2eca5ee,c1859049c6eea03826623b8eeb83b914f2eca5ee,"[local-sync, iso-core] Don't treat inline images as attachments

Summary:
Don't show the attachment icon on threads that only have inline
images. We do this by assuming that inline images have a contentID,
and regular attachments do not. Also updates the way we send
attachments in order to adhere to this standard.

Test Plan: tested manually

Reviewers: spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3696"
khamidou,2017-01-16 01:06:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdcdd4a1e94d95345e62d4d403fb485ca09ebafb,bdcdd4a1e94d95345e62d4d403fb485ca09ebafb,"Fix broken autoupdater, for reals."
jstejada,2017-01-16 01:04:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/eba7bffc65215c388443758364702238804353e8,eba7bffc65215c388443758364702238804353e8,[local-sync] :art: renaming
jstejada,2017-01-16 00:42:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/c865934b1bb3182e412d661d18a1862d9d05c9dc,c865934b1bb3182e412d661d18a1862d9d05c9dc,"[local-sync] Fix imap box status check

Summary:
When syncing folders, we check if the folder needs syncing by checking if it has any new messages via the STATUS command (STATUS returns uidnext, highestmodseq among others, and is cheaper than SELECT)

However, we can't issue a STATUS on a box that is already selected. Previously, if the box was already selected, we would just return it, but this was incorrect because we wouldn't get the latest box values (e.g. uidnext), causing us to think that there were no updates available, and skip syncing folders that actually needed to be synced.

Now, if the box is already selected when getting the status, we have to re select it to refresh the latest values

Test Plan: manual

Reviewers: evan, khamidou, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3697"
khamidou,2017-01-16 00:21:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/f77eacafaf24c16db962dcd7edcc1614bed38648,f77eacafaf24c16db962dcd7edcc1614bed38648,[fix] [channel drop-down list] Show the stable channel in all cases.
hallamoore,2017-01-15 23:51:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/b52ce6f30519a5ea0dfd9a030dbf0e337b5a3ccf,b52ce6f30519a5ea0dfd9a030dbf0e337b5a3ccf,"[local-sync] Don't run interrupts within the sync-worker serially

Run them at the same time instead, using Promise.all()"
emorikawa,2017-01-15 23:41:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaf06179bf76d15acdfbff348463301191505ff2,aaf06179bf76d15acdfbff348463301191505ff2,bump(k2)
emorikawa,2017-01-15 23:35:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/8402a7b4728a77b0ba5b2dacbb104363bb728282,8402a7b4728a77b0ba5b2dacbb104363bb728282,[local-sync] fix lowerbound error where uid set could be zero
emorikawa,2017-01-15 23:23:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/795cdcbe77ff30c5f0dc01883b8aeada8f0ce531,795cdcbe77ff30c5f0dc01883b8aeada8f0ce531,bump(version): 1.0.4
emorikawa,2017-01-15 23:22:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/15cf7024b9d2783defa9a191ea1bc93d82090ac9,15cf7024b9d2783defa9a191ea1bc93d82090ac9,bump(k2)
hallamoore,2017-01-15 22:10:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c00b5d99f8bf89a9f82e635bc52f9659dd3eb40,4c00b5d99f8bf89a9f82e635bc52f9659dd3eb40,"feat(sync-status): Hide syncback tasks inside the expanded details

Summary:
Except for send tasks, place notifications of syncback tasks inside
the expanded sync details.

Addresses T7458

Test Plan: tested locally

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3693"
emorikawa,2017-01-15 23:12:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb204bf0fbf0c9914dec55b6c46937d143e26241,cb204bf0fbf0c9914dec55b6c46937d143e26241,"perf(scroll): improve thread list scroll perf

Summary:
Lots of components were rendering when they didn't have to on the very
frequent account sidebar updates

Test Plan: manual

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3691"
emorikawa,2017-01-15 23:12:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/6357ef4ff9eaabb705398dad394f54e3b8c071fd,6357ef4ff9eaabb705398dad394f54e3b8c071fd,"[local-sync] decode quoted-printable encoded attachments

Summary:
Needed to stream process quoted-printable attachments
Fixes T7530

Test Plan: manual

Reviewers: juan, spang

Reviewed By: spang

Maniphest Tasks: T7530

Differential Revision: https://phab.nylas.com/D3690"
jstejada,2017-01-15 23:10:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/a217fb27fa1116340031652bf5a2125897aa1035,a217fb27fa1116340031652bf5a2125897aa1035,bump k2
jstejada,2017-01-15 20:52:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae9d6f75defbab23fe5859d313132125844f5266,ae9d6f75defbab23fe5859d313132125844f5266,"[local-sync] Make all syncback tasks interrupt sync so they run fast

Summary:
This commit also lowers the batch size of messages to fetch on folder sync down to 30. This is in order to prevent sync from getting stuck if we queue too many syncback tasks-- given that we only update the range of fetched uids after we've actually fetched and processed messages, if the batch size is too big and we interrupt too often, we might end up never advancing the range and re fetching the same messages over and over.
This also makes the sync loop run faster through all folders in general.

Depends on D3689 to make sure that the batch size actually reflects a message count, i.e. to ensure that we are making /visible/ progress.

Test Plan: manual

Reviewers: spang, khamidou, evan

Reviewed By: evan

Maniphest Tasks: T7477

Differential Revision: https://phab.nylas.com/D3692"
hallamoore,2017-01-15 22:30:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/96f6d8380ba84013befe617732ac50ee7fdc3399,96f6d8380ba84013befe617732ac50ee7fdc3399,"[iso-core] Use `SUPPORTED_PROVIDERS` in `Account.smtpConfig()`

Summary:
Consolidating provider checks to use the same source of truth.
Fixes send issues with some provider types.

Test Plan: tested locally

Reviewers: tomasz

Reviewed By: tomasz

Differential Revision: https://phab.nylas.com/D3694"
spang,2017-01-15 01:48:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/3034d8b7ce068e9cd4dce37e33c1c850c8bb4d4f,3034d8b7ce068e9cd4dce37e33c1c850c8bb4d4f,"[local-sync] Fetch at least the batch size of messages on each sync iteration

Summary:
Because we optimistically fetch UIDs by expanding a range without looking
at the actual UIDs in the inbox and the actual space of UIDs with messages
attached may be sparse due to message moves, we need to track how many
messages we actually download during a range expansion and continue
expanding the range if we haven't downloaded enough messages.

If we reach a large gap where we download no messages at all during a batch, we
pause and check the actual UID list for the folder for the next UID to
download, as otherwise we may spin indefinitely fetching UIDs that don't exist.
(Example: my ""Deleted Items"" folder had about 300k worth of empty UIDs between
a very small UID and a very large UID. With the new system, this registers as a
completed sync within a single iteration as soon as sync hits the gap.)

Test Plan: manual

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3689"
khamidou,2017-01-15 22:10:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/98970fce0ea624e86a6dd4a89293636de6f05f29,98970fce0ea624e86a6dd4a89293636de6f05f29,Bump K2 version.
khamidou,2017-01-15 22:10:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2ed1f45c0fce9255134a592b6a5fc7a82b1c3e1,e2ed1f45c0fce9255134a592b6a5fc7a82b1c3e1,Fix autoupdater – we were using the wrong command.
khamidou,2017-01-15 22:09:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/009219b76e97ef1b0166952d860827c80306e217,009219b76e97ef1b0166952d860827c80306e217,Fix unit test path.
khamidou,2017-01-15 20:09:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc0ab04971224cdccd213e44c981ffa94ec5dbf2,dc0ab04971224cdccd213e44c981ffa94ec5dbf2,"HACK HACK HACK Allow querying account tokens by email address too.

We've got a plethora of ""unique"" ids for the same account and ot looks
like a recent regression is preventing us from fetching an API token for
an account from the keychain. This diff changes the AccountStore to be
able to fetch data using an account's email address. Will figure how to
do things better after launch.

Test plan: Checked that it worked for a broken account."
emorikawa,2017-01-15 20:08:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7c61a3032226933fa4bb82f7a29f8f495e50773,d7c61a3032226933fa4bb82f7a29f8f495e50773,feat(onboarding): add client_edition=pro to onboarding flow
emorikawa,2017-01-15 20:07:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/64a7d8fa0c6222a10edeb882b806cc77c3b7007c,64a7d8fa0c6222a10edeb882b806cc77c3b7007c,feat(onboarding): add client_edition=basic to onboarding flow
emorikawa,2017-01-15 20:06:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/884529e7b4365623903455d3098dfe43ee653376,884529e7b4365623903455d3098dfe43ee653376,bump(k2)
khamidou,2017-01-15 19:57:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/32c1caa6c6f38e60e15d1919e71559aec9c19ffc,32c1caa6c6f38e60e15d1919e71559aec9c19ffc,"[local-sync] Back off exponentially when getting a sync error

Summary:
This patch changes the sync worker to back off exponentially when there is an issue syncing an account. This has two goals:
- first, it's a bit dangerous to retry immediately. We don't want hundreds of thousands of machines trying to refresh tokens unsuccessfully because our service is struggling.
- second, it's nicer on the CPU to wait a bit between retries.

Currently, we sleep for at most 2 minutes, with some random jitter added.

Test Plan: Tested manually, stared at the code a long time.

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3684"
hallamoore,2017-01-15 02:17:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/89e48b19f6939f3678d5eb8a0b45b1b4eb5ba05f,89e48b19f6939f3678d5eb8a0b45b1b4eb5ba05f,"[local-sync] Stop sync worker before deleting account database

Summary:
Various errors are thrown when the sync worker tries accessing
a database that we've already deleted, so make sure the sync
worker has been stopped before we remove the database. This diff
involves modifying `Interruptible` so that `interrupt()` returns
a promise that resolves once the interrupt has been completed.

Addresses T7472

Test Plan: manual

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3679"
spang,2017-01-15 18:06:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/766c1b95b067fcfdfed6d44232ae2f617fa9e153,766c1b95b067fcfdfed6d44232ae2f617fa9e153,[local-sync] Update comment on _processExistingMessage
spang,2017-01-15 18:04:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/b6f725a780feb8b5fd780006aab3f363bca59171,b6f725a780feb8b5fd780006aab3f363bca59171,[local-sync] Correctly add references when processing existing messages
emorikawa,2017-01-15 02:37:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4bea7abd1e6b98c6ef68006119f53d2d7a402f2,b4bea7abd1e6b98c6ef68006119f53d2d7a402f2,bump(k2)
emorikawa,2017-01-15 02:36:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf0fa55c1ab4cf47b46c3b8bd2750110a8ef49d3,bf0fa55c1ab4cf47b46c3b8bd2750110a8ef49d3,[local-sync] fix fetch unsynced messages logic looking for min
emorikawa,2017-01-15 01:51:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e54b5713942525e8b82a8bbd80e8a33d87082623,e54b5713942525e8b82a8bbd80e8a33d87082623,bump(version): 1.0.3
emorikawa,2017-01-15 01:51:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0de4179bed84da87d9b2eed7f69ba733dac4b6e1,0de4179bed84da87d9b2eed7f69ba733dac4b6e1,bump(k2)
emorikawa,2017-01-15 01:51:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/2efe44cfca28b94d9bd569db2b10f5cb5fb63895,2efe44cfca28b94d9bd569db2b10f5cb5fb63895,"fix(auth): fix unnecessarly loud api errors

Summary:
Fixes T7520
Gets rid of the Gmail auth error too

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Maniphest Tasks: T7520

Differential Revision: https://phab.nylas.com/D3688"
jstejada,2017-01-15 01:36:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/a112dc67c737e028d5f9ac80459080960c3a2594,a112dc67c737e028d5f9ac80459080960c3a2594,[local-sync] Fix order of execution in fetch-messages-in-folder
emorikawa,2017-01-15 01:40:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9ff87b97ac71c0a83ac9a8a7b39462e3d334188,f9ff87b97ac71c0a83ac9a8a7b39462e3d334188,"fix(subscription): show Nylas Basic subscription with CTA to upgrade

Summary:
Removes references to the N1 ID expring.

Luckily, local-sync Nylas Mail Basic doesn't need the nylas ID to do
pretty much anything, which means we don't need to worry about the ""trial""
status of the Nylas ID. The existing trial infrastructure will only kick
into place when someone connects an email account with the Nylas Cloud
Sync servers for the first time.

The one place we do check for the Nylas ID is in the
cloud-api/src/authentication route. Here we hit
https://billing.nylas.com/n1/user and simply expect to get back a Nylas
ID. As long as we return the existence of a Nylas ID (which should ignore
whether or not the old subscription system is ""valid""), the API calls will
succeed.

This makes the ""Upgrade Now"" button go to
billing.nylas.com/dashboard?upgrade_to_pro=true with the auto-sign in
features enabled. This will automatically log the user into the Nylas
billing site with the upgrade_to_pro=true flag set.

There is also a new ""Learn More"" button which goes to
https://nylas.com/nylas-pro.

@mike, will these urls work?

Test Plan: manual

Reviewers: khamidou, mike, juan

Reviewed By: juan

Subscribers: mike

Differential Revision: https://phab.nylas.com/D3680"
hallamoore,2017-01-15 01:28:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/410b0e0becaffe75f7f693662cea2976e1c752ee,410b0e0becaffe75f7f693662cea2976e1c752ee,"feat(fastmail): Add fastmail as a supported provider

Summary:
Also fixes an issue where we would show all any accounts
that aren't gmail or office365 as a generic imap account.

Depends on D3686

Test Plan: manual

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3687"
hallamoore,2017-01-15 01:24:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/0360a58e4f69c6ec590665601c91f18487247715,0360a58e4f69c6ec590665601c91f18487247715,"[iso-core] Let auth methods accept all supported providers

Summary: Treat any that aren't gmail or office365 as standard imap

Test Plan: manual

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3686"
emorikawa,2017-01-15 01:28:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/197a3a4a11e1b3d5e408f5b9fb8b05ed3ebdfae6,197a3a4a11e1b3d5e408f5b9fb8b05ed3ebdfae6,"fix(cal): remove calendar from protcols

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3685"
emorikawa,2017-01-15 01:27:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/8812ff63b080c20a59e01b171b04ea823b36d129,8812ff63b080c20a59e01b171b04ea823b36d129,"[local-sync] fix performance of attribute changes

Summary:
On MG's machine this function is EXTREMELY non performant and causes
things like archive to lock up when the console is running here for some
reason. Not entirely sure exactly what's causing it, but there were some
simple DB cleanups that will make it faster for large queries.

There's likely other things involved since the sequelize DB being locked
up shouldn't affect the peformLocal of the edgehill db for things like
archive. Still looking into that

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3683"
jstejada,2017-01-15 01:23:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1df17e1576d584955780812b095b3d63c7dfbc9,b1df17e1576d584955780812b095b3d63c7dfbc9,[local-sync] :art:
grinich,2017-01-14 20:43:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ebe6b92e2eb2bf4f5caf6b1004b5008402f7986,8ebe6b92e2eb2bf4f5caf6b1004b5008402f7986,"💅 new Nylas Mail icon

Test Plan: Gotta test a Travis build

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3676"
grinich,2017-01-15 00:56:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc51a27526c0825e45660afb9587bc48fae1a4f0,dc51a27526c0825e45660afb9587bc48fae1a4f0,"Revert ""💅 new Nylas Mail icon""

This reverts commit efe8fead34e561ea2603c36d10dae3c38d8c9ce7."
jstejada,2017-01-15 00:32:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/978e3462fd23e8ddaf4098539d536a6e681cf8b3,978e3462fd23e8ddaf4098539d536a6e681cf8b3,[local-sync] Await instead of yielding when fetching the very first batch of messages in folder sync
jstejada,2017-01-15 00:22:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/9077fd2301413e3575707794194fc0ec8a983eab,9077fd2301413e3575707794194fc0ec8a983eab,[local-sync] Minor syntax fix
emorikawa,2016-11-22 21:01:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9f6662b0e6c6d2880d7ca54d87290a87c022a17,f9f6662b0e6c6d2880d7ca54d87290a87c022a17,fix(spellcheck): fix right click menu on spellcheck
jstejada,2017-01-15 00:18:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/135d499451004d9eefa3fa2bbd0b404781c71b9e,135d499451004d9eefa3fa2bbd0b404781c71b9e,bump(submodule)
jstejada,2017-01-14 23:55:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/cedec79b0136d5025b99c053bb40d899958f581e,cedec79b0136d5025b99c053bb40d899958f581e,"[local-sync] Skip unecessary folder syncs

Summary:
Before trying to sync a folder, check if we actually need to do so. This will prevent us from doing unnecessary work that slows down the sync loop (like performing SELECT commands)

We will perform a folder sync if any of the following are true
- The folder hasn't been completely synced
- There are new messages (using imap STATUS command)
- There are attribute changes indicated via highestmodseq (using imap STATUS command)
- If server doesn't support highestmodseq, it has passed enough time since we last ran an attribute scan on the folder.

Addresses T7513

Test Plan: manual

Reviewers: evan, halla, spang

Reviewed By: halla, spang

Differential Revision: https://phab.nylas.com/D3675"
spang,2017-01-14 22:57:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/7935b3799dba109a7d559a51d0d8c18eedbb10a8,7935b3799dba109a7d559a51d0d8c18eedbb10a8,[local-sync] grr phab lost this update
spang,2017-01-14 21:34:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/00336e0d812d6e4b61941266cd50cfab46c2038e,00336e0d812d6e4b61941266cd50cfab46c2038e,"fix(sync-status): Update how we calculate sync status

Summary: Concommitant diff to D3677

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3678"
spang,2017-01-14 21:21:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/387d6894159376f5aecc6216ab451f4594ee48e8,387d6894159376f5aecc6216ab451f4594ee48e8,"[local-sync] Fetch min UID in each folder for use in sync state

Summary:
Currently, our mail sync strategy of expanding UID ranges from UIDNEXT
backwards until a UID of 1 implicitly assumes that every UID corresponds to an
actual message. This assumption is incorrect, and results in several
significant bugs regarding sync status.

This patch fixes issue 1:

Since UIDs are persistent and, so long as the UIDVALIDITY is valid, ascend
monotonically upward, every time you move a message to a new folder you ""lose""
UIDs lower down in the range. In my work Inbox, where I get a lot of mail,
archive all the time, and generally have only a small number of threads in the
mailbox, the smallest UID is over 100k.  This means that, after all my inbox
messages are synced, the sync loop will continue attempting to download
nonexistent old messages in this mailbox for hundreds of sync iterations, and
will not mark the mailbox as fully synced until fetchmin reaches 1, regardless
of the fact that there are no actually messages being pulled down.

This patch needs a small associated patch to N1 to update how sync status is
calculated (coming soon).

The next patch in this series will deal with gaps in the UIDspace that slow
down syncing of a folder.

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3677"
emorikawa,2017-01-14 22:47:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d29e7d4d0ad90eaa4ca40f4c3f024ab6991f592,1d29e7d4d0ad90eaa4ca40f4c3f024ab6991f592,feat(yahoo): got yahoo sending fixed
emorikawa,2017-01-14 22:46:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/44f8bf0627a4a3bfa1378bcc322967af6692f711,44f8bf0627a4a3bfa1378bcc322967af6692f711,[isomorphic-core] allow custom smtp configs
grinich,2017-01-14 20:43:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/efe8fead34e561ea2603c36d10dae3c38d8c9ce7,efe8fead34e561ea2603c36d10dae3c38d8c9ce7,"💅 new Nylas Mail icon

Test Plan: Gotta test a Travis build

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3676"
jstejada,2017-01-14 22:31:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca8bdaf651544d4c96189377477381cd99e887a8,ca8bdaf651544d4c96189377477381cd99e887a8,"[local-sync] Cleanup, use Provider constants"
spang,2017-01-14 15:00:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/519a1f163019ede7cd6c3baed3195f497dbf5b73,519a1f163019ede7cd6c3baed3195f497dbf5b73,[local-sync] fix comment
spang,2017-01-13 20:20:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/f69ce97613b77e84b8587538a97681347540fa17,f69ce97613b77e84b8587538a97681347540fa17,[local-sync] canonicalize references
hallamoore,2017-01-14 18:42:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/87d963dc44ec10875efcc364ca492958f978ec11,87d963dc44ec10875efcc364ca492958f978ec11,:lipstick:(account-onboarding): Fix margins on the accounts list
emorikawa,2017-01-14 03:31:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/96e07b6adfe819227df1385a9873ca1b756fec35,96e07b6adfe819227df1385a9873ca1b756fec35,bump(version): 1.0.2
emorikawa,2017-01-14 03:31:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bc9b5a66878c4efe5fa67087d936fbd53c9ff43,5bc9b5a66878c4efe5fa67087d936fbd53c9ff43,bump(k2)
emorikawa,2017-01-14 03:31:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/5dc22a4b20e1c01fb5607147f769a2122cfe3330,5dc22a4b20e1c01fb5607147f769a2122cfe3330,[local-sync] fix duplicate ensure in sent folder
emorikawa,2017-01-14 03:03:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ff0b87d8f7d9069dbe8f138400c4a8c3a32bf0c,1ff0b87d8f7d9069dbe8f138400c4a8c3a32bf0c,bump(version): 1.0.1
jstejada,2017-01-14 03:01:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/99c3ff87b541dd9b0c269513a6b590692130f271,99c3ff87b541dd9b0c269513a6b590692130f271,"fix(send): Impose stricter attachment size limits on send

Summary: See title

Test Plan: Manual

Reviewers: jackie, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D3670"
jstejada,2017-01-14 03:01:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/239aa612095facabd0386762459da45b09e749c2,239aa612095facabd0386762459da45b09e749c2,"[local-sync] Separate sending tasks from the sync-loop

Summary:
We want to do this in order to prevent send tasks from blocking the sync loop given that they can take a very long time to run. This is especially true when sending emails with large attachments to multiple recipients.
There is no real way to make sending in these cases faster, but we can prevent it from blocking the sync loop at least, especially because sending is mostly I/O bound.

This is a bit messy actually, but should be fixed when we properly implement a sync scheduler

Also added a limit to the total size of attachments you can upload to try to prevent weird EPIPE errors when sending.
See: D3670.

Also moved and renamed stuff a little

Test Plan: manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3669"
emorikawa,2017-01-14 03:00:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/efd20d64e7e0fd24f6f95209d728958967fd8e1c,efd20d64e7e0fd24f6f95209d728958967fd8e1c,"fix(reset): fix the account reset button for K2

Summary: Depends on D3672

Test Plan: manual

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3673"
emorikawa,2017-01-14 02:59:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/f141b7253a66d966c043bf0c33539ad2c1e8d308,f141b7253a66d966c043bf0c33539ad2c1e8d308,"[local-sync] fix reset accounts and data button

Summary: Allows us to reset accounts in local-sync too

Test Plan: manual

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3672"
emorikawa,2017-01-14 02:54:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/63a0f4946b42d8589a2779b79a0f131b7b1af8c8,63a0f4946b42d8589a2779b79a0f131b7b1af8c8,"Fix references for ~/.nylas to ~/.nylas-mail

Summary: Fix references to nylas-mail

Test Plan: manual

Reviewers: jackie, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3674"
khamidou,2017-01-14 02:45:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/90ae2ac596db5d38f4cfcca41b45cf7bf2ae71fd,90ae2ac596db5d38f4cfcca41b45cf7bf2ae71fd,fixed failing test
hallamoore,2017-01-14 01:53:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/af55ad4ff7261fda10d10f6f4648cef2f029c0f7,af55ad4ff7261fda10d10f6f4648cef2f029c0f7,"fix(sync-messaging): Update other messaging to check per-folder sync status

Summary:
Also fixes an issue where accounts weren't being removed from
NylasSyncStatusStore because `subscriptions` was used instead of
`_subscriptions`. Specifically, rename `_subscriptions` to
`_accountSubscriptions` so we get an explicit runtime error if
the `_` is left out.

Test Plan: tested locally

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3671"
khamidou,2017-01-14 00:49:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/64db3910ff6276b09ae25963134e2d6768493c3b,64db3910ff6276b09ae25963134e2d6768493c3b,Use staging autoupdater for staging.
khamidou,2017-01-14 00:49:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d728b527a69ba609e4b074f94ba842aa45c2c6e,2d728b527a69ba609e4b074f94ba842aa45c2c6e,Use staging autoupdater for staging.
emorikawa,2017-01-14 00:26:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5ceb14151f8819cfecd3e6ed93fa800f5493895,b5ceb14151f8819cfecd3e6ed93fa800f5493895,"fix(task): tasks re-attach to ProviderSyncbackRequests

Summary:
The old task queue for message changing tasks (like mark unread and
archiving) had a system that would only do 5 at a time until the Promises
resolved. Unfortunately our new system doesn't resolve the request
promises until the full IMAP task is actually complete. When you're moving
dozens of messages this can take a very long time since they're currently
not prioritized in sync.

Furthermore if you quit the app while this is inprogress, the Tasks had no
way of saving the status of each of the syncback actions. This means when
you restarted the app, the TaskQueue would get re-inflated and try tasks
again. We now keep track of any tasks that have started and either look
for them in the database or re-listen for their changing status again.

Test Plan: manual

Reviewers: mark, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3666"
emorikawa,2017-01-14 00:17:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/d700fcbb8ce6fd14a6a103753fe23b093d3562e3,d700fcbb8ce6fd14a6a103753fe23b093d3562e3,fix(error): also listen to process errors in windows for async/await
emorikawa,2017-01-14 00:17:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/a865fabe488eb853f347e3062c9ea9459df12d67,a865fabe488eb853f347e3062c9ea9459df12d67,[local-private] use new Sentry endpoint
hallamoore,2017-01-13 23:30:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/125cd96c5e6621fd5ac4cd524f51e0bdc5c60141,125cd96c5e6621fd5ac4cd524f51e0bdc5c60141,"[local-sync] Update oldestProcessedDate logic

Summary:
I happened to be testing between Jan 2017 and Dec 2016, so I
missed this logic flaw. Boo.

Test Plan: tested locally

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3667"
hallamoore,2017-01-13 22:55:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/398dcf276f866565c1b86a5e411c34c93376b5ef,398dcf276f866565c1b86a5e411c34c93376b5ef,"[local-sync] Make sure we're saving sent messages with 'SEEN' flag

Summary: We did this for gmail, but not for other providers.

Test Plan: tested locally

Reviewers: juan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3665"
jstejada,2017-01-13 23:00:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b24ccdecb0ae4a6b7d5ad020bac91320dceb330,8b24ccdecb0ae4a6b7d5ad020bac91320dceb330,[local-sync] fix build
hallamoore,2017-01-13 22:35:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/a925cd71c57dbcb121f0b220d9a433379fa4089d,a925cd71c57dbcb121f0b220d9a433379fa4089d,fix(task-labels): Remove an extra ellipsis I missed.
hallamoore,2017-01-13 21:40:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/944afbc976c51c0734c5cf314a0f48e91474a89f,944afbc976c51c0734c5cf314a0f48e91474a89f,"fix(task-labels): Remove ellipses from hardcoded labels and fix css class

The css class was accidentally renamed in another commit. Bring it back and
remove the hard-coded ellipses, since the ellipsis is now part of a css
psuedo element."
hallamoore,2017-01-13 21:38:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/42e0854ebeb7e8795532519db40fa03764cc1d65,42e0854ebeb7e8795532519db40fa03764cc1d65,"[local-private] Update task label

Remove ellipsis, since it is now included as part of a css psuedo element"
khamidou,2017-01-13 21:34:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/f680e6fc9dbf27d07d1446d8c5e03e3bfed58261,f680e6fc9dbf27d07d1446d8c5e03e3bfed58261,Bump version to 1.5.0
khamidou,2017-01-13 21:23:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/b6a51872649082955b5fcadc5ff65931b370b4f2,b6a51872649082955b5fcadc5ff65931b370b4f2,Bump to version 1.0
jstejada,2017-01-13 19:48:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e7b836b8412ba374a0406a251f84183d86aab30,0e7b836b8412ba374a0406a251f84183d86aab30,"[local-sync] Cleanup sync tasks to be more consistent with syncback tasks

Summary: While working on separating send out of the sync loop, I realized sync tasks could use some cleanup to be more consistent with how we implemented syncback tasks. I reorganized and renamed things a little bit. This will also help us move in the direction of the scheduler implementation under which everything is a task.

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3660"
emorikawa,2017-01-13 20:20:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ac303272b5a2caf505d305deed65f822bdd3400,4ac303272b5a2caf505d305deed65f822bdd3400,bump(version): 0.5.11
emorikawa,2017-01-13 20:19:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d18181f77defae7bf63584a450ee8da4ce7df53,8d18181f77defae7bf63584a450ee8da4ce7df53,"fix(config): move from ~/.nylas-k2 to ~/.nylas-mail

Summary:
fix(config): move from ~/.nylas-k2 to ~/.nylas-mail

fix(auth): ignore onboarding urls that aren't Nylas

feat(sig): change default signature

bump(k2)

Test Plan: manual

Reviewers: halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3664"
emorikawa,2017-01-13 20:13:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/87be12387539d0c740de918b03687850ec8de20f,87be12387539d0c740de918b03687850ec8de20f,"feat(migrate): migrate data and settings from Nylas Mail Basic

Summary: fixes to migrator and Nylas Pro langauge

Test Plan: manual

Reviewers: khamidou, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3661"
hallamoore,2017-01-13 19:56:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/704c0b27c670ff50ecd8435115486a1112d7106c,704c0b27c670ff50ecd8435115486a1112d7106c,"fix(initial-sync-status): Change how we display the sync status

Summary:
This diff takes out the progress bars, since they can appear to
not move for very large mailboxes. Instead, just show an icon that
indicates whether the sync is complete or in progress, and add a
tooltip that displays how far back the folder has been synced to.

Submodule commit is D3662

Test Plan: tested locally

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3663"
hallamoore,2017-01-13 19:53:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3a9f66a440591c63d286cd72ae2132a71b05f17,b3a9f66a440591c63d286cd72ae2132a71b05f17,"[local-sync] Add `oldestProcessedDate` to `Folder.syncState`

Summary:
Only updated within month precision. We can use this to show how
far back a folder has been synced.

Test Plan: tested locally

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3662"
emorikawa,2017-01-13 20:00:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/79696237030ced3701a2a0d12fab8d337ea30155,79696237030ced3701a2a0d12fab8d337ea30155,"[local-sync] fix attribute scanning in sync worker

Summary:
Fixes https://phab.nylas.com/T7435

The old deepScan (now `scanForAttributeChanges`) and shallowScan (now
`fetchLatestAttributeChanges`) had some fatal flaws.

If you deep scanned it would attempt to load the message attributes of all
messages ever and cause very bad memory leaks.

Also, if you left a mailbox running for a long time, there was a query
that would eventually run `Message.findAll` and, even though it was just
returning the headers, would still run insanely expensive operations

This fixes (and renames) these issues.

Test Plan: manual

Reviewers: spang, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3657"
spang,2017-01-13 19:15:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/7231353dd944d61c09405bcbed9f58a7080f11bd,7231353dd944d61c09405bcbed9f58a7080f11bd,[local-sync] Fix parsing of existing messages derp
khamidou,2017-01-13 19:03:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/c92704ac49fbb36019288b3713b1cc84bdd2890d,c92704ac49fbb36019288b3713b1cc84bdd2890d,"[feat] [autoupdater] Let N1 specify a preferred channel.

This is the companion commit to https://github.com/nylas/N1/commit/266e6edbcfe05cca2ede74824d244132899d36fd
As part of this commit, we want N1 to be able to specify a preferred
channel. For the N1-next branch this channel will be `nylas-mail`. For
the `stable` branch, it's going to be `stable` since we don't want newly
downloaded Nylas Pro copies to be on the `nylas-mail` channel."
khamidou,2017-01-11 22:29:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/266e6edbcfe05cca2ede74824d244132899d36fd,266e6edbcfe05cca2ede74824d244132899d36fd,"[feat] [autoupdater] Introduce a new channel, ""Nylas Mail"" + let N1
specify a preferred channel."
spang,2017-01-07 22:31:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/61e3349613ed3a637ed8cfa3e4900ac790bd1c94,61e3349613ed3a637ed8cfa3e4900ac790bd1c94,"[local-sync] For generic IMAP, Thread based on Message-Id, In-Reply-To & References

Summary:
This swaps out our generic IMAP threading mechanism to use the threading
headers on the message instead of the prior way of grouping by subject
and then differentiating based on participants, as that design was
somewhat driven by what we could accomplish easily given legacy data
schema decisions and has serious caveats, such as different threads between
the same people with the same subject being misthreaded together. With K2, we
have free reign to change the data format, so we can do it right.

The algorithm is super simple:
- Define ""references"" as the union of the Message-Id, In-Reply-To, and
References headers on a message, filtered for valid RFC2822 Message-IDs
- On message sync, if any element of the new message's references
matches any element of an existing message's references, thread them
together

In order to accomplish this, we need to store References in a way that
allows each element to be indexed for fast lookup. That meant either
using the sqlite JSON1 extension + expression-based indices, or creating
a new table. I chose the latter as a time-tested and simple solution,
since we don't need the flexibility of JSON here.

Test Plan: manual - unit tests coming

Reviewers: khamidou, evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3651"
spang,2017-01-13 15:46:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/c513ba8e075be593a32fd5df293c25da52f45526,c513ba8e075be593a32fd5df293c25da52f45526,[local-sync] Messages generated for send should not be unread
spang,2017-01-12 22:16:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/6182f4d88e8b1cbea64a14c9b7994ff3af572235,6182f4d88e8b1cbea64a14c9b7994ff3af572235,"[isomorphic-core] Disable nodemailer's automatic X-Mailer header

Examined the headers on a message we sent and found this:
> X-Mailer: nodemailer (2.5.0; +http://nodemailer.com/; SMTP/2.6.0[client:2.8.0])

No need to plaster which sendmail library we're using all over every
email our users send. Turn it off!"
jstejada,2017-01-12 21:42:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/80e872284ef5fffe0ce9d41a99be57c162df982f,80e872284ef5fffe0ce9d41a99be57c162df982f,"[local-sync] Don't sync spam until everything else is synced

Summary: Addresses T7426

Test Plan: manual

Reviewers: evan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3655"
jstejada,2017-01-12 20:30:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5e54bad09956935b6f6e8b93e98620846c1f29e,c5e54bad09956935b6f6e8b93e98620846c1f29e,"fix(offline-state): Make sure we periodically update it

Summary: See title

Test Plan: manual

Reviewers: evan, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3652"
emorikawa,2017-01-12 20:09:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea736a529ae269f0f39a13a452e968359b08c94e,ea736a529ae269f0f39a13a452e968359b08c94e,bump(version): 0.5.10
emorikawa,2017-01-12 20:06:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/99968713572dfdd2667880aeb7a1c361d58b61e7,99968713572dfdd2667880aeb7a1c361d58b61e7,bump(k2)
jackiehluo,2017-01-12 01:41:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/202e4f43951859aba652a0257d576effdb58c781,202e4f43951859aba652a0257d576effdb58c781,":art:(rename): Update Nylas N1 to Nylas Mail

Test Plan: Tested locally.

Reviewers: halla, juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3645"
jackiehluo,2017-01-12 01:39:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/69aaff86bf7f0d8f92d80e7d27b5de165b3a0edf,69aaff86bf7f0d8f92d80e7d27b5de165b3a0edf,"Update Nylas N1 to Nylas Mail

Test Plan: Tested locally.

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3644"
jstejada,2017-01-12 19:16:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e275e0064e0ebf0dd4b21cc6aca41ca480e0d9a,8e275e0064e0ebf0dd4b21cc6aca41ca480e0d9a,"[local-sync] Ensure we get new mail ASAP via dedicated imap conn

Summary:
Add a new dedicated imap connection to listen for any updates or new mail on the inbox.
Previously, we wouldn't be able to receive new mail events on the inbox during the sync loop
because other mailboxes would be open while we sync them. This would cause big
delays in receiving new mail, especially if you have a lot of folders

Test Plan: manual

Reviewers: spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3650"
hallamoore,2017-01-12 18:44:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/580cfb67889d6c770e5258dec201f7efdd19885b,580cfb67889d6c770e5258dec201f7efdd19885b,"fix(SyncbackCategoryTask): Make category operations optimistic again

Summary:
We don't see any weird double object behavior when delete deltas are
working properly, so might as well be optimistic since it makes for
a better user experience. This diff also notifies the user if a
category operation fails because of a mail provider restriction.

Fixes T7475

Test Plan: tested locally

Reviewers: juan, evan

Reviewed By: evan

Maniphest Tasks: T7475

Differential Revision: https://phab.nylas.com/D3648"
hallamoore,2017-01-11 21:54:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/da89ff1bd1499d0ccaa948b0a4694aa3614f81b6,da89ff1bd1499d0ccaa948b0a4694aa3614f81b6,"fix(custom-imap): Hide custom imap accounts and settings from onboarding

Summary:
IMAP no longer appears on the onboarding account list, and the option to
edit connection settings does not appear for any of the visible account
types. Custom IMAP accounts can still be added via a menu option.

Fixes T7474

Test Plan: tested locally

Reviewers: juan, jackie, evan

Reviewed By: evan

Maniphest Tasks: T7474

Differential Revision: https://phab.nylas.com/D3636"
hallamoore,2017-01-12 02:08:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee8ddfcf62ef65be6f427fcd551dc5d927c48533,ee8ddfcf62ef65be6f427fcd551dc5d927c48533,"[iso-core]: Make sure deltaStreamBuilder passes along delete deltas

Summary:
We don't want to inflate delete Transactions, but we do still want
to pass the delta itself along.

Test Plan: tested locally

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3647"
spang,2017-01-12 15:43:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ff1eff6dc2ccae8cfd26667836f89ce0889e6eb,6ff1eff6dc2ccae8cfd26667836f89ce0889e6eb,"[local-sync] Enable toggling ENABLE_SEQUELIZE_DEBUG_LOGGING on launch via an env var

It's much more convenient to be able to turn this on/off without
editing the code."
spang,2017-01-12 02:06:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/725e05f01b748f437a1bb9519e0ab9dce39e6add,725e05f01b748f437a1bb9519e0ab9dce39e6add,"[local-sync] Still download messages when they have no body

There are plenty of valid use cases for sending subject-only emails,
and we also want to still download the headers and create message
objects if e.g. the email consists of only an event invitation or
an attachment."
jstejada,2017-01-12 01:24:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/ddebb92d2944d6c210f6d3beffda5460b069df70,ddebb92d2944d6c210f6d3beffda5460b069df70,"fix(notifs) Restore offline notification

Summary: See title

Test Plan: tested locally

Reviewers: evan, halla, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3643"
emorikawa,2017-01-12 00:48:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/e533b65d1ac4e0ba3aebbaf5388e48a21c9231aa,e533b65d1ac4e0ba3aebbaf5388e48a21c9231aa,bump(k2)
jstejada,2017-01-11 23:41:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/8bbf18373b2726cdccd8ac030af5dc23d4577b3e,8bbf18373b2726cdccd8ac030af5dc23d4577b3e,"[local-sync] Make sure IMAPConnection times out correctly

Summary:
This commit passes down the `socketTimeout` option to node-imap. However, just
passing this option doesn't seem to work reliably, so this commit manually implements
the socketTimeout option for our IMAPConnection.

How it works is that basically every operation is wrapped with a timeout by
augmenting  the `createConnectionPromise` construct that already existed.

Test Plan:
Locally, tested by sleeping computer and turning off wifi. The
connection will successfully error and be restarted. It will reconnect when the
network is available again

Reviewers: khamidou, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3642"
pfista,2017-01-11 22:34:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/6892f51146af6b9b11d15f2ca188f32eaf232bba,6892f51146af6b9b11d15f2ca188f32eaf232bba,"[cloud-api] Adds gmail auth error page with action items for known issues

Summary:
These errors handle the following cases:

1. User hits ""deny"" during google oauth
2. User picks an email that has Gmail disabled for the domain
3. User picks an email that has IMAP disabled for the accoutn
4. Any other underlying IMAPConnection errors from node-imap
5. An unknown error occurs

In the case of 2-4, it will show several possible solutions (rather than a specific one)

Test Plan: Tested manually

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3639"
spang,2017-01-10 21:29:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1fda21bb1c9323b326383bac22e558cb272b0b9,c1fda21bb1c9323b326383bac22e558cb272b0b9,"[local-sync] Give Nylas Mail messages a different Message-ID from API messages

Summary:
We may find it useful at some point to be able to tell which messages in
a user's mailbox were sent using N1/the REST API vs Nylas Mail.

Test Plan: manual

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3631"
hallamoore,2017-01-11 22:39:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f750bb60a0c598b6a43353b5f60d3058a6e2f6b,7f750bb60a0c598b6a43353b5f60d3058a6e2f6b,":lipstick:(initial-sync): Move ""hide"" to the top of the expanded progress

Summary: Fixes T7442

Test Plan: tested locally

Reviewers: evan, jackie

Reviewed By: jackie

Maniphest Tasks: T7442

Differential Revision: https://phab.nylas.com/D3640"
khamidou,2017-01-11 20:04:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/24b90b8c505077239244e2f2e448150d0fd3bbf9,24b90b8c505077239244e2f2e448150d0fd3bbf9,"[fix] Add a poor man's two-phase commit algorithm for syncback tasks.

Summary:
Sometimes things go very wrong when trying to syncback an action. For example, the worker window could crash, preventing us from marking the current task as failed. What's worse, another sync iteration could try to run the task which crashed, thinking it a new one. To prevent this, this diff adds a fourth syncback task state, `INPROGRESS`.

New syncback tasks are marked as `INPROGRESS` before being executed. When they complete we mark them as `SUCCEEDED/FAILED`. Stray `INPROGRESS` tasks are automatically marked as `FAILED` at the beginning of every sync iteration, to make sure we don't retry them again.

Test Plan: Tested manually.

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3635"
hallamoore,2017-01-11 00:09:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9d4e1d8899ccefd1dc2c7a232d687e95258020c,b9d4e1d8899ccefd1dc2c7a232d687e95258020c,"feat(onboarding): Display a possible issue when credentials are incorrect

Summary:
When a user tries connecting an account and it 401's, show a note
that suggests what the issue may be, and link to a support article
for more information. In general, mention that they may need to use
an app password. If it's a Yahoo email address, ask if they've already
enabled the proper setting from within Yahoo.

Test Plan: tested locally

Reviewers: evan, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3630"
hallamoore,2017-01-11 01:26:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/187347b3a6442e4b41554fe6cff42165c22ad72f,187347b3a6442e4b41554fe6cff42165c22ad72f,"fix(preference-accounts): Don't select accounts that no longer exist

Summary:
After updating an account's connection settings, there's a brief
moment where the selected account isn't null, but doesn't actually
exist in the AccountStore. This throws a bunch of undefined errors,
so this diff makes sure we discard that selection.

Fixes T7452

Test Plan: tested locally

Reviewers: evan, juan

Reviewed By: juan

Maniphest Tasks: T7452

Differential Revision: https://phab.nylas.com/D3634"
emorikawa,2017-01-11 02:25:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/e87c3d07fbe11d04bb4ac9423e3a7d319280342e,e87c3d07fbe11d04bb4ac9423e3a7d319280342e,bump(version): 0.5.9
emorikawa,2017-01-11 02:25:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/4002cb23ebd839bdca84afe24dbf77465ae510fd,4002cb23ebd839bdca84afe24dbf77465ae510fd,bump(k2)
emorikawa,2017-01-11 02:24:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/feb3f44b061f3b318c119239d368ca3018cc911a,feb3f44b061f3b318c119239d368ca3018cc911a,"[local-sync] fix multiple sync loops starting

A bug allowed multiple sync loop processes to start. This could lead to
double sending and the sync loop appearing as thouogh it couldn't be
interrupted"
jackiehluo,2017-01-11 02:15:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/becb137aa7404d6e1476e1046857f37e7382d30c,becb137aa7404d6e1476e1046857f37e7382d30c,bump(submodule)
jackiehluo,2017-01-11 02:14:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/f854267c1bb1d6059ef4a661b80b9657e31b9d0e,f854267c1bb1d6059ef4a661b80b9657e31b9d0e,feat(onboarding): Add Yahoo and iCloud and fix styling
hallamoore,2017-01-10 23:03:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/44517bc5fc0da0cf0435b53c8c98ef739cec5c1d,44517bc5fc0da0cf0435b53c8c98ef739cec5c1d,"fix(onboarding): Don't store type-specific fields when switching account types

Summary:
Since we pass all of the account info to the type-specific auth routes, having
extra fields in the account info object can cause the auth request to fail its
validation. This diff ensures that switching account types will drop any fields
in the account info object that aren't accepted across all routes.

Fixes T7455

Test Plan: tested locally

Reviewers: evan, juan

Reviewed By: juan

Maniphest Tasks: T7455

Differential Revision: https://phab.nylas.com/D3633"
pfista,2017-01-11 01:34:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5d0abc3b5b74ba0e8b9ef2c38e5c9a3ff970c84,a5d0abc3b5b74ba0e8b9ef2c38e5c9a3ff970c84,Fix readme typo
pfista,2017-01-11 01:31:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4f736b1f470098185f90d29eb00e1fd478b4542,b4f736b1f470098185f90d29eb00e1fd478b4542,Add ability to debug with chrome dev tools in cloud-api
hallamoore,2017-01-10 22:23:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7e99ec7747b9611a862bac0d7f501b96d8f9ee0,b7e99ec7747b9611a862bac0d7f501b96d8f9ee0,"fix(category-picker): Handle the case where new category creation fails

Summary:
Instead of throwing vague undefined errors in the console, recognize that
they category wasn't created and notify the user via a dialog box.

Test Plan: Tested locally

Reviewers: jackie, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3632"
jstejada,2017-01-10 23:31:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/35149148e6130264dc9c48c8e633c82f4ca1ff5a,35149148e6130264dc9c48c8e633c82f4ca1ff5a,bump(version) 0.5.8
jstejada,2017-01-10 23:30:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6ae96bb1bc728efd7f435887a64c65f8ac9b5a4,a6ae96bb1bc728efd7f435887a64c65f8ac9b5a4,Fix error reporter causing crash due to infinite recursion
spang,2017-01-10 20:04:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5655ca25dda7871f1a2e1c15419841c7d1cbef2,c5655ca25dda7871f1a2e1c15419841c7d1cbef2,"[local-sync] Properly handle multiple occurrences of From/To/Cc/Bcc headers

Summary:
Well-behaved MUAs don't do this, but it is totally legal and we should
handle it.

The Python sync engine handles this properly also:
https://github.com/nylas/cloud-core/blob/7db949fec9447b73e2ba9485d8903380414e8223/sync-engine/inbox/util/addr.py#L26-L47

(Found this out while scratching my head over the output format of
mimelib.parseHeaders---turns out it's an array for a reason:

> let to = mimelib.parseHeaders(`To: Christine Spang <spang@nylas.com>
... To: Foo Bar <foo@example.com>`);
undefined
> to
{ to:
   [ 'Christine Spang <spang@nylas.com>',
     'Foo Bar <foo@example.com>' ] }

)

Test Plan: unit test included

Reviewers: halla, jackie, mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3625"
jstejada,2017-01-10 22:51:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0fc896e7c82843c69db86e25f8520ea4ab57839,b0fc896e7c82843c69db86e25f8520ea4ab57839,bump(version) 0.5.7
jstejada,2017-01-10 22:15:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b00490cdacb5069582396613175e560a835e9ee,4b00490cdacb5069582396613175e560a835e9ee,bump(electron)
spang,2017-01-10 21:39:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc984e4895887c9e4d9c0f51fb84011ea607b1e3,bc984e4895887c9e4d9c0f51fb84011ea607b1e3,"[local-sync] Remove deprecated comment

With the latest update to N1's CSS, this is no longer true---though a theme
can easily override the font to monospace if so desired."
jstejada,2017-01-10 20:19:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/bcac70a400cacb6c12341f95b2ea7d72c3452d9c,bcac70a400cacb6c12341f95b2ea7d72c3452d9c,[local-sync] Fix check for new mail updates on inbox folder
emorikawa,2017-01-10 20:15:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/6cdf61b71e049f975fc4ccc3c70227bbe668552b,6cdf61b71e049f975fc4ccc3c70227bbe668552b,bump(version): 0.5.6
emorikawa,2017-01-10 20:15:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5a042256eee991529a2fc1fbe18c09ff95a5e82,a5a042256eee991529a2fc1fbe18c09ff95a5e82,"feat(crash): add electron crash reporter

Summary:
Adds electron's crash reporter. This is currently going to a dumb heroku
app I setup: https://github.com/emorikawa/electron-crash-report-server

It's going there for now since I want to first evaluate if this is useful
before spending the time to build it in N1-Cloud and taking the risk of
getting flooded by crash reports.

The crash reports themselves are very difficult to debug since it requires
compiling tools that can read os-specific memory dumps

Electron seems to be crashing fairly frequently for some unkonwn reason,
and this is really the only diagnostic tool we have to potentially see why

Test Plan: manual

Reviewers: spang, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3629"
jstejada,2017-01-10 20:11:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/802d50dd5a59ff40aaa91c8e649cd32ac535bc41,802d50dd5a59ff40aaa91c8e649cd32ac535bc41,"[local-sync] Run send tasks before other syncback tasks

Summary: Update `_getNewSyncbackTasks` to return any send tasks first, and then others

Test Plan: locally

Reviewers: halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D3627"
spang,2017-01-10 20:04:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/02cff5e729ccd625572b76ff10acaa4ca247883d,02cff5e729ccd625572b76ff10acaa4ca247883d,[local-sync] Make comment about Date/INTERNALDATE & message hashes better
flyingclimber,2017-01-10 19:38:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/72a20cfcfdefb9ec2374cac21ed129c21f1f59d9,72a20cfcfdefb9ec2374cac21ed129c21f1f59d9,"fix(windows-build) bruteforce transient failure per http://help.appveyor.com/discussions/problems/5822-transient-build-failures-with-node-dependency-node-gyp

Summary: Retry the build per AppVeyor forum recomendation

Test Plan: run a build

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3628"
hallamoore,2017-01-10 19:15:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/542c93aee1bcd6c65c1adf0140044591d6483297,542c93aee1bcd6c65c1adf0140044591d6483297,"fix(connection-settings): Update connection settings for fastmail.com

Summary: The previous settings didn't support all operations. Fixes T7450 and T7451.

Test Plan: tested locally

Reviewers: juan

Reviewed By: juan

Maniphest Tasks: T7450, T7451

Differential Revision: https://phab.nylas.com/D3626"
spang,2017-01-10 18:56:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/248e25959eda0e12a83735cbe6c65bb9bb51b8fc,248e25959eda0e12a83735cbe6c65bb9bb51b8fc,fix(email-frame): Use same fonts for plaintext emails as for HTML
jstejada,2017-01-10 18:44:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/137830e65f2e97be44b5e334f5a0c35976c63ec9,137830e65f2e97be44b5e334f5a0c35976c63ec9,"[local-sync] Make syncback task execution interruptible

Summary:
See title. Got rid of that syncback-worker class which was kind of useless and
made things harder. My b.

Test Plan: locally

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3624"
spang,2017-01-10 15:56:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a68df300def38119b981675fe4747835b3d3f1be,a68df300def38119b981675fe4747835b3d3f1be,"[local-sync] Rename extract{Snippet,Contacts} in message-factory

Summary:
We have another function called extractContacts, in its own file,
extract-contacts.js, which is used to create Contact objects. This has
confused me a number of times and also leads to grep collisions.

This patch also makes the snippet unit tests pass again after a recent
API change.

Test Plan: included unit tests, manual

Reviewers: halla, evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3623"
spang,2017-01-10 15:45:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5f578af2dcf56409e9a762b3310a28154ec2c59,b5f578af2dcf56409e9a762b3310a28154ec2c59,"[local-sync] Remove unused message update hook

Summary:
Message bodies, drafts aside, are immutable, and we set the snippet on
new messages manually in parseFromImap()---meaning this hook, if
invoked, is likely to replace the snippet with a broken version computed
with this old implementation. If we need a hook in the future (e.g. for
updating drafts), it should use the snippet function from
message-factory.

Test Plan: n/a

Reviewers: juan, halla

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3622"
hallamoore,2017-01-10 18:08:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0aa4ee4a91aa6f2572673a6cec0dbf4d57e944c,d0aa4ee4a91aa6f2572673a6cec0dbf4d57e944c,"[local-sync] Don't delete messages via cascade when a folder is deleted

1. It could be expensive to delete many messages at the exact moment
   when the folder is deleted
2. The folder delete could actually just be a rename, and if we
   deleted all the messages, we would have to re-process them all
3. We already do a clean-up check for orphaned messages at the end
   of the sync loop, where we already know if the folder was
   actually deleted or just renamed"
emorikawa,2017-01-10 18:22:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/c18464e58c2d13dc882e72bda616beee0ac90445,c18464e58c2d13dc882e72bda616beee0ac90445,bump(k2)
emorikawa,2017-01-10 18:21:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/aacfff9afa774589a7a4daaf20653518431c1cfa,aacfff9afa774589a7a4daaf20653518431c1cfa,"[isomorphic-core] don't try and inflate delete deltas

Summary:
If we inflate delete deltas, the object we're trying to find won't exist
anymore (we just deleted it!). This is likely causing the `While inflating
${sourceName} transactions, we couldn't find models for some ${modelName}
IDs` error.

Fixes T7436

Test Plan: manual

Reviewers: spang, juan, halla

Reviewed By: halla

Maniphest Tasks: T7436

Differential Revision: https://phab.nylas.com/D3621"
spang,2017-01-10 16:26:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/615f2f036c416e83db553e623e53d7a73b128ee7,615f2f036c416e83db553e623e53d7a73b128ee7,[local-sync] s/queryes/queries/
spang,2017-01-10 16:15:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/93af2f48356eee323c230c2dcee20cabef93bbc4,93af2f48356eee323c230c2dcee20cabef93bbc4,[local-sync] Fix typo in ENABLE_SEQUELIZE_DEBUG_LOGGING
flyingclimber,2017-01-10 09:16:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/a495ba293e28bbf8a6f3f17ac0c7d647cbc581f7,a495ba293e28bbf8a6f3f17ac0c7d647cbc581f7,fix(electron-packager): rolling back to proper latest version
flyingclimber,2017-01-10 03:05:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/a67dd88ecdfa1d7db66cc753c3937eae90c7c35c,a67dd88ecdfa1d7db66cc753c3937eae90c7c35c,bump(electron packager version) to fix ProductName/FileDescription issue phab #D3619
hallamoore,2017-01-10 02:06:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd4d5752fad267d6c7b531ea5138fc3410a91171,bd4d5752fad267d6c7b531ea5138fc3410a91171,"[local-sync, iso-core]: Cascade deletes on `hasMany` associations

Summary:
Delete associated children when a parent is deleted to prevent foreign
key constraint errors. Also make sure any child hooks are run.

Test Plan: tested locally

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3620"
hallamoore,2017-01-09 23:36:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e06a6c7293a044234e5ae4776770dca106863e7,9e06a6c7293a044234e5ae4776770dca106863e7,"[local-sync] Add a `hasAttachment` attribute to threads

Summary: N1 uses this to show the little attachment icon in the thread list.

Test Plan: tested locally

Reviewers: evan, juan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3617"
hallamoore,2017-01-10 01:11:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/6261e653575fb7bf6373eb14c563a5aa96f22177,6261e653575fb7bf6373eb14c563a5aa96f22177,"fix(Thread): Don't always set `categoriesType` to 'labels'

In `fromJSON()`, we were setting `categoriesType` to 'labels' if
the json had a truthy `labels` value. But an emtpy array is truthy,
and K2 always sends an array. This commit changes the conditional
to also ensure the array length is > 0."
pfista,2017-01-09 23:46:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/dfbd5631eca1a4fc68e68f665b5a9890e1e4ed53,dfbd5631eca1a4fc68e68f665b5a9890e1e4ed53,Fix localhost urlroot for billing
spang,2017-01-09 23:24:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/57ea6208c6e620f2f8a080248100e2610c03396b,57ea6208c6e620f2f8a080248100e2610c03396b,[local-sync] Update comment
emorikawa,2017-01-09 23:20:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/777c204caa9d98a429d789cbcaea27257ded2577,777c204caa9d98a429d789cbcaea27257ded2577,bump(version): 0.5.5
khamidou,2017-01-09 23:16:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c05934ba23a576bcdc851dbee8954f892eee766,0c05934ba23a576bcdc851dbee8954f892eee766,"[comment] Add a short comment explaining the difference between the
EdgehillAPI and LegacyEdgehillAPI objects."
khamidou,2017-01-09 21:52:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/21fea0c52f51d630da935e93b4a2db89c63f39fc,21fea0c52f51d630da935e93b4a2db89c63f39fc,"Create a wrapper around legacy N1 APIs.

Conflicts:
	src/K2"
jstejada,2017-01-09 23:17:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9134e1bf8d3af82d94914a0bfba84dffe5da7aee,9134e1bf8d3af82d94914a0bfba84dffe5da7aee,fix(send) correctly check for presence of headers
jstejada,2017-01-09 23:17:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6f09d8981ba5b12dacacfd2fc25f769c43e06be,c6f09d8981ba5b12dacacfd2fc25f769c43e06be,"[local-sync] Fix send, correctly check for presence of headers"
jstejada,2017-01-09 22:56:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/b58a7bafbed2c1cd371913d5820ff9bf11b1ecd9,b58a7bafbed2c1cd371913d5820ff9bf11b1ecd9,bump submodule
jstejada,2017-01-09 22:40:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/3af81b2ba647908fd06c4342df52ab39b71312b0,3af81b2ba647908fd06c4342df52ab39b71312b0,"[local-sync] Make the sync loop interruptible

Summary:
This commit introduces interruptible sync operations. Now, the `SyncWorker`, `FetchFolderList` operation and `FetchMessagesInFolder` operation can be interrupted at several points during their execution. This improves the performance of SyncbackTasks, which now run almost immediately.

To achieve this, this commit adds an Interruptible abstraction, which is an object that can run functions and interrupt them at points marked by the function. For more info on how this works, see the docs on the Interruptible class.

This commit also splits up the SyncWorker a little bit to make it smaller, byadding a SyncbackTaskWorker.

Depends on D3613

Test Plan: Manual

Reviewers: spang, mark, jackie, khamidou, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3612"
jstejada,2017-01-09 17:57:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/4bbfd559de3aaf721c6256732af1bd32a3be8d21,4bbfd559de3aaf721c6256732af1bd32a3be8d21,"[local-sync] Make the sync loop interruptible

Summary:
This commit introduces interruptible sync operations. Now, the `SyncWorker`, `FetchFolderList` operation and `FetchMessagesInFolder` operation can be interrupted at several p

To achieve this, this commit adds an Interruptible abstraction, which is an object that can run functions and interrupt them at points marked by the function. For more info o

This commit also splits up the SyncWorker a little bit to make it smaller, byadding a SyncbackTaskWorker.

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3613"
pfista,2017-01-09 20:05:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0909c92e897693d50893ddda96d41cfeb38fe60,b0909c92e897693d50893ddda96d41cfeb38fe60,"[cloud-api] Adds prettier confirm page for gmail auth success

Summary: Furthermore, sets up static file serving and templating for the cloud api.

Test Plan: tested manually. Need to add a error handling page, but will do this in a separate diff

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3615"
emorikawa,2017-01-09 22:08:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/8365afbf4518125306122bd664f8780e739d6c4b,8365afbf4518125306122bd664f8780e739d6c4b,fix(error): add comments and logging for RequestEnsureOnceError send error
emorikawa,2017-01-09 22:04:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/45331f71808b223af71c04e4b4407863b327286a,45331f71808b223af71c04e4b4407863b327286a,"[local-sync] fix changedsince highestmodseq causing N1 crash

Since we weren't giving Node IMAP the proper format for the changedsince
flag, and since node IMAP never warned of improper schemas, we weren't
properly requesting the correct range. This would cause us to request the
metadata attributes of EVERY message in the mailbox and attempt to store
them in a hash. This would eventually lead to a memory leak and take down
the worker window, which caused other subtle issues like sends failing
when the worker window dropped task half way through their perform remotes
and never re-sent the deltas notifying of their success or failure.

This was only triggered when new highestmodseq numbers fired on the remote
server, which would be triggered by the underlying mailbox getting folders
or labels changed on messages"
spang,2017-01-09 21:26:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1f53e825c8eee3b016a89f61a8ec9099cd5fef6,c1f53e825c8eee3b016a89f61a8ec9099cd5fef6,"[local-sync] Don't filter contacts w/out emails out of To/From/Cc/Bcc fields

We separately filter out contacts without email addresses before
committing to the contacts table in the database for autocomplete (in
isContactMeaningful()), and if we filter out these already we can end up
excluding legitimate elements of the headers. For example, the Clutter
feature of Office 365 sends emails with a From: header like this:

From: Microsoft Outlook

Fixes: T7413"
hallamoore,2017-01-06 21:07:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/98e3e29e9a76391c1525f82b91a79f4c3bce36da,98e3e29e9a76391c1525f82b91a79f4c3bce36da,"fix(showErrorDialog): Use a different modal when 'Show Details' is clicked

Summary:
When the error details are too long, the error dialog went off screen and
could not be closed. The native dialog doesn't have any scroll support and
you can only pass it plain text, so this diff moves the error details into
a non-native modal with a scrollable textarea.

Fixes T7388

Test Plan: tested locally

Reviewers: jackie, juan

Reviewed By: juan

Maniphest Tasks: T7388

Differential Revision: https://phab.nylas.com/D3601"
hallamoore,2017-01-08 00:03:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/59a498d1446e10e1fcaa1ef52977ddb0e9ac389a,59a498d1446e10e1fcaa1ef52977ddb0e9ac389a,"fix(spinner): Use a constant spinner when loading inline images

Summary:
We used to use a progress-based spinner, but we never get any progress
updates while downloading files, so the spinner was always at 0 and
never visible.

The submodule-commit is D3609, which adds support for inline images

Test Plan: tested locally

Reviewers: evan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3610"
hallamoore,2017-01-09 18:44:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd83ad1c40fde8fa288c1de17c0d84af1583a36c,bd83ad1c40fde8fa288c1de17c0d84af1583a36c,"[local-sync] Add support for inline-images

Summary:
Extract files for inline attachments and store their content id

Fixes T7414

Test Plan: tested locally

Reviewers: evan, spang

Reviewed By: spang

Maniphest Tasks: T7414

Differential Revision: https://phab.nylas.com/D3609"
flyingclimber,2017-01-07 21:12:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b41df9ff411461010107e905de91817813125c1,2b41df9ff411461010107e905de91817813125c1,"Fixing most lint errors in error-logger

Summary: Cleaning up almost all the linting errors in the logger

Test Plan: ... run the build

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3605"
flyingclimber,2017-01-07 22:44:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/13cd9c5809a45d6cc51f3ae199c12c8610f0395b,13cd9c5809a45d6cc51f3ae199c12c8610f0395b,"Adding AppVeyor Slack notifications

Summary: So that we know the status of builds

Test Plan: Run the build. See it post to slack

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3607"
emorikawa,2017-01-09 17:57:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/97342300470ece218f889cf190e2088734579d85,97342300470ece218f889cf190e2088734579d85,fix(lint)
emorikawa,2017-01-09 17:57:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/956eb09708c73d4f5e93440c0bbc931f57a3ce2b,956eb09708c73d4f5e93440c0bbc931f57a3ce2b,[local-api] linter fixes
emorikawa,2017-01-09 17:46:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/39146e6ca7e880875e23b855b3acd8a2ace968c5,39146e6ca7e880875e23b855b3acd8a2ace968c5,bump(version): 0.5.4
emorikawa,2017-01-09 17:45:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/132171549625c06885ee27ab280726bcf45f0a26,132171549625c06885ee27ab280726bcf45f0a26,bump(k2)
emorikawa,2017-01-09 17:45:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc89d8c2f4a85974686e94987258493143e50615,dc89d8c2f4a85974686e94987258493143e50615,"[local-sync] audit database indices

Summary:
Fixes T7398

We were create unnecessary and duplicate indices for the IDs of all of
our objects and increasing db write overhead.

We were not creating the correct reverse index for our join tables.

The search API'd db is already in scope of the accountId, this is an
unnecessary constraint on the query

Test Plan: manual

Reviewers: spang, juan

Reviewed By: juan

Maniphest Tasks: T7398

Differential Revision: https://phab.nylas.com/D3606"
spang,2016-12-22 23:42:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/74b3e0a1d1bf99aa62f9e0cc23765f87e9e10431,74b3e0a1d1bf99aa62f9e0cc23765f87e9e10431,"[local-sync] Optimize header & MIME structure download

Summary:
Headers can be quite big, so we might as well download and store only
the ones that we care about. This patch also makes it so we stop
downloading MIME structures twice per message.

While it's possible that we _may_ want to make more headers accessible
later, we don't currently make the generic pile of headers accessible to
N1 or N1 plugins in any way, so doing that would end up requiring
changes to the sync code regardless. I think it's worth optimizing the
base experience rather than trying to predict what we may want in the
future. Plus, it seems more likely that we'll want to build future
extensibility using thread metadata, rather than message headers.

On inboxapptest1@fastmail.fm, this patch decreases the size of the
generated sqlite file for a fully synced mailbox by 35%.

Test Plan: manual

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3611"
spang,2017-01-07 22:34:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/8dca53632913981dab241336f2415d6008d1399b,8dca53632913981dab241336f2415d6008d1399b,"[local-sync] don't play fast and loose with newlines, or a lack thereof"
spang,2017-01-06 01:18:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc96972a96d939dc06fc62e152dcdea5de310df7,fc96972a96d939dc06fc62e152dcdea5de310df7,"[local-sync] Correctly handle messages with non-alternative multipart text bodies

Summary:
It's possible to have multiple inline HTML parts in a message, or even
a multipart/alternative part that contains text and HTML, followed by a
plaintext signature. Previously, if there was more than one text part in
an email, we would pick the _last_ text/html or text/plain part that we
found, and treat that as the entire message body. This works most of the
time, but fails to display the full message body in some edge cases.
This patch fixes that by resolving multipart/alternative subparts to a
single part in the mimepart fetch stage, and then treating each desired
mime part separately when parsing the message, concatenating them if
there are multiple.

This makes K2's handling of multipart MIME message text better,
bug-wise, than the Python sync engine's, which has been mangling some
rare messages forever. (Example from my email: every email from the MIT
EECS Jobs List has never displayed the mailing list signature in N1.)

Note that this patch also removes our tentative support for PGP
encrypted messages. I'd rather add that back in later when I've dug up
some real example messages to test on, rather than leaving it in in its
current not-really-tested and probably not-really-working state, since
it makes it harder to make sure that the rest of the logic isn't broken.

Test Plan: manual for now - added examples of this to my growing list of regression tests to add to the message parser unit tests once I fix them

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3600"
spang,2017-01-07 21:13:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdc3b12a45a30b3d53e6e74ff79bdbc803faad99,cdc3b12a45a30b3d53e6e74ff79bdbc803faad99,"[local-sync] Bump limit on finding matching threads

I'm kind of worried that weird stuff may happen on short, common
thread subjects. The Python sync engine has _no_ limit, and it seems
to work OK."
spang,2017-01-07 01:01:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ff080a2581894006d711205d2d6c8772eaf6b9b,1ff080a2581894006d711205d2d6c8772eaf6b9b,"[local-sync] Port generic IMAP threading logic from Python Sync Engine

Summary:
We sync messages in the same order as the Python sync engine (newest to
oldest, generally), so we should be able to just use the same threading
algorithm. While we may still want to take into account References /
In-Reply-To at some point, this is a big step up from the current
thread-matching-only.

Test Plan: manual --- could pretty easily port the unit tests from the python codebase if we wanted

Reviewers: khamidou, juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3604"
hallamoore,2017-01-07 20:48:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a4820e991d6ccef705007af857ac133fa16430b,4a4820e991d6ccef705007af857ac133fa16430b,"[local-sync] Re-add code to associate labels with new messages

This code was accidentally removed during a merge conflict. Code was
originally added in commit 333647."
jackiehluo,2017-01-07 00:54:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/8033cdd697514aa8df937a36d5ad4622d077ac00,8033cdd697514aa8df937a36d5ad4622d077ac00,fix(archive): Designate role for archive folder
jackiehluo,2017-01-07 00:53:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/7da14f7cb73237951a0be8a0a2a8386db5d2557e,7da14f7cb73237951a0be8a0a2a8386db5d2557e,[local-sync] Designate role for archive folder
emorikawa,2017-01-06 23:58:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/40042be678eacb85d542d90dcf058719da302ad4,40042be678eacb85d542d90dcf058719da302ad4,bump(version): 0.5.3
emorikawa,2017-01-06 23:43:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3a1fb42d78f3765c63d0f55b2c592c66f80795e,f3a1fb42d78f3765c63d0f55b2c592c66f80795e,fix(typo): don't list twice
emorikawa,2017-01-06 23:37:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/c519288b424e6246dde8440b47efec267f926d02,c519288b424e6246dde8440b47efec267f926d02,"feat(off): disable/hide snooze, mail rules, misc minor plugins"
emorikawa,2017-01-06 23:37:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e0a7139df64bd8ec9a3575888e724af418037f6,0e0a7139df64bd8ec9a3575888e724af418037f6,"[local-private] Disable mail merge, scheduler, send later, reminders"
emorikawa,2017-01-06 23:18:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ee3b48fd19c1b755ae281d01456634fb7dc0321,7ee3b48fd19c1b755ae281d01456634fb7dc0321,"[local-sync] remove `verbose` sequelize flag in fork for perf

https://github.com/nylas/sequelize/compare/9cdd4d6bfaa1e7d61a700a6ac3c0e64e45a61...nylas-3.30.0

We spend a HUGE amount of CPU in the sqlite3 verbose logging since we generate stack traces for each and every query we send.

This fork removes the verbose call that causes that."
oksas,2017-01-06 23:02:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/646353829904f661966a7e15971477a88945b3da,646353829904f661966a7e15971477a88945b3da,"Fix link to Flux diagram in Architecture.md (#3147)

It looks like the location of the Flux architecture diagrams got moved around on the Flux docs; this change updates the link here to the new location of the diagram."
flyingclimber,2017-01-06 22:06:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/02ac6d36a4d9a0bc8f36cb24915d8879dac93397,02ac6d36a4d9a0bc8f36cb24915d8879dac93397,"Removing node module cache for now to see if stops gyp rebuild from breaking

Summary: Trying to fix https://ci.appveyor.com/project/nylas/n1/build/2442

Test Plan: ... run the build

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3603"
emorikawa,2017-01-06 22:33:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/ceb7984265af288cd32a1ce999804892098dc953,ceb7984265af288cd32a1ce999804892098dc953,bump(k2)
jstejada,2017-01-06 22:28:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/d293735b84e41e6633e92d6824bf5b5ce729233b,d293735b84e41e6633e92d6824bf5b5ce729233b,"Revert ""Make K2 recover from connectivity losses.""

This reverts commit 08950591a57e28d86cfe2ff2c2b54d76fd2473dc.

Interrupting sync by closing connection causes errors downstream when
`syncNow` is called elsewhere. Instead of interrupting by closing the
connection, we will post a patch to interrupt the sync loop properly"
jstejada,2017-01-06 22:28:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/8bafc2c2a726f32182a3892e0799a5dfa8768ba7,8bafc2c2a726f32182a3892e0799a5dfa8768ba7,"[local-sync] Restore global queue for message processing to improve perf

Summary:
Sync operations are mostly bound by I/O and the imap connection.
What we believe that is mostly affecting cpu and battery life is that node’s event
loop is being hosed with cpu intensive message processing operations.

To alleviate this, we do a few things:

- Restore a global message processing queue to process messages serially and meter cpu usage (message processing continues to be a fire and forget call from within sync operations)
- Move actual cpu intensive work to the message processing queue, i.e. `MessageFactory.parseFromImap`
- Keep track of message processing queue length, and skip sync operations if queue is too big to prevent massive memory consumption

This commit also renames the package from new-message-processor to
message-processor, given that now it processes both new and existing
messages, and we like to minimize confusion.

Test Plan: manual

Reviewers: spang, khamidou, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3602"
jackiehluo,2017-01-06 21:18:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/3491f2791734f5065d9d27ddef015528fe58b291,3491f2791734f5065d9d27ddef015528fe58b291,fix(category-picker): Hide starred label
jstejada,2017-01-06 19:32:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/781cda45bf1f85ce2707e27d833728bdbaf0ca30,781cda45bf1f85ce2707e27d833728bdbaf0ca30,"fix(sync-status) When getting sync status, make sure account and progress data exists

Summary: See title

Test Plan: manual

Reviewers: evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3588"
jstejada,2017-01-06 17:58:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/86b434093b63e2f5481f50fe6f0a67e54ffdfa34,86b434093b63e2f5481f50fe6f0a67e54ffdfa34,fix(build) Temporarily remove tests
flyingclimber,2017-01-06 00:54:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e9807439617f789fd223a305e652381132062fe,0e9807439617f789fd223a305e652381132062fe,"Don't need to lint arclint

Summary: More files that don't need linting

Test Plan: ... run the build

Reviewers: evan

Reviewed By: evan

Subscribers: juan, evan

Differential Revision: https://phab.nylas.com/D3599"
hallamoore,2017-01-05 23:59:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d03ce50f2153305a1bf996f227c565cae38cc0d,7d03ce50f2153305a1bf996f227c565cae38cc0d,"fix(categories): Fix operations on categories

Summary:
- Make creating/renaming categories non-optimistic (this, along with the
    submodule commit D3593, prevents sub-categories with emtpy titles)
- Use SyncbackTaskAPIRequest in DestroyCategoryTask
- Don't get upset that renaming a category doesn't return a server id

Test Plan: local

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3594"
hallamoore,2017-01-05 23:55:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/21543c39995e6db6b60ca95eda2e703dd10720fb,21543c39995e6db6b60ca95eda2e703dd10720fb,"[local-sync, iso-core] Fix operations on Categories

Summary:
- Ensure delete deltas make it through to N1
- Don't fail if we can't find a category that needs to be deleted

Test Plan: local

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3593"
emorikawa,2017-01-06 00:34:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3a1de6d8556fda0cbb854a90c86105f68f7c99d,c3a1de6d8556fda0cbb854a90c86105f68f7c99d,bump(k2)
emorikawa,2017-01-06 00:33:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/a78ac9071fa4a95c82aad287f29f44a82afa2614,a78ac9071fa4a95c82aad287f29f44a82afa2614,"[local-sync] add attachments

Summary:
- Adds `File` objects onto the `Message`s so N1 sees attachments
- Ensures `File` is eagerly loaded for all messages
- Base 64 streams attachments through the local /download endpoint
- ExtractFile only uses disposition type attachment when extracting
  attachments
- Makes sure we save existing messages when processing them

Test Plan: manual :(

Reviewers: juan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3595"
flyingclimber,2017-01-06 00:25:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/0188aeab33e985369496f13bd0df26ae33fb5b0f,0188aeab33e985369496f13bd0df26ae33fb5b0f,"Removing error-logger exclude as it didn't actually work. Removing linter for now

Summary: Almost there ...

Test Plan: ... run the build

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3597"
spang,2017-01-05 16:44:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/8373da686f6344bb1ccb9b178ed6f6b07de0d144,8373da686f6344bb1ccb9b178ed6f6b07de0d144,"[local-sync] Do not consider HTML or plaintext attachments to be body parts

Summary:
We were previously not taking into account the 'Content-Disposition'
MIME header, which differentiates between parts intended for display
('inline') and parts that are instead transferred files ('attachment').
See the RFC for more details:

https://www.ietf.org/rfc/rfc2183.txt

Fixes: T7367

Test Plan: unit test coming soon---have the test data and going to fix all message parsing test cases at once

Reviewers: juan, jackie, evan, halla

Reviewed By: evan, halla

Differential Revision: https://phab.nylas.com/D3585"
khamidou,2017-01-05 20:10:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/1baa742dd7a3a2faa6d74898cb31e8d3afc39f10,1baa742dd7a3a2faa6d74898cb31e8d3afc39f10,"[N1] Only show the ""reauthenticate"" dialog box when we're getting 401s
from the local sync engine.

Previously we'd show the dialog box when we'd get an error from
Clearbit."
flyingclimber,2017-01-05 22:16:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/85a9cf063780fb0763daaa6e5846cf913489bfab,85a9cf063780fb0763daaa6e5846cf913489bfab,"fix(Linting errors)

Summary: Second attempt at not linting the error logger and tiny lint cleanup

Test Plan: run the build

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3591"
jackiehluo,2017-01-05 21:01:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/210d7f6d3402f8233d8cb68f179064089f935b63,210d7f6d3402f8233d8cb68f179064089f935b63,fix(related-threads): Include from field in thread participants
jackiehluo,2017-01-05 21:00:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7b920c5c687d64b5b32c042787537514f6ddb35,c7b920c5c687d64b5b32c042787537514f6ddb35,[local-sync] Include from field in thread participants
khamidou,2017-01-05 19:47:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/78e033b6d3580b34bb034473ae8239d2ba2df8f6,78e033b6d3580b34bb034473ae8239d2ba2df8f6,Fix typo.
jackiehluo,2017-01-05 19:42:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/261fb23918189fd7d5e6796106c25156cf3d3cac,261fb23918189fd7d5e6796106c25156cf3d3cac,fix(destroy-category): Process syncback request deltas correctly
hallamoore,2017-01-04 23:56:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/f6cbd7ed282842e8e08ef152366127a112c1ff06,f6cbd7ed282842e8e08ef152366127a112c1ff06,"fix(Message): update fromJSON()

Summary:
- Handle `categories` if it exists, because clone() will call fromJSON()
    on the results of toJSON(), which populates `categories` instead of
    `folder` or `labels`
- Remove the else-if for `folder` and `labels`, because both can co-exist.
    Also concatenate the results from these two, rathering than overwriting.

Submodule commit is D3581, these two diffs together help make sure the
inflated messages in N1 have the right categories.

Test Plan: tested locally

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3582"
hallamoore,2017-01-04 23:55:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/3336479d5dd1140dc18783ea1d0bb91081a5885a,3336479d5dd1140dc18783ea1d0bb91081a5885a,"[local-sync] Make sure labels are properly associated to new messages

Summary:
Labels don't get added via passing in a labels attribute to
create(). We need to call addLabels() instead.

Test Plan: Tested locally

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3581"
flyingclimber,2017-01-05 00:13:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/badf6244fce5b6c595a16540263117d6104270ec,badf6244fce5b6c595a16540263117d6104270ec,"Removing error logger from linting

Summary: Skipping linting for the error logger

Test Plan: Run the build

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3583"
spang,2017-01-04 23:35:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ca6a5a2b0de3ec72bb2fc4962a2f74de0226b3a,1ca6a5a2b0de3ec72bb2fc4962a2f74de0226b3a,"[local-sync] Trim NUL bytes from body strings

These bytes will cause SQLite to blow up with the following error
on insertion:

'SQLITE_ERROR: unrecognized token'

Fixes: T7331"
spang,2017-01-04 23:33:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1b1712a07892603678f35c623e05714e10a5949,e1b1712a07892603678f35c623e05714e10a5949,Update sequelize point version everywhere
emorikawa,2017-01-04 23:42:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/63f0ba3e3246f0f44f45a564c24254c07b8e4d32,63f0ba3e3246f0f44f45a564c24254c07b8e4d32,"feat(send)
refactor(send): split delivery from sent folder stuffing

Summary:
See explanation in https://phab.nylas.com/D3577

Depends on D3577

Test Plan: manual

Reviewers: jackie, juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D3578"
emorikawa,2017-01-04 23:41:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/09f19d1adfec03c99fae0b4a1610b6c51e47f491,09f19d1adfec03c99fae0b4a1610b6c51e47f491,"refactor(send): split delivery from sent folder stuffing

Summary:
refactor multi-send

This diff started off by fixing sending with attachments.

The issue is that our `FileUploadStore` listened for
`Actions.sendDraftSuccess` as its signal to remove the files from the
.nylas temp directory. Unfortunately, the old MultiSend tasks, after
delivery of the message, would try and put the base message in the sent
folder. Since we already deleted the file from our local temp dir,
creating the base message for the sent folder would fail.

This exposed a much bigger issue which is that we don't consistently
distinguish between ""delivery"" of a message and any post-processing we do
(like filling the sent folder). This was leading to a variety of other
subtle issues.

For example, N1 assumes that if the SendMessage task fails, then we pop
the draft back up and ask the user to try again. Unfortunately, since we
were combining ""delivery"" and ""post processing"" it was possible for the
message to actually deliver, but fail when stuffing the sent folder, or
fail due to some other random bug. This would cause the user to send the
message twice.

To help us ensure we never ""deliver"" twice and handle errors more
intuitively, I separated out the two concepts.

Now there are ""send"" set of tasks and endpoints, and a
""EnsureMessageInSentFolder"" set of tasks and endpoint (the latter used to
be ambiguously known as ReconcileMultiSend, whatever that meant)

The logic for send hasn't changed. This is mostly a renaming and moving
files around.

Test Plan: manual :(

Reviewers: jackie, juan, halla

Reviewed By: juan, halla

Differential Revision: https://phab.nylas.com/D3577"
jackiehluo,2017-01-04 22:35:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/218e555722cd0efc696e16f8e4af9bd159e539cb,218e555722cd0efc696e16f8e4af9bd159e539cb,fix(link-tracking): Attach URL and redirect URL correctly
flyingclimber,2017-01-04 19:31:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/11150cc2a0307894066f9b27ae8e13cb422f534a,11150cc2a0307894066f9b27ae8e13cb422f534a,"Removing unit tests for now

Test Plan: Run the build

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3579"
spang,2017-01-04 19:09:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/facc17aaf5814a87c18a0fe24490ad513e494875,facc17aaf5814a87c18a0fe24490ad513e494875,bump(K2)
jstejada,2017-01-04 18:33:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5240f5a7062135da76be94381315219dfc7b7c3,c5240f5a7062135da76be94381315219dfc7b7c3,fix(deps) Correctly fix debug version
spang,2017-01-04 16:58:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab9eeaafce307976e2639cfc089ff534a7ba2082,ab9eeaafce307976e2639cfc089ff534a7ba2082,"[local-sync] Bump sequelize version to latest stable

Nothing major in here, just a couple little bugfixes."
spang,2017-01-04 16:21:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/41be7b14f0ca5f978e406f1c3838570b123c4886,41be7b14f0ca5f978e406f1c3838570b123c4886,[local-sync] Remove no-longer-used getLengthValidator function
spang,2017-01-04 16:18:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/af7693fa5e5552f73b5f25b78e4618cfc55adc15,af7693fa5e5552f73b5f25b78e4618cfc55adc15,"[local-sync] Remove incorrect length validation on From field

Contrary to what you might think, a message can have both an empty From: header
and multiple From: headers / multiple addresses in a From header. In that case,
we must save all of them and let the client decide how to display.

Fixes: T7370"
jstejada,2017-01-04 01:36:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/e98504e8ac692446237efe86c453e8865d5d9c78,e98504e8ac692446237efe86c453e8865d5d9c78,fix(deps) Fix debug to v2.4.5. See #3139
khamidou,2017-01-04 00:03:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/08950591a57e28d86cfe2ff2c2b54d76fd2473dc,08950591a57e28d86cfe2ff2c2b54d76fd2473dc,"Make K2 recover from connectivity losses.

Summary: I've found a pretty annoying bug --- N1 would stop syncing all accounts after the Internet connection dropped. It seems that deep inside node-imap or NodeJS itself, connections aren't timing out the right way. To work around this, this diff unilaterally restarts the sync every `nextSyncIn` milliseconds.

Test Plan: Tested manually by cutting internet access and checking that K2 recovered.

Reviewers: evan, juan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3573"
flyingclimber,2017-01-03 21:55:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/daa9d56c870084f5dfec175d2aabdc59a76c6633,daa9d56c870084f5dfec175d2aabdc59a76c6633,"Adding n1-next to AppVeyor builds

Test Plan: Run some builds

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T7377

Differential Revision: https://phab.nylas.com/D3574"
hallamoore,2017-01-03 21:24:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/7185850a3b94a90e60e0ad4ac89405b596d878a5,7185850a3b94a90e60e0ad4ac89405b596d878a5,"feat(sync-status): Add messaging in other areas when syncing

Summary:
We want users to know that their account is still syncing if they're
looking for a message and end up at the bottom of a thread list.
This diff changes some of the wording around the messaging when
sync isn't complete and also adds a footer at the bottom of the
syncing thread lists. Additionally, we added a ""Show Progress""
link that will expand the sync details in the lower left.

Addresses T7354

Test Plan: tested locally

Reviewers: juan, evan, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3551"
spang,2017-01-03 19:16:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdffd7610b2f75be9822e502c2201d75ca225cae,cdffd7610b2f75be9822e502c2201d75ca225cae,"[local-sync] Add node-iconv dependency

The 'encoding' library transparently upgrades to using iconv instead of
iconv-lite, if available. This allows us to support more encodings in
emails, such as ISO-2022-JP.

Fixes: T7358"
jstejada,2017-01-03 17:36:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b3d40b285cd3bf67308b38f8d7a4f0a1041bf7a,6b3d40b285cd3bf67308b38f8d7a4f0a1041bf7a,[local-sync] Convert to async
emorikawa,2017-01-03 17:32:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7aebe9e2e119895bef3bf91c905c4f913e31de0,a7aebe9e2e119895bef3bf91c905c4f913e31de0,bump(version): 0.5.2
emorikawa,2017-01-03 17:32:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f50f36cdf8ece39f3b25e37560d81bbbb2f6bab,6f50f36cdf8ece39f3b25e37560d81bbbb2f6bab,bump(k2)
emorikawa,2017-01-03 17:32:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/16c765df705947b7c66cf86411c468784e657be7,16c765df705947b7c66cf86411c468784e657be7,"Fixes to Docker and better docs/debugging

Summary:
Fixes to docker ignore and readme
Add ebextensions that allow us to more easily use docker

Test Plan: manual

Reviewers: juan, jackie, halla, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3554"
emorikawa,2017-01-03 17:31:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/06cf4fce6e5c58e8b947f5290c5d45ce7a55c62c,06cf4fce6e5c58e8b947f5290c5d45ce7a55c62c,"[local-sync] show messages sent to self

Summary:
If you sent an email to yourself it would not show up in your inbox. This
is because sent messages would never get a lastMessageReceived timestamp.
Since we order the inbox by lastMessageReceived, setting that to null to
on sent mail would mean it never shows up in the thread list.

Also fixed an assertion bug in SFDC that requires transactions to return a
promise.

Finally added extra debug interfaces that will show more info if the delta
stream detects an inconsistency

Test Plan: manual

Reviewers: juan, halla, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3552"
jackiehluo,2016-12-30 00:00:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b7a4dc2935c931f8cc080c9614ecbe979c1368b,2b7a4dc2935c931f8cc080c9614ecbe979c1368b,fix(multi-send): Check that other message exists
jackiehluo,2016-12-24 00:15:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0d83b605af0cb78c5687e748a22ddb32d463919,a0d83b605af0cb78c5687e748a22ddb32d463919,"[local-sync] Fix dates for message hashing

Summary: We were creating duplicate `Message` objects because the formatting for the date was different between `buildForSend` and `parseFromImap`. Now, we create the initial hash using the same format that `buildmail` uses to ensure that we generate the same IDs.

Test Plan: Tested locally.

Reviewers: evan, juan, spang

Reviewed By: spang

Differential Revision: https://phab.nylas.com/D3559"
spang,2016-12-29 18:56:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/78e8552d5408610d2ea39b3060a48b4b37ff35ec,78e8552d5408610d2ea39b3060a48b4b37ff35ec,"[local-sync] Use mimelib to parse contacts

Summary:
Because of the way we were attempting to parse contacts from
From/To/Cc/Bcc headers by converting them to JSON with a regex, we were
erroneously breaking contacts that contained commas in quoted names into
multiple contacts. This could result in things like parsing multiple
addresses for the From: header, incorrectly!

To resolve the problem, replace our homegrown logic with mimelib's
seemingly excellent parseAddresses(), which handles this and a myriad of
other cases correctly.

Fixes: T7370

Test Plan: unit tests included

Reviewers: mark

Reviewed By: mark

Differential Revision: https://phab.nylas.com/D3565"
spang,2016-12-29 19:53:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/a26ca6ffbae356e85a76bc51ebe629c8b09ef36d,a26ca6ffbae356e85a76bc51ebe629c8b09ef36d,"[local-sync] Remove TEXT param on message.body model definition

This doesn't do anything with sqlite, and just generates the following
warning in the logs:

>> WARNING: SQLite does not support TEXT with options. Plain `TEXT` will be used instead.
>> Check: https://www.sqlite.org/datatype3.html"
spang,2016-12-29 18:35:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/e82c21083130c1e3c3a8f5adc5c4378c5c3f6b2f,e82c21083130c1e3c3a8f5adc5c4378c5c3f6b2f,[local-sync] Fix lint
spang,2016-12-29 18:34:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdd896da5f1bdd147ba7559d505d49fb756ae6c7,cdd896da5f1bdd147ba7559d505d49fb756ae6c7,"[local-sync] Mark message factory tests for fixing later

Will fix these once I've finished up the current slew of bugfixes I'm
working on---kind of a pain to ensure they're passing in all
intermediate states."
spang,2016-12-23 18:10:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e562a46e1053beaf13f266df417c932c8efb2cf,0e562a46e1053beaf13f266df417c932c8efb2cf,"[local-sync] Catch UniqueConstraintError when associating folders/labels with threads

Summary:
Similar to the fix in D3555, concurrent message processing may cause insert
races for folder and label thread associations. If the row is already present,
we can simply do nothing.

Test Plan: manual for now

Reviewers: jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3557"
spang,2016-12-23 18:03:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab128eb7cf1873c99eeb223482d98a74bd8210ae,ab128eb7cf1873c99eeb223482d98a74bd8210ae,"[local-sync] Fix message parsing when no Date header present

Summary:
When the Date: header is not present, use the INTERNALDATE from the IMAP server
instead.

Test Plan: manual for now - will add a regression test for this though

Reviewers: juan, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3556"
spang,2016-12-23 16:25:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb13512ebc3061159b7690b58bb7dd15ae3c48ec,cb13512ebc3061159b7690b58bb7dd15ae3c48ec,"[local-sync] Fix UniqueConstraintError inserting contacts from messages

Summary:
Because of JavaScript's asynchronous nature, it is possible that we will
be processing several downloaded messages concurrently. This can lead to
calling extractContacts() in an interleaved fashion, which it was not
designed to handle. It looks up which contacts are already in the
database and then performs inserts or updates accordingly, assuming
nothing has changed in the contacts table in between---which is not
true! If several messages have similar contacts, an insert race can
cause one of the inserts to throw an unhandled exception.

We fix this by simply catching the unique constraint error, and falling
back to an update instead. (There's not really a better way to deal
with write races other than to enforce that we process contacts from
messages serially, as transactions are of no help here.)

This commit also removes extractContacts()'s return value, which is not
currently used and I found confusing.

Test Plan: manual

Reviewers: juan, evan, mark, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3555"
spang,2016-12-23 01:08:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6c8f86ecaafd439f4b7067299c9eb0ef45425a5,d6c8f86ecaafd439f4b7067299c9eb0ef45425a5,"fix(snippet-parsing): Don't add extraneous spaces after text format tags

Summary:
This was leading us to put funny things like 'Nylas !' in some snippets that used
tags like <i> and <b> for text formatting. This is probs a teeny little bit slower
than the previous version since it invokes a callback on a lot more nodes, but we
can't really fix this issue without knowledge of the preceding tag name.

Test Plan: unit test included!!

Reviewers: evan, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3553"
spang,2016-12-23 22:30:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/1fa24bf440b95755bd74743f98b7ac502548e40e,1fa24bf440b95755bd74743f98b7ac502548e40e,"[models] Remove unnecessary Reply-To array length validation

Summary:
I have quite a few emails in my mailbox that have both multiple Reply-To
addresses. This is perfectly OK by the spec.

Fixes: T7369

Test Plan:
regression test coming - making a list and planning to update all the tests once I've hammered out the current crop of fixes I've identified

I also tested and made sure that N1 does the right thing in this case...
multiple Reply-To addresses are displayed correctly, and when you hit ""Reply"" a
new draft is started with both in the To: field. Makes sense given this is
something the Python sync engine supported too.

Reviewers: jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3558"
jackiehluo,2016-12-22 22:58:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b30c0c30cb6664b2986210cd1c600fd73fc13e4,6b30c0c30cb6664b2986210cd1c600fd73fc13e4,[local-sync] Allow folders and labels to be null in toJSON()
spang,2016-12-22 20:42:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/866539a538479a384e84aa85f93ba52d0e6346d5,866539a538479a384e84aa85f93ba52d0e6346d5,"fix(sync-worker): Don't call _determineWorkerPool() twice

A race condition on bootup was causing us to sometimes start
two delta sync workers for the same account."
emorikawa,2016-12-22 18:32:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/83b7eeb60a5dba4bb969e1130a673645b1a0e33c,83b7eeb60a5dba4bb969e1130a673645b1a0e33c,fix(readme): update cloud-api log readmes
emorikawa,2016-12-22 17:58:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/63a816df6a8bf7f922dfbdba0c4c142242bc9e1a,63a816df6a8bf7f922dfbdba0c4c142242bc9e1a,fix(es6): rename js files to es6
emorikawa,2016-12-22 17:36:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b025cc025a75c1d3d6e62b33464e2ee9f7b3fe5,7b025cc025a75c1d3d6e62b33464e2ee9f7b3fe5,bump(version): 0.5.1
emorikawa,2016-12-22 17:27:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2203728d0ef18d3f22272d03e9494cf90e73937,c2203728d0ef18d3f22272d03e9494cf90e73937,bump(k2)
spang,2016-12-22 16:51:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/be1d772f3204184575742048e1ccd0a2c7d75e50,be1d772f3204184575742048e1ccd0a2c7d75e50,"[local-sync] Use mimelib to parse headers

Using node-imap's parseHeader function to parse headers was resulting in
a huge number of message parse failures on Office365 accounts, because
the results contained unicode control character 9 and we'd then feed that
string to JSON.parse when extracting contacts, which would throw an
exception.

Using mimelib's header parsing function eliminates these errors."
emorikawa,2016-12-22 02:44:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/b02c86a40ec452af47115f37bba772938bd49947,b02c86a40ec452af47115f37bba772938bd49947,"perf(delta): replaces API delta stream with direct in-memory one

Summary:
This replaces the API delta stream with a direct in-memory one

Depends on D3548

Test Plan: manual

Reviewers: halla, jackie

Reviewed By: halla, jackie

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3549"
emorikawa,2016-12-22 02:42:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/e31995c136cf01a101a84c88d8b7903d171a043c,e31995c136cf01a101a84c88d8b7903d171a043c,"perf(delta): replaces API delta stream with direct in-memory one

Summary:
This replaces the API delta stream with a direct in-memory one

Addresses T7300

Test Plan: manual

Reviewers: jackie, halla, juan

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3548"
jstejada,2016-12-21 12:28:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/f4cc07c69dd1be882d6d2ec890c095f7ba6859ec,f4cc07c69dd1be882d6d2ec890c095f7ba6859ec,"fix(sync-status):Use weighted percentage avg for sync status progress bar

Summary: Also move calculation to sync store, rename stuff a little bit

Test Plan: Manual :(

Reviewers: evan, jackie, halla

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3547"
jackiehluo,2016-12-21 20:04:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e8e88e62017f71069a1b560baa28abc191bfd22,1e8e88e62017f71069a1b560baa28abc191bfd22,fix(initial-sync-activity): Update correct function name
jstejada,2016-12-21 12:22:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc3a3d33b56ecd36c1a244201b761d4e98c1220a,fc3a3d33b56ecd36c1a244201b761d4e98c1220a,"fix(auth): Fix authentication notifications

Summary:
Depends on D3544 (K2 diff)

This commit ensures that auth notifications are showed when the
underlying sync worker fails and are cleared when an account is
successfully reconnected

To achieve this, we manually keep track and update syncStates where
appropriate via `Actions.updateAccount`, given that we have access to
N1's version of the account directly from local-sync.
Initially I was considering account delta stream to the cloud-api and the local-api, but that
just complicated things more than it helped.

This commit also fixes a bug with refreshing the gmail token in which we
we were only attempting a token refresh upon restarting the app

This addresses: T7346, T7305, T7335

Test Plan: Manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3545"
jstejada,2016-12-21 01:33:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1404be100a5c39b4610ad55e8499338c4feef03,d1404be100a5c39b4610ad55e8499338c4feef03,"[local-sync] Fix authentication notifications

Summary:
Associated N1 Diff: D3545

This commit ensures that authh notifications are showed when the
underlying sync worker fails and are cleared when an account is
successfully reconnected

To achieve this, we manually keep track and update syncStates where
appropriate via `Actions.updateAccount`, given that we have access to
N1's version of the account directly from local-sync.
Initially I was considering account delta stream to the cloud-api and the local-api, but that
just complicated things more than it helped.

This commit also fixes a bug with refreshing the gmail token in which we
we were only attempting a token refresh upon restarting the app

This addresses: T7346, T7305, T7335

Test Plan: Manual

Reviewers: halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3544"
emorikawa,2016-12-21 01:09:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/9339b34592c2c0e4ed816dd836c42693ed040414,9339b34592c2c0e4ed816dd836c42693ed040414,[local-sync] use async await in processNewMessage and fix logging
emorikawa,2016-12-21 00:47:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/0235370198ba1540ec1c3bc0f10d83f0beed7f26,0235370198ba1540ec1c3bc0f10d83f0beed7f26,bump(k2)
emorikawa,2016-12-21 00:47:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/c328cd34052bdf1def45f99324d57cb1649dd48f,c328cd34052bdf1def45f99324d57cb1649dd48f,"fix(spec): fix asynchronous specs

Summary:
I believe I discovered why our tests intermittently fail, why those
failures cause a cascade of failures, and how to fix it.

The bug is subtle and it's helpful to get a quick refresher on how various
parts of our testing system work:

First a deeper dive into how Promises work:

1. Upon creating a new Promise, the ""executor"" block (the one that gets
   passed `resolve` and `reject`), gets synchronously run.
2. You eventually call `resolve()`.
3. The minute you call `resolve()`, Bluebird's `async.js` queues up
   whatever's downstream (the next `then` block)
4. The queue gets processed on every ""tick"".
5. Once the ""tick"" happens, our queue processes and downstream `then`
   blocks get run.
6. If any more Promises come in before the ""tick"", they get added to the
   queue. Nothing gets processed until the ""tick"" happens.

The important takeaway here is this ""tick"" in step 4. This ""tick"" is the
core of what makes Promises asynchronous. By default, Bluebird in our
Node-like environment uses `setImmediate` as the underlying
implementation.

Our test environment is different. We do NOT use `setImmediate` in our test
environment.

We use Bluebird's `Promise.setScheduler` API to implement our own ""tick"".  This
gives us much greater control over when Promises advance. Node's `setImmediate`
puts you at the whim of the underlying event loop.

Before today, our test ""tick"" implementation used `setTimeout` and
`advanceClock` triggered by `process.nextTick`.

Let me also quickly explain `setTimeout` in our test environment.

We globally override `setTimeout` in our test environment to not be based on
actual time at all. There are places in our code where we wait for several
hundred miliseconds, or have timeouts places. Instead of ""sleeping"" some amount
of time and hoping for the best, we gain absolute control over ""time"". ""Time""
is just an integer value that only moves forward when you manually call
`advanceClock()` and pass it a certain number of ""milliseconds"".

At the beginning of each test, we reset time back to zero, we record
setTimeouts that come in, and as advanceClock gets called, we know if we need
to run any of the setTimeout callbacks.

Back to the Promise ""tick"" implementation. Before today, our testing ""tick""
implementation relied our our stubbed `setTimeout` and our control of time.

This almost always works fine. Unfortunately tests would sometimes
intermittently fail, and furthermore cause a cascade of failures down the road.

We've been plauged with this for as long as I can remember. I think I finally
found how all of this comes together to cause these intermittent failures and
how to fix it.

The issue arises from a test like the one in query-subscription-pool-spec.  We
have tests here (and subtly in other yet unknown places) that go
something like this:

```
it(""TEST A"", () => {
  Foo.add(new Thing())
  expect(Foo._things.length).toBe(1)
})

it(""TEST B"", () => {
  expect(true).toBe(true)
})
```

At the surface this test looks straightforward. The problem is that
`Foo.add` may down the line call something like `trigger()`, which may
have listeners setup, which might try and asynchronously do all kinds of
things (like read the fs or read/write to the database).

The biggest issue with this is that the test 'finishes' immediately after
that `expect` block and immediately moves onto the next test. If `Foo.add`
is asynchronous, by the time whatever downstream effects of `Foo.add` take
place we may be in a completely different test. Furthremore if those
downstream function errors, those errors will be raised, but Jasmine will
catch them in the wrong test sending you down a rabbit hole of dispair.

It gets worse.

At the start of each test, we reset our `setTimeout` stub time back to
zero. This is problematic when combined with the last issue.

Suppose `Foo.add` ends up queuing a downstream Promsie. Before today, that
downstream Promise used `setTimeout(0)` to trigger the `then` block.

Suppose TEST A finishes before `process.nextTick` in our custom scheduler
can call `advanceClock` and run the downstream Promise.

Once Test B starts, it will reset our `setTimeout` stub time back to zero.

`process.nextTick` comes back after Test B has started and calls
`advanceClock` like it's supposed to.

Unfortunately, because our stub time has been reset, advanceClock will NOT
find the original callback function that would have resolved `Foo.add`'s
downstream Promise!!!

This means that Bluebird is now stuck waiting for a ""tick"" that will never
come anymore.

Since Bluebird thinks it's waiting for a ""tick"", all future Promises will
get queued, but never called (see Step 6 of the Promise description
above).

This is why once one test fails, downstream ones never complete and
Jasmine times out.

The failure is intermittent because `process.nextTick` is racing agianst a
test finishing, the next one starting, and how many and how far downstream
promises are setup.

Okay. So how do we fix this? First I tried to simply not reset the time back to
zero again in our stubbed time-override. This doesn't work because it simply
exposes the diasterous consequences of downstream Promises resolving after a
test has completed. When a test completes we cleanup objects, unmount React
components. Those downstream promises and timeouts come back and throw all
kinds of errors like: ""can't read property x of undefined"" and ""can't find a
match for component X"".

The fix that works the best is to simply MAKE PROMISES FULLY SYCNRHONOUS.
Now if you look at our custom Promise Test Scheduler in time-override,
you'll see that it immediately and sychronously calls the function. This
means that all downstream promises will run BEFORE the test ends.

Note that this is designed as a safeguard. The best way to make a more
robust test is to declare that your funtion body is asynchronous. If you
call a method that has downstream effects, it's your responsibility to
wait for them to finish. I would consider the test example above a very,
very subtle bug. Unfortunately it's so subtle that it's unreasonable to
expect that we'll always catch them. Making everything in our testing
environment synchronous ensures that test setup and cleanup happen when we
intuitively expect them to.

Addendum:

The full Promise call chain looks something like this:

-> `Promise::_resolveCallback`
-> `Promise::_fulfill`
-> `Promise::_async.settlePromises`
-> `AsyncSettlePromises`
-> `Async::_queueTick`
-> CHECK `Async::_isTickUsed`
-> `Async::_schedule`
-> `TimeOverride.scheduler`
-> `setTimeout`
-> `process.nextTick`
-> `advanceClock`
-> `Async::_drainQueues`
-> `Async::_drainQueue`
-> `THEN BLOCK RUNS`
-> `Maybe more things get added to queue`
-> `Async::_reset`
-> `Async::_queueTick` works again.

Test Plan: They now work

Reviewers: halla, mark, spang, juan, jackie

Reviewed By: juan, jackie

Differential Revision: https://phab.nylas.com/D3538"
emorikawa,2016-12-21 00:46:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/874cddba06ad97a171416776c7ad77c57a750cfb,874cddba06ad97a171416776c7ad77c57a750cfb,[local-sync]: better sync reasons
emorikawa,2016-12-21 00:13:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec33f0e3ceb5886a91688b592267090e9cf3d13a,ec33f0e3ceb5886a91688b592267090e9cf3d13a,[local-sync] add logging for syncbackTasks
emorikawa,2016-12-21 00:04:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc94303cbb5d273c58e354ebf6e34bca2ba4306a,cc94303cbb5d273c58e354ebf6e34bca2ba4306a,"[local-sync, isomophic-core] nicer logging"
spang,2016-12-20 23:10:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/70f1e587fa6b451f0b5a0af26c347f90f0d48cd5,70f1e587fa6b451f0b5a0af26c347f90f0d48cd5,"[local-sync] Optimize snippet extraction

Summary:
We were seeing JS blocking in snippet extraction of up to 2k ms. This
is because we were walking the entire DOM of a message and extracting
all text, regardless of message size---and using our own homegrown
DOM walker function.

To remedy this, use the standard TreeWalker from the Chrome browser
APIs (which in benchmarks looks 2-4x faster) and also exit out of
the DOM walking process once we've accumulated enough text to create
a snippet. Informal eyeballing of timing metrics for this function suggests
the new implementation is something like 10-100x faster for some messages.

As a bonus, we get to delete some code and end up with a cleaner
implementation!

Test Plan: old unit tests yaay

Reviewers: juan

Reviewed By: juan

Subscribers: evan

Differential Revision: https://phab.nylas.com/D3543"
emorikawa,2016-12-20 21:08:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/69536e9a93f7e78a7754e67bec280a73bf640d4a,69536e9a93f7e78a7754e67bec280a73bf640d4a,bump(k2)
emorikawa,2016-12-20 21:08:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/9162d1174565a678bcab463e3464eb017e434155,9162d1174565a678bcab463e3464eb017e434155,"[isomorphic-core] fix sending on Office 365

Summary:
Fixed sending on Office 365
nodemailer needed a special tls flag beyond the standard SSL.
See: http://stackoverflow.com/questions/29812132/error-sending-email-using-nodemailer-via-office365-smtp-meanjs-scaffold

Test Plan: manual

Reviewers: juan, jackie, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3541"
jstejada,2016-12-20 16:25:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/5dff28291a1c576af2a3fb7ddec407463fc0e462,5dff28291a1c576af2a3fb7ddec407463fc0e462,fix(sync-status) Fix off by one error in store
jackiehluo,2016-12-19 23:39:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e86df4fbcf447738d39c13c7e52bf68e21c6634,9e86df4fbcf447738d39c13c7e52bf68e21c6634,"fix(tracking): Save updated metadata correctly and stop sending account ID with request

Summary:
Save metadata correctly by reassigning an object to value.

Since account IDs are different between N1 and N1 Cloud, use just the message ID, which should be unique.

Test Plan: Tested locally.

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3524"
jstejada,2016-12-19 23:35:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/4fa151d7a78db728ba9d13c43c0e0336ce2bfcdd,4fa151d7a78db728ba9d13c43c0e0336ce2bfcdd,"[local-sync] Fix date parsing and tests

Make sure that we use the header date for our date field because that's
the one we can control and depend on for message id generation"
hallamoore,2016-12-19 20:39:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/30b1cc95b6cdd72709acdca572aeb6d33c571eab,30b1cc95b6cdd72709acdca572aeb6d33c571eab,"re-feat(initial-sync-status): Bring the intiial sync progress bar back

Summary:
Adds a UI component to see the progress of initial sync.
(The behavior is sometimes a little strange, but I believe this is
just because of weird behavior in the NylasSyncStatusStore itself.
For instance, it sometimes never populates the `folderSyncProgress`
fields, or it never sets the progress to 1, so the bar stops at 99%)

Test Plan: tested locally

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3536"
jstejada,2016-12-19 18:08:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/d16d374854982dc171321a3b3242bcfe8bba0ebf,d16d374854982dc171321a3b3242bcfe8bba0ebf,fix(send) Fix typo in ReconcileMultiSendTask
emorikawa,2016-12-19 17:37:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/823b229bb932edcdff3ba62941cf6aec3119617e,823b229bb932edcdff3ba62941cf6aec3119617e,[local-sync] temporarily remove validation in send
emorikawa,2016-12-19 17:35:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ebe47a30e8950731829ad614a94b23c5545d727,2ebe47a30e8950731829ad614a94b23c5545d727,bump(version): 0.5.0
emorikawa,2016-12-19 17:25:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7a63345cf45f647dbca7f0e8cb342951f0c00a0,b7a63345cf45f647dbca7f0e8cb342951f0c00a0,bump(k2)
emorikawa,2016-12-19 17:25:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0cffc054f7ac56e02d7900e02448be0806f450a,d0cffc054f7ac56e02d7900e02448be0806f450a,"[cloud-api] refactor cloud API routes to use es6 & fix Gmail Auth

Summary:
This is a refactor of the auth APIs to use async/await. Gmail Auth is
pretty confusing and I wanted to make it cleaner to read and easier to
use. This is also part of the general API upgrade to modern ES6

This also fixes the Gmail auth error we saw at showcase

Test Plan: manual

Reviewers: halla, jackie, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3535"
jstejada,2016-12-19 16:08:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/053c1f83883022940718f03cdd9ca777bcd2420c,053c1f83883022940718f03cdd9ca777bcd2420c,"[local-sync] Fix issue with imap connection mail event

Summary:
See https://github.com/mscdex/node-imap/issues/585 for details.

This issue was causing us constantly run the sync loop without pauses,
i.e. every next sync loop was scheduled immediately.

Currently, when we receive a new `'mail'`event, we trigger a new sync loop. Previously, when this happened while a sync loop was already in progress we would just ignore the event. However, my recent patch keeps track of how many times we tried to start a sync loop while one was already in progress. If the number of times this happens is > 0, it will schedule the next sync loop immediately (as opposed to waiting a constant amount seconds before the next loop).

The problem is that this new logic is making the sync worker always schedule the next sync loop immediately (without pausing for a few seconds). This is due to the following chain of events (assume we are just syncing `all` and `trash` folders):

This commit is a temporary workaround to this problem.

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3537"
emorikawa,2016-12-19 04:38:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/467f061552e19628290fb7d3974e93b8597b97c3,467f061552e19628290fb7d3974e93b8597b97c3,feat(auth): update onboarding helpers to be async
emorikawa,2016-12-16 23:51:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b1675b79c8ae5162988fe12e2d6a6646e6543c6,3b1675b79c8ae5162988fe12e2d6a6646e6543c6,bump(k2)
emorikawa,2016-12-16 23:51:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e638706f6e5b6dd4d41301352f1854993efc0a0,1e638706f6e5b6dd4d41301352f1854993efc0a0,[isomorphic-core] add office365 in provider list
hallamoore,2016-12-16 23:46:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b16167c76ff056a339747eb5ab11ada18f14c52,4b16167c76ff056a339747eb5ab11ada18f14c52,fix(sending): Check if failedRecipients exists before checking length
hallamoore,2016-12-16 23:43:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5efb921572ad7270b5843a5da7a3858a1473ca8,f5efb921572ad7270b5843a5da7a3858a1473ca8,"[local-sync] Fix a couple bugs that popped up while sending

- Pass in the account when creating an ImapConnection
- Wrap the return value of the SendMessage task in an object"
emorikawa,2016-12-16 23:29:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8bcbfc68d8ec4b24699b8ad9ec030533347ed99,d8bcbfc68d8ec4b24699b8ad9ec030533347ed99,[local-api] fix validation errors on send
jstejada,2016-12-16 19:39:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/026db3f6102f469a546b3abea9f29fd591dedcad,026db3f6102f469a546b3abea9f29fd591dedcad,"feat(k2): Ensure send runs fast, clean up multisend tasks

Summary:
Associated K2 diff: D3529

This commit converts multi-send from a 3 step process into a 2 step
process

The first step creates the base message and sends a message per
recipient, each with its customized message body for tracking.

The second step reconciles all sent messages, specifically removing any
sent messages created by gmail, and saving the correct message to the
sent folder

This commit also ensures that we run the send tasks immediately by
ensuring we restart the sync loop if its already running

Depends on D3529

Test Plan: Manual

Reviewers: evan, jackie, halla

Reviewed By: jackie, halla

Differential Revision: https://phab.nylas.com/D3530"
spang,2016-12-16 22:17:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/57682a0ff596fc0e12eebeb2a91fe9e6b89fda78,57682a0ff596fc0e12eebeb2a91fe9e6b89fda78,"[local-sync] Fix parseFromImap specs

Lots has changed for the better! Tests work again also."
emorikawa,2016-12-16 22:42:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0d6e9aac1a29e37dac4c230fb768192e71b2551,a0d6e9aac1a29e37dac4c230fb768192e71b2551,bump(k2)
jstejada,2016-12-16 22:39:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/38bd1933661c82a7f56514bc41e90921097b74e4,38bd1933661c82a7f56514bc41e90921097b74e4,"[local-sync] Ensure send runs fast, clean up multisend tasks

Summary:
Associated N1 Diff: D3530

This commit converts multi-send from a 3 step process into a 2 step
process

The first step creates the base message and sends a message per
recipient, each with its customized message body for tracking.

The second step reconciles all sent messages, specifically removing any
sent messages created by gmail, and saving the correct message to the
sent folder

This commit also ensures that we run the send tasks immediately by
ensuring we restart the sync loop if its already running

Test Plan: Manual

Reviewers: evan, jackie, halla

Reviewed By: jackie, halla

Differential Revision: https://phab.nylas.com/D3529"
emorikawa,2016-12-16 21:53:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/7013d16cb876ce275843984042a4394f6cb1ed87,7013d16cb876ce275843984042a4394f6cb1ed87,"feat(auth): add office 365 support

Summary: Adds a new button in auth for native Office 365 support

Test Plan: manual

Reviewers: jackie, halla, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3532"
emorikawa,2016-12-16 21:53:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/86ef9a98ff51ea0e050293e3b8bf127cd0fc7522,86ef9a98ff51ea0e050293e3b8bf127cd0fc7522,"[isomorphic-core] add office365 auth support

Summary:
Adds support for office 365
Depends on D3532

Test Plan: manual

Reviewers: jackie, halla, mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3533"
emorikawa,2016-12-16 21:44:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/da0650efe6600e76f6486cf4b9a43fc739a41086,da0650efe6600e76f6486cf4b9a43fc739a41086,fix(sync): fix sync status store
hallamoore,2016-12-16 21:07:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ea149651fbf907d4bda04045fd86041d7d0bec7,4ea149651fbf907d4bda04045fd86041d7d0bec7,"fix(draft-store): Don't pop up a draft before it exists in the session

Summary:
The composer wasn't popping out correctly because the session's draft
was still null. This diff switches to using sessionForClientId(),
even if the session already exists in _draftSessions, because
sessionForClientId() won't create a new session if it doesn't need
to, and will always return a promise that resolves once the session
gets its draft. This promise will resolve immediately if the session
already has a draft.

Test Plan: tested locally

Reviewers: evan, juan

Reviewed By: juan

Subscribers: juan, spang

Differential Revision: https://phab.nylas.com/D3531"
khamidou,2016-12-16 19:38:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/672848dbdcad2c5bf4223897e6418bcb667a1bb3,672848dbdcad2c5bf4223897e6418bcb667a1bb3,"[feat] Refresh Gmail access tokens when needed

Summary:
This is a small patch but it's pretty complex, because of the numbers of moving parts. Gmail has two types of tokens, access and refresh tokens. Access tokens have a limited shelf life of one hour. After that they expire and you need to use your refresh token to get a new one.

We've decided to do the access token generation on the server, because we don't feel comfortable giving our users both our Google client id and secret. To do that, I've added an endpoint, `/gmail/auth/refresh` which returns a valid access token as well as an expiration date for the token.

The only place where we handle token expiration is in the sync workers. Before trying opening a new connection we check if our access token is expired. If yes, we get a new one from the API. If there's an issue doing this, we notify N1 using `NylasAPIHelpers.handleAuthenticationFailure`.

There's a second patch for N1 with tiny related fixes.

Test Plan: Tested manually. Will need to test more in the real world.

Reviewers: evan, jackie, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3522"
jstejada,2016-12-16 19:37:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7416479f506f627dafa2d7beca6ee5ceb1c5f79,c7416479f506f627dafa2d7beca6ee5ceb1c5f79,"[local-sync] Fix sync worker

- Correctly await async functions
- Make sync in progress more explicit"
khamidou,2016-12-15 20:25:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a3829daaec0af507be7d0711c4ff9009ca88fe1,3a3829daaec0af507be7d0711c4ff9009ca88fe1,Required changes for refreshing access tokens.
spang,2016-12-16 19:06:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/637f5b565fc2d8d276d42e9e0f6fa60b3c2ebfc1,637f5b565fc2d8d276d42e9e0f6fa60b3c2ebfc1,[local-sync] Update comment
hallamoore,2016-12-16 18:42:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/17b015eea13272e3e3506ee8c2d1fa156e69b127,17b015eea13272e3e3506ee8c2d1fa156e69b127,"[local-sync] Fix a couple of message parsing bugs

Summary:
- Don't fail if there's no subject, just set it to `(no subject)`
- Support ""BINARY"" content-transfer-encoding. (This really means
that there is no encoding, so it's simple to add support for it)

Test Plan: tested locally

Reviewers: jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3528"
emorikawa,2016-12-16 18:08:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/64bd3d3badf1973c6280262d2c7d889588e0b152,64bd3d3badf1973c6280262d2c7d889588e0b152,feat(babel): bump local babel and update K2 to use babel toolchain
emorikawa,2016-12-16 18:08:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/30d60c5a752906083f45060b617b6f091eff0012,30d60c5a752906083f45060b617b6f091eff0012,"[*] Add basic babel toolchain

Summary:
Adds babel to K2
Creates a simple build script so it'll run on prod.

Test Plan: manual

Reviewers: jackie, halla, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3527"
jstejada,2016-12-16 04:43:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/55fd84f8bec4642a124040cf9dfe7202b1f91119,55fd84f8bec4642a124040cf9dfe7202b1f91119,[local-sync] Fix sync worker - Restore fns removed by mistake
spang,2016-12-16 02:55:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/68797366043ade4ccd86543dc18607d7eb5b7184,68797366043ade4ccd86543dc18607d7eb5b7184,bump(K2)
jstejada,2016-12-16 02:45:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb0cd019db324e7e23750b488ad831f29bbc20f0,bb0cd019db324e7e23750b488ad831f29bbc20f0,[local-sync] Fix typo
spang,2016-12-16 02:43:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/c62740991dfa940161b19f3d60f70688a161cf35,c62740991dfa940161b19f3d60f70688a161cf35,"fix(quote-parser): Restore still relevant comment I actually removed

At one point I considered just removing this feature entirely,
but ended up not."
spang,2016-12-15 18:21:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/24ee2e22f4b4fbe8eeb824ed007e24a6cae5db64,24ee2e22f4b4fbe8eeb824ed007e24a6cae5db64,"fix(rendering): Fix quote stripping of many plaintext emails

Summary:
Since we changed the way we mark up plaintext emails to wrap them in <pre>
tags, the quote stripper has been failing to restore bodies in the cases
where a plaintext email starts with an inline quote (and thus the whole
contents of the <pre> tag is detected as a quote string).

This diff also fixes the HTML sanitizer to not strip off our custom
""nylas-plaintext"" class, which isn't currently used for anything but
allows us to definitively know which tags we added on for marking up
plaintext. Might be useful at some point!

Test Plan: unit test included, manual inspection of message display

Reviewers: evan

Differential Revision: https://phab.nylas.com/D3519"
jstejada,2016-12-15 18:22:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/35437bad092840385ea30cfd379b2ae945783e07,35437bad092840385ea30cfd379b2ae945783e07,"[local-sync] Allow sync-worker to be restarted

Summary:
Add internal state to the sync worker to allow for it to be interrupted
and restarted.

The concept in this commit is that if we've tried to trigger a sync enough times
while its already in progress, bail and start over.

Usually, we manually trigger sync loops when we queue a new SyncbackTasks,
so that the newly queued task gets executed. This is necessary because the only
way to run SyncbackTasks is via the sync loop, for consistency and simplicity
reasons.

For example, we might run into a case where we queue a SendMessage task,
and we want it to be executed ASAP, but if we're in the middle of a
syncing a mailbox with a ton of folders, we wont get to the SendMessage
task after some considerable time.

Specifically this commit makes it so:

- If the number of sync attempts while in progress is > 0, make sure we schedule the next sync immediately
- If we reach a threshold of sync attempts while in progress, interrupt sync and restart

Test Plan: todo :(

Reviewers: mark, spang, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3520"
jstejada,2016-12-15 16:36:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/39c74bd2fac747f0b68f193f9c515a4050a33031,39c74bd2fac747f0b68f193f9c515a4050a33031,"[local-sync] Fix syncback tasks execution

Summary:
We were doing all of this fancy filtering and sorting to determine which
tasks to run, but in the end, we were just running the whole unsorted
list (using the wrong variable)

Also extracted getting the list of tasks into its own function, for
easier unit tests (it should really have some)

And, also wanted to make sure other people looked at this code, since I
believe no one has before.

Test Plan: todo

Reviewers: mark, khamidou, spang, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3516"
emorikawa,2016-12-15 22:33:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/2032aa45dd8d3202d91588aeb0f25679d34f3140,2032aa45dd8d3202d91588aeb0f25679d34f3140,"bump(bluebird): upgrade bluebird

Summary:
I upgraded bluebird because I thought there was some missing dependency
issue when I booted K2. It actually turned out that the issue was missing
`striptags` require in the K2 local-sync package json and had nothing to
do with Bluebird.

But since were here and about to QA I figured I might as well bump it
anyway. Especially since I'll need it later to better diagnose async
tests.

I carefully went through the 3.0 changelog and believe I fixed the
outstanding issues

Test Plan: manual

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3523"
hallamoore,2016-12-14 23:34:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c2c06bd4f9fa00d93a8b939a1e3c5b7da042469,6c2c06bd4f9fa00d93a8b939a1e3c5b7da042469,"fix(mail-rules): use the right field name to get an account id

Summary:
With the fix to the delta-processor, this is all that's needed to
get mail rules working! Some places were trying to use 'accountId'
to access an account object's id, but it needs to be 'id' instead.

Test Plan: tested locally

Reviewers: jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3525"
emorikawa,2016-12-15 22:04:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2f286371265d18d76a55c372e52801553b9e3fc,b2f286371265d18d76a55c372e52801553b9e3fc,[local-sync] fix missing dependency
emorikawa,2016-12-15 20:32:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/41e1a3e45ba967df8de52f291358ca597ec4fc87,41e1a3e45ba967df8de52f291358ca597ec4fc87,fix(import): require 'rx' from 'nylas-exports'
emorikawa,2016-12-15 20:32:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/8319ed3e010af9e3f1c6830dcc47627e68675a70,8319ed3e010af9e3f1c6830dcc47627e68675a70,[local-private] require Rx from nylas-exports
jstejada,2016-12-15 09:15:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/856ed95af5ea080b79c0f66f19ce6fa022f3acb6,856ed95af5ea080b79c0f66f19ce6fa022f3acb6,"[local-sync] Fix contact parsing from T7327

Summary: See description at T7327

Test Plan: Manual, but this should have unit tests

Reviewers: mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3513"
jstejada,2016-12-15 20:04:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a5137d0d3b8c9caaa4f0d5dcdb51c402ce45d1e,0a5137d0d3b8c9caaa4f0d5dcdb51c402ce45d1e,"[local-sync]: Move sendmail-client and errors to isomorphic-core

Summary:
Move sendmail-client and errors to isomorphic-core, given that they will
probably be used by cloud-workers (plugin backends) and cloud-api

Depends on D3510

Test Plan: Manual

Reviewers: halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3512"
hallamoore,2016-12-15 02:35:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/d025b8d02a03b895c4722a364488ee087a14d083,d025b8d02a03b895c4722a364488ee087a14d083,"fix(delta-processor): Return created models in the expected format

Summary:
We were returning an array of arrays, when really we wanted an object
of arrays keyed by model type. This also involved removing an implementation
of mapObject that was overwriting underscore's implementation of it.

Test Plan: local, having others try it.

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3509"
jstejada,2016-12-15 07:58:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ceb41fde1b18b0df7d30caf85d848fbd5820de0,8ceb41fde1b18b0df7d30caf85d848fbd5820de0,"fix(send/tasks): Fix deltas for SyncbackRequest SyncbackTaskAPIRequest

Summary:
This commit fixes processing deltas for `ProviderSyncbackRequests` and
resolution of the `SyncbackTaskAPIRequest`

Specifically:
- Fix and update field definitions for `ProviderSyncbackRequest`
- Correctly parse the error attached to any `ProviderSyncbackRequest`
- Correctly process deltas for `ProviderSyncbackRequests` inside the
delta-processor
- Fix any tasks that used `SyncbackTaskAPIRequest`, and update send to use those

Depends on D3510

Test Plan: Todo/Manual

Reviewers: jackie, halla, evan

Reviewed By: halla, evan

Differential Revision: https://phab.nylas.com/D3511"
jstejada,2016-12-15 07:46:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8a25a44e4a5caf195d13e2826532b53ef61aa73,d8a25a44e4a5caf195d13e2826532b53ef61aa73,"[local-sync] Update send endpoints to use SyncbackTasks

Summary:
Associated N1 diff: D3511
Convert send endpoints to use syncback tasks for consistency with how we
perform other imap operations, but primarily:
- So that it triggers a sync loop immediately and we pick up changes quickly
- To keep track of various send operations as a single unit (e.g. sending + saving to sent folder or deleting from sent)

This commit also fixes SyncbackRequest error handling and processing in
N1-- previously we were saving error fields to the syncbackRequests with
a format that didn't match N1's API error and which wasn't properly
serializable. (Also rename HTTPError to APIError)

Test Plan: Todo/Manual

Reviewers: jackie, halla, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3510"
jstejada,2016-12-15 19:07:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb8ebeaacaffb2072c1a4707a5fc12602c7bdcc6,fb8ebeaacaffb2072c1a4707a5fc12602c7bdcc6,"fix(sync-status): Change old per model status, in favor of per folder

Summary:
Addresses T7275
Previously, we kept track of the sync status of each API model, and the progress
we'd made syncing all available models (e.g. all threads, messages, events, etc)

Given K2's set up, we are now keeping track of sync status per folder, i.e. what
percent of the folder's messages we've synced. This status is now reported from K2
to N1 via folder object deltas, and this commit rewrites the
NylasSyncStatusStore (in ES6) to reflect that.

The new Store keeps the sync state per account, which is the merged state of
per folder sync state, and delta connections state.
We also got rid of `CategoryStore.whenCategoriesReady` in favor of
`whenCategoryListSynced`, which is derived from the fact hat as long as we've
started syncing one folder, we've already synced the entire list of of folders/labels.

There are a couple of TODOs to be addressed in upcoming diffs:
- T7329 Restore the sidebar component to show sync progress, which was previously removed
- T7330 Figure out how to report sync progress per label, specifically, we are interested in knowing how much of the inbox we've synced, which is a label in Gmail. (This might be a non-issue if we sync the inbox very fast, first)

Depends on D3514

Test Plan: Manual

Reviewers: mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3515"
jstejada,2016-12-15 19:10:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/4be0a08ce236f269916a7cb999d94be4f27caa62,4be0a08ce236f269916a7cb999d94be4f27caa62,Bump submodule
jstejada,2016-12-15 19:06:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/f80825f2c95645f680513fbcfa252e5a26643934,f80825f2c95645f680513fbcfa252e5a26643934,"[local-sync] Report folder syncState to N1

Summary:
Associated N1 diff: D3515

Stop ignoring deltas for Folder.syncState updates

Test Plan: Manual

Reviewers: mark, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3514"
spang,2016-12-15 18:18:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc0e191fa7e2c0e7e82728df952d1b795b6ec668,dc0e191fa7e2c0e7e82728df952d1b795b6ec668,"[local-sync] Allow logging parsed messages to disk with NYLAS_DEBUG env var

Summary:
I've found this useful for generating test cases and am tired
of adding and removing this code!

Test Plan: inspect output of /tmp/k2-parse-output

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3518"
spang,2016-12-15 17:17:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dc9f7e7620366ad9b01e9a4427e5150b69c7b56,3dc9f7e7620366ad9b01e9a4427e5150b69c7b56,"[local-sync] Escape HTML entities in plaintext

Summary: This was understandably causing some messages to fail to display correctly.

Test Plan: unit tests are already broken for message parsing -- will fix in follow up diff

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3517"
emorikawa,2016-12-15 18:24:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/041917d7574248192b583635ef6aa7f2171b07a9,041917d7574248192b583635ef6aa7f2171b07a9,bump(electron): to 1.4.12 from 1.4.5
emorikawa,2016-12-12 20:12:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/085d69ac3faa5b01f0d55950420657aa3f5ed715,085d69ac3faa5b01f0d55950420657aa3f5ed715,"fix(spec): add support for async specs and disable misbehaving ones

More spec fixes

replace process.nextTick with setTimeout(fn, 0) for specs

Also added an unspy in the afterEach

Temporarily disable specs

fix(spec): start fixing specs

Summary:
This is the WIP fix to our spec runner.

Several tests have been completely commented out that will require
substantially more work to fix. These have been added to our sprint
backlog.

Other tests have been fixed to update to new APIs or to deal with genuine
bugs that were introduced without our knowing!

The most common non-trivial change relates to observing the `NylasAPI` and
`NylasAPIRequest`. We used to observe the arguments to `makeRequest`.
Unfortunately `NylasAPIRequest.run` is argumentless. Instead you can do:
`NylasAPIRequest.prototype.run.mostRecentCall.object.options` to get the
`options` passed into the object. the `.object` property grabs the context
of the spy when it was last called.

Fixing these tests uncovered several concerning issues with our test
runner. I spent a while tracking down why our participant-text-field-spec
was failling every so often. I chose that spec because it was the first
spec to likely fail, thereby requiring looking at the least number of
preceding files. I tried binary searching, turning on and off, several
files beforehand only to realize that the failure rate was not determined
by a particular preceding test, but rather the existing and quantity of
preceding tests, AND the number of console.log statements I had. There is
some processor-dependent race condition going on that needs further
investigation.

I also discovered an issue with the file-download-spec. We were getting
errors about it accessing a file, which was very suspicious given the code
stubs out all fs access. This was caused due to a spec that called an
async function outside ot a `waitsForPromise` block or a `waitsFor` block.
The test completed, the spies were cleaned up, but the downstream async
chain was still running. By the time the async chain finished the runner
was already working on the next spec and the spies had been restored
(causing the real fs access to run).

Juan had an idea to kill the specs once one fails to prevent cascading
failures. I'll implement this in the next diff update

Test Plan: npm test

Reviewers: juan, halla, jackie

Differential Revision: https://phab.nylas.com/D3501

Disable other specs

Disable more broken specs

All specs turned off till passing state

Use async-safe versions of spec functions

Add async test spec

Remove unused package code

Remove canary spec"
emorikawa,2016-12-13 20:27:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/29a2f3ad8fcc41a69b33933c17242fedc26a99c1,29a2f3ad8fcc41a69b33933c17242fedc26a99c1,"[local-private, local-sync] temporarily disable specs

[local-private] Disable more broken specs

Disable specs

Reenable local-sync tests"
spang,2016-12-15 04:35:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/038c34ff08370a1e027efefd5202bf630fa57d55,038c34ff08370a1e027efefd5202bf630fa57d55,"fix(rendering): Don't set a class on plaintext pre wrapping

Our HTML sanitizer that we run bodies through before rendering
strips off this class, so it's not currently working with the
class set. Since this CSS is specific to the email frame, should
be OK to have no class at all."
jstejada,2016-12-15 03:35:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b460d97cfadb724ef0000179ab497f9f1423176,3b460d97cfadb724ef0000179ab497f9f1423176,"[local-sync, cloud-api, cloud-workers] Fix msg id collision, tracking and sending issues, some refactoring

Summary:
This diff solves a few separate issues from T7313, T7316, T7282, and it refactors
the send code a little bit.

Initially, the problem that led to this diff was generating message ids that
wouldn't collide (which was causing errors in the message-processor). Collisions
in ids were being caused by messages that contained the exact same participants,
subject and date (most likely due bots or scripts sending emails in quick
succession)

To prevent collisions this commit adds the `message-id` header as part of the
database message id, and ensures that we set it correctly before sending, and
that it remains consistent through send, multi-send, and the sync loop.

During the refactor and review, I removed some code that assumed that we were
syncing drafts (which we aren't), and also fixes a few other known and
unknown issues around sending, message creation, and tracking, like assigning
the correct date header (we were previously assigning the draft creation date
from within N1), fixing the tracking regex, among other smaller bugs/typos.

Will address inline TODOs in a separate diff

Test Plan: TODO!!! I will add tests in another diff

Reviewers: evan, halla, jackie, khamidou

Reviewed By: halla, jackie

Differential Revision: https://phab.nylas.com/D3507"
khamidou,2016-12-09 22:48:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/e228dbfcdded662f74cd6e5f9b229a9c90e12624,e228dbfcdded662f74cd6e5f9b229a9c90e12624,trying to work around eb cli bugs.
hallamoore,2016-12-14 02:16:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8cbcc8ab0927cb23197c4e73c4b4fff659bb35f,f8cbcc8ab0927cb23197c4e73c4b4fff659bb35f,"feat(showDetails): Allow a ""Show Details"" option on error dialogs

Summary:
Pass in more details on sending errors, so that they can be viewed
more easily by clicking ""Show Details"", rather than having to check
the worker window console.

Test Plan: tested locally

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3505"
hallamoore,2016-12-14 02:09:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ee3c04036cb776cb7dd7aa6e8e819a8d8f09ba9,2ee3c04036cb776cb7dd7aa6e8e819a8d8f09ba9,"[local-sync] Fix contact validation

Summary:
Allow other fields to be passed in with participants, so that Contact
objects can be passed in as JSON. Also fix an error check.

Test Plan: tested locally

Reviewers: jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3504"
grinich,2016-12-14 02:42:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/102837d51638dd5316adf2ff7a193fef1199029a,102837d51638dd5316adf2ff7a193fef1199029a,Update README.md
jstejada,2016-12-14 01:57:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/70cec12d2a9aff04539db3f7969ed15a3c093a78,70cec12d2a9aff04539db3f7969ed15a3c093a78,fix(script/bootstrap) Properly remove already present lns + error handling
jackiehluo,2016-12-14 00:41:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/67d1e14e60fe204faf56622de38f2124ac7ffe24,67d1e14e60fe204faf56622de38f2124ac7ffe24,[cloud-api] Only prepend https:// to links if not present
spang,2016-12-13 20:42:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/c07f0a3b417495e2f84f775691b218cc0f1a6bef,c07f0a3b417495e2f84f775691b218cc0f1a6bef,"[local-sync] Parse DOM to extract snippets

Summary:
This fixes multiple issues, including snippets telling you you
ought to look at the HTML as well as cruft like HTML entities
and CSS in snippets.

Test Plan: unit tests included o.O

Reviewers: juan

Reviewed By: juan

Subscribers: evan

Differential Revision: https://phab.nylas.com/D3500"
jackiehluo,2016-12-14 00:25:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc296a85e9512a9e68a60dae3c7f629221b4d919,bc296a85e9512a9e68a60dae3c7f629221b4d919,[local-sync] Update URLs and regex
jackiehluo,2016-12-13 20:54:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2b272087af818cfb027f2edd78ecb256e35d2ee,c2b272087af818cfb027f2edd78ecb256e35d2ee,fix(tracking): Update server URLs and send MESSAGE_ID
jackiehluo,2016-12-13 20:53:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/35e040d7d0835ba966dc7f71cdf97adca8725db6,35e040d7d0835ba966dc7f71cdf97adca8725db6,fix(tracking): Update server URLs and send MESSAGE_ID
hallamoore,2016-12-12 21:33:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/1040039591887047f5519e81b31a801ccb89ee8a,1040039591887047f5519e81b31a801ccb89ee8a,"[local-sync] Fix a couple of multi-send bugs

Summary:
1) Send the custom body, rather than the generic body
2) Extract contacts correctly so that the saved sent message has all the
   participants, rather than just the last one

Test Plan: Tested locally

Reviewers: jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3499"
emorikawa,2016-12-13 04:18:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5ef6235b76db223a5d74d3d5e2f848838c080c9,a5ef6235b76db223a5d74d3d5e2f848838c080c9,bump(SFDC)
emorikawa,2016-12-13 04:13:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a656805d82cc2a3be0367b757673bf39838711f,1a656805d82cc2a3be0367b757673bf39838711f,bump(SFDC)
emorikawa,2016-12-13 00:02:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f85475607c5ac9e73a4475d7bff13622c2f686e,8f85475607c5ac9e73a4475d7bff13622c2f686e,bump(SFDC)
emorikawa,2016-12-12 23:24:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fd751d40363ac1ce58cfc9313bdc18350faeb79,0fd751d40363ac1ce58cfc9313bdc18350faeb79,bump(electron): 1.4.12
emorikawa,2016-12-12 23:03:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/f432d77aa0f53dcd1fa7510a6dcb988484b3b2af,f432d77aa0f53dcd1fa7510a6dcb988484b3b2af,bump(SFDC)
emorikawa,2016-12-12 23:03:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/659fbec82956b612a539a34f5455bb38a4342847,659fbec82956b612a539a34f5455bb38a4342847,bump(SFDC)
emorikawa,2016-12-12 22:41:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae401717fd030fa19111d426848d415eceb969b5,ae401717fd030fa19111d426848d415eceb969b5,Update Changelog
grinich,2016-12-12 21:50:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c74f270e445a400672d15e44fe81c2119641401,3c74f270e445a400672d15e44fe81c2119641401,"Add another awesome plugin and theme 🙌

Thanks @jodyheavener!"
emorikawa,2016-12-12 15:38:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a245d163390aece53fe32e7a713113b56223e7a,7a245d163390aece53fe32e7a713113b56223e7a,"Move old edgehill src/pro into K2/packages/nylas-private

Summary:
feat(bootstrap): automatically init submodule if able

fix(bootstrap): symlink arc instead of copy

Test Plan: test

Reviewers: juan

Differential Revision: https://phab.nylas.com/D3494"
emorikawa,2016-12-12 15:37:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a6d3157d764eb1034e61ec70f97f8fb6c5b030e,3a6d3157d764eb1034e61ec70f97f8fb6c5b030e,"[cloud-api, local-sync] reordering for lerna"
emorikawa,2016-12-12 15:22:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5ce3439faab18b0e4745df0b1e0fc65ff1ff801,d5ce3439faab18b0e4745df0b1e0fc65ff1ff801,feat(bootstrap): automatically init submodule if able
emorikawa,2016-12-12 15:10:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/1daf734c97445db2c0f57264fadc9979ed984eae,1daf734c97445db2c0f57264fadc9979ed984eae,Move old edgehill src/pro into K2/packages/nylas-private
emorikawa,2016-12-12 14:43:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/85de77c9645010e7a463e55b16617de50362c49c,85de77c9645010e7a463e55b16617de50362c49c,"[local-private] move old edgehill src/pro into packages/local-private

Summary: This is a test

Test Plan: Testing

Reviewers: juan

Differential Revision: https://phab.nylas.com/D3493

[local-private] add old edgehill src/pro into packages/local-private"
emorikawa,2016-12-09 23:22:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2be516d88784290066550759f76e705931986e3,c2be516d88784290066550759f76e705931986e3,fix(SFDC): properly enable SFDC
emorikawa,2016-12-09 20:03:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/03f06c1566152a5882048ebeb18d08ea3974e73e,03f06c1566152a5882048ebeb18d08ea3974e73e,bump(version): 0.4.402
emorikawa,2016-12-09 20:02:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e271ca4d8ee5413c1a8c344143e2eb8cb3836d3f,e271ca4d8ee5413c1a8c344143e2eb8cb3836d3f,fix(lint)
emorikawa,2016-12-09 19:15:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d3e2857e79e0f2f00b6498d3fded133abcf4f1c,9d3e2857e79e0f2f00b6498d3fded133abcf4f1c,bump(k2)
mhahnenberg,2016-12-09 19:15:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc60882a13687c30e4ff620d18a0d4c827c048a4,bc60882a13687c30e4ff620d18a0d4c827c048a4,"[local-sync] Increment streamAll offset by chunkSize (#5)

Otherwise we'll infinite loop if there are more than 2000 results."
emorikawa,2016-12-09 19:13:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2410c9041be7af5263a30a9c8543e6ab5022bcf,f2410c9041be7af5263a30a9c8543e6ab5022bcf,bump(k2)
mhahnenberg,2016-12-09 19:12:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/713be08ef6b36df3fc564208e99b130c617929aa,713be08ef6b36df3fc564208e99b130c617929aa,[local-sync] Add index for Thread.id (#4)
spang,2016-12-09 02:30:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7f96b74532b6d852b034220e4b04f5782a27be2,a7f96b74532b6d852b034220e4b04f5782a27be2,"fix(local-sync): Fix charset interpretation in message parsing

Summary:
This commit fixes the following bugs in message parsing:
- we were unilaterally decoding MIME bodies as UTF-8; instead, decode according
  to the charset data in the mimepart header
- '7bit' content-transfer-encoding means us-ascii, NOT utf-7
- only interpret valid content-transfer-encodings (previously we were trying
  to treat various charsets as transfer-encodings)
- clearer naming: s/values/parsedMessage/
- unify snippet cleanup between plaintext & stripped HTML (merging
  whitespace etc.)

Test Plan: units tests coming

Reviewers: juan

Differential Revision: https://phab.nylas.com/D3491"
jackiehluo,2016-12-09 02:32:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6645de138bfad9c485e287cfab32ff4bf38e35d6,6645de138bfad9c485e287cfab32ff4bf38e35d6,"fix(error): Treat error as object, not string"
emorikawa,2016-12-09 02:26:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc022cc7b6ca549862fc047b91710fe3c423cebc,fc022cc7b6ca549862fc047b91710fe3c423cebc,bump(SFDC)
emorikawa,2016-12-09 02:19:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c403351cf1cb31edf29d58900cddae4a3541b10,7c403351cf1cb31edf29d58900cddae4a3541b10,feat(form): better form headers
jackiehluo,2016-12-09 02:10:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c980b7b53c628dfd4dca24674b9794c3d8441c2,8c980b7b53c628dfd4dca24674b9794c3d8441c2,fix(message-factory): Unlink circular dependency
jackiehluo,2016-12-09 01:55:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e07c204ecb88d8261bc0dcbea9c74ca7b3aed7a8,e07c204ecb88d8261bc0dcbea9c74ca7b3aed7a8,fix(message-ids): Use correct hashing for headers
jackiehluo,2016-12-09 01:50:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1cf90d697b6bb436b04ad5f826b3b7c1dfabbc8,b1cf90d697b6bb436b04ad5f826b3b7c1dfabbc8,feat(message-ids): Hash message IDs and replace in draft before sending
jackiehluo,2016-12-09 01:48:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e975a44caf5e2d2b029d759f24a105f78cce3c6,9e975a44caf5e2d2b029d759f24a105f78cce3c6,feat(message-ids): Hash message IDs and replace in draft before sending
emorikawa,2016-12-09 01:23:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d4d815ac00d7771e94dbfe5941615d3ef848007,2d4d815ac00d7771e94dbfe5941615d3ef848007,feat(SFDC): enable SFDC on by default
emorikawa,2016-12-09 01:19:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/9455a8ce30cd73763e027931b9c6039acae2e0bd,9455a8ce30cd73763e027931b9c6039acae2e0bd,feat(links): forward name and message in links
emorikawa,2016-12-08 22:18:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/7632d361b8c4f3440194c9a001d752a7871ab470,7632d361b8c4f3440194c9a001d752a7871ab470,"fix(build): fix osx sign, fail on error, remove unnecessary k2"
emorikawa,2016-12-08 22:16:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/a98fe771c2ca62a295a348100e1145021a251d40,a98fe771c2ca62a295a348100e1145021a251d40,[local-sync] fix builds. Routes with trailing slash and main extension
jackiehluo,2016-12-08 21:42:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/49590d998532bb39d5d7ab0822941d9b41cf02e4,49590d998532bb39d5d7ab0822941d9b41cf02e4,feat(tracking): Add routes for open and link tracking
jackiehluo,2016-12-08 21:38:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/c458e70fa7e6f9119b31f4247d904731048af72b,c458e70fa7e6f9119b31f4247d904731048af72b,feat(tracking): Add routes for open and link tracking
emorikawa,2016-12-08 19:11:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa6a00bda92bd60d1dccd81e7292f37c2ba904fc,aa6a00bda92bd60d1dccd81e7292f37c2ba904fc,fix(SFDC): fix bug where opening new file would cause attachments to fail
emorikawa,2016-12-08 19:11:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/2821ef4a652b81deb68f141c6ea6e78ea4632fd0,2821ef4a652b81deb68f141c6ea6e78ea4632fd0,fix(SFDC): fix bug where opening new file would cause attachments to fail
jstejada,2016-12-08 18:28:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7195c101c7564a33f654560f346269aeba69584,d7195c101c7564a33f654560f346269aeba69584,bump submodule
jstejada,2016-12-08 18:28:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e2194a8dc1c148c03db5688dda357ecd84b4ca4,2e2194a8dc1c148c03db5688dda357ecd84b4ca4,[local-sync] Fix lint error
emorikawa,2016-12-08 01:49:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/d4859e6333bab9fabe8c0b1e9bb0a7ec225e25f2,d4859e6333bab9fabe8c0b1e9bb0a7ec225e25f2,bump(k2)
emorikawa,2016-12-08 01:47:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/5217ee001f6da27109b836ed74d428d17de9ad10,5217ee001f6da27109b836ed74d428d17de9ad10,[local-sync] fix delta sync not getting threads with updated labels
hallamoore,2016-12-08 01:14:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/159cf1053ffa86f2604e5daee743b037b1077aaa,159cf1053ffa86f2604e5daee743b037b1077aaa,bump(submodules)
hallamoore,2016-12-08 00:50:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/7261b9e23c64d6951378cff5b51b4c8a59763fb8,7261b9e23c64d6951378cff5b51b4c8a59763fb8,bump(src/pro)
emorikawa,2016-12-08 00:36:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/0d02f6f6d39b2762d90ff8d7fc2daba12c410775,0d02f6f6d39b2762d90ff8d7fc2daba12c410775,[local-sync] Add global dbs and cleanup orphan messages
jstejada,2016-12-08 00:16:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/fca9a085141197b63e225c1a4268cb0d4b3d99fb,fca9a085141197b63e225c1a4268cb0d4b3d99fb,bump submodule
jstejada,2016-12-08 00:16:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/acc61a738f244dcd0a63f908587df1ce2e580215,acc61a738f244dcd0a63f908587df1ce2e580215,[local-sync] Add todos
jstejada,2016-12-08 00:00:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/2bf4a50ead360f469a74a679b910bbd1c45546dc,2bf4a50ead360f469a74a679b910bbd1c45546dc,"fix(tasks): Add syncback-task-api-request to keep track of K2 tasks

This commit adds a new request type: SyncbackTaskAPIRequest.
This API request is meant to be used for requests that create a
SyncbackRequest inside K2.
When the initial http request succeeds, this means that the task was created,
but we cant tell if the task actually succeeded or failed until some time in
the future when its processed inside K2's sync loop.

A SyncbackTaskAPIRequest will only resolve until the underlying K2 syncback
request has actually succeeded, or reject when it fails, by listening to
deltas for ProviderSyncbackRequests

THis commit also updates N1's tasks that create syncback requests to use
this new type of request"
jstejada,2016-12-07 22:43:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/4938170198f3395dba70b6d3fe71aa5a178befe5,4938170198f3395dba70b6d3fe71aa5a178befe5,"[local-sync] Fix file/contact creation

We were getting sql unique constraint violation errors for ids because
we were attempting to create objects with the same id within the same
transaction.

This commit ensures that only attempt to write a contact with the same
id once, and that we check for all exsiting contacts before hand.

For file, we ensure that we don't attempt to write 2 files with the same
id more than once"
bengotow,2016-12-07 22:40:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f5fede8b91595b2566e2f6f51a22742ccc84b3a,7f5fede8b91595b2566e2f6f51a22742ccc84b3a,"nit(db): Be more defensive, try to find tx issue"
khamidou,2016-12-07 22:35:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/85df56fe32a85cac09474bd63b766fe8608b36f3,85df56fe32a85cac09474bd63b766fe8608b36f3,"[cloud-api] Add an endpoint to get a new refresh token

Summary:
You can hit the new `/auth/gmail/refresh` endpoint with your account token and get back the following JSON:
```
{
   refresh_token: ""AAAAA"",
   expiry_date: 1481146347
}
```

This way we'll be able to get a new token when we need to.

Test Plan: Need to write the K2-specific parts of the code now.

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3486"
hallamoore,2016-12-07 20:17:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/ede7a6c1d3437abb87733d8fda58fcf088679077,ede7a6c1d3437abb87733d8fda58fcf088679077,"update(send): Pass in the upload data that local-sync expects

Since local-sync can access the same targetPaths as N1, there's
no need to create actual File instances anymore. Pass just the
upload data in the API request, and remove SyncbackDraftFilesTask
since it is no longer necessary."
hallamoore,2016-12-07 22:06:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/97a3b1d71cdbd9208b17d33103a34f9cb425d5de,97a3b1d71cdbd9208b17d33103a34f9cb425d5de,"[local-sync] feat(send): Add support for attachments

Also move some helper function logic onto the Message model"
jstejada,2016-12-07 21:39:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/11a26eeb5dd9242b9f8dbba473e9476a796df5ae,11a26eeb5dd9242b9f8dbba473e9476a796df5ae,"[local-sync]: Fix label/folder id creation

We were using the stripped version of label/folder names for the id
hash, e.g. [Gmail]/Drafts would be Drafts.
However, we can't do this because it might collide with other names. e.g. if the
user created a Drafts label, it would end up colliding with [Gmail]/Drafts

Minor lint fix"
emorikawa,2016-12-07 19:57:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/d607f799e66a4d3b60f9f8037a7667e031cb3ef4,d607f799e66a4d3b60f9f8037a7667e031cb3ef4,bump(SFDC)
emorikawa,2016-12-07 18:11:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/152a7488f7a791d12797b3f4539d29565f581f18,152a7488f7a791d12797b3f4539d29565f581f18,feat(auth): add better error state handling
emorikawa,2016-12-07 18:10:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/1684bb48c54994efbd029bb546d1b4e12edc7b2d,1684bb48c54994efbd029bb546d1b4e12edc7b2d,[isomorphic-core] add more auth error states
spang,2016-12-07 15:26:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/024de5dbcc1555343b50f20b1ab4d7846917691f,024de5dbcc1555343b50f20b1ab4d7846917691f,bump(k2)
spang,2016-12-07 15:25:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2efca39e1cffcbe72e570910cfa541f60353eb7,c2efca39e1cffcbe72e570910cfa541f60353eb7,Enable nodejs completion with tern
spang,2016-12-06 19:19:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/7969db76fa73d28406927e6c5df77b674fda3bbf,7969db76fa73d28406927e6c5df77b674fda3bbf,"[local-sync] Add specs for message parsing

Summary:
This commit also fixes snippets for HTML-only messages to strip out HTML
tags, and makes us preserve whitespace for plaintext emails by
displaying them in <pre class=""nylas-plaintext""> tags, and makes us log
messages that fail to parse at all to a tempdir.

The only issue I found with using <pre> tags for plaintext email was
that some lines may trigger scrolling, so there is an associated commit
(D3484) that changes the CSS for <pre class=""nylas-plaintext""> to wrap
lines.

In the future, we can add regression tests to this test suite whenever
we fix parsing bugs.

Test Plan: unit tests included

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3483"
bengotow,2016-12-07 01:51:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab92a1719b6b7a6330fafdae836c3a6681031ffa,ab92a1719b6b7a6330fafdae836c3a6681031ffa,[local-sync] Don’t update contacts if name is the same
spang,2016-12-07 00:58:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/909922b97453b32f1acff9836956cee62a310259,909922b97453b32f1acff9836956cee62a310259,"feat(k2): Wrap lines on preformatted text

Summary:
We now use <pre> tags to preserve whitespace in plaintext emails,
but it's annoying when there are long lines that force a scroll
bar. Wrap them instead.

Test Plan:
looked at some emails. Not sure this isn't going to break something
           weird---is <pre> used in anything else?

Reviewers: bengotow

Differential Revision: https://phab.nylas.com/D3484"
emorikawa,2016-12-07 01:20:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e9ac0c75cf32cfcfbf29778e9fc3de70fc81569,3e9ac0c75cf32cfcfbf29778e9fc3de70fc81569,fix(errors): properly rethrow api error
emorikawa,2016-12-07 01:20:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0b15bcf27f215cb1781fec75284b8d82ba64f3a,f0b15bcf27f215cb1781fec75284b8d82ba64f3a,remove console log
jackiehluo,2016-12-07 00:45:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc0c86622c0d70df3c603abc360968142c2ad1c7,dc0c86622c0d70df3c603abc360968142c2ad1c7,rm(send-successful): Remove NotifyPluginsOfSendTask
jackiehluo,2016-12-07 00:04:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/efd504a72160e035ef79e81a68a3e2a722a0b5a2,efd504a72160e035ef79e81a68a3e2a722a0b5a2,fix(spelling): Correct references
emorikawa,2016-12-06 20:31:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/57530b5e856ff8bfbdfcc984bb05366251697f6b,57530b5e856ff8bfbdfcc984bb05366251697f6b,refactor(build): update build to install with right env for k2 packages
emorikawa,2016-12-06 18:42:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/b664c827c40a33e408e6d3577ecf7ec6c4f818ed,b664c827c40a33e408e6d3577ecf7ec6c4f818ed,refactor(auth): DRY auth
emorikawa,2016-12-07 00:02:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/128d8bd9121ef4cd62a8a8a99593c91fe40b538e,128d8bd9121ef4cd62a8a8a99593c91fe40b538e,[cloud-api] fix param names
emorikawa,2016-12-06 23:28:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbf1a7b4e0e96eaab31c28b9c2d2946cc50dbd1e,fbf1a7b4e0e96eaab31c28b9c2d2946cc50dbd1e,[*] package.json updates from lerna
emorikawa,2016-12-06 22:53:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/e04c087add976ee631f074b3e69e001a813d48dc,e04c087add976ee631f074b3e69e001a813d48dc,[*] fix auth
emorikawa,2016-12-06 20:31:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/8568083d6adc1cbaaae8b0cf541d3baab09f0342,8568083d6adc1cbaaae8b0cf541d3baab09f0342,[*] update lerna to 2.0.0-beta.30
emorikawa,2016-12-06 18:42:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/e26ff019c76c4a5a06944e9fdf5b5e75bd6b1c94,e26ff019c76c4a5a06944e9fdf5b5e75bd6b1c94,[*] DRY Auth
emorikawa,2016-12-06 01:59:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/5030b40e4bb9c40fa9787830086043fb8a7e3eb2,5030b40e4bb9c40fa9787830086043fb8a7e3eb2,[isomorphic-core] extract AuthHelpers to DRY
jstejada,2016-12-06 23:54:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/11d23cfce16786877e59afad84bff71aa790dd0b,11d23cfce16786877e59afad84bff71aa790dd0b,bump submodule
jstejada,2016-12-06 23:54:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/295601d1337b067ab86c5b46939212d723de9ef7,295601d1337b067ab86c5b46939212d723de9ef7,[local-sync] Update DeleteSentMessage task for ordering
jstejada,2016-12-06 23:45:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebfc0e54e381723fd84c8e9adcd1683874c88f23,ebfc0e54e381723fd84c8e9adcd1683874c88f23,"fix(k2) Ensure order correct order when running syncback requests

When running syncback requests, if a task is meant to change the UID of
a message (e.g. move it to a new folder), that task should be run after
other tasks that don't affect the UID. Otherwise, when trying to run the
other tasks, they would reference a UID that is no longer valid.

This commit will make sure that we run any tasks that will change message uids last,
/and/ make sure that we don't run more than 1 task that will affect the uids of
the same messages in a row (i.e. without running a sync loop in between)"
jstejada,2016-12-06 23:34:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/29b7c80dff3a519a8f2da672b9698ec93550659b,29b7c80dff3a519a8f2da672b9698ec93550659b,"[local-sync] Ensure order correct order when running syncback requests

When running syncback requests, if a task is meant to change the UID of
a message (e.g. move it to a new folder), that task should be run after
other tasks that don't affect the UID. Otherwise, when trying to run the
other tasks, they would reference a UID that is no longer valid.

This commit will make sure that we run any tasks that will change message uids last,
/and/ make sure that we don't run more than 1 task that will affect the uids of
the same messages in a row (i.e. without running a sync loop in between)"
hallamoore,2016-12-06 19:34:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/8287656f80d01f3655156a69d3022e9756bd5784,8287656f80d01f3655156a69d3022e9756bd5784,"[local-sync, iso-core] feat(send): add finishing touches to gmail multi-send

Delete the sent messages that gmail automatically creates and save our
generic form of the draft as a sent message."
jstejada,2016-12-06 02:50:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/15adefdf4a121558331fd37277d1bc47a8facf95,15adefdf4a121558331fd37277d1bc47a8facf95,"[local-sync] Correctly sync folders and labels

This commit will correctly keep track of folder and label ids when
creating them from N1.

Previously, when we sent the request to create a folder or label to our api,
we would immediately get back a serverId because it was created optimistically
in the back end— given that K2 is strictly non-optimistic, we won’t have a serverId
until some undetermined time in the future, and we need to somehow reference
the object that /was/ optimistically created in N1 to update the ui when
we do get the server id.

Since we can deterministically generate ids for folders and labels,
we ""guess"" what its going to be, and include it in the props of the syncback request
returned to N1. This is the simplest solution to get thing working
correctly right now, but we’ll need to revisit this in the future for
other types of objects (drafts, contacts, events), and revisit how we
will manage optimistic updates in N1 when we merge the 2 codebases
with K2 (given that K2 was designed to be non-optimisitc)."
jstejada,2016-12-06 02:50:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/80a54a44a445b1dc1f1e8ca8ac6c71dd460ea9a3,80a54a44a445b1dc1f1e8ca8ac6c71dd460ea9a3,"[local-sync] Correctly sync folders and labels

This commit will correctly keep track of folder and label ids when
creating them from N1.

Previously, when we sent the request to create a folder or label to our api,
we would immediately get back a serverId because it was created optimistically
in the back end— given that K2 is strictly non-optimistic, we won’t have a serverId
until some undetermined time in the future, and we need to somehow reference
the object that /was/ optimistically created in N1 to update the ui when
we do get the server id.

Since we can deterministically generate ids for folders and labels,
we ""guess"" what its going to be, and include it in the props of the syncback request
returned to N1. This is the simplest solution to get thing working
correctly right now, but we’ll need to revisit this in the future for
other types of objects (drafts, contacts, events), and revisit how we
will manage optimistic updates in N1 when we merge the 2 codebases
with K2 (given that K2 was designed to be non-optimisitc)."
emorikawa,2016-12-06 01:30:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b881abe77db79b0438be321fba3a7bcdaa59bc6,8b881abe77db79b0438be321fba3a7bcdaa59bc6,bump(k2)
emorikawa,2016-12-06 01:28:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/21a92e90f644b39e3ce46112c3f0c0deb0606ba6,21a92e90f644b39e3ce46112c3f0c0deb0606ba6,fix(key): only migrate if key doesn't exist
emorikawa,2016-12-06 01:05:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e10e74c970d597f44e7526be9b471ae88e1cca9,1e10e74c970d597f44e7526be9b471ae88e1cca9,feat(key): use unified key manager
spang,2016-12-06 00:23:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9f23341f76b1f680212b8de4838e6af8aeb106a,a9f23341f76b1f680212b8de4838e6af8aeb106a,add watchman config file for fast fuzzy find
bengotow,2016-12-06 00:20:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/0123ded3228a7c8fa1c9aff454f144578d760b61,0123ded3228a7c8fa1c9aff454f144578d760b61,[local-sync] fix(folder-list): Support children when parent has no attribs
bengotow,2016-12-06 00:07:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e595487437a73e986444ed27210a606f91f62cf,7e595487437a73e986444ed27210a606f91f62cf,[local-sync] feat(specs): Add basic tests for folder sync
khamidou,2016-12-05 23:37:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/67bd860beffd877ab0eb80022d9ea6d29132b968,67bd860beffd877ab0eb80022d9ea6d29132b968,"[fix] Fix transaction creation for contacts

Summary:
Fixes T7283. We weren't creating deltas for contacts because we were inserting contacts using `UPSERT`, which requires us to add another sequelize hook.  Unfortunately, support for this hook is only available on sequelize 4.x.

I didn't want to upgrade our sequelize version right now and cause of bunch of mysterious failures, so I've simply changed the `UPSERT` to be either an `INSERT`or `UPDATE`. We didn't really need it anyway.

Test Plan: Checked that N1 was receiving contact deltas.

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T7283

Differential Revision: https://phab.nylas.com/D3481"
bengotow,2016-12-05 23:00:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/81ca3190e81297bf9b8e147118d348603c234d65,81ca3190e81297bf9b8e147118d348603c234d65,[local-sync] fix(specs): New specs for threading
emorikawa,2016-12-05 22:23:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/f439eaf03fb722e722ec03b2efe5d71d0de498c5,f439eaf03fb722e722ec03b2efe5d71d0de498c5,bump(version): 0.4.401
emorikawa,2016-12-05 22:21:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e524f7e9ecbcef2d98e817ee9f78cf356251c17,8e524f7e9ecbcef2d98e817ee9f78cf356251c17,fix(iframe): return if the iframe doc hasn't loaded yet
emorikawa,2016-12-05 21:56:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c154345a1c0609fcdbadf6b34eab3c8a103f89b,5c154345a1c0609fcdbadf6b34eab3c8a103f89b,feat(SFDC): pull up sidebar Contacts and Leads by name too
emorikawa,2016-12-05 21:13:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/d3eb7d556e00dc502905d2ea83510b1f1ae838d4,d3eb7d556e00dc502905d2ea83510b1f1ae838d4,fix(SFDC): fix null defaultValue to tokenizing field
hallamoore,2016-12-05 20:55:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d79783f301510f9e117275acbe34a371387513f,1d79783f301510f9e117275acbe34a371387513f,[local-sync] Fix(send): change some validation fields for multi-send
bengotow,2016-12-05 20:16:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2a2aae794055cbdcb41da6c1f15bc1ff9514a67,d2a2aae794055cbdcb41da6c1f15bc1ff9514a67,[local-sync] fix(specs): run `npm test` in local-sync dir
jackiehluo,2016-12-05 19:37:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac2d4b12ace40e6038a9677256f1cd327d846a13,ac2d4b12ace40e6038a9677256f1cd327d846a13,fix(nylas-api): Correct some imports and remove tests for plugin auth
bengotow,2016-12-05 18:19:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/56da181c9968394b480a8bc23b71b1366f416322,56da181c9968394b480a8bc23b71b1366f416322,bump(submodule)
bengotow,2016-12-05 18:19:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/959b632adcf0607f61dbeca68bef344281e461b4,959b632adcf0607f61dbeca68bef344281e461b4,fix(deltas): Minor tweaks to metadata delta processing
bengotow,2016-12-05 17:57:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebd4a266a7c829a19778592759369845a93e16b5,ebd4a266a7c829a19778592759369845a93e16b5,[*] Allow zero elements in the replyTo field
bengotow,2016-12-02 23:58:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/39db842895e821bc15c6c80dfa530ca109cba195,39db842895e821bc15c6c80dfa530ca109cba195,fix(deltas): Minor adjustments for thread deltas
jackiehluo,2016-12-02 23:50:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a984b4dd668c237edd1308c8c2c979668c9328d,3a984b4dd668c237edd1308c8c2c979668c9328d,refactor(nylas-api): Make requests with helpers
bengotow,2016-12-02 23:44:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/badedc9c94344f8e78dee0216ac1392026743b73,badedc9c94344f8e78dee0216ac1392026743b73,fix linter errors
bengotow,2016-12-02 23:38:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9c7d481120669acc7428337c1193d7a48e2bb38,f9c7d481120669acc7428337c1193d7a48e2bb38,"[cloud-api] Require metadata payload params, value instead of data"
bengotow,2016-12-02 23:33:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5247e25e52cfefb82d4b696bde8957cde6c4999,e5247e25e52cfefb82d4b696bde8957cde6c4999,[cloud-api] Saving metadata requires JSON
hallamoore,2016-11-30 00:38:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/85adbda5869f56d028879a06a195e671d029269e,85adbda5869f56d028879a06a195e671d029269e,"[local-sync, iso-core, cloud-core] feat(send): add multi-send support

Also renames JSONType() -> buildJSONColumnOptions() and
JSONARRAYType() -> buildJSONARRAYColumnOptions() to prevent passing
those return values in as just the type value instead of the entire
options object."
emorikawa,2016-12-02 23:02:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/a08c9b88639be440462cd53b63617ff459607205,a08c9b88639be440462cd53b63617ff459607205,bump(k2)
bengotow,2016-12-02 22:50:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/25e8a655a306aa85c8f9ce93125252da4349149c,25e8a655a306aa85c8f9ce93125252da4349149c,[cloud-api] Put object_type back on metadata
bengotow,2016-12-02 22:42:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/6153947ae0dd28cbcfc614c79ddc64f0303fca9d,6153947ae0dd28cbcfc614c79ddc64f0303fca9d,[cloud-api] add where clauses. omfg sequelize plz.
emorikawa,2016-12-02 22:34:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/88f4c56e1edb30d508283ad92ab92e2ce473cc5b,88f4c56e1edb30d508283ad92ab92e2ce473cc5b,refactor(plugins): use plugin name instead of appId
bengotow,2016-12-02 22:34:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/7814b24ac03c1cb6c7791d291df42456b7a4bae5,7814b24ac03c1cb6c7791d291df42456b7a4bae5,fix(metadata): Remove all plugin auth
bengotow,2016-12-02 22:34:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0325b424d4f90da242bffc62f1cb37678e5d591,e0325b424d4f90da242bffc62f1cb37678e5d591,[cloud-api] Replace metadata key with pluginId
emorikawa,2016-12-02 22:33:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/0312890b64d165705022aa52cde2d77b205ac77b,0312890b64d165705022aa52cde2d77b205ac77b,[local-sync] only enable logging in dev mode of N1
spang,2016-12-02 22:13:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/b78a73cf23a7204f7a7dbf881fc753b3c53dd97a,b78a73cf23a7204f7a7dbf881fc753b3c53dd97a,"feat(metadata): Look up local thread IDs via message table when setting metadata

Since message IDs are now static but there's no good way to generate
static thread IDs while syncing an account from newest message first,
we give threads the ID of any message on that thread and, when setting
metadata, look up the local thread ID by first going through the
message table."
spang,2016-12-02 22:10:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e806aa3a52aa3add6da0df8562df1626957100a,4e806aa3a52aa3add6da0df8562df1626957100a,"[local-sync] Set thread IDs to the ID of a message in the thread

Since message IDs are now static but there's no good way to generate
static thread IDs while syncing an account from newest message first,
we give threads the ID of any message on that thread and, when setting
metadata, look up the local thread ID by first going through the
message table."
emorikawa,2016-12-02 21:44:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f049de19a3a045d6eed9289614aca92fcd15ff2,0f049de19a3a045d6eed9289614aca92fcd15ff2,fix(account): Remove unsupported account types
emorikawa,2016-12-02 21:26:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac04ae5d68d2247a4984cc76b57ef44246c6748d,ac04ae5d68d2247a4984cc76b57ef44246c6748d,fix(folder): fix returning db transaction promise
emorikawa,2016-12-02 21:25:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/663400dc353ab3c18d8331e8a10d2d15f261b773,663400dc353ab3c18d8331e8a10d2d15f261b773,[isomorphic-core] ignore folder deltas due to just syncState version issues
emorikawa,2016-12-02 21:15:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/aab938110fccd53068d3074f1afcbe7dfd1fe2e2,aab938110fccd53068d3074f1afcbe7dfd1fe2e2,feat(sync): let N1 be aware of provider synback requests
emorikawa,2016-12-02 21:14:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f2c4b950dcf190fc30218340d2267d1b51123c6,4f2c4b950dcf190fc30218340d2267d1b51123c6,[local-sync] make syncbackRequest objects N1-ready
jstejada,2016-12-02 20:14:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/86a8c71cc404249c56b1d29b0143f2aafcb508f7,86a8c71cc404249c56b1d29b0143f2aafcb508f7,[local-sync]: Don't create or sync \NonExistent or \NoSelect folders
emorikawa,2016-12-02 20:12:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/4be1b87b798f0437516f2372c5636d4d6cb1a785,4be1b87b798f0437516f2372c5636d4d6cb1a785,bump(k2)
emorikawa,2016-12-02 20:11:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/8abf9a11fec19a4daaa20b984b9ad360ea75428a,8abf9a11fec19a4daaa20b984b9ad360ea75428a,debug(delta): add logs
jstejada,2016-12-02 20:09:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9bf6ea318a2c25f7904f63ce60752e0d8f965c6,b9bf6ea318a2c25f7904f63ce60752e0d8f965c6,fix observable disposable
jstejada,2016-12-02 19:27:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/10aaf293cf966a5108b1bd3cf571f5592d1f52f4,10aaf293cf966a5108b1bd3cf571f5592d1f52f4,[local-sync] Fix starred role on folders
emorikawa,2016-12-02 19:44:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/471f134b1100a4d275932d0d9d620ecf7bc3afdd,471f134b1100a4d275932d0d9d620ecf7bc3afdd,refactor(sync): sync workers only use delta syncs now
bengotow,2016-12-02 19:40:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/f90df6bb54dc761986e6123ab2937aff21bea6bc,f90df6bb54dc761986e6123ab2937aff21bea6bc,"fix(deltas): Process all deltas of each class in a single pass

Also changed the DeltaProcessor so it doesn’t query for models before sending out `Actions.didPassivelyReceiveCreateDeltas`, and renames it to be more clear it’s about deltas."
bengotow,2016-12-02 19:01:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fbea7d4f985ba1660b56ebacb4902846a3e52d7,6fbea7d4f985ba1660b56ebacb4902846a3e52d7,fix(auth): Add a tiny bit more logging
jackiehluo,2016-12-02 19:00:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/f068108456b467ae2536ea7887fbe7c48aba412e,f068108456b467ae2536ea7887fbe7c48aba412e,:coffee:(account-store): Convert to ES6
emorikawa,2016-12-02 18:28:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/90ed64a7704446b8cb1897b3ec0cd9b10e487e3f,90ed64a7704446b8cb1897b3ec0cd9b10e487e3f,bump(k2)
emorikawa,2016-12-01 23:28:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3742e6c72098dc9578c00c2fc8e4aee4a92a269,b3742e6c72098dc9578c00c2fc8e4aee4a92a269,"[cloud-api] Update cloud-api readme & remove unused files

[cloud-api] move Dockerfile and pm2 files into cloud-api

[*] additions to .gitignore

[cloud-workers]: move pm2 file into cloud-workers

updates to readme

Revert ""[cloud-workers]: move pm2 file into cloud-workers""

This reverts commit 952292124b6e8dfa304c5fbd945c0b00f427e154.

Revert ""[cloud-api] move Dockerfile and pm2 files into cloud-api""

This reverts commit aa92f691bf991848a51c00a2d01a5848f20a35a2.

Update deploy readme"
bengotow,2016-12-02 02:54:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8fe903f472455027729aae355964abdec72883a,c8fe903f472455027729aae355964abdec72883a,"[*] fix(deltas): 0 as first cursor, deltas from redis are already JSON"
bengotow,2016-12-02 02:42:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd55b9be44ada448d5a70cf6e57818ea948677b9,dd55b9be44ada448d5a70cf6e57818ea948677b9,fix(deltas): Remove extra params passed to streaming endpoint
bengotow,2016-12-02 02:41:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/21ed199247f71aa9a78faaca7beeceb8691cabd1,21ed199247f71aa9a78faaca7beeceb8691cabd1,"[*] fix(deltas): Cloud-API not filtering deltas at all, refactor a few things

- Don’t need functions in delta.js which must be called to return promsies. Fun of promsies is that you don’t need to care when they’re built to attach a .then.

- Make boundary between route handler and delta stream builder more explicit, don’t do query parsing in helpers, always reply from handler.

- Remove pushJSON extension to outputStream which never actually received JSON.

- Remove `takeUntil` - disposing of the downstream observable should dispose of all the merged/upstream observables

- Rename inflate => stringify since the returned value is a string not an object.

- Remove support for delta streams with no cursors. Don’t think this was supposed to be a feature.

- Add accountId to Transaction models

- Make database hooks shared in isomorphic core"
khamidou,2016-12-02 00:49:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/36eaccbb604be769512901983ed9dcc76a9d55b2,36eaccbb604be769512901983ed9dcc76a9d55b2,"Strip the '[Gmail]/' prefix from folder names.

Summary:
T7253 has two related parts:
1. Stripping the '[Gmail]/' prefix from any canonical Gmail folders
2. Handling nested IMAP folders.

This diff fixes 1. Changes for 2. are forthcoming.

Test Plan: Tested manually. Checked that the part was stripped from the N1 folder list.

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3475"
jstejada,2016-12-01 22:11:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/eff147ec90ddf717571331e87810e153cdb892a4,eff147ec90ddf717571331e87810e153cdb892a4,"fix(tasks): /Actually/ fix moving threads in Gmail

Moving to between gmail folders (all, spam, trash) or moving to inbox,
involves changing labels /and/ folders, simultaneously. For this I added
a task to perform both operations, and apply labels first before
attempting to move the folder

Revert ""fix(categories): Fix tasks for moving threads in Gmail""

This reverts commit c253503dc976f1ec048f7419e1878c1d855ce597."
jstejada,2016-12-02 00:06:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/371820ed2ed841dca11694c38c24dcbdaf1c5faa,371820ed2ed841dca11694c38c24dcbdaf1c5faa,"[local-sync] Refactor tasks and /actually/ fix moving between Gmail folders

Moving to between gmail folders (all, spam, trash) or moving to inbox,
involves changing labels /and/ folders, simultaneously. For this I added
a task to perform both operations, and apply labels first before
attempting to move the folder"
bengotow,2016-12-01 23:38:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/63778dcd72de83db54f0a3d95c9486521256c049,63778dcd72de83db54f0a3d95c9486521256c049,"lint(*): Fix linter errors within K2, update eslint grunt task"
bengotow,2016-12-01 23:37:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0838161c43f8bc4afe35f576f60fb2896c1151c,d0838161c43f8bc4afe35f576f60fb2896c1151c,[💄] fix eslint issues before they get overwhelming
khamidou,2016-12-01 23:29:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/e46c17344c73115cad79f69f05944f1c67eda5b1,e46c17344c73115cad79f69f05944f1c67eda5b1,Fix bug where we wouldn't create an id for file parts.
jstejada,2016-12-01 22:44:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6ae7d248741941c0af67f32acc7dac5c8f07a2a,e6ae7d248741941c0af67f32acc7dac5c8f07a2a,"[*] Generate persistent id for Accounts based on email+settings

This also ensures that we can use the accountId as part of the ids for
other models, like labels and folders

Before this commit, labels and folders with the same name for different
accounts would have the same id, screwing things up in n1"
bengotow,2016-12-01 22:23:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffa6d43bd61f60522e365b27d8698f0105e9d991,ffa6d43bd61f60522e365b27d8698f0105e9d991,[local-sync] Ship first sync metrics to honeycomb
jstejada,2016-12-01 18:51:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/6067af3b1bd8df044491b16220cfb5d91ab0aab9,6067af3b1bd8df044491b16220cfb5d91ab0aab9,:art:(task-factory)
jstejada,2016-12-01 21:39:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/c45f85deb34d106206c9edab48cb4b1f5e50b050,c45f85deb34d106206c9edab48cb4b1f5e50b050,"[local-sync] Fix setlabels task

Make sure we /remove/ the labels when we get an empty set of label ids"
emorikawa,2016-12-01 21:55:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/37f1f7ec80e28e386bb0118b0f0fecd5da25a659,37f1f7ec80e28e386bb0118b0f0fecd5da25a659,fix(auth): now authing IMAP through n1-cloud
emorikawa,2016-12-01 21:33:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/70581995f76297209dbeeb53f92530eaa6f6b5c2,70581995f76297209dbeeb53f92530eaa6f6b5c2,feat(auth): IMAP request to both n1-cloud and local sync
bengotow,2016-12-01 21:50:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/3efc53847224990af60b8039fe38cf9aa99faabb,3efc53847224990af60b8039fe38cf9aa99faabb,fix(specs): Fix AccountStore specs
emorikawa,2016-12-01 21:49:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/e994c766889a9a789760e981b66767b9c72f4934,e994c766889a9a789760e981b66767b9c72f4934,[cloud-api] remove validation from IMAP auth endpoint
bengotow,2016-12-01 21:34:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a0d8d996f071622b5fb1949f63ce1e5191055f0,0a0d8d996f071622b5fb1949f63ce1e5191055f0,fix(accounts): Save both local and cloud tokens per account
emorikawa,2016-12-01 21:32:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/0232b7bce5ff2f66f8246e682efa35779d66149c,0232b7bce5ff2f66f8246e682efa35779d66149c,[cloud-api] add npm start for pm2 launch
jstejada,2016-12-01 21:30:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/a86a0eeaf88a8f666a170ad0d3b5637335f6c7cb,a86a0eeaf88a8f666a170ad0d3b5637335f6c7cb,[local-sync] Give better name to thread folders task
emorikawa,2016-12-01 20:45:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e34f8f4be80d54724ec9b3d3527d8a405642d7c,1e34f8f4be80d54724ec9b3d3527d8a405642d7c,bump(k2)
jstejada,2016-12-01 19:57:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/d730bd0181fa89788da47335f250db3d8a2cb0b4,d730bd0181fa89788da47335f250db3d8a2cb0b4,[local-sync]: Add distinct ids to folders and labels
bengotow,2016-12-01 19:39:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a1b0904497ab61e444d223eeccc765d0be6b204,2a1b0904497ab61e444d223eeccc765d0be6b204,[cloud-api] Fix more broken package.jsons
bengotow,2016-12-01 19:21:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9cf3a004089ee53425a0f4ecb6e511400993881,a9cf3a004089ee53425a0f4ecb6e511400993881,[cloud-api] New honeycomb ingestion endpoint
khamidou,2016-12-01 19:15:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e37ece969d880cf4b8af27817216fd47bf5e043,1e37ece969d880cf4b8af27817216fd47bf5e043,"First step to getting persistent id in K2

Summary:
This diff adds persistent unique ids for messages and contacts. For messages, we just take a hash of the headers. For contacts, we hash the contact's email address.

This diff bundles a couple of tiny fixes too, like always trying to restart an account's sync, even after an exception.

Note that since there's no reliable way to have persistent ids for threads, we'll have to change our code to use message ids instead. Alas, that's a story for another (massive) diff.

Test Plan: Tested manually.

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3468"
emorikawa,2016-12-01 19:00:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/79e4ff2d186eb71f5f5b13db79875396e981dc10,79e4ff2d186eb71f5f5b13db79875396e981dc10,fix(spec): fixed specs for nylas-sync-worker
jstejada,2016-12-01 18:36:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/c253503dc976f1ec048f7419e1878c1d855ce597,c253503dc976f1ec048f7419e1878c1d855ce597,"fix(categories): Fix tasks for moving threads in Gmail

Since our backend now reflects the actual gmail model, a thread actually
has folder and labels. Updating our N1 data model to reflect that would
take too much time right now.

Instead, I updated the task factory to generate both ChangeLabel and
ChangeFolder tasks when moving threads for gmail, by detecting if its
moving to all, trash, or spam, or returning to inbox (if moving
something to inbox, just makes sure we move to all as well)

TODO: there are still inconsistencies because k2 doesn't generate unique
ids across the entire database, which causes 3 labels and 3 folders to
have the same ids. In our code, we expect all categories to have
distinct ids"
emorikawa,2016-12-01 18:17:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/0168a0795e2ad6c5dbee88040711609e110aaea6,0168a0795e2ad6c5dbee88040711609e110aaea6,fix(spec): progress on spec fixes for sync worker
jstejada,2016-12-01 17:13:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ec44beeab73ed4f3fee531954079fff41378950,7ec44beeab73ed4f3fee531954079fff41378950,fix(delats): Warn when receiving unkown obejct class
emorikawa,2016-12-01 17:04:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca010e983865525a7c594dc5393fdb66500700dc,ca010e983865525a7c594dc5393fdb66500700dc,fix(sync): Support N1Cloud auth errors. Fix LongConnection cleanup
emorikawa,2016-12-01 16:04:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad749b5875c6c11cd6b9d5d840c5d2688d535bd7,ad749b5875c6c11cd6b9d5d840c5d2688d535bd7,fix(delta): JSON blob persist failed to save properly
emorikawa,2016-12-01 15:31:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a203c7027c9e886c24f52cd06ceaef415855760,7a203c7027c9e886c24f52cd06ceaef415855760,bump(k2)
bengotow,2016-12-01 01:26:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/905f349f5779bea187fab62a77b018f37f7f9101,905f349f5779bea187fab62a77b018f37f7f9101,"[local-sync] Run message processor for one message at a time

This avoids issues that arise when we process two messages on the same thread concurrently!"
bengotow,2016-12-01 01:00:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/6802b67363a893407ed55ac6d1926d587db51c64,6802b67363a893407ed55ac6d1926d587db51c64,fix(deltas): Fix deltaProcessor handling deletes wrong
bengotow,2016-12-01 00:53:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a0c255683773878921f7be38770f8054ee65ca0,4a0c255683773878921f7be38770f8054ee65ca0,"fix(deltas): Delta.id is now a transaction id, need objectId"
bengotow,2016-12-01 00:51:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/f4a052783eae2b121455f0fd03242a0f7ab7df5b,f4a052783eae2b121455f0fd03242a0f7ab7df5b,fix(deltas): We’ve been flipping deltas by accident for a while!
jackiehluo,2016-12-01 00:27:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/f90551da719c3049e62118ca834abf38954fe623,f90551da719c3049e62118ca834abf38954fe623,:coffee:(nylas-api): Convert to ES6
bengotow,2016-12-01 00:25:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/66df8b85f830b51b01b6c817932c3d1273825f09,66df8b85f830b51b01b6c817932c3d1273825f09,[local-sync] Fix “Add INBOX label” issue
bengotow,2016-12-01 00:25:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/1259cb8ca2c4c5e63d4db360dd8680ad06a73678,1259cb8ca2c4c5e63d4db360dd8680ad06a73678,[local-sync] Fix deletion of labels
bengotow,2016-12-01 00:23:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa10589c1d40d86eaf6045be74f67f294de99aea,fa10589c1d40d86eaf6045be74f67f294de99aea,[local-sync] Fix ingestion of flags and labels
bengotow,2016-12-01 00:22:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/261c3ab849e0fc5f53b17dc892ec17c9cdbc0300,261c3ab849e0fc5f53b17dc892ec17c9cdbc0300,[local-sync] Fix transaction log to only ignore syncState
bengotow,2016-12-01 00:22:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/3cfc536600a69f42c30e15d3d43d5f1ae6257e32,3cfc536600a69f42c30e15d3d43d5f1ae6257e32,[local-sync] Sync a bit faster for testing
jstejada,2016-12-01 00:13:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/6cfb3c7dcd4c65d16c8270cb399c05d008c9fa5f,6cfb3c7dcd4c65d16c8270cb399c05d008c9fa5f,fix(k2) fix local sync deltas
jstejada,2016-12-01 00:12:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/807e25d4b68abb506279c5e349851a0a6e7c4fca,807e25d4b68abb506279c5e349851a0a6e7c4fca,"[local-sync] Fix observable for deltas

We were missing a return :'("
jstejada,2016-11-30 23:09:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/a089f59455681f0cdba4871d53275fb849242df0,a089f59455681f0cdba4871d53275fb849242df0,bump submoduels
emorikawa,2016-11-30 22:56:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c1cc7fe2abe00b34a81465d951629017d50e870,9c1cc7fe2abe00b34a81465d951629017d50e870,fix(delta): default cursor to 0 if no transactions exist yet
emorikawa,2016-11-30 22:55:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/fccc83a2f3fa867f28ccfcbae480f043431eec0d,fccc83a2f3fa867f28ccfcbae480f043431eec0d,fix(delta): fix issues with delta sync
jackiehluo,2016-11-30 22:13:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/581d03b9b88f12c80d49dc165088bb8d5b01dc7a,581d03b9b88f12c80d49dc165088bb8d5b01dc7a,fix(auth): Make N1 Cloud API request correctly
jackiehluo,2016-11-30 22:13:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/f51443b9b751396f7cfa8023d567ae4a8e7fa047,f51443b9b751396f7cfa8023d567ae4a8e7fa047,fix(identity): Require NylasAPIRequest correctly
bengotow,2016-11-30 21:55:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/18d0dcaeade3f73b5905820baf71a1553dc28343,18d0dcaeade3f73b5905820baf71a1553dc28343,fix(sync): Fix attribute updates applying to threads
emorikawa,2016-11-29 01:33:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/d596c81f578c16c6858feb19694b798ef5131be0,d596c81f578c16c6858feb19694b798ef5131be0,"refactor(delta): add a second delta stream, convert to es6, and cleanup

This reverts commit 0c6d82153ca4cb4a3b5fb2dfac78d39375122a23.

Updates to nylas sync worker to support multiple cursors

Convert NylasSyncWorker to es6

Convert NylasSyncWorkerPool to es6

Extract into deltaProcessor

Update names to NylasSyncWorker state

Working on spec fixes

More spec fixes

Delta stream refactor fixes"
emorikawa,2016-11-29 19:24:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/59be001118192ee991a6db97f2610a6a5eff25d6,59be001118192ee991a6db97f2610a6a5eff25d6,"[*] add delta endpoints and DRY deltaStreamBuilder

[cloud-core] add objectType to Metadata

[*] binding fixes to delta stream"
jstejada,2016-11-30 18:17:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ff60ae2bd88b103fa0bb19241d14d9fc31fb7b8,9ff60ae2bd88b103fa0bb19241d14d9fc31fb7b8,[local-sync] Remove unecessary db queries in detect-thread
bengotow,2016-11-30 02:02:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/25884d7ea44594ffea9f78b13914e663bd71e6f2,25884d7ea44594ffea9f78b13914e663bd71e6f2,fix(sync): Issue with CONDSTORE args not passed to fetch
bengotow,2016-11-30 01:04:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/827ddbd0160cad34edd4534d6dbd6f26575501e3,827ddbd0160cad34edd4534d6dbd6f26575501e3,refactor(sync-worker): Convert IMAP operations to async/await
jackiehluo,2016-11-30 00:40:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee550568daf206f87d55cef28b68a510a38be5ee,ee550568daf206f87d55cef28b68a510a38be5ee,spec(nylas-api): Update tests to use NylasAPIRequest
jackiehluo,2016-11-29 20:29:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/a414f60ef1727524e626b599a132d9ad9b016b36,a414f60ef1727524e626b599a132d9ad9b016b36,refactor(nylas-api): Create API requests from tasks
jackiehluo,2016-11-29 22:44:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd7da7cffb32c166bad0492b370ec10386610e86,bd7da7cffb32c166bad0492b370ec10386610e86,fix(nylas-api): Send API and options as object
jackiehluo,2016-11-29 22:51:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9b1f1b317ce7cecaf6cef0eab90cd057cc06a32,b9b1f1b317ce7cecaf6cef0eab90cd057cc06a32,bump(submodule): Update Salesforce API requests
jackiehluo,2016-11-30 00:32:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/245f6364f24de8529dd1874958ae0b2c3f96ef32,245f6364f24de8529dd1874958ae0b2c3f96ef32,spec(nylas-api): Update tests to use NylasAPIRequest
bengotow,2016-11-30 00:20:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c20c107e08089342c837ca03aa3f153cbe7640b,0c20c107e08089342c837ca03aa3f153cbe7640b,refactor(sync-worker) async/await for Karim
bengotow,2016-11-30 00:07:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6c613c28a501ff78f20a0353df0e8e84e2e147a,d6c613c28a501ff78f20a0353df0e8e84e2e147a,[local-sync] Synchronize K2 accounts with N1 accounts
bengotow,2016-11-30 00:07:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/86b0854860c54d0b68d99e9fcd27fe44bdea5a65,86b0854860c54d0b68d99e9fcd27fe44bdea5a65,[local-sync] Synchronize K2 accounts with N1 accounts
bengotow,2016-11-29 23:34:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae619357e4ed9703354478e959432049f3fa01cd,ae619357e4ed9703354478e959432049f3fa01cd,"fix(reload): When reload is interrupted by beforeunload, continue reload afterwards"
khamidou,2016-11-29 23:13:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/b96cd73236ca98b97e837aacc6a09582e5dc26d2,b96cd73236ca98b97e837aacc6a09582e5dc26d2,Make db reset synchronous.
bengotow,2016-11-29 23:12:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/c88d77f036986ae34b67b6827dc394a927bffe55,c88d77f036986ae34b67b6827dc394a927bffe55,rm(*): Internal packages don’t need engine version locking
jstejada,2016-11-29 23:10:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/388f17b1416360eb25883e94be5dfd697dd8a3b7,388f17b1416360eb25883e94be5dfd697dd8a3b7,bump submodule
jstejada,2016-11-29 23:04:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/28f4b809b2e579a89142eef81068a2245954c85e,28f4b809b2e579a89142eef81068a2245954c85e,[local-sync] properly save folders when detecting thread
khamidou,2016-11-29 22:59:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6d05b0103d8e33482f6770755695ab75a2455f7,a6d05b0103d8e33482f6770755695ab75a2455f7,Add a shortcut to restart the sync for an account from scratch.
bengotow,2016-11-29 22:58:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/390099d06f38f878d7d834e0e59e5630b8ab94c5,390099d06f38f878d7d834e0e59e5630b8ab94c5,fix(dashboard): Remove sync policy
jackiehluo,2016-11-29 20:29:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/2834d2083c60709a1d18fa267303054cf1004eb7,2834d2083c60709a1d18fa267303054cf1004eb7,refactor(nylas-api): Create API requests from tasks
jackiehluo,2016-11-29 22:44:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/6577e4af0d0e1abfc747bc04a0d5c09dd334a027,6577e4af0d0e1abfc747bc04a0d5c09dd334a027,fix(nylas-api): Send API and options as object
jackiehluo,2016-11-29 22:51:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/8bf45ccfc97391c7e240d4a78b6d6c2fff3cb335,8bf45ccfc97391c7e240d4a78b6d6c2fff3cb335,bump(submodule): Update Salesforce API requests
jstejada,2016-11-29 20:52:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/35358b173d1330fa996e4805c32e00a691c6124e,35358b173d1330fa996e4805c32e00a691c6124e,[local-sync] minor fix
bengotow,2016-11-29 20:44:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/896930ae82f722f62b90fe3bf5cb645720dfdd2f,896930ae82f722f62b90fe3bf5cb645720dfdd2f,fix(sync-worker): Missing binding arrow…
jstejada,2016-11-29 20:39:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/05ee25df34f0f44ec142b5aad0ff695632a57684,05ee25df34f0f44ec142b5aad0ff695632a57684,fix(deltas) Update syncworker signature
jstejada,2016-11-29 20:38:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/518aa9c05e0e2b1cdd13de045f30df9817319984,518aa9c05e0e2b1cdd13de045f30df9817319984,[local-sync]: Load all db models
bengotow,2016-11-29 20:14:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e07007bd998471092e225377f6bb2fb7f37ed36,0e07007bd998471092e225377f6bb2fb7f37ed36,fix(kill): Don’t attempt to re-open windows on killed
jstejada,2016-11-29 19:56:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c919ee4ad667670ed5d565d18090dd6cb56ee5b,6c919ee4ad667670ed5d565d18090dd6cb56ee5b,[iso-core] Fix dependencyin model
jstejada,2016-11-29 19:18:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8c48bc3243d7eb5ffe7289e89044239ce459c4c,f8c48bc3243d7eb5ffe7289e89044239ce459c4c,"[local-sync]: Refactor message ingestion to write new messages only once

This will only generate 1 delta per new message instead of 2
Adds a MessageFactory to create messages from imapmessage objects, and
unifies and cleans up that logic
Also modified the message-processor to be more suited for local sync,
made emphasis that it's only for processing new messages, and got rid of
the while ""pipeline"" concept

- TODO message-processor specs are broken"
emorikawa,2016-11-29 18:57:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/89794844a2025acb756e24b9091c7d1c25fa9d28,89794844a2025acb756e24b9091c7d1c25fa9d28,[isomorphic-core]: move Transaction model to isomorphic-core
bengotow,2016-11-29 02:03:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/db56c332ef43e6874dd0b8e21713a155f69e9107,db56c332ef43e6874dd0b8e21713a155f69e9107,fix(sync): Put K2 dashboard into work window
bengotow,2016-11-29 02:02:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/203f3a563693f2fcd1974875953b894db6dc0c96,203f3a563693f2fcd1974875953b894db6dc0c96,[dashboard] Put dashboard into work window
emorikawa,2016-11-29 01:13:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c6d82153ca4cb4a3b5fb2dfac78d39375122a23,0c6d82153ca4cb4a3b5fb2dfac78d39375122a23,Rename DeltaStreamingConnection -> LocalDeltaSyncConnection
emorikawa,2016-11-29 00:59:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/02f2d7b6a0d4aa9a7280a251b4e9d6dd0edc1b0d,02f2d7b6a0d4aa9a7280a251b4e9d6dd0edc1b0d,Update nylas-sync-worker to better fetch metadata
emorikawa,2016-11-29 00:55:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0246d6cc8e598acd5a5d2b907412759400f342a,a0246d6cc8e598acd5a5d2b907412759400f342a,[cloud-core] update Metadata model to better match N1
emorikawa,2016-11-29 00:11:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a7c07e2db1ca9749a43619ff6c5d2cce94c05af,1a7c07e2db1ca9749a43619ff6c5d2cce94c05af,Fetch folders and labels at the same time
emorikawa,2016-11-28 23:44:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d4beb37b514bde54f31b435a5fbda4340bcfd59,2d4beb37b514bde54f31b435a5fbda4340bcfd59,Deprecate LocalSyncRoot
emorikawa,2016-11-28 23:38:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc6e94aa232f1051cff2dce0f10f3b14c92028e7,cc6e94aa232f1051cff2dce0f10f3b14c92028e7,Introduce N1CloudAPI as endpoint
emorikawa,2016-11-28 23:38:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/8837a65ab8bbf7e5c2178f2433dad8eab6e59654,8837a65ab8bbf7e5c2178f2433dad8eab6e59654,[cloud-api] Readme fixes
hallamoore,2016-11-28 22:47:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c48b98adfc806ca53198e308905bee7d34c32fd,2c48b98adfc806ca53198e308905bee7d34c32fd,bump(k2)
hallamoore,2016-11-28 22:41:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/497ea7ad62a086882b87903a15d8593b967baece,497ea7ad62a086882b87903a15d8593b967baece,"[local-sync, iso-core] feat(send): Support basic sending for gmail accounts"
emorikawa,2016-11-28 22:13:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7e8f9ca97dc87d137e01a83a5ea7f87273467cf,e7e8f9ca97dc87d137e01a83a5ea7f87273467cf,[cloud-api] added Readme
emorikawa,2016-11-28 22:13:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c0cc488e4dc0d388213db625550dd52539c988b,9c0cc488e4dc0d388213db625550dd52539c988b,Readme updates
bengotow,2016-11-28 20:05:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/4dc0d34560b3b567ee50f8d9cf7725db090e3628,4dc0d34560b3b567ee50f8d9cf7725db090e3628,fix(sync): Sync again immediately if more emails remain
bengotow,2016-11-28 20:05:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf5b9f422142eafcea2b0c4727a5d9244a32c589,bf5b9f422142eafcea2b0c4727a5d9244a32c589,fix(sync): Throttle instead of debounce for better initial sync
bengotow,2016-11-28 19:56:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/80123ab4effbb4062ebc5f4c7fc290a21a0de1ed,80123ab4effbb4062ebc5f4c7fc290a21a0de1ed,[sync]: Sync again immediately if more emails remain
jstejada,2016-11-28 19:40:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/5833127bfba2a7ef6ec29d788dc7966cce37135d,5833127bfba2a7ef6ec29d788dc7966cce37135d,[local-sync] Support parsing 8bit encoded messages
bengotow,2016-11-28 19:25:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/e51065506b7da320640e917fd5c25f66e0a054dc,e51065506b7da320640e917fd5c25f66e0a054dc,fix(sync): Remove the “SYNC” window type
bengotow,2016-11-28 19:04:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/50715495e386fa281395fda7a059d14b8e0606b5,50715495e386fa281395fda7a059d14b8e0606b5,fix(auth): Stop sending other crap with key
bengotow,2016-11-28 18:50:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/d07adb46ef11a64d079484f4e7f8675d825b0d64,d07adb46ef11a64d079484f4e7f8675d825b0d64,fix(auth-response): Actually pass correct args to find
emorikawa,2016-11-28 18:39:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f9b39da7d7fbf630f06ca70535f05f24614c22c,1f9b39da7d7fbf630f06ca70535f05f24614c22c,[local-sync] retry sync after error
emorikawa,2016-11-28 18:37:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecf4e6a5adb7a170474e21079e35227fb6eb0fcf,ecf4e6a5adb7a170474e21079e35227fb6eb0fcf,[local-sync] print sync error when in error state
jstejada,2016-11-26 20:51:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/357b1d1a69051d2910854a2e3a0be36bf6f5f297,357b1d1a69051d2910854a2e3a0be36bf6f5f297,:art:(k2) Move non shared-models to local sync / remove duplicate DatabaseTypes
jstejada,2016-11-26 20:48:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/569024ae4a39056d27540ecea939f8aabb218f0c,569024ae4a39056d27540ecea939f8aabb218f0c,Move non shared-models to local sync / remove duplicate DatabaseTypes
bengotow,2016-11-24 01:08:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/f104c28275be885eafc847df8a1106f2f5114588,f104c28275be885eafc847df8a1106f2f5114588,fix(storage): Move to ~/.nylas-k2
bengotow,2016-11-24 01:08:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/8670f350627b6202a582bf1e0f808639d86cc727,8670f350627b6202a582bf1e0f808639d86cc727,fix(storage): Move to ~/.nylas-k2
emorikawa,2016-11-24 01:08:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/a531a8bcc93d9e3737688b087aba447fd4cb8745,a531a8bcc93d9e3737688b087aba447fd4cb8745,fix(thread): handles new API with both folders and labels
bengotow,2016-11-24 01:07:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/115b1a2495e25bcfcbf86e5f7d296a4366201514,115b1a2495e25bcfcbf86e5f7d296a4366201514,[n1] fix(sync): Add support for message encodings
bengotow,2016-11-24 00:25:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/81d8a457296bb1dd67543a8d84a2fd1a1ac58ace,81d8a457296bb1dd67543a8d84a2fd1a1ac58ace,fix(auth): Support gmail auth against K2
bengotow,2016-11-23 22:38:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a6f7020101bf8be3aaa769396ef4a5e3fcd4ee4,4a6f7020101bf8be3aaa769396ef4a5e3fcd4ee4,fix(auth): Use new endpoints for Gmail auth
bengotow,2016-11-24 00:25:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a8ec445f3c933db449d899401379896f660fd9f,6a8ec445f3c933db449d899401379896f660fd9f,[n1] fix(api): Add support for messages?thread_id=1
bengotow,2016-11-23 23:47:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/42a4b10fd1f970742957325cb7788a0ea571caea,42a4b10fd1f970742957325cb7788a0ea571caea,fix(account):
bengotow,2016-11-23 23:24:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/4729d55584de167acf78bf528f3556ddc67808f5,4729d55584de167acf78bf528f3556ddc67808f5,fix(account): Include name
bengotow,2016-11-23 23:23:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/23f6102cf5074aac2951a9f2ac3585081da68f21,23f6102cf5074aac2951a9f2ac3585081da68f21,Gmail auth: resolved settings tests
bengotow,2016-11-23 22:51:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a99d58c58c1c1c45916243b548e7faa719f8e9c,5a99d58c58c1c1c45916243b548e7faa719f8e9c,[cloud] Store resolved settings for returning to client
bengotow,2016-11-23 22:38:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/53fb617a211ad98548306502caa9c24e530b823f,53fb617a211ad98548306502caa9c24e530b823f,[cloud] Need more room for auth response
jstejada,2016-11-23 22:26:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8f475da6110eb824bc5795b07ce43f2b4f24677,e8f475da6110eb824bc5795b07ce43f2b4f24677,fix dangling paren
emorikawa,2016-11-23 22:25:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ebb201a914a9932212884995f6cf42422826c80,7ebb201a914a9932212884995f6cf42422826c80,bump(k2)
jstejada,2016-11-23 22:24:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/c49a6d2d20b79a18ee6c926c660d92948bbdbcf9,c49a6d2d20b79a18ee6c926c660d92948bbdbcf9,"[local-sync]: Restore message-processor

Don't use pubsub for scheduling a message for processing, just use
nextTick"
emorikawa,2016-11-23 22:22:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1162db7d4ae2ad0f222486107786cd4993ab4c4,e1162db7d4ae2ad0f222486107786cd4993ab4c4,[local-sync] fix promise instance of check
emorikawa,2016-11-23 21:46:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/c779c064ee21ae58c38ab7dd94c54226b593d64f,c779c064ee21ae58c38ab7dd94c54226b593d64f,bump(k2)
emorikawa,2016-11-23 21:42:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/a36284d40339ea490bc59b2ee3ad290a01173da6,a36284d40339ea490bc59b2ee3ad290a01173da6,[local-sync] fix unnecessary transaction JSON parse and binding issue
jstejada,2016-11-23 21:30:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c1f147fcb6ab02b8830d52be69a94d43b58c566,7c1f147fcb6ab02b8830d52be69a94d43b58c566,[local-sync] Remove unused message-types
khamidou,2016-11-23 21:08:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/da604488b759387b8efcb89e91551ffc2661535c,da604488b759387b8efcb89e91551ffc2661535c,"Make the delta stream work

Also replaces our LocalPubsubConnector by a TransactionConnector which
just uses EventEmitter."
emorikawa,2016-11-23 20:36:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1f5d175f550d02f3bc617cf8cc92df8b5a98c92,e1f5d175f550d02f3bc617cf8cc92df8b5a98c92,Remove EdgehillAPI from auth and fix NylasRequest and perspective
emorikawa,2016-11-23 20:35:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7ec67db1830185427c1175d941013be27cd9478,d7ec67db1830185427c1175d941013be27cd9478,[local-sync] return as auth_token instead of token for N1
jstejada,2016-11-23 20:20:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbd31e3407bd20f6d7cef540454944a8c348332c,dbd31e3407bd20f6d7cef540454944a8c348332c,bum submodule
jstejada,2016-11-23 20:16:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/05874d5d79a7ac24cdd1d5c7a607ff5e5e5d29fa,05874d5d79a7ac24cdd1d5c7a607ff5e5e5d29fa,[iso-core]: Make loadModels reusable by cloud-core
emorikawa,2016-11-23 20:01:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/87bb598e41bdb7a1da46c3e92cae5a056a8a5d00,87bb598e41bdb7a1da46c3e92cae5a056a8a5d00,rearrange logging so message comes first in console
emorikawa,2016-11-23 19:55:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/03e53d3a463c6f3a41c29865b180d2f6b6c28e30,03e53d3a463c6f3a41c29865b180d2f6b6c28e30,Make NylasRequest look at APIRoot too
emorikawa,2016-11-23 19:52:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e28ef40f80663e52497f25c37f071589ea8af55,6e28ef40f80663e52497f25c37f071589ea8af55,bump k2
khamidou,2016-11-23 19:46:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/27ea5386c8d030ca7e055881aeb3e8964e10d901,27ea5386c8d030ca7e055881aeb3e8964e10d901,"Remove redis dependency

Conflicts:
	packages/local-sync/src/local-sync-worker/sync-process-manager.js"
jstejada,2016-11-23 19:49:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e5a080b65915bac8d229920a9714cc52c62f6d2,3e5a080b65915bac8d229920a9714cc52c62f6d2,[iso-core]: Update api for loadModels
emorikawa,2016-11-23 19:48:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8f40fe98b0f9fe134c8ccc5685069bbbffef8e2,b8f40fe98b0f9fe134c8ccc5685069bbbffef8e2,fix(auth): don't send unncessary IMAP params to local-sync/auth
emorikawa,2016-11-23 19:48:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/97d8fc1edc3340d8c03221fae497c5479a9f2d14,97d8fc1edc3340d8c03221fae497c5479a9f2d14,Use 2578 as port on example
emorikawa,2016-11-23 19:17:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc6c9a9f705cb30385e1962eb5c16e473fd0cfe9,fc6c9a9f705cb30385e1962eb5c16e473fd0cfe9,Use ~/.nylas-k2 as default config dir path
emorikawa,2016-11-23 18:59:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3f4ae8be02c19c10e2af706cab3a64697af5f60,f3f4ae8be02c19c10e2af706cab3a64697af5f60,[local-sync] Remove Gmail auth from local-sync
jstejada,2016-11-23 19:01:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/d03b86efbb0659c61da582c5aa67b919b9d32eb6,d03b86efbb0659c61da582c5aa67b919b9d32eb6,[local-sync]: Properly remove all refs to global.Metrics
jstejada,2016-11-23 19:01:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/869ee926db87629b267e655ec06e64a2834ce587,869ee926db87629b267e655ec06e64a2834ce587,[iso-core] Use sequelize.import now that eval is enabled
jstejada,2016-11-23 18:54:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b730bd585ddac52f317871d4c30f3222b1c9cf2,2b730bd585ddac52f317871d4c30f3222b1c9cf2,bump submodule
emorikawa,2016-11-23 18:52:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/3191a609afbe97e5fa370eec48ba7d2aea005b7e,3191a609afbe97e5fa370eec48ba7d2aea005b7e,Add logger fallback
khamidou,2016-11-23 18:51:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a17afd28360c123a971b9682b3dc1c46f30306d,9a17afd28360c123a971b9682b3dc1c46f30306d,Turn on JS eval for lodash.
khamidou,2016-11-23 18:49:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/33fd3490549d452f4a0c1a1c5917fbae74d3d1a3,33fd3490549d452f4a0c1a1c5917fbae74d3d1a3,"Fix module loading bug

Conflicts:
	packages/isomorphic-core/src/models/index.js
	packages/local-sync/package.json"
jstejada,2016-11-23 18:32:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/543f5a4fb49d7738449ccd15c2f25784846bcf44,543f5a4fb49d7738449ccd15c2f25784846bcf44,fix loadModels
emorikawa,2016-11-23 18:32:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/937a91613fa76c73331bf279a52448aef2728225,937a91613fa76c73331bf279a52448aef2728225,Add sqlite3 since sequelize can't use better-sqlite3
bengotow,2016-11-23 18:19:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/37beaf3b488aaebc723a6878c900240df53e7572,37beaf3b488aaebc723a6878c900240df53e7572,bump submodule
emorikawa,2016-11-23 18:19:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff21ac46fa0f17e729428208210c44937b3ca370,ff21ac46fa0f17e729428208210c44937b3ca370,Fix JSON parsing error
emorikawa,2016-11-23 18:18:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/509cde0f6c7f168dc101bda4242cec0d90f33084,509cde0f6c7f168dc101bda4242cec0d90f33084,Add better-sqlite3
jstejada,2016-11-23 18:17:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/d90536acc7a75dd047f1cecb743339603d88579a,d90536acc7a75dd047f1cecb743339603d88579a,"[local-sync]: Let local-sync start, add loadModels to iso-core"
emorikawa,2016-11-23 18:13:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/297f03a8b846616e596b8a5ac708762f89fa666a,297f03a8b846616e596b8a5ac708762f89fa666a,bump(k2): bump k2 to latest
emorikawa,2016-11-23 18:12:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/c033dd92ba735b54f88866dc3c43d61b005a493b,c033dd92ba735b54f88866dc3c43d61b005a493b,Update local port to 2578
emorikawa,2016-11-23 18:08:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/6009967d727f3f4c49bfa0a723f57f6933826777,6009967d727f3f4c49bfa0a723f57f6933826777,Local port is now 2578
emorikawa,2016-11-23 17:58:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/43222a27572d553ba118766a76850ec5e55a166b,43222a27572d553ba118766a76850ec5e55a166b,rename APIRoot to LocalSyncRoot
bengotow,2016-11-23 17:41:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/a626a50a7b6a28a52d66140f9831cfeecd0566f9,a626a50a7b6a28a52d66140f9831cfeecd0566f9,fix(onboarding): Remove support for local sync engine
bengotow,2016-11-23 17:36:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/57bef82944b6262ab049ee335c9c387580de9618,57bef82944b6262ab049ee335c9c387580de9618,[cloud] Fix paths
emorikawa,2016-11-23 17:34:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7ed48b7abed6916e45019c6e50806fb7e1b22dc,a7ed48b7abed6916e45019c6e50806fb7e1b22dc,[isomorphic-core] add trailing ./
emorikawa,2016-11-23 17:33:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/79d0512189dae49bb493290fef4f7b24dfd1fbbf,79d0512189dae49bb493290fef4f7b24dfd1fbbf,[*] package.json updates post lerna bootstrap
emorikawa,2016-11-23 17:31:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/daf0903c5e8563f6dc33fc7dc980632052751431,daf0903c5e8563f6dc33fc7dc980632052751431,bump(k2): update k2 pointer
emorikawa,2016-11-23 17:27:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb1285b9926ed41308360dea65e7a9bafd111659,cb1285b9926ed41308360dea65e7a9bafd111659,[local-sync] update package.json to include missing deps
emorikawa,2016-11-23 17:22:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b2f96759998de98848df6bd4b93c13c878552f7,5b2f96759998de98848df6bd4b93c13c878552f7,[cloud-workers] remove unused newrelic and add src/ dir
emorikawa,2016-11-23 17:18:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/95b0df9cefc4022854ab73b4da067a155a7a0ead,95b0df9cefc4022854ab73b4da067a155a7a0ead,[cloud-api]: move src into /src folder
emorikawa,2016-11-23 17:09:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/27df142f127b4a9b4cc6a2638d1baa57afee77a9,27df142f127b4a9b4cc6a2638d1baa57afee77a9,[isomorphic-core] Remove packages no longer used in isomorphic-core
emorikawa,2016-11-23 17:06:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1e86bc4429fffac5b79410b69ac9b4db881f25b,d1e86bc4429fffac5b79410b69ac9b4db881f25b,[isomorphic-core] Move files into src folder for isomorphic-core
emorikawa,2016-11-23 17:01:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/30f7d87f571aa0407e7cf09b664ef25aba7824b8,30f7d87f571aa0407e7cf09b664ef25aba7824b8,[isomorphic-core] Rename nylas-core -> isomorphic-core
emorikawa,2016-11-23 17:00:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5545af01e78bb7f284f9e287e75cfcc7a2ba298,c5545af01e78bb7f284f9e287e75cfcc7a2ba298,[isomorphic-core] Uppdate refs nylas-core => isomorphic-core
jstejada,2016-11-23 06:33:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee5693fb04bc7e980980c514df1cb0fae34a0acc,ee5693fb04bc7e980980c514df1cb0fae34a0acc,Remove unused PromiseUtils in cloud-core
jstejada,2016-11-23 04:36:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/98895342be9e2d53acdc3544694d1035d9c129cf,98895342be9e2d53acdc3544694d1035d9c129cf,"Final nylas-core and cloud-core cleanup

- Remove unused exported PromiseUtils from cloud-core, import instead
from nylas-core where needed
- Remove unused MessageTypes from cloud-core
- Move MessageTypes from nylas-core to local-sync. It's completely
isolated to local-sync"
jstejada,2016-11-23 04:25:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/39ca2164e6a9041d4043810b0201624e3208db07,39ca2164e6a9041d4043810b0201624e3208db07,[local-sync] Misc fixes from database-connector move
jstejada,2016-11-23 04:18:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/aed9cf2a397f74daf8ddc5eb2b6226a0a1568b44,aed9cf2a397f74daf8ddc5eb2b6226a0a1568b44,local[sync] Move missing file for local-syncs database-connector
jstejada,2016-11-23 04:13:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2dd0b1c6a5a76129a7a477ca7f2ca486540b5fb,a2dd0b1c6a5a76129a7a477ca7f2ca486540b5fb,[local-sync] fix path for local pubsub-connector
jstejada,2016-11-23 04:10:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/598cb89744cefb186972625ca2352e9645b2fe34,598cb89744cefb186972625ca2352e9645b2fe34,[local-sync] Make local logger es6 for compilation
jstejada,2016-11-23 03:58:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f7432a4ecb3aaac92fbdb8a23b1fd04dc27eb53,4f7432a4ecb3aaac92fbdb8a23b1fd04dc27eb53,[local-sync] Remove logger and metrics from local-sync and nylas-core
emorikawa,2016-11-23 02:24:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fd78f7924fc9aa1b9130b41459332b0aba24000,6fd78f7924fc9aa1b9130b41459332b0aba24000,Rename generic Errors to IMAPErrors
emorikawa,2016-11-23 02:20:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a1b8c8daf55e71e632bf1c32595926ec82ebfe5,8a1b8c8daf55e71e632bf1c32595926ec82ebfe5,Move SyncPolicy out of nylas-core to DefaultSyncPolicy
bengotow,2016-11-23 02:04:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/18d49fe37b26281ed6d7fc437dbc6f1c0dd2dbed,18d49fe37b26281ed6d7fc437dbc6f1c0dd2dbed,Update auth to hit new hosted N1-cloud
emorikawa,2016-11-23 01:51:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/f18909df3145b1014d69a1e7c90231e56ae7e3e7,f18909df3145b1014d69a1e7c90231e56ae7e3e7,Rename DatabaseConnector to LocalDatabaseConnector and move
emorikawa,2016-11-23 01:33:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/cd866ed5a2dc812ccebb8191a03ab2776c389e13,cd866ed5a2dc812ccebb8191a03ab2776c389e13,Move PubSubConnector to LocalPubSubConnector out of nylas-core
bengotow,2016-11-23 01:40:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/18f3cf7e5dfce4e489c600f21a2f1060399d2b54,18f3cf7e5dfce4e489c600f21a2f1060399d2b54,[cloud] Add missing rx dep
bengotow,2016-11-23 01:28:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/a07fb9b248c49b7fb4048c751a8f149bda07c7ae,a07fb9b248c49b7fb4048c751a8f149bda07c7ae,[cloud] feat(metadata): Delta stream for metadata working
emorikawa,2016-11-23 01:07:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/16d3165d073be059fc8cac3e338086c329bbc375,16d3165d073be059fc8cac3e338086c329bbc375,Move SchedulerUtils out of nylas-core to local-sync/src/shared
jstejada,2016-11-23 00:54:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5562347c091a73dab64a19c31dd2c1814391c21,b5562347c091a73dab64a19c31dd2c1814391c21,fix(deps) Fix deps for local-sync and nylas-core
bengotow,2016-11-23 00:14:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/960a04387108ea4419f5214c0adf4f94f5d8b71e,960a04387108ea4419f5214c0adf4f94f5d8b71e,[cloud] Put bunyan back again
emorikawa,2016-11-23 00:08:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/89307f49420330e3210b1ecb8f2c6de51481ac89,89307f49420330e3210b1ecb8f2c6de51481ac89,[local-sync]: moved spec into similarly named folder and updated refs
emorikawa,2016-11-23 00:03:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/24827587d81973f1bd80d8472bab6fc6704bcc04,24827587d81973f1bd80d8472bab6fc6704bcc04,[local-sync]: move folders into `src` folder
jstejada,2016-11-23 00:01:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ced1c5b8b5aa6daab7eb31fa22f2bb8d3a2feb5,9ced1c5b8b5aa6daab7eb31fa22f2bb8d3a2feb5,fix(local-sync): Fix bootstrap for local-sync package
jstejada,2016-11-22 23:58:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/f556501e2f5f677b5ad1318cfa784532ba1d0f9a,f556501e2f5f677b5ad1318cfa784532ba1d0f9a,bump(k2)
emorikawa,2016-11-22 23:58:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/29c460f98ee636643212f7fb9957d4ffb43e5d0e,29c460f98ee636643212f7fb9957d4ffb43e5d0e,bump(k2)
agsdot,2016-11-22 23:47:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/f35008d119c6a3b587700b2314b9034aad5d2a0c,f35008d119c6a3b587700b2314b9034aad5d2a0c,Typo: mispelled > misspelled (#3085)
bengotow,2016-11-22 23:43:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/6492eda572783041211f49878de7f1a64700194e,6492eda572783041211f49878de7f1a64700194e,[cloud] Put signalfx back
bengotow,2016-11-22 23:43:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/916e853e5e1868f51d4e693ad11a5199ee538ec4,916e853e5e1868f51d4e693ad11a5199ee538ec4,Actually update things to work without cloud-metrics…
bengotow,2016-11-22 23:39:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a1b7673d4f1243cf78fd40ae476234f7e817a9e,9a1b7673d4f1243cf78fd40ae476234f7e817a9e,[cloud] fix(*): More misplaced packages
emorikawa,2016-11-22 23:33:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/704f3013391cdef3f4e79f0a6d6a9760406fadb6,704f3013391cdef3f4e79f0a6d6a9760406fadb6,Moved cloud-metrics into cloud-core
emorikawa,2016-11-22 23:13:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/38eb129f477f74368eaa2b5738974ae853994527,38eb129f477f74368eaa2b5738974ae853994527,[local]: rename folder nylas-api to local-api
hallamoore,2016-11-22 23:03:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/7618cc543a2b73a0f83897873e66cade219a4390,7618cc543a2b73a0f83897873e66cade219a4390,"[local-sync] Check for missing Category roles by localized display names

Sometimes imap mailboxes aren't properly flagged with their roles, so we
check the display names against known variations to see if we can find any
missing roles."
khamidou,2016-11-22 22:28:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/437615a9c9029926e8763cb200065a3a76b37f78,437615a9c9029926e8763cb200065a3a76b37f78,Create a new sync window.
jstejada,2016-11-22 23:16:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/0eaebe19b608d9f0ec068f761b665e3da6c677e8,0eaebe19b608d9f0ec068f761b665e3da6c677e8,Merge branch 'master' of github.com:nylas/K2
bengotow,2016-11-22 23:13:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/00fe4e3b7f01134c425d2050c39e721c4b848615,00fe4e3b7f01134c425d2050c39e721c4b848615,[cloud] fix(*): remove all traces of loggly
jstejada,2016-11-22 23:13:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/18ad660bd13f043c709e026ab75f200e65896645,18ad660bd13f043c709e026ab75f200e65896645,fix local-sync package
bengotow,2016-11-22 22:54:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ffa8be06cab9aa96805b8de7638f9228b14787c,1ffa8be06cab9aa96805b8de7638f9228b14787c,[cloud] fix(*): add things back to package.json
emorikawa,2016-11-22 22:52:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/a86bf826311d070aeb5957470de944b3c31922f8,a86bf826311d070aeb5957470de944b3c31922f8,Update package.json post lerna install
emorikawa,2016-11-22 22:47:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee5a51bad92fc2c23f172660581986a03e283b33,ee5a51bad92fc2c23f172660581986a03e283b33,Fix package.json
emorikawa,2016-11-22 22:39:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/d741cb995f927ff13881b47d012d70b705be7903,d741cb995f927ff13881b47d012d70b705be7903,bump(k2): bump k2
emorikawa,2016-11-22 22:38:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/0cfd8e85e30ee87d72c67c4a03610f02bc47e7ff,0cfd8e85e30ee87d72c67c4a03610f02bc47e7ff,bump(pro): update pro submodule pointer
khamidou,2016-11-22 22:26:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/0336c8edb3d53d280022861de683f9cc7e60a9c4,0336c8edb3d53d280022861de683f9cc7e60a9c4,"More structure adapts.

Conflicts:
	packages/local-sync/package.json"
khamidou,2016-11-22 22:10:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/e284c40788e954b3c8d4ccd65971fc21a491f9ee,e284c40788e954b3c8d4ccd65971fc21a491f9ee,Basic structure changes to run K2 in N1
bengotow,2016-11-22 21:55:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/b221f75602ed120b90a90644ad89ef586c7cc65c,b221f75602ed120b90a90644ad89ef586c7cc65c,[local] Fix package json
bengotow,2016-11-22 21:25:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaae61f7fc266e5b9d009d764571310dbe7be642,aaae61f7fc266e5b9d009d764571310dbe7be642,[cloud] fix(eb): Oops
bengotow,2016-11-22 21:24:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/c618033d882bcfaceac8980773143b1503d09984,c618033d882bcfaceac8980773143b1503d09984,[cloud] fix(eb): Switch port to 80 to see if it fixes it
bengotow,2016-11-22 21:17:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbf988881d16e0c181823844cdd8a39c1852d8ff,dbf988881d16e0c181823844cdd8a39c1852d8ff,[cloud] fix(docker): Define port used by docker
emorikawa,2016-11-22 21:01:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/13d7feb953d1aa9f89206b91dea960b475b7428b,13d7feb953d1aa9f89206b91dea960b475b7428b,fix(spellcheck): fix right click menu on spellcheck
bengotow,2016-11-22 20:34:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d42cb0443608ea4b13dc514afec5cdc10c1878f,1d42cb0443608ea4b13dc514afec5cdc10c1878f,[cloud] fix(db): Rename to ebdb for consistency with elastic beanstalk
khamidou,2016-11-22 20:25:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/6211c7cb2dbf8b3924ea855c1ffb75c930f3301a,6211c7cb2dbf8b3924ea855c1ffb75c930f3301a,Flesh out skeleton.
jstejada,2016-11-22 20:24:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/42d4c5763a749cc3d290fce8dc73cba4a2ca5841,42d4c5763a749cc3d290fce8dc73cba4a2ca5841,fix(folders): Properly update thread folders on sync
bengotow,2016-11-22 20:23:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/657e03bb7e6e1aa1cd1f19de18d7906ec0e712cf,657e03bb7e6e1aa1cd1f19de18d7906ec0e712cf,Remove bunyan-loggly
khamidou,2016-11-22 20:01:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ebf69f1ffeeb06f82772e8b97a6ec4831c22681,3ebf69f1ffeeb06f82772e8b97a6ec4831c22681,(fix) Set up base structure for local sync.
bengotow,2016-11-22 19:58:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1e7e7c320e455a9191dbb17e807d90c635cf9a9,c1e7e7c320e455a9191dbb17e807d90c635cf9a9,Bump eslint
emorikawa,2016-11-22 19:36:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6fd60e3b8aa909f614c2d31e51a22a2ee42a4bb,d6fd60e3b8aa909f614c2d31e51a22a2ee42a4bb,bump(changelog): 0.4.400
hallamoore,2016-11-17 23:33:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/90f74bca8800fa9697218c8b237f0ba4b2c91049,90f74bca8800fa9697218c8b237f0ba4b2c91049,"feat(calendar): Allow calendar events to be dragged and resized

Summary:
In order to allow events to be dragged across multiple days, this involved
implementing a new data source for the WeekView that modifies the event feed
based on mouse event data.

Depends on D3451

Test Plan: manual

Reviewers: evan, bengotow

Differential Revision: https://phab.nylas.com/D3452"
bengotow,2016-11-22 18:57:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d18176aabaf0e3d3511a80903b7d23e0319dd9a,7d18176aabaf0e3d3511a80903b7d23e0319dd9a,Pull in cloud packages
bengotow,2016-11-22 00:38:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d6485e0dc2914a5aa265fac38f75bc91c81c103,5d6485e0dc2914a5aa265fac38f75bc91c81c103,bump(version): 0.4.400
bengotow,2016-11-22 00:36:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/53ed9511de4f865c91788c5cda5e032e150d0af7,53ed9511de4f865c91788c5cda5e032e150d0af7,fix(mailto): Restore AtomApplication breaking Mailto
emorikawa,2016-11-22 18:13:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/35919d6b511e62de0bde0ae60a6cd92d0ce8c56d,35919d6b511e62de0bde0ae60a6cd92d0ce8c56d,feat(k2): nylas api only uses localhost
jstejada,2016-11-22 17:57:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbd415cb154903015ca541978a17c62e7e39fb2f,fbd415cb154903015ca541978a17c62e7e39fb2f,"feat(labels): Add functioning endpoint for updating labels for messages & threads

- This commit also correctly sets the labels on the corresponding thread
whenever a message has its labels updated
- Fix removing labels from messages"
emorikawa,2016-11-22 02:18:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbb6ea6aa48c1c4101e8ab2e03b73b263d4f8a20,fbb6ea6aa48c1c4101e8ab2e03b73b263d4f8a20,feat(k2): add k2 as valid env
emorikawa,2016-11-22 02:18:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/5906815ff6a3e6d797182547a8f7b2b848ac9857,5906815ff6a3e6d797182547a8f7b2b848ac9857,fix(readme): minor readme changes
jstejada,2016-11-22 01:41:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/7df033f82fc60782e826a33947f5c6a834162923,7df033f82fc60782e826a33947f5c6a834162923,feat(api): Can now set labels for messages
emorikawa,2016-11-22 01:08:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/3577c34ada064b0809f355d550f9b42f6fef4a4a,3577c34ada064b0809f355d550f9b42f6fef4a4a,feat(:cloud:): copied via remote push to n1-cloud at this point
emorikawa,2016-11-22 01:07:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b1d356753b230dd67f399493c76976395e250da,1b1d356753b230dd67f399493c76976395e250da,fix(package): re-order package.json files
bengotow,2016-11-22 00:38:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/96e879607326f8189a601a75caf086b3f7e73c1d,96e879607326f8189a601a75caf086b3f7e73c1d,bump(version): 0.4.400
bengotow,2016-11-22 00:36:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/022b5aa3de75cc52a18023d8d022207646236005,022b5aa3de75cc52a18023d8d022207646236005,fix(mailto): Restore AtomApplication breaking Mailto
bengotow,2016-11-21 22:28:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/8afa3d4eaea0f481cefc20fffa53e1e393d5f4ea,8afa3d4eaea0f481cefc20fffa53e1e393d5f4ea,"fix(*): K2 inside N1, build and ship in src/K2"
hallamoore,2016-11-21 21:38:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/6418a9616c4ca03315fa3582ee3b25df95b6812d,6418a9616c4ca03315fa3582ee3b25df95b6812d,"change(API) Prevent N1 from sending ""view"" parameters in some API requests

- Threads: N1 always asks for the 'expanded' view, so K2 just always returns
the expanded view. N1 no longer needs to specify this.
- Messages: N1 only needed a 'count' view to display the initial sync progress
We've removed this progress bar and the corresponding request."
jstejada,2016-11-21 22:36:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/eba33080aceccd86678e605788b46c4833697457,eba33080aceccd86678e605788b46c4833697457,fix(messages): Fix raw message api endpoint
emorikawa,2016-11-21 22:28:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/11fe681af23c9deb2f4fc6837410f35e6934599a,11fe681af23c9deb2f4fc6837410f35e6934599a,fix(travis): update travis task for spawn signature
bengotow,2016-11-21 22:05:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/8efd4f79356885c446f1f59f79344241f32af212,8efd4f79356885c446f1f59f79344241f32af212,Fix another linter issue
bengotow,2016-11-21 22:00:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/e87e67cea35cdc8aa2d654bf850003c4fd0b2ff5,e87e67cea35cdc8aa2d654bf850003c4fd0b2ff5,Fix linter issues
bengotow,2016-11-21 21:57:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/c55b698132c4f4150c19cd3b7b2d68e97254e404,c55b698132c4f4150c19cd3b7b2d68e97254e404,fix(build): reset appveyor cache on package change
hallamoore,2016-11-21 21:29:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/7906e3303dbb8b8ff81c54e9643d4928d1d51f8a,7906e3303dbb8b8ff81c54e9643d4928d1d51f8a,Add placeholders for various routes that N1 uses.
hallamoore,2016-11-21 19:07:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fe6343137dfccdf4be88ea0ccea92e60b6e6e20,0fe6343137dfccdf4be88ea0ccea92e60b6e6e20,"Remove filtering from the collection APIs.

Affected collections were categories, contacts, files, messages, and threads."
jstejada,2016-11-21 21:49:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/a49214112099dea06c2b7b7d53e1444645451b70,a49214112099dea06c2b7b7d53e1444645451b70,fix(cal): Disable event search for now
jstejada,2016-11-21 21:14:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/68120155971fc2c02f0cb4825e250c437b4e33e3,68120155971fc2c02f0cb4825e250c437b4e33e3,fix(lint) Fix lint error on publish task
bengotow,2016-11-21 21:49:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/15880366555f39f676051bc0ba14b2335361cc43,15880366555f39f676051bc0ba14b2335361cc43,fix(bootstrap): Build deps for current arch
bengotow,2016-11-21 21:25:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9ff8df54bac86722b20e1a26ad2e717d9d4b55c,c9ff8df54bac86722b20e1a26ad2e717d9d4b55c,fix(db): Use SIGTERM instead of signal 1
bengotow,2016-11-21 20:34:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffa8a6201aefcaf5df82e0e30f3f9a67be96a7b8,ffa8a6201aefcaf5df82e0e30f3f9a67be96a7b8,fix(cache): Support non-inline source maps
jstejada,2016-11-21 20:07:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/3eeb9d517f6a2b11bbe50ab67593a7d85fe526b7,3eeb9d517f6a2b11bbe50ab67593a7d85fe526b7,"Revert ""Link K2 into N1 as a private submodule""

This reverts commit 88d874133deda02c3c81a5ad144480b6a39f7762."
bengotow,2016-11-21 20:04:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/b95f2748c780870386da21239934823f85ef279f,b95f2748c780870386da21239934823f85ef279f,Bump src/pro pointer
jstejada,2016-11-21 20:03:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/939ef1bc363360c55062995c9427d681ae1dbcd6,939ef1bc363360c55062995c9427d681ae1dbcd6,fix(build) Fix publish task for linux
emorikawa,2016-11-21 19:53:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/86eb3047d02f17ec5ee6a8c359c3da37606788aa,86eb3047d02f17ec5ee6a8c359c3da37606788aa,fix(build): add setup travis keychain task
bengotow,2016-11-21 19:54:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/88d874133deda02c3c81a5ad144480b6a39f7762,88d874133deda02c3c81a5ad144480b6a39f7762,Link K2 into N1 as a private submodule
jstejada,2016-11-19 22:22:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/a867029bfa38bd3029c0025f9c6b24eb25522758,a867029bfa38bd3029c0025f9c6b24eb25522758,fix(cal) Make sure we center the current time on screen when opening cal
jstejada,2016-11-19 22:21:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/bed1a5c62f08e728c3243d850110e37351d6efd7,bed1a5c62f08e728c3243d850110e37351d6efd7,fix(scheduler): Make sure composer is focused to insert event card
jstejada,2016-11-19 22:06:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/89df816f0bd6461299673c3852b1774ef9283e77,89df816f0bd6461299673c3852b1774ef9283e77,"fix(cal): Correctly capture times when selecting proposed times for meeting

Adding a scroll region messed up selecting times for meetings. Make sure
that we select the correct container off which to base the time
calculation"
emorikawa,2016-11-19 00:22:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/f51e44cc3c0fe16a0be9d63d489e5a720207e1e3,f51e44cc3c0fe16a0be9d63d489e5a720207e1e3,fix(build): update the nylsa-Info.plist to use electron-builder
jstejada,2016-11-19 00:26:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae7a355878e61f8adf4d2c04d948e595c1039c84,ae7a355878e61f8adf4d2c04d948e595c1039c84,fix(lint)
jackiehluo,2016-11-18 23:59:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/41dc94ecc4295c5a2de1ca3efad52daabe22dad0,41dc94ecc4295c5a2de1ca3efad52daabe22dad0,fix(theme-picker): Add z-index to close button
jstejada,2016-11-18 23:27:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/39c63d988ec7fc0fdd7a7023223001f3013813da,39c63d988ec7fc0fdd7a7023223001f3013813da,:lipstick:(md) Fix markdown styles
jstejada,2016-11-18 20:24:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a08ef3d956ac44e4dc63339f66f3714f1eed355,7a08ef3d956ac44e4dc63339f66f3714f1eed355,fix(win-build) Run deploy_script as cmd
emorikawa,2016-11-18 20:13:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3297d1540c76f5b2684e8e77219b952aad6b086,e3297d1540c76f5b2684e8e77219b952aad6b086,fix(SFDC): fix deactivate
emorikawa,2016-11-18 20:09:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/18f574281a2f21bc65d0d780fe778484f94a0c87,18f574281a2f21bc65d0d780fe778484f94a0c87,fix(SFDC): refactor lib main
jstejada,2016-11-18 20:03:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5d97e9039504cfd0e6a29f922e22fdf843562fb,f5d97e9039504cfd0e6a29f922e22fdf843562fb,fix(build): Add proper error handling to publish task
jstejada,2016-11-18 19:58:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/18a2e1f5c394f9ea77a1dd140c5b332ce2aca6e8,18a2e1f5c394f9ea77a1dd140c5b332ce2aca6e8,fix(build) Actually fix build
jstejada,2016-11-18 19:42:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/59dde10372c60f40701e22af822b033ef071f17b,59dde10372c60f40701e22af822b033ef071f17b,"fix(build) Fix output directory for builds

- We were including the root output dir twice in the file path"
emorikawa,2016-11-18 19:13:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/27246017d17e08b791d7a11994d7576b4890e869,27246017d17e08b791d7a11994d7576b4890e869,fix(lint): fix linter import error
jstejada,2016-11-18 19:02:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/105be10e573133a3dc407579747df113f36be95d,105be10e573133a3dc407579747df113f36be95d,bump(version): 0.4.205
jstejada,2016-11-18 19:00:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/8dc4d40453f924316e929d5f29aa71aa2e19891a,8dc4d40453f924316e929d5f29aa71aa2e19891a,"fix(win-build): Change to 'cmd' for build script

This should prevent it from failing on npm install warnings"
emorikawa,2016-11-18 00:00:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b95e4d0545847354899c4ea042f571434a05807,6b95e4d0545847354899c4ea042f571434a05807,fix(db): fix error with modelify not finding markNotBackgroundable
emorikawa,2016-11-17 22:57:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/77050a8df7f4c69dac6d7e20083e5d186884ca88,77050a8df7f4c69dac6d7e20083e5d186884ca88,fix(search): allow custom search result elements
jstejada,2016-11-17 23:37:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9cadef9d251166f40adb30fbf4eee5407c8933d,a9cadef9d251166f40adb30fbf4eee5407c8933d,fix(specs) Fix remaining tests
jstejada,2016-11-17 22:51:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/626ba3c2df10b495a3a4ddbf274a1190773d883f,626ba3c2df10b495a3a4ddbf274a1190773d883f,"fix(cal): Fix changing weeks on weekview

- Fix specs too"
jstejada,2016-11-17 22:51:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/c67fe4ac8fa499e03b494681e03ef7298351b29c,c67fe4ac8fa499e03b494681e03ef7298351b29c,fix(spellchecker) Fix spellchecker specs
jstejada,2016-11-17 19:30:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/a29abcbbd8b3935e3653b0f0e0b8f9a701e38d96,a29abcbbd8b3935e3653b0f0e0b8f9a701e38d96,"fix(db-transaction): Make sure we mark as not bg-able query objects

When forwarding query operations to the database (e.g. find, findAll)
from the transaction,
we didn't check if those methods actually returned a ModelQuery object
(e.g. modelify returns a regular Promise), so this would break in cases
where it wasn't defined (`markNotBackgroundable` would be undefined)

This commit fixes that and fixes related specs"
emorikawa,2016-11-17 19:00:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d7c1513c501c6919c094272d6e4c4abc26a5ba5,4d7c1513c501c6919c094272d6e4c4abc26a5ba5,fix(analytics): update analytics in SFDC
jstejada,2016-11-17 06:46:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/d237d7c4f89745b7227707bdd2b4799aff331717,d237d7c4f89745b7227707bdd2b4799aff331717,"fix(sidebar): Correctly show all accounts in sidebar during initial sync

Ref #1587"
emorikawa,2016-11-17 02:45:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/be6685ddaca1f082743a9c04815df679696dce77,be6685ddaca1f082743a9c04815df679696dce77,fix(input): error in tokenizing text field and queue debug info
bengotow,2016-11-17 01:46:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/25bfe96e3ef3afc300d78e62ded962ec1eccf06c,25bfe96e3ef3afc300d78e62ded962ec1eccf06c,"feat(db): background flag to exec queries in a single forked node process

Summary:
This is an initial attempt to fix an issue we’ve had with long-running queries interrupting the N1 user experience. Node-sqlite3 used an async approach that ran sqlite’s synchronous query methods on a worker thread, but doing that involves copying memory more and node-sqlite3 was just generally slow.

However, moving to better-sqlite3 made /everything/ synchronous. Even with the right indexes some of our queries just suck.

This diff adds `DatabaseStore.findAll(…).background().then()` which allows you to mark a query as “unimportant”. These queries are run in a separate process which is forked from the window and can take an extra 10-50ms to complete. That said, they’re totally async and don’t jam up the app.

I’m personally a fan of the flag and less a fan of the implementation. The “agent” process can handle many queries in it’s lifetime if they keep coming and quits after 10 seconds of inactivity. (Both to save memory and to avoid scenarios where it might end up oprhaned and running forever). While running it uses about 40MB of RAM, which is a bit on the crazy side.

Test Plan: No new tests yet

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3420"
bengotow,2016-11-17 01:06:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/53a981039541b1de12ebb5b4f29fd60a1bf4f0d0,53a981039541b1de12ebb5b4f29fd60a1bf4f0d0,"feat(calendar): Add line showing ‘now’

Summary: Just a small line that shows during the current week to highlight the current day and time.

Test Plan: No tests atm

Reviewers: evan, juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3435"
emorikawa,2016-11-17 00:05:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8c16594dbfad4e22ed2d87b379d342de074cb13,b8c16594dbfad4e22ed2d87b379d342de074cb13,feat(menu): new `hideWhenDisabled` flag for custom submenu items
emorikawa,2016-11-17 00:00:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8c0e568c958ce6162aa3feda0baed859825fcf3,c8c0e568c958ce6162aa3feda0baed859825fcf3,feat(plugin): don't show `isHiddenOnPluginsPage`
emorikawa,2016-11-16 23:52:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f1c12466a68ca28815ba3c4fc7e3adb0457bfc3,8f1c12466a68ca28815ba3c4fc7e3adb0457bfc3,feat(menu): completely remove top-level menus from optional plugins
jstejada,2016-11-16 23:14:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/220acc4a5834f6d445433a4b6bf5d2025afb5759,220acc4a5834f6d445433a4b6bf5d2025afb5759,"fix(spellcheck): Minor perf improvements

- When applyign spellcheck mutations to the dom, toggle display property
on the contenteditable to reduce reflows/repaints while mutating
- Debounce provideTextHint to reduce work on each keystroke
- Minor speedup checking existence of keys in spellchecker internal maps"
emorikawa,2016-11-16 22:40:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff79d81bfa8c18ad3f99d8f59cb6c52454c1ae04,ff79d81bfa8c18ad3f99d8f59cb6c52454c1ae04,feat(link): enable the clicking of nylas: and calendar: links in N1
emorikawa,2016-11-16 21:35:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2216d5230960f6da49d95154c2aaa96d00a4a04,f2216d5230960f6da49d95154c2aaa96d00a4a04,feat(autolinker): linkify nylas: commands
emorikawa,2016-11-16 20:00:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/29f658afb94f932d6dafe746e48553f0fbc19ac9,29f658afb94f932d6dafe746e48553f0fbc19ac9,feat(link): nylas:// plugin links notify when turned on or off
jstejada,2016-11-16 01:50:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8027380997e733aafd208520bc7ed537db2221c,b8027380997e733aafd208520bc7ed537db2221c,fix(cal) Fix backspace in event-search
jstejada,2016-11-12 18:32:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/06db5a95ac38414789b2631cf6bbd2e865888fa4,06db5a95ac38414789b2631cf6bbd2e865888fa4,"feat(event-search): Add event search to calendar

Summary:
This commit adds the ability to perform event search in the calendar window.
To achieve this, SearchBar has been moved from the thread-search package to be a part
of the nylas-component-kit, and reused by both thread-search and nylas-calendar

When an event is selected from search results, the calendar view is moved to the selected
event. Depends on D3396 to open the event popover.

Test Plan: Manual

Reviewers: halla, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3424"
bengotow,2016-11-16 01:04:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/d95756ba98e899e417abf8a9c3d88cbf62a06bff,d95756ba98e899e417abf8a9c3d88cbf62a06bff,fix(inline-attachments): Handle images with UTF16 names
bengotow,2016-11-16 00:56:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd7f24d343247ab006d6a917d468c586dc9e5517,dd7f24d343247ab006d6a917d468c586dc9e5517,fix(tokenizing-text): inputValue === undef error
jackiehluo,2016-11-16 00:48:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/30a8ab613b7f086afe7369fd2819d27600e9d16e,30a8ab613b7f086afe7369fd2819d27600e9d16e,lint(eslint): Update to new rule names
bengotow,2016-11-16 00:16:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/97c0e7f9f8e521ef78d28131265a272bf61d505b,97c0e7f9f8e521ef78d28131265a272bf61d505b,fix(calendar): Move quick-add button into toolbar
bengotow,2016-11-16 00:02:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e1b360036e2827492aeac29a85d46328b15cc09,8e1b360036e2827492aeac29a85d46328b15cc09,fix(calendar): Use ScrollRegions so win users know you can scroll
jackiehluo,2016-11-15 22:04:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd512adb7f5976d3cd46a7846fb846f9a9da1b46,fd512adb7f5976d3cd46a7846fb846f9a9da1b46,:art:(calendar): Clean Exchange event titles
jackiehluo,2016-11-15 20:11:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/9fd8b38a4bc6dcbfd6da512290e4093946b9cbce,9fd8b38a4bc6dcbfd6da512290e4093946b9cbce,Merge branch 'master' of github.com:nylas/N1
jackiehluo,2016-11-15 20:10:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/151348124515fb8e877d679b5b8d7cbe32a67019,151348124515fb8e877d679b5b8d7cbe32a67019,:art:(calendar): Fix overflow for event names
emorikawa,2016-11-15 20:08:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/858e3a99c2ba216a40593f1bd01c315c9d029e75,858e3a99c2ba216a40593f1bd01c315c9d029e75,feat(tokenizing): allow tokenizing text fields to accept a defaultValue
emorikawa,2016-11-15 18:20:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/9656025532d1c83c92daccef82d9f3fee512c476,9656025532d1c83c92daccef82d9f3fee512c476,fix(lint): update files to for new linter version
emorikawa,2016-11-15 17:56:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/808b6b0e5b36a1ae7b27600c1873d3f9d921c86e,808b6b0e5b36a1ae7b27600c1873d3f9d921c86e,feat(lint): upgrade linter and add exceptions for dumb new rules
emorikawa,2016-11-15 17:22:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/04435287f014e603cb799711cc397f4ea981db10,04435287f014e603cb799711cc397f4ea981db10,feat(lint): add eslint_d to package.json
hallamoore,2016-11-14 23:24:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/073427f3b2ed0fba3dc58bdb9c5aba32e26a546a,073427f3b2ed0fba3dc58bdb9c5aba32e26a546a,fix(tests): Make selectedEvents default to []
emorikawa,2016-11-11 14:12:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/714506635498f510a522f0c7e333998253b15dbc,714506635498f510a522f0c7e333998253b15dbc,fix(contact): only limit length if too long
emorikawa,2016-11-11 14:06:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/387c157a55a237563c999e10f9072cfe4ef5a48c,387c157a55a237563c999e10f9072cfe4ef5a48c,feat(composer): render suggestion via custom component
emorikawa,2016-11-10 22:44:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/211f0a65c6ad2f580058984e09f736a74819e32c,211f0a65c6ad2f580058984e09f736a74819e32c,feat(composer): allow extensions to composer participant searching
emorikawa,2016-11-10 19:36:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/177edc7f47ad53ddec816ad976a89b37648e8d09,177edc7f47ad53ddec816ad976a89b37648e8d09,"fix(search): Don't re-query search results on status change

If that method is fired immediately twice in a row, it's possible for
this._set to not re-instantiate causing the results to be blow away"
emorikawa,2016-11-10 17:08:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/8eb63040b33264542c11e2d6573acee028be9554,8eb63040b33264542c11e2d6573acee028be9554,feat(search): support search extensions
emorikawa,2016-11-10 15:35:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/e942b914e6b9947ad0ffc04bdd384b233d40f275,e942b914e6b9947ad0ffc04bdd384b233d40f275,refactor(search): extract generic ModelSearchIndexer
emorikawa,2016-11-09 22:28:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9756c2f1d0e2d792fc7d972896cadb05949c2e9,f9756c2f1d0e2d792fc7d972896cadb05949c2e9,refactor(registry): move all registries into src/registries
hallamoore,2016-11-14 21:09:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/8918778a7563297f2aa3abd5bf21a1cb319e10ec,8918778a7563297f2aa3abd5bf21a1cb319e10ec,Bump submodule
bengotow,2016-11-14 20:33:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0a5f6efce0602a3fa0e2da016647f198a7ceef5,a0a5f6efce0602a3fa0e2da016647f198a7ceef5,fix(build): Run the linter before build on CI machines
hallamoore,2016-11-14 20:08:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0586181a3d2778dd4d74c7ee788a946545529ca,f0586181a3d2778dd4d74c7ee788a946545529ca,"feat(calendar): Add functionality to create/edit events

Summary:
Add some basic functionality for creating and editing calendar events

This is a weird work-around diff. Original review is at
https://phab.nylas.com/D3396

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3426"
emorikawa,2016-11-11 18:26:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f51d09af11e2a65d4e21bc0d305ec4545c0b2ed,3f51d09af11e2a65d4e21bc0d305ec4545c0b2ed,fix(composer): don't create bullets after text insert
emorikawa,2016-11-11 18:07:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/be795e4b59ac7e7b8f8f37a171b92c8fa2c99ea4,be795e4b59ac7e7b8f8f37a171b92c8fa2c99ea4,fix(quote): fix more cases of unwrapped signature detection
emorikawa,2016-11-11 16:41:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/7227af23fb19385942a94be8d81c3fd6f963ad0e,7227af23fb19385942a94be8d81c3fd6f963ad0e,fix(quote): catch Office 365 quoted text case
jpelgrom,2016-11-14 18:53:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/77523d4cdb2144e61f82f87a460fcbe035bf2e10,77523d4cdb2144e61f82f87a460fcbe035bf2e10,"Rename Google Apps to G Suite in onboarding (#3047)

Google renamed Google Apps (both 'normal' and education editions) to G
Suite on 2016-09-29. See
https://blog.google/products/g-suite/all-together-now-introducing-g-suite/
for the announcement. Updated text for account selection to match Google's
branding."
bengotow,2016-11-09 23:58:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/5769898abc9afbcef17d1772b6abb453f5ffebeb,5769898abc9afbcef17d1772b6abb453f5ffebeb,specs(spellcheck): Ignore on linux due to dict downloads
bengotow,2016-11-09 23:51:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac70c95eb0aef540670b922d51349b7d6b32a84a,ac70c95eb0aef540670b922d51349b7d6b32a84a,fix(docs): We no longer support Node 4 for building
bengotow,2016-11-09 23:16:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb5777ce97265cb9d8d1c8edfb8961b5d6840f16,eb5777ce97265cb9d8d1c8edfb8961b5d6840f16,fix(readme): Remove readme to prevent overwriting on script/bootstrap
bengotow,2016-11-09 23:07:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/06663299cc6dcdba84c3fa2071fd18f1e90e2568,06663299cc6dcdba84c3fa2071fd18f1e90e2568,fix(main): Print notice if exiting due to makeSingleInstance
bengotow,2016-11-09 23:07:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/4345d9810918ea491cfcb6c8f1648e81a49f3267,4345d9810918ea491cfcb6c8f1648e81a49f3267,"fix(spellcheck): Wait longer, electron-spellchecker actually downloads dicts"
bengotow,2016-11-09 22:40:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3fa1d390125d58cf2b03bbcb6ab07a6522bc79e,e3fa1d390125d58cf2b03bbcb6ab07a6522bc79e,fix(builds): AppVeyor can cache node_modules too
bengotow,2016-11-09 22:40:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dc4e8f3a28687973be4bffec6a7b4abf46762b0,9dc4e8f3a28687973be4bffec6a7b4abf46762b0,"fix(builds): Stop when tests fail, use Appveyor build phases"
bengotow,2016-11-09 22:28:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b84217c87ff3dd65fd177ae1b924ffc0395dfed,7b84217c87ff3dd65fd177ae1b924ffc0395dfed,deps(pro): Lift deps out of packages for simpler install / better deduping
bengotow,2016-11-09 22:24:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5d5b4e3c6a8e01506618a9ef00464340af5feb6,c5d5b4e3c6a8e01506618a9ef00464340af5feb6,deps(*): Lift deps out of packages for simpler install / better deduping
bengotow,2016-11-09 22:12:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/85d9c454fe7df0e173b7b5e31f077d7c2d54f2e1,85d9c454fe7df0e173b7b5e31f077d7c2d54f2e1,"ci(*): Travis and AppVeyor changes, script cleanup

Also removed 32-bit build files which have been made obsolete. You can build 32-bit builds by altering script/bootstrap to specify a different arch"
emorikawa,2016-11-09 21:52:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/64450fb51b91990a410e3486e87d5430eb5786e3,64450fb51b91990a410e3486e87d5430eb5786e3,fix(contact): Have Focused contacts immediately available
bengotow,2016-11-09 21:50:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/e89fd364b4706b4a0d9972a1c4ce2fa131eaa4c6,e89fd364b4706b4a0d9972a1c4ce2fa131eaa4c6,"build(*): electron-compile, electron-packager instead of custom tooling

Summary:
This diff removes significant cruft from N1's compilation and build tooling:

- Electron-Packager replaces most of the code in build/tasks/* used to copy things,
  bundle things, download electron, etc.

- script/bootstrap has been replaced with a much simpler script that does not use
  APM, does not download Electron (we just use electron as an NPM dep) and does
  not manully compile sqlite. It requires NPMv3, but I think that's safe.

- babel and eslint are now devDependencies of the main project. The main project
  also supports optionalDependencies now.

- npm test and npm start replace ./N1.sh

- APM is still around, and is only put into N1 so it can install plugins at runtime.
  It should be removed as soon as we notify package maintainers and have them provide zips.

- N1 no longer has it's own compile-cache or babel/typescript/coffeescript compilers.
  It delegates to electron-compile and electron-compilers. Both of these packages had
  to be forked and modified slightly, but I'm hopeful the modifications will make it back
  in to the projects and you can still consult their documentation for more info.

  + In the near future, I think we should stop shipping electron-compilers with N1. This
    would mean that all plugins would need to be compiled on pre-publish, just like NPM
    packages, and would complicate the local development story a bit, but would make the
    app smaller. electron-compile is not supposed to compile at runtime in the prod app,
    just pull from the compile cache.

- I've re-organized Grunt according to Grunt best practices, where each tasks/* file
  specifies it's own config and imports grunt tasks.

- Unfortunately, I was not able to use any open source projects for the deb and rpm builds,
  because we have things like postinst hooks and start menu items which are not supported
  by the electron installer-generators.

WIP

Turn off all LESS compilation, because themes. Doh.

Use Grunt for new build process too, just remove tasks

More changes

Add babel-eslint

Remove unused react-devtools

WIP

Add name

Ignore nonexistent

Switch to more modern approach to config for grunt

Move zipping to mac installer task

Restructure publish task so it aggregates first, can log useful info if publishing is disabled

Fix build dirs

Fix win installer

Fix linux installer

Fix linux installer

Try making linux

A few more

Updates

Upadtes

fixes

fixes

Get rid of non-meaningful variables

Resolve assets path

Insert nylas.sh

Clean up args more

Actually use description

Fix display name ugh

More tweaks

Expliclty write /usr/bin/nylas

Improve vars

Use old nylas.sh

Reinstate APM to better scope this diff

Test Plan: Test on Mac, Windows, Linux

Reviewers: evan, jackie, juan

Reviewed By: jackie, juan

Differential Revision: https://phab.nylas.com/D3411"
khamidou,2016-11-09 21:47:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/79d77ab14d86e5962801ae7e3178fd58f3ba5047,79d77ab14d86e5962801ae7e3178fd58f3ba5047,"[fix] Don't make undo-send so ridiculously fast

Summary: I almost need at least 30s to proof-read an email.

Test Plan: Looked at the code.

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3412"
jstejada,2016-11-09 19:28:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/26c9fffdca89491db3a382d66d3e56baf6960d04,26c9fffdca89491db3a382d66d3e56baf6960d04,"fix(send-and-archive): Don't validate defaultSendAction key in config (#3031)

Before this commit, opening a new composer window would reset the
default send action to just `send`, even if you had selected it to be
`send-and-archive` via preferences.

This happened because on window initialization we run a config schema
validation, and coerce any values that are not valid under the schema
(e.g. make sure that the value for a setting is one of possible values specified
in the enum). Given that the schema is static, but the values for the enum for
this particular setting are dynamically calculated when we render the selector,
it doesn't make sense to validate the values for this setting.

To prevent validation, we just need to remove the `enum`, and `enumLabels`
from the static config-schema."
emorikawa,2016-11-09 17:22:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/83e927209179a6105bac5fbfe4d4fa099f49a1ea,83e927209179a6105bac5fbfe4d4fa099f49a1ea,"fix(form): say ""Create"" instead of ""Submit"""
emorikawa,2016-11-09 17:12:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/297072dd6e4fd6905ebfe9304a96846799827fec,297072dd6e4fd6905ebfe9304a96846799827fec,feat(thread): add method to return unique participants by email
jstejada,2016-11-08 22:05:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2289fba18f765b510177ae8390d1b15944ec978,e2289fba18f765b510177ae8390d1b15944ec978,fix(menu-icon): Make sure to only show unread state when unread counts have actually changed
bengotow,2016-11-08 19:54:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6ed956907eddb45db17d1e23427de3193da2975,d6ed956907eddb45db17d1e23427de3193da2975,fix(image-editing): Fix selector for finding <img>
bengotow,2016-11-08 19:06:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c378f83feed7da55df775d08491039dee9163fa,0c378f83feed7da55df775d08491039dee9163fa,fix(notifs): Re-display notifs with the same tag on macOS
emorikawa,2016-11-08 17:39:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/03cccbeab4156f2335f7081e103f351828aaff02,03cccbeab4156f2335f7081e103f351828aaff02,bump(SFDC): show related sub objects above thread
jstejada,2016-11-07 22:35:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/2950695ccde51dcdbbbfe2a6d9e15a78d08c88de,2950695ccde51dcdbbbfe2a6d9e15a78d08c88de,fix(send-and-archive) Make sure package is registered in work window so PerformSendActionTask can find it (#3023)
jstejada,2016-11-07 22:16:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/7187072b9cf66e2a6095120fb61cdffde01509e2,7187072b9cf66e2a6095120fb61cdffde01509e2,bump(version): 0.4.204
jstejada,2016-11-07 22:14:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/8da1407dd0648553314bed1357f3bfa9fdb69235,8da1407dd0648553314bed1357f3bfa9fdb69235,fix(attch-preview) Properly escape paths for qlmanage
bengotow,2016-11-07 22:12:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/51654eca1f499d5ab230df529bdcd2666c0a7fd6,51654eca1f499d5ab230df529bdcd2666c0a7fd6,fix(local-sync): Display relevant error so users can debug
bengotow,2016-11-07 22:07:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/5459b283d7703e6a9f5e73139c76ce1ac583f2bc,5459b283d7703e6a9f5e73139c76ce1ac583f2bc,"fix(newsletter): Use bound functions for callbacks, always."
bengotow,2016-11-07 22:02:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/18ec8c38e8f7fd08f37c603f686dc6b978e8802b,18ec8c38e8f7fd08f37c603f686dc6b978e8802b,fix(*): Resolve Sentry #42679 with nylas-observables
bengotow,2016-11-07 21:58:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/abb9dd7c209dcdb35ea244a12e0a0267488eee58,abb9dd7c209dcdb35ea244a12e0a0267488eee58,fix(mailto): Improve handling of invalid urls
jstejada,2016-11-07 22:07:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae4d766b8c85e2935a32cf25f5e7047e3eef82cd,ae4d766b8c85e2935a32cf25f5e7047e3eef82cd,fix(attachments-preview): Account for pound sign
emorikawa,2016-11-07 21:44:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a6bd847867719fdc3f9cb1263cc2ac7921866e2,1a6bd847867719fdc3f9cb1263cc2ac7921866e2,fix(package): bump package migration version to match release version
jstejada,2016-11-07 20:15:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c1a072de4287ce9e95acada30f5b3d6640927a1,3c1a072de4287ce9e95acada30f5b3d6640927a1,fix(specs) Fix date-utils specs
jstejada,2016-11-07 18:42:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/7cd1088baa1f36a2eb9e7f104d68ff1aa0b772a0,7cd1088baa1f36a2eb9e7f104d68ff1aa0b772a0,update(changelog)
jstejada,2016-11-07 18:40:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e0167a5e0f944bb81bba628286ff188ddbac7b9,0e0167a5e0f944bb81bba628286ff188ddbac7b9,"fix(build): Remove node-mac-notifier temporarily

node-mac-notifier build process is currently breaking. This will be
fixed when we revamp the build process, so for now we are punting the
node-mac-notifier feature"
jamiewilson,2016-11-07 17:49:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/3105df07d75c7e4813139e39b96a38122361ef4e,3105df07d75c7e4813139e39b96a38122361ef4e,"(darkside) fixing composer fields spacing (#3020)

* fixing composer fields spacing

* updating attachement selector names"
bengotow,2016-11-07 17:40:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/a21e333a46ab4860257981dcbc291342fd70da53,a21e333a46ab4860257981dcbc291342fd70da53,fix(build): Don’t dedupe when installing mac-notififer
emorikawa,2016-11-05 18:56:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a6a62b7b7251f659927671b6e656805534bb93f,1a6a62b7b7251f659927671b6e656805534bb93f,fix(spec): fix DST related spec failure & linter error
emorikawa,2016-11-05 18:44:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/88ba82d7ff105ffdc482d1e6e18d41f0d8982759,88ba82d7ff105ffdc482d1e6e18d41f0d8982759,fix(plugin): use config since `activatePackage` doesn't persist
emorikawa,2016-11-05 18:37:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/f97905567bd5c9a559002b9c596811b99333d89e,f97905567bd5c9a559002b9c596811b99333d89e,fix(unload): safely unload the task queue on quit
emorikawa,2016-11-05 18:23:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/c792b363583996211e928111fcea2ab90f03be1b,c792b363583996211e928111fcea2ab90f03be1b,feat(plugin): activate & deactivate plugins via a nylas: url
emorikawa,2016-11-05 03:45:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/274091eb36dcd85f232a74181f23d334cc56acbd,274091eb36dcd85f232a74181f23d334cc56acbd,feat(quote): improved quoted text detection for trailing signatures
emorikawa,2016-11-05 01:37:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/e00c4c802259e5f6b32018e16d12963913c6b693,e00c4c802259e5f6b32018e16d12963913c6b693,"fix(quote): properly detect ""wrote: "" strings with trailing space"
emorikawa,2016-11-05 01:25:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/8836e9a1ab0e4396858eaf3780d73010f05f1e46,8836e9a1ab0e4396858eaf3780d73010f05f1e46,convert(es6): quoted-html-transformer to es6
jstejada,2016-11-04 23:49:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/8464cd58e743addd224c127e3adce365608d4d11,8464cd58e743addd224c127e3adce365608d4d11,bump(version): 0.4.203
jackiehluo,2016-11-04 23:30:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a8ca13d10df30cdc096ecfe71838a964c7df3e2,3a8ca13d10df30cdc096ecfe71838a964c7df3e2,feat(notifications): Allow notifications to be dismissable
jstejada,2016-11-04 22:44:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/90d923913bdc2e81ec368193d7d95707afd39899,90d923913bdc2e81ec368193d7d95707afd39899,"feat(requests/send): Add mechanism to ensure that a req be sent and succeeds only once

Summary:
This commit adds a new option to NylasAPIRequest api to allow users to
specify requests that should only ever be executed once, once they
succeed. This is done via saving a hash of some of the requests
properties to the filesystem.

Specifically regarding send, this ensures that a draft never be sent
twice from N1. We ran into this case once when the final state of the TaskQueue
wasn't saved to the database before the N1 app closed. In this case, a
PerformSendActionTask that was supposed to be dequeued, was restored to
the task queue again when N1 restarted, causing the draft to be sent
twice.

Test Plan: Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3407"
jstejada,2016-11-04 22:30:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9939d54ebc0ed646929abe2d31dc1530885a379,b9939d54ebc0ed646929abe2d31dc1530885a379,"fix(task-queue): Save the task queue before closing the window

Summary:
Save the final state of the TaskQueue to the database before window
gets unloaded

Test Plan: Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3408"
emorikawa,2016-11-04 22:07:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/061d49d537d79f392a94ca49ec8b2001017f40bd,061d49d537d79f392a94ca49ec8b2001017f40bd,fix(lint): fix linter errors
emorikawa,2016-11-04 22:00:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f4d046b412aa74beebf5d9af6626ec6bec4d6d5,8f4d046b412aa74beebf5d9af6626ec6bec4d6d5,bump(submodule): update UI & SFDC
jstejada,2016-11-04 21:45:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/10f05246af44a237453122342ae4f97a89e1cb1c,10f05246af44a237453122342ae4f97a89e1cb1c,:lipstick:(reminders) Add title to reminders header
bengotow,2016-11-04 18:32:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/35e98919115304f8e38d850adcc43de57e2ed464,35e98919115304f8e38d850adcc43de57e2ed464,fix(darkside): remove notifications shadow
bengotow,2016-11-04 18:26:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ff556f4efb46517db9d4b4d6e20373baacaf3cf,3ff556f4efb46517db9d4b4d6e20373baacaf3cf,fix(prefs): Only scroll to top when switching tabs
emorikawa,2016-11-04 18:22:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/82c267307ac1e0fd7bfd27086c5e7cc5cd029bf2,82c267307ac1e0fd7bfd27086c5e7cc5cd029bf2,bump(submodule): update SFDC
emorikawa,2016-11-04 18:12:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/125be77968da49e7b2a4125fd837cef50b27f2f5,125be77968da49e7b2a4125fd837cef50b27f2f5,fix(form): support cmd+enter and not optimistic submission on all enter
bengotow,2016-11-04 18:05:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c6e7d3f5361eac67fa896e6001c940c368d2430,6c6e7d3f5361eac67fa896e6001c940c368d2430,"Revert "":lipstick:(messages): Remove email-frame max-width styles""

This reverts commit c926f6144b540f4027929a3ce274da0daa594c2e."
hallamoore,2016-11-04 18:03:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/daffee5bb6c4340024d48450489cd0369bb5c116,daffee5bb6c4340024d48450489cd0369bb5c116,"Revert "":lipstick:(messages): Remove max-width styles""

This reverts commit d7c79f5d5c6f3a91c1392a63ac599816bc3b43e5."
bengotow,2016-11-04 18:01:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/c926f6144b540f4027929a3ce274da0daa594c2e,c926f6144b540f4027929a3ce274da0daa594c2e,:lipstick:(messages): Remove email-frame max-width styles
bengotow,2016-11-04 17:58:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc9c0bb08be848ee3f889990c160e1aed657262a,fc9c0bb08be848ee3f889990c160e1aed657262a,fix(composer): Check for empty as well as original body
bengotow,2016-11-04 17:52:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa661b4f469933ab457b11e1392177921164ee65,fa661b4f469933ab457b11e1392177921164ee65,fix(gh-sidebar): Don’t customize <h2> styling
hallamoore,2016-11-04 17:45:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7c79f5d5c6f3a91c1392a63ac599816bc3b43e5,d7c79f5d5c6f3a91c1392a63ac599816bc3b43e5,":lipstick:(messages): Remove max-width styles

Although some word-wrapping may look better at 800px, it looks much worse
when we can't properly display html emails that are meant for a wider area.
It also just seems a little weird to limit our users in this way."
jstejada,2016-11-04 17:47:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/aae737e3cdedf70514fa11942a7d02a7938ffe8e,aae737e3cdedf70514fa11942a7d02a7938ffe8e,"fix(search): Prevent duplicate results from search query

This is a temporary fix which adds defensive code to prevent duplicate results
from being returned from the thread search query which causes N1 to enter a loop
and freeze (#3001).

Duplicate results from the search query likely indicate that a thread
was indexed twice, which was not the case before. The cause for this is
still at large."
bengotow,2016-11-04 17:29:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/b612c9356427bbaf417719491207fa7f773e023f,b612c9356427bbaf417719491207fa7f773e023f,fix(theme-picker): Regression in design of theme picker
bengotow,2016-11-04 01:19:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd135377587fe9d6c6477a6f36236df4b5ff76e4,fd135377587fe9d6c6477a6f36236df4b5ff76e4,fix(mac-notifier): Manually install on darwin (for now)
emorikawa,2016-11-04 16:28:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/018ee4e98de33f60f2d51cfde4b82d53be9aa64f,018ee4e98de33f60f2d51cfde4b82d53be9aa64f,"fix(form): Have submit button say ""update"" when necessary"
jstejada,2016-11-04 06:07:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ef08a1f316e6b267d26da32f43ef6d40955b9ac,6ef08a1f316e6b267d26da32f43ef6d40955b9ac,:lipstick(sidebar): Update reminders icon:
jstejada,2016-11-04 06:02:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/35e344d525787d8f5c57266c8f4d762f402070ac,35e344d525787d8f5c57266c8f4d762f402070ac,:lipstick:(attachments): Fix file attachment styles
jstejada,2016-11-04 01:26:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/c974e7c8d0308a7a2b3fe7dffc20fe1bb243550e,c974e7c8d0308a7a2b3fe7dffc20fe1bb243550e,fix(attachments) Add default value for filePreviewPaths in case they are not provided
jstejada,2016-11-04 00:41:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e54d01a4ebbcf8930439ca0bc244b0b7bc0d5b5,2e54d01a4ebbcf8930439ca0bc244b0b7bc0d5b5,"fix(attachments): Fix several bugs in attachment components

- Fix several styling issues
- Adjust the generated size of the thumbnail preview to fill all of the
available space"
bengotow,2016-11-04 00:54:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3cfea3c5681f28c38df835447d415ab150c461c,e3cfea3c5681f28c38df835447d415ab150c461c,fix(decorators): Carry container config through decorators
bengotow,2016-11-04 00:52:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f9fa85f7b391dcfd3a11ac2501748db33c833bc,3f9fa85f7b391dcfd3a11ac2501748db33c833bc,fix(popovers): Don’t apply minimum width to all
bengotow,2016-11-04 00:42:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/a67b39e8603e2969f74ff474010d5073db5e092c,a67b39e8603e2969f74ff474010d5073db5e092c,fix(auth): Add partition back to webview
emorikawa,2016-11-03 18:31:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/daecdd1fdacabb2d000a35d3f5a9bf9797202cb8,daecdd1fdacabb2d000a35d3f5a9bf9797202cb8,fix(travis): PUBLISH_BUILD only on mirror
jstejada,2016-11-03 16:17:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec6c8add9f85777c95c9e0e2183a7f7e4b9f7c83,ec6c8add9f85777c95c9e0e2183a7f7e4b9f7c83,update(changelog)
emorikawa,2016-11-03 15:56:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/28896286d5e3f59b3f5c653258e7eb73efca1753,28896286d5e3f59b3f5c653258e7eb73efca1753,fix(spec): bump submodule spec fixes
jstejada,2016-11-03 07:08:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa8b91d508e17d469921256909518599478aad41,aa8b91d508e17d469921256909518599478aad41,fix(lint)
emorikawa,2016-11-03 01:03:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/aedd6de90234174f03ae8ebcdc22b3e7884cecbd,aedd6de90234174f03ae8ebcdc22b3e7884cecbd,fix(plugin): remove from plugin list
jstejada,2016-11-03 01:03:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ccf2079b44de09efaf0eb585f503d751ffafa86,9ccf2079b44de09efaf0eb585f503d751ffafa86,bump(version): 0.4.202
hallamoore,2016-10-24 22:46:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3b6723e319f68d3a4de5be7a949262183cd413b,a3b6723e319f68d3a4de5be7a949262183cd413b,"feat(cal) Add a mini month view to the corner of the calendar

Summary: Title says it all!

Test Plan: Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3373"
emorikawa,2016-11-03 00:43:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/e476c03f3b2f0501b27c4a2626f6c8e26492370d,e476c03f3b2f0501b27c4a2626f6c8e26492370d,fix(form): add currentFormValues to GeneratedForm
jstejada,2016-11-03 00:33:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/330bb55e80aed3dbfcfd6e9e15a1f760d381541c,330bb55e80aed3dbfcfd6e9e15a1f760d381541c,bump(version): 0.4.201
jstejada,2016-11-03 00:20:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/18fe94ab72fb381f662c5672b011851a6ff3abfb,18fe94ab72fb381f662c5672b011851a6ff3abfb,"feat(attachments): Generate and display thumbnail previews for files (mac only)

Summary: Adds option to view preview thumbnails for attachments. This commit updates the FileDownloadStore to generate file thumbnail previews for attachments via `qlmanage` and displays them in the AttachmentItem component.

Test Plan: Manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3393"
jackiehluo,2016-11-02 22:56:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/e583573ad5421928bdbf8d28dcb4476dccd43066,e583573ad5421928bdbf8d28dcb4476dccd43066,fix(email-frame): Refactor if/else for frame height
jackiehluo,2016-11-02 22:33:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/60c0e6a3221bb505b060163c74bfada71805ef84,60c0e6a3221bb505b060163c74bfada71805ef84,fix(email-frame): Revert to body scrollHeight if documentElement's is zero
jackiehluo,2016-11-02 22:29:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee6faa236ce96c02d8e09ce79c61820c628111e6,ee6faa236ce96c02d8e09ce79c61820c628111e6,fix(logging): Remove console.log()
jackiehluo,2016-11-02 22:28:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6a2faaf6446db3f3a5bead0368c22bc693fd14b,d6a2faaf6446db3f3a5bead0368c22bc693fd14b,fix(email-frame): Prioritize documentElement for scroll height
emorikawa,2016-11-02 21:54:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/11c95871e79c078d7e15e5af3bda53425c39fc66,11c95871e79c078d7e15e5af3bda53425c39fc66,fix(travis): fix conditional check in before_install
bengotow,2016-11-02 20:31:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/47b5f744cb1ec81134549d26817db47e6a7365be,47b5f744cb1ec81134549d26817db47e6a7365be,fix(onboarding): Respect hot window dimensions
bengotow,2016-11-02 20:13:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f3e7fc096073ddce4d6d9d091b548204a780933,6f3e7fc096073ddce4d6d9d091b548204a780933,"fix(search): Rename package, fix column naming issue"
bengotow,2016-11-02 20:03:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/f55d9962eabd0c03bfe35c917dddebb007032837,f55d9962eabd0c03bfe35c917dddebb007032837,feat(search): Fix slow queries with FTS5 on Contacts
emorikawa,2016-11-02 19:32:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/692cfebb1740e54757991e306d97fbfeaf19dbb7,692cfebb1740e54757991e306d97fbfeaf19dbb7,"fix(travis): Fix travis build script

fix(travis): Fix travis error

add debug to travis

bump(submodule)

Silence"
hallamoore,2016-11-02 19:39:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/da6636de303925a691fe1417b082d444a80331b9,da6636de303925a691fe1417b082d444a80331b9,"fix(decaffeination) Remove second arg from some slice calls

Decaffination replaces someString[index..-1] with
someString.slice(index, -1 + 1), which is bizzare. This commit changes those
instances to someString.slice(index)."
emorikawa,2016-11-02 19:26:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4d7865121eee11012ae3022c98478a1674281bf,b4d7865121eee11012ae3022c98478a1674281bf,fix(travis): Fix path to encrypted files
emorikawa,2016-11-02 19:23:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/32b5f684f3623b87742bbd4d7b5781919bc3cebf,32b5f684f3623b87742bbd4d7b5781919bc3cebf,feat(travis): allow builds on mirror
jstejada,2016-11-02 19:15:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/3de919b221fc60e5aa4e9a4661cf68a739217d9e,3de919b221fc60e5aa4e9a4661cf68a739217d9e,"fix(selection): Add index to Contact table to improve perf when selecting threads

Thread selection triggers a query on the Contacts table by account_id,
email and name. Add an index to improve this query"
jstejada,2016-11-02 18:58:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/0d4b080d6403669570ba0ae5382fe47d89b4fc9e,0d4b080d6403669570ba0ae5382fe47d89b4fc9e,bump(submodule)
jstejada,2016-11-02 18:46:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b775cf89c3e0aa5719cd1713199f6bfdf687959,1b775cf89c3e0aa5719cd1713199f6bfdf687959,fix(specs): Add regression test for list-selection
hallamoore,2016-11-02 18:38:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/f76edb44f873056262c51ff8238d1af46b601e48,f76edb44f873056262c51ff8238d1af46b601e48,"fix(email-frame) Only use documentElement scrollHeight if it is taller than body

There are cases where the documentElement has a scrollHeight of 0, even if
the body has a larger scrollHeight. Before, we were always using the
documentElement if it was present. Now, we use the maximum scrollHeight."
jstejada,2016-11-02 18:26:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e05db199bfeea7904c22384c44e7af857ce9c14,6e05db199bfeea7904c22384c44e7af857ce9c14,"fix(list-selection): Properly iterate over the selected indexes when expanding selection

This commit fixes a bug in which you couldn't shift select threads from
the bottom to the top (i.e. select a thread, shift-click a thread on top of it
would not select the range of threads).

This bug was introduced by a translation from coffeescript to JS.
Specifically, by converting

```
for idx in [startIdx..endIdx]
```

to
```
for (let idx = startIdx; idx <= endIdx; idx++) { ... }
```

The coffeescript range syntax for `[x..y]` automatically generates the
correct range when x > y or when x < y, generating a descending or
ascending range respectively.
However, our transaltion simply iterated ascendingly from `startIdx`
to `endIdx`, which would be a no-op when the `startIdx` was greater than
the `endIdx`, which was the case when shift-selecting threads from bottom to top."
emorikawa,2016-11-02 17:58:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9b226a7271c1c5e22457afbff7d75c10724c25d,c9b226a7271c1c5e22457afbff7d75c10724c25d,fix(forms): fix window launcher and gen form
jstejada,2016-11-02 01:12:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/48063e0013ec07a36c8866ab7b76b7c2cad6174b,48063e0013ec07a36c8866ab7b76b7c2cad6174b,fix(es6): Convert FileDownloadStore to JS
jstejada,2016-11-01 23:10:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/474b9edadc7884fcfad0374af7c899f3d9dfc612,474b9edadc7884fcfad0374af7c899f3d9dfc612,"feat(attachments): Add ability to preview with quicklook (mac only)

On mac, you can now preview an attachment by clicking on the new preview
icon, or by pressing space bar when an attachment is focused.

This commit also updates the styling for attachment items and adds the
ability to focus attachment items. We don't keep any focused state, just
the browser's, which means you can focus attachments by clicking, or
tabbing/shift-tabbing"
hallamoore,2016-11-01 18:41:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e3f9aa9f1949a96ef4b564e0d85c266dbfc1095,6e3f9aa9f1949a96ef4b564e0d85c266dbfc1095,"fix(sidebar-notifs): Set containersRequired on the notifs-wrapper

Switch from manually setting containerRequired to false on each individual
notification to setting it on the InjectedComponentSet within the
notifs-wrapper. This way, people adding new notifications don't need to
remember to manually set it themselves."
jstejada,2016-11-01 18:39:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/39a968f3998d86c77632314c79667634435bf4ff,39a968f3998d86c77632314c79667634435bf4ff,"fix(reminders): Add missing assets, ui cleanup, restore dead code

Summary:
This commit adds a couple of missing assets, including the icon for the
plugin list and other misc icons. It also switches to the new UI where
we use the thread timestamps to display the reminder date in the
Reminders perspective instead of using mail labels. It also adds a
header to the threads inside the reminders perspective to indicate that
a reminder will be triggered if no one replies to their email.

It also adds a header to indicate when a message has been brought back
to the inbox due to a reminder based on sdw's designs.

Finally it restores some code that magically disappeared when landing
reminders + other misc cleanup

Test Plan: Manual

Reviewers: bengotow, halla

Reviewed By: bengotow, halla

Differential Revision: https://phab.nylas.com/D3388"
hallamoore,2016-11-01 16:57:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7fbd158126ae6a78b37f872288937b53ce4ef53,c7fbd158126ae6a78b37f872288937b53ce4ef53,"fix(menubar): Add missing not operator

Menu items could not be opened on Linux because Linux allows menu items to be
disabled, and the logic for determining if a menu item should be enabled was
accidentally negated during coffescript conversions."
jstejada,2016-11-01 00:26:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/879c74723037f34ce092ae9025aea5d095fbcdb4,879c74723037f34ce092ae9025aea5d095fbcdb4,":art:(attachments): DRY and cleanup attachment components code

Summary:
The attachment components were the only React Components which used
inheritance between components, which is an anti-pattern in react. I
deleted these components in favor of new purely functional/dumb
components exposed via the component-kit: Attachment Item and
ImageAttachmentItem. These are defined in the same file to reuse some
smaller components between them, like the progress-bar, etc.

The attachments pacakage still remains, and only registers a single component to
a new are called MessageAttachments. This InjectedComponent role is
shared by the Composer and MessageItem, and is the only reason this
exists as an injected component in a separate package.
MessageAttachments renders all image and non image attachments for a
message or draft, and binds the appropriate actions for removal, downloading, etc.

The composer still used FileUpload and ImageUpload components for rendering
uploads in the Composer (i.e. when you add an attachment (these are
different from files because they aren't saved until the draft is
sent)). These 2 components were pretty much copied and pasted from the
ones in the attachments package, with subtle differences-- I got rid of
these as well in favor of the new AttachmentItem and ImageAttachmentItem

Also convert more coffee to ES6!

Test Plan: Unit tests

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3381"
emorikawa,2016-10-31 23:26:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ca7ad91f8f5f3e904f73c76c54230d2da8334b8,1ca7ad91f8f5f3e904f73c76c54230d2da8334b8,fix(DB): turn debug logging off
emorikawa,2016-10-31 23:24:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f1518548663e719ee3626233326e94711768dd2,6f1518548663e719ee3626233326e94711768dd2,feat(DB): Revert to schema version 23
pfista,2016-10-31 18:52:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/010706a754d0e4b18d10341a7ced0b5d4b9b7569,010706a754d0e4b18d10341a7ced0b5d4b9b7569,fix(task): fix typo during error check
kevinmartin,2016-10-31 17:42:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/38d7e4f01389c810f5ce23e9b55414c07cc72b87,38d7e4f01389c810f5ce23e9b55414c07cc72b87,"Fix this line on non-POSIX systems, such as Windows (#2996)

Per: https://github.com/nylas/N1/commit/f8f0cb206f53183698ee1648a7a789bfbf2598ac"
bengotow,2016-10-28 22:33:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8f0cb206f53183698ee1648a7a789bfbf2598ac,f8f0cb206f53183698ee1648a7a789bfbf2598ac,fix(fd-limit): Increase FD limit to 1024
emorikawa,2016-10-28 20:56:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/cccec14d0af626b5b66d064033e2794380881ad9,cccec14d0af626b5b66d064033e2794380881ad9,fix(linter): fix linter errors
emorikawa,2016-10-28 20:49:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/078b37e4414c27f6789d26b4474cb327b2148228,078b37e4414c27f6789d26b4474cb327b2148228,"fix(channel): only show stable or beta

Or the salesforce channel if you've ever used it before"
emorikawa,2016-10-28 20:27:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f9aade3d0f2b49550306dba1b9e8010f41ae4a0,8f9aade3d0f2b49550306dba1b9e8010f41ae4a0,fix(build): fix codesign step
emorikawa,2016-10-28 17:23:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/815e78db3c42ef78c80701d36660d67c799efa25,815e78db3c42ef78c80701d36660d67c799efa25,bump(SFDC): fixes to object pickers
emorikawa,2016-10-28 15:28:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/335050a7eae6c1731164838b8238dbe1090b8832,335050a7eae6c1731164838b8238dbe1090b8832,fix(build): fix gruntfile error
emorikawa,2016-10-28 15:08:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/47784fb8f9f71966f39d901d1d7b960701ee8586,47784fb8f9f71966f39d901d1d7b960701ee8586,fix(build): remove dmg task from build
emorikawa,2016-10-28 14:37:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/29bfd8dc1d1263f59e582285dfed6882a67784b8,29bfd8dc1d1263f59e582285dfed6882a67784b8,fix(build): bump AppVeyor to build with Node 6.9 from 4.2
emorikawa,2016-10-28 14:09:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/13c69ab4998c671c4bd91c7eeccb3487c2f67914,13c69ab4998c671c4bd91c7eeccb3487c2f67914,"fix(travis): build with Node 6.9 to fix npm build issue

Travis on Node 4.2 can't succeed installing the build folder with npm 2
due to a peerdependency issue that doesn't happen with latest node and npm"
emorikawa,2016-10-28 13:59:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8e6099005b5a1f0270eb5efba688cf1d8a53acf,e8e6099005b5a1f0270eb5efba688cf1d8a53acf,fix(es6): fix linter and compile error in es6 conversion
emorikawa,2016-10-28 13:55:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/429ab7e95c9b98a4d486d15960a58c4c04372cea,429ab7e95c9b98a4d486d15960a58c4c04372cea,bump(SFDC): Update to latest SFDC fixes
bengotow,2016-10-28 01:48:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/f05c745deea1b93f63575b09affebe964c923450,f05c745deea1b93f63575b09affebe964c923450,"es6(*): Actions, ConfigSchema => ES2016"
bengotow,2016-10-28 01:25:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/03d4e7525b13ac1b2003e9c13b69904d6a1e3f56,03d4e7525b13ac1b2003e9c13b69904d6a1e3f56,"es6(*): Misc components, nylas-exports => ES2016"
bengotow,2016-10-28 00:28:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9ac1624576862b1c6f3e57760a33c77369ceb1d,f9ac1624576862b1c6f3e57760a33c77369ceb1d,es6(composer): Composer extensions => ES2016
bengotow,2016-10-27 22:31:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/89d17d55575daa6e4ab451007725cc6080c7d54f,89d17d55575daa6e4ab451007725cc6080c7d54f,"fix(tooltips): comp. w/ tooltip must be conditionally rendered

Also update tooltips to support functional components."
bengotow,2016-10-27 22:06:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/31dfa2d5e4c512bdda8d62ecd30a2992c85b266f,31dfa2d5e4c512bdda8d62ecd30a2992c85b266f,lint(send-action-button): Whoa nylaslint just chill 😂
bengotow,2016-10-27 21:44:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa069277d3391bc7ebf0c45bbfcd35dd32d954e7,fa069277d3391bc7ebf0c45bbfcd35dd32d954e7,fix(mac-notifier): Make macOS-only package optional
bengotow,2016-10-27 19:44:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a25f7afdf571ade29d7428f83eb4b1595edef2e,6a25f7afdf571ade29d7428f83eb4b1595edef2e,fix(spec): Apply jasmine styles to windowed specs
emorikawa,2016-10-27 19:24:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/858a41db333e065f01b6c2803c8d72b0a1526216,858a41db333e065f01b6c2803c8d72b0a1526216,fix(spec): let ./N1.sh --test=window work
bengotow,2016-10-27 01:18:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/8323b3d9af2180cdbc3963b708b450a0286e1b13,8323b3d9af2180cdbc3963b708b450a0286e1b13,es6(*): Misc src to ES2016
bengotow,2016-10-27 00:22:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/ceb1eb90fa92d027faad58cfa6de3f0f0eb6fcbd,ceb1eb90fa92d027faad58cfa6de3f0f0eb6fcbd,es6(*): Small components from shared library => ES2016
bengotow,2016-10-27 00:09:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9dbba2bf8b296f75e2d5e66cf6f73e84687c6d5,b9dbba2bf8b296f75e2d5e66cf6f73e84687c6d5,"es6(list): ListDataSource, subclasses => ES2016"
bengotow,2016-10-26 23:01:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd0ec9986b7d31c1b5c9be24fab62423aec3c6a9,bd0ec9986b7d31c1b5c9be24fab62423aec3c6a9,"es6(models): Remaining models => ES2016

# Conflicts:
#	src/flux/models/contact.coffee"
jstejada,2016-10-27 19:05:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/bee782b6d6ee7489b76d5ebb708e8944a37c5afd,bee782b6d6ee7489b76d5ebb708e8944a37c5afd,fix(warnings):Fix react warning caused by decorator
jstejada,2016-10-27 18:44:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/fdde68f574ef4144f0610525690f9fe817af9688,fdde68f574ef4144f0610525690f9fe817af9688,fix(specs): Fix remaining broken specs
jstejada,2016-10-27 18:35:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc4c9f42b59b3fd9543b6628c8e2f7cd6a7e8ba8,dc4c9f42b59b3fd9543b6628c8e2f7cd6a7e8ba8,fix(specs): Fix date input specs
jstejada,2016-10-27 17:40:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/4644077141127844e229a7b3e84522f0df12287a,4644077141127844e229a7b3e84522f0df12287a,fix(specs): Fix draft-store tests
emorikawa,2016-10-27 16:02:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/7002e566112b13255336a4d464d09736cbdddfe0,7002e566112b13255336a4d464d09736cbdddfe0,fix(token): Fix placeholder & style issues in tokenizing text field
jstejada,2016-10-27 16:01:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/d92a6a5808049508eedebee1b29e10a0fe371dbe,d92a6a5808049508eedebee1b29e10a0fe371dbe,fix(warning): Don't attach ref inside decorator if not a `Component`
jstejada,2016-10-13 16:43:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/29e453681a723de2e2ad2cde59f16e345dcb1199,29e453681a723de2e2ad2cde59f16e345dcb1199,"feat(reminders): Add send reminders functionality

Summary: Add reminders plugin which lets you set reminder if you don't get a reply for a message within a specified time in the future

Test Plan: TODO

Reviewers: halla, bengotow, evan

Reviewed By: halla, bengotow, evan

Differential Revision: https://phab.nylas.com/D3356"
emorikawa,2016-10-27 13:36:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/956fbe9a68c7d4ae79e6b5f63c5214fe41e9397f,956fbe9a68c7d4ae79e6b5f63c5214fe41e9397f,feat(license): add GPL-3.0 license to package.json
jstejada,2016-10-21 18:48:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/29965d9e56cdf00d2874f3fb443bf8d2d0300bb1,29965d9e56cdf00d2874f3fb443bf8d2d0300bb1,"feat(undo-send): Add undo send

Summary:
Add ability to undo send. We decided to make undo send completely client side for a couple of reasons. If we rely on send-later for undo-send, we would be giving /all/ send load to our send-later backend. If this increases the send-later load too much, it might cause delays in the regular send-later functionality and potentially other plugins like snooze that run under the same service. We would also need to rely on the network to be able to cancel a send, which would make it unusable offline or hard to debug if that specific request fails for any given reason.

This commit also refactors the way `ComposerExtension.sendActionConfig` works. The method has been renamed and now must return an array of send actions. Also, all of the business logic to handle different send actions registered by extensions has been pieced apart from the SendActionButton and into a new SendActionStore. This also enables undo send to undo custom send actions registered by extensions.
Along the way, this also fixes a pending TODO to show all registered custom send actions in the preferences for choosing the preferred send action for sending.

Undo send works via a task, so in case N1 closes before send goes through, it will still be persisted to the task queue and restored when opened again. Undoing a send means dequeuing this task.

Test Plan: Manual

Reviewers: jackie, bengotow, halla, evan

Reviewed By: bengotow, halla, evan

Differential Revision: https://phab.nylas.com/D3361"
emorikawa,2016-10-26 23:47:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/2faf86c2a29efdb3e13da3d0446d59297d47f46b,2faf86c2a29efdb3e13da3d0446d59297d47f46b,"bump(version): 0.4.200

Includes SFDC and the package migration"
emorikawa,2016-08-08 21:03:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8c425ad98cecec715f998a4c23cc91f317b9cc7,e8c425ad98cecec715f998a4c23cc91f317b9cc7,"feat(SFDC): Initial SFDC commit

Fixes to generated form error handling

Remove console fix css

Styles with tokenizing field and generated form

Gen form fixes for required

Gen form styles

Fix datepicker in generated form

Can compute plain text for messages

Add resolvePath. Fix bug in sidebar scoring

Plaintext fixes

Use new syntax for global plugin actions

fix(styles): fix input[type='url'] syntax error in inputs.less

Remove sendToAllWindows action

Style fix to generated form

bump(SFDC): 0.4.100

Trigger AppVeyor

Trigger AppVeyor

Add ci-build to appveyor yml

Only build mac

Publish all builds that make it to AppVeyor or Travis

Bump submodule

Update submodule to init recursively for appveyor

feat(win): add getAllWindowDimensions

bump(SFDC): 0.4.101

fix(form): generated form handles disabled inputs

Make tokeizing field editable

bump(SFDC): 0.4.102

bump(SFDC): 0.4.103

bump(SFDC): 0.4.104

bump(SFDC): 0.4.105

:art:(salesforce): Highlight prefilled fields

Form fixes

Fix prefill class

Fix z-index of fieldsets

Refactor our BoldedSearchResult component

Move and split sidebar section into thread list and toolbar

Fixing referenceTo

bump(SFDC): 0.4.106

bump(SFDC): 0.4.107

bump(SFDC): 0.4.108

Fix delete object from form

Don't show tokenizing input field borders on window

Close popover after adding existing opportunity

Fix required fields

bump(SFDC): 0.4.109

Merge submodule with master

Only store raw data for full object fetches

Use Salesforce error reporter

Refactor form and smart fields

Fix form validation

Remove DOM form validation

bump(SFDC): 0.4.110

Fix mini month view

bump(SFDC): 0.4.111

Fix Record Type layouts

bump(SFDC): 0.4.113

Fix click target

bump(version): 0.4.53 and update Changelog

fix(changelog): Update changelog to reflect latest puublished release

fix(thread-sharing): Update popover style

bump(build)

fix(thread-sharing): Find-thread, incr timestamp delta to 1min in ms

:art:(thread-sharing): Prefer url and querystring modules to parse url

fix(mail-merge): Correctly handle empty column names

fix(thread-sharing): Throw error when thread is /not/ found

fix(thread-sharing): Timestamp range in seconds

fix(N1.sh): Allow path to working copy to have spaces

bump(electron): Electron 1.4, node-sqlite 3.1.4+fts

fix(keymaps): Correctly map mod+z to undo, instead of just z (#2663)

fix(tutorial): Minor tweaks, finalized styling

Add link for Darkish theme (#2854)

Fix typo: dependencesi > dependencies (#2838)

feat(channels): Choose an update channel! Limited time only!

Summary: Just a small select input.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3282

fix(logging): Fix query logging: escape '%' properly

fix(trial): Compute “days remaining” in timezone-aware way

fix(util): Utils.deepClone properly clones dates

Merge submodule with master

bump(SFDC): 0.4.114

fix(trial): Move”days left” bar to the sidebar, new design

fix(lint): import ui-variables for linter

Refactor object store and gen form updates

feat(msg-list): Don't make participants mailto links, add context menu

fix(long-connection): Throw error for reporting, instead of just logging

design tweaks, breaking css up into files, update readme (#2858)

fix(darkside): `script/grunt lint` requires explicit LESS includes

fix(specs): Display which tests are console.logging

fix(promise): Don't use deprecated Promise.longStackTraces()

fix(error): Let APIErrors have proper stack traces

Update submodule

Revert ""fix(promise): Don't use deprecated Promise.longStackTraces()""

This reverts commit db0e025fb5e56880ffea147ad5c4dcfb37b9d830.

Bump submodule

bump(SFDC): 0.4.115

fix(specs): Fix tests that were console.logging, bump coffee-react

fix(drag-drop): Restore support for thread dragging

fix(thread-sharing): Fix unloading plugin

fix(auth): Update autofill for Fastmail.fm

fix(tooltips): Position relative to custom container for composer

lint(*): Fix issue breaking the build

bump(react): 15.3.x, warning removal, thread-sharing tweaks

es6(db): Convert attribute class declarations to ES2016

es6(db): Didn’t wait for NylasLint…

hack(channel-picker): Hide Salesforce for now

fix(accounts): Restore account re-ordering

fix(specs): attribute conversion fixed bugs, broke specs

fix(task-queue): performLocal now operates serially

Revert ""fix(task-queue): performLocal now operates serially""

This reverts commit 179d3fd78a4c817115d7013f6692834b4845d1db.

Add back in `isSameDomainAsMe`

es6(db): Query-related classes moved to ES2016

fix(task-queue): task queue dependencies are only for preceding tasks

bump(SFDC): 0.4.116

Revert ""fix(task-queue): task queue dependencies are only for preceding tasks""

This reverts commit e1e8c1cd9429b5aa20e19d4e2b8eca7215aa4a2c.

Add sequentialId check to tasks

Design pass on SF icons

fix(search/long-conn): Process results buffer before ending connection (#750)

NylasLongConnection ends the connection when the 'end' event is emitted
by the `request` object. When this happens, the global connection buffer is cleared.
Also, the global buffer holds the data we've received from the connection, and
whenever we receive new data, we accumulate it in the buffer and call a processBuffer function
which is throttled to 400ms.

Given that the buffer is global state, and processing occurs
asynchronously with a delay of up to 400ms, if the 'end' event on the connection is
fired before we actually get to process the buffer, we would clear it and show no results.

This scenario currently only affected search because if we accidentally
threw away some data when streaming deltas, we will get that data again
when we reopen the delta streaming connection.

fix(tray): Flipped logic in displaying unread count

Add section to Message footer

bump(SFDC): 0.4.117

fix linter

bump(electron): Update to 1.4.1 to fix intermittent Symbol() error

es6(db): Query builder converted to ES6

fix(long-connection): `close` instead of `end` on network end event

NylasLongConnection.Status.Ended means that we can't open the
connection again. When we get a network level 'end' event, that doesn't
map to our meaning of `Ended`, so we should just close it instead

Fix db setup

bump(SFDC): 0.4.118

feat(transforms): Replace regexp body transforms with DOM approach

Summary:
We originally didn't do this because creating a DOM tree was loading images.
Using range.createContextualFragment seems to do it without the tree ever
being attached.

Accompanying changes to src/pro are here:
https://phab.nylas.com/D3300
https://github.com/nylas/edgehill/compare/bengotow/draft-dom-transformations?expand=1

Also rename applyTransformsToDraft => applyTransformsForSending. Needed
a new name because the function signature has changed. AFAIK there are no
open source plugins using the old functions.

Test Plan: All specs updated

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3299

fix(tooltips): Defer display of background, ensure dot inside window

bump(SFDC): 0.4.119

Merged in latest master from N1

fix(attribute): fix es6 conversion error

bump(SFDC): 0.4.120

Include calendar fix

fix(warnings): Fix warnings for react unkown dom prop

When using the pattern `{...extraProps}` to transfer props in the render method,
if rendering a native dom element, react will issue a new warning if we
end up passing invalid dom props:
https://facebook.github.io/react/warnings/unknown-prop.html

This adds a helper library to exclude invalid fom props instead of
manually excluding props inside each render method

fix(attribute): fix es6 conversion error

fix(mail-merge): fix `applyExtensionTransformsToDraft` rename

bump(SFDC): 0.4.121

Add welcome modal with video

Move close button to modal component and update styling

Fix linter errors

fix(help): Better help URL

fix(mail-merge): Add test coverage

Add jitter to BackoffTimer

Summary:
This should help us avoid the thundering herd problem if we have some
kind of API outage affecting a wide number of clients.

Test Plan: Tests

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3297

fix(contact-sidebar): Correctly update selected contact

Sometimes, when selecting a contact (with name, email) inside a thread,
the dropdown (`<select>`) did not correctly reflect the selected
contact.

This was because when focusing a contact, the FocusedContactStore
queried that contact from the database just by email, and the contact
retured from the database became the focused one. However, sometimes the
returned contact might have the same email but different email, and
given that the `<select>` component is keyed by both name,email, it
couldn't find the appropriate <option> to render, so it could not update
to reflect the newly selected contact

Now, the FocusedContactStore queries by email and name to prevent this

Fix broken test

Summary:
Fixes a test that was broken due to my unfamiliarity with
CoffeeScript :-/

Test Plan: Tests

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3302

feat(inline-images): Drag & drop or paste inline images

Summary: Initial support for inline images. Tests still forthcoming!

Test Plan: WIP

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3295

Revert ""fix(task-queue): performLocal now operates serially""

This reverts commit 179d3fd78a4c817115d7013f6692834b4845d1db.

fix(lint)

es6(db): DatabaseTransaction & Query moved to ES6

fix(tasks): Add instrumentation to Task's performLocal

A slow performLocal may be one of the causes of #2725

update: Update CHANGELOG for v0.4.55

fix(whitespace)

fix(install-location): Update language and remove buggy regex

fix(tasks): Report slow performLocal only when it takes > 500ms

fix(mail-merge): Reduce max number of emails to 250

Almost always, you will get rate limited trying to send 500 emails.
Reduce to 250 to make it more reasonable

💄(sidebar): Github repos should not wrap

fix(sidebar): Command-click + href to open in background

Global window event handler should work when clicking elements /inside/ of an a tag with an href.

💄(mail-merge): Fix alignment and height of tokens

fix(composer): No need for overlaid z-index: 10, appearing over menus

fix(db): Add an index on Thread.client_id for modelify

fix(overlaid-comps): Check if supports preview only after we know exists

fix(warnings): Correctly remove all unknown props warnings

fix(thread-list): Use interaction handlers, don’t update selection directly

fix(drafts): Sanitize quoted text to avoid overlaid component issues [!!]

fix(lint): Change variable to const

fix(search): Update local search syntax to include more results

Add prefix search. Previously, if searching for a thread with a specific
subject, you had to type the entire subject. Searching for just a prefix
wouldn't return the result.
This should not affect any of the current search results, only add more results

fix(react): React refuses to add `partition` attr to webview

fix(identity): Always refresh accounts after identity

This fixes an issue where changing your Nylas ID didn’t refresh your accounts, and N1 would still think they were invalid.

fix(db): Messages with empty bodies always showing loading spinner due to ‘’ == null

Bump submodule

fix(composer): Dedupe registered key bindings to avoid double undo in composer

fix(calendar): CSS layout fix for Chromium 53

fix(mail-merge): Reduce limit to 150 messages, improve error handling

fix(composer): Add additional isMounted checks

Resolves this exception: https://gist.github.com/jstejada/a26dc6a7a2896dcef9be3cec60eaecdb

fix(perspectives): More robust validation of saved perspectives, never open to blank screen

fix(specs): Fix mail merge specs

:art:(thread-sharing): Fix icon

fix(lint): Fix coffeelint errors

fix(draft-list): Don't render html string in draft subject

fix(dev): Pretty print deltas

:art:(activity-list): punctuation

fix(window-state): Per electron#7278, save state in beforeunload

Related:
https://github.com/electron/electron/issues/7278
https://github.com/atom/atom/pull/3223/files

As of Chromium 36, unload is async and @zcbenz does not think it happens reliabily in Electron. Move saving of window state to beforeunload, following suit with Atom.

fix(composer): Wrap composer instead of allowing overflow-x

fix(spec): remove unnecessary messages & prevent extra hot window

bump(SFDC): 0.4.123

fix(linter): fix linter error

fix(linter): fix linter error

rm(ship-logs): Remove unused log shipping, prevents many-processes bug on win32

feat(bios): Linkify twitter hashtags and mentions in bios

fix(composer): When pasting links that are tracked, extract actual link

fix(self-hosting) Don't load packages that don't support self-hosting

feat(self-hosting) Add onboarding page about self-hosting plugin restrictions

bump(verison): 0.4.56, more items in changelog

fix(data-source): Wait until the next cycle to cleanup

Fixes a crash when switching to the thread list from the draft list, where there are very briefly zero observers.

:lipstick:(share-thread): Fix positioning of share thread button

fix(tutorial-tips): Don't display when component is not visible

fix(participants): When copying, include space #2871

fix(spellcheck): Do not spellcheck <code>, <a>, <pre> tags

This fixes #2877. The templates feature becomes broken when variable names contain misspellings.

fix(specs): Minor spec fixes

fix(composer): enable click regions on margins of composer

Change padding, margins, and borders to allow you to click on the left
margin of to, cc, bcc, from, subject fields as well as the composer
margins both above, left, and to the right of the composer.

Ensured attachments and other assets show up in correct spots

Ensure subject looks correct for mail merge

fix(composer): can shift-tab more places

Allow shift-tab to go back to subject from anywhere except in front of a
tab character

fix(composer): fix margin when editing contact chip

fix(composer): tokenizing text field trigger logic moved to composer

Put acess tokens and refresh tokens in keychain

fix modal spacing

bump(SFDC): 0.4.125

fix tokenizing field margins

fix(tutorial-tips): Recompute pos when theme changes

fix(share-thread): Closed when blurred when blurred or new thread selected

fix(dev-mode): Don’t save to config.json, use flag instead

Turns out even the built, packaged version of the app can be restarted into dev mode by adding `—dev` to argv and using the new relaunch API.

es6(db): Move DatabaseStore to ES6

:lipstick:(outline-view): Add title attr for tooltips

fix+:art:(notifs): Cleanup, handle nonexistent thread when opening notification

Notifications now check to see the thread they are supposed to open
exists.

Also, clean up FocusedContentStore._onFocus so that it doesn't have the side
effect of dispatching another action and messay logic.
Instead, added Actions.ensureCategoryFocused, to focus any category, and which
should be used separately from focusing content (notifications now use
this action for ""opening"" the thread)
Also, convert FocusedPerspectiveStore to ES6

fix(specs): Activity List

fix(composer): enable click regions on margins of composer

Change padding, margins, and borders to allow you to click on the left
margin of to, cc, bcc, from, subject fields as well as the composer
margins both above, left, and to the right of the composer.

Ensured attachments and other assets show up in correct spots

Ensure subject looks correct for mail merge

fix(composer): can shift-tab more places

Allow shift-tab to go back to subject from anywhere except in front of a
tab character

fix(composer): fix margin when editing contact chip

fix(composer): tokenizing text field trigger logic moved to composer

:hocho: Last remaining traces of coffeescript in submodule!

fix(tools): Make `arc lint` great again

Add proper arc config for linting ES6 files with eslint

fix(files): When download mode is “manual” prompt about inline attachments

Summary:
When you have your ""Download attachments for new mail"" setting set
to ""manually"", inline images always appear broken with no explanation.

This patch listens for the image load to fail and displays a button which
queues the fetchFile task on click. This seemed like the best approach because
it doesn't slow down the loading of the message with more fstats / lookups.
(Seeing if the file has already been downloaded is an async operation)

Test Plan: No specs atm

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3313

feat(sidebar-notifs) Create sidebar notifications to replace old bars

Summary:
Move the old bar notifications to the sidebar, and only display one notification
at a time using a priority-rating system. Remove all of the old notification
infrastructure.

Test Plan: Added specs, also reproduced notifications locally

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3310

bump(submodule)

fix(lint)

fix(phising): Handle scenarios where input is malformed (Sentry 51642)

https://sentry.nylas.com/sentry/edgehill/group/51642/

fix(templates): Handle error when scanning dir (Sentry 44351)

https://sentry.nylas.com/sentry/edgehill/group/44351/

fix(perspectives): Restore when only account cannot be found (Sentry 59061)

https://sentry.nylas.com/sentry/edgehill/group/59061/

refator(notification): move base notification to nylas-component-kit

Remove all salesforce objects on logout

Add syncing of salesforce objects

Summary:
Depends on D3327
- Also remove all coffeescript
- Make it so salesforce mail label grabs opportunity from database
- Make sure metadata is kept in sync when salesforce objects are deleted
- Set up stub for Salesforce Object cache via SalesforceObjectStore
- Cleanups here and there

Test Plan: Manual

Reviewers: jackie, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3328

fix(db): Switch to better-sqlite3, resolves offline issue

Summary:
Better-SQLite3 is a fork of node-sqlite3 which includes a re-written JavaScript interface. It’s more synchronous, but better reflects what is actually sync vs. async in sqlite’s C++ API. (Not much is really async under the hood.) This diff uses a branch of better-sqlite3 I’ve edited to support Node 6.

In my tests, this branch spends 3.24x less time executing queries than `master`. (Measured time spent in calls to `this._db[run|all|get]` over the first 5000 queries of initial sync. It also increased the performance of starring a thread in the thread list by 28%.

This library also allows us to use a prepared statement cache, which is great because we often make the same queries repeatedly as query subscriptions refresh the UI and deltas are dumped into the app. The old interface didn’t expose statements (cached query plans) to JS.

better-sqlite3 advertises that it uses the JS garbage collector instead of lower level C++ memory management. I tested syncing my entire mailbox to verify that memory usage is not significantly different on this branch after a lot of queries have been made.

Finally, it looks like we can finally stop building sqlite3 from scratch in `script/bootstrap`. This library builds properly with `apm install`. 🎉

We might want to change the DatabaseStore and DatabaseTransaction classes more, now that it’s possible to execute queries synchronously. It could make things cleaner and get us out of promise-hell in a few places. In this diff I tried to change as little as possible.

Test Plan: Run tests, everything still works

Reviewers: juan, jackie

Reviewed By: juan, jackie

Differential Revision: https://phab.nylas.com/D3315

Fixing broken screenshot link (#2911)

Replacing with new screenshot

fix(onboarding): Fire event when user selects account type

bump(sqlite3): Fix issue with CI build / bindings location

fix(reporter): Handle errors cleaning log files (Sentry #6887)

Switch spellcheck libaries

Summary:
Switch to electron-spellchecker, which will allow N1 to
spellcheck more intelligently across languages. It auto-
detects languages and downloads dictionaries on the fly.

Test Plan: Specs, manual testing

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3319

Update Windows.md

fix(jquery): remove jquery

fix(spec): remove unused spec helpers

fix(specs) convert nylas-protocol-handler-spec to ES6 (#2886)

fix(win32): Still need custom sqlite3 build cmd for win32 😥

This also includes a bump of the better-sqlite3 module to support compilation on ia32.

feat(popout-threads) Add functionality to open threads in popout windows

Summary:
Threads can now be opened in separate windows. This can be done via the popout
icon next to the print icon, or by double-clicking the thread when in double-
pane mode. Note that the single-click action is still fired, which is why
double-clicking does not work in single-pane mode. The popout icon changes to a
pop-in icon while in the popout window, to allow users to collapse it back into
the main window.

Test Plan: Tested locally

Reviewers: evan, juan

Reviewed By: juan

Subscribers: sdw

Differential Revision: https://phab.nylas.com/D3332

fix(analytics): Add pgp encryption events

Email Encrypted
Email Encryption Errored
Email Decrypted
Email Decryption Errored

feat(win32): Allow N1 to become the system-wide mailto: handler

Summary: This will address the longstanding concern in #417

Test Plan: No new tests

Reviewers: juan, evan

Reviewed By: juan, evan

Maniphest Tasks: T7065

Differential Revision: https://phab.nylas.com/D3322

bump(version): 0.4.57

 (0.4.58 was accidentally in prev commit)

fix(readme): Improve Win32 build instructions

fix(readme): More Win32-specific instructions

fix(spellchecker): Use cross-platform misspellings, fix lint error

feat(calendar): can pick which calendars you want displayed

Summary:
Adds a resizable column next to the calendar that lets you pick which
calendars you want to turn on and off.

The picker sidebar styling mimics that of the main account sidebar.

Calendars are grouped by account.

We store the disabled calendars in in your config.

I added a `notIn` SQL method so it'll perform `WHERE calendarId NOT IN
['a', 'b', ...]` instead of `NOT (WHERE calendarId IN ['a', 'b', 'c'])`

I wanted it to be an exclusion (instead of inclusion) list so the default
was ""all on"" and we didn't need to always fetch the full list of
calendarIds from the database to compare against.

This also fixed a test that was failing constantly: The Query Subscription
Pool Spec was not being properly reset on each test. As a result, the test
would fail with an instance of a query subscription that Jasmine would
attempt to pretty print. Jasmine would fail to pretty print it because of
a jasmine bug that fails to properly display Objects with null prototypes.
The DatabaseStore's EventEmitter has a property with a null prototyp
causing the error

Test Plan: manual

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3336

fix(linter)

Merge submodule with master

Bump submodule

Bump database version and submodule

fix(contact): add hasSameDomainAsMe method to Contact

Better email syncing with Salesforce

feat(dock): Automatically add N1 to the OS X dock upon install

Note - you need to `killall Dock` to see this after it happens

Add main window calendar package

Summary: Add tiny helper app for calendar goodness

Test Plan: No tests yet

Reviewers: juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3346

cleanup(*): Remove dead .bowerrc, .gitignore files

es6(db): Convert the ORM specs to ES2016

bump(Electron): 1.4.3

fix(license): Swap ref to GPLv3 with the whole thing so GitHub picks it up

Clean up spec-bootstrap and jasmine-helper

Convert spec-suite to es6

Extract out jasmine reporters

Move global imports back to jasmine-helper

Extract to N1SpecRunner

Fold jasmine-helper into spec runner

Convert `spec-suite` to `n1-spec-loader`

Convert spec-helper to es6

Remove unused methods from spec-helper

Move waitsForPromise to jasmine-extensions

Move spec runner & deps into `n1-spec-runner` folder

Remove unused spec-helper-platform

Move specs into subfolders

Initial extraction of all methods out of of spec-helper

Fixes to spec-helper extraction

fix(spec):

Dramatically clean up and simply the spec bootup process.

Converting spec bootup system to es6 from coffee.

Converted old `jasmine-helper`, `spec-helper`, and `spec-suite` to a new
`n1-spec-runner` file.

Each of these old files had tons and tons of code related to various parts
of the spec bootup and running process.

Each of those parts have been extracted into individual files

Fix linter

Add icons to object types in picker

Remove opp references in popover

bump submodule

fix(spellchecker) Add a cache to improve performance

fix(notifs): Don’t render empty <img />

lint(*): Bump to ESLint 3.8

Update linter

bump submodule

bump submodule

bump submodule

bump submodule

bumpd submodule

Add sync thread toggles

Search focused contact by email

fix(mailto): Support body with \n or \r characters

Related to #2923

fix(thread-popout) Add missing packages to the 'thread-popout' window

Summary: Missed some non-composer packages that should be in the 'thread-popout' window

Test Plan: Tested locally

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3352

fix(mailto): Missing return in URL handling

fix(beta): Add notif when on beta channel

fix(db): Return; preventing ThreadSearch indexing

bump(version): 0.4.58

fix(specs): Don’t run update channel check in specs

fix(search): React warns, convert to ES2016

fix(search): Missed a .default

fix(spellcheck): Don’t include cld sources in build

fix(tooltips): Prevent tooltips from breaking wrapped components

fix(overlaid): Preview button was just invisible?

fix(auth): Hide title when long acct. err present

fix(onboarding): Don’t display “Welcome Back” screen

fix(accounts): Return correct list of email addresses

bump submodule

fix(misc) React warnings, kill cjsx

fix(accounts): Return correct list of email addresses

:lipstick:(thread-window): Update pop-out icons

lint(react): InlineImages don’t get session at send-time

fix(mail-merge): Upload files per draft to fix inline images

fix(mail-rules): Allow recipient filters to contain names #2942

bump(version): 0.4.59

:lipstick:(thread-window): Add thread-popin icon

update(changelog): 0.4.59

fix(search): Use fts search index for typeahead results

Summary: This improves performance of the search typeahead

Test Plan: Manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3363

fix(popover): :hocho: deprecated popover

fix(popover) Actually :hocho: deprecated popover

feat(flow): Add Flow to Nylas N1

Add flow-typed annotations

Ignore annoying submodules

Add /* @flow */ header to all js & es6 source files

Fix error about having number keys for objects

Remove @flow config from compile-support

Check es6 files

Add jasmine to flow

Revert ""Add /* @flow */ header to all js & es6 source files""

This reverts commit c5a57bc402c53633b407b557f28ad12eaa8f27fe.

Update submodule

Add nylas global interface file

Fix generated form and bump

Fixes to generated form

Use customComponent in task

fix(warning): Don't render participant picker with null value

fix(thread-popout): Display the hidden message toggle in the thread-popout

Summary:
Also, maintain the perspective that the thread was opened in, so that the
proper messages are hidden (e.g. hide deleted messages when opened from the
inbox, but not when opened from the trash folder)

Test Plan: Tested locally

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3366

rm(grim): We’re not using Grim for deprecations

feat(quick-replies): Reply from Mac notifications

use single regex exec for toEquivalentEmailForm (#2962)

Fix JSON spacing (#2958)

Match JSON style to rest of file

Fix issue #2758. Press Escape after a finished search to get back to … (#2939)

* Fix issue #2758. Press Escape after a finished search to get back to Inbox

Use a keydown event when search bar is in focus to capture escape key press

* fix(search): Convert to ES2016

:art:(notifications): Remove indent and left padding from notifications

Revert ""Fix issue #2758. Press Escape after a finished search to get back to … (#2939)""

This reverts commit 091f768e6670347136c1044fff96ff28ae12c81d.
This was already fixed in https://github.com/nylas/N1/commit/ebb8b45809911601b7b14f4201fdb46c380af1c8

fix(utils): Don’t overwrite _ in global scope

feat(tokens): Multi-select for tokenized text fields

Test Plan: Lots of tests, mostly updated to enzyme. Not many new ones.

Reviewers: evan, juan, jackie

Reviewed By: juan, jackie

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3374

fix(tokenizing-text): Re-add shouldBreakOnKeydown prop

build: bump eslint-plugin-import version

feat(field): Let TokenizingTextFields be disabled and onEditMotion"
emorikawa,2016-10-26 22:58:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/183c547ccf10c559935840ddf7be9d01f0a37025,183c547ccf10c559935840ddf7be9d01f0a37025,feat(field): Let TokenizingTextFields be disabled and onEditMotion
jstejada,2016-10-26 21:29:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/bffac1b20374284455e4d2327e595cb3c14b3a37,bffac1b20374284455e4d2327e595cb3c14b3a37,build: bump eslint-plugin-import version
bengotow,2016-10-26 21:25:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e66e8684a43189acad520653d6c693421d1498e,3e66e8684a43189acad520653d6c693421d1498e,fix(tokenizing-text): Re-add shouldBreakOnKeydown prop
bengotow,2016-10-26 20:39:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/01fc435a4af3d8bec9845875416cccfc3ce521af,01fc435a4af3d8bec9845875416cccfc3ce521af,"feat(tokens): Multi-select for tokenized text fields

Test Plan: Lots of tests, mostly updated to enzyme. Not many new ones.

Reviewers: evan, juan, jackie

Reviewed By: juan, jackie

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3374"
bengotow,2016-10-26 20:44:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdc5f635a343dd6682677c4464b4001b692490ac,cdc5f635a343dd6682677c4464b4001b692490ac,fix(utils): Don’t overwrite _ in global scope
jstejada,2016-10-26 20:20:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/acd0980c64ca2fd31df6d9bcb7b9048812b22f5a,acd0980c64ca2fd31df6d9bcb7b9048812b22f5a,"Revert ""Fix issue #2758. Press Escape after a finished search to get back to … (#2939)""

This reverts commit 091f768e6670347136c1044fff96ff28ae12c81d.
This was already fixed in https://github.com/nylas/N1/commit/ebb8b45809911601b7b14f4201fdb46c380af1c8"
jackiehluo,2016-10-26 19:19:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/64585aceb478c86c9a1b086046fcd8ddb03f2ef5,64585aceb478c86c9a1b086046fcd8ddb03f2ef5,:art:(notifications): Remove indent and left padding from notifications
yishus,2016-10-26 18:57:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/091f768e6670347136c1044fff96ff28ae12c81d,091f768e6670347136c1044fff96ff28ae12c81d,"Fix issue #2758. Press Escape after a finished search to get back to … (#2939)

* Fix issue #2758. Press Escape after a finished search to get back to Inbox

Use a keydown event when search bar is in focus to capture escape key press

* fix(search): Convert to ES2016"
xasos,2016-10-26 18:54:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/77d5c62f589514abe83cd068a400b245b035b646,77d5c62f589514abe83cd068a400b245b035b646,"Fix JSON spacing (#2958)

Match JSON style to rest of file"
koenpunt,2016-10-26 18:52:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b82a1c33d0f628fad55a02b9350a723d1886ce3,6b82a1c33d0f628fad55a02b9350a723d1886ce3,use single regex exec for toEquivalentEmailForm (#2962)
jackiehluo,2016-10-25 21:08:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/16a715937c25bc86e8fbf4a207df077c491e07a4,16a715937c25bc86e8fbf4a207df077c491e07a4,Merge branch 'master' of github.com:nylas/N1
jackiehluo,2016-10-25 21:08:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/921c5f970a6374f002e000499bf9f50233a7093d,921c5f970a6374f002e000499bf9f50233a7093d,fix(warning): Don't render participant picker with null value
bengotow,2016-10-25 18:36:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec3df7a0bc74ff6b967b8889fe7259ca83f15bd3,ec3df7a0bc74ff6b967b8889fe7259ca83f15bd3,feat(quick-replies): Reply from Mac notifications
bengotow,2016-10-25 18:35:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab4ef6de01658fa81ffa2418cc462184affbfc2a,ab4ef6de01658fa81ffa2418cc462184affbfc2a,rm(grim): We’re not using Grim for deprecations
hallamoore,2016-10-24 23:20:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/2661772d66c5fb62caf2ff435b80c728d5a22f53,2661772d66c5fb62caf2ff435b80c728d5a22f53,"fix(thread-popout): Display the hidden message toggle in the thread-popout

Summary:
Also, maintain the perspective that the thread was opened in, so that the
proper messages are hidden (e.g. hide deleted messages when opened from the
inbox, but not when opened from the trash folder)

Test Plan: Tested locally

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3366"
emorikawa,2016-10-18 18:06:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/a53092b2035de6932adf4b23a6b5be985c44826d,a53092b2035de6932adf4b23a6b5be985c44826d,"feat(flow): Add Flow to Nylas N1

Add flow-typed annotations

Ignore annoying submodules

Add /* @flow */ header to all js & es6 source files

Fix error about having number keys for objects

Remove @flow config from compile-support

Check es6 files

Add jasmine to flow

Revert ""Add /* @flow */ header to all js & es6 source files""

This reverts commit c5a57bc402c53633b407b557f28ad12eaa8f27fe.

Update submodule

Add nylas global interface file"
jstejada,2016-10-24 23:52:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/79246215d8707743d1e94b6a0a72da364c7da854,79246215d8707743d1e94b6a0a72da364c7da854,fix(popover) Actually :hocho: deprecated popover
jstejada,2016-10-24 23:33:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/53062830c9a8bde1d3c44379cf2a5008df5440a3,53062830c9a8bde1d3c44379cf2a5008df5440a3,fix(popover): :hocho: deprecated popover
jstejada,2016-10-24 21:18:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebb8b45809911601b7b14f4201fdb46c380af1c8,ebb8b45809911601b7b14f4201fdb46c380af1c8,"fix(search): Use fts search index for typeahead results

Summary: This improves performance of the search typeahead

Test Plan: Manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3363"
jstejada,2016-10-24 21:13:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/07f357fc0de2f92ae5a4746c9ac89d237ca9c3d8,07f357fc0de2f92ae5a4746c9ac89d237ca9c3d8,update(changelog): 0.4.59
jstejada,2016-10-24 20:45:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ac7cea38a8947bf7b139b6a6f8709b0265f6643,4ac7cea38a8947bf7b139b6a6f8709b0265f6643,:lipstick:(thread-window): Add thread-popin icon
bengotow,2016-10-24 20:21:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/76845f421232fc5bd1cd25db599e9c2ffe4006f8,76845f421232fc5bd1cd25db599e9c2ffe4006f8,bump(version): 0.4.59
bengotow,2016-10-24 20:17:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2e3262c33bb3d9141b25657753c3fa78f854ede,c2e3262c33bb3d9141b25657753c3fa78f854ede,fix(mail-rules): Allow recipient filters to contain names #2942
bengotow,2016-10-24 19:32:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ebb225ba9a9778f7309ac320bbc3f5588e3b765,1ebb225ba9a9778f7309ac320bbc3f5588e3b765,fix(mail-merge): Upload files per draft to fix inline images
bengotow,2016-10-21 00:47:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e72b19ed93b67259740a2157b56ff120b778532,1e72b19ed93b67259740a2157b56ff120b778532,lint(react): InlineImages don’t get session at send-time
jstejada,2016-10-24 19:02:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/60ec6f1138c7af17f9fa16b642607030ce46d228,60ec6f1138c7af17f9fa16b642607030ce46d228,:lipstick:(thread-window): Update pop-out icons
jackiehluo,2016-10-24 17:10:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/69cc2b895316bae3de0ecb20fe239bc63de73ef3,69cc2b895316bae3de0ecb20fe239bc63de73ef3,fix(accounts): Return correct list of email addresses
bengotow,2016-10-20 23:34:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5ff3cfc6216b0c5eb9fbbdec504992bb4cbb7c7,a5ff3cfc6216b0c5eb9fbbdec504992bb4cbb7c7,fix(onboarding): Don’t display “Welcome Back” screen
bengotow,2016-10-20 23:26:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec67dfb8bf81ab9d1b254aeb862c904d86eb79c8,ec67dfb8bf81ab9d1b254aeb862c904d86eb79c8,fix(auth): Hide title when long acct. err present
bengotow,2016-10-20 23:10:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a377608b74771644189b5616bfbd18c6da413d6,1a377608b74771644189b5616bfbd18c6da413d6,fix(overlaid): Preview button was just invisible?
bengotow,2016-10-20 23:09:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef4523a8d1edf462f4c3d2131e7ff56476a58ff0,ef4523a8d1edf462f4c3d2131e7ff56476a58ff0,fix(tooltips): Prevent tooltips from breaking wrapped components
bengotow,2016-10-20 20:45:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/181fa4e35889be6d228f596d0e6de35e5fd46718,181fa4e35889be6d228f596d0e6de35e5fd46718,fix(spellcheck): Don’t include cld sources in build
bengotow,2016-10-20 19:21:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d98f88089c89c586c5930962c0c8d9ca65a9b9d,7d98f88089c89c586c5930962c0c8d9ca65a9b9d,fix(search): Missed a .default
bengotow,2016-10-20 19:09:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae341a20a37b8cf9895980384d9f518269460947,ae341a20a37b8cf9895980384d9f518269460947,"fix(search): React warns, convert to ES2016"
bengotow,2016-10-20 17:24:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/04bd4ee4c16907bf4b5cbd5935aeb045d77b0c0b,04bd4ee4c16907bf4b5cbd5935aeb045d77b0c0b,fix(specs): Don’t run update channel check in specs
bengotow,2016-10-20 17:21:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7d6fbc4eebee15fcc32e1a533ac093a24c3a53f,d7d6fbc4eebee15fcc32e1a533ac093a24c3a53f,bump(version): 0.4.58
bengotow,2016-10-19 23:54:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/e40391117f59854bb93ae9230db352f6be73ca01,e40391117f59854bb93ae9230db352f6be73ca01,fix(db): Return; preventing ThreadSearch indexing
bengotow,2016-10-18 19:39:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff8d21d8c21e51082aaf430a1c20c13b7f8e6437,ff8d21d8c21e51082aaf430a1c20c13b7f8e6437,fix(beta): Add notif when on beta channel
bengotow,2016-10-18 18:46:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/217c289a36aafe1cae3e2869f832d8100b1c2520,217c289a36aafe1cae3e2869f832d8100b1c2520,fix(mailto): Missing return in URL handling
hallamoore,2016-10-18 17:49:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/752c9ede58f28ebc023c2bb9a3a020e98c293055,752c9ede58f28ebc023c2bb9a3a020e98c293055,"fix(thread-popout) Add missing packages to the 'thread-popout' window

Summary: Missed some non-composer packages that should be in the 'thread-popout' window

Test Plan: Tested locally

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3352"
bengotow,2016-10-18 17:37:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/45964b8ae3dd85fd59fa96176a9beecfa36be0ca,45964b8ae3dd85fd59fa96176a9beecfa36be0ca,"fix(mailto): Support body with \n or \r characters

Related to #2923"
bengotow,2016-10-18 00:59:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/21c0b9ecf45e36e41787075b1b4bbce088dbaead,21c0b9ecf45e36e41787075b1b4bbce088dbaead,lint(*): Bump to ESLint 3.8
bengotow,2016-10-17 16:03:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/11247f6e8c1c7cb4cf7acb3b847a07ab21c6d4d6,11247f6e8c1c7cb4cf7acb3b847a07ab21c6d4d6,fix(notifs): Don’t render empty <img />
hallamoore,2016-10-17 20:39:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/1797938fff4e07947cded1e941028da43f6a6f35,1797938fff4e07947cded1e941028da43f6a6f35,fix(spellchecker) Add a cache to improve performance
emorikawa,2016-10-17 01:01:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5602fd418eab5580eba49b166f8252d5abaca24,d5602fd418eab5580eba49b166f8252d5abaca24,"fix(spec):

Dramatically clean up and simply the spec bootup process.

Converting spec bootup system to es6 from coffee.

Converted old `jasmine-helper`, `spec-helper`, and `spec-suite` to a new
`n1-spec-runner` file.

Each of these old files had tons and tons of code related to various parts
of the spec bootup and running process.

Each of those parts have been extracted into individual files"
emorikawa,2016-10-17 00:40:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/b57b7c435daea8e3f0944ccfa7b077b78730bc08,b57b7c435daea8e3f0944ccfa7b077b78730bc08,Fixes to spec-helper extraction
emorikawa,2016-10-16 23:36:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/15b56747477b21b836887c34191727634719cf4c,15b56747477b21b836887c34191727634719cf4c,Initial extraction of all methods out of of spec-helper
emorikawa,2016-10-16 22:16:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/2171a891164bf845357f33b1212b1978e030fd7b,2171a891164bf845357f33b1212b1978e030fd7b,Move specs into subfolders
emorikawa,2016-10-16 22:04:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3ba2917a756e2c5e809640e05deb4dc561dbcd7,f3ba2917a756e2c5e809640e05deb4dc561dbcd7,Remove unused spec-helper-platform
emorikawa,2016-10-16 22:01:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/3619c04bdbc73e188b5eeb89aba3f245d81875b8,3619c04bdbc73e188b5eeb89aba3f245d81875b8,Move spec runner & deps into `n1-spec-runner` folder
emorikawa,2016-10-16 21:53:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e55e774904ccf29d590a319ea1aac447c4aa5a8,0e55e774904ccf29d590a319ea1aac447c4aa5a8,Move waitsForPromise to jasmine-extensions
emorikawa,2016-10-16 21:41:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac5e055bdf4b7bec736eae66e5fc23f1f0392da3,ac5e055bdf4b7bec736eae66e5fc23f1f0392da3,Remove unused methods from spec-helper
emorikawa,2016-10-16 21:41:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/43d4daa657da8cb54a57946b92e0b16c4ef0bde5,43d4daa657da8cb54a57946b92e0b16c4ef0bde5,Convert spec-helper to es6
emorikawa,2016-10-16 20:29:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/2659bd0ab0c90b1cfa88573e3cc2ec3adb7a5c2f,2659bd0ab0c90b1cfa88573e3cc2ec3adb7a5c2f,Convert `spec-suite` to `n1-spec-loader`
emorikawa,2016-10-16 20:17:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9cbe97d111cd1bb3799dcb21d61944bd17d34369,9cbe97d111cd1bb3799dcb21d61944bd17d34369,Fold jasmine-helper into spec runner
emorikawa,2016-10-16 20:11:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/f420bb1c0996c53f88ed09f2f1a50c77cf193dba,f420bb1c0996c53f88ed09f2f1a50c77cf193dba,Extract to N1SpecRunner
emorikawa,2016-10-16 18:56:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba56cc411aa07d3a57ef93ec926c28d878886fdc,ba56cc411aa07d3a57ef93ec926c28d878886fdc,Move global imports back to jasmine-helper
emorikawa,2016-10-14 20:33:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/adced60ad23cd89fb0a7a4a91c16609dcc3246a6,adced60ad23cd89fb0a7a4a91c16609dcc3246a6,Extract out jasmine reporters
emorikawa,2016-10-14 19:58:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3243a53afa6ff0c0e58b63b87bf88a856d49c20,b3243a53afa6ff0c0e58b63b87bf88a856d49c20,Convert spec-suite to es6
emorikawa,2016-10-14 12:40:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/df9219cfe091500f21b8ceedcdf2e4602a36338c,df9219cfe091500f21b8ceedcdf2e4602a36338c,Clean up spec-bootstrap and jasmine-helper
bengotow,2016-10-15 17:48:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3317b65d44660d1927eebac1f4684643d736c06,b3317b65d44660d1927eebac1f4684643d736c06,fix(license): Swap ref to GPLv3 with the whole thing so GitHub picks it up
bengotow,2016-10-14 20:11:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/2902a3b264a1e4cd6c1a1e2e2c82290d16d4ec2a,2902a3b264a1e4cd6c1a1e2e2c82290d16d4ec2a,bump(Electron): 1.4.3
bengotow,2016-10-14 19:06:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/28d636b7fc6a716202816699bce83ec94f1bd8f8,28d636b7fc6a716202816699bce83ec94f1bd8f8,es6(db): Convert the ORM specs to ES2016
bengotow,2016-10-14 18:39:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/c388f55ccb12e265ec2f011531d9b925212c629f,c388f55ccb12e265ec2f011531d9b925212c629f,"cleanup(*): Remove dead .bowerrc, .gitignore files"
bengotow,2016-10-14 00:18:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/4178e6725cf57c0e5648b7588b8b4abcff0db36e,4178e6725cf57c0e5648b7588b8b4abcff0db36e,"Add main window calendar package

Summary: Add tiny helper app for calendar goodness

Test Plan: No tests yet

Reviewers: juan, halla

Reviewed By: halla

Differential Revision: https://phab.nylas.com/D3346"
bengotow,2016-10-13 22:01:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0aad93c4eca056a3f7f129e4cef764b922b1b4b,c0aad93c4eca056a3f7f129e4cef764b922b1b4b,"feat(dock): Automatically add N1 to the OS X dock upon install

Note - you need to `killall Dock` to see this after it happens"
emorikawa,2016-10-13 20:31:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bb264596443be3df0fd7793a0cd758f5fb6c85a,5bb264596443be3df0fd7793a0cd758f5fb6c85a,fix(contact): add hasSameDomainAsMe method to Contact
emorikawa,2016-10-13 16:41:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/57fbc0b9a1da1b10f7e0fac057151ab4ee745190,57fbc0b9a1da1b10f7e0fac057151ab4ee745190,fix(linter)
emorikawa,2016-10-13 15:37:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/405f28152baacfdf459433db7644fd2d2ad8f5c4,405f28152baacfdf459433db7644fd2d2ad8f5c4,"feat(calendar): can pick which calendars you want displayed

Summary:
Adds a resizable column next to the calendar that lets you pick which
calendars you want to turn on and off.

The picker sidebar styling mimics that of the main account sidebar.

Calendars are grouped by account.

We store the disabled calendars in in your config.

I added a `notIn` SQL method so it'll perform `WHERE calendarId NOT IN
['a', 'b', ...]` instead of `NOT (WHERE calendarId IN ['a', 'b', 'c'])`

I wanted it to be an exclusion (instead of inclusion) list so the default
was ""all on"" and we didn't need to always fetch the full list of
calendarIds from the database to compare against.

This also fixed a test that was failing constantly: The Query Subscription
Pool Spec was not being properly reset on each test. As a result, the test
would fail with an instance of a query subscription that Jasmine would
attempt to pretty print. Jasmine would fail to pretty print it because of
a jasmine bug that fails to properly display Objects with null prototypes.
The DatabaseStore's EventEmitter has a property with a null prototyp
causing the error

Test Plan: manual

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3336"
hallamoore,2016-10-13 00:06:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b63e343ae50065c3f7ead303269439b45f3f466,2b63e343ae50065c3f7ead303269439b45f3f466,"fix(spellchecker): Use cross-platform misspellings, fix lint error"
bengotow,2016-10-12 23:37:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc84d9af55c78afcc05b36da5d21a8cc996593fd,dc84d9af55c78afcc05b36da5d21a8cc996593fd,fix(readme): More Win32-specific instructions
bengotow,2016-10-12 23:30:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/180b032277385ac7bde64751a147cffc21b4b923,180b032277385ac7bde64751a147cffc21b4b923,fix(readme): Improve Win32 build instructions
bengotow,2016-10-12 23:06:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/e74217be3c3116b4f8b5c46ece4e96ea820eea74,e74217be3c3116b4f8b5c46ece4e96ea820eea74,"bump(version): 0.4.57

 (0.4.58 was accidentally in prev commit)"
bengotow,2016-10-12 23:05:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0888c5cdd0432e8496ac5b33daa0506bb89deb6d,0888c5cdd0432e8496ac5b33daa0506bb89deb6d,"feat(win32): Allow N1 to become the system-wide mailto: handler

Summary: This will address the longstanding concern in #417

Test Plan: No new tests

Reviewers: juan, evan

Reviewed By: juan, evan

Maniphest Tasks: T7065

Differential Revision: https://phab.nylas.com/D3322"
emorikawa,2016-10-12 21:28:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/038c2bb11fcb79434081955c2c073a620fe56861,038c2bb11fcb79434081955c2c073a620fe56861,"fix(analytics): Add pgp encryption events

Email Encrypted
Email Encryption Errored
Email Decrypted
Email Decryption Errored"
hallamoore,2016-10-12 20:55:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/267555a6db6f88c7c29bd0cd91f6f0d3af7a91f5,267555a6db6f88c7c29bd0cd91f6f0d3af7a91f5,"feat(popout-threads) Add functionality to open threads in popout windows

Summary:
Threads can now be opened in separate windows. This can be done via the popout
icon next to the print icon, or by double-clicking the thread when in double-
pane mode. Note that the single-click action is still fired, which is why
double-clicking does not work in single-pane mode. The popout icon changes to a
pop-in icon while in the popout window, to allow users to collapse it back into
the main window.

Test Plan: Tested locally

Reviewers: evan, juan

Reviewed By: juan

Subscribers: sdw

Differential Revision: https://phab.nylas.com/D3332"
bengotow,2016-10-12 19:30:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/c598e31f1e7dffa51b2ba07bf27a20dedc3f07bc,c598e31f1e7dffa51b2ba07bf27a20dedc3f07bc,"fix(win32): Still need custom sqlite3 build cmd for win32 😥

This also includes a bump of the better-sqlite3 module to support compilation on ia32."
jonboiser,2016-10-12 18:38:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/2eab187da03b9da146f0531c65e7bfb9deb680f4,2eab187da03b9da146f0531c65e7bfb9deb680f4,fix(specs) convert nylas-protocol-handler-spec to ES6 (#2886)
emorikawa,2016-10-12 15:04:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/78b22b1e634458f299715b47fd67241a07f5bf1d,78b22b1e634458f299715b47fd67241a07f5bf1d,fix(spec): remove unused spec helpers
emorikawa,2016-10-12 15:01:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/61ac77e029c6f51098c0ddb8bb207251519dc606,61ac77e029c6f51098c0ddb8bb207251519dc606,fix(jquery): remove jquery
bengotow,2016-10-12 01:35:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/124edf25bab52ac52b45a034c96a90692bc680ac,124edf25bab52ac52b45a034c96a90692bc680ac,Update Windows.md
hallamoore,2016-10-07 00:11:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/16191266880eae5dc43547de51c3459670ad2653,16191266880eae5dc43547de51c3459670ad2653,"Switch spellcheck libaries

Summary:
Switch to electron-spellchecker, which will allow N1 to
spellcheck more intelligently across languages. It auto-
detects languages and downloads dictionaries on the fly.

Test Plan: Specs, manual testing

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3319"
bengotow,2016-10-11 07:44:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/e10e51ab5d2029cd260ed9c8c5e8e33d74a39e05,e10e51ab5d2029cd260ed9c8c5e8e33d74a39e05,A few changes to support linking to K2 via the new GUI
bengotow,2016-10-10 20:44:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/739ca2b053319411e8fa78777cf3ee186ba6d80b,739ca2b053319411e8fa78777cf3ee186ba6d80b,fix(reporter): Handle errors cleaning log files (Sentry #6887)
bengotow,2016-10-08 00:59:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c5efaf55ec5fa180f3097c509e4915ea9724400,3c5efaf55ec5fa180f3097c509e4915ea9724400,bump(sqlite3): Fix issue with CI build / bindings location
bengotow,2016-10-07 17:16:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5ff2f640b728fc2d23bec0cdeb6ebb094aaa7be,c5ff2f640b728fc2d23bec0cdeb6ebb094aaa7be,fix(onboarding): Fire event when user selects account type
LukeSchlangen,2016-10-07 01:48:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8865eb2a2a8754487990f42ed0ec7c08d83ece3,a8865eb2a2a8754487990f42ed0ec7c08d83ece3,"Fixing broken screenshot link (#2911)

Replacing with new screenshot"
bengotow,2016-10-07 00:01:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/0eef80e5d46372b36aff8e6af191b9689fc166fc,0eef80e5d46372b36aff8e6af191b9689fc166fc,"fix(db): Switch to better-sqlite3, resolves offline issue

Summary:
Better-SQLite3 is a fork of node-sqlite3 which includes a re-written JavaScript interface. It’s more synchronous, but better reflects what is actually sync vs. async in sqlite’s C++ API. (Not much is really async under the hood.) This diff uses a branch of better-sqlite3 I’ve edited to support Node 6.

In my tests, this branch spends 3.24x less time executing queries than `master`. (Measured time spent in calls to `this._db[run|all|get]` over the first 5000 queries of initial sync. It also increased the performance of starring a thread in the thread list by 28%.

This library also allows us to use a prepared statement cache, which is great because we often make the same queries repeatedly as query subscriptions refresh the UI and deltas are dumped into the app. The old interface didn’t expose statements (cached query plans) to JS.

better-sqlite3 advertises that it uses the JS garbage collector instead of lower level C++ memory management. I tested syncing my entire mailbox to verify that memory usage is not significantly different on this branch after a lot of queries have been made.

Finally, it looks like we can finally stop building sqlite3 from scratch in `script/bootstrap`. This library builds properly with `apm install`. 🎉

We might want to change the DatabaseStore and DatabaseTransaction classes more, now that it’s possible to execute queries synchronously. It could make things cleaner and get us out of promise-hell in a few places. In this diff I tried to change as little as possible.

Test Plan: Run tests, everything still works

Reviewers: juan, jackie

Reviewed By: juan, jackie

Differential Revision: https://phab.nylas.com/D3315"
emorikawa,2016-10-06 17:53:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2c1ac3289ee31b11bbf8ea2e65c24a61c1133a7,f2c1ac3289ee31b11bbf8ea2e65c24a61c1133a7,refator(notification): move base notification to nylas-component-kit
bengotow,2016-10-04 21:15:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/0bb26bce7950a6967ae8fb48f55f572b50e0b76b,0bb26bce7950a6967ae8fb48f55f572b50e0b76b,"fix(perspectives): Restore when only account cannot be found (Sentry 59061)

https://sentry.nylas.com/sentry/edgehill/group/59061/"
bengotow,2016-10-04 20:59:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/a232f6fc17b6c29c7f04bd7e08c5e5276e11d894,a232f6fc17b6c29c7f04bd7e08c5e5276e11d894,"fix(templates): Handle error when scanning dir (Sentry 44351)

https://sentry.nylas.com/sentry/edgehill/group/44351/"
bengotow,2016-10-04 20:35:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a3efdd6f7e74ce16d2c3d9626b49e2408cedf81,8a3efdd6f7e74ce16d2c3d9626b49e2408cedf81,"fix(phising): Handle scenarios where input is malformed (Sentry 51642)

https://sentry.nylas.com/sentry/edgehill/group/51642/"
jstejada,2016-10-04 19:06:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaca39f9c783a4f79faa886ecc1baebcd7ab85d9,aaca39f9c783a4f79faa886ecc1baebcd7ab85d9,fix(lint)
jstejada,2016-10-04 16:53:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1c6a9996fb1ccbcd597dadd37cc281788154066,b1c6a9996fb1ccbcd597dadd37cc281788154066,bump(submodule)
hallamoore,2016-10-04 15:02:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/dcb84db3e378713ceb6a312c1fa3725a70825d2e,dcb84db3e378713ceb6a312c1fa3725a70825d2e,"feat(sidebar-notifs) Create sidebar notifications to replace old bars

Summary:
Move the old bar notifications to the sidebar, and only display one notification
at a time using a priority-rating system. Remove all of the old notification
infrastructure.

Test Plan: Added specs, also reproduced notifications locally

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3310"
bengotow,2016-10-03 18:22:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/dda7c50adf2605b0306d573adabbaf9b7a7b2664,dda7c50adf2605b0306d573adabbaf9b7a7b2664,"fix(files): When download mode is “manual” prompt about inline attachments

Summary:
When you have your ""Download attachments for new mail"" setting set
to ""manually"", inline images always appear broken with no explanation.

This patch listens for the image load to fail and displays a button which
queues the fetchFile task on click. This seemed like the best approach because
it doesn't slow down the loading of the message with more fstats / lookups.
(Seeing if the file has already been downloaded is an async operation)

Test Plan: No specs atm

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3313"
jstejada,2016-10-02 17:56:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1dddd1541cccf47f488529fe43712e29649c0d2,b1dddd1541cccf47f488529fe43712e29649c0d2,"fix(tools): Make `arc lint` great again

Add proper arc config for linting ES6 files with eslint"
jstejada,2016-10-02 17:48:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/dafffa87d5ae21968866c4eb5993d360e1279f64,dafffa87d5ae21968866c4eb5993d360e1279f64,:hocho: Last remaining traces of coffeescript in submodule!
emorikawa,2016-10-01 01:16:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/8fd6fe27ca4f519767ba78d0bb43cce075fd71ce,8fd6fe27ca4f519767ba78d0bb43cce075fd71ce,fix(composer): tokenizing text field trigger logic moved to composer
emorikawa,2016-10-01 00:47:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7c2703683163742db80fd8a189a7ed36fa22bff,f7c2703683163742db80fd8a189a7ed36fa22bff,fix(composer): fix margin when editing contact chip
emorikawa,2016-10-01 00:35:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ea9d110cbf1df3f0dccca84b04d77c503e274e5,5ea9d110cbf1df3f0dccca84b04d77c503e274e5,"fix(composer): can shift-tab more places

Allow shift-tab to go back to subject from anywhere except in front of a
tab character"
emorikawa,2016-10-01 00:15:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/376158c9b92348a9161c9edcdcad1c7d9c5a5c37,376158c9b92348a9161c9edcdcad1c7d9c5a5c37,"fix(composer): enable click regions on margins of composer

Change padding, margins, and borders to allow you to click on the left
margin of to, cc, bcc, from, subject fields as well as the composer
margins both above, left, and to the right of the composer.

Ensured attachments and other assets show up in correct spots

Ensure subject looks correct for mail merge"
jstejada,2016-10-01 07:25:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/a47eb507054a9d465693bb5441f38acc94e6c111,a47eb507054a9d465693bb5441f38acc94e6c111,fix(specs): Activity List
jstejada,2016-10-01 07:08:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1396c877ad63da9f2d1f1566caf38346a780bbc,c1396c877ad63da9f2d1f1566caf38346a780bbc,"fix+:art:(notifs): Cleanup, handle nonexistent thread when opening notification

Notifications now check to see the thread they are supposed to open
exists.

Also, clean up FocusedContentStore._onFocus so that it doesn't have the side
effect of dispatching another action and messay logic.
Instead, added Actions.ensureCategoryFocused, to focus any category, and which
should be used separately from focusing content (notifications now use
this action for ""opening"" the thread)
Also, convert FocusedPerspectiveStore to ES6"
jstejada,2016-10-01 04:00:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/93281f859fe96c85d82eff5ebec1d80634255f32,93281f859fe96c85d82eff5ebec1d80634255f32,:lipstick:(outline-view): Add title attr for tooltips
bengotow,2016-09-30 22:24:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b8c41d057e51767b8af05e4bc38509d311dbb63,1b8c41d057e51767b8af05e4bc38509d311dbb63,es6(db): Move DatabaseStore to ES6
bengotow,2016-09-30 21:37:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2b9e221574daa5eede37d20b617214de69bf181,a2b9e221574daa5eede37d20b617214de69bf181,"fix(dev-mode): Don’t save to config.json, use flag instead

Turns out even the built, packaged version of the app can be restarted into dev mode by adding `—dev` to argv and using the new relaunch API."
jstejada,2016-09-30 20:48:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d7700edb70a86ce01c87aa86205b34798e9d0b6,7d7700edb70a86ce01c87aa86205b34798e9d0b6,fix(share-thread): Closed when blurred when blurred or new thread selected
jstejada,2016-09-30 18:46:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/7acc8dc995a292a3729b46d475544d526cf3a941,7acc8dc995a292a3729b46d475544d526cf3a941,fix(tutorial-tips): Recompute pos when theme changes
bengotow,2016-09-30 18:58:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e66cf9ef6d80e2aee3111ed1186bca39720d7e2,2e66cf9ef6d80e2aee3111ed1186bca39720d7e2,fix(specs): Minor spec fixes
bengotow,2016-09-30 18:53:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/31bf2e2ce75213639d8b98d4b3b21ea94ed26756,31bf2e2ce75213639d8b98d4b3b21ea94ed26756,"fix(spellcheck): Do not spellcheck <code>, <a>, <pre> tags

This fixes #2877. The templates feature becomes broken when variable names contain misspellings."
bengotow,2016-09-30 17:48:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/325ce1b12eab21b4710d6eec674cf6ec3c6a64de,325ce1b12eab21b4710d6eec674cf6ec3c6a64de,"fix(participants): When copying, include space #2871"
jstejada,2016-09-30 03:31:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/805e665b6eb868dc74879a3bcaf1bfc7bb93908b,805e665b6eb868dc74879a3bcaf1bfc7bb93908b,fix(tutorial-tips): Don't display when component is not visible
jstejada,2016-09-30 01:42:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/796e7e1a140041baa31ac5fa1467bc2b7d3f29cb,796e7e1a140041baa31ac5fa1467bc2b7d3f29cb,:lipstick:(share-thread): Fix positioning of share thread button
bengotow,2016-09-29 20:42:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/c222fa0c390a62b862f41b873b163389d254e499,c222fa0c390a62b862f41b873b163389d254e499,"fix(data-source): Wait until the next cycle to cleanup

Fixes a crash when switching to the thread list from the draft list, where there are very briefly zero observers."
bengotow,2016-09-29 19:24:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e9d1dff0770485b236c80c63775071e90836719,1e9d1dff0770485b236c80c63775071e90836719,"bump(verison): 0.4.56, more items in changelog"
hallamoore,2016-09-29 18:58:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/02eaf34c6cd87d0fa1f3e2d072fbbf262ed4ca12,02eaf34c6cd87d0fa1f3e2d072fbbf262ed4ca12,feat(self-hosting) Add onboarding page about self-hosting plugin restrictions
hallamoore,2016-09-29 18:01:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2b9b3070a088daef81c00b61a306bf28b33e1ae,c2b9b3070a088daef81c00b61a306bf28b33e1ae,fix(self-hosting) Don't load packages that don't support self-hosting
jstejada,2016-09-29 17:45:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e3332386ab6b6d9fb93240878a754126eb94bc9,4e3332386ab6b6d9fb93240878a754126eb94bc9,"fix(composer): When pasting links that are tracked, extract actual link"
bengotow,2016-09-29 18:25:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/7997e70a848803f2c006cf03ec31f069f247e416,7997e70a848803f2c006cf03ec31f069f247e416,feat(bios): Linkify twitter hashtags and mentions in bios
bengotow,2016-09-29 17:38:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/af278e07658d5a0ad23d6720f2adbe9c5f795855,af278e07658d5a0ad23d6720f2adbe9c5f795855,"rm(ship-logs): Remove unused log shipping, prevents many-processes bug on win32"
emorikawa,2016-09-29 15:04:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/787781b3a963065766b8537b531d70daaea1a399,787781b3a963065766b8537b531d70daaea1a399,fix(linter): fix linter error
emorikawa,2016-09-28 18:51:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec51730e2428e561c1885d6e072d2701396d395e,ec51730e2428e561c1885d6e072d2701396d395e,fix(spec): remove unnecessary messages & prevent extra hot window
bengotow,2016-09-29 00:39:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fad7a9ceb9fbbce22acccb3ae28ee5658dd71c3,6fad7a9ceb9fbbce22acccb3ae28ee5658dd71c3,fix(composer): Wrap composer instead of allowing overflow-x
bengotow,2016-09-29 00:39:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/3940a0abbde0cdda644532c5d621b93fbfae93d6,3940a0abbde0cdda644532c5d621b93fbfae93d6,"fix(window-state): Per electron#7278, save state in beforeunload

Related:
https://github.com/electron/electron/issues/7278
https://github.com/atom/atom/pull/3223/files

As of Chromium 36, unload is async and @zcbenz does not think it happens reliabily in Electron. Move saving of window state to beforeunload, following suit with Atom."
jstejada,2016-09-29 00:22:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/7391dd782bf9dfa93ce9ec8839931f6041cbfd7c,7391dd782bf9dfa93ce9ec8839931f6041cbfd7c,:art:(activity-list): punctuation
jstejada,2016-09-28 23:51:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/878dc293bc69d5079ffb17a1c147f34d65e03410,878dc293bc69d5079ffb17a1c147f34d65e03410,fix(dev): Pretty print deltas
jstejada,2016-09-28 23:02:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c871a8618db7e85aad12acac4b7ad04b96a3ec1,7c871a8618db7e85aad12acac4b7ad04b96a3ec1,fix(draft-list): Don't render html string in draft subject
jstejada,2016-09-28 22:58:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/302aca5a4e394fa31c9d67f5a84bff07270d7544,302aca5a4e394fa31c9d67f5a84bff07270d7544,fix(lint): Fix coffeelint errors
jstejada,2016-09-28 22:56:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3497956ba71a057d47a778739c0198b0e50a8c2,a3497956ba71a057d47a778739c0198b0e50a8c2,:art:(thread-sharing): Fix icon
jstejada,2016-09-28 22:02:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e1f8c9b539d0f8875fd8221062d8492bd56554f,4e1f8c9b539d0f8875fd8221062d8492bd56554f,fix(specs): Fix mail merge specs
bengotow,2016-09-28 21:46:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc15c3e243d18c5a6a05433731cf950923586c68,dc15c3e243d18c5a6a05433731cf950923586c68,"fix(perspectives): More robust validation of saved perspectives, never open to blank screen"
bengotow,2016-09-28 19:28:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/96ab35cb8e6ff2b0bda583e1445dfdcb10b8fe7e,96ab35cb8e6ff2b0bda583e1445dfdcb10b8fe7e,"fix(composer): Add additional isMounted checks

Resolves this exception: https://gist.github.com/jstejada/a26dc6a7a2896dcef9be3cec60eaecdb"
jstejada,2016-09-28 19:15:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e6b4a0c96d04dd0448296c1c9255c594fbe333d,0e6b4a0c96d04dd0448296c1c9255c594fbe333d,"fix(mail-merge): Reduce limit to 150 messages, improve error handling"
bengotow,2016-09-28 19:14:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/6815c36065f7e8d3feb9520c15bded9ec340ab70,6815c36065f7e8d3feb9520c15bded9ec340ab70,fix(calendar): CSS layout fix for Chromium 53
bengotow,2016-09-28 19:03:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b575d1fa973d7e413f66b2cb8a7ca9c9ebcbd9fc,b575d1fa973d7e413f66b2cb8a7ca9c9ebcbd9fc,fix(composer): Dedupe registered key bindings to avoid double undo in composer
bengotow,2016-09-28 18:42:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/9627ae9b0ce20fea7ab7f1c2c79ccdee873618ea,9627ae9b0ce20fea7ab7f1c2c79ccdee873618ea,fix(db): Messages with empty bodies always showing loading spinner due to ‘’ == null
bengotow,2016-09-28 18:29:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ddca404f55ab95ba1465e351ae6ed0eabb1ff7e,6ddca404f55ab95ba1465e351ae6ed0eabb1ff7e,"fix(identity): Always refresh accounts after identity

This fixes an issue where changing your Nylas ID didn’t refresh your accounts, and N1 would still think they were invalid."
bengotow,2016-09-28 18:08:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/306a5010fdcb7e0f7b6fd2998cda57b288ddbe13,306a5010fdcb7e0f7b6fd2998cda57b288ddbe13,fix(react): React refuses to add `partition` attr to webview
jstejada,2016-09-28 18:03:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab954521307d93418ff289fa9b0c337e41995f0a,ab954521307d93418ff289fa9b0c337e41995f0a,"fix(search): Update local search syntax to include more results

Add prefix search. Previously, if searching for a thread with a specific
subject, you had to type the entire subject. Searching for just a prefix
wouldn't return the result.
This should not affect any of the current search results, only add more results"
jackiehluo,2016-09-28 06:39:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f1b11a5de4c828ab2bd91ecac6a7dd749631640,9f1b11a5de4c828ab2bd91ecac6a7dd749631640,fix(lint): Change variable to const
bengotow,2016-09-28 00:45:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae306a94ab28a7ddda9ecbcf553c7fc45f577230,ae306a94ab28a7ddda9ecbcf553c7fc45f577230,fix(drafts): Sanitize quoted text to avoid overlaid component issues [!!]
bengotow,2016-09-27 23:31:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/9191a1cb6a83c2ea4a611e28586874321114e4c5,9191a1cb6a83c2ea4a611e28586874321114e4c5,"fix(thread-list): Use interaction handlers, don’t update selection directly"
jstejada,2016-09-27 22:05:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f51111d924b9e5ab79cd846aa8e7c562abb3e01c,f51111d924b9e5ab79cd846aa8e7c562abb3e01c,fix(warnings): Correctly remove all unknown props warnings
jstejada,2016-09-27 21:50:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/1647becce552342ee868d534bd6ba53ca2c2781c,1647becce552342ee868d534bd6ba53ca2c2781c,fix(overlaid-comps): Check if supports preview only after we know exists
bengotow,2016-09-27 22:01:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/29d6b972b1ea866e92c38d2558d9096ea7acead8,29d6b972b1ea866e92c38d2558d9096ea7acead8,fix(db): Add an index on Thread.client_id for modelify
bengotow,2016-09-27 21:40:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e9b32ed0500eebddfcca463c523e17667d3d866,1e9b32ed0500eebddfcca463c523e17667d3d866,"fix(composer): No need for overlaid z-index: 10, appearing over menus"
bengotow,2016-09-27 21:36:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea47381b52aed25fd647151fdb5c28576791f965,ea47381b52aed25fd647151fdb5c28576791f965,💄(mail-merge): Fix alignment and height of tokens
bengotow,2016-09-27 21:20:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/df499243f72050b56f8f4675b580ae4a97ce9f65,df499243f72050b56f8f4675b580ae4a97ce9f65,"fix(sidebar): Command-click + href to open in background

Global window event handler should work when clicking elements /inside/ of an a tag with an href."
bengotow,2016-09-27 21:19:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/41a4e3198a3584eaf741cc29701fc6c2daffd815,41a4e3198a3584eaf741cc29701fc6c2daffd815,💄(sidebar): Github repos should not wrap
jstejada,2016-09-27 21:22:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf2f156dcbc0453f648f46e451d97cee71e32cbc,bf2f156dcbc0453f648f46e451d97cee71e32cbc,"fix(mail-merge): Reduce max number of emails to 250

Almost always, you will get rate limited trying to send 500 emails.
Reduce to 250 to make it more reasonable"
jstejada,2016-09-27 21:11:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/42aa3e01cdddaa31716d4556d82c06de033ee2d7,42aa3e01cdddaa31716d4556d82c06de033ee2d7,fix(tasks): Report slow performLocal only when it takes > 500ms
jackiehluo,2016-09-27 17:35:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d0d38357f682d9c83ecdfec11b044e1fa59ba56,8d0d38357f682d9c83ecdfec11b044e1fa59ba56,fix(install-location): Update language and remove buggy regex
jstejada,2016-09-27 17:32:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb92ee3ad03b6b5f7c0433bd107b48b857bf4ca2,cb92ee3ad03b6b5f7c0433bd107b48b857bf4ca2,fix(whitespace)
jstejada,2016-09-27 16:52:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc76c3d9d1d6c9ff7ef139bb950a79c0e1729b24,bc76c3d9d1d6c9ff7ef139bb950a79c0e1729b24,update: Update CHANGELOG for v0.4.55
jstejada,2016-09-27 15:48:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/2627a88dae1b45f314bcdace3eb29a342ff97bad,2627a88dae1b45f314bcdace3eb29a342ff97bad,bump(version): 0.4.55
jstejada,2016-09-27 15:42:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b4209ed377784835befe19582072239e11d19ff,1b4209ed377784835befe19582072239e11d19ff,"fix(tasks): Add instrumentation to Task's performLocal

A slow performLocal may be one of the causes of #2725"
bengotow,2016-09-27 06:44:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/2af6eb7be3e5b264de4464c9c428c8414e9258e1,2af6eb7be3e5b264de4464c9c428c8414e9258e1,es6(db): DatabaseTransaction & Query moved to ES6
jstejada,2016-09-27 00:22:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/138afab00e8c245af8f1426517b727f7e3173223,138afab00e8c245af8f1426517b727f7e3173223,fix(specs): make sure stub resolves (bump submodule)
jstejada,2016-09-27 00:22:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/42854d9ccfc5191f05a948e3cef279a2eb292f53,42854d9ccfc5191f05a948e3cef279a2eb292f53,fix(lint)
emorikawa,2016-09-22 15:03:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/fabea8a504a5f8db66c17d2092aba4562aa954ee,fabea8a504a5f8db66c17d2092aba4562aa954ee,"Revert ""fix(task-queue): performLocal now operates serially""

This reverts commit 179d3fd78a4c817115d7013f6692834b4845d1db."
bengotow,2016-09-26 23:59:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/009365a155e329bda5cd979d23165525b2e37e6b,009365a155e329bda5cd979d23165525b2e37e6b,"feat(inline-images): Drag & drop or paste inline images

Summary: Initial support for inline images. Tests still forthcoming!

Test Plan: WIP

Reviewers: mark, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3295"
jstejada,2016-09-26 23:30:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/49ae0926410dee75982f3dc79dbb382a2226431b,49ae0926410dee75982f3dc79dbb382a2226431b,"fix(contact-sidebar): Correctly update selected contact

Sometimes, when selecting a contact (with name, email) inside a thread,
the dropdown (`<select>`) did not correctly reflect the selected
contact.

This was because when focusing a contact, the FocusedContactStore
queried that contact from the database just by email, and the contact
retured from the database became the focused one. However, sometimes the
returned contact might have the same email but different email, and
given that the `<select>` component is keyed by both name,email, it
couldn't find the appropriate <option> to render, so it could not update
to reflect the newly selected contact

Now, the FocusedContactStore queries by email and name to prevent this"
jstejada,2016-09-26 18:19:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/80e1c5b457248385f8c64d27162ef65c61e44783,80e1c5b457248385f8c64d27162ef65c61e44783,fix(mail-merge): Add test coverage
bengotow,2016-09-26 18:16:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/e40193f5646626d724647adc589e87af9226d10a,e40193f5646626d724647adc589e87af9226d10a,fix(help): Better help URL
emorikawa,2016-09-26 14:56:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a9949ec0a322e9c1252d5252a0094721254b03b,6a9949ec0a322e9c1252d5252a0094721254b03b,fix(mail-merge): fix `applyExtensionTransformsToDraft` rename
emorikawa,2016-09-25 20:26:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/eda3ba8359088dd3f9c861e7a37ecb287eaee092,eda3ba8359088dd3f9c861e7a37ecb287eaee092,fix(attribute): fix es6 conversion error
jstejada,2016-09-24 19:27:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/72809ca990d12655fb9e34658a819c995c82b72f,72809ca990d12655fb9e34658a819c995c82b72f,"fix(warnings): Fix warnings for react unkown dom prop

When using the pattern `{...extraProps}` to transfer props in the render method,
if rendering a native dom element, react will issue a new warning if we
end up passing invalid dom props:
https://facebook.github.io/react/warnings/unknown-prop.html

This adds a helper library to exclude invalid fom props instead of
manually excluding props inside each render method"
bengotow,2016-09-24 00:01:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/99e80a4bd84c7dfedd5f6bad7fa5c6e627c4dec1,99e80a4bd84c7dfedd5f6bad7fa5c6e627c4dec1,"fix(tooltips): Defer display of background, ensure dot inside window"
bengotow,2016-09-23 23:38:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/29ac8950449a796043d658f93a626558c7917a07,29ac8950449a796043d658f93a626558c7917a07,bump(submodule): Replace regexp body transforms with DOM approach
bengotow,2016-09-23 23:34:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee0241038f70278c5e3a9e9fdd8006210778d2df,ee0241038f70278c5e3a9e9fdd8006210778d2df,"feat(transforms): Replace regexp body transforms with DOM approach

Summary:
We originally didn't do this because creating a DOM tree was loading images.
Using range.createContextualFragment seems to do it without the tree ever
being attached.

Accompanying changes to src/pro are here:
https://phab.nylas.com/D3300
https://github.com/nylas/edgehill/compare/bengotow/draft-dom-transformations?expand=1

Also rename applyTransformsToDraft => applyTransformsForSending. Needed
a new name because the function signature has changed. AFAIK there are no
open source plugins using the old functions.

Test Plan: All specs updated

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D3299"
jstejada,2016-09-23 18:28:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a647204c95e9783bbeb9053b7c8724954818e71,7a647204c95e9783bbeb9053b7c8724954818e71,"fix(long-connection): `close` instead of `end` on network end event

NylasLongConnection.Status.Ended means that we can't open the
connection again. When we get a network level 'end' event, that doesn't
map to our meaning of `Ended`, so we should just close it instead"
bengotow,2016-09-23 15:28:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee226113e95badb8cf5629a2d1a07e4387aaaa03,ee226113e95badb8cf5629a2d1a07e4387aaaa03,es6(db): Query builder converted to ES6
bengotow,2016-09-23 15:22:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/d82fe350ae45e8dba175da2d2c504346cf741a3c,d82fe350ae45e8dba175da2d2c504346cf741a3c,bump(electron): Update to 1.4.1 to fix intermittent Symbol() error
bengotow,2016-09-22 20:31:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3225e1b77f4f45257cc50776f2f57655b0788c5,a3225e1b77f4f45257cc50776f2f57655b0788c5,fix(tray): Flipped logic in displaying unread count
jstejada,2016-09-22 18:57:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd3cf1c50f8507b9b86adffc1e23259e53538424,dd3cf1c50f8507b9b86adffc1e23259e53538424,"fix(search/long-conn): Process results buffer before ending connection (#750)

NylasLongConnection ends the connection when the 'end' event is emitted
by the `request` object. When this happens, the global connection buffer is cleared.
Also, the global buffer holds the data we've received from the connection, and
whenever we receive new data, we accumulate it in the buffer and call a processBuffer function
which is throttled to 400ms.

Given that the buffer is global state, and processing occurs
asynchronously with a delay of up to 400ms, if the 'end' event on the connection is
fired before we actually get to process the buffer, we would clear it and show no results.

This scenario currently only affected search because if we accidentally
threw away some data when streaming deltas, we will get that data again
when we reopen the delta streaming connection."
bengotow,2016-09-22 06:59:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/109e1e1e1996b23c17da149946ef0843a4907189,109e1e1e1996b23c17da149946ef0843a4907189,es6(db): Query-related classes moved to ES2016
emorikawa,2016-09-21 20:43:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/179d3fd78a4c817115d7013f6692834b4845d1db,179d3fd78a4c817115d7013f6692834b4845d1db,fix(task-queue): performLocal now operates serially
bengotow,2016-09-21 18:56:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/247d12e8de291b2502e6005afe89f44df3b3be3c,247d12e8de291b2502e6005afe89f44df3b3be3c,"fix(specs): attribute conversion fixed bugs, broke specs"
bengotow,2016-09-21 18:23:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/9972f2e42116237959146f64c1aaccdf8b46ff59,9972f2e42116237959146f64c1aaccdf8b46ff59,fix(accounts): Restore account re-ordering
bengotow,2016-09-21 17:45:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/c19ea14da594325a8113fd54085abf7b6599d4ce,c19ea14da594325a8113fd54085abf7b6599d4ce,hack(channel-picker): Hide Salesforce for now
bengotow,2016-09-21 16:40:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/57f963ebc1401f0530afc150b3f26e7cd01e8732,57f963ebc1401f0530afc150b3f26e7cd01e8732,es6(db): Didn’t wait for NylasLint…
bengotow,2016-09-21 16:35:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae45b4b898c5eec1f0912d0dcde080340b666ef6,ae45b4b898c5eec1f0912d0dcde080340b666ef6,es6(db): Convert attribute class declarations to ES2016
bengotow,2016-09-21 00:28:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/18f7a8d463cfe243b329e98f7676c84df7b8e133,18f7a8d463cfe243b329e98f7676c84df7b8e133,"bump(react): 15.3.x, warning removal, thread-sharing tweaks"
bengotow,2016-09-20 23:34:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/0709b33c9175283eb1937b3210e7b537cbcb765d,0709b33c9175283eb1937b3210e7b537cbcb765d,lint(*): Fix issue breaking the build
bengotow,2016-09-20 23:21:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/abdae1e7954d633330d0602a2d292fe54b7e88e3,abdae1e7954d633330d0602a2d292fe54b7e88e3,fix(tooltips): Position relative to custom container for composer
bengotow,2016-09-20 22:52:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2a3dab18788312c5cedf80fe601138301eafcd1,c2a3dab18788312c5cedf80fe601138301eafcd1,fix(auth): Update autofill for Fastmail.fm
bengotow,2016-09-20 22:48:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd8b83bcf925d768d2a499a524b7f9abf8b4570a,dd8b83bcf925d768d2a499a524b7f9abf8b4570a,fix(thread-sharing): Fix unloading plugin
bengotow,2016-09-20 22:48:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/e33c10b61ea07d1bd63b850938e98929e542ab0b,e33c10b61ea07d1bd63b850938e98929e542ab0b,fix(drag-drop): Restore support for thread dragging
bengotow,2016-09-20 22:17:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/4affeff58e4b4b054abeff2173eee242fe3e8a1a,4affeff58e4b4b054abeff2173eee242fe3e8a1a,"fix(specs): Fix tests that were console.logging, bump coffee-react"
emorikawa,2016-09-20 21:23:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/06ead70a6a8c87144c6eb34ca104a811178591c4,06ead70a6a8c87144c6eb34ca104a811178591c4,"Revert ""fix(promise): Don't use deprecated Promise.longStackTraces()""

This reverts commit db0e025fb5e56880ffea147ad5c4dcfb37b9d830."
emorikawa,2016-09-20 21:17:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/81b9eec674fe50782e3c691a2edbd1d7474d257a,81b9eec674fe50782e3c691a2edbd1d7474d257a,fix(error): Let APIErrors have proper stack traces
emorikawa,2016-09-20 21:16:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/db0e025fb5e56880ffea147ad5c4dcfb37b9d830,db0e025fb5e56880ffea147ad5c4dcfb37b9d830,fix(promise): Don't use deprecated Promise.longStackTraces()
bengotow,2016-09-20 18:31:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/8368e9cba7350283ef5f9c4b041e5a0db8192ff4,8368e9cba7350283ef5f9c4b041e5a0db8192ff4,fix(specs): Display which tests are console.logging
bengotow,2016-09-20 17:26:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a137677421347676696a49a59f2a1d932600d31,9a137677421347676696a49a59f2a1d932600d31,fix(darkside): `script/grunt lint` requires explicit LESS includes
jamiewilson,2016-09-20 17:20:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/cfa62e28e04ea18bb62eb42afdb37cb730ef9856,cfa62e28e04ea18bb62eb42afdb37cb730ef9856,"design tweaks, breaking css up into files, update readme (#2858)"
jstejada,2016-09-20 02:36:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/6eea9d26f1cda3712b2f6b31aa54c0d68ee27d94,6eea9d26f1cda3712b2f6b31aa54c0d68ee27d94,"fix(long-connection): Throw error for reporting, instead of just logging"
jstejada,2016-09-20 02:32:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f8bb9dffdd2e5b989254ba8c9dc329909aeff90,5f8bb9dffdd2e5b989254ba8c9dc329909aeff90,"feat(msg-list): Don't make participants mailto links, add context menu"
bengotow,2016-09-20 01:33:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/657b8f38efd3602b964497456a9bca85025c8be0,657b8f38efd3602b964497456a9bca85025c8be0,bump(version): 0.4.54 beta
emorikawa,2016-09-20 01:07:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/779a27c5b882acc06a7e491b29358cdcf9c7702d,779a27c5b882acc06a7e491b29358cdcf9c7702d,fix(lint): import ui-variables for linter
bengotow,2016-09-20 00:11:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/1734e588b61b2a1aa6b89dc7de18fc1418ee3871,1734e588b61b2a1aa6b89dc7de18fc1418ee3871,"fix(trial): Move”days left” bar to the sidebar, new design"
emorikawa,2016-09-20 00:13:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebb5584e541f64cc822afcbf11726b04138fd8ec,ebb5584e541f64cc822afcbf11726b04138fd8ec,fix(util): Utils.deepClone properly clones dates
bengotow,2016-09-19 23:20:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d826fff41d744806e1e0c9d3bdceb395f1ce2ae,3d826fff41d744806e1e0c9d3bdceb395f1ce2ae,fix(trial): Compute “days remaining” in timezone-aware way
jstejada,2016-09-19 19:49:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/0891ad855d00a780acc3471c36a71e3eab9eb9ee,0891ad855d00a780acc3471c36a71e3eab9eb9ee,fix(logging): Fix query logging: escape '%' properly
bengotow,2016-09-16 01:22:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/35c3a66642d7f01168be95c1f130296c58d337f7,35c3a66642d7f01168be95c1f130296c58d337f7,"feat(channels): Choose an update channel! Limited time only!

Summary: Just a small select input.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3282"
agsdot,2016-09-19 17:12:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebb8d02c3dcf9795b9ef753e8385a9ee176fdd42,ebb8d02c3dcf9795b9ef753e8385a9ee176fdd42,Fix typo: dependencesi > dependencies (#2838)
bengotow,2016-09-17 00:34:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/e01a23e2c2c4fc0796b82c188306cfdadddeab1a,e01a23e2c2c4fc0796b82c188306cfdadddeab1a,"fix(tutorial): Minor tweaks, finalized styling"
jstejada,2016-09-16 20:19:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec28214d5e93905ebbf7de6ffc89881edc7650dc,ec28214d5e93905ebbf7de6ffc89881edc7650dc,"fix(keymaps): Correctly map mod+z to undo, instead of just z (#2663)"
bengotow,2016-09-16 15:59:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5723dbc5a11589272a60cf73f8d3aeb2c984117,a5723dbc5a11589272a60cf73f8d3aeb2c984117,"bump(electron): Electron 1.4, node-sqlite 3.1.4+fts"
bengotow,2016-09-16 15:38:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/b07c0377d2880e6a49b7df4ab268c28ec728eabd,b07c0377d2880e6a49b7df4ab268c28ec728eabd,fix(N1.sh): Allow path to working copy to have spaces
jstejada,2016-09-16 07:05:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1fb5d8b3a470afa158a8d58b6fb817d7ca40cfc,b1fb5d8b3a470afa158a8d58b6fb817d7ca40cfc,fix(thread-sharing): Timestamp range in seconds
jstejada,2016-09-16 07:00:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffe7fc57c0ba3d6331612871b5838eb297399524,ffe7fc57c0ba3d6331612871b5838eb297399524,fix(thread-sharing): Throw error when thread is /not/ found
jstejada,2016-09-16 01:25:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff7ea9da7d7c467805d8af0faa96ea03ef0563d1,ff7ea9da7d7c467805d8af0faa96ea03ef0563d1,fix(mail-merge): Correctly handle empty column names
jstejada,2016-09-16 01:10:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/34996ec597e69d00ce65cea81cb1b1daae8f0808,34996ec597e69d00ce65cea81cb1b1daae8f0808,:art:(thread-sharing): Prefer url and querystring modules to parse url
jstejada,2016-09-15 23:43:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb2a69ec32077ad9c6a478860a95939b05b2c7c6,bb2a69ec32077ad9c6a478860a95939b05b2c7c6,"fix(thread-sharing): Find-thread, incr timestamp delta to 1min in ms"
jstejada,2016-09-15 01:33:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/36f4801f062a88b68d98357ef82b9a8c1356fb6f,36f4801f062a88b68d98357ef82b9a8c1356fb6f,bump(build)
jstejada,2016-09-15 01:13:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e10cde7e3d3303765184d69ed1210eddd749f39,5e10cde7e3d3303765184d69ed1210eddd749f39,fix(thread-sharing): Update popover style
jstejada,2016-09-14 21:34:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/48aeaf94eb71470401e8df9724296b2c0f30ebf1,48aeaf94eb71470401e8df9724296b2c0f30ebf1,fix(changelog): Update changelog to reflect latest puublished release
jstejada,2016-09-14 19:25:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/0520a94dff7e1c7ca97a72f0f3c611062649b031,0520a94dff7e1c7ca97a72f0f3c611062649b031,bump(version): 0.4.53 and update Changelog
emorikawa,2016-09-14 18:56:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/d52217a0873a2d087612583c04e56e5f8669b483,d52217a0873a2d087612583c04e56e5f8669b483,bump(version): 0.4.52 and add Changelog
jackiehluo,2016-09-14 18:20:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/cba4c4ac5195be818f5d1f78db414ade77391748,cba4c4ac5195be818f5d1f78db414ade77391748,fix(subscription): Remove hardcoded trial length
bengotow,2016-09-14 18:16:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/08ec6e534d2dd4daa22001d7a90ab11ebfad76b7,08ec6e534d2dd4daa22001d7a90ab11ebfad76b7,fix(copy): Updating language for onboarding tour
jstejada,2016-09-14 17:14:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ab5a1327a8237b012a860b8462eddbd45d21d11,1ab5a1327a8237b012a860b8462eddbd45d21d11,fix(build): Fix lint errors
jstejada,2016-09-14 07:03:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/677a83b8f511db1c4a9bfefc507a73a8b815694f,677a83b8f511db1c4a9bfefc507a73a8b815694f,"Add thread-sharing plugin

Summary:
Add thread-sharing plugin:

- Add popover to enable sharing
- Register custom nylas:// protocol to open a thread via protocol is thread exists

Test Plan: Manual

Reviewers: jackie, bengotow

Reviewed By: jackie, bengotow

Subscribers: jackie, halla

Differential Revision: https://phab.nylas.com/D3265"
bengotow,2016-09-13 06:23:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/0d67a593b4635dcb01c8b87dea069d6fa1d228bf,0d67a593b4635dcb01c8b87dea069d6fa1d228bf,"feat(tutorial): Overlay bubbles that guide you through initial features

Summary:
Add header to show how many trial days remain

More rendering out of Store, consolidate registry and store and expose via new serviceRegistry

WIP

Merge branch 'master' into hallamoore/feature-walkthrough-tutorial

Switch to using observable instead of AbortablePromise

Update submodule

WIP

WIP

Remove annotations

Remove changes

WIP

Test Plan: No tests

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3260"
GM-Polyakov,2016-09-12 18:57:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/d87878bed3fe82718c7d03e03f9bf6652546d68f,d87878bed3fe82718c7d03e03f9bf6652546d68f,"Update Community Plugin Link

Changed todoist link to more polished integration at : https://github.com/alexfruehwirth/N1TodoistIntegration"
grinich,2016-09-12 04:49:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/90e7cfd2e71efb71bf5dad04524221daac521bd9,90e7cfd2e71efb71bf5dad04524221daac521bd9,more themes
grinich,2016-09-12 04:25:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/241820c71e88a748dd57681700c98fac431ba12a,241820c71e88a748dd57681700c98fac431ba12a,Update README.md
acgissues,2016-09-10 17:17:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/14aab71cd7db0538f2ef893fcceddfcbff30dad3,14aab71cd7db0538f2ef893fcceddfcbff30dad3,Fixed issue #2670. URL parsing '?#' (#2827)
jackiehluo,2016-09-03 00:10:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ac730cccc1aa08f7e01c5672062071dcd9f4afa,9ac730cccc1aa08f7e01c5672062071dcd9f4afa,fix(identity): Log user out of app if identity token is missing
KyleKing,2016-09-02 23:01:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/d47c5bf3dde5828db0e8d872bd0fbe62ec4768be,d47c5bf3dde5828db0e8d872bd0fbe62ec4768be,"Fixes #2723 -> apm ignore plugin dev-dependencies (#2741)

`apm install --production`"
agsdot,2016-09-02 22:55:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8b52fa5f7fe2cc434c44c4c7577c8751aff2f01,b8b52fa5f7fe2cc434c44c4c7577c8751aff2f01,Fix typo: wether > whether (#2793)
jackiehluo,2016-09-02 18:51:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/19091478a53045a5ea40ec74eb489ce4434ba289,19091478a53045a5ea40ec74eb489ce4434ba289,fix(send): Check for number of BCC participants before using multi-send
bengotow,2016-09-02 17:40:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/970f519f119e8e0b18e927b8b9991b436617b946,970f519f119e8e0b18e927b8b9991b436617b946,Add “Ctrl-A” to the outlook shortcuts
bengotow,2016-09-02 17:38:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4ed2ccf7c2a83fc10420ce3dc88453e81f3258f,a4ed2ccf7c2a83fc10420ce3dc88453e81f3258f,Remove bad .jsx extension
jstejada,2016-09-02 03:24:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/e14961ab80b04c11e14559f5e9729490b8d77623,e14961ab80b04c11e14559f5e9729490b8d77623,bump(version)
jstejada,2016-09-02 03:21:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/1685f3bd45e8ae59464682966d0803a69e766006,1685f3bd45e8ae59464682966d0803a69e766006,fix(markdown): Update editor height
jstejada,2016-09-02 02:43:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/b14e4f6aa28b2d367e55755b496fdb4dbe564133,b14e4f6aa28b2d367e55755b496fdb4dbe564133,"fix(markdown): Fix textarea bug (use our fork of simplemde)

- Textarea bug prevented us from typing in the markdown editor, almost
consistently. Seems to be a chrome bug
- Stop using textarea and use contenteditable instead via codemirror's
inputStyle option. Had to use our fork of simplemde to be able to pass that option
- Disable spellchecker also"
jstejada,2016-09-02 01:27:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/f81c29e1cd1281564a32eda81ae9f5240bf50f51,f81c29e1cd1281564a32eda81ae9f5240bf50f51,fix(markdown): Add setSelection method
bengotow,2016-09-02 00:25:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb87fe4745c54ff10262e2211dfd6a3369426e7b,eb87fe4745c54ff10262e2211dfd6a3369426e7b,Markdown support for quoted text / signatures
jstejada,2016-09-01 23:52:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/176155275fba05a2d819f1fcc44483bb4c145046,176155275fba05a2d819f1fcc44483bb4c145046,fix(markdown): Fix focusAbsoluteEnd
jstejada,2016-09-01 23:44:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/791a2caac35e9dde1cac04ae07bda41c44a36382,791a2caac35e9dde1cac04ae07bda41c44a36382,fix(markdown): Fix tabbing into composer
jstejada,2016-09-01 19:19:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/8fea55583fdcda88713fac0161b12054e8e99735,8fea55583fdcda88713fac0161b12054e8e99735,"fix(packages): Make sure we can migrate and correctly disable new packages

- Add a package migration manager to be able to migrate external
packages into N1, and decide if they should be enabled or disabled by
default when added."
emorikawa,2016-09-01 18:27:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/10ed8a25212dc907359c267bccc1fc6b97b0de92,10ed8a25212dc907359c267bccc1fc6b97b0de92,fix(size): remove unused docs & screenshots
emorikawa,2016-09-01 18:24:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/21a485e23d0a124703c9e146ceb99777bf3467ea,21a485e23d0a124703c9e146ceb99777bf3467ea,fix(size): Losslessly compress package images via ImageOptim
emorikawa,2016-09-01 18:08:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/b55c5bcdd96e868fc2aa077d56adb927ad60924c,b55c5bcdd96e868fc2aa077d56adb927ad60924c,fix(size): Losslessly compress images via ImageOptim
emorikawa,2016-09-01 18:03:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ea242f9524635a11d443c09f8ab27f6093cc474,4ea242f9524635a11d443c09f8ab27f6093cc474,fix(size): Remove src/pro from build
bengotow,2016-09-01 18:11:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/65f9a3dd6bdb8001fdb581dbf7de586153d8f7c1,65f9a3dd6bdb8001fdb581dbf7de586153d8f7c1,"fix(onboarding): Fix React warnings, no back button to auth"
bengotow,2016-09-01 18:03:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/2cbc1a7ddefae2c55eb27cd7b1426d140e0aa273,2cbc1a7ddefae2c55eb27cd7b1426d140e0aa273,"config(*): watch config across fs deletes, re-creates"
bengotow,2016-09-01 17:14:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/0924404c854fcd98b1fffb794d24648971117ecf,0924404c854fcd98b1fffb794d24648971117ecf,config(*): Fix bad template string
jstejada,2016-08-31 22:21:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/8122ed0b5a8ab4f3fd1efee2b0f3142534dc12d4,8122ed0b5a8ab4f3fd1efee2b0f3142534dc12d4,update(*): Update changelog
jstejada,2016-08-31 21:56:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8006f4eb085e326686667d2a8228338e4492db7,c8006f4eb085e326686667d2a8228338e4492db7,bump(version): 0.4.50
jstejada,2016-08-31 16:56:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8d2904f725b126c2a4a1f5da212ba15ed717bb0,f8d2904f725b126c2a4a1f5da212ba15ed717bb0,bump(submodule)
jstejada,2016-08-31 16:56:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ffb156ee0c65f702e4c0665e30f4b8e7f3688ec,7ffb156ee0c65f702e4c0665e30f4b8e7f3688ec,plugins(*): Add identifying css classes to composer plugin buttons
jackiehluo,2016-08-31 02:23:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8b8359e0c37039b7ee0e35b1d525b99f9416460,a8b8359e0c37039b7ee0e35b1d525b99f9416460,feat(markdown): Add Markdown composer
jackiehluo,2016-08-31 02:20:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1ba5a3e2b1cc570ffe7bbe7e3484f5d3c6c12c6,d1ba5a3e2b1cc570ffe7bbe7e3484f5d3c6c12c6,fix(onboarding): Receive user info correctly
emorikawa,2016-08-31 00:55:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/73a1fbf76b903181368b95334575ff654115ecd5,73a1fbf76b903181368b95334575ff654115ecd5,fix(less): tokenizing field input no box-shadow on windows
jstejada,2016-08-30 23:08:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/aac01d1088d1a1a4ca65a765d077b6e15db36060,aac01d1088d1a1a4ca65a765d077b6e15db36060,"fix(utils): Fix import when running in browser process

Main process doesn't know about nylas-exports"
jstejada,2016-08-30 22:39:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ea35896b03e1693da04bf5dd2e25ba9f36d8198,0ea35896b03e1693da04bf5dd2e25ba9f36d8198,"fix(config): Write config.json atomically and handle errors (#2518)

Summary:
It seems that #2518 was being caused because `fs.writeFileSync` ocasionally failed and ended up writing an empty config.json file, effectively blowing away your N1 settings. The most common cause of failure for `writeFileSync` seems to be EBUSY error on win32, according to Sentry. The reason as to why EBUSY is happening so frequently on win32 is still unclear.

This commit:
- Adds an `atomicWriteFileSync` helper which writes to a temporary file first, and then renames the file. If writing to the temp file fails, we wont blow away our actual config.json. Also, renaming seems to be atomic across all platforms.
- Adds more robust error handling and messaging to both loading and writing the file, and report them to Sentry
- Automatically retries saving the file 3 times before telling the user.
- Fixes https://sentry.nylas.com/sentry/edgehill/group/43112/

Test Plan: Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3245"
emorikawa,2016-08-30 21:52:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/95aa6386fce644e0b91e9eb5bc65f333ff50132a,95aa6386fce644e0b91e9eb5bc65f333ff50132a,fix(onboarding): no longer show welcome page
grinich,2016-08-30 21:46:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/105a0526cbca02f06d98022d1e37c2d0f1d1a887,105a0526cbca02f06d98022d1e37c2d0f1d1a887,add theme img
grinich,2016-08-30 17:53:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/4fa75e2c0a730bd192ad14ee021a5c0291d1b872,4fa75e2c0a730bd192ad14ee021a5c0291d1b872,theme notes
emorikawa,2016-08-30 17:41:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5bf41a18156d96977cc400e84eb7d7cb3910a90,f5bf41a18156d96977cc400e84eb7d7cb3910a90,fix(onboarding): fix injected js error and pass N1 version
emorikawa,2016-08-30 02:07:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/5108cded87ef489931ddcc92a0f037094e564624,5108cded87ef489931ddcc92a0f037094e564624,feat(webview): can add .open-external class in webview
emorikawa,2016-08-30 00:43:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/88ed82dd0d3dd4340104c5dc93c218c65b705f36,88ed82dd0d3dd4340104c5dc93c218c65b705f36,feat(travis): add ci-build/.* wildcard to building branches
jackiehluo,2016-08-25 21:18:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec848a4a6e555707f578c36ca67a56fd87e1ce43,ec848a4a6e555707f578c36ca67a56fd87e1ce43,fix(lint): Remove unused variable
jackiehluo,2016-08-25 17:44:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f15026a5f914ac0b3596008123424cb18cf28d9,1f15026a5f914ac0b3596008123424cb18cf28d9,"feat(oauth): Add new component for OAuth sign-in

Summary: Future services that require OAuth get a cute new component that lets them connect more easily.

Test Plan: Tested manually.

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3186"
emorikawa,2016-08-23 21:45:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/7406c1a94fbbb4b41dfe5d307188a9c153108fd1,7406c1a94fbbb4b41dfe5d307188a9c153108fd1,"fix(dev): don't show tokens in developer api bar

Fixes #2756"
jackiehluo,2016-08-23 17:46:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/629ddf78860ea929c9a3fc3bb56fa37114d7784e,629ddf78860ea929c9a3fc3bb56fa37114d7784e,feat(onboarding): Allow HTTPS in self-hosted sync engine onboarding
emorikawa,2016-08-22 23:14:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/e294415e2f0aef0df601429cc5b4c2bc67acb565,e294415e2f0aef0df601429cc5b4c2bc67acb565,feat(workspace): keep track of workspace mode
jstejada,2016-08-19 01:11:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9a530017de40b5194d0f8e62743e53680299616,f9a530017de40b5194d0f8e62743e53680299616,"fix(msg-timestamp): Fix incorrect date var / convert to es6

- Typo in cjsx code broke the message timestamp
- Converted to es6 so this doesn't happen again!"
jstejada,2016-08-18 22:16:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/63672a72fc14a392934368e3b4cb404d09c03b21,63672a72fc14a392934368e3b4cb404d09c03b21,Update changelog
jstejada,2016-08-18 22:09:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/2839ce2856c35566243285c90185beec13111ec3,2839ce2856c35566243285c90185beec13111ec3,"fix(mail-merge): Remove extra call to `linkToDraft`

Screwed up our state!"
jackiehluo,2016-08-18 20:17:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/c908a1633ca2c745a52d495869716b78c719e0ba,c908a1633ca2c745a52d495869716b78c719e0ba,"fix(autoupdater): Change feed URL when Nylas ID or accounts changes

Test Plan: Tested locally.

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D3178"
emorikawa,2016-08-18 19:25:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/afc20f255a9f1fb37a9958f18009f1098f6714a5,afc20f255a9f1fb37a9958f18009f1098f6714a5,fix(lint): fix linter error
emorikawa,2016-08-18 19:21:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a0af16abd73717609f876237f4ac5e936c8896e,4a0af16abd73717609f876237f4ac5e936c8896e,bump(version): 0.4.49
emorikawa,2016-08-18 19:14:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/dcdfa230e85febd39965e4e584c15d50c1634215,dcdfa230e85febd39965e4e584c15d50c1634215,fix(draft): prepareDraftForSyncback double checks quotes on send later
emorikawa,2016-08-18 18:42:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6deb83440e77484fe0c27f6b2ee69f17ca1d02a,e6deb83440e77484fe0c27f6b2ee69f17ca1d02a,feat(plugins): plugins now properly report which are active on change
jstejada,2016-08-18 17:35:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/01dee59e0430ece3e2c7cd53e9e0a67628add671,01dee59e0430ece3e2c7cd53e9e0a67628add671,"fix(send): Don't retry send

Summary:
- There are some cases in which constantly retrying send can cause unexpected bugs like sending multiple times, so don't retry send at all
- Make 429 a permanent error code

Test Plan: Manual

Reviewers: jackie, evan

Reviewed By: jackie, evan

Differential Revision: https://phab.nylas.com/D3177"
emorikawa,2016-08-18 16:57:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a5388d0bbfcee8fc97725b8112dc15d0e75bfc0,0a5388d0bbfcee8fc97725b8112dc15d0e75bfc0,feat(app): dialog box prompting to move to Applications folder
jackiehluo,2016-08-18 16:27:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b0306d509557f7eeef1e4fe5ace26c94c7a817e,9b0306d509557f7eeef1e4fe5ace26c94c7a817e,fix(errors): Remove reporting for applyTransformsToDraft
jstejada,2016-08-18 01:09:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b4763dba4343a6a8e5b9740d363429345568a46,4b4763dba4343a6a8e5b9740d363429345568a46,fix(mail-merge): Update props for body tokens when state changes
codebytere,2016-08-17 17:14:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f0b248a2e0f578cfb84130e8dae44fa73814bf3,5f0b248a2e0f578cfb84130e8dae44fa73814bf3,improve first name parser by adding honorific exclusions (#2732)
jstejada,2016-08-17 04:50:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/07f0ed69ef3505796565fe9996f06c5296b86a4f,07f0ed69ef3505796565fe9996f06c5296b86a4f,Update changelog for 0.4.48
emorikawa,2016-08-17 00:42:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7a69e1e8feaf855b5d65021befd981a6ac3f21a,c7a69e1e8feaf855b5d65021befd981a6ac3f21a,bump(version): 0.4.48
jstejada,2016-08-17 00:36:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/74ad414bf8c8942405509ea63c85d2f0cea9a2e5,74ad414bf8c8942405509ea63c85d2f0cea9a2e5,"fix(build): Fix specs and lint errors

Summary: Fix specs and lint errors

Test Plan: Unit

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D3168"
jackiehluo,2016-08-17 00:30:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/97084687b4bd65643532f5ff1b59f2d9a2d95889,97084687b4bd65643532f5ff1b59f2d9a2d95889,fix(submodule): Remove submodule commit
jackiehluo,2016-08-17 00:22:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ff7aec999ded762d449f5ea986cb5c3a7ece3a7,6ff7aec999ded762d449f5ea986cb5c3a7ece3a7,fix(tracking): Check for specific plugin before transforming body
emorikawa,2016-08-16 23:58:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/5231b4f556be1f31340cd07f26f037eb456a98d9,5231b4f556be1f31340cd07f26f037eb456a98d9,"feat(install): add a checker for the install location

Summary:
Adds a new notification bar for mac users only that warns you if N1 is not
in your /Applications folder. Gives you the option to move it to your
/Applications folder.

Test Plan: manual

Reviewers: juan, jackie

Reviewed By: juan, jackie

Differential Revision: https://phab.nylas.com/D3166"
jstejada,2016-08-16 20:21:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/b223a38b73058fafbd3b4c19e6963ab50eefb6d3,b223a38b73058fafbd3b4c19e6963ab50eefb6d3,"fix(mail-merge/preview): Don't unmount components when toggling preview

Summary:
See edgehill revision: https://phab.nylas.com/D3160

- CustomContenteditableComponents.get now takes a single component to register as an overlaid component, and this component will be passed a prop `{isPreview: true}` when it is meant to be rendered as a preview. Update scheduler and mail-merge to use this new api.

- This prevents the mail merge state from being incorrectly updated when we toggled preview mode -- previously, it believed that the tokens had been unmounted when toggling preview, so they were incorrectly removed from the mail merge state.

- Additionally, makes sure that tokens are correctly added to the mail merge state whenever a token is rendered via componentDidMount -- previously, we only added the token to state when a token was dropped on the contenteditable, however, a token might be pasted or an anchor node might be added by any other means, in which case we want the mail merge state to reflect that. (Adds docs about this)

Test Plan: Manual

Reviewers: jackie, evan

Reviewed By: jackie, evan

Differential Revision: https://phab.nylas.com/D3161"
emorikawa,2016-08-15 21:16:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b365dd9b14594fbfa50a1501f9a79d53da5000e,3b365dd9b14594fbfa50a1501f9a79d53da5000e,"fix(window): window launcher now assigns new window keys if none exist

Fixed issue where new windows wouldn't refresh themselves because the keys
were stuck on the hot window"
emorikawa,2016-08-12 19:21:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/610aecb1842059a7104fa40809c295c6f55b89ff,610aecb1842059a7104fa40809c295c6f55b89ff,"fix(metadata): add pluginId string check when grabbing metadata

This caused an infinitely growing set of duplicate metadata entries whose
keys were ""[object object]"""
emorikawa,2016-08-15 20:38:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff61da26d725f8d12af25b767744edc48b22abe1,ff61da26d725f8d12af25b767744edc48b22abe1,"fix(sidebar): fix bug in sidebar scoring

Not properly getting passed the account means that yourself was not
properly downgraded in the sidebar participant score"
annielcook,2016-08-12 23:06:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/43ea21e3bf1f14036944dad11d43696bdfa9c06d,43ea21e3bf1f14036944dad11d43696bdfa9c06d,"add(composer): Turn emails into mailto for debugging purposes

Summary:
fix(subject-field): Fix subject text field focus
Before, if you clicked a mailto link, once the composer loaded, the subject field (which was focused in composer-preload) blurred. This was not ideal as users would want to type once the popout loaded and instead they would have to click first. We identified that this was coming from the composer header _renderSubject injected component. We fixed the focus within mail merge subject text field and additionally added the onComponentDidChange method to injected component. This allowed us to only update the component when the header field changed.

Test Plan: tested on my machine for mailto links

Reviewers: juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3150"
annielcook,2016-08-12 21:27:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7602a5351c0a2524f40f73e1aefa90ee1216f18,a7602a5351c0a2524f40f73e1aefa90ee1216f18,"fix(cursor): Make cursor focus at the top of email

Summary: When you would click outside the contenteditable in the composer, it would focus to the absolute end. Not ideal. I added a check if the click is above the top of the content editable -- if you click the top padding of it -- then focus at the beginning.

Test Plan: is this something i should test?

Reviewers: juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3139"
Wattenberger,2016-08-09 01:36:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/492c1ad52393fcfea1c1078729f680d8e2778375,492c1ad52393fcfea1c1078729f680d8e2778375,Add Snow to README (#2711)
arimai,2016-08-08 17:01:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/f482645effce413b3bae78713d02f90f1c2d3012,f482645effce413b3bae78713d02f90f1c2d3012,Updated readme to include BoraBora and Honeyduke theme (#2708)
emorikawa,2016-08-05 19:15:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e1bd5daae45a471e64103d8b9ce000d0113e020,2e1bd5daae45a471e64103d8b9ce000d0113e020,"fix(env): add remove unload callback for stores

Also add eslint_d to linter setup.
Developer bar store supports bearer token auth"
emorikawa,2016-08-03 18:23:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/59b5c2d960e2e95e68f0f5bf8e659c7dc4d8bb20,59b5c2d960e2e95e68f0f5bf8e659c7dc4d8bb20,feat(request): Add APIRoot as an option to Nylas API Request
emorikawa,2016-08-03 00:34:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/011d5e90a9be1490c6fe53ae0eb59ce710a4f026,011d5e90a9be1490c6fe53ae0eb59ce710a4f026,Add NylasLongConnection to nylas-exports
emorikawa,2016-08-02 23:15:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/0de68632dfb5b14a31cf28c1c150c184795b67a3,0de68632dfb5b14a31cf28c1c150c184795b67a3,"Auth keybase and clearbit

Summary:
Fix to pass N1 ID auth through to edgehill-server for remaining services
(clearbit and keybase) that request authing against the Nylas API. We need
to pass along the N1 ID.

This also requires an Edgehill Server patch here:
https://phab.nylas.com/D3149

Test Plan: Manual.

Reviewers: bengotow, juan

Differential Revision: https://phab.nylas.com/D3151"
annielcook,2016-07-29 23:34:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/b46f60fc1cadab5f1a4b839c350aec0c7b59524b,b46f60fc1cadab5f1a4b839c350aec0c7b59524b,":art:(signature): Fix signature dropdown styling on different themes

Summary: Ran into issues with the selected tag having different styles associated with it in taiga and in darkside. Fixed these.

Test Plan: Tested on my machine

Reviewers: jackie

Reviewed By: jackie

Subscribers: jackie

Differential Revision: https://phab.nylas.com/D3144"
jstejada,2016-08-01 19:50:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/3678c23515d64f8e83dd9cfc587cdbde2b7bc38a,3678c23515d64f8e83dd9cfc587cdbde2b7bc38a,"fix(mail-merge): Fix cursor style, refactor state reducers, add test"
jstejada,2016-08-01 19:41:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/9fe6717a982440fbba3ffaf0ffb8a4c0fccbdc50,9fe6717a982440fbba3ffaf0ffb8a4c0fccbdc50,"fix(utils): Properly export DateUtils.timeZone, fix specs"
jstejada,2016-08-01 19:08:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e2f8756e01a5ba401604b69780b48ee4ae831fc,5e2f8756e01a5ba401604b69780b48ee4ae831fc,fix(activity-list): Properly update to DateUtils.shortTimeString
bengotow,2016-08-01 18:54:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/5254589e5ee830ff84623c43c9cf4234f2c2bbc4,5254589e5ee830ff84623c43c9cf4234f2c2bbc4,fix(signatures): Scrolling for long signatures
bengotow,2016-07-29 01:19:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/ead866fc065eafab159cb43ae831d11e76e10275,ead866fc065eafab159cb43ae831d11e76e10275,fix(phising): Make detection lower case #1784
jathpala,2016-07-29 00:42:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/7faa9ac7bd9a36c0ae916a8d11c1f2deedca27ae,7faa9ac7bd9a36c0ae916a8d11c1f2deedca27ae,"Better support 24-hour time (#2622)

* Added support for 24-hour time to the thread list view (Issue #682)

* Add 24-hour time support to the thread list scroll tooltip (Issue #682)

* Fix for 24-hour time in the thread list scroll tooltip (#682)

Correctly imports the DateUtils module

* Add support for 24-hour time to the draft threads list (Issue #682)

* Add 24-hour time to the message sidebar

* Fix for 24-hour time in the message view so the rollover tooltip is 24hour also (#682)

* Removed unused date functions from utils

fullTimeString and shortTimeString from src/flux/models/utils.coffee were not
compatible with 24-hour time. These functions were modified and moved to
DateUtils in src/date-utils.

* Fix for display of 24-hour time in the message view (Issue #682)

* Removed unused import of Utils in a couple of files

Prompted by Travis build errors.

* Updates to handling of date/time display

Incorporates changes suggested by @bengotow.
Re-enables support for the isDetailed property in message-timestamp (if this is set
to true, a medium length date/time string will be used for display).
Re-enables additional display varieties based on when the email was received. Note
that this is implemented slightly different to the orinal version - time is now given
as an absolute time rather than ""... days ago"" format.
TZ guessing moved to the global scope of date-utils for performance reasons.

* Minor de-linting

* Re-enable all tests by unfocusing the test suite

A previous commit (ad04775) added an fdescribe() to one of the tests in
draft-helpers-spec. This changes that to a regular describe() so that
all tests will be run when running ./N1 --test.

* Added tests for the new DateUtils functions

Added tests for getTimeFormat, mediumTimeString and fullTimeString.
Removed no longer relevant tests from message-timestamp-spec as _formattedDate
has been removed in favour of the functions in date-utils.

To test shortTimeString, we need to be able to set a fake current time which is
possible in jasmine 2.0+ but not in 1.3 which is currently in use.

As a possible bug, when running more than 10 tests the following warning is raised:
""(node:25025) Warning: Possible EventEmitter memory leak detected.
11 on-config-reloaded listeners added. Use emitter.setMaxListeners() to increase limit"",
source: internal/process/warning.js (24)

* Minor de-linting"
hallamoore,2016-07-29 00:35:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/329ea706709401b8ca810b4008f0fc5940ce9bf8,329ea706709401b8ca810b4008f0fc5940ce9bf8,fix(error msgs): Show an error when we can't store the identity token
hallamoore,2016-07-28 22:25:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b837fb11313191d01d58907efbd371fd12a117e,8b837fb11313191d01d58907efbd371fd12a117e,"fix(icons): Prevent signature dropdown icon from appearing too large

The 1x and 2x icons for the signature dropdown were both actually the same size,
resulting in too large of an icon when N1 thought it should use 1x. Fixing this
by simply removing the 1x file."
bengotow,2016-07-28 22:17:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0f30f58567fc511380d2ea33b55f0ed710a81c5,b0f30f58567fc511380d2ea33b55f0ed710a81c5,feat(changelog): 0.4.47 release notes
bengotow,2016-07-28 21:54:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/36bd794b612f637833f2207e1fc7e375446d58d6,36bd794b612f637833f2207e1fc7e375446d58d6,feat(signatures): Fix specs
bengotow,2016-07-28 21:46:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/817a78a29661edb851e9049ee5df539f8d348de8,817a78a29661edb851e9049ee5df539f8d348de8,feat(signatures): Upgrade old signatures to new format
annielcook,2016-07-28 21:15:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/5dc0f53cea48b63d8457db9e46d1de7752636df2,5dc0f53cea48b63d8457db9e46d1de7752636df2,bump(submodule)
jstejada,2016-07-28 21:05:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/c347a36ab5f4c4a107ee087499c610283c55e9ae,c347a36ab5f4c4a107ee087499c610283c55e9ae,"fix(mail-merge): Skip row in table data if its empty

- Don't show annoying error if entire row is empty
- Just show error if just the email cell is empty"
hallamoore,2016-07-28 20:41:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b82543c44b8b7467ae7ad38735230b121c67fab,0b82543c44b8b7467ae7ad38735230b121c67fab,"fix(spellchecker): Make sure spellchecker returns selection to its original state

This also fixes the scenario where the link editor wouldn't pop up properly with
misspelled words."
bengotow,2016-07-28 20:34:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/44d8d823a053eb5e3a8d61f7ccd9b0cc5b7d2af4,44d8d823a053eb5e3a8d61f7ccd9b0cc5b7d2af4,bump(version): 0.4.47
bengotow,2016-07-28 20:33:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c414989776d76a061c243b0f236c11465dd9dc7,0c414989776d76a061c243b0f236c11465dd9dc7,"fix(quoted-text): Don’t add <body>, <head> accidentally to text when transforming"
bengotow,2016-07-28 20:32:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/95a03692ed706a42b80b4b3515240d5109408cdc,95a03692ed706a42b80b4b3515240d5109408cdc,fix(keybase): incorrect react proptype
bengotow,2016-07-28 20:31:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3a58b4bde185f1d7963a1fd298adac1738151e7,e3a58b4bde185f1d7963a1fd298adac1738151e7,fix(thread-list): Random error when rapidly clicking row after launch
jstejada,2016-07-28 19:40:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f52a9a47b41de363791da4f109a131ad56ae92f,5f52a9a47b41de363791da4f109a131ad56ae92f,"fix(specs): Properly spy on streaming connection

- Prevent error logs and actually trying to start delta streaming
connections"
annielcook,2016-07-28 18:37:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/796af843a00a0a66007c7a57a833b2b45dfbbaf4,796af843a00a0a66007c7a57a833b2b45dfbbaf4,"fix(mail-merge): Fix column deletion and added a spec for uneven data

Summary: After importing an uneven csv (not all rows have the same number of columns e.g. rows: [[1,2][3,4,5]]), deleting the last column would improperly delete data in rows with fewer columns. This is because we were slicing each row based on row.length - 1 which is not the same for all rows. Fixed this by creating a new variable newNumColumns which is columns.length - 1.

Test Plan: Added new test data with uneven data and added a test in table-data-source-spec for removeLastColumn on this uneven set.

Reviewers: juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3133"
annielcook,2016-07-28 19:10:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea60c69fa657bf8a7e29eb2d6cb5d6ef50ea13bd,ea60c69fa657bf8a7e29eb2d6cb5d6ef50ea13bd,"refactor(folders): Make folders disappear when deleted rather than graying out until confirmed

Summary:
When testing we thought that Deleting a folder turns it grey but keeps it in the folder list; trying again throws this error.
It turns out, that the folder was actually going to be deleted if left alone long enough, however, since it sat there grey for a while
we would attempt to delete it again which would throw an error. To get around this, we removed the isDeleted grey state and
unpersisted the folder right when delete is clicked then persisted the folder if there was an API error.

fix(folders): Add new and extend destroy category task specs

Test Plan: I tested locally, tweaked destroy category task specs and added minor new specs

Reviewers: bengotow, juan

Reviewed By: juan

Subscribers: bengotow, juan

Differential Revision: https://phab.nylas.com/D3131"
bengotow,2016-07-28 18:20:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/0723457f27b80ec9c76a8aabb51719edc6b496dd,0723457f27b80ec9c76a8aabb51719edc6b496dd,fix(specs): Wait longer in DraftStore specs for window close
jstejada,2016-07-28 17:31:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/947646fed8732a78df19faecf96c16bb4616310a,947646fed8732a78df19faecf96c16bb4616310a,fix(log): Rm unecessary console.log call
jackiehluo,2016-07-28 03:08:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/301d10e33e0c1c0cb2a6f7725ae07d2fd418348e,301d10e33e0c1c0cb2a6f7725ae07d2fd418348e,:art:(onboarding): Fix clipped gears in onboarding
hallamoore,2016-07-28 02:51:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e1aa4b371b4c72a99d6c76ebd655c6ae9d5e25a,8e1aa4b371b4c72a99d6c76ebd655c6ae9d5e25a,"Make sure draft has enough time to save before composer is closed

If the composer is closed too quickly, the DatabaseStore doesn't have enough
time to trigger the necessary ActionBridge events that will properly save the draft.
These events are triggered every 10 ms, so to be safe, we wait 15."
jackiehluo,2016-07-28 02:32:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/a728722f0f68fb6753b1e5c35b10e95601d0e154,a728722f0f68fb6753b1e5c35b10e95601d0e154,:art:(ubuntu): Unhide toolbar for popout composer
AskBre,2016-07-28 01:35:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/05b6d46002cce310ac00f5db975dbb62c4efd6bf,05b6d46002cce310ac00f5db975dbb62c4efd6bf,"Enables showing/hiding of menubar (#2648)

* Enables showing/hiding of menubar as per #1181

* Updates to new setting name"
jstejada,2016-07-27 21:29:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef6cf545d85d4e8448a92d40dfb8660003f9c0b0,ef6cf545d85d4e8448a92d40dfb8660003f9c0b0,"fix(deltas): Update latest cursor, address comments

- Add test to make sure that latest cursor is updated"
bengotow,2016-07-27 18:52:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7408805f0a30383df77666b52500c6e42202b87,b7408805f0a30383df77666b52500c6e42202b87,"fix(packages): Don’t look for package in top level directory

Fixes issue with Keybase.io installing a folder at the top level of the filesystem called `keybase`"
jstejada,2016-07-27 10:12:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/008aa113187e121af93d542c47ecd75b33051640,008aa113187e121af93d542c47ecd75b33051640,fix(long-connection): Close connection on 'end' event
jstejada,2016-07-27 09:56:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/693bd18267af9741bce0545d8cd5743af3ef18a0,693bd18267af9741bce0545d8cd5743af3ef18a0,"fix(deltas): Consolidate nylas-long-connection code

- Completely remove nylas-long-connection.coffee file and consolidate all logic into
nylas-long-connection.es6 and worker-sync/delta-streaming-connection.es6:
  - Separate it into DeltaStreamingConnection which is specific to the worker-sync
    package for handling deltas
  - NylasLongConnection is a ""reusable"" persistent connection to our API
    which is also used by the search package
  - This is a basically a fixed revision of https://phab.nylas.com/D2875,
    see difff for more info
- Makes it so delta streaming does not retry so aggressively on 403s, which
  happens whenever a user’s trial has expired"
jstejada,2016-07-27 02:21:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/df4dec866f64958869353c23fc52aecf6e76a18a,df4dec866f64958869353c23fc52aecf6e76a18a,bump(submodule): Revert submodule bump revert
annielcook,2016-07-26 23:53:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/02d48ff0cee295b2bc7214b7d6872643f2d8e00b,02d48ff0cee295b2bc7214b7d6872643f2d8e00b,"build(preferences): Add two buttons to the bottom of the general preferences page that clear email and clear all .nylas

Summary:
Wanted a way to reset configuration settings. I added button in N1 general preferences to remove `.nylas` folder and reboot titled 'Reset Accounts and Settings' as well as one to exclusively remove `.nylas/edgehill.db` titled 'Reset Email Cache'.

Not sure about the wording of the button descriptions.

Test Plan: Tested with different file paths on my machine. Was going to write tests, but the two buttons just call previously tested functions onClick -- rimraf and fs.unlink. Testing might be excessive?

Reviewers: bengotow, juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D3127"
annielcook,2016-07-26 22:55:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/77730d04bb8c7906d3832a6ce42f8c2cc7433fb6,77730d04bb8c7906d3832a6ce42f8c2cc7433fb6,"build(onboarding): Add input with gmail auth url

Summary:
Added animation and input with url of gmail auth for users where the broswer redirect doesnt work.
Still need to finish up some minor styling.

style(onboarding): add input with link for gmail auth if browser redirect doesnt work

Test Plan: testing on my local install

Reviewers: juan

Reviewed By: juan

Subscribers: sdw

Differential Revision: https://phab.nylas.com/D3119"
jstejada,2016-07-26 22:53:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8f34fa7474e07c3276ccf0d055b7b6b6210aa27,a8f34fa7474e07c3276ccf0d055b7b6b6210aa27,build(tools): Add eslint_d package for faster linting in text editor
jackiehluo,2016-07-26 22:46:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/950126e6c85d4024b72228fa465c34a9f6f1dcb7,950126e6c85d4024b72228fa465c34a9f6f1dcb7,fix(identity): Modify language around subscribing
annielcook,2016-07-26 22:31:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/665f2c8dd1bf00ef43c8c5d25ac59a87314d873f,665f2c8dd1bf00ef43c8c5d25ac59a87314d873f,bump(submodule)
annielcook,2016-07-26 22:01:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c452aaf4765f23a7c853b5b7a91db3d5d940726,4c452aaf4765f23a7c853b5b7a91db3d5d940726,"fix(downloads): Add a check to see if last download directory is different, only show item in folder if true

Summary:
Each file downloaded would open finder and show the path to the file. Users were reporting that this felt excessive when downloading multiple files all to the same location #1044. I added a check to see if the path was the same as the previous file path, and only showed the item in the folder if these differed.

Also added tests for this in file download store.

test(downloads): Add tests for showing item in folder only if lastDownloadDirectory differs

Test Plan: Added tests to file-download-store-spec

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3121"
hallamoore,2016-07-26 20:59:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/7626bf6728b2a356c64ee80ac38270461e8f99fb,7626bf6728b2a356c64ee80ac38270461e8f99fb,"Ignore thread labels that aren't listed in the account's labels

Summary:
An ""important"" label has been showing up for some users, rather than the usual
important markers. We generally have a list of labels that are hidden, including
the important label, but this list starts with the labels for the entire account.
In these cases, we believe gmail stopped returning the important label for the
accounts, while we still had threads marked as important. This resulted in the
important label not being properly hidden. To fix this, we added a clause that
ignores labels if they are not in the account's list of labels.

Test Plan: Tested locally

Reviewers: annie, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3123"
grinich,2016-07-23 20:03:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/02c33ea3f3914301c6874a2ced7bc5deb1f7956d,02c33ea3f3914301c6874a2ced7bc5deb1f7956d,Update ISSUE_TEMPLATE.md
jathpala,2016-07-23 13:32:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/525e6c644438350a8376687ba357d3cef631d7f4,525e6c644438350a8376687ba357d3cef631d7f4,"Re-enable all tests by unfocusing the test suite (#2667)

A previous commit (ad04775) added an fdescribe() to one of the tests in
draft-helpers-spec. This changes that to a regular describe() so that
all tests will be run when running ./N1 --test."
jstejada,2016-07-22 21:26:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ae78ebdd93d2fe1880ac7cf06acb43cacd43718,0ae78ebdd93d2fe1880ac7cf06acb43cacd43718,fix(mail-merge): Bump submodule
jstejada,2016-07-22 21:22:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b020765e90fa96c3652138864f3169dae23831b,7b020765e90fa96c3652138864f3169dae23831b,"fix(mail-merge): Keep column links state properly in sync #2493

Summary:
See https://phab.nylas.com/D3112 for full description
- Update EditorAPI.insertCustomComponent to take a pre-generated
anchorId

Test Plan: Unit tests + manual

Reviewers: bengotow, halla, jackie

Reviewed By: jackie

Differential Revision: https://phab.nylas.com/D3113"
pabloniklas,2016-07-22 18:25:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/941708d419b43d7b095612730dc961c11a484559,941708d419b43d7b095612730dc961c11a484559,"Linux Mint 18 support. (#2659)

Allows the deb package to be installed on Linux Mint 18."
jackiehluo,2016-07-22 18:00:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/a471e81d4193185248c9657f148ca2f74a9eaecc,a471e81d4193185248c9657f148ca2f74a9eaecc,fix(self-hosting): Check for env properly
jackiehluo,2016-07-22 05:53:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/d916e1d8fa2c5b1ec0a54c7f72cd41f8b8c9c955,d916e1d8fa2c5b1ec0a54c7f72cd41f8b8c9c955,fix(lint): Fix linter issues
jackiehluo,2016-07-22 05:45:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b4af5b45e2b019d19fda468fdaa426296a4d4c3,2b4af5b45e2b019d19fda468fdaa426296a4d4c3,update(readme): Fix typo
jackiehluo,2016-07-21 22:56:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad047755e66e2d9529418bfbcaff0ae00b517cdd,ad047755e66e2d9529418bfbcaff0ae00b517cdd,fix(quoted-text): Check that message is reply
jackiehluo,2016-07-21 22:37:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba323913510e9d01550f12ea2ede8c34b43487f6,ba323913510e9d01550f12ea2ede8c34b43487f6,spec(quoted-text): Fix broken tests :disappointed:
jackiehluo,2016-07-21 22:46:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/c4f9bcdf661f51456c01a3a4e8edc5aa5bef23ce,c4f9bcdf661f51456c01a3a4e8edc5aa5bef23ce,fix(self-hosting): Set identity correctly
jackiehluo,2016-07-21 20:59:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/98e351ebeb4857a77d256034fb96b5665dc45b48,98e351ebeb4857a77d256034fb96b5665dc45b48,"feat(self-hosting): Add onboarding flow for self-hosted sync engine

Summary:
Adds a fun new UI for adding accounts to the sync engine. After creating your sync engine instance, all you have to do is auth your accounts on the command line and then enter the URL/port number in this flow. That pulls all of your accounts from the `/accounts` endpoint, mocks an identity token, and edits your `config.json` properly.

TODO: Update the docs in the repo and revert the PR with the temporary fix.

Test Plan: Tested locally.

Reviewers: bengotow, halla, juan

Reviewed By: halla, juan

Differential Revision: https://phab.nylas.com/D3114"
bengotow,2016-07-21 18:56:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/e40239f6b9ed9a1fc5154fd466e89f59b0331368,e40239f6b9ed9a1fc5154fd466e89f59b0331368,fix(message-body): Sanitize contenteditable attrs out of message bodies
bengotow,2016-07-21 17:58:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/7af69e3bb95c38d041d06385f4d22d37aaeed1ea,7af69e3bb95c38d041d06385f4d22d37aaeed1ea,fix(dev): Tiny script that allows you to install eslint packages into main node_modules folder (for Atom)
hallamoore,2016-07-20 19:02:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ca9f7667c5c1a58f3c04a29e76f9df9b8838293,7ca9f7667c5c1a58f3c04a29e76f9df9b8838293,"Implement a participant cap for multi-send, add multi-send unit tests

Summary:
Prevent hitting SMTP rate limit with multi-send
Some users were hitting the SMTP rate limit when sending messages
with multi-send to too many recipients. There is a backend patch
to help with this, but we decided it would be useful to limit it
on the client side as well.

Test Plan: Added unit tests

Reviewers: jackie, juan

Reviewed By: jackie, juan

Differential Revision: https://phab.nylas.com/D3109"
annielcook,2016-07-21 18:18:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/d55616ca14db7e2050e53069b0442894ff12d7e4,d55616ca14db7e2050e53069b0442894ff12d7e4,"fix(signatures): Added alias to accounts rendered in dropdown

Summary:
Extended default signatures to also be associated with aliases in the signature
preference page. Also fixed some styling with the signature dropdown button in its blurred
state on the popout composer.
fix(signatures): Fixed styling for signature compuser button on popout when blurred

test(signatures): Updated tests to support and cover extending signatures to alias

Test Plan: Modified existing tests to work with these changes

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3111"
jackiehluo,2016-07-21 07:14:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/87dba382a8779c95c0a4e975cf5af8cc8a667661,87dba382a8779c95c0a4e975cf5af8cc8a667661,"fix(composer): Stop parsing quoted text on each keystroke to prevent composer lag

Summary: We used to parse the quoted text on each keystroke in the composer for a reply so that we could continue to determine what was quoted text. However, that resulted in dramatically slow typing for replies to complex HTML emails. Now, the quoted text isn't a part of the reply until `prepareDraftForSyncback`, after all of the extensions have run their transformations—we use a marker to determine whether quoted text should be appended or not. The quoted text control is now a one-way operation—you can't hide the quoted text after showing it (Gmail-style).

Test Plan: Tested locally (but didn't run unit tests because they won't run on my machine...)

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3106"
bengotow,2016-07-20 21:59:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/e984a0c2226be7f2cf6a5f097ea481bed15cfc10,e984a0c2226be7f2cf6a5f097ea481bed15cfc10,fix(readme): Add Kleinstein description
bengotow,2016-07-20 19:33:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/43a8a1255b94a2a342965494604e87227d0a3eb0,43a8a1255b94a2a342965494604e87227d0a3eb0,fix(specs): Misc fixes
annielcook,2016-07-19 21:40:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/241d3e8d61dee7d3ff16fa4674187da0b6d19383,241d3e8d61dee7d3ff16fa4674187da0b6d19383,"fix(image): Prepend file:// to image paths to solve #621

Summary:
refactor(test): Fix file paths in message item body tests to be prepended with file://

Some inline images were not rendering as seen on (#621). The images were being correctly added to the
downloads folder, however, their path was being prepended with an unrelated base url. I hardcoded
file:// into the image paths so that they would always point to the local downloads folder.

Test Plan: Ran the specific tests for message item body and message item. Also checked in my email.

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3105"
annielcook,2016-07-19 18:39:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/cd1f39f2fa53e7aae53a8d7b9a4abf92f44cd194,cd1f39f2fa53e7aae53a8d7b9a4abf92f44cd194,"fix(email): Fix email body height bug #1280

Summary: Some emails were having their body height set to 0 if their height was dependent upon the iframe height -- e.g. body.height equals 100% or inherit. Added a check to see if height computed to 0px and if so, set the height to auto.

Test Plan: Tested with emails on my computer

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3100"
diklein,2016-07-19 03:31:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/34bf11d9c099a8b743bd6d44ab1b598b628a99b8,34bf11d9c099a8b743bd6d44ab1b598b628a99b8,"Update README to include Kleinstein theme (#2645)

This theme hides the account list sidebar."
jackiehluo,2016-07-19 00:48:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/897a331e2531f287503eb400bca2086b8cd67406,897a331e2531f287503eb400bca2086b8cd67406,:art:(composer): Add newline for replies
bengotow,2016-07-18 23:57:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f39ed8011cc68babfd06dce79b63a7394b033a33,f39ed8011cc68babfd06dce79b63a7394b033a33,fix(menus): Adopt new `pasteandmatchstyle` menu role
bengotow,2016-07-18 23:53:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/12b9b910c47a84f136ce394da521265b7d543852,12b9b910c47a84f136ce394da521265b7d543852,fix(linux): Support unread counts in Unity #408
bengotow,2016-07-18 23:51:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/a85cc4d896b7647409cee804d9f08a306358b1d4,a85cc4d896b7647409cee804d9f08a306358b1d4,bump(version): 0.4.46 and Electron 1.2.7
bengotow,2016-07-18 21:25:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/310af1727dd2f5619370141cfe6467ca5fc9e57a,310af1727dd2f5619370141cfe6467ca5fc9e57a,Merge branch 'master' of ssh://github.com/nylas/N1
bengotow,2016-07-18 21:25:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/893feb2ad85bb45dc432b67128a5203bad2840c9,893feb2ad85bb45dc432b67128a5203bad2840c9,fix(contacts): Support unicode characters in domains #1920
jathpala,2016-07-18 19:32:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/1392887c831d92fbcb2c1c57d2aceade08860934,1392887c831d92fbcb2c1c57d2aceade08860934,"Pasting into a participant field now preserves any text already there (Issue #2410) (#2635)

This modifies the behavious when pasting into the to, cc or bcc fields of a new draft.
Any text already in the input field is not automatically deleted. Rather the pasted
text is added to the already existing text. If the new contents of the email field now
matches as an email address (based on RegExpUtils.emailRegex().test()), then the address
is immediately tokenized. If the new input text doesn't match as an email, just append
the new text and wait for further input."
bengotow,2016-07-16 02:01:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9f78968b15896a496624e12e4609750cd2421f5,f9f78968b15896a496624e12e4609750cd2421f5,"Use defaultValue as a template, fix critical sync issue"
bengotow,2016-07-15 23:28:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/549ced612825ff681f7927db4e17812d9620e853,549ced612825ff681f7927db4e17812d9620e853,"Revert change, @evan’s fix is better"
bengotow,2016-07-15 23:25:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/18a8e5f09aff4b5f8a2ad62d7113fa41cc21ba85,18a8e5f09aff4b5f8a2ad62d7113fa41cc21ba85,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-15 23:25:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/7efe5db7e941c7781bdeefd89f83b9e627037914,7efe5db7e941c7781bdeefd89f83b9e627037914,USE_CONSOLE_LOG for simple console logs
hallamoore,2016-07-15 23:09:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/8140076e17391271d6ae106d8ed2f64aaffa6e9d,8140076e17391271d6ae106d8ed2f64aaffa6e9d,"Remove auto-scaling for the collapsed dashboard view, at least for now."
bengotow,2016-07-15 20:29:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/5095f0626fcf842c030244660325f73608c4b8e1,5095f0626fcf842c030244660325f73608c4b8e1,Merge branch 'master' of ssh://github.com/nylas/k2
hallamoore,2016-07-15 20:19:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/0dad9bf7fa19cd76c195b897ac9a269cd9dbeb92,0dad9bf7fa19cd76c195b897ac9a269cd9dbeb92,"Auto-scale MiniAccounts in the collapsed, ungrouped dashboard view"
emorikawa,2016-07-15 20:15:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/dffb87bd4af7ed9ae02a58c4c6dd94e096ae8534,dffb87bd4af7ed9ae02a58c4c6dd94e096ae8534,Report errors earlier
emorikawa,2016-07-15 01:36:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e0bcc5effdb487f79f68e5656fc16e4846c0338,5e0bcc5effdb487f79f68e5656fc16e4846c0338,Quieter logging on dev
bengotow,2016-07-15 19:39:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/e13097045ba72782abbc82788a7d6d0b50eac736,e13097045ba72782abbc82788a7d6d0b50eac736,Log boxname and category name as well
hallamoore,2016-07-15 19:30:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/0abd70c7466bbc985e5a969fb2e263694e3f59c7,0abd70c7466bbc985e5a969fb2e263694e3f59c7,Add option to group by process in collapsed dashboard view
bengotow,2016-07-15 18:47:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/579fe43fdf6738addb0c2214104de73ffd2760d5,579fe43fdf6738addb0c2214104de73ffd2760d5,"Log when recovering from uidvalidity, don’t do it on first sync"
bengotow,2016-07-15 18:14:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/95793877c6bd61b526c480e6a7fcb6c89f62f094,95793877c6bd61b526c480e6a7fcb6c89f62f094,"Do file creation in a transaction, and with fewer saves"
bengotow,2016-07-15 17:23:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5bada04d35e0f1d5cefbc5d4b2d5c44b7d005ff,e5bada04d35e0f1d5cefbc5d4b2d5c44b7d005ff,Do contact insertion in a transaction
bengotow,2016-07-15 17:22:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/979401883d3972a7a43053319199d9a893ce5be6,979401883d3972a7a43053319199d9a893ce5be6,Make db connection pools smaller
bengotow,2016-07-15 17:07:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac3f96e2d41be66ab3eb3c403a2fd0b0bf90931c,ac3f96e2d41be66ab3eb3c403a2fd0b0bf90931c,Fix accounts syncing in a hard loop due to redis loopback
bengotow,2016-07-15 16:46:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/13a723e6639e7e6676e4b0e3aa430c1c409e299b,13a723e6639e7e6676e4b0e3aa430c1c409e299b,Correctly detect condstore to lower db load
bengotow,2016-07-15 02:32:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/13879db9c83dfbc0ec002bd396fcf41acae207ae,13879db9c83dfbc0ec002bd396fcf41acae207ae,Wait until tables are created before queueing sync
bengotow,2016-07-15 01:52:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/08c7ca8b0daa78a31ebc79d578bd62edb7ed3abf,08c7ca8b0daa78a31ebc79d578bd62edb7ed3abf,Use EC2 instance ID instead of hostname
bengotow,2016-07-15 01:33:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/5062f8d02b72924fef62f354aee550e77b209615,5062f8d02b72924fef62f354aee550e77b209615,Sort process ids
bengotow,2016-07-15 01:18:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/1996666516cd790aaf390a6e4c77695f6b7de9d1,1996666516cd790aaf390a6e4c77695f6b7de9d1,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-15 01:18:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/daaa67818df4fd982f22ab817f2a8d23b0dbab65,daaa67818df4fd982f22ab817f2a8d23b0dbab65,"Add missing unique indexes, only create tables when authing account"
hallamoore,2016-07-15 01:01:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e2ae255196cdbea0b6b84d136e9d4a14b0057d0,6e2ae255196cdbea0b6b84d136e9d4a14b0057d0,Add a sum line to the dashboard's process load counts
emorikawa,2016-07-15 00:36:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/45f132b7462ca06e5e547ecb1b78ed4595d2b3d9,45f132b7462ca06e5e547ecb1b78ed4595d2b3d9,Fix thread moving to support new Promises
bengotow,2016-07-15 00:34:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/a229ba1a90fb407969ba0b3f674fdba0e32151f4,a229ba1a90fb407969ba0b3f674fdba0e32151f4,Sort process entries on the dashboard
bengotow,2016-07-15 00:21:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ce7787632703c32bdcd49771f5b3647982caa4d,1ce7787632703c32bdcd49771f5b3647982caa4d,Disable sequelize logging
bengotow,2016-07-15 00:21:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d08faece3d4f1a251c55f2f8912ac04efa0566d,1d08faece3d4f1a251c55f2f8912ac04efa0566d,Fixes to still support sqlite
bengotow,2016-07-15 00:17:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f3ca2a9062569d6d91933d80b7cd9d35fe580a5,2f3ca2a9062569d6d91933d80b7cd9d35fe580a5,"Merge branch 'master' of ssh://github.com/nylas/k2

# Conflicts:
#	packages/nylas-core/hook-transaction-log.js
#	packages/nylas-core/models/account/transaction.js"
bengotow,2016-07-15 00:14:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/de3151cab4d006aace60874847bec4265ac0ee16,de3151cab4d006aace60874847bec4265ac0ee16,Move to single database with many tables for accts
emorikawa,2016-07-14 23:36:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/1eef4c3428c3f3a5bbf04031efbfedacb49de5f7,1eef4c3428c3f3a5bbf04031efbfedacb49de5f7,Remove logs and rename variables
annielcook,2016-07-14 23:28:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b3f5c8a91060cd5452b26b5724136638acdc22c,5b3f5c8a91060cd5452b26b5724136638acdc22c,fixed thread syncing
bengotow,2016-07-14 22:48:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea497f7ea2264e1dc49d521aabcd05cff0dc0a18,ea497f7ea2264e1dc49d521aabcd05cff0dc0a18,A few changes for upcoming db refactoring
hallamoore,2016-07-14 21:51:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b14d5f7e8dd2f99b7aeb82628c104284f76d4a7b,b14d5f7e8dd2f99b7aeb82628c104284f76d4a7b,Add process load counts to the dashboard
jstejada,2016-07-14 20:44:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/099e200ec5d40e01af722c99db205298336b960a,099e200ec5d40e01af722c99db205298336b960a,Only log sync errors if they are permanent errors
jstejada,2016-07-14 18:59:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/37b2323cc716b663246bf3227d8b424e6727d192,37b2323cc716b663246bf3227d8b424e6727d192,Add metric for sync errors
emorikawa,2016-07-14 18:40:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/0921df432b9af62e313f2238de23fb9702691c03,0921df432b9af62e313f2238de23fb9702691c03,Uses default from address
emorikawa,2016-07-14 18:34:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ce54c2a34de9358599f8f564a01fd71589b7ec8,6ce54c2a34de9358599f8f564a01fd71589b7ec8,Add send endpoint
jstejada,2016-07-14 18:20:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b58c11605cb6223b6657ef02d3143281b42e3daf,b58c11605cb6223b6657ef02d3143281b42e3daf,"Moves metrics into its own pkg to be able to instrument other services

- With the Metrics module inside nylas-core, and bc of our current lerna
setup, we required other modules like sequelize and redis before requiring
newrelic, thus preventing them from being properly instrumented"
jstejada,2016-07-14 17:49:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/592b2af986c687d885bae1d54ca7ed4af65377e0,592b2af986c687d885bae1d54ca7ed4af65377e0,Update metric type for `accounts_syncing_count`
jstejada,2016-07-14 17:39:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/16b91ea3941a9f7473f118002b8c802f43688e29,16b91ea3941a9f7473f118002b8c802f43688e29,Update metrics with signalfx - report # of syncing accts per host
emorikawa,2016-07-14 05:02:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/eebc6c5c9b3a617f5b67a1caac8eea1d9738723d,eebc6c5c9b3a617f5b67a1caac8eea1d9738723d,fix(delta): add N1 token to delta stream connection
jstejada,2016-07-14 02:07:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c900b072d26911ede866a65dc3753179bb1a3bb,0c900b072d26911ede866a65dc3753179bb1a3bb,"Add new relic to all pkgs + Revert to PromiseUtils methods

- PromiseUtils does not conflict with newrelics changes to Promise
- Other misc fixes"
bengotow,2016-07-14 01:26:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec9f8581f7679af029df75e98c14d1aea4a960ab,ec9f8581f7679af029df75e98c14d1aea4a960ab,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-14 01:26:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/66951b4b1a675a2a8c57c40afe7a43706f40fa83,66951b4b1a675a2a8c57c40afe7a43706f40fa83,Add more logging to process claiming
annielcook,2016-07-14 01:18:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a07174cc4e4678d0900085ad47e1e38dacfc4623,a07174cc4e4678d0900085ad47e1e38dacfc4623,fixed json parsing of message
hallamoore,2016-07-14 01:00:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/070670137874422b0b917655c36ed435364cf34d,070670137874422b0b917655c36ed435364cf34d,"Make the grayAfter time more appropriate for production, 10 mins"
hallamoore,2016-07-14 00:42:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/49f475cdd1fd6c0e8be1b243e125e04e08d32429,49f475cdd1fd6c0e8be1b243e125e04e08d32429,Add collapsed dashboard view
jstejada,2016-07-14 00:40:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c1704ac8efe1e02fc85d36f1850cff7b3c31d23,5c1704ac8efe1e02fc85d36f1850cff7b3c31d23,Fix thenReturn + misc logger fixes
bengotow,2016-07-14 00:34:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/07e3f3ab198de17a1bc3a1e277c3d5eca5faeb76,07e3f3ab198de17a1bc3a1e277c3d5eca5faeb76,Make dashboard boxes slightly smaller
bengotow,2016-07-14 00:25:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a05e69e4c43fb79fce68524a36bc691272913da,2a05e69e4c43fb79fce68524a36bc691272913da,Sort IDs as numbers not strings
bengotow,2016-07-14 00:22:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/b43b623ca66f9f3d84000aa954312c428f830b7d,b43b623ca66f9f3d84000aa954312c428f830b7d,Expand promise utils
jstejada,2016-07-13 23:54:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/1eeb9128c05b95f1c143f447c16f79851414c5f8,1eeb9128c05b95f1c143f447c16f79851414c5f8,"Merge pull request #2 from nylas/linux-readme

Add Linux setup instructions to README.md"
jstejada,2016-07-13 23:54:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/b60595f0f860132db826071b6f5bca7de5e7f3cc,b60595f0f860132db826071b6f5bca7de5e7f3cc,"Merge pull request #3 from nylas/remove-bluebird

Remove bluebird"
bengotow,2016-07-13 23:42:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/35c32a3645a5e11e6b647b895a510e051dd0ac75,35c32a3645a5e11e6b647b895a510e051dd0ac75,"After authing an account, close IMAP connection"
jstejada,2016-07-13 23:23:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab9c01a249c40ceeedb19f053003b186251c4941,ab9c01a249c40ceeedb19f053003b186251c4941,"Remove bluebird

- Implement `each` and `promisifyAll` + other bluebird fns"
emorikawa,2016-07-13 23:31:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/87905d0145c7f0be8379ffb960c513dbb8fca982,87905d0145c7f0be8379ffb960c513dbb8fca982,Fix transaction log to ignore syncState changes
hallamoore,2016-07-13 23:31:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/fcbaac302b49dca3aea813f608133fd901a0fb97,fcbaac302b49dca3aea813f608133fd901a0fb97,Change dashboard error appearances
hallamoore,2016-07-13 23:08:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/971b64b4c299758cc942fd55c27c89b073f15900,971b64b4c299758cc942fd55c27c89b073f15900,"Add other dashboard optimizations

Fix typo in Account's shouldComponentUpdate method
Consolidate intervals into custom window events
Manually update ElapsedTime contents"
bengotow,2016-07-13 23:20:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/93942e792dcf8d54c1a4b544ddfbb0d39e98bb74,93942e792dcf8d54c1a4b544ddfbb0d39e98bb74,Also conert imap errors in createConnectionPromise
emorikawa,2016-07-13 22:57:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c33c4976f1fc4e24532912b93dbe56d6f488da4,8c33c4976f1fc4e24532912b93dbe56d6f488da4,Better IMAP Error handling
emorikawa,2016-07-13 22:55:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/192f6a75b689af3b5823b6688e8c9fc6f0c70129,192f6a75b689af3b5823b6688e8c9fc6f0c70129,fix(login): fix error thrown when login fails for IMAP
hallamoore,2016-07-13 21:53:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b9933b51469611bba0d2773748557efb2be0cf6,0b9933b51469611bba0d2773748557efb2be0cf6,Re-render accounts in more scenarios and update onWebsocketConnectedFake
hallamoore,2016-07-13 21:34:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/b03b8b537d7fd9b2b003451dc9a6491052727a53,b03b8b537d7fd9b2b003451dc9a6491052727a53,"Optimize dashboard rendering

Add version to local copy of account and only re-render entire account
if the version is different. Create an ElapsedTime component that
re-renders on its own, and update SyncGraph to re-render on its
own as well."
bengotow,2016-07-13 19:39:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5e3ddb44596d7d5158ba61ec58adb6e299cd6ce,a5e3ddb44596d7d5158ba61ec58adb6e299cd6ce,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-13 19:39:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/a11ee2987bacbd0eaf14d194fbf17c3f50553144,a11ee2987bacbd0eaf14d194fbf17c3f50553144,"Change proxy to honor null values, create helper for open box name"
emorikawa,2016-07-13 19:37:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d64affc52c495679349af96760e3b59524eae50,3d64affc52c495679349af96760e3b59524eae50,Delta stream adhere to old Nylas spec
hallamoore,2016-07-13 19:35:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2f6dec35ac7127994824ab6184cdc553cb8814c,f2f6dec35ac7127994824ab6184cdc553cb8814c,"Add dashboard optimizations

Make account elements absolutely positioned and opaque
Send account updates all at once, at timed intervals"
jstejada,2016-07-13 18:58:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f72ab7f14ae08137f727fc7006e71c582d44f6d,7f72ab7f14ae08137f727fc7006e71c582d44f6d,"Add loggly logging service to test it out

- Adds env to all logs, cleans up code a bit"
bengotow,2016-07-13 18:42:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffc2593c4e09c4630500b7b4f082c00680eb215b,ffc2593c4e09c4630500b7b4f082c00680eb215b,Log all box attributes to help track down bug
emorikawa,2016-07-13 18:41:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c0c4ee61e988d5c6e33fb72fee2796a92019096,1c0c4ee61e988d5c6e33fb72fee2796a92019096,Add redis-server back into pm2
annielcook,2016-07-13 18:35:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e19cd84f5a19392755f3dd4f62c5bfd76de9fbe,6e19cd84f5a19392755f3dd4f62c5bfd76de9fbe,Added view query param for contact and message routes
bengotow,2016-07-13 18:30:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/7056a4b8f487ab5de3dbe6be84662efbafb8fde8,7056a4b8f487ab5de3dbe6be84662efbafb8fde8,"Fix bug with accounts that have uidmin=0, not 1"
bengotow,2016-07-13 18:11:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecc8bd67d3c69534a79e4650bc1128718d3c0ce5,ecc8bd67d3c69534a79e4650bc1128718d3c0ce5,Clean up dashboard websocket code a bit
bengotow,2016-07-13 17:57:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/8629b5a055a4439a399b3d2b9c907219d355c66a,8629b5a055a4439a399b3d2b9c907219d355c66a,New function to stub dashboard view
bengotow,2016-07-13 01:33:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea4d5d0054613110ce33b34a133c6e5ec8576fab,ea4d5d0054613110ce33b34a133c6e5ec8576fab,Merge branch 'master' of ssh://github.com/nylas/k2
annielcook,2016-07-13 01:31:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/17f920fb90d6100a8091e29ed3ee15a073a5b1d3,17f920fb90d6100a8091e29ed3ee15a073a5b1d3,Ordered inbox messages chronologically
bengotow,2016-07-13 01:32:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/eac4f7243165815333e9a292706c38bcb7473c46,eac4f7243165815333e9a292706c38bcb7473c46,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-13 01:31:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/e89975456b6b28a089accecb50df30af70bb480d,e89975456b6b28a089accecb50df30af70bb480d,Fix scenario where sync worker is re-assigned the same account before fully releasing it
emorikawa,2016-07-13 01:30:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/e658f066dd0ea90ddbb62175e1bd020e032bcb80,e658f066dd0ea90ddbb62175e1bd020e032bcb80,Change transaction schema to match current API
hallamoore,2016-07-13 01:26:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ce430cd2a2c1ed723ed6b9c3b693ddb1516ab36,1ce430cd2a2c1ed723ed6b9c3b693ddb1516ab36,Add an auto refresh option to the dashboard's syncback requests modal
hallamoore,2016-07-13 00:27:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e790a0e155507cea1009a210352882e7394c83d,8e790a0e155507cea1009a210352882e7394c83d,"Spruce up the dashboard

Consloidate modal functionality into its own component and make
general appearance fixes, especially with the Syncback Request
Details."
bengotow,2016-07-13 01:03:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e8623d38332c99aa0a74d6eb2301db9f55e6b90,3e8623d38332c99aa0a74d6eb2301db9f55e6b90,Move charset definition to single location
bengotow,2016-07-13 00:41:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/a62e858389ec8e1fd9334b7ca934caadd1e53dd7,a62e858389ec8e1fd9334b7ca934caadd1e53dd7,Make charset explicit on connection and models
bengotow,2016-07-12 23:46:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/efc8d8ba12d0f11f49745ffd33b19ad1ab37c25f,efc8d8ba12d0f11f49745ffd33b19ad1ab37c25f,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-12 23:46:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/562cedf971707913036bc70c302bb3d0c0f998a5,562cedf971707913036bc70c302bb3d0c0f998a5,Fix sync worker stopping forever on errors
annielcook,2016-07-12 23:26:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/83a6a8008b5533e4fe6be427c406adbaffacc1e0,83a6a8008b5533e4fe6be427c406adbaffacc1e0,Add thread id to message model
bengotow,2016-07-12 23:24:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d7343eb918f879f6bf86d6c8c40c0b1260943bc,9d7343eb918f879f6bf86d6c8c40c0b1260943bc,Fix UTF7 reference - prod will not use ssh
bengotow,2016-07-12 23:12:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae082c5b53fa0a5b9416ab4fe3475586e59d66db,ae082c5b53fa0a5b9416ab4fe3475586e59d66db,Fix support for Gmail accts with non-english folders
bengotow,2016-07-12 23:11:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b1e9564cf997c992c784dbe5c6bdda1518a8945,8b1e9564cf997c992c784dbe5c6bdda1518a8945,Fix UTF7 support — module didn’t support Node6
bengotow,2016-07-12 22:23:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d92438d57704a22f7f86808a321499cfdfeec43,7d92438d57704a22f7f86808a321499cfdfeec43,"Change firstSyncCompletion to string, cast to int for JSON"
bengotow,2016-07-12 22:04:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/dfa16fb5fc2f503570658c498517178bb9c54b8b,dfa16fb5fc2f503570658c498517178bb9c54b8b,Allow firstSyncCompletion to be null
bengotow,2016-07-12 20:24:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/84d89792656bdb3cf8f897dd7e6ac896e05408dd,84d89792656bdb3cf8f897dd7e6ac896e05408dd,Add ability to auth gmail account via `/auth`
hallamoore,2016-07-11 23:16:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e6e5e95b95c89173d53f29fbb05592e5df5cd05,3e6e5e95b95c89173d53f29fbb05592e5df5cd05,Add dashboard functionality to clear sync errors
bengotow,2016-07-12 19:15:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/674da272963644254873a9301166a130d4c41d5d,674da272963644254873a9301166a130d4c41d5d,Fix flipped errored / ended handlers
carsonip,2016-07-12 19:03:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/347fcd8c2dc3ab859d101b47a90a1f4fd9122c02,347fcd8c2dc3ab859d101b47a90a1f4fd9122c02,"Fix incorrect port number when using https (#2600)

When APIRoot is using https, the port will forced to be 443 even when APIRoot
indicates another port. This is because of the line options.port = 443
overwriting the correct options.port extracted by url.parse. This is fixed by
removing the problematic line. The default port is still 443 if you look into
https.js. In case we want a different default port in the future, we can do
options.port = options.port || 443."
bengotow,2016-07-12 16:53:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0a6ec066bb1ecd63094a78e54b4742a1a544ebf,b0a6ec066bb1ecd63094a78e54b4742a1a544ebf,Sync non-active accounts more infrequently
bengotow,2016-07-12 08:34:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/c4736cb4d18061a38df8553c2dd6acf0434b3001,c4736cb4d18061a38df8553c2dd6acf0434b3001,Copy test_accounts.py into curl format for easy testing
bengotow,2016-07-12 08:33:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac627f1580dd3e0849889d0993f8132902f05843,ac627f1580dd3e0849889d0993f8132902f05843,"Remove use of Rx.toPromise(), which wasn't behaving as expected"
bengotow,2016-07-12 07:59:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/b44272621d99f9bcaa1a25736c62b62745710b81,b44272621d99f9bcaa1a25736c62b62745710b81,"Misc cleanup, put account ids on dashboard"
bengotow,2016-07-12 04:38:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/4fb848e91f4452cf0f5513d9edccdaf232750835,4fb848e91f4452cf0f5513d9edccdaf232750835,fix for re-authing the same account
spang,2016-07-12 01:36:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/caab8474f76c9342471466a776b552c105cc085b,caab8474f76c9342471466a776b552c105cc085b,Add Linux setup instructions to README.md
annielcook,2016-07-12 01:30:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/87091a414ad921465c03e877520671921a339180,87091a414ad921465c03e877520671921a339180,Merge branch 'master' into contacts
annielcook,2016-07-12 01:30:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5dce43da7634017369427fd46681984fa28742a,c5dce43da7634017369427fd46681984fa28742a,Merge branch 'master' of github.com:nylas/K2
annielcook,2016-07-12 01:30:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/d575e63ede6b983865ba9b0ae7b932d90d4d7248,d575e63ede6b983865ba9b0ae7b932d90d4d7248,replaced console logs with new logger
bengotow,2016-07-12 01:24:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/73fc371825f2cbfbe7bb289306da308a9aa85de5,73fc371825f2cbfbe7bb289306da308a9aa85de5,Make the graphs on the dashboard retina 💄
emorikawa,2016-07-12 01:16:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/52c04eca8cd1d6c679d347735e7fd521ef56345f,52c04eca8cd1d6c679d347735e7fd521ef56345f,feat(analytics): add Sidebar Opened & Sidebar Closed events
emorikawa,2016-07-12 01:07:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/666169386041464c5bc1c0d24ffc0ebf6f5015d3,666169386041464c5bc1c0d24ffc0ebf6f5015d3,fix(onboarding): Fix Rx.Observable.fromQuery not defined bug
jstejada,2016-07-12 00:57:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/afeb0e7b27ad9aa1f5d0e9730b6eb2420ce4f188,afeb0e7b27ad9aa1f5d0e9730b6eb2420ce4f188,"Create one CloudWatch stream per host

- This prevents `InvalidSequenceTokenException` when running in
production with multiple machines in an elastic beanstalk environment
- See
https://github.com/mirkokiefer/bunyan-cloudwatch/issues/1#issuecomment-193116799"
jstejada,2016-07-12 00:42:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/413a77c3232157673b7b0d27bda17adfa66a9c67,413a77c3232157673b7b0d27bda17adfa66a9c67,Log unhandled errors in api and sync
jstejada,2016-07-12 00:04:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/039648bae84a9da8d40e0b2e79e150b074161cae,039648bae84a9da8d40e0b2e79e150b074161cae,Add bunyan-prettystream to regular dependencies
bengotow,2016-07-11 23:57:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/826db2e6f4516cdf169d894e1df378b3ea69566a,826db2e6f4516cdf169d894e1df378b3ea69566a,Remove redis from pm2
bengotow,2016-07-11 23:56:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/74430dd80e6de2ea3c0b205a32c63cc7473f1d7f,74430dd80e6de2ea3c0b205a32c63cc7473f1d7f,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-11 23:56:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/492ac21bb6874bc2a61485a2bd7b605519ee8463,492ac21bb6874bc2a61485a2bd7b605519ee8463,Primitive account deletion via DELETE /account
annielcook,2016-07-11 23:42:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/caee5dbef0d6186fe6690c22b06aef968984364c,caee5dbef0d6186fe6690c22b06aef968984364c,Merge branch 'master' of github.com:nylas/K2 into contacts
jstejada,2016-07-11 23:40:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8b8dfb87f381380f78055064b54624a724b4adb,f8b8dfb87f381380f78055064b54624a724b4adb,"Revert to running pm2 in no-daemon mode in dev

- Add a stream for pretty logging in dev mode"
annielcook,2016-07-11 23:37:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/1fc30fa8104d1733df1407be2ef5ccbf5fe4a801,1fc30fa8104d1733df1407be2ef5ccbf5fe4a801,Merge branch 'master' of github.com:nylas/K2
annielcook,2016-07-11 23:37:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e673573fcdc5bf3d96af89de7f35f92b26dba26c,e673573fcdc5bf3d96af89de7f35f92b26dba26c,added folder view api route
jstejada,2016-07-11 23:33:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae51646de62dc2a46ddbc2b1544f2531100b7b0f,ae51646de62dc2a46ddbc2b1544f2531100b7b0f,Comment out new relic for now
jstejada,2016-07-11 22:50:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/2dc31cb576cdf2dd6dbae0f23b494e2978a0bc10,2dc31cb576cdf2dd6dbae0f23b494e2978a0bc10,Add number of syncing accounts to sync process manager heartbeat
bengotow,2016-07-11 23:02:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e0cd92bad7fe719178586ae7064deb99a3d965b,8e0cd92bad7fe719178586ae7064deb99a3d965b,Require a logger when instantiating a connection
bengotow,2016-07-11 23:01:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/06d31b4d49e3677ca8fc6735da89e30b34445594,06d31b4d49e3677ca8fc6735da89e30b34445594,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-11 23:01:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c63268eecfb39890d2b64b873cdb84c8e646797,3c63268eecfb39890d2b64b873cdb84c8e646797,Return a new token for existing account instead of duplicating accounts
jstejada,2016-07-11 22:46:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/d4cd2510db76c5d9dcfc17cf5755d0c93852c1a5,d4cd2510db76c5d9dcfc17cf5755d0c93852c1a5,Fix pm2 run scripts
jstejada,2016-07-11 22:40:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/960dbdeb8f995d209e4cde7e6ce0be446e44633b,960dbdeb8f995d209e4cde7e6ce0be446e44633b,"Update logger for sync process manager

- Log identity data always"
bengotow,2016-07-11 22:22:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/5085730902d444d299684ea2f4d81c5029ef73fa,5085730902d444d299684ea2f4d81c5029ef73fa,"Merge pull request #1 from nylas/contacts

Build(contacts): built contact model, added routes and processor"
hallamoore,2016-07-11 22:06:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc10ff453e57c9375ba6c50a1909456fb156de6a,bc10ff453e57c9375ba6c50a1909456fb156de6a,Change stop script to use pm2 stop command instead of delete
hallamoore,2016-07-11 21:16:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/04ab0d9034f8e0cc38e1093a964d7c353ba6263f,04ab0d9034f8e0cc38e1093a964d7c353ba6263f,"Change firstSyncCompletedAt to firstSyncCompletion, now explicitly 14 bytes."
hallamoore,2016-07-11 21:12:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/0860f3027c87e2514fcbe4f947554f14542df158,0860f3027c87e2514fcbe4f947554f14542df158,Fix two small errors
emorikawa,2016-07-11 21:23:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/1360599ffc921fb15a186cf585bbc4c13e1f1c69,1360599ffc921fb15a186cf585bbc4c13e1f1c69,Fix deafult test account email address
jstejada,2016-07-11 21:10:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7301f5dc5e72c36ea6460ca6e21a174fe23e641,b7301f5dc5e72c36ea6460ca6e21a174fe23e641,Fix more error handling in sync worker
annielcook,2016-07-11 20:48:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/5868fb520718f41e22ccf766171a4db368983d57,5868fb520718f41e22ccf766171a4db368983d57,make changes requested before pull
jstejada,2016-07-11 20:46:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ff596b5a7df2e52f444bff7cbee503668ff26cc,6ff596b5a7df2e52f444bff7cbee503668ff26cc,Properly log uncaight errors in sync worker
hallamoore,2016-07-11 20:27:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a63ace9e3f618a8e6873d1a86772e5eb330fc88,8a63ace9e3f618a8e6873d1a86772e5eb330fc88,Change config to watch just the 'packages' directory
hallamoore,2016-07-11 19:55:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/877a6bf6122da17aeff5c56b45e1ef470ad37106,877a6bf6122da17aeff5c56b45e1ef470ad37106,Add SyncbackRequest details to dashboard
annielcook,2016-07-11 19:28:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/39e5a2ee962238648af945260280d62541417434,39e5a2ee962238648af945260280d62541417434,"refactor(signatures): Removed old signature imgs and made static empty signatures page

Summary:
Refactored signature preferences page to allow more signatures than the previous 1-1 mapping for signatures and accounts. Created a multi select dropdown of the accounts for which a certain signature is set as default for. Added a button into the draft header From field to toggle between saved signatures.

refactor(signatures): Add basic add/remove capabilities to static

refactor(signatures): Hooked up signature actions and signature store for basic functionality

fix(signatures): Cleaned up signature store and started on multiselectdropdown

fix(signatures): Add multi signature toggle select to multiselect dropdown

build(signatures): Built framework for multiselect dropdown

build(signatures): Toggle button functionality for dropdown

build(signatures): Build multi select from components and add debounce

refactor(signatures): Move signature actions and signature store into flux

fix(signatures): Styled composer signatures button/dropdown and fixed preferences checkmarks

build(signatures): Finish main functionality, about to refactor composer signature button into injected component

fix(signatures): Changed position styles

fix(signatures): Fixed background color for dropdown button when blurred

build(signatures): Began to write tests for signatures store, preferences and dropdown

Test Plan: Wrote tests for preferences signatures, signature store, signature composer dropdown and refactored tests for signature composer extension. For signature composer extension I removed applyTransformsToDraft and unapplyTransformsToDraft and tested by sending emails with signatures to different providers to make sure the <signature> tag caused problems.

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3073"
jstejada,2016-07-11 19:12:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c4434c136902fa30be0ac30fc0565c5e7834b47,1c4434c136902fa30be0ac30fc0565c5e7834b47,Re-emit error events on bunyan log streams
emorikawa,2016-07-11 19:00:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/84815ce2fa884d6ebc3992003429dec38c5b0b17,84815ce2fa884d6ebc3992003429dec38c5b0b17,Add file watching to restart server
emorikawa,2016-07-11 18:48:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0d7902f9fb4b40549d794a28146439fd52cd728,c0d7902f9fb4b40549d794a28146439fd52cd728,Add npm run restart
jstejada,2016-07-11 18:47:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/98c17c9780f2e9c8627014c6462c0cf000f6ea6f,98c17c9780f2e9c8627014c6462c0cf000f6ea6f,Fix api logger decorator
jstejada,2016-07-11 18:43:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff334e169cebb9c1f8ef11ef366b5ab19c3a00cc,ff334e169cebb9c1f8ef11ef366b5ab19c3a00cc,Make npm start log output logs too
jstejada,2016-07-11 18:27:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/f648016c621463357a7fffb89299ca83ea1eb530,f648016c621463357a7fffb89299ca83ea1eb530,Lock logger versions
jstejada,2016-07-09 01:48:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/600245ebcb930f8b0e161b285c933f33e8b18e13,600245ebcb930f8b0e161b285c933f33e8b18e13,Fix cloudwatch config
bengotow,2016-07-11 17:56:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ce68e3dd4dda39fa0f659b1bb00d5bf1667dcee,4ce68e3dd4dda39fa0f659b1bb00d5bf1667dcee,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-11 17:56:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/93189b0f22f49d897d55b20858d41da8e4727e62,93189b0f22f49d897d55b20858d41da8e4727e62,Try adding newrelic logging
jstejada,2016-07-09 00:13:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/dce872fac8166f8102d197ef86bafb67395f1797,dce872fac8166f8102d197ef86bafb67395f1797,"Adds bunyan for json logging on every package!

- Bunyan logs json output, and added a stream to send our logs to
cloudwatch
- Replaces /all/ instances of console.log. Turned eslint rule back on,
so we don't use console.log ever again.
- Added npm scripts to view pretty logs"
annielcook,2016-07-09 00:09:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb20f8cecd149d40e7973d686da5ef1d4df095d7,cb20f8cecd149d40e7973d686da5ef1d4df095d7,resolved merge -- Accounts and contacts are now both added to serilaization
annielcook,2016-07-09 00:06:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a776e6cffe4fcd52b727f8c99f97a1a127ca93c,2a776e6cffe4fcd52b727f8c99f97a1a127ca93c,"Build(contacts): built contact model, added routes and processor"
bengotow,2016-07-08 23:59:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/14b5bef0a74ebc78a11f58e9cb87b25a66c7007f,14b5bef0a74ebc78a11f58e9cb87b25a66c7007f,Fix error handling on connection close
bengotow,2016-07-08 23:53:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/016bad67b949cd3628409c675fd5e3f960b6f41d,016bad67b949cd3628409c675fd5e3f960b6f41d,Temporarily patch /account to not check schema
bengotow,2016-07-08 22:36:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/26ac02e0bf78ed9ff3d0585fef1ef5acd8aac8ad,26ac02e0bf78ed9ff3d0585fef1ef5acd8aac8ad,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-08 22:36:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c122a57a32fe17937fe615ff13db513ea9281af,8c122a57a32fe17937fe615ff13db513ea9281af,Stop syncing in a hard loop
emorikawa,2016-07-08 22:33:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab8f1b4fbf50188dbaa6dd6d05be530b0e0b7c5d,ab8f1b4fbf50188dbaa6dd6d05be530b0e0b7c5d,Silent transactions if only syncState changes
bengotow,2016-07-08 21:55:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/53a2e7e56b8b27478b3dab96aa1d838ad0516a53,53a2e7e56b8b27478b3dab96aa1d838ad0516a53,"Add ping to dashboard, wait to get shared db"
bengotow,2016-07-08 21:41:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e348252ab53295a58eea71e0189d7ff55b42d6f,3e348252ab53295a58eea71e0189d7ff55b42d6f,Fix issue with default values — just implement in getters
bengotow,2016-07-08 20:49:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a341b6f02a076371e517a163bc1684e8537e50f,4a341b6f02a076371e517a163bc1684e8537e50f,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-08 20:49:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/17df581105e60e1e3c92d73496f0dbf9780c54a1,17df581105e60e1e3c92d73496f0dbf9780c54a1,"Use TEXT vs STRING, specify string column lengths"
courajs,2016-07-01 00:44:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3380508a62d4df26f82ff35f3f4afd2adfb931e,e3380508a62d4df26f82ff35f3f4afd2adfb931e,"Clear notifications when emails are read

Fixes #1393

The objects returned by `new Notification()` have  a `.close()` method.
So we can just keep a list of notifications that have been sent, and
close them when that message has been read.

Conflicts:
	internal_packages/unread-notifications/lib/main.es6"
courajs,2016-07-08 18:30:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d66cdbcac4722fd825d76eff907ba7ca1b39696,7d66cdbcac4722fd825d76eff907ba7ca1b39696,"Change pending unread notification stack to be a queue (#2517)

* Remove double negative from test label

It always takes me a second to read a double negative, and be sure I
understood correctly. It's also particularly troublesome for non-native
English speakers.

* Change pending unread notification stack to be a queue

Consider the case where a user launches N1, and has 3 unreads since
their last launch. Additionally, after N1 has launched, they begin
receiving a new mail every 2 seconds.

Current behavior would be a notification for 1 of the 3 unread emails,
then every 2 seconds a notification for the most recently received mail.
They would only finally receive notifications for the other 2 original
messages once they stopped getting new mail."
logandavis,2016-07-08 18:29:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1003fbac45172c95660647b08f724af89e289e4,d1003fbac45172c95660647b08f724af89e289e4,"pgp-plugin update (#2534)

* Fix private key email-adder, add ""no private key"" error

The decrypt UI is seriously confusing some people. This commit
adds an error message that should at least stop them from trying
to decrypt a message without a private key to speak of. Also,
there was a dumb hardcoded true in validAddress.

* Adds incorrect passphrase notification; enables carriage return for popover

The passphrase popover was woefully inadequate. It didn't tell users
when they had the wrong password - it just closed without saying anything -
and you couldn't even use carriage return to submit the password.
This commit fixes those mistakes by buffing out passphrase-popover.cjsx.

* Adds private key popover to decrypt button

The decrypt UI was confusing and didn't provide the user with
an option to get a key imported from the message view. This
mondo commit adds an entirely new popover so that the user
never again will be forced to go to the preferences page.

* Adds more forgiving encrypted block parsing

* Overhauls decryption error handling

The decrypt UI didn't clearly communicate error messages from the
failure in PGPKeyStore.decrypt up to the user. This commit adds
nice error surfacing as well as some pretty colors.

* Fix encrypt modal key miscount error via getKeyContents coercion

On Linux and Windows, fs.watch double-triggers on some actions in
the key folder, for reasons that aren't super clear. This was causing
issues where the encrypt modal would report not having a key loaded
even though the key was totally loaded and saved. This commit sort
of kludgily forces the modal to run getKeyContents for every key
it has saved right before it returns them all. This would probably
be better fixed with a refactor the the PGP Keystore.

* remember to close popover, d'oh

* patch key picker modal styling for Linux and Windows

* response to review"
OJFord,2016-07-08 18:20:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b7b2f20f5b3728cf82154b1953461913fe2a6eb,4b7b2f20f5b3728cf82154b1953461913fe2a6eb,"removes phishing warning for different subdomains (#2420)

This commit improves on nylas/N1#2343 (which allowed From and
Reply-To to be different aliases @ the same domain) by allowing the
address to differ by a subdomain.

For example, the pairs:

    From: foo@bar.com
    Reply-To: foo@sub.bar.com

    From: foo@bar.co.uk
    Reply-To: foo@other.bar.co.uk

    From: foo@bar.com
    Reply-To: foobar@bar.com
are each now allowed without warning."
jonasws,2016-07-08 18:14:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/c78d36bb6590eb61c20639817a06a89df9b8f1e1,c78d36bb6590eb61c20639817a06a89df9b8f1e1,"Make display of onboarding page conditional. (#2485)

When running against a custom Sync Engine, viewing the onboarding page
on startup does not make much sense. This here adds code that checks for
the `env` of the Nylas config and skips the onboarding if it is `local`
or `custom`."
courajs,2016-07-08 17:57:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/0db3e21884845ccee17c61139e7ae8d63519d24a,0db3e21884845ccee17c61139e7ae8d63519d24a,Mention test focusing and skipping in CONTRIBUTING (#2514)
carsonip,2016-07-08 17:57:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/68da536d79325963b0ffd912e5e22d60a93173cc,68da536d79325963b0ffd912e5e22d60a93173cc,"Fix failing clean script (#2554)

The clean script fails since productName is ""Nylas N1"" which contains a
space and it appears to pkill 2 patterns. This is causing the script to
stop in my linux machine. Now the productName is wrapped with quotes to
prevent this from happening."
bengotow,2016-07-08 17:52:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/b336e66d310c9d66076006550492e305f2020f21,b336e66d310c9d66076006550492e305f2020f21,Update Windows.py to remove Node 0.10x
emorikawa,2016-07-08 16:12:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab3713830c8978778a89434809e5169c057e87e3,ab3713830c8978778a89434809e5169c057e87e3,Readme fixes
emorikawa,2016-07-08 16:00:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fecf0e40d6ced73e0fbea96c0faafabd1dd893a,6fecf0e40d6ced73e0fbea96c0faafabd1dd893a,Add redis to local pm2
bengotow,2016-07-08 00:07:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbfe693dbde6c083af24d2138611b71ff47402a0,fbfe693dbde6c083af24d2138611b71ff47402a0,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-08 00:07:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7affd3f6517964fd235f262c0f176941645a94b,e7affd3f6517964fd235f262c0f176941645a94b,Add dashboard pm2 config
emorikawa,2016-07-07 23:32:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/aca24ef18a74ac738aa69576c629163ad7091fe8,aca24ef18a74ac738aa69576c629163ad7091fe8,Update dockerfile to start with env variable
emorikawa,2016-07-07 23:10:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/31e4d25448e2cfc1260ec814c17534d047760420,31e4d25448e2cfc1260ec814c17534d047760420,Add API port to prod config
emorikawa,2016-07-07 23:08:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ff61beec93e02e24f81cb25ea9499fb15ab5c37,1ff61beec93e02e24f81cb25ea9499fb15ab5c37,package json fixed
bengotow,2016-07-07 23:06:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/2020ee1f19cc2a602e5ff062766683a43550a7e3,2020ee1f19cc2a602e5ff062766683a43550a7e3,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-07 23:06:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2418cef5746dcba43733bc773707f5b8799bf4e,f2418cef5746dcba43733bc773707f5b8799bf4e,Minor updates to readme
emorikawa,2016-07-07 23:05:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/0972592aa5729bb841de1f82061ab808e731ae73,0972592aa5729bb841de1f82061ab808e731ae73,Add ports to pm2-dev
bengotow,2016-07-07 22:27:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/0bfa8023f25d8a88e431107e62702ec7328002e0,0bfa8023f25d8a88e431107e62702ec7328002e0,"Merge branch 'master' of ssh://github.com/nylas/k2

Conflicts:
	Dockerfile"
bengotow,2016-07-07 22:25:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/63f66fb7e7e10bd944bff009c7c18a3dec1941b9,63f66fb7e7e10bd944bff009c7c18a3dec1941b9,Switch to PM2 for dev + prod
hallamoore,2016-07-07 21:31:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/a71e5c6a63ad71613fb396f2bb2fe22c4384cb1d,a71e5c6a63ad71613fb396f2bb2fe22c4384cb1d,Merge branch 'master' of github.com:nylas/k2
hallamoore,2016-07-07 21:30:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/2db11d7dec494629be7c8363ed409aa8a9648dd7,2db11d7dec494629be7c8363ed409aa8a9648dd7,Enhance sync stats on dashboard
emorikawa,2016-07-07 20:42:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a4550627176178de2174beb6a9e44ce5f371877,7a4550627176178de2174beb6a9e44ce5f371877,Update package.json to include lerna in main dependencies
emorikawa,2016-07-07 20:37:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ed55a6ee6085a8d4b0a23737c2af0b2d6a6abbf,1ed55a6ee6085a8d4b0a23737c2af0b2d6a6abbf,Add production flag to Dockerfile
emorikawa,2016-07-07 20:36:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/83e7d149a3f064efa82f8f2ac587a2a313b73c7d,83e7d149a3f064efa82f8f2ac587a2a313b73c7d,Fix Dockerfile
emorikawa,2016-07-07 20:33:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/21a89ee45542ed6947a91196fb7ddb64bb918c9c,21a89ee45542ed6947a91196fb7ddb64bb918c9c,Remove Dockerrun.aws.json
emorikawa,2016-07-07 20:32:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/dfb3935969b8016721da3ab0fb462e6f67d4367a,dfb3935969b8016721da3ab0fb462e6f67d4367a,Update package.json. Remove Procfile
emorikawa,2016-07-07 19:39:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/189cf21d2ad168ab8123766b903ac0abdd7f353b,189cf21d2ad168ab8123766b903ac0abdd7f353b,Commit to test Docker automatic builds
emorikawa,2016-07-07 19:13:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac5fee1c39d6997ffd7c6836cd270a53b50ee258,ac5fee1c39d6997ffd7c6836cd270a53b50ee258,Re-add .elasticbeanstalk to gitignore
emorikawa,2016-07-07 19:10:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecb97fa4378a4f8166bd00343795c04cde05e8ee,ecb97fa4378a4f8166bd00343795c04cde05e8ee,"Revert ""Remove sqlite""

This reverts commit f14443a83ea7a59f999667c1a3bf0d1ddd11cd33."
emorikawa,2016-07-07 19:09:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/05de9f6cffc65ddae8ddadf80245d73f8023cce8,05de9f6cffc65ddae8ddadf80245d73f8023cce8,Remove .elasticbeanstalk from gitignore
emorikawa,2016-07-07 19:08:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/a97ed5a311669c0a0d213681f999e0a7e2e60223,a97ed5a311669c0a0d213681f999e0a7e2e60223,Added Dockerrun.aws.json
emorikawa,2016-07-06 23:22:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/3820521d62fdb0aa466a95bba0189e66f448fe86,3820521d62fdb0aa466a95bba0189e66f448fe86,Dockerfile successfully building ping endpoint
emorikawa,2016-07-06 22:31:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/f14443a83ea7a59f999667c1a3bf0d1ddd11cd33,f14443a83ea7a59f999667c1a3bf0d1ddd11cd33,Remove sqlite
bengotow,2016-07-07 18:37:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/822b8e54e6b4dde8d43aec9a6dbeee34508d44ad,822b8e54e6b4dde8d43aec9a6dbeee34508d44ad,Allow usage with mysql in addition to SQLite
hallamoore,2016-07-06 23:49:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/40ab07cfdf23c122c2c9c99813633001cdea43c3,40ab07cfdf23c122c2c9c99813633001cdea43c3,Add account filtering (by error status) to dashboard
hallamoore,2016-07-06 22:48:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/44e377eb80f2a34051155ec50ce4070de8ed4d6a,44e377eb80f2a34051155ec50ce4070de8ed4d6a,Merge branch 'master' of github.com:nylas/k2
hallamoore,2016-07-06 22:48:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/12560ab71173b5276606d9a8bb9d0f21e3eb9f8e,12560ab71173b5276606d9a8bb9d0f21e3eb9f8e,Add ability to apply a sync policy to all accounts from dashboard
emorikawa,2016-07-06 22:30:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/be277b80048ae4dd9ca459f89c8ca783172762b8,be277b80048ae4dd9ca459f89c8ca783172762b8,Add dockerfile
emorikawa,2016-07-06 21:59:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e4427d96e21c3c6a511b45f3c492549c702cf4e,2e4427d96e21c3c6a511b45f3c492549c702cf4e,Add console to ping
emorikawa,2016-07-06 20:51:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/af9d5da17c36aa5ecd129334b8e1477b23804db6,af9d5da17c36aa5ecd129334b8e1477b23804db6,"Revert ""Start just nylas-api""

This reverts commit 91d8cfa6c0b8fe4c6df007e095ca4af07e3fd3ef."
emorikawa,2016-07-06 20:50:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/3068fbbf206e8fd88f5a86cf2aa02fb32b731dab,3068fbbf206e8fd88f5a86cf2aa02fb32b731dab,Upgrade lerna
emorikawa,2016-07-05 22:20:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d2c52df41308e9a2a00cddbc382c650fe981c37,5d2c52df41308e9a2a00cddbc382c650fe981c37,Start just nylas-api
hallamoore,2016-07-05 22:45:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/3bfc5aff609c2c67ab38003bb3af5777c2484f02,3bfc5aff609c2c67ab38003bb3af5777c2484f02,Merge branch 'master' of github.com:nylas/k2
hallamoore,2016-07-05 22:41:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c342c0c7756f6d1a36cac78eda5cd3215cd5977,9c342c0c7756f6d1a36cac78eda5cd3215cd5977,Add ability to edit sync policy from dashboard
emorikawa,2016-07-05 21:09:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2e827297cfa1656a1b805364520196f08c73219,e2e827297cfa1656a1b805364520196f08c73219,"Add authless /ping endpoint that returns ""pong"""
emorikawa,2016-07-05 20:21:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed2e184728ffe48541d16cca721ef4d23b361fd1,ed2e184728ffe48541d16cca721ef4d23b361fd1,Add Elastic Beanstalk to gitignore
jstejada,2016-07-01 22:46:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b1f012a3c8ad76de98b6db7432c1d7546c1bd3f,8b1f012a3c8ad76de98b6db7432c1d7546c1bd3f,"Fix error serialization

- Remove cumbersome NylasError
- Add helper to serialize error when saving to account"
bengotow,2016-07-01 22:41:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/a43b3fb015d71e5cbbb7772d4cf245289049aef3,a43b3fb015d71e5cbbb7772d4cf245289049aef3,Merge branch 'master' of ssh://github.com/nylas/k2
bengotow,2016-07-01 22:41:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/8453985b1fdb98f276223ebcba084d656ca95787,8453985b1fdb98f276223ebcba084d656ca95787,Change worker removal so it waits for sync to complete
jackiehluo,2016-07-01 20:24:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/81145eae32c422e7fbd149939281c80437c25230,81145eae32c422e7fbd149939281c80437c25230,Change error styling
jackiehluo,2016-07-01 20:15:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/0af1a4379449960389bae291567a40453141d100,0af1a4379449960389bae291567a40453141d100,Add first sync completion time
bengotow,2016-07-01 18:36:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ccb7f164b1086aa223a721e698d3027cedf53b8,3ccb7f164b1086aa223a721e698d3027cedf53b8,Fix closing connection twice
emorikawa,2016-07-01 18:27:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd0c4d734c3f00e2c8297b1cf2c17a33117084bf,fd0c4d734c3f00e2c8297b1cf2c17a33117084bf,Fix delta sync to properly includes sub models
jstejada,2016-07-01 17:24:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/05091a4447f85c8279da016a02f0318642525a0d,05091a4447f85c8279da016a02f0318642525a0d,Update thrown errors to use serializable NylasError
jstejada,2016-06-28 07:00:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/80f9ff38e30462024345ec684091769e9c52db6a,80f9ff38e30462024345ec684091769e9c52db6a,Remove dead code
jackiehluo,2016-07-01 00:31:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/a99ffbce3c25641458df25b68bb02011f2329158,a99ffbce3c25641458df25b68bb02011f2329158,Add favicon :snow_capped_mountain:
jackiehluo,2016-07-01 00:24:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/27eba6dfaacee8b666305e1671b6b6d06ebd04ef,27eba6dfaacee8b666305e1671b6b6d06ebd04ef,Add sync times and update styles
hallamoore,2016-07-01 00:11:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/84ce3bdeb3138620c804e0b50bf73986e3d1ad63,84ce3bdeb3138620c804e0b50bf73986e3d1ad63,Merge branch 'master' of github.com:nylas/k2
hallamoore,2016-07-01 00:10:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5157b355359941786df6bd6ba832b468e49388c,c5157b355359941786df6bd6ba832b468e49388c,Fixed 'in' filter for threads endpoint
jackiehluo,2016-07-01 00:04:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/ddf73b6b0278396342d4b5a0bede4f89839513ad,ddf73b6b0278396342d4b5a0bede4f89839513ad,Keep track of sync completion timestamps
hallamoore,2016-06-30 23:23:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/ce61326f7c68ed0b8b630ae5ef3a18a2630777ae,ce61326f7c68ed0b8b630ae5ef3a18a2630777ae,Make query keys not camel case
hallamoore,2016-06-30 23:19:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/7221ae3bb9cb3654c92d887627ea7be485b98c3b,7221ae3bb9cb3654c92d887627ea7be485b98c3b,Added File filtering
hallamoore,2016-06-30 23:09:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/f94acfcb9bd395bee77d9def48bc2c4fd8bcedc8,f94acfcb9bd395bee77d9def48bc2c4fd8bcedc8,Added filename query to threads endpoint
hallamoore,2016-06-30 22:49:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/d68151a6847313c1966d8616fb94185075b9272f,d68151a6847313c1966d8616fb94185075b9272f,Merge branch 'master' of github.com:nylas/k2
hallamoore,2016-06-30 22:23:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/aec946f7def15e16ac50cc7f2db5fbebf21a1458,aec946f7def15e16ac50cc7f2db5fbebf21a1458,Added 'in' query to messages endpoint
hallamoore,2016-06-30 21:22:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6225f09018fb175001090528181d8bdc979113f7,6225f09018fb175001090528181d8bdc979113f7,Added some filter queries for Messages
bengotow,2016-06-30 20:38:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c3bcf99adab2be6a28dd4c3c58f4701eec8a2fe,6c3bcf99adab2be6a28dd4c3c58f4701eec8a2fe,"fix(auth): ssl_required => true instead of ""on"""
bengotow,2016-06-30 20:28:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/04d482650c6b3ffb869e4b171adfaf6e6667279c,04d482650c6b3ffb869e4b171adfaf6e6667279c,Fix processor running out of file descriptors due to re-creating redis connections
bengotow,2016-06-30 20:28:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/65a6ea4546ed3f71f416c6f011caca4beb7ce1ab,65a6ea4546ed3f71f416c6f011caca4beb7ce1ab,"Redis takes seconds, not milliseconds"
bengotow,2016-06-30 20:25:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c2b8bcb15109dd295e684cb7b0ae1b0d806a1d5,3c2b8bcb15109dd295e684cb7b0ae1b0d806a1d5,"Fix account creation redis publish, rename to make more clear"
bengotow,2016-06-30 19:33:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef5c4a29fe216baac3daab0a27e39723b53b7f66,ef5c4a29fe216baac3daab0a27e39723b53b7f66,"Fix redis keys, dashboard app, show account active state on dashboard"
bengotow,2016-06-30 19:32:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9952f9fa7cd0d90add221793aea07f45ba05cc8,f9952f9fa7cd0d90add221793aea07f45ba05cc8,Fix 500 error when account token does not resolve to account
hallamoore,2016-06-30 18:50:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0666540b9426b2e51feac66b27e247fd3786be6,d0666540b9426b2e51feac66b27e247fd3786be6,Added syncback tasks for folders
bengotow,2016-06-30 18:04:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d4a4cec32b57eb4150af36aaed4ffbf8d6cc6e6,4d4a4cec32b57eb4150af36aaed4ffbf8d6cc6e6,Fix backwards logic preventing thread creation!
bengotow,2016-06-30 16:33:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1419a65a5202f95ecacb7a6919b898de7680799,a1419a65a5202f95ecacb7a6919b898de7680799,"Update folderId => folderImapUID, rename messageI to uid"
bengotow,2016-06-30 16:29:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/b033b94091c623f1e3b1dae0e5e80b4a49107020,b033b94091c623f1e3b1dae0e5e80b4a49107020,"Break Category into Folder, Label, populate Gmail lables for messages"
bengotow,2016-06-30 07:29:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9c52fae1b953047a1d5d5568728f606006cfc9f,c9c52fae1b953047a1d5d5568728f606006cfc9f,Stop sqlite errors - guess N1 version didn't support Node 6
bengotow,2016-06-30 07:19:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a6daf9556a8dbc7c46456590eb31a5e1a2adf6e,5a6daf9556a8dbc7c46456590eb31a5e1a2adf6e,Stop sqlite from waiting 1sec to retry table locks
jackiehluo,2016-06-30 02:13:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3b5a5106c6f4f6c765d8607262051adc5850a8f,b3b5a5106c6f4f6c765d8607262051adc5850a8f,Add endpoint for file downloads
hallamoore,2016-06-30 01:52:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd7570f6c8fbea2803b34b5ba1699a273cb8ad1e,fd7570f6c8fbea2803b34b5ba1699a273cb8ad1e,Add various syncback tasks for messages
hallamoore,2016-06-30 00:36:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/80d80eb3064009515c2c294e2501cf0fca2b4b66,80d80eb3064009515c2c294e2501cf0fca2b4b66,Added StarThread and UnstarThread imap tasks
hallamoore,2016-06-30 00:23:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a77196fd95d8e42614f665a5e023b5ba23c648a,2a77196fd95d8e42614f665a5e023b5ba23c648a,Merge branch 'master' of github.com:nylas/k2
hallamoore,2016-06-30 00:23:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef11508b38b36f4a2c79d861ae59566175f28fd8,ef11508b38b36f4a2c79d861ae59566175f28fd8,Added MarkThreadAsUnread task
jackiehluo,2016-06-30 00:19:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/5323350fb258e390906d230be4b6ec03e1e5b42f,5323350fb258e390906d230be4b6ec03e1e5b42f,update(readme): Remove Scheduler from plugins list
emorikawa,2016-06-30 00:10:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d7f728a75e598dce97db6a52373a596ad0a7e96,4d7f728a75e598dce97db6a52373a596ad0a7e96,categoryUID -> categoryImapUID and messageId -> messageHeaderId
hallamoore,2016-06-30 00:01:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/d3fd671ff6a3a00dde8e3677070cd17c490597a5,d3fd671ff6a3a00dde8e3677070cd17c490597a5,Update MarkThreadAsRead task
emorikawa,2016-06-29 23:25:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/6cb67e417c96e558961d0ef367309765179a7623,6cb67e417c96e558961d0ef367309765179a7623,Fix to use Imap BOX and simplify move helper
hallamoore,2016-06-29 23:12:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7fa9a782fcad715b08a79b794649c4db6f2600b,c7fa9a782fcad715b08a79b794649c4db6f2600b,Merge branch 'master' of github.com:nylas/k2
hallamoore,2016-06-29 23:12:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/825ce2eba3a7a0824089d35f0c8da7eed3a74d24,825ce2eba3a7a0824089d35f0c8da7eed3a74d24,"Use categoryUID instead of categoryId, change default value to match node-imap"
bengotow,2016-06-29 23:10:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/b00b1e6d21ef6440bf5d98218752f9ce5a3d7b80,b00b1e6d21ef6440bf5d98218752f9ce5a3d7b80,Add replyTo to message model
hallamoore,2016-06-29 22:07:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/da279590098838f706e6eb812069f618c2f63cdd,da279590098838f706e6eb812069f618c2f63cdd,Changed some variables so that first letter is lowercase
emorikawa,2016-06-29 21:58:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc3796ff669c0fc114ccaf9628c3997261c273b1,fc3796ff669c0fc114ccaf9628c3997261c273b1,Fix transaction case issue
emorikawa,2016-06-29 21:43:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a56c9a4e4848b8958fd47f179c6aee6472113ff,5a56c9a4e4848b8958fd47f179c6aee6472113ff,AccountId -> accountId
emorikawa,2016-06-29 21:25:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ba3ac1bfdc19d7006ec07c6cec135b0fa797338,9ba3ac1bfdc19d7006ec07c6cec135b0fa797338,Merge branch 'syncback'
emorikawa,2016-06-29 21:25:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/905d797fd2263e767218fcd6795652d0470c6926,905d797fd2263e767218fcd6795652d0470c6926,Remove comments
emorikawa,2016-06-29 21:18:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/124f0a95798d7425bd0a91a969fef36c0c0f8c11,124f0a95798d7425bd0a91a969fef36c0c0f8c11,Add sigterm
hallamoore,2016-06-29 21:01:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a45306729fc4a6d119ce4a700b85fc94334b0030,a45306729fc4a6d119ce4a700b85fc94334b0030,Merge branch 'syncback' of github.com:nylas/k2 into syncback
hallamoore,2016-06-29 21:00:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf39b51e081db2f39090b5f844dbab9c33fb89e9,bf39b51e081db2f39090b5f844dbab9c33fb89e9,Correct some function names/params
emorikawa,2016-06-29 19:29:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a6e1f4f603122a7980df43e1f474bd2a2ada3a3,6a6e1f4f603122a7980df43e1f474bd2a2ada3a3,Remove loggin in api
hallamoore,2016-06-29 19:28:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/2721617665fb638309fed50d4f1e526df3416d51,2721617665fb638309fed50d4f1e526df3416d51,Use CategoryId instead of messageId
emorikawa,2016-06-29 19:26:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e80bce4339ec365eea545569f7feb4a167c0cb3,0e80bce4339ec365eea545569f7feb4a167c0cb3,readonly false
emorikawa,2016-06-29 19:25:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/3753d9743af12899bde4ab41a0012795c9c1ce8f,3753d9743af12899bde4ab41a0012795c9c1ce8f,Fix return
emorikawa,2016-06-29 19:07:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/d26824771d8e2a6cab747fbee33a5377fff975bb,d26824771d8e2a6cab747fbee33a5377fff975bb,Clean up loggin
hallamoore,2016-06-29 19:07:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdfee404e5129edcd6ba366f7067fe22233a9345,bdfee404e5129edcd6ba366f7067fe22233a9345,"Add move imap wrapper, make sure wrapper methods are called"
emorikawa,2016-06-29 19:04:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/7cf59c3c1134121874fac94cbb25af215e242aa3,7cf59c3c1134121874fac94cbb25af215e242aa3,Fix retrun value in MoveToFolderIMAP task
bengotow,2016-06-29 19:04:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/a25c39965221a59f5524dbf411ff470f79e12095,a25c39965221a59f5524dbf411ff470f79e12095,Downcase remaining model names
bengotow,2016-06-29 19:02:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/53d6c6284e35d846aab57272f4e5e59262e48c76,53d6c6284e35d846aab57272f4e5e59262e48c76,"Support for /threads?view=count/expanded, thread & message JSON includes folders"
emorikawa,2016-06-29 18:44:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/941180c1df19662772c5a0473ad2b6cc077ac163,941180c1df19662772c5a0473ad2b6cc077ac163,Syncback WIP
bengotow,2016-06-29 18:22:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ff7d3aea57c29c0306672676dee0b60f375de8b,9ff7d3aea57c29c0306672676dee0b60f375de8b,"Add folders and labels to /threads response, version numbers to all models"
bengotow,2016-06-29 17:36:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ecacdd591fc8670d16b486ea4180d93202414ad,6ecacdd591fc8670d16b486ea4180d93202414ad,"Add account_id to all responses, downcase model ref columns"
emorikawa,2016-06-29 17:13:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab19133b20d5d8a19ba007b0f0b6bdd144fdc3c6,ab19133b20d5d8a19ba007b0f0b6bdd144fdc3c6,Add SyncbackTask super class
emorikawa,2016-06-29 17:11:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf87325c5d661c8fc1ca8073c98928219ba0203c,cf87325c5d661c8fc1ca8073c98928219ba0203c,Fix syncback request object
hallamoore,2016-06-29 17:10:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a53dca75500042fe8036369cf6d2768ecf0881d,8a53dca75500042fe8036369cf6d2768ecf0881d,Merge branch 'master' of github.com:nylas/k2
emorikawa,2016-06-29 02:07:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba2d865a5dece96c31c45a6f42b0148b34210b9f,ba2d865a5dece96c31c45a6f42b0148b34210b9f,Cleanup syncback request
emorikawa,2016-06-29 02:02:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/11a3a8f58e6bc08f0ce25d04ba5da428d6a7b42e,11a3a8f58e6bc08f0ce25d04ba5da428d6a7b42e,Cleanup syncback task
bengotow,2016-06-29 01:43:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7422ffaea4a70be6357d4b18df3ec13322ff98a,c7422ffaea4a70be6357d4b18df3ec13322ff98a,Fix bug where always closing connection after sync
bengotow,2016-06-29 01:31:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/0189e3e77d8d9a9078a9a7d47a4598c92948aa6f,0189e3e77d8d9a9078a9a7d47a4598c92948aa6f,Break Gmail mailboxes into folders and labels
emorikawa,2016-06-29 01:14:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/7180ebbb70623b83ed20c605366eeea8a8ebf399,7180ebbb70623b83ed20c605366eeea8a8ebf399,PUT route works on threads to create SyncbackRequests
bengotow,2016-06-29 01:14:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad484e8ae1cf386f318050c0ab0d8973771473ba,ad484e8ae1cf386f318050c0ab0d8973771473ba,Add `object` key to all JSON responses
emorikawa,2016-06-29 00:12:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/306086091d9580daa5701cee311a4776ac083dec,306086091d9580daa5701cee311a4776ac083dec,syncbackMessageActions refactor
hallamoore,2016-06-29 00:38:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5af9c0cb5b8c2b8aff3fa547928dbe892d2076f,f5af9c0cb5b8c2b8aff3fa547928dbe892d2076f,"Added a syncback task to mark a thread as read, untested"
bengotow,2016-06-29 01:11:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/222c68a5985825b627c42f3a909438050f31fb60,222c68a5985825b627c42f3a909438050f31fb60,"Deprecate thread.cleanedSubject, since the only subject is the clean one"
bengotow,2016-06-29 01:01:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d1186cb34e8c42e8767d04ad212494ebd654d76,1d1186cb34e8c42e8767d04ad212494ebd654d76,"Add more attributes to /threads, move processor to it's own process"
emorikawa,2016-06-29 00:12:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/cea7783a5faae466112f76955fa9040e70b1775a,cea7783a5faae466112f76955fa9040e70b1775a,syncbackMessageActions refactor
hallamoore,2016-06-28 22:56:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/b867bcb31e948aacdceabf088822a44003501f9c,b867bcb31e948aacdceabf088822a44003501f9c,Merge branch 'master' of github.com:nylas/k2
emorikawa,2016-06-28 22:44:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d90c5bb1414e2009ac74d63d9e1f7917b7adca5,2d90c5bb1414e2009ac74d63d9e1f7917b7adca5,Fixes to sync worker
bengotow,2016-06-28 22:37:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca0120a8245b5a23bf8f5026dce5838141f87897,ca0120a8245b5a23bf8f5026dce5838141f87897,Allow sync after errors with env var
emorikawa,2016-06-28 22:35:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/14cffcf8a5e3422ae18ffda10c7adee550a83602,14cffcf8a5e3422ae18ffda10c7adee550a83602,Change to notify / observe for syncback requests
bengotow,2016-06-28 22:30:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/a10543c1c826a04389683b5b7d90e21c7ecff01f,a10543c1c826a04389683b5b7d90e21c7ecff01f,"Chunk sync of large mailboxes, keep track of synced UID range, not just uidnext"
hallamoore,2016-06-28 22:01:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f64b6e58e9a3658ef2c2907525f9ed098b55585,0f64b6e58e9a3658ef2c2907525f9ed098b55585,Add category filtering to threads api endpoint
emorikawa,2016-06-28 21:07:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f4ed7f4a170131cf42172a8621a688016cbdcda,0f4ed7f4a170131cf42172a8621a688016cbdcda,Fix package json
bengotow,2016-06-28 20:56:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/8108a875eec805ced566adbbb81235638a0eb4ed,8108a875eec805ced566adbbb81235638a0eb4ed,Allow trailing slashes on API endpoints
jackiehluo,2016-06-28 20:55:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/eaf19cc5223fa2914dc1a2751857cd1f2fe8c986,eaf19cc5223fa2914dc1a2751857cd1f2fe8c986,Add files endpoint for metadata
jackiehluo,2016-06-28 18:32:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/a00f86660c7eab491a0672d91009e4ae64832dc7,a00f86660c7eab491a0672d91009e4ae64832dc7,Create file objects from MIME parts
jstejada,2016-06-28 06:48:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5d753a4344054ca8b986a2f1817791f5ecfa3f2,c5d753a4344054ca8b986a2f1817791f5ecfa3f2,"Add /very/ basic initial error status to dashboard

- TODO: add option to solve the error"
bengotow,2016-06-27 23:38:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/f68948c23f2fe3da4bb174db5f917b0dbb1e3d61,f68948c23f2fe3da4bb174db5f917b0dbb1e3d61,Fix population of db fields in processor
bengotow,2016-06-27 23:05:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/91887a6e11bda57905e6323e759c52df8248a051,91887a6e11bda57905e6323e759c52df8248a051,Speed up sync by fetching preferred body block only
jstejada,2016-06-27 23:01:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed749e0f5131f4107f7b1273c73cf7945a120d02,ed749e0f5131f4107f7b1273c73cf7945a120d02,"Add sync worker error handling

- Handles sync errors in a single place. For now, if error is not a
socket error, will treat as a permanent error, save the error to the
account object, and prevent any other syncing until the error is cleared
from the account object
- Adds a NylasError class that can be extended and serialized. Adds it
to global namespace on all packages and replaces all uses of regular
Error"
jackiehluo,2016-06-27 21:58:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf421cbb2dfae44687b302d6b5ad98560f071e31,cf421cbb2dfae44687b302d6b5ad98560f071e31,Check In-Reply-To instead of References
jackiehluo,2016-06-27 21:52:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/179f24449ba29edb5295391255175a9b55eaf400,179f24449ba29edb5295391255175a9b55eaf400,Refactor code and add test for threading
hallamoore,2016-06-27 20:45:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/5077b3f027b7979399ac007224ef62dce5f419ce,5077b3f027b7979399ac007224ef62dce5f419ce,Add subject query to threads route
bengotow,2016-06-27 20:29:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/94cd088dd778f37ac251f9db0f5ec377c474f617,94cd088dd778f37ac251f9db0f5ec377c474f617,Commit .env to fix dev environment
hallamoore,2016-06-27 19:30:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e56d3ced43fbd6a999a3d444eeaded7a7f361b7,2e56d3ced43fbd6a999a3d444eeaded7a7f361b7,Add timestamp queries to threads route
bengotow,2016-06-27 17:28:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/76d873c2b2e6e1df7040a5d493e9732b96112c2a,76d873c2b2e6e1df7040a5d493e9732b96112c2a,"Reintroduce concept of `provider`, start work on Gmail"
hallamoore,2016-06-27 17:35:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab4c8cf32cce3852f0e332d74e2a5758dfec76d0,ab4c8cf32cce3852f0e332d74e2a5758dfec76d0,Add id query to threads route
jstejada,2016-06-27 17:27:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/1fe7fdf4b1c2886ae3b64cd7494e9bd38221311b,1fe7fdf4b1c2886ae3b64cd7494e9bd38221311b,More sync error handling WIP
hallamoore,2016-06-27 17:15:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/621f8b5c2bda959c2b6a43edc3d4eb8a87b5365f,621f8b5c2bda959c2b6a43edc3d4eb8a87b5365f,Add starred query to threads route
jstejada,2016-06-26 16:52:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/63b929e59b7fd08d49dbb8f25d45cc501b43f18c,63b929e59b7fd08d49dbb8f25d45cc501b43f18c,Fix missing promise based error handling in sync-worker
jstejada,2016-06-26 08:57:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd350a5081d31a37fcde411b11a0f2bad778689d,dd350a5081d31a37fcde411b11a0f2bad778689d,"Update IMAPConnection api + error handling fixes + misc

- `IMAPConnection::openBox` now returns a Promise that resolves to an
IMAPBox, and IMAPBox contains all of the `fetch` operations. This makes
the dependency between fetch operations and the currently open mailbox
explicit rather than implicit and by forcing the operations to be called on
a box instance and hopefully prevent errors. It will also throw an error
if the constraint is no longer satisfied.

- `fetch` operations now return an observable stream of messages (or Promise for single value),
while preserving the same logic of the original implementation. You can use `.toPromise()` on
the observable to get a Promise that resolves when the observable stream has
completely drained.

- Fixes error handling in a few places and renames some variables"
jstejada,2016-06-26 08:44:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/63f48ae8171de0ad71c2d9072b79700301cd7d58,63f48ae8171de0ad71c2d9072b79700301cd7d58,Adds hapi-boom for easy error responses
jstejada,2016-06-26 05:19:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/1336dea0d46affef3136a7b56d061704e0411ee7,1336dea0d46affef3136a7b56d061704e0411ee7,Fix auth response + log errors
jstejada,2016-06-25 18:24:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/caaef8d5b56f74037463a33ada30cd03732000e8,caaef8d5b56f74037463a33ada30cd03732000e8,"Add /messages/<id> enpoint + support for raw message/rfc822

- When message/rfc822 is requested, fetch ray message from IMAP
connection"
bengotow,2016-06-24 23:46:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/69e87cbf49bd9821c837d75efa4a5c5e14299e8c,69e87cbf49bd9821c837d75efa4a5c5e14299e8c,Gmail auth at http://localhost:5100/auth/gmail
hallamoore,2016-06-24 23:14:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc5a4ecf3cfb8b4399c215d151076995660642e0,bc5a4ecf3cfb8b4399c215d151076995660642e0,Add unread query to threads route
hallamoore,2016-06-24 21:07:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/18ad15937fef26336827692079941208fd9b0bd7,18ad15937fef26336827692079941208fd9b0bd7,Change uppercase instance of Joi to lowercase
jstejada,2016-06-24 18:57:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e2c487034813df832193f44ac3fa9e485e31b62,7e2c487034813df832193f44ac3fa9e485e31b62,Update README with auth instructions
jstejada,2016-06-24 17:39:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f945888e4e05f76c3d732b4bae5bde14b544400,8f945888e4e05f76c3d732b4bae5bde14b544400,Add missing test fixtures and fix path for reading them
jstejada,2016-06-24 17:36:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee2dc6c3f674f05866ca3c2aa8c5a759c93dea79,ee2dc6c3f674f05866ca3c2aa8c5a759c93dea79,Expect true to be true
jstejada,2016-06-24 17:35:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ac3c8c31310d5f4fe0bcd12c0b5f2384fd811b3,0ac3c8c31310d5f4fe0bcd12c0b5f2384fd811b3,Add jasmine for message-processor
bengotow,2016-06-24 01:17:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/b67a3ae3e4415b14e64bcfb6e8729266371734f5,b67a3ae3e4415b14e64bcfb6e8729266371734f5,"Launch dashboard when in dev mode, publish change on acct creation"
bengotow,2016-06-23 23:28:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/f678045c4f1d80c8b28a55476ce6318c261c08b2,f678045c4f1d80c8b28a55476ce6318c261c08b2,sync db <=> redis with sequelize hooks
bengotow,2016-06-23 23:28:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/eac019f5366ff2e64ab5b035c6585b31de4c3886,eac019f5366ff2e64ab5b035c6585b31de4c3886,"Rather than changing policies, just set expiring redis key to track activity"
bengotow,2016-06-23 22:52:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/09bb7874f8b08b9bfa160b055f7818f898b8804a,09bb7874f8b08b9bfa160b055f7818f898b8804a,Dashboard with a sweet background. Also realtime assignment / policy view.
emorikawa,2016-06-23 22:46:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f5cac4342366db5c0c4b6c82bfc1663ec00f8c3,3f5cac4342366db5c0c4b6c82bfc1663ec00f8c3,Adding in syncback message actions
jackiehluo,2016-06-23 22:44:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/b6f57f3ce8ccfecaa87b4b3f25f54348e9fd6e29,b6f57f3ce8ccfecaa87b4b3f25f54348e9fd6e29,Add threading algorithm
jackiehluo,2016-06-23 22:21:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9fe8368992c8c60f8e8d1ecb1a0d24f4d776d28,f9fe8368992c8c60f8e8d1ecb1a0d24f4d776d28,Fix syntax error
jackiehluo,2016-06-23 22:19:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/5cc4841ac6fd8c3feb9c9d501cdfa8f1c3383750,5cc4841ac6fd8c3feb9c9d501cdfa8f1c3383750,Add check for Gmail thread ID
emorikawa,2016-06-23 20:15:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ad9cdd322bf9388b0915409fe49606d75809779,6ad9cdd322bf9388b0915409fe49606d75809779,Fixing broken processors
emorikawa,2016-06-23 19:18:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/8160acc81e375ee2c98519ceb371c80f51e780c8,8160acc81e375ee2c98519ceb371c80f51e780c8,Add imap dependency to package.json
emorikawa,2016-06-23 18:20:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/1460a0ae9f46fa7fbb6affb871239fdacd6cb637,1460a0ae9f46fa7fbb6affb871239fdacd6cb637,Rename Refresh to Sync
bengotow,2016-06-23 19:02:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e692982bb7bf25e63e8bcc774d46a65dc0824b5,8e692982bb7bf25e63e8bcc774d46a65dc0824b5,"Remove concept of self-limiting workers, will use cloudwatch metrics collection to scale fleet instead of queue length"
bengotow,2016-06-23 18:45:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7c647f7ba93e5c694ca19f333474692d3f78a53,f7c647f7ba93e5c694ca19f333474692d3f78a53,"Return syncs to unclaimed queue after CLAIM_DURATION, just because it's healthy"
bengotow,2016-06-23 18:44:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2e9093b4282a1fa31dbed536465795f8e48656c,c2e9093b4282a1fa31dbed536465795f8e48656c,Escalate sync policy based on number of stream connections
jackiehluo,2016-06-23 17:33:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae54192ed65aab992a082e7e229c801c193c91d9,ae54192ed65aab992a082e7e229c801c193c91d9,Update threading and fix typo
jstejada,2016-06-23 17:26:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/a917022505b76504f6c20f05342ec1fb9bb9792f,a917022505b76504f6c20f05342ec1fb9bb9792f,Update order of threading processor
bengotow,2016-06-23 17:11:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad1683c9a55a16321c5d0a175a6166414dd0d946,ad1683c9a55a16321c5d0a175a6166414dd0d946,Fix reference to __base
bengotow,2016-06-23 07:49:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/12d9db8dd924fffa9bd8bd209843fca805f66942,12d9db8dd924fffa9bd8bd209843fca805f66942,Redis coordination of sync processes / assignment
bengotow,2016-06-23 01:34:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e9bfa68b56dbcc5c86c202eb76bc379c2e79cad,2e9bfa68b56dbcc5c86c202eb76bc379c2e79cad,Refactor DeltaStreamQueue (connection per subscription)
jackiehluo,2016-06-23 00:34:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb9557437856c1ccc15e48fff63b0110d132c755,cb9557437856c1ccc15e48fff63b0110d132c755,Fix associations
jackiehluo,2016-06-22 18:49:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/e64c2ae4c0856b9e3e381fdb9cf168535a0bc0a8,e64c2ae4c0856b9e3e381fdb9cf168535a0bc0a8,Add basic threading
bengotow,2016-06-23 00:19:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5f435236fea7a7bcb3cff1d0cd7bf2c2aae3d7d,f5f435236fea7a7bcb3cff1d0cd7bf2c2aae3d7d,/auth + remove hardcoded stub in favor of curl request
emorikawa,2016-06-22 21:53:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5d019f9d9ddf636673d51312eeec46f2cecad82,d5d019f9d9ddf636673d51312eeec46f2cecad82,Plain npm install
emorikawa,2016-06-22 21:49:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/71167328ddaa5830dcd11b6dc1d765db1caebf27,71167328ddaa5830dcd11b6dc1d765db1caebf27,Update readme
emorikawa,2016-06-22 21:43:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/06393dd07c5ded496268bd24fbad2c9c9e1f94e4,06393dd07c5ded496268bd24fbad2c9c9e1f94e4,Move categories & messages to new monorepo structure
bengotow,2016-06-22 21:17:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/95fbb64d17b94f8a27c444939666e86dd49778cf,95fbb64d17b94f8a27c444939666e86dd49778cf,"Add /messages, /folders, /account"
emorikawa,2016-06-22 21:41:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/18f2925b434b1e018d433cae4f9a12b66c6dec6c,18f2925b434b1e018d433cae4f9a12b66c6dec6c,Convert to monorepo
emorikawa,2016-06-22 20:57:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c5da59d744feeb5c8af4b785b7d1f14b2b10d19,2c5da59d744feeb5c8af4b785b7d1f14b2b10d19,Properly pluck out transactionModel
emorikawa,2016-06-22 20:35:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/02f07882327e17c41e082c7d5d54246bf019e53b,02f07882327e17c41e082c7d5d54246bf019e53b,Improving observable based delta stream
emorikawa,2016-06-22 19:19:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/54599a21c0d39830184b12e5f27a99bea82d072a,54599a21c0d39830184b12e5f27a99bea82d072a,Ignore storage folder
emorikawa,2016-06-22 19:16:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/135f16f8d680ff5c36303514500265b3f48d5446,135f16f8d680ff5c36303514500265b3f48d5446,Add initial observable based delta stream endpoint
jstejada,2016-06-22 18:57:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bf63f8ea6be0eacc750fee1f109e474955a517d,5bf63f8ea6be0eacc750fee1f109e474955a517d,"Fix message processor pipeline initialization

- Was not actually returning an array of functions from
`processors/index.js`"
jstejada,2016-06-22 18:01:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/8172cad6228322fca4e2eb8213513949a24ca52d,8172cad6228322fca4e2eb8213513949a24ca52d,Fix syntax error
jstejada,2016-06-22 17:59:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3ed7cbdef414cee607cb3a926526ae7210edaec,c3ed7cbdef414cee607cb3a926526ae7210edaec,"Adds message parsing module + other updates

- Adds an order for the message processing pipeline to ensure that
parsing occurs first
- Adds JSONARRAYType
- Other misc updates"
bengotow,2016-06-22 01:29:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/19de776e008b1b93d633a4e44c567a02a4959c65,19de776e008b1b93d633a4e44c567a02a4959c65,"Encrypt connction credentials, move conn settings to acct"
bengotow,2016-06-22 00:51:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7cd644a83b45a621da4e64605e5d293ad67d63b,b7cd644a83b45a621da4e64605e5d293ad67d63b,More quietly update category sync state
emorikawa,2016-06-22 00:51:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/647dc1f78c3e725fb831c27f18f4f088ac354a7f,647dc1f78c3e725fb831c27f18f4f088ac354a7f,Default to port 5100
emorikawa,2016-06-22 00:44:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/e75d0ea16be1f94c767c97c5da6c07f452ff4828,e75d0ea16be1f94c767c97c5da6c07f452ff4828,Add procfile.dev with external redis launcher
bengotow,2016-06-22 00:25:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/644af22d40e194462ef94516a18c4dac7767b9ae,644af22d40e194462ef94516a18c4dac7767b9ae,Fix merge conflicts
jstejada,2016-06-22 00:15:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/2170ee41430831914be21212a5124b2ad995bba4,2170ee41430831914be21212a5124b2ad995bba4,WIP message-processor: building the message
emorikawa,2016-06-22 00:17:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4e05fcb301d5c3bf82d811c714bd6ca04b78372,b4e05fcb301d5c3bf82d811c714bd6ca04b78372,Bind to proper port
bengotow,2016-06-21 21:58:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/05795692f1e8eedb9a451b9ac3b44e38e736b801,05795692f1e8eedb9a451b9ac3b44e38e736b801,"More sync improvements, use CONDSTORE, gmail coming soon"
emorikawa,2016-06-22 00:13:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/02fbd6e6251035405ad4d84cc12a8d74ca4105f5,02fbd6e6251035405ad4d84cc12a8d74ca4105f5,Add core as package dependency
emorikawa,2016-06-22 00:10:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/76026207423f70490fa1cad3cac131cea7d77424,76026207423f70490fa1cad3cac131cea7d77424,Add Procfile and heroku readiness
emorikawa,2016-06-21 23:32:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dad99801c288ad9d711350642058846232faf10,9dad99801c288ad9d711350642058846232faf10,Add params
emorikawa,2016-06-21 23:11:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa4ed23621ad9df8063718314a7b3a4a5d50a249,fa4ed23621ad9df8063718314a7b3a4a5d50a249,Put single token in shared db
emorikawa,2016-06-21 22:57:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d4b17ee52e397b90ff48dfa9511b76b37da7092,2d4b17ee52e397b90ff48dfa9511b76b37da7092,Add a delta streaming endpoint
jackiehluo,2016-06-21 01:14:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4d12459d073e52c634f78f1737b488bfea14e5e,e4d12459d073e52c634f78f1737b488bfea14e5e,:art:(tracking): Tweak style
bengotow,2016-06-21 00:33:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/29a6448922c7ba64c7ebbcf378435750e7627a84,29a6448922c7ba64c7ebbcf378435750e7627a84,Initial concept of sync policy
emorikawa,2016-06-21 00:28:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/f995f6fda150a8bba5cf0f23a3db81fe2c042cb1,f995f6fda150a8bba5cf0f23a3db81fe2c042cb1,Add delta stream queue on sync side
emorikawa,2016-06-20 23:23:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/cebce1081f4b5486c1e40e15f2f7536b6b3f47d0,cebce1081f4b5486c1e40e15f2f7536b6b3f47d0,Fix error & and turn on transaction logging
emorikawa,2016-06-20 23:03:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ed94442c445110bce6245227478e375486ddcfd,8ed94442c445110bce6245227478e375486ddcfd,Add transaction logging
jstejada,2016-06-20 21:57:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/83dfb664e1d7ffadf376abc59661f4a67251b547,83dfb664e1d7ffadf376abc59661f4a67251b547,Add initial version of message-processor package
bengotow,2016-06-20 21:44:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/de8e09d6b555f50bddd286de18c8988caed51ab4,de8e09d6b555f50bddd286de18c8988caed51ab4,"Unify operations, fix a few bugs, logging issues"
emorikawa,2016-06-20 20:21:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/6577bd93585aea4000214f5294b8b66169e7c96f,6577bd93585aea4000214f5294b8b66169e7c96f,Update readme
bengotow,2016-06-20 19:19:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a677a8c2d14f53abbb64176f6a726cb49f38f5c,3a677a8c2d14f53abbb64176f6a726cb49f38f5c,Create README.md
bengotow,2016-06-20 07:19:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dc03688e8fe931ecd8793a3602097d59fced7c8,3dc03688e8fe931ecd8793a3602097d59fced7c8,Cleaner sync state machine
bengotow,2016-06-19 10:02:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/25270c0b75f736cfa3939703d7d92ace1e527a06,25270c0b75f736cfa3939703d7d92ace1e527a06,Initial commit
emorikawa,2016-06-17 14:08:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/20f9e7b3a11383b581265b41588bbb480e107f4a,20f9e7b3a11383b581265b41588bbb480e107f4a,fix(win): fix alt-based worker window keyboard shortcut
emorikawa,2016-06-17 14:08:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca2fa9e1da6474d8827fb9c7032847ba9a5cabb3,ca2fa9e1da6474d8827fb9c7032847ba9a5cabb3,fix(analytics): fix identify debounce to prevent phantom profile
emorikawa,2016-06-17 14:03:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/53eb7f58aa1e5ee1b0ddae7a2dfa334f193ded79,53eb7f58aa1e5ee1b0ddae7a2dfa334f193ded79,"fix(github): fix view on Github buttton

Error due to action import.
Convert to ES6"
jstejada,2016-06-16 23:40:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/54a74e317d4e968348db0f588e8dca68e63cb839,54a74e317d4e968348db0f588e8dca68e63cb839,"fix(sidebar): Make sure saved sidebar accts are correct

- Sidebar accounts may become invalid when switching from staging to
prod"
jstejada,2016-06-16 22:37:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/e87096d7a3cfd31aa36d7d89dfc78ea65b7e4560,e87096d7a3cfd31aa36d7d89dfc78ea65b7e4560,"fix(quoted-text): Add option to remove quoted-text, fix styles

- #2323"
jackiehluo,2016-06-16 22:12:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/42e876ab1f99270b003e6ed7bc5e8fe055b1c54c,42e876ab1f99270b003e6ed7bc5e8fe055b1c54c,feat(spellcheck): Add option to disable spellcheck
akashnimare,2016-06-16 22:09:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/36e0e0721d133b4aae6385e98e5f6bb6d8515f02,36e0e0721d133b4aae6385e98e5f6bb6d8515f02,Fixed broken links. (#2470)
jackiehluo,2016-06-16 19:23:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/a04c1f42248b5dce1d1407e0ed34dfb50350aff2,a04c1f42248b5dce1d1407e0ed34dfb50350aff2,fix(subscription): Change copy to be less confusing
annielcook,2016-06-15 23:46:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/7004bf94ce5132a5ea0e3f61ce06f44e2da37d70,7004bf94ce5132a5ea0e3f61ce06f44e2da37d70,"fix(label-nesting): maintain nested labels when renaming a label

Summary:
when renaming nested labels, maintain nested path
fixes #2402

Test Plan: created nested labels and successfully tested in dev

Reviewers: juan

Reviewed By: juan

Subscribers: evan

Differential Revision: https://phab.nylas.com/D3028"
hallamoore,2016-06-15 23:27:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/ce8cdf8cd7cd445bc6077b044f4ffb23af70e4ab,ce8cdf8cd7cd445bc6077b044f4ffb23af70e4ab,"fix(specs): Fix specs on Linux

Summary: Specs were failing on Linux, this diff fixes them.

Test Plan: Unit tests

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3029"
keitharm,2016-06-15 22:29:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ed1f590ce8bd87d6f98bfa16a646dca7dea43ad,4ed1f590ce8bd87d6f98bfa16a646dca7dea43ad,"Update broken links for guides, docs, and API (#2455)

Also updated schemes of some links to https for consistency"
jackiehluo,2016-06-14 22:03:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f48b77d1ab883be2a24f4bf2bc5f4d89195db22,2f48b77d1ab883be2a24f4bf2bc5f4d89195db22,fix(identity): Convert datetimes to milliseconds
bengotow,2016-06-14 21:02:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/302b8074e5cea3510b3dab7df837aca8485956e6,302b8074e5cea3510b3dab7df837aca8485956e6,fix(mail-merge): Patch to prevent interaction with other ParticipantTextFields
bengotow,2016-06-14 20:26:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a45a5b039e6a0559b8d885dafc3be54ddfa32f0,0a45a5b039e6a0559b8d885dafc3be54ddfa32f0,fix(keybase): Don't run specs which require keybase API
bengotow,2016-06-14 20:22:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/72cd732ebf7d5ac2de35b384dce99b93076e56aa,72cd732ebf7d5ac2de35b384dce99b93076e56aa,"Pgp patch (#2430)

* update icons

* style commit

* Debugs export function

The key Export function used to not successfully show items in
their directories and also depend on the most recent attachment
download location. This commit adds a new savedState attribute
just for Keybase keys and also handles the case where that value
is null.

* Forces delete to populate

fs.watch() was acting up and not triggering populates on deletes.
Now deleteKey() just triggers a populate.

* Re-enables decryption of attachments from Enigmail

Decryption of attachments was disabled in the Great Password Popover
Refactor of Early June 2016. This commit adds that feature back
(and makes some changes to getKeyContents to facilitate that
change)."
bengotow,2016-06-14 19:26:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/5810aeeefcad4354a40109b01eebbdf2baa9ff13,5810aeeefcad4354a40109b01eebbdf2baa9ff13,fix(keybase): Invite fetch doesn't need JSON parse
bengotow,2016-06-14 18:52:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/04e31546144fcdc43557dcbaa1af34f3a4caaeb0,04e31546144fcdc43557dcbaa1af34f3a4caaeb0,fix(identity): Show number of days remaining correctly
adriangrantdotorg,2016-06-14 18:43:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/74a8c0e55451868b4d69dd2eab2b4aee647b7c52,74a8c0e55451868b4d69dd2eab2b4aee647b7c52,Add Website Launcher community plugin (#2407)
bengotow,2016-06-14 08:45:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c696c4db93a928e924f4cb801299826c461a418,7c696c4db93a928e924f4cb801299826c461a418,bump(version): 0.4.45
bengotow,2016-06-14 08:23:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c4255ebeb5118820d51558813d36214a65aebf4,8c4255ebeb5118820d51558813d36214a65aebf4,"fix(login-links): Cap req to 1.5s, ensure pages always open"
bengotow,2016-06-13 23:01:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1a565b061419fe3a3db3837d22802e26b77be32,e1a565b061419fe3a3db3837d22802e26b77be32,fix(keybase): Add a small button to redeem a keybase invite
jackiehluo,2016-06-13 23:32:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/9afe205964922d523057f1883c10f215b99f84c3,9afe205964922d523057f1883c10f215b99f84c3,:art:(loading): Remove supplement text
jackiehluo,2016-06-13 23:19:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/47115a5000761d4d3ec0962c11b731c0db29f4e1,47115a5000761d4d3ec0962c11b731c0db29f4e1,fix(view-on-github): Import Actions correctly
bengotow,2016-06-13 22:19:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/e44e4e27c4da10a97f83906f69499456110d7438,e44e4e27c4da10a97f83906f69499456110d7438,fix(onboarding): Minor asset tweaks
bengotow,2016-06-13 19:06:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/76fac0c6c0b2a3b2ba9f7eeb12f1b7a8665d9916,76fac0c6c0b2a3b2ba9f7eeb12f1b7a8665d9916,fix(pro): Add manual refresh to identity page
jstejada,2016-06-13 19:05:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3af7e65143564d405af5a061e00e994f7917aa9,b3af7e65143564d405af5a061e00e994f7917aa9,bump(version): 0.4.44
emorikawa,2016-06-13 17:14:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/3fb755cc4de18e3394fdf37b535604b2fd96c22c,3fb755cc4de18e3394fdf37b535604b2fd96c22c,fix(analytics): move to work window
emorikawa,2016-06-13 01:13:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/ce16e2e0334c09a481fb06bcfd4a7cea347642be,ce16e2e0334c09a481fb06bcfd4a7cea347642be,fix(identity): enable proper People support
jackiehluo,2016-06-10 22:55:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/8906fe0f848fb01726edb34bcf506fbd7543bf67,8906fe0f848fb01726edb34bcf506fbd7543bf67,fix(activity): Add thread ID to notifications
bengotow,2016-06-10 21:29:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/182683cd061c2c5f4644cf76b74d1684a19bba38,182683cd061c2c5f4644cf76b74d1684a19bba38,fix(pro): Replace `subscriptionRequiredAfter`
jstejada,2016-06-10 20:27:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3377da4ac92d221575bd5a683e28c721bfb43e1,b3377da4ac92d221575bd5a683e28c721bfb43e1,"fix(send-task): Update to use Message::participants

- Fix participants method signature for correct default params"
bengotow,2016-06-10 19:35:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/d4d366edc02cc33c160c15e77377648b7843f121,d4d366edc02cc33c160c15e77377648b7843f121,fix(sending): Minor changes to cleanup phase of sending
jstejada,2016-06-10 18:55:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/3482ca3145b3b72a8949babc8f8d4df3ac3e5b59,3482ca3145b3b72a8949babc8f8d4df3ac3e5b59,fix(menus): Add missing `Window` menu to win32 and linux
emorikawa,2016-06-10 18:53:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/03226253806cbbf55e6d7e251862c857ca89f38b,03226253806cbbf55e6d7e251862c857ca89f38b,fix(spec): fix failing draft specs
emorikawa,2016-06-10 18:45:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/bde97c532bf88f092b2ce302e410ee0b72162caf,bde97c532bf88f092b2ce302e410ee0b72162caf,fix(multi-send): show dependent errors in session close task
jstejada,2016-06-10 18:32:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1a8efc50a06ca0b8c3e6a2a873daa9e260989b6,b1a8efc50a06ca0b8c3e6a2a873daa9e260989b6,fix(specs): Fix DraftStore and SendManyDraftsTask specs
jstejada,2016-06-10 17:54:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0200cc04f3ec780b7c2da27b8dd8aba1ba3c5fc,b0200cc04f3ec780b7c2da27b8dd8aba1ba3c5fc,"fix(mail-merge): Remove unecessary shouldComponentUpdate on decorator

- `shouldComponentUpdate` on ListensToMailMergeSession decorator prevented
the default TokenizingTexField from being rendered even when mail merge
was inactive.
- It incorrectly assumed that the only state the decorated component
cares about was the mail merge session state"
emorikawa,2016-06-10 16:31:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/7daee5ce0f85a60d354afc11fe750dba9a05f27a,7daee5ce0f85a60d354afc11fe750dba9a05f27a,fix(draft): delay draft re-opening w/ errors to allow time to close
jstejada,2016-06-10 07:27:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/01814473f5b2b3dd01ee6f022b428e4264d52e34,01814473f5b2b3dd01ee6f022b428e4264d52e34,"fix(mail-merge): Correctly update tokens when new csv is imported

- MailMergeBodyToken now keeps internal state to track when the column
its linked to has changed
- Fix subject regex"
bengotow,2016-06-10 01:21:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/147f7f7219451908161889937282752c9493f5c8,147f7f7219451908161889937282752c9493f5c8,fix(moves): Improve labeling of ChangeLabelTasks
bengotow,2016-06-10 00:50:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/aba4b7d6b9367dbd1af6230ee784748b75e89cee,aba4b7d6b9367dbd1af6230ee784748b75e89cee,"fix(emoji): Remove vertical overflow from composer, allow for popups"
jackiehluo,2016-06-09 23:50:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/6743f8527830fa5ec58fdd5a4afac5eff58ff610,6743f8527830fa5ec58fdd5a4afac5eff58ff610,fix(emoji): Stop checking text outside of current div for matches
jackiehluo,2016-06-09 23:23:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/127b8c1ea2d2c1817928ce242b474f06dc2fc3ed,127b8c1ea2d2c1817928ce242b474f06dc2fc3ed,:art:(tracking): Align thread list with open tracking icons
jstejada,2016-06-09 22:45:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b949d5c8389f34cdb1172565aae3e1c725e7f695,b949d5c8389f34cdb1172565aae3e1c725e7f695,"fix(plugins):Call NotifyPlugins task regardless of metadata sync success

- Before this commit, if any SyncbackMetadataTask for a message failed, we would
never run NotifyPluginsOfSendTask because of the dependency in place.
This caused unintended consequences like open/link tracking not working
if any other plugin failed to syncback metadata, despite the tracking
metadata having been saved successfuly.

- This commit makes it so NotifyPluginsOfSendTask always runs after
the SyncbackMetadata tasks regardless of wether they fail or succeed by
updating the task queue to support this dependency scenario"
jackiehluo,2016-06-09 23:11:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/31edbfc361e31aa1e10dcd60c4d6e6db90006e12,31edbfc361e31aa1e10dcd60c4d6e6db90006e12,:art:(darkside): Add UI tweaks for activity list
emorikawa,2016-06-09 22:20:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/f593fbf6cdc8355d82fc66a50f1b95bd01c95e8e,f593fbf6cdc8355d82fc66a50f1b95bd01c95e8e,fix(templates): fix new templates from draft
emorikawa,2016-06-09 22:09:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/7cafc3ac1b5673839266a645770f396bac1639a4,7cafc3ac1b5673839266a645770f396bac1639a4,fix(template): can hit enter to save template names
jackiehluo,2016-06-09 22:03:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ef4d8c0f3021421e8d5676e65b42cc99e0571b5,8ef4d8c0f3021421e8d5676e65b42cc99e0571b5,fix(typo): Correct spelling in error message
emorikawa,2016-06-09 21:59:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/903e5834c1967ddc421d1bc81c9391a0a3b955bd,903e5834c1967ddc421d1bc81c9391a0a3b955bd,fix(templates): detect empty bodies and fix CSS
jstejada,2016-06-09 21:11:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5521161b7854fb1ad7099869202e201c54cf1da,e5521161b7854fb1ad7099869202e201c54cf1da,"fix(themes): Properly set theme on the hot window

- First composer window you open after changing the theme will now have
the correct theme"
bengotow,2016-06-09 19:13:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/3df5aeafcc6f03f24a5c934b962e4f9a16923231,3df5aeafcc6f03f24a5c934b962e4f9a16923231,fix(plugin-ids): Lookup plugin id if pkg is not loaded
emorikawa,2016-06-09 20:16:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/62126dd1f94726848f2fa1714fa9bafa3f97a4d1,62126dd1f94726848f2fa1714fa9bafa3f97a4d1,fix(analytics): improve data
jstejada,2016-06-09 19:31:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/316348e02cc386891a004e321d25f7f79a57c12e,316348e02cc386891a004e321d25f7f79a57c12e,fix(build): Fix less lint
emorikawa,2016-06-09 18:57:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/9680ade34fd4c3ebf253797f35899874e1219d10,9680ade34fd4c3ebf253797f35899874e1219d10,fix(analytics): set super properties on events
bengotow,2016-06-09 17:57:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/9569b53d357fcd236995718829cbff044b8acebc,9569b53d357fcd236995718829cbff044b8acebc,fix(focus): Don't clear focus unless change removes acct
bengotow,2016-06-09 17:30:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/4543f4770958d0fbef380077b42044ef3ceba48e,4543f4770958d0fbef380077b42044ef3ceba48e,fix(auth): Don't use a persistent session for webview
bengotow,2016-06-09 01:29:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2f0b727b1ef2a51605f1dc56fc4d1fbf2b622ad,c2f0b727b1ef2a51605f1dc56fc4d1fbf2b622ad,fix(new-event): Make X easier to click
bengotow,2016-06-09 01:25:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/fec31c543571bbc4dfc74c32cd415f19b840e58a,fec31c543571bbc4dfc74c32cd415f19b840e58a,fix(account): pro_sub => n1_sub
bengotow,2016-06-08 22:17:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/9373aee8fbafbd9c0ac87f812e5ab9c15297b462,9373aee8fbafbd9c0ac87f812e5ab9c15297b462,fix(prefs): Use labels instead of email addresses
bengotow,2016-06-08 21:25:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/167416ee86c0771dad911d0bc195d9b8a1ccc546,167416ee86c0771dad911d0bc195d9b8a1ccc546,"fix(win-manager): Replace sendToWindow, check for window first"
jstejada,2016-06-08 23:54:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/a80545d2dc9ebbb9125942afe4fd9b556602777b,a80545d2dc9ebbb9125942afe4fd9b556602777b,"fix(composer): Prevent composers in different windows to be out of sync

- Increase arbitrary wait time before closing window so Database ipc
messages can reach other windows with a higer success rate -- this
caused composers in different windows to be out of sync fairly often because the
database trigger event never reached them
- Clears commit timeout when commiting"
emorikawa,2016-06-08 21:19:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c0da37b00b4470eced34ae1f6d638bc8c169150,4c0da37b00b4470eced34ae1f6d638bc8c169150,fix(welcome): pass utm on to welcome
bengotow,2016-06-08 21:10:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ed9ca605824ffca516af9a5cfe61018938465a2,3ed9ca605824ffca516af9a5cfe61018938465a2,fix(onboarding): Switch images into appropriate places
bengotow,2016-06-08 21:05:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ff40f989af82178a8d2f1674a0f80eb88f81410,5ff40f989af82178a8d2f1674a0f80eb88f81410,fix(onboarding): Final tutorial screenshot
bengotow,2016-06-08 20:47:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d52bb0d3c455a311304d0b43cb088201391518f,7d52bb0d3c455a311304d0b43cb088201391518f,fix(onboarding): Don't allow going back into N1 signin
jstejada,2016-06-08 20:45:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/45dfcc1a6ce26629e4778b2806ceccff7dfcb230,45dfcc1a6ce26629e4778b2806ceccff7dfcb230,"fix(composer): Prevent participants field from adding unecessary changes

- This prevents the composer from being marked as not pristine even if
no real changes have been made"
emorikawa,2016-06-08 19:19:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f616ccc964d733fb5be7d077820184ab2d4662e,3f616ccc964d733fb5be7d077820184ab2d4662e,fix(analytics): Fix send draft analytics
emorikawa,2016-06-08 01:19:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/5214294e6f710477577013ecfbe58efe12597e2e,5214294e6f710477577013ecfbe58efe12597e2e,fix(analytics): fix identify
emorikawa,2016-06-07 22:41:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/b335856d6e5bb8083bf1e32fe879a4b3d3b9b807,b335856d6e5bb8083bf1e32fe879a4b3d3b9b807,fix(identity): fix parsing of url path names
bengotow,2016-06-08 01:09:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f9e1e2d9277a3f0c0975eac65ef37e9b9eeef4f,3f9e1e2d9277a3f0c0975eac65ef37e9b9eeef4f,"revert(electron): Downgrade to 1.1.3 to fix segfault

electron/electron/issues/5925"
jackiehluo,2016-06-06 23:24:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/adf1113361f7aef39dd6e845aad64509116295cd,adf1113361f7aef39dd6e845aad64509116295cd,fix(plugins): Update plugin descriptions
bengotow,2016-06-07 21:50:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/63972d439022268cae5bf45945e3025590ab7bac,63972d439022268cae5bf45945e3025590ab7bac,fix(keybase): Remove fdescribe
jstejada,2016-06-07 21:40:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/38e3897407b71018b77fae01f88ca7f672c94fb3,38e3897407b71018b77fae01f88ca7f672c94fb3,"fix(search): Prevent from adding duplicate threads to the search index

- We have to manually check if we are inserting a thread to the index
that already exists because the virtual table does not support unique
indexes
- Add versioning to the index to be able to rebuild it for the next
update"
bengotow,2016-06-07 21:25:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/78166a9d10531dd6d7d7a950b52bf9fd8554263b,78166a9d10531dd6d7d7a950b52bf9fd8554263b,fix(keybase): Minor linter errors
bengotow,2016-06-07 21:17:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b24603a95f03a8e29cf25674b794baa489f7f55,2b24603a95f03a8e29cf25674b794baa489f7f55,bump(version): 0.4.43 beta
bengotow,2016-06-07 21:15:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/c35e9a564d20e3835c80a80f7898e090eb3ebc43,c35e9a564d20e3835c80a80f7898e090eb3ebc43,"fix(keybase): Disable by default, remove duplicate dependencies"
emorikawa,2016-06-07 20:52:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/445d98c59a5ad26f1283ab4c36065fd8f3dd8894,445d98c59a5ad26f1283ab4c36065fd8f3dd8894,fix(analytics): update people traits
emorikawa,2016-06-07 19:53:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7e2beee8b1e8741bc3bdea861c628caf8d7cf50,c7e2beee8b1e8741bc3bdea861c628caf8d7cf50,fix(analytics): improved analytics
logandavis,2016-06-07 20:30:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f89ed79cbb97b0a917e883d3952507db6697e06,8f89ed79cbb97b0a917e883d3952507db6697e06,"feat(keybase): Adds PGP Encryption Plugin

commit efe58092494c8870072bdf45991c122624bb93e6
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue Jun 7 13:06:25 2016 -0700

    patching specs

commit 15a346b93efa5a21327f6bd7c14ef60ddc0f79bb
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Jun 6 17:49:20 2016 -0700

    A few small fixes

commit d4cc62a90d2d4f101b71bc57b5521353d2175219
Merge: 80018c0 17d9c3d
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Jun 6 17:32:00 2016 -0700

    Merge branch 'master' into wip/keybase

    Conflicts:
    	build/Gruntfile.coffee
    	internal_packages/onboarding/lib/page-authenticate.jsx

commit 80018c045527dec331118426ce67d82c44926334
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri Jun 3 18:12:39 2016 -0700

    Re-styles decryption interface, temporarily removes file decryption

    The decryption interface was ugly as hell. Now it's aligned with
    the ""Message Encrypted"" notice and also the ugly text input is
    gone - replaced by a much nicer-looking popover. In the course of
    this refactor, file decryption was temporarily deactivated, but
    will return soon.

commit ed1e6232803e2c6b8930f5ed2bd6ccde56542b3b
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri Jun 3 15:39:02 2016 -0700

    Adds more information to key-adder UI

    User testing indicated that the key-adder UI didn't provide
    enough feedback about incorrect inputs and the slow load time
    of key generation. This commit adds a spinning wheel while loading
    and a span describing which inputs are incorrect.

commit 4d7908635cd606a3ebb2607537127dd1c5740a35
Author: logandavis <logankeahidavis@gmail.com>
Date:   Thu Jun 2 18:40:57 2016 -0700

    Touches up search

    Fixes a bug in the search debouncing that was sometimes
    allowing users to modify search queries and not have the
    new query searched. Added messaging to stop people from
    trying to search keybase by email address.

commit 140ae6679758d8ed54d1b6b7bd5c837f84132363
Author: logandavis <logankeahidavis@gmail.com>
Date:   Wed Jun 1 17:35:39 2016 -0700

    Adds import from file and unifies paste in key-adder.cjsx

    User review feedback indicated that key import was a big pain
    point - pasting keys was a pain in the butt, private keys
    could be saved as public keys, etc. This commit is the functional
    overhaul (and refactor) for the key-adder on the preferences
    page. It adds an Import from File function and merges
    Paste Private and Paste Public into just Paste, which autodetects.

commit 297f9ed482f4e83c52e40e479a31ba1bffad3f7d
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 21:11:01 2016 -0700

    fix(es6): Converstion broke file uploads by adding body: {}

commit 7815e90c49c70339cd6d26d48e818d4f5f962b7f
Merge: af54f01 0af27ee
Author: logandavis <logankeahidavis@gmail.com>
Date:   Wed Jun 1 14:49:14 2016 -0700

    Merge branch 'wip/keybase' of github.com:nylas/N1 into wip/keybase

commit af54f0165b95447ffa04c1e324e02d892b20d047
Author: logandavis <logankeahidavis@gmail.com>
Date:   Wed Jun 1 14:47:03 2016 -0700

    Bugfixes: clientID not found (from rebase) and modal on new email

    User testing revealed two pretty noxious bugs, one when you email
    someone who's not saved as a contact and one caused by an update
    to mail merge requiring inputs to Participant-Text-Field that
    n1-keybase wasn't provided. This fix patches modal-key-recommender
    to use emails as a fallback to contacts and sets a reasonable
    default for the input to Participant-Text-Field.

commit 0af27ee10666f35f248a4191fe937cde920d6baf
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 19:10:11 2016 -0700

    fix(specs): Empty parameter list

commit 87407249c2bfa7737a4609ac89b46c3b5a074f76
Merge: e4c050b 9892473
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 18:08:46 2016 -0700

    Merge branch 'master' into wip/keybase

commit e4c050b599fbc83b6249634297483a5683fe3c56
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 18:08:42 2016 -0700

    fix

commit 6c7857890df9d277f786b87ab996feeec4089c3b
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 18:05:35 2016 -0700

    fix(linter): Minor issue

commit 36197effd6c8ca3648a5010dac874c9a990fb1b9
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 18:02:26 2016 -0700

    fix(lint)

commit 73dd4850bf675f983ecfcc5ef65e91b9aa118e16
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 17:52:18 2016 -0700

    fix(lint): Don't lint node_modules of packages

commit 15c9d42f2d896f22092465e78cb340d07e0086ac
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 17:36:24 2016 -0700

    patch(auth): Remove unused import

commit 8756b2b5314fd0366caf8b2e12a3bc5e527bc593
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 31 17:33:30 2016 -0700

    patch(auth): Temporarily remove auth flow

commit 135395e4afdfcc8ba57667e60fa73ef55e126c2f
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 31 17:25:08 2016 -0700

    linting fix

commit 1049449f211111e704b3e543d2748339bf9cc6fd
Merge: e6a8f9e e1275eb
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 31 15:50:00 2016 -0700

    merge commit

commit e6a8f9ebadcc3d1b1444c8676d15b730a0d7a5c0
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 31 15:19:27 2016 -0700

    move styling, update readme

commit d388eb737ae9febc197bf0fe22d505a28c669639
Author: logandavis <logankeahidavis@gmail.com>
Date:   Wed May 25 16:15:31 2016 -0700

    Add Export Private Key button to preferences

commit f49062639a8f4a67a576b90a02f4b0f06dd492d0
Author: logandavis <logankeahidavis@gmail.com>
Date:   Wed May 25 12:40:23 2016 -0700

    Add Export Public Key button to preferences

commit 847221b6a2c9b1a1e8b817708ed9032803de9261
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 20 15:26:37 2016 -0700

    update readme

commit 1f3f14bf9c69bfea7d7d1ac79c39fe0fe6befd37
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 20 15:23:26 2016 -0700

    Beautify Add Email button, catch naggling bugs

    The old add email button on the preferences page, which
    was not playing nice with the styling of KeybaseSearch, has
    been replaced by the drop-in EmailPopover element. Also, two bugs
    that were causing the console to flip out on normal, unencrypted
    emails were caught and fixed - the Decrypt Button now returns
    false instead of null, and attachments without filenames are
    allowed.

commit a7cb363e357ff996b92946e9685416b98133de0b
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 20 14:54:00 2016 -0700

    Debug and style the encryption popover modal

    The encryption popover was ugly as sin and also lacking in
    some functionality - it unnecessarily showed the email list,
    it contained no reference to the Key Management page, it
    didn't display any links to the keybase profile in question...
    now it is a pretty and functional popover.

commit b4e3f5421558d4d128ffc66125657fc8b1abf1f1
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 17 18:56:08 2016 -0700

    Unborks Import Key popover, obscures password fields

    The Import Key popover on the preferences page was rendering off
    the screen because it was always pointing at the last button
    created rather than the button clicked. Now that's fixed.

commit 20ab9f825d65f40451397c8a1df484bb7e63c593
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 17 17:17:44 2016 -0700

    Fixes identity filename/address management, dedupes search, encodes +

    Bunch of minor bugfixes here. The identity.path refactor broke
    PGPKeyStore.addAddressToKey and removeAddressFromKey, which this commit
    fixes. + characters were being incorrectly encoded in messages as &#43;
    which was breaking message decryption - that's now fixed in message
    preprocessing. Finally, basic Keybase search result deduplication
    is now in place.

commit 8a2a5e6dc3c84ade420b16e36d2954cea661d1f1
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 17 14:13:17 2016 -0700

    Adds private key management to preferences page; beautifies

    Previously, the KeyManager element on the Preferences page only
    exposed public keys, and there was no way to see, edit, or delete
    private keys. Now you can do all of those things. This commit
    also fixes some render-timing issues in PGPKeyStore._populate
    that were causing nonexistent keys to appear (one on key generation,
    one on deletion of the final key) and improves the styling of
    the Preferences page.

commit 3c39431dd6ad3a8c19770c6ddd46d508ee92d4bb
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 13 15:22:40 2016 -0700

    burns the dead code out of preferences-keybase

commit eb7b924d5e00946ebb3e7174f54f2c1dde1ff616
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 13 14:58:51 2016 -0700

    Fix key generation and saving from the preferences page

    An earlier refactor away from key objects and towards identity
    objects borked the old key saving code. This commit refactors
    the key-saving code so that keys can be manually added from
    the preferences page again, and also makes said code much
    clearer.

commit e1f78d0080505102bf421c8c3638fee527d84481
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 11 17:41:24 2016 -0700

    add README of todos

commit c44d7995fc3cc097fb8f98689dd18488920488cf
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 11 17:41:12 2016 -0700

    heavy style pass, misc bugfixes, add assets

commit 47208ca2d947ac4b04c1fec14b433f7c6105fe1d
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 11 14:03:06 2016 -0700

    Decrypting files first pass, problem with unlocking keys

commit fc2a56574c1eb0a7098280f3e7a2ca5d6697340c
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 4 17:52:32 2016 -0700

    Cause message to encrypt on key picker popover close

commit 545392dee9db2754c6b729bd9549c071e1568ddd
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 4 12:04:08 2016 -0700

    light design pass on the modal (now a popover)

commit 2726aab32dd74a68936a7d80d6e49b879f182ee3
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon May 2 15:47:45 2016 -0700

    Key picker modal functional for multiple recipients, still needs lots of cleanup

commit 050114acf36b8654de80726352812e945ac88968
Author: Dakota Nelson <dakota@nylas.com>
Date:   Fri Apr 29 14:52:33 2016 -0700

    Key picker modal functional for single recipient

commit 865c7c8894b30a55e4c6027dd6f03fea5d0bb330
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 28 17:31:08 2016 -0700

    modal now allows selection of keybase user

commit 728c995314b3238bdb3222c7d12353ab2e35a65a
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 28 10:46:47 2016 -0700

    consolidate key cache into one object, fix all tests

commit 4bdd49ebd60beadf72b7aa099cfded09861768af
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed Apr 27 11:49:54 2016 -0700

    checkpoint commit for key selection modal in composer

commit 7d33d832f6587814f8da142e14f9a7f8256114b9
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 17:46:01 2016 -0700

    Remove infinite loop of doom, match keys properly

commit 7a4c1d60c1f1455e70a190710b59970ab2ed3b2a
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 14:31:41 2016 -0700

    Re-add some of Logan's changes lost in the repo migration

commit 6c1e31601e499f69c8df5b9f1a5244480ec67da1
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 13:52:55 2016 -0700

    slightly improve style on the decryption interface

commit 78f115f59ce09f57621776be4287e1e3a9d047b4
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 13:10:27 2016 -0700

    update keybase profile type translation to include proofs

commit 664c61fdd5e03d9ba4afa40d14673ad7733b1e30
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 11:54:35 2016 -0700

    Replace undocumented 'key' objects with explicit 'identity' objects

commit 0824cc0a522e9d9d8045d7a87ef3b7ec8381090e
Author: Dakota Nelson <dakota@nylas.com>
Date:   Fri Apr 22 13:33:18 2016 -0700

    Remove unused code

commit f0fd315cf7daf64f63d933508a6799ae4b5b4f18
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 21 17:24:54 2016 -0700

    Further refactor keybase plugin

commit 086e86f289213789f5796b5b1febee709986b89a
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 21 15:53:54 2016 -0700

    Refactor, and a useless commit msg

commit 1fcda3875424a3ba4ba54f25644b43690b153324
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Apr 20 16:16:26 2016 -0700

    Fix linter errors (reported via cd build; grunt lint)

commit fcc937e6b50e43932478437ecf6dabb2f96fa15c
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Apr 20 16:08:42 2016 -0700

    Keybase API was 500'ing - move API adapter to standard (err, data) callback format and make it only call the callback once when error is hit (return after erroring)

commit fd0b4220af13cc80b4c88f9e2e63976a54ac50d4
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Apr 20 15:56:27 2016 -0700

    Fix state were user has no pub keys

commit 13886101fcf63e4e497526c2e039cbb791670c06
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed Apr 20 15:25:30 2016 -0700

    add Logan's changes from the other repo

commit 6e9103b4188414ddd6e01db2c4c50c68ad54caca
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed Apr 20 15:22:34 2016 -0700

    minor styling change to improve keybase popover

commit fd0749a7c1c9202b94dc5a47bad26d8960c17099
Author: Dakota Nelson <dakota.w.nelson@gmail.com>
Date:   Wed Apr 20 12:30:40 2016 -0700

    feat(keybase): Initial commit from n1-keybase repo

commit e1275eb9ea548f76c06eb605b77a62d314f3d10f
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 31 15:19:27 2016 -0700

    move styling, update readme

commit 7f64713cc5d8cfdc59eca3c007cf673e5e2b6dea
Author: logandavis <logankeahidavis@gmail.com>
Date:   Wed May 25 16:15:31 2016 -0700

    Add Export Private Key button to preferences

commit 9d4e2552388f94fb7113ab80906519dce4d7350f
Author: logandavis <logankeahidavis@gmail.com>
Date:   Wed May 25 12:40:23 2016 -0700

    Add Export Public Key button to preferences

commit 166585dba9ece8d5dd529418b934947985ace5a3
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 20 15:26:37 2016 -0700

    update readme

commit f875c4146e98152cf4d050fc5af3c322c2d5fdae
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 20 15:23:26 2016 -0700

    Beautify Add Email button, catch naggling bugs

    The old add email button on the preferences page, which
    was not playing nice with the styling of KeybaseSearch, has
    been replaced by the drop-in EmailPopover element. Also, two bugs
    that were causing the console to flip out on normal, unencrypted
    emails were caught and fixed - the Decrypt Button now returns
    false instead of null, and attachments without filenames are
    allowed.

commit 48713d78381fb7320ce265b84c95f8b1497008f7
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 20 14:54:00 2016 -0700

    Debug and style the encryption popover modal

    The encryption popover was ugly as sin and also lacking in
    some functionality - it unnecessarily showed the email list,
    it contained no reference to the Key Management page, it
    didn't display any links to the keybase profile in question...
    now it is a pretty and functional popover.

commit a607f97f8082a14a29ebd5c2d8b397872ef5456a
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 17 18:56:08 2016 -0700

    Unborks Import Key popover, obscures password fields

    The Import Key popover on the preferences page was rendering off
    the screen because it was always pointing at the last button
    created rather than the button clicked. Now that's fixed.

commit 2afd41894aa297dcd6aec0b785cadbb533377f80
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 17 17:17:44 2016 -0700

    Fixes identity filename/address management, dedupes search, encodes +

    Bunch of minor bugfixes here. The identity.path refactor broke
    PGPKeyStore.addAddressToKey and removeAddressFromKey, which this commit
    fixes. + characters were being incorrectly encoded in messages as &#43;
    which was breaking message decryption - that's now fixed in message
    preprocessing. Finally, basic Keybase search result deduplication
    is now in place.

commit 4824556543dce31b14be81ebe471f8febb55e00c
Author: logandavis <logankeahidavis@gmail.com>
Date:   Tue May 17 14:13:17 2016 -0700

    Adds private key management to preferences page; beautifies

    Previously, the KeyManager element on the Preferences page only
    exposed public keys, and there was no way to see, edit, or delete
    private keys. Now you can do all of those things. This commit
    also fixes some render-timing issues in PGPKeyStore._populate
    that were causing nonexistent keys to appear (one on key generation,
    one on deletion of the final key) and improves the styling of
    the Preferences page.

commit 47c05fc485c80b297b6027f9bdabb5f921be77b3
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 13 15:22:40 2016 -0700

    burns the dead code out of preferences-keybase

commit 6fdf34e5c4188994844052d95d927cab1ed182ea
Author: logandavis <logankeahidavis@gmail.com>
Date:   Fri May 13 14:58:51 2016 -0700

    Fix key generation and saving from the preferences page

    An earlier refactor away from key objects and towards identity
    objects borked the old key saving code. This commit refactors
    the key-saving code so that keys can be manually added from
    the preferences page again, and also makes said code much
    clearer.

commit a1b4b4fdb4b35a844ca490d3e9029dbbf4d7bf24
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 11 17:41:24 2016 -0700

    add README of todos

commit 6747a0a447476ca6af829886ec304d57bc5dd0ee
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 11 17:41:12 2016 -0700

    heavy style pass, misc bugfixes, add assets

commit 8544e4b84341f0bc49a1765c057cbf443c220448
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 11 14:03:06 2016 -0700

    Decrypting files first pass, problem with unlocking keys

commit 428dc6739fb29f833c53e957e7a998abf25460ac
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 4 17:52:32 2016 -0700

    Cause message to encrypt on key picker popover close

commit 9d8ef053beca3ef6bbc910de272f1b98033599bf
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed May 4 12:04:08 2016 -0700

    light design pass on the modal (now a popover)

commit b4a0ad2fa2ac33dbf3333e4beb9ac0df04aa107d
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon May 2 15:47:45 2016 -0700

    Key picker modal functional for multiple recipients, still needs lots of cleanup

commit 6bf96d973c7e19de103695f3d6e3346c8db2dab3
Author: Dakota Nelson <dakota@nylas.com>
Date:   Fri Apr 29 14:52:33 2016 -0700

    Key picker modal functional for single recipient

commit f5f0e6aea8c16aefd3cdcbe19664bed708857693
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 28 17:31:08 2016 -0700

    modal now allows selection of keybase user

commit 83f7ad54bcab7c24da033d8fe60a602b27b79ded
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 28 10:46:47 2016 -0700

    consolidate key cache into one object, fix all tests

commit f8ec4576dee108584e946a7e4c6b9f17885921de
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed Apr 27 11:49:54 2016 -0700

    checkpoint commit for key selection modal in composer

commit c4dd851402162bcaa7e3b8cebf911d6a57fdfdbc
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 17:46:01 2016 -0700

    Remove infinite loop of doom, match keys properly

commit 537d2b423b9c4210c97bda0bf00cbbd1a4ebc80f
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 14:31:41 2016 -0700

    Re-add some of Logan's changes lost in the repo migration

commit 91d86ad6b69edee59de4938c24143e186ad5523a
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 13:52:55 2016 -0700

    slightly improve style on the decryption interface

commit 321ea22c01a6f346325870049a0664155b7ee71f
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 13:10:27 2016 -0700

    update keybase profile type translation to include proofs

commit b8821490432e582a53e7416b49476f90ab59f230
Author: Dakota Nelson <dakota@nylas.com>
Date:   Mon Apr 25 11:54:35 2016 -0700

    Replace undocumented 'key' objects with explicit 'identity' objects

commit 0999127bcd9c3cd75e17a8a4e6d37c5b53bc22ef
Author: Dakota Nelson <dakota@nylas.com>
Date:   Fri Apr 22 13:33:18 2016 -0700

    Remove unused code

commit 3ddfc4e6946b3ed3e051c561cdda7499d326058f
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 21 17:24:54 2016 -0700

    Further refactor keybase plugin

commit 1b5a9de2c9b2084a214619ce7c551ed6e9283a96
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 21 15:53:54 2016 -0700

    Refactor, and a useless commit msg

commit 999dd82e225b2d8209ee4f7be3cc0ab43c8e53b8
Author: Dakota Nelson <dakota@nylas.com>
Date:   Thu Apr 21 11:43:02 2016 -0700

    Modify participants func to optionally allow from and bcc

commit 9cdf258f5df9fd34ac94bf9822fdd7256af1bb9a
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Apr 20 16:16:26 2016 -0700

    Fix linter errors (reported via cd build; grunt lint)

commit c14fc59b6f236191b759bda6561c5f343401e8ab
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Apr 20 16:08:42 2016 -0700

    Keybase API was 500'ing - move API adapter to standard (err, data) callback format and make it only call the callback once when error is hit (return after erroring)

commit f0225603abb56b14e540f8419cb212760cf0883d
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Apr 20 15:56:27 2016 -0700

    Fix state were user has no pub keys

commit 818881523c698b1bd368344e9ff29ae870f9aae2
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed Apr 20 15:25:30 2016 -0700

    add Logan's changes from the other repo

commit 69f2003ff11be741b97bbb36a7bb4afd29ac7ecc
Author: Dakota Nelson <dakota@nylas.com>
Date:   Wed Apr 20 15:22:34 2016 -0700

    minor styling change to improve keybase popover

commit 4081ad7ef2b4375f5665904eb2d61992bab9cf4d
Author: Dakota Nelson <dakota.w.nelson@gmail.com>
Date:   Wed Apr 20 12:30:40 2016 -0700

    feat(keybase): Initial commit from n1-keybase repo"
jackiehluo,2016-06-07 20:07:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/0387f613e9a1c2211daaf440f3ca376891dcb6e2,0387f613e9a1c2211daaf440f3ca376891dcb6e2,fix(onboarding): Add notice about cloud sync
bengotow,2016-06-07 18:39:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/cd9987e5aaa5937ee2411bac63948cabe3340a0a,cd9987e5aaa5937ee2411bac63948cabe3340a0a,"fix(win32): Pad the search container to prevent clipping

#2376"
jstejada,2016-06-07 17:37:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/de703bd38ebaf7936a90af7649e5433979bf638e,de703bd38ebaf7936a90af7649e5433979bf638e,"fix(templates): Support accented characters in template names

- #2392"
jackiehluo,2016-06-07 17:28:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a5515e4c9051d6f495214bceb27a149930fdff0,4a5515e4c9051d6f495214bceb27a149930fdff0,"feat(snooze): Add command for keyboard shortcut

Test Plan: Tested locally.

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D3008"
jstejada,2016-06-07 17:13:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb331f14de44a8037325edd9926f59d8468631a4,cb331f14de44a8037325edd9926f59d8468631a4,"fix(mail-merge): Prevent subject from stealing focus from table

- Properly clears savedSelection reference inside MailMergeSubject
component"
bengotow,2016-06-07 00:57:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/94a759d698232b6ecb25d843d4fe76ad5f97afe2,94a759d698232b6ecb25d843d4fe76ad5f97afe2,fix(sidebar): Show icons when hovering over entire section
jstejada,2016-06-07 00:23:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/213f2a4e1743303557cba812786515953853399d,213f2a4e1743303557cba812786515953853399d,:art:(empty-state): Add missing empty-state images
jstejada,2016-06-07 00:18:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/544d27bca874fafe0a1a727ae33cc776c370dbaa,544d27bca874fafe0a1a727ae33cc776c370dbaa,"fix(tracking): Remove hardcoded references to tracking plugin ids

- Adds a helper in the package manager to get the id of a plugin"
jackiehluo,2016-06-06 23:53:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d7dec3b0e815f043adcfc1321fd892226648beb,6d7dec3b0e815f043adcfc1321fd892226648beb,fix(tracking): Enable toggle button by default unless specified
jstejada,2016-06-06 23:13:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/82fd8a1c4b039197f78ccc4107651a17167f8de6,82fd8a1c4b039197f78ccc4107651a17167f8de6,"fix(link-tracking): Properly render tracking bubble for exchange msgs

- In Exchange messages (no multisend per recipient), links in the
message body still have the redirect_url (as opposed to the url). When
traversing the body, we were just checking for the url, so the links
would not be found and we wouldn't render the tracking bubble"
bengotow,2016-06-06 22:20:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/17d9c3d7175392538345e32e54ea871987f85c2d,17d9c3d7175392538345e32e54ea871987f85c2d,"fix(tz): Update moment, internally uses Intl.DateTimeFormat()"
emorikawa,2016-06-06 22:17:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/23ee4b5c76fb1b699a36649910ce2bf4e655ff03,23ee4b5c76fb1b699a36649910ce2bf4e655ff03,fix(tracking): Ensure that actions have unique keys
jstejada,2016-06-06 22:00:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/af63a67cca4f2fe5e929ab1aa8aa8b5155cf3015,af63a67cca4f2fe5e929ab1aa8aa8b5155cf3015,"fix(sidebar): Properly update sidebarAcctIds when all accts removed

- Prevents app from crashing when all accounts are removed"
bengotow,2016-06-06 21:33:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7dde102a812379b26a7d8f754c2915356d25e4f,a7dde102a812379b26a7d8f754c2915356d25e4f,fix(merge): Settings: add 24-hour clock support
ForNeVeR,2016-04-10 04:39:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/899193908ed5ea36dbae8e59757c0181484629f1,899193908ed5ea36dbae8e59757c0181484629f1,Settings: add 24-hour clock support
jackiehluo,2016-06-06 19:04:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a7e45c66fb50c0c46325413ed5f1528bb1b66a8,6a7e45c66fb50c0c46325413ed5f1528bb1b66a8,:art:(tracking): Change references to read receipts
bengotow,2016-06-04 00:01:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/c61fdfb3177ccd3316b4267913a6d7de3ee7b33f,c61fdfb3177ccd3316b4267913a6d7de3ee7b33f,"fix(css): Fix CSS regression, remove unused assets"
bengotow,2016-06-03 23:35:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf9941fe5a901f201ed3aa47a3e63b6dc99d0ed1,cf9941fe5a901f201ed3aa47a3e63b6dc99d0ed1,fix(onboarding): Message for 400+ server error codes
jstejada,2016-06-03 23:34:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/849613836addf55cab0d444af1218e050e8fe6a6,849613836addf55cab0d444af1218e050e8fe6a6,fix(mail-merge): Update EditorAPI instance correctly for subject field
jstejada,2016-06-03 23:14:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/ddad7d9be778a55eaf05c529f25e96418a221eb0,ddad7d9be778a55eaf05c529f25e96418a221eb0,fix(mail-merge): Trim email
bengotow,2016-06-03 23:09:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/e147b59ad056346851810f552c85dba07c3d3607,e147b59ad056346851810f552c85dba07c3d3607,fix(beforeunload): Chrome 51 - return undefined to continue
bengotow,2016-06-03 23:05:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f27e0006904f577151020a09ccaf88d2cd4c378,1f27e0006904f577151020a09ccaf88d2cd4c378,fix(onboarding): Only show the welcome page if not already seen
jstejada,2016-06-03 23:07:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/95b3939885ed7eb0bcd7b8231b928b98e0f9f1a0,95b3939885ed7eb0bcd7b8231b928b98e0f9f1a0,"fix(mail-merge): Fix validation -- trim email strings

- Don't block send button if validation fails"
jstejada,2016-06-03 22:10:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e808003ff33feb7bd5ca83e5fe79b33fe64da02,0e808003ff33feb7bd5ca83e5fe79b33fe64da02,"fix(sidebar): Correctly update sidebar when focusing perspective

- When focusing a perspective:
  - If sidebar is unified inbox then don't the sidebar layout
  - If sidebar is for a single account, then update to the appropriate
  single account
- Renames some variables"
jstejada,2016-06-03 19:34:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bd338511a47468f3959da925479bad440bccffa,5bd338511a47468f3959da925479bad440bccffa,"fix(mail-merge): Fix broken error handling with multi-send to individual

- As a temporary fix, now passes an option to SendDraftTask to not
perform MultiSendToIndividualTask's which screwed up error handling
- Fixes actual bugs with error handling"
bengotow,2016-06-03 17:48:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b69cea5d519d09fc2810e0f326598efc8994e62,5b69cea5d519d09fc2810e0f326598efc8994e62,bump(electron): 1.2.1 and React Devtools in dev mode 🎉
emorikawa,2016-06-03 12:06:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/a00d4f2028ce7a7660f7e7e42875e9599c4e5b02,a00d4f2028ce7a7660f7e7e42875e9599c4e5b02,fix(lint): fix unused variable
emorikawa,2016-06-03 11:49:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0a805449f29124c7521da2f7f2be20e42066df4,e0a805449f29124c7521da2f7f2be20e42066df4,fix(composer): overlaid component fix for new event card
bengotow,2016-06-03 01:56:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1bbec25cd898efe5e9df94d5ce0521d7018e8a1,c1bbec25cd898efe5e9df94d5ce0521d7018e8a1,"fix(identity): deprecate updaterId, provide safe access to identity.id"
bengotow,2016-06-03 01:46:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/16361594c02c24b54340df2ac923a9f6d34315af,16361594c02c24b54340df2ac923a9f6d34315af,fix(sync): Always restart where left off after initial sync interrupted
jstejada,2016-06-02 23:56:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5a9ae718df615cad6256a78a0041e22a59327fd,f5a9ae718df615cad6256a78a0041e22a59327fd,"fix(build): Update asar unpack patterns to match top level `examples`

- Any dependencies that have an `examples` directory would not get
packed into the asar, causing the windows build to fail because of path
lengths > 250 characters"
jstejada,2016-06-02 23:00:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5a82569a8aba319c94cc666ca6e3981d5c044e6,f5a82569a8aba319c94cc666ca6e3981d5c044e6,bump(version): 0.4.42
jstejada,2016-06-02 22:51:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/7730f4fcc27f2626f28da5e0f1995ee20327dec7,7730f4fcc27f2626f28da5e0f1995ee20327dec7,"fix(build): Do not try to compile dependencies

- Remove unused peg file"
bengotow,2016-06-02 22:28:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/44df559cfa084208a71d515bca2e6d03fb7f2ba6,44df559cfa084208a71d515bca2e6d03fb7f2ba6,fix(multi-send): Increase timeouts of all multi-send API requests
jstejada,2016-06-02 21:45:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/5dc07d68cf3154266292ae0b8e9ab1d3005ec86f,5dc07d68cf3154266292ae0b8e9ab1d3005ec86f,"fix(build): Don't lint files inside node_modules, fix lint error"
emorikawa,2016-06-02 15:24:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/57d0497788aee7a4ec494aa940477364bffcdbaf,57d0497788aee7a4ec494aa940477364bffcdbaf,fix(analyitcs): make sure to flush events before they close
emorikawa,2016-06-02 14:00:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/866f34162e27cf616f6a60ed363730c495c972e4,866f34162e27cf616f6a60ed363730c495c972e4,fix(onboarding): use proper env
emorikawa,2016-06-02 13:45:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/d58bb4f07e3f246b28d9f3b67cf7f1a3b7e0b393,d58bb4f07e3f246b28d9f3b67cf7f1a3b7e0b393,fix(onboarding): properly base64 encode string
emorikawa,2016-06-02 10:16:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5a53a49ee22c84ebe15e8d00db905d909fde45f,b5a53a49ee22c84ebe15e8d00db905d909fde45f,fix(analytics): fix errors in onboarding flow
emorikawa,2016-06-02 07:38:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e0c513805ced012696e4b472e42afeb10e7aec5,7e0c513805ced012696e4b472e42afeb10e7aec5,"feat(analytics): update analytics libraries

Summary:
See
https://paper.dropbox.com/doc/Analytics-ID-Unification-oVDTkakFsiBBbk9aeuiA3

Test Plan: Manual

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2998"
jackiehluo,2016-06-02 01:02:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5ab2ea3222c7f2ea49a5cfb12e8e43d973a88b3,f5ab2ea3222c7f2ea49a5cfb12e8e43d973a88b3,feat(activity-list): Scope notifications by accounts
jstejada,2016-06-02 00:25:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/8197b2a96f2877ae2dcdbe7732b17cf8ab37134f,8197b2a96f2877ae2dcdbe7732b17cf8ab37134f,fix(sidebar): Properly initialize sidebar accounts
bengotow,2016-06-02 00:24:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/3270ac48fc139b88c39d6df8f967a8fa22421606,3270ac48fc139b88c39d6df8f967a8fa22421606,fix(tutorial): Incorrect strings
jstejada,2016-06-02 00:13:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac089c4d8df49834a745db9058010f60ef93d9f1,ac089c4d8df49834a745db9058010f60ef93d9f1,"update(sidebar): Moves accounts in sidebar state to FocusedPerspectiveStore

Summary:
- FocusedPerspectiveStore now holds the state of the accounts that are currently being displayed in the sidebar, i.e. unified inbox or not, which makes it globally accessible state. The SidebarStore just reads this state directly off of the FocusedPerspectiveStore to decide which sections and items to display in the sidebar.
- Updates `Actions.focusDefaultMailboxPerspectiveForAccounts` to take an optional array of `sidebarAccountIds` to set in the sidebar. The default behavior is to show the accounts of the perspective that will be focused. E.g. when selecting an account via the account switcher, it will just show the sidebar items for the single account that was selected, but when adding a new account, we are setting the sidebar accounts to all account although we are still focusing the perspective for a single account.
- Will now show unified inbox sidebar with correctly focused account when new account added.
- Cleans up the code a little bit, but this package still needs major refactor

Test Plan: Missing!

Reviewers: jackie, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D3002"
jackiehluo,2016-06-01 23:07:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/11d5b265480bd43592c6423f87f83a42dc846a7d,11d5b265480bd43592c6423f87f83a42dc846a7d,:art:(participant-profile): Use UI variables
bengotow,2016-06-01 22:55:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/8860326065bd01fdc6303af0239d1b195b4fa0d9,8860326065bd01fdc6303af0239d1b195b4fa0d9,fix(account-store): Update fake data import for screenshots
jackiehluo,2016-06-01 22:43:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/5055ba59a9698c9242a83d4b7f0a633a9064a0f2,5055ba59a9698c9242a83d4b7f0a633a9064a0f2,:art:(load): Update loading screen to new style
bengotow,2016-06-01 21:36:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/3615c7ea4926e4454cd36c2b002e7cb510545ca4,3615c7ea4926e4454cd36c2b002e7cb510545ca4,"fix(undo): Improve messaging around label changes, modernize undo-redo-store

Summary: Just a small patch to address bad messaging

Test Plan: Run one new test!

Reviewers: jackie, juan

Reviewed By: jackie, juan

Differential Revision: https://phab.nylas.com/D3000"
jackiehluo,2016-06-01 20:54:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/311e21e615ebdb974f417759c35303c5c7be23fe,311e21e615ebdb974f417759c35303c5c7be23fe,:art:(sidebar): Fix button to add folder/label
jackiehluo,2016-06-01 19:59:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/d40f9de330860d67a2944a99ac3d4eb7db670b28,d40f9de330860d67a2944a99ac3d4eb7db670b28,fix(tracking): Add key and refactor code
jstejada,2016-06-01 19:37:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/839c60f5b53753da88fdc7e395e5c694b34d0b0c,839c60f5b53753da88fdc7e395e5c694b34d0b0c,fix(build): Fix open-tracking specs
jackiehluo,2016-06-01 18:42:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/58e1ed57ee2397d1067738b2d87774987bc4474d,58e1ed57ee2397d1067738b2d87774987bc4474d,fix(badge): Add option for total count
jackiehluo,2016-06-01 18:11:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f7d64b27a9f7be39749baed63fa2793135405b4,2f7d64b27a9f7be39749baed63fa2793135405b4,fix(emoji): Remove special casing for Outlook emoji
jackiehluo,2016-06-01 18:10:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/10ac3fcb3002979af57f6e4102680dc4942423d1,10ac3fcb3002979af57f6e4102680dc4942423d1,"feat(tracking): Add message history for open and link tracking

Summary: Message-specific history for opens and clicks will now be
available in popovers while viewing the message.

Test Plan: Tested locally.

Reviewers: bengotow, evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2995"
bengotow,2016-06-01 04:11:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/1df70e14f1983a20a3382b6a6393520e94e6b2d9,1df70e14f1983a20a3382b6a6393520e94e6b2d9,fix(es6): Converstion broke file uploads by adding body: {}
bengotow,2016-06-01 02:10:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/66020879102463d0e70422e25138a309ae22f88c,66020879102463d0e70422e25138a309ae22f88c,fix(specs): Empty parameter list
bengotow,2016-06-01 00:05:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/9892473513728ad21a7f098f7b5677bad6b07abf,9892473513728ad21a7f098f7b5677bad6b07abf,fix(category-picker): Update specs for sorting
bengotow,2016-06-01 00:01:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/04f5d2968f2f263ce455d6feeb3360685be8ed50,04f5d2968f2f263ce455d6feeb3360685be8ed50,fix(category-picker): Sort categories displayed in picker
bengotow,2016-05-31 23:42:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/b160f6d181a8a7e0a21bc97ee485a674f7b889d8,b160f6d181a8a7e0a21bc97ee485a674f7b889d8,fix(mail-rules): Fix re-ordering of mail rules
bengotow,2016-05-31 23:31:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/856334c08890de3a4e2d8004494f6c66f944c2ed,856334c08890de3a4e2d8004494f6c66f944c2ed,"fix(tasks): Call super.isDependent, wrap model lookup in transaction

Summary:
ChangeFolder/ChangeLabel still need to call super.isDependentOnTask!

Formalize ""retrieve latest models"" part of the performLocal process, ensure that it's always /inside/ the transaction that is going to write the changes. This ensures that queueing two tasks for the same thread at the same time don't cause a race...

...condition between the two tasks (end result is currently arbitrary!)

Add ""move to label"" mail rule to go alongside ""Add Label""

Test Plan: All broken... willfix.

Reviewers: juan, evan, jackie

Reviewed By: evan, jackie

Differential Revision: https://phab.nylas.com/D2999"
jackiehluo,2016-05-31 21:35:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c04be3e20683f7eed1c0384f08302379580f9c6,9c04be3e20683f7eed1c0384f08302379580f9c6,fix(themes): Add Less is More to list ordering
bengotow,2016-05-31 21:04:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb3b26deb7804a68e42937df4edfa8350cb572c2,eb3b26deb7804a68e42937df4edfa8350cb572c2,fix(auth): Wait 150s for Exchange autodiscovery to complete
bengotow,2016-05-31 19:24:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/94b59f2562dc2f5e39cc0a939f62af62fb900e7e,94b59f2562dc2f5e39cc0a939f62af62fb900e7e,"fix(unified-inbox): If a Gmail account is present, show Important"
bengotow,2016-05-31 19:15:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/2dac16f9ca189efbab625d58e82d49248820495c,2dac16f9ca189efbab625d58e82d49248820495c,fix(pro): Upgrade buttons go to /payment
bengotow,2016-05-31 19:15:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/cabc052c1879b6823dc5ab3c42f2c094f7bf80a3,cabc052c1879b6823dc5ab3c42f2c094f7bf80a3,"fix(config): When resetting config, use template file"
OJFord,2016-05-31 19:08:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b42b2d03bbcfd820091cde63f424777cb2c5d2e,3b42b2d03bbcfd820091cde63f424777cb2c5d2e,"warns suspicious message only on differing domain (#2343)

For example, the following is *not* suspicious:
```
From: foo@example.org
Reply-To: bar@example.org
```

While the following remains suspicious:
```
From: foo@example.org
Reply-To: foo@example.com
``` 

This commit fixes #2342."
jstejada,2016-05-31 18:42:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0cf8ccc0c2820eb284ffb665f8349fd532844fa4,0cf8ccc0c2820eb284ffb665f8349fd532844fa4,fix(mail-merge): Add missing method in mail-merge decorator
bengotow,2016-05-27 22:37:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/147bb38c6a746e604a269685881a7e56cf81e60e,147bb38c6a746e604a269685881a7e56cf81e60e,fix(pro): Don't refresh identity unless one is present
jackiehluo,2016-05-27 22:18:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf0ad099e15e5749b44760d2e7b4377eb0c890cd,cf0ad099e15e5749b44760d2e7b4377eb0c890cd,fix(email-frame): Allow events to bubble correctly and pass iframe
bengotow,2016-05-27 21:05:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a738602ab21f6593e5bfdcb098634657369c0ca,4a738602ab21f6593e5bfdcb098634657369c0ca,"feat(pro): New Nylas identity provider, onboarding and auth

commit 50d0cfb87cd0e3d518ee91984bfac7d0c6782418
Author: Ben Gotow <bengotow@gmail.com>
Date:   Fri May 27 14:01:49 2016 -0700

    IdentityStore conveniene methods for subscription state

commit 80c3c7b9564ff79b5727f6812620b9436f35f963
Author: Ben Gotow <bengotow@gmail.com>
Date:   Fri May 27 12:03:53 2016 -0700

    Periodically refresh identity, show expired notice in top bar

commit 5dc39efe9829b2e2c14e27486b3163df4157fd17
Merge: 4c4f463 906ea74
Author: Juan Tejada <juans.tejada@gmail.com>
Date:   Thu May 26 15:17:46 2016 -0700

    Merge branch 'bengotow/n1-pro' of github.com:nylas/N1 into bengotow/n1-pro

commit 4c4f463f4b20725bc07e5c8906ecba1de54a6bd1
Author: Juan Tejada <juans.tejada@gmail.com>
Date:   Thu May 26 15:16:48 2016 -0700

    Hijack links inside email that go to billing site and add SSO to them

commit 906ea74807590e6324839b327ada1943814b17fd
Author: Ben Gotow <bengotow@gmail.com>
Date:   Thu May 26 12:02:29 2016 -0700

    Add custom welcome page for upgrading users

commit 2ba9aedfe97679d845262a46b70e93d8e787cec1
Author: Juan Tejada <juans.tejada@gmail.com>
Date:   Wed May 25 17:27:12 2016 -0700

    Add styling to Subscription tab in prefs

commit 384433a338a6fb90c432d2819afc3eee127dbace
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 16:21:18 2016 -0700

    Add better style reset, more IdentityStore changes

commit c4f9dfb4e4007ff7e785d6d5d459a58078913e7a
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 15:29:41 2016 -0700

    Add subscription tab

commit bd4c25405a0edc30a3770ac09ee410f75006d73a
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 14:18:40 2016 -0700

    Point to billing-staging for now

commit 578e808bfccba22854b880c3dc51e01ac164302b
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 13:30:13 2016 -0700

    Rename account helpers > onboarding helpers

commit dfea0a98615ebdbe94a77f8a752f543bafa8411d
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 13:26:46 2016 -0700

    A few minor fixes

commit 7110217fd4b477557a05f2b2cde8fbbd50ced9b3
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 12:58:21 2016 -0700

    feat(onboarding): Nylas Pro onboarding overhaul

    Summary:
    Rip out all invite-related code

    Enable Templates and Translate by default

    Scrub packages page, unused code in onboarding pkg

    Remove resizing

    New onboarding screens

    IMAP provider list, validation

    Call success with response object as well

    Renaming and tweaks

    Test Plan: No tests yet

    Reviewers: evan, juan, jackie

    Differential Revision: https://phab.nylas.com/D2985

commit dc9ea45ca9c7e517732551ab61ac0ab6012263e5
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 12:52:39 2016 -0700

    Renaming and tweaks

commit 5ca4cd31ce498f77f21e52c3b1996d7973fff803
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed May 25 11:03:57 2016 -0700

    Call success with response object as well

commit 45f14f9b00415f3575b26b0bde3b829f54a19108
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue May 24 18:26:38 2016 -0700

    IMAP provider list, validation

commit c6ca124e6e94261fc91fe04e284658e0968fc586
Author: Ben Gotow <bengotow@gmail.com>
Date:   Sat May 21 11:14:44 2016 -0700

    New onboarding screens

commit dad918d92696e29787c404019e07550b107ec29b
Author: Ben Gotow <bengotow@gmail.com>
Date:   Thu May 19 16:37:31 2016 -0700

    Remove resizing

commit ecb1a569e29ea81085b2e2740dd273c17bc6cc1c
Author: Ben Gotow <bengotow@gmail.com>
Date:   Thu May 19 16:36:04 2016 -0700

    Scrub packages page, unused code in onboarding pkg

commit 3e0a44156cec5dab734cb0d4d10fc0281186f590
Author: Ben Gotow <bengotow@gmail.com>
Date:   Thu May 19 16:33:12 2016 -0700

    Enable Templates and Translate by default

commit 0d218bc86fe987901efd8e8b36afdb4d8be2b29e
Author: Ben Gotow <bengotow@gmail.com>
Date:   Thu May 19 16:30:47 2016 -0700

    Rip out all invite-related code"
jstejada,2016-05-27 18:02:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/3398640e862efc51eaf9a035ba82602e716c3e34,3398640e862efc51eaf9a035ba82602e716c3e34,"fix(mail-merge): Switch to using new overlaid components api

Summary:
- Fixes several selection and focus issues along the way
- Can now preview what tokens will look like when not editing
- Adds decorator to listen to mail merge session changes and removes a bunch of duplicated code
- Gets rid of all imperative code (and specs) that had to imperatively
reach into the dom to update the tokens

Test Plan: - Unit tests

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2989"
jackiehluo,2016-05-26 19:27:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ba667daa228d9c9234c2e37bbcd1683c3eac63b,6ba667daa228d9c9234c2e37bbcd1683c3eac63b,fix(draft): Return transformed draft correctly
jackiehluo,2016-05-26 06:46:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3b112030ac81e47133e960d6a365b0394e87135,e3b112030ac81e47133e960d6a365b0394e87135,"Revert "":art:(ui-dark): Remove iframe inversion"""
bengotow,2016-05-25 21:13:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d5b21e4b25d8482353e55f53c4ad606391c7994,3d5b21e4b25d8482353e55f53c4ad606391c7994,fix(packages): Show version numbr of 3rd party plugins
bengotow,2016-05-25 21:03:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/7bdcde7f3ae00745efadf1347699cf76c14b2712,7bdcde7f3ae00745efadf1347699cf76c14b2712,"fix(ubuntu): Update theme, fix a few strange glitches"
bengotow,2016-05-25 18:03:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/3fdffb4b8178a4248a6f09b340a49044baf18d1a,3fdffb4b8178a4248a6f09b340a49044baf18d1a,"fix(config): removeAtKeyPath => undo, guard with assertions"
jstejada,2016-05-25 17:25:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/48556bef984aa42515211c56ab80012784b0e5e0,48556bef984aa42515211c56ab80012784b0e5e0,"fix(build): Fix remaining specs (composer-view, send-draft-task)"
jstejada,2016-05-25 02:04:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/78d27bc62a38d3ae85ba9af2c5a95d36f2f90337,78d27bc62a38d3ae85ba9af2c5a95d36f2f90337,fix(specs): Fix merge conflicts and some specs
jstejada,2016-05-25 00:56:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/771ba62baac59a4dbcf2f79d017ee9f028bd1f68,771ba62baac59a4dbcf2f79d017ee9f028bd1f68,fix(nylas-exports): Remove nonexistent module
jstejada,2016-05-25 00:53:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3be415a7fb82f2d16f4200e763d325a6b832e70,f3be415a7fb82f2d16f4200e763d325a6b832e70,fix(build): Fix lint error
jstejada,2016-05-18 23:19:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ec108c9063833e80f63020cbe496374e9426ae4,0ec108c9063833e80f63020cbe496374e9426ae4,"fix(mail-merge): Refactor mass sending procedure

Summary:
This diff introduces several updates to mail merge to improve the procedure for sending a list of drafts.
Specifically, sending mass email will now:

- Clear mail merge metadata on the drafts that will actually be sent
- Upload attached files only /once/, and reuse those files on the drafts that will actually be sent
- Minimize database writes for new drafts being created
- Will queue a SendManyDraftsTask that will subsequently queue the necessary SendDraftTasks and keep track of them, and notify of any failed tasks

TODO:
- Add state to MailMerge plugin for failed sends and ability to attempt to re send them

Test Plan: - TODO

Reviewers: evan, bengotow, jackie

Reviewed By: bengotow, jackie

Subscribers: jackie

Differential Revision: https://phab.nylas.com/D2973"
emorikawa,2016-05-24 22:47:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/8799215048919d4c18df6d4301873a1c42a39045,8799215048919d4c18df6d4301873a1c42a39045,"feat(scheduler): Add Overlaid Components

Summary:
SEE ASSOCIATED SUBMODULE DIFF

This enables rich React components (like the Scheduler's `NewEventCard`)
to be used in contenteditables.

We introduce the concept of an ""Overlaid Component"". These are rendered
React components that are absolutely positioned on top of an equivalent
""Anchor"" in a contenteditable.

Inside the contenteditable are special `<img />` tags that have an
id corresponding to a particular rich overlaid component. This way, even
if those img tags are cut and pasted or moved, they'll have a mapping to a
  particular component stored in the `OverlaidComponentStore`. Img tags
  are fairly well handled natively by contenteditable and allow you to
  maniuplate these overlaid components as normal text elements.

The `OverlaidComponentStore` is responsible for listening to and managing
the state of the Anchors and their equivalent OverlaidComponents.

We use a decorator called `ListenToChanges` that allows us to wrap
components to update their corresponding anchor. Since we need to know
about ALL changes that could affect rendered height and width, we need to
use a `MuatationListener` instead of the React render cycle.

This is only the initial diff. There are several TODOs here:
https://paper.dropbox.com/doc/Composer-Overlaid-Components-FoZrF0cFggzSUZirZ9MNo

Test Plan: TODO. Manual

Reviewers: juan, bengotow

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2946"
bengotow,2016-05-24 18:48:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf955891d94ba13d241e224539971d57b4905af2,bf955891d94ba13d241e224539971d57b4905af2,"fix(undo): Move undo/redo to session, properly undo all changes

Summary:
- Simplify undoManager to just maintain the undo/redo history items
- DraftEditingSession manages snapshotting state of draft, hack allows it to also save selection (still hoping to eventually put selection in body HTML as markers)
- Switch from `debounce` to `throttle` style behavior so typing for along time followed by undo doesn't undo away your entire block.

This resolves two issues:
+ Changes to participant fields are no longer undoable because they go straight to the session.
+ Changes to metadata weren't undoable.

Test Plan: Tests WIP

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2956"
jackiehluo,2016-05-24 18:22:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/eabdd78935d6f5e3f9f771ca360ee8c98a3e1bb1,eabdd78935d6f5e3f9f771ca360ee8c98a3e1bb1,"feat(multi-send): Allow multi-send for non-Exchange accounts

Summary:
Updates the send task to use multi-send for emails with link/open tracking metadata sent via SMTP. Places an email without link/open tracking in the sent folder.

TODO: Override send button (i.e., mail merge) and move all of the multi-send tasks to package.

Test Plan: Tested locally.

Reviewers: evan, bengotow, juan

Reviewed By: bengotow, juan

Differential Revision: https://phab.nylas.com/D2974"
FooBarQuaxx,2016-05-24 18:08:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ed577cf64acf1fe0e371101e3dfe709acfc5f8e,9ed577cf64acf1fe0e371101e3dfe709acfc5f8e,Fixing small typo. (#2298)
bengotow,2016-05-23 17:34:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dc44e0630369f0d3bc4df11486bca39ab54da62,9dc44e0630369f0d3bc4df11486bca39ab54da62,fix(dialogs): Use new buttonLabel as needed
bengotow,2016-05-23 17:32:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb1f6c0d79ad96f591b5a9cdaac33455ff338c70,fb1f6c0d79ad96f591b5a9cdaac33455ff338c70,"bump(version): 0.4.41, Electron 1.1.1"
jackiehluo,2016-05-20 18:00:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/40077439d2735ad0b34f3c4a1e21bc63e0f29b9d,40077439d2735ad0b34f3c4a1e21bc63e0f29b9d,"feat(multi-send): Register opens/clicks by individual recipient

Summary: The activity list now shows specifically which recipient
opened/clicked for an event.

Test Plan: Tested locally.

Reviewers: bengotow, evan, juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D2971"
vanhonit,2016-05-19 23:16:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/87ea432295b4a009fa0c17825cbd8a227dbfd525,87ea432295b4a009fa0c17825cbd8a227dbfd525,"fixed bug timezone cannot detect in fedora (#2250)

* fixed bug timezone cannot detect in fedora

* update spec build fedora package

* rpm package for fedora 22

* change code follow coffee-script style

* remove fedora binary file"
jstejada,2016-05-19 23:12:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5e7a4384b884626e95b7b4a6667a5b10a5689ce,c5e7a4384b884626e95b7b4a6667a5b10a5689ce,fix(mail-merge): Prevent send button from being pressed multiple times
bengotow,2016-05-19 22:27:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a305a1dd4b7ba221134acda6078870d1e38edea,7a305a1dd4b7ba221134acda6078870d1e38edea,fix(send-later): Add isValidDraft to specs
bengotow,2016-05-19 21:58:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/a72e25171ff8b7870a3864437adf695cea59856f,a72e25171ff8b7870a3864437adf695cea59856f,"fix(pli): Always indent where indicators are, even if blank"
jstejada,2016-05-19 21:57:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2d9b698636d01b97031f138b978bc04ed4ddf9e,d2d9b698636d01b97031f138b978bc04ed4ddf9e,fix(window-launcher): Check if instance of hot window is present
bengotow,2016-05-19 21:53:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b1d22377406b9d3c7a6d871f59d9c225fad9d64,9b1d22377406b9d3c7a6d871f59d9c225fad9d64,fix(changelog): Additional releas notes
bengotow,2016-05-19 21:38:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3ff3af9f604156889ddf525453007e1c295cd24,f3ff3af9f604156889ddf525453007e1c295cd24,fix(config): Using fs.resolve as path.join
jstejada,2016-05-19 20:28:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/2fedf886e664a9ec57d82e148e463bea76840cda,2fedf886e664a9ec57d82e148e463bea76840cda,fix(send-later): Check if draft is valid before scheduling send later
jstejada,2016-05-19 19:47:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/67ec8fb0e0a07c32f4bdd11aee0348e031259dad,67ec8fb0e0a07c32f4bdd11aee0348e031259dad,fix(send-later): Update button to show Sending now when time is past
jstejada,2016-05-19 19:33:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/e420a7af1f53aa9d261c421c02953e9f698dfcdf,e420a7af1f53aa9d261c421c02953e9f698dfcdf,fix(specs): Fix specs for TaskQueue
emorikawa,2016-05-19 19:30:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/347fcad80ae9d2af0b3162a09fbb9cff1ec34eba,347fcad80ae9d2af0b3162a09fbb9cff1ec34eba,fix(spec): fix asynchronicity in NewEventCardSpec due to draft session
bengotow,2016-05-19 19:28:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/52f3607606193399986fa3a25050c712b920b4b4,52f3607606193399986fa3a25050c712b920b4b4,fix(win-launching): Only create hot window when one is used
jstejada,2016-05-19 19:04:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/ceb4993c62db77da8c81be4bbcfef631bc8cae26,ceb4993c62db77da8c81be4bbcfef631bc8cae26,"fix(accts): Display perspective for a newly added acct correctly

- Will wait for categories to be ready before attempting to focus the
inbox for the new account, preventing a blank screen when a new account
is added
- Add temprary action to set the collapsed state of a sidebar action
after adding a new account"
emorikawa,2016-05-19 18:59:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/99a8b4fb046c18452e6ed12dd159d7091d12455a,99a8b4fb046c18452e6ed12dd159d7091d12455a,fix(spec): remove obsolete account store spec
emorikawa,2016-05-19 18:50:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0e66519fc3213aca36d49d38007ebfe0bb0790a,b0e66519fc3213aca36d49d38007ebfe0bb0790a,fix(spec): fix config setting spy
bengotow,2016-05-19 18:35:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6f6c7c3a0c835572945cde77d65733d881a9ffa,c6f6c7c3a0c835572945cde77d65733d881a9ffa,"fix(tasks): Check Task is in registry, remove any non-tasks when loading"
emorikawa,2016-05-19 18:30:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8097f1cd9b79d9bed79a588a7b2ce224e2e44e6,c8097f1cd9b79d9bed79a588a7b2ce224e2e44e6,"fix(tasks): ensure NotifyPluginsOfTask gets properly serialized

Fixes:
https://sentry.nylas.com/sentry/edgehill/group/31200/"
jstejada,2016-05-19 18:28:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c1cc9bd5f3b893991a910413e3b0da34d067299,7c1cc9bd5f3b893991a910413e3b0da34d067299,"fix(sidebar): Add state to determine wether to show unified sidebar

- Adds a piece of global state that will be persisted to
`NylasEnv.savedState` indicating wether the accounts for the sidebar
should be reset whenever the FocusedPerspective changes
- #2257"
bengotow,2016-05-19 18:15:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/b575ea001808cf61c54316cd30dc4297e356fecd,b575ea001808cf61c54316cd30dc4297e356fecd,bump(version): 0.4.40 and changelog
jstejada,2016-05-19 17:15:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/7fc3b3a7c5c414895d97ad6b788732d1751d62c9,7fc3b3a7c5c414895d97ad6b788732d1751d62c9,"fix(hot-window): Correctly manage references to the hot window

- Fixes issue where app was not properly relaunching when all accounts were
removed"
bengotow,2016-05-19 00:54:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dd57e9271621d18d18709d973fc43e7baa0c51d,3dd57e9271621d18d18709d973fc43e7baa0c51d,"fix(accounts): When removing, focus remaining accts before `accountForId()` stops working"
jstejada,2016-05-19 00:34:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/18f0872794e057e8ba8f1846082c37aed9e4ef15,18f0872794e057e8ba8f1846082c37aed9e4ef15,fix(aliases): Properly set selected state on account update
bengotow,2016-05-19 00:27:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf6428d94a8067f7cdcd3295fbe34a0d1b8bb900,cf6428d94a8067f7cdcd3295fbe34a0d1b8bb900,"fix(config): id was only added recently, use getId()"
bengotow,2016-05-19 00:12:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/abaa3fe63fcafe33c040a57506c3d659eaa049d0,abaa3fe63fcafe33c040a57506c3d659eaa049d0,fix(config): Don't loop config changes through ipc
emorikawa,2016-05-18 23:58:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ad72a43f9e3a62fd5d41b89c435b4114e042b3d,8ad72a43f9e3a62fd5d41b89c435b4114e042b3d,refator(undo): convert UndoRedoStore from coffee to es6
emorikawa,2016-05-18 23:43:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/18c8a4a10f5f45fb7d7ac4f8a4c767e551d36978,18c8a4a10f5f45fb7d7ac4f8a4c767e551d36978,fix(undo): can redo more than one undo item
bengotow,2016-05-18 23:25:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/b43aaf58f7237eaeadfd588783f37ca115eb49c1,b43aaf58f7237eaeadfd588783f37ca115eb49c1,fix(win32): Wait longer before quitting if no windows are open
bengotow,2016-05-18 23:08:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2d79c6e2de72dad7054451e8eda35907d0f85f4,d2d79c6e2de72dad7054451e8eda35907d0f85f4,fix(win32): Ignore path in argv when --squirrel flag is present
jackiehluo,2016-05-18 23:02:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf5faadd27c6e1c163027d653d27a56edfebc724,cf5faadd27c6e1c163027d653d27a56edfebc724,fix(plugins): Update plugins list on install
emorikawa,2016-05-18 22:42:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/035074d1837c58018fb61f7b79050cbdfb6951be,035074d1837c58018fb61f7b79050cbdfb6951be,fix(db): can manually call _handleSetupError with no args
bengotow,2016-05-18 22:41:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d88641005a7ee124aad300bb5174f5cc8496fb9,8d88641005a7ee124aad300bb5174f5cc8496fb9,fix(quit): Booleans on globals are not exposed through remote properly
emorikawa,2016-05-18 22:37:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/69c9d440005b9f5b7d30ef21a3595dbb33be0c01,69c9d440005b9f5b7d30ef21a3595dbb33be0c01,fix(scheduler): don't event events 1 second early
jackiehluo,2016-05-18 22:30:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/58572871db39ea7dffeaf81064a65439a7703cab,58572871db39ea7dffeaf81064a65439a7703cab,:art:(templates): Change language and remove gray box in demo template
bengotow,2016-05-18 22:25:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f7d3ac2e94450f3719a8c3b53f0dc9a6baa6a8b,5f7d3ac2e94450f3719a8c3b53f0dc9a6baa6a8b,"fix(pkg-install): Use the package.json name, not the folder name"
emorikawa,2016-05-18 21:21:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/e93a5d7b7f90ddb34a043ec750e44c84ab058f48,e93a5d7b7f90ddb34a043ec750e44c84ab058f48,fix(event): add calendar icon to new event card
bengotow,2016-05-18 17:10:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/61bd8d662952aa70f5a3c36cd07714ae5fdcff70,61bd8d662952aa70f5a3c36cd07714ae5fdcff70,bump(version): 0.4.39
bengotow,2016-05-18 02:28:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/6cd6253771527a30f79129ecfb6455259c409e0f,6cd6253771527a30f79129ecfb6455259c409e0f,"fix(build): prebuild less was using wrong options, cache not used at runtime"
bengotow,2016-05-18 02:28:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/06360dc75d2b0f50515df0526528628340cb9e65,06360dc75d2b0f50515df0526528628340cb9e65,fix(compile-cache): Write atomically to prevent process collisions
bengotow,2016-05-18 01:48:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/15ef74e0e2063dce732a7e983d3676a069fbcc6b,15ef74e0e2063dce732a7e983d3676a069fbcc6b,"perf(spellcheck): Limit misspellings to 15, recycle nodes"
bengotow,2016-05-18 01:37:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/045177b38d5306dcaefde09faf5eb8f110487679,045177b38d5306dcaefde09faf5eb8f110487679,fix(nylas-exports): Avoid repeatedly calling require inside lazyLoad
emorikawa,2016-05-17 22:03:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a5a0ad20917caddd81307bbb9239728ea080ed4,8a5a0ad20917caddd81307bbb9239728ea080ed4,fix(composer): reduction in composer bootup time
emorikawa,2016-05-17 21:23:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7e32b9c685b5fc047b3bfd51f00288d545bcb3c,b7e32b9c685b5fc047b3bfd51f00288d545bcb3c,"feat(perf): add perf monitoring to composer open time

Summary:
Add basic globally accessible performance monitoring.

Allows us to measure load times for composer windows (or whatever else we
want) and view the data as a Histogram on Mixpanel

Test Plan: manual

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2965"
emorikawa,2016-05-17 19:31:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/9206370fa312f6883e94ee560b6008df16357091,9206370fa312f6883e94ee560b6008df16357091,feat(composer): speed up composer loading & fix deactivate error
bengotow,2016-05-17 19:34:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/80638713a183475b51c38ce720bb2eae6ee0d4ce,80638713a183475b51c38ce720bb2eae6ee0d4ce,fix(db): additionalSQLiteConfig is not a function!
emorikawa,2016-05-17 16:32:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/94016c676f04b0e93b963bbbcdccc7c6664dc8b6,94016c676f04b0e93b963bbbcdccc7c6664dc8b6,fix(bootstrap): properly dedupe all node modules
jstejada,2016-05-17 02:53:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/3bfc452f5e224a731b10896fb6cccacf11b66cb0,3bfc452f5e224a731b10896fb6cccacf11b66cb0,fix(build): Fix lint errors
jstejada,2016-05-17 00:53:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/eeb0e8fc5bc83c6d71f142867181674de5012e10,eeb0e8fc5bc83c6d71f142867181674de5012e10,fix(snooze): Fix path to main file in package.json
jstejada,2016-05-16 22:42:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/aff550574366eefe99f1d308bd03d644a0c6c547,aff550574366eefe99f1d308bd03d644a0c6c547,"fix(snooze): Sentry error: ""Can't create Snooze Category""

- This error was still being thrown for a large number of accounts,
despite the fact that the N1-Snoozed category was being created
- This error was happening when adding a new account which did not already have a
snooze category in the backend:
  - When the account is added the AccountStore triggers more than once,
  causing the SnoozeStore to send more than one request to create the
  same category. Any request after the first one will fail because the
  category already exists
- The fix is not try to create a category unless the accounts have
actually changed"
bengotow,2016-05-16 21:49:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/705b7ef3308e43cdacd12a8aefa8c0776a106c1e,705b7ef3308e43cdacd12a8aefa8c0776a106c1e,fix(new-event-helper): Add required windowKey
bengotow,2016-05-16 21:38:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/3559f5e41953d53732a65323c771f71d11eca0e6,3559f5e41953d53732a65323c771f71d11eca0e6,"fix(config): Move all reads / writes to the main process

Summary:
Moves all reading / writing of config file to the main process,
to avoid needing to write code to lock across processes. This should also
be more efficient than re-loading the file in all processes when it's
saved.

Test Plan: Run tests

Reviewers: evan, jackie

Reviewed By: evan, jackie

Differential Revision: https://phab.nylas.com/D2963"
bengotow,2016-05-16 20:42:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb4aa0e2086d264265b70ae08d55c977d4bd8033,eb4aa0e2086d264265b70ae08d55c977d4bd8033,"fix(retry): When tasks fail, try fewer times: 2s, 4s, 8s, 16s, 30s"
emorikawa,2016-05-16 20:31:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/bcf82067ed8f463cf868d56f6a1c12b99bee6ca1,bcf82067ed8f463cf868d56f6a1c12b99bee6ca1,fix(reporting): fix undefined reference in error reporting
emorikawa,2016-05-16 20:26:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/61caf7b3636328dc316675b162d9ddbda69407b1,61caf7b3636328dc316675b162d9ddbda69407b1,fix(spec): update NylasEnv specs
emorikawa,2016-05-16 18:43:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d701777209d7e4676d231c2346ffe4216bb0c98,7d701777209d7e4676d231c2346ffe4216bb0c98,fix(spec): Convert NylasEnvSpec from coffee to es6
emorikawa,2016-05-16 18:31:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/5afa549b7003bcc41e5953023fecc715d204bd9c,5afa549b7003bcc41e5953023fecc715d204bd9c,fix(error): send all renderer errors to the browser process
bengotow,2016-05-16 08:26:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d92c88ebe3ad3bd42d3d5736ee4a4e4dc86ed15,4d92c88ebe3ad3bd42d3d5736ee4a4e4dc86ed15,fix(connection): account.id => accountId
bengotow,2016-05-16 06:59:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/29fc4c80d87af13198915bd2eb577b3521c09980,29fc4c80d87af13198915bd2eb577b3521c09980,fix(account): JSON without `label` should not reset label
bengotow,2016-05-16 06:25:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/40fc95d878915fe8d27b06ff140fab731191ca3c,40fc95d878915fe8d27b06ff140fab731191ca3c,"Revert ""refactor(deltas): Update sync-worker to use NylasAPI.longConnection""

This reverts commit 0e10ccbde9df8924efb3354a0aa0a4ad7867ee6e.

# Conflicts:
#	internal_packages/worker-sync/lib/delta-streaming-connection.es6
#	internal_packages/worker-sync/lib/nylas-sync-worker.coffee
#	internal_packages/worker-sync/spec/nylas-sync-worker-spec.coffee
#	src/flux/nylas-long-connection.es6"
emorikawa,2016-05-16 04:23:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/6bbf2c9865132ffc09ca1e6b481af3c6668fa66e,6bbf2c9865132ffc09ca1e6b481af3c6668fa66e,bump(version): 0.4.38 stable patch release
emorikawa,2016-05-16 04:18:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1c470f03fc2fe09b63f2afc6b564317aad61852,b1c470f03fc2fe09b63f2afc6b564317aad61852,fix(connection): don't destroy emitter on close
bengotow,2016-05-15 22:52:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/dafe2d89bad0f813b52296127b6bc7d407dcf7fb,dafe2d89bad0f813b52296127b6bc7d407dcf7fb,"fix(babel): Resolve require paths for presets, fix plugin ES6 support"
bengotow,2016-05-15 17:19:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/3344223bfc78f66dfaf2527b0edad1bce2387bf1,3344223bfc78f66dfaf2527b0edad1bce2387bf1,"fix(keymaps): Handle empty keymap.json, recover when saving"
bengotow,2016-05-15 16:14:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/7de7c53ee2b13542e27a55691e5c38001451e718,7de7c53ee2b13542e27a55691e5c38001451e718,"fix(auth): Revert imap => custom, bump package.json 0.4.37"
bengotow,2016-05-15 05:31:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e1c9bf28a6fdb3bdd880ef62b8240866475e43b,5e1c9bf28a6fdb3bdd880ef62b8240866475e43b,fix(linux): Additional menu fixes
bengotow,2016-05-15 05:24:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/56257134192498af69ff6f2a99f7c35d4012f5d5,56257134192498af69ff6f2a99f7c35d4012f5d5,fix(linux): Make F11 show up in menu as shortcut
bengotow,2016-05-15 05:05:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2281c75d0a342c8697962013ce14de33746c822,d2281c75d0a342c8697962013ce14de33746c822,"fix(linux): Add libappindicator1 note, improved View menu"
bengotow,2016-05-15 04:13:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/46c563f7b082676c182b7d0a403c3c37832e1138,46c563f7b082676c182b7d0a403c3c37832e1138,fix(babel): linux-updater-adapter missing `.default`
bengotow,2016-05-15 03:44:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a7cf1b85428bb22c423abb3ef988b0253d6b20d,4a7cf1b85428bb22c423abb3ef988b0253d6b20d,fix(deprecations): Broken references to `app`
bengotow,2016-05-14 18:52:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/421936b1c656d8d1d054ab9b1ef5c63a449f277d,421936b1c656d8d1d054ab9b1ef5c63a449f277d,fix(empty-state): Don't show empty state briefly when loading threads
jackiehluo,2016-05-14 06:03:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/a38d65cb2a5b4f2e76a348ab1b36e2326890b8db,a38d65cb2a5b4f2e76a348ab1b36e2326890b8db,:art:(ui-dark): Remove iframe inversion
bengotow,2016-05-14 01:05:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffef8e3cda49e482b39d08e7354aa87f46443ca2,ffef8e3cda49e482b39d08e7354aa87f46443ca2,fix(imports): Don't use relative paths with ASAR
bengotow,2016-05-14 00:14:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd84d15fbb268124fc2ad374f336a6f4c80c3e4b,fd84d15fbb268124fc2ad374f336a6f4c80c3e4b,"fix(templates): QA pass on templates, resolve #2216"
bengotow,2016-05-13 23:24:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/71b156e667881465a78533ccf30b8ad3ac011196,71b156e667881465a78533ccf30b8ad3ac011196,fix(err): InspectorFrontendAPI => DevToolsAPI
jstejada,2016-05-13 23:00:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/87f81c1c395bc10831d5d9cb8877f556bad470c8,87f81c1c395bc10831d5d9cb8877f556bad470c8,fix(mail-merge): Pass session to injected subject
bengotow,2016-05-13 22:57:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/67b6dfc5b026ff95fbbe2cd2785002dc0e47d4ea,67b6dfc5b026ff95fbbe2cd2785002dc0e47d4ea,bump(version): 0.4.36 and changelog
bengotow,2016-05-13 21:57:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/804542ae53919bfe5d9f464ac70e28f1064fa3a0,804542ae53919bfe5d9f464ac70e28f1064fa3a0,"build(travis): Drop Node 0.12 build, unclear if supported by babel 6"
bengotow,2016-05-13 21:16:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f29e1cfbeebfc51a3021cd6bd3f1befcdd9d685,8f29e1cfbeebfc51a3021cd6bd3f1befcdd9d685,"fix(401/403): Unify error bars, query /account, improve reconnect flow

Summary: See https://paper.dropbox.com/doc/Sync-disabling-for-N1-URZmjVpSSxWFvjC62TiFI

Test Plan: Tests incoming

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2959"
bengotow,2016-05-12 23:14:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/b750b3a31334ba0c71d0c0d10b89a7d382689de1,b750b3a31334ba0c71d0c0d10b89a7d382689de1,fix(category-picker): Don't wrap folder names early
bengotow,2016-05-12 21:31:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/0441acf94aa5c46118759a72fbfe21e33f41d043,0441acf94aa5c46118759a72fbfe21e33f41d043,"fix(fastmail): Strip ""INBOX."" prefix from displayNames

This can't be done on the API side because the API serves other customers.

The API will properly handle renames, crates and prepend `INBOX.`"
jstejada,2016-05-12 22:23:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/2bcd5032a8eabc38a659863d5624db0d4ec7e2a7,2bcd5032a8eabc38a659863d5624db0d4ec7e2a7,fix(specs): Remove fdescribe
jstejada,2016-05-12 22:21:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/150ac1e887eb77c2a89e46feeb6de65e3eb2bcb9,150ac1e887eb77c2a89e46feeb6de65e3eb2bcb9,fix(specs): Fix spec for DraftEditingSession
jstejada,2016-05-12 21:28:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/f60a274f1f321e0f50eb9fdd094574cc68886f1a,f60a274f1f321e0f50eb9fdd094574cc68886f1a,fix(build): Fix linter errors
bengotow,2016-05-12 20:59:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/bec5982ea3512b8443e16f8fe635832abe8c5958,bec5982ea3512b8443e16f8fe635832abe8c5958,"bump(electron): Fix remaining deprecated requires, move to 1.0.1"
jackiehluo,2016-05-12 20:29:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/26787b77d334c2fabed27b038a2895528996bce8,26787b77d334c2fabed27b038a2895528996bce8,refactor(focus): Move code for focusing threads to FocusedContentStore
bengotow,2016-05-12 18:59:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4a41cf6a26a787ad42c5b9e7c4d3a8f3783fc68,a4a41cf6a26a787ad42c5b9e7c4d3a8f3783fc68,bump(version): 0.4.35
jstejada,2016-05-12 17:47:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/cac679b119b92e6fa947a699fb43033dfabfecf0,cac679b119b92e6fa947a699fb43033dfabfecf0,"feat(mail-merge): Add ability to drop tokens in subject

Summary:
Adds ability to drop tokens in subject via a custom rendered subject field which
renders a contenteditable instead of an input.
Decided to completely replace the subject field via injected components for a
few resons:
  - That's the way we are currently extending the functionality of the participant fields, so it keeps the plugin code consistent (at the cost of potentially more code)
  - Completely replacing the subject for a contenteditable means we hace to do extra work to clean up the html before sending.
  - Reusing our Contenteditable.cjsx class for the subject is overkill, but using a vanilla contenteditable meant duplicating a bunch of the code in that class if we want to add

Test Plan: Unit tests

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2949"
jackiehluo,2016-05-12 04:08:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c762cef4e607fdc7b39952e66d1fe1cb2d29c43d,c762cef4e607fdc7b39952e66d1fe1cb2d29c43d,:art:(dark): Update theme colors
bengotow,2016-05-12 00:02:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a0cc11b5c4d6bc1e78d29a603ba2239fb7d7826,0a0cc11b5c4d6bc1e78d29a603ba2239fb7d7826,fix(draft-session): Never show body with transforms applied
bengotow,2016-05-11 23:40:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/55b4ccbc1f961178573401dc2cab8ba9cec98aa9,55b4ccbc1f961178573401dc2cab8ba9cec98aa9,fix(pli): Design PLI indicators #2148
jstejada,2016-05-11 23:38:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ef9da941fb6a7d347e3f8d737267915f465ef0c,3ef9da941fb6a7d347e3f8d737267915f465ef0c,fix(build): Fix linter errors
jstejada,2016-05-11 22:33:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/eacf54b4eb458fcac49c4c6559027f61de5b8fd8,eacf54b4eb458fcac49c4c6559027f61de5b8fd8,fix(build): Fix lint issues and specs
jstejada,2016-05-05 22:21:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/72e86dde368b0aff58d85c6daa07efeb3cb140a3,72e86dde368b0aff58d85c6daa07efeb3cb140a3,"specs(table): Add specs for table components

Summary:
- Add some docs to Table components
- Updates Table components to use a TableDataSource instead of accessing arrays, cleans up code a bit
- Add enzyme lib to have a cleaner and simpler api to write tests for React Components
- Updates decorators to extend from the BaseComponent instead of vanilla Component, this way instance methods are still available on composed components

Test Plan: - Unit tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2941"
jstejada,2016-05-11 19:32:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/54e588313e694f76582db657764ddc6c9f34ca32,54e588313e694f76582db657764ddc6c9f34ca32,"fix(search): Add double quote escaping to search query

- Fixes sentry fts error"
jstejada,2016-05-11 19:23:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/691edfcd5b7581844417669d3af92e84ea7099bf,691edfcd5b7581844417669d3af92e84ea7099bf,"fix(query-subs): Fix `onLastCallbackRemoved` overriding with correct class syntax

- Using arrow function syntax for a class method that is meant to be overriden
will prevent it from being properly overriden
- This caused onLastCallbackRemoved not to be called"
jstejada,2016-05-11 18:33:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf0bde9b142bc15c2dbde22231e26ba20bc92e0e,cf0bde9b142bc15c2dbde22231e26ba20bc92e0e,fixt(print): Update print header logo
jstejada,2016-05-11 18:25:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7436a37e1c3edc1acb198d506562c6331022611,e7436a37e1c3edc1acb198d506562c6331022611,fix(build): Bump minor react version (fix peer dep resolution)
jstejada,2016-05-11 17:57:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/904b1ba1f18eabf308f989a64172b9a1670e93ca,904b1ba1f18eabf308f989a64172b9a1670e93ca,fix(extensions): Add name of extension incorrectly applying transforms
jstejada,2016-05-11 17:33:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/f334899aff7a35ade821b7b5b9e408f53152b8d7,f334899aff7a35ade821b7b5b9e408f53152b8d7,fix(delta-streaming): Fix stale cursor key in config file
bengotow,2016-05-11 02:08:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/de4a69b89a5aef6f1875f9f5b31339ed02910c8f,de4a69b89a5aef6f1875f9f5b31339ed02910c8f,fix(build): Defer `require` of parent node modules until they're fetched #2184
bengotow,2016-05-10 17:53:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b0e933977d9370dac5b0c178faf2a3c2b4027b6,1b0e933977d9370dac5b0c178faf2a3c2b4027b6,fix(accounts): Any account update triggered focus #2165
bengotow,2016-05-10 17:33:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/eab8cb9085a51caae0daf075d25829694d211030,eab8cb9085a51caae0daf075d25829694d211030,"fix(draft-factory): ReplyTo takes precedence over ""from me"" #2175"
jstejada,2016-05-10 06:43:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bf245b3241da4c309604ebdb36703844f50090c,5bf245b3241da4c309604ebdb36703844f50090c,"Revert ""fix(print): Update logo""

This reverts commit a017ae7127aa40c4a7af9da525d1e7b64e3d70da."
jstejada,2016-05-10 03:13:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/a017ae7127aa40c4a7af9da525d1e7b64e3d70da,a017ae7127aa40c4a7af9da525d1e7b64e3d70da,fix(print): Update logo
bengotow,2016-05-10 00:34:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/82852350de7725c267b2e943bb367bb8e39ef0e4,82852350de7725c267b2e943bb367bb8e39ef0e4,"fix(shortcuts): Add Cmd+[, Cmd+] to Apple Mail preset #1332"
bengotow,2016-05-10 00:28:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/b92d2105b4780be3630c626cffe2df5bed58ce00,b92d2105b4780be3630c626cffe2df5bed58ce00,fix(spam): Better icons for spam / not spam #2107
bengotow,2016-05-10 00:22:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/1347654bbf2d1ac8cbbc8225f9bc7cf226481971,1347654bbf2d1ac8cbbc8225f9bc7cf226481971,"fix(menus): Always show main win in menu, move Activity #1314"
bengotow,2016-05-09 23:46:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b7073e356dd9208d88eee5a9c096f8ea4eeeaf9,7b7073e356dd9208d88eee5a9c096f8ea4eeeaf9,"fix(prefs): ? shortcut for ""Show Keybindings"" #1144"
bengotow,2016-05-09 23:21:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/f77fc700d14d2f5b00e1e2a27a78038e6493db61,f77fc700d14d2f5b00e1e2a27a78038e6493db61,fix(drafts): Support additional deletion shortcuts #939
bengotow,2016-05-09 23:03:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/c87680878aadb5ec3d73a56d2e37bb2e394d11bd,c87680878aadb5ec3d73a56d2e37bb2e394d11bd,feat(not-spam): Unmark items as junk / spam #2112
jackiehluo,2016-05-10 00:10:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/29c81221f252841f3f6b1f4087646d1b7e1a48d4,29c81221f252841f3f6b1f4087646d1b7e1a48d4,update(readme): Add themes
bengotow,2016-05-09 20:18:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/baca6be7ae725b340c28130fd719a991fcc6f878,baca6be7ae725b340c28130fd719a991fcc6f878,"fix(thread-list): Add missing displayName, ES6"
bengotow,2016-05-09 20:09:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/25a21189cff3326ac2921d79b2f09dee87659927,25a21189cff3326ac2921d79b2f09dee87659927,"fix(notifs): Don't play notification sounds over and over #1910, #2179"
emorikawa,2016-05-09 17:42:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/75bab91395cb8edd70374ac09c2687bafce1946e,75bab91395cb8edd70374ac09c2687bafce1946e,fix(lint): fix minor linter issue
emorikawa,2016-05-09 17:36:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a66162b841be4bcd78c7c2a56ff8d875fb1cf3e,5a66162b841be4bcd78c7c2a56ff8d875fb1cf3e,"fix(win): windows can re-launch with/without dev mode flag

Fixes https://github.com/nylas/N1/issues/2142"
emorikawa,2016-05-09 16:51:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/2eb590eb670879102962a19e63d15a22fe92aa60,2eb590eb670879102962a19e63d15a22fe92aa60,"fix(window): don't show if initialized in background

Fixes https://github.com/nylas/N1/issues/2149"
emorikawa,2016-05-09 16:01:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/a50441c8dff6c9ff606b343233c97d06bd9b3994,a50441c8dff6c9ff606b343233c97d06bd9b3994,feat(react): add react perf tools package
emorikawa,2016-05-06 23:46:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2fbfbceba65912d88d8cdd1ccd0e3b3802e1d39,f2fbfbceba65912d88d8cdd1ccd0e3b3802e1d39,fix(build): rename babel task to .js to be picked up by grunt
emorikawa,2016-05-06 23:42:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c01292e8b5efe27648f7e89a9f30eb2a14cdff9,5c01292e8b5efe27648f7e89a9f30eb2a14cdff9,fix(spec): fix injected component spec
emorikawa,2016-05-06 23:24:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d2e459094d654a07467e2639022adb5081899f9,2d2e459094d654a07467e2639022adb5081899f9,"fix(lint): final linter fixes

fix(lint): final set of linter fixes"
bengotow,2016-05-06 23:23:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ff92946b7878223124ac07f40fd0b2edf73789e,2ff92946b7878223124ac07f40fd0b2edf73789e,fix(lint): Various linter fixes
bengotow,2016-05-06 23:06:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/7533dc0ac61b17de7fe5cbb4487f30fface052ec,7533dc0ac61b17de7fe5cbb4487f30fface052ec,fix(lint): Various linter issues
emorikawa,2016-05-06 21:36:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/813669f7d470b0d328b6a2f5b4aced5b6774dc30,813669f7d470b0d328b6a2f5b4aced5b6774dc30,fix(lint): fix various linter issues
emorikawa,2016-05-06 21:10:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/431b652e6282559aa8afc616440af5ba266b9186,431b652e6282559aa8afc616440af5ba266b9186,fix(lint): various linter fixes
bengotow,2016-05-06 21:10:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e2b5501e39c81fe2781767367e1cb6d1f0f82dc,0e2b5501e39c81fe2781767367e1cb6d1f0f82dc,fix(lint): Correct more linter errors
emorikawa,2016-05-06 20:42:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d3b9bf87ff0d53a806636a2a5398eb31b5db5cc,3d3b9bf87ff0d53a806636a2a5398eb31b5db5cc,"fix(lint): fixing various linter errors.

746 left"
emorikawa,2016-05-06 19:40:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd444864c84aab522a972a41635967831a1d1410,bd444864c84aab522a972a41635967831a1d1410,"fix(linter): object-shorthand, quote-props

object-shorthand got turned off. We think it's fine to say {foo: foo} if
you want

quote-props is error consistent as neeeded.

Use custom file-by-file rules for global-require"
bengotow,2016-05-06 19:40:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/b91ebd5504e554272186b4eab2997fd3c022834c,b91ebd5504e554272186b4eab2997fd3c022834c,fix(drag): Allow sections of the sidebar to expand on drag
emorikawa,2016-05-06 19:20:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f923b0e91fdf71aa98c815cf5451c5d5d0c6ecf,6f923b0e91fdf71aa98c815cf5451c5d5d0c6ecf,feat(babel6): remove eslinter fixer task
emorikawa,2016-05-06 19:13:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/33d7ab66a48221d85ba7d6b85d3c30b3856a50a3,33d7ab66a48221d85ba7d6b85d3c30b3856a50a3,feat(babel6): update unused prop syntax
emorikawa,2016-05-06 19:00:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9be81b7f5afc2634ecd67231d688dec83a26f09,d9be81b7f5afc2634ecd67231d688dec83a26f09,feat(babel6): fix es6 importing from coffee
emorikawa,2016-05-06 18:36:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/1064a010e2ec2ef36351ef0f29d72ec125d1c17c,1064a010e2ec2ef36351ef0f29d72ec125d1c17c,feat(babel6): Use published babel-preset-electron
emorikawa,2016-05-06 18:12:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/d29848e24261ddcd7e9735d1e62df16a68a5ee53,d29848e24261ddcd7e9735d1e62df16a68a5ee53,"feat(babel6): 1,043 linter errors"
emorikawa,2016-05-06 18:08:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/d568bae3582cb1f8b667cf401d7bb8dc330a9805,d568bae3582cb1f8b667cf401d7bb8dc330a9805,"feat(babel6): 1,240 linter errors"
emorikawa,2016-05-06 17:59:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3a71780d77c8b86fa91de046d4a17c2126859cf,b3a71780d77c8b86fa91de046d4a17c2126859cf,"feat(babel6): 1,393 linter errors"
emorikawa,2016-05-06 05:49:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/5143105e2ec62cf46f3adccec302f13fc3e3ce47,5143105e2ec62cf46f3adccec302f13fc3e3ce47,"feat(babel6): 1,608 linter errors"
emorikawa,2016-05-06 05:46:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef1c15083f27764c4fc9f9b877c44f1196101182,ef1c15083f27764c4fc9f9b877c44f1196101182,"feat(babel6): 1,770 linter errors"
emorikawa,2016-05-06 05:40:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/47497dba0439d2b19cdd645d35951791c8b0c651,47497dba0439d2b19cdd645d35951791c8b0c651,feat(babel6): Fix emoji data
emorikawa,2016-05-06 05:30:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e2f877ddb7125986b29f62939eae0b870d4521b,2e2f877ddb7125986b29f62939eae0b870d4521b,"feat(babel6): 1,774 linter errors"
emorikawa,2016-05-06 05:17:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b26322c893cda9635260be7a573a48c55b4723c,5b26322c893cda9635260be7a573a48c55b4723c,feat(babel6): Add task to fix function spacing
emorikawa,2016-05-06 00:58:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2a4befad7b1f64ffb69bb0e15760af509e8fdde,d2a4befad7b1f64ffb69bb0e15760af509e8fdde,"feat(babel6): 2,398 linter errors"
emorikawa,2016-05-06 00:32:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/05515c847ce934ac6ff60e73e84d1f8d12207da4,05515c847ce934ac6ff60e73e84d1f8d12207da4,"feat(babel6): 2,743 lint errors"
emorikawa,2016-05-05 23:50:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/1def8546037fe717b720d3a97dc8dd29a19b6395,1def8546037fe717b720d3a97dc8dd29a19b6395,"feat(babel6): 88,888 lint errors"
emorikawa,2016-05-05 23:39:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/654820d5688fb6a6d5841c9b6b5b45ae4d8918b1,654820d5688fb6a6d5841c9b6b5b45ae4d8918b1,"feat(babel6): 90,798 lint problems

Fix eslint-task. Grunt doesn't recognize es6 files"
emorikawa,2016-05-05 23:22:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/e054a6ac9104069b96d00e9ffa34b88a28603689,e054a6ac9104069b96d00e9ffa34b88a28603689,feat(babel6): Yay all the tests pass
emorikawa,2016-05-05 22:24:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e906d4e166658058692048b0e8b09c5c552601c,2e906d4e166658058692048b0e8b09c5c552601c,feat(babel6): Don't use _.clone on Model objects
emorikawa,2016-05-05 22:13:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/57a3e140f40dc6faf230041a3b813fa80091f3e4,57a3e140f40dc6faf230041a3b813fa80091f3e4,feat(babel6): Fix autlinker spec
emorikawa,2016-05-05 18:18:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/92d5369f21e582bf3f7ae114893946f2c3f9b384,92d5369f21e582bf3f7ae114893946f2c3f9b384,feat(babel6): Fix errors in es6 compilation and extending from coffeescript
emorikawa,2016-05-05 01:38:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/706f92bc9d9063c96ec6b9dbdcb692ef3e4d5397,706f92bc9d9063c96ec6b9dbdcb692ef3e4d5397,feat(babel6): Fix spread operator
emorikawa,2016-05-05 00:00:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/92199587b37cc9572f5f9b49bf363d6fa8092952,92199587b37cc9572f5f9b49bf363d6fa8092952,feat(babel6): Convert message.coffee to message.es6
emorikawa,2016-05-04 23:23:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/409704fe8f5506210f37eaa5e1cd1afaca54a225,409704fe8f5506210f37eaa5e1cd1afaca54a225,feat(babel6): Convert account.coffee to account.es6
emorikawa,2016-05-04 23:03:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/52518199420a5b958394ba97ea86179c72eccc83,52518199420a5b958394ba97ea86179c72eccc83,feat(babel6): Replace stage-0 with electron
emorikawa,2016-05-04 22:03:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/679837316be403f8c81831fae26349416fe836b7,679837316be403f8c81831fae26349416fe836b7,feat(babel6): Switch to using local babel-preset-electron
emorikawa,2016-05-04 21:03:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/390007cac93ee19d117e3e4c6ba351cc3527e481,390007cac93ee19d117e3e4c6ba351cc3527e481,feat(babel6): fix es6 describe function syntax
emorikawa,2016-05-04 21:00:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/13e0a8f4426f9c813bd626dc27a2db5a598ff1c3,13e0a8f4426f9c813bd626dc27a2db5a598ff1c3,feat(babel6): Add test for spec describe
emorikawa,2016-05-04 19:55:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/18df77c3c0e47f99b0a77faaa82e833b0c3f0a55,18df77c3c0e47f99b0a77faaa82e833b0c3f0a55,feat(babel6): fix participant field spec
emorikawa,2016-05-04 19:15:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/2692fce522dacc511b90870717a7968116bd9997,2692fce522dacc511b90870717a7968116bd9997,feat(babel6): Fix destructuring default from exports and update linter
emorikawa,2016-05-04 18:19:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/50c1fded1437f058ab45ba06e5f56194b476742c,50c1fded1437f058ab45ba06e5f56194b476742c,feat(babel6): Fix FixedPopover spec
emorikawa,2016-05-04 18:17:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e754c660c01d3f50eda84eabc508151c0724815,4e754c660c01d3f50eda84eabc508151c0724815,feat(babel6): Fix ModelWithMetadata spec
emorikawa,2016-05-04 01:47:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/84e51ed3d9c637b924f31af9122fdf5fcc5768d9,84e51ed3d9c637b924f31af9122fdf5fcc5768d9,feat(babel6): Fix syntax errors and add regenerator runtime
emorikawa,2016-05-04 01:08:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/a54b540bd43fa4486a6063f4dc0da35dd318ab85,a54b540bd43fa4486a6063f4dc0da35dd318ab85,feat(babel6): Fix linter problems in new es6 files
emorikawa,2016-05-04 01:06:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/66786931c3e7b7bd5da608ffc84d6c0151679875,66786931c3e7b7bd5da608ffc84d6c0151679875,feat(babel6): Remove support for @babel header
emorikawa,2016-05-04 01:05:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e4029036a603a6c46f4893578e10e085ba3a964,9e4029036a603a6c46f4893578e10e085ba3a964,feat(babel6): Rename to js to es6
emorikawa,2016-05-04 00:53:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a6f3b9302b39c7b06af5a00e9fe1378f8a91a75,3a6f3b9302b39c7b06af5a00e9fe1378f8a91a75,feat(babel6): Fix default loading in nylas exports and component kit
emorikawa,2016-05-04 00:43:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/e355971dd2a22eabd73b46d7b3b303b54e1f99b3,e355971dd2a22eabd73b46d7b3b303b54e1f99b3,feat(babel6): Use absolute paths for linter and dont call default on coffee
emorikawa,2016-05-04 00:24:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d553227054d67a949e159af2c640b3eb5b2cfb2,2d553227054d67a949e159af2c640b3eb5b2cfb2,feat(babel6): Detect when packages don't have a default export
emorikawa,2016-05-03 23:42:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/21419b9df08028de0754b4ac85c08d330a047c9e,21419b9df08028de0754b4ac85c08d330a047c9e,feat(babel6): Convert to use new es6 require syntax
emorikawa,2016-05-03 22:42:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/850e703aacdd4f14a3c645feefb3e1ad7df7f935,850e703aacdd4f14a3c645feefb3e1ad7df7f935,feat(babel6): Add babel presets and lint for require.default
emorikawa,2016-05-03 19:37:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/8db8722f74612e742d3ccad26f5a2926c9b6b23c,8db8722f74612e742d3ccad26f5a2926c9b6b23c,feat(babel6): Initial babel conversion
bengotow,2016-05-06 00:05:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbdfa85547795d53d41e1d7f1b0e2f18e0888071,bbdfa85547795d53d41e1d7f1b0e2f18e0888071,feat(keymaps): Edit your keymaps from preferences
bengotow,2016-05-05 18:44:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d18241ea1ea29bc3db6b3302c8f83896e9c9b25,3d18241ea1ea29bc3db6b3302c8f83896e9c9b25,fix(focus): Always set selection range into editor on focus
bengotow,2016-05-05 18:03:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f6c2b5f550da27262dea74d629ba843f719d0a0,3f6c2b5f550da27262dea74d629ba843f719d0a0,fix(attachments): Properly handle HTTP errors in addition to socket errors #2136
jackiehluo,2016-05-05 17:35:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/81d1b36ef2baeb2d10f015b704c2825a39bfc409,81d1b36ef2baeb2d10f015b704c2825a39bfc409,:art:(darkside): Hide search bar in list mode when items are selected
bengotow,2016-05-05 17:23:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/f037cf8e9ffe2a9a5d068e7e485fcccc58f596be,f037cf8e9ffe2a9a5d068e7e485fcccc58f596be,fix(composer): mod+(a|x|c|v) always fall through to window
bengotow,2016-05-05 16:45:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad706c0609b0ca4e32608a200c7bba128806d58e,ad706c0609b0ca4e32608a200c7bba128806d58e,Update CONFIGURATION.md
bengotow,2016-05-05 02:34:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb2913871ee78b3106fd516c55cf5b431e0a2d0d,cb2913871ee78b3106fd516c55cf5b431e0a2d0d,"es6(*): AutoUpdateManager, ProtocolHandler, more."
bengotow,2016-05-05 02:09:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/204f3005c1593d1fd4e4d9960a74328916a38e60,204f3005c1593d1fd4e4d9960a74328916a38e60,fix(file-drop): Wait for attachments before popping composer
bengotow,2016-05-05 02:07:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7b21a2d8b3140e3ea5285dd5ad4ac9f4a77f9d4,d7b21a2d8b3140e3ea5285dd5ad4ac9f4a77f9d4,"fix(windows): Register all hot windows, not just first one"
bengotow,2016-05-05 01:53:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/3858a8f3252895971d49cd8616650e64fa763ce1,3858a8f3252895971d49cd8616650e64fa763ce1,es6(*): Fix application ES6 conversion
bengotow,2016-05-05 01:39:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/13f5230afcc102a78807ce2c6ac749608e34062d,13f5230afcc102a78807ce2c6ac749608e34062d,bump(changelog): 0.4.33 notes and 0.4.34 bump
bengotow,2016-05-05 00:24:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/3cef681d963d17d3aac88a7a7129b380132e9d9b,3cef681d963d17d3aac88a7a7129b380132e9d9b,fix(N1.sh): run with --enable-logging (nylas.sh for prod)
bengotow,2016-05-05 00:22:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4b05a25bed0b5b59cf71f30f32857a5f7e536ef,a4b05a25bed0b5b59cf71f30f32857a5f7e536ef,"es6(*): Application, WindowManager =>ES6, use makeSingleInstance"
jstejada,2016-05-04 23:25:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a4b407cb07ef89c729a30d4fe648d8a3221ae12,6a4b407cb07ef89c729a30d4fe648d8a3221ae12,"fix(composer): Properly setup editing action listeners on update

- This prevented emoji selection via the popover from working on a new
window because the plugin is loaded after the contenteditable sets up
the action listeners, so we need to re set them on update"
jstejada,2016-05-04 22:02:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/c85c8d04b7a2eba875e4c3865306aa5f0a969d3b,c85c8d04b7a2eba875e4c3865306aa5f0a969d3b,fix(composer-editor): Remove dead code
bengotow,2016-05-04 21:41:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/34f1ca0ba8573357b3da13ef785b0b9c9513b8fc,34f1ca0ba8573357b3da13ef785b0b9c9513b8fc,rm(fullcontact): Deprecated in favor of new contact sidebar
bengotow,2016-05-04 21:27:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/66cb0a6a77848327d6020477aa5886c1f9363ba3,66cb0a6a77848327d6020477aa5886c1f9363ba3,"rm(*): deprecated/unused Atom code, user stylesheet support"
bengotow,2016-05-04 20:44:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/7657598f40f6083ec2bce12a554ebe73258a6d01,7657598f40f6083ec2bce12a554ebe73258a6d01,fix(read-receipts): Always remove own read receipt images
jstejada,2016-05-04 19:57:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e10ccbde9df8924efb3354a0aa0a4ad7867ee6e,0e10ccbde9df8924efb3354a0aa0a4ad7867ee6e,"refactor(deltas): Update sync-worker to use NylasAPI.longConnection

Summary:
- Remove nylas-long-connection.coffee duplicate code from sync worker package
  and replace with delta-streaming-connection which uses NylasAPI.longConnection
- Replacement for XHR will come in another diff -- still need to clean up and
  fix some edge cases

Test Plan:
- TODO! Will add test coverage for NylasLongConnection and
  DeltaStreamingConnection

Reviewers: evan, bengotow

Reviewed By: evan, bengotow

Differential Revision: https://phab.nylas.com/D2875"
bengotow,2016-05-04 19:05:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b7f3252de888a0cc362a05fac0e08c60321de5f,2b7f3252de888a0cc362a05fac0e08c60321de5f,fix(config): Report JSON parsing errors in a dialog #2102
bengotow,2016-05-04 18:50:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/cde329168d24c8fb378ed755f2375253b3f97471,cde329168d24c8fb378ed755f2375253b3f97471,fix(specs)
bengotow,2016-05-04 16:39:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d2f4da08fc8caf7f611b7c9daf55f5b3b670eed,4d2f4da08fc8caf7f611b7c9daf55f5b3b670eed,"fix(tracking): Fix saving of ""off"" state #2123"
bengotow,2016-05-04 16:29:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2faa9b83bce20946bb28888d1772511e43b62d1,a2faa9b83bce20946bb28888d1772511e43b62d1,"fix(keymaps): ""Delete"" => ""Del"" to fix keycode 46"
bengotow,2016-05-04 16:25:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c00cccbee14b00690f04d596d188f88058f9c0c,4c00cccbee14b00690f04d596d188f88058f9c0c,fix(perspective): Always pop to root sheet when changing #2125
bengotow,2016-05-04 07:31:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d623dec12db8c4f87c81bcb99d8ab93784fd3d9,9d623dec12db8c4f87c81bcb99d8ab93784fd3d9,fix(send-later): Don't autodelete once draft is marked for send later
bengotow,2016-05-04 07:31:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/8925bc02f3bacc2275e2ad13fdafde5b798a9842,8925bc02f3bacc2275e2ad13fdafde5b798a9842,fix(drafts): never override body with undefined
bengotow,2016-05-04 02:04:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a15e369a77bcf2d44928b7a4f7a83fdcfd7b358,7a15e369a77bcf2d44928b7a4f7a83fdcfd7b358,"Revert ""feat(mailto): Allow N1 to be default client on windows""

This reverts commit a08eb3e175abd7a98dc844ff6ed9d93bcb00e626."
bengotow,2016-05-04 00:16:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/d940f8df0817624c9901b6f80d900ae4fb15e411,d940f8df0817624c9901b6f80d900ae4fb15e411,fix(config-schema): Explitly mention swipe gesture
bengotow,2016-05-03 23:25:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/da2c9145b4c00df68a37c269158e85375e644ee4,da2c9145b4c00df68a37c269158e85375e644ee4,bump(asar): Re-create ordering hint
bengotow,2016-05-03 22:58:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/c811cc5ce67048d983760cbb6583fd500ecbd155,c811cc5ce67048d983760cbb6583fd500ecbd155,fix(model): add specs around serializing bad API data
bengotow,2016-05-03 22:33:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e9ab2cc235156f1c0def97c20a68f4b7c88d849,2e9ab2cc235156f1c0def97c20a68f4b7c88d849,fix(menu): Copy Link => Copy Link Address #2105
bengotow,2016-05-03 22:27:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8af794adf826217865a7afa163c441a5003bc01,e8af794adf826217865a7afa163c441a5003bc01,"fix(unsubscribe): Leave canTrashThreads for now, in use by plugins"
bengotow,2016-05-03 22:17:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/7976ec6e0eb993342280b9bb393f7fbf178e5966,7976ec6e0eb993342280b9bb393f7fbf178e5966,feat(outline-view): Auto-expand when drag is over item with children #2084
bengotow,2016-05-03 21:47:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/a08eb3e175abd7a98dc844ff6ed9d93bcb00e626,a08eb3e175abd7a98dc844ff6ed9d93bcb00e626,feat(mailto): Allow N1 to be default client on windows
bengotow,2016-05-03 21:01:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/e637f6871cc1187a3d7758fb71cb2bfa9a8e5196,e637f6871cc1187a3d7758fb71cb2bfa9a8e5196,"fix(db): When replacing obj in a set, keep old body if new body not provided"
bengotow,2016-05-03 20:20:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d2755329b9b279a4871e4e1b0ac706107533300,6d2755329b9b279a4871e4e1b0ac706107533300,"fix(send-later): Simplify logic, use changes.addPluginMetadata"
emorikawa,2016-05-03 18:30:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d1c3801594ec561151d248d16f36fc7aaa3d1d2,4d1c3801594ec561151d248d16f36fc7aaa3d1d2,fix(window): fix error when adding account and serializing bad API data
bengotow,2016-05-03 16:16:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/c91341715e830e1e07118639226c57753945da0d,c91341715e830e1e07118639226c57753945da0d,"bump(versions): 0.4.33 beta, Electron 0.37.8"
aloisdg,2016-05-03 06:55:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/d007182000189f13aea91df481b58692836b5754,d007182000189f13aea91df481b58692836b5754,"Add links to Arch Linux's packages (#2097)

* Add a link to the archlinux's package

* Remove duplicate"
emorikawa,2016-05-03 02:19:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/1de17e795ae186ef809e17493bae6b63a107df3f,1de17e795ae186ef809e17493bae6b63a107df3f,fix(lint): fix linter error in spec
emorikawa,2016-05-03 02:18:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/6421084d88079e691b3c33c627e61f06dbe46f6c,6421084d88079e691b3c33c627e61f06dbe46f6c,fix(scheduler): fix scheduler to set uid in extension
bengotow,2016-05-03 02:13:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f166cc6ff74f0bf1882ebe5cad85b4cf19a4916,5f166cc6ff74f0bf1882ebe5cad85b4cf19a4916,fix(sheets): Always change sheet when changing perspective (#2094)
emorikawa,2016-05-03 01:58:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/7024dadb666ba6d7fd5714b49ec95616107b19a4,7024dadb666ba6d7fd5714b49ec95616107b19a4,fix(spec): fix cache in spec
emorikawa,2016-05-03 01:28:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5c40c6f993355656dc6d1b3737e6e3e9604a4ad,f5c40c6f993355656dc6d1b3737e6e3e9604a4ad,fix(less): fix themes not loading properly from cache
bengotow,2016-05-03 01:12:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/6cf4f8edcdd4deed5f77c453b7ee3704b474c56b,6cf4f8edcdd4deed5f77c453b7ee3704b474c56b,fix(activity-list): Use ContentPreserve to avoid changing link/open color coding
bengotow,2016-05-03 01:11:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb19021d3160c6b40c2aca7de18d3180181082b7,cb19021d3160c6b40c2aca7de18d3180181082b7,fix(picker): Invalid call to setState caused by unsub not working
bengotow,2016-05-03 00:36:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/65a60f2d96989f8ebc1e0f52e4c1db0a3b72369e,65a60f2d96989f8ebc1e0f52e4c1db0a3b72369e,fix(tracking): Calling Actions.setMetadata from applyTransforms no longer works
bengotow,2016-05-02 22:59:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9f39cd86ef5067d5ef5657a91e27dbc9ef13f07,b9f39cd86ef5067d5ef5657a91e27dbc9ef13f07,"fix(tracking): Use colors for link/read receipts, fix parsing"
jstejada,2016-05-02 22:58:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/287b881dbf0a62b9291fb26a8d65608bcfb77d41,287b881dbf0a62b9291fb26a8d65608bcfb77d41,:art:(mail-merge): Remove hardcoded bg color
emorikawa,2016-05-02 22:29:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/2cc7ee881a55970204b8b0a4d921c62697424bc8,2cc7ee881a55970204b8b0a4d921c62697424bc8,fix(composer): fix async composer plugin loading
bengotow,2016-05-02 21:54:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/16c3a87ed40677106c380b3e1dabfada0c7c3021,16c3a87ed40677106c380b3e1dabfada0c7c3021,"fix(activity-list): Apply ""limit 100"" after sorting, not before"
bengotow,2016-05-02 21:22:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2bbcb6f6d249b1b810959d48d8317d81e749ea64,2bbcb6f6d249b1b810959d48d8317d81e749ea64,bump(version): 0.4.32 and changelog
emorikawa,2016-05-02 21:20:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/74b22880aa86f9e93e865f00949edf80d54f1d4b,74b22880aa86f9e93e865f00949edf80d54f1d4b,fix(composer): don't show popout in composer on output
jstejada,2016-05-02 21:01:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/17c9c60cb25371cbcf75d1564bac5e9025fb6f61,17c9c60cb25371cbcf75d1564bac5e9025fb6f61,fix(mail-merge): Unlink fields when column is removed
OliverCole,2016-05-02 20:47:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b22c4efe5b3981d260ecbf9e4f6e7e391fa346d,8b22c4efe5b3981d260ecbf9e4f6e7e391fa346d,Fix config.json markdown (#2101)
jstejada,2016-05-02 20:34:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/6895d4e40b00477c63b678df59e3234371a32b9b,6895d4e40b00477c63b678df59e3234371a32b9b,fix(mail-merge): Check if contains recipients before sending
jstejada,2016-05-02 19:45:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3280e6465fbfa2df2ae2782cad08f5d21d16e6d,c3280e6465fbfa2df2ae2782cad08f5d21d16e6d,fix(mail-merge): Add check for valid email address in recipients
bengotow,2016-05-02 19:32:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9bdd90599ada18d36f7472aebc5231670c9fafc,d9bdd90599ada18d36f7472aebc5231670c9fafc,"fix(emoji): Replace message emoji in DOM, not in html string"
jstejada,2016-05-02 19:15:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/80f7cdab71b958c5aa390e553745d5a16d0d4d42,80f7cdab71b958c5aa390e553745d5a16d0d4d42,"fix(mail-merge): Preserve linked tokens when importing new csv

- If the new imported csv contains columns with the same name as the
imported one, any tokens linked to those columns will be preserved
- Any tokens linked to columns that no longer exist will be removed
- Other fixes"
jstejada,2016-05-02 18:23:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/953931a62803bd59caf1097bb86300d3dcaff702,953931a62803bd59caf1097bb86300d3dcaff702,"fix(mail-merge): Don't update body tokens unless actually necessary.

- Prevents the contenteditable from stealing focus"
bengotow,2016-04-30 00:10:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb4bd77efdf08f41b168e1f47697d60bd75fc511,fb4bd77efdf08f41b168e1f47697d60bd75fc511,"fix(undo): Don't create separate commands, since they bubble separately"
emorikawa,2016-04-29 23:54:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/399d445e98d8265345f2af186f0c7b98506aba96,399d445e98d8265345f2af186f0c7b98506aba96,fix(specs): fix composer-header specs
bengotow,2016-04-29 23:19:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/739d23ffe5b91c82ec63e947faa77ded6cf9089a,739d23ffe5b91c82ec63e947faa77ded6cf9089a,fix(lint): Errors in ActionBarPlugins
bengotow,2016-04-29 23:03:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac29c99f329d85f35c9ff6bbd39fb7f681ad71d6,ac29c99f329d85f35c9ff6bbd39fb7f681ad71d6,fix(mail-merge): Autogen headers for CSVs with no headers
emorikawa,2016-04-29 22:57:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebba673671a1c1f90f881c670f128461c1b9647a,ebba673671a1c1f90f881c670f128461c1b9647a,feat(composer): better composer plugin loading
emorikawa,2016-04-29 21:46:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/31fb621d6b126010564cbfb0e57bfd18752425c6,31fb621d6b126010564cbfb0e57bfd18752425c6,fix(draft): metadata changes don't flip pristine bit
emorikawa,2016-04-29 21:30:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/dec047b18c878a4544b4416a7655552f86dbb7b5,dec047b18c878a4544b4416a7655552f86dbb7b5,fix(composer): fix flashing and focus losing in the composer
jstejada,2016-04-29 22:56:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/e62bebb8a181a5bad85679445e4786ff90f01d76,e62bebb8a181a5bad85679445e4786ff90f01d76,"fix(mail-merge): Update regex, plus minor cleanup"
bengotow,2016-04-29 22:41:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b97b9bbd45e5bee7860da17685eac3bca86a792,6b97b9bbd45e5bee7860da17685eac3bca86a792,bump(version): 0.4.31
jstejada,2016-04-29 21:54:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fc18725e04d002b1fa4d4923037ce55caf25b64,6fc18725e04d002b1fa4d4923037ce55caf25b64,"fix(table): Fix row rendering (also fixes focus)

- When rendering lazy list, need to pass same reference to the renderer
or otherwise a new component will always be mounted"
bengotow,2016-04-29 20:55:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/4fd66e194feb7226e8886ce8a33334b8367216ab,4fd66e194feb7226e8886ce8a33334b8367216ab,feat(mail-merge): Import CSV button
bengotow,2016-04-29 20:34:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/471f934421ae1a79db57c509ef2d72a714c34ac6,471f934421ae1a79db57c509ef2d72a714c34ac6,fix(mail-merge): Disable send later while using mail merge
jstejada,2016-04-29 20:08:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/38bf9080c284b19fba0a78db919301b6dd24da6e,38bf9080c284b19fba0a78db919301b6dd24da6e,"perf(mail-merge): Add lazy rendering to table

Summary: Add new LazyRenderedList component and updates Table to use it

Test Plan: TODO

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2936"
bengotow,2016-04-29 19:57:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/e9ae4def9aa43e46b48858e63d351a01af5c058e,e9ae4def9aa43e46b48858e63d351a01af5c058e,fix(mail-merge): Replace the same token as many times as it appears in body
bengotow,2016-04-29 19:15:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b954071271e462d33ff402ccdd7bb59a8a28b557,b954071271e462d33ff402ccdd7bb59a8a28b557,"fix(activity-list): Remove image width in favor of intrinsic size, no-shrink rule"
bengotow,2016-04-29 18:57:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/03080cf109e5bb9e02f70749243a29764b172b17,03080cf109e5bb9e02f70749243a29764b172b17,fix(mail-merge): Fix drag and drop for files vs. chips
emorikawa,2016-04-29 17:20:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2dcc7b4352a75176007adfd65db336811156285,e2dcc7b4352a75176007adfd65db336811156285,fix(onboarding): pass along accountId too
khamidou,2016-04-29 17:18:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/b82e47ba3475a09b5926cecf538b20add4f1ee10,b82e47ba3475a09b5926cecf538b20add4f1ee10,"[N1] Changes to allow running edgehill-server locally

Summary: This is mostly config changes.

Test Plan: Tested the Google OAuth flow.

Reviewers: bengotow, drew

Reviewed By: bengotow, drew

Differential Revision: https://phab.nylas.com/D2907"
bengotow,2016-04-29 00:20:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd4054095300d6d3825a71f1b5df2904b746d776,dd4054095300d6d3825a71f1b5df2904b746d776,fix(read-receipts): Fix another issue caused by ES6 subclassing Coffeescript
bengotow,2016-04-29 00:08:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/6746c1acd1a04b1bb98467583cd0c033f3bc62d3,6746c1acd1a04b1bb98467583cd0c033f3bc62d3,bump(version): 0.4.30
bengotow,2016-04-29 00:08:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/67fcba67692ae8f0f903495c2b5ac38d3433c715,67fcba67692ae8f0f903495c2b5ac38d3433c715,fix(read-receipts): Remove tracking pixels when composing drafts
emorikawa,2016-04-29 00:06:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/687ecbfcc30ed876cfa4b8d2cc6182add98ec3ff,687ecbfcc30ed876cfa4b8d2cc6182add98ec3ff,fix(onboarding): encode welcome page info
bengotow,2016-04-28 23:40:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/821dfc27cee240e19a460e318212c3ac82c90ef8,821dfc27cee240e19a460e318212c3ac82c90ef8,fix(build): linter errors
bengotow,2016-04-28 22:53:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/765d9f30fc5be75b97e3254d37a6b57fbc341582,765d9f30fc5be75b97e3254d37a6b57fbc341582,fix(thread-list): Don't rely on `zip` since it can become off-by-one forever
emorikawa,2016-04-28 22:28:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3ea3353451d06f8646422ece9443e375fcbc066,b3ea3353451d06f8646422ece9443e375fcbc066,feat(onboardin): fix win closing & nav to welcome page
bengotow,2016-04-28 21:20:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/b28e2833d8d8ca064ec050e3dcc02e3f883587bf,b28e2833d8d8ca064ec050e3dcc02e3f883587bf,"fix(activity-list): Add empty state, cap number of items"
emorikawa,2016-04-28 20:42:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/9642484b5eddc381f260e6d19be7eb17bc33afa3,9642484b5eddc381f260e6d19be7eb17bc33afa3,perf(composer): tweak tooltip animation timing & composer loading
bengotow,2016-04-28 20:19:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0ac5fe5b27edcdf3a89c4696b20134bdf3f2a3b,c0ac5fe5b27edcdf3a89c4696b20134bdf3f2a3b,fix(config): Remove unnecessary CSON import
bengotow,2016-04-28 20:17:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/27bb58e4ed9725f763c768c602b62fb32d94e6c7,27bb58e4ed9725f763c768c602b62fb32d94e6c7,"fix(config): Rewrite contents, not just filename"
bengotow,2016-04-28 20:11:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/7958d8cb5a32d58ae1a4b02e173a5b6266b6b9a9,7958d8cb5a32d58ae1a4b02e173a5b6266b6b9a9,fix(activity-list): Move button to the right beside compose
bengotow,2016-04-28 19:45:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5558532c55f6d50f43a3f4b7b9cad5656bffec9,f5558532c55f6d50f43a3f4b7b9cad5656bffec9,fix(keymaps): Use correct combo for paste+match style #2088
bengotow,2016-04-28 19:42:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/3137db3a250406e49763fbf27a216ae9c748171f,3137db3a250406e49763fbf27a216ae9c748171f,bump(version): 0.4.29
bengotow,2016-04-28 19:40:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d3a8d3f521d06978d724212c0b34c710598c838,5d3a8d3f521d06978d724212c0b34c710598c838,"fix(win32): Sharper hamburger, better win32 menu"
jackiehluo,2016-04-28 19:29:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/c77b64cbbbd4e896e1eacd29acd2e51c46cbb0d7,c77b64cbbbd4e896e1eacd29acd2e51c46cbb0d7,"feat(activity-list): Add unread count and click-to-thread

Summary: Shows unread count and focuses thread upon clicking on
notification (desktop or popover).

Test Plan: Tested locally.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2927"
bengotow,2016-04-28 19:02:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f6c3164d4cdc86e6a145ea32952e77ca1f91a86,1f6c3164d4cdc86e6a145ea32952e77ca1f91a86,fix(mail-merge): Hide button when the user is composing a reply
emorikawa,2016-04-28 18:45:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b71258dee47f7614fbba5baa0cc775a49ce6f74,4b71258dee47f7614fbba5baa0cc775a49ce6f74,fix(sidebar): fix account name styles
bengotow,2016-04-28 18:31:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a4318d4b799d7424f8c5178f13949af10cb007e,6a4318d4b799d7424f8c5178f13949af10cb007e,fix(win-management): Focus existing win when renderer tries to open dup
bengotow,2016-04-28 18:20:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1c7705f09eac10d8b3e89d3e16cac2f766be4a4,c1c7705f09eac10d8b3e89d3e16cac2f766be4a4,"fix(win-management): Track windowKey changes, add assertions"
bengotow,2016-04-28 17:34:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/e238258dcbeec36ed4699bbb70fe8ad826b53bb2,e238258dcbeec36ed4699bbb70fe8ad826b53bb2,fix(user-agent): Don't assume Tasks are spawned from renderer processes #2079
Akshar-Patel,2016-04-28 17:28:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/a69266a75d55bc463e826ca8e6bd45f363f89d90,a69266a75d55bc463e826ca8e6bd45f363f89d90,"Show under Internet Category in Linux  (#2083)

* Update title for system tray

Using only Menu Bar confuses Linux users because ''Menu Bar'' word is only used withing Mac OS. So, also use ""System Tray"" word.

* Show under Internet Category in Linux

Right now, N1 is showing under Programming Category. ""Network"" should be added to show under Internet Category."
jstejada,2016-04-28 17:14:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/04cebd51f26540ae435643eac5e4cff51fbc28bf,04cebd51f26540ae435643eac5e4cff51fbc28bf,"fix(cursor): Remove stale cursor from config.cson when cursor error

- #2049"
bengotow,2016-04-28 02:20:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbd77fb5f68f640c867db1ca4c836855d561bee6,fbd77fb5f68f640c867db1ca4c836855d561bee6,fix(build): resolve lesslint issue
bengotow,2016-04-28 02:03:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/e995972323b53612c5ad5a965f00b1462b56519a,e995972323b53612c5ad5a965f00b1462b56519a,"fix(win-menu): Display window names, not ""Unnamed Window"""
jstejada,2016-04-28 01:22:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/24938163125296062d594ea3f4995c247663b425,24938163125296062d594ea3f4995c247663b425,bump(submodule): Latest mail merge changes
jstejada,2016-04-26 21:18:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/71353cdaf18b61d60f7d2f827f7f943b2eaa1a1a,71353cdaf18b61d60f7d2f827f7f943b2eaa1a1a,"feat(mail-merge): Add CSV imports, styling, and several fixes

Summary: Adds CSV imports, proper styles to mail merge plugin and fixes a handful of bugs

Test Plan: TODO

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2925"
bengotow,2016-04-28 00:44:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/7bf842fb0b8bce7777beed4fa513c15143caa299,7bf842fb0b8bce7777beed4fa513c15143caa299,fix(build): keytar bump broke everything
bengotow,2016-04-27 22:20:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/61073da7a0f710d47bf2c3999c257a0fedac2e4c,61073da7a0f710d47bf2c3999c257a0fedac2e4c,fix(thread-list): Remove unnecessary extra `trigger`
bengotow,2016-04-27 22:20:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ce646a1d3fa6610518f5aad33bdda2b7b0a9ecf,7ce646a1d3fa6610518f5aad33bdda2b7b0a9ecf,"fix(keymaps): Restore missing bindings, handle single keys inside of email frames"
bengotow,2016-04-27 20:33:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac66570b1b21a13efdc650a803507d69e58a9e9c,ac66570b1b21a13efdc650a803507d69e58a9e9c,"fix(keymaps): function kys to lowercase, `-` to `+`"
bengotow,2016-04-27 20:24:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/14569ec37b74a61dc1b397ad0f6bdde43443904d,14569ec37b74a61dc1b397ad0f6bdde43443904d,"fix(menus): Add Thread menu to win/linux, fix disabling"
bengotow,2016-04-27 20:07:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/e116eaec48038376a48f5aa8bd13782e80cf014e,e116eaec48038376a48f5aa8bd13782e80cf014e,bump(version): 0.4.28
pamdirac,2016-04-27 17:26:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/f818a134dd29380574893f85b9ab0b6e97c5e249,f818a134dd29380574893f85b9ab0b6e97c5e249,"Parse Office 365 names (#2016)

Office 365 likes to format email addresses as follows:
Last Name, First Name (Some Description) <email@address.org>

This causes Contact.firstName() (and hence sometimes displayName()) to return
""Last Name,"" which looks a bit odd in the message/thread views.

The intent of the commit is to correctly parse these names so that (using the
above example):
- firstName = ""First Name""
- lastName = ""Last Name (Some Description)""
- fullName = ""First Name Last Name (Some Description)""

These behavioral changes only impact names containing a ','.

I don't know that this really provides exhaustive coverage of Office 365, and
keeping the description as part of the last name is not completely guilt free,
but it's not any worse than the previous state of affairs which also has
the description in the same field but combined instead with (misplaced)
first name data."
Siilwyn,2016-04-27 16:22:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f13a97e1c2b0d3deca279eb0c8ba84f22144f29,6f13a97e1c2b0d3deca279eb0c8ba84f22144f29,"Linux launch on start (#2019)

* feat(workspace-section): Add Linux-only warning to launch on start

* feat(system-start-service): Add Linux launch on system start option"
Akshar-Patel,2016-04-27 02:13:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/66eca644cb14caaa0477f461138f739ac003441b,66eca644cb14caaa0477f461138f739ac003441b,"Update title for system tray (#2041)

Using only Menu Bar confuses Linux users because ''Menu Bar'' word is only used withing Mac OS. So, also use ""System Tray"" word."
bengotow,2016-04-27 02:03:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/68bf080b5724a3d94ed89450e7de0de7238280f7,68bf080b5724a3d94ed89450e7de0de7238280f7,fix(autolinker): Don't match emails that are also URLs #2071
bengotow,2016-04-27 00:01:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e9346f224786c4768d954cd4468008532856f58,8e9346f224786c4768d954cd4468008532856f58,fix(autolinker): Use `getAttribute('href')` because `href` is magic
bengotow,2016-04-26 23:49:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/e11181423eae3b489e7e6724cf8a004b3f167d7d,e11181423eae3b489e7e6724cf8a004b3f167d7d,fix(autolinker): Always override title attribute #2056
bengotow,2016-04-26 22:53:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/db934cf463c415090ced45b8e2f18d4d70a9213e,db934cf463c415090ced45b8e2f18d4d70a9213e,fix(sidebar): Fix overflow of account name
bengotow,2016-04-26 22:32:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/b23af144e1bb89cd7fd74a115a9c6d3426afd26f,b23af144e1bb89cd7fd74a115a9c6d3426afd26f,fix(accounts): show messages and coerce config when invalid
bengotow,2016-04-26 21:18:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/77f885e86b5cb3357d75b983d66c8182dca5a730,77f885e86b5cb3357d75b983d66c8182dca5a730,fix(draft-factory): Correctly load messages when creating a draft on a not-loaded thread. Sentry 26671
bengotow,2016-04-26 21:12:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/4962d24b4dd7bdcc97a5d6c3f37e43fb13f18a3b,4962d24b4dd7bdcc97a5d6c3f37e43fb13f18a3b,fix(quoted-text): Guard call to children[0] Sentry 33642
bengotow,2016-04-26 21:03:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/14acad219704da1497d9688ca4afd04ba736a292,14acad219704da1497d9688ca4afd04ba736a292,"fix(attachments): Make presentError display underlying error, file optional. Sentry 27089"
bengotow,2016-04-26 20:46:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2ee14bb6097dcbd0dd4a09e04c59bfd7e3fb018,e2ee14bb6097dcbd0dd4a09e04c59bfd7e3fb018,"fix(keybindings): Fix ""Show Keybindings"" button"
bengotow,2016-04-26 20:27:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/d64fd03c539a76d31a8d45951a6cbaa86342ca40,d64fd03c539a76d31a8d45951a6cbaa86342ca40,fix(menus): Customize context menu for mailto #2061
bengotow,2016-04-26 20:17:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/e269dc259881bca064d97ff28b42e5b935c171a3,e269dc259881bca064d97ff28b42e5b935c171a3,cleanup(config): Additional notes about config.cson => json
bengotow,2016-04-26 20:13:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/c543de9e8144cc95dcf7c74354e4dd0823f10742,c543de9e8144cc95dcf7c74354e4dd0823f10742,"cleanup(specs): Remove space-pen. Goodbye, jQuery!"
bengotow,2016-04-26 16:04:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/80c8d733c88a0bc11340ddd54b9faf2632e46b89,80c8d733c88a0bc11340ddd54b9faf2632e46b89,"cleanup(config): Remove unused features, dependencies"
bengotow,2016-04-26 02:46:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7832576b5fadca64dee408ba830cc84160d7ba3,d7832576b5fadca64dee408ba830cc84160d7ba3,fix(composer): Wait frames not msec on focus out #2033
bengotow,2016-04-26 02:10:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b12f833d7c6ab4719a16f5ace19ab7050700a5a,6b12f833d7c6ab4719a16f5ace19ab7050700a5a,"fix(compose): ""compose in trash"", additional specs #2026"
emorikawa,2016-04-26 20:01:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ea8b9622cac8d6d482d367b10f197a822390d8f,4ea8b9622cac8d6d482d367b10f197a822390d8f,fix(win): draft popout windows always send draftJSON
jackiehluo,2016-04-26 18:02:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd256b6bef4deefaae22c8b82eb9b46575b908bb,fd256b6bef4deefaae22c8b82eb9b46575b908bb,"fix(activity-list): Debounce notifications and add detail to subtitles

Summary: Only sends notifications if none for that thread have been sent
in the last ten minutes/ten seconds, depending on the plugin. Adds
subject/link URL for notification subtitles.

Test Plan: Tested locally.

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2922"
emorikawa,2016-04-26 00:28:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/e42f50178073852a824862f33bc995b5815095bb,e42f50178073852a824862f33bc995b5815095bb,fix(frame): fix link clicking in iframes
emorikawa,2016-04-25 23:57:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/11ed4781a483f09b249ec17dfcf14932584125b6,11ed4781a483f09b249ec17dfcf14932584125b6,bump(version): 0.4.27 beta
emorikawa,2016-04-25 23:18:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/c416731d3515bae305413611fc47225615454593,c416731d3515bae305413611fc47225615454593,fix(build): fix lstatSync throwing
emorikawa,2016-04-25 22:27:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a5571715707f10c5847a757f2ae4ec7dfe89412,6a5571715707f10c5847a757f2ae4ec7dfe89412,feat(package): fix build-resources-task and move submodule
emorikawa,2016-04-25 22:06:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/25dea6a1364a9e7aab59171aed7795e5f55fd8c9,25dea6a1364a9e7aab59171aed7795e5f55fd8c9,feat(package): require `'engines': {'nylas': '*'}` in package.json
emorikawa,2016-04-25 21:28:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d86969d73948a52a412f91a98113381cb726cb2,6d86969d73948a52a412f91a98113381cb726cb2,fix(path): error if booted from wrong folder
emorikawa,2016-04-25 18:00:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/483dc7dae9e6a32d4969c02046562ad77931f086,483dc7dae9e6a32d4969c02046562ad77931f086,fix(keymap): stop shift callbacks too
grinich,2016-04-25 17:18:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb6101097eb735ed769ba056bc39b24d7952c0b4,fb6101097eb735ed769ba056bc39b24d7952c0b4,remove plugins from readme that fail when building from source
bengotow,2016-04-25 01:33:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d38ac63100422bb7a7e8ee303af9c842f55abb7,4d38ac63100422bb7a7e8ee303af9c842f55abb7,"cson(cleanup): Remove imports, only used for config.cson now"
jackiehluo,2016-04-23 22:58:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f31785a16f45980155843866f7a125a09a2f55e,4f31785a16f45980155843866f7a125a09a2f55e,:art:(plugins): Fix line breaks
bengotow,2016-04-25 01:31:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7da2c7b8682556da3c2fc02aae75e61ed58b635,b7da2c7b8682556da3c2fc02aae75e61ed58b635,"cson(packages): Remove from specs, deprecate use for for menus, package.json files"
bengotow,2016-04-25 01:27:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba16a717774a69ca7327748b283b3fb1815bf410,ba16a717774a69ca7327748b283b3fb1815bf410,"fix(build): CSON => JSON no longer necessary for /keymaps, /menus"
bengotow,2016-04-25 00:32:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/b98a3bae6075e84c3cfe4c843e6434adfea363c7,b98a3bae6075e84c3cfe4c843e6434adfea363c7,fix(build): Run eslint on files inside submodule
bengotow,2016-04-24 23:57:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8dd9461c2f4110d3f3b4b04be8e4dff21d8fed9,d8dd9461c2f4110d3f3b4b04be8e4dff21d8fed9,fix(build): Trigger travis rebuild
bengotow,2016-04-24 20:21:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/3bfad0c9e1b2b9172a73bd1dbfa5fba5f3cdddb9,3bfad0c9e1b2b9172a73bd1dbfa5fba5f3cdddb9,fix(*): spec failures related to moment-round again
bengotow,2016-04-24 19:47:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/aab39a12da5c24b34bedf8dbf29b07d8cbac3138,aab39a12da5c24b34bedf8dbf29b07d8cbac3138,mv(packages): move plugins that are incompatible with open source sync engine
bengotow,2016-04-24 19:34:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed6c25d2f9b8741499025ba783d3f45c38138800,ed6c25d2f9b8741499025ba783d3f45c38138800,bump(version): 0.4.26 beta
jstejada,2016-04-24 18:07:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/e710a83e10ca944832745c2a9132a70bec92f29b,e710a83e10ca944832745c2a9132a70bec92f29b,"fix(specs): Fix broken popover specs

- Remove composition with decorator for now
- Fix other specs"
bengotow,2016-04-24 17:16:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/a46bad4eb73b2b5ba95f21bb4a0905dc787b8af7,a46bad4eb73b2b5ba95f21bb4a0905dc787b8af7,"refactor(menus): Major prune of keymaps/commands, real conditional menus

Summary:
Keymaps & menus CSON => JSON, remove AtomKeymaps, CommandRegistry use of CSS selectors, use Mousetrap instead

Important Notes:

- The `application:` prefix is reserved for commands which are handled in the application process. Don't use it for other things. You will not receive the events in the window.

- Maintaining dynamic menus seems to come with quite an overhead, because Electron updates the entire menu every time. In the future, we'll need https://github.com/electron/electron/issues/528 to really make things nice. I will be tracking this upstream.

- The format for keyboard shortcuts has changed. `cmd-X` is now `command+shift+x`

Test Plan: Run tests

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2917"
jstejada,2016-04-23 01:23:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/021eac7679f6703c31f1a1f6d249f28fcc384682,021eac7679f6703c31f1a1f6d249f28fcc384682,"feat(mail-merge): Add mail merge plugin

Summary:
Adds Mail Merge Plugin
- Adds new table components to component kit
- Adds new extension points to allow dragging and dropping into composer contenteditable and participant fields and customizing participant fields
- Adds new decorators and other misc updates
- #1608

Test Plan: TODO

Reviewers: bengotow, evan

Reviewed By: bengotow, evan

Differential Revision: https://phab.nylas.com/D2895"
emorikawa,2016-04-23 00:39:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8413c8e2f64548047d826de6baa58a0a8f88bb4,a8413c8e2f64548047d826de6baa58a0a8f88bb4,fix(win): speed up composer launching
jackiehluo,2016-04-23 00:30:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd61995b92dce9d962deae68710be5b7719cbddd,fd61995b92dce9d962deae68710be5b7719cbddd,fix(draft-list): Revert regression for sheet selection
jackiehluo,2016-04-23 00:26:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff4cbc8d13faa1909de2307d2f373eadda04e4e1,ff4cbc8d13faa1909de2307d2f373eadda04e4e1,"feat(activity-list): View message opens and link clicks

Summary:
Adds an activity list view that shows message opens and link clicks in a
chronological feed.

TODO: Add badge for unread notifications and different styling for read/unread
notifications. Click item to jump to corresponding thread.

Test Plan: TODO.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2915"
emorikawa,2016-04-22 23:21:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2a53e57c84b232562777324e1fd60e424c9de02,f2a53e57c84b232562777324e1fd60e424c9de02,fix(win): fix frame settings on windows
emorikawa,2016-04-22 21:57:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/78b19a4d423724e7e001aa44c5adb875463da6d9,78b19a4d423724e7e001aa44c5adb875463da6d9,fix(win): load config earlier
emorikawa,2016-04-22 20:30:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/e90735ed6e8a3d4e28f48fdb90f0c931363e670c,e90735ed6e8a3d4e28f48fdb90f0c931363e670c,"feat(win): faster popout windows

Summary:
This diff is designed to dramatically speed up new window load time for
all window types and reduce memory consumption of our hot windows.

Before this diff, windows loaded in ~3 seconds. They now boot in a couple
hundred milliseconds without requiring to keep hot windows around for
each and every type of popout window we want to load quickly.

One of the largest bottlenecks was the `require`ing and initializing of
everything in `NylasExports`.

I changed `NylasExports` to be entirely lazily-loaded. Drafts and tasks
now register their constructors with a `StoreRegistry` and the
`TaskRegistry`. This lets us explicitly choose a time to activate these
stores in the window initalization instead of whenever nylas-exports
happens to be required first.

Before, NylasExports was required first when components were first
rendering. This made initial render extremely slow and made the proposed
time picker popout slow.

By moving require into the very initial window boot, we can create a new
scheme of hot windows that are ""half loaded"". All of the expensive
require-ing and store initialization is done. All we need to do is
activate the packages for just the one window.

This means that the hot window scheme needs to fundamentally change from
have fully pre-loaded windows, to having half-loaded empty hot windows
that can get their window props overridden again.

This led to a major refactor of the WindowManager to support this new
window scheme.

Along the way the API of WindowManager was significantly simplifed.
Instead of a bunch of special-cased windows, there are now consistent
interfaces to get and `ensure` windows are created and displayed. This
DRYed up a lot of repeated logic around showing or creating core windows.

This also allowed the consolidation of the core window configurations into
one place for much easier reasoning about what's getting booted up.

When a hot window goes ""live"" and gets populated, we simply change the
`windowType`. This now re-triggers the loading of all of the packages for
the window. All of the loading time is now just for the packages that
window requires since core Nylas is there thanks to the hot window
mechanism.

Unfortunately loading all of the packages for the composer was still
unnaceptably slow. The major issue was that all of the composer plugins
were taking a long time to process and initialize. The solution was to
have the main composer load first, then trigger another window load
settings change to change the `windowType` that loads in all of the
plugins.

Another major bottleneck was the `RetinaImg` name lookup on disk. This
requires traversing the entire static folder synchronously on boot. This
is now done once when the main window loads and saved in a cache in the
browser process. Any secondary windows simply ask the backend for this
cache and save the filesystem access time.

The Paper Doc below is the current set of manual tests I'm doing to make
sure no window interactions (there are a lot of them!) regressed.

Test Plan: https://paper.dropbox.com/doc/Window-Refactor-UYsgvjgdXgVlTw8nXTr9h

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2916"
bengotow,2016-04-22 20:21:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/f951d85f45ac0e264f9ec7ea8562ebbb33457ce6,f951d85f45ac0e264f9ec7ea8562ebbb33457ce6,fix(sheets): Attach sheets to the toolbar at correct offset
bengotow,2016-04-22 17:53:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/0174b4d20fdc478f0de76a5b05c5682aff488f34,0174b4d20fdc478f0de76a5b05c5682aff488f34,bump(resources): Updates to submodule
jackiehluo,2016-04-21 23:00:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/534eec2d93da2e5d73d911454f0eee957b258c11,534eec2d93da2e5d73d911454f0eee957b258c11,fix(draft-list): Select proper sheet when launching in drafts perspective
bengotow,2016-04-21 17:59:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/57cd513a669196edc96dbd12d77ce20e77bec6f1,57cd513a669196edc96dbd12d77ce20e77bec6f1,rm(package): N1 does not use activationCommands
bengotow,2016-04-21 01:46:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/297e93dc8a2335095d1e4237b9dff3f93b93c7d5,297e93dc8a2335095d1e4237b9dff3f93b93c7d5,"rm(package): Remove unused grammars, settings, scopedProperties"
bengotow,2016-04-21 00:47:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/aafd3694ac957e61a85b81ed721aad824c91d24c,aafd3694ac957e61a85b81ed721aad824c91d24c,fix(message): Re-write nasty code in participants()
emorikawa,2016-04-20 21:39:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f267d8bec78b9ff304c48f10a1a8cdb5db41a53,1f267d8bec78b9ff304c48f10a1a8cdb5db41a53,fix(spec): fix to run in utc travis
bengotow,2016-04-20 19:27:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/aecb6f7953a35d8aaf2211130f313344cd7caf61,aecb6f7953a35d8aaf2211130f313344cd7caf61,fix(attachments): Increase threshold to 12k
bengotow,2016-04-20 17:44:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/38804cb816ca6b52cc03479d182930620afcc348,38804cb816ca6b52cc03479d182930620afcc348,"fix(attachments): Don't show the paperclip for inline attachments < 3k (signatures, etc.)"
kevinmartin,2016-04-20 17:07:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ebdd2046b58bdd8778b33c46c88c7c4f6cc5613,0ebdd2046b58bdd8778b33c46c88c7c4f6cc5613,"Doing write on a GET is invalid. (#2004)

* Doing write on a GET is invalid

* Doing write on a GET is invalid"
bengotow,2016-04-20 00:46:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/643423f2b003b07e82cbcf22eedda4a58e9e9ae8,643423f2b003b07e82cbcf22eedda4a58e9e9ae8,"bump(electron): 0.37.6, with fix for inverted tray icon"
bengotow,2016-04-20 00:41:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/5829e2691f94b0c5a1413faab18aa59f6f5afc1b,5829e2691f94b0c5a1413faab18aa59f6f5afc1b,perf(db): Use partial indexes added in sqlite 3.8
jackiehluo,2016-04-20 00:34:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/665f9c654ce2f54b335e4821b1fed6023f5b185f,665f9c654ce2f54b335e4821b1fed6023f5b185f,lint(github-card): Change duplicated variable name
jackiehluo,2016-04-20 00:14:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/bfa1ef0d40bfa99c27402bb6721849ee3bfafca9,bfa1ef0d40bfa99c27402bb6721849ee3bfafca9,feat(preferences): Add theme picker button to Appearances
timtjtim,2016-04-19 23:14:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c749426ad7124775cd3678b6b063223d44f3f0c,4c749426ad7124775cd3678b6b063223d44f3f0c,"Added link to all plugins section (#2002)

* Added link to all plugins section

* Added correct link - to the nylas repro ;-)"
mxstbr,2016-04-19 23:13:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0c39e69b9926ac190fdedb580083ee1eb16d817,c0c39e69b9926ac190fdedb580083ee1eb16d817,"Fix Github Sidebar Plugin (#2003)

Hopefully fixes #1991

I don't have N1 setup locally, so this is a blind shot–would appreciate somebody who has it set up to pull this and verify this fixes the issue, but as far as I can tell it should.

The gist is:

> Looking at the code, what you do is use the `search/users` endpoint to find users by email and taking the repos from there. You then load the repositories of the username, but we can't sort those by most-starred: ""sort string Can be one of `created`, `updated`, `pushed`, `full_name`. Default: `full_name`"" *([src](https://developer.github.com/v3/repos/#list-user-repositories))*
> What we could instead do is use the search API, which **allows us to search for repositories by a specific user and sort by most starred**. This is a tiny bit hacky, but works perfectly fine. E.g. this is the URL for my most starred repos: `https://api.github.com/search/repositories?q=user:mxstbr&sort=stars&order=desc`"
bengotow,2016-04-19 23:08:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca24fc31e9b6724f4b266eb8888612078e76867f,ca24fc31e9b6724f4b266eb8888612078e76867f,rename(drafts) DraftStoreProxy => DraftEditingSession
bengotow,2016-04-19 23:05:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/585dab7cdfce42c3239a034bb7639b0e51063e69,585dab7cdfce42c3239a034bb7639b0e51063e69,"refactor(composer): Make session, draft available everywhere

Summary:
Up until now, we've been requiring that every plugin control in the composer take the draftClientId, retreive the session, listen to it, build state from the draft, etc. This is a huge pain and is hard to explain to newcomers becaus it frankly makes no sense.

In 0.3.45 we made it so that the ComposerView always has a non-null draft and session. (It isn't rendered until they're available). In this diff, I just pass those through to all the plugins and remove all the session retrieval cruft.

Almost none of the buttons have state of their own, which I think is appropriate.

They do render on every keystroke, but they were already running code (to recompute their state) on each keystroke and profiling suggests this has no impact.

Prepare for immutable

In preparation for Immutable models, make the draft store proxy returns a !== draft if any changes have been made. This means you can safely know that a draft has changed if `props.draft !== nextProps.draft`

Test Plan: Run tests

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D2902"
emorikawa,2016-04-19 18:54:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e3e3a6015aa33e2f5675576bfec1b1b554b81a7,7e3e3a6015aa33e2f5675576bfec1b1b554b81a7,"tests(calendar): adding calendar and scheduler tests

Summary: Adding tests

Test Plan: Tests

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2892"
bengotow,2016-04-19 18:32:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/237bad59d86ec9c11e1970ec4e262d672f5c6f89,237bad59d86ec9c11e1970ec4e262d672f5c6f89,"feat(unread/spam): New items in the sidebar for unread and spam

Summary:
Adds a new unified ""Spam"" folder and a unified ""Unread"" view,
which shows all the messages in your inbox which are unread.

Test Plan: Run tests

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2901"
bengotow,2016-04-15 23:05:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea22bde230bbb127c1f5d669e5516583663d6210,ea22bde230bbb127c1f5d669e5516583663d6210,"fix(default-alias): Show primary email instead of ""None"", clarify only for new messages currently"
bengotow,2016-04-15 18:30:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/40ca7587664e24e69f0758afd189236a00ffe061,40ca7587664e24e69f0758afd189236a00ffe061,fix(default-client): Set initial state to fix React warning
bengotow,2016-04-14 21:36:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/93131a11c72f5adc04af882a74ec8b2a6e7ca43c,93131a11c72f5adc04af882a74ec8b2a6e7ca43c,"fix(Inbox): Allow shift-J, shift-K to select threads"
bengotow,2016-04-14 21:33:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/244a28dffabdf8df091d67ba9ad393b06c44f9d4,244a28dffabdf8df091d67ba9ad393b06c44f9d4,fix(related-threads): Show snippet in addition to subject #1683
bengotow,2016-04-14 21:08:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b34ce73ec6910449214b08d71415e193113b3aa,9b34ce73ec6910449214b08d71415e193113b3aa,"fix(Gmail): Allow shift-J, shift-K to select threads"
bengotow,2016-04-14 21:03:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f2329a169e683dbe4f4241d367f21c5dea374a6,6f2329a169e683dbe4f4241d367f21c5dea374a6,fix(view-on-github):  Add readme and fix bug
bengotow,2016-04-14 20:34:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/46cc73816ecff5423ecb7557fb768b171b4ccbe9,46cc73816ecff5423ecb7557fb768b171b4ccbe9,fix(star): Change action from Star All => Star #1927
bengotow,2016-04-14 19:29:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/67d28d4e592b36794163c24867df8b35e75587c9,67d28d4e592b36794163c24867df8b35e75587c9,fix(tray): Don't recreate tray / change image unnecessarily
bengotow,2016-04-14 18:57:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/e134483d75b1885a389515978ed70bc3c94a14a0,e134483d75b1885a389515978ed70bc3c94a14a0,"fix(lists): Commented out during testing, landed accidentally"
bengotow,2016-04-13 23:21:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6abf801d5ad8776f981653a0fb3045edf5e3718,a6abf801d5ad8776f981653a0fb3045edf5e3718,💄(scheduler): Would you like => I'd like
dregitsky,2016-04-14 00:41:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0fbdf7469cb04eeeb7e66968b0c2c80de984ad7,b0fbdf7469cb04eeeb7e66968b0c2c80de984ad7,fix(onboarding): Add missing return statement when changing endpoints
dregitsky,2016-04-13 23:13:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/d098c966532beeb9c96a4f464b46a3beb1d7fe4e,d098c966532beeb9c96a4f464b46a3beb1d7fe4e,fix(onboarding): Change error notification for endpoint changes
bengotow,2016-04-13 23:08:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c48464691b1c36e628f301a5748c0f7916537f5,5c48464691b1c36e628f301a5748c0f7916537f5,fix(search-bar): Apparently we were not providing keys
bengotow,2016-04-13 22:35:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe171a0c8c8ec485932619b5f57f064d75ddd762,fe171a0c8c8ec485932619b5f57f064d75ddd762,fix(require): Move more requires to new electron format
bengotow,2016-04-13 21:47:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e2be2d07606c0e8a7c9702bd932afd00c7b3aff,8e2be2d07606c0e8a7c9702bd932afd00c7b3aff,fix(empty): Use a much faster query for empty perspective
bengotow,2016-04-13 20:41:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7fbeb015786a14169a303968c973b3211032580,a7fbeb015786a14169a303968c973b3211032580,"fix(swipe): Cache isEnabled: false, fix scrolling in Trash"
bengotow,2016-04-13 20:40:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdfa426ecfa2d5f279942f0c2327a242f4719c0f,bdfa426ecfa2d5f279942f0c2327a242f4719c0f,fix(search): Cannot remove items from search (Sentry 30318)
dregitsky,2016-04-13 19:29:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf4cad4cbd1ccca85202815ead5849525f45d8c6,cf4cad4cbd1ccca85202815ead5849525f45d8c6,"fix(api-error): Fix retrieval of `error` field, used for endpoint updates"
mbilker,2016-04-13 17:29:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbc8a66b03bca5b168667120c3498a9e48063591,fbc8a66b03bca5b168667120c3498a9e48063591,fix(specs): handle Electron 0.37 remote method calls (#1943)
bengotow,2016-04-13 01:42:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/217af8d77ca1147950bd7bf60ccf4af955fca851,217af8d77ca1147950bd7bf60ccf4af955fca851,bump(electron): 0.36.7 => 0.37.5
koenpunt,2016-04-13 01:11:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/edc4f52da848fb9d70f7eb28b16397f67c5e2e1f,edc4f52da848fb9d70f7eb28b16397f67c5e2e1f,"Open links in background when ⌘ key is pressed (#1637)

When you hold down the meta key (⌘), and click on a link in a message,
the target application will not activate, so N1 will stay in the
foreground.
Electron only supports this for OS X"
mbilker,2016-04-13 01:09:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e5f75d8e0999ae689fdb685888f6641300fe2e9,8e5f75d8e0999ae689fdb685888f6641300fe2e9,"fix(imports): switch to Electron's require('electron') (#1907)

* fix(imports): switch to Electron's require('electron')

Electron in 0.37.5 phases out the usage of `require('built-in-module')`
in favor of `require('electron').builtInModule`. This commit corrects usage in
some cases that cause N1 to not start under Electron 0.37.5.

* fix(specs): use new Electron remote import"
mbilker,2016-04-13 01:08:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf3422de8d201bdc7d730b0ca169bb639c065974,cf3422de8d201bdc7d730b0ca169bb639c065974,fix(plugins): expose react-addons-test-utils for spec testing (#1925)
bengotow,2016-04-13 00:30:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/c460a4f2a485fb308194c3db6954f5ad1ea66764,c460a4f2a485fb308194c3db6954f5ad1ea66764,"perf(require): Don't assume `require` is free, cache deferred imports"
bengotow,2016-04-12 23:58:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f396d9eddb7937aa3f2d15aa9cb65e502bdb1c6e,f396d9eddb7937aa3f2d15aa9cb65e502bdb1c6e,bump(react) 0.14.7 => 15.0.1
jackiehluo,2016-04-12 21:51:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/4cabab5d2af66a303fce387b9c86a56f77261336,4cabab5d2af66a303fce387b9c86a56f77261336,fix(composer-emoji): Fix calculation for category positioning
bengotow,2016-04-12 21:46:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/d159e1037d8fc1322c3c06d560089b20f9466451,d159e1037d8fc1322c3c06d560089b20f9466451,fix(emoji): Improve variable names / diff feedback
bengotow,2016-04-12 21:43:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/21a6aff99d3fc2393b9f74a79d5be034e528ee4d,21a6aff99d3fc2393b9f74a79d5be034e528ee4d,changelog: 0.4.25 release notes
bengotow,2016-04-12 21:37:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/f01cb6365f94f7c52bcaf73288f77978a08cd84a,f01cb6365f94f7c52bcaf73288f77978a08cd84a,fix(emoji): Don't allow emoji images to be dragged into attachments
bengotow,2016-04-12 20:57:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/8613921a55a5e2844f0553e8cf36055a7d2f66d0,8613921a55a5e2844f0553e8cf36055a7d2f66d0,"fix(emoji): Re-use img tag to avoid running out of file descriptors

Summary:
On my machine the new emoji picker was causing ""too many open file descriptor""
errors. I think that this was because it was creating 1300 image tags in 50msec.

I refactored this code so that it uses a single image tag and only loads one image
at a time. This could make it slower on some people's machines, but eliminates the
possibility of it breaking the app!

Test Plan: Run tests

Reviewers: jackie

Differential Revision: https://phab.nylas.com/D2878"
bengotow,2016-04-12 19:03:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/4656fe21d7fc9f1c5de476ade9b1610312022030,4656fe21d7fc9f1c5de476ade9b1610312022030,"fix(metadata): Add missing joinOnField declaration, assertion"
bengotow,2016-04-12 18:48:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/8be564cbfbf9e193cac79cf515dce9bd60882670,8be564cbfbf9e193cac79cf515dce9bd60882670,fix(account-store): Allow updateAccount in all windows
bengotow,2016-04-12 18:34:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/96ddd17fc47799dd616dbac5c3de028f9675e7c4,96ddd17fc47799dd616dbac5c3de028f9675e7c4,"shrink(emoji): TinyPNG emoji, convert to 32x32"
jackiehluo,2016-04-12 17:43:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d5fd7510ce3d4c41052b0c86e3a739f86aff58a,3d5fd7510ce3d4c41052b0c86e3a739f86aff58a,lint(utils): Fix linter issue
jackiehluo,2016-04-12 17:27:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/1039ad2c34a1213d5eca421fb674f1ce3f9626df,1039ad2c34a1213d5eca421fb674f1ce3f9626df,"fix(composer-emoji): Switch to characters to PNGs (#1898)

* Add PNGs and JSON file

* Add Apple and Twitter emoji

* Fix linter issues and tests

* Get correct path from EmojiStore

* Add emoji regex and update extensions

* Remove the scary regex"
bengotow,2016-04-12 16:50:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/f53ba0fbbe822ec0b6f5ff29568deb858e565d96,f53ba0fbbe822ec0b6f5ff29568deb858e565d96,bump(version): 0.4.25
bengotow,2016-04-12 16:50:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/436107844d490e329bbf47be86117f2ecbb6910f,436107844d490e329bbf47be86117f2ecbb6910f,"perf(db): Use same subselect for ""related emails"" queries"
emorikawa,2016-04-12 02:34:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b03a80d0294960bb90c646589e59d048b56214c,7b03a80d0294960bb90c646589e59d048b56214c,"feat(scheduler): add an event preview when sending a meeting request

Summary: add event preview

Test Plan: manual

Reviewers: bengotow, juan

Differential Revision: https://phab.nylas.com/D2874"
bengotow,2016-04-12 01:59:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3a872b0c745fa7ae3204775ae17c64a00bf03b2,f3a872b0c745fa7ae3204775ae17c64a00bf03b2,rm(log): Fix bad log statement
bengotow,2016-04-12 01:52:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c69b192881bcd6973506cbd9dea8d6100ca3629a,c69b192881bcd6973506cbd9dea8d6100ca3629a,"fix(scheduler): Don't cast durations to integers, fix 1.5, 2.5 hour blocks"
bengotow,2016-04-12 01:42:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f75cccc0f0e0b83c3662620345ac4ef7d3a7e28,5f75cccc0f0e0b83c3662620345ac4ef7d3a7e28,fix(scheduler): End should work even if the mouse isn't over a time
bengotow,2016-04-12 01:33:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/938e9b809367cf35f257b6c5e647800e9d7e0345,938e9b809367cf35f257b6c5e647800e9d7e0345,fix(scheduler): Make popover width even so it's not blurry
bengotow,2016-04-12 01:20:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5e5a7ef4c854549ba27d91720f086739a9a0f11,f5e5a7ef4c854549ba27d91720f086739a9a0f11,fix(empty): Add padding to empty message
bengotow,2016-04-12 01:07:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba9d915f00511b6ba9f1fe7524aa3a364d9d4471,ba9d915f00511b6ba9f1fe7524aa3a364d9d4471,fix(scheduling): Enable by default in new installations
bengotow,2016-04-12 00:33:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/63343adeac7ae1efa52e917fa7425a110d9e771e,63343adeac7ae1efa52e917fa7425a110d9e771e,"fix(sync): Handle ""Invalid cursor"" scenario by 💣🔥 away the cache"
emorikawa,2016-04-11 23:33:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/2855c3695f502d83039af35772dfa6198b77b36f,2855c3695f502d83039af35772dfa6198b77b36f,fix(scheduler): minor style tweaks to scheduler popover
bengotow,2016-04-11 23:17:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/66e86d8f80af7caad7f6efc68310f3a31c918fdc,66e86d8f80af7caad7f6efc68310f3a31c918fdc,fix(timestamps): Don't crash on null times #1929
jstejada,2016-04-11 23:12:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/232f2cbbf5aeea07a167670f46db893f3d1c6aa1,232f2cbbf5aeea07a167670f46db893f3d1c6aa1,"Revert ""fix(build): Actually make verbose""

This reverts commit 0fd5659aad83571af80273bcf8f0c1c33861d287."
jstejada,2016-04-11 22:51:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ada532336f3288fb216cd4b68de362ef04624fd,0ada532336f3288fb216cd4b68de362ef04624fd,fix(build): Lock spellchecker to 3.2.3
jstejada,2016-04-11 22:40:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fd5659aad83571af80273bcf8f0c1c33861d287,0fd5659aad83571af80273bcf8f0c1c33861d287,fix(build): Actually make verbose
emorikawa,2016-04-11 20:16:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/3658f0e0dac09150e755d4fb19c70ed2a1480925,3658f0e0dac09150e755d4fb19c70ed2a1480925,"fix(scheduler): fix jumping calendar and add popover

fix(scheduler): fix jumping calendar and add popover

Summary: feat(scheduler): improved calendar picker

Test Plan: manual

Reviewers: bengotow, juan

Differential Revision: https://phab.nylas.com/D2873"
jstejada,2016-04-11 22:19:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/319667342d4f47689b04a4a8f1d626f68595b399,319667342d4f47689b04a4a8f1d626f68595b399,update(build): Add verbose flag
bengotow,2016-04-11 21:58:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/cec811ae3624e0226c78c816339359c1ca8e1268,cec811ae3624e0226c78c816339359c1ca8e1268,fix(schedule): Move z-indexes to prevent dropdown layering issue
bengotow,2016-04-11 21:32:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/25349295dc80342d0dba07d2f8c98399cc66a440,25349295dc80342d0dba07d2f8c98399cc66a440,"fix(schedule): Use draft session to udpate metadata, always save in syncback"
bengotow,2016-04-11 20:51:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebc0072bfc7ec5744be15ccd823b2b29442a64ae,ebc0072bfc7ec5744be15ccd823b2b29442a64ae,fix(db): Don't blow up over table SCANs with covering indexes
bengotow,2016-04-11 20:51:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7bfb2aceb155ac03c3298116bad9681b799b890,f7bfb2aceb155ac03c3298116bad9681b799b890,fix(db): Counts no longer require Thread table join
bengotow,2016-04-11 20:29:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/b75ed6f920eff79ee853c0711f79dcda2de0a0dd,b75ed6f920eff79ee853c0711f79dcda2de0a0dd,"perf(db): Use subselect to improve thread list query perf (53%!)

Summary:
- Use a sub-select query with much better performance to display the thread list
- Perform analyze on tables after launch

The new query is:

```
SELECT `Thread`.`data` FROM `Thread` WHERE `Thread`.`id` IN (SELECT `id` FROM `ThreadCategory` AS `M26` WHERE `M26`.`value` IN ('9m9ks71k06n5rmx82kgues09p','9s9k25q6j1krjgpkovbcjm7d','13b7ufruoymvih07ki0uahlto','dtmhlzz6phr47zp512knhjgf8','16dvjb84bszfh15kgfrjj37i3','aclwmgncdqjfibp51bvgbeik','17qad7jhbp6tozog3klm5zagt','4x4bkbawiq825u4eu3aus8tll','7axr9f5f1lzpwm2rw2ghkirhq','dsnn660af0pmou2gg3nstga8a','361qr5rva1ieby2r0ec3sn0bm','10fyvba7pjyjgeyr5i65i1zri') AND `M26`.`in_all_mail` = 1  ORDER BY `M26`.`last_message_received_timestamp` DESC LIMIT 200 OFFSET 0) ORDER BY `Thread`.`last_message_received_timestamp` DESC;
`
0|0|0|SEARCH TABLE Thread USING INDEX Thread_id (id=?)
0|0|0|EXECUTE LIST SUBQUERY 1
1|0|0|SCAN TABLE Thread-Category AS M26 USING COVERING INDEX ThreadFancyIndex
1|0|0|EXECUTE LIST SUBQUERY 2
0|0|0|USE TEMP B-TREE FOR (only on 200 result items)
```

Which is twice as performant as:
```
SELECT `Thread`.`data` FROM `Thread` INNER JOIN `ThreadCategory` AS `M26` ON `M26`.`id` = `Thread`.`id` WHERE `M26`.`value` IN ('9m9ks71k06n5rmx82kgues09p','9s9k25q6j1krjgpkovbcjm7d','13b7ufruoymvih07ki0uahlto','dtmhlzz6phr47zp512knhjgf8','16dvjb84bszfh15kgfrjj37i3','aclwmgncdqjfibp51bvgbeik','17qad7jhbp6tozog3klm5zagt','4x4bkbawiq825u4eu3aus8tll','7axr9f5f1lzpwm2rw2ghkirhq','361qr5rva1ieby2r0ec3sn0bm','10fyvba7pjyjgeyr5i65i1zri') AND `M26`.`in_all_mail` = 1  ORDER BY `M26`.`last_message_received_timestamp` DESC LIMIT 200 OFFSET 0;

0|0|1|SCAN TABLE Thread-Category AS M26 USING COVERING INDEX ThreadFancyIndex
0|0|0|EXECUTE LIST SUBQUERY 1
0|1|0|SEARCH TABLE Thread USING INDEX Thread_id (id=?)
```

Test Plan: Broken!

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2869"
jstejada,2016-04-11 20:15:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/ded1b657d33a106250a08a6439a665b11e3b7eba,ded1b657d33a106250a08a6439a665b11e3b7eba,"fix(thread-list): Prevent empty state from showing when loading list

- EmptyState should only be displayed when the thread-list is actually
empty, not while it is being loaded
- Update ObservableListDataSource to have a state of loaded only when
the requested range is > 0, i.e. when we are actually requesting threads"
bengotow,2016-04-11 19:01:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e4eea2fa268b5313ef342a740e92d5f58f4b21f,5e4eea2fa268b5313ef342a740e92d5f58f4b21f,bump(version): 0.4.24
bengotow,2016-04-11 17:48:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/7183918ab2ac8e10ead274e6e470c430829508ae,7183918ab2ac8e10ead274e6e470c430829508ae,fix(auth): Fix missing var. This is why we should go ES6!
jstejada,2016-04-11 14:59:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9517101d5306d4101353f13030b66357a9c28d1,d9517101d5306d4101353f13030b66357a9c28d1,fix(perspective): Fix specs for FocusedPerspectiveStore
bengotow,2016-04-11 07:34:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/92268ad099005454362a13aac7a69b3a7006f25e,92268ad099005454362a13aac7a69b3a7006f25e,fix(initial-sync): Fix sync sidebar showing all the time
bengotow,2016-04-11 07:09:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a7272eae8d785742fb0b1c02174955a2616ee39,7a7272eae8d785742fb0b1c02174955a2616ee39,"fix(perspective): Just wait for first CategoryStore trigger to load perspective

The FocusedPerspectiveStore wants to restore a saved current perspective from disk. It needs to wait for the categories to be ready, but it doesn't necessarily need to wait for them to be synced, because it's unlikely unsynced categories are in the saved perspective and it just falls back to unified inbox.

I think there was some dead code in `_onCategoryStoreChanged` that initialized the perspective also, so I merged the two"
bengotow,2016-04-11 00:31:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca9162a2d5206b16cec7a410f70af1c6d63c23b4,ca9162a2d5206b16cec7a410f70af1c6d63c23b4,bump(version): 0.4.23
jstejada,2016-04-10 23:37:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/e160d05d362ea6a0c58ad0cc28287d6733881446,e160d05d362ea6a0c58ad0cc28287d6733881446,fix(deps): Add moment-round
jstejada,2016-04-10 22:58:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/aef785eb12da4bc0aae5db26ea7216d329baa639,aef785eb12da4bc0aae5db26ea7216d329baa639,"feat(thread-search): Add spinner to indicate search in progress

Summary:
- This diff also restructures the search package in a few ways:
  - Rename package to `thread-search` instead of `search-bar`
  - Move SearchQuerySubscription and SearchMailboxPerspective inside
  package. This allows SearchQuerySubscription to have access to
  SearchActions in a clean way and keeps all of the search related code
  in 1 package
  - Remove SearchMailboxPerspetcive from mailbox-perspective.coffee
- Adds temporary spinner while we get a new design for it

Test Plan: - TODO

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2868"
emorikawa,2016-04-10 15:44:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/286664341b2ac5e3e6d4bab9776e55d0425e2b08,286664341b2ac5e3e6d4bab9776e55d0425e2b08,fix(scheduler): use proper start and end time formats for when block
emorikawa,2016-04-10 02:07:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/0cc3f32d8eea75b01119314f77aa02aa84e5a36b,0cc3f32d8eea75b01119314f77aa02aa84e5a36b,fix(spec): fix bad ref
emorikawa,2016-04-10 01:47:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/68bb96e83f3a508314739e42c79cbb453c46e9f7,68bb96e83f3a508314739e42c79cbb453c46e9f7,fix(scheduler): properly formatting when objects for post
emorikawa,2016-04-10 01:25:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/16e133139315cd975bf6b8ee4151e2dac9f33381,16e133139315cd975bf6b8ee4151e2dac9f33381,fix(scheduler): properly set proposals
emorikawa,2016-04-10 01:19:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1b5a232734296dad9526730b1723896350ff025,a1b5a232734296dad9526730b1723896350ff025,"refactor(scheduler): move all event data into metadata

Summary: Moved events into metadata. Removed a lot of code

Test Plan: todo

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2866"
bengotow,2016-04-08 23:03:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/f316c06f7a655edf56bcc03dd6dc41199d8d2399,f316c06f7a655edf56bcc03dd6dc41199d8d2399,fix(specs): *
jstejada,2016-04-08 21:10:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/b10942a4b3cec205260d029f2c464c021cd7b40f,b10942a4b3cec205260d029f2c464c021cd7b40f,"update(search): Add search usage reporting + other fixes

Summary:
- Converts SearchQuerySubscription to ES6 to fix method overriding for
  `removeCallback`
- Reports different usage metrics for search
- Removes unecessary data source listener iniside ThreadListStore:
  - This listener focused the first thread on the list, which is
  actually unwanted (#1461)
  - It prevented QuerySubscriptions from being disposed promptly because
  of the remaining listener. They qould only be disposed until the
  subscription triggered once, which is not actually desired behavior
  (e.g. for SearchQuerySubscription)

Test Plan: - Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2864"
bengotow,2016-04-08 20:52:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6e24ce9486aa61ad60e8c185b3feae6e9c7f7ac,c6e24ce9486aa61ad60e8c185b3feae6e9c7f7ac,"fix(sync-errors): Improve display of sync errors and offline status

- Make the retry interval go 2 sec, 3.4s, 6 sec...
- Only show the connection status bar if the interval is > 5 seconds, in case the error was temporary.
- Do not show sync errors in the sidebar. The only available action is ""Try Again"", and we try again on our own. The error is frustrating and the user can't do anything about it anyway."
dregitsky,2016-04-08 19:00:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/2edc2e5c32237d6a4cd8e3e4cb031ff0b90f88d8,2edc2e5c32237d6a4cd8e3e4cb031ff0b90f88d8,"feat(auth): Provide reauth param to handle changed server endpoints

Summary:
Notify the backend when auth is a reauth of an existing account by
providing the `accountId`. This lets the backend differentiate between
a new auth (where a new account will be created if the server endpoints
don't match) and a re-auth (where the auth will fail on server endpoint
mismatch, prompting the user).

Test Plan: manual

Reviewers: juan, evan, bengotow

Reviewed By: bengotow

Subscribers: mg, spang, kav-ya

Differential Revision: https://phab.nylas.com/D2833"
jstejada,2016-04-08 18:46:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d96fb227f7a00e612b09be96ed045b74a6854f4,5d96fb227f7a00e612b09be96ed045b74a6854f4,"feat(search-streaming): Add support for new search streaming api

Summary:
- This diff includes code to connect to the new search stremaming API. It converts the old NylasLongConnection into ES6 without any of the cursor management and includes it as part of NylasAPI
- Removes current search error handling because of the new error semantics of the api. If no results are returned a message will be displayed to the user indicating that
- WIP TODO:
  - Replace old NylasLongConnection class with new one and add test coverage.
  I did not replace our  current streaming code with the new ES6 code yet because
  the old code doesn't have test coverage and I don't want to introduce any
  (subtle) regressions to a vital piece of the app.
  - Potentially replace with JSONStreaming library or new http library
  (e.g. fetch)

- Note that Streaming API is not in production yet and only works for Gmail and IMAP (no EAS)

Test Plan: -TODO, manual

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2859"
bengotow,2016-04-08 01:02:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d00837c4a1b24a7958460c4d464d6ad26b6b192,3d00837c4a1b24a7958460c4d464d6ad26b6b192,fix(autoscale): Apply vw when width and height are not present
jstejada,2016-04-07 22:31:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/d75e7e7facf075e953d056622a46c5acf7585877,d75e7e7facf075e953d056622a46c5acf7585877,fix(search): Escape single quotes correctly
emorikawa,2016-04-07 19:15:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/6bc42a10dc77e7ffefc238ac4b104023fdf4668b,6bc42a10dc77e7ffefc238ac4b104023fdf4668b,"feat(scheduler): better time picker

fix(scheduler): time picker fixed"
jackiehluo,2016-04-07 21:32:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/199a900ac158051aa0c4e78c0df9790dd8f010aa,199a900ac158051aa0c4e78c0df9790dd8f010aa,:art:(preferences): Change spacing and button sizes
bengotow,2016-04-07 21:14:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/08792f00bd94e8da4a3d40f3b23b278765501ec7,08792f00bd94e8da4a3d40f3b23b278765501ec7,"💄(prefs): Shrink top tabs better, add min-widths"
bengotow,2016-04-07 20:43:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/37add7741e2f5e6eaabacd5dd46df4de405ad3a2,37add7741e2f5e6eaabacd5dd46df4de405ad3a2,bump(version): 0.4.22
jackiehluo,2016-04-07 21:12:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc2b178d6e42216d50e918fdddfbbbf6c06c8710,fc2b178d6e42216d50e918fdddfbbbf6c06c8710,:art:(preferences): Adjust textbox styles for signatures and templates
emorikawa,2016-04-07 19:18:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/e61424b7a52fa362cfd95cb65739f7897abf5440,e61424b7a52fa362cfd95cb65739f7897abf5440,fix(tracking): uid uses draftClientId
jstejada,2016-04-07 16:43:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/76ccab606e7543fb0e86a9588995c29e81d82211,76ccab606e7543fb0e86a9588995c29e81d82211,fix(search): Escape search query properly
jstejada,2016-04-07 16:35:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0d99153180b4fb6ea14375f6d639c9eaf020119,c0d99153180b4fb6ea14375f6d639c9eaf020119,fix(contact-sidebar): Don't render <select> when no contacts available
jstejada,2016-04-07 16:55:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2a3e8af3cc23f78d6f312db9fffdcc223f963f4,a2a3e8af3cc23f78d6f312db9fffdcc223f963f4,"feat(thread-search): Make thread search indexing smarter

Summary:
- When accounts change, make sure sync has completed, and only add or
remove threads from the index based on accounts that were added or
removed instead of rebuilding the entire index from scratch

- When thread is updated, make sure to only update the index for threads
that belong to accounts that are not currently in the sync process

- Add more logging and docs

Test Plan: TODO

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2852"
bengotow,2016-04-06 23:15:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba0251fd7ec9ec6d8365c459acd42ce15e171b65,ba0251fd7ec9ec6d8365c459acd42ce15e171b65,lint(*): Fix linter errors from QA fixes
bengotow,2016-04-06 21:51:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/4329f53ce8f946602cee40ffb4d2a39030050b40,4329f53ce8f946602cee40ffb4d2a39030050b40,fix(fwd): Do not mention Bcc'd recipeints in forward headers #1873
bengotow,2016-04-06 21:29:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/15eafa7c553409bd5c09bef77b985d571ae47909,15eafa7c553409bd5c09bef77b985d571ae47909,fix(autolinker): Additional test case from #1863
bengotow,2016-04-06 21:16:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/f98fedadc01b771bf78ee7d67c845ced6619f615,f98fedadc01b771bf78ee7d67c845ced6619f615,"fix(autolinker): Add test cases, .ly, url hash chars"
emorikawa,2016-04-06 21:09:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/25b896ccbbff44b745a7c8953dd8609f62d8b7ed,25b896ccbbff44b745a7c8953dd8609f62d8b7ed,fix(scheduler): can scheduler on 30 min intervals
emorikawa,2016-04-06 20:56:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/5311ab6b34ec1f6e6944f506464c6123788a11a4,5311ab6b34ec1f6e6944f506464c6123788a11a4,"fix(scheduler): removes proposals from metadata when removing event

Also add <tbody> tags"
emorikawa,2016-04-06 20:52:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/5140cf5f07c2f99ca707eb807f3aa53d64879040,5140cf5f07c2f99ca707eb807f3aa53d64879040,fix(scheduler): can remove proposed times
emorikawa,2016-04-06 20:03:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/0d4fe7e5e52e7b9bdfaac0e158e1fb18e6b44699,0d4fe7e5e52e7b9bdfaac0e158e1fb18e6b44699,fix(scheduler): fix time bar scroll height
emorikawa,2016-04-06 19:16:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/0aa8aeb70ffa5abd634887fd657096c3402d7439,0aa8aeb70ffa5abd634887fd657096c3402d7439,fix(calendar): today correctly jumps to this week
emorikawa,2016-04-06 19:08:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b2d8203168306e6d7d02f26c9c4654e8c8832c1,6b2d8203168306e6d7d02f26c9c4654e8c8832c1,fix(scheduler): fix top banner
bengotow,2016-04-06 20:51:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/2226e85e657b69b30d15c396a2aedbd7c47cedcd,2226e85e657b69b30d15c396a2aedbd7c47cedcd,"fix(cc/bcc): Make targets bigger, wait longer before declaring focus left"
bengotow,2016-04-06 20:14:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/db79e4d48a6760af1e7fe299e56b61c472f84de1,db79e4d48a6760af1e7fe299e56b61c472f84de1,"fix(composer): Do not steal focus when it is in other components

This is to fix a bug where changing the ""from"" address to an address with a different signature caused the composer to become focused, hiding the from field."
jackiehluo,2016-04-06 20:08:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/53fb45aec5be1dc8954f2e80d667e744bc01310e,53fb45aec5be1dc8954f2e80d667e744bc01310e,:art:(preferences): Update styling
bengotow,2016-04-06 19:35:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c2ee75026cff16402331707c9692313ac89ba69,5c2ee75026cff16402331707c9692313ac89ba69,"fix(*): Minor CSS fixes, open tracking fix when only message is draft"
bengotow,2016-04-06 18:44:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f044c22bcc2d2534877a54b16cf9c03cf7bd421,5f044c22bcc2d2534877a54b16cf9c03cf7bd421,fix(error): Show actual API domain in connection error bar
jackiehluo,2016-04-06 19:00:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2dbd1a0914ddb06082321b80e7b12049c97ddc40,2dbd1a0914ddb06082321b80e7b12049c97ddc40,fix(composer-emoji): Fix tabs to scroll correctly
emorikawa,2016-04-06 18:36:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b3d773c842bf7c38954408fb908684b63901533,7b3d773c842bf7c38954408fb908684b63901533,fix(schedule): extracted to own SyncbackDraftEventsTask
bengotow,2016-04-06 02:17:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/0086142a883ee13f9b1503ca24b2abe1d1bf50b3,0086142a883ee13f9b1503ca24b2abe1d1bf50b3,bump(version): 0.4.21 beta
bengotow,2016-04-06 02:16:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/1476764d0007448d1f8c196d1e97f4fc6a9d3088,1476764d0007448d1f8c196d1e97f4fc6a9d3088,"fix(mail-rules): Only process inbox, never skip threads

Summary:
- Disable processing button while already processing
- Only process mail in the inbox in bulk reprocess task
- Advance through mail using ""after X"" rather than ""offset X"", avoiding the issue where mail can be deleted as you're advancing.

Test Plan: Run existing tests

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2847"
bengotow,2016-04-06 02:03:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/a84b95359c9df84c1200b44fad55ae8877d39334,a84b95359c9df84c1200b44fad55ae8877d39334,fix(db-spec): Accompanying spec changes
emorikawa,2016-04-06 01:42:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/9eea7f52b91d082c2b43f0ce1857a49ecb4f590d,9eea7f52b91d082c2b43f0ce1857a49ecb4f590d,"feat(scheduler): add new date & time picker

Summary: Adds a date and time picker to the new event creator

Test Plan: todo

Reviewers: bengotow, juan

Reviewed By: bengotow, juan

Differential Revision: https://phab.nylas.com/D2842"
bengotow,2016-04-06 01:32:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/f6b24c77ce6733710c6a45ab06e346d865d150f6,f6b24c77ce6733710c6a45ab06e346d865d150f6,"fix(db): Always refresh entire range after unknown changes

Summary: When changes can't be accurately applied to a result set, always refresh the entire range, not just the missing range. This ensures that additional changes being applied while our query is in flight can't cause the result set to include the same item twice.

Test Plan: Run tests

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2846"
jstejada,2016-04-06 00:58:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/b03e560e300f85527e681d018957ee76678e01da,b03e560e300f85527e681d018957ee76678e01da,"fix(drag): Pass correct drag coordinates from event

- Don't use magic event variable without declaring it"
bengotow,2016-04-05 23:15:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0768d337d5b78cd889499df619ba27dd4cac365,b0768d337d5b78cd889499df619ba27dd4cac365,perf(*): Make AccountStore / ContactRankingStore less noisy
jstejada,2016-04-05 22:19:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/d047cae9ba11dada7ff64a2cc9f14146a07ef77a,d047cae9ba11dada7ff64a2cc9f14146a07ef77a,fix(scheduler): Fix moment-timezone require
emorikawa,2016-04-05 21:57:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/695c1e64f36159a1a53a3977f6d66a54e452213f,695c1e64f36159a1a53a3977f6d66a54e452213f,fix(scheduler): import from moment-timezone
jstejada,2016-04-05 21:53:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/a35d8605d295e61fc28029a5501febbc448dfab0,a35d8605d295e61fc28029a5501febbc448dfab0,fix(sync-status): Fix bug caught by specs
jstejada,2016-04-05 21:49:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc255873de87dea44bc0e9dff45d4700228085bf,fc255873de87dea44bc0e9dff45d4700228085bf,fix(react): Fix several warnings in missing imports
bengotow,2016-04-05 21:27:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/afd830435976cf68636f1de8756555ac5e4cf427,afd830435976cf68636f1de8756555ac5e4cf427,fix(quoted-text): Correctly update container height
bengotow,2016-04-05 21:13:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/e58014a4781697901090fc275562112b726af48a,e58014a4781697901090fc275562112b726af48a,fix(collapsed-participants): Resize in correct scenarios
jstejada,2016-04-05 21:03:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d2bf7bed5b66c9e143c3ebf4c88567e4912a707,7d2bf7bed5b66c9e143c3ebf4c88567e4912a707,"fix(sync-status): Actually fix sync status logic

- Must take into account that some accounts have `labels` and others
have `folders`"
jackiehluo,2016-04-05 20:43:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/cef7809bd64044c77ca1367d5db31fb06a22e745,cef7809bd64044c77ca1367d5db31fb06a22e745,fix(theme-picker): Reformat invalid class names
jstejada,2016-04-05 20:27:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb1f9409ef6331b2421a7873cb4a972334756ceb,eb1f9409ef6331b2421a7873cb4a972334756ceb,"fix(sync-status): Fix logic for checking sync status:

- Only check sync status keys that belong to actual models being synced
- Return false if state object is empty"
jstejada,2016-04-05 20:27:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/79e15e840822048a01ec9b9134aa5a62f5906c25,79e15e840822048a01ec9b9134aa5a62f5906c25,fix(thread-search): Correct typo
bengotow,2016-04-05 20:10:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/792c0e61f1debe51a6c9d33e3275b76a028dc9d9,792c0e61f1debe51a6c9d33e3275b76a028dc9d9,"fix(notifs): _.reject does not support dict, Sentry 26699"
bengotow,2016-04-05 19:27:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/e311f0cb61bb8e8dded133417b87b301afc1a25c,e311f0cb61bb8e8dded133417b87b301afc1a25c,fix(update): Initial autoupdate placeholder for linux
jstejada,2016-04-05 19:15:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/f08d59bca2dc66a88b5221229d29285c66814f7b,f08d59bca2dc66a88b5221229d29285c66814f7b,fix(warning): Add key to react component
jstejada,2016-04-05 19:14:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/b445f098541bae8df1732176353baf6234ee01a9,b445f098541bae8df1732176353baf6234ee01a9,fix(thread-search): Only rebuild index when # of accounts has changed
bengotow,2016-04-05 19:09:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca5caec97ec3ca8d2b4de78f2ad65363dd04c4b7,ca5caec97ec3ca8d2b4de78f2ad65363dd04c4b7,fix(from): Align from icon correctly
bengotow,2016-04-05 19:01:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/427a743b1854af70fed3e0dd9f1720cb6dd6bfee,427a743b1854af70fed3e0dd9f1720cb6dd6bfee,"fix(mail-rules): all ""on"" handlers need to be bound functions"
jstejada,2016-04-05 18:28:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/954ef4ce89e29f5c12c95b99e876ed2182048fcb,954ef4ce89e29f5c12c95b99e876ed2182048fcb,fix(prefs): Fix `this` binding in mail rules prefs page
jstejada,2016-04-05 18:13:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d8f3ec2b08ff41890973044610962c133aba698,2d8f3ec2b08ff41890973044610962c133aba698,fix(sync-status): Ignore keys that arent models when check sync status
bengotow,2016-04-05 01:21:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b4127bc4b3a5284af34f3ba0d59817b94328895,0b4127bc4b3a5284af34f3ba0d59817b94328895,"fix(composer): Show when rendered, send draft JSON to composer windows"
bengotow,2016-04-05 00:44:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/227f3345a01f6698153914cf87d3e153993881d1,227f3345a01f6698153914cf87d3e153993881d1,"fix(db): Remove `-` from table names, which was a bad idea"
bengotow,2016-04-05 00:26:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/17a629cf6a411434c4a6962f68ef5040817f2b5b,17a629cf6a411434c4a6962f68ef5040817f2b5b,bump(version): 0.4.20 beta
jstejada,2016-03-31 21:58:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a1aa6e9bb3e6914c279a313537b70b6b95682f5,8a1aa6e9bb3e6914c279a313537b70b6b95682f5,"feat(thread-search): Add client side search

Summary:
This diff includes several updates:
- Update sqlite version to use FTS5
- Adds new methods to DatabaseStore to create and update Search Indexes
- Currently indexing subject, participants, and thread message bodies or snippets if the body is not available
- Update initial sync to fetch 5000 message bodies per account
- Adds a new SearchMatcher
- Add new thread-search-index package to run in the worker window to
  init and keep thread search index up to date
- Converts Thread to ES6

TODO:
- Remove/Update suggestions dropdown
- Add tests

Test Plan: - TODO

Reviewers: evan, bengotow

Reviewed By: evan, bengotow

Differential Revision: https://phab.nylas.com/D2826"
bengotow,2016-04-05 00:12:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/79b365e930e13d893ca10eb0b45da10df27f779d,79b365e930e13d893ca10eb0b45da10df27f779d,fix(lint): Missing const breaking build
bengotow,2016-04-05 00:11:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3ede94423a03de7439c05885e4c2aa627a176b8,a3ede94423a03de7439c05885e4c2aa627a176b8,"feat(offline-status): Show a bar when not connected to the API

Summary:
The TaskQueue does it's own throttling and has it's own processQueue retry timeout, no need for longPollConnected

Remove dead code (OfflineError)

Rename long connection state to status so we don't ask for `state.state`

Remove long poll actions related to online/offline in favor of exposing connection state through NylasSyncStatusStore

Consoliate notifications and account-error-heaer into a single package and organize files into sidebar vs. header.

Update the DeveloperBarStore to query the sync status store for long poll statuses

Test Plan: All existing tests pass

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2835"
emorikawa,2016-04-04 23:06:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ea0c3b0787b987c6012f3852463721debfdf28f,2ea0c3b0787b987c6012f3852463721debfdf28f,fix(scheduler): add timezone & fix tabbing
bengotow,2016-04-04 22:22:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1c0a1615d39e5dd630611dd13b73370cf3842ef,f1c0a1615d39e5dd630611dd13b73370cf3842ef,"fix(focus): Remove focusedField in favor of imperative focus, break apart ComposerView

Summary:
- Removes controlled focus in the composer!
  - No React components ever perfom focus in lifecycle methods. Never again.
  - A new `Utils.schedule({action, after, timeout})` helper makes it easy to say ""setState or load draft, etc. and then focus""
  - The DraftStore issues a focusDraft action after creating a draft, which causes the MessageList to focus and scroll to the desired composer, which itself decides which field to focus.
  - The MessageList never focuses anything automatically.
- Refactors ComposerView apart — ComposerHeader handles all top fields, DraftSessionContainer handles draft session initialization and exposes props to ComposerView
  - ComposerHeader now uses a KeyCommandRegion (with focusIn and focusOut) to do the expanding and collapsing of the participants fields. May rename that container very soon.
- Removes all CommandRegistry handling of tab and shift-tab. Unless you preventDefault, the browser does it's thing.
- Removes all tabIndexes greater than 1. This is an anti-pattern—assigning everything a tabIndex of 0 tells the browser to move between them based on their order in the DOM, and is almost always what you want.
- Adds ""TabGroupRegion"" which allows you to create a tab/shift-tabbing group, (so tabbing does not leave the active composer). Can't believe this isn't a browser feature.

Todos:
- Occasionally, clicking out of the composer contenteditable requires two clicks. This is because atomicEdit is restoring selection within the contenteditable and breaking blur.
- Because the ComposerView does not render until it has a draft, we're back to it being white in popout composers for a brief moment. We will fix this another way - all the ""return unless draft"" statements were untenable.
- Clicking a row in the thread list no longer shifts focus to the message list and focuses the last draft. This will be restored soon.

Test Plan: Broken

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D2814"
emorikawa,2016-04-04 22:20:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d9d7ff0f8e7b4aa63ec4ce86d0b253e7d4e7fff,7d9d7ff0f8e7b4aa63ec4ce86d0b253e7d4e7fff,fix(console): remove log
emorikawa,2016-04-04 22:17:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/902526eafc2da2fce410624587fdb09045bb08fb,902526eafc2da2fce410624587fdb09045bb08fb,fix(react): replace with ReactDOM
emorikawa,2016-04-04 22:05:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/39c37e10b9a274678760ea74939d2f9ea110b5aa,39c37e10b9a274678760ea74939d2f9ea110b5aa,"feat(calendar): add week view for quick scheduler

Summary: New Calendar

Test Plan: TODO

Reviewers: drew, juan, bengotow

Reviewed By: bengotow

Subscribers: jackie

Differential Revision: https://phab.nylas.com/D2767"
jackiehluo,2016-04-04 18:03:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/3cf2570561373209ec64cc3a197f3aa0ada2ce66,3cf2570561373209ec64cc3a197f3aa0ada2ce66,fix(composer-emoji): Replace images with Unicode characters properly
jackiehluo,2016-04-02 20:40:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a1c068c297c3f762f1816b289e8a55c6b7f2fac,4a1c068c297c3f762f1816b289e8a55c6b7f2fac,"Merge pull request #1861 from jamiewilson/darkside

(darkside) correcting window buttons, adding input focus"
jamiewilson,2016-04-02 20:02:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/57ee77c982967f1c2998b41f46d633d2d392e79a,57ee77c982967f1c2998b41f46d633d2d392e79a,"correcting size of window contol buttons
This addresses issue #1687 on nylas/n1"
jackiehluo,2016-04-01 21:50:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/056cabb7f1a39bf18d5a05198414612966913db3,056cabb7f1a39bf18d5a05198414612966913db3,:art:(preferences): Darken tab icons during click
bengotow,2016-04-01 21:49:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/e12d901e627a75eb8755e9e01ee0fec92373a83d,e12d901e627a75eb8755e9e01ee0fec92373a83d,fix(thread-list): Constrain details width to ensure attachment icon visible. #1858
jackiehluo,2016-04-01 21:30:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/df7cd90c4a4a0c846dd30f3e3d2096fe70d3258b,df7cd90c4a4a0c846dd30f3e3d2096fe70d3258b,fix(templates): Convert to ES6 and allow creation of new templates
jackiehluo,2016-03-31 22:52:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/45ef25fc028058138ecd026bfef1dcf3dfb045df,45ef25fc028058138ecd026bfef1dcf3dfb045df,":art:(preferences): Updates preferences to look prettier

Summary:
Adds new redesigned preferences with horizontal tab bar and refactored code.

Converts Preferences, Plugins, and a few components to ES6.

Test Plan: Tested locally.

Reviewers: evan, bengotow

Reviewed By: bengotow

Subscribers: juan

Differential Revision: https://phab.nylas.com/D2818"
bengotow,2016-04-01 18:23:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1a06e6bcd45db8c083825d6d3fe324f84f96138,c1a06e6bcd45db8c083825d6d3fe324f84f96138,fix(mailto): Never launch the default app to handle mailto
jackiehluo,2016-04-01 01:14:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/280e77c7968b8e1d04c154c928cc9f8b7ac3e2ec,280e77c7968b8e1d04c154c928cc9f8b7ac3e2ec,spec(composer-emoji): Fix specs for popover
bengotow,2016-04-01 00:08:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/d47d8deda0e8869905877f00b428e2ea326be240,d47d8deda0e8869905877f00b428e2ea326be240,Merge branch 'pr/1797'
jamiehenson,2016-03-19 20:35:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/1499e4f1add156b0fcca6c51f749537ea71ff3f2,1499e4f1add156b0fcca6c51f749537ea71ff3f2,Update README.md
bengotow,2016-03-31 23:36:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/c836310fac42296be48b57870b3d3c0d75aced2b,c836310fac42296be48b57870b3d3c0d75aced2b,fix(autolinker): Update regexp to handle reported failure cases
jstejada,2016-03-31 23:10:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/74a65bb9c1f3e2871c689f8ddb435acda2ff47c2,74a65bb9c1f3e2871c689f8ddb435acda2ff47c2,fix(build): FIx linting and react errors and popover spec
bengotow,2016-03-31 22:16:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c8e31486e6e313bc70f3eb10a55359c48773c18,7c8e31486e6e313bc70f3eb10a55359c48773c18,fix(sqlite3): Specify the platform in the binding target directory
bengotow,2016-03-31 21:43:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/0211304f1a81d6478d3a82726f81506fee4c6ec1,0211304f1a81d6478d3a82726f81506fee4c6ec1,"fix(inline): Use `vw` for max-width, use DOM rather than regex"
bengotow,2016-03-31 19:13:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/d49c205dc8d3b057c37cda32f614be48cc31c556,d49c205dc8d3b057c37cda32f614be48cc31c556,"fix(inline): radial progress, merge body with download data on render"
jackiehluo,2016-03-31 21:26:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/06feced278fc7c731fd6df4b7185fcff3dd44c52,06feced278fc7c731fd6df4b7185fcff3dd44c52,"spec(composer-emoji): Add tests for emoji popover

Summary: Adds tests to check that emoji popover is inserting emoji correctly and adding PNGs as expected.

Test Plan: Tested locally.

Reviewers: evan, bengotow, juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D2810"
jstejada,2016-03-27 22:39:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/937aafbe65cd28d16b44f38094a7319e7c26241b,937aafbe65cd28d16b44f38094a7319e7c26241b,"feat(popover): Add popout animation to popover

Summary:
- Adds popout animation to popover
- Fade out animation is pending

Test Plan: - Manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2807"
jackiehluo,2016-03-31 19:04:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/c71f4e28d26367c5baeeb4b00390962cdb200161,c71f4e28d26367c5baeeb4b00390962cdb200161,:art:(theme-picker): Fix oval close button
jackiehluo,2016-03-30 22:52:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff08f73f31fa18caceae7f3437cec0422ef43310,ff08f73f31fa18caceae7f3437cec0422ef43310,:art:(scroll): Fix UI issues in theme picker/emoji picker
jackiehluo,2016-03-30 20:17:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/2613aa083dbaabcec559fa0678397a578e036666,2613aa083dbaabcec559fa0678397a578e036666,fix(readme): Add closing parenthesis :disappointed:
jackiehluo,2016-03-30 20:14:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/24f589c57f3f365b31b080fbd37151ff47fbec9a,24f589c57f3f365b31b080fbd37151ff47fbec9a,update(readme): Move Ubuntu to bundled themes
bengotow,2016-03-29 08:41:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/886328ff7a24b4baf51c6621b80a1fd63446083d,886328ff7a24b4baf51c6621b80a1fd63446083d,"bump(react): 0.13.2 => 0.14.7

Great breakdown of React changes here:
https://github.com/facebook/react/blob/master/CHANGELOG.md#0140-october-7-2015

Due to deprecation warnings, I don't think this will break third-party extensions unless they were doing really bad things."
jackiehluo,2016-03-28 23:18:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/83aebd99d1b7622c609a473dd45cf7d7f0ec2753,83aebd99d1b7622c609a473dd45cf7d7f0ec2753,fix(composer-emoji): Render emoji characters on Windows/Linux
jamiewilson,2016-03-18 16:11:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/6406b8714ba80a0ac3298844126d97d59a4ce989,6406b8714ba80a0ac3298844126d97d59a4ce989,applying accent color to focused inputs
jstejada,2016-03-28 17:47:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab20c51bf0cf486671da1e253d924d7b9fcc44f1,ab20c51bf0cf486671da1e253d924d7b9fcc44f1,"fix(animations): Rename animations to use always lower case

- Fixes issue were folder got commited with wrong name because of git
  ignore case config
- #1829"
jackiehluo,2016-03-27 22:51:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f8725a7473acc35cdc229b80116a7fc522d0465,0f8725a7473acc35cdc229b80116a7fc522d0465,:art:(themes): Tweak Taiga to feel more native
jackiehluo,2016-03-26 19:14:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8459bb2cd00b19a21c049e38aa79a71e997730a,d8459bb2cd00b19a21c049e38aa79a71e997730a,fix(thread-list): Show emoji in bolded subject lines
jstejada,2016-03-26 00:49:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/0d2a6a526487c5c3c8321335ae4af9b0c4bc6820,0d2a6a526487c5c3c8321335ae4af9b0c4bc6820,fix(empty-states): Adjust margins for message correctly
bengotow,2016-03-25 22:01:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/2949b66a7a92aaa562fe91feae8ff56688bb8f25,2949b66a7a92aaa562fe91feae8ff56688bb8f25,"Merge pull request #1826 from Eldorado234/patch-1

Typo"
simonseyer,2016-03-25 21:33:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e878b97bd8fdd43c81e525964c23d3eb0149a14,4e878b97bd8fdd43c81e525964c23d3eb0149a14,Typo
jstejada,2016-03-25 21:00:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/88c5de4f2bf2613f34f76bbd6df27dd55e1baf97,88c5de4f2bf2613f34f76bbd6df27dd55e1baf97,update(open-tracking): Only display icon when last message has metadata
jstejada,2016-03-25 20:26:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/1efa7ffaca29ba55d81ae54b63b187a1adeb684b,1efa7ffaca29ba55d81ae54b63b187a1adeb684b,"Revert ""fix(open-tracking): Make sure icon only shows in sent perspective""

This reverts commit 5c0b88d25825027c513a4c9095eeba14e2e6d16c."
jackiehluo,2016-03-25 20:35:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/457e06818837c3edee6239994a9405e9effb4fdd,457e06818837c3edee6239994a9405e9effb4fdd,fix(composer-emoji): Only show replacement PNGs for OS X
jstejada,2016-03-25 19:37:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c0b88d25825027c513a4c9095eeba14e2e6d16c,5c0b88d25825027c513a4c9095eeba14e2e6d16c,fix(open-tracking): Make sure icon only shows in sent perspective
jstejada,2016-03-25 19:30:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/53a38c84a65128de119c4cc8b44d16bbad2cc708,53a38c84a65128de119c4cc8b44d16bbad2cc708,fix(empty-state): Remove z-index to allow undo toast to work
jstejada,2016-03-25 19:21:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/51e98076c73e46f61b262a9b7e9977257885587f,51e98076c73e46f61b262a9b7e9977257885587f,fix(empty-state): Update animation assets
bengotow,2016-03-25 19:16:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/52ed1119a02c94c3459e82c4fc48de1f1a00e71d,52ed1119a02c94c3459e82c4fc48de1f1a00e71d,bump(version): 0.4.19 and changelog
jstejada,2016-03-25 17:56:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaaf153993435600b8b87a8421557569c8e1db03,aaaf153993435600b8b87a8421557569c8e1db03,"fix(empty-state): Limit scaling factor for animation

- Fix display: none in css"
jstejada,2016-03-25 17:48:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/a280d5fdbf859fcce90e25e237ef24a68f60fa60,a280d5fdbf859fcce90e25e237ef24a68f60fa60,fix(styles): Remove unused style in empty-state.less
jstejada,2016-03-25 17:46:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e133a065ae6c6a5552f1a1add78b8701b3c6c41,8e133a065ae6c6a5552f1a1add78b8701b3c6c41,"fix(empty-state): Make sure inbox zero /always/ animates

- Animation plays on mount, so always unmount the empty state component instead
  of hiding it."
jstejada,2016-03-25 17:05:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2cf2f42276d3cfc378fe6c1c10851bab7a0b99e,c2cf2f42276d3cfc378fe6c1c10851bab7a0b99e,fix(tray): Re add old icon assets for tray icon for win32 and linux
jstejada,2016-03-25 16:54:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/e56f866551c12e4e195380849061d28384d0b689,e56f866551c12e4e195380849061d28384d0b689,"feat(inbox-zero): Adds inbox zero animations and empty states

Summary: Adds inbox zero animations and empty states

Test Plan: Manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2801"
bengotow,2016-03-25 02:35:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/324296eb1ca562f21acec0efc7bd9a5337099532,324296eb1ca562f21acec0efc7bd9a5337099532,fix(drafts): Use the appropriate account and alias
bengotow,2016-03-25 02:30:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab587d48ff4de188cc75e3455c0e6c3d241253db,ab587d48ff4de188cc75e3455c0e6c3d241253db,fix(send): Don't queue an upload task if there are no files
jackiehluo,2016-03-25 00:19:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/59080a6654c29998123bb9c3cd7ae5c0e98713ed,59080a6654c29998123bb9c3cd7ae5c0e98713ed,lint(thread-counts-store): Remove semicolon
bengotow,2016-03-25 00:18:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dc2491af2b2f24676ad4f606c727e9a10fad097,3dc2491af2b2f24676ad4f606c727e9a10fad097,"fix(popover): Add isMounted check, Sentry 20951"
bengotow,2016-03-25 00:10:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/236e2bfdd55b0a9307b64b177e0192b8df6d7b44,236e2bfdd55b0a9307b64b177e0192b8df6d7b44,fix(composer): Sentry 9688
bengotow,2016-03-24 23:59:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c2bd06fbbcd5218f9f023a56d59e696cadc6869,7c2bd06fbbcd5218f9f023a56d59e696cadc6869,"fix(db): Don't log query plans for SCAN Thread-Counts, which are fine"
jackiehluo,2016-03-24 23:56:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/14dff14ac708c50e02ea2716849b4fadcc1ca432,14dff14ac708c50e02ea2716849b4fadcc1ca432,lint(themes): Add import to ui-variables
bengotow,2016-03-24 23:53:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/8df402e26fb7c7dcbb30dfb0110c1d97368432d9,8df402e26fb7c7dcbb30dfb0110c1d97368432d9,bump(version): 0.4.18
bengotow,2016-03-24 23:48:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0e76db8648359ff5555a71d2a763d7cbbf24d57,f0e76db8648359ff5555a71d2a763d7cbbf24d57,fix(counts): typo
bengotow,2016-03-24 23:48:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/d78206d4df27e029b192d938ac5c2cbbe769ad93,d78206d4df27e029b192d938ac5c2cbbe769ad93,"fix(counts): Collect metrics about -unread, reset when found"
bengotow,2016-03-24 23:35:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b3018699fdda633a5487b9774019d6ad46cb99d,7b3018699fdda633a5487b9774019d6ad46cb99d,fix(autolinker): Don't include trailing ? or . in URLs
jackiehluo,2016-03-24 23:19:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/72b0672ac97d6774240e41fb62a6f5f5f0bb7634,72b0672ac97d6774240e41fb62a6f5f5f0bb7634,fix(themes): Re-add disclosure triangles to Taiga
jstejada,2016-03-24 20:09:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ef9045d5554f8505194c67361de4cde5b79b113,5ef9045d5554f8505194c67361de4cde5b79b113,:art:(selected-stack): Update text color for clear selection btn
bengotow,2016-03-24 22:39:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/daeff14a2939e5c9f1e83aef863e5480d14a7aa1,daeff14a2939e5c9f1e83aef863e5480d14a7aa1,fix(search): Display search API errors in transient notiication bar
bengotow,2016-03-24 22:16:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/660d9b6db49531edeec6111f6e841b664f8b84b6,660d9b6db49531edeec6111f6e841b664f8b84b6,fix(search): Increase search timeout to 45s
bengotow,2016-03-24 20:55:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/79977a6336e44ba671b54708b30317c64213372d,79977a6336e44ba671b54708b30317c64213372d,"perf(*): Replace _.omit, refresh scrollbar height less often"
jstejada,2016-03-24 19:32:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/36cda855f7a04b261aeaf8f0a8537c84c43ecc08,36cda855f7a04b261aeaf8f0a8537c84c43ecc08,"patch(thread-list): Limit number of injected icons in narrow mode to 1

- Update InjectedComponentSet to take a limit for the amount of matching
  components to render"
jstejada,2016-03-24 19:04:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/3086806446c515f4251a93b039620d0622411436,3086806446c515f4251a93b039620d0622411436,"fix(specs): Add check when patching Google Inbox keymaps from 07d218d

- This was preventing the specs from running"
jstejada,2016-03-24 18:59:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/3cdd831e226426c2086a60a192a0b758b5cbb4f5,3cdd831e226426c2086a60a192a0b758b5cbb4f5,feat(list): Add `ThreadIcon` injected region to narrow thread-list
jackiehluo,2016-03-24 18:57:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/cff427d710b02f4634d570ab5e0632cd256362da,cff427d710b02f4634d570ab5e0632cd256362da,fix(composer-emoji): Return if no search results are found
bengotow,2016-03-24 17:56:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/3544ccf979b22e2cf20c7e03bc378029993cad05,3544ccf979b22e2cf20c7e03bc378029993cad05,fix(selection): Make the clear selection button a button
jackiehluo,2016-03-24 17:42:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/dcb8478f97a7682e9d7c2b1b5009fb7d6d949196,dcb8478f97a7682e9d7c2b1b5009fb7d6d949196,"feat(composer-emoji): Add emoji button to composer

Summary: The emoji picker allows users to insert emoji to their messages on click. A few emoji that don't render properly in Chromium are replaced with PNGs, both in the composer view and the message list view, but only the Unicode characters are sent in the message bodies.

Test Plan: TODO

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2787"
bengotow,2016-03-24 17:41:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/454082d4c163eac91be85857f967ad0f30ea2582,454082d4c163eac91be85857f967ad0f30ea2582,fix(undo-redo): Remove initial state check
bengotow,2016-03-24 17:27:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/07d218dd6a900903b8583d157a481e51ade70a80,07d218dd6a900903b8583d157a481e51ade70a80,"Merge pull request #1808 from rittbys/master

Changed GoogleInbox to Inbox by Gmail (TEMPORARY PATCH)"
bengotow,2016-03-24 17:14:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d65dbf9bfd5c8869630a77b7ca65b4df762fc61,4d65dbf9bfd5c8869630a77b7ca65b4df762fc61,fix(autolinker): Only match top ten tld's when schme not present
bengotow,2016-03-24 02:02:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/52e8e57e4ab2053ac79b2df2a4186e2b0ca7147d,52e8e57e4ab2053ac79b2df2a4186e2b0ca7147d,perf(autolinker): Use requestIdleCallback to fix hanging on large bodies
jstejada,2016-03-24 01:44:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/b82fccffe5235ac9cf23d466d8e814e6c9ae32ce,b82fccffe5235ac9cf23d466d8e814e6c9ae32ce,fix(date-utils): Fix isPastDate using `moment`
jstejada,2016-03-24 01:10:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e860f97ec52a2ea0101ba82f2d793e8aa1e1c47,2e860f97ec52a2ea0101ba82f2d793e8aa1e1c47,fix(specs): Fix specs for account store token initialization
jstejada,2016-03-24 01:00:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/e40f4c58fd33f585d6ed794438c4466659182761,e40f4c58fd33f585d6ed794438c4466659182761,fix(snooze): Correctly display `snoozed until` label
jstejada,2016-03-24 00:46:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b3f0c0c810d0150e41f9477651e440aca22ebb5,3b3f0c0c810d0150e41f9477651e440aca22ebb5,fix(send-later): Close popover in inline composer when msg scheduled
jstejada,2016-03-24 00:43:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/d93178893e08e4779fd3e0ad5a4917c0ae5939a7,d93178893e08e4779fd3e0ad5a4917c0ae5939a7,fix(popover): Reduce animation length to 100ms
jstejada,2016-03-24 00:15:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a800bf4ef03150b49a333135d77707b65849ffd,9a800bf4ef03150b49a333135d77707b65849ffd,fix(styles): Fix styles for attachment and upload items
jackiehluo,2016-03-24 00:01:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/be9c6168403c1a8399b57d94a52fa4cea3737573,be9c6168403c1a8399b57d94a52fa4cea3737573,fix(composer-emoji): Return null if no matching node is found
jackiehluo,2016-03-23 23:48:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8e5d9948ee7d6314ebeeedf8d107a7cc6a07704,a8e5d9948ee7d6314ebeeedf8d107a7cc6a07704,fix(composer-emoji): Fix setBaseAndExtent bug
bengotow,2016-03-23 23:02:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/412a228ba196831c67b7b5e364ace444aa6d2f4f,412a228ba196831c67b7b5e364ace444aa6d2f4f,fix(mixpanel): Consolidate reply / replyAll actions
bengotow,2016-03-23 22:56:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/866de90f746201d708e5c6d53182ae158bedec5c,866de90f746201d708e5c6d53182ae158bedec5c,"fix(tokens): Don't assume that keytar is sync, don't wipe until next save"
jstejada,2016-03-23 22:23:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f559d596cff5465e88fff93595a2a448a4b1ef7,5f559d596cff5465e88fff93595a2a448a4b1ef7,fix(signatures): Fix signature switching between accounts in composer
bengotow,2016-03-23 00:14:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a8a22e5888d6f9682176c8ee2cfb4bbf6923989,4a8a22e5888d6f9682176c8ee2cfb4bbf6923989,"fix(qs): Handle query subscription errors, => ES6"
jstejada,2016-03-23 01:56:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed1f12d9160bf5cd0e16dd6f728aa7a57a96e555,ed1f12d9160bf5cd0e16dd6f728aa7a57a96e555,"fix(attachments): Fix error handling when saving uploads to disk

- Fixes sentry 11705"
bengotow,2016-03-22 23:37:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/2007ddf0bada9b13744b0d7e5c65e98b291cb44c,2007ddf0bada9b13744b0d7e5c65e98b291cb44c,fix(attachments): Add warning for ENOSPC as well
bengotow,2016-03-22 23:28:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e0717b80145969467208cf73437055e70e55c9b,1e0717b80145969467208cf73437055e70e55c9b,fix(attachments): Present filesystem access errors
bengotow,2016-03-22 22:47:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/c265cf0dfac24801e0dd7d11aba3a58f91a807a9,c265cf0dfac24801e0dd7d11aba3a58f91a807a9,"fix(drafts): Formalize draft factory, add reply ""behaviors"" #1722

Summary:
This diff implements a behavior change described in https://github.com/nylas/N1/issues/1722.

Reply buttons should prefer to focus an existing draft in reply to the same message, if one is pristine, altering it as necessary to switch between reply / reply-all. If no pristine reply is already there, it creates one.

Reply keyboard shortcuts should do the same, but more strictly - the shortcuts should switch between reply / reply-all for an existing draft regardless of whether it's pristine.

This diff also cleans up the DraftStore and moves all the draft creation itself to a new DraftFactory object. This makes it much easier to see what's going on in the DraftStore, and I also refactored away the ""newMessageWithContext"" method, which was breaking the logic for Reply vs Forward between a bunch of different helper methods and was hard to follow.

Test Plan: They're all wrecked. Will fix after concept is greenlighted

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2776"
jstejada,2016-03-22 21:51:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e6141fb47f7200aa04a68c0d0a2587967cb6b09,7e6141fb47f7200aa04a68c0d0a2587967cb6b09,:art:(composer): Reduce contenteditable min height
jstejada,2016-03-22 21:34:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f9e70cde71e0a586540e9d53b0f4e7e3da20c52,0f9e70cde71e0a586540e9d53b0f4e7e3da20c52,"fix(tasks): Properly handle DraftNotFoundError in DestroyDraftTask

- Fix reference to actual DestroyDraftTask class inside
  syncback-draft-task"
jstejada,2016-03-22 20:42:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d4e4612d57190763d21287f8381699b9cb04d32,1d4e4612d57190763d21287f8381699b9cb04d32,"feat(popover): Add subtle ease-in animation when opening popover

- Closes popover on window resize:
  - Re rendering popover on window resize will be a bit more tricky because
    the FixedPopover only receives an origin rect. The one who
    dispatches the action has the responsability of re dispatching when
    the window resizes
- Fixes tiny behavior in send later popover"
bengotow,2016-03-22 19:21:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/df354aa50eebc4702e2500a15c1cad420705fcf0,df354aa50eebc4702e2500a15c1cad420705fcf0,fix(readme): Add --enable-logging flag
jstejada,2016-03-22 18:28:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/5aa2b24d72bd6032c103bc2ea4906a55f84230ad,5aa2b24d72bd6032c103bc2ea4906a55f84230ad,fix(message-list-toolbar): Fix observable for selection & focused thread
jstejada,2016-03-22 18:24:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f864e76e375bd3e3b51ea6592bba22ee8a72ffb,8f864e76e375bd3e3b51ea6592bba22ee8a72ffb,fix(attachments): Update fn name in ImageAttachmentComponent
bengotow,2016-03-22 07:56:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ff89dbf480da1557bbbf777f8d0f0b4eb8112db,8ff89dbf480da1557bbbf777f8d0f0b4eb8112db,"Merge pull request #1790 from mbilker/fix-mistake

Fix my mistake with AutoUpdateManager"
jackiehluo,2016-03-22 02:35:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/4afcc0501fb8b656abdd7b4ca590670d36443313,4afcc0501fb8b656abdd7b4ca590670d36443313,:art:(theme-picker): Fix styling for non-Retina displays
bengotow,2016-03-22 01:25:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e3dbd3873de164a1aeeab6cab6c7023b545dfd0,9e3dbd3873de164a1aeeab6cab6c7023b545dfd0,"fix(template): Rewrite in ES6, add missing windowTypes"
jstejada,2016-03-22 01:22:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/fce1673aac685a39baf95303910a3894dfd5b5c5,fce1673aac685a39baf95303910a3894dfd5b5c5,"feat(download-all): Adds download-all button + style updates, more ES6

Summary:
- Adds initial version of download all button
- Converts attachments plugin to ES6 and adds updated styling
- Updates quoted text button
- #905, #1712

Test Plan: - Unit + manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2769"
bengotow,2016-03-22 00:36:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/510e417cb3b7dc6c2abc7fe48d723ea65ff0a445,510e417cb3b7dc6c2abc7fe48d723ea65ff0a445,"fix(tray): Use total count, not unread count, for tray icon"
bengotow,2016-03-21 23:50:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ddbf1faae09309fb5d152afb8eef49e6ff1ded4,4ddbf1faae09309fb5d152afb8eef49e6ff1ded4,"es6(tasks): Convert all remaining tasks to ES6

Summary: after refactoring some things last week and spending time futsing with coffeescript, I’m pretty convinced it’s worth moving important parts of the app to ES6 to be able to use ESLint as part of our dev workflow

Test Plan: Run existing tests, tested manually. Did not convert the tests in this diff, breaking one part at a time!

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2768"
jstejada,2016-03-17 16:50:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/687597134d454a3d008e7e621626289a8dd2f058,687597134d454a3d008e7e621626289a8dd2f058,"feat(selection): Add new display for selection count + update toolbar

Summary:
- New behavior is that the in split mode, you will perform actions on
  the selection via the MessageListToolbar (the toolbar positioned above
  the message list)
- Refactored and moved around a bunch of code to achieve this:
  - Mostly renaming stuff and moving stuff around and removing some
    duplication
  - Update naming of toolbar role to a single role, and update relevant code
  - Converted and refactored a bunch of code into ES6, specifically to reuse the code for the ThreadActionsToolbar at the 2 locations
  - Deprecated MultiselectActionBar in favor of MultiselectToolbar
  - Deprecated old roles
- Punted the animation for the stackable cards in the selection display for now.
- #370

Test Plan: - Manual and unit tests

Reviewers: evan, drew, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2756"
bengotow,2016-03-21 18:32:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc7317d3f700876c080bd4bc8005df98f8519f6f,cc7317d3f700876c080bd4bc8005df98f8519f6f,"fix(composer): Refactor header actions, clean up layout

Summary:
WIP

Remove the mode prop from everywhere, use NylasEnv.isComposerWindow() instead

Test Plan: Run updated tests

Reviewers: drew, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2766"
mbilker,2016-03-19 02:55:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c36f54a601fa51f7a5428f51e1639db850b31b3,6c36f54a601fa51f7a5428f51e1639db850b31b3,"fix(auto-update): mistakenly used remote.dialog

I forgot that the `AutoUpdateManager` is run from the main process"
jackiehluo,2016-03-19 01:12:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/38d9c41c0b5c9c3152855a229c53115bf2cc0ecc,38d9c41c0b5c9c3152855a229c53115bf2cc0ecc,fix(theme-picker): Add tabIndex to click to dismiss
bengotow,2016-03-19 00:42:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/a88c7db3a5853c66d24a55270221f92d9a3385bb,a88c7db3a5853c66d24a55270221f92d9a3385bb,"Merge pull request #1783 from mbilker/change-dialog-call

Use `remote` exports instead of `remote.require` for dialog"
bengotow,2016-03-19 00:03:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/8626b006eb88b7ed8343846d913bcb4581be4b85,8626b006eb88b7ed8343846d913bcb4581be4b85,"bump(version): Notes for 0.4.16 patch, master to 0.4.17"
bengotow,2016-03-18 22:09:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/c84921225032f23086fa7da389ee1911f34b1ca2,c84921225032f23086fa7da389ee1911f34b1ca2,log(sync-state): Send `Account State Delta` to mixpanel
jstejada,2016-02-21 08:28:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea48721a857ac49bd39c20fe3d469474114c9872,ea48721a857ac49bd39c20fe3d469474114c9872,":art:(query-subscription): Update query subscription

Summary:
- Applies code changes that we discussed with @bengotow when debugging
  #1327
- Minor refactoring and reorganization + update specs

Test Plan: - Unit tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Subscribers: bengotow

Differential Revision: https://phab.nylas.com/D2612"
bengotow,2016-03-18 21:03:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/9aba847a92932180b61d11303db35926c22f955b,9aba847a92932180b61d11303db35926c22f955b,fix(onboarding): Focus first field when showing settings #1696
jackiehluo,2016-03-18 20:48:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/815dc58e3aa2185d30b2e1f66f5b5d5a44483cbe,815dc58e3aa2185d30b2e1f66f5b5d5a44483cbe,fix(ui-taiga): Remove border-bottom in two-pane mode
jackiehluo,2016-03-18 20:42:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/96186631cdcd6a6e8f93c7063c7ec0348755a127,96186631cdcd6a6e8f93c7063c7ec0348755a127,fix(ui-taiga): Show active list item in single-pane mode (#1751)
bengotow,2016-03-18 20:26:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/d780740187580e26a892e9b7028dc0ad9c5f76d2,d780740187580e26a892e9b7028dc0ad9c5f76d2,fix(build): Fix failing linter and account tests
bengotow,2016-03-18 20:25:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/47a88232426bf83e53e5f1439c8806d09072e128,47a88232426bf83e53e5f1439c8806d09072e128,"fix(queue): Delay retries up to 30s when tasks request a retry

Summary:
This is a critical patch that fixes two problems with the task queue:

1. Tasks in Status: Retry are retried the next time processQueue is run,
   which could be pretty much immediately. Certain scenarios lead to tasks
   running in a hard loop forever.

2. Returning Task.Status.Retry set the retry flags on the task but did not
   schedule the queue to be processed again. So if only a single item in the
   queue was present, it might never be retried again until the user performed
   another action.

Test Plan: Where did the specs for TaskQueue go? There aren't many... need to write more.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2762"
bengotow,2016-03-18 17:43:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/26c752ba668d2e4d31178398316f6b77caf43ed3,26c752ba668d2e4d31178398316f6b77caf43ed3,typo(counts): Fix duration computation
bengotow,2016-03-18 00:20:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bc00bd55eb79a0a3b62685956ff4d5e31fa96a9,5bc00bd55eb79a0a3b62685956ff4d5e31fa96a9,"fix(quick-schedule): Update to use new APIs, remove leftover docs"
dregitsky,2016-03-18 17:41:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/3240635b4c5549de9e5a174a7e9d6ba862d6cd23,3240635b4c5549de9e5a174a7e9d6ba862d6cd23,"fix(sync-state): ignore Account.syncState==""stopped"" for now

Valid accounts that are syncing properly can reviece a delta for
Account.syncState==stopped currently, due to some quirks in the backend.
Ignore ""stopped"" until it unabiguously represents an error state."
jackiehluo,2016-03-18 17:07:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/2575cecd59879bc0f0d538d16c0def9ea14b8bb0,2575cecd59879bc0f0d538d16c0def9ea14b8bb0,bump(node-emoji): Use 1.2.1 with merged PR
bengotow,2016-03-18 17:03:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f7716baa64193890af9f0e608344badf64f25e2,1f7716baa64193890af9f0e608344badf64f25e2,"Merge pull request #1764 from mbilker/expose-keytar

Add atom-keytar for use in extensions"
mbilker,2016-03-18 05:25:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea540ebf18fe5609a12802d7cc70573496975cea,ea540ebf18fe5609a12802d7cc70573496975cea,fix(specs): change to use electron.remote.dialog
mbilker,2016-03-18 02:50:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/758b1ccd4ed6cb41ce820df1c0f8ddd6d4947f65,758b1ccd4ed6cb41ce820df1c0f8ddd6d4947f65,fix(require): use the remote common exports to avoid function call
grinich,2016-03-18 02:28:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d985959185179ce2e54d166bd7f7da41a7f3cbe,5d985959185179ce2e54d166bd7f7da41a7f3cbe,"Merge pull request #1781 from steelbrain/patch-1

Enhance issue template"
steelbrain,2016-03-18 02:25:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ede4b7275f940f93632833718ee9d3877604afe,0ede4b7275f940f93632833718ee9d3877604afe,":art: Enhance issue template

There were several issues with the last issue template, here are some of them

- Instructions to user that should've been comments were not, they were shown as part of the issue
- Bullets were used instead of heading, the down side is that they weren't gonna be bullets only. Users were supposed to add paragraphs below them, thus breaking the styling.
- There were no separators in place

This commit addresses these issues"
bengotow,2016-03-18 01:25:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/868445504f6d718cc983143a42d343c95a1f51ac,868445504f6d718cc983143a42d343c95a1f51ac,bump(version): 0.4.16 beta
bengotow,2016-03-18 01:24:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe5b75b32a8c9096603feb95c0e38bf243645e2f,fe5b75b32a8c9096603feb95c0e38bf243645e2f,"fix(counts): Switch to simpler SQL-based counters, introduce total counts

Summary:
The old approach we were using to track unread counts by category was really complicated because it involved computing changes to counts in javascript and then syncing them back to the database, from each process that was making queries. Rather than try to fix that, this diff moves us to a new approach where the counts are maintained by executing a query before and after threads are modified to unapply / reapply them from the counters. Doing this in the database in the same transactions as the thread modifications themselves ensures the counts are internally consistent with the Threads table.

This SQL approach is also able to compute initial counts way faster - initializing totals and unreads in a 1GB edgehill.db in about 1 second on my machine.

Test Plan: All old tests removed, new tests coming

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2757"
mbilker,2016-03-18 01:11:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/e767c9a89bb485af66a9dbefc57359803032276a,e767c9a89bb485af66a9dbefc57359803032276a,"fix(exports): rename Keychain to Keytar to reduce confusion

@bengotow requested that the export represent the original module
to prevent confusion and reduce the documentation needed."
bengotow,2016-03-17 23:23:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ccef76326f9f4a8d87a4396c8767af87947b17fd,ccef76326f9f4a8d87a4396c8767af87947b17fd,"es6(tasks): send, syncback and specs converted to ES6"
bengotow,2016-03-17 20:14:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/b515a5e0e26f96e42bc3efd6ebd948f029f3f5de,b515a5e0e26f96e42bc3efd6ebd948f029f3f5de,"feat(dock-icon): Drop files to attach them to new msg

Summary:
Fix specs

Fix responding to mailto, files at launch

It's super important that `window:loaded` is /not/ sent from index.js because `loadSettings.bootstrapScript` is async and nothing is actually loaded yet. This was causing the app to dispatch the mailto:// links into the main window before a DraftStore existed.

I think this was necessary at one point because we had NylasWindows not using a bootstrapScript? Should not be here anymore...

Test Plan: Run a few new tests

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2737"
bengotow,2016-03-17 20:11:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e2ecf0647b7693ce1e88dc157c6ad8a4c00aa79,2e2ecf0647b7693ce1e88dc157c6ad8a4c00aa79,"fix(quoted-text): div vs blockquote, signature cleanup #1746

Summary:
Previously we always created <blockquote class=""gmail_quote""> to wrap quoted text. This is not correct.
Gmail uses blockquotes only when it wants visual indentation, and <div>s to wrap other quoted text, like forwarded
messages which are not displayed indented.

This diff updates N1 to match Gmail exactly. Note that for replies, Gmail actually nests a blockquote.gmail_quote
inside a div.gmail_quote.

I also updated signature handling because it turns out the regexp that was removing existing signatures would blow
away any and all divs until it reached a <blockquote> tag.

Test Plan: See updated specs. Manually tested by creating a thread in Google Inbox and then performing fwd and reply in both N1 and Inbox. Results match.

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2750"
jstejada,2016-03-17 18:14:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5a9bac1510727ee85c6b6a507141387f94d3060,f5a9bac1510727ee85c6b6a507141387f94d3060,"fix(tasks): Don't pass null category to task factory

- This was causing:
  https://sentry.nylas.com/sentry/edgehill/group/20965/"
bengotow,2016-03-17 03:04:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3a03bd086c55a099adb514320114c5a2bbe0626,a3a03bd086c55a099adb514320114c5a2bbe0626,fix(lint): Actions is defined but never used
bengotow,2016-03-17 02:29:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/24933906a7007f7a4e3592958d97e123dea027a0,24933906a7007f7a4e3592958d97e123dea027a0,bump(version): 0.4.15
bengotow,2016-03-17 02:27:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/552b66fbaf3b52c58132319ca40b5f29512b16fe,552b66fbaf3b52c58132319ca40b5f29512b16fe,"fix(syncback): Bidirectional transforms, ready-to-send saved state

Summary:
This diff replaces ""finalizeSessionBeforeSending"" with a
plugin hook that is bidirectional and allows us to put the draft in
the ""ready to send"" state every time we save it, and restore it to
the ""ready to edit"" state every time a draft session is created to
edit it.

This diff also significantly restructures the draft tasks:

1. SyncbackDraftUploadsTask:
   - ensures that `uploads` are converted to `files` and that any
     existing files on the draft are part of the correct account.

1. SyncbackDraftTask:
   - saves the draft, nothing else.

3. SendDraftTask
   - sends the draft, nothing else.
   - deletes the entire uploads directory for the draft

Test Plan: WIP

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2753"
mbilker,2016-03-16 16:15:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/286043492fb77ed79f17170dfa83c0385060ff50,286043492fb77ed79f17170dfa83c0385060ff50,"fix(exports): add atom-keytar for use in extensions

In Cypher, I store the Keybase tokens in `config.cson` currently.
With the recent integration of `atom-keytar`, I can store those
authentication tokens into the system keychain where they are better
protected than `config.cson` just like the account tokens."
jackiehluo,2016-03-16 03:01:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b993d07bcf95d1d35909656e32c1d7cfb15c170,6b993d07bcf95d1d35909656e32c1d7cfb15c170,fix(ui-variables): Add correct hexcode for @background-color-success
jackiehluo,2016-03-15 20:37:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/55ed1e2f3c30931a9171f951c2ad9565226450ed,55ed1e2f3c30931a9171f951c2ad9565226450ed,sp(composer-emoji): Correct emojis to emoji
bengotow,2016-03-15 19:45:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a50a535a9809223676229a8b737da0c1e0affad,1a50a535a9809223676229a8b737da0c1e0affad,fix(icon): update assets to fix #1747
jstejada,2016-03-15 19:12:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/592e8614069481068cd50d5e6e78602594bd857c,592e8614069481068cd50d5e6e78602594bd857c,"fix(focus): Show drafts in unfocused state when window is blurred

- See #1695
- Update key commands region to clear focus when window blurs
- Dispatch broswer-window-focus/blur as a window event into the renderer
  window
- Update tray icon to listen to window instead of ipc event"
jstejada,2016-03-15 18:19:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/030b0b57b4c895a71764ab32066529cab1a12060,030b0b57b4c895a71764ab32066529cab1a12060,"feat(view-mode): Add option in menu to select view mode

Summary:
Also add minor refactoring
#1710

Test Plan: Manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2745"
jackiehluo,2016-03-15 17:57:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/76d478b67701758ce07eaad681d0515863d82f2b,76d478b67701758ce07eaad681d0515863d82f2b,"refactor(ui-variables): Clean UI variables for consistency/usage

Summary: Shortens and simplifies UI variables so that unused variables are no longer present.

Test Plan: Tested locally.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2738"
jackiehluo,2016-03-15 18:09:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c8b8c721f9e00cd0ace46bebf175e3be8cf0017,5c8b8c721f9e00cd0ace46bebf175e3be8cf0017,:art:(plugins): Fixes switch alignment issue in #1743
bengotow,2016-03-15 18:04:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/84b9741fa6d8a5b93da3ed0e0005bd99b5380dfb,84b9741fa6d8a5b93da3ed0e0005bd99b5380dfb,fix(autolinker): Additional phone number parsing specs
bengotow,2016-03-15 17:47:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/92e8a2a7d47504195cb2a2f24f825bd83852a3d1,92e8a2a7d47504195cb2a2f24f825bd83852a3d1,"fix(autolinker): Add more test cases, improv URL regex"
bengotow,2016-03-15 16:31:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a7496b675a35f1038346f02e55d7c481c8b46fa,7a7496b675a35f1038346f02e55d7c481c8b46fa,"fix(uploads): Display icon regardless of ext capitalization

Note: In the future we really need to consolidate file-upload.cjsx and attachment-component.cjsx. #1700"
bengotow,2016-03-15 16:16:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d8bb9d3f7839ad08d74aa5755e84dfb7406db94,2d8bb9d3f7839ad08d74aa5755e84dfb7406db94,fix(next/prev): Move buttons to correct column #1721
jackiehluo,2016-03-15 01:50:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/492ae69abeca421718d8ae0caacb46d78c96f901,492ae69abeca421718d8ae0caacb46d78c96f901,"Merge pull request #1731 from jamiewilson/darkside

(darkside) using new toolbar selectors, svgs, etc"
bengotow,2016-03-15 01:32:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/b75843bbc03b022be6f774886844ef0f5ec77bc9,b75843bbc03b022be6f774886844ef0f5ec77bc9,"fix(unread): counts should exclude items outside all mail

#1726, #1718"
jackiehluo,2016-03-15 00:55:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/18697091215fcb97fd12a780b2e2521524239f65,18697091215fcb97fd12a780b2e2521524239f65,:art:(plugins): Add theme-specific icon in plugins tab
jstejada,2016-03-15 00:15:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/ded7c20fba0d78447f535f249b8876b8fcb1abe4,ded7c20fba0d78447f535f249b8876b8fcb1abe4,"feat(tray): Update to new set of icons and behavior for tray (menubar)

Summary:
- See #1698

Add specs

Test Plan: - Unit tests

Reviewers: bengotow, evan, drew

Reviewed By: drew

Differential Revision: https://phab.nylas.com/D2734"
bengotow,2016-03-15 00:04:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/cff2f71d18268b27d71d337a3ff04c693528f12a,cff2f71d18268b27d71d337a3ff04c693528f12a,"fix(signatures): Adds default signature, convert to ES6"
jamiewilson,2016-03-15 00:02:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/013898ed02916e59b02ec907711528dab2be3b1d,013898ed02916e59b02ec907711528dab2be3b1d,"using new toolbar selectors, svgs, etc."
jstejada,2016-03-14 22:39:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b2d7043d7036931a8be51b63af129d1f81c9bc2,0b2d7043d7036931a8be51b63af129d1f81c9bc2,fix(specs): Remove fdescribe
jstejada,2016-03-14 22:34:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/cfbbcd23d3f01a22430b4f82f305aa1df68c9428,cfbbcd23d3f01a22430b4f82f305aa1df68c9428,"fix(snooze): Correctly query and create snooze categories per account

Summary:
- Was not properly updating the references to snoozed categories when
  accounts were added or removed
- Update whenCategoriesReady to make sure we listen until category syncing has concluded (Move inside CategoryStore)
- #1676, #1658

Test Plan: - TODO

Reviewers: evan, drew, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2723"
bengotow,2016-03-14 22:14:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/734a52aa6a059bf833eed259467a101fb83c51f1,734a52aa6a059bf833eed259467a101fb83c51f1,"fix(config): Move account tokens to system keychain

Summary:
This diff also adds an account version number to the config so that the AccountStore can tell whether it should reload accounts (depending on whether it was the instance making tthe changes.)

This diff also fixes a tiny issue where un-opened composers threw an exception if you changed accounts.

Test Plan: New tests

Reviewers: evan, drew, juan

Reviewed By: juan

Subscribers: juan

Differential Revision: https://phab.nylas.com/D2726"
bengotow,2016-03-14 20:13:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbf3610c884540a9a7734f1a9252c7855f0b61d8,dbf3610c884540a9a7734f1a9252c7855f0b61d8,"hide(zoom): Remove UI for zoom, move to CONFIG.md"
bengotow,2016-03-14 19:30:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/465831175aa00e3e8a08de6d2791d9e37f516c54,465831175aa00e3e8a08de6d2791d9e37f516c54,"rm(autolinker): Use our own very simple autolinker

Summary:
Autolinker is a great open source project but it attempts to parse HTML with regexp, is quite slow, and hangs on specific emails https://github.com/nylas/N1/issues/1540

This is super bad, and also super unnecessary. I think this should do the trick.

Note: I changed the urlRegex in our Utils to be much more liberal. It now matches anything that looks like a URL, not just things with the http:// and https:// prefixes. It's used in the LinkEditor and onboarding screen (detecting auth errors with urls) and I think it should be ok?

Test Plan: Need to write some tests

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2725"
jstejada,2016-03-14 18:22:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/06d7c05aa8d138d02f745600096188014789f7db,06d7c05aa8d138d02f745600096188014789f7db,fix(acct-menu): Add option to add account from context menu
jstejada,2016-03-14 18:22:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/346dd80a324ebf212947c5693adb7fad9d53b85f,346dd80a324ebf212947c5693adb7fad9d53b85f,fix(specs)
jstejada,2016-03-14 18:04:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/c185c0d0e4a8fed9c9b40281f05154815d1df5ae,c185c0d0e4a8fed9c9b40281f05154815d1df5ae,"fix(mail-labels): Don't display `sent` label

Reference #1671"
bengotow,2016-03-14 17:23:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc59d88337763391fc7e1e4ee5385f5cc1af50eb,fc59d88337763391fc7e1e4ee5385f5cc1af50eb,"fix(spellcheck): Enables spellcheck menu for basic inputs (#1600)

Summary: Just moves some code so we can easily attach spelling menus to the basic inputs.

Test Plan: Updated existing tests

Reviewers: juan, drew

Reviewed By: drew

Differential Revision: https://phab.nylas.com/D2721"
bengotow,2016-03-14 17:09:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3483c0a2bc4afb5cbdf6ab8380c2cd55c8a062d,a3483c0a2bc4afb5cbdf6ab8380c2cd55c8a062d,"Merge pull request #1648 from Eldorado234/patch-2

Fixed text overflow in phishing detection indicator"
grinich,2016-03-14 01:03:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b4739335f4452faa720914309c5e6a593db531d,1b4739335f4452faa720914309c5e6a593db531d,use bullets instead of checkboxes
grinich,2016-03-14 00:03:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa7f0faa1b66b9340fa0cda39ab1d289d96a8ed7,fa7f0faa1b66b9340fa0cda39ab1d289d96a8ed7,add hiring note
jackiehluo,2016-03-12 19:43:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/9cc235dbbb52bfcf3cfff3e9f20e5af269141ad0,9cc235dbbb52bfcf3cfff3e9f20e5af269141ad0,:art:(themes): Fixes Windows button UI issues in #1649
jackiehluo,2016-03-12 01:31:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/85388c9cb5f8470a139eaf03274232f394fb1598,85388c9cb5f8470a139eaf03274232f394fb1598,"Merge pull request #1632 from DavidChouinard/extraneous-scrollbar-fix

Fixes scrollbar display when content is not scrollable"
jackiehluo,2016-03-12 00:55:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/270d1210b36aa0f3da84e3b790b92189b5372c66,270d1210b36aa0f3da84e3b790b92189b5372c66,fix(themes): Add classes for toolbar elements
emorikawa,2016-03-11 21:27:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae4ca595266dac20fcb599fb9b2f0ae1e2d9cc64,ae4ca595266dac20fcb599fb9b2f0ae1e2d9cc64,"fix(sidebar): keep trying on 202s

Also fixed a bug where the email could come back with different
capitalization causing a cache miss"
emorikawa,2016-03-11 21:01:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d8e65ead44fee98664b73fc2288b333a44f72cc,2d8e65ead44fee98664b73fc2288b333a44f72cc,fix(sidebar): add info@ to blacklist
jackiehluo,2016-03-11 19:43:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/eea5b7b531c3068e044b7217b5812b076c406f88,eea5b7b531c3068e044b7217b5812b076c406f88,update(readme): Streamline plugin lists
bengotow,2016-03-11 18:54:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/a61d7b9b3b24f4426194ef3a89a6c537f29d5a8f,a61d7b9b3b24f4426194ef3a89a6c537f29d5a8f,fix(message-extension): Exception in base class
bengotow,2016-03-11 18:41:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaa5bd17b74ee3e33ac7d78991b5e0f26555fbcb,aaa5bd17b74ee3e33ac7d78991b5e0f26555fbcb,fix(menus): Nylas => Nylas N1
simonseyer,2016-03-11 19:33:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/257f9a13d9331e701d2d6ce943fabadcabcc6edf,257f9a13d9331e701d2d6ce943fabadcabcc6edf,Fixed text overflow in phishing detection indicator
jackiehluo,2016-03-11 19:26:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/5dc07fb739c60ce23c8d0a04c6bd42b8f49d670b,5dc07fb739c60ce23c8d0a04c6bd42b8f49d670b,update(readme): Add bundled versus community packages
jackiehluo,2016-03-11 19:01:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c723725b61bc4bbf857839667e718f172d91414,2c723725b61bc4bbf857839667e718f172d91414,fix(themes): Add quick fixes for Ubuntu
jackiehluo,2016-03-11 18:59:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/4bddd302e133def5698546bdacd362b08fdb3b64,4bddd302e133def5698546bdacd362b08fdb3b64,"Merge pull request #1629 from ahmedlhanafy/master

Added Ubuntu theme to the internal packages"
bengotow,2016-03-11 18:24:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/714b55b299a7998bfac25ce6a84f16b39d66ee8a,714b55b299a7998bfac25ce6a84f16b39d66ee8a,"Merge pull request #1645 from Eldorado234/patch-1

(darkside) Fixed alignment of message headers"
simonseyer,2016-03-11 18:07:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/9cb8a24de89062f91daf607bf38cc2a91c331a8b,9cb8a24de89062f91daf607bf38cc2a91c331a8b,"Fixed alignment of message headers

like the phishing indicator.

Before this change: http://pasteboard.co/2bUg8PU9.png
After: http://pasteboard.co/2bUj2Bmz.png"
bengotow,2016-03-11 03:08:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/d57ef5a060074500faa2e7e131ff7e3583022f35,d57ef5a060074500faa2e7e131ff7e3583022f35,bump(version): 0.4.14 and changelog
dregitsky,2016-03-11 03:06:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe11a425cdf923673b0244ed3b3bc20a0db018e7,fe11a425cdf923673b0244ed3b3bc20a0db018e7,fix(templates): fix a null check bug in template contentedtable ext
jstejada,2016-03-11 03:01:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/50296ab2d6a7b78ba802da1c6f5b44a08f8b7a18,50296ab2d6a7b78ba802da1c6f5b44a08f8b7a18,fix(mail-rules): Prevent from adding locked categories
dregitsky,2016-03-11 02:43:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dc53ee1bd37faa11f999521fbebd72a9bcd51b0,9dc53ee1bd37faa11f999521fbebd72a9bcd51b0,fix(regexp-utils): Also update the regex101 link with test cases
dregitsky,2016-03-11 02:41:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f017892e0e22a61da00547b5ab29f1a1fd4deb6,3f017892e0e22a61da00547b5ab29f1a1fd4deb6,"fix(regexp-utils): Fix urlLinkTagRegex bug
Regex was missing a `?`, so consumed all <a> tags on a single line. Fixed
to be non-greedy."
DavidChouinard,2016-03-11 02:37:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/b20bd9631de1dbafff2f9221cb92c3a0ce6637b0,b20bd9631de1dbafff2f9221cb92c3a0ce6637b0,Ensure scroll bar state is updated on content change
DavidChouinard,2016-03-11 01:59:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/d23f8cfdac9312bdfe818647eff6a0c3b842bd6c,d23f8cfdac9312bdfe818647eff6a0c3b842bd6c,Don't show scrollbars if content is not scrollable
ahmedlhanafy,2016-03-11 01:50:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/595bd705149e1dd2c6473fe497dfbdc7e1ba8609,595bd705149e1dd2c6473fe497dfbdc7e1ba8609,Added Ubuntu theme to the internal packages
jstejada,2016-03-11 01:45:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/42e5f4c60559477b5299f433223be415d77e84d0,42e5f4c60559477b5299f433223be415d77e84d0,fix(snooze): Fix getter for inbox category in when moving to snooze
bengotow,2016-03-11 01:33:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c9da2d58659bbe088d3e88977c0eb7134e504ba,1c9da2d58659bbe088d3e88977c0eb7134e504ba,"fix(plugin-auth): POST returns 200, no response body"
jstejada,2016-03-11 01:27:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/d568d66891623deb9387c73a50b88052980e1a81,d568d66891623deb9387c73a50b88052980e1a81,fix(lint): Fix in MailLabelSet
bengotow,2016-03-11 01:08:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/0533cf3cb3e0911c49e2b33a6955aa0219768a53,0533cf3cb3e0911c49e2b33a6955aa0219768a53,fix(labels): Do not re-use mail labels if they're removable
jackiehluo,2016-03-11 00:37:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e61f2916bf55fd1c818844267caac3879991b38,1e61f2916bf55fd1c818844267caac3879991b38,:art:(theme-picker): Order internal themes and update theme names
jstejada,2016-03-11 00:25:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c98b394c255f0ca36dc000ab2fc3c0d5166eadff,c98b394c255f0ca36dc000ab2fc3c0d5166eadff,fix(change-labels-task): Update label sets after modelifying
bengotow,2016-03-11 00:13:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/21e19cab50fe93b93b42d30fd82405a093aa4bfe,21e19cab50fe93b93b42d30fd82405a093aa4bfe,fix(bodies): Message with empty string body showed loading forever
bengotow,2016-03-11 00:03:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/a24f67398e25b6763fd54b14adfc4150b94200c7,a24f67398e25b6763fd54b14adfc4150b94200c7,fix(sync): Do not paginate /metadata unless pluginsSupported
emorikawa,2016-03-10 23:48:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/963d1d92cb4ba46db1c322aead8d0565c6ade818,963d1d92cb4ba46db1c322aead8d0565c6ade818,fix(sidebar): return valid person to prevent cache miss
jstejada,2016-03-10 23:41:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/23c68df4c09bf51730902b397e25175151cfab0f,23c68df4c09bf51730902b397e25175151cfab0f,"fix(sent): Do not allow sent or drafts to be modified

- Specifically, when dragging from the sent perspective, we should not
  allow the sent label to be removed.
- If moved to trash or spam, `all mail` will be correctly removed from
  the thread, but it will keep sent label
- Show sent MailLabel on the threads"
emorikawa,2016-03-10 23:40:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9810d5983a990b659757f9efd76d6b3f85277f0,b9810d5983a990b659757f9efd76d6b3f85277f0,fix(sidebar): change optional bit in package
emorikawa,2016-03-10 23:32:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f94012dd79423154032b54b77c83f6655017d88,8f94012dd79423154032b54b77c83f6655017d88,fix(sidebar): don't show nulled profiles
bengotow,2016-03-10 23:30:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/716533b9f1e3e14376b1e3feff39fda33e4339fd,716533b9f1e3e14376b1e3feff39fda33e4339fd,fix(messages): Replace `calc` with margin to make plugin styling easier
bengotow,2016-03-10 23:29:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/554bb69ad6397ec541f5dcb1490420df148b1f73,554bb69ad6397ec541f5dcb1490420df148b1f73,"fix(labels): Labels should not show ""X"" in wide mode"
jackiehluo,2016-03-10 23:18:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/3630a1425f095a93e6e561f0a9f088264b84c8b1,3630a1425f095a93e6e561f0a9f088264b84c8b1,:art:(theme-picker): Adjust styles
emorikawa,2016-03-10 23:16:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/93cdbf1d6eb543fc5ad1578c1ba663f7d631b1c3,93cdbf1d6eb543fc5ad1578c1ba663f7d631b1c3,fix(sidebar): explicitly detect 202 and cache null people
bengotow,2016-03-10 22:31:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba66a91eca2c183267b55965f0e299d3eedfface,ba66a91eca2c183267b55965f0e299d3eedfface,fix(github): Correct minor issue during ES6 conversion
bengotow,2016-03-10 22:25:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/85ab3cf0aca16a351d186943c1edeafb105227d9,85ab3cf0aca16a351d186943c1edeafb105227d9,fix(remove-from-view): Missing invocation for non-Gmail
jackiehluo,2016-03-10 22:10:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/457abbf32905277c07256b435dee48f869d277a7,457abbf32905277c07256b435dee48f869d277a7,"feat(plugins): Move uninstall from theme picker to plugins tab

Summary: Move uninstall functionality to the plugins tab in preferences.

Test Plan: Tested locally.

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2716"
jstejada,2016-03-10 22:11:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/76036e82bd40ff98c24a027d3b35701a7e7c7300,76036e82bd40ff98c24a027d3b35701a7e7c7300,"fix(gmail-labels): Constraint so threads always belong to all,spam or trash

Summary:
- In Gmail all threads /must/ belong to either All Mail, Trash and Spam, and
  they are mutually exclusive, so we need to make sure that any add/remove
  label operation still guarantees that constraint
- Update ChangeLabelsTask to modify the set of labels to add and remove
  based on this rule
- Update tasksFor archiving, moving to trash and moving to spam so they
  don't affect any other labels in the thread, as gmail does.
- Removing from view /will/ remove any current labels, but will also
  move between all mail and trash as needed
- Remove Inbox, Trash and Spam from the CategoryPicker, as Gmail does

Test Plan: - Unit tests

Reviewers: drew, evan, bengotow

Reviewed By: drew, evan, bengotow

Differential Revision: https://phab.nylas.com/D2715"
bengotow,2016-03-10 21:27:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/e62e63ddbe327af4fa8a63f3be9b761cf5412f8f,e62e63ddbe327af4fa8a63f3be9b761cf5412f8f,fix(trash/spam): Typo `sent` => `spam`
bengotow,2016-03-10 20:20:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/96c0b5da29e20627ce495d472a02dfdb366d2386,96c0b5da29e20627ce495d472a02dfdb366d2386,fix(trash/spam): New inAllMail filter applied to all mailbox views except trash and spam
jackiehluo,2016-03-10 20:26:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/b920cf83df6e4319a3cfe82e94b5c27f9b82cc06,b920cf83df6e4319a3cfe82e94b5c27f9b82cc06,"Revert "":art:(plugins): Change menus to consolidate plugin installation"""
bengotow,2016-03-10 20:07:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/703bc2efd2013d23e324e57a321008f49c2dde03,703bc2efd2013d23e324e57a321008f49c2dde03,bump(version): 0.4.13 beta
bengotow,2016-03-10 20:07:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/306440dd3836ed265c510f2bde844ee1f9028d94,306440dd3836ed265c510f2bde844ee1f9028d94,fix(onboarding): We should accept IPs for servers during auth
bengotow,2016-03-10 20:00:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5d9611f2456cb1663cf7a33b6ed6ca2793e8be2,c5d9611f2456cb1663cf7a33b6ed6ca2793e8be2,fix(api): Don't display auth failure bar for req with no auth (onboarding)
bengotow,2016-03-10 20:00:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/12b16092064bb322fb18b20799698af00f823473,12b16092064bb322fb18b20799698af00f823473,fix(onboarding): Make links in error messages clickable
emorikawa,2016-03-10 20:06:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c8237caf329adb9a84dc2ead7ce517f12b53bac,9c8237caf329adb9a84dc2ead7ce517f12b53bac,fix(sidebar): design tweaks to sidebar
emorikawa,2016-03-10 19:21:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/47e2ef8436de99609a84e670ba073a68d41ae07d,47e2ef8436de99609a84e670ba073a68d41ae07d,fix(sidebar): minor sidebar style and padding tweaks
jackiehluo,2016-03-10 19:53:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/e90b783b366ae4da0c51177b69a18c1161281824,e90b783b366ae4da0c51177b69a18c1161281824,fix(themes): Fix linter issues and relink images
bengotow,2016-03-10 19:14:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/b67aedfbff71032421efaa16460ca49abce8ee43,b67aedfbff71032421efaa16460ca49abce8ee43,:lipstick:(sidebar): Replace icon with person
jackiehluo,2016-03-10 19:14:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad9cff4810123b72422cff3ab51b829fa7a6564b,ad9cff4810123b72422cff3ab51b829fa7a6564b,:art:(themes): Move notification heading below toolbar
jackiehluo,2016-03-10 19:11:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/2881909be5200bff8727326c940993cc5f46ab4b,2881909be5200bff8727326c940993cc5f46ab4b,"Merge pull request #1621 from jamiewilson/master

Adding ui-darkside to internal packages"
emorikawa,2016-03-10 19:06:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/c38ef2f34a4fb787d2452379bbab10c942cc3aff,c38ef2f34a4fb787d2452379bbab10c942cc3aff,fix(sidebar): use http basic auth to pass token
bengotow,2016-03-10 19:06:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/f706d4d80fefa1096c256c0b2a44784a52196745,f706d4d80fefa1096c256c0b2a44784a52196745,"fix(sync): Pull down and associate metadata during initial sync

Summary:
Snooze should wait for categories on all accounts

Fix authPlugin to rembmer `plugin+accountId`, not pluginId, add specs

categories() returned [], categories(acctId) returned {}

dry up sync worker, fetch metadata before anything else

Test Plan: Run tests

Reviewers: drew, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2693"
bengotow,2016-03-10 19:03:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/041817c589d6b656a89fcb2af4f4fc5f90f81f18,041817c589d6b656a89fcb2af4f4fc5f90f81f18,"patch(save): Only save drafts when necessary, avoid sync-engine issues

Summary:
Previously, we have saved drafts back to the user's provider through the sync engine. There are a handful of very serious edge case issues we're working to solve that are creating a bad user experience. (#933, #1175, #1504, #1237)

For now, we're going to change the behavior of N1 to mitagate these issues.

- If you create a draft in N1, we will not sync it to other mail clients while you're working on it.
- If you enable send later, we'll start syncing the draft to the server as before.
- If you created the draft in another client, we'll sync the draft to the server as before.

Fix specs

Test Plan: Run specs

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2706"
jamiewilson,2016-03-10 18:18:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b682c15e0e8ab276d1d77591e06acab111e8f88,9b682c15e0e8ab276d1d77591e06acab111e8f88,adding ui-darkside to internal packages
bengotow,2016-03-10 02:02:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/7771f8c4f4c56d69ff99587644085e4ba0606672,7771f8c4f4c56d69ff99587644085e4ba0606672,"fix(bodies): MBP should cache """" so that it updates when new body arrives"
bengotow,2016-03-10 02:01:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1ab520d0e9328fd89ea0761f3973d0c32a3c251,b1ab520d0e9328fd89ea0761f3973d0c32a3c251,"fix(bodies): Move loading into component, add retry, loading spinner"
emorikawa,2016-03-10 02:11:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/9018ae6a87e517ae88615899cf8545ecebfbff95,9018ae6a87e517ae88615899cf8545ecebfbff95,"Revert ""fix(sidebar): use n1_id to verify edgehill server""

This reverts commit ebd2973cf9171d31cd3aed5fc1c52aeaceb6ff13."
emorikawa,2016-03-10 01:57:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a28bb052933e2358658fa2bbbc6ff986ac453e7,3a28bb052933e2358658fa2bbbc6ff986ac453e7,fix(sidebar): fix ordering and add hover state
emorikawa,2016-03-10 01:27:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/ebd2973cf9171d31cd3aed5fc1c52aeaceb6ff13,ebd2973cf9171d31cd3aed5fc1c52aeaceb6ff13,fix(sidebar): use n1_id to verify edgehill server
jackiehluo,2016-03-10 00:49:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0a3452a2ea0558bd0a06efd0f7e4eeed8ab0394,c0a3452a2ea0558bd0a06efd0f7e4eeed8ab0394,:art:(plugins): Add install button in preferences
jackiehluo,2016-03-09 23:30:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/deeaefaeb4170916c11e678a4abb0359e1e3fbfe,deeaefaeb4170916c11e678a4abb0359e1e3fbfe,:art:(plugins): Switch to switches
jackiehluo,2016-03-09 22:28:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7a55218321d0d04d00128971a72f8cfbfd036ff,b7a55218321d0d04d00128971a72f8cfbfd036ff,:art:(plugins): Change menus to consolidate plugin installation
jackiehluo,2016-03-10 00:20:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/c84b4bdd5e4c235241ca673153a9f36d9885b233,c84b4bdd5e4c235241ca673153a9f36d9885b233,:art:(themes): Tweak UI for consistency
jstejada,2016-03-10 00:10:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/fcf8fa766c195a5278e20ab6eca8a03d6b282cf7,fcf8fa766c195a5278e20ab6eca8a03d6b282cf7,fix(snooze-button): Change div to button
jackiehluo,2016-03-09 23:52:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b3d8b1c25fcadce1bf3cab2697ce5057a3b21ea,7b3d8b1c25fcadce1bf3cab2697ce5057a3b21ea,fix(themes): Move Taiga into directory
jackiehluo,2016-03-09 23:50:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/12d4bfd95f327c978675c6a4473f2dcb40f239ab,12d4bfd95f327c978675c6a4473f2dcb40f239ab,"Merge pull request #1618 from noahbuscher/master

Added Taiga!"
noahbuscher,2016-03-09 23:44:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/901302fef6a94442bdf71775373739b114853bd7,901302fef6a94442bdf71775373739b114853bd7,Added Taiga!
emorikawa,2016-03-09 23:32:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecb9fa83e8ecb72ed5734a27fee2a52547f1436a,ecb9fa83e8ecb72ed5734a27fee2a52547f1436a,fix(search): reset on thread change
bengotow,2016-03-09 23:17:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/232dd136604b76778ce5431d4564dc902e2237fd,232dd136604b76778ce5431d4564dc902e2237fd,"Revert ""fix(autolinker): PR accepted into 0.24.1, fixes #839""

This reverts commit 2a7a97eebcb7ef049105173493d9af9b235109f2."
bengotow,2016-03-09 23:15:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe80dfb05a07eb4175b772a01b2739ecc8e7f8d2,fe80dfb05a07eb4175b772a01b2739ecc8e7f8d2,"fix(sync): Paginate /threads, etc. slightly slower to aleviate backend load"
emorikawa,2016-03-09 23:11:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/571a464f7e9ee50656b67e5f09973aa5f5f5e5e4,571a464f7e9ee50656b67e5f09973aa5f5f5e5e4,fix(search): search perf and fix css issues
bengotow,2016-03-09 22:09:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d3748a86e7fbbc12b17825a392736ab6770b46a,3d3748a86e7fbbc12b17825a392736ab6770b46a,:lipstick:(workspace): Fix #1482
jstejada,2016-03-09 21:56:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/3132bedd6d4597e951b87fbf908cbee9c07043da,3132bedd6d4597e951b87fbf908cbee9c07043da,fix(warning): Check if DateInput has unmounted when clearing state
emorikawa,2016-03-09 21:44:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8e52e7a0d60b409d3c7a8ad1841f2630a54bfb1,f8e52e7a0d60b409d3c7a8ad1841f2630a54bfb1,fix(spec): fix message timestamp spec
emorikawa,2016-03-09 21:17:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/c616ded31815db34fc2a3db8070e0b6bf6230570,c616ded31815db34fc2a3db8070e0b6bf6230570,feat(sidebar): add timestamps to related messages
emorikawa,2016-03-09 20:45:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d972ea4622af3af0e8fd36707371e2d4d39cf6d,2d972ea4622af3af0e8fd36707371e2d4d39cf6d,fix(sidebar): ui tweaks to narrow sidebar
jstejada,2016-03-09 20:11:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d4e8054e3baabdd3d951a6e8c427e23de314ec7,3d4e8054e3baabdd3d951a6e8c427e23de314ec7,fix(warning): Remove unused Popover require
jstejada,2016-03-09 20:05:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/19f4efb50cb62cb111a9a72ea0067da26bc704f7,19f4efb50cb62cb111a9a72ea0067da26bc704f7,"fix(signatures): Correct regex to properly replace existing signature

- Fixes #1561
- Add more specs"
bengotow,2016-03-09 19:40:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/80942db92bf3f6740900b3d400a5dc9782d0f968,80942db92bf3f6740900b3d400a5dc9782d0f968,:lipstick:(onboarding): Minor style changes to account choose page
bengotow,2016-03-09 19:40:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/703686d3222c5821b80ce40f2076b2ef8bb7f599,703686d3222c5821b80ce40f2076b2ef8bb7f599,"fix(sent): Sort sent view by most recent sent message, not received"
emorikawa,2016-03-09 19:33:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/58004b29a76959bebc180b629fea9091c83ee90c,58004b29a76959bebc180b629fea9091c83ee90c,"feat(sidebar): Add thread list of currently selected participants

Summary:
WIP. I added a collection index to make displaying the threads of a
currently selected participant on the sidebar easy and fast.

The problem is that the `participants` of a thread, while a collection of
`Contact` objects, have no ""ids"" for those contact objects.

One idea was to create the join table but access contacts by email instead
of id. This required a minor change to the way the data is entered in the
join table.

This means the sidebar can now simply do:

`DatabaseStore.findAll(Thread).where(Thread.attributes.participants.contains('foo@bar.com'))`

While I didn't for this initial test, we could also/instead create the
`Message-Contact` join table. The trick about a Message-Contact table is
that I believe we'd have to create additional columns further specifying
which field we're interested in.

The following two queries:

`DatabaseStore.findAll(Message).where(Message.attributes.to.contains('foo@bar.com'))`

`DatabaseStore.findAll(Message).where(Message.attributes.from.contains('foo@bar.com'))`

would require additional columns in the `Message-Contact` join table
because currently the only columns are `id` and `value`.

In the case of the sidebar use case, I think the Thread participants is
what you want to see anyway.

Unfortunately an email-centric scheme can't distinguish between
`noreply@phab.com <Evan>` and `noreply@phab.com <Juan>`. I actually think
this may be a good thing since I think most people think in terms of email
address as the unique key anyway and for the use case of showing related
emails in the sidebar I'd rather overshow than undershow.

This solution seems to be working pretty well in initial testing, but I
want to see if you guys can think of anything this may subtly screw up
down the line, or if you can think of a simpler way to do this.

Test Plan: todo

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2687"
jstejada,2016-03-09 19:29:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/a017cab3a80ce443d3415904a9f5c76cca8637f6,a017cab3a80ce443d3415904a9f5c76cca8637f6,"fix(deprecate-utils): Add location where deprecation warning was issued

- Resolves #1599"
jstejada,2016-03-09 18:01:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3fc29ee365d09969482d8da9d69a4882aebdebc,e3fc29ee365d09969482d8da9d69a4882aebdebc,"remove(popover): Remove Popover in favor of FixedPopover

Summary:
- FixedPopover now correctly adjusts itself when overflowing outside
  window, in all directions
  - Updates styles
  - Adds specs
- Remove Popover and popover.less, and refactor all code that used it in
  favor of the new FixedPopover

Test Plan: Unit tests

Reviewers: drew, evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2697"
emorikawa,2016-03-09 15:03:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/22dfd4d0c4b4ede8c936ae2c09bb00d94a8b092e,22dfd4d0c4b4ede8c936ae2c09bb00d94a8b092e,fix(spec): fix nylas api specs
bengotow,2016-03-09 02:33:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0fbd108385a1e579e04209b4b1d1806761387ba,f0fbd108385a1e579e04209b4b1d1806761387ba,bump(version): 0.4.12 beta
bengotow,2016-03-09 02:32:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e8f7fbfd74fbd71a882a38fc2422e3b8dc81022,3e8f7fbfd74fbd71a882a38fc2422e3b8dc81022,"fix(downloads): Properly handle network errors, retries of downloads"
jackiehluo,2016-03-09 01:41:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/1fc389c80458d76663317a2044483d8182e2bc98,1fc389c80458d76663317a2044483d8182e2bc98,fix(theme-picker): Fix linter issues for ES6
jackiehluo,2016-03-09 01:32:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/5be8811e3309727ab1b76cb6351bf94cc4942b22,5be8811e3309727ab1b76cb6351bf94cc4942b22,fix(theme-picker): Move launch command to activate()
jackiehluo,2016-03-09 01:08:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/f526bb27360506140320d509172321d16f3af150,f526bb27360506140320d509172321d16f3af150,"feat(theme-picker): Uninstall themes on click

Summary: Themes can now be uninstalled by clicking a button in the theme picker, instead of going to `~/.nylas/packages` to delete the directory.

Test Plan: Tested locally.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2700"
dregitsky,2016-03-09 00:06:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/327eb43932b607c2180b5e614c39fcab472e4edd,327eb43932b607c2180b5e614c39fcab472e4edd,"fix(sync-errors): Handle account deltas indicating sync issues

Summary:
Changes the delta code to handle new deltas on the Account object,
which are triggered by changes in sync state indicating various backend
issues. Saves the sync state in a new field on the Account object, which
is persisited in `config.cson`.

Includes several UI changes to display more information when an account has
backend sync issues. Adds better messages and new actions the user can take
based on the type of sync issue.

Additionally, fixes bug in action bridge that was preventing multi-arg global
actions from working.

Test Plan:
Manual, by testing different sync state values and triggering deltas from the
backend

Reviewers: juan, evan, bengotow

Reviewed By: evan, bengotow

Subscribers: khamidou

Differential Revision: https://phab.nylas.com/D2696"
jackiehluo,2016-03-08 23:51:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc32533bf8073a8c6958a1e24b5fa33c0c726714,dc32533bf8073a8c6958a1e24b5fa33c0c726714,update(readme): Add Material
bengotow,2016-03-08 23:21:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c430a470c4d3653d90507a1aa789e456ff9341e,0c430a470c4d3653d90507a1aa789e456ff9341e,"bump(asar): 0.10, use ordering feature we PR'd [TEST CI]"
bengotow,2016-03-08 22:14:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/0393ab38dac9a19b93b29863fe2e71608661d135,0393ab38dac9a19b93b29863fe2e71608661d135,"Merge pull request #1506 from nylas/osx-shortcuts-improvement

Add Mail.app keybinds"
bengotow,2016-03-08 21:06:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c0b86233d539c863038a590ec0cfb6e75bb47b7,3c0b86233d539c863038a590ec0cfb6e75bb47b7,"fix(body-processor): Observe the db to clear cache. Fixes #1133

Summary:

Test Plan:

Reviewers:

Subscribers:"
bengotow,2016-03-08 19:02:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/099b525bf3c46f011bae0ed49bd6b38e9aaefd66,099b525bf3c46f011bae0ed49bd6b38e9aaefd66,"Merge pull request #1592 from brycedorn/patch-1

add toogabooga theme to readme"
bengotow,2016-03-08 18:54:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/2376dd1a0f0a3ffb719f9da625fa7ef25df90c00,2376dd1a0f0a3ffb719f9da625fa7ef25df90c00,fix(specs): Override configDirPath when running specs within app. Fixes #1133
bengotow,2016-03-08 18:34:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/025d4b4081aa6de4a502c7b5e6d652c5b24995f6,025d4b4081aa6de4a502c7b5e6d652c5b24995f6,fix(launch): Do not create global symlinks to `N1` and `apm`. Closes #1553
bengotow,2016-03-08 18:22:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a7a97eebcb7ef049105173493d9af9b235109f2,2a7a97eebcb7ef049105173493d9af9b235109f2,"fix(autolinker): PR accepted into 0.24.1, fixes #839"
emorikawa,2016-03-08 18:01:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f395b8918499775c2d30a0a04c8f0c95c3a7f95,0f395b8918499775c2d30a0a04c8f0c95c3a7f95,fix(lint): fix linter issues
dregitsky,2016-03-08 04:54:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2db5190c80a5da40b0a7fb25a62ddc602d9e68a,b2db5190c80a5da40b0a7fb25a62ddc602d9e68a,"test(plugins): Add specs, refactor/fixes for open and link tracking

Summary:
Add specs to test the components of open tracking and link
tracking. Notably does not test the overall functionality, which
still needs specs.

Test Plan: adds specs

Reviewers: juan, evan, bengotow

Reviewed By: evan, bengotow

Differential Revision: https://phab.nylas.com/D2667"
dregitsky,2016-03-08 04:14:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1d39595917ffb4e6d4496fe295ae391e05c5682,f1d39595917ffb4e6d4496fe295ae391e05c5682,"fix(send): make send/syncback draft tasks cooperate, fix task ordering tracking

Summary:
Fixes an issue with sending where certain conditions could result in a
duplicated message.

Fixes task dependency logic for draft syncback and send. Changes `createdAt`
on tasks to instead be `sequentialId`, assigned when the task is queued, to
track order of enqueueing. Renames `isDependentTask` => `isDependentOnTask`
and adds comments for clarity.

Test Plan:
Specs updated. Might be good to add some later to test this particular
edge case.

Reviewers: juan, evan, bengotow

Reviewed By: evan, bengotow

Differential Revision: https://phab.nylas.com/D2681"
dregitsky,2016-03-08 02:24:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/8961781ed530bdd79e92af2a5fcede0897d23525,8961781ed530bdd79e92af2a5fcede0897d23525,fix(msg-ctrls): reorder hidden options to reduce accidental error reports
bengotow,2016-03-08 02:18:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/43857d4b79f89591cc52224fde4f7176d44db551,43857d4b79f89591cc52224fde4f7176d44db551,fix(autoload-images): Bar disappears when you choose to load images
bengotow,2016-03-08 01:05:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/9fd0f82aa5d81433a4dbdb365db25ecf0b296576,9fd0f82aa5d81433a4dbdb365db25ecf0b296576,:lipstick:(search): Show focus around search input
jstejada,2016-03-08 02:13:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/37af2ba42c71d2502c8d799e96108e8333be827f,37af2ba42c71d2502c8d799e96108e8333be827f,"fix(remove-from-view): Fix logic for delete/remove-from-view behavior:

Summary:
- Separate gmail's remove-from-view and delete behaviors and write logic
  for each of those
  - Remove MailboxPerspective::{canArchiveThreads, canTrashThreads,
    removeThreads} and some unecessary code in TaskFactory
  - Instead, add MailboxPerspective::tasksForRemovingFromPerspective (I
    know its a bit of a mouthful)
  - I initially tried to put all of the logic for each execution path
    inside the TaskFactory by checking perspective types, but it made
    more sense to use the polymorphism already in place for the different
    perspective types.
  - There is a default delete/remove-from-view behavior which is
    configurable via simple ruleset objects. The gmail behavior is
    configured in this way.
- Update swipe css classes based on destination of threads
- Fixes #1460:
  - Update logic to display archive/trash buttons and context menu options correctly
    when selected threads can be archived/trashed (not based on
    perspective)
  - Same for swiping
- Add a bunch of specs
- Convert some code to ES6
- TODO write some docs for new functions

Test Plan: Unit tests

Reviewers: drew, evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2682"
jstejada,2016-03-07 00:55:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/848bb09f846a24b1e51d89695e43e015fc1e3e35,848bb09f846a24b1e51d89695e43e015fc1e3e35,"fix(date-utils): Add localization to date formats

Summary:
- Setting the locale in moment was not sufficient to actually use the
  correct localized formats.
- Moment provides localized format via the formats : 'L', 'LL', 'll',
  etc. See: http://momentjs.com/docs/#/displaying/format/
- Updates to set our date formats based on localized formats:
  - Unfortunately, localized formats always contain the year, so I
    manually removed the year from our short format.
- Actually fixes: #1515
- Fixes bug where setting nextWeek or thisWeekend returned incorrect
  date if the current day was saturday or sunday
- Add specs

Test Plan: Unit tests

Reviewers: evan, drew, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2688"
brycedorn,2016-03-07 17:24:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdbfb842374d6309c84923c4e4f9c7f65c9bb4b1,cdbfb842374d6309c84923c4e4f9c7f65c9bb4b1,add toogabooga :water_buffalo:
jackiehluo,2016-03-07 00:37:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/7758cf2a610581f3d93f0857e7ab55a9a0a8bff7,7758cf2a610581f3d93f0857e7ab55a9a0a8bff7,spec(theme-picker): Remove filter for theme picker spec
jackiehluo,2016-03-07 00:36:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/22189f91e66afb44941a47706958e526fc8bad85,22189f91e66afb44941a47706958e526fc8bad85,:art:(theme-picker): Add inline style to close button
jackiehluo,2016-03-06 23:25:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/2fe8650cc4cd5f2a0b838361541ed816bbf6b604,2fe8650cc4cd5f2a0b838361541ed816bbf6b604,fix(theme-picker): Fix linter issue
jstejada,2016-03-06 22:47:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/02ca6ff73ececf62def68d5d75ef15268c7252ba,02ca6ff73ececf62def68d5d75ef15268c7252ba,bump(submodule): Add eslint to arc
bengotow,2016-03-05 23:52:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/765c80496389750658829120caee0bad77c33d16,765c80496389750658829120caee0bad77c33d16,"Merge pull request #1574 from mxstbr/master

Fix link to cypher"
bengotow,2016-03-05 20:13:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/1dcb7ace963e88631f1e7f8ad4a8919aeb6383e5,1dcb7ace963e88631f1e7f8ad4a8919aeb6383e5,bump(version): 0.4.11 beta
jackiehluo,2016-03-05 19:24:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f2d6c2e3597d45063846ee3d8f5b7155648bdc9,5f2d6c2e3597d45063846ee3d8f5b7155648bdc9,fix(theme-picker): Update spec to work with iFrame rewriting function
mxstbr,2016-03-05 17:17:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/092983aaf463ecdc3b3093284dff85f635bcd96c,092983aaf463ecdc3b3093284dff85f635bcd96c,Fix link to cypher
jackiehluo,2016-03-05 00:59:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b93d34c186624c750533300031b6b458e93d66f,8b93d34c186624c750533300031b6b458e93d66f,fix(readme): Update theme starter link
jackiehluo,2016-03-05 00:57:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/36ac03de5dae10039ac10bf415adc6d0e6ebed30,36ac03de5dae10039ac10bf415adc6d0e6ebed30,update(readme): Add link to theme starter code
jackiehluo,2016-03-04 23:21:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba0312501acd3c8a499a7ca2c3265bb73839cebe,ba0312501acd3c8a499a7ca2c3265bb73839cebe,"feat(theme-picker): Add visual theme picker to menu

Summary: Adds a new visual theme picker to the menu that allows users to select different themes based on color palettes and then change their themes live.

Test Plan: Test included.

Reviewers: evan, bengotow

Reviewed By: evan, bengotow

Differential Revision: https://phab.nylas.com/D2669"
emorikawa,2016-03-04 21:53:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1c65279900e2afd4fbe47d07ffc77065104a932,b1c65279900e2afd4fbe47d07ffc77065104a932,feat(onboarding): update account-choose page
emorikawa,2016-03-04 21:47:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec187ab63f74268656face2ba649e1ddd6056306,ec187ab63f74268656face2ba649e1ddd6056306,feat(onboarding): restyle step 3
emorikawa,2016-03-04 21:01:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b69adb1bb7011d68e6041e744cf448d95a2af85,1b69adb1bb7011d68e6041e744cf448d95a2af85,feat(onboarding): style page 2
emorikawa,2016-03-04 20:40:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a690723ae52ec29087238821c4491af71d9d001,6a690723ae52ec29087238821c4491af71d9d001,feat(onboarding): style page 1
bengotow,2016-03-04 21:29:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a3f7ad26cc903b20daacf384935e8415b843a76,5a3f7ad26cc903b20daacf384935e8415b843a76,fix(auth): re-enable ssl_required checkbox with backend support
emorikawa,2016-03-04 19:36:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/c79e60cd57120a43c7e23b93a04dd3a774359adc,c79e60cd57120a43c7e23b93a04dd3a774359adc,fix(win): fix minor styling for buttons on windows
logandavis,2016-03-03 01:50:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/1dae837828e3764e615584cead6ac33ede1b1822,1dae837828e3764e615584cead6ac33ede1b1822,"Allow testing against local auth stack

Summary:
This commit changes how N1 parses config.cson very slightly
so that when ""env"" is set to ""local"" N1's auth flow can be
tested against local copies of Nylas' auth servers.

Test Plan: I tested it manually against a local auth stack. It worked!

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: kav-ya

Maniphest Tasks: T6690

Differential Revision: https://phab.nylas.com/D2671"
jackiehluo,2016-03-04 19:14:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/30fd7ff25f678e6c0c4db5e681381944b5612b7b,30fd7ff25f678e6c0c4db5e681381944b5612b7b,update(readme): Update themes and add new plugins
jstejada,2016-03-04 18:28:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/248467894e9364b03da9287660e4ec200ae1c10d,248467894e9364b03da9287660e4ec200ae1c10d,fix(lint)
bengotow,2016-03-04 02:14:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba0a2f0294fc44a1d011d85fa445b04ec0540203,ba0a2f0294fc44a1d011d85fa445b04ec0540203,"fix(onboarding): Do not load themes in the onboarding window

Do not load user themes into the onboarding window, because it uses a wide range of hard-coded colors and assets and should always be on-brand."
bengotow,2016-03-04 02:00:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/7219dd91d749f02f7d482501c08c46a7a4cb0df7,7219dd91d749f02f7d482501c08c46a7a4cb0df7,"fix(downloads): Replace stripped extensions, remember folder"
emorikawa,2016-03-04 01:30:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7ebf0ba2cb3a6abb4c958fa3ccf7812988a0dbc,e7ebf0ba2cb3a6abb4c958fa3ccf7812988a0dbc,feat(quote): add new quoted text detector for quote strings
emorikawa,2016-03-03 23:30:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e05fc45c80a047f0068d538075ff96949013a09,4e05fc45c80a047f0068d538075ff96949013a09,fix(quoted-text): add test case for intentional quote text failure
bengotow,2016-03-04 01:03:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/422f2f08e50534601a247dba5071d4c0b302452b,422f2f08e50534601a247dba5071d4c0b302452b,build(32-bit): Move a few docker files out of root of repo
bengotow,2016-03-03 22:39:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a69385918164636f964530ed8d72c1e0e2447f6,2a69385918164636f964530ed8d72c1e0e2447f6,fix(phishing): Tie to MessageStore so it works when msgs aren't ready
bengotow,2016-03-03 22:16:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/78fb480642e61d6ddc3e495a86abbf2852cc7171,78fb480642e61d6ddc3e495a86abbf2852cc7171,:lipstick:(bars): No email address overflowing phising / autoload images bars
bengotow,2016-03-03 22:10:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a190f36f85c490280797145b85af957a67fe2bb,6a190f36f85c490280797145b85af957a67fe2bb,"Merge pull request #1342 from mbilker/linux-32bit-docker

[RFC] Linux 32-bit Docker build"
ridem,2016-03-03 14:30:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc145132da5ed17bee1436403802e9a046f319bb,cc145132da5ed17bee1436403802e9a046f319bb,"Updated Regex to exclude mailto: links only

The rationale being it's covering all of the cases while still having a good performance.
Tracking a non-standard URL is not a user experience problem in a way. It's embedded in a <a href> tag."
ridem,2016-03-01 21:23:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d2b9aefa613879d9c83e10fefbbc6f0000c800c,2d2b9aefa613879d9c83e10fefbbc6f0000c800c,"Match only valid URLs for link tracking

As of now, link-tracking creates link tracking for every <a> tag, no matter the href attribute. This commit only creates link tracking for valid URLs.
The reason I wrote a new regex instead of rewriting linkTagRegex is that this regex is used by message-list.
https://regex101.com/r/jD5zC7/3 vs https://regex101.com/r/cK0zD8/2

Resolves: #1525"
jstejada,2016-03-03 21:45:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/1023600c7e2dcfb3eab790c9c33225383c692015,1023600c7e2dcfb3eab790c9c33225383c692015,fix(lint): Fix linter error in specs
jstejada,2016-03-03 20:37:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fd2d107b213f4c2d6d190f7ffd81fe531451de6,0fd2d107b213f4c2d6d190f7ffd81fe531451de6,"test(plugins): Add snooze and send later specs

Summary:
- Also refactors the code a bit for testability and maintainability
- Fixes #1515

Test Plan: - Unit tests

Reviewers: evan, drew, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2651"
bengotow,2016-03-03 02:13:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8a0154c44c6e8fcf9254a7e84b4c069965801c6,a8a0154c44c6e8fcf9254a7e84b4c069965801c6,"fix(MessageContainer): Fix state, prevent from getting different messages. #1175

Summary:
This fixes a serious issue where drafts could appear to be sending if
they were located in the same index of the message list as a draft which was
previously sending.

Under the hood this was due to two bad programming choices:

1) State based on props in MessageContainer requires correct implementation of
   componentWillReceiveProps. This is definitely an anti-pattern.

2) Using item index rather than clientId as the key for items in the MessageList
   caused containers to be given a different message prop when one was inserted,
   rather than just shifting the existing ones down and inserting a new one.

Test Plan: Not sure how to test this really...

Reviewers: drew, juan

Differential Revision: https://phab.nylas.com/D2673"
bengotow,2016-03-03 20:09:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a06db85db5f10771b3268410d831a017376f0ba,9a06db85db5f10771b3268410d831a017376f0ba,"fix(drafts): Lock drafts when they're deleted so they can't be revived by deltas

Summary:
When we delete drafts, they can sometimes come back because we receive deltas about them,
find that they're not in the cache, and re-save them.

This diff fixes that by permanently incrementing the optimistic change count, which was also do
to prevent deltas from changing threads while we're in the middle of a request that will change
them further. (This may not actually be necessary anymore, because we'd ignore the delta anyway
due to it's out-of-date version?)

Test Plan: Run a couple new tests

Reviewers: drew, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2665"
jackiehluo,2016-03-03 02:58:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/7dfd0cddf5fe931d822688e430615317d64f2278,7dfd0cddf5fe931d822688e430615317d64f2278,Bump version for node-emoji
mbilker,2015-12-07 23:13:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc328e890689bf2c8b5014a79acc73dcc454727d,cc328e890689bf2c8b5014a79acc73dcc454727d,fix(startup): remove beta references
mbilker,2015-12-06 19:40:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/385931ca9e0e938ff8893bde643c33af12e2741a,385931ca9e0e938ff8893bde643c33af12e2741a,"fix(launch): convert Atom's launch script for N1

Addresses #411

The `N1.sh` launch script fails to account for running from
`/usr/{local/}bin/nylas` where it would throw an error saying
it couldn't find the electron binary.

The Atom launch script works just fine and takes that into account.
The installed launch script here is a reflactored Atom launch script
that properly accounts for running the `nylas` executable and locates
the actual binary accordingly."
emorikawa,2016-03-03 00:24:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2aa575dc42a4880f0eb43d06e4447a174e9bd25,c2aa575dc42a4880f0eb43d06e4447a174e9bd25,fix(lint): fix linter error in search-match
emorikawa,2016-03-03 00:06:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/96df4873f053b1a9923c9e9ca8a96105df5f9b9c,96df4873f053b1a9923c9e9ca8a96105df5f9b9c,fix(composer): fix minor spacing issue on popout composer
emorikawa,2016-03-02 23:00:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a576015ed83d494f88f8e44a30b84925ac18984,9a576015ed83d494f88f8e44a30b84925ac18984,fix(find-in-thread): minor rename fixes
emorikawa,2016-03-02 22:46:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/800f3a041bef69e14014827b2f5a337a50359347,800f3a041bef69e14014827b2f5a337a50359347,"feat(find-in-thread): add the ability to find in a thread

Summary: Find in thread

Test Plan: todo

Reviewers: bengotow, juan

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2660"
bengotow,2016-03-02 18:28:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/53446f91aeaf4659d8d2292c8c858fdc64e27e9a,53446f91aeaf4659d8d2292c8c858fdc64e27e9a,fix(hidden-messages): Address diff feedback from @jstejada
bengotow,2016-03-02 18:05:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/f413386b801ac976f792302173275cb51427d474,f413386b801ac976f792302173275cb51427d474,"feat(hidden-messages): Filter trash/spam messages. Fixes #1135

Summary:
By default, the messages in a thread are now filtered to exclude
ones moved to trash or spam. You can choose to view those messages by clicking
the new bar in the message list.

When you view your spam or trash, we only show the messages on those threads
that have been marked as spam/trash.

Test Plan: Run a couple new tests

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2662"
bengotow,2016-03-02 01:34:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/a950b40175ae91f05654816823049acad30d6b94,a950b40175ae91f05654816823049acad30d6b94,rename(specs): A few more task renames
bengotow,2016-03-02 01:29:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/597b8215d6a2d12ff6c0514a163c5347a6fddc24,597b8215d6a2d12ff6c0514a163c5347a6fddc24,rename(tasks): Add the -task suffix to all tasks
bengotow,2016-03-02 01:24:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c28c66a8a395394d9761e248f8828f2f591606b,2c28c66a8a395394d9761e248f8828f2f591606b,"test(send): Improved coverage of metadata logic, file uploads

Summary: Just new specs. Tested by manually breaking lots of things in SendDraft

Test Plan: Run new tests

Reviewers: juan, drew, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2649"
emorikawa,2016-03-02 00:00:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/11c119393ecfbf7a21eb76b5800b0fbabf6bc9df,11c119393ecfbf7a21eb76b5800b0fbabf6bc9df,"fix(account): re-add token if a new one comes in

Summary: fix(account): allow users to reconnect accounts if auth has failed

Test Plan: manual

Reviewers: bengotow, juan

Differential Revision: https://phab.nylas.com/D2663"
emorikawa,2016-03-01 23:33:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/a421ee2a80118758bc3ab0be67690ae26ac589e8,a421ee2a80118758bc3ab0be67690ae26ac589e8,fix(account): re-add token if a new one comes in
bengotow,2016-03-01 22:50:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/5efb41031c168d0a929e5dd02d15804925e5dc18,5efb41031c168d0a929e5dd02d15804925e5dc18,"Merge pull request #1469 from e2corporation/readme-custom-envs

README Update"
bengotow,2016-03-01 22:50:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba07727fc43913b370f1cc984bff3ca8cc22a227,ba07727fc43913b370f1cc984bff3ca8cc22a227,"Merge pull request #1520 from mbilker/lint

Correct eslint errors from Travis"
mbilker,2016-03-01 15:58:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/f13fc466111449309dd96e08d055361ff1f7f05c,f13fc466111449309dd96e08d055361ff1f7f05c,"lint(*): correct eslint errors, warnings still exist

There are warnings in `spellcheck-composer-extension.es6` for the `while (true)`
loops."
jackiehluo,2016-03-01 04:46:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/af6f544cc98d386732ab175afd4874be0ad00c1a,af6f544cc98d386732ab175afd4874be0ad00c1a,"fix(composer-emojis): Insert emoji on tab, fixes #1511"
bengotow,2016-03-01 02:47:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/3fc6582718277afd7cfa21a10ce6cd61092b3451,3fc6582718277afd7cfa21a10ce6cd61092b3451,"es6(*): convert 20+ source files used in example packages to ES2016

There could be a few lurking bugs. Please test!"
bengotow,2016-02-29 18:56:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/3508e7b9d7064f5d76af55fb96c60f128e20ae48,3508e7b9d7064f5d76af55fb96c60f128e20ae48,"Revert ""bump(electron): 0.36.9. Fixes #911""

This reverts commit 3f211a023c2f664f049607dd631752afd9986574."
jstejada,2016-02-29 18:37:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3123b1d45e40f91c6b80bb0e8d63c6ccea114eb,c3123b1d45e40f91c6b80bb0e8d63c6ccea114eb,fix(specs): Update spy on `persistModel` to reflect actual behavior
bengotow,2016-02-29 18:36:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f211a023c2f664f049607dd631752afd9986574,3f211a023c2f664f049607dd631752afd9986574,bump(electron): 0.36.9. Fixes #911
e2corporation,2016-02-27 16:40:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4394e92d0732e8550af5eb1996b4fd82b03cbd9,e4394e92d0732e8550af5eb1996b4fd82b03cbd9,"Example Update

Update code snippet to show `env: custom`

Signed-off-by: Julien Chinapen <j.c@shogun.io>"
e2corporation,2016-02-27 13:50:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbda8181284145b8c245f31d50385af75d4511da,bbda8181284145b8c245f31d50385af75d4511da,"README Update

Updating Contributing guidelines to make note of the `env: custom` option so that a Sync Engine in a local environment may be accessed on an alternate IP.

Also APIRoot must contain quotes around the URL otherwise a config validation will be thrown.

Signed-off-by: Julien Chinapen <j.c@shogun.io>"
bengotow,2016-02-27 02:06:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/822a42cb5af31ed472b5d1c4dad83e91d462a6ac,822a42cb5af31ed472b5d1c4dad83e91d462a6ac,fix(aliases): Work window should reload when an alias is added
bengotow,2016-02-27 00:49:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/cae9feaff727e07452a47a82f8db998717769e4d,cae9feaff727e07452a47a82f8db998717769e4d,temp(onboarding): Remove checkbox for option not yet on prod
bengotow,2016-02-27 00:45:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a1fcc513b43a2f9b2cf9eac5010b48110c89813,3a1fcc513b43a2f9b2cf9eac5010b48110c89813,bump(version): 0.4.10 and changelog
bengotow,2016-02-27 00:39:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/76c9f26153868085c5b252d20a246bbfd7c8b74f,76c9f26153868085c5b252d20a246bbfd7c8b74f,"fix(plugin-auth): Once plguin auth succeeds, don't do it again"
jstejada,2016-02-26 23:22:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/29cf1fedcdfc185db9ca210915560900773c6c80,29cf1fedcdfc185db9ca210915560900773c6c80,"fix(templates): Open manage templates from composer window

- Fixes #1433
- Make Action.openPreferences global"
dregitsky,2016-02-26 23:13:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f184f2896efdb54bca5585108d0d11262bbdde4,8f184f2896efdb54bca5585108d0d11262bbdde4,fix(message-controls): add accountId to debug values copied to clipboard
bengotow,2016-02-26 23:00:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/011431f93a7bbd435a8b0de0316a1c1aa7991f21,011431f93a7bbd435a8b0de0316a1c1aa7991f21,fix(threads): Right-align the timestamps in the thread list
bengotow,2016-02-26 22:40:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ec0045677e7a83d10656fbdeb41339ce2154d4c,6ec0045677e7a83d10656fbdeb41339ce2154d4c,:lipstick:(print): Fix #1425
bengotow,2016-02-26 21:52:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/5691fc88caf6047179d65ca0833f91578d6fbac5,5691fc88caf6047179d65ca0833f91578d6fbac5,"fix(config): Store cursors with sync state, avoid constant config.cson writes

Summary:
Previously we were storing sync cursors in config.cson. They were by
far the most frequently updated piece of data in config. To make things worse,
all the writing was happening in the worker window - the main window was just
seeing the changes on disk and reloading.

I believe there's an edge case which causes the main window to read the config
file when it's mid-write and empty. This causes the accounts array to become
empty in the AccountStore and lots of downstream issues. It's also then possible
for the main window to write a config change of it's own and empty the file
permanently.

Test Plan: A few new tests to make sure this is backwards compatible.

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D2642"
bengotow,2016-02-26 21:28:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/3fe03000cf233d8bebebdac0f9a0522dc91e8c74,3fe03000cf233d8bebebdac0f9a0522dc91e8c74,bump(submodule): theme and plugin installation reporting fixes
dregitsky,2016-02-26 20:29:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/00109f28efa661bd1e771113e452ec3862c1b632,00109f28efa661bd1e771113e452ec3862c1b632,fix(message-controls): update email address for reporting
dregitsky,2016-02-26 20:26:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/b93182920f75f1cecd3f3275e5001af7ffa64510,b93182920f75f1cecd3f3275e5001af7ffa64510,feat(message-controls): Option to copy message IDs/metadata to clipboard
bengotow,2016-02-26 19:40:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/73ddd39cb2df1ad79fc36489f1c4ddd5fa770313,73ddd39cb2df1ad79fc36489f1c4ddd5fa770313,"fix(402s): Handling of Message Rejected, error messages with more detail"
jstejada,2016-02-26 19:24:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/038f348281e8d3d93355fdb2eed093c8e682ffcb,038f348281e8d3d93355fdb2eed093c8e682ffcb,fix(lint)
jstejada,2016-02-26 19:00:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ba13d0f0a98faab11b44fea4a968ea8e86c071b,7ba13d0f0a98faab11b44fea4a968ea8e86c071b,"fix(aliases): Fix regression to properly create/update/remove aliases

- This fixes #1428
- Add specs"
bengotow,2016-02-26 18:55:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/24ca99e9257895ec03d08828bc03c30035bbda51,24ca99e9257895ec03d08828bc03c30035bbda51,fix(focus): Focusing quickly enough can throw. Sentry #14942
emorikawa,2016-02-26 17:28:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d92f725524ce4bc13b4d9077563e56b3d125069,7d92f725524ce4bc13b4d9077563e56b3d125069,fix(tray): windows tray opens window on click
emorikawa,2016-02-26 17:20:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/250434e302e4135b8740cc9f1eed220a094e2874,250434e302e4135b8740cc9f1eed220a094e2874,"Merge pull request #1441 from mbilker/fix-tray-icon

Rename tray icon files for Windows and Linux"
grinich,2016-02-26 16:45:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b736d4ffc2529b958e9d2cec8f5b1d0de8e11156,b736d4ffc2529b958e9d2cec8f5b1d0de8e11156,"Merge pull request #1405 from P0WW0W/master

Less is More Theme"
mbilker,2016-02-26 16:37:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/653897470673636193ba5eed6f771e5f3101a6ed,653897470673636193ba5eed6f771e5f3101a6ed,lint(system-tray): code style consistent with rest of file
mbilker,2016-02-26 16:23:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0914d5a8a45bd25fa57f096157c96a9fd77d50f,f0914d5a8a45bd25fa57f096157c96a9fd77d50f,fix(system-tray): rename icon files for Windows and Linux
emorikawa,2016-02-26 02:58:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ca523a0d9d1a85df958e7022bb867617da7c5ea,7ca523a0d9d1a85df958e7022bb867617da7c5ea,fix(download): ignore non message deltas instead of erroring
emorikawa,2016-02-26 01:11:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b6272422d72efbdb765954ca3e3e617b22b32f9,0b6272422d72efbdb765954ca3e3e617b22b32f9,fix(account): notify if we have bad accounts
dregitsky,2016-02-26 01:09:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbd0aa35e688b9d681636628f3db2da1d78b5bce,fbd0aa35e688b9d681636628f3db2da1d78b5bce,fix(draft-syncback): fix bug preventing new draft metadata syncback
emorikawa,2016-02-26 01:04:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b3516d92a7a591c873258d11919131b0a92bb1e,2b3516d92a7a591c873258d11919131b0a92bb1e,fix(travis): fewer builds
bengotow,2016-02-26 00:28:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/080ff933f22fdc4d4efa0a3dd2501c4e1118be34,080ff933f22fdc4d4efa0a3dd2501c4e1118be34,fix(metadata): Saving on non-existent models should not throw
dregitsky,2016-02-26 00:20:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/24939caa783852a52bfa05e58742a52059116f32,24939caa783852a52bfa05e58742a52059116f32,fix(metadata): update metadata version when processing deltas
logandavis,2016-02-24 22:14:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/79b800c2a31e89552bea1fb44636c39f21222fee,79b800c2a31e89552bea1fb44636c39f21222fee,"Re-add SSL checkboxes with name ssl_required

Summary:
Now that IMAP auth without SSL is enabled,
those checkboxes that weren't doing anything can come
back.

Test Plan:
This change isn't fully tested and should be thoroughly
inspected (on staging?) before rollout. The N1 end works and sends
parameters correctly, but a 401 prevented local testing of the
interface between N1 auth and sync-engine auth.

Reviewers: bengotow, drew

Reviewed By: drew

Subscribers: kav-ya

Maniphest Tasks: T6666

Differential Revision: https://phab.nylas.com/D2632"
bengotow,2016-02-25 22:09:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/91a589bd32120a3cc292be150a808eb49e4cd551,91a589bd32120a3cc292be150a808eb49e4cd551,bump(version): 0.4.9 and changelog
jstejada,2016-02-25 22:02:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5f112f846335251f2b33ccdb4e55438bb210dee,c5f112f846335251f2b33ccdb4e55438bb210dee,fix(snooze): Do not display snooze buttons unless looking at inbox
emorikawa,2016-02-25 22:01:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/a63bc9e4b01c175c91a7e7888f5a6d6a05ef5dbb,a63bc9e4b01c175c91a7e7888f5a6d6a05ef5dbb,fix(analytics): fix send later and snooze analytics
bengotow,2016-02-25 21:39:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d130e15c89a33bea128659a30013c88c420af45,1d130e15c89a33bea128659a30013c88c420af45,perf(snooze): Don't wrap snooze label in unsafe container
bengotow,2016-02-25 21:32:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/ddb2de7b65bf6b65598492744d694e9733c5f9e6,ddb2de7b65bf6b65598492744d694e9733c5f9e6,fix(link/open tracking): Update error messages
bengotow,2016-02-25 21:32:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/5694b3e4fbea1ae7b2f07bbb64ea1d2cf20e1d7d,5694b3e4fbea1ae7b2f07bbb64ea1d2cf20e1d7d,fix(snooze): Hide N1-Snoozed from the category picker
emorikawa,2016-02-25 21:32:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/3edec42f066ccd6f396bb8a8ff712d78400a9236,3edec42f066ccd6f396bb8a8ff712d78400a9236,fix(analytics): clean up events
emorikawa,2016-02-25 21:31:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6e893223193cf8ade07afefbf2f1df52047bc09,e6e893223193cf8ade07afefbf2f1df52047bc09,fix(composer): focus on the absolute end when clicking near the bottom
jstejada,2016-02-25 21:06:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/f22fdbae492837e4b1a7ce774fbd6fa8a0b5cba2,f22fdbae492837e4b1a7ce774fbd6fa8a0b5cba2,"feat(snooze): Add snooze date label to snooze threads

- Adds a new InjectedComponentSet for the role 'ThreadList:Label'.
- Adds a new label to the thread list indicating the snooze date if the
  thread has been snoozed
- Coerces MailLabel to achieve this. This is a temporary hack, we should
  design a better view to display snooze date information"
bengotow,2016-02-25 20:48:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/f75eddb5185166d48353ed27aaced1094422e58b,f75eddb5185166d48353ed27aaced1094422e58b,"fix(link/open tracking): Remove intermediate metadata states, extra db lookup, dead code"
emorikawa,2016-02-25 20:33:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/18be81098e58d2f1d82dc90eb6ae9e0c29605c1e,18be81098e58d2f1d82dc90eb6ae9e0c29605c1e,"feat(analytics): add analytics to send later, snooze, tracking"
dregitsky,2016-02-25 20:07:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/097bc94cd7cdd76e0aef9679a0cda146927ea473,097bc94cd7cdd76e0aef9679a0cda146927ea473,"fix(composer-buttons): Fix broken icons on overflow, make buttons wrap"
emorikawa,2016-02-25 20:06:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/32862ad95106401742315eae3721414dd210276e,32862ad95106401742315eae3721414dd210276e,fix(popover): set min-width on popovers
jstejada,2016-02-25 19:55:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e67d0b4512e087a8153db3ef45f0f3cd48f9d99,3e67d0b4512e087a8153db3ef45f0f3cd48f9d99,"fix(date-utils): Update semantics of 'Tonight'

- If it is past 8pm, it will snooze until midnight"
emorikawa,2016-02-25 19:54:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/265eb2d4e9f800e69402f5573d0ee4c2b3d3149d,265eb2d4e9f800e69402f5573d0ee4c2b3d3149d,"fix(plugin): better errors if plugins are malformed

Fixed read assets"
jstejada,2016-02-25 19:41:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/9330f005498083c85b629ec9d298e9dc39621bfa,9330f005498083c85b629ec9d298e9dc39621bfa,:lipstick:(composer): Properly align 'X more' token
bengotow,2016-02-25 19:05:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/f4e6a6e2aace1e81afce522e20a1a8b66d497aa3,f4e6a6e2aace1e81afce522e20a1a8b66d497aa3,sp(translate): Transalate => Translate
jstejada,2016-02-25 18:37:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/164ac49fa522e5c1b944bbe7b3e0ecddfb3893b8,164ac49fa522e5c1b944bbe7b3e0ecddfb3893b8,"feat(snooze): Update message in toast when snoozing

- Adds new arg to ChangeLabelTask and ChangeFolderTask to override
  default description
- Adds custom description to task when snoozing"
bengotow,2016-02-25 18:38:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/91c05d5ab21b2a44bdf7664be9d106cee371a706,91c05d5ab21b2a44bdf7664be9d106cee371a706,"fix(swipe): Ignore err, since stdout = '' is an expected case"
jstejada,2016-02-25 18:23:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d05523b0f2b6ab7fb0c6ac1f930e51aa2a157b1,7d05523b0f2b6ab7fb0c6ac1f930e51aa2a157b1,fix(plugins): Add headers for composer popover + Fix in snooze popover
emorikawa,2016-02-25 18:06:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/717d20f96e2f89aff47f90b5cc2e278fe83ebb7e,717d20f96e2f89aff47f90b5cc2e278fe83ebb7e,fix(composer): minor padding fix in composer
bengotow,2016-02-25 05:06:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7682a7fa1cc0c6b03e4eb217aec5a6f24407e678,7682a7fa1cc0c6b03e4eb217aec5a6f24407e678,:lipstick:(sidebar): 1px fix for @drew ;-)
bengotow,2016-02-25 05:01:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5fe9cdf1810f7928add69792dacc1c9618df5c1,a5fe9cdf1810f7928add69792dacc1c9618df5c1,"fix(swipe): Make it easier to close snooze-confirm swipe state, fix double-popover issue"
bengotow,2016-02-25 04:13:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/428d37b4fe66d4b10a9238247ee69167db99a078,428d37b4fe66d4b10a9238247ee69167db99a078,"fix(swipe): Count '' as ""natural scrolling enabled"" on Mac OS X

This value is returned if the user has never touched the system preference option at all."
jackiehluo,2016-02-25 04:41:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c320d3a2850769ec902457cc2603609845acf2a,0c320d3a2850769ec902457cc2603609845acf2a,fix(composer-emojis): Adjust width for overflower
bengotow,2016-02-25 04:05:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/0553b7bde3f3ad346db6723eb446ab65d04d5adf,0553b7bde3f3ad346db6723eb446ab65d04d5adf,"fix(snooze): A few minor popover adjustments. See desc.

- Rather than have a `showing` prop on the fixed popover, I just remove it and put a span in it's place when it's gone. This means we always get componentDidMount when the popover appears and simplifies when to focus it's content.
- The fixed popover implements esc and blur behaviors itself
- The fixed popover uses the background-secondary color and works in dark mode
- The snooze items have hover and active states"
bengotow,2016-02-25 03:51:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f047359e6774f5367639d508a82294c046beb10,9f047359e6774f5367639d508a82294c046beb10,fix(thread-list): Invisible div extending into thread list blocks clicks
bengotow,2016-02-25 03:51:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2074eefc61d7bf7bd0f95501703990bf042fade,b2074eefc61d7bf7bd0f95501703990bf042fade,fix(star): Bulk star icon has never shown current state(?!)
jackiehluo,2016-02-25 03:04:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb88d7be40910ef0607b50b6704daee49a8e7375,bb88d7be40910ef0607b50b6704daee49a8e7375,Add Sunrise to README
jstejada,2016-02-25 02:21:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/80deadd5c7751902ef571992b0230f09e165bbc2,80deadd5c7751902ef571992b0230f09e165bbc2,:lipstick:(plugins): Add error messages back to plugin dialogs
bengotow,2016-02-25 02:15:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/162aac494345e2919fa92c2d16b0161472f0ceca,162aac494345e2919fa92c2d16b0161472f0ceca,"fix(build): Don't delete plugin package.json files, restore ellipsis (@sdw consulted HIG!)"
emorikawa,2016-02-25 02:04:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/68d08fda850bada5350df01254934c8a3dfb68ac,68d08fda850bada5350df01254934c8a3dfb68ac,fix(toggle): Will always turn off read receipt config on error
dregitsky,2016-02-25 01:56:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fe36c72a5a3cf33f9bef4351122445d55c778cd,6fe36c72a5a3cf33f9bef4351122445d55c778cd,fix(snooze): options text capitalization: title case => sentence case
jstejada,2016-02-25 01:53:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6a3abdbe03aaa8b2a4e78b9c096186ee59bbc50,d6a3abdbe03aaa8b2a4e78b9c096186ee59bbc50,fix(lint): Fix lint errors
dregitsky,2016-02-25 01:44:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c22fa7489581ef4a855fe499fd26cff18c78d92,4c22fa7489581ef4a855fe499fd26cff18c78d92,fix(send-later): options text capitalization: title case => sentence case
jstejada,2016-02-25 01:33:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/4aecf745ac27b32043149d4383831ded2a2efc29,4aecf745ac27b32043149d4383831ded2a2efc29,"fix(plugins): Several minor fixes:

- Fixes styling for snooze quick action button when thread selected
- Fixes snooze popover input debouncing
- Other interaction fixes"
jackiehluo,2016-02-25 01:26:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/059b229d65f240827ee8bc9999c6156e1570bc22,059b229d65f240827ee8bc9999c6156e1570bc22,Merge branch 'master' of github.com:nylas/N1
jackiehluo,2016-02-25 01:25:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a3527a4fc0f369c3e56edd535207eb3f758942e,5a3527a4fc0f369c3e56edd535207eb3f758942e,:art:(floating-toolbar): Fix height for floating toolbar pointer
bengotow,2016-02-25 01:20:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/e96848653e2ae4f5e5597ddf81882122bce9f7c0,e96848653e2ae4f5e5597ddf81882122bce9f7c0,fix(sync-draft): Accept the thread id given to the draft server-side
jackiehluo,2016-02-25 01:06:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/82e674292a6d173c3b92f12b2090cabe4a24ee3c,82e674292a6d173c3b92f12b2090cabe4a24ee3c,Merge branch 'master' of github.com:nylas/N1
dregitsky,2016-02-25 00:54:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c995f094ce88a8dd76367fa3f477d5b1a9c5a36,1c995f094ce88a8dd76367fa3f477d5b1a9c5a36,fix(open-tracking): quick CSS fix to thread list icon
emorikawa,2016-02-25 00:51:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/cbed789b94ce096566cb021906e9735809e1f86a,cbed789b94ce096566cb021906e9735809e1f86a,fix(snooze): look at allCategories instead of userCategories
bengotow,2016-02-25 00:44:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f23db60024b91dbb279b5ad43d47bc2ad696b4a,3f23db60024b91dbb279b5ad43d47bc2ad696b4a,:lipstick:(snooze): Fix swipe-to-snooze animation
dregitsky,2016-02-25 00:29:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/ceff83302bd928c44d2c91f685895ed305085b78,ceff83302bd928c44d2c91f685895ed305085b78,fix(plugins): Change server URLs for open/link tracking to final values
jstejada,2016-02-25 00:21:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a71018755f8b364cd918f916a128a169417abaa,5a71018755f8b364cd918f916a128a169417abaa,"fix(popover): Unmount any fixed popover that's already rendered

- Fix input styles for fixed popover"
dregitsky,2016-02-25 00:11:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/77500aadcc273c949897d49180966ee099418b03,77500aadcc273c949897d49180966ee099418b03,fix(sidebar): Only show add folder icon on hover
bengotow,2016-02-25 00:08:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e502d5fe5f68b97c84f15f47823a9be22ed4cf6,8e502d5fe5f68b97c84f15f47823a9be22ed4cf6,fix(swipe): Don't allow touch-up to re-settle already settled swipe gestures
emorikawa,2016-02-25 00:05:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0e76019fddf551f4a9254ecd45b020787c93968,f0e76019fddf551f4a9254ecd45b020787c93968,"fix(error-handling): handle offline for link tracking & read-receipts

Fix offline error handling of link tracking and read receipts

Fix ellipses for tooltips

Allow you to change the title in the error box"
jstejada,2016-02-24 23:33:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/3187d2f0d1ad58c1cd98178f9fdf144c837908ae,3187d2f0d1ad58c1cd98178f9fdf144c837908ae,"fix(snooze): Fix quick action button, remove italic from popover"
emorikawa,2016-02-24 23:25:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/793941ef92d3e81ed433d420cd0407418b8131f7,793941ef92d3e81ed433d420cd0407418b8131f7,fix(read-receipt): message status updates live
jstejada,2016-02-24 23:11:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/6458a90edaaaf43aa73bfa618efe42140a221913,6458a90edaaaf43aa73bfa618efe42140a221913,fix(snooze): Close popover on error
jstejada,2016-02-24 23:08:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/2eefbc28d3b34f3d12a1cf12b8629c61b735da3b,2eefbc28d3b34f3d12a1cf12b8629c61b735da3b,fix(snooze): Close popover when opening a new one
jstejada,2016-02-24 23:06:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/bae079dcc643679b4c195ee29440c1c971f376e0,bae079dcc643679b4c195ee29440c1c971f376e0,fix(snooze): Only allow snooze from inbox
jstejada,2016-02-24 23:02:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/b09ae2d317a3cc8711d205cad2308e215869499f,b09ae2d317a3cc8711d205cad2308e215869499f,fix(popover): Correctly position pointer
jstejada,2016-02-24 23:01:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7b1209b5cc91cf3e7d09239e57423a11ac918e0,f7b1209b5cc91cf3e7d09239e57423a11ac918e0,"fix(fixed-popover): Reposition when overflowing on `left` direction

- This is a temporary solution"
emorikawa,2016-02-24 22:45:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c5869c8670ad9a6d29bc03b4f63f55e1adcd5d1,1c5869c8670ad9a6d29bc03b4f63f55e1adcd5d1,feat(tracking): sticky tracking state and consolidate component
bengotow,2016-02-24 22:12:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb321f4bd2dae8e56694f3c93fca075c79dd312a,bb321f4bd2dae8e56694f3c93fca075c79dd312a,:lipstick:(composer): Shadow on pointer of floating toolbar
bengotow,2016-02-24 21:49:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb824f36facdd79d420a30afed9256ae8f4bb2b2,bb824f36facdd79d420a30afed9256ae8f4bb2b2,"fix(feedback): Remove feedback btn, update ""N1 Help"" in menu bar"
bengotow,2016-02-24 21:44:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e34c889c67fc5da19f4eb31c49e8cafa8bcf8d0,5e34c889c67fc5da19f4eb31c49e8cafa8bcf8d0,:lipstick:(send-later): Minor draft list styling changes
bengotow,2016-02-24 21:16:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/030d86e3bd121f7358d01024f1c6d63c56695c9b,030d86e3bd121f7358d01024f1c6d63c56695c9b,fix(snooze/send-later): Change chrono config to always prefer dates in future
emorikawa,2016-02-24 21:12:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecf3909f7d3cd1fc1148e0347e26e1e96ff66466,ecf3909f7d3cd1fc1148e0347e26e1e96ff66466,fix(read-receipts): fix padding and styles under selection
dregitsky,2016-02-24 21:02:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/29785c209e9ab295e47a2eafa5b3a6313c7bf30a,29785c209e9ab295e47a2eafa5b3a6313c7bf30a,fix(read-receipts): threadlist icon vert align and placeholder when missing
emorikawa,2016-02-24 20:55:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/4158e598e0767f1141e9f0f43715539d714938fd,4158e598e0767f1141e9f0f43715539d714938fd,fix(tracking): tracking pixel won't register if it's from you
emorikawa,2016-02-24 20:31:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/ada4256dc82bc9a61c576f82532bb3a1ad41b9a8,ada4256dc82bc9a61c576f82532bb3a1ad41b9a8,fix(lint): fix less and js linter issues
emorikawa,2016-02-24 20:24:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dd7a9600aee862ce2e50d2b58f3634e0cc2c12d,9dd7a9600aee862ce2e50d2b58f3634e0cc2c12d,"fix(tracking): fix link tracking and read receipt plugins

Fix broken links in link tracking and read receipts

Fix bug in email frame where it wouldn't adjust the height even when
content changed

MessageItem bodies automatically clear the MessageBodyProcessor cache when
the message contents (including metadata) change.

Remove unused Account stuff from nylas-observables

Plugins appIds properly read if there's an environment set"
bengotow,2016-02-24 19:19:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/90b9570f91214f94bae44416aae13235ca0bb431,90b9570f91214f94bae44416aae13235ca0bb431,fix(send-later): Resolves a variety of small bugs from QA
dregitsky,2016-02-24 20:17:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/f88445af15e9287d912812ff4fe61eee07840f50,f88445af15e9287d912812ff4fe61eee07840f50,fix(plugins): more fixes to open/link tracking urls
dregitsky,2016-02-24 20:00:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/0550b092b74e84e8d30619edf928d89a86d0c5f7,0550b092b74e84e8d30619edf928d89a86d0c5f7,fix(plugins): fix open tracking and link tracking URLs
jstejada,2016-02-24 19:50:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/e02b924efb9e18d08f2152a9604f26b59d38083d,e02b924efb9e18d08f2152a9604f26b59d38083d,":lipstick: (send-later): Update placeholder copy, again"
jstejada,2016-02-24 19:43:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/300d5dbc7f811a384811a9877f09d18182242027,300d5dbc7f811a384811a9877f09d18182242027,"fix(sidebar): Prevent error in snooze item when category doesnt exist

- Add Snooze category to locked and hidden categories to prevent from
  directly moving stuff to it and showing up in the user categories
  section"
jackiehluo,2016-02-24 19:32:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/42062f23db36fb2bd6f22c956edb2f25f384cc57,42062f23db36fb2bd6f22c956edb2f25f384cc57,Merge branch 'master' of github.com:nylas/N1
jackiehluo,2016-02-24 19:25:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/630448634c5d2673c9ab459531bd4c0c3196a875,630448634c5d2673c9ab459531bd4c0c3196a875,":art:(composer-emojis): Remove pointer and adjust styling

Summary: The floating toolbar now takes an optional boolean to decide whether it shows the pointer.

Test Plan: Tested locally.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2628"
jstejada,2016-02-24 19:22:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f591763801c1c378391b48c6227ea84524cfdf6,3f591763801c1c378391b48c6227ea84524cfdf6,":lipstick: (popover): Properly apply styles to input inside popover

- Fix tabindex in send later popover
- Update placeholder copy"
jstejada,2016-02-24 18:50:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/ce17d8ab1eed54e5628785af8105ca2e75df8216,ce17d8ab1eed54e5628785af8105ca2e75df8216,feat(snooze): Add snooze item to sidebar
jstejada,2016-02-24 18:28:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/3125d4d2ff8806bb5f1b0c8dc829a4aee9b9e303,3125d4d2ff8806bb5f1b0c8dc829a4aee9b9e303,:lipstick: (snooze): Add quotes to popover placeholder
jstejada,2016-02-24 18:26:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0da487e023215a51d6d2520822856c7ed57de3b,c0da487e023215a51d6d2520822856c7ed57de3b,fix(snooze): Close all popover types when submitting date with enter
jackiehluo,2016-02-24 18:13:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/c485ad8d66570a108f641fb204cad183acfd5f2d,c485ad8d66570a108f641fb204cad183acfd5f2d,Merge branch 'master' of github.com:nylas/N1
jackiehluo,2016-02-24 18:07:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef0cf7e3dd748a4922f21c92bd5c11ac8d4440cf,ef0cf7e3dd748a4922f21c92bd5c11ac8d4440cf,":art:(composer-emojis): Fix styles in emoji picker

Summary: Adjust sizing, padding, etc., to fit better with overall app design.

Test Plan: Tested locally.

Differential Revision: https://phab.nylas.com/D2627"
jstejada,2016-02-24 17:57:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7a6643f76c8eff82d4ebc72538bed127c19a6e9,b7a6643f76c8eff82d4ebc72538bed127c19a6e9,fix(date-utils): Stop mutating the moment prototype
bengotow,2016-02-24 09:04:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/b106bed2a49f05286ff0faff56f3cbe541050269,b106bed2a49f05286ff0faff56f3cbe541050269,"fix(*): misc fixes for warnings, appearance of PL indicators"
jstejada,2016-02-24 08:19:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f87ab25dda9be0d0c84c3c746d9958a513d589e,9f87ab25dda9be0d0c84c3c746d9958a513d589e,"fix(signature): Update signature when account is changed in composer

Summary:
- Fixes #1239
- Adds action in composer view to indicate when draft partcipants have
  changed. This seemed like the simplest way to listen for this change without
  adding another extension point
- Updates signature plugin to listen to this action and update signature
  accordingly
- Adds test

Test Plan: - Unit tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2614"
jstejada,2016-02-24 08:02:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7dd2222f92491f92e83f7b8d9012e0014deeb45,a7dd2222f92491f92e83f7b8d9012e0014deeb45,"fix(date-utils): Revert to accessing protype directly - fix lint error

This reverts commit ba5b4cc1e0f533375c86678ae9f3e43784e7d14d."
jstejada,2016-02-24 07:25:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ec30d0c7b622c70ba894a11293f896aaa8fa844,7ec30d0c7b622c70ba894a11293f896aaa8fa844,"fix(system-tray): Move Tray to main process

Summary:
- Fixes #1223
- Still uses a package in the renderer process to listen to changes in
  the unread count and have access to the canvas api.
- Renderer process will write icon to disk and inform main process that
  it should update the icon

Test Plan: - Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2613"
bengotow,2016-02-24 07:02:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba5b4cc1e0f533375c86678ae9f3e43784e7d14d,ba5b4cc1e0f533375c86678ae9f3e43784e7d14d,"fix(send-later): Override moment's __proto__ - oclock wasn't ""sticking""?"
jstejada,2016-02-24 06:55:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/d34f30cc3e1197c9445ae591b86c64a433b12fb7,d34f30cc3e1197c9445ae591b86c64a433b12fb7,":lipstick: (plugins): Clean up constants in plugins

- Fix some eslint issues"
jstejada,2016-02-24 06:38:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a55a126b691aad396cddb3a3cc61785f97fa265,3a55a126b691aad396cddb3a3cc61785f97fa265,fix(snooze): Fix react component warnings
bengotow,2016-02-24 06:29:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/9315ee33855f3ef01cd1d8075960187761e817e9,9315ee33855f3ef01cd1d8075960187761e817e9,fix(metadata-plugins): Add production app ids
jstejada,2016-02-24 04:08:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/4788ec2dd15a8b3507ba5646d750684f93294722,4788ec2dd15a8b3507ba5646d750684f93294722,fix(styles): Fix popover styles caused by incorrect merge
jstejada,2016-02-22 23:48:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5ee19766016dd423bed578700f63f6027512b6c,a5ee19766016dd423bed578700f63f6027512b6c,"feat(snooze): Adds initial design pass and update snooze popover

Summary:
- Add FixedPopover, an absolutely positioned popover component to use for swipe snoozing:
  - This component needs to be finished, as its current behavior is primarily for the snooze plugin
- Updates popover.cjsx to properly render pointer for thesnooze popover for the `down` direction
- Adds new design assets
- Adds date input to snooze popover

Test Plan: - TODO

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2624"
dregitsky,2016-02-24 03:19:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/0237b8cfd228039ae5c398ab30045edc0f81a9da,0237b8cfd228039ae5c398ab30045edc0f81a9da,fix(metadata-plugins): update all appIds and URLs for staging
emorikawa,2016-02-24 02:51:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/50a104c1fda8edabc4238e3b9ca7bc12405cf905,50a104c1fda8edabc4238e3b9ca7bc12405cf905,fix(link-tracking): fixes in link-tracking
emorikawa,2016-02-24 02:20:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd6cefc3f88c2a3070d33301a57ff57483f0e0d6,dd6cefc3f88c2a3070d33301a57ff57483f0e0d6,fix(read-receipts): Style fixes to link tracking and read receipts
emorikawa,2016-02-23 23:22:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d11da4a5e5ef772db6a70e94807841d5e9ba3e4,9d11da4a5e5ef772db6a70e94807841d5e9ba3e4,feat(read-receipts): show status on MessageItem
bengotow,2016-02-24 02:35:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ef84e476a714ea9bf7071f9d80717f911884ae8,9ef84e476a714ea9bf7071f9d80717f911884ae8,"fix(auth-failure): Warn of disconnect on 403s, fix logic"
bengotow,2016-02-24 01:51:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e96a169a284f15338a045a42d989f3daa685e5f,7e96a169a284f15338a045a42d989f3daa685e5f,:lipstick:(plugins): Updated assets and a bit of error handling
jackiehluo,2016-02-24 00:46:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7485e0699db241cd46845fc54beb436039c5ccf,b7485e0699db241cd46845fc54beb436039c5ccf,Merge branch 'master' of github.com:nylas/N1
bengotow,2016-02-23 23:56:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a12df5dc6ff968329c8c21c24ef654eb9fe4664,0a12df5dc6ff968329c8c21c24ef654eb9fe4664,:lipstick:(toolbar): Baseline fix for mark as read
bengotow,2016-02-23 23:40:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/6eed3ce0549deadcafa4d66adfaf67727249ccae,6eed3ce0549deadcafa4d66adfaf67727249ccae,fix(composer): Redo toolbar styling with theme variables + minor fixes
bengotow,2016-02-23 22:37:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/686a3f4fdade84364bcc19a11a4d1642d44c9a17,686a3f4fdade84364bcc19a11a4d1642d44c9a17,":lipstick:(snooze): Quick action styling, draft pencil alignment"
bengotow,2016-02-23 22:20:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/d674a665fed525ca00815cf52d4553100193424b,d674a665fed525ca00815cf52d4553100193424b,fix(send-later): Re-order so send later always appears beside send
emorikawa,2016-02-23 22:18:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac5266a1a51baa6bdcc9f57771cfe7ffd356c562,ac5266a1a51baa6bdcc9f57771cfe7ffd356c562,fix(linter): fix less linter error
emorikawa,2016-02-23 22:17:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/f76acfa4419fb7e62ab4ce39796aca2b36c31870,f76acfa4419fb7e62ab4ce39796aca2b36c31870,fix(inbox-zero): don't show inbox zero when syncing
emorikawa,2016-02-23 22:12:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1a126893ca6cd317bea0e904d3bc53fa6fac519,a1a126893ca6cd317bea0e904d3bc53fa6fac519,fix(img): png-crush images
emorikawa,2016-02-23 21:55:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb09929ae722039e36b05f2c4674bec38b2b8953,eb09929ae722039e36b05f2c4674bec38b2b8953,fix(composer): fix styles in popout composer
bengotow,2016-02-23 21:52:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/9541343835ea92473003edfe44c0754cb9ad649c,9541343835ea92473003edfe44c0754cb9ad649c,:lipstick:(send-later): Lots of styling of send-later
emorikawa,2016-02-23 21:42:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/6349a1ff0c5daa4f4b601ef82036cf584cba4427,6349a1ff0c5daa4f4b601ef82036cf584cba4427,feat(composer): new composer footer and icon design
jackiehluo,2016-02-23 19:34:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d8461381e71bc9affcba1b2f591509d9c791699,5d8461381e71bc9affcba1b2f591509d9c791699,Merge branch 'master' of github.com:nylas/N1
emorikawa,2016-02-23 18:49:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdd015cfab7c5bb7511ee3b09a1720163393b4cd,cdd015cfab7c5bb7511ee3b09a1720163393b4cd,feat(inbox-zero): add minimal graphic to inbox when no threads
bengotow,2016-02-23 18:48:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0123e2b701640b442fd2526b713ae6f6103d3d8,c0123e2b701640b442fd2526b713ae6f6103d3d8,:lipstick:(onboarding): Incorrect button padding during onboarding
jackiehluo,2016-02-23 18:38:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/5aa0d315e057ac0414d667723cbdaa417579160b,5aa0d315e057ac0414d667723cbdaa417579160b,Merge branch 'master' of github.com:nylas/N1
bengotow,2016-02-23 18:35:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/8ed28f76d166626691d56da3cbc7d022033b3c8b,8ed28f76d166626691d56da3cbc7d022033b3c8b,:lipstick:(icon): A delightful seafoam green icon
dregitsky,2016-02-23 02:03:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/9bc7bbac6170623b88c5e9e74dd23709bda6e1b6,9bc7bbac6170623b88c5e9e74dd23709bda6e1b6,hack(plugin-auth): temporarily disable confirmation dialog for plugin auth
bengotow,2016-02-23 01:41:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/625c419b72fa96f520f348a81fc3164f01b76d77,625c419b72fa96f520f348a81fc3164f01b76d77,bump(verison): 0.4.8 beta
bengotow,2016-02-23 01:41:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/9de55ea5dabab068cb1762d620603d8ce5e9b374,9de55ea5dabab068cb1762d620603d8ce5e9b374,fix(list): Don't drag the item being edited. Fixes #1386
bengotow,2016-02-23 00:08:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/55df92588f2c0dc0aabaca5175b814b0a014ac0a,55df92588f2c0dc0aabaca5175b814b0a014ac0a,fix(list): Restore keyboard cursor to single pane mode
bengotow,2016-02-23 00:08:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/549ae38b6c8c62f791d2a40b07e37c986e53aca6,549ae38b6c8c62f791d2a40b07e37c986e53aca6,"fix(swipe): Better animation, callback for action completion"
bengotow,2016-02-22 20:07:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/42793e6b0c7654acf9081de4144bdd8babea22cb,42793e6b0c7654acf9081de4144bdd8babea22cb,:lipstick: Minor visual tweaks to win32 + dark mode
bengotow,2016-02-22 19:12:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef45bb07ecc0f777459d7d3e035e51e64344714d,ef45bb07ecc0f777459d7d3e035e51e64344714d,"feat(swipe): Touch support (for MSFT Surface and others), natural scrolling detection for Mac OS X

Bonus - you can test touch events in Chrome using device mode: https://developer.chrome.com/devtools/docs/device-mode"
bengotow,2016-02-22 18:57:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b923086c2a2595d4be7805643a5d6293e253f1e9,b923086c2a2595d4be7805643a5d6293e253f1e9,fix(drag): Patch for crash on dragging threads
bengotow,2016-02-22 18:14:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/54ecb2bd58fb79e8503600c03d47cf9ef7f1a106,54ecb2bd58fb79e8503600c03d47cf9ef7f1a106,:lipstick:(search): Fix clear button positioning
bengotow,2016-02-20 03:25:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/20510a1e8fc0a6d510042d82700ab07dab4defc9,20510a1e8fc0a6d510042d82700ab07dab4defc9,fix(copy): Sending draft => Sending message. Resolves #1275
bengotow,2016-02-20 03:19:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/b6ebefe1cabb82a83ba5c896f4579ac96914311a,b6ebefe1cabb82a83ba5c896f4579ac96914311a,"fix(compose): More defensive check when switching from address, see description

This fixes #1341, but is more restrictive:

- You cannot switch From: accounts if the draft was retrieved from the sync engine (authored via Gmail or via another copy of N1. The sync-engine gives drafts a non-null threadId)

- You cannot switch From: accounts if the draft is a forward from an existing thread.

These two restrictions are unfortunately necessary to ensure that we don't have to download attachments we don't have to re-upload them to another account on the sync-engine. We could write code for this in the future but it's going to be gross."
bengotow,2016-02-20 03:07:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c8c13996562687b8a2408addf8f83715baf1df1,5c8c13996562687b8a2408addf8f83715baf1df1,"fix(print): Add print button to preview, don't print immediately (Fixes #1352)"
bengotow,2016-02-20 02:59:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f8f1750cc3a2d65ade1b9426565540e1c71f5ce,9f8f1750cc3a2d65ade1b9426565540e1c71f5ce,fix(compose): Enable esc-to-cancel from Cannot Send dialog (Fixes #1383)
bengotow,2016-02-20 02:54:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1cd1056cc9bb3703b0030389c4522e06c3e6402,f1cd1056cc9bb3703b0030389c4522e06c3e6402,fix(attachments): fixes + specs for download `on-receive` option
bengotow,2016-02-20 02:52:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/840b48c2df7db5de7e9ed0a699ff58d21a3076af,840b48c2df7db5de7e9ed0a699ff58d21a3076af,":lipstick:: Experimental app icon, fix for merge conflict"
bengotow,2016-02-20 02:22:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/55e1c85964abcdf272dbdf05169d342864065aa7,55e1c85964abcdf272dbdf05169d342864065aa7,bump(version): 0.4.7 beta
bengotow,2016-02-20 02:22:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/592374c0dc2cfccc570cb9ea1517e273da077b9b,592374c0dc2cfccc570cb9ea1517e273da077b9b,"feat(swipe-to-*): Gesture support and animation in thread list

Summary:
This diff does two things:
- It adds a new SwipeContainer that makes it easy to implement swipe gestures. This is built into listTabular, so you can create a list and define onSwipeLeft/Right to enable gestures.

- It adds support for basic add/remove animations to the thread list. This works by adding a CSS transition to `top` and also leaving removed rows around for a specified time. (these times need to match.) Pretty much just cloned the core idea from TimeoutTransitionGroup.

Test Plan: No tests yet

Reviewers: evan, juan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2581"
emorikawa,2016-02-19 23:35:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb4e806afec09d1458736d52cdc6a77d1c824b24,fb4e806afec09d1458736d52cdc6a77d1c824b24,"feat(menu): add right click menu

Summary:
Adds a right click menu to the thread list
Moving to folders and labels #TODO

Test Plan: TODO

Reviewers: bengotow, juan

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2609"
bengotow,2016-02-19 23:31:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/95aba569798ccda558b9e0f63927775cc4961c8b,95aba569798ccda558b9e0f63927775cc4961c8b,fix(sending): Tiny fix for strange vertical space when sending
jstejada,2016-02-19 21:24:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/703d7bc2e0bf91e7b495ce85be3529b6d881eeb6,703d7bc2e0bf91e7b495ce85be3529b6d881eeb6,"fix(transaction): Trigger changes only after COMMIT has been executed

- Fixes #1327
- This caused the dataase query inside QuerySubscription to, on occassion,
  return stale results from the database because the database hadn't
  finished writing. This consequently caused the QuerySubscription to
  build and incorrect result set."
dregitsky,2016-02-19 20:30:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/199a62d70e145e0683cab555e48fd65bc6bbd678,199a62d70e145e0683cab555e48fd65bc6bbd678,"feat(new-plugins): add open tracking and link tracking plugins

Summary:
Adds two (very similar) plugins - Open Tracking and Link Tracking.
Both can be enabled via a button in the composer. Open tracking
inserts a tracking pixel right before send, and link tracking replaces
all links with tracked redirects. Both plugins use the new Metadata
service to store their open/click counts, and have backend servers to
respectively serve the pixel image or handle the redirects. Requests
also trigger a metadata update to increment the open/click counters.

Test Plan: Manual for now

Reviewers: evan, bengotow, drew

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2583"
jstejada,2016-02-19 19:52:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/aedc09b2b3dc997a914914d1147f7033765a697b,aedc09b2b3dc997a914914d1147f7033765a697b,fix(metadata): Correctly call modelify for latest models when setting metadata
bengotow,2016-02-19 19:29:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/b65c4104b4d8e0d8e60053b459378672c16ff13e,b65c4104b4d8e0d8e60053b459378672c16ff13e,lint(emoji): Fix lint failure from spacing
khamidou,2016-02-19 19:20:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/97f968a8089a8c803daec5c951afe4d14f6bb03a,97f968a8089a8c803daec5c951afe4d14f6bb03a,"[auth] Change a Google OAuth parameter

Summary:
Some of our users who reauth are getting weird errors from Google — it seems that in some cases Google OAuth doesn’t pass us a `refresh_token`, even though we ask for one by passing `approval_prompt=force` (I’ve landed a commit to log more details about this in edgehill-server —- https://github.com/nylas/edgehill-server/commit/6e984ffa268d8523b6f98be8532c4ebfaa2d1536 — but this won’t fix the problem).

Apparently, Google recently « soft-deprecated » `approval_prompt` in favor of a new parameter called `prompt`, which does mostly the same thing (https://developers.google.com/identity/protocols/OAuth2WebServer#formingtheurl)

This diff replaces `approval_prompt` by `prompt`.

Test Plan: Tested by authing a Gmail account and checking that it worked.

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: emfree

Differential Revision: https://phab.nylas.com/D2557"
bengotow,2016-02-19 18:28:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/98529dc7a8bb8ccab6cf079a6bcdf127e5b3748f,98529dc7a8bb8ccab6cf079a6bcdf127e5b3748f,fix(participants): Update specs to reflect that spacing is now in CSS
bengotow,2016-02-19 00:09:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3ca9c4a9ef2e33b0570d172b8d1724141c83cd4,c3ca9c4a9ef2e33b0570d172b8d1724141c83cd4,fix(launchscreen): hack until renderer sync fixed upstream
bengotow,2016-02-18 23:49:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/d722153de7037ef499861ed2665792a7c13082a7,d722153de7037ef499861ed2665792a7c13082a7,fix(lint): LESS lint issues
bengotow,2016-02-18 23:21:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/b6a1674173e85a71716ea534e1cb86498f8787f3,b6a1674173e85a71716ea534e1cb86498f8787f3,"💄: White buttons, dropdown / popover cleanup, hairline dividers"
grinich,2016-02-18 21:23:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/a673a698fd6182608359e30f989dd785e0bc6874,a673a698fd6182608359e30f989dd785e0bc6874,"Merge pull request #1350 from jamiewilson/patch-1

Adding Darkside theme"
jstejada,2016-02-18 20:14:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/74bb98b337c099dd44cce1b8948804090a6917d0,74bb98b337c099dd44cce1b8948804090a6917d0,"fix(draft-list): Display `,` separated participants list"
jstejada,2016-02-18 20:06:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0bdeb3a02bdd59f2f8d3b4adb3b2758f769213a,d0bdeb3a02bdd59f2f8d3b4adb3b2758f769213a,:art:(composer): Fix `show-more` token style in collapsed participants
jstejada,2016-02-18 19:05:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f820854d4923324719969178229c1f8a228a183,9f820854d4923324719969178229c1f8a228a183,fix(issue-template): Update formatting
jstejada,2016-02-18 18:44:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb52510c876745ee5e7e04441f9efa32c82c2708,bb52510c876745ee5e7e04441f9efa32c82c2708,fix(snooze): Check if snooze category is defined when creating
jstejada,2016-02-18 18:00:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/a841417011aad244d8d13ebeb1e417056be041bc,a841417011aad244d8d13ebeb1e417056be041bc,"feat(snooze/send-later): Add snooze and send later plugins

Summary:
- Add initial version of snooze and send later plugins
- Tests are missing since this will probably heavily change before we are done with them

Test Plan: - TODO

Reviewers: drew, bengotow, evan

Reviewed By: bengotow, evan

Differential Revision: https://phab.nylas.com/D2578"
bengotow,2016-02-18 18:03:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/21ce6355a51f4ea50958862efe8c1a71cec909eb,21ce6355a51f4ea50958862efe8c1a71cec909eb,gh: Issue template isn't actually displayed as markdown
bengotow,2016-02-18 17:55:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/42d43cf80247fc0b0161c7154f8cd76c8e2a682d,42d43cf80247fc0b0161c7154f8cd76c8e2a682d,gh: Initial commit of issue template
bengotow,2016-02-18 06:21:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ca844bd75839db2687401e4bee0987b803129a1,7ca844bd75839db2687401e4bee0987b803129a1,"fix(onboarding): Missing require for Actions, bad CSS"
jstejada,2016-02-17 22:54:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/0217e5a509ac9c475649b775d784311f33a8ab07,0217e5a509ac9c475649b775d784311f33a8ab07,"feat(metadata): Switch to storing metadata on models

Summary:
 - Adds a class ModelWithMetadata which models can now extend from
 - Instances of this class can query metadata for a plugin via
   `obj.metadataForPluginId(pluginId)`
 - To observe changes on metadata it is sufficient to observe database changes on
   the model. e.g.:
   `DatabaseStore.findAll(Thread,
   [Thread.attributes.pluginMetadata.contains(pluginId)])`
 - To set metadata a new action has been created: Actions.setMetadata
 - Adds a helper observable in nylas-observables to query for models with
   metadata
 - Merges CreateModelTask and UpdateModelTask into SyncbackModelTask
 - Update SendDraftTask ans SynbackDraftTask to handle metadata changes

Test Plan: - Unit tests

Reviewers: drew, evan, bengotow

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2575"
grinich,2016-02-17 04:24:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/458b0fbe9186839f346d747adf8c5e081e823bad,458b0fbe9186839f346d747adf8c5e081e823bad,Add Waffle.io on deck badge to README
jstejada,2016-02-17 02:03:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ca04c579e8c6cbf16195743416e213fc58eca20,7ca04c579e8c6cbf16195743416e213fc58eca20,"fix(account-prefs): Update account save logic to prevent incorrect saves

- This fixes #1354 and #1235
- This issue was caused because the account details preferences
  component was keeping as state all of the account object fields. `setState` works
  like `extend`, so when the account changed, state was set to the new set of account fields,
  but the old values were only removed if they were overriden, and remained the
  same if the field did not exist in the new state object.
  Specifically, when a new account was added, setState was called with
  `{..., defaultAlias: undefined}` which did /not/ remove the  the defaultAlias
  from the previous state.
- Switched to managing state with a top level key `account`"
jstejada,2016-02-17 01:26:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/139f25e12f61e5cc451a5928ea86ace2d314b123,139f25e12f61e5cc451a5928ea86ace2d314b123,"fix(account-store): Update focused perspective after triggering

- This prevents account store changes from propagating in the incorrect
  order"
bengotow,2016-02-16 19:41:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f6dff7da82b70b93086e59a242eca9e4a0eed57,8f6dff7da82b70b93086e59a242eca9e4a0eed57,"fix(important): Remove todo, reference to usesImportantFlag. Fixes #1331"
bengotow,2016-02-16 19:40:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9f7274bcfa88a7a6c6f53416fe2025b18ba7a59,a9f7274bcfa88a7a6c6f53416fe2025b18ba7a59,fix(undo): Queuing an empty array should not trigger undo-redo store
jamiewilson,2016-02-16 19:31:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/38e4765eac8b06b6c97a11985ef509f0aed673c2,38e4765eac8b06b6c97a11985ef509f0aed673c2,"Adding Darkside theme

Can be seen here: http://jamiewilson.io/darkside/ and here: https://github.com/jamiewilson/darkside"
bengotow,2016-02-16 17:43:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc686feabba2022e6a21aa1a70e8d638b0e34c1b,cc686feabba2022e6a21aa1a70e8d638b0e34c1b,"Merge pull request #1324 from sethvargo/sethvargo/apple_mail

More closely match Apple mail shortcuts"
mbilker,2016-02-16 02:12:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd162ac4da60ee06c359b918129e528c93102ef1,fd162ac4da60ee06c359b918129e528c93102ef1,fix(publish-nylas-build): return undefined to prevent grunt interpreting as failed build
mbilker,2016-02-16 01:26:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/dce7484e44483e9645612f1eb05d4b98602e37ac,dce7484e44483e9645612f1eb05d4b98602e37ac,fix(mkrpm): remove spaces before/after `=`
mbilker,2016-02-16 01:07:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1c3ecb07465d3d82a3f6fdf1a7f3842ad691545,d1c3ecb07465d3d82a3f6fdf1a7f3842ad691545,fix(docker): add build dependency libgnome-keyring
mbilker,2016-02-16 01:06:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/13e5434abcb7fb7b6b55abf02c2e1af7f4010433,13e5434abcb7fb7b6b55abf02c2e1af7f4010433,fix(mkrpm): add in missing `then` command
mbilker,2016-02-16 01:05:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/37005ca80b669417677a88850468ff58914b8620,37005ca80b669417677a88850468ff58914b8620,fix(build): add python as build dependency
jstejada,2016-02-16 00:53:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b4c660c1086fd2ff0205bbfe5397783a598b6a9,8b4c660c1086fd2ff0205bbfe5397783a598b6a9,fix(mail-rules): Fix undefined reference to ReprocessMailRulesTask
mbilker,2016-02-16 00:42:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb2f45534e088ccfd38403d112cb15fbf1bb3ccf,eb2f45534e088ccfd38403d112cb15fbf1bb3ccf,fix(build): typo with PUBLISH_BUILD environment variable
mbilker,2016-02-16 00:25:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fcd9d0a22c844be75cab9982d2131efa54626aa,0fcd9d0a22c844be75cab9982d2131efa54626aa,fix(build): use special docker build file to run appropriate build tasks
mbilker,2016-02-16 00:19:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/e64f573d8a062140cbfdc8abdf3c580adb7027e3,e64f573d8a062140cbfdc8abdf3c580adb7027e3,fix(build): add ubuntu 32-bit docker build
emorikawa,2016-02-15 23:12:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/3298a38d6a4b015e6ef19403d1981fd2147f1900,3298a38d6a4b015e6ef19403d1981fd2147f1900,"fix(composer): fix dissapearing participant bug w/ multiple composers

If you had multiple composers on a single thread, all but the last
composer would lose its participants. This was because once it loaded the
participants would blur and trigger a request to set the participants to
blank. That request was async so by the time it was resolved the draft was
loaded and the request erroneously went through"
emorikawa,2016-02-15 21:51:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/58d3c1d7cf59294847ace8b0daa7c41db205baa8,58d3c1d7cf59294847ace8b0daa7c41db205baa8,"fix(onboarding): remove ssl-enabled checkbox

Until it's implemented in the backend"
emorikawa,2016-02-15 21:34:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/60f7290564b2c03c6ce7854dcb1b4c889e9e530e,60f7290564b2c03c6ce7854dcb1b4c889e9e530e,"fix(messages): fix jumping message list on draft focus

We were erroneously jumping to an individual message when you focused on
it."
emorikawa,2016-02-15 20:46:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/d80edbf7f373f56e490394a3eaa79eeeaa09af6c,d80edbf7f373f56e490394a3eaa79eeeaa09af6c,"fix(message): fix collapse unset when new thread delta

The minification bit was erroneously getting reset when a new thread
update delta came in due to an object equality check instead of an id
check."
emorikawa,2016-02-12 21:52:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/10564db50a81fac9bf739b6b834fc70bef1c17f0,10564db50a81fac9bf739b6b834fc70bef1c17f0,fix(analytics): no longer track tasks
emorikawa,2016-02-12 21:50:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/42204ddecf1f5cd33b0983915f41d95bcd2fb0fe,42204ddecf1f5cd33b0983915f41d95bcd2fb0fe,"fix(composer): allow link paste without tooltip

Also fix style issues with link text.

Fix cmd+k link editing when nothing is selected.

Make confirm button only appear when there are changes to be made"
jackiehluo,2016-02-12 19:41:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/7bbd41bea4d4dbe92b3dd80d81eaa3e7e71b896b,7bbd41bea4d4dbe92b3dd80d81eaa3e7e71b896b,"fix(composer-emojis): Add spec, allow adjacent emojis, fix toolbar positioning bug

Summary:
Adds tests to the emoji picker.

The emoji picker should also now be able to add emojis consecutively (without spaces).

Finally, the toolbar positioning bug (emoji picker appearing in front of typed text, the toolbar manager appearing in the upper left corner when empty lines are selected) should be fixed so that the toolbar appears directly above/below the selection area.

Test Plan: Tests included in diff.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2551"
emorikawa,2016-02-12 18:56:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f1b8633c7fa26eb212b24ec631b22b84f8b8991,5f1b8633c7fa26eb212b24ec631b22b84f8b8991,fix(analytics): delay closing of onboarding window
emorikawa,2016-02-12 18:25:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac52589de59eba54dcd4f02633185089791923f1,ac52589de59eba54dcd4f02633185089791923f1,fix(analytics): add onboarding welcome event
bengotow,2016-02-12 18:20:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/daa2a66063f99dc543ed64401c6958c156a3d9a2,daa2a66063f99dc543ed64401c6958c156a3d9a2,fix(outline-view): Make text larger in the sidebar
bengotow,2016-02-12 01:18:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/226cf4ce644cc12c3fdbc7c8c126eca2a143efc0,226cf4ce644cc12c3fdbc7c8c126eca2a143efc0,fix(search): Compile immediately to avoid truncating. Fixes #1307
emorikawa,2016-02-12 01:15:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/9021b02a6c7407b58c00713b8f1bb5aebb7fc83a,9021b02a6c7407b58c00713b8f1bb5aebb7fc83a,fix(win): bump windows-shortcuts
emorikawa,2016-02-12 00:53:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fbb7f73d300b3ed1e38a96cb1937167855ca856,6fbb7f73d300b3ed1e38a96cb1937167855ca856,fix(win): bump windows-shortcuts fork
bengotow,2016-02-12 00:30:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/2de93c614b7f8f92756ca8665835c9da7831e726,2de93c614b7f8f92756ca8665835c9da7831e726,fix(contacts): Stop auto-capitalizing phrases and emails. Fixes #1308
bengotow,2016-02-11 23:24:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/03a33e5270a16b88ea44d34b457292d79e897eae,03a33e5270a16b88ea44d34b457292d79e897eae,"🎨: Fixes, labels in narrow thread view, better label wrap"
emorikawa,2016-02-11 21:52:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaf68b25c81c75499fca320a15b754464376a51c,aaf68b25c81c75499fca320a15b754464376a51c,fix(win): add windows-shortcuts to asar exclude
jstejada,2016-02-11 21:15:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/c4135ee23c24bd6d0b7dda66f2d3ba91eaae5973,c4135ee23c24bd6d0b7dda66f2d3ba91eaae5973,:art:(popover): Remove hardcoded width from code -> move to stylesheet
dregitsky,2016-02-11 01:47:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab527ab3a5bbfe3346590a241162ae3405d0bc56,ab527ab3a5bbfe3346590a241162ae3405d0bc56,fix(plugin-auth): more fixes to plugin auth
jackiehluo,2016-02-10 23:47:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a987a496f343129b1738d1680c785528e1ad0a81,a987a496f343129b1738d1680c785528e1ad0a81,Merge branch 'master' of github.com:nylas/N1
bengotow,2016-02-10 22:39:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/e91c9b82f514f14a3e6b2824d6598c65d3c0d4b6,e91c9b82f514f14a3e6b2824d6598c65d3c0d4b6,"Merge pull request #1283 from rittbys/master

Change the title bar to say Nylas N1 instead of Nylas"
bengotow,2016-02-10 20:39:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/793fc5ef2cde267364c1a8d2f5c8c38ca85e54b7,793fc5ef2cde267364c1a8d2f5c8c38ca85e54b7,fix(min-height): Reduce minimum window size to 250px. Fixes #1293
jackiehluo,2016-02-10 19:32:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/765cfaad24f1df78f262e08db3b0e9670ee8ae5d,765cfaad24f1df78f262e08db3b0e9670ee8ae5d,Merge branch 'master' of github.com:nylas/N1
bengotow,2016-02-10 17:38:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/b21bb4bc9b000cf14b12741bff08a28e53de1b11,b21bb4bc9b000cf14b12741bff08a28e53de1b11,fix(build): LESS lint issue
jstejada,2016-02-10 04:06:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae2f03ac968ecdb994a0e797c7b1e5a25715c3b1,ae2f03ac968ecdb994a0e797c7b1e5a25715c3b1,"fix(focused-persepective): Init saved perspective correctly

- When accounts changed and the saved perspective could reference
  accounts that no longer exist and cause all sorts of errors. This is
  fixed.
- Add specs
- Fixes some sentry errors"
bengotow,2016-02-10 03:45:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/71a5662553b2005fc4c44a4318b973cea4e2e9b6,71a5662553b2005fc4c44a4318b973cea4e2e9b6,"🎨: Smaller buttons, smaller toolbar, smaller text

This should not be considered final, but we do plan to shrink the size of the entire UI slightly to match platform conventions."
jackiehluo,2016-02-10 01:31:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/be428ef83ab799ee2c353874be9f6fed1b563408,be428ef83ab799ee2c353874be9f6fed1b563408,Merge branch 'master' of github.com:nylas/N1
emorikawa,2016-02-09 23:47:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/aef2abdc9eab3bb9e359697b7720feaf22b89703,aef2abdc9eab3bb9e359697b7720feaf22b89703,Rename windows updater files
dregitsky,2016-02-09 23:50:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3c64c387116654ea768100dfc4931cd0a8169d7,f3c64c387116654ea768100dfc4931cd0a8169d7,fix(plugin-auth): change auth function params
bengotow,2016-02-09 23:02:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8e30513f80d92da0d48dacb6dcb850adde7476b,f8e30513f80d92da0d48dacb6dcb850adde7476b,fix(important): Icon does not update from nextProps
bengotow,2016-02-09 23:01:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee17baacc730f73a2623ceb7258d73e10e113610,ee17baacc730f73a2623ceb7258d73e10e113610,fix(csp): other URL schemes don't count as '*' 😶
jackiehluo,2016-02-09 21:27:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/5470aaaf3d19d100f7168d5c0548c7c289824d53,5470aaaf3d19d100f7168d5c0548c7c289824d53,"fix(composer-emojis): Add spec and allow adjacent emojis

Summary:
Adds tests to the emoji picker.

The emoji picker should also now be able to add emojis consecutively (without spaces).

Test Plan: Tests included in diff.

Reviewers: evan, bengotow

Differential Revision: https://phab.nylas.com/D2551"
emorikawa,2016-02-09 20:03:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9c5af6573f126a403df2ceb738dc7c4fd608ccb,c9c5af6573f126a403df2ceb738dc7c4fd608ccb,"fix(updater): update to Squirrel.Windows 1.2.3

grunt-electron-installer 1.2.1 includes a bump to squirrel 1.2.3"
emorikawa,2016-02-09 19:43:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e9e2b5f472c854bcc6ad924ae858d63bc17516e,5e9e2b5f472c854bcc6ad924ae858d63bc17516e,fix(win): fix typo in nylas-win-bootup
bengotow,2016-02-09 06:42:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/78f1473ca3f74f96d221dfd1d619cd0bf46842e4,78f1473ca3f74f96d221dfd1d619cd0bf46842e4,"fix(csp): Allow image-src *, fixes #1254"
bengotow,2016-02-09 02:35:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e49dbd2c3a93cba926bf46dae08340247555db4,6e49dbd2c3a93cba926bf46dae08340247555db4,"bump(*): Electron 0.36.7, version to 0.4.6"
bengotow,2016-02-09 01:40:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/99952bc2fae77649d228501f36d1e795f35c7d4f,99952bc2fae77649d228501f36d1e795f35c7d4f,fix(delete-category): Resolve regression in error message (#1244)
bengotow,2016-02-08 22:52:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/d4e7b7e712e8f24ef7f2db4f4fd6d8c2462fb576,d4e7b7e712e8f24ef7f2db4f4fd6d8c2462fb576,fix(readme): Force github to refresh cache of screenshot
bengotow,2016-02-08 18:31:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/9bed0e6380ea1b9e2f57d8129f7b317ff88ff9b9,9bed0e6380ea1b9e2f57d8129f7b317ff88ff9b9,fix(tray): Do not show count on Mac OS X when 0. Fixes #1233
bengotow,2016-02-07 20:39:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5a424c5bf4787dc3143a4e8507490ca820395d8,e5a424c5bf4787dc3143a4e8507490ca820395d8,bump(changelog): Notes for 0.4.5
bengotow,2016-02-07 19:23:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e14f2207f9a8330f1e4595b14c8a470e2346b3a,9e14f2207f9a8330f1e4595b14c8a470e2346b3a,"perf(accounts): Use cached contact objects in accountForEmail

This method is called for every contact on a thread in the thread list, so I figured we should see if one version was faster. I ran this test code:

```
d = Date.now(); for(var ii = 0; ii < 10000; ii ++){ $n.AccountStore.accountForEmail(""ben.gotow@gmail.com"") }; console.log(Date.now() - d);
```

The other approach which calls meUsingAlias takes `3784ms`, and this version which uses the alias contacts cached in aliases() only takes `264ms`. Confirmed that the tests still pass."
bengotow,2016-02-07 19:10:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/39e92afac34299d407f8fbcf6038f202c89215fa,39e92afac34299d407f8fbcf6038f202c89215fa,fix(threads): Circular include blocking FocusdPerspectiveStore. Sentry #11763
jstejada,2016-02-07 09:30:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/88b86c2fb4bacc04cf55cd234336ce87bcf7e51d,88b86c2fb4bacc04cf55cd234336ce87bcf7e51d,:art:(contact): Reuse AccountStore.accountForEmail inside `isMe`
bengotow,2016-02-07 09:08:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/562d121bd6c0d26b8a618086dfc25f2b8e0d683a,562d121bd6c0d26b8a618086dfc25f2b8e0d683a,fix(categories): Fix Sentry #11613
jstejada,2016-02-07 08:39:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/58725b98efc49e45b3dd98a6ba04a1c83f0b545d,58725b98efc49e45b3dd98a6ba04a1c83f0b545d,"fix(account-store): Correctly check alias email inside `accountForAlias`

- Add spec"
bengotow,2016-02-06 19:28:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/fcc8ca8b0737005e5ad506e3c034dcbb758ed9cd,fcc8ca8b0737005e5ad506e3c034dcbb758ed9cd,fix(system-start): Do not continue when checkAvailability returns false
bengotow,2016-02-06 19:28:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa5d6da0da4be67d227bfeac40c26a82ff715c1d,aa5d6da0da4be67d227bfeac40c26a82ff715c1d,fix(remove-from-trash): Fixes Sentry #11551
bengotow,2016-02-06 09:38:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2547dc9b2ad9738e6002c5d4107136efbce7f4b,a2547dc9b2ad9738e6002c5d4107136efbce7f4b,fix(contacts): Allow for contacts with no emails (Sentry #11535)
bengotow,2016-02-06 09:21:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/e405e595d2b444a265bd0438b67c9d30092c7aef,e405e595d2b444a265bd0438b67c9d30092c7aef,"Merge pull request #1210 from mbilker/fix-remote-undefined

Define the remote variable"
mbilker,2016-02-06 06:17:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/89c5279d7d84feaed32c4f8121102b5d17583066,89c5279d7d84feaed32c4f8121102b5d17583066,"fix(events): define the remote variable

This code triggers when a window is supposed to close, but this error
causes the DevTools to open and the window not exiting"
bengotow,2016-02-06 03:11:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e661ec996cc1bc7b8123bce80e3e8c364d2ea37,0e661ec996cc1bc7b8123bce80e3e8c364d2ea37,fix(undo): Ensure undo bar dismisses after re-appearing
bengotow,2016-02-06 02:42:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6d8783daeb3d69b808b226df7d3e723ea3951ac,a6d8783daeb3d69b808b226df7d3e723ea3951ac,"fix(messages): Field label was always ""To"""
bengotow,2016-02-06 02:36:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca31ee10bdbd9fd4405f4e948f4b2b4d4c754678,ca31ee10bdbd9fd4405f4e948f4b2b4d4c754678,feat(perspective): Restore through NylasEnv.savedState
bengotow,2016-02-05 23:45:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6a2bf3f4f791a5a5a6591f7af287dd4bf0724e4,e6a2bf3f4f791a5a5a6591f7af287dd4bf0724e4,bump(changelog): Release notes for 0.4.4
bengotow,2016-02-05 23:33:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/1cd49d952d0f8859e53b9fad55faff4f8eb246c8,1cd49d952d0f8859e53b9fad55faff4f8eb246c8,"fix(message): Allow height to be 0, remove 150px min height"
bengotow,2016-02-05 22:37:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/50bd559623fc3c7560645f9246d40b34d5b131da,50bd559623fc3c7560645f9246d40b34d5b131da,fix(tray): Fix accidental conversion to NaN
jstejada,2016-02-05 22:29:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e8ce3d2ff00fda848c59b5c3d6adb51465c1a63,3e8ce3d2ff00fda848c59b5c3d6adb51465c1a63,fix(account-store): Set focused perspective when account removed
bengotow,2016-02-05 22:28:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/f15244e8ef01b17fb8e73e69b189a4959a887c1a,f15244e8ef01b17fb8e73e69b189a4959a887c1a,fix(search): Don't show loading dots forever if requests fail
jstejada,2016-02-05 22:24:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/199150188ded1525e6d7a1fc8234a155148aeb92,199150188ded1525e6d7a1fc8234a155148aeb92,"fix(sidebar): Handle edge cases for sidebar shortcuts

Summary:
- Update menus and shortcuts correclt when accounts change or focused
  accounts change
- Move menu logic into SidebarCommands to remove duplicated logic
- Make `Window` menu also contain checkboxes

Test Plan: - Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2534"
bengotow,2016-02-05 21:49:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/57e7df8356ee37a4df1b7f99b676fe20e7d7beb6,57e7df8356ee37a4df1b7f99b676fe20e7d7beb6,"fix(db): Allow string attributes to be null. Never coerce to """"

- Fixes a bug where reply_to_message_id = """" when we receive drafts from the sever.
- In general behavior should be consistent with API. Since they allow null we should too."
bengotow,2016-02-05 21:25:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ddb91b7e7547d28c6e41f67e8d2a79aee658badf,ddb91b7e7547d28c6e41f67e8d2a79aee658badf,"fix(zoom): Disable ""double tap to zoom"" behavior"
bengotow,2016-02-05 21:11:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc8a32e22ff93d33adda1591f1edd3e19d595951,cc8a32e22ff93d33adda1591f1edd3e19d595951,fix(toolbar): Don't show the toolbar when rangeInScope is null
bengotow,2016-02-05 19:56:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a40af68303f8c4b1acc13e5efdaa316851fcdd0,8a40af68303f8c4b1acc13e5efdaa316851fcdd0,fix(labels): Re-order so adding/removing same label does nothing
bengotow,2016-02-05 18:17:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb5b849a032dfae0872b274359ea8bc782382c0e,eb5b849a032dfae0872b274359ea8bc782382c0e,revert(list-selection): Using clientIds had unintended consequences
jstejada,2016-02-05 17:55:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b6ed11828ff9f85233134440d6221e436c2ca20,2b6ed11828ff9f85233134440d6221e436c2ca20,"fix(sidebar): Display correct keyboard shortcuts in account switcher

- Fixes #1203"
bengotow,2016-02-05 04:20:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/1afd3801182727ad3b8ad21be3d30f584733be1b,1afd3801182727ad3b8ad21be3d30f584733be1b,lint(outbox): 😞
bengotow,2016-02-05 04:15:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/835e7fe9c88ddcf6c6a6cec6fc834297d485488e,835e7fe9c88ddcf6c6a6cec6fc834297d485488e,perf(outbox): Only trigger when send draft tasks are present
bengotow,2016-02-05 04:14:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbc4b792c9c412540373c450077138e2a3816ae1,bbc4b792c9c412540373c450077138e2a3816ae1,fix(db): QuerySubscription should trigger if interim changes did not impact result set
bengotow,2016-02-05 04:13:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/dea29261799239b7639b74fcae27d443c9ea6138,dea29261799239b7639b74fcae27d443c9ea6138,"perf(threads): Add an index specifically for the ""starred"" view"
bengotow,2016-02-05 04:13:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/cbfad02d2b3201f34629e0547f7399735e1af6df,cbfad02d2b3201f34629e0547f7399735e1af6df,"perf(threads): Add shortcut for common case in `emailIsEquivalent`, avoid `RegExp.exec`"
bengotow,2016-02-05 04:13:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ca2e930ef4e9e50efd2680c229ef23c7f9c3658,1ca2e930ef4e9e50efd2680c229ef23c7f9c3658,perf(threads): Cache aliases to avoid GC thrashing in `isMeAccount`
bengotow,2016-02-05 04:12:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/40bfab40c0566c63f5712c622d7809dc2bcecd82,40bfab40c0566c63f5712c622d7809dc2bcecd82,revert(nylas-env): Moving windowEventHandler init broke menus
jstejada,2016-02-05 02:19:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0e8dc7ccb46ca886f9c3d7d5819a3d4e0ae3ca0,c0e8dc7ccb46ca886f9c3d7d5819a3d4e0ae3ca0,fix(styles): Fix less lint error
jstejada,2016-02-05 02:18:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/359487a132156a91796a9d1250e0757d3c0ecca2,359487a132156a91796a9d1250e0757d3c0ecca2,fix(thread-list): Fix drag and drop to new folders/labels
jstejada,2016-02-04 22:48:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/774957a5ff7cfc447dda0cbe8cdd8e7770c8670c,774957a5ff7cfc447dda0cbe8cdd8e7770c8670c,"update(sidebar): Update sidebar design + context menus

Summary:
- Removes account switcher almost entirely
- Update context menu to edit and delete sidebar items
- Gross hardcoded position and size for the switcher icon -- will likely update with later redesign

Test Plan: - Visual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2527"
bengotow,2016-02-04 22:14:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/91240f8979ce683665d1848892cfa8a5de4d9e01,91240f8979ce683665d1848892cfa8a5de4d9e01,"feat(outbox): Sending status now appears beside drafts

Summary:
This diff adds an ""OutboxStore"" which reflects the TaskQueue and
adds a progress bar / cancel button to drafts which are currently sending.

- Sending state is different from things like Send later because drafts
  which are sending shouldn't be editable. You should have to stop them
  from sending before editing. I think we can implement ""Send Later""
  indicators, etc. with a simple InjectedComponentSet on the draft list
  rows, but the OutboxStore is woven into the DraftList query subscription
  so every draft has a `uploadTaskId`.

- The TaskQueue now saves periodically (every one second) when there are
  ""Processing"" tasks. This is not really necessary, but makes it super
  easy for tasks to expose ""progress"", because they're essentially
  serialized and propagated to all windows every one second with the
  current progress value. Kind of questionable, but super convenient.

- I also cleaned up ListTabular and MultiselectList a bit because they
  applied the className prop to an inner element and not the top one.

- If a DestroyDraft task is created for a draft without a server id, it
  ends with Task.Status.Continue and not Failed.

- The SendDraftTask doesn't delete uploads until the send actually goes
  through, in case the app crashes and it forgets the file IDs it created.

Test Plan: Tests coming soon

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2524"
jackiehluo,2016-02-04 01:40:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/3202a57d009d960438a9035633b253801f04df66,3202a57d009d960438a9035633b253801f04df66,"fix(composer-emojis): Fix bugs around null nodes and whitespace

Summary: Corrected the linting errors and changed some of the logic around tracking typed text and triggering properly.

Test Plan: Tested locally.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2522"
bengotow,2016-02-04 02:03:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/940da2d26eb3af25b082c42a484fbeda9b1decbb,940da2d26eb3af25b082c42a484fbeda9b1decbb,fix(errors): onerror contains an error..
bengotow,2016-02-04 00:27:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b7c1aaa01f6ddc87ca0e0d888f385b747489319,8b7c1aaa01f6ddc87ca0e0d888f385b747489319,"fix(send-action): Make dropdown trigger secondary send actions

We can come up with a new UX for this later, but for now this is important for consistency with the Reply/Reply-All/Forward picker and others in the app that perform actions rather than changing selection. Also makes it possible to choose to ""Send and Archive"" /without/ making it the future default, which will be nice when there are many you may want infrequently."
bengotow,2016-02-03 23:43:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b29b087a9f916eb8c7abb3ca37a872c303b54486,b29b087a9f916eb8c7abb3ca37a872c303b54486,💄(emoji): Add an icon / description to emoji package
bengotow,2016-02-03 23:41:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a1638906bbedeef6e5eff4db73c288a5c4b20c5,4a1638906bbedeef6e5eff4db73c288a5c4b20c5,fix(draft-store): Don't require plugins to implement finalizeSession
emorikawa,2016-02-03 23:06:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/918090a4e1105b99b323a59882c33c55a3c029fc,918090a4e1105b99b323a59882c33c55a3c029fc,"feat(error): improve error reporting. Now `NylasEnv.reportError`

Summary:
The goal is to let us see what plugins are throwing errors on Sentry.

We are using a Sentry `tag` to identify and group plugins and their
errors.

Along the way, I cleaned up the error catching and reporting system. There
was a lot of duplicate error logic (that wasn't always right) and some
legacy Atom error handling.

Now, if you catch an error that we should report (like when handling
extensions), call `NylasEnv.reportError`. This used to be called
`emitError` but I changed it to `reportError` to be consistent with the
ErrorReporter and be a bit more indicative of what it does.

In the production version, the `ErrorLogger` will forward the request to
the `nylas-private-error-reporter` which will report to Sentry.

The `reportError` function also now inspects the stack to determine which
plugin(s) it came from. These are passed along to Sentry.

I also cleaned up the `console.log` and `console.error` code. We were
logging errors multiple times making the console confusing to read. Worse
is that we were logging the `error` object, which would print not the
stack of the actual error, but rather the stack of where the console.error
was logged from. Printing `error.stack` instead shows much more accurate
stack traces.

See changes in the Edgehill repo here: https://github.com/nylas/edgehill/commit/8c4a86eb7ee1a06249a9ae35397e2084a09ad1dc

Test Plan: Manual

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2509"
jackiehluo,2016-02-03 23:05:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/74db6eb90ff7329cd9050d6a02134fae8a95ee47,74db6eb90ff7329cd9050d6a02134fae8a95ee47,"feat(composer-emojis): Add emojis to composer

Summary:
Emojis can now be added in the composer window with colons and the emoji names (referenced by the same names used on Slack/GitHub/etc.).

When using the correct syntax, if there are emojis that match the text typed, they appear in a dropdown floating toolbar.

Selection works with either mouse clicks or arrow keys (plus `Enter`).

Currently, the toolbar won't trigger if the colon is adjacent to a non-whitespace character.

Test Plan: TODO: Will write tests soon!

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2505"
bengotow,2016-02-03 22:55:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/3024d055640299d44d583a163639a8ca271e1529,3024d055640299d44d583a163639a8ca271e1529,bump(version): 0.4.2
bengotow,2016-02-03 19:37:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/f74278d067ff78600794cdacd2c86016801e42cb,f74278d067ff78600794cdacd2c86016801e42cb,build(*): Add travis reporting to Slack
jstejada,2016-02-03 19:22:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e02d8c9c0e0f0144e67f333436bd45ac5dec5ce,1e02d8c9c0e0f0144e67f333436bd45ac5dec5ce,"fix(message): Limit number of collapsed recipients in message

Summary:
- `from` participants now have their own line
- `to` participants in collapsed mode merge `to`, `cc`, `bcc` as in
  gmail, and start in separate line from `from`
- number of `to` participants in collapsed mode is limited, and also overflows
  with an ellipsis with css in case its too long
- /some/ cleanup
- Unsuccessfully tried to update the css for the message item header to convert to a flexbox. Wrapping the `from` address when the text is too long is still a TODO
- Fixes #1113

Test Plan: - Manual

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2507"
bengotow,2016-02-03 17:20:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/a038b23cabe5f530acf8bd0e582437ce2dc61eba,a038b23cabe5f530acf8bd0e582437ce2dc61eba,"lint(tray): Fix ""new Number"" not allowed"
emorikawa,2016-02-02 20:28:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b895068e21b5dee86adaef28723a977bf0f0501,8b895068e21b5dee86adaef28723a977bf0f0501,"feat(metadata): add cloudState that sync with Metadata service

Summary:
Now all plugins get passed a `cloudState` object to their `activate`
method.

The `cloudState` object is an instance of `CloudState` and acts like a
key-value store backed by the yet-to-be-implemented Metadata service.

It has a `get`, `getAll`, and `observe` method. The `observe` method
returns a new `Rx.Observable` for the given key.

It has a `set`, and `unset` method that doesn't actually mutate state, but
rather dispatches new `Task`s to Create, Update, and Delete `Metadata`
objects.

The whole object is backed by `Metadata` objects. Since these are standard
Database Objects that will appear on the delta sync streaming API, any
updates from the server will automatically propagate down to listening
views via the `Rx.Observable`s.

Additionally, there is a new `N1-Send-Later` stub plugin that demonstrates
how to use the `cloudState`.

There are few other minor refactors included in this diff:

**Generic CUD Tasks**: There is now a generic `CreateModelTask`,
`UpdateModelTask`, and `DestroyModelTask`. These can either be used as-is
or trivially overridden to easily update simple objects. Hopefully all of
the boilerplate rollback, error handling, and undo logic won't have to be
re-duplicated on every task. There are also tests for these tasks. We use
them to perform mutating actions on `Metadata` objects.

**New `boundProps` for `InjectedComponents`**: When making the
`N1-Send_later` plugin, I realized that the injected component needed to
get the `cloudState` somehow. Traditionally components would require
Stores and load data that way, but these are setup at `require`-time. Now
that `cloudState` only is available on `activate` we needed a way to get
the data to the components. There's now the concept of `boundProps` which
will be props added to the Component when it gets injected. This required
changing the return signature of `findComponentMatching`, which got
renamed to `findComponentDataMatching`.

**Failing on Promise Rejects**: Turns out that if a Promise rejected
due to an error or `Promise.reject` we were ignoring it and letting tests
pass. Now, tests will Fail if any unhandled promise rejects. This
uncovered a variety of errors throughout the test suite that had to be
fixed. The most significant one was during the `theme-manager` tests when
all packages (and their stores with async DB requests) was loaded. Long
after the `theme-manager` specs finished, those DB requests were
(somtimes) silently failing.

**Globally stub `DatabaseStore._query`**: All tests shouldn't actually
make queries on the database. Furthremore, the `inTransaction` block
doesn't resolve at all unless `_query` is stubbed. Instead of manually
remembering to do this in every test that touches the DB, it's now mocked
in `spec_helper`. This broke a handful of tests that needed to be manually
fixed.

**ESLint Fixes**: Some minor fixes to the linter config to prevent
yelling about minor ES6 things and ensuring we have the correct parser.

Test Plan: new tests

Reviewers: drew, bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2419"
bengotow,2016-02-02 20:24:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/5051bdbd61db5418ae0d771300679266f4ecd557,5051bdbd61db5418ae0d771300679266f4ecd557,fix(tray): Order of operations causing exception
bengotow,2016-02-02 20:18:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/180294e70c10618f268b1360e9b3153e64bf46c0,180294e70c10618f268b1360e9b3153e64bf46c0,💄(tray): Use locale string so unread count uses comma notation
bengotow,2016-02-02 19:39:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6a150a091488dc4039d7338f06f5bc64b9d34fd,c6a150a091488dc4039d7338f06f5bc64b9d34fd,"fix(warnings): Warnings due to props not provided before React.cloneElement

See https://github.com/facebook/react/issues/4494"
bengotow,2016-02-02 19:33:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/277bdc4e105eb405e074d969d5266681262d24de,277bdc4e105eb405e074d969d5266681262d24de,💄(composer): Account dropdown aliases styling
bengotow,2016-02-02 19:12:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd9850b74d78453ac04af667831a6078745fdecf,fd9850b74d78453ac04af667831a6078745fdecf,💄(thread-list): Correct top border on selected threads. Fixes #1189
jstejada,2016-02-02 18:56:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/460956bc37ed42afd51818186c73620f09af7007,460956bc37ed42afd51818186c73620f09af7007,"fix(sidebar):Correctly update sidebar by listening to FocusedPerspective

-  Clean up AccountSwitcher a bit"
jstejada,2016-02-02 18:50:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdabd1de62f51f47b739dcdc5b3ab28927dac2ab,bdabd1de62f51f47b739dcdc5b3ab28927dac2ab,"Revert ""fix(sidebar): Correctly update sidebar when a notif is selected""

This reverts commit 0828badb921c81a9779b2e52ab4829bf0db07410."
jstejada,2016-02-02 18:33:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/236c5ddc53e666f60dc21bbf81f7612d3c16f45e,236c5ddc53e666f60dc21bbf81f7612d3c16f45e,"fix(sidebar): Correctly update sidebar when a notif is selected

- Clean up AccountSwitcher a bit"
bengotow,2016-02-02 18:15:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/11429727f9b2976288a3cbe206bf73b840e14b42,11429727f9b2976288a3cbe206bf73b840e14b42,fix(composer): Attachment check ignores uploads. Fixes #1190
jstejada,2016-02-02 04:06:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a14d5b5610367ab569ca48d4b8804c3bec7b0cc,6a14d5b5610367ab569ca48d4b8804c3bec7b0cc,"fix(lint): Fix new eslint rule introduced with babel-eslint upgrade.

See https://phabricator.babeljs.io/T6925"
bengotow,2016-02-02 03:12:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9c4739f782a997b1a166b5d355765afc87ea956,d9c4739f782a997b1a166b5d355765afc87ea956,"fix(contact): Converge on displayName(), don't show account label in ThreadList. Fixes #1157"
bengotow,2016-02-02 02:51:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/aade6a6579c9fdbfc38d11689e2f5bb97bd94e76,aade6a6579c9fdbfc38d11689e2f5bb97bd94e76,rm(Nilas-contact-elements): Remove unused package
jstejada,2016-02-02 01:57:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/c67bab052a9999f163079db54c8ecbd61994d7c0,c67bab052a9999f163079db54c8ecbd61994d7c0,fix(prefs): Fix selector for default account for send
jstejada,2016-02-02 01:37:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/9408feb7aac255af90315b0f8c347f1d9b933ac7,9408feb7aac255af90315b0f8c347f1d9b933ac7,fix(default-alias):Show correct list of accounts and aliases in composer
bengotow,2016-02-02 02:30:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0142a6c418870489f7ce94efb0685aac722a8e8,c0142a6c418870489f7ce94efb0685aac722a8e8,bump(version): 0.4.1 Beta
jstejada,2016-02-02 01:31:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/617e2aed095cc1f03ceeae237fb973690cfd2eaf,617e2aed095cc1f03ceeae237fb973690cfd2eaf,"fix(remove-from-view): Update remove from view (shortcut) behavior

Summary:
- Now behaves exactly like in Gmail:
  - If viewing inbox, it will archive or trash, depending on setting
  - If viewing starred, will unstar
  - If viewing trash, will move to inbox
  - If viewing label, will remove label (no folder support)
  - No op otherwise
- Updates TaskFactory helpers and adds some helper methods
- Updates specs

Test Plan: - Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2492"
bengotow,2016-02-02 01:33:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/648bf1b30985f037ced43fa2caceaba2f962cdad,648bf1b30985f037ced43fa2caceaba2f962cdad,fix(send-and-archive): Was disabling signatures due to name collision
bengotow,2016-02-01 22:06:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/809f51f96094b7a975d431552b83d92e01686b68,809f51f96094b7a975d431552b83d92e01686b68,"feat(reorder): Re-order mail rules (#1074) and accounts (#631)

Summary:
This implements EditableList re-ordering via a new prop callback.
You can drag and drop items in the mail rules list and the accounts list.
Note that you can't drag between lists - right now this is just to enable
re-ordering.

Test Plan: No new specs yet

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2495"
bengotow,2016-02-01 21:18:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea99c57e464856eea561b3c6fa6e021de73a6871,ea99c57e464856eea561b3c6fa6e021de73a6871,"feat(rules): Add ""Starred"" as an available mail rule filter (#1074)"
jstejada,2016-02-01 20:45:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/46f331c0b1cc6d7c960b1f4ebb4694296601ee11,46f331c0b1cc6d7c960b1f4ebb4694296601ee11,"fix(alias-list): Editable list wont create empty items

- Update alias coercion to include name by default"
jstejada,2016-02-01 20:19:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/a00adca3e5c6135a10212880a433daa132fd9081,a00adca3e5c6135a10212880a433daa132fd9081,"fix(shortcuts): Add shortcut to mark as spam, fixes #765

- Minor cleanup + docs"
bengotow,2016-02-01 19:22:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/3453cfecb52f2967d9148961cb4e948b14af3fce,3453cfecb52f2967d9148961cb4e948b14af3fce,fix(mailto): test case / parsing for url encoded To field
bengotow,2016-02-01 19:08:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/32cb3fdb7a90939671d46f2ecc024f43b7586a32,32cb3fdb7a90939671d46f2ecc024f43b7586a32,fix(eslint): Avoid eslint/eslint/issues/5125 by specifying escope version
bengotow,2016-02-01 18:49:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/db1cd95a64616329e466563d8dce53ea1b44a0ac,db1cd95a64616329e466563d8dce53ea1b44a0ac,fix(zoom): Don't zoom the onboarding window
bengotow,2016-02-01 18:01:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ac5b55f53a51b7d108e9379c6e646e624dab500,5ac5b55f53a51b7d108e9379c6e646e624dab500,"bump(spellcheck): Fixes #1168, #895, #855, #1158

https://github.com/atom/node-spellchecker/issues/30"
emorikawa,2016-02-01 16:31:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/039be8d8dbc2ed6b20b5c0441bb6928b64e95f2e,039be8d8dbc2ed6b20b5c0441bb6928b64e95f2e,"Merge pull request #1177 from mbilker/update-csslint

Bump grunt-contrib-csslint to to ~0.5.0"
mbilker,2016-02-01 15:10:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c5790258e4fc3d77a31f8024033aa4129eef4a4,7c5790258e4fc3d77a31f8024033aa4129eef4a4,bump(grunt-contrib-csslint): update to ~0.5.0
bengotow,2016-01-30 23:00:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf0f3828dc5cc4667bae87519d5d0b573f7b5951,bf0f3828dc5cc4667bae87519d5d0b573f7b5951,fix(thread-list): Remove dup accountIds to avoid extra work
bengotow,2016-01-30 03:25:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/0abc5d5defcdb057120d726b271933425b75b415,0abc5d5defcdb057120d726b271933425b75b415,security(*): Disable `eval` in all windows (#1159)
bengotow,2016-01-30 03:01:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/e37c95bb4db68870259b7b266e9d429c0ce64d5e,e37c95bb4db68870259b7b266e9d429c0ce64d5e,fix(send+archive): Update to use focused perspective
bengotow,2016-01-30 01:56:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8d8bd0aeea28c255f2708af3bd6271de71c9d86,c8d8bd0aeea28c255f2708af3bd6271de71c9d86,fix(thread-list): AccountId resolution for items outside loaded range
emorikawa,2016-01-30 01:11:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec553b0c3d36d23c08085b4a3f47c70013d0a8e2,ec553b0c3d36d23c08085b4a3f47c70013d0a8e2,fix(pref): check for mounting on async launch service
bengotow,2016-01-30 00:59:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6360cf18b7f070851a839d7935c74eee9251ddf,e6360cf18b7f070851a839d7935c74eee9251ddf,feat(screenshot-mode): Minor fix to unmount method
bengotow,2016-01-30 00:39:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/d61becc549a1cb6aedcac6891d328f3b63f65601,d61becc549a1cb6aedcac6891d328f3b63f65601,feat(screenshot-mode): Tiny feature for removing PII when taking debug screenshots
bengotow,2016-01-30 00:06:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c9db9bd85cb3dd1172f38fe9301f1f00a64a3a5,3c9db9bd85cb3dd1172f38fe9301f1f00a64a3a5,"fix(activity): ""Long Polling"" => ""Delta Streaming"" because we don't really poll."
bengotow,2016-01-29 23:51:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/eec7c829ced7a4935d69b8ad8112e3dd25b7e853,eec7c829ced7a4935d69b8ad8112e3dd25b7e853,fix(dropdown): Open up or down depending on position
bengotow,2016-01-29 22:43:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/2027901debd31c47576db9af099a90e5a4421ef3,2027901debd31c47576db9af099a90e5a4421ef3,"fix(uploads): Consolidate logic, use Promisify, path.join"
bengotow,2016-01-29 21:44:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/960d2cf67b0d87b19365448d6c291bf9a6ff569a,960d2cf67b0d87b19365448d6c291bf9a6ff569a,fix(drafts): Increase syncback delay to 10s
jstejada,2016-01-29 22:23:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3b686e54695cd4af96e8383ec4745d3c79e0160,a3b686e54695cd4af96e8383ec4745d3c79e0160,fix(electron): Update api usage to `require('electron')`
jstejada,2016-01-29 22:11:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8e139764abc5e2d6cb9365075b900363ee17213,d8e139764abc5e2d6cb9365075b900363ee17213,"fix(electron): Update `beforeunload` event handler (see details):

- This fixes unresponsive draft items in the draft list, i.e. draft
  windows would not reopen after opening them the first time.
- The `beforeunload` handler will no longer hide a window before its
  actually closed. To reduce visible latency when closing, we moved
  saving window state to the `unload` event handler.
- Before unload was hiding the window before actually closing it. A
  hidden window causes chromium to throttle its renderer process for
  performance, even though `pageVisibility` was set to true (see
  https://github.com/atom/electron/issues/3225 for more detils).

  NylasEnv.finishUnload is used in this context: When a `beforeunload`
  callback prevents the window from closing, it can close it at some point
  in the future using finishUnload. NylasEnv.finishUnload uses _.defer to make
  sure we don't call `close` inside the `beforeunload` call stack so the
  window doesn't go crazy.

  However, since _.defer was being called in the renderer process of a
  hidden window, the deferred callback execution could end up delayed by
  a second or more, which effectively delayed closing the window by a
  second.

  If we tried to reopen a window with the same window props, e.g. a
  draft window, before it was actually closed, the app would go crazy
  and wouldn't open it.

  So now we just don't hide windows on beforeunload"
bengotow,2016-01-29 20:34:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/48a64e7fefca0f79b4e784fc9710f618c03e0415,48a64e7fefca0f79b4e784fc9710f618c03e0415,fix(focus): Don't clear when item is scrolled out of retained range
bengotow,2016-01-29 19:56:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/86c154db9d405e1a81bd1c11a348a3a9ca61a2a6,86c154db9d405e1a81bd1c11a348a3a9ca61a2a6,fix(mail-rules): Preserve through db version change until cloud metadata service is ready
jstejada,2016-01-29 19:18:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c6a40ae96eaee1ab08d66bd1c58664260f976e7,5c6a40ae96eaee1ab08d66bd1c58664260f976e7,fix(styles): Actually fix styles for faded recipient list
jstejada,2016-01-29 19:13:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/f4f9db9310b40858a957545bc1eac9b82fb14493,f4f9db9310b40858a957545bc1eac9b82fb14493,fix(styles): Fix styles for faded recipient list
jstejada,2016-01-29 19:03:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c8a8bca8cd5d5fb1182fc8a76ab4fe64dcb4f6f,6c8a8bca8cd5d5fb1182fc8a76ab4fe64dcb4f6f,fix(styles): Cleanup less files for account sidebar and switcher
bengotow,2016-01-29 18:58:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/178f843a0d3726ba6c5b166b5d3ec68ce0e888b2,178f843a0d3726ba6c5b166b5d3ec68ce0e888b2,fix(contacts): Bound the size of the ranked contact cache
bengotow,2016-01-29 18:49:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/180da72b773e0016696e8d4853205e5947bed8e6,180da72b773e0016696e8d4853205e5947bed8e6,fix(notifs): Categories inside Threads need accountId. Fixes #1155
jstejada,2016-01-29 18:21:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/21ebd82ece28d7c9665517b02bc6f956671fa05e,21ebd82ece28d7c9665517b02bc6f956671fa05e,fix(sidebar): Update sidebar correctly when an account added or removed
emorikawa,2016-01-29 18:16:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0606d9009eae5537abac8ed3198048fe048cd3ba,0606d9009eae5537abac8ed3198048fe048cd3ba,"Merge pull request #1145 from mbilker/fix-linux-spellchecker

Fix logic for en_US default dictionary on Linux"
jstejada,2016-01-29 18:01:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/c674be10eccd19528a014245cea17a14c6181f91,c674be10eccd19528a014245cea17a14c6181f91,fix(lint): Indentation
bengotow,2016-01-29 17:29:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1a908051812b49c119f12a1296dcb3dbf1fbb71,f1a908051812b49c119f12a1296dcb3dbf1fbb71,"feat(me): Display ""Me (Account Label)"" in unified inbox"
bengotow,2016-01-29 08:40:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/21aa4b429117f3938a0a35a986b8a5324d1904ee,21aa4b429117f3938a0a35a986b8a5324d1904ee,"perf(accounts): Cache `accountForId` - need ordered map...

In general, we call the functions in AccountStore and CategoryStore / constantly / and inside of critical places like thread list render. Would be nice to create a safe and generic way of caching things and invalidating them when data changes."
bengotow,2016-01-29 08:37:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/08935e104494c20868cd6011408a5fbf216e6aa1,08935e104494c20868cd6011408a5fbf216e6aa1,fix(msg-list): Stop computing timestamps inside invisible tooltip
bengotow,2016-01-29 08:31:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/0aac00756a9a30a3b8a7ebf9e4e8432edc9936cf,0aac00756a9a30a3b8a7ebf9e4e8432edc9936cf,fix(query): Invalidate in-flight updates when query changes
bengotow,2016-01-29 08:31:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/183cbaff173765898c33c8294632fd5d2ece6f13,183cbaff173765898c33c8294632fd5d2ece6f13,"fix(config): `observe` fires immediately, causing re-renders"
bengotow,2016-01-29 03:18:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/140162dcd389b2cf28c4ba231655b20224ada0dc,140162dcd389b2cf28c4ba231655b20224ada0dc,"fix(db): Pool, flush change records rather than cancel queries"
bengotow,2016-01-29 03:17:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/45d897ce0a8bdf1199acf05dcd9528d339e2599f,45d897ce0a8bdf1199acf05dcd9528d339e2599f,fix(json-blob): ClientIds on JSONBlob should just be key
jstejada,2016-01-29 03:55:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/d3766c199086706868f5bd39915660bb577486b5,d3766c199086706868f5bd39915660bb577486b5,"fix(thread-model): Remove check that prevents thread to update correctly

- Since Thread#labels and Thread#folders are now aliased to
  Thread#categories, Thread#fromJSON had to populate the categories array
  correctly. However it, was only being populated from json if the
  categories array was undefined, which prevented the categories from
  being populated when API updates were received."
jstejada,2016-01-29 03:52:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/be73b8bea8255233752808f2fb0f8f72c2cb573a,be73b8bea8255233752808f2fb0f8f72c2cb573a,"fix(account-switcher): Don't display ""All Accounts"" when only 1 account"
mbilker,2016-01-27 20:49:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/6da8b2c82403b2ff12a8414771dbaaf800491b6b,6da8b2c82403b2ff12a8414771dbaaf800491b6b,"fix(spellchecker): add back in split call

Fixes the spec test when only the language (e.g. 'en') is supplied and still
recognize the language."
mbilker,2016-01-27 16:47:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/a559e41ba0be33333638011c8fcff5a54a646e4b,a559e41ba0be33333638011c8fcff5a54a646e4b,fix(spellchecker): check both replacements of '_' and '-' in dictionary array
mbilker,2016-01-27 16:04:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbdd460e718aa63bdc5d953ebbc8f7c3a161ba49,dbdd460e718aa63bdc5d953ebbc8f7c3a161ba49,fix(spellchecker): broken array check logic for en_US default
g105b,2016-01-27 14:18:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b68f4704041f76f391c142f4f35fb43f3641879,4b68f4704041f76f391c142f4f35fb43f3641879,"Check metaKey and ctrlKey presence for multi platform support

Fixes #388"
emorikawa,2016-01-29 02:07:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/6620779ee2f66b780dba0900fd483de608aad239,6620779ee2f66b780dba0900fd483de608aad239,"fix(message): fix truncation of messages

It would seem the document.documentElement.scrollHeight can return 0 when
the document.body.scrollHeight reliably returns the correct height.
Changed to fallback to various height checking mechanisms.

Fixes #425
Fixes #1102
Fixes #1153"
emorikawa,2016-01-29 01:24:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/256b240b70f7093f9d72de612d2d0d9e2daf4be1,256b240b70f7093f9d72de612d2d0d9e2daf4be1,"fix(quoted): fix quoted text issue with single blockquotes

Fixes #1084
Also fixes broken tokenizing text field specs
Also protects `MessageBodyExtension`s from errors"
bengotow,2016-01-29 00:57:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/25db6c696dd2afbef0ea577a470a8fb9d98c5611,25db6c696dd2afbef0ea577a470a8fb9d98c5611,fix(labels): Never show labels UX for threads split across folders
bengotow,2016-01-29 00:44:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef5a8fc8e904e08d06a42dc9f20edaaf5d1deef6,ef5a8fc8e904e08d06a42dc9f20edaaf5d1deef6,fix(important): Hide important in message column of unified unless Gmail
bengotow,2016-01-29 00:18:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef7c98af2c2dde9174933fd9f22fa14163e64e85,ef7c98af2c2dde9174933fd9f22fa14163e64e85,fix(account-sidebar): onToggleCollapsed => onCollapseToggled
bengotow,2016-01-29 00:15:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/f4ed37c1e13ce29c43ba4a2593467bcaef113728,f4ed37c1e13ce29c43ba4a2593467bcaef113728,fix(drag-drop): Fix drop styles in account sidebar
emorikawa,2016-01-29 00:37:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/b276445c8629c26c6d7d5b2406c74f2c9828aeb7,b276445c8629c26c6d7d5b2406c74f2c9828aeb7,"fix(composer): don't blur input field when app blurs

Fixes #852"
emorikawa,2016-01-29 00:27:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/cfc937e661550635093d622a799bf3e521f80d0e,cfc937e661550635093d622a799bf3e521f80d0e,fix(sql): fix single quote escaping in array queries
jstejada,2016-01-29 00:25:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/c83a6899ac9d57c6bda23ec7e32dd35edea787f8,c83a6899ac9d57c6bda23ec7e32dd35edea787f8,fix(syncback-category-task): Correct request path when updating
jstejada,2016-01-29 00:20:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/896c1e1fe95edd6db7c92a7c3ef1d3467601ec31,896c1e1fe95edd6db7c92a7c3ef1d3467601ec31,"fix(sidebar): Prevent editing items in OutlineView when not allowed

- Fix check in OutlineViewItem"
emorikawa,2016-01-29 00:06:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/15cafbac4d7ac30cd29f1effbe71fa0cd8ac3760,15cafbac4d7ac30cd29f1effbe71fa0cd8ac3760,"fix(apm): no longer overrides apm

Summary: Fixes #39

Test Plan: new tests

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2481"
bengotow,2016-01-29 00:01:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fe0542bf92a073509713bc869cbee6600da16f1,0fe0542bf92a073509713bc869cbee6600da16f1,fix(unified): Add a unified icon. designer gets back tues.
bengotow,2016-01-28 23:47:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4e37c66f48f06d4cb94ad287a706c32d69dc56a,a4e37c66f48f06d4cb94ad287a706c32d69dc56a,fix(specs): Re-enable draft-store specs
bengotow,2016-01-28 23:28:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb3b308dc832dc23ca86a4202d704fb18293bad0,eb3b308dc832dc23ca86a4202d704fb18293bad0,bump(version): 0.4.0 beta
jstejada,2016-01-28 23:26:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/74c72e09150d2e4a5e583e0d5a6602a431844657,74c72e09150d2e4a5e583e0d5a6602a431844657,"add(docs): Add docs for OutlineView and OutlineViewItem

- Renames some stuff"
bengotow,2016-01-28 23:27:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/e39662983da25644bd55e61f526c894a8daa23a3,e39662983da25644bd55e61f526c894a8daa23a3,"fix(important): Fix bugs in ""important"" label categorization"
bengotow,2016-01-28 22:59:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/52a7a6625f3ac99c0d870c90ad0278308b3889d1,52a7a6625f3ac99c0d870c90ad0278308b3889d1,fix(linter): Switching between Coffee + ES6 is hard...
bengotow,2016-01-28 22:56:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1415585d5b97de33ed153ee6eb992f9acf4716c,d1415585d5b97de33ed153ee6eb992f9acf4716c,"fix(contact-search): Keep only ranked contacts, query for others. Massive perf boost."
dregitsky,2016-01-28 22:51:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb6f74d5f272b6194a775dbc351af86acc664b6b,bb6f74d5f272b6194a775dbc351af86acc664b6b,fix(templates): small CSS fix in preferences page
emorikawa,2016-01-28 22:26:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/14edd8a7c7d0806d8730169dce52bccdb5ce0a3e,14edd8a7c7d0806d8730169dce52bccdb5ce0a3e,fix(keymap): don't use alt key in Windows keymaps
emorikawa,2016-01-28 22:16:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/bca538bb28b835ab01ea792c025407447f736952,bca538bb28b835ab01ea792c025407447f736952,fix(keymap): change win32 keymaps to use ctrl-alt instead of cmd-alt
jstejada,2016-01-28 22:11:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/f00f7c56f8dfb1a4e88ae3605a863565272ba585,f00f7c56f8dfb1a4e88ae3605a863565272ba585,"add(specs): Add specs for MailboxPerspective

- Renames canApplyToThreads -> canReceiveThreads and applyToThreads ->
  receiveThreads
- Add initial specs and better documentation for
  MailboxPerspective.canReceiveThreads."
jstejada,2016-01-28 21:27:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/79c103ae152d65104788dd233442c3186df733e9,79c103ae152d65104788dd233442c3186df733e9,"fix(perspective): Update MailboxPerspective.canApplyToThreads

- Checks if the account ids of the threads that want to be applied are
  contained inside the perspectives account ids. E.g.:
  - I can move thread from account A to unified inbox or inbox A, but
    not to inbox B.
  - I can move threads from account A to a folder in account A but not a
    folder in account B
- Update data transferred in drag + other minor updates"
grinich,2016-01-28 21:23:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/14a2ae928b3079df0ae53751e4fe84d7fe4cc85f,14a2ae928b3079df0ae53751e4fe84d7fe4cc85f,add levelup theme
emorikawa,2016-01-28 20:03:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/24bf09b81ee5f5abab6f7c6075e5801f441ae0c0,24bf09b81ee5f5abab6f7c6075e5801f441ae0c0,fix(resources): update build resources link
emorikawa,2016-01-28 20:02:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2dd04d51f66c39217663c44b37aeeab750ec214,d2dd04d51f66c39217663c44b37aeeab750ec214,fix(resources): update build resources link
emorikawa,2016-01-28 20:02:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/67edcc836fbf3629b449bf14041e6d433ca3b89d,67edcc836fbf3629b449bf14041e6d433ca3b89d,"feat(startup): new option to launch on system start

Summary:
adds new option to launch on system start

Also adds the `--background` flag to launch N1 in the background (aka not
show the main window).

Test Plan: Manual

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2474"
bengotow,2016-01-28 19:13:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/63102ba7327fa7ad592affe83cb2912887d8be71,63102ba7327fa7ad592affe83cb2912887d8be71,"fix(message-list): Spec fixes, all stubs need accountId"
jstejada,2016-01-28 19:10:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/09c82c76a3b7c7190d1e44531715a5a1ceebdfa3,09c82c76a3b7c7190d1e44531715a5a1ceebdfa3,fix(count): Fix unread count for badge and tray icon in mac
jstejada,2016-01-28 19:01:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/03cbcd91febe1b53cb89b9812b21c95c35010a0b,03cbcd91febe1b53cb89b9812b21c95c35010a0b,update(analytics): Add missing action: removeAttachment
bengotow,2016-01-28 18:46:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b03f141b13fea023ff92a16faa028b048cb3eb7,3b03f141b13fea023ff92a16faa028b048cb3eb7,fix(message-list): Only display labels when usesLabels()
bengotow,2016-01-28 18:38:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/0baff09d427a202f6775f8ae85c7bd00d1c3d8d3,0baff09d427a202f6775f8ae85c7bd00d1c3d8d3,Update analytics to remove references to deleted Actions
bengotow,2016-01-28 18:03:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e5312dc39f71d0f2c04777c79f7b904cc2179d5,3e5312dc39f71d0f2c04777c79f7b904cc2179d5,Remove indexes which used accountId as the first param... not faster
jstejada,2016-01-28 09:35:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf7b8f1a47d2a0d8586003e91ca858c4b8d11835,cf7b8f1a47d2a0d8586003e91ca858c4b8d11835,Prevent creation of context menu twice for nested items of OutlineView
jstejada,2016-01-28 09:29:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/8be8bfcab2d2eaaa632fd63247889b562138cbb3,8be8bfcab2d2eaaa632fd63247889b562138cbb3,Fix in upload store when deleting draft
jstejada,2016-01-28 09:29:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b274593ddffb9c37daea741aa976af30d69f5e7,6b274593ddffb9c37daea741aa976af30d69f5e7,Increment max width for sidebar
jstejada,2016-01-28 08:48:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f74ee7b6c2fcff4737eb6871bfc91d60843ac6e5,f74ee7b6c2fcff4737eb6871bfc91d60843ac6e5,Fix specs
jstejada,2016-01-28 08:33:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/3343000f8646cf5c2fbe4345e4a428a2827908ae,3343000f8646cf5c2fbe4345e4a428a2827908ae,"Update file uploads (see details):

- Add uploads field to Message and removes cache from FileUploadsStore
- Updates draft via session from DraftStore
  - This makes everything way cleaner
- This fixes bug when creating draft with uploads and the opening it in
  new window
- Updates specs"
jstejada,2016-01-28 08:02:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b0a3a69db87659419212d32ede48d1176ca3fe1,8b0a3a69db87659419212d32ede48d1176ca3fe1,Update OutlineViewItem to focus end of input when editing
jstejada,2016-01-28 07:16:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf2cebc08fffdbb1a8961570f8976260a908a435,bf2cebc08fffdbb1a8961570f8976260a908a435,"Add folder/label renames

- Updates OutlineView to reuse OutlineViewItem for creating new items
- Adds ability to edit outline view items via double click or right
  click
- Cleans up css and code and sidebar item
- Updates SyncbackCategoryTask to update categories as well
- Adds 405 to permanent api error codes"
jstejada,2016-01-27 23:38:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ed14d137e27111c1302ea4d26d283f05374e4b4,4ed14d137e27111c1302ea4d26d283f05374e4b4,Misc fixes for FileUploadStore
jstejada,2016-01-27 21:49:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd675ba0c1dd8b2af0b3b66f134989f3fea1b8e4,bd675ba0c1dd8b2af0b3b66f134989f3fea1b8e4,Fix ComposerView specs
jstejada,2016-01-27 20:33:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff3213f0036f3d496dae05431f16445519ba502d,ff3213f0036f3d496dae05431f16445519ba502d,Rewrite tests for FileUploadStore
bengotow,2016-01-27 19:55:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/dcb712641a01732c2d3c503be413084507571702,dcb712641a01732c2d3c503be413084507571702,Fix problem with * a shortcut
bengotow,2016-01-27 19:45:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/7908ff7899dda5acaecf8448adc708f81860456a,7908ff7899dda5acaecf8448adc708f81860456a,Basic fixes for drag and drop
bengotow,2016-01-27 19:14:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/a77c9548d1d9434eb1675e7c7f88459ada400e38,a77c9548d1d9434eb1675e7c7f88459ada400e38,Fix sidebar when an account doesn't have a standard category
bengotow,2016-01-27 19:13:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/e29335ae9109e9da7c2c23ce1893ff7c89c4fbf2,e29335ae9109e9da7c2c23ce1893ff7c89c4fbf2,"Fix exception ""Cannot read property 'replaceModel' of null"""
bengotow,2016-01-27 19:13:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/b043c30565f9697c2a1f2d6c604f41f3209ee581,b043c30565f9697c2a1f2d6c604f41f3209ee581,Optimize QueryResultSet so offset lookups are O[1] after initial scan
bengotow,2016-01-27 18:31:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/32ccaad1e72bb6160b5b5fcc4921f29061f1fd40,32ccaad1e72bb6160b5b5fcc4921f29061f1fd40,More spec fixes
bengotow,2016-01-27 03:12:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b3b19a1726ca4e14cd6ed6fd4a93698aa0e08d7,3b3b19a1726ca4e14cd6ed6fd4a93698aa0e08d7,Spec fixes
jstejada,2016-01-27 02:48:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb1324f14ebaa66bfc2954417fd0d9bb3a5a25fd,fb1324f14ebaa66bfc2954417fd0d9bb3a5a25fd,"Inits FileUploadStore from current state in the filesystem

- Removes uploads when draft is deleted
- Misc fixes and renaming"
bengotow,2016-01-27 02:03:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/695af8b98379b7fed45061ff97b3a48c1b7014f6,695af8b98379b7fed45061ff97b3a48c1b7014f6,More sending fixes - attachments working!
bengotow,2016-01-27 01:31:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/24c751c2aef7fa4c7dfb87798a229f5b5b45a8fb,24c751c2aef7fa4c7dfb87798a229f5b5b45a8fb,More fixes to send draft task
jstejada,2016-01-27 01:21:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6f8873b0c2eb7c8ce678b583f2ed92231494e9c,d6f8873b0c2eb7c8ce678b583f2ed92231494e9c,Fix progress var instantiation in send-draft task
jstejada,2016-01-27 00:57:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/22d99479084f83c255156de58aa495a30ef67369,22d99479084f83c255156de58aa495a30ef67369,Misc fixes for FileUploadStore
bengotow,2016-01-27 00:41:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/820973cfa5fdd1ad55bfa1156c6d1b2c4d48cfd6,820973cfa5fdd1ad55bfa1156c6d1b2c4d48cfd6,Fixes to the SendDraftTask
bengotow,2016-01-26 23:44:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbe2f803204c6639eb029a313d1cb0a68d795047,bbe2f803204c6639eb029a313d1cb0a68d795047,A few other changes
bengotow,2016-01-26 23:39:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8bd09a26049e3478b89bf48853ec47d15b2b6af,c8bd09a26049e3478b89bf48853ec47d15b2b6af,Begin cleanup of Send Task
jstejada,2016-01-26 23:44:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7812b9c4621a2a3d232f5eec10d4d4f19d6fe34,c7812b9c4621a2a3d232f5eec10d4d4f19d6fe34,Fix in FileUploadsStore
jstejada,2016-01-26 23:36:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/8cb14d509fd9007001ccbb2d718b0e878b262230,8cb14d509fd9007001ccbb2d718b0e878b262230,Refactor FileUploadStore and composer attachments - WIP
bengotow,2016-01-26 22:49:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/15776c8ec6ffb04120eb091a8bc62d6a2793058d,15776c8ec6ffb04120eb091a8bc62d6a2793058d,Fix the message that appears when upgrading the mailbox
jstejada,2016-01-26 21:54:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/b32bf6577465db7863096315eb684da5f48dfb9c,b32bf6577465db7863096315eb684da5f48dfb9c,Fix when checking if draft is a reply when getting accounts for send
bengotow,2016-01-26 02:42:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f3de3fc97ee1793867a3dc32509c8fbca13e255,4f3de3fc97ee1793867a3dc32509c8fbca13e255,Fix for bad @props
jstejada,2016-01-26 02:20:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/b13ca724f16cd6c172c1c5ba522c2c1d74010028,b13ca724f16cd6c172c1c5ba522c2c1d74010028,"Add ability to select account to send from

- Adds settings option to select default account to send from"
bengotow,2016-01-26 02:02:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/b94c2e35e4767bc9a48312e41aeb8f9e95c9f8b8,b94c2e35e4767bc9a48312e41aeb8f9e95c9f8b8,Fix AccountStore.current() references in private packages
bengotow,2016-01-26 01:28:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ef4911b226b73499cca2f9384c9b4463c67c661,0ef4911b226b73499cca2f9384c9b4463c67c661,"Merge branch 'master' into unified-inbox

# Conflicts:
#	internal_packages/feedback/lib/feedback-button.cjsx
#	internal_packages/thread-list/lib/thread-list.cjsx
#	src/flux/stores/draft-store.coffee"
bengotow,2016-01-26 01:08:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb03e52e33011c3d424f5920c07b9d0314aa42d0,bb03e52e33011c3d424f5920c07b9d0314aa42d0,"Clean up action bars, random exceptions"
bengotow,2016-01-26 00:36:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4553ffb1ea5f05f700a135e23ec3e5719d48848,e4553ffb1ea5f05f700a135e23ec3e5719d48848,Fix drafts
jstejada,2016-01-25 22:55:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b950bdb31e4e8d46b2b82f77b376694ed65d798,6b950bdb31e4e8d46b2b82f77b376694ed65d798,Fix editable list input styles
emorikawa,2016-01-25 22:54:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/71abd8bcd7dfe6b8159cdeba51702da671412c44,71abd8bcd7dfe6b8159cdeba51702da671412c44,fix(composer): disable plugins during composition events
jstejada,2016-01-25 22:43:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/db29a52a991b952d433a75f81c51513678e37f8f,db29a52a991b952d433a75f81c51513678e37f8f,Fix FocusedAccountStore: remove unnecessary accountstore listener
emorikawa,2016-01-25 22:14:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/392753233e879029daf5b93a6aaf3714e700fd59,392753233e879029daf5b93a6aaf3714e700fd59,"feat(send): Send and Archive

Summary: Send and Archive plus a new setting.

Test Plan: new tests

Reviewers: bengotow, juan

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2446"
bengotow,2016-01-25 21:47:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c38b1bce86d3cad61b850b968385b9cb1f72631,8c38b1bce86d3cad61b850b968385b9cb1f72631,Fix for search bar issue with threads not appearing
bengotow,2016-01-25 21:33:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6bf3eba01175f82f0d5688b06f84efeb8e5dc94,c6bf3eba01175f82f0d5688b06f84efeb8e5dc94,"Fix for selection update issue, delete items + scroll up issue"
jstejada,2016-01-25 20:11:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/84bf7dded69637848f4586eafff735750083a946,84bf7dded69637848f4586eafff735750083a946,Fix NylasAPI specs and ContactStore specs
bengotow,2016-01-25 19:42:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/617224be2967c2b17c28d654e5ce1bafeccee4a1,617224be2967c2b17c28d654e5ce1bafeccee4a1,More spec fixes
bengotow,2016-01-25 19:35:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9e5b68f1618f471cb92b2b1730ce77dc907af4f,c9e5b68f1618f471cb92b2b1730ce77dc907af4f,More database-related spec fixes
bengotow,2016-01-25 19:11:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a28cd8cda73e8690d0c014dbd150394fa495e36,6a28cd8cda73e8690d0c014dbd150394fa495e36,DatabaseTransaction / QueryBuilder spec fixes
bengotow,2016-01-25 19:07:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/fcb75fbf1a170c8b57282f4ac895478144144201,fcb75fbf1a170c8b57282f4ac895478144144201,CategoryPicker / PerspectiveStore spec fixes
jstejada,2016-01-25 18:40:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9316f1a662045f559a8923a7286bde3107d8754,b9316f1a662045f559a8923a7286bde3107d8754,add(exports): Add Rx to nylas-exports
grinich,2016-01-25 01:38:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/71070e3c8ff72697b5c9956ca5946b0a905e017c,71070e3c8ff72697b5c9956ca5946b0a905e017c,Add Berend theme
jstejada,2016-01-23 00:55:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/01ad2837540a28fae3d877d432b41502fa0c07a1,01ad2837540a28fae3d877d432b41502fa0c07a1,Fix more task specs
emorikawa,2016-01-23 00:30:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/5cf20c256d091a2ae0d4915043d817ce7df0774a,5cf20c256d091a2ae0d4915043d817ce7df0774a,"fix(link): auto populate urls. Fix links across nodes

Fixes #1116
Also fixes an issue where links wouldn't create properly across multiple
nodes

This was due to a bug in the `select` method. We use the DOM Range API to
more robustly select a node."
emorikawa,2016-01-22 23:30:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/5057ad3d2088f9cdb0ee38a77596a524029260c8,5057ad3d2088f9cdb0ee38a77596a524029260c8,"fix(keymap): the remove and go to prev/next keys were reversed

Fixes #924"
jstejada,2016-01-22 22:52:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5dc9544e1d9c5185092e62b0401efce341c207b,c5dc9544e1d9c5185092e62b0401efce341c207b,Fix specs for destroy and syncback category tasks
jstejada,2016-01-22 21:47:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad05cc05cc65271a94da0dfdc089cbeac10d0059,ad05cc05cc65271a94da0dfdc089cbeac10d0059,Fix MutliSelectSplitInteractionHandler specs
jstejada,2016-01-22 19:58:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/27ff4d2de2f5b6b85894e495ee8c35f9a7112955,27ff4d2de2f5b6b85894e495ee8c35f9a7112955,Show window when switching accounts if it isnt visible
bengotow,2016-01-22 19:45:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8424288809336fac21ca0d735189037d352543a,d8424288809336fac21ca0d735189037d352543a,"Rename formatResult, don't assume it's an array"
emorikawa,2016-01-22 18:33:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb3223580b28411da82147842ce7e7304c39eaef,eb3223580b28411da82147842ce7e7304c39eaef,"fix(composer): list creation edge case fixes and tests

Fixes #1064"
bengotow,2016-01-22 18:16:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8df59f196c5069067b6c9bf98264a86f8e101a3,c8df59f196c5069067b6c9bf98264a86f8e101a3,update(readme): Add Todoist for N1
jackiehluo,2016-01-22 02:08:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/313c42185c820cac99214c54d417b99ab69d539c,313c42185c820cac99214c54d417b99ab69d539c,Add weather plugin to README
jackiehluo,2016-01-22 02:03:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/96739cb40023c562cdbf9c7d7975433f09edf25a,96739cb40023c562cdbf9c7d7975433f09edf25a,Merge branch 'master' of github.com:nylas/N1
jackiehluo,2016-01-22 02:03:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/3692c03cb26f8754b315c9894941577fa560a354,3692c03cb26f8754b315c9894941577fa560a354,Add Reflux
jstejada,2016-01-22 01:07:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b144b867ddf0c6315ca6c304d50045609ed90de,6b144b867ddf0c6315ca6c304d50045609ed90de,Fix MultiSelectListInteractionHandlers specs
bengotow,2016-01-22 00:00:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/946d81bf2010a6189f08df3580eeb4c14cda9e69,946d81bf2010a6189f08df3580eeb4c14cda9e69,"Rebuild SearchSuggestionStore to fix errors, appearing after search committed"
bengotow,2016-01-21 23:59:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/53c258b9d1ab229e171c42fee30b81f4938ee08e,53c258b9d1ab229e171c42fee30b81f4938ee08e,ContactStore always searches all contacts
bengotow,2016-01-21 23:58:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e9bf5cc23c27ac343abc1a24f80a0d80f8e7eea,4e9bf5cc23c27ac343abc1a24f80a0d80f8e7eea,_version was conflicting with superclass property
bengotow,2016-01-21 22:31:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d8ed03e0c01e35455e70efc8266fcfe351f52fd,8d8ed03e0c01e35455e70efc8266fcfe351f52fd,Update CHANGELOG.md
jstejada,2016-01-21 22:12:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3b880325084f395a9c3554a069e01f9e9812936,e3b880325084f395a9c3554a069e01f9e9812936,"Update sidebar to hold state for selected account

- Ensures that it displays the correct set of sidebar items even when
  the perspective changes
- Also sets up hotkeys to switch currently focused accounts"
bengotow,2016-01-21 21:46:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/7458fdd4db7a19d4f8461645038832439001986a,7458fdd4db7a19d4f8461645038832439001986a,"TaskFactory now returns N tasks for performing standard actions, undo uses arrays"
grinich,2016-01-21 18:57:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fe308f75e6a8207d1476b636e5fcf6080301823,0fe308f75e6a8207d1476b636e5fcf6080301823,Add Solarized Dark
bengotow,2016-01-21 18:42:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f772f9ce0e75264428cf3841c4a5740e08e5b249,f772f9ce0e75264428cf3841c4a5740e08e5b249,fix(contributing): Mention syncEngine.APIRoot
bengotow,2016-01-21 18:31:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/03c76cf2559a7c907efaeea57a4b12743cbfa57a,03c76cf2559a7c907efaeea57a4b12743cbfa57a,"Merge pull request #988 from mbilker/allow-custom-sync-engines

Allow custom Sync Engine specified in `config.cson`"
emorikawa,2016-01-21 18:15:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8305cc04d359859927c8521444ad92833b87b94,c8305cc04d359859927c8521444ad92833b87b94,fix(link): allow links with no `closest` method to open
mbilker,2016-01-21 05:16:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/b12ed2f4648a708333a705fe0b1ad0ca3a027536,b12ed2f4648a708333a705fe0b1ad0ca3a027536,fix(nylas-api): namespace the custom sync engine to `syncEngine`
emorikawa,2016-01-21 05:09:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/d91966c5fba1d32ea4afae85d98d0b90b5e4678a,d91966c5fba1d32ea4afae85d98d0b90b5e4678a,fix(console): rm console trace
emorikawa,2016-01-21 05:00:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/d667efea2be547756b39f5ca9c080ba5f0dad1b7,d667efea2be547756b39f5ca9c080ba5f0dad1b7,bump(version): 0.3.46
emorikawa,2016-01-21 04:09:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/11c0af653df66311e6b880a99d5958763837197e,11c0af653df66311e6b880a99d5958763837197e,"fix(link): fix link focus and UX issues

Fix FloatingToolbar position

Fix link-editor to refresh on new props

Fix link content changed

Fix link width"
jstejada,2016-01-21 03:30:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/979c29e24fbfdcb4932fcea2bd33d7aed02631e0,979c29e24fbfdcb4932fcea2bd33d7aed02631e0,Decrease OutlineView children indentation
jstejada,2016-01-21 03:22:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/f38e9da828fe4393f16980b822ecf98595e7c00e,f38e9da828fe4393f16980b822ecf98595e7c00e,Update default collapsed value for sidebar items in unified inbox view
bengotow,2016-01-21 02:55:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f444db8c1b33b46227a8c2cd6f4a36a22bba548,2f444db8c1b33b46227a8c2cd6f4a36a22bba548,bump(version): 0.3.45
jstejada,2016-01-21 01:47:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/1510413752055e415edbfffd8c234f554d7a3dc8,1510413752055e415edbfffd8c234f554d7a3dc8,Fix styles for outline view heading
bengotow,2016-01-21 01:40:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/7705317576e19a9d3121af261ab19cdf4a23b71c,7705317576e19a9d3121af261ab19cdf4a23b71c,Disable SELECT DISTINCT unless we know we need it
bengotow,2016-01-21 01:27:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ff836d00911cb1705f98911e4f93f5f0f228d4a,7ff836d00911cb1705f98911e4f93f5f0f228d4a,"Optimize offsetOfId, shouldn't throw if models contains undefined"
bengotow,2016-01-21 01:09:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/015a985032353d4f0589055ded60fa8095932c99,015a985032353d4f0589055ded60fa8095932c99,"fix(onboarding): Minor style changes, headers for EAS"
bengotow,2016-01-21 01:02:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/1756abab852548c1501cc453bcdf3eca16028357,1756abab852548c1501cc453bcdf3eca16028357,fix(newsletter): Don't make API request if email is the same
bengotow,2016-01-20 23:33:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/af50e23ea4936b165148ad04bf7a416882f9c634,af50e23ea4936b165148ad04bf7a416882f9c634,fix(onboarding): Loosen RegExp so `a.com` and `a.b.c.d.com` are valid
jstejada,2016-01-21 01:09:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/86cbd3aae93c27d0b81eab117ddeea8f7ab85525,86cbd3aae93c27d0b81eab117ddeea8f7ab85525,"Add collapse capabilities to OutlineView

- Make user category sections collapsible when in unified view
- Get rid of dumb CategoryHelpers class"
dregitsky,2016-01-21 00:43:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c0ed5c113d4a0ffd0ea705b375387d512a3a2ed,1c0ed5c113d4a0ffd0ea705b375387d512a3a2ed,"feat(plugin-auth): add plugin auth function in NylasAPI

Summary:
Adds two new functions in NylasAPI to allow auth and unauth of
plugin backends. The `authPlugin` function should be called within
plugins before taking any action that requires offline account access
from the plugin's backend server. The `unauthPlugin` function will be
used by N1 internally to revoke offline account access for plugins.

Test Plan: manual for now

Reviewers: bengotow, evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D2440"
emorikawa,2016-01-20 22:35:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2ceb6fd6cf0925ceb9937144cad90fd77feef8b,c2ceb6fd6cf0925ceb9937144cad90fd77feef8b,"refactor(toolbar): allow toolbar extensions in contenteditable

Summary:
This is a refactor of the toolbar in the contenteditable. Goals of this
are:

1. Allow developers to add new buttons to the toolbar
2. Allow developers to add other component types to the floating toolbar (like the LinkEditor)
3. Make the toolbar declaratively defined instead of imperatively set
4. Separate out logical units of the toolbar into individual sections
5. Clean up `innerState` of the Contenteditable

The Floating Toolbar used to be an imperative mess. Doing simple
functionality additions required re-understanding a very complex set of
logic to hide and show the toolbar and delecately manage focus states.
There also was no real capacity for any developer to extend the toolbar.

It also used to be completely outside of our `atomicEdit` system and was a
legacy of having raw access to contenteditable controls (since it all used
to be directly inside of the contenteditable)

Finally it was difficult to declaratively define things because the
`innerState` of the Contenteditable was inconsistently used and its
lifecycle not properly thought through. This fixed several lifecycle bugs
with that.

Along the way several of the DOMUtils methods were also subtly not
functional and fixed.

The Toolbar is now broken apart into separate logical units.

There are now `ContentedtiableExtension`s that declare what should be
displayed in the toolbar at any given moment.

They define a method called `toolbarComponentData`. This is a pure
function of the state of the `Contenteditable`. If selection and content
conditions look correct, then that method will return a component to
render. This is how we declaratively define whether a toolbar should be
visible or not instead of manually setting `hide` & `show` bits.

There is also a `toolbarButtons` method that declaratively defines buttons
that can go in the new `<ToolbarButtons>` component.

The `ToolbarButtonManager` takes care of extracting these and binding the
correct editorAPI context.

Now the `<LinkEditor>` is a separate component from the `<ToolbarButtons>`
instead of being smashed together.

The `LinkManager` takes care of declaring when the `LinkEditor` should be
displayed and has properly bound methods to update the `contenteditable`
through the standard `atomicEdit` interface.

If users have additional contenteditable popup plugins (like displaying
extra info on a name or some content in the composer), they can now
implement the `toolbarComponentData` api and declaratively define that
information based on the state of the contenteditable.

Test Plan: TODO

Reviewers: bengotow, juan

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2442"
jstejada,2016-01-20 21:14:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ef95212ad1e0cedb891ad0f02e4d1d4cc7ba16f,4ef95212ad1e0cedb891ad0f02e4d1d4cc7ba16f,Fix Category require
bengotow,2016-01-20 21:04:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5aaefc45a5fda74b59ab784dddd0a2b3fde6b1c,e5aaefc45a5fda74b59ab784dddd0a2b3fde6b1c,Change the sidebar to use Flexbox for container
bengotow,2016-01-20 20:22:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/f99edda2506fd1a217487d6f3f857b168c72ba8b,f99edda2506fd1a217487d6f3f857b168c72ba8b,fix(readme): Broken link to Message View on Github
bengotow,2016-01-20 19:30:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b9b6a04673d6372f3bb6b9f2261dafd3aeb1d6c,8b9b6a04673d6372f3bb6b9f2261dafd3aeb1d6c,rm(tooltip): Tooltip package no longer in use
bengotow,2016-01-20 19:26:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/08e93b287f956294d006b646ce50f50a8c9a4e61,08e93b287f956294d006b646ce50f50a8c9a4e61,"rm(intercom): Point feedback to support.nylas, shrink button"
bengotow,2016-01-20 18:56:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0dec2d5434f35fd23f7e4abb093a37ad6e40e63,f0dec2d5434f35fd23f7e4abb093a37ad6e40e63,bump(version): 0.3.44 beta
bengotow,2016-01-20 18:49:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/d561fe5b7103d00c594d717721d5f87920f59591,d561fe5b7103d00c594d717721d5f87920f59591,fix(auth): Increase timeout to 60s for Exchange auth
dregitsky,2016-01-20 18:24:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ae7fb7aefbef9a0936cdaea5af4bc4d2566dd57,6ae7fb7aefbef9a0936cdaea5af4bc4d2566dd57,"fix(templates): fix when the ""no templates"" message is displayed"
jstejada,2016-01-20 07:42:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2acba48eeaceb55c68fbf86770e4d9e817828a8,f2acba48eeaceb55c68fbf86770e4d9e817828a8,"Add account switcher back to sidebar:

- Account switcher can now switch between all accounts and each account
- Updates FocusedPerspectiveStore and Actions.focusDefaultMailboxPerspectiveForAccounts
  to focus a perspective for accountIds instead of for a single account,
  and updates methods
  - Adds helpers to CategoryStore and MailboxPerspective
  - Updates key commands to allow switch to unified inbox"
jackiehluo,2016-01-20 00:56:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/955e8b899fb4060756f2588ba49e2201318c9688,955e8b899fb4060756f2588ba49e2201318c9688,Merge branch 'master' of github.com:nylas/N1
jackiehluo,2016-01-20 00:55:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5e20f19c2e815acaef2d6de5f726cf6d2cddd37,a5e20f19c2e815acaef2d6de5f726cf6d2cddd37,"fix(message): Message time no longer selectable

Summary: Closes #910.

Test Plan: Manual. Tested locally.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2453"
bengotow,2016-01-20 00:45:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/67a194f5fa3ae9e2800a97a3c699cf98e0d725fd,67a194f5fa3ae9e2800a97a3c699cf98e0d725fd,"Merge pull request #966 from cllns/standardize-am-and-pm-capitalization

Standardize capitalization to am/pm, for message-list"
bengotow,2016-01-20 00:42:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec22f7bebf318920cd6366dab88d3e2b489a3f60,ec22f7bebf318920cd6366dab88d3e2b489a3f60,"Merge pull request #1041 from mbilker/script-fix

Allow additional parameters specified on command line"
cllns,2016-01-12 00:23:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/f14087a7217bd7e917e5da0b13294acff817f9a9,f14087a7217bd7e917e5da0b13294acff817f9a9,"Standardize message-list capitalization to AM/PM,"
bengotow,2016-01-19 21:51:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e795e79d304e6e0f2d94ea5bfa56850189bec6f,4e795e79d304e6e0f2d94ea5bfa56850189bec6f,"Merge pull request #1029 from mbilker/phishing-detection

Set Phishing Detection package name to the correct value"
jstejada,2016-01-19 18:50:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/596c8c340897423c8df29b6bd7d26d6bb77154c1,596c8c340897423c8df29b6bd7d26d6bb77154c1,"Fix collapsing behavior for non perspective sidebar items

- Assign unique id for sheet and draft sidebar items"
grinich,2016-01-19 09:34:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8a26a86fc05fcaf72d467b8aef4f2a3baf723d6,a8a26a86fc05fcaf72d467b8aef4f2a3baf723d6,Update README.md
bengotow,2016-01-19 08:00:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f0c70e5a7dd4fb2cf3eceffdbeab3e2b4cc9fd5,6f0c70e5a7dd4fb2cf3eceffdbeab3e2b4cc9fd5,Don't wait for all requests to succeed before displaying results
bengotow,2016-01-19 07:59:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/07df74f823c1788220b5d3cbfeb5057c77816e18,07df74f823c1788220b5d3cbfeb5057c77816e18,Show the important icon whenever any account in the perspective supports it
jstejada,2016-01-19 07:18:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/d59247407304f7936a3d7e8492ff093181a19d03,d59247407304f7936a3d7e8492ff093181a19d03,"More account sidebar refactor + sections for unified inbox

- Refactors some of the old code which was :hankey:
  - Makes SidbarSection a factory for different types of items for the
    OutlineView
  - Decided not to create a OutlineViewItem.Model class since the only
    purpose it would serve would be to validate getters for props or for
    documentation, both of which are already done via React.PropTypes.
- Adds sections when looking at unified inbox and integrates with new
  mailbox perspecitve interface
- Updates OutlineViewItem a bit + styles
- Tests missing"
bengotow,2016-01-19 06:37:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbbc325a84f5856ec024b803f34cf9b4894ebcce,fbbc325a84f5856ec024b803f34cf9b4894ebcce,Update SearchSubscription to support basic multiaccount search... seems to work?
grinich,2016-01-19 03:28:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/64a1040ba55f2e8a8b83de0a2c4e3192fa889d85,64a1040ba55f2e8a8b83de0a2c4e3192fa889d85,Update README.md
jstejada,2016-01-18 19:56:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e3d2b75dcc68a8e3e39fdb2757ec7b2a5b9b6d0,0e3d2b75dcc68a8e3e39fdb2757ec7b2a5b9b6d0,Fix merge errors
jstejada,2016-01-18 19:39:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa6a2fa5c675372c6f758ac1cff5407a3b27bdc9,fa6a2fa5c675372c6f758ac1cff5407a3b27bdc9,Minor fixes and style updates
grinich,2016-01-18 18:32:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ee00ac3675231e394bb64eed6094262b6286d36,3ee00ac3675231e394bb64eed6094262b6286d36,Update README.md
bengotow,2016-01-18 09:47:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/02703998da3396da952d9bf302b9fcfa345e3e5c,02703998da3396da952d9bf302b9fcfa345e3e5c,Fix for broken thread serialization. We now coerce folders/labels => categories and never go back.
bengotow,2016-01-18 09:31:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/5859565a192dda446b586b2193560af08d640f4e,5859565a192dda446b586b2193560af08d640f4e,Make a few changes to AccountSidebar - needs to use accountIds?
bengotow,2016-01-18 09:31:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ee96b714b9fb3ee28154e7059b5c0b24a2cbffc,3ee96b714b9fb3ee28154e7059b5c0b24a2cbffc,"Remove current()? references, use Perspectiv.forNothing instead"
bengotow,2016-01-18 08:53:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7144d9402302f9e87eb6f663bd70b821afe05e9,b7144d9402302f9e87eb6f663bd70b821afe05e9,"Merge branch 'unified-inbox-bg' into unified-inbox

# Conflicts:
#	internal_packages/account-sidebar/lib/account-sidebar-store.coffee
#	internal_packages/account-sidebar/lib/main.coffee
#	internal_packages/category-picker/lib/category-picker.cjsx
#	spec/stores/focused-perspective-store-spec.coffee
#	src/flux/stores/focused-perspective-store.coffee
#	src/mailbox-perspective.coffee"
bengotow,2016-01-18 08:47:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e5b26a818e1e7ad314867fac23e86c20f95ca7d,1e5b26a818e1e7ad314867fac23e86c20f95ca7d,Unified inbox mailbox perspectives working (sidebar disabled atm)
jstejada,2016-01-16 00:27:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/351a602b86c73f267f3b9dcfc0567209db1a8ce7,351a602b86c73f267f3b9dcfc0567209db1a8ce7,"AccountSidebar package refactor:

- Creates OutlineView generic component and uses that instead of custom
  code
- Refactors AccountSidebarStore:
  - Split the generation of the state tree into smaller functions
  - Adds different types of account sidebar items and sections, which contain
    logic and props necessary to be rendered as OutlineViewItems, and
    removes that logic from the store
- Removes WorkspaceStore.SidebarItem and removes the ability to register
  new sidebar items. If people want to add something to the sidebar they
  can just register a Component via the component registry and use the
  OutlineView component
- Removes the DraftListSidebarItem, which was basically duplicated code
  for an item but with a different data source. This is now handled
  generically by the account sidebar by rendering OutlineViewItems with
  different props and handlers
- Clean ups here and there:

- TODO
  - Add AccountSwitcher
  - Revisit calculation and generation of the state tree. Should the
    parent store contain and update the entire state all the time.
    Should separate items inside the tree have their own data sources?
  - This would avoid having the AccountSidebarStore listen to a bunch of
    different other stores, and the specific logic wold be contained
    inside each item type."
bengotow,2016-01-15 23:39:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb9fc4f2249b4559dce6de7de45dbc15774680c5,eb9fc4f2249b4559dce6de7de45dbc15774680c5,WIP
bengotow,2016-01-15 22:26:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ac84f4013735aef5dd9a6b5c1303a7a69694ad5,1ac84f4013735aef5dd9a6b5c1303a7a69694ad5,Clean up the MultiselectList implementation a bit
emorikawa,2016-01-05 00:39:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/74e21bce16603a20ed5e208fa668da33f85d6819,74e21bce16603a20ed5e208fa668da33f85d6819,"feat(tasks): add Create, Update, Destroy tasks plus spec & lint fixes

Summary:
1. **Generic CUD Tasks**: There is now a generic `CreateModelTask`,
`UpdateModelTask`, and `DestroyModelTask`. These can either be used as-is
or trivially overridden to easily update simple objects. Hopefully all of
the boilerplate rollback, error handling, and undo logic won't have to be
re-duplicated on every task. There are also tests for these tasks. We use
them to perform mutating actions on `Metadata` objects.

1. **Failing on Promise Rejects**: Turns out that if a Promise rejected
due to an error or `Promise.reject` we were ignoring it and letting tests
pass. Now, tests will Fail if any unhandled promise rejects. This
uncovered a variety of errors throughout the test suite that had to be
fixed. The most significant one was during the `theme-manager` tests when
all packages (and their stores with async DB requests) was loaded. Long
after the `theme-manager` specs finished, those DB requests were
(somtimes) silently failing.

1. **Globally stub `DatabaseStore._query`**: All tests shouldn't actually
make queries on the database. Furthremore, the `inTransaction` block
doesn't resolve at all unless `_query` is stubbed. Instead of manually
remembering to do this in every test that touches the DB, it's now mocked
in `spec_helper`. This broke a handful of tests that needed to be manually
fixed.

1. **ESLint Fixes**: Some minor fixes to the linter config to prevent
yelling about minor ES6 things and ensuring we have the correct parser.

Test Plan: new tests

Reviewers: bengotow, juan, drew

Differential Revision: https://phab.nylas.com/D2419

Remove cloudState and N1-Send-Later"
khamidou,2016-01-15 19:27:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/268757c25984c52fdf6f3c8ec6f33c1fb25e219a,268757c25984c52fdf6f3c8ec6f33c1fb25e219a,"[N1] Validate input in the signup dialog

Summary:
This diff bundles a number of small usability fixes to the ""Create account"" window. It notably:
- forces users to enter required fields before moving on to the next step
- validates email addresses and domain names

Test Plan: Tested manually by going through all the possible auth flows.

Reviewers: evan, juan, bengotow

Reviewed By: bengotow

Subscribers: bengotow

Projects: #edgehill

Differential Revision: https://phab.nylas.com/D2377"
dregitsky,2016-01-15 19:01:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea934939a152973ddd38965a17c477070fd2578e,ea934939a152973ddd38965a17c477070fd2578e,"fix(mail-rules): tiny CSS fix to ""+"" button in mail rules"
mbilker,2016-01-15 17:12:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/560f659643461b705ad0e6a0f00dd2992b0ab5ac,560f659643461b705ad0e6a0f00dd2992b0ab5ac,"fix(N1.sh): allow additional parameters specified on command line

This prevents Electron saying it cannot find the main entrypoint, when
using the `--test -s` parameters on the command line to spec test plugins."
mbilker,2016-01-15 03:43:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbb996fd795b3a50fae42222b366e166a8d805a6,dbb996fd795b3a50fae42222b366e166a8d805a6,fix(phishing): set the package name to the correct value
bengotow,2016-01-14 23:04:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b6f2b39d308fde25a80e5e0d83a453b3078a1ff,6b6f2b39d308fde25a80e5e0d83a453b3078a1ff,More renaming of view => data source
bengotow,2016-01-14 22:04:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/85e65e913548588b47576582a143c1726a9701a2,85e65e913548588b47576582a143c1726a9701a2,Some basic thread list cleanup
bengotow,2016-01-14 20:26:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/273679a861b6f9ec2b599e0a869d4dbf3ee96ebc,273679a861b6f9ec2b599e0a869d4dbf3ee96ebc,DataView => ListDataSource
bengotow,2016-01-14 20:03:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/88b901d8a50470de991a70d4e55c25108cebb174,88b901d8a50470de991a70d4e55c25108cebb174,"New QueryRange specs, fixes"
bengotow,2016-01-14 19:25:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/9814d80d5a9d8e4442315c1c033e528315ec00ef,9814d80d5a9d8e4442315c1c033e528315ec00ef,"New MutableQueyResultSet specs, fixes"
bengotow,2016-01-14 01:20:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb5f2985eff92756a9fef5cac145035dd15656bf,cb5f2985eff92756a9fef5cac145035dd15656bf,"Merge branch 'master' into unified-inbox

# Conflicts:
#	spec/stores/file-download-store-spec.coffee"
bengotow,2016-01-14 00:09:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8dcab5e6a5c0f9f1998675dca4761c712915a0b,c8dcab5e6a5c0f9f1998675dca4761c712915a0b,"build(linux): Ensure that target files are not group writable

Should fix #710. Will move all 0775 => 0755 and 0664 => 0644"
jstejada,2016-01-13 22:20:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5d4b10c7d98b7bf93117a1f2c7b43492fd9e43c,c5d4b10c7d98b7bf93117a1f2c7b43492fd9e43c,"Fix CategoryStore sorting:

- Also fix Category model specs"
dregitsky,2016-01-13 20:08:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f5aea03dd8b79573f6d782b8421a835211b2d60,4f5aea03dd8b79573f6d782b8421a835211b2d60,"fix(templates): rewritten ""welcome"" file / example template"
bengotow,2016-01-13 19:45:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bdb097bb83f83851dd9b3c101282bdce2b38a5e,5bdb097bb83f83851dd9b3c101282bdce2b38a5e,fix(newsletter): Checkbox refreshes properly when switching accounts
bengotow,2016-01-13 19:39:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bae17600e59cb041189844031c8cdbdba9fd898,5bae17600e59cb041189844031c8cdbdba9fd898,"Merge pull request #998 from nylas/set_s3_content_type

set the ContentType when uploading packages to S3."
khamidou,2016-01-13 19:12:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/59964b04c8b8091d50f30affcae610f51c775490,59964b04c8b8091d50f30affcae610f51c775490,set the ContentType when uploading packages to S3.
mbilker,2016-01-13 15:46:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdf545a519d4ad67d71e774d6a72ef3f0f2daa47,bdf545a519d4ad67d71e774d6a72ef3f0f2daa47,fix(nylas-api): allow custom Sync Engine specified in config.cson
bengotow,2016-01-13 03:19:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/b95f1f7cb48a07bb72bcb579c0bf0abd57d80d59,b95f1f7cb48a07bb72bcb579c0bf0abd57d80d59,bump(version): 0.3.43 and changelog
bengotow,2016-01-13 03:11:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/c64f9440d288b3a505257ccbe6b57c623c07f302,c64f9440d288b3a505257ccbe6b57c623c07f302,fix(specs): Spec fixes for 37e1f6bb
bengotow,2016-01-13 03:09:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/e49a7610447c5f2388114ce48d319aeb32782090,e49a7610447c5f2388114ce48d319aeb32782090,"fix(contenteditable): exportedSelection isn't always an inst of ExportedSelection

This is a temporary fix that makes this function more robust to @innerState.exportedSelection not being an ExportedSelection instance."
bengotow,2016-01-13 03:02:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/37e1f6bb0b8d82fd3556e38f2ba9df2fb5d45c67,37e1f6bb0b8d82fd3556e38f2ba9df2fb5d45c67,fix(spellcheck): Unwrap nodes with simpler code with less side effects
jstejada,2016-01-13 02:44:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/890db385f91b73cf67d0affc6675414a560c5c5c,890db385f91b73cf67d0affc6675414a560c5c5c,"fix(warnings): Don't issue a warning for attachments when word attach in
signature

- Fixes #912"
bengotow,2016-01-13 01:14:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/b44ab5670b81af81e5f8ca2fa3b8dbb5281da619,b44ab5670b81af81e5f8ca2fa3b8dbb5281da619,fix(unread): Mark as read twice without visiting another unread thread
bengotow,2016-01-12 23:58:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/e87766ebd5662a8afd8d94272311b02a31050442,e87766ebd5662a8afd8d94272311b02a31050442,bump(version): 0.3.42 (testing Windows autorestart)
bengotow,2016-01-12 23:46:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c371d88f7f23073bb323b6a777aab333a29c2fc,7c371d88f7f23073bb323b6a777aab333a29c2fc,bump(version): 0.3.41
emorikawa,2016-01-12 23:36:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c5b7b919d28fd2c12ff51a0fb9249fb68b70d8f,8c5b7b919d28fd2c12ff51a0fb9249fb68b70d8f,fix(squirrel): remove apm from path
emorikawa,2016-01-12 23:33:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8c1280383cd0c778e31db2f7a4d9064ef63f571,b8c1280383cd0c778e31db2f7a4d9064ef63f571,fix(lint): fix linter issues in template store
emorikawa,2016-01-12 23:17:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/60eb7afa1295a3dc55e8a217ab68d4ee21587d56,60eb7afa1295a3dc55e8a217ab68d4ee21587d56,fix(squirrel): fix win32 update to enable restart and launch from path
bengotow,2016-01-12 23:16:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/760c8769b306b5823ad6f7068e3f4809e93b3611,760c8769b306b5823ad6f7068e3f4809e93b3611,fix(accounts): Spec fixes for a03e8f70
jstejada,2016-01-12 23:11:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/48ea9e6198c04736896f5f6ff625b94cf2db7e5d,48ea9e6198c04736896f5f6ff625b94cf2db7e5d,"fix(fullscreen): Restore fullscreen if app was closed in fullscreen

Fixes #671"
bengotow,2016-01-12 23:08:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/a03e8f704be1f93a010f896c1a5121a9968a3447,a03e8f704be1f93a010f896c1a5121a9968a3447,fix(accounts): Load accounts before adding a new one
bengotow,2016-01-12 22:39:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/7bbcbbe29a83860b0b2e5b04b669d4cbeaa0de67,7bbcbbe29a83860b0b2e5b04b669d4cbeaa0de67,fix(sp): illegial => illegal 🙏
bengotow,2016-01-12 22:26:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/329c6471817ee21b0f81051309868a2ed52af639,329c6471817ee21b0f81051309868a2ed52af639,fix(paste): Keep `<div>` tags so pate between N1 emails works
dregitsky,2016-01-12 22:09:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/b035b0ba73176ebd136ce055a7c4cb94860d489c,b035b0ba73176ebd136ce055a7c4cb94860d489c,fix(templates): insert template no longer overwrites signature
bengotow,2016-01-12 21:51:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/54f464d999461cd004825f36556e49f2cf026920,54f464d999461cd004825f36556e49f2cf026920,fix(drag): Drag and drop files with illegial path characters
bengotow,2016-01-12 20:17:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/619c753cf3d203dfba4dd7d1a49135f332850521,619c753cf3d203dfba4dd7d1a49135f332850521,"fix(downloads): Escape all illegial path chars, don't make regex from path.sep"
bengotow,2016-01-12 20:03:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/806edd7215845a2f1221328ec588c949ee438f01,806edd7215845a2f1221328ec588c949ee438f01,fix(packages): Default icon for third-party packages
bengotow,2016-01-12 19:51:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4690783ac828a9c05d54891702ca56a17a9a4e4,b4690783ac828a9c05d54891702ca56a17a9a4e4,fix(composer): `whilePreservingSelection` should not call select if not activeElement
bengotow,2016-01-12 19:25:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/9558d21efad11da61cf078db73f865012c05d683,9558d21efad11da61cf078db73f865012c05d683,"fix(selection): ExportedSelection must properly represent ""None"""
jstejada,2016-01-12 21:46:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/46889203a6f8b8d94eaacefd7dc8a56fbf938ca9,46889203a6f8b8d94eaacefd7dc8a56fbf938ca9,fix(styles): Add bottom margin to templates plugin message
dregitsky,2016-01-12 20:44:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/f679f7c21437ff176aee198162d079386c94b472,f679f7c21437ff176aee198162d079386c94b472,"fix(templates): fix several bugs in templates plugin
Fixes behavior when there are no template files, prevents renaming/creating
with an empty name, fixes yet another way to accidentally make yellow text,
misc small style fixes"
jstejada,2016-01-12 20:32:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c12fe3d6aab98e3b8b7a855a9600566adcc8bbd,1c12fe3d6aab98e3b8b7a855a9600566adcc8bbd,"fix(composer): Fix focus behavior when signature present and when
clicking outside:

- When focusing the composer via click inside the contenteditable region or via
tabbing, last text node before the signature (or blockquotes) will be focused.
- When focusing composer by clicking outside contenteditable region, it
  will default to default contenteditable focus behavior via new method:
  `nativeFocus`"
bengotow,2016-01-12 18:28:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/b14b7086abdac79113c22639633458a63675dc61,b14b7086abdac79113c22639633458a63675dc61,fix(indicators): Remove duplicate `description` key
bengotow,2016-01-12 18:18:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1f98f2fb39afa6f73fe19f02c1bfe1622886d16,c1f98f2fb39afa6f73fe19f02c1bfe1622886d16,fix(readme): Remove link to plugins repo
jstejada,2016-01-12 17:49:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe625d8f6d6bf1f72b4e9ecf5917b1ec3640fb43,fe625d8f6d6bf1f72b4e9ecf5917b1ec3640fb43,Update names to use perspective instead of view
bengotow,2016-01-12 17:32:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/90fedbf131a5345a839714110b08b617688763a6,90fedbf131a5345a839714110b08b617688763a6,"Perf: Category

Rather than computing the types ahead of time when the object is created and generating methods, keep a few standard methods around and change the hardcoded names to maps so the lookup is O[1]"
bengotow,2016-01-12 17:10:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/d4241921617d1eb4c56ca98f11ccd2792c621600,d4241921617d1eb4c56ca98f11ccd2792c621600,"Perf for thread list. See description

- ComponentRegistry: findComponentsMatching often returns zero results but makes a lot of transient data structures. Add a cache to make it O[1]

- Contact isMe is called a zillion times to compute thread participant display. Checking the AccountStore had been required was slow.

- getStandardCategory is also called a ton. Rather than create a filtered array and then searching that, just search the existing array."
bengotow,2016-01-12 16:45:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b11b0586dcd3fb121af8c324d4e6958b355e148,4b11b0586dcd3fb121af8c324d4e6958b355e148,fix Item id / clientId issue breaking thread list
bengotow,2016-01-12 16:20:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c491d16af6f0d7f36cffe769cb0a1c0a23b0cc4,5c491d16af6f0d7f36cffe769cb0a1c0a23b0cc4,"Merge branch 'master' into unified-inbox

# Conflicts:
#	internal_packages/events/lib/event-header.cjsx
#	spec/stores/file-download-store-spec.coffee
#	spec/tasks/event-rsvp-spec.coffee
#	src/flux/tasks/event-rsvp.coffee"
bengotow,2016-01-12 16:13:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b3d6a0a3b22cbdd6db2ba694c39eec930b3ca6a,3b3d6a0a3b22cbdd6db2ba694c39eec930b3ca6a,bump(version): 0.3.40
bengotow,2016-01-12 02:13:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/0360c59460d5bcdfab540150479763c703c87b7b,0360c59460d5bcdfab540150479763c703c87b7b,fix(composer): Fix tabbing from body to subject
jstejada,2016-01-12 01:54:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ad46442627c93f40b29f362cf410dfacf0bd70f,6ad46442627c93f40b29f362cf410dfacf0bd70f,Fix issues in AccountSidebarStore and MailboxPerpective#isEqual
bengotow,2016-01-12 01:44:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/963d86cfd3705df7aff15be9060ffe42926e533d,963d86cfd3705df7aff15be9060ffe42926e533d,fix(composer): 30px area would focus wrap instead of contenteditable. Fixes #935
bengotow,2016-01-12 01:44:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/0aa4b88e1e6c5355168a13f2fbcc90a9fb0bb53f,0aa4b88e1e6c5355168a13f2fbcc90a9fb0bb53f,"fix(composer): Focus last element, not just text node"
bengotow,2016-01-12 01:31:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/51319b5c8dd7e06aef31de05a328676ce717dba0,51319b5c8dd7e06aef31de05a328676ce717dba0,"fix(spellcheck): Redo node creation each time, optimize findSimilarNodes

findSimilarNodes was taking 20% of total execution time because my test email was a jenkins error report with thousands of text nodes."
jstejada,2016-01-12 00:31:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0e83f1935488835c9d3fe278c2d01c44f8b12ca,a0e83f1935488835c9d3fe278c2d01c44f8b12ca,Fix SuggestioStore -- update to use NylasStore
bengotow,2016-01-12 00:26:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/149d86cb56def4f3763889ad80da7107e51f5d47,149d86cb56def4f3763889ad80da7107e51f5d47,Fix search suggestions using old-style store
bengotow,2016-01-12 00:24:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/391504b07d784f5ae68424e9108f80b1e580abfa,391504b07d784f5ae68424e9108f80b1e580abfa,Fix flattening of categories not working since they're maps
bengotow,2016-01-12 00:21:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbc3b85659ac3529ed7d776f0980aecf6ad56933,dbc3b85659ac3529ed7d776f0980aecf6ad56933,Bump submodule reference
bengotow,2016-01-12 00:16:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/d81927d953a4d55f8fcd0d09d2fb1f5a46e82070,d81927d953a4d55f8fcd0d09d2fb1f5a46e82070,Remove query formatting that used to match ElasticSearch
jstejada,2016-01-12 00:08:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f2c8481ff7975c284c0abb23b6abad07092b1a3,7f2c8481ff7975c284c0abb23b6abad07092b1a3,"Fix more specs:

- SearchBar
- EventRSVPTask
- ContactStore"
bengotow,2016-01-11 23:58:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/10cb1952267fbfd234aef6cec49b13ce4e04eda3,10cb1952267fbfd234aef6cec49b13ce4e04eda3,Search bar fixes
dregitsky,2016-01-11 23:28:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/2849cce07792d31c530b512a54268596d387d07f,2849cce07792d31c530b512a54268596d387d07f,fix(templates): fix two bugs breaking templates plugin rename and search
bengotow,2016-01-11 23:24:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/a8c563f09d70331042324bc3ff069a55536b3b80,a8c563f09d70331042324bc3ff069a55536b3b80,Updated QuerySubscription specs
jstejada,2016-01-11 23:12:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f5e07f9c53251e1f34bf337db6888ad7fec138e,9f5e07f9c53251e1f34bf337db6888ad7fec138e,"Fix tests for AccountSidebarStore

- Switches to using CategoryStore to reduce complexity
- Update CategoryStore.categories to retun all categories when account
  is null
- Inits AccountSidebarStore._account based on the currently focused
  MailboxPerspective"
bengotow,2016-01-11 22:11:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/04c6be4dfe8b8d004f1873d263bc1cf476c0502c,04c6be4dfe8b8d004f1873d263bc1cf476c0502c,"AccountStore no longer tracks index, Actions.selectAccount gone"
jstejada,2016-01-11 21:57:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/53d26b38a85b4b5b48a8184b053cfac1b6faf94b,53d26b38a85b4b5b48a8184b053cfac1b6faf94b,Fix Contact and Thread specs
bengotow,2016-01-11 21:47:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/e62ddf5d636cabdcfe996bdf0a54c8f4ac2931aa,e62ddf5d636cabdcfe996bdf0a54c8f4ac2931aa,Fix ModelViewSelection specs
jstejada,2016-01-11 21:44:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/e803b66a1a1287a550599fc2d5e6894c53a997e5,e803b66a1a1287a550599fc2d5e6894c53a997e5,Wrap FileDownloadStore in describe block
bengotow,2016-01-11 21:40:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4d33be4f274780d8014ad79bd66b48cd13ed6f7,a4d33be4f274780d8014ad79bd66b48cd13ed6f7,More spec fixes
jstejada,2016-01-11 21:39:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c74f230724ea45324724de2b7ac64c19efd7522,5c74f230724ea45324724de2b7ac64c19efd7522,Remove fdescribe
jstejada,2016-01-11 21:38:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/31388437487082a155f2cdafb5a804940bf7b496,31388437487082a155f2cdafb5a804940bf7b496,Fix AccountSwitcher specs
jstejada,2016-01-11 21:31:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c7626a3556b2611e3c86fabeb6d562381c34994,2c7626a3556b2611e3c86fabeb6d562381c34994,Fix ThreadListParticipants spec
jstejada,2016-01-11 21:23:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9847e58b7f88e27a187280730f19d84717c778c5,9847e58b7f88e27a187280730f19d84717c778c5,"Fix CategoryPicker specs

- Add NylasUtils.mockObservable helper"
bengotow,2016-01-11 21:23:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c74b38323cbade5b013cd1346acfbe00c1aee85,2c74b38323cbade5b013cd1346acfbe00c1aee85,"fixes for draft store specs, contact.isMe now returns true if it matches any account"
jstejada,2016-01-11 20:26:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/d98eca2cca924af81f7de7c351643b5e7ed25687,d98eca2cca924af81f7de7c351643b5e7ed25687,Add rx-lite-testing
bengotow,2016-01-11 20:20:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a735da033d77038227c01f315c1bf4f69467351,6a735da033d77038227c01f315c1bf4f69467351,"fix(rsvp): Check that you are a participant, support aliases. Fixes #962"
bengotow,2016-01-11 19:39:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3464c7db365ece93ff89e3a043da7731defa945,f3464c7db365ece93ff89e3a043da7731defa945,fix(downloads): Replace path.sep when saving files - Sentry 8749
emorikawa,2016-01-11 19:46:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/1de3a4707739adfbcac2df04de74b92f82a4a135,1de3a4707739adfbcac2df04de74b92f82a4a135,"feat(composer): can outdent blockquotes allowing you to reply inline

Summary:
You can now break up blockquotes (as in quoted text areas) by pressing
""delete"" at the start of a line. This allows you to reply inline.

Test Plan: new tests

Reviewers: bengotow, juan

Reviewed By: bengotow, juan

Differential Revision: https://phab.nylas.com/D2421"
jstejada,2016-01-11 19:39:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/f6579ceaa43e186bb04de0ba26e981ebb67eccaa,f6579ceaa43e186bb04de0ba26e981ebb67eccaa,Fix misc errors that made the app crash
bengotow,2016-01-11 19:14:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/55f1c537e25d46903af9d7bce4eb888847b1ea61,55f1c537e25d46903af9d7bce4eb888847b1ea61,"fix(quoted-text): Fix + test case for Sentry 8323, body el is quoted text"
bengotow,2016-01-11 18:56:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3d1287ce8e8082acaa9cc2db1c3cc91181bfa76,a3d1287ce8e8082acaa9cc2db1c3cc91181bfa76,fix(notifications): Fix notification removal [Sentry 8957]
bengotow,2016-01-11 18:29:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7420152df4ecbaf3189a99669fbde705df20f4a,f7420152df4ecbaf3189a99669fbde705df20f4a,fix(readme): Fix broken links to examples #943
bengotow,2016-01-11 17:59:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4b1e1b1477822c15acad326fc3bccad69f39c42,a4b1e1b1477822c15acad326fc3bccad69f39c42,bump(version): 0.3.39
jstejada,2016-01-11 00:25:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/5158ab1e380f2625628a58bfb8d06533bd05a599,5158ab1e380f2625628a58bfb8d06533bd05a599,"fix(injected-component): Correctly call methods to the injected instance

- Adds check to `_runInnerDOMMethod` to check if inner is an UnsafeComponent and
relay the call appropriately
- Removes duplicated logic from `_setRequiredMethods`"
bengotow,2016-01-09 02:45:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb9f9d4b8405b1d8fba3c315d4bef4b7213416c9,bb9f9d4b8405b1d8fba3c315d4bef4b7213416c9,"fix(composer): Temporary patch for broken focus

Long term, we need to refactor this so that it's either entirely controlled or uncontrolled. Potentially use focusin?"
jstejada,2016-01-09 01:49:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/d265bf124861a3888e667988a686cf69af53f1c9,d265bf124861a3888e667988a686cf69af53f1c9,"fix(category-store): Fix issue with observables in CategoryStore

- Removes use of observables from category store and keeps a big cache
  of categories per account
- Upates Category Observables with new helper observables
- Updates CategoryPicker and AccountSidebarStore to use observables
- Misc fixes"
bengotow,2016-01-09 01:08:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/373d224f0c8ca420fa8cf5489df5f639f8abb819,373d224f0c8ca420fa8cf5489df5f639f8abb819,fix(scroll-region): top:0 or height:0 are valid for scrollToRect [sentry]
emorikawa,2016-01-09 00:42:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/99f67494880a7af6d637d7c27f7b7812ab14baff,99f67494880a7af6d637d7c27f7b7812ab14baff,fix(composer): undo/redo now properly restores selection on new msg
bengotow,2016-01-08 23:26:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/2beeccdecd6ff698b45d93ea785cac6d0e29a7d1,2beeccdecd6ff698b45d93ea785cac6d0e29a7d1,PreferencesStore pull current account from FocusedPerspective
bengotow,2016-01-08 23:13:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/80658e7cf2c124257e008c44812e6ce43d9a0af0,80658e7cf2c124257e008c44812e6ce43d9a0af0,Merge branch 'master' into unified-inbox
bengotow,2016-01-08 23:10:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/de02e17fdb69a1be820c7173df5df5cec6e7a9f3,de02e17fdb69a1be820c7173df5df5cec6e7a9f3,fix(zoom): Only set zoom to valid numeric values
bengotow,2016-01-08 22:58:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ddafe7154bda0e08c11db1938221879cd783964,2ddafe7154bda0e08c11db1938221879cd783964,Rename MailViewFilter => MailboxPerspective
bengotow,2016-01-08 22:37:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/8fc1c34c7b0d0f21c7add26c926156687b0e6a59,8fc1c34c7b0d0f21c7add26c926156687b0e6a59,bump(version): 0.3.38
bengotow,2016-01-08 22:31:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/f026974baeded6fb8682d4b598a808bf3ac3f603,f026974baeded6fb8682d4b598a808bf3ac3f603,"Merging in new observables for thread list

commit 7a67c1fd349c575a91b162024cc03050e86574c9
Author: Ben Gotow <bengotow@gmail.com>
Date:   Fri Jan 8 11:14:07 2016 -0800

    WIP

commit 891f23487827a447ec95406ef26f1473a0c07de6
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Jan 6 15:25:09 2016 -0800

    WIP

commit 3c323cd4beb2df2fae2439a556d3129404d942cc
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Jan 4 17:46:11 2016 -0800

    WIP

commit ec7090ea9e1969fea2ea583f80a9a2ac41e6c8b0
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Jan 4 17:22:07 2016 -0800

    Remove unused LRUCache

commit e10c3919559d3c364cb7bb94d19094a2444c10f3
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Jan 4 16:21:37 2016 -0800

    rm(database-view): Performance refactor of thread-list

    Summary:
    This diff removes the old DatabaseView class, which included lots of gross optimizations that have since been duplicated in QuerySubscription and makes the thread list use the QuerySubscription class.

    This diff also substantially replaces the QuerySubscription class. The new implementation actually makes more queries but is less gross and more straightforward. It leverages a couple findings from database profiling:

    - Because of the sqlite page cache, asking for ids you've previously asked for is very fast.
        + Don't bother sorting in memory to avoid a query, just ask for ids again and fill in any missing objects.
    - Loading and inflating models is 4x+ slower than just grabbing ids

    I've also added more convenience classes around database queries:
    - QueryRange: Represents {offset, limit}, and can do boolean intersections
    - QueryResultSet: Better than passing an array of 50 items when you really mean items 150-200. Also tries hard to be immutable.

    This diff doesn't fully remove the concept of a ""ModelView"" because it's used /everywhere/ in the multiselect list source. There's a small shim that we can remove when we refactor that code. Ideally, I think we should rename ModelView to ""MultiselectListDataSource"" to follow iOS conventions (eg UITableViewDataSource). RIP 80char lines?

    Test Plan: They've gone to hell. WIP.

    Reviewers: evan, juan

    Differential Revision: https://phab.nylas.com/D2408

commit 32607eee8aafb7fa98b866347bdd2c0b963a602c
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Jan 4 09:56:34 2016 -0800

    WIP

commit 5ab5fe74e94db6904bd77d224720ad9fc69fe6a7
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Dec 30 22:56:46 2015 -0800

    redo scrollbars to not require counts

commit 361bb192d072dc8a69fd3ef143cad7bed214ebdc
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Dec 30 17:50:57 2015 -0800

    wip

commit 079394de1cc3344fb6568efe00a52d7fc97fbd27
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Dec 30 13:49:11 2015 -0800

    wip

commit 65142be03c27c653fe1147fdde6c2f9b046ade22
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Dec 30 01:23:20 2015 -0800

    wip

commit 5d412ec276be1104175ad0f43c9d54e1cea857bf
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Dec 29 22:49:58 2015 -0800

    Refactor start

commit d2b6eea884fcd2bd81ebe3985f2b2636a510c493
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Dec 29 18:51:53 2015 -0800

    RIP DatabaseView"
jstejada,2016-01-08 17:31:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f998d19649ff1bc4dc0f0c24a5d4ca4d934a9a9,9f998d19649ff1bc4dc0f0c24a5d4ca4d934a9a9,"refactor(rip-current-account): Rips out AccountStore.current

Summary:
- WIP: Need to fix tests and some errors!
- Refactors Category class to hold information about its type
- Refactors CategoryStore to rely on observables instead of local caches
- Adds and updates Observables and helpers
- Refactors ContactStore to hold entire cache of contacts instead of per
  current account
  - Same for ContactRankingStore and other stores
- Refactors method names for AccountStore + some helpers
- Updates MailViewFilter to hold an account
  - Adds basic Unified filter
- Replaces AccountStore.current calls with either:
  - The account of the currently focused MailViewFilter
  - The account associated with a thread, message, file, etc...
  - A parameter to be passed in
  - Arbitrarily, the first account in the AccountsStore

Test Plan: - Unit tests

Reviewers: evan, bengotow

Differential Revision: https://phab.nylas.com/D2423"
bengotow,2016-01-08 19:48:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8ca14e5704dea9fb3a968766450301c9936632c,f8ca14e5704dea9fb3a968766450301c9936632c,style(message-list): Correct alignment of dropdown. Fixes #659
bengotow,2016-01-08 19:30:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e24a1346684af677327690cb99c818a14c7ac33,7e24a1346684af677327690cb99c818a14c7ac33,feat(zoom): Allow users to override interface zoom. Fixes #699
emorikawa,2016-01-08 18:57:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5efa80216b25a76eacc1650ebaaabde5692c4a4,e5efa80216b25a76eacc1650ebaaabde5692c4a4,test(draft): new tests for promise chain in send draft
bengotow,2016-01-08 18:52:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/eceac4046cdad2aa457ef30dd9b8368f9c009fec,eceac4046cdad2aa457ef30dd9b8368f9c009fec,fix(specs): Minor change to templates package for Travis
bengotow,2016-01-08 18:47:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/75419273d55d76b298eccb4131d38f65c75b5973,75419273d55d76b298eccb4131d38f65c75b5973,fix(lint): Fix linter issues in template package
bengotow,2016-01-08 18:16:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/1dbefa566b6b07b051b22bc88225049e2344ec7b,1dbefa566b6b07b051b22bc88225049e2344ec7b,bump(version): 0.3.37
bengotow,2016-01-08 18:06:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/7474c79c611fcb48f1ffd38e074ffdb125eb1dd1,7474c79c611fcb48f1ffd38e074ffdb125eb1dd1,"Revert ""bump(electron): 0.35.4 => 0.36.2""

This reverts commit da607dd5085703d84a014bdab1ebc38b721901e0."
dregitsky,2016-01-08 05:13:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/348aa69a17b7a99c1dfe44dc1012ea54dfb4c78c,348aa69a17b7a99c1dfe44dc1012ea54dfb4c78c,"fix(templates): disable outdated tests in templates plugin for now
TODO: update and rewrite tests for templates plugin"
bengotow,2016-01-08 02:44:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0336b98229d9ee8e10b8115ae72d8b7083459a0,f0336b98229d9ee8e10b8115ae72d8b7083459a0,feat(newsletter): Manage subscription directly from N1
bengotow,2016-01-07 23:23:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/53d23d330b566ca3b976312efd6d39718119c81a,53d23d330b566ca3b976312efd6d39718119c81a,"rename(templates): Use ""Quick Replies"" name in plugins screen"
bengotow,2016-01-07 22:59:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/4abe7cbd482fa11b9a208ce0f953545ba5b573af,4abe7cbd482fa11b9a208ce0f953545ba5b573af,rm(mispelled): Stranded package.json file
bengotow,2016-01-07 22:57:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/84f0d4669f08c7b1f0e349255b9388078b0e8725,84f0d4669f08c7b1f0e349255b9388078b0e8725,Merge branch 'bengotow/consolidate-plugins'
bengotow,2016-01-07 22:56:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/f250fe25285421700cc6cae4c23a1b6bdfe1a452,f250fe25285421700cc6cae4c23a1b6bdfe1a452,"fix(examples): examples => packages, move away from installing them"
grinich,2016-01-07 22:40:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/68ec9701d1e982f322e7b20a4d1a1ed4907fec33,68ec9701d1e982f322e7b20a4d1a1ed4907fec33,add predawn
grinich,2016-01-07 18:14:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0a7408d0502ecac10d98d3d578ce2de74e2188a,b0a7408d0502ecac10d98d3d578ce2de74e2188a,header size
grinich,2016-01-07 18:12:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/704ecea745f1ce3b4535c2a4df8cde68e711b85d,704ecea745f1ce3b4535c2a4df8cde68e711b85d,Move links to plugins to this repo.
emorikawa,2016-01-06 23:55:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e3e2ca666dab54e551dccd8f4f09053630c3557,3e3e2ca666dab54e551dccd8f4f09053630c3557,Add 'default' tasks
bengotow,2016-01-06 21:20:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/da607dd5085703d84a014bdab1ebc38b721901e0,da607dd5085703d84a014bdab1ebc38b721901e0,bump(electron): 0.35.4 => 0.36.2
bengotow,2016-01-06 19:33:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0339e9e1856d376500032a69b51572575016a5d,e0339e9e1856d376500032a69b51572575016a5d,"fix(keymaps): Display composer keymaps, fix Apple Mail"
bengotow,2016-01-06 19:31:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/38e8e0171b70edb44c4d4278d5554a94ee7483e9,38e8e0171b70edb44c4d4278d5554a94ee7483e9,"Merge pull request #913 from colinking/button_order

Reorder archive and trash icons"
colinking,2016-01-06 19:22:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/f14a480d309d0d8434a9ddc2dca94455328e8c9d,f14a480d309d0d8434a9ddc2dca94455328e8c9d,Reordered archive and trash icons
bengotow,2016-01-06 17:51:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/7fabcf657724a5ca86bbfeadc1bd5bc74e7a5857,7fabcf657724a5ca86bbfeadc1bd5bc74e7a5857,fix(rules): Overflow in the prefrences sidebar. Fixes #908
bengotow,2016-01-06 01:51:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/beb38c85c07aa84b49cd51a93035f09d4ac1a60f,beb38c85c07aa84b49cd51a93035f09d4ac1a60f,fix(rpm): Treat-deb and-rpm as separate platforms on N1Server
bengotow,2016-01-06 01:32:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9c586cf2b421e28b2edb6f0451bbcdbd04f277b,a9c586cf2b421e28b2edb6f0451bbcdbd04f277b,fix(rpm): Upload RPM builds following naming convention
bengotow,2016-01-06 00:45:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/9bd77dc44945ed98ffae877612d9ce1661c0a439,9bd77dc44945ed98ffae877612d9ce1661c0a439,"Merge pull request #903 from mbilker/fix-debian-icons

Copy app icons to `hicolor` on Debian"
bengotow,2016-01-06 00:28:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/821ac7bb17e2abae8a48dd6ef23fb7fa4964d008,821ac7bb17e2abae8a48dd6ef23fb7fa4964d008,bump(changelog): New features / fixes in 0.3.36
mbilker,2016-01-05 22:44:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/e380ecef723ccfc56a54b30a68ccc5a9fcdd50b7,e380ecef723ccfc56a54b30a68ccc5a9fcdd50b7,fix(mkdeb): specify hard path to icon files
bengotow,2016-01-05 22:31:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8239a92ab98b459be9fb3b6f3fe9fe2a529b4f6,e8239a92ab98b459be9fb3b6f3fe9fe2a529b4f6,"fix(sig): Remove selectEnd, place cursor before sig

Summary: When focusing the composer, select the end of the last text block above any signatures / quoted text (which can be visible by default in Fwd:).

Test Plan: Run tests

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2411"
mbilker,2016-01-05 20:24:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/3754dd2d9101be0a046f4c657dc202cd87ee2cbe,3754dd2d9101be0a046f4c657dc202cd87ee2cbe,fix(mkdeb): copy app icons to hicolor on Debian
bengotow,2016-01-05 19:45:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4e25da9e2cbedad3e182d29bce0181ff1b09913,a4e25da9e2cbedad3e182d29bce0181ff1b09913,bump(version): 0.3.36
bengotow,2016-01-05 19:34:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d19533fd835840ca99416d0100a522597f6a0cb,1d19533fd835840ca99416d0100a522597f6a0cb,"fix(focus): Minor changes to composer focus logic to focus new drafts

Summary:
Remove FocusTrackingRegion—all CommandRegions should be focusable, and nesting the two creates varying behavior based on which is the parent

Calling focus() on an injected / unsafe component should always do /something/. Try the inner React method, inner DOM method, or call on ourselves

Rename contentEditable._focusEditor to ""focus"" since it intends to replace default focus behavior

In ComposerView, always change focus via setState, never by calling focus() directly. Rather than tracking `_lastFocusedField`, just focus whenever the activeElement isnt within the focusedField. Make body initial focus when draft is pristine...

...(ensures new drafts are focused)

Test Plan: Run tests

Reviewers: evan, juan

Reviewed By: evan, juan

Differential Revision: https://phab.nylas.com/D2406"
bengotow,2016-01-05 19:25:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8a510326fae3d481e9dde2ccffcfbc70d502b73,d8a510326fae3d481e9dde2ccffcfbc70d502b73,"fix(icon): Use app icon on win32, use correct path on Linux"
bengotow,2016-01-05 18:53:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f80e43a46be4ec56c4b3fefe0b5134aed43682c,4f80e43a46be4ec56c4b3fefe0b5134aed43682c,"Merge pull request #892 from colinking/hoveractions_injectable

Move quick actions inside of flexbox with injectable component set"
bengotow,2016-01-05 18:03:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/71c287823738d405c90ddba92e75817cd9669d91,71c287823738d405c90ddba92e75817cd9669d91,"Merge pull request #899 from mbilker/fix-linux-grunt-install

Grunt `install` task: Replace `shareDir` with `linuxShareDir` to reflect global changes"
mbilker,2016-01-05 02:42:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/777ba0f91d9bc39a637890abcf897e752fbc5cbe,777ba0f91d9bc39a637890abcf897e752fbc5cbe,"fix(grunt): replace shareDir with linuxShareDir to reflect global changes

The `install` task would fail since `linuxShareDir` was undefined for the
template `.desktop` file."
colinking,2016-01-04 01:03:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/87946866880710c53a4384ece9b6dde512dc4911,87946866880710c53a4384ece9b6dde512dc4911,"Moved all quick actions within flexbox from injectable component

Fixed linting issues

Moved away from ComponentRegistry towards InjectComponentSet children"
emorikawa,2016-01-05 00:39:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/a68b03a23e887bc491d1c6bc4a7f5257d97f2741,a68b03a23e887bc491d1c6bc4a7f5257d97f2741,fix(build): debian packages use different share dir
bengotow,2016-01-04 20:14:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/247bb15ab47003c1765db67337d8c022d8f17eae,247bb15ab47003c1765db67337d8c022d8f17eae,"Merge pull request #866 from mbilker/remove-module-list

Remove log of integration test package installation by default"
bengotow,2016-01-04 20:13:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/47ddd1ad740caf26186d9f065aad6748bd514ba7,47ddd1ad740caf26186d9f065aad6748bd514ba7,"Merge pull request #873 from dcposch/master

Make test output selectable"
bengotow,2016-01-04 20:13:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a3e7966047b2258c0cd6722439434f2d9de5b4e,6a3e7966047b2258c0cd6722439434f2d9de5b4e,"Merge pull request #880 from mbilker/remove-invitation-contributing-md

Remove invitation references from `CONTRIBUTING.md`"
bengotow,2016-01-04 19:43:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/125ef5a50659217baebe2ce028367324935c2a73,125ef5a50659217baebe2ce028367324935c2a73,bump(version): 0.3.35 beta
jstejada,2016-01-04 18:30:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2a70525cc24de1617f288134f88b249a50130fd,d2a70525cc24de1617f288134f88b249a50130fd,fix(extensions): Add other missing return values
jstejada,2016-01-04 18:23:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/53b933f67664e01f53213991e50c6136577d9bba,53b933f67664e01f53213991e50c6136577d9bba,fix(extensions): Add missing return values
emorikawa,2016-01-04 17:56:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/822da1c0de0c3a3bf713f671982846b2bd632592,822da1c0de0c3a3bf713f671982846b2bd632592,"feat(build): new rpm builds

Summary: Now builds RPM on Travis

Test Plan: manual

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2391"
emorikawa,2016-01-04 17:41:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/d3d2bd35ec33aee8cfe28305ff3c3a9790201c50,d3d2bd35ec33aee8cfe28305ff3c3a9790201c50,fix(date): copyright year auto-updates
jstejada,2016-01-04 15:50:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/141b2e73c9b11db5da21e7ef2e6a906bac542ac4,141b2e73c9b11db5da21e7ef2e6a906bac542ac4,fix(extensions):Add missing api adapters for ComposerExtension methods
mbilker,2016-01-01 23:43:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/1567bfaa9e3dde113cc74ebcb71880b4e5fd34d3,1567bfaa9e3dde113cc74ebcb71880b4e5fd34d3,fix(contributing): grammar corrections
mbilker,2016-01-01 23:39:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/573be8fa0590cee141f3816db2be9c4e7874ada0,573be8fa0590cee141f3816db2be9c4e7874ada0,"fix(contributing): remove invitation references

In response to #879"
bengotow,2015-12-31 22:46:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/5030787d884ac54484f8df0263a802a07f2fc0a1,5030787d884ac54484f8df0263a802a07f2fc0a1,"Merge pull request #876 from nylas/Inbox-Shortcuts

Inbox shortcuts"
GM-Polyakov,2015-12-31 22:30:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/96b68c0aa728dfdb6852bd393430edef3666e4fe,96b68c0aa728dfdb6852bd393430edef3666e4fe,"fix

removed shortcuts not shown on Inbox shortcuts page"
GM-Polyakov,2015-12-31 22:09:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca48d3c216d74995da86bca789004de212e12e57,ca48d3c216d74995da86bca789004de212e12e57,"Add Inbox Shortcuts

Added keyboard shortcuts for Google Inbox (different from Gmail)."
dcposch,2015-12-31 12:06:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/110a3a421c78941c15c43208ae211d3975647847,110a3a421c78941c15c43208ae211d3975647847,Make test output selectable
dregitsky,2015-12-31 02:13:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/dffc307b3c505cb96f0361b48ea55ae5964a6a13,dffc307b3c505cb96f0361b48ea55ae5964a6a13,fix(templates): Fix a few leftover bugs in templates plugin
bengotow,2015-12-31 02:09:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e41c53efbefc18e6be7d1c59c9f8ae0c3af8e2f,0e41c53efbefc18e6be7d1c59c9f8ae0c3af8e2f,fix(spec): Participant tests breaking on Travis
dregitsky,2015-12-31 00:51:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/a02051bd95ee53555f6ce919eee1a51a7fa3d623,a02051bd95ee53555f6ce919eee1a51a7fa3d623,fix(templates): Fix method calls that weren't passing args hash
dregitsky,2015-12-31 00:46:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/77cf91f29226749277750b158e376e61c6ff5314,77cf91f29226749277750b158e376e61c6ff5314,fix(quickschedule): properly handle errors from QuickSchedule server
jstejada,2015-12-31 00:05:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/067a12dc17a06f8c6fde3ea9d8038d92bb9b3d96,067a12dc17a06f8c6fde3ea9d8038d92bb9b3d96,fix(extensions):Fix extension method calls that weren't passing args hash
jstejada,2015-12-30 23:08:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/72ae4228c006bbaa3fc13a9b1148acbecdf24f76,72ae4228c006bbaa3fc13a9b1148acbecdf24f76,fix(specs): Fix extension test
emorikawa,2015-12-24 01:25:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/116d375ff7056536e123daef78ac150c7e07fde1,116d375ff7056536e123daef78ac150c7e07fde1,"feat(extension): async extensions

Summary:
WIP:

This is a quick patch for Drew to make extensions async

We'll need to think through the upgrade/deprecation plan to roll out async
extensions across all of our APIs.

Test Plan: TODO

Reviewers: drew, evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2392"
jstejada,2015-12-30 20:24:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/eacf7e751c87241ec94ced33bbcbf4f07a53cf80,eacf7e751c87241ec94ced33bbcbf4f07a53cf80,fix(specs): Remove fdescribe
jstejada,2015-12-30 19:53:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/e9896039aa4c6308d9d2d1342c5136b5feb3c2d7,e9896039aa4c6308d9d2d1342c5136b5feb3c2d7,"fix(contenteditable): Fix nested list behavior:

Summary:
- Fixes #862
- Makes it behave like hackpad -- adding nested lists will indent the
  current list item
- Fix lint errors

Test Plan: - Integration tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2402"
jstejada,2015-12-30 02:19:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/27cc46ed1f8456f1c69ee8a8eec33133b9e402d9,27cc46ed1f8456f1c69ee8a8eec33133b9e402d9,"feat(column-width): Store column width state in the app

Summary:
- Fixes #833
- Allows column widths to be persisted between sessions

Test Plan: - Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2401"
jstejada,2015-12-30 16:36:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/cd1ee3f672ddd5f27c3c15828a43b63f060fcbe3,cd1ee3f672ddd5f27c3c15828a43b63f060fcbe3,"fix(extension-adapter): Update adapter to support all versions of extension api we've used

Summary:
- Rewrites composer extension adpater to support all versions of the
  ComposerExtension API we've ever declared. This will allow old plugins (or
  plugins that haven't been reinstalled after update) to keep functioning
  without breaking N1
- Adds specs

Test Plan: - Unit tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2399"
mbilker,2015-12-30 03:11:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/b34c6434e5806b8e3ebc31a8c62352562a786268,b34c6434e5806b8e3ebc31a8c62352562a786268,fix(bootstrap): remove log of integration test package installation by default
dregitsky,2015-12-30 02:30:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b94122b0b2d3a296854c5c80352b7d161b6b1994,b94122b0b2d3a296854c5c80352b7d161b6b1994,fix(signatures-tests): actually fix the signatures tests
jstejada,2015-12-29 17:15:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/56258991fbd6d10762c5f0aa39a54af8bb67f8de,56258991fbd6d10762c5f0aa39a54af8bb67f8de,"fix(composer-focus): Fix focus behavior + update InjectedComponent props

Summary:
- Fixes bug with Composer focus caused by injected component. The composer body
  was being focused, but the cursor remained at the beginning of the content
  instead of at the end. This was caused because the focus method was being
  called before the content had actually been rendered to the dom.
  - Adds a callback to check when injected comp was actually rendered, and uses
    that to focus the body at the correct time.
  - Updates specs
- Updates behavior of focusing composer body when selecting threads in split
  mode --  resolves #T3444
  - It will focus the body when a thread is selcted via a click
  - It wont focus the body when a thread is selected via arrow keys
  - It will focus the body when a new inline reply is created
  - Updates specs

Test Plan: - Unit tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2393"
dregitsky,2015-12-30 02:00:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/93e0ba06d41c52fb852d34fde66614a8d12154f1,93e0ba06d41c52fb852d34fde66614a8d12154f1,fix(signatures-tests): update tests for new signatures code
dregitsky,2015-12-29 23:33:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/4528734a33960f503bef5b1106bb0ed74281e338,4528734a33960f503bef5b1106bb0ed74281e338,"fix(signatures): Wrap signature in a `nylas-n1-signature` div to allow easy detection

Summary:
Changes the internal signatures plugin to wrap the signature in a
`<div class=""nylas-n1-signature"">` block, to make it easier to detect and handle
signatures from within other plugins.

Also:
- Fixes the QuickSchedule plugin to place the scheduling block above the signature.
- Fixes a small syntax error in Translate plugin

Test Plan: manual

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2383"
dregitsky,2015-12-29 23:11:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e1056f49e3c7bea9bd1a5d54557b89f46dfc2d0,2e1056f49e3c7bea9bd1a5d54557b89f46dfc2d0,"refactor(templates): major additions and refactoring for the Templates plugin.

Summary:
Adds several new features to the templates plugin, fixes some existing bugs, and
refactors existing code.

New Plugin Features/Fixes:
- Changes the templates editor in preferences to allow variables to be entered with
 `{{brackets}}`. Handles many contenteditable complexities to implement.
- Better interaction for renaming and deleting of templates in the editor.
- Changes tabbing behavior when using templates. Tabbing between variables now wraps
  around, and typing tab from outside a variable region highlights the closest region.
- Prevents ""Enter"" key in the composer when inside a variable region, and strips all
  formatting/tags from within the region - this prevents major contenteditable issues
  that can result in inline CSS in the style of our variable regions, which will not be
  removed when sending.
- Shows a warning when choosing a template if it will replace existing text in a draft.
- Prevents invalid characters in template names (due to filenames, esp. on Windows),
  and shows an error message. Strips these characters from draft titles when making a
  template.
- Fixes a bug where TemplateStore's initialization code was being called multiple times.

New N1 code:
- Several new methods in `DOMUtils` useful for working with contenteditable.
- Implement some missing methods in `Editor`

Refactor:
- Major refactor/rewrite of template composer extension to use new DOMUtils methods
  and simplify the logic (while adding new functionality).

Remaining issues:
- `preferences-tempaltes.cjsx` and `template-editor.coffee` should be rewritten in ES6
  for consistency
- Need tests for new DOMUtils functions and for new Templates plugin code.

Test Plan: manual, need to update specs

Reviewers: evan, bengotow

Reviewed By: evan, bengotow

Subscribers: juan

Differential Revision: https://phab.nylas.com/D2382"
dregitsky,2015-12-29 22:57:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b5d660eafb00b5f976c5524bc12bc1e6b7084a0,1b5d660eafb00b5f976c5524bc12bc1e6b7084a0,"fix(contenteditable): revert 36b4f3, call onClick in mouse-service"
bengotow,2015-12-29 22:41:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2781be17c2daf5f6420181828e92a4412f7c934,a2781be17c2daf5f6420181828e92a4412f7c934,lint(mail-rules): Fix build failure from linter issue
dregitsky,2015-12-29 22:41:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/36b4f3f45644be7410614a73ef1227d627cdbbcc,36b4f3f45644be7410614a73ef1227d627cdbbcc,"fix(contenteditable): hook up onClick handler for extensions

Summary: Add missing code to make onClick work in contenteditable extensions.

Test Plan: manual

Reviewers: juan, evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2395"
bengotow,2015-12-29 22:21:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/30c5e20e8877db91d1772339881adf98eb764083,30c5e20e8877db91d1772339881adf98eb764083,fix(mail-rules): Bail if a message is missing a thread
bengotow,2015-12-29 22:20:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e777fe1f4bbf24e779eb7081d5ff90a09840dc0,5e777fe1f4bbf24e779eb7081d5ff90a09840dc0,"fix(uploads): Cancel uploads when offline (#365), mark for refactor"
bengotow,2015-12-29 22:04:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/55b2d588bc9a479c7e20b57b7fc78550b7e1d898,55b2d588bc9a479c7e20b57b7fc78550b7e1d898,fix(uploads): Don't allow dragging of uploading images (Fixes #366)
bengotow,2015-12-29 20:33:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba18753061ce2c9c5914e7a5ead4f6bcbb5ebfa3,ba18753061ce2c9c5914e7a5ead4f6bcbb5ebfa3,"Merge pull request #798 from mbilker/appveyor-pr-no-secure

AppVeyor Use no secure variables in Pull Requests"
bengotow,2015-12-29 20:20:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/7233decbe81dba29572cf0b5997d5ea44024ecae,7233decbe81dba29572cf0b5997d5ea44024ecae,"Merge pull request #792 from Sumukh/at-character-parse

Names with @ are included in the contact name."
bengotow,2015-12-29 02:39:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/f900cb497f289f40031dec40dbb281447e06a4d4,f900cb497f289f40031dec40dbb281447e06a4d4,bump(version): 0.3.34 beta
bengotow,2015-12-29 02:39:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a5c66f4cc4e165e52c525c8a8558df7aa34ee2b,0a5c66f4cc4e165e52c525c8a8558df7aa34ee2b,"fix(regex): Chop leading '/"" off emails if they are wrapped in quotes"
bengotow,2015-12-29 02:10:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/d911793befc8b183f48b0d9f930db801f771bdc3,d911793befc8b183f48b0d9f930db801f771bdc3,fix(mail-rules): Catch and disable mail rules building bad actions
dregitsky,2015-12-29 01:34:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/8dc3e009d449bfda33adbdfad7ba78b4b610377a,8dc3e009d449bfda33adbdfad7ba78b4b610377a,fix(contenteditable): add default prop for `onSelectionChanged`
bengotow,2015-12-28 22:59:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/6da6bb5246e8398c0adb5e48060fc96ce11e6431,6da6bb5246e8398c0adb5e48060fc96ce11e6431,"fix(autoload-images): Watch for images declared in more attrs

Fixes #739"
bengotow,2015-12-28 22:35:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb268d3be6a1c870bf375f264574e6a750eaaa2c,bb268d3be6a1c870bf375f264574e6a750eaaa2c,"fix(regex): Allow ', !, ?, ^, {, }, | in email addresses (Fixes #754)"
bengotow,2015-12-28 22:23:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e54ff8069d0ac05c27d87d918fb436d8e1393fb,8e54ff8069d0ac05c27d87d918fb436d8e1393fb,fix(markAsRead): Option to mark read manually only (Fixes #804)
bengotow,2015-12-28 21:58:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/47b0ab5c973c23e94b27d42200a190058e92991b,47b0ab5c973c23e94b27d42200a190058e92991b,fix(mailto): Parse query string manually to account for unencoded body (Fixes #815)
bengotow,2015-12-28 20:16:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/608060ed6d954fc116973c8d999a5114d3027c8d,608060ed6d954fc116973c8d999a5114d3027c8d,"fix(search): Switching accounts while searching no longer breaks app

Fixes #850"
bengotow,2015-12-28 20:13:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c965e4d7b32497c4e0cfd431ef1eadf08eb6e6e,8c965e4d7b32497c4e0cfd431ef1eadf08eb6e6e,"fix(aliases): Recognize that email sent to alias is to ""me"""
bengotow,2015-12-28 19:25:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/acd960d611c050ec3af9f9e480b7fc7ee5ea7ff3,acd960d611c050ec3af9f9e480b7fc7ee5ea7ff3,fix(styles): Allow css from any domain (for web fonts)
jstejada,2015-12-24 06:04:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/3aa77a3d051737b9baa2f0017391d15fb26c8656,3aa77a3d051737b9baa2f0017391d15fb26c8656,"fix(styles): Fix border styles for subject input in composer

- Fixes #825"
emorikawa,2015-12-23 23:48:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9be427c42948b0acf2f819f44ee34924c8cd0aa,a9be427c42948b0acf2f819f44ee34924c8cd0aa,fix(tab): fix import error
bengotow,2015-12-23 07:20:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e778e6ef5254b08f2a94ae7e36fbce49dadd349,4e778e6ef5254b08f2a94ae7e36fbce49dadd349,bump(version): 0.3.33 Beta 🎄
bengotow,2015-12-23 07:19:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/606909e256c29e1157ba36392d3fa42032079fd1,606909e256c29e1157ba36392d3fa42032079fd1,"feat(mail-rules): Per-account mail rules filter incoming, existing mail

Summary:
Originally, this was going to be a totally independent package, but
I wasn't able to isolate the functionality and get it tied in to
the delta-stream consumption. Here's how it currently works:

- The preferences package has a new tab which allows you to edit
  mail filters. Filters are saved in a new core store, and a new
  stock component (ScenarioEditor) renders the editor. The editor
  takes a set of templates that define a value space, and outputs
  a valid set of values.

- A new MailFilterProcessor takes messages and creates tasks to
  apply the actions from the MailFiltersStore.

- The worker-sync package now uses the MailFilterProcessor to
  apply filters /before/ it calls didPassivelyReceiveNewModels,
  so filtrs are applied before any notifications are created.

- A new task, ReprocessMailFiltersTask allows you to run filters
  on all of your existing mail. It leverages the existing TaskQueue
  architecture to: a) resume where it left off if you quit midway,
  b) be queryable (for status) from all windows and c) cancelable.
  The TaskQueue is a bit strange because it runs performLocal and
  performRemote very differently, and I had to use `performRemote`.
  (todo refactor soon.)

This diff also changes the EditableList a bit to behave like a
controlled component and render focused / unfocused states.

Test Plan: Run tests, only for actual filter processing atm.

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2379"
jstejada,2015-12-22 22:30:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5213eae6f43ea7142079bd8a6290d8e33b19a6b,e5213eae6f43ea7142079bd8a6290d8e33b19a6b,"fix(specs): Fix and update QuerySubscription specs

- Updates test scenario to test for when the new item already exists in
the set with the same clientId but a new serverId"
jstejada,2015-12-22 21:17:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/99560a35cf40a5819652cdb2158793942b64530a,99560a35cf40a5819652cdb2158793942b64530a,"fix(observables): Fix QuerySubscription to check for clientId's in result set

- See TODO comments
- Fixes #680
- Fixes #681"
emorikawa,2015-12-22 18:36:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dbdd5cfd67a56a5188c67ad2d7d0e36cc61223d,3dbdd5cfd67a56a5188c67ad2d7d0e36cc61223d,fix(spec): fix send-draft spec to test for include
jstejada,2015-12-22 18:06:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/2145627547d60e1747efb76d4108dd47ecce77c4,2145627547d60e1747efb76d4108dd47ecce77c4,"fix(send-draft): Include body when sending message in new send draft
logic"
jstejada,2015-12-22 04:20:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/5675f244074bd6344d7ade22d08e8df6c593a90b,5675f244074bd6344d7ade22d08e8df6c593a90b,"fix(prefs): Prevent main key commands from being fired to thread list while on prefs page

Summary:
- When the preferences sheet is open, any commands triggered through key presses were being received by the thread-list, producing unexpected
(and unseen) results
- This is a partial/temporary solution and should go away when we do the Keymap/Commands/Menu refactor

Test Plan: - Manaul

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2380"
jstejada,2015-12-22 02:07:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/a22dbd045fb142b238dd5ae05480baaad460a84b,a22dbd045fb142b238dd5ae05480baaad460a84b,":cherries:(atom): Pull updated version of Command Registry:

- This fixes a bug present in the earlier version where stopPropagation and
preventDefault were not correctly defined in the custom event
- Updates clear-cut dependency and initialization of CommandRegistry in
NylasEnv"
jstejada,2015-12-21 21:54:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/69e1ec1442864c5e5e1ccc280ae41290f6bf065a,69e1ec1442864c5e5e1ccc280ae41290f6bf065a,refactor(tray): Update main file for tray package
emorikawa,2015-12-22 03:58:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/2aae0751267419e1c057d6a97c14f2b5b6633e57,2aae0751267419e1c057d6a97c14f2b5b6633e57,"refactor(contenteditable): new `ContenteditableExtension` API

Summary:
This provides a new API for `ContenteditableExtension`s. Instead of
manually manipulating the raw DOM and `Selection` objects, there's a new
`Editor` interface that encapsulates it and provides helper methods.

You can now do:

      editor.select(someNode).createLink(""foo"").collapseToEnd()

Now raw methods like `execCommand` ONLY show up in the `Editor` interface
as well as most of the raw `Selection` APIs.

There are also more integration tests :)

Another major goal was cleaning up the contenteditable file itself. To
that end:

1. The DOMNormalizer got pulled out into its own extension
1. The TabManager is now its own extension
1. Url wrangling got moved into the FloatingToolbar control
1. There is now the concept of a `ContenteditableService`, which are
tightly-couple blocks of code separated out into logical units. These are
dependent on the core state, innerState, and props and are not full
extensions.
1. `MouseService` now handles all the click event logic
1. `ClipboardService` was modified to the new service architecture

Test Plan: script/grunt run-integration-tests

Reviewers: drew, juan, bengotow

Reviewed By: juan, bengotow

Differential Revision: https://phab.nylas.com/D2367"
mbilker,2015-12-22 01:28:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/506170c5a95aa82e39917695c3c7568b429e549e,506170c5a95aa82e39917695c3c7568b429e549e,fix(appveyor): check if the decryption password env variable is set
emorikawa,2015-12-21 19:50:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/a267ccd0bc1d0b0231c92653c895c50fd22d6e50,a267ccd0bc1d0b0231c92653c895c50fd22d6e50,"fix(draft): New Send Draft logic

Summary:
This is a WIP for the new send draft logic.

I'll add tests then update the diff

Test Plan: todo

Reviewers: bengotow, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2341"
mbilker,2015-12-21 16:27:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/5836c065c748ee9d1608b9966ef136fbd37e4c66,5836c065c748ee9d1608b9966ef136fbd37e4c66,fix(appveyor): return build verbosity to normal
mbilker,2015-12-21 16:24:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/14aea859105ccfca5f3c193b9b7f97163fc89d09,14aea859105ccfca5f3c193b9b7f97163fc89d09,"fix(appveyor): now working, YAML parses correctly"
mbilker,2015-12-21 16:14:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f927ba94ebb9182ea7b52eefc93aef3479b83d9,5f927ba94ebb9182ea7b52eefc93aef3479b83d9,fix(appveyor): increase verbosity for testing
mbilker,2015-12-21 16:11:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/818c1942f97d5cc13d3f35ac0dbbc1919ae786c2,818c1942f97d5cc13d3f35ac0dbbc1919ae786c2,"fix(appveyor): check if running in PR, disable commands requiring secure variables if so"
Sumukh,2015-12-21 11:31:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/78d8a1a24582399199d39e5d616e2fc3c141b096,78d8a1a24582399199d39e5d616e2fc3c141b096,Names with @ are included in the contact name. Resolves #713
jstejada,2015-12-21 05:30:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/de1f8d24d0a6cefc19f0a7b5481274ab7d358041,de1f8d24d0a6cefc19f0a7b5481274ab7d358041,"update(tray): Show 'Open Inbox' tray menu option and option to disable
tray  on Mac and Linux

- Resolves #673
- Resolves #762
- Resolves #594"
jstejada,2015-12-20 21:45:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/57651300ac48407cd833c1d90fcf84ce9b1eb047,57651300ac48407cd833c1d90fcf84ce9b1eb047,"Merge pull request #726 from daveperdue/patch-1

Fix broken icon from issue #465 and Fix icon path for install"
jstejada,2015-12-20 21:11:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/504d0522272bdb57f361b22d2bca1c85153d5ac2,504d0522272bdb57f361b22d2bca1c85153d5ac2,"fix(feedback-window): Close correctly when in fullscreen mode

- Now shows main window when feedback window is closed/hidden
- Fixes #615"
jstejada,2015-12-20 09:50:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/43ead58d32300c7c7f0d52321b4377ab22892839,43ead58d32300c7c7f0d52321b4377ab22892839,"fix(feedback-window): Remove handler that prevented window from closing

- Fixes #773
- window.onbeforeunload inside feedback window was returning false and
preventing the window from being closed."
jstejada,2015-12-18 22:10:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b841dc5a8f5ce7194a7c9362003ed98f7cd7c24,0b841dc5a8f5ce7194a7c9362003ed98f7cd7c24,fix(typo): Fix typo in floating toolbar container
jstejada,2015-12-18 19:03:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b559d41bed2c6782c45e72a241245676c3f07eca,b559d41bed2c6782c45e72a241245676c3f07eca,"feat(editor-region): Add support to register components as editors

Summary:
- The main purpose of this is to be able to properly register the editor for the markdown plugin (and any other plugins to come)

- Refactors ComposerView and Contenteditable ->
  - Replaces Contenteditable with an InjectedComponent for a new region role:
    ""Composer:Editor""
  - Creates a new component called ComposerEditor, which is the one that is
    being registered by default as ""Composer:Editor""
  - I used this class to try to standardize the props that should be
    passed to any would be editor Component:
    - Renamed a bunch of the props which (I think) had a bit of
      confusing names
    - Added a bunch of docs for these in the source file, although
      I feel like those docs should live elsewhere, like in the
      ComponentRegion docs.
  - In the process, I ended up pulling some stuff out of ComposerView and
    some stuff out of the Contenteditable, namely:
    - The scrolling logic to ensure that the composer is visible while
      typing was moved outside of the Contenteditable -- this feels more
      like the ComposerEditor's responsibility, especially since the
      Contenteditable is meant to be used in other contexts as well.
    - The ComposerExtensions state; it feels less awkward for me if this
      is inside the ComposerEditor because 1) ComposerView does less
      things, 2) these are actually just being passed to the
      Contenteditable, 3) I feel like other plugins shouldn't need to
      mess around with ComposerExtensions, so we shouldn't pass them to the
      editor. If you register an editor different from our default one,
      any other ComposerExtension callbacks will be disabled, which
      I feel is expected behavior.
  - I think there is still some more refactoring to be done, and I left some TODOS
    here and there, but I think this diff is already big enough and its a minimal
    set of changes to get the markdown editor working in a not so duck
    tapish way.
- New props for InjectedComponent:
  - `requiredMethods`: allows you to define a collection of methods that
    should be implemented by any Component that registers for your
    desired region.
    - It will throw an error if these are not implemented
    - It will automatically pass calls made on the InjectedComponent to these methods
      down to the instance of the actual registered component
    - Would love some comments on this approach and impl
  - `fallback`: allows you to define a default component to use if none were
    registered through the ComponentRegistry
- Misc:
  - Added a new test case for the QuotedHTMLTransformer
- Tests:
  - They were minimally updated so that they don't break, but a big TODO
    is to properly refactor them. I plan to do that in an upcoming
    diff.

Test Plan: - Unit tests

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2372"
bengotow,2015-12-17 19:46:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/a14a5212ac5bd227cc40511480b6b5715dc90b5a,a14a5212ac5bd227cc40511480b6b5715dc90b5a,"feat(transactions): Explicit (and faster) database transactions

Summary:
Until now, we've been hiding transactions beneath the surface. When you call persistModel, you're implicitly creating a transaction.
You could explicitly create them with `atomically`..., but there were several critical problems that are fixed in this diff:

- Calling persistModel / unpersistModel within a transaction could cause the DatabaseStore to trigger. This could result in other parts of the app making queries /during/
  the transaction, potentially before the COMMIT occurred and saved the changes. The new, explicit inTransaction syntax holds all changes until after COMMIT and then triggers.

- Calling atomically and then calling persistModel inside that resulted in us having to check whether a transaction was present and was gross.

- Many parts of the code ran extensive logic inside a promise chained within `atomically`:

  BAD:

```
  DatabaseStore.atomically =>
   DatabaseStore.persistModel(draft) =>
     GoMakeANetworkRequestThatReturnsAPromise
```

OVERWHELMINGLY BETTER:

```
  DatabaseStore.inTransaction (t) =>
     t.persistModel(draft)
  .then =>
    GoMakeANetworkRequestThatReturnsAPromise
```

Having explicit transactions also puts us on equal footing with Sequelize and other ORMs. Note that you /have/ to call DatabaseStore.inTransaction (t) =>. There is no other way to access the methods that let you alter the database. :-)

Other changes:
- This diff removes Message.labels and the Message-Labels table. We weren't using Message-level labels anywhere, and the table could grow very large.
- This diff changes the page size during initial sync from 250 => 200 in an effort to make transactions a bit faster.

Test Plan: Run tests!

Reviewers: juan, evan

Reviewed By: juan, evan

Differential Revision: https://phab.nylas.com/D2353"
bengotow,2015-12-17 19:19:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6c69e2775d04a36fde37ccc2a7f566268fd4878,a6c69e2775d04a36fde37ccc2a7f566268fd4878,"Merge pull request #728 from francois2metz/fix_unused_require

Harmonize require and remove unused ones."
francois2metz,2015-12-15 19:03:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/6108798c53b21f0a7522ea1538be6aa43bb304e0,6108798c53b21f0a7522ea1538be6aa43bb304e0,Harmonize require and remove unused ones.
daveperdue,2015-12-16 20:14:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d0e0201bbf5f38b148ea73098a22cff619a9790,5d0e0201bbf5f38b148ea73098a22cff619a9790,"Fix broken GNOME dock icon

This addresses an issue mentioned in Issue #465 regarding a missing icon."
daveperdue,2015-12-16 19:59:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e952f83752551d64ed6ae305fc3879d57b4f811,7e952f83752551d64ed6ae305fc3879d57b4f811,"Remove redundant path in .desktop for Linux

The install-task has two instructions that add an extra ""resources"" to the iconName directory and thus the icon doesn't work. The resulting nylus.desktop has an invalid path for the icon."
bengotow,2015-12-16 01:08:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/856f44fe5f8326a2931ad4e764c78821246ea40b,856f44fe5f8326a2931ad4e764c78821246ea40b,"Merge pull request #706 from noahbuscher/patch-1

Added link to plugin and theme repo"
bengotow,2015-12-15 21:55:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb21377f5f7902bbb27433d3f5c27a15d1b34160,eb21377f5f7902bbb27433d3f5c27a15d1b34160,"fix(downloads): Create directory path with correct separator

Fixes #709"
bengotow,2015-12-15 19:59:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/b11131d181e4a2950670210083955bd23b2b3fa6,b11131d181e4a2950670210083955bd23b2b3fa6,bump(version): 0.3.32
bengotow,2015-12-15 19:56:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/71bd96f97890c4a0a1b5f26a8101fb3b06eb5c82,71bd96f97890c4a0a1b5f26a8101fb3b06eb5c82,fix(aliases): Add note that aliases may need to be setup
bengotow,2015-12-15 19:34:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c48d27cfc2a1a9b4ff102879b5d615ec4b6b9b0,5c48d27cfc2a1a9b4ff102879b5d615ec4b6b9b0,"fix(locales): Copy lproj files to ensure navigator.language works

See https://github.com/atom/electron/issues/2484"
jstejada,2015-12-15 17:54:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/f575a2dabc40cc49b60a2c59ff716a9bf6c14b65,f575a2dabc40cc49b60a2c59ff716a9bf6c14b65,"feat(theme-selector): Add theme selector to preferences page

Summary:
- Adds a couple of helper methods to theme manager and updates how
a theme package is enabled to be consistent with how we actually want to
activate themes.
- Adds small select component to choose a theme or install a new one.

Test Plan: - Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2355"
bengotow,2015-12-14 23:47:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/64fc74cc6a6fb4275df4e026207bc87359c9fb81,64fc74cc6a6fb4275df4e026207bc87359c9fb81,fix(lint): Remove `return` statement from editable list
emorikawa,2015-12-14 23:22:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/b62a129e06ac17447a7b53492dc87e7fe85fdf52,b62a129e06ac17447a7b53492dc87e7fe85fdf52,fix(bootstrap): split commands
jstejada,2015-12-12 22:11:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c7a162909ab8db3c34aa821e5afedb9c1712642,6c7a162909ab8db3c34aa821e5afedb9c1712642,"add(integration-test): Adds test for onboarding flow with Exchange

Summary:
- Make sure user can log in using exchange
- Adds some test helpers for the test
- Updates eslint.json and cleans up lint errors

Test Plan: - Integration Tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2346"
bengotow,2015-12-14 22:36:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/754b75d0474e987813516eacf0042bf938240632,754b75d0474e987813516eacf0042bf938240632,bump(version): 0.3.31
jstejada,2015-12-14 22:34:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/26a907c0c0802b9c0632be0ee260659898a4b6d6,26a907c0c0802b9c0632be0ee260659898a4b6d6,"feat(default-alias): Add functionality to select a default alias

Summary:
- Update Account model witha default alias and DraftStore methods that
construct new messages to use default alias if available.
- Update AccountDetails page and add selector to select default alias

Test Plan: - Unit tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2352"
jstejada,2015-12-14 22:29:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d77d6399ddc23c674ac8b700a0972adaa68eaf3,9d77d6399ddc23c674ac8b700a0972adaa68eaf3,"fix(editable-list): Prevent empty selection on esc pressed + other fixes

- When prop specified to not allow empty selection it should also
prevent it from being cleared when pressing Esc while focusing the list
- Adds a default value to the edit item input
- Updates specs
- Updates styles"
noahbuscher,2015-12-14 20:24:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc3de3d276fbf575f94465164100fade44bc4b5e,cc3de3d276fbf575f94465164100fade44bc4b5e,Added link to plugin and theme repo
emorikawa,2015-12-14 20:09:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/35d94decd92ca29eb7e1102a59dc07973e7a9445,35d94decd92ca29eb7e1102a59dc07973e7a9445,fix(tests): fix composer integration specs
emorikawa,2015-12-14 20:05:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/54f52a61d0adf107440a7f2c09f246ea4d5cf51e,54f52a61d0adf107440a7f2c09f246ea4d5cf51e,fix(tests): fix composer integration tests
jstejada,2015-12-14 18:32:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/aed9b772073e25dd16dea812ac21cdcf059cefc9,aed9b772073e25dd16dea812ac21cdcf059cefc9,"fix(shortcuts): Fix shortcut handlers for marking as read/unread

- Marking as read/unread did not work when selecting multiple threads"
jstejada,2015-12-14 08:31:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/f153d4befc607f81093f15b17f09b84265e6ebea,f153d4befc607f81093f15b17f09b84265e6ebea,fix(prefs): Make General preferences tab be the initially selected one
jstejada,2015-12-14 08:02:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa57ab3990fa34400811c3eadb495b4b553c0d17,aa57ab3990fa34400811c3eadb495b4b553c0d17,"fix(specs): Fix composer view specs for enabling 'from:' field based on
aliases

- Will show from field when account has at least one alias"
jstejada,2015-12-14 07:33:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0a5e0d7155d2e740b7d9ede4064265b98a1ba70,c0a5e0d7155d2e740b7d9ede4064265b98a1ba70,"refactor(extensions): Move extensions outside of flux/ folder

Not really related to flux, makes more sense to be inside src/"
jstejada,2015-12-14 07:32:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/75fb478dd72bd21e0cb6eecacdc118641c6eef66,75fb478dd72bd21e0cb6eecacdc118641c6eef66,fix(warnings): Remove deprecate warnings from specs
bengotow,2015-12-12 03:04:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8b3a09599501e16ff1a58981f6a8e4b31815002,d8b3a09599501e16ff1a58981f6a8e4b31815002,fix(aliases): Show from field whenever aliases are present
bengotow,2015-12-12 01:13:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/433b218f4805b10e1c2373f82b76a2e9ce18930a,433b218f4805b10e1c2373f82b76a2e9ce18930a,fix(ci): `stable` instead of `release/*` branches
bengotow,2015-12-11 23:11:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/f16f97eaea399b1f87e962a3aa6e89759a24f25e,f16f97eaea399b1f87e962a3aa6e89759a24f25e,fix(ci): Publish appveyor release branch builds
bengotow,2015-12-11 22:49:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a77552f9ba67308847c9ae968aadea46593963c,5a77552f9ba67308847c9ae968aadea46593963c,bump(version): 0.3.30
emorikawa,2015-12-11 22:42:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee17b9d975cc9eaa1989de68797a09f34e08d54c,ee17b9d975cc9eaa1989de68797a09f34e08d54c,fix(ci): run grunt script in win compatible way
bengotow,2015-12-11 22:44:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ea0202cc7b8fd84e7ee327ed73afd698b546523,7ea0202cc7b8fd84e7ee327ed73afd698b546523,fix(ci): Publish builds on release branches
bengotow,2015-12-11 22:09:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0e4b2405fadb2f5121cef287b8d0f38b03a1645,f0e4b2405fadb2f5121cef287b8d0f38b03a1645,fix(select-all): Disable Cmd-A to select threads for now
emorikawa,2015-12-11 22:08:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d5036242865468626f0c1cebb62e6d145fb4185,8d5036242865468626f0c1cebb62e6d145fb4185,fix(build): add nylas resources before apm install
emorikawa,2015-12-11 21:41:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e83c16ec2151e71b626a729ae2cb7f401199303e,e83c16ec2151e71b626a729ae2cb7f401199303e,fix(spellcheck): let win < 8 fallback to hunspell
emorikawa,2015-12-11 21:25:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/546248782f8020c7fbc2ff50701cb5e2ae21caf3,546248782f8020c7fbc2ff50701cb5e2ae21caf3,docs(tests): add docs about integration testing
jstejada,2015-12-11 20:33:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8fb26ab88e960c774642172c700677aeb599585,e8fb26ab88e960c774642172c700677aeb599585,fix(editable-list): Refocus list after editing or creating
emorikawa,2015-12-11 20:35:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed805869f2355c8685e4e3c897e2e0bed1121ff7,ed805869f2355c8685e4e3c897e2e0bed1121ff7,fix(spellcheck): add tests and merge in Linux changes
mbilker,2015-12-11 05:50:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d4b86dc5d06e6538fcf6c9ac0e58cd470783d3b,3d4b86dc5d06e6538fcf6c9ac0e58cd470783d3b,"spec(spellchecker): handle some weird Linux cases

Linux returns ['asked', 'acidify', 'Assad'] for the string ""asdfk""
which seems normal to me. Why do OS X and/or Windows return [] for
that string? That seems weird, so I just broke the spec to run different
specs on different platforms."
mbilker,2015-12-11 05:26:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/755f6024a36d7e7304e7a83a4b43f627d3eaa6e3,755f6024a36d7e7304e7a83a4b43f627d3eaa6e3,"fix(spellchecker): confine the linux changes to only 3 methods

The ""it provides options for misspelled words"" still fails with
""asdfk"" supposed to supply no corrections, which I find unlikely in
the real world, and Hunspell provides corrections."
mbilker,2015-12-11 04:51:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/699d6369cc051b34e84bf97a5a0a6e960175635f,699d6369cc051b34e84bf97a5a0a6e960175635f,lint(spellchecker): remove trailing semicolons
mbilker,2015-12-11 04:37:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/44fccfb54f5537edca9f7b43ffdd5549c60320ef,44fccfb54f5537edca9f7b43ffdd5549c60320ef,"fix(spellchecker): Preliminary Linux support

The Linux component of Atom's spellchecker depends on Hunspell for
corrections. It requires a dictionary to be set, unlike Mac OS X
and Windows that have spellcheckers built in to the OS, and they
have the dictionaries built-in as well. This commit uses Atom's
spellchecker default dictionary method (which I wish was a public
API) to reset the dictionary to its default setting. It also ignores
the dictionaries available command for the Linux platform, which
seems to always return an empty Array."
bengotow,2015-12-11 20:16:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/fedb4197f8a1ad2e40bd9de9779159af6488eefa,fedb4197f8a1ad2e40bd9de9779159af6488eefa,fix(editablelist): Remove spec warning
bengotow,2015-12-11 20:15:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9eb3eb329702a11504abb2f93f624ba4e6a3a952,9eb3eb329702a11504abb2f93f624ba4e6a3a952,fix(thread-list): Initialize database view immediately
jstejada,2015-12-11 19:58:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/416f7e298d71a24515ed9d7dbe0ed354d9b5e287,416f7e298d71a24515ed9d7dbe0ed354d9b5e287,"fix(onboarding): AccountStore only listens to changes to account obj when window
type is composer

- AccountStore was listening to changes to account object (config file)
when it was a window different from the main window in order to update
the alias list on composer windows.
- This caused the onboarding window to also listen for changes and
caused it to incorrectly add an account twice"
bengotow,2015-12-11 19:56:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ba1e0c4a6b4f82de40eb4963ed5f228d9ca5df7,7ba1e0c4a6b4f82de40eb4963ed5f228d9ca5df7,"fix(bluebird): setImmediate > MutationObserver

We were somehow falling into a bluebird case where it uses a DOMMutationObserver instead of nextTick. We should probably report this to them."
bengotow,2015-12-11 19:55:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/60fad2822c0794a32300839953562a4ed4b593d6,60fad2822c0794a32300839953562a4ed4b593d6,"fix(contextualmenu): Disable for non-selectable inputs

  Fixes #664"
jstejada,2015-12-11 19:03:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/6697372c92b3ec860eebd5aa1a1ee86dddc2ebec,6697372c92b3ec860eebd5aa1a1ee86dddc2ebec,update(specs): Add more test coverage to EditableList + refactors
jstejada,2015-12-11 18:01:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/80be13410decc9e147faa3b21d3639b2d3ccc422,80be13410decc9e147faa3b21d3639b2d3ccc422,fix(docs): Update ES6 comment docs to use JSDoc 3 format
emorikawa,2015-12-11 16:22:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/35f6273d52d05d622c71192160895fe84dd9ee88,35f6273d52d05d622c71192160895fe84dd9ee88,fix(hot-api): remove react-hot-api
jstejada,2015-12-11 02:19:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/14f0086a0210e65d0058d55b3629855c42f1ae62,14f0086a0210e65d0058d55b3629855c42f1ae62,"fix(warning): Remove implicit return from event handler to remove react
warning"
jstejada,2015-12-11 01:59:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/0073f21982ca9d3dd4a68a9fe81be5b71c2c1227,0073f21982ca9d3dd4a68a9fe81be5b71c2c1227,add(docs):Add documentation to EditableList and PreferencesAccountDetails
jstejada,2015-12-09 20:35:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/281e458d3949ce239359a263aee4856163ebc0b8,281e458d3949ce239359a263aee4856163ebc0b8,"feat(account-prefs): Adds new page for Account in preferences

Summary:
Adds the new Account preferences page. This consists of two major React components,
PreferencesAccountList and PreferencesAccountDetails, both of which use EditableList.

I added a bunch of fixes and updated the API for EditableList, plus a bit of
refactoring for PreferencesAccount component, and a bunch of CSS so its a big diff.

The detailed changelog:

Updates to EditableList:
  - Fix bug updating selection state when arrows pressed to move selection
  - Add new props:
    - allowEmptySelection to allow the list to have no selection
    - createInputProps to pass aditional props to the createInput
  - Add scroll region for list items
  - Update styles and refactor render methods

Other Updates:
- Updates Account model to hold aliases and a label
  - Adds getter for label to default to email
- Update accountswitcher to display label, update styles and spec

- Refactor PreferencesAccounts component:
  - Splits it into smaller components,
  - Removes unused code
- Splits preferences styelsheets into smaller separate stylesheet for
  account page. Adds some updates and fixes (scroll-region padding)
- Update AccountStore to be able to perform updates on an account.
- Adds new Action to update account, and an action to remove account to
  be consistent with Action usage
- Adds components for Account list and Aliases list using EditableList

Test Plan: - All specs pass, but need to write new tests!

Reviewers: bengotow, evan

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2332"
bengotow,2015-12-10 22:12:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2db9e1a5dab86849ff812833b27600e2b6381ec,d2db9e1a5dab86849ff812833b27600e2b6381ec,"fix(*): Fix for ""apply is not a function"" lost in revert of e275f35"
emorikawa,2015-12-10 21:51:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/35e45032ec2dc3d7ca787354ba47fb69da07c95f,35e45032ec2dc3d7ca787354ba47fb69da07c95f,fix(composer): focus on text box when clicking in margins
bengotow,2015-12-10 21:43:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/03908fbd845c1d0d09efd52d98c75f3d7f3792f3,03908fbd845c1d0d09efd52d98c75f3d7f3792f3,fix(drafts): Refresh view when draft becomes message
emorikawa,2015-12-10 19:22:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/49925ee4047596441434e1f3a6a660e556e10242,49925ee4047596441434e1f3a6a660e556e10242,feat(ci): add build/node_modules to cache
emorikawa,2015-12-10 19:16:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/e90708aceb8d3a96703028ac6e901d11cf586f5a,e90708aceb8d3a96703028ac6e901d11cf586f5a,fix(ci): add caching and fix ssh issue
emorikawa,2015-12-10 19:04:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4ca1b49c2d8ae26706713171460cfd2e90b33ec,e4ca1b49c2d8ae26706713171460cfd2e90b33ec,fix(win): remove winattr
emorikawa,2015-12-10 17:44:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1d34963e28cd64148eb8d5de66ec49920063971,d1d34963e28cd64148eb8d5de66ec49920063971,fix(win): repalce fswin with winattr
mbilker,2015-12-08 03:02:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3686e3f83f7afb17909b5741f4d4cc3f994a7c7,a3686e3f83f7afb17909b5741f4d4cc3f994a7c7,fix(travis): include GitHub OAuth token to preven Electron download error
mbilker,2015-12-08 02:33:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/644c118d084576db7102121b99b9e3169e2b6bc2,644c118d084576db7102121b99b9e3169e2b6bc2,fix(travis): use the private assets only when building branches from main repository
mbilker,2015-12-08 02:29:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f6f25044e8aa900678cc73f214f0e325ad0a422,4f6f25044e8aa900678cc73f214f0e325ad0a422,"fix(travis): use the ssh_known_hosts addon to run ssh-keyscan

Travis provides a wonderful helper addon documented at
https://docs.travis-ci.com/user/ssh-known-hosts/.

The behavior changed moves the ssh-keyscan from the before_install
stage to the addons stage."
mbilker,2015-12-08 02:14:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/fbcab54642ac8e58d8431fa9ce846e560b19fd42,fbcab54642ac8e58d8431fa9ce846e560b19fd42,"fix(travis): readd whitespace, reorder according to build Travis build process

Found the order at https://docs.travis-ci.com/user/customizing-the-build/.

In nylas/N1@989f38ca77e56eaf3d8457b6c2ed03b14b5f6fcd the entire build script
was merged from Evan Morikawa, which reordered the whole Travis build script.
athis commit reorders the to have the Travis build environment config at the
beginning of the script and the build process at the end and the Travis
secure variables at the end of the script."
emorikawa,2015-12-10 15:52:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/4014b4e187b34bba7d144bc4880e1fff23b20214,4014b4e187b34bba7d144bc4880e1fff23b20214,"feat(spec): add config dir to integration specs

Summary:
- You can now pass `--config-dir-path=/some/custom/path` to `./N1.sh`
- `main.coffee` cleaned up a bit. A lot of unused params from legacy Atom
  stuff were still being used
- Integration specs now set the config dir before booting.
- New spec to check for the autoupdater in the app and make sure it's
  pointing at the right place.

Test Plan: script/grunt run-integration-tests

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2331"
grinich,2015-12-10 07:53:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/7000a1c71b8b548f88ff0a03f9bf502916df4a4e,7000a1c71b8b548f88ff0a03f9bf502916df4a4e,"Merge pull request #652 from sriraman/patch-1

Update README.md"
sriraman,2015-12-10 07:03:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/74a7e090660a3e612d92813700dc292c65a57687,74a7e090660a3e612d92813700dc292c65a57687,"Update README.md

Fix typo"
bengotow,2015-12-10 03:38:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/1904c6f80b4aeaed6202ea69c915cfeb89d97787,1904c6f80b4aeaed6202ea69c915cfeb89d97787,perf(travis): Fewer mac builds—Travis has fixed OS X bandwidth
bengotow,2015-12-10 01:02:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe5d78cc5168cb8bd283da73dd084b2b9a0ed967,fe5d78cc5168cb8bd283da73dd084b2b9a0ed967,fix(downloads): Download.run must resolve with self
dregitsky,2015-12-10 00:41:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3e986d94a015c316297d4bf9d87b8dec5231dc2,a3e986d94a015c316297d4bf9d87b8dec5231dc2,"fix(quickschedule): Several UI fixes

Summary:
Fixes a number of smaller UI issues. Fixes T6173, T6207
Full list of changes:
 - Ensure time slots / days display in order
 - Allow time blocks of any size to be set on half hour intervals
 - Don't reset calendar when changing event length
 - Expand calendar on window resize
 - Change window title from ""Electron""
 - Add delete button to cancel individual calendar events
 - Move event details box to the left side
 - Prevent addition of duplicate time slots

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T6173, T6207

Differential Revision: https://phab.nylas.com/D2333"
bengotow,2015-12-10 00:27:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/2dc43d141bee656db2c27e7f8ef125765525541e,2dc43d141bee656db2c27e7f8ef125765525541e,fix(menu): Toggle Menu Bar doesn't do anything #606
bengotow,2015-12-10 00:02:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/193bd0c06e04e39ac042efafb71d8eca4721aa67,193bd0c06e04e39ac042efafb71d8eca4721aa67,"Merge pull request #628 from mbilker/task-helper-undefined-process-env

Replace function accessor with property accessor in Grunt's task-helper script"
bengotow,2015-12-09 23:57:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ba157aadfc749acf3089de25a5d6119502697e7,9ba157aadfc749acf3089de25a5d6119502697e7,"Merge pull request #629 from mbilker/classnames-require-case-sensitive

Require `classNames` throws error under Linux"
bengotow,2015-12-09 21:53:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a62cd8c59475478cd874dddeee634c0418d742e,1a62cd8c59475478cd874dddeee634c0418d742e,bump(changelog): Update for 0.3.29
bengotow,2015-12-09 21:34:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/838646b7e4e7670f2bd37cf7757af5acd0b78619,838646b7e4e7670f2bd37cf7757af5acd0b78619,fix(spinner): Improve loading indicator style / tweening
emorikawa,2015-12-09 23:32:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d56b6828a223aace6f0d035eb48c68c533bf376,7d56b6828a223aace6f0d035eb48c68c533bf376,fix(spellcheck): add test for null navigator.language
emorikawa,2015-12-09 23:14:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/cbd4060edf3e661523bca44ae1fa28bf4fb2c550,cbd4060edf3e661523bca44ae1fa28bf4fb2c550,bump(internal): update submodule reference
emorikawa,2015-12-09 23:10:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/9af40833accdc2beddf6fecad0a3e5261cfaffa9,9af40833accdc2beddf6fecad0a3e5261cfaffa9,fix(spellcheck): check for existing languages and add tests
emorikawa,2015-12-09 21:47:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/e18a272803649122f1746636c1fc8591987d3a88,e18a272803649122f1746636c1fc8591987d3a88,fix(language): default to english if language doesn't exist
bengotow,2015-12-09 20:29:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdbeb3104981aad331d312847cfd157807c58b20,bdbeb3104981aad331d312847cfd157807c58b20,bump(electron): 0.35.4
bengotow,2015-12-09 18:55:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/e19a69c4a8e4b7e5703eb62674a81db3de57d79a,e19a69c4a8e4b7e5703eb62674a81db3de57d79a,polish(quick-schedule): Use calendar icon in the composer
bengotow,2015-12-09 01:56:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/c993a1f51a0a55f2011487a60073f7c1d8cb7677,c993a1f51a0a55f2011487a60073f7c1d8cb7677,bump(version): 0.3.29
bengotow,2015-12-09 01:56:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/af75a5170c4aa55448f49dc0c3e74a0d1f04538f,af75a5170c4aa55448f49dc0c3e74a0d1f04538f,fix(translate): Use an icon for the translate button
bengotow,2015-12-09 01:44:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee78090ce0058d6a6de650be0575a44496294ae4,ee78090ce0058d6a6de650be0575a44496294ae4,"fix(composer): Change state.focusedField when clicking fields—see details

Clicking participant fields to type in them did not cause state.focusedField to change, because no onFocus events were bound to the ParticipantTextFields. Since setState was not called, the focus would appear to change but revert as soon as you touched state.

This diff also renames `onChangeEnabledFields` to `onAdjustEnabledFields` making it more clear that unlike the other handlers, it does not take a new value, it takes a set of changes. I also noticed that we /always/ focus fields when showing them, so I removed the separate focus param from it and made it adjust focus at the composer-view level only.

I also consolidated everywhere that touches `state.focusedField` so that we can keep the `_lastFocusedParticipantField` value in sync with it more easily."
bengotow,2015-12-09 01:05:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/1bc10cfbbbad00b9fc3314226df168b09673ba3a,1bc10cfbbbad00b9fc3314226df168b09673ba3a,fix(auth): Log first account creation
mbilker,2015-12-09 00:42:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/a022718684629e4492680db44555a4348cee641e,a022718684629e4492680db44555a4348cee641e,"fix(require): require classNames throws error under Linux

The issue stems that Mac OS X uses a case-insensitive filesystem by
default, while most Linux filesystems are case-sensitive. The classNames
package will require successfully on Mac OS X during Travis tests, but
since the spec test suite isn't normally run under Linux this bug is
more unlikely to appear."
bengotow,2015-12-09 00:39:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ca28a340d7aa6664b25024ddd9bb3ef990daeae,5ca28a340d7aa6664b25024ddd9bb3ef990daeae,fix(auth): Track authentication success / failure rates by provider
bengotow,2015-12-08 22:47:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/b53dac178d4b602e819ad79d89ef6570c67df95e,b53dac178d4b602e819ad79d89ef6570c67df95e,fix(serialization): Inflate / deflate JSON from database with registered object system
bengotow,2015-12-08 23:14:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/d3fcc6cde64d583125466a06a68b05ee9b8a2625,d3fcc6cde64d583125466a06a68b05ee9b8a2625,"Revert ""fix(json): serialize blob data""

This reverts commit e275f353c1b226d582db3d9bc67a6d7bd5132029."
mbilker,2015-12-08 23:02:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b037ae8f2a42faacd5489215bc305994578987e,7b037ae8f2a42faacd5489215bc305994578987e,"fix(tests): replace () with [] for properties of process.env

This bug appeared during a Travis test run, and only appeared on
the Linux hosts running the tests. The function appears to treat
the `process.env` as a set of functions, not properties. This
commit correctly interprets them as properties."
emorikawa,2015-12-08 21:11:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/e275f353c1b226d582db3d9bc67a6d7bd5132029,e275f353c1b226d582db3d9bc67a6d7bd5132029,"fix(json): serialize blob data

Summary:
A fix to reserialize JSON blob data properly for complex object types.
We should investigate overriding all of JSON.parse and JSON.stringify.
This coming in a future diff.

Also we were using old Electron APIs that were throwing backend errors

Test Plan: todo

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2326"
jstejada,2015-12-08 18:56:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/17e9cc892181a87d98ad662e21e32a23b4f6a19c,17e9cc892181a87d98ad662e21e32a23b4f6a19c,"fix(composer): Pass in onFocus handler correctly to contenteditable

- Fixes issue where body lost focus when typing and focus switched to to
field
- Now passes the onFocus handler as part of a `ContenteditableExtension`"
emorikawa,2015-12-08 15:20:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d43622471bf8244357fa2e2dee57f46c3967084,7d43622471bf8244357fa2e2dee57f46c3967084,"fix(composer): fix bold, italic, underline keybinding"
bengotow,2015-12-08 02:01:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/0af5fea3dc4c87d334c15aefd00707ba40df0747,0af5fea3dc4c87d334c15aefd00707ba40df0747,"fix(expand-all): Fixes for dark theme, don't show expand when one message"
bengotow,2015-12-08 01:33:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/b12d23a33d837ac770f0ec49d5fc0963da5f2877,b12d23a33d837ac770f0ec49d5fc0963da5f2877,fix(templates): Example now depends on underscore
bengotow,2015-12-08 01:23:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/013d50a26bef2c40336bb481b1faa3da24805224,013d50a26bef2c40336bb481b1faa3da24805224,fix(templates): Unregister preferences tab when disabled
bengotow,2015-12-08 00:52:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/30c58e90a6c8fb35095dfbe146b9dd35ff279620,30c58e90a6c8fb35095dfbe146b9dd35ff279620,"feat(observables): Implementation of observables to replace some stores

Summary:
Add concept of ""final"" to Query, clean up internals

Tiny bug fixes

RxJs Observables!

WIP

Test Plan: Run tests

Reviewers: evan, juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2319"
emorikawa,2015-12-08 00:22:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/58c853ef7608cccca5bffd5a74378b8a485c3893,58c853ef7608cccca5bffd5a74378b8a485c3893,fix(composer): detect system language for spellchecking
jstejada,2015-12-07 23:59:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/c261488ba1aecb1cf60beb67644141d8ee31a12f,c261488ba1aecb1cf60beb67644141d8ee31a12f,fix(specs): Update specs for EditableList
jstejada,2015-12-07 23:54:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ffd324dde48428993de5557fedb74b03cb84af2,1ffd324dde48428993de5557fedb74b03cb84af2,"fix(editable-list): Fix use of children props in EditableNode + updates

- Fix issue with using this.props.children which was preventing
rerendering
- Updates styles for list
- Updates create item input:
  - Add key to prevent warning
  - Add prop for the placeholder
  - Add onBlur behavior"
bengotow,2015-12-07 23:34:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1bb98ebf4031787813e35b26a9b9b2a2ac042dd,a1bb98ebf4031787813e35b26a9b9b2a2ac042dd,"feat(paste): Paste accepts more HTML, paste and match style now available

Summary:
Related to #320, #494, #515, #553

Ignore newlines and returns in HTML, they can be inside tags

Allow all attributes so that paste from excel looks nice

Never let someone paste a `contenteditable` attribute

Update specs

Test Plan: Run new specs

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2309"
bengotow,2015-12-07 23:11:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8c79a4d50ca317a58a5557d499d042a4d56e08c,d8c79a4d50ca317a58a5557d499d042a4d56e08c,fix(theme): Dark mode styling for undo/redo component
bengotow,2015-12-07 23:05:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/2320292c15cdf9083e293241c5b4f6addce52765,2320292c15cdf9083e293241c5b4f6addce52765,"fix(theme): Dark mode styling of the from field, ""More contacts"" button

Fixes #607"
bengotow,2015-12-07 23:00:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc2118aade4ee269ff1e145de882fe984d4fc642,fc2118aade4ee269ff1e145de882fe984d4fc642,"fix(downloads): Improve inline attachment handling

- Show downloading state for inline attachments
- Ensure that the UI updates /after/ the download has completed
- Don't delete finished downloads (previously we were forgetting that a file was downloaded and checking again and again)

Fixes #462"
jstejada,2015-12-07 20:38:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/31796e396d7c7da3baa98dd850303f7eede7cdc7,31796e396d7c7da3baa98dd850303f7eede7cdc7,"update(components): Add support to create new items inside EditableList

- Adds logic to allow simple item creation
- Adds new onItemCreated callback
- Updates specs"
bengotow,2015-12-07 20:08:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/68a0a81f772a8081ec5e78000ee2bc10b203c609,68a0a81f772a8081ec5e78000ee2bc10b203c609,bump(version): 0.3.28
jstejada,2015-12-07 20:05:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7b73c69205c42217f96457b7560d707d0cae4cc,f7b73c69205c42217f96457b7560d707d0cae4cc,"fix(important): Fixes keymap handlers for mark as important/unimportant

- Updates to bind handlers inside thread list
- Fixes typo in event name
- Updates config path for showImportant"
bengotow,2015-12-07 18:43:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/77394b837dac1460bc2505e37c27c5ad5578a190,77394b837dac1460bc2505e37c27c5ad5578a190,fix(license): GPLv3 => GPL-3.0
bengotow,2015-12-07 18:46:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd7cd370b70b09dd5baa8441aaa850bf0e50ead8,dd7cd370b70b09dd5baa8441aaa850bf0e50ead8,"Merge pull request #413 from mbilker/cleanup-download-delete-after-trigger

fix(FileDownloadStore): delete download from @_downloads after @trigger"
bengotow,2015-12-07 18:40:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/46281dd0b08ed19fdf6a5585f1922e264f55d520,46281dd0b08ed19fdf6a5585f1922e264f55d520,"Merge pull request #525 from Yerlix/master

Change backspace behavior"
bengotow,2015-12-07 18:37:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/92b3e6777bb245a143faa117ebfcb70e9a5eabba,92b3e6777bb245a143faa117ebfcb70e9a5eabba,fix(search): URI encode search queries to prevent 400s
emorikawa,2015-12-03 19:53:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/989f38ca77e56eaf3d8457b6c2ed03b14b5f6fcd,989f38ca77e56eaf3d8457b6c2ed03b14b5f6fcd,feat(ci): add Travis and AppVeyor ci support
jstejada,2015-12-05 01:13:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/69a50365bc57bf90edd6069fa2d604118f155137,69a50365bc57bf90edd6069fa2d604118f155137,"feat(components): Add EditableList component to component-kit

Summary:
- Generic list component wich supports adding, editing and removing
string-like items or components
- Needs some css love

Test Plan: - Unit tests.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2322"
jstejada,2015-12-05 06:09:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/92365294a3d61bff2667cf7f99289e9f0c1004b1,92365294a3d61bff2667cf7f99289e9f0c1004b1,"update(examples): Update examples to use new ExtensionRegistry api

- Remove deprecated use of DraftStoreExtension and DraftStore.register"
bengotow,2015-12-05 03:01:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a3633d5096ca0e71734b15eb42509d82f0540f4,8a3633d5096ca0e71734b15eb42509d82f0540f4,"fix(search): Do not clear search mail view filter on account switch

Fixes #94"
bengotow,2015-12-05 02:26:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/386a599fbc695c2c7cc6f605b6b88f7fb7a9eab0,386a599fbc695c2c7cc6f605b6b88f7fb7a9eab0,"fix(keymaps): Listen to atom commands instead of DOM events

Using `addEventListener` only works when the command is triggered by the atom keymaps manager, NOT when the command is triggered by the command registry (NylasEnv.commands.dispatch). Odds are, when you subscribe to key commands you /really/ mean to subscribe to the command, no matter how it's invoked.

This fixes #556, in which the down / up arrows in the message list weren't working."
jstejada,2015-12-03 19:52:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdfd96fed2a936faaf614628da4358e235c2f78f,bdfd96fed2a936faaf614628da4358e235c2f78f,"feat(print): Add functionality to print currently focused thread

Summary:
- Adds button inside the message list to print the thread
- Adds cmdctrl-p binding to print thread
- Adds new action and new internal_package to listen to this action.
- Creates a standalone browser window with current thread html, and removes all
collapsed messsages from the print view

Test Plan: - Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2310"
bengotow,2015-12-05 01:05:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9c4a64910f334d7d5d733f6aefcfc220f0226b0,b9c4a64910f334d7d5d733f6aefcfc220f0226b0,"fix(signatures): Make the entire signature box clickable

Fixes #580"
emorikawa,2015-12-05 00:39:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8805b357ed616376ee68d62464790cc51e64a42,e8805b357ed616376ee68d62464790cc51e64a42,fix(travis): only build ci-test
bengotow,2015-12-05 00:38:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/f308e51f622db25db5311940215bfd0ebe359654,f308e51f622db25db5311940215bfd0ebe359654,fix(unread-icon): Show the correct icon for the action
bengotow,2015-12-05 00:29:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/f509a41ce77b374baf47a5ab7a32434ead9e8d1f,f509a41ce77b374baf47a5ab7a32434ead9e8d1f,"fix(counts): compute deltas for unpersist events, more specs

This fix should resolve #489"
bengotow,2015-12-04 02:58:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/980f3ba7aa1f9cd810440a4b2d1972a5055ddf79,980f3ba7aa1f9cd810440a4b2d1972a5055ddf79,changelog: Notes about 0.3.27 patch
jstejada,2015-12-01 22:38:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/e133896e68401bf322be4c39f26ba42516b18ef1,e133896e68401bf322be4c39f26ba42516b18ef1,"feat(messages): Add button to expand/collapse all messages in thread

Summary:
- Works like Gmail does
- Adds specs

Test Plan: - Unit tests

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2301"
bengotow,2015-12-03 19:36:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/b224347e10b216b2b8d47c9dd2e1200c825c8f6f,b224347e10b216b2b8d47c9dd2e1200c825c8f6f,"docs(notifs): On linux, display a note about Zenity in prefs"
bengotow,2015-12-03 19:25:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/015e8a5aba9cd10a9b8c64007c67163efc6139a1,015e8a5aba9cd10a9b8c64007c67163efc6139a1,"fix(autoload-images): Catch images with no extension, add tests"
dregitsky,2015-12-03 05:28:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/71328855eecf51781f66e24fb54347b199f99d38,71328855eecf51781f66e24fb54347b199f99d38,"feat(templates-plugin): Add prefs page with template editor, fix bugs.

[Composer Templates / Quick Reply plugin example]

Add a page to preferences with a basic editor for quick reply templates,
allowing add, delete, and edit (HTML and rendered text), with instructions
for how to add variable regions. Add methods to TemplatesStore to enable
these. Fix issues in plugin with quoted text handling, name conflicts,
`this` scoping."
emorikawa,2015-12-03 00:49:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/29868429fa5367380c4d4d80e818e9d88d566df1,29868429fa5367380c4d4d80e818e9d88d566df1,fix(deploy): add travis-test branch to build whitelist
emorikawa,2015-12-02 23:17:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0b4005ce7ae6d3b8856aec98a2bb6e2cbf3d529,f0b4005ce7ae6d3b8856aec98a2bb6e2cbf3d529,fix(build): ignore submodules on travis
emorikawa,2015-12-02 22:45:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/e9936581be1e172162d28ea0ffe7594d9024fb10,e9936581be1e172162d28ea0ffe7594d9024fb10,feat(build): add nylas resources
emorikawa,2015-12-02 21:59:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/be60f38daf7c7217d6ff1e8e3799037b6726786b,be60f38daf7c7217d6ff1e8e3799037b6726786b,feat(build): add nylas build resources
emorikawa,2015-12-02 21:40:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/f508dd8683713d03aaf2787df44eadf17aa2393a,f508dd8683713d03aaf2787df44eadf17aa2393a,refactor(spec): remove spectron from main app
emorikawa,2015-12-02 20:43:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/783d835100134d28b82664c11b6b9aede3c0f5f9,783d835100134d28b82664c11b6b9aede3c0f5f9,test(contenteditable): add in contenteditable list specs
emorikawa,2015-12-02 02:49:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/21353031be011f7876244ef5eefc3f56f6957aaa,21353031be011f7876244ef5eefc3f56f6957aaa,test(contenteditable): add test harness
emorikawa,2015-11-19 23:29:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3ecca26926010e2f649d5ecf4f40d55a8b95315,c3ecca26926010e2f649d5ecf4f40d55a8b95315,"feat(tests): add integration tests

comment

Adding test harness

Using key strokes in main window test

Tests work now

Clean up argument variables

Rename list manager and get rid of old spec-helper methods

Extract out time overrides from spec-helper

Spectron test for contenteditable

fix spec exit codes and boot mode

fix(spec): cleanup N1.sh and make specs fail with exit code 1

Revert tests and get it working in window

Move to spec_integration and add window load tester

Specs pass. Console logs still in

Remove console logs

Extract N1 Launcher ready method

Make integrated unit test runner

feat(tests): adding integration tests

Summary:
The /spectron folder got moved to /spec_integration

There are now unit tests (the old ones) run via the renamed
`script/grunt run-unit-tests`

There are now integration tests run via the command `script/grunt
run-integration-tests`.

There are two types of integration tests:
1. Tests that operate on the whole app via Selenium/Chromedriver. These
tests have access to Spectron APIs but do NOT have access to any JS object
running inside the application. See the `app-boot-spec.es6` for an example
of these tests. This is tricky because we want to test the Main window,
but Spectron may latch onto any other of our loading windows. Code in
`integration-helper` give us an API that finds and loads the main window
so we can test it

2. Tests that run in the unit test suite that need Spectron to perform
integration-like behavior. These are the contentedtiable specs. The
Spectron server is accessed from the app and can be used to trigger
actions on the running app, from the app. These tests use the
windowed-test runner so Spectron can identify whether the tests have
completed, passed, or failed. Unfortunately Spectron can't access the logs
, nor the exit code of the test script thereby forcing us to parse the
HTML DOM. (Note this is still a WIP)

I also revamped the `N1.sh` file when getting the launch arguments to work
properly. It's much cleaner. We didn't need most of the data.

Test Plan: new tests

Reviewers: juan, bengotow

Differential Revision: https://phab.nylas.com/D2289

Fix composer specs

Tests can properly detect when Spectron is in the environment

Report plain text output in specs

fixing contenteditable specs

Testing slow keymaps on contenteditable specs

Move to DOm mutation

Spell as `subtree` not `subTree`"
bengotow,2015-12-02 19:43:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe95af37f824861eabddcc638ff73c31149afe3f,fe95af37f824861eabddcc638ff73c31149afe3f,"fix(labels): Allow user to label as `spam` or `trash` from the dropdown

Also fixes the sort ordering of standard labels in the category picker. Fixes #555"
bengotow,2015-12-02 19:11:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bd63dc0a704b1b925c772ea9168faaf1a7ab9ca,5bd63dc0a704b1b925c772ea9168faaf1a7ab9ca,fix($n): Expose nylas-exports as $n on the console
bengotow,2015-12-02 02:31:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/ceb9e2cdb1fc574dfd748cfd403502fa4449fd2e,ceb9e2cdb1fc574dfd748cfd403502fa4449fd2e,feat(keybindings): Show all keybindings in prefs
dregitsky,2015-12-02 01:39:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec19890aa2f00005ee00c2cd8e7bdd3290041b46,ec19890aa2f00005ee00c2cd8e7bdd3290041b46,"fix(event-rsvp): fix issue with event RSVPs being repeatedly resent

Event RSVPs would resend every time the app was opened, due to `resolve`
never being called on the `Promise` after successfully sending an event
RSVP."
bengotow,2015-12-02 01:00:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9d45375cede50caae991c563d1815f09e1fc875,b9d45375cede50caae991c563d1815f09e1fc875,"fix(menu): On Win32, display autoupdate / debug toggle in menu

Fixes #375"
dregitsky,2015-12-01 23:59:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/1dc1ab5b28fb61c62b584a550a0fd35614be792a,1dc1ab5b28fb61c62b584a550a0fd35614be792a,fix(examples): small fixes in READMEs
dregitsky,2015-12-01 23:35:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6ddbae4983c2051ad2a036adfb6bcd2afb9dee5,a6ddbae4983c2051ad2a036adfb6bcd2afb9dee5,fix(examples): Small fixes to QuickSchedule plugin
emorikawa,2015-11-26 00:07:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ab58864231fbd29db3bde063983c063a37d74ca,0ab58864231fbd29db3bde063983c063a37d74ca,"refactor(contenteditable): use DOM mutation observers

Summary: This uses DOM mutation observers instead of `onInput`

Test Plan: manual and new integration tests

Reviewers: bengotow, juan

Differential Revision: https://phab.nylas.com/D2291

feat(contenteditable): add bold, underline, etc keymaps

Moving button extensions out of toolbar

Extracted floating toolbar buttons

Convert ContenteditableExtension to new spec

Update packages to use new callback signature

Fix specs"
bengotow,2015-12-01 22:46:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d2f39cd6cb76045e42fd80023b6e340cbcf504a,6d2f39cd6cb76045e42fd80023b6e340cbcf504a,fix(tray): On Win32 / Linux click should open main window if closed
bengotow,2015-12-01 22:08:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/439529c51f8175e505431275e412db360ed7e48a,439529c51f8175e505431275e412db360ed7e48a,"fix(quit): On Win32, Linux, N1 should not quit when the main window is closed

Fixes #475"
bengotow,2015-12-01 03:17:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd9181f62e99667b8a91b1bf3be509d7257696a1,bd9181f62e99667b8a91b1bf3be509d7257696a1,"fix(badge): Badge respects option in prefs

Fixes #516"
grinich,2015-12-01 02:37:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/a413c69f3bf408326183c044892a14dfe238f20c,a413c69f3bf408326183c044892a14dfe238f20c,Update README.md
grinich,2015-12-01 02:36:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/078947d5eed39b391c214b07eae9d552e62ac1aa,078947d5eed39b391c214b07eae9d552e62ac1aa,Update README.md
grinich,2015-12-01 02:35:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/942bb4cf84753f23489891c9fe9100a62eef3a7a,942bb4cf84753f23489891c9fe9100a62eef3a7a,add example images
grinich,2015-12-01 02:33:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/adf391ba95ac67c4011260696933eee684958d9a,adf391ba95ac67c4011260696933eee684958d9a,Update README.md
grinich,2015-12-01 02:33:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/4844ff9d5c88441c9100616c98c4b5a285b2093f,4844ff9d5c88441c9100616c98c4b5a285b2093f,Update README.md
jstejada,2015-12-01 02:19:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/24978b2a4bc25c07687bd898e210d428bc72842c,24978b2a4bc25c07687bd898e210d428bc72842c,"feat(shortcuts): Add listeners for unread/important keyboard shortcuts

Summary:
- Adds KeyCommandRegions to hook up missing listeners for marking as unread and
  important keyboard shortcuts
- Updates specs

Test Plan: - All tests pass

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2300"
jstejada,2015-12-01 01:43:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/e356fd378d51713d3254db6639d35603aeb69a6e,e356fd378d51713d3254db6639d35603aeb69a6e,fix(error): Define mapSourcePosition in nylas-env to prevent undefined error
bengotow,2015-12-01 02:01:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c8f5e6fd6b7e003a2e77121c51793ac41579cb8,5c8f5e6fd6b7e003a2e77121c51793ac41579cb8,bump(changelog): Add a few more notes about 0.3.26
bengotow,2015-12-01 01:11:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/d48fa5065401ae63d6a2a32e38d3c576bba164d1,d48fa5065401ae63d6a2a32e38d3c576bba164d1,"feat(rsvp): ""Quick RSVP"" to events recongized by the API"
emorikawa,2015-12-01 00:11:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/09728d8cbcc7432c3d0ac107dfd1e769a6a9fe22,09728d8cbcc7432c3d0ac107dfd1e769a6a9fe22,"feat(contenteditable): add bold, underline, etc keymaps"
jstejada,2015-11-27 19:49:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/9f309d399b7fe01230b53d3dec994b372bf2fd54,9f309d399b7fe01230b53d3dec994b372bf2fd54,"update(extensions): Rename DraftStoreExtension and MessageStoreExtension

Summary:
- Rename DraftStoreExtension to ComposerExtension
- Rename MessageStoreExtension to MessageViewExtension
- Rename ContenteditablePlugin to ContenteditableExtension
  - Update Contenteditable to use new naming convention
  - Adds support for extension handlers as props
- Add ExtensionRegistry to register extensions:
  - ContenteditableExtensions will not be registered through the
    ExtensionRegistry. They are meant for internal use, or if anyone wants
    to use our Contenteditable component directly in their plugins.
  - Adds specs
- Refactors internal_packages and src to use new names and new ExtensionRegistry api
- Adds deprecation util function and deprecation notices for old api methods:
  - DraftStore.{registerExtension, unregisterExtension}
  - MessageStore.{registerExtension, unregisterExtension}
  - DraftStoreExtension.{onMouseUp, onTabDown}
  - MessageStoreExtension
- Adds and updates docs

Test Plan: - Unit tests

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2293"
bengotow,2015-11-30 23:04:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/beda078c56c8d6d487419e8b9a78796ed34cd319,beda078c56c8d6d487419e8b9a78796ed34cd319,"fix(build): Temporarily disable tests on linux CI. See details

The linux CI server @ Nylas is running debian wheezy, which is too old to run N1 / Electron 0.35+. We need to switch to making the builds with Travis or https://packagecloud.io/."
bengotow,2015-11-30 22:26:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1c925883db781adf87c9fb076a72d383ded4d00,b1c925883db781adf87c9fb076a72d383ded4d00,"fix(signatures): Monospace font, nested scrolling fix"
bengotow,2015-11-30 22:11:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a9ca20df620d5249e04d6d868a0d4deb8f9383b,6a9ca20df620d5249e04d6d868a0d4deb8f9383b,bump(version): 0.3.26 and updated Changelog
emorikawa,2015-11-30 22:01:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2beaee0069b6afcc22265019f0911461ed8f39b,c2beaee0069b6afcc22265019f0911461ed8f39b,feat(signatures): add raw signature support
bengotow,2015-11-30 21:39:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/be491d6cae1581061e14ae3d34337addb5fba70e,be491d6cae1581061e14ae3d34337addb5fba70e,"fix(signatures): Display signatures tab, blur after prefs changes"
bengotow,2015-11-30 20:39:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/734e670e817e00eaab9e17e8c8210e6134ee177b,734e670e817e00eaab9e17e8c8210e6134ee177b,"fix(specs): Remove promise usage, process.env as fn to fix node 0.10"
bengotow,2015-11-30 19:57:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/f66f503a75a7527a9f32cc33b3294562c9771f07,f66f503a75a7527a9f32cc33b3294562c9771f07,"Merge pull request #496 from mbilker/fedora-icons

fix(rpm): copy N1 icons into hicolor folder"
emorikawa,2015-11-30 19:48:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/83b0a4db5f1b0fa62b99afb45f340738ec412e2e,83b0a4db5f1b0fa62b99afb45f340738ec412e2e,"feat(signatures): add signature support

Summary:
Add signatures back in.

Extract contenteditable css to its own file instead of being bundled with
the composer.

Test Plan: manual

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2295"
bengotow,2015-11-30 19:43:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a4613b4a1326bd7e7285927a875f2369bb1f687,6a4613b4a1326bd7e7285927a875f2369bb1f687,"feat(prefs): Allow tabs with an accounts submenu

Summary:
This diff:
- Improves the styling of the tabs in the preferences sidebar.
- Adds an optional param to section cofnig that puts an ""account"" submenu beneath the tab item.
- Renames preferences ""sections"" => ""tabs"", and renames the PreferencesSectionStore to PreferencesUIStore. I think we should include ""UI"" in more of our stores, and I think ""tabs"" is a good idea because it's unambigious—there's no way you could confuse it for a ""section"" of the NylasEnv.config tree or think it deals with actually saving prefs.

Test Plan: Inspect visually

Reviewers: evan, juan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2296"
emorikawa,2015-11-30 05:29:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c58c48b6ff556a309fecdda3c944add2af4b2e83,c58c48b6ff556a309fecdda3c944add2af4b2e83,Update travis.yml for only branches
jstejada,2015-11-28 17:04:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/84adfb3bdf0abc1314172260621c31f0440e8efd,84adfb3bdf0abc1314172260621c31f0440e8efd,"fix(prefs): Focus main window when open prefs and prevent dupe sheets

- Fixes #498
- Fixes #484"
jstejada,2015-11-28 17:04:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/242b54eea63e10d9bbef3d9ef6da4919ca59f609,242b54eea63e10d9bbef3d9ef6da4919ca59f609,"Merge pull request #497 from enrique-ramirez/fix-dock-icon-open

Removing deprecated 'activate-with-no-open-windows' event"
enrique-ramirez,2015-11-27 23:05:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/878435078736b18d832ef42a50a3654c24c2b762,878435078736b18d832ef42a50a3654c24c2b762,"Removing deprecated 'activate-with-no-open-windows' event

As mentioned on this Electron's issue: https://github.com/atom/electron/pull/2777

The 'activate-with-open-windows' event has been deprecated in favor of a global 'activate' event with a 'hasVisibleWindows' parameter.

This fixes Nylas from crashing when closing the main window and opening via clicking the Dock icon."
mbilker,2015-11-27 21:15:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/c200306eebfa50b1c1a3fa24e9ecfce7b52812e9,c200306eebfa50b1c1a3fa24e9ecfce7b52812e9,"fix(redhat-spec): copy 512x512 icon to /usr/local/share/nylas/resources/app/nylas.png

The icon build/resources/nylas.png is exactly the same as build/resources/linux/icons/512.png
Not confident that the spec script is run from base N1 directory to use the nylas.png in the spec file"
mbilker,2015-11-27 20:18:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/e532fa91f8ed03f5dca410fb62e308f4dae8a08a,e532fa91f8ed03f5dca410fb62e308f4dae8a08a,fix(grunt): update location of rpm icon name
mbilker,2015-11-27 19:41:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba5a8ed4328f4361c68f7835ebf50f6888de863f,ba5a8ed4328f4361c68f7835ebf50f6888de863f,fix(fedora-spec): copy nylas icons into hicolor folder
emorikawa,2015-11-26 21:03:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/a69dad52a37da3aa5871dc54d8f9ac4a5d37f040,a69dad52a37da3aa5871dc54d8f9ac4a5d37f040,fix(task): spec task uses Promise
bengotow,2015-11-26 02:29:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8878e5ce835d28fadece9d4e0384fb30e60d3ba,e8878e5ce835d28fadece9d4e0384fb30e60d3ba,"fix(autolinker): Add title attr to all links in emails to display href

Fixes GitHub Issues #479 and #335"
bengotow,2015-11-26 00:30:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0e6a288f1824ff24288b989a36c120bf729ddbc,e0e6a288f1824ff24288b989a36c120bf729ddbc,"fix(sidebar): `selected` is not actually a required prop

Fixes #476"
bengotow,2015-11-26 00:28:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/006f25ef99deb239a07213c82e5e1973b6955ed7,006f25ef99deb239a07213c82e5e1973b6955ed7,fix(deprecation): app.terminate deprecated in favor of `quit`
bengotow,2015-11-25 23:06:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1746416fab5558387e4151bea8a471e916d37a6,c1746416fab5558387e4151bea8a471e916d37a6,"rm(spectron): Don't run during CI builds, it's timeout-based and fails randomly"
bengotow,2015-11-25 22:41:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/7605e984c48e4f00fcc09c2543286b72ca489b65,7605e984c48e4f00fcc09c2543286b72ca489b65,fix(license): Mark a few additional packages as GPLv3
bengotow,2015-11-25 22:38:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ff54300404d2b2d2a110bf0eb5eff30ae03b469,9ff54300404d2b2d2a110bf0eb5eff30ae03b469,"Merge pull request #396 from luixal/patch-2

Allows package to be installed in ElementaryOS"
bengotow,2015-11-25 22:37:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2c09d005b8584003f13879fdd6f737bc3d5ad65,b2c09d005b8584003f13879fdd6f737bc3d5ad65,"Merge pull request #453 from dcposch/fix-license

Internal package.json license: GPLv3"
bengotow,2015-11-25 22:13:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/3fabc31e4de0c7f1ac611c0dd1468173117ce285,3fabc31e4de0c7f1ac611c0dd1468173117ce285,"fix(composer): Don't pass a callback to `dialog` API, update changelog"
bengotow,2015-11-25 20:38:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6c3a53e2c185e1a9cb8592d8c04aecbda1801a1,c6c3a53e2c185e1a9cb8592d8c04aecbda1801a1,fix(work): Treat work window as if it's always visible
bengotow,2015-11-25 20:17:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/121fb2482d570ce84982a4c682f7f4058bd7ee9e,121fb2482d570ce84982a4c682f7f4058bd7ee9e,"fix(counts): Ensure serial execution of persistModels, unpersistModels

Summary:
reduce scope of changes

more changes

Test Plan: Run 1 new test

Reviewers: juan

Reviewed By: juan

Differential Revision: https://phab.nylas.com/D2290"
bengotow,2015-11-25 01:22:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f2ffcb8e0fb3920d5f15e8fa1da3e2c59b98ec2,3f2ffcb8e0fb3920d5f15e8fa1da3e2c59b98ec2,futureproof(packages): Give all example packages engine version range
bengotow,2015-11-25 01:04:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1c06cd79490683e3b75f52ad5edc046da9d2b11,c1c06cd79490683e3b75f52ad5edc046da9d2b11,bump(version): 0.3.25
dregitsky,2015-11-25 01:29:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf36e4df1fbfcd7cb4d47026ee4931ef467c2b89,bf36e4df1fbfcd7cb4d47026ee4931ef467c2b89,fix(examples): small fixes in translate and personal-level plugins
dregitsky,2015-11-25 00:54:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/731c6b75319a8626ae3ab383601b9882287bd874,731c6b75319a8626ae3ab383601b9882287bd874,fix typo
dregitsky,2015-11-25 00:49:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/442e77978459093d098ea27512ec8db03cc9b8b4,442e77978459093d098ea27512ec8db03cc9b8b4,fix(examples): change download instructions in QuickSchedule plugin readme
bengotow,2015-11-25 00:16:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd2dfef7ceb56f2de97f3ade43adfcdfb97fdf6f,bd2dfef7ceb56f2de97f3ade43adfcdfb97fdf6f,"fix(attachments): Only preview images up to 5MB, not 10MB"
dregitsky,2015-11-25 00:15:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/f5316e1146af65bf7cb871d607e5e1956afecba3,f5316e1146af65bf7cb871d607e5e1956afecba3,fix(examples): remove buggy main.css from quick-schedule plugin
dregitsky,2015-11-24 23:34:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/91a5a9acc873d8f31e28bc79c96fab1bdef32169,91a5a9acc873d8f31e28bc79c96fab1bdef32169,fix(examples): remove autogenerated source from quickschedule plugin
bengotow,2015-11-24 23:23:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/0d5865cf495cfa8a29a1050e85125d195d8b4271,0d5865cf495cfa8a29a1050e85125d195d8b4271,"fix(paste): avoid code duplication, just give menu items roles

Manual implementation of clipboard behaviors was not necessary and meant that pasting images via right-click didn't go through the same code path as Cmd-V.

May fix #228, depending on the exact issue."
bengotow,2015-11-24 22:41:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f38da5effb612906979026b228a957b23518318,6f38da5effb612906979026b228a957b23518318,"fix(counts): Expand tests, fix edge cases in count tracking"
bengotow,2015-11-24 22:36:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/183924bfe5413e182975e44891dda4ad043cff60,183924bfe5413e182975e44891dda4ad043cff60,perf(db): Flip order of columns in join table indexes for much faster querying
mbilker,2015-11-17 03:56:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f543907f78dbc39abd8c1385921d5e27af6105f,2f543907f78dbc39abd8c1385921d5e27af6105f,fix(FileDownloadStore): delete download from @_downloads after @trigger
jstejada,2015-11-24 20:48:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/2bd83f38ff65494f5a7b2acc2152b419d492102f,2bd83f38ff65494f5a7b2acc2152b419d492102f,"Merge pull request #449 from mbilker/travis-linux-testing

Travis Linux Testing"
jstejada,2015-11-24 20:44:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/56b62f8b5871acba889575791f7290ffa22450a2,56b62f8b5871acba889575791f7290ffa22450a2,fix(lint): Fix linter issues on account-sidebar-section.cjsx
jstejada,2015-11-24 20:35:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/58ded66962435878debbebb4c326a5de363ce2c9,58ded66962435878debbebb4c326a5de363ce2c9,"fix(styles): Remove custom pre tag styling for email

Fixes #424"
jstejada,2015-11-24 20:11:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/d759f6039b68f9cb2f1b8fbabe62635b579505fc,d759f6039b68f9cb2f1b8fbabe62635b579505fc,"fix(boot): Copy env from main process into renderer process on linux

See: https://github.com/atom/electron/issues/3306
This was casuing NYLAS_HOME to be unavailable on the renderer process"
dregitsky,2015-11-24 19:23:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/809f4d827e2de38983cbe84984135b80686a67b4,809f4d827e2de38983cbe84984135b80686a67b4,fix(examples): change nylas version in QuickSchedule plugin example
jstejada,2015-11-24 19:06:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/468ef439b4f18c6570a989eb999bb5a708200d29,468ef439b4f18c6570a989eb999bb5a708200d29,"fix(sidebar): Add minor tweaks to sidebar behavior:

- Add default prop to DisclosureTriangle to eliminate warning
- Prevent from firing a new DestroyCategoryTask if category already is
deleted
- Update onBlur event to not close input if I click on the add button"
grinich,2015-11-24 18:34:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/03f9af79dfadb1769ea6b5ddc25dd65145e64654,03f9af79dfadb1769ea6b5ddc25dd65145e64654,Update README.md
grinich,2015-11-24 18:31:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ed2b517a84f121c22d94145d0a255ef032a467c,9ed2b517a84f121c22d94145d0a255ef032a467c,add screenshot
grinich,2015-11-24 18:28:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/c538b4485d21730b1047cecec5d5dedf8a8c4ef5,c538b4485d21730b1047cecec5d5dedf8a8c4ef5,Update README.md
dcposch,2015-11-24 17:07:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/2bd710d668c6457c264869649cc35cd6af53269f,2bd710d668c6457c264869649cc35cd6af53269f,"Internal package.json license: GPLv3

Changed from 'Propietary' to 'GPLv3' to match LICENSE.md"
dregitsky,2015-11-24 08:30:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb22e6eeb25a44d41907563b5ab053cd15189132,fb22e6eeb25a44d41907563b5ab053cd15189132,fix(examples): change quickschedule plugin backend URL to updated version
dregitsky,2015-11-24 08:09:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/f248fe9c60b3a602328f2e743894d55d91b356fd,f248fe9c60b3a602328f2e743894d55d91b356fd,refactor(examples): Rename Send-Availability to QuickSchedule
dregitsky,2015-11-24 00:41:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/32d1d2003384bb655ae4a69a1b3a9ebb3762e28b,32d1d2003384bb655ae4a69a1b3a9ebb3762e28b,fix(examples): better styles in Send-Availability example plugin
bengotow,2015-11-24 06:27:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/4dcc2d479e5166970d7102e20437ba966de40559,4dcc2d479e5166970d7102e20437ba966de40559,bump(version): 0.3.24
bengotow,2015-11-24 06:09:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/e0976fde2c7c59570641f98bd6ec93ea91c135b9,e0976fde2c7c59570641f98bd6ec93ea91c135b9,"bump(electron): 0.34.3 => 0.35.1

Electron 0.35.1 includes the tray fixes we contributed last week but also includes API restructuring and improvements. Most importantly, modules from electron are now imported via `require('electron')`"
mbilker,2015-11-24 05:16:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/2967e2e4958e41a23ff6ee08c967d8dbd2475008,2967e2e4958e41a23ff6ee08c967d8dbd2475008,fix(spectron): prevent execution for windows only
mbilker,2015-11-24 04:34:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/41537415665edf277b55444ac7f0427067a395bb,41537415665edf277b55444ac7f0427067a395bb,fix(spectron): typo with darwin
bengotow,2015-11-24 04:34:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/fabc047a79c90a655491d06302de8def9d03bd25,fabc047a79c90a655491d06302de8def9d03bd25,"fix(prefs): Minor tweaks, see description

- Make the keymaps panel less wide
- <select>'s now populate their current value properly
- Items should blur after being interacted with so that `esc` still moves you back to parent sheet"
mbilker,2015-11-24 03:53:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f39668fd04f952c1c3ced38428012b3f95a8fdf,2f39668fd04f952c1c3ced38428012b3f95a8fdf,fix(spectron): reenable for Linux and choose executablePath based on platform
mbilker,2015-11-22 06:20:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/c21e9d61ed408e87663461309336da123504a2d3,c21e9d61ed408e87663461309336da123504a2d3,fix(travis): specify NYLAS_HOME for nylas/N1#445
mbilker,2015-11-22 06:13:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/edf5275a22382f8b4366ef95d54b8592e0965ed3,edf5275a22382f8b4366ef95d54b8592e0965ed3,fix(spec): use correct modifier key based on process.platform
mbilker,2015-11-22 04:09:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/09c800a6929aa5c83dea2745845d8dc224ab370d,09c800a6929aa5c83dea2745845d8dc224ab370d,fix(travis): syntax error
mbilker,2015-11-22 04:04:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f44ae2d3f97319c4754094306d9a1aeaaebe108,7f44ae2d3f97319c4754094306d9a1aeaaebe108,"fix(travis): only run Xvfb on Linux

Noticed in my Travis build that the build failed on OS X
because its missing the Xvfb startup files present on Ubuntu"
mbilker,2015-11-22 03:45:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/40d67b56326555e93e52687290e560b15f30bf7a,40d67b56326555e93e52687290e560b15f30bf7a,fix(travis): enable fake Xorg window to allow electron testing on Linux
bengotow,2015-11-24 04:26:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad04faab02bd093e873b301941f11ce024f75697,ad04faab02bd093e873b301941f11ce024f75697,fix(account-sidebar): Fix specs to match new unread counts
bengotow,2015-11-24 04:20:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b75265cdd4fec11f4557fe014257306169543a4,4b75265cdd4fec11f4557fe014257306169543a4,"fix(dark-mode): Adjust email CSS immediately upon switching themes

Fixes #145"
bengotow,2015-11-24 04:08:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/3fdfbefcb3044e402cf87f8ff0a3285a192db372,3fdfbefcb3044e402cf87f8ff0a3285a192db372,"fix(sidebar): Swap out `+` image, tweak CSS for unread"
jstejada,2015-11-24 03:41:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9aaab9f38d0796dda4acaac5d28ec2ab5aa4f9f,a9aaab9f38d0796dda4acaac5d28ec2ab5aa4f9f,"feat(sidebar): Add sidebar controls to add and remove categories

Summary:
- Refactors account-sidebar internal package:
  - Separates into smaller react components
  - Makes DisclosureTriangle its own independent component
  - Adds data to AccountSidebarStore to allow removal or addition of items for a
    specific section of the sidebar
- Adds button and input and css styles to create categories
- Adds context menu to destroy a category
- Adds new method to CategoryStore to get the icon name for the categories of
  the current account
- Removes some unused code

Test Plan: Manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2283"
bengotow,2015-11-24 02:54:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c2cf4044e64417122cfcb999e6a6720b9f6ca8d,0c2cf4044e64417122cfcb999e6a6720b9f6ca8d,fix(spectron): Run against built version of the app to avoid timeouts
bengotow,2015-11-24 02:28:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/522ad2da7974ea2136e58842bd1482b91a13fd08,522ad2da7974ea2136e58842bd1482b91a13fd08,fix(theme): Improve styling of popout composer in dark mode
bengotow,2015-11-24 01:34:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b6a61f4552f61f2f2a53750a38e01c2c76bc6d4,6b6a61f4552f61f2f2a53750a38e01c2c76bc6d4,"fix(copy): Call split / list modes ""Single Panel / Two Panel""

Fixes T5907"
mbilker,2015-11-24 01:16:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/87bc41f600fc2351c6615613affb4cf982b14f86,87bc41f600fc2351c6615613affb4cf982b14f86,"fix(travis): Add support for Node 4.2 LTS, C++11

commit 95ab064d24fdaf38a846987b88494a62f9acd87a
Author: mbilker <me@mbilker.us>
Date:   Sat Nov 21 23:31:32 2015 -0500

    fix(travis): use GCC 4.8 on 0.10 and 0.12 due to newer NAN library in dependent packages

commit 92cb159fd99c05729f6c7867c848be7383847a92
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 12 20:42:30 2015 -0500

    fix(travis): switch from node 4.1 to 4.2 and add node 5

commit 973aacfdb7df72f6e3da549087492d8cb4388282
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 23:44:42 2015 -0500

    fix(travis): display gcc version that corresponds to the CC variable

commit 6b4f907719b03924308ee33ad869d498277f15ae
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 23:34:11 2015 -0500

    fix(travis): reenable osx node 0.12 build

commit c3cb97f2db9113140e374aefb8fc71a8d150593d
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 23:33:40 2015 -0500

    add(travis): display gcc version

commit 71f3eb619d2bc7c6bc26bce11792622902ab982e
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 23:28:45 2015 -0500

    fix(travis): set compiler in env declaration

commit 0b694230211bedd8a603810cb7959652e33f3bf1
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 23:25:46 2015 -0500

    fix(travis): print currently used compiler in CC and CXX

commit 9ca898b543b7a97bf77c11837085eb43f18872d1
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 23:22:07 2015 -0500

    fix(travis): install c++11 supported compilers

commit e728ee7de9015e0ac945cadc744e2bca61c0731b
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 23:07:35 2015 -0500

    fix(travis): print clang version, disable frequently failing build configs

commit 8d6cf314b0d23a2e6bee1d6e543ef81dad5f4ffd
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 22:30:48 2015 -0500

    fix(travis): delete npm prefix for node 4.1

commit b7cf33eac8ca07a7013c9248b3e90990b01cec39
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 22:26:20 2015 -0500

    fix(travis): nvm complains on os x about npm prefix

commit 670168e4103cdd2d6eaddd32796dc581d0107a7c
Author: mbilker <me@mbilker.us>
Date:   Thu Nov 5 22:19:25 2015 -0500

    add(travis): test node 4.1 under linux and os x"
bengotow,2015-11-24 01:12:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2f8b34a32d87f59c13a77d3a3d74cf5ca4c715b,b2f8b34a32d87f59c13a77d3a3d74cf5ca4c715b,"feat(counts): Unread counts for all folders and labels across all accounts

Summary:
This diff replaces the UnreadCountStore with a better approach that is able to track unread counts for all folders/labels without continuous (and cripplingly slow) SELECT COUNT(*) queries.

When models are written to the database, we currently don't send out notifications with the ""previous"" state of those objects in the database. This makes it hard to determine how to update counters. (In the future, we may need to do this for live queries). Unfortunately, getting the ""previous"" state is going to be very hard, because multiple windows write to the database and the ""previous"" state we have might be outdated. We'd almost have to run a ""SELECT"" right before every ""REPLACE INTO"".

I created an API that allows you to register observers around persistModel and unpersistModel. With this API, you can run queries before and after the database changes are made and pluck just the ""before"" state you're interested in.

The `ThreadCountsStore` uses this API to determine the impact of persisting a set of threads on the unread counts of different labels. Before the threads are saved, it says ""how much do these thread IDs contribute to unread counts currently?"". After the write is complete it looks at the models and computes the difference between the old count impact and the new count impact, and updates the counters.

I decided not to attach the unread count to the Label objects themselves because 1) they update frequently and 2) most things observing the DatabaseStore for categories do not care about counts, so they would be updating unnecessarily.

The AccountSidebar now listens to the ThreadCountsStore as well as the CategoryStore, and there's a new preference in the General tab for turning off the counts.

Test Plan: Tests are a work in progress, want to get feedback first!

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2232"
bengotow,2015-11-23 22:13:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/8952e7d149210396fb883c795a241f960ed96f3a,8952e7d149210396fb883c795a241f960ed96f3a,"Merge pull request #443 from mbilker/fix-message-body-processor

Do not return when original body is null"
emorikawa,2015-11-23 20:59:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9d6e89879ab88faaa9ae4eb08f10a4a690a0bdd,b9d6e89879ab88faaa9ae4eb08f10a4a690a0bdd,fix(spec): cleanup N1.sh and make specs fail with exit code 1
bengotow,2015-11-23 20:20:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/599d8f834f5de05fe4ab545975f855f06b6fb723,599d8f834f5de05fe4ab545975f855f06b6fb723,"fix(prefs): Move to a sheet rather than a window, use configSchema

Summary:
This diff moves the preferences interface to a sheet in the main window, with the following benefits:
- We can put any sort of React control in it (no ReactRemote)
- It's not strange for the interface to scroll
- Since it can scroll, it's safe to auto-generate preferences for plugins based on their package config schema.

The general tab is now mostly based on the config schema, with the exception of the ""Workspace"" and ""Layout"" bits.

The other tabs are still manual, and should be polished more.

Test Plan: No new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2278"
emorikawa,2015-11-23 19:07:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/05b50fd7bff385b61d97c5242392a9eae2274b86,05b50fd7bff385b61d97c5242392a9eae2274b86,"fix(build): bail if script/bootstrap fails and enhance test output

Have the test output"
mbilker,2015-11-23 19:22:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc77da8b0842c1389f16623e6722f99e9d53a670,cc77da8b0842c1389f16623e6722f99e9d53a670,fix(store): return early if body is not a string
jstejada,2015-11-23 17:53:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/ea97d9422624923f599c73dcc9e26a4212ba277e,ea97d9422624923f599c73dcc9e26a4212ba277e,fix(tray): Prevent duplicate trays on preference changes
jstejada,2015-11-22 03:05:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3a9f31051dceb566920d558aa249bfb792dce17,b3a9f31051dceb566920d558aa249bfb792dce17,"fix(tray): Prevent system tray from being initialized more than once

- Makes sure the tray is deactivated before activating"
bengotow,2015-11-23 05:37:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d76a944e214666ed021ed2029d5611136391984,3d76a944e214666ed021ed2029d5611136391984,"Merge pull request #441 from mbilker/remove-vm-compatibility-layer

cleanup(build): Remove vm-compatibility-layer"
mbilker,2015-11-22 03:08:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/38d066e163d1e2c4ed038ff24b93775d0c49a0e5,38d066e163d1e2c4ed038ff24b93775d0c49a0e5,fix(store): do not return when original body is null
mbilker,2015-11-21 04:56:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/5644f84e4aff015bf58a5f0287a5d86f3cbfe75d,5644f84e4aff015bf58a5f0287a5d86f3cbfe75d,"fix(packages): remove vm-compatibility-layer

vm-compatibility-layer was designed to support obsolete APIs in node
v0.11.x of node v0.10.x. It is only used in the build Gruntfile and
nowhere else in the project."
bengotow,2015-11-21 02:53:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1b3ad8767c133570dc5e26c4ab7fd5ea1435596,a1b3ad8767c133570dc5e26c4ab7fd5ea1435596,feat(dark-mode): Double invert filter for nice dark HTML bodies
bengotow,2015-11-21 02:03:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/39a142ddcb80c7e1fce22dfe1e0e628272154523,39a142ddcb80c7e1fce22dfe1e0e628272154523,"fix(message-bodies): Ensure each message body is processed

Relevant for #436"
dregitsky,2015-11-20 23:21:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/690dca50cbc31182dbc2b152011d901806da06f1,690dca50cbc31182dbc2b152011d901806da06f1,fix(examples): Small fixes for Send Availability plugin
dregitsky,2015-11-20 02:16:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/abb6378bd537b521bc2036522fb530b605e59170,abb6378bd537b521bc2036522fb530b605e59170,"fix(examples): revamp/fix Send-Availability, change URL to live Heroku link

Summary:
Several fixes and updates the the Send Availability example package. Switches from
using `electron-safe-ipc` to using `protocol.RegisterStringProtocol` to communicate
with the child window. Changes the URLs in the package from localhost to our live
demo backend.

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2271"
bengotow,2015-11-20 00:17:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/aaf6132134c058d485d948dcd7b4eeda82a0b0bd,aaf6132134c058d485d948dcd7b4eeda82a0b0bd,"fix(events): Avoid webkitMovement deprecations, fixes #428"
jstejada,2015-11-19 00:25:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/39a52f4535a5539d54968d974e67b28ee2fe8392,39a52f4535a5539d54968d974e67b28ee2fe8392,"feat(sidebar): Add behavior to persist collapsed state of sidebar items

Summary:  - Updates account sidebar to persist collapsed state to the the config

Test Plan:  - manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2276"
jstejada,2015-11-19 22:42:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/32e77e3dec0ee980a00cb822f6208b943eab224c,32e77e3dec0ee980a00cb822f6208b943eab224c,fix(spectron): Update window count spec
jstejada,2015-11-19 02:00:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/84739b3acc65b955504593f9113aed94181a4e13,84739b3acc65b955504593f9113aed94181a4e13,"fix(spectron): Update spectron setup:

- Passes new arguments to spectron.Application
- Updates setup of test suite to wait for application to boot before
specs are run"
emorikawa,2015-11-19 18:38:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ffd940d212ca33c77778d97ac1eb19b10a5febc,9ffd940d212ca33c77778d97ac1eb19b10a5febc,fix(contenteditable): allow valid null events to callbacks
emorikawa,2015-11-19 01:40:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/2699888e4757fd98549eadf062a2a7f26378cfea,2699888e4757fd98549eadf062a2a7f26378cfea,fix(main): globa.resourcePath now resourcePath
jstejada,2015-11-13 17:50:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/53bd5ab2d0be5d27fa5091c3189293bcdd4aedc5,53bd5ab2d0be5d27fa5091c3189293bcdd4aedc5,"ci(spectron): Add support to execute spectron/chrome-driver tests

Summary:
- Sets up spectron test suite inside its own directory and with its own
  dependencies (must run on a build of the app)
- Sets up dummy test
- Adds `run-spectron-specs` grunt task, and adds it to cibuild task
- Cleans up spec tasks code

Test Plan: - Run specs

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2256"
jstejada,2015-11-18 23:51:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/5be36f8572c25094dafafbd994c06cfb79fd0714,5be36f8572c25094dafafbd994c06cfb79fd0714,fix(specs): Update composer-view-spec to use renamed functions
jstejada,2015-11-18 23:29:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbd2d671126134243f43060014ab35a073c2a755,bbd2d671126134243f43060014ab35a073c2a755,fix(contenteditable): Fix undefined callback on plugins
jstejada,2015-11-18 20:09:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/c2ce51ae0c63c4f7c49f4291594392dbe6d7f9e6,c2ce51ae0c63c4f7c49f4291594392dbe6d7f9e6,"fix(composer): Fix several composer issues and refactor Contenteditable

Summary:
  - Fixes T5819 issues
  - Adds ContenteditbalePlugin mechanism to allow extension of Contenteditable
    functionality, and completely removes lifecycleCallbacks from Contenteditable
  - Refactors list functionality outside of Contenteditable and into a plugin
  - Updates ComposerView to apply DraftStoreExtensions through a ContentEditablePlugin
  - Moves spell checking logic outside of Contenteditable into the spellcheck package

Fixes T5824 (atom.assert)
Fixes T5951 (shift-tabbing) bullets

Test Plan: - Unit tests and manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Maniphest Tasks: T5951, T5824, T5819

Differential Revision: https://phab.nylas.com/D2261"
jstejada,2015-11-18 21:22:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/447dc7283e3e022f9f161815c0c4d0aeeded1e2e,447dc7283e3e022f9f161815c0c4d0aeeded1e2e,fix(compile-cache): Add .jsx extension to babel compiler module
jstejada,2015-11-18 20:35:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0c435e2ab308cdaacf7bf94cee1aede14007790,f0c435e2ab308cdaacf7bf94cee1aede14007790,fix(compile-cache): Add .jsx extension to be transbiled using babel
bengotow,2015-11-18 20:28:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3845e675ea54abda11c138b6a75abe89d1839fa,b3845e675ea54abda11c138b6a75abe89d1839fa,"fix(search): Execute search for subject, autoselect first item

Fixes T5899, but we may want to iterate on it more later."
emorikawa,2015-11-18 20:32:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/43c4859592e14b665b1fd05c8df049a03476eb60,43c4859592e14b665b1fd05c8df049a03476eb60,"fix(draft): fix showing of incorrect body when pending send

Summary: Fixes T3712

Test Plan: new tests

Reviewers: juan, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3712

Differential Revision: https://phab.nylas.com/D2273"
bengotow,2015-11-18 03:43:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5256bd56a02ee82623079e7d92c8b8e8170002f,a5256bd56a02ee82623079e7d92c8b8e8170002f,"🍒(atom): Pull new, cleaner compile cache + index.js"
jstejada,2015-11-18 02:09:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/52e2c1251e2af43ab4bdacf7e4128a2100453411,52e2c1251e2af43ab4bdacf7e4128a2100453411,refactor(script/docs): Add comments
jstejada,2015-11-18 02:03:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/35991c5786941babeed0c76bfc3b55185f721e48,35991c5786941babeed0c76bfc3b55185f721e48,Add docs script to automatically move output of grunt docs to gh-pages
bengotow,2015-11-18 01:48:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/285a60493e730a5ad64d371ee18bf8e0e249e447,285a60493e730a5ad64d371ee18bf8e0e249e447,fix(specs): Ternary operator in jasmine-helper was valid coffee...
bengotow,2015-11-18 01:39:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5013c0bbde154a4b1dcd91c9f7e266acd2ba2f6,a5013c0bbde154a4b1dcd91c9f7e266acd2ba2f6,fix(specs): Update specs following 0.29.2 > 0.34.3 move
emorikawa,2015-11-11 18:25:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/51602f69a54ee11b72e624ba7e63503f329a75d1,51602f69a54ee11b72e624ba7e63503f329a75d1,"refactor(env): new NylasEnv global

Converted all references of global atom to NylasEnv

Temporary rename atom.io

find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.io/temporaryAtomIoReplacement/g'

atom.config to NylasEnv.config

find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.config/NylasEnv.config/g'

atom.packages -> NylasEnv.packages

atom.commands -> NylasEnv.commands atom.getLoadSettings

find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.commands/NylasEnv.commands/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.getLoadSettings/NylasEnv.getLoadSettings/g'

More common atom methods

find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.styles/NylasEnv.styles/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.emitError/NylasEnv.emitError/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.inSpecMode/NylasEnv.inSpecMode/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.inDevMode/NylasEnv.inDevMode/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.getWindowType/NylasEnv.getWindowType/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.displayWindow/NylasEnv.displayWindow/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.quit/NylasEnv.quit/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.close/NylasEnv.close/g'

More atom method changes

find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.keymaps/NylasEnv.keymaps/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.hide/NylasEnv.hide/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.getCurrentWindow/NylasEnv.getCurrentWindow/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.menu/NylasEnv.menu/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.getConfigDirPath/NylasEnv.getConfigDirPath/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.isMainWindow/NylasEnv.isMainWindow/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.finishUnload/NylasEnv.finishUnload/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.isWorkWindow/NylasEnv.isWorkWindow/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.showSaveDialog/NylasEnv.showSaveDialog/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.append/NylasEnv.append/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.confirm/NylasEnv.confirm/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.clipboard/NylasEnv.clipboard/g'
find -E . -regex "".*\.(coffee|cjsx|js|md|cmd|es6)"" -print0 | xargs -0 sed
-i """" 's/atom.getVersion/NylasEnv.getVersion/g'

More atom renaming

Rename atom methods

More atom methods

Fix grunt config variable

Change atom.cmd to N1.cmd

Rename atom.coffee and atom.js to nylas-env.coffee nylas-env.js

Fix atom global reference in specs manually

Fix atom requires

Change engine from atom to nylas

got rid of global/nylas-env

rename to nylas-win-bootup

Fix onWindowPropsChanged to onWindowPropsReceived

fix nylas-workspace

atom-text-editor to nylas-theme-wrap

atom-text-editor -> nylas-theme-wrap

Replacing atom keyword

AtomWindow -> NylasWindow

Replace Atom -> N1

Rename atom items

nylas.asar -> atom.asar

Remove more atom references

Remove 6to5 references

Remove license exception for atom"
emorikawa,2015-11-18 00:25:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/5de64331b9459deab63b577244f0e7e4ec607a7b,5de64331b9459deab63b577244f0e7e4ec607a7b,fix(package): revert to upgraded package.json
emorikawa,2015-11-17 23:47:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/46ee3d8cc89b3c27d490aee7b62c877fd76258d8,46ee3d8cc89b3c27d490aee7b62c877fd76258d8,fix(docs): fix docs so they compile properly.
bengotow,2015-11-17 23:36:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a16484d7dd530b0b618cd079ac54d68b1428554,3a16484d7dd530b0b618cd079ac54d68b1428554,fix(tray): Retina tray icon with template image for dark menu bar mode
bengotow,2015-11-17 23:36:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/74252d58d9b1f783b89635a39fe7457ef3bdc081,74252d58d9b1f783b89635a39fe7457ef3bdc081,"bump(⚡️): Electron 0.29.2 > 0.34.3, Sqlite 3.0.11 > 3.1.1"
bengotow,2015-11-17 18:37:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/72b8bc1853a91875cac01cff06b1cf1e452dfe69,72b8bc1853a91875cac01cff06b1cf1e452dfe69,"changelog(0.3.23): Features, fixes in 0.3.23"
bengotow,2015-11-17 00:42:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/94e0cb97d3816f23fc37c6c34782578ac3916cdf,94e0cb97d3816f23fc37c6c34782578ac3916cdf,fix(bootstrap): Set apm environment vars to avoid Atom conflicts
bengotow,2015-11-16 23:43:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/95c7e763c07061e425feb1c27e1137ef7572ab26,95c7e763c07061e425feb1c27e1137ef7572ab26,fix(proxyquire): No longer need forked version
bengotow,2015-11-16 23:22:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e42f57514ad6bde98106c6f2249914e46f6ddc1,5e42f57514ad6bde98106c6f2249914e46f6ddc1,fix(proxyquire): Reference http url instead of https
bengotow,2015-11-16 19:46:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad2d2973cb4477a85acd7db61342ce9e62bee9e9,ad2d2973cb4477a85acd7db61342ce9e62bee9e9,cleanup(*): We do not support devDependencies as a concept
bengotow,2015-11-16 18:02:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/96762647a9e128cc2c71c6ffe9a59f294d07028c,96762647a9e128cc2c71c6ffe9a59f294d07028c,"ASAR v0.8, because apparently 0.5 can skip files"
jstejada,2015-11-11 20:49:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/647aed5f1440defd2ff065133a917376a96a088f,647aed5f1440defd2ff065133a917376a96a088f,"Convert Composer Template example to ES6

Summary:
- Include ES6 files in spec-suite
- Fix template store specs
- Refactors TemplateStore a little bit to adjust to specs
- Convert coffe .cjsx files to ES6 .jsx files
- Fix TemplateDraftStoreExtension functions
- Update ComposerTemplates example README

Test Plan: - Plugin unit tests

Reviewers: bengotow, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2250"
bengotow,2015-11-14 21:11:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/a67f93a014209cc5f9f349c65687862a1730c849,a67f93a014209cc5f9f349c65687862a1730c849,bump(version): 0.3.23
bengotow,2015-11-14 21:10:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/c34747c03cbb0fd9052b38afbdd60cab79cdcd05,c34747c03cbb0fd9052b38afbdd60cab79cdcd05,fix(tray): Slightly resize win/linux tray icons
jstejada,2015-11-14 03:41:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/6786e0ae04b8fdb1fa65878e17a3fe0eb5f125b5,6786e0ae04b8fdb1fa65878e17a3fe0eb5f125b5,fix(lint): Remove lint errors
jstejada,2015-11-14 03:29:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/f66c24918fd379c8445230a30e8589f33ca15d9c,f66c24918fd379c8445230a30e8589f33ca15d9c,fix(tray): Set tray width based on actual unread count text width
bengotow,2015-11-14 02:11:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/27ae261d1b4a676ec71649a9d1043fd5e28dfc44,27ae261d1b4a676ec71649a9d1043fd5e28dfc44,"fix(tray): ""Open Inbox"" if main window is minimized / hidden"
bengotow,2015-11-14 01:42:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/53bca8e2f548e71f6861362eab3959efd84a3168,53bca8e2f548e71f6861362eab3959efd84a3168,fix(category-picker): vertical alignment of labels/folders icon
bengotow,2015-11-14 00:58:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/697b3855bf6631c9a3bcdff3ac948624084a7926,697b3855bf6631c9a3bcdff3ac948624084a7926,"fix(dropdowns): 3% darken on hover, not full blue"
bengotow,2015-11-14 00:10:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b24e22cbd7a590b15c6704c241ad0bf831e1303,5b24e22cbd7a590b15c6704c241ad0bf831e1303,fix(search): Prevent search from hitting X button
bengotow,2015-11-14 00:05:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e618d40a6525a4fdbb6f964fc4131a5469b5226,2e618d40a6525a4fdbb6f964fc4131a5469b5226,"fix(keymaps): Small tweaks to fix broken key behaviors

- Reload the menu after changing keymap sets
- Do not allow accelerators in the menu like ""z"", because they do not go through selector-based command matching and always fire into the window.
- Do not match `cmdctrl` to both `cmd` and `ctrl` on the Mac. Just `cmd`
- Re-order `shift-delete` mapping to `core:cut`, because it causes the menu to have no binding on Mac OS X"
bengotow,2015-11-13 19:42:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/41e3b01240281076f1f72c5c92b57b38e6dc85e4,41e3b01240281076f1f72c5c92b57b38e6dc85e4,"fix(names): ""Olivia"" should not be caught by name cleanup

This fixes #393.

The name ""Olivia"" was being caught in our parser designed to shorten ""Mike Kaylor via LinkedIn"" to ""Mike Kaylor"". We now check that ""via"" is it's own distinct word in the phrase."
jstejada,2015-11-13 19:00:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/1443c730c525e9e93112323ceb13cfc9a4daa231,1443c730c525e9e93112323ceb13cfc9a4daa231,fix(system-tray): Add sans-serif as fallback font for system tray unread count
bengotow,2015-11-13 18:58:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb9ffe7fa06bc32f14ec61edf027cd366bff0df5,fb9ffe7fa06bc32f14ec61edf027cd366bff0df5,"fix(mailto): Handle mailto links with newline characters #397

Regex was clipping off the body after the first newline. Fixes #397"
bengotow,2015-11-13 17:45:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb6ea894911318596ef20ee27adcc03e5b3395af,fb6ea894911318596ef20ee27adcc03e5b3395af,"fix(sidebar): Don't capitalize every word in label names. #401

Fixes #401"
bengotow,2015-11-11 22:58:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/e49fd100944c1d68593133adc06a8b09ca8d3327,e49fd100944c1d68593133adc06a8b09ca8d3327,fix(uploads): File uploads shouldn't time out after 15 seconds :/
spang,2015-11-11 23:43:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/286d34bb3d540d0f87791f510a267a338b9cfff4,286d34bb3d540d0f87791f510a267a338b9cfff4,"Merge pull request #301 from nicholascapo/update-libgcrypt-dependency

Update debian package libgcrypt dependency"
jstejada,2015-11-11 21:44:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/4a4c60bafcea88c100f154f201dd0094f3148eea,4a4c60bafcea88c100f154f201dd0094f3148eea,fix(system-tray): prevent duplicate menu item on darwin
luixal,2015-11-11 20:28:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/475c4aae3b6b9999dcd70d65463c78ae591b861a,475c4aae3b6b9999dcd70d65463c78ae591b861a,"Allows package to be installed in ElementaryOS

Changes the condition for detecting the distro name so ElementaryOS (ubuntu based) goes as an Ubuntu and the package installs."
bengotow,2015-11-11 18:20:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/d28e84d95aa8cc387617e7b2e7cc9bb60cfd50c5,d28e84d95aa8cc387617e7b2e7cc9bb60cfd50c5,undo(prefs): `atom.keymaps` does not implement unsubscribe
bengotow,2015-11-10 05:44:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/683ef61c1f9b165c7dcdc1467687b7ec6ceac29c,683ef61c1f9b165c7dcdc1467687b7ec6ceac29c,"fix(prefs): `atom.keymaps` does not implement unsubscribe

https://github.com/atom/atom-keymap/issues/101"
bengotow,2015-11-10 05:44:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8f1da035827f3390db5fbff84d9b1fdf2a90aca,c8f1da035827f3390db5fbff84d9b1fdf2a90aca,fix(prefs): ReactRemote should call componentWillUnmount
bengotow,2015-11-10 04:53:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ab065aab3e163b9d557e2d44ac9f4c2c9347163,0ab065aab3e163b9d557e2d44ac9f4c2c9347163,fix(specs): Remove loading cover in spec window
bengotow,2015-11-10 02:52:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d7ba4fbba3fb7ff95e6e932333f8988ded01a35,7d7ba4fbba3fb7ff95e6e932333f8988ded01a35,"fix(ui-dark): Small color adjustments, resolves #299, #148"
bengotow,2015-11-10 02:15:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/04be333f3f2b12ddc054f3b187053b7f085399f0,04be333f3f2b12ddc054f3b187053b7f085399f0,"fix(account-switcher): Dark content mode, closes #382"
bengotow,2015-11-09 20:14:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbea8beee51e072ca702305279b2c5a9f3f1db94,bbea8beee51e072ca702305279b2c5a9f3f1db94,"fix(feedback): Move feedback window creation to app process

Prevents cross-window callbacks that are preventing the app from quitting"
bengotow,2015-11-09 20:13:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/a4df144dbfc6a46147df90cff07d5d181fcce2e1,a4df144dbfc6a46147df90cff07d5d181fcce2e1,fix(autoload-images): Check to see if whitelist exists
bengotow,2015-11-09 20:13:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/d96273b07539888acfc5791d168b2ea1bc7d213a,d96273b07539888acfc5791d168b2ea1bc7d213a,fix(emitter): Remove warning by increasing max listeners
emorikawa,2015-11-09 20:09:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba584185cba5f28c2f5410608553deb9144e58ca,ba584185cba5f28c2f5410608553deb9144e58ca,fix(keymap): run cmdctrl preprocessor on build too
emorikawa,2015-11-09 15:03:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/119da453e1a10d575572722d97d886c463dbd9f4,119da453e1a10d575572722d97d886c463dbd9f4,"feat(selection): add selection of read, unread, starred, etc

Summary:
Can select all, deselect-all, read, unread, starred, unstarred.

Yes, it's not REALLY select ""all"", but it uses the items in the current
`retainedRange`. This is actually similar to what gmail does (only selects
on the first page of a 100).

Test Plan: new test

Reviewers: juan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2241"
bengotow,2015-11-08 02:15:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/32ffc7123aba77a6d98cffb2a6b4e5c885f06663,32ffc7123aba77a6d98cffb2a6b4e5c885f06663,fix(deps): Remove nodobjc until we re-enable native notifications
bengotow,2015-11-08 02:05:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/5074fde43bbdb0280bc817f49320c22fc96986cd,5074fde43bbdb0280bc817f49320c22fc96986cd,"fix(deps): Go away git-utils, we never used you anyway"
bengotow,2015-11-07 22:27:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb8810e01b941f57d25171b51f0fdd5d928ea2af,eb8810e01b941f57d25171b51f0fdd5d928ea2af,"fix(babel): Roll back to babel@5, see details

- move babelrc to static so that it can be used during the build process and also whenever the app is transpiling things on the fly.
- move babel back to version 5, which is compatible with `apm install`. (babel 6 seems to require the ""dedupe"" behavior of NPM3)
- update harmony-collections to use an unpublished commit that fixes the ""WeakMap is not generic"" issue"
bengotow,2015-11-07 20:02:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/8dcbb7c1b42b6d5f2e3900ca86f182459356943c,8dcbb7c1b42b6d5f2e3900ca86f182459356943c,bump(version): 0.3.22
jstejada,2015-11-07 02:55:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe8767fc0baed553a2f283f28bbffff24abc2fb2,fe8767fc0baed553a2f283f28bbffff24abc2fb2,fix(keymaps): create user keymaps file in .nylas/ if non existent
bengotow,2015-11-07 02:19:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9ef4c51e14fe29abb985d48736b8ea6085de554,d9ef4c51e14fe29abb985d48736b8ea6085de554,fix(menu): Allow fast-switch between accounts
jstejada,2015-11-07 00:54:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/5fa630b8c6dde2d127bf56b069d1086afa0c66b6,5fa630b8c6dde2d127bf56b069d1086afa0c66b6,"Update grunt tasks to lint and transpile es6 code using babel

Summary: - Linter uses predefined rules for ES6 and React from airbnb

Test Plan: - Manuel

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2242"
bengotow,2015-11-06 23:53:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/f152cca4d6a6d46ac58f634c8ce0cc169135f00f,f152cca4d6a6d46ac58f634c8ce0cc169135f00f,"feat(reading): Disable autoloading of images, opt-in one by one

Summary: This diff implements Gmails ""load images, always load images from bengotow@gmail.com"" option. Someone asked for it late last night and I figured it'd be fun to add. We also needed to refactor the MessageItem to allow for a GPG plugin - MessageItems now subscribe to the body of the message from the messageBodyProcessor, so in the event that processing rules change, someone can invalidate the processor cache by calling `resetCache()`, and then it recomputes bodies and triggers a refresh of each message body.

Test Plan: Updated existing tests, no new tests for this plugin just yet.

Reviewers: evan, juan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2235"
bengotow,2015-11-06 23:47:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/1eee97f5d06213513c84cafad06c4a74aa84ded4,1eee97f5d06213513c84cafad06c4a74aa84ded4,"fix(win32): Allow npm dedupe to error, succeeds anyway"
emorikawa,2015-11-06 23:16:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ca4e42b685c9ef9040f8c97348a0b5a3d5be758,9ca4e42b685c9ef9040f8c97348a0b5a3d5be758,fix(keymap): use atom-keymap 5.1.11
emorikawa,2015-11-06 22:45:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/512c645123dcc4e1a2b120c6cb1c9dfc092def52,512c645123dcc4e1a2b120c6cb1c9dfc092def52,fix(account): fix initial token loading in account store
emorikawa,2015-11-06 22:37:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/55d3e92f50cf4cca0b3ec5c428a4d6d11c8d19ee,55d3e92f50cf4cca0b3ec5c428a4d6d11c8d19ee,"feat(keymap): add cmd+1, cmd+2, etc to quick-select accounts

Fix ""unique key"" for react props

Fix composer styling bug in popout composer"
bengotow,2015-11-06 22:35:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ec4ea6fa8f0861f4ac7a48ca2557c5d6a3e3872,0ec4ea6fa8f0861f4ac7a48ca2557c5d6a3e3872,fix(win10): Ignore stdout from apmDedupe
jstejada,2015-11-06 21:44:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/66252fc7bc457af2117864513b45eb66948dcc34,66252fc7bc457af2117864513b45eb66948dcc34,fix(system-tray): properly deactivates package
emorikawa,2015-11-06 20:39:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/6588da7f33a6adb3c42c781eaf7514611a45973d,6588da7f33a6adb3c42c781eaf7514611a45973d,fix(signatures): temporarily disable signatures in preferences
bengotow,2015-11-06 20:23:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec61918634f2b6cf19060bc06de596d6095b4a74,ec61918634f2b6cf19060bc06de596d6095b4a74,"fix(win10): Add more resolutions to the windows .ico

Fixes #351"
emorikawa,2015-11-06 20:20:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/455b4563a9c22aeac98c6302cef2bd94b6509036,455b4563a9c22aeac98c6302cef2bd94b6509036,"feat(log): extract reporting and log API failures

Summary: We now log API failures

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2216"
bengotow,2015-11-06 20:11:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/bfb16bbe1a2f6d92850c796128375a2b4ecee1d9,bfb16bbe1a2f6d92850c796128375a2b4ecee1d9,"fix(win10): Prevent duplicate taskbar items

Fixes #368, #184

Related to #351"
emorikawa,2015-11-06 20:08:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fae7ce13c19088bf7c13370f6113a1cdbbca8f8,0fae7ce13c19088bf7c13370f6113a1cdbbca8f8,fix(specs): fix specs
emorikawa,2015-11-06 19:47:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/37e3fe0f4533ee5139cf0c27ee8cf9a008bc4ffe,37e3fe0f4533ee5139cf0c27ee8cf9a008bc4ffe,"feat(keymap): add new <KeymapHandlers />

Summary:
Refactor keymaps to wrap components with a <KeymapHandlers /> component.
This more Reactful way of declaring keyback handlers prevents us from
needing to subscribe to `atom.commands`

Test Plan: new tests

Reviewers: bengotow, juan

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2226"
bengotow,2015-11-06 19:15:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b84942051de3eb5b95236031c526fb42a04c357,0b84942051de3eb5b95236031c526fb42a04c357,"perf(db): Lazily deserialize models on the other side of the action bridge

Summary:
We send database `trigger()` events through the ActionBrige to all windows of the app. This means that during initial sync, we're serializing, IPCing and unserializing thousands of models a minute x ""N"" windows.

This diff converts the payload of the trigger method into an actual class that implements a custom toJSON. It converts the impacted `objects` into a string, and doesn't deserialize them until it's asked.

Bottom line: this means that in many scenarios, we can avoid creating Contact models, etc. in composer windows only to broadcast them and then gc them.

Test Plan: No new tests yet, but this should definitel be tested. #willfix.

Reviewers: juan, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2236"
jstejada,2015-11-06 18:47:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/a6c44b85290c9eb57045253ef67a3a976e3bb0f4,a6c44b85290c9eb57045253ef67a3a976e3bb0f4,"feat(system-tray): add system-tray package

Summary:
- Updates support for ES6 code inside packages
- Displays system tray icon with unread count on darwin, or with bubble on other platforms
- Uses canvas api to dynamically generate icon image given unread count:
  - Adds CavasUtils.canvasFromImgAndText to do this
- Adds config option to display system tray icon on darwin

Test Plan: Need to write the tests for this.

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2231"
bengotow,2015-11-06 05:02:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/3053fc817e4761577f470e1544a5b33b909e8034,3053fc817e4761577f470e1544a5b33b909e8034,"fix(model): Optimization incompatible with specs, todo"
bengotow,2015-11-06 04:16:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/496ec58e99edc6f400c43b7ffd4ba9abb1ce69c6,496ec58e99edc6f400c43b7ffd4ba9abb1ce69c6,"perf(fromJSON): 40% perf increase by fixing ""forin not optimized case""

https://github.com/petkaantonov/bluebird/wiki/Optimization-killers"
emorikawa,2015-11-06 01:50:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f9b8159bfd6d87f24c9e442a173d95797fc8138,0f9b8159bfd6d87f24c9e442a173d95797fc8138,fix(composer): double-composition events supported
bengotow,2015-11-06 01:20:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/fefec6404ade1acd70f0f7e3e4cbe2de9f77b643,fefec6404ade1acd70f0f7e3e4cbe2de9f77b643,disable(notifs): Native notifs causing EXC_BAD_ACCESS in beta
bengotow,2015-11-05 01:11:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc538930a7cb64b04b2793f83b955b284ac55146,dc538930a7cb64b04b2793f83b955b284ac55146,fix(search): Allow typing in the middle of the search text
bengotow,2015-11-05 00:07:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/f59de7262d1ed1ea7659599c7214ce872aaac4f1,f59de7262d1ed1ea7659599c7214ce872aaac4f1,fix(ship-logs): Do not propogate fs errors (Sentry 6144)
bengotow,2015-11-05 00:04:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/86fc3a4c2b9934bdf2e881c47ee3dd32ba72d16c,86fc3a4c2b9934bdf2e881c47ee3dd32ba72d16c,fix(sheet-toolbar): Make robust against mail view null names (Sentry 3861)
bengotow,2015-11-04 23:53:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/408e96945c62b925bcd81c900db9c48ccb735613,408e96945c62b925bcd81c900db9c48ccb735613,fix(notifs): Hopefully prevent gc of NodeObjC objects
bengotow,2015-11-03 20:00:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/e31352119731b57e4a18c12dbd4d96238ef1096d,e31352119731b57e4a18c12dbd4d96238ef1096d,fix(paths): Flatten npm inside of apm to cut 20 chars from max path length
bengotow,2015-11-03 00:40:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9704c011cb315a9fd88e51360c0415a134c8a21,b9704c011cb315a9fd88e51360c0415a134c8a21,bump(version): 0.3.21
bengotow,2015-11-02 19:56:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a41f0461584043dcf67c62fa0d97e7ac5ea83c4,9a41f0461584043dcf67c62fa0d97e7ac5ea83c4,fix(specs): Don't check for updates during spec runs
bengotow,2015-10-31 05:20:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1bf8ae026d475d46e422cd879d1db7485480d4a,c1bf8ae026d475d46e422cd879d1db7485480d4a,fix(deltas): Use the official API to create cursors
emorikawa,2015-10-31 00:03:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/eea25a307db7a382dc2cf1dd943a478d96517e0b,eea25a307db7a382dc2cf1dd943a478d96517e0b,"fix(composer): support Chinese & others - handle composition events

Summary:
ignores composition event commands until they're done. We then simply
update the new state after that happens.

Some additional refactoring:

- The <Contenteditable /> prop is 'value' instead of 'html' to make it
  look more like a standard React controlled input
- Removed `filters` prop and `footerElements` prop from Contenteditable.
  These could easily be moved into the composer (where they belong).
- Moved contenteditable and a few of its helper classes into their own
  folder.
- Moved `UndoManager` up out of the `flux` folder into `src`. Currently
  undo/redo is only in the composer when all contenteditables should have
  the basic funcionality. Will refactor this later.
- Fix tests

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2211"
bengotow,2015-10-30 22:27:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/595f80f75fd85258f084d36ddbac3bc797e0a9f8,595f80f75fd85258f084d36ddbac3bc797e0a9f8,fix(packaging): Resolve codesign issue on 10.11 due to bad symlink
bengotow,2015-10-30 04:24:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/50576e59e3ab46639ce71782759982e2554e0a4c,50576e59e3ab46639ce71782759982e2554e0a4c,feat(contextual-menus): Basic cut/copy/paste for all inputs—#161
bengotow,2015-10-30 03:34:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/6bee127134f3a38efe1344fd508dd21ecefb71c3,6bee127134f3a38efe1344fd508dd21ecefb71c3,"feat(shortcuts): Pageup/dn in message list, shift+pageup/dn in thread list"
bengotow,2015-10-30 03:20:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/6170b34533eafc1a8bce7683ddd64eea30683a33,6170b34533eafc1a8bce7683ddd64eea30683a33,perf(message-store): Debounce reload of the message column—#249
bengotow,2015-10-30 02:35:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/538af665cfa7d3953f3f8b0ffcb3004f66c804b8,538af665cfa7d3953f3f8b0ffcb3004f66c804b8,fix(sp): It's => its
bengotow,2015-10-29 23:58:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/13a92a19b7efeff63b912e2a6cd83bdc5bd36d6c,13a92a19b7efeff63b912e2a6cd83bdc5bd36d6c,Update CONTRIBUTING.md
bengotow,2015-10-29 23:56:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/b50dd3e2e427387165807a15cc7cebc94079da4d,b50dd3e2e427387165807a15cc7cebc94079da4d,Update CONTRIBUTING.md
emorikawa,2015-10-29 21:20:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc61aa78119130603d8a13ffe38a26d36c8f16de,cc61aa78119130603d8a13ffe38a26d36c8f16de,"feat(signatures): add signature support in preferences

Summary:
Adding signature support in preferences

Extracting out DraftStore extensions from the Contenteditable component

Moved Contenteditable to the nylas component kit

Build react remote window selection synchronization.

Test Plan: todo

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2204"
emorikawa,2015-10-29 17:25:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/78f6829c1be315880ffc24c2a738ad23e0d79229,78f6829c1be315880ffc24c2a738ad23e0d79229,doc(task): make methods public and add documentation
bengotow,2015-10-29 18:30:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/62d45698d1a326a78ece7a9ccfe5faf4a618b67f,62d45698d1a326a78ece7a9ccfe5faf4a618b67f,"fix(thread-list): Line up sender, subject and snippet

Fixes GitHub issue #278"
bengotow,2015-10-29 18:23:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/29cc5853b353f13ee5f329b7a397c3c2b6a4558f,29cc5853b353f13ee5f329b7a397c3c2b6a4558f,"feat(notifs): Native notifications for Mac OS X, Win coming

Summary: Replaces `new Notification`-based HTML5 notifications with system native notifications on Mac OS X. This allows us to implement the ""Reply"" button in the notifications. This will also serve as the hook for native Windows notifications, which are unsupported in Chromium.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2199"
emorikawa,2015-10-28 23:53:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/8611b40d7ac342276309c026934f894cc9780309,8611b40d7ac342276309c026934f894cc9780309,fix(analytics): remove analytics
bengotow,2015-10-28 23:55:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f13b714034bdee82ca388f011c9a7e065be8620,8f13b714034bdee82ca388f011c9a7e065be8620,"fix(notifs): Make sure notifs always have thread references

Summary:
This started as a fix to https://sentry.nylas.com/sentry/edgehill/group/2970/, which was caused by `threads[msg.threadId]?.categoryNamed('inbox') isnt null`, because `undefined isnt null`.

Then I realized that we batch ""incoming"" messages and threads arbitrarily, and the reason this happened is because the thread and message were split into different delta updates. Previously, notifications would just have been skipped.

Now we call `_onNewMessagesMissingThreads` when threads cannot be found for new messages, and then try to find the threads again in 10 seconds. If we can find them, we simulate a delta call and run them back through the processor. It would have been simpler to call `_onNewMailReceived` again directly, but I want to be 100% sure we never create infinite loops.

Test Plan: Run new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2188"
emorikawa,2015-10-28 23:51:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0212c3dd927c3fa581684f7ac1384202eadeaae,d0212c3dd927c3fa581684f7ac1384202eadeaae,"fix(drafts): only syncback every 30 seconds instead of 5 seconds

This will help prevent API errors from causing multiple drafts to appear"
emorikawa,2015-10-28 22:50:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/985a8b55fe27a69736aa3abe4d05d57e2765ff2d,985a8b55fe27a69736aa3abe4d05d57e2765ff2d,"fix(ui): better unread count box

Smaller box that sits next to item.
Drafts is now no longer a strong color
Fixes T3535"
emorikawa,2015-10-28 21:50:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/ede7eda3c43dc0d2044c381d8de7dac42c6d3ca3,ede7eda3c43dc0d2044c381d8de7dac42c6d3ca3,"fix(unread): can mark message as unread in split mode

Summary: Fixes T4835

Test Plan: new tests

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T4835

Differential Revision: https://phab.nylas.com/D2205"
bengotow,2015-10-28 21:38:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7e646714f4cd2c021db1fdd26b71452412a935c,f7e646714f4cd2c021db1fdd26b71452412a935c,changelog: 0.3.20 release notes
bengotow,2015-10-28 17:47:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/6bbe9308cfc60eec7ed19dae882d181fa490637b,6bbe9308cfc60eec7ed19dae882d181fa490637b,fix(notifications): Buttons always triggered default action
bengotow,2015-10-28 01:45:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/339da554b0903d259dd5de88459ec9bad3354d5d,339da554b0903d259dd5de88459ec9bad3354d5d,fix(cibuild): unlinkSync => rmdirSync
bengotow,2015-10-28 01:29:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9bf2a39fe40bad1cce7cdd3613de0533a9caf36,a9bf2a39fe40bad1cce7cdd3613de0533a9caf36,"fix(cibuild): apm needs dependencies, fix for npm3"
bengotow,2015-10-28 01:09:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/19363d94dd61961485cf909afa76fb220afca058,19363d94dd61961485cf909afa76fb220afca058,bump(version): 0.3.20
bengotow,2015-10-28 00:04:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e2282a2a0e4ecbfdd8247dbdc951918de9f7728,5e2282a2a0e4ecbfdd8247dbdc951918de9f7728,fix(bootstrap): Always use npm3 in ./build to install apm
bengotow,2015-10-27 23:48:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/edaf751c3b0fd939aa0c232620131a0bf1d89b70,edaf751c3b0fd939aa0c232620131a0bf1d89b70,"feat(changelog): Link to changelog before and after updates

Summary: Link to the changelog, and add a new notification which appears after updates are installed

Test Plan: No tests to see here..

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2201"
bengotow,2015-10-27 23:43:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/08e2e7581abab626d339bea109cd1dd585ef08c3,08e2e7581abab626d339bea109cd1dd585ef08c3,fix(onboarding): Check code format before hitting API
bengotow,2015-10-27 23:35:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/43a61d2471cf64a4a4c7fb09e5e7f7ba98cde52d,43a61d2471cf64a4a4c7fb09e5e7f7ba98cde52d,"rm(aws-sdk): Ship logs via `request`, eliminate aws-sdk"
bengotow,2015-10-27 23:23:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/848fa10dee7cdbca7d33517cff93389b40259ae5,848fa10dee7cdbca7d33517cff93389b40259ae5,⇧(npm): Move to NPM3 to shorten paths on Win32
bengotow,2015-10-27 18:38:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ff48ca9a6d695e8e934647cbcc4e2343e078729,0ff48ca9a6d695e8e934647cbcc4e2343e078729,rm(composer): Dead code related to Scribe / Bower
bengotow,2015-10-27 18:36:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/96bbbb6904eb619f1e9e80a832240ef0fab98b29,96bbbb6904eb619f1e9e80a832240ef0fab98b29,Create CHANGELOG.md
bengotow,2015-10-27 18:28:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/43c43a6bf599dc2aed74abb5c28fd22063fec95e,43c43a6bf599dc2aed74abb5c28fd22063fec95e,"fix(search): New X, focus styling for search

Fixes T3485"
bengotow,2015-10-27 18:05:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/69e4ba32ac67b12d5e307c68f161c31c68421153,69e4ba32ac67b12d5e307c68f161c31c68421153,"fix(files): Not-yet-downloaded files can be opened via double click

Fixes T4840"
bengotow,2015-10-27 17:50:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/703b9decfa0b153cfc4c24e8ec692047f7f5836b,703b9decfa0b153cfc4c24e8ec692047f7f5836b,fix(onboarding): Request `/status/` to avoid 302
brettgerry,2015-10-27 00:13:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/1400f3e6e8f3baf93eaf313102bd806f9e07216d,1400f3e6e8f3baf93eaf313102bd806f9e07216d,Add quotes to account token key in example config.cson
bengotow,2015-10-26 17:51:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7cf2f1e1861e1419d0548dcb0ec0a3f88c1dd0b,c7cf2f1e1861e1419d0548dcb0ec0a3f88c1dd0b,fix(workspace): Remember whether sidebar is hidden #190
bengotow,2015-10-26 17:47:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ddfb1595a793684b2b5f2d4b0f161df6dadc141,2ddfb1595a793684b2b5f2d4b0f161df6dadc141,fix(prefs): Fix overflow of account names. #175
bengotow,2015-10-26 17:22:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/09ed1ea41583345270d3a714ee745ee568705e97,09ed1ea41583345270d3a714ee745ee568705e97,fix(prefs): Guard against null account in preferences window
grinich,2015-10-25 01:05:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/69872ca1a6232b38fd44ad0039afd83abb34d8eb,69872ca1a6232b38fd44ad0039afd83abb34d8eb,note about libgcrypt11
bengotow,2015-10-24 01:30:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a3b4e7106f71a04bccf67fae4e2a86a69e15ffb,1a3b4e7106f71a04bccf67fae4e2a86a69e15ffb,"fix(fullscreen): On Mac OS X, green window control defaults to fullscreen"
bengotow,2015-10-24 00:03:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/de7d1bbaa0d13993a4fea17e13fcbdb4be861db9,de7d1bbaa0d13993a4fea17e13fcbdb4be861db9,fix(atom): Prevent cache collisions with Atom
bengotow,2015-10-23 23:05:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/10e6c864cbee0baa65ba9f175df8b2a5a5e597d4,10e6c864cbee0baa65ba9f175df8b2a5a5e597d4,bump(version): 0.3.19
bengotow,2015-10-23 23:04:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c5c1e98c1bc2f77eb790617f56b1f21cdcce175,5c5c1e98c1bc2f77eb790617f56b1f21cdcce175,fix(drafts): Draft selection / deletion fixes
bengotow,2015-10-23 22:47:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/528224a18474b5a1d52a54a85cf39d301414626f,528224a18474b5a1d52a54a85cf39d301414626f,fix(sidebar): Better disclosure triangle position on multiline labels / folders
emorikawa,2015-10-23 22:21:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/7711ec533efbaade22fa991c85636f415481e1e0,7711ec533efbaade22fa991c85636f415481e1e0,fix(onboarding): fix add account button width
bengotow,2015-10-23 22:21:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/992b90d969b3bec75870cec4ce0e235c17d324b9,992b90d969b3bec75870cec4ce0e235c17d324b9,fix(message-list): Clicking Archive or Trash should pop back to the thread list
bengotow,2015-10-23 22:14:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/e9141a44ec7ec55a69cb0f58342984ee0538005a,e9141a44ec7ec55a69cb0f58342984ee0538005a,fix(plugins): Packages => Plugins in a few more places
emorikawa,2015-10-23 22:04:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc95662adcec776253a6dc25358371eb9006e711,cc95662adcec776253a6dc25358371eb9006e711,fix(win): composer and input styles
bengotow,2015-10-23 22:03:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/aeb756cb27ff8cf235a6382f9dac94466a028839,aeb756cb27ff8cf235a6382f9dac94466a028839,"fix(undo-redo): Fix ""undo"" button clickability, improve animation"
bengotow,2015-10-23 21:55:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb50b3700be8c0e3ff8058c392886984e6c8573b,cb50b3700be8c0e3ff8058c392886984e6c8573b,fix(list): Additional focused CSS changes
bengotow,2015-10-23 21:50:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/e641d78d271a83bb4173f9c1601119c212ab94a4,e641d78d271a83bb4173f9c1601119c212ab94a4,fix(change-folder): Show folder name when moving to folder
bengotow,2015-10-23 21:50:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/29fdd3024a8a98d3a6a27e3f9862286eceaf3969,29fdd3024a8a98d3a6a27e3f9862286eceaf3969,fix(threads): Show the archive button in the bulk action bar
emorikawa,2015-10-23 21:45:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/45466a18b0aabf9ed7724877517697a6b9cf72a4,45466a18b0aabf9ed7724877517697a6b9cf72a4,fix(archive): can archive and trash from focused message
emorikawa,2015-10-23 20:41:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/2fd95fab282f3be312011e2c02e0e2a8e3381c06,2fd95fab282f3be312011e2c02e0e2a8e3381c06,fix(docs): fix broken link
emorikawa,2015-10-09 20:40:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbf42531cffd6948f8df08fbd78fc007778332e4,bbf42531cffd6948f8df08fbd78fc007778332e4,feat(windows): updated docs and fix for building on 64-bit
bengotow,2015-10-23 19:54:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/096e829f331393e1024aa6d4533916485c60ed40,096e829f331393e1024aa6d4533916485c60ed40,fix(list): Incorrect snippet color on unread selected threads in narrow mode
bengotow,2015-10-23 19:49:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/a84e1b3db4ec8663d705b74274fbb37d52adf27b,a84e1b3db4ec8663d705b74274fbb37d52adf27b,fix(keymaps): Reveal keymap.cson rather than opening
bengotow,2015-10-23 19:47:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/316d46028815d7302a9cbcf56d54aad36e375431,316d46028815d7302a9cbcf56d54aad36e375431,fix(thread-list): Better hover state for quick actions
emorikawa,2015-10-23 19:13:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b7a3264bdc65f83cd0cc59858f7531d17dfedcc,4b7a3264bdc65f83cd0cc59858f7531d17dfedcc,fix(windows): fix apm package loading and onboarding styles
bengotow,2015-10-23 18:58:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/5c57817ee667dffc4a37b26242215a909f21134a,5c57817ee667dffc4a37b26242215a909f21134a,fix(onboarding): Do not open plugin folders after install
bengotow,2015-10-23 18:42:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d45b1ec9753244010ad3f89d1427da5d93daa3b,7d45b1ec9753244010ad3f89d1427da5d93daa3b,fix(onboarding): Replace ❤️ with a heart image for win32
bengotow,2015-10-23 18:35:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/256330c3cbd86636508320f27632840ccd0e1927,256330c3cbd86636508320f27632840ccd0e1927,"fix(onboarding): Fix size animation, resolves #150"
bengotow,2015-10-23 16:54:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/404d0d2ec39356e56faccaf9dd02679dfa2a1b5a,404d0d2ec39356e56faccaf9dd02679dfa2a1b5a,"Merge pull request #121 from madhugb/master

Fixed a pixel cut in floating-toolbar"
bengotow,2015-10-23 01:07:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/10ca07599b64deead95f90e8075374c0114b66fd,10ca07599b64deead95f90e8075374c0114b66fd,fix(tasks): Additional fixes
bengotow,2015-10-23 00:26:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/5415bc76650f3f4e0590e407f6073e1c7af6b265,5415bc76650f3f4e0590e407f6073e1c7af6b265,fix(tasks): Invalid coffeescript in 531118ac5c4ab2aaa63002f611b3d307cc6ebbbd
bengotow,2015-10-22 23:13:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/acc0c18bc65e02d67889b5ce5be6b577d1d49e67,acc0c18bc65e02d67889b5ce5be6b577d1d49e67,"fix(drafts): Fix missing import, resolves Sentry 4041"
bengotow,2015-10-22 23:08:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/084fcb53e49939777b18e3e345a4e285e8447f1a,084fcb53e49939777b18e3e345a4e285e8447f1a,"fix(spellcheck): Fix dead code, resolve Sentry 3594"
bengotow,2015-10-22 23:05:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/c914b2701b7e8c7024a2114197840ab123f87a97,c914b2701b7e8c7024a2114197840ab123f87a97,fix(important): Resilient against invalid AccountStore state (Sentry 4049)
bengotow,2015-10-22 23:02:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b8c333ad880d8bef19662842856d1128b12fb5a,8b8c333ad880d8bef19662842856d1128b12fb5a,"fix(drafts): Reveal or focus windows for drafts when already open

Fixes T3883"
bengotow,2015-10-22 22:57:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dd191fea3b09ef9440ad46940b082e59411926e,9dd191fea3b09ef9440ad46940b082e59411926e,"fix(win): When windows are removed, keep ivars in sync"
bengotow,2015-10-22 21:55:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/a93f8c82941b31274f139d9a7f8f8384b64a26a7,a93f8c82941b31274f139d9a7f8f8384b64a26a7,"fix(*): Packages => Plugins in a few more places

Resolves T4289"
bengotow,2015-10-22 21:24:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/d45cf79a3de6e6f1f2f892c81f43b00fec212f0a,d45cf79a3de6e6f1f2f892c81f43b00fec212f0a,bump(version): 0.3.18
emorikawa,2015-10-22 21:19:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad5274049de1ecb7cb7f1edebb467fe48a0252ee,ad5274049de1ecb7cb7f1edebb467fe48a0252ee,"fix(databse): fix memory leak on `DatabaseStore.atomically`

Summary:
The Promise chain we were creating was never cleared and created a memory
leak. We instead use a `PromiseQueue` to cleanup finished promises.

Also added several more tests and verified that the memory leak is gone
with the Chrome profiler

Test Plan: new tests

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2184"
emorikawa,2015-10-22 21:14:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/e9acc3d315d932f9f99f4c0399c4e8e2e0c1744b,e9acc3d315d932f9f99f4c0399c4e8e2e0c1744b,"fix(event): remove EventStore

Summary:
The EventStore was really doing nothing, except caching hundreds of MB of
event data unnecessarily in each and every window :(

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2187"
emorikawa,2015-10-22 21:13:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/ada6e5a2f6f23c27e7de7c75b6421dc346b1d2f7,ada6e5a2f6f23c27e7de7c75b6421dc346b1d2f7,"fix(spec): fix contact store spec

Since it's not Promise-based anymore. It was just the spec that relied on
this."
emorikawa,2015-10-22 21:10:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/c9d7743cc6c7ec74d7afd3806ea0d403852502ec,c9d7743cc6c7ec74d7afd3806ea0d403852502ec,"fix(memory): don't return Promise to debounce in ContactStore

Prevents a memory leak where it holds onto a stale references of the
contactCache"
bengotow,2015-10-22 18:34:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ff6c4912c438898715c3afe69f97f061d6a51d5,9ff6c4912c438898715c3afe69f97f061d6a51d5,fix(feedback): Links should open in the user's default browser
bengotow,2015-10-22 17:53:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/a83201ef7eaca9fa51c5e36b4cdf1d644bf672b2,a83201ef7eaca9fa51c5e36b4cdf1d644bf672b2,"feat(sidebar): Hierarchical folders/labels in the sidebar, rendering perf

Summary:
Fix label sorting... apparently we just synced them in creation date order

Allow labels / folders to be nested using separators `.`, `/`, and `\`

Allow collapsing of nested labels in sidebar

Add overflow hidden to some core flexboxes, which dramatically reduces repaints because it knows columns will not overflow into other columns

Prevent scroll region contents from re-rendering all the time, not sure why this works

Add test for account sidebar store

Test Plan: Run new test of AccountSidebarStore

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2181"
bengotow,2015-10-22 17:28:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/53137a9bfaddd147d504623d19854d9a4e1a9a77,53137a9bfaddd147d504623d19854d9a4e1a9a77,fix(onboarding): Correct error where token pane is too small
madhugb,2015-10-22 05:48:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/7122d22da91c1426b811e26142cbdccea5a51e39,7122d22da91c1426b811e26142cbdccea5a51e39,A pixel cut in floating-toolbar
emorikawa,2015-10-22 03:39:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8c4790d40e530ed4f3cadd7fa598fedba8bb94c,e8c4790d40e530ed4f3cadd7fa598fedba8bb94c,fix(lint): fix indentation linter error
emorikawa,2015-10-22 03:32:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/2500e521793f64bcff519d4e8441eb4ee780936f,2500e521793f64bcff519d4e8441eb4ee780936f,"feat(windows): improve UI for Windows

Remove rounded corners and gradients"
emorikawa,2015-10-21 23:48:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/134702805d96580e0fd15d51f364c557cf8a36a6,134702805d96580e0fd15d51f364c557cf8a36a6,feat(windows): upgarade preferences UI on Windows
bengotow,2015-10-21 21:52:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/2afbc0a6bde1fc14965149e18d0c741be46b3e56,2afbc0a6bde1fc14965149e18d0c741be46b3e56,fix(empty-state): Subpixel animation via translate3d
bengotow,2015-10-21 21:38:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/05e24838bd154700d5feb7dccdc1edb2b2b3559c,05e24838bd154700d5feb7dccdc1edb2b2b3559c,"Merge pull request #109 from NSHenry/master

feat(onboarding): Optional eas_server_host field for Exchange auth"
bengotow,2015-10-21 21:30:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/fddac45687663e56650fe6af83ad7091a11ca902,fddac45687663e56650fe6af83ad7091a11ca902,"rm(metadata): MetadataStore is not in use, should be rebuilt

Resolves a request that happens whenver the user starts the app, reported in #108"
bengotow,2015-10-21 21:12:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ec22dda5a9f256b750ca27311352e023f7fc300,2ec22dda5a9f256b750ca27311352e023f7fc300,fix(account-switcher): Chevron icon was upside-down
bengotow,2015-10-21 21:07:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/d54b7edae036c139b8ab8c753d94b5653f085c0f,d54b7edae036c139b8ab8c753d94b5653f085c0f,"fix(atom-window): Main window should exit fullscreen when ""closed""

Fixes issue #69"
bengotow,2015-10-21 20:56:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/d4a3c1dad98beb0fdc3a236933ad4e9cc03847c0,d4a3c1dad98beb0fdc3a236933ad4e9cc03847c0,"Merge pull request #113 from agudulin/master

style(*): Add styles for <select> elements, override system defaults"
bengotow,2015-10-21 19:28:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f28b0ad0254b3229c64df32ebe058188fc43fa1,2f28b0ad0254b3229c64df32ebe058188fc43fa1,"fix(uploads): Display error when uploading >25MB files

Fixes GitHub issue #102"
emorikawa,2015-10-21 19:17:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/8808a821f88f5413f031e969dede17fcff929eda,8808a821f88f5413f031e969dede17fcff929eda,feat(win32): improve button styles for Win 8.1 spec
bengotow,2015-10-21 18:36:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/392ba542b1bd27e3db7af93c8fe411a8ae2dd7b8,392ba542b1bd27e3db7af93c8fe411a8ae2dd7b8,"fix(category): Consolidate logic around ""archive"" vs"" all"""
bengotow,2015-10-21 18:33:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9636884554d40eee58684cd1544059c2a228be3,b9636884554d40eee58684cd1544059c2a228be3,"fix(art): Correct ""Trash"" icon, naming consistency"
agudulin,2015-10-21 18:52:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/60a8ec96e96f572b10402f1ae6b7fe49fa066db7,60a8ec96e96f572b10402f1ae6b7fe49fa066db7,"Revert back container width, fix controls align"
emorikawa,2015-10-21 18:03:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/1fc6dfc38a5b882c46a18bc3534f279551afaa81,1fc6dfc38a5b882c46a18bc3534f279551afaa81,feat(tooltip): use native tooltip style
agudulin,2015-10-21 18:27:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8b18b9adfed677285bca8f6f5f20d0738b1a7fa,d8b18b9adfed677285bca8f6f5f20d0738b1a7fa,Setup styles for dropdown (select) control
bengotow,2015-10-21 18:07:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/4810775924ac2b2ccdeba0119ec131ef1eace21a,4810775924ac2b2ccdeba0119ec131ef1eace21a,fix(tasks): SyncbackCategory does not need organizationUnit
bengotow,2015-10-21 17:57:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/98a2464e0f92d0941be2636659de2ade61d09e3a,98a2464e0f92d0941be2636659de2ade61d09e3a,fix(specs): Unbreak tests for CategoryPicker
bengotow,2015-10-21 17:38:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f34c8403fdf312ef4e5ff8efd1b6f7117bfd1bb,4f34c8403fdf312ef4e5ff8efd1b6f7117bfd1bb,"feat(trash): Trash for Gmail, and architectural changes for common tasks

Summary:
This diff centralizes logic for creating common tasks for things like moving to trash, archive, etc. TaskFactory exposes a set of convenience methods and hides the whole ""and also remove the current label"" business from the user.

This diff also formally separates the concept of ""moving to trash"" and ""archiving"" so that ""remove"" isn't used in an unclear way.

I also refactored where selection is managed. Previously you'd fire some action like archiveSelection and it'd clear the selection, but if you selected some items and used another method to archive a few, they were still selected. The selection is now bound to the ModelView as intended, so if items are removed from the modelView, they are removed from it's attached selection. This means that it shouldn't /technically/ be possible to have selected items which are not in view.

I haven't refactored the tests yet. They are likely broken...

Fix next/prev logic

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2157"
bengotow,2015-10-21 17:34:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7c6ae0774bad41884c83eea18045510cd3a5d4e,f7c6ae0774bad41884c83eea18045510cd3a5d4e,"fix(toolbars): Cross disolve toolbar items on a one-off basis

Summary:
This diff removes the timeout transition group from the sheet-toolbar, which was causing toolbar items to fade when columns were opened / closed and they were moved from column to column.

Instead, I'm just animating the message toolbar items, which are one of the few sets of toolbar items that really should fade, and do so as an entire set.

I've also renamed the ""sheet-toolbar"" animation to ""opacity-125ms"". I think it'd be cool to create a standard set of these animations, but I didn't see any others it would make sense to create generic names for yet. (The others have weird timings or are bound up inside packages).

Resolves Github #90

Test Plan: No new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2159"
emorikawa,2015-10-21 17:33:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/531118ac5c4ab2aaa63002f611b3d307cc6ebbbd,531118ac5c4ab2aaa63002f611b3d307cc6ebbbd,"fix(tasks): don't continue if dependent task fails

Summary:
Fixes T4291

If I made a final edit to a pre-existing draft and sent, we'd queue a
`SyncbackDraftTask` before a `SendDraftTask`. This is important because
since we have a valid draft `server_id`, the `SendDraftTask` will send by
server_id, not by POSTing the whole body.

If the `SyncbackDraftTask` fails, then we had a very serious issue whereby
the `SendDraftTask` would keep on sending. Unfortunately the server never
got the latest changes and sent the wrong version of the draft. This
incorrect version would show up later when the `/send` endpoint returned
the message that got actually sent.

The solution was to make any queued `SendDraftTask` fail if a dependent
`SyncbackDraftTask` failed.

This meant we needed to make the requirements for `shouldWaitForTask`
stricter, and block if tasks failed.

Unfortunatley there was no infrastructure in place to do this.

The first change was to change `shouldWaitForTask` to `isDependentTask`.
If we're going to fail when a dependent task fails, I wanted the method
name to reflect this.

Now, if a dependent task fails, we recursively check the dependency tree
(and check for cycles) and `dequeue` anything that needed that to succeed.

I chose `dequeue` as the default action because it seemed as though all
current uses of `shouldWaitForTask` really should bail if their
dependencies fail. It's possible you don't want your task dequeued in this
dependency case. You can return the special `Task.DO_NOT_DEQUEUE_ME`
constant from the `onDependentTaskError` method.

When a task gets dequeued because of the reason above, the
`onDependentTaskError` callback gets fired. This gives tasks like the
`SendDraftTask` a chance to notify the user that it bailed. Not all tasks
need to notify.

The next big issue was a better way to determine if a task truely errored
to the point that we need to dequeue dependencies. In the Developer Status
area we were showing tasks that had errored as ""Green"" because we caught
the error and resolved with `Task.Status.Finished`. This used to be fine
since nothing life-or-death cared if a task errored or not. Now that it
might cause abortions down the line, we needed a more robust method then
this.

For one I changed `Task.Status.Finished` to a variety of finish types
including `Task.Status.Success`. The way you ""error"" out is to `throw` or
`Promise.reject` an `Error` object from the `performRemote` method. This
allows us to propagate API errors up, and acts as a safety net that can
catch any malformed code or unexpected responses.

The developer bar now shows a much richer set of statuses instead of a
binary one, which was REALLY helpful in debugging this. We also record
when a Task got dequeued because of the conditions introduced here.

Once all this was working we still had an issue of sending old drafts.

If after a `SyncbackDraftTask` failed, now we'd block the send and notify
the users as such. However, if we tried to send again, there was a
separate issue whereby we wouldn't queue another `SyncbackDraftTask` to
update the server with the latest information. Since our changes were
persisted to the DB, we thought we had no changes, and therefore didn't
need to queue a `SyncbackDraftTask`.

The fix to this is to always force the creation of a `SyncbackDraftTask`
before send regardless of the state of the `DraftStoreProxy`.

Test Plan: new tests. Lots of manual testing

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: mg

Maniphest Tasks: T4291

Differential Revision: https://phab.nylas.com/D2156"
bengotow,2015-10-21 17:25:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/a926f84bc1a7728e93e63bb7222a3e7186555f85,a926f84bc1a7728e93e63bb7222a3e7186555f85,"Merge pull request #112 from ryanpcmcquen/patch-1

fix(validation): Allow for TLDs that are more than 4 characters"
bengotow,2015-10-21 01:36:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a6d51e59541cb51a52fb9f99edb4ba1015db123,9a6d51e59541cb51a52fb9f99edb4ba1015db123,ci(mac): Rename the app Nylas N1 on the Mac
bengotow,2015-10-21 00:34:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef9a80b79b0ce6aebcd99ca7cdc8ad569de82592,ef9a80b79b0ce6aebcd99ca7cdc8ad569de82592,ci(win): N1.exe => N1Setup.exe (it's an installer)
bengotow,2015-10-20 22:06:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/af084f15072ad153ba33e4eff62e1ff0b9e5712e,af084f15072ad153ba33e4eff62e1ff0b9e5712e,bump(version): 0.3.17
bengotow,2015-10-20 21:24:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/fdab49d31dfee853970b1810f2fa100acb23c7d1,fdab49d31dfee853970b1810f2fa100acb23c7d1,ci(mac): Fix zip creation and upload for updater
bengotow,2015-10-20 20:43:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e3ce9cd90b5e43a582a5ffdc522cb3ff4705fd7,2e3ce9cd90b5e43a582a5ffdc522cb3ff4705fd7,"ci(*): mkrpm only works on Fedora build machines, need to configure one"
bengotow,2015-10-20 20:31:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac2cbbf864602df8fb5cd7ec4781f626dba7cc61,ac2cbbf864602df8fb5cd7ec4781f626dba7cc61,ci(*): Use publish-nylas-build on Linux
bengotow,2015-10-20 01:44:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab263ecda5dabdc2d73aa506449b9a300916beb4,ab263ecda5dabdc2d73aa506449b9a300916beb4,ci(*): Put builds in /version/platform/arch
bengotow,2015-10-17 00:06:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/54622a89211ee48d9e7d1d7bc25d11ce2bbf63d3,54622a89211ee48d9e7d1d7bc25d11ce2bbf63d3,"ci(*): Put builds in subdirectories, better for Squirrel.Win"
bengotow,2015-10-16 22:46:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/41dfe2817bac7e98a1d485170ee754e196b7fcf3,41dfe2817bac7e98a1d485170ee754e196b7fcf3,ci(*): Prevent external folks from posting to slack
bengotow,2015-10-16 22:26:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1944008a9b950abca1884a81568c22b45912342,e1944008a9b950abca1884a81568c22b45912342,"ci(*): Fix Mac build filenames, zip uploads"
bengotow,2015-10-16 21:01:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/73d976f03850394bf45b8b022940396a8ad77da0,73d976f03850394bf45b8b022940396a8ad77da0,ci(*): Put the commit hashes back in release filenames
bengotow,2015-10-16 00:54:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/274cf60aba5e7678e9232f1ddeace156e4400d7a,274cf60aba5e7678e9232f1ddeace156e4400d7a,ci(win): Fix build tasks to enable windows CI builds
bengotow,2015-10-15 01:05:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c2f27c10334884ba7573e64a3411fd2958e1545,8c2f27c10334884ba7573e64a3411fd2958e1545,"fix(thread-list): stop thread-icons from shrinking, justify participants explicitly"
bengotow,2015-10-15 00:11:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/aca9de07d93416d82f1725ba9c30d9a881485f89,aca9de07d93416d82f1725ba9c30d9a881485f89,"fix(config): new mail sounds on by default, change config keypath

unread-notifications.sounds => core.notifications.sounds"
bengotow,2015-10-14 17:46:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/615e90466b6cc071abc662777aa621187f65252e,615e90466b6cc071abc662777aa621187f65252e,fix(bootstrap): Don't fail when path contains spaces
bengotow,2015-10-13 19:04:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/7787e0bc4b4da40e1d31a5d6b4ef6a8c73bd5132,7787e0bc4b4da40e1d31a5d6b4ef6a8c73bd5132,fix(contributing): Clarify setup instructions for open source stack
bengotow,2015-10-12 21:31:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/b6b1b63c9e01456ba5181e333f1c7c59f6ac9154,b6b1b63c9e01456ba5181e333f1c7c59f6ac9154,bump(version): 0.3.16
bengotow,2015-10-12 18:14:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/87bb79fcc2f08b894ad6437feedadadda2f84a6d,87bb79fcc2f08b894ad6437feedadadda2f84a6d,fix(sidebar): Prevent white top border in all scenarios
bengotow,2015-10-12 18:04:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/12382e1c410ce3de0e86af382f2b4589a5b7b275,12382e1c410ce3de0e86af382f2b4589a5b7b275,fix(sidebar): Remove top margin causing white border
bengotow,2015-10-12 17:48:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d53d65959e895f6aa72d69223ab22b6a2a135b2,2d53d65959e895f6aa72d69223ab22b6a2a135b2,"fix(feedback): Make button slightly smaller, less obtrusive"
bengotow,2015-10-12 17:35:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1c3ab2e10fed9ec3dc1249a72551521221253b1,b1c3ab2e10fed9ec3dc1249a72551521221253b1,fix(thread-list): Enable drag and drop in narrow view
bengotow,2015-10-10 01:14:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/a312614195383f4961092231ea7dc3b629944b56,a312614195383f4961092231ea7dc3b629944b56,"fix(html-parser): Never blow up, just send us HTML parsing errors"
emorikawa,2015-10-12 18:03:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/78a3218c2690796d021077c9872e2ed7d643daf8,78a3218c2690796d021077c9872e2ed7d643daf8,"fix(contact): fix bug where malformed contacts threw an error

Summary:
Also added tests to catch the case
Fixes T4290

Test Plan: new tests

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T4290

Differential Revision: https://phab.nylas.com/D2153"
bengotow,2015-10-12 17:27:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/abe0e1baaccee7ab23368fc0c46da62fa2f2c230,abe0e1baaccee7ab23368fc0c46da62fa2f2c230,"Merge pull request #79 from digitalmaster/patch-1

Fix Broken link to DraftStoreExtensions.md"
jan509,2015-10-09 17:18:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5ea09adbc71990823e147dfabbddb348f741687,d5ea09adbc71990823e147dfabbddb348f741687,"fix(script): allow x64 build on Windows

Electron is available for 64-bit Windows machines(https://github.com/atom/electron/issues/980), so we don't need the 32-bit check anymore. Reference: https://github.com/nylas/N1/issues/28"
digitalmaster,2015-10-12 00:36:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f6a0807075ca864435060c99be410d846a343db,0f6a0807075ca864435060c99be410d846a343db,Fix Broken link to DraftStoreExtensions.md
bengotow,2015-10-11 08:58:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e030a1421a5cf4f103ab0e0721a9de226a48360,7e030a1421a5cf4f103ab0e0721a9de226a48360,"fix(updater): Check less frequently, stop when update ready to install"
bengotow,2015-10-09 23:12:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/20204bf3775160f8a0dec44620e29ffe44cccebc,20204bf3775160f8a0dec44620e29ffe44cccebc,"fix(intercom): Badge the intercom button, don't use safe-ipc"
bengotow,2015-10-09 22:57:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ba9431f0b816a8d8e29aa5ee185c7bd8d58541d,7ba9431f0b816a8d8e29aa5ee185c7bd8d58541d,revert(electron) 0.30.8 introduced a regression in --webkit-app-region: drag
emorikawa,2015-10-09 23:05:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/8755786d9064b4d1bf3b4b0d6724c17cb2751ad8,8755786d9064b4d1bf3b4b0d6724c17cb2751ad8,fix(theme): more consistent styles for dark-mode theme
emorikawa,2015-10-09 22:41:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0b0c14d037c38ac0d74079b8a544d9c9d0e9b6c,b0b0c14d037c38ac0d74079b8a544d9c9d0e9b6c,"fix(specs): Fix intermittent async error and max event listener leak

An absolute ContactStore spec was causing the listener leak by
re-initializing the store and not cleaning it up.

Intermittent theme manager failing spec might be caused due to timing of
the theme activation"
bengotow,2015-10-09 21:39:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/344930973e639f1779f6042a2cf3699fb90da2f2,344930973e639f1779f6042a2cf3699fb90da2f2,fix(specs): sanitize-html update seems to have caused regression
bengotow,2015-10-09 21:30:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ebb27cdfae08dc609a6ddf7ada37f405083a206,7ebb27cdfae08dc609a6ddf7ada37f405083a206,fix(contacts): Emails only valid if the entire string is the email. (Sentry 2991)
bengotow,2015-10-09 21:12:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/089e5b1c06252509125cbc890a608da735491add,089e5b1c06252509125cbc890a608da735491add,"fix(quoted-html): Fix null reference error, resolves Sentry 3264"
bengotow,2015-10-09 20:42:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/83f9f0e4ffa0bce863068043cf7e50d03bf5f30f,83f9f0e4ffa0bce863068043cf7e50d03bf5f30f,fix(specs): ContactStore spec fixes for new contact ranking support
bengotow,2015-10-09 20:23:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9308f1163ad27947e6906cff134f86c429a44a3,f9308f1163ad27947e6906cff134f86c429a44a3,rollback(*): Move back SQLite upgrade after crashing in popout drafts
dregitsky,2015-10-09 19:40:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/0332d7264e578eda73f836fab3dfa8bfe50c5b40,0332d7264e578eda73f836fab3dfa8bfe50c5b40,"fix(contacts): move contact rank fetching to sync workers, refactor

Summary:
Fixes bug where contact ranking was not being fetched, and refactors the refreshing
of contact ranks. Moves periodic refreshing of the database-stored ranks to the sync
workers so it occurs in the background, once per account. Refactors JSON cache code
accordingly.

Test Plan: manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2137"
bengotow,2015-10-09 17:41:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/7000c586459837bca72110c6510d9b3b72684e2c,7000c586459837bca72110c6510d9b3b72684e2c,"fix(contributing): Expand the instructions for running the stack on your own

Addresses several things brought up internally and in https://github.com/nylas/N1/pull/41"
bengotow,2015-10-09 17:23:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/05714ee19f258a6b2a6266de9b5fa99c65215f05,05714ee19f258a6b2a6266de9b5fa99c65215f05,"Merge pull request #52 from mbilker/fix-clean-script

Change atom to nylas in clean script"
emorikawa,2015-10-09 17:20:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/044f5223acdc989d68378aa69240f29df539986e,044f5223acdc989d68378aa69240f29df539986e,"Merge pull request #53 from mbilker/travis-update

Travis update"
emorikawa,2015-10-09 16:37:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/69e5b2ac9a2d5e827e29164088c8fc6be673274a,69e5b2ac9a2d5e827e29164088c8fc6be673274a,"Add ChaosMonkey to test misbehaving servers

Summary:
`ChaosMonkey.unleashOnAPI()` will by default cause all API requests to 500

`ChaosMonkey.unleashOnAPI(timeoutMonkey: true)` will cause all API requests
to SOCKETTIMEOUT

`ChaosMonkey.unleashOnAPI(numMonkeys: 10)` will cause the next 10 API
requests to 500

`ChaosMonkey.unleashOnAPI(errorCode: 401, numMonkeys: 10)` will cause the
next 10 API requests to 401.

It must be manually invoked from the console on each window you want the
Monkeys wrecking havok.

It is available on the `window` object as well

This was created to manually test our server failure cases.

Test Plan: manual

Reviewers: drew, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2133"
emorikawa,2015-10-09 16:31:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7aec14ca36c8541055d90d517f812109e326385,a7aec14ca36c8541055d90d517f812109e326385,"Fix contact ranking and add tests

Summary:
Contact ranking is now tested.

There was a bug whereby the RankingsJSONCache would only update in the
workerwindow. This regressed when Contact ranking moved exclusively into
the main window and separate composer windws requested rankings via ipc

Test Plan: New tests

Reviewers: drew, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2134"
emorikawa,2015-10-09 16:31:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb0a915bc2bba951f66d6ae2def8754aa97e288d,eb0a915bc2bba951f66d6ae2def8754aa97e288d,"Fix scrollability in expanded activity sidebar

Summary:
If your screen is narrow or you are syncing a lot of stuff, the expanded
activity sidebar had no scroll affordance

Test Plan: manual

Reviewers: drew, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2135"
bengotow,2015-10-09 02:02:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/215fa0e4cbc93e494a0ab35fdd7ff8afdcea5efb,215fa0e4cbc93e494a0ab35fdd7ff8afdcea5efb,"fix(initial-sync): When an error is encountered, do not start fetching from zero again

Summary:
Previously, when an error was encountered during initial mailbox sync we just started it
over after a retry delay. Recent API uptime issues mean that this was happening often and lots of
people were seeing sync retry many times. This is bad because the app is less performant while
it's syncing mail, and also generates unnecessary load as the app re-fetches threads it already has.

In this diff, there are new specs and functionality in nylas-sync-worker to start fetching
where we left off. This is typically going to be OK because the default sort ordering of the
threads endpoint is newest->oldest, so if new items have arrived since we started fetching
and page boundaries have changed, we'll get duplicate data rather than missing data. Connceting
to the streaming API as soon as we start the sync also ensures that we roll up any changes to
data we've already paginated over.

Test Plan: Run tests

Reviewers: drew, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2132"
mbilker,2015-10-08 02:54:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e8e3b6b97bf00529b3c1fec26bb5d7130b702ab,7e8e3b6b97bf00529b3c1fec26bb5d7130b702ab,fix(grunt): disable packaging under travis builds
mbilker,2015-10-08 02:52:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/67b0b5fd05a6f31057ac22f198f176a396a35e87,67b0b5fd05a6f31057ac22f198f176a396a35e87,"fix(travis): disable node 4 for now

throws errors everywhere regarding the compiler, nan, and node 4.1.2"
mbilker,2015-10-08 02:36:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca3d6d7e8613fa732e2cfee4c25d6c4204698bc1,ca3d6d7e8613fa732e2cfee4c25d6c4204698bc1,fix(travis): set compiler to clang
mbilker,2015-10-08 02:35:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/88be607b2c1854f4abb4b2117bb7c37f48e9c1ed,88be607b2c1854f4abb4b2117bb7c37f48e9c1ed,fix(build): disable codesign in travis builds
mbilker,2015-10-08 02:32:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf5dc7dbbbfa0d6bf679edfdb60c419a5279ef1d,cf5dc7dbbbfa0d6bf679edfdb60c419a5279ef1d,fix(whitespace): coffeelint line 19 ends with whitespace
mbilker,2015-10-08 02:26:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1b94d823995af3930ab21c68d3d93cacd237221,a1b94d823995af3930ab21c68d3d93cacd237221,"fix(travis): another new github access token

found out you cannot use personal access tokens
github disables them if they are found in a commit"
mbilker,2015-10-08 02:15:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4367647ace29f1a50bebc16461038514c7728ba,e4367647ace29f1a50bebc16461038514c7728ba,fix(travis): update github access token
mbilker,2015-10-08 01:59:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/d32d58d79083564143055b55e80004c88a05ef52,d32d58d79083564143055b55e80004c88a05ef52,fix(travis): add github access key
mbilker,2015-10-08 01:57:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/b968b4121046ce09887ec0b86a3a8bcbd6c95697,b968b4121046ce09887ec0b86a3a8bcbd6c95697,fix(grunt): change variable name for github access key
mbilker,2015-10-08 01:56:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b76da7d329718a14a9b3dfaf5890353aa309dcb,5b76da7d329718a14a9b3dfaf5890353aa309dcb,fix(travis): nvm does not like node 4 on osx
mbilker,2015-10-08 01:52:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/b03d2fd52a302dca3e68b817227066e87906a9ca,b03d2fd52a302dca3e68b817227066e87906a9ca,fix(travis): add required APT packages
mbilker,2015-10-08 01:51:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/af9dec17da09b7791023d9d8a26062b4f6de36e0,af9dec17da09b7791023d9d8a26062b4f6de36e0,fix(travis): switch to matrix build strategy
mbilker,2015-10-08 01:46:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/c641c6fbbe54f683e9a6baf04e5af52b247e41b2,c641c6fbbe54f683e9a6baf04e5af52b247e41b2,fix(travis): accidentally removed the language selection
mbilker,2015-10-08 01:42:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/cc07199c8f3d899a45d0358584e86a6f7680049d,cc07199c8f3d899a45d0358584e86a6f7680049d,fix(travis): Update travis script to run on multiple oses
mbilker,2015-10-08 01:34:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/3bc1151b0fbd9fda36b682fa658da6ae5673d875,3bc1151b0fbd9fda36b682fa658da6ae5673d875,refactor(code): change atom to nylas in clean script
emorikawa,2015-10-08 00:48:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a265a9a5ca8842bc7a623fd0a120e79069958e0,1a265a9a5ca8842bc7a623fd0a120e79069958e0,"Merge pull request #50 from lukegb/patch-1

fix(docs): correct SMPT->SMTP"
emorikawa,2015-10-08 00:28:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0e7769e94d22fa34530ceb39b7ef9fee0c4b25b,b0e7769e94d22fa34530ceb39b7ef9fee0c4b25b,"fix(developer): visual improvements to developer bar

Summary: Make ETIMEDOUT red

Test Plan: manual

Reviewers: bengotow, dillon

Reviewed By: dillon

Differential Revision: https://phab.nylas.com/D2126"
emorikawa,2015-10-08 00:18:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/55ff675f3746f040f279db71b1247fc061bc7f62,55ff675f3746f040f279db71b1247fc061bc7f62,"Update CONTRIBUTING.md and README.md to remove node requirement

No more warning message about needing Node v0.10. This got fixed :D

Adding more info about our commit guidelines."
emorikawa,2015-10-07 18:31:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/66e53710308386996775d1fb6e059127f771b381,66e53710308386996775d1fb6e059127f771b381,"Upgrade to Electron 0.30.8. Remove unsused packages. Upgrade deps

- Upgrade node-sqlite3 from patched 3.0.2 to mainline 3.1.0

- Upgrade Electron to 0.30.8: NOTE: This is the latest in the 0.30 line.
  The 0.31+ line did a Chrome upgrade that we want to save for a later
  day. We've had a history of serious instabilities with these upgrades
  and are doing them conservatively

- Upgrade coffee-script from 1.9.0 to 1.10.0

- Package updates in /build folder"
dregitsky,2015-10-07 20:55:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/09b91a0a28b987ce01bc5dc55c2b45cd3bbf5aa4,09b91a0a28b987ce01bc5dc55c2b45cd3bbf5aa4,"feature(feedback): move feedback to a package, indicator for new msgs

Summary: Move all Intercom feedback code to a package. Change the appearance of the lower right question mark icon when a new intercom message is received (red, with repeating CSS bounce animation). New messages are detected by keeping the intercom window open (after the first time it's opened by the user), and listening for DOM mutations of particular classes.

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: evan

Differential Revision: https://phab.nylas.com/D2125"
lukegb,2015-10-07 20:54:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/2de31790e9e66962304489b6a9180c8ba61bc252,2de31790e9e66962304489b6a9180c8ba61bc252,fix(docs): correct SMPT->SMTP
bengotow,2015-10-07 18:45:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/7148c70e6194202cf98e959df12c57c59c2b0ea0,7148c70e6194202cf98e959df12c57c59c2b0ea0,fix(send-availability): Make the package load into popout composers
emorikawa,2015-10-07 17:55:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb264ef365ac345029acde5faffe08717d0d4ed3,fb264ef365ac345029acde5faffe08717d0d4ed3,"Merge pull request #49 from mbilker/node-v4

Compile on Node 4.x and 0.12"
emorikawa,2015-10-07 17:55:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/86f76b9e9486bae068484d15d41b28ee0cc8722b,86f76b9e9486bae068484d15d41b28ee0cc8722b,"Merge pull request #16 from sbstnmsch/feature-travis-ci

Add basic travis-ci integration"
dillonforrest,2015-10-07 17:40:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd398e1d4f2119221521747a5552d7a3016c7806,dd398e1d4f2119221521747a5552d7a3016c7806,"Merge pull request #30 from gardner/master

Adding node version information to build/README.md"
dillonforrest,2015-10-07 17:38:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/48cdf86f97f5ef4a617a819478bef0252c8411db,48cdf86f97f5ef4a617a819478bef0252c8411db,"Merge pull request #31 from malonehedges/patch-1

Fix little typo"
dillonforrest,2015-10-07 17:36:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/b94da7add775302491bfd7beadfc744e69d879aa,b94da7add775302491bfd7beadfc744e69d879aa,"Merge pull request #43 from boffbowsh/patch-1

Fix a couple of typos and a syntax error"
bengotow,2015-10-07 17:19:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/14c5160a6dffc7a541208998f7790e0d3b259ccf,14c5160a6dffc7a541208998f7790e0d3b259ccf,bump(version): 0.3.15
mbilker,2015-10-07 03:41:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/0edbf515fdcd7abca4a15ef5d7703d41b9bd8c34,0edbf515fdcd7abca4a15ef5d7703d41b9bd8c34,Use npm's packaged node-gyp and combine configure and rebuild gyp steps
mbilker,2015-10-07 03:40:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9f45b07767918d84d3fb1ba9aeba82cd1cd00f9,a9f45b07767918d84d3fb1ba9aeba82cd1cd00f9,"Target node version used by APM 1.1.1 and Electron 0.30.7

node-gyp header layout change in node v4, causes package builds to fail.

This change forces node-gyp to download the correct version of node so
native extensions can be built."
mbilker,2015-10-07 03:36:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e78f081d219604408617e1fe6237fad5aeec4d68,e78f081d219604408617e1fe6237fad5aeec4d68,"Update build packages to allow building with node v4.1.2
coffee-lint-cjsx added to account for ignored peer dependencies in
npm 3+"
mbilker,2015-10-07 03:35:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/1136319aea9c853b38f6d435a8ad9c36d1ea3168,1136319aea9c853b38f6d435a8ad9c36d1ea3168,"Update APM to 1.1.1
This is the latest version of APM at this time and is already in use
by the Atom editor."
mbilker,2015-10-07 03:34:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecbb12ebef7996d3c250983237142921fd1f8961,ecbb12ebef7996d3c250983237142921fd1f8961,Change Electron version to 0.30.7
brettgerry,2015-10-07 02:05:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/4bd8c371812f16aca3ba62b7179918508cd5523e,4bd8c371812f16aca3ba62b7179918508cd5523e,"add more info on running against local sync engine

Test Plan: doc only change

Reviewers: evan, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2119"
bengotow,2015-10-07 00:55:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a2ddb67d576373bd668eca576940d76fca2493b,5a2ddb67d576373bd668eca576940d76fca2493b,fix(auth): Resize the auth window after an update to the token status
bengotow,2015-10-06 22:32:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ed1256fd1bbb92f3f53ebcf9449ddf84f62ed9e,3ed1256fd1bbb92f3f53ebcf9449ddf84f62ed9e,fix(atom): Never allow the window to be set to fractional sizes
bengotow,2015-10-06 21:31:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/a96760dbd3696f6f0653449862a3fb2821bbc06f,a96760dbd3696f6f0653449862a3fb2821bbc06f,fix(docs): Include a note about script/build in CONTRIBUTING.md
bengotow,2015-10-06 21:28:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/b06ff301793a0bfd4aa211d95ebfe84d4b4e782f,b06ff301793a0bfd4aa211d95ebfe84d4b4e782f,fix(docs): Add a note about our public Trello board
boffbowsh,2015-10-06 21:26:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/51201fbc3026219a57383d348f7d7e55c4b26670,51201fbc3026219a57383d348f7d7e55c4b26670,Fix a couple of typos and a syntax error
bengotow,2015-10-06 18:51:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ade3ea25328d82960f54738c3ba58b13daa5d92,1ade3ea25328d82960f54738c3ba58b13daa5d92,fix(docs): Add a note about building with Node 0.10.x
malonehedges,2015-10-06 07:10:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/403dbd5d5cfd0b69c3c51712c31db3df779be4c9,403dbd5d5cfd0b69c3c51712c31db3df779be4c9,Fix little typo
bengotow,2015-10-06 00:57:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/3896473e3b50b42512e0b3386c70143048251faf,3896473e3b50b42512e0b3386c70143048251faf,"fix(attachments): When downloads fail, don't resolve to chained actions

Summary: Fixes Sentry 3319 and 3303

Test Plan: Run three new tests

Reviewers: dillon, evan

Reviewed By: dillon, evan

Differential Revision: https://phab.nylas.com/D2118"
bengotow,2015-10-06 00:55:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/355751973eec202002232ad2c2df0b11f8a1eacc,355751973eec202002232ad2c2df0b11f8a1eacc,fix(window-size): Don't set size to decimal numbers
bengotow,2015-10-05 21:40:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/45b654ae74a8abce121e34c4a264b8bc2b255f05,45b654ae74a8abce121e34c4a264b8bc2b255f05,fix(Sentry 3228): Bad math sending an incomplete bounds struct to Electron
dregitsky,2015-10-06 00:31:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/62fb7087972e79245c7ee0c59a975829bdea9ded,62fb7087972e79245c7ee0c59a975829bdea9ded,"fix(onboarding): fix error handling for invalid account data from server

Summary:
Change `addAccountFromJSON` in `AccountStore` to throw an exception when it encounters
invalid data, instead of calling `atom.emitError()`. Just calling `emitError` doesn't
throw an exception, so the code proceeds as if an account has been added. Instead, call
`emitError` from AccountSettingsPage, and display an error message to the user.

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: evan

Differential Revision: https://phab.nylas.com/D2116"
bengotow,2015-10-05 23:22:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b38ca54b45000e3c7df8c82c2b28c0177e57598b,b38ca54b45000e3c7df8c82c2b28c0177e57598b,fix(specs): Clean up spec failures due to hot fixes prior to launch
sbstnmsch,2015-10-05 22:00:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ac46205071bb134432f16167dc736a3f2e2f9cb,7ac46205071bb134432f16167dc736a3f2e2f9cb,Merge branch 'feature-travis-ci' of github.com:sbstnmsch/N1 into feature-travis-ci
sbstnmsch,2015-10-05 20:28:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/71b66b0c6b5bebb8e28da92a5775d48e0bbeafec,71b66b0c6b5bebb8e28da92a5775d48e0bbeafec,Add basic travis-ci integration
sbstnmsch,2015-10-05 21:51:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/7aa9ac5f18497e623fe7083ec705180ca0474647,7aa9ac5f18497e623fe7083ec705180ca0474647,Add node 10 as default build
sbstnmsch,2015-10-05 20:28:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee3276aaf6ad98f04a30284d683a72eedd2e6fa6,ee3276aaf6ad98f04a30284d683a72eedd2e6fa6,Add basic travis-ci integration
emorikawa,2015-10-05 18:26:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/28a88c767289ffd1b98b98cedab427153d14cc74,28a88c767289ffd1b98b98cedab427153d14cc74,copy(contributing): example config
emorikawa,2015-10-05 18:24:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f5393c1a89265a85c07e231dbd876e3914fdcd4,2f5393c1a89265a85c07e231dbd876e3914fdcd4,copy(contributing): instructions for open source sync engine
grinich,2015-10-05 12:08:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/1772a43878660b7f44e00126a58d2dee0835668d,1772a43878660b7f44e00126a58d2dee0835668d,actually no more gh-pages
grinich,2015-10-05 12:04:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/e40fe38e06f5b714fb50982e403af38a07c09c92,e40fe38e06f5b714fb50982e403af38a07c09c92,link
grinich,2015-10-05 12:03:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/895d6f42e0be50dd2a53b1bfe6996745f874ae99,895d6f42e0be50dd2a53b1bfe6996745f874ae99,no more github pages
spang,2015-10-05 10:48:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/86b6cee8945ada77dda1b286f7bc05f39be1d205,86b6cee8945ada77dda1b286f7bc05f39be1d205,Fix default mail client detection on Linux.
bengotow,2015-10-05 10:39:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/e04c79cfc7218446d48e82f2fcbddced35620abc,e04c79cfc7218446d48e82f2fcbddced35620abc,bump(version): 0.3.14
bengotow,2015-10-05 10:34:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/90db7588636b545914f41db25323f4132e5dc766,90db7588636b545914f41db25323f4132e5dc766,fix(auth): Rename edgehill.token => invitationCode in config
bengotow,2015-10-05 10:27:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a891ba8c66bd1c371f9b5c50ace6d999ce68bad,0a891ba8c66bd1c371f9b5c50ace6d999ce68bad,fix(auth): Merge but temporarily disable encrpytion during Gmail Oauth
bengotow,2015-10-05 09:01:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1b4596bbe996e73cc5fc4c73852b66a5fc7f613,c1b4596bbe996e73cc5fc4c73852b66a5fc7f613,"fix(onboarding): Packages => plugins, at least in the text"
emorikawa,2015-10-05 08:49:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b1be6a8a8ffb3e6b3b2b1f2205b843c49de0c4c,9b1be6a8a8ffb3e6b3b2b1f2205b843c49de0c4c,fix(account): error reporter returns an error
bengotow,2015-10-05 08:47:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/7aaa676672f23ea57d0bcd20d793f651466c1036,7aaa676672f23ea57d0bcd20d793f651466c1036,Update README.md
emorikawa,2015-10-05 07:38:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/d09d292382e8fd32ab2ad9912572339dedb44404,d09d292382e8fd32ab2ad9912572339dedb44404,fix(styles): padding fixes
spang,2015-10-05 06:19:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d4af3989adffb1f009adf275d0349545cdfdb56,4d4af3989adffb1f009adf275d0349545cdfdb56,Cull list of ubuntu releases to currently supported ones
spang,2015-10-05 05:12:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/c8818c3c191e410734f9ff855fc15ef760cb9aa7,c8818c3c191e410734f9ff855fc15ef760cb9aa7,Also remove /usr/bin/apm symlink in install task.
spang,2015-10-05 03:13:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/07813265521f1a518eebc8314b6e13cef983a692,07813265521f1a518eebc8314b6e13cef983a692,"Don't symlink /usr/bin/apm on Linux and Mac.

This makes us conflict with the official 'atom' Linux package. No bueno.
Doesn't really make sense for us to install this system-wide on Mac
either.

Fixes T3713."
spang,2015-10-05 02:39:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/1978d1db9e4bf6e348656f2c0352cd2e78245726,1978d1db9e4bf6e348656f2c0352cd2e78245726,Merge branch 'debian-autoupdate'
spang,2015-10-05 02:36:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc969b1daed0c4f4c273e0efcc1fd54605a344a1,bc969b1daed0c4f4c273e0efcc1fd54605a344a1,Install package repo for autoupdates in Debian packages.
spang,2015-10-05 02:38:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/4654c63bbe0e8cf3ea1473aff7d5e0698cacd67c,4654c63bbe0e8cf3ea1473aff7d5e0698cacd67c,Update descriptions in package.json
spang,2015-10-05 02:38:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/879ff1e98f64aef22373f6a369e9ed80da4e6fae,879ff1e98f64aef22373f6a369e9ed80da4e6fae,Update Debian package long description
spang,2015-10-05 02:38:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8f351ad3f36efa40175514252a0bab12f6a9317,e8f351ad3f36efa40175514252a0bab12f6a9317,Fix typo.
bengotow,2015-10-04 23:57:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/cef0933d0c6f337bebd2543e537b8d8d47a28588,cef0933d0c6f337bebd2543e537b8d8d47a28588,disable(events): Turn off the events package until it can be polished
bengotow,2015-10-04 23:53:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/b139556409f9f1e54c5bc4ec9c57541742a3cb21,b139556409f9f1e54c5bc4ec9c57541742a3cb21,fix(lint): Indentation causing linter failures
bengotow,2015-10-04 23:49:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/467955dc2c627fa3ed916c6bca9f7beeffdb3ba5,467955dc2c627fa3ed916c6bca9f7beeffdb3ba5,"fix(onboarding): Invitation code system, just in case

commit 64938016f6ffbf366a220e7abd9af6f7a4cb478b
Author: Ben Gotow <bengotow@gmail.com>
Date:   Sun Oct 4 16:42:38 2015 -0700

    Don't allow people to double click the token check button, make requests take at least 400msec

commit e548f3ee449c676a813c5630f1624963872ed6e6
Merge: 3350b91 e4b4933
Author: Ben Gotow <bengotow@gmail.com>
Date:   Sun Oct 4 16:39:56 2015 -0700

    Merge branch 'token-auth' of github.com:nylas/N1 into token-auth

    # Conflicts:
    #	internal_packages/onboarding/lib/token-auth-page.cjsx

commit 3350b917449c29299fa078d59a4a5a9339fdf29b
Author: Ben Gotow <bengotow@gmail.com>
Date:   Sun Oct 4 16:38:52 2015 -0700

    Improve a few error states, adding ""checking"" state when checking token

commit e4b49334cbf59145d9bdd955d35636f16a7c4924
Author: EthanBlackburn <ethan@nylas.com>
Date:   Sun Oct 4 16:21:39 2015 -0700

    Correct retry behavior

commit 11cd9a75b2a1ca0f4347160df93815743909ccea
Author: EthanBlackburn <ethan@nylas.com>
Date:   Sat Oct 3 18:06:55 2015 -0700

    Removed old auth token variable

commit afe451cd70de528def3443d8b373fd24f4aa5cde
Author: EthanBlackburn <ethan@nylas.com>
Date:   Sat Oct 3 16:08:12 2015 -0700

    Added token auth page"
emorikawa,2015-10-04 23:33:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/11086761ddcdd376c0bc25b4a3c906de94841067,11086761ddcdd376c0bc25b4a3c906de94841067,fix(account): change default user for data import
spang,2015-10-04 19:27:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/22eb225105c3c745b523e9ff2117a98e19e6294d,22eb225105c3c745b523e9ff2117a98e19e6294d,Properly exit out of N1.sh if script/bootstrap hasn't been run yet.
bengotow,2015-10-04 07:54:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/155af462a93fdfa6790006e4d86e47131000e74c,155af462a93fdfa6790006e4d86e47131000e74c,fix(timeouts): Wait 5 mintues before hanging up /send
bengotow,2015-10-04 07:43:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/063c2098c321674b718d211a55bb80025b95f874,063c2098c321674b718d211a55bb80025b95f874,bump(version): 0.3.13
bengotow,2015-10-04 07:42:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/481346497854accb123c14f09546928e7b87ce7d,481346497854accb123c14f09546928e7b87ce7d,"fix(readmes): Add ""Install this plugin"" bits to the plugin READMEs"
bengotow,2015-10-04 07:22:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe068355402c58bcbe3b7fdd1d59d00050e6d98b,fe068355402c58bcbe3b7fdd1d59d00050e6d98b,fix(notifications): Add a purple tint color for developer notification
bengotow,2015-10-04 07:19:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/4539cf2e24a9af8ed3c9cf8155e021c387185637,4539cf2e24a9af8ed3c9cf8155e021c387185637,fix(account-switcher): Switcher should not be part of the scroll region in the sidebar
bengotow,2015-10-04 06:53:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/308c70f53d23fd9d78864aad6cb17eb7f24fec7d,308c70f53d23fd9d78864aad6cb17eb7f24fec7d,fix(sync): Request all labels / folders to avoid paging and missing inbox
bengotow,2015-10-04 06:34:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/84c8e2f99d5fcc58e44d6da0d95b0fe86e706696,84c8e2f99d5fcc58e44d6da0d95b0fe86e706696,"fix(icons): New artwork for a few initial packages, labels"
bengotow,2015-10-04 06:00:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/c25a3c7ea08e0f74555fcd90f436bb2ec1a752a2,c25a3c7ea08e0f74555fcd90f436bb2ec1a752a2,fix(sidebar): Make the sidebar labels slightly smaller
bengotow,2015-10-04 05:34:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3b94c4304bfa3f9cc4d99817d4f96b884c25715,b3b94c4304bfa3f9cc4d99817d4f96b884c25715,"fix(name): ""Nylas"" => ""Nylas N1"" on Mac, Linux"
bengotow,2015-10-04 05:22:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a2d10d3bdf2906710f72629290053abb9836c8e,8a2d10d3bdf2906710f72629290053abb9836c8e,"fix(feedback): Change default window position, move handling to main window, hide close buttons in Intercom"
emfree,2015-10-04 05:05:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/01652ffb24e08c7977fa228c9b1a50471ec40a8c,01652ffb24e08c7977fa228c9b1a50471ec40a8c,"feat(feedback): intercom for feedback

Summary:
Caveat: If you submit feedback from one account, and then switch accounts and
submit feedback again, the data from the old account still gets passed. It
looks like that was true with the previous compose-a-draft-with-feedback action
too. Maybe you know how to fix this? I couldn't figure it out.

Test Plan: Try it out! Not sure how to usefully write specs.

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2106"
bengotow,2015-10-04 04:16:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd7897b149ad437f26abf29d91380847f0ef9c18,fd7897b149ad437f26abf29d91380847f0ef9c18,bump(version): 0.3.12
bengotow,2015-10-04 04:16:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/5555554b306f2f9afd449797e1bb4339a7e7a11f,5555554b306f2f9afd449797e1bb4339a7e7a11f,feat(icon): Finalized icon
bengotow,2015-10-04 02:09:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/b79680f9cc314f5d9752d340ac95944efbaec440,b79680f9cc314f5d9752d340ac95944efbaec440,fix(install-package): Point to the examples directory by default
bengotow,2015-10-04 02:04:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/31c7a330bf0d22d6ba23c01549d7cd2e96ab5788,31c7a330bf0d22d6ba23c01549d7cd2e96ab5788,"feat(dev-mode): Toggle dev mode, sticky through restarts"
bengotow,2015-10-04 01:11:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/f3e60c4d9a4419e30c6c4d0009a290790f6ef41a,f3e60c4d9a4419e30c6c4d0009a290790f6ef41a,"fix(registered-region): Fix ""show component regions"" hiding composer white border"
bengotow,2015-10-04 01:11:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/cff7f8834ee9c943d5fa69e5646efef835c383c1,cff7f8834ee9c943d5fa69e5646efef835c383c1,feat(plugins): Restore the plugins sidebar view
bengotow,2015-10-03 21:45:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/db1eae59431bba52a602816295a9b2ee7422eb7d,db1eae59431bba52a602816295a9b2ee7422eb7d,fix(updater): Send UUID and email accounts to enable more specific update distribution
bengotow,2015-10-03 21:05:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a1ebd7d3054196353c5210326dc5c48aad59260,0a1ebd7d3054196353c5210326dc5c48aad59260,feat(templates): Final examples package is in - templates!
bengotow,2015-10-03 19:05:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/81bbebcd54b233f2d69ed37b917476ca31821161,81bbebcd54b233f2d69ed37b917476ca31821161,feat(test-data): AccountStore feature to load test data
emorikawa,2015-10-03 01:52:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/e04f88268b193d41851eb42a049d5633a911973f,e04f88268b193d41851eb42a049d5633a911973f,copy(readme): bump image
emorikawa,2015-10-03 01:48:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a339e7d8ee9303bf9a17b38fee154f1bd0b8d56,6a339e7d8ee9303bf9a17b38fee154f1bd0b8d56,copy(readme): update links in readme
emorikawa,2015-10-03 01:43:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d20e272eee3a85f160a09769ecfc78bf649ccca,3d20e272eee3a85f160a09769ecfc78bf649ccca,fix(specs): specs run clean
emorikawa,2015-10-03 00:47:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e41843fa46dabf0c852eeaf0515c4134839621e,9e41843fa46dabf0c852eeaf0515c4134839621e,fix(styles): fix fonts in settings and iframe
bengotow,2015-10-03 00:17:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/769c10f42e25d1970cb4b6f1e119a8d3567af7ba,769c10f42e25d1970cb4b6f1e119a8d3567af7ba,bump(version): 0.3.11
emorikawa,2015-10-03 00:14:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/71e90d2a6198888fadc64d4fab35b4975c00f018,71e90d2a6198888fadc64d4fab35b4975c00f018,"fix(composer): composer doesn't jump with attachments

Summary: Fixes T3778

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Projects: #edgehill

Maniphest Tasks: T3778

Differential Revision: https://phab.nylas.com/D2102"
emorikawa,2015-10-03 00:10:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/609b6107f9fbbc47d28939245eda8051de8598d9,609b6107f9fbbc47d28939245eda8051de8598d9,"feat(auth): add disabled state to forms when submitting

Summary: Fixes T3773

Test Plan: manual

Reviewers: drew, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3773

Differential Revision: https://phab.nylas.com/D2105"
emorikawa,2015-10-03 00:04:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/39266026d1d8b1adf3383f114cd7c1e522f768e0,39266026d1d8b1adf3383f114cd7c1e522f768e0,"fix(sounds): make sounds listen to config options

Summary: Fixes T3887

Test Plan: new specs

Reviewers: bengotow

Reviewed By: bengotow

Projects: #edgehill

Maniphest Tasks: T3887

Differential Revision: https://phab.nylas.com/D2104"
dregitsky,2015-10-02 23:51:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/27c594f13f6311f65f58b04921cd7a22615b4f2e,27c594f13f6311f65f58b04921cd7a22615b4f2e,fix(onboarding): fix chrome render bug on startup
emorikawa,2015-10-02 23:25:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f06220b8d044c943a9b730f82d12b653d43741d,7f06220b8d044c943a9b730f82d12b653d43741d,fix(scroll): better check for scrollTo in multiselect list
dregitsky,2015-10-02 23:12:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a3294f10082bdf71c75c7745c95d65635c20a14,1a3294f10082bdf71c75c7745c95d65635c20a14,"feat(onboarding): add hotmail as a provider

Summary:
Adds a button for hotmail/outlook as a provider. Username field is not
shown is set to the email address for submitting to Nylas.

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: evan

Differential Revision: https://phab.nylas.com/D2095"
bengotow,2015-10-02 23:09:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/82f51ce68aad6129b721071e44977f114f777cf4,82f51ce68aad6129b721071e44977f114f777cf4,fix(docs): Push examples to the correct /examples URL
dregitsky,2015-10-02 22:34:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/05ed20e539b41b69585804de0f933b1daef7a323,05ed20e539b41b69585804de0f933b1daef7a323,"fix(welcome): small ui tweaks in welcome/onboarding

Summary: Change the white logo to have an inner shadow, and set to PreserveContent. Fix typo in welcome page. Tweak some text opacity for readability.

Test Plan: manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Subscribers: bengotow

Differential Revision: https://phab.nylas.com/D2090"
dregitsky,2015-10-02 22:32:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d799b64e86d092dd2f46c4d2e3ed8cb012ece9f,7d799b64e86d092dd2f46c4d2e3ed8cb012ece9f,"fix(onboarding): fix IMAP port fields, enter key behavior

Summary:
Fix issue where ports were being stored as strings - add a format field for
account settings that turns on casting to int when set to `integer`.

Change behavior of pressing enter - rather than always submitting, have it
move to the next page on multi-page account settings.

Test Plan: manual

Reviewers: evan, bengotow

Reviewed By: bengotow

Subscribers: bengotow

Differential Revision: https://phab.nylas.com/D2094"
bengotow,2015-10-02 22:31:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/88fdfd9a775a22219172cfeff7bf599bd55f7f70,88fdfd9a775a22219172cfeff7bf599bd55f7f70,fix(specs): Fix specs for environment config
bengotow,2015-10-02 22:01:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5a5cdd4eb2190325488f80038280a635900a56d,d5a5cdd4eb2190325488f80038280a635900a56d,switch(env): Move N1 to Nylas production API
emorikawa,2015-10-02 20:24:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c9e591924e8f7bfd6ed6d47f5deaa20c300f5e2,7c9e591924e8f7bfd6ed6d47f5deaa20c300f5e2,copy(readme): update readmes
emorikawa,2015-10-02 20:04:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b2e47fbe3158f4d6b4939e720454eee9d91e76a,2b2e47fbe3158f4d6b4939e720454eee9d91e76a,copy(readme): update readme
emorikawa,2015-10-02 18:50:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb71127010d230e130e86b0b6d216da825e97caa,fb71127010d230e130e86b0b6d216da825e97caa,refactor(n1): Update N1.sh to use N1_PATH instead of EDGEHILL_PATH
emorikawa,2015-10-02 18:36:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/31125cf6990d2f0378ea33b73ba68801addf2c9f,31125cf6990d2f0378ea33b73ba68801addf2c9f,refactor(n1): change launch script to N1.sh
emorikawa,2015-10-02 18:26:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/5ccc268ebc1ef4096cdb383157ce7dbda950e457,5ccc268ebc1ef4096cdb383157ce7dbda950e457,copy(readme): Update Readme
bengotow,2015-10-02 17:54:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2c697754ad692e6a54629ffd93883dda79b0d78,a2c697754ad692e6a54629ffd93883dda79b0d78,fix(docs): Moving to use jekyll on gh-pages
emorikawa,2015-10-02 04:44:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/009f07dd2a844fc9b5b72883267004014dbe1f80,009f07dd2a844fc9b5b72883267004014dbe1f80,"refactor(dir): move exports to src/global and consolidate tests

Summary:
This:

1. Moves spec-nylas into spec
1. Gets rid of old & irrelevant specs
1. Moves the `vendor` folder (jasmine libs) into the `spec` folder
1. Moves the `exports` folder to `src/global` and updates all references

I pretty extensively made sure the client still works and that all of the
tests pass. The changes should have no effect.

Test Plan: All tests pass!

Reviewers: bengotow, dillon

Differential Revision: https://phab.nylas.com/D2098"
emorikawa,2015-10-02 04:39:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/137e09eb510f2c9f989e7813fd177edf99442b94,137e09eb510f2c9f989e7813fd177edf99442b94,refactor(spec) move spec-nylas to spec
emorikawa,2015-10-02 04:23:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/8872a024051cd20cd0b0869bbd1d068d0bb4d7c2,8872a024051cd20cd0b0869bbd1d068d0bb4d7c2,refactor(exports): move exports to src/global
emorikawa,2015-10-02 02:24:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/339ce4395aabf3a67dc89bb25ed29f4688f09933,339ce4395aabf3a67dc89bb25ed29f4688f09933,feat(sounds): add new sound registry
emorikawa,2015-10-02 00:54:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/85eb94b90f4d1f705bf33a3f58c650a540467e9c,85eb94b90f4d1f705bf33a3f58c650a540467e9c,fix(fonts): update fonts and styles
bengotow,2015-10-01 23:20:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1d337ddd419444ee2436a9d94b80146a8473bc4,e1d337ddd419444ee2436a9d94b80146a8473bc4,fix(send): Don't put a tooltip on the very obvious send button
bengotow,2015-10-01 20:19:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/a1d4e6e729acfffd9613cd707e1a1e3d6be104c8,a1d4e6e729acfffd9613cd707e1a1e3d6be104c8,fix(docs): Updating docs (round 1 of many)
emorikawa,2015-10-01 18:48:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/25103c1b1000daa1440fbe4039f2347aac6319a3,25103c1b1000daa1440fbe4039f2347aac6319a3,fix(fonts): update fonts
emorikawa,2015-10-01 17:23:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/f60b844276bf9b7f0984094bb31c01bc7e2c9724,f60b844276bf9b7f0984094bb31c01bc7e2c9724,meta(license): Add GPLv3 License
emorikawa,2015-10-01 16:58:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/c307dd3040e8fb5e33739239c90ec249b5b1d809,c307dd3040e8fb5e33739239c90ec249b5b1d809,refactor(docs): move docs-templates into docs
emorikawa,2015-10-01 16:35:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd91c38010665333825a9ec2870f49a952a50dae,dd91c38010665333825a9ec2870f49a952a50dae,fix(*): fix references and remove cruft
emorikawa,2015-10-01 02:51:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae69790024696831ba58789961814b1d3bbed966,ae69790024696831ba58789961814b1d3bbed966,"feat(archive): shows trash for non-archive accounts

Summary:
Fixes T3570
Fixes T3737

Rename ArchiveThreadHelper to RemoveThreadHelper

Rename of `getRemovalTask`

Remove unarchive from `RemoveThreadHelper`. Pass in mailviewfilter

Rename actions

Rename archive action

renmaing

support trash and archive folders in RemoveThreadHelper

Move everything over to trash

add tests

Hide trash and archive

Test Plan: new tests

Reviewers: dillon, bengotow

Reviewed By: dillon, bengotow

Maniphest Tasks: T3570, T3737

Differential Revision: https://phab.nylas.com/D2089"
bengotow,2015-09-30 22:13:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe077d42859e0c08c62298ba3dae71083396efc3,fe077d42859e0c08c62298ba3dae71083396efc3,fix(thread-list): Recompute visible region after window resize
bengotow,2015-09-30 22:01:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/dccffe9acb240f95c22182a076af5dcc8f0d7f7e,dccffe9acb240f95c22182a076af5dcc8f0d7f7e,bump(version): 0.3.10
bengotow,2015-09-30 21:59:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/4db5307c5f9a365253821637428d451d3e77574f,4db5307c5f9a365253821637428d451d3e77574f,perf(toolbar): Remove rather than hide message toolbar items (incl. category picker)
dregitsky,2015-09-30 21:36:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/d931862bcdabeeaf8996934cde75ef7ca13d04f5,d931862bcdabeeaf8996934cde75ef7ca13d04f5,"fix(composer): Change text color of collapsed recipients

Change the color to be regular text, instead of the same color as
placeholder text."
bengotow,2015-09-30 21:28:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/f77d4e6875d7e1307d7c40a1820c08d9922748a6,f77d4e6875d7e1307d7c40a1820c08d9922748a6,fix(mailto): Correct mailto handling when link has `&` instead of first `?`
bengotow,2015-09-30 21:09:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/174d4ecdc1fa391860bcdbab6c32a554b51cb39d,174d4ecdc1fa391860bcdbab6c32a554b51cb39d,"fix(task-queue): After restoring the queue at launch, start processing tasks"
bengotow,2015-09-30 21:09:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/0818af0279cb304352665d4e0e74e25ae531abec,0818af0279cb304352665d4e0e74e25ae531abec,fix(change-mail): Fix performRemote never resolving if no threads or messages to process
bengotow,2015-09-30 20:57:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/95e0b0fdd9d0aa6141db022f2ad8f617039f8304,95e0b0fdd9d0aa6141db022f2ad8f617039f8304,perf(thread-list): Avoid recomputing column contents when item prop has not changed
bengotow,2015-09-30 19:29:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/44a235eb6f99579b25feed61440d2a7d109ddbd2,44a235eb6f99579b25feed61440d2a7d109ddbd2,fix(account-switcher): Add Account > Manage Accounts
bengotow,2015-09-30 19:07:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff9b25220ef55ff7363533193366f3ea625ee18f,ff9b25220ef55ff7363533193366f3ea625ee18f,fix(category-picker): Better styles for long labels/folders
bengotow,2015-09-30 18:58:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/56374a6966fdca41b20ee1c8a549a5cdb1b8362e,56374a6966fdca41b20ee1c8a549a5cdb1b8362e,"fix(auth): Allow enter/return to submit account settings form, animate button"
bengotow,2015-09-30 18:44:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/f526f79ddef8f15c28cc1b345357a8e6a61f1bb4,f526f79ddef8f15c28cc1b345357a8e6a61f1bb4,fix(s3): Content-Disposition => ContentDisposition
bengotow,2015-09-30 18:43:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/93e29d01d802dd204efb79dfc002a3a2f9f47930,93e29d01d802dd204efb79dfc002a3a2f9f47930,"fix(initial-packages): Pull from examples directory, include in ci builds"
emorikawa,2015-09-30 17:47:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/fccdb8792ef2a1b3314482b99f4cde1dd0d70a2a,fccdb8792ef2a1b3314482b99f4cde1dd0d70a2a,"feat(sync): request a smaller page size initially

Summary:
Check out:
https://docs.google.com/a/nylas.com/spreadsheets/d/1XdhBYi83cyRSLM1GYwPFp0neOl4jN_5BmDm5lWH77q0/edit?usp=sharing

Also work window loads immediately after we have account credentials

Test Plan: new tests

Reviewers: dillon, bengotow

Reviewed By: dillon, bengotow

Differential Revision: https://phab.nylas.com/D2083"
emorikawa,2015-09-30 17:12:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1c58822df8ed3e4ea07e97960a16950de9662f8,d1c58822df8ed3e4ea07e97960a16950de9662f8,"fix(account): select account after load

Summary:
It wasn't selecting the account after you added it

Fixes T3569

Test Plan: new tests

Reviewers: dillon, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3569

Differential Revision: https://phab.nylas.com/D2085"
bengotow,2015-09-30 16:54:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/f44f84a583d5c826c34aacd30b7a5fd457e4a516,f44f84a583d5c826c34aacd30b7a5fd457e4a516,"fix(task-counts): In the activity box, show ""Moving to folder... (4) = threads not task counts

Test Plan: Run tests

Reviewers: dillon, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2087"
bengotow,2015-09-30 07:35:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e300015b5142a5f6e1273c265f6a75146d8af03,4e300015b5142a5f6e1273c265f6a75146d8af03,fix(react-keys): ActivitySidebar had a few missing component keys
bengotow,2015-09-30 06:58:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/76cb33b3f6a3dc0b16ecf735328bdaf6625a917b,76cb33b3f6a3dc0b16ecf735328bdaf6625a917b,"feat(post-auth): Initial prefs + packages screens, welcome copy changes

Summary:
Package names must match directory names

Not going to use new Swithc component, but might as well be part of component kit

Move APMWrapper into core so it can be used from anywhere

Move manual package install coe to package-manager

Gray out window titles when in the background

Do not allow multiple onboarding windows at the same time

Finalize styling f initial-prefs and initial-packages, make it work (only github package atm)

Other nits

Change the welcome copy:

- Call it easy to extend vs easy to use
- Remove the subtitle from the first screen which doesn't really fit
- Make the second page emphasize that its created /for/ developers and easy to extend with Javascript.
- Explain what the sync engine is rather than saying it's ""faster and more extensible"" (??)

Test Plan: Run tests

Reviewers: evan, dillon

Reviewed By: evan

Maniphest Tasks: T3346

Differential Revision: https://phab.nylas.com/D2079"
bengotow,2015-09-30 06:20:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/e9879a5495313cc328ea04a3bfc217c132f136b6,e9879a5495313cc328ea04a3bfc217c132f136b6,"feat(feedback): Add blue feedback button in bottom left, remove dead code from DeveloperBarStore

Summary: Adds a prominent blue button to email us feedback

Test Plan: Run tests

Reviewers: dillon, evan

Reviewed By: dillon, evan

Differential Revision: https://phab.nylas.com/D2081"
bengotow,2015-09-30 00:22:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b98937ed42a4b881717c957653f8aefb10c18c8,9b98937ed42a4b881717c957653f8aefb10c18c8,fix(publish): Send content disposition with S3 files
bengotow,2015-09-29 19:14:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/d821eded896ffd0ea47672501dcbad87dbb278c9,d821eded896ffd0ea47672501dcbad87dbb278c9,fix(drafts): Fix syncback issue caused by bad Account database query
bengotow,2015-09-29 17:15:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/ddb19420fa042236c7b013ed886eb4fee7be2f0a,ddb19420fa042236c7b013ed886eb4fee7be2f0a,fix(composer): Do not unregister composer hot windows when a composer is closed
bengotow,2015-09-29 16:46:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/b8b44ce89a45c802634509e5ed447279e5328a16,b8b44ce89a45c802634509e5ed447279e5328a16,fix(db): Disable verbose warnings from DatabaseView
bengotow,2015-09-29 16:45:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a0292a37eecb9461c230167c8be1d234fdd0fac,1a0292a37eecb9461c230167c8be1d234fdd0fac,fix(docs): Replace docs references to Edgehill with N1
bengotow,2015-09-29 16:44:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d9a34f5ea72135e3d252ccb2a8848d5a9cdb216,1d9a34f5ea72135e3d252ccb2a8848d5a9cdb216,rename(Nylas Mail): Replace Nylas Mail > N1
bengotow,2015-09-28 17:26:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/e00eda6e164b98706ed377bebd87d9631ad30c25,e00eda6e164b98706ed377bebd87d9631ad30c25,fix(lint): Bad 0px in onboarding.less
bengotow,2015-09-28 17:25:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/87816261858b91325a8b7f43a70e26868595c60a,87816261858b91325a8b7f43a70e26868595c60a,bump(version): 0.3.9
emorikawa,2015-09-28 16:55:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a788a187edaeb0303af75af6c3dc79e60b72bf4,0a788a187edaeb0303af75af6c3dc79e60b72bf4,"fix(composer): fix to tabbing field with test

Summary: Fixes in tabbing and css updates in composer

Test Plan: new tests

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2075"
bengotow,2015-09-28 10:09:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa048ec07c1de1a5ef33fbee97bb491499cebc6d,aa048ec07c1de1a5ef33fbee97bb491499cebc6d,"fix(win32-styling): Buttons, popovers have hard corners on windows"
bengotow,2015-09-28 10:00:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/4bdbba4b678014f06c6203224c14d81e3f1b8b20,4bdbba4b678014f06c6203224c14d81e3f1b8b20,fix(toolbar-style): Tiny adjustmnts to better match Mac OS X Yosemite
bengotow,2015-09-28 09:43:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7adc2d198cfb883de9b0b521ae4d428b53ae434,e7adc2d198cfb883de9b0b521ae4d428b53ae434,fix(thread-list): Focused / selected threads appear gray when window is blurred
bengotow,2015-09-28 09:26:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d0c31296ca2251e128068d35f0452d8d6413867,6d0c31296ca2251e128068d35f0452d8d6413867,"fix(message-store): Additional spec for double-focus, fix Menu warning"
bengotow,2015-09-28 09:12:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/b18ef782392804ee1ab662394d669c4bbe35de8c,b18ef782392804ee1ab662394d669c4bbe35de8c,"fix(onboarding): Cleanup for recent commits to onboarding workflow. See description

- rm dead addAccount code that came back in a merge

- use command everywhere to open onboarding

- centralize close vs. quit logic in an OnboardingAction

- fix issue where the window size is calculated improperly because we have a padding value which is a fraction of height. In fact, remove no-top / padding-top 10% for good."
bengotow,2015-09-28 08:52:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/b56769bbdeffdc85a1cbe778e76e1f0ea1ae847f,b56769bbdeffdc85a1cbe778e76e1f0ea1ae847f,fix(onboarding): Page content should remain centered when transitioning smaller
bengotow,2015-09-28 08:44:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/aab2726cafdc814b82681c8d5152213bec913d5b,aab2726cafdc814b82681c8d5152213bec913d5b,fix(compression-priority): Make message list the flex column by giving it the largest max-width
bengotow,2015-09-28 08:37:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/7041ec17647ac817265578d3cca5477441efd8e2,7041ec17647ac817265578d3cca5477441efd8e2,fix(delta-activity): Make the loading spinner slightly smaller
bengotow,2015-09-28 08:32:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/b00ce85f446c74aebadbe7f6644fc392e80e5493,b00ce85f446c74aebadbe7f6644fc392e80e5493,fix(focused-content): Better test fixtures for previous fix
bengotow,2015-09-28 08:16:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5dce66ed935974ca8800044c9c3bb2969b4105f,d5dce66ed935974ca8800044c9c3bb2969b4105f,"fix(focused-content): Prevent keydowns from outpacing animation frames, improves keyboard move speed through thread list

To reproduce previous issue, turn key rpeat speed all the way up and then hold an arrow key."
bengotow,2015-09-28 06:46:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/609bb1373a900a77f2adfbf7e86b91aea75ad782,609bb1373a900a77f2adfbf7e86b91aea75ad782,"fix(popover): Popover had double-nested scrolling, no longer supported centering over button"
bengotow,2015-09-28 06:43:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/41b455d33e3797a2136ceac20fe956badb3350fd,41b455d33e3797a2136ceac20fe956badb3350fd,"fix(developer-bar): Critical fixes to curl display

- Do not sort and then reverse the request history every time it's requested
- Do not allow the request history to grow forever (cap at 200)
- Do not stringify tasks until they're clicked"
bengotow,2015-09-28 06:42:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/5fd751ea178a9a6bf324f43fb75830a0c3db516f,5fd751ea178a9a6bf324f43fb75830a0c3db516f,"fix(change-mail-task): Limit the parallelism of API requests via change mail task

No you can't make 1,100 API requests at the same time. Thanks. New specs to make sure there aren't any regressions in this behavior."
bengotow,2015-09-28 01:08:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/1278ca26779d6c803718589f0290e75c406a8e8d,1278ca26779d6c803718589f0290e75c406a8e8d,fix(db): Additional assertions for common databas mistakes
emfree,2015-09-27 02:50:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f709b8b9cffef0d30bed3c6f212348f4d540904,3f709b8b9cffef0d30bed3c6f212348f4d540904,"(fix)onboarding: Must pass approval_prompt=force for Google OAuth

Otherwise, if you've ever previously authorized your account against Edgehill's
Google client ID but need to reconnect it, the consent page is bypassed and no
refresh token is returned to the callback URL, breaking the rest of the flow."
emorikawa,2015-09-26 00:43:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e9b1612b699a11a0cb45ba4f8c796759857ce75,5e9b1612b699a11a0cb45ba4f8c796759857ce75,"feat(onboarding): improve onboarding flow

Summary:
Now with more CSS

Also fixed flow for when you're just adding an account

Fixes T3805

Test Plan: manual :(

Reviewers: drew, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3805

Differential Revision: https://phab.nylas.com/D2071"
emorikawa,2015-09-25 20:21:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/297b8593115fbcf992810b0646fe77008fe73cc7,297b8593115fbcf992810b0646fe77008fe73cc7,"fix(participants): properly handle tab and comma in participant field

Summary:
Fixes T3797
Fixes T3796

linter

Test Plan: new tests

Reviewers: dillon, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3796, T3797

Differential Revision: https://phab.nylas.com/D2072"
emorikawa,2015-09-25 20:16:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/f90ca64943d24807cfe6ee0a2b67c2eef1a531cd,f90ca64943d24807cfe6ee0a2b67c2eef1a531cd,"fix(draft): recover if draft is destroyed during access

Summary: Plus tests

Test Plan: new tests

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2067"
emorikawa,2015-09-25 20:14:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/8760de1b0e4e053a839d45765165195fc5143f97,8760de1b0e4e053a839d45765165195fc5143f97,"fix(composer): don't blur when adding a link

Summary:
Refactor focusing behavior in floating toolbar controller

Fixes T3781
Fixes T3791

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T3791, T3781

Differential Revision: https://phab.nylas.com/D2073"
emorikawa,2015-09-25 15:32:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc83f3cfab10f119de9c4ea22b853d77f3ee2165,fc83f3cfab10f119de9c4ea22b853d77f3ee2165,fix(gravatar): CSS fixes to gravatar
bengotow,2015-09-25 02:07:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/db0ce9e63e97f26eb4fcceed14bb7f4b3bfef503,db0ce9e63e97f26eb4fcceed14bb7f4b3bfef503,"polish(account-dropdown): Use CSS (vs styles) to hide/show switcher, animate with CSS"
bengotow,2015-09-25 01:59:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/b1ab8ad79269a46bc14dbd4a09447e7470c7233d,b1ab8ad79269a46bc14dbd4a09447e7470c7233d,"fix(send-button): Can't make hairlines darker, so let's use a real border"
bengotow,2015-09-25 01:58:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/42ad243824f584419d50ab77b496acfe6483b2da,42ad243824f584419d50ab77b496acfe6483b2da,"fix(message-sidebar): New ContactCard injectable role, updated FocusedContactStore

- The FocusedContactStore was triggering too often, and leaving it up to the FullcontactStore to fetch the full Contact model for the focused contact (pulled from thread.)

The FocusedContactStore triggers more responsibly, and registering for the role ""MessageListSidebar:ContactCard"" now gives you the focused contact as a full database model. The whole ContactCard region also fades in and out."
bengotow,2015-09-24 22:32:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/c73bc940b9c0cc4d33aa91f54a29c6d45d143abb,c73bc940b9c0cc4d33aa91f54a29c6d45d143abb,fix(activity-sidebar): Minor style tweaks - CSS selectors for a few things were not in use
bengotow,2015-09-24 22:21:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/f677abb24e3b306ed10bf255f45fc6be6ad3eca9,f677abb24e3b306ed10bf255f45fc6be6ad3eca9,"fix(react-remote): Do not cancel key events, check for floating point bounding sizes"
bengotow,2015-09-24 21:51:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/297320df94cf887c860622c83e66fb4a5558e012,297320df94cf887c860622c83e66fb4a5558e012,"fix(onboarding): Lots of changes to account management, dead code cleanup

Summary:
Better error handling in the account settings page and a loading spinner

Add Account... replaces ""Link External Account"", and it works

Clean dead code from onboarding pages, remove base class component

Always show the account switcher

rm dead EdgehillAPI code, AccountStore now manages accounts and credentials in config, not in database

Fix specs

Test Plan: Run tests

Reviewers: dillon, evan

Reviewed By: evan

Projects: #edgehill

Differential Revision: https://phab.nylas.com/D2059"
bengotow,2015-09-24 19:18:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/f85b5d60aced8281abd95cb24cbfbe6ae18a01c5,f85b5d60aced8281abd95cb24cbfbe6ae18a01c5,fix(debug-data): Do not include curl history in the feedback email
emorikawa,2015-09-24 18:03:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/17c6fd6e7853e537aeb6d980a91a06a7f49fc6fb,17c6fd6e7853e537aeb6d980a91a06a7f49fc6fb,"feat(sync): expanded details on sync status

Summary: Fixes T3574

Test Plan: manual

Reviewers: dillon, bengotow

Reviewed By: dillon, bengotow

Maniphest Tasks: T3574

Differential Revision: https://phab.nylas.com/D2058"
bengotow,2015-09-24 17:40:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/899ce2a27a38d3039d9c2e36a742002fabac105b,899ce2a27a38d3039d9c2e36a742002fabac105b,"fix(window-serialization): Restore window size, remove cruft from atom.coffee

Summary: Simplify the default window size, restore window size when the main window is loaded, fix serialization of packages in beforeunload.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2061"
emorikawa,2015-09-24 00:33:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/10a875ed1c83dda2d2d5f7e9d5fb119eaffc468b,10a875ed1c83dda2d2d5f7e9d5fb119eaffc468b,"feat(loading): new loading screen

Summary: New loading screen

Test Plan: manual

Reviewers: dillon, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2057"
bengotow,2015-09-23 22:48:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/f62fe2652403b52ea91833949edac3fd03fe7028,f62fe2652403b52ea91833949edac3fd03fe7028,"fix(thread-list): Use `hasAttachments` flag, fix bug where attachments icon did not appear in search results"
bengotow,2015-09-23 18:10:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c26f1cba0669c2964bc54c1ef80dce01322ddf0,3c26f1cba0669c2964bc54c1ef80dce01322ddf0,fix(thread-list): Pad the right edge of the thread list for the scrollbar
bengotow,2015-09-23 17:59:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/f9a2ce1787bfb0849476f3b01488e81dd1d7b9ca,f9a2ce1787bfb0849476f3b01488e81dd1d7b9ca,fix(fonts): Fakt now has correct vertical metrics on Windows
emorikawa,2015-09-23 17:50:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d2a066d2533ebb0d15caa8a7e694b2d8b499654,8d2a066d2533ebb0d15caa8a7e694b2d8b499654,"fix(bootup): don't show unresponsive dialog until main window loaded

Summary:
Fixes T3496
This is a patch just so that simple modal doesn't show.

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T3496

Differential Revision: https://phab.nylas.com/D2053"
emorikawa,2015-09-23 17:46:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f4902660bd25c3a6e0f4d74d7a031d59732a92b,1f4902660bd25c3a6e0f4d74d7a031d59732a92b,"fix(inbox): refetch labels and folders if the ""inbox"" label missing

Summary: Fixes T3559

Test Plan: new tests

Reviewers: bengotow, dillon

Reviewed By: dillon

Maniphest Tasks: T3559

Differential Revision: https://phab.nylas.com/D2052"
bengotow,2015-09-23 16:59:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/213bbde692a19ff5993685823b1034e9a5715b9c,213bbde692a19ff5993685823b1034e9a5715b9c,"fix(onboarding): Tweaks, styles, etc. for new onboarding experience

Summary:
Remove logout menu item and buttons, turn Link External Account to Add Account

Onboarding window starts hidden, is shown when react component is mounted and sized

Use get/setBounds to animate position and size at the same time smoothly

Fix specs, change 401 notice

Delay bouncing to Gmail to show users the Gmail screen momentarily

Make the animated resizing code defer so it doesn't run in a hard loop, and other animations can run at the same time

Bring back crossfade between screens, remove left/right shift on welcome screens

Test Plan: Run tests

Reviewers: drew, evan

Reviewed By: evan

Maniphest Tasks: T3529

Differential Revision: https://phab.nylas.com/D2054"
emorikawa,2015-09-23 16:54:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7815b098b7ca5de9ea3b145dda3671b25f984f0,a7815b098b7ca5de9ea3b145dda3671b25f984f0,fix(db): add index on thread id
bengotow,2015-09-23 04:09:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/cbd90e78ab9e1bc0c2d00a7c47cda69b66be2942,cbd90e78ab9e1bc0c2d00a7c47cda69b66be2942,fix(onboarding): Remove dead login specs
bengotow,2015-09-23 04:09:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/75f1bbf259a48ff0d5f708a8ca947c0aa8ccdfd5,75f1bbf259a48ff0d5f708a8ca947c0aa8ccdfd5,"feat(packages): ""Developer > Install package..."" runs apm install and copies to packages dir"
dregitsky,2015-09-23 03:11:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/5533755b037482e92f6c18242e1ea598c4134fd4,5533755b037482e92f6c18242e1ea598c4134fd4,"New onboarding flow, uses new Nylas auth

Summary:
Depends on D2049
This change replaces the onboarding flow to include new graphics, copy, and
support for the new Nylas auth flow. New account choosing UI presents a list
of account types, rather than guessing based on an entered email. Pages before
and after introduce the user to different features of the client.

Known issue: Polling for gmail account connection works, but continues even if
you leave the page.

Test Plan: Manual testing.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D2050"
emorikawa,2015-09-23 03:00:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a89980fce8764ef5d536b13c58b42cd28983d34,0a89980fce8764ef5d536b13c58b42cd28983d34,fix(composer): fix bluring in contenteditable
bengotow,2015-09-23 02:56:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7fd7db8aac33fb633651bdebd3301ddafce8a683,7fd7db8aac33fb633651bdebd3301ddafce8a683,fix(participants): replacemehts => replacements
bengotow,2015-09-23 02:01:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd516d93c3923c08f9a450aac5f629e4d2e0b615,fd516d93c3923c08f9a450aac5f629e4d2e0b615,"feat(events): Sync events during initial sync, request event deltas"
bengotow,2015-09-23 01:56:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff2b225d912cb8ed59186a5237d5e676ea3e3bb4,ff2b225d912cb8ed59186a5237d5e676ea3e3bb4,"fix(thread-list-participants): Add a new failing test case + fix to the thread list participants

I had to make this less functional so that the token generation function could modify data in the output as it was created. Bust :("
bengotow,2015-09-23 00:34:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b391ec4f014234d5c3c8e13924573ab947949b6,7b391ec4f014234d5c3c8e13924573ab947949b6,fix(package-template): Dependencies should be a hash
emorikawa,2015-09-23 01:49:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/2486bedafd3398a0b67c183d42ba1bb7e9ce6970,2486bedafd3398a0b67c183d42ba1bb7e9ce6970,fix(toolbar): state to toolbar visible
bengotow,2015-09-23 00:32:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/56d922f030b3b53b2d27ff35c2d41e5484aeb986,56d922f030b3b53b2d27ff35c2d41e5484aeb986,"fix(db): Atomically was not resolving with a value, fixes mail notifications"
emorikawa,2015-09-22 23:40:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/091a1007609bb340880fe513a5af9cd1d25e0dfa,091a1007609bb340880fe513a5af9cd1d25e0dfa,fix(specs): fix contenteditable and contact search specs
emorikawa,2015-09-22 23:02:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/3eba41b8d8c50728ae14ba597b3d200c5edc9914,3eba41b8d8c50728ae14ba597b3d200c5edc9914,"refactor(composer): update contenteditable functionality

Summary:
Fixes T3510
Fixes T3509
Fixes T3508
Fixes T3549

Extracted clipboard service

Remove unused style prop

Begin extracting quoted text from composer. Spec for clipboard service

Fix contenteditable specs

Begin to extract floating toolbar

Extract out DOMUtils and further extract floating toolbar

Further extracting domutils and floating toolbar

composer floating toolbar extracted

Fixes to hover and link states

Collapse adjacent ul lists

Fix outdent when deleting on a bulleted list

Fix bullet controls

Fixes to list creation and deletion

Add underline keyboard shortcut

Test Plan: manual :(

Reviewers: dillon, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3508, T3509, T3510, T3549

Differential Revision: https://phab.nylas.com/D2036"
emorikawa,2015-09-22 22:32:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3fc080f43d38060fe9fd8e160beb126ed7c2d6d,b3fc080f43d38060fe9fd8e160beb126ed7c2d6d,"fix(contact): fix contacts completion in popout composers

Summary:
Fixes T3568

The composer windows had the wrong cache in their `ContactStore`s. Since
it's VERY expensive to repopulate a ContactStore's cache, we now have a
`WindowBridge` that allow you to, with a Promise, invoke methods on the
main window instead.

(Still need to fix some tests)

Test Plan: Fixed tests

Reviewers: dillon, bengotow

Reviewed By: dillon, bengotow

Maniphest Tasks: T3568

Differential Revision: https://phab.nylas.com/D2045"
bengotow,2015-09-22 21:43:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/4ec059cf5baba5fdca44bff6767b7b013a44ebe6,4ec059cf5baba5fdca44bff6767b7b013a44ebe6,bump(version): 0.3.8
bengotow,2015-09-22 21:43:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3165183267cb31e5145ecbd717fa6b637211924,a3165183267cb31e5145ecbd717fa6b637211924,feat(account-sidebar): Ability to add custom items to the sidebar
dregitsky,2015-09-22 01:17:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/48bf2183ed8bcafe523e4502b9291928925e3b22,48bf2183ed8bcafe523e4502b9291928925e3b22,change styles to center injected thread icons on rows
bengotow,2015-09-21 23:21:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb165bc91b4fa2232e5c5e341e9bb12925fd5b93,cb165bc91b4fa2232e5c5e341e9bb12925fd5b93,feat(thread-list): Create custom icon components via role: ThreadListIcon
bengotow,2015-09-21 21:24:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/52e11c8768f79f08edbf0b48031c80a0937143b6,52e11c8768f79f08edbf0b48031c80a0937143b6,fix(sidebar): Turn sheet support back on
bengotow,2015-09-21 21:15:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/2312bb60a41bcd7c5a76312ff82230a2fca60f15,2312bb60a41bcd7c5a76312ff82230a2fca60f15,fix(thread-list-actions): Fix bad return `[]`
bengotow,2015-09-21 18:36:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd973e3869b1762d896525cddca9a8015581b729,bd973e3869b1762d896525cddca9a8015581b729,update(examples): Add github sidebar and translate examples
bengotow,2015-09-21 18:13:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/fce1ed63036c06898084ed091cfd9ea012e413ab,fce1ed63036c06898084ed091cfd9ea012e413ab,"fix(README): Remove incorrect links, tell people to run apm"
bengotow,2015-09-21 18:10:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/46000ce571270e7d8002854b7a4bcd9350fb74f1,46000ce571270e7d8002854b7a4bcd9350fb74f1,"fix(n1-github): Bad reference to React, missing dependencies"
emorikawa,2015-09-20 21:19:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba2afcdcbd0fe77569ce3bf8c079aeb1aac8f983,ba2afcdcbd0fe77569ce3bf8c079aeb1aac8f983,docs(github): add documentation to the Github sample
bengotow,2015-09-20 17:34:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb4b1cafe4078da776fa6d3695c28f193d0526b8,cb4b1cafe4078da776fa6d3695c28f193d0526b8,bump(version): 0.3.7
emorikawa,2015-09-18 21:43:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/314ebc37c76a538d105d55a3e6bfde14839c7d89,314ebc37c76a538d105d55a3e6bfde14839c7d89,"fix(quick-actions): change styles and only archie/trash

Summary: Fixes T2875

Test Plan: manual

Reviewers: bengotow, dillon

Reviewed By: dillon

Maniphest Tasks: T2875

Differential Revision: https://phab.nylas.com/D2041"
bengotow,2015-09-18 18:18:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7ba9c32bb290d84ff9e4cc16828be38e61b9a13,c7ba9c32bb290d84ff9e4cc16828be38e61b9a13,"fix(networking): Don't include entire response body in didMakeAPIRequest

Summary: Fixes T3625

Test Plan: Easy to test by opening/closing reply options dropdown as a large image attachment is downloaded

Reviewers: evan, dillon

Reviewed By: dillon

Maniphest Tasks: T3625

Differential Revision: https://phab.nylas.com/D2034"
bengotow,2015-09-09 00:10:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/54eb82d1e626385827a0a80237acc7c8805aa0bc,54eb82d1e626385827a0a80237acc7c8805aa0bc,"feat(docs): Move docs to gh-pages, deploy as part of ci build on darwin"
bengotow,2015-09-16 01:05:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ec4a0a228fe9a6367a5843722cd6314b9f723bb9,ec4a0a228fe9a6367a5843722cd6314b9f723bb9,"fix(modelify): Five new specs and fixes for Sentry 2973, others

Fixes T3613 as well.

Pushing directly to master because it's mostly specs and resolves an ""Unbreak Now!"" ticket"
emorikawa,2015-09-16 00:27:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/36de6075f989bc4d8727ffa9d8eb528ac3382ff5,36de6075f989bc4d8727ffa9d8eb528ac3382ff5,"fix(database): add `DatabaseStore.atomically` to handle read/write issues

Summary:
Fixes T3566
Fixes T3567

Test Plan: new tests

Reviewers: dillon, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3566, T3567

Differential Revision: https://phab.nylas.com/D2025"
bengotow,2015-09-15 21:27:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0289de243aacc88aa17a87a58d05ba7ddc3fd7a3,0289de243aacc88aa17a87a58d05ba7ddc3fd7a3,"fix(message-list): Optimize draft deletion along with draft creation

Summary:
I honestly can't wait until we refactor this logic into a sort of ""LiveQuery"" class so that it can apply to all of the queries in the whole app. These optimizations make deleting / creating drafts quite a bit more responsive because there's no delay between the database store emitting an event and the view updating.

Fixes T3456

No explicit tests for now because we'll pull this into a nice class soon

Test Plan: Run tests

Reviewers: dillon, evan

Reviewed By: evan

Maniphest Tasks: T3456

Differential Revision: https://phab.nylas.com/D2019"
bengotow,2015-09-15 21:26:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/43e9b4cf49978506d7e2d5bc4dc080aa8337cec3,43e9b4cf49978506d7e2d5bc4dc080aa8337cec3,"fix(mailto): Linux support for mailto links

Summary: Mailto link handling for ubuntu and other linux platforms

Test Plan: A few new tests

Reviewers: dillon, evan

Reviewed By: dillon, evan

Differential Revision: https://phab.nylas.com/D2023"
bengotow,2015-09-14 21:26:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/48de24ad8fece57ec475629841625e591de26fb5,48de24ad8fece57ec475629841625e591de26fb5,"fix(analytics): Submit account provider type, org unit and version string without commit hash to mixpanel"
bengotow,2015-09-14 20:30:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/4274753271c42d83c259287acf66e68121a7bcc6,4274753271c42d83c259287acf66e68121a7bcc6,"fix(sync-worker): Never paginate faster than 1 page per 1.5sec

This should prevent us from flooding the app with contacts (/contacts responds very quickly). Fixes T3475"
emorikawa,2015-09-14 20:18:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/b761afe96093e40c34621acff9d86e3be67c2dd9,b761afe96093e40c34621acff9d86e3be67c2dd9,"fix(reply): better coverge for reply-all participants

Summary:
Fixes: T3550
Fixes: T3504

Test Plan: many of them

Reviewers: dillon, bengotow

Reviewed By: dillon, bengotow

Subscribers: mg

Differential Revision: https://phab.nylas.com/D2017"
emorikawa,2015-09-14 20:12:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/91ccc940a678b84d5f671f1a8f3beb54bb71b5a8,91ccc940a678b84d5f671f1a8f3beb54bb71b5a8,fix(composer): fix popout composer and add spec
bengotow,2015-09-14 18:43:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b0ea766810b58cce09c537ee1d604112cffb2ce,9b0ea766810b58cce09c537ee1d604112cffb2ce,"fix(atom-window): The worker window should also auto-reload on crash

Neverclose applies to both the main window and the worker window

T1640"
bengotow,2015-09-14 18:30:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/e094261470795d9748e9117a11885de05e8571cc,e094261470795d9748e9117a11885de05e8571cc,"fix(drafts): If a draft disappears during editing, re-save instead of blowing up (Sentry 2844, more.)

Summary:
Previously, if a draft was deleted while a DraftChangeSet had uncommitted changes, it would blow up trying to find the draft.

This is bad, and can happen in normal scenarios. There are several changes in this diff:

- The DraftChangeSet no longer retrieves the draft from the database before saving changes. Instead, the save logic is in the DraftStoreProxy which already has a version of the draft kept fresh by a subscription to the DraftStore.

- The SyncbackDraftTask already had logic for POSTing when a PUT to a draft returns a 404, so no new logic was necessary there. THe new ""commit"" logic causes us to put back the draft that was lost, and then when we save it we detatch it from it's serverId and re-save.

In manual testing, this transparently handles the case where you delete a draft from Gmail while editing it.

Test Plan: I've added 22 tests for the DraftChangeSet and DraftStoreProxy

Reviewers: dillon, evan

Reviewed By: dillon, evan

Differential Revision: https://phab.nylas.com/D2012"
emorikawa,2015-09-14 14:37:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/c03a63b9ea32eba376cbdcc8c5fa35caa9dbeee2,c03a63b9ea32eba376cbdcc8c5fa35caa9dbeee2,"feat(composer): participants collapse

Summary:
Participants now collapse Gmail style in the composer field.

New, more declarative system for how we deal with ""focusedFields"" on the
composer.

Extracted a `CollapsedParticipants` and `ExpandedParticipants` component.

Test Plan: TODO

Reviewers: dillon, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D2013"
bengotow,2015-09-11 23:16:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/95c23ed497d6109df456dbac85ec9003a16ec9c3,95c23ed497d6109df456dbac85ec9003a16ec9c3,"tweak(jasmine): Double timeout in spec runner, see if it makes a difference"
bengotow,2015-09-11 23:10:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/9bce73fb4892cd6cd1fb08a28adf540f8ff70c23,9bce73fb4892cd6cd1fb08a28adf540f8ff70c23,"fix(toolbar): Don't close the floating toolbar when clicking in the link input

This is a bit of a quick and dirty fix, but fixes T3511"
bengotow,2015-09-11 22:14:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/525e1419e358c0f61b70cc723f6ea26e64c1b011,525e1419e358c0f61b70cc723f6ea26e64c1b011,fix(offline): /Generally/ a timeout is a temporary error code. Only SendDraftTask should bail and tell the user the draft failed to send
bengotow,2015-09-11 21:55:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/45fa6d0a8b9ec739f12a08c3ac26ec4e04d0234c,45fa6d0a8b9ec739f12a08c3ac26ec4e04d0234c,cleanup(atom): Get rid of core.autoHideMenuBar option—we'll never show a menu bar on windows
bengotow,2015-09-11 21:49:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/be103b22bf4dc3284457d366a07cfa24ade7c8a8,be103b22bf4dc3284457d366a07cfa24ade7c8a8,"tweak(win32): Hide the app menu on Windows, show in a right-side button instead"
bengotow,2015-09-11 18:12:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc19680440089010f3a07f9e4474a43ce933a5ec,dc19680440089010f3a07f9e4474a43ce933a5ec,"fix(spellcheck): Remove premature optimizations and avoid spellcheck on word being typed

Fixes T3537"
bengotow,2015-09-11 02:01:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad5086a06a4da3fbedbf26a498aa5904b3fac997,ad5086a06a4da3fbedbf26a498aa5904b3fac997,"bump(version): 0.3.6

Lots of bug fixes! See the commit history for more details. Many fixes in this release were reported from Sentry / user testing on Sept 8."
bengotow,2015-09-11 02:00:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/79d80464f34d558a62285e0cb47e868bd7c07614,79d80464f34d558a62285e0cb47e868bd7c07614,tweak(event-card): Use 12-hour time rather than 24-hour time
bengotow,2015-09-11 01:50:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/b86ef9b805422fdf8c89b6a41e6208f42ca4929b,b86ef9b805422fdf8c89b6a41e6208f42ca4929b,"tweak(action-bridge): Always process.nextTick inbound IPC events, see comment"
bengotow,2015-09-11 01:37:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d21666382280ed19a70645cfeab96f52ebe6b22,1d21666382280ed19a70645cfeab96f52ebe6b22,tweak(tooltip): Fix Sentry 2938
bengotow,2015-09-10 19:41:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/42d397fa7682b4530d4b764187fc2c1e174bc3de,42d397fa7682b4530d4b764187fc2c1e174bc3de,tweak(win32): Make the window toolbar white on windows
bengotow,2015-09-10 18:16:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/59af9d61a0bb33a7320a180329373db0a5162937,59af9d61a0bb33a7320a180329373db0a5162937,"fix(composer): Always open new composer windows from the main window so that AccountStore.current() is correct

Fixes T3479"
bengotow,2015-09-10 17:53:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee7266ffb50ad6854b18f66801fc29e96b758639,ee7266ffb50ad6854b18f66801fc29e96b758639,"fix(spellcheck): On Windows, right clicking a word doesn't select it

Summary: Minor tweaks so that the word is selected and spellcheck / replacement works

Test Plan: No test coverage at the moment - need to think about ways to test selection

Reviewers: evan, dillon

Reviewed By: dillon

Differential Revision: https://phab.nylas.com/D2006"
bengotow,2015-09-10 17:11:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba00ad9cbe90f401d3df7072b50427297700532b,ba00ad9cbe90f401d3df7072b50427297700532b,fix(scroll-region): Handle edge case where React nodes are not available (Sentry 2763)
emorikawa,2015-09-10 16:57:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a5dd2003fbaec2d06e88403e0edc2c26fa0fe44,1a5dd2003fbaec2d06e88403e0edc2c26fa0fe44,"refactor(package): remove old, unused, or private package. Adds examples

Moved to git@github.com:nylas/N1-private-packages.git

Also started an ""examples"" folder at the root level with an example Github
package"
bengotow,2015-09-10 00:26:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b4ce76ac6815f64ae21a69262a357a1ca5a8f7f,0b4ce76ac6815f64ae21a69262a357a1ca5a8f7f,fix(run-package-specs): Return if the user cancels out of the dialog (Sentry 812)
bengotow,2015-09-09 23:09:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/cac8c4ec7a4a0550015c447a7efa5268b68de094,cac8c4ec7a4a0550015c447a7efa5268b68de094,"fix(thread-list-store): Preserve selection through moveThreads

Summary: Small change that resets focus and keyboard selection after moving threads

Test Plan: Run existing tests, plan to overhaul this whole class so no additioanl tests atm

Reviewers: dillon, evan

Reviewed By: evan

Maniphest Tasks: T3382

Differential Revision: https://phab.nylas.com/D1996"
emorikawa,2015-09-09 23:04:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/5fdafcb8996993f905f72702a0af763376eac3b2,5fdafcb8996993f905f72702a0af763376eac3b2,"fix(search): fix UI issues with search and add test

Summary:
Fixes:
- Search bar dropdown doesn’t go away if you focus into a message
- If a search times out, it continues to display nothing
- Clicked “Inbox” from a search and it didn’t clear the search box

Test Plan: edgehill --test

Reviewers: dillon, bengotow

Reviewed By: dillon, bengotow

Differential Revision: https://phab.nylas.com/D2000"
emorikawa,2015-09-09 23:02:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a6619a106d5d5b53eeffa8213313569a707bbc7,6a6619a106d5d5b53eeffa8213313569a707bbc7,fix(style): ignore corrupt inline styles
bengotow,2015-09-09 22:55:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/e14e462f62c4757396851d395b021d9f06ff31cd,e14e462f62c4757396851d395b021d9f06ff31cd,tweak(sheet-container): No deferred calls to setState! Will fix perf issues in another patch (Sentry 1525)
bengotow,2015-09-09 22:27:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/5535ec43d13cd7c78414282513f87753222bd7bc,5535ec43d13cd7c78414282513f87753222bd7bc,fix(message-toolbar): Handle scenario where toolbar items rapidly removed (Sentry 2861)
bengotow,2015-09-09 22:25:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac9a86e6f3bc1e86a56b27a727f9c8b19c46d970,ac9a86e6f3bc1e86a56b27a727f9c8b19c46d970,"tweak(react-remote): If window is closed very quickly, do not send sizing (Sentry 2888)"
bengotow,2015-09-09 22:20:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/97442b9bcba7713539006b1d1e6f36eed15c64a7,97442b9bcba7713539006b1d1e6f36eed15c64a7,tweak(category-picker): Be slightly more robust against missing inbox
bengotow,2015-09-09 22:03:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/1dd0237717ac2dffbef012ec87a6890645f0ab46,1dd0237717ac2dffbef012ec87a6890645f0ab46,"perf(delta-sync): Don't update work UI when window is hidden, don't save config as often (synchronous IPC)"
bengotow,2015-09-09 21:41:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1725e1c96103378f6c128da364add5f20d6a7d8,e1725e1c96103378f6c128da364add5f20d6a7d8,"fix(loading-cover): Prevent strange overflow caused by position:absolute

Fixes T3539"
bengotow,2015-09-09 21:27:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3338ad3de70937b0634a74d5f6e7d7f009e6c33,e3338ad3de70937b0634a74d5f6e7d7f009e6c33,fix(workspace): Pop to root sheet when switching view modes
bengotow,2015-09-09 21:03:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac3ca9d8f82a8ec29034eea1c359e6d6654b29f9,ac3ca9d8f82a8ec29034eea1c359e6d6654b29f9,fix(thread-list): Depressed+active state needs to be different for immediate click feedback
bengotow,2015-09-09 21:03:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b282f1d3d675cb73c8ff7de8374953571a90523,0b282f1d3d675cb73c8ff7de8374953571a90523,tweak(empty-state): Hellen only has one L
bengotow,2015-09-09 20:34:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/8db4f82dc4e14571716fb6bccbe57a27a60474d6,8db4f82dc4e14571716fb6bccbe57a27a60474d6,fix(workspace-mode): Add to config schema so it defaults to list properly
bengotow,2015-09-09 19:08:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/748c4c899c1e454ecf8615c9af2e2207a0ecacb6,748c4c899c1e454ecf8615c9af2e2207a0ecacb6,"tweak(menus): ""Enter"" and ""Exit"" fullscreen instead of ""Toggle"""
bengotow,2015-09-09 18:43:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffb33f3c9334316b66c55829d00b892165b4c8db,ffb33f3c9334316b66c55829d00b892165b4c8db,"tweak(menus): Move Reload, Show Activity Window to Developer menu"
bengotow,2015-09-09 18:38:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3cf1d1c1220c9d1fd9285b4841e25d2897f50aa,c3cf1d1c1220c9d1fd9285b4841e25d2897f50aa,tweak(prefs): Remove the font size option until it's implemented
emorikawa,2015-09-09 18:44:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/7193c2175fb3b693c017e35456afd5873afdaa6b,7193c2175fb3b693c017e35456afd5873afdaa6b,"fix(syncback): Handle synback errors better

Fixes ""Cannot read property ""method"" of undefined in SyncbackDraftTest.
Now with more specs!"
bengotow,2015-09-09 01:38:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/1bf220f1a6dfa52d56cb2afad77f12458e2724be,1bf220f1a6dfa52d56cb2afad77f12458e2724be,"fix(draft-list-store): Upgrade draft list store to NylasStore, fix issue where @_view is null"
emorikawa,2015-09-09 01:32:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/cbf9c9b9e7dc31e46dee747b7a0ed3092b502f3f,cbf9c9b9e7dc31e46dee747b7a0ed3092b502f3f,fix(draft): DraftCountStore updates after send now
bengotow,2015-09-09 01:09:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/94226ad9beb33190a10ce0226d055969ba56b67f,94226ad9beb33190a10ce0226d055969ba56b67f,fix(errors): Send 400 errors from the Nylas API to Sentry
bengotow,2015-09-09 00:52:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/53252fcb97899221e826650b7a3204aa26d85081,53252fcb97899221e826650b7a3204aa26d85081,"fix(composer): Show ""No Guesses Found"" for misspellings without corrections, invalidate cache when learning spelling"
bengotow,2015-09-09 00:16:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/089aba0b22c0bdfa8241021d4a3afdbecd838867,089aba0b22c0bdfa8241021d4a3afdbecd838867,"bump(version): 0.3.5

- Important flag for Gmail
- Fixes for drafts not disappearing
- Subject line display"
bengotow,2015-09-08 21:32:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/18795d075b55c35b5d9d8c493f81cc846ee261ba,18795d075b55c35b5d9d8c493f81cc846ee261ba,"fix(window-controls): Proper @1x assets to avoid tiny white aliasing

Fixes T3501"
bengotow,2015-09-08 21:03:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2eb4abb13048e6cda9011b373f67bb7111a8255a,2eb4abb13048e6cda9011b373f67bb7111a8255a,"fix(react-remote): Put a title on the container region

Fixes T3512"
bengotow,2015-09-08 20:45:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/15f5a6899ffac9ce5f961617fd9b07a5f3cd7019,15f5a6899ffac9ce5f961617fd9b07a5f3cd7019,fix(mail-important): Fix broken specs when getStandardCategory('important') returns null
emorikawa,2015-09-08 20:11:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c881f4f6462341d389c74ffd189644433d06015,6c881f4f6462341d389c74ffd189644433d06015,"fix(draft-list): draft list removes draft when the message sends

Summary:
This started when I noticed that drafts weren't dissapearing from the
draft list after send. This was a pretty big bug because if you ever
clicked on one again and tried to re-send it would throw a 400 error
saying the draft id doesn't exist.

This uncovered a few fundamental issues with the DB.

First of all, the reason the draft list wasn't updating was because the DB
trigger that happened when we got in a new message, was being ignored
since the diff contained no drafts (it's now a message).

The bigger issue was that if you had a draft with only a clientId, gave it
a serverId, and tried to call ""save"", the REPLACE INTO method would not
update the old object, but rather create a second duplicate. This is
because the `id` field was being used as the PRIMARY KEY, and in this
case, that `id` field changed! The fix was to change the PRIMARY KEY to be
the `cilent_id` instead of the `id` and use that as the REPLACE INTO
index.

We still need the `id` field; however, because all of our reads depend on
that field usually being the serverId

Fixes T3507

Test Plan: See new and updated tests

Reviewers: dillon, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3507

Differential Revision: https://phab.nylas.com/D1992"
bengotow,2015-09-08 17:53:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/910f27207690996a6ebba3a2dbbd001bf9aee7cd,910f27207690996a6ebba3a2dbbd001bf9aee7cd,"feat(important): Improtant flags you can enable optionally for Gmail accounts

Summary: Fixes T3477

Test Plan: Tests are forthcoming

Reviewers: dillon, evan

Reviewed By: evan

Maniphest Tasks: T3477

Differential Revision: https://phab.nylas.com/D1990"
emorikawa,2015-09-07 01:54:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/ccfe7ce36cb3646db9426980dd317f10fa5a6f8c,ccfe7ce36cb3646db9426980dd317f10fa5a6f8c,"fix(draft): remove old local draft after sending

Fixes T3507"
emorikawa,2015-09-06 21:58:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/c7be2e7dc52388d2134ca92bfc37485c700a4b3d,c7be2e7dc52388d2134ca92bfc37485c700a4b3d,"bump(version): 0.3.4

Critical fix to popout drafts"
emorikawa,2015-09-06 21:55:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/d537797fa0524f7a22c1822bf7830f059c81d019,d537797fa0524f7a22c1822bf7830f059c81d019,"fix(draft): fix popout draft error & add tests

Fixes T3506"
bengotow,2015-09-04 22:45:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ba437b2abeedfa50c47ecc30967adee295d39c3,0ba437b2abeedfa50c47ecc30967adee295d39c3,"bump(version): 0.3.3

- Critical fix for broken search drill-down"
bengotow,2015-09-04 22:33:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/16001755671ed138d69b8301fa6fad9088d58c03,16001755671ed138d69b8301fa6fad9088d58c03,fix(mixpanel): Also include app version and platform in people analytics
bengotow,2015-09-04 22:31:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/692291364a3e4433630916106fcdb5ba7874398e,692291364a3e4433630916106fcdb5ba7874398e,fix(search): Fix for broken search display
emorikawa,2015-09-04 21:34:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f18a3659fd3b31450273ad47b6e73f5a9aebac9,3f18a3659fd3b31450273ad47b6e73f5a9aebac9,fix(db): remove db temp files as well
bengotow,2015-09-04 20:43:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/926f3656d236fe8e7e50c5d1d4e6879a1f904b6f,926f3656d236fe8e7e50c5d1d4e6879a1f904b6f,"bump(version) 0.3.2

+ Starred view
+ All new spellcheck!
+ Loading screen
+ Lots of bug fixes!

Fixes:
- Forwarding messages with files
- Mode toggle now opens/closes sidebar
- Min-width is more appropriate
- Mixpanel analytics fixes
- Better draft sending errors, timeout errors
- Improvements to quoted text display, more edge cases handled
- Mailto: links that launch the app work properly
- Fix for database busy errors
- Message items resize when their container is resized
- Message items now populate HTML doctype, fixing some rendering issues
- We now sanitize HTML in replies and forwards to avoid potential issues
- Valid email addresses can now contain `=`
- Folder and label names in the sidebar wrap nicely
- Undo/redo in the composer no longer triggers task undo/redo
- EdgeForce is now in it's own repository
- Worker process moves expensive syncing out of hte main window
- 404s from the server correctly purge items from the database
- Lots more minor changes!"
emorikawa,2015-09-04 19:53:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdccbfa517ae59f7dbd5627834686134960799b2,bdccbfa517ae59f7dbd5627834686134960799b2,fix(draft): fix forwarding message with files and add spec
bengotow,2015-09-04 19:23:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/1339ef19d3c8124056bd8762c65afccc9487003b,1339ef19d3c8124056bd8762c65afccc9487003b,"feat(starred): Replace FocusedContentStore with FocusedMailViewStore, allows for starred

Summary:
This diff fixes T3389 and makes it possible to define mail views which are not based on a category and focus them in the app.

I think that we need to create a new index on the starred attribute to make sure the query runs fast.

More tests WIP

Test Plan: Run tests, more coming soon!

Reviewers: dillon, evan

Reviewed By: evan

Maniphest Tasks: T3389

Differential Revision: https://phab.nylas.com/D1979"
emorikawa,2015-09-04 02:41:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee41722891395ef50481d82350d0d6f3190a06d2,ee41722891395ef50481d82350d0d6f3190a06d2,"fix(composer): much better specs for composer & quoted text

Summary: Fixed a bug bug with the quoted text clearing the bodies on replies

Test Plan: all the tests

Reviewers: dillon, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1981"
bengotow,2015-09-04 02:30:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/1daeaff367073364568f8ab9ed7563b716c5c294,1daeaff367073364568f8ab9ed7563b716c5c294,"fix(mixpanel): Critical fix for mixpanel users all having the same distinct_id alias

Summary: Mixpanel API misuse makes me sad.

Test Plan: No tests, but easy to check with Mixpanel.com

Reviewers: dillon, evan

Reviewed By: dillon, evan

Differential Revision: https://phab.nylas.com/D1978"
emorikawa,2015-09-03 23:29:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/2aebd5f43bca3e4a3561aff5a3166e1bdd0ef851,2aebd5f43bca3e4a3561aff5a3166e1bdd0ef851,"feat(draft): drafts that fail to send throw better errors

Summary: Also enhancements to the developer toolbar

Test Plan: edgehill --test

Reviewers: dillon, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1976"
emorikawa,2015-09-03 19:00:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/38659995cf05fc50eaac02c6b1a18dc171949954,38659995cf05fc50eaac02c6b1a18dc171949954,bump(DB): update DB version to support new Metadata schema
emorikawa,2015-09-03 01:26:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc3d6dc297cf37cd9ebd018855c40a29680bea96,bc3d6dc297cf37cd9ebd018855c40a29680bea96,"fix(quoted): if whole message is quoted text, then show it

Summary: Fixes T3476

Test Plan: New test

Reviewers: dillon, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3476

Differential Revision: https://phab.nylas.com/D1974"
bengotow,2015-09-02 23:49:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/71f1a3e3156f48fb196ec4ed66d165623490ffe6,71f1a3e3156f48fb196ec4ed66d165623490ffe6,fix(Atom): Wait to send window:loaded until new loading process has finished (broken because of animation blocks)
bengotow,2015-09-02 23:31:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c0eccd38797be8e9499fb16966297d909a7c860,9c0eccd38797be8e9499fb16966297d909a7c860,"fix(notifications): Switch account when necessary to display notification, avoid using CategoryStore which may not be ready

Fixes T2318 and fixes T3448"
bengotow,2015-09-02 21:36:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/32edaa3ac51409e392223f30791a99692128fa34,32edaa3ac51409e392223f30791a99692128fa34,fix(metadata): publicid => publicId
bengotow,2015-09-02 20:20:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/502bb7c0b8198ce75a31a3df7c4463da238fbcc5,502bb7c0b8198ce75a31a3df7c4463da238fbcc5,"feat(spellcheck): Custom spellcheck powered by our DraftStore extensions API

Summary: New draft store extension that highlights misspelled words.

Test Plan: No test coverage yet

Reviewers: evan, dillon

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1972"
bengotow,2015-09-02 19:31:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/62fbd61ede0e9665b625338e1bc96bebdd86d807,62fbd61ede0e9665b625338e1bc96bebdd86d807,"fix(db): Run pragmas on all connections, not just worker one (which runs setup queries)"
emorikawa,2015-09-02 19:22:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/442bcd99d134c63322b5d7fd0b24d20b2e5a9e94,442bcd99d134c63322b5d7fd0b24d20b2e5a9e94,"test(api): add specs for nylas api

Summary: Specs for nylas api

Test Plan: edgehill --test

Reviewers: dillon, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1973"
bengotow,2015-09-02 18:02:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ea3dfca62f511fbf22a0230e1c98fd184a9458d,0ea3dfca62f511fbf22a0230e1c98fd184a9458d,"fix(T3474): After authentication when main window already visible, close onboarding window

Summary: Fixes T3474

Test Plan: Run tests

Reviewers: dillon, evan

Reviewed By: dillon, evan

Maniphest Tasks: T3474

Differential Revision: https://phab.nylas.com/D1967"
bengotow,2015-09-01 23:23:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/7826ed99f8301316d9114b313e6e4a0cc81c55ee,7826ed99f8301316d9114b313e6e4a0cc81c55ee,"fix(iframe-resize): Subscribe to iframe window resize, adjust container height

Summary: Fixes T2095, iFrames resize when images load, when container is resized, etc.

Test Plan: Run tests

Reviewers: dillon, evan

Reviewed By: dillon, evan

Maniphest Tasks: T2095

Differential Revision: https://phab.nylas.com/D1964"
bengotow,2015-09-01 22:35:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/7014a450ce945346fb513ed68e89714fceaad058,7014a450ce945346fb513ed68e89714fceaad058,"fix(db): Add index for draft count query, use sqlite timing profiler and log queries >100msec"
bengotow,2015-09-01 22:32:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/434c5822a2356ac5578df8d614418c32d4f253b2,434c5822a2356ac5578df8d614418c32d4f253b2,fix(specs): Lazily require CategoryStore to fix broken tests
emorikawa,2015-09-01 21:57:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/3773083908da728f81185d0781ca5854fbc8cda1,3773083908da728f81185d0781ca5854fbc8cda1,fix(iframe): give each message a proper doctype
bengotow,2015-09-01 20:35:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/a366f13d9abc461645aff8f095f50f6918f2de2f,a366f13d9abc461645aff8f095f50f6918f2de2f,"fix(db): Use recommended page-size, cache size. Allow 80MB in RAM cache"
bengotow,2015-09-01 18:59:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac96110f1f9d2c544856dc41a7c27126bea93453,ac96110f1f9d2c544856dc41a7c27126bea93453,fix(windows): Fix old references to windowManager
emorikawa,2015-09-01 18:57:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4a57aaf12254796505c7abd290c6e90af0d8d91,e4a57aaf12254796505c7abd290c6e90af0d8d91,"feat(github): add GitHub plugin

Summary:
Adding a simple GitHub plugin that shows a button on the thread view.

If we detect the ""open in github"" links, then we'll show the button on the
thread.

Test Plan: manual

Reviewers: dillon, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1959"
emorikawa,2015-09-01 17:11:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/31714407f938af0da4934e1f7c4efc4e2c337e75,31714407f938af0da4934e1f7c4efc4e2c337e75,feat(composer): sanitizes and inlines CSS styles for replies and fwd
bengotow,2015-09-01 17:51:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/be697e42c70db6bafdd2eae63672d7d1caa97ffa,be697e42c70db6bafdd2eae63672d7d1caa97ffa,"fix(message-list): Roll back min width hiding reply buttons, etc. Just allow individual body iframes to scroll horizontally when necessary"
bengotow,2015-09-01 17:27:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/b04f496a027d7b56f2caceaadba14db17ce11bee,b04f496a027d7b56f2caceaadba14db17ce11bee,fix(loading): Initial bounce was missing from loading animation
emorikawa,2015-09-01 13:18:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ffaf6c17f1e4b7b9b9d772f4b11fd09283f3fe4,7ffaf6c17f1e4b7b9b9d772f4b11fd09283f3fe4,fix(sidebar): fix case when category comes back as null
emorikawa,2015-09-01 13:05:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ec33b938a2975fd1ecf380cdc5693467f1df68a,3ec33b938a2975fd1ecf380cdc5693467f1df68a,fix(mailto): fix incorrect calling of draft popout from mailto
emorikawa,2015-09-01 01:37:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/65f776e90237d2793c66f119e12e765ab4d7aa17,65f776e90237d2793c66f119e12e765ab4d7aa17,fix(specs): fix file upload specs
emorikawa,2015-09-01 00:25:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/13629f57dc9b4c31734659ae54b70e230940f788,13629f57dc9b4c31734659ae54b70e230940f788,"fix(preferences): add window title to preferences

Fixes T3458 Preferences panel shows up as ""Electron"" in Window menu"
emorikawa,2015-09-01 00:13:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/550a7e0a8cf0b5e9d0646153a0de9e346b54740c,550a7e0a8cf0b5e9d0646153a0de9e346b54740c,"refactor(packages): move internal sidebar to own repo

Fixes T3425 Remove Nylas internal admin sidebar from default edgehill"
emorikawa,2015-08-31 23:55:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/16c43768128395be90a0a366466c505c520589bb,16c43768128395be90a0a366466c505c520589bb,"feat(composer): improve tab useage in composer

A `*` as well as a `-` will start a list.

If you tab anywhere in plain text, it will insert a tab character.

If your shift-tab anywhere in plain text, and the character just before
the cursor is a ""tab"" character, it will delete that last tab character.

Fix a bug whereby shift-tab and tab will indent/outdent from anywhere
inside of a list.

Fixes T3409"
emorikawa,2015-08-31 22:48:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb72438270f54a7a8a1dfce08aee498c55333a75,cb72438270f54a7a8a1dfce08aee498c55333a75,"fix(regex): allow ""="" in valid email address

Fixes T3440 Email formatting validation bug"
emorikawa,2015-08-31 22:43:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/760311f1fce85d8e8a44c6ecb205b968114283fb,760311f1fce85d8e8a44c6ecb205b968114283fb,"feat(work-window): give work window a standard toolbar

Fixes T3457 ""Activity"" window needs a close affordance"
emorikawa,2015-08-31 22:38:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/93209c9f712d132cc775fcb73bdb54ea6862c27e,93209c9f712d132cc775fcb73bdb54ea6862c27e,"fix(sidebar): remove ""Plugins"" and consolidate sections

Fixes T3461"
emorikawa,2015-08-31 22:21:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/d56d8daaf2e2383c79dcb61560310ee15404e1e3,d56d8daaf2e2383c79dcb61560310ee15404e1e3,"fix(drafts): fix illegal ID set

Fixes T3468"
emorikawa,2015-08-31 21:56:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ac2a6b1be6bf7d0449259e65be59710c6c1e7c6,6ac2a6b1be6bf7d0449259e65be59710c6c1e7c6,"fix(attachments): set attachment min-width

Fixes T3459"
bengotow,2015-08-31 03:18:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0aaadd91f35b5751e012e8adc34eb809f600179,a0aaadd91f35b5751e012e8adc34eb809f600179,fix(file-uploads): Critical fix to bad method call to session.draft instead of session.draft()
bengotow,2015-08-31 03:17:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/873c9379f4da0545ace9b658b0ca314293ef01bf,873c9379f4da0545ace9b658b0ca314293ef01bf,fix(file-uploads): Do not store the draft session and draft during upload
emorikawa,2015-08-29 00:35:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0307d4d88948549e5642ac8539c021485b0260e,a0307d4d88948549e5642ac8539c021485b0260e,"fix(uploads): no more from picker & uploads use correct accountId

Test Plan: edgehill --test

Reviewers: dillon, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1955"
emorikawa,2015-08-28 22:59:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/e639afae1eb148c45bc6f425893a57be965ac9fb,e639afae1eb148c45bc6f425893a57be965ac9fb,"fix(undo): properly scope composer keymappings for undo/redo

Summary: Properly scopes undo & redo key bindings to the composer

Test Plan: manual

Reviewers: dillon, bengotow

Reviewed By: bengotow

Maniphest Tasks: T3446

Differential Revision: https://phab.nylas.com/D1951"
bengotow,2015-08-28 21:34:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0dcfb8359db0298323bd955b2fd3761eb42543b,d0dcfb8359db0298323bd955b2fd3761eb42543b,fix(keyboard-cursor): Recent optimization broke keyboard cursor advancing fast
bengotow,2015-08-28 21:24:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/11dab9095a9090a203f47a6b78a60529c5af3898,11dab9095a9090a203f47a6b78a60529c5af3898,fix(loading): Add nice text to our new loader
emorikawa,2015-08-28 20:37:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ad227cd9a0f8144fd060a966b82f02e5fabadac,7ad227cd9a0f8144fd060a966b82f02e5fabadac,fix(spec): Stub correct method
emorikawa,2015-08-28 20:24:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/3908ba402dd0db31e8169961520688e2a4dad620,3908ba402dd0db31e8169961520688e2a4dad620,feat(sync): Resume sync worker action from sidebar
bengotow,2015-08-28 20:06:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/944d6a8e1eccaeded1142b7b0843617575ae6411,944d6a8e1eccaeded1142b7b0843617575ae6411,"fix(send-draft): Update the draft rather so it's clientId is maintained, even if the ID has changed on send"
bengotow,2015-08-28 20:04:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/3626beb294c8ebb0e23f45d1f2e36dd99fbe39e2,3626beb294c8ebb0e23f45d1f2e36dd99fbe39e2,"fix(nylas-api): When receiving models, ignore changes that would make non-drafts into drafts"
bengotow,2015-08-28 19:41:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/9247a4129201aa64ed0dab7531087d89f24b368a,9247a4129201aa64ed0dab7531087d89f24b368a,"fix(specs): Future specs should stub DatabaseStore.run, not find/findBy"
bengotow,2015-08-28 19:25:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e0ef3946cea6db5585276a86a0340bd4340fd2b,5e0ef3946cea6db5585276a86a0340bd4340fd2b,fix(atom): Put displayWindow back - it's used in other places
bengotow,2015-08-28 19:20:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/08da848c341d5c1235a18981f932451a3cdf00a6,08da848c341d5c1235a18981f932451a3cdf00a6,"fix(message-list): Use clientIds within the message-list for scrolling, etc. since IDs may change"
bengotow,2015-08-28 19:19:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/912075a6f94fd1d80dedfdd513c2d845139e6ece,912075a6f94fd1d80dedfdd513c2d845139e6ece,"fix(model-observation): Watch for changes to objects with matching clientIds, since server id may be assigned"
bengotow,2015-08-28 19:17:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/82f0ffd13c42c12304c74f1968830fcf40ae7a63,82f0ffd13c42c12304c74f1968830fcf40ae7a63,"fix(sending): Since we have a unique index on clientId, no need to delete draft after sending"
emorikawa,2015-08-28 19:16:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0e64bf580d678a0af0f7f026ae1ae897c595ab1,a0e64bf580d678a0af0f7f026ae1ae897c595ab1,refactor(packages): Remove Edgeforce
emorikawa,2015-08-28 18:44:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/700ade2936bd36addd66c4e75dac133f511de569,700ade2936bd36addd66c4e75dac133f511de569,fix(database): report if database errors on setup
bengotow,2015-08-28 18:43:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e435fc5a52844caeb583ced29ce207f6b5f0d66,3e435fc5a52844caeb583ced29ce207f6b5f0d66,fix(draft): Always retrieve draft body when using clientId
bengotow,2015-08-28 18:12:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/7190ca69f749f519d2fe5d6a12854037a92c7630,7190ca69f749f519d2fe5d6a12854037a92c7630,"refactor(db): change ID system to have clientIDs and serverIDs

Summary: Major ID refactor

Test Plan: edgehill --test

Reviewers: bengotow, dillon

Differential Revision: https://phab.nylas.com/D1946"
bengotow,2015-08-27 23:39:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/1a576d92dcd809487c88df25e4e39a1bdfd68c69,1a576d92dcd809487c88df25e4e39a1bdfd68c69,"feat(work): Create the ""Work"" window, move TaskQueue, Nylas sync workers

Summary:
Move sync workers and Edgehill token checks to work window

Move the task queue and database setup to the work window

Move ContactStore background refresh to work window

Store the task queue in the database

WIP

The TaskQueue now puts tasks in the database instead of in a file, which also means it can be observed

Move all delta sync and initial sync to a package, make NylasSyncStore which exposes read-only sync state

DraftStore no longer reads task status. Once you set the ""sending"" bit on a draft, it never gets unset. But that's fine actually.

If your package lists windowTypes, you *only* get loaded in those windowTypes. If you specify no windowTypes, you get loaded in the root window.

This means that onboarding, worker-ui, worker-sync, etc. no longer get loaded into the main window

ActivitySidebar has a special little store that observes the task queue since it's no longer in the window

Move ""toggle component regions"" / ""toggle react remote"" to the Developer menu

Move sync worker specs, update draft store specs to not rely on TaskQueue at all

Test Plan: Run existing tests, all pass

Reviewers: dillon, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1936"
bengotow,2015-08-26 21:10:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/41a3529f1693341ca38814caffa05e2f93650484,41a3529f1693341ca38814caffa05e2f93650484,"fix(perf): Apply accountId to more queries, always run query plans in dev mode to flag SCANs"
bengotow,2015-08-26 18:54:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/f33035cfc367eeff8db62f672abe979d0b7243b1,f33035cfc367eeff8db62f672abe979d0b7243b1,fix(change-mail-task): Ignore 404s when changing mail so that we don't attempt to roll back and re-create purged objects + spec
bengotow,2015-08-26 18:43:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/91774668eb6cd801deaabf31746adf874d884bf6,91774668eb6cd801deaabf31746adf874d884bf6,"fix(delta-sync): Properly look up model types, add specs for all this logic

Summary: Emergency fix for broken logic consuming delta updates. Also includes specs for untested functionality.

Test Plan: Run new tests

Reviewers: dillon, evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1939"
bengotow,2015-08-26 17:07:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/6670d10ee425e47ad01b86011e3b341684858eec,6670d10ee425e47ad01b86011e3b341684858eec,"fix(T3427): Trying to deserialize dropped contacts using the registry fails because they were not serialized with the registry

Summary:
Fixes T3427

Use the more generic serialize registered objects instead of the DatabaseObjectRegistry directly.

Fix a bug in the serialize function that was preventing it from inflating the top level object if it had a constructorName.

Remove contact checks because tokenizing-test-field is generic. Participant text field checks type.

Hot new drag and drop integration test

Test Plan: Run new test (<3 react)

Reviewers: dillon, evan

Reviewed By: dillon, evan

Maniphest Tasks: T3427

Differential Revision: https://phab.nylas.com/D1933"
bengotow,2015-08-26 17:00:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/9146df086e951e4ef6ab2c044c1401fd412efd14,9146df086e951e4ef6ab2c044c1401fd412efd14,"fix(before-unload): When drafts are present, we do not resume quit properly after committing changes

Summary:
We designed the onBeforeUnload handler to resume a ""close window"" event, but it actually needs to resume a quit as well. This has become an issue recently and may be due to the DraftStore sessions not being removed from the DraftStore.

To test: Create a popout draft, close it, and then try to quit the app.

Test Plan: Run updated tests

Reviewers: dillon, evan

Reviewed By: dillon, evan

Differential Revision: https://phab.nylas.com/D1932"
bengotow,2015-08-25 23:08:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/1b6772803380c38d5a8726714b26722311a5633f,1b6772803380c38d5a8726714b26722311a5633f,"fix(draft-list): Only parse the first 400 characters of HTML to create plaintext snippet

It's possible that 400 characters isn't enough to get any plaintext (if the body begins with a style tag, for example.) Until we get a better solution in place, we need to do this to avoid parsing the king james bible in my draft."
bengotow,2015-08-25 23:00:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c407f2f1c2f72d1b4ccd5c1697485fb320ff82a,6c407f2f1c2f72d1b4ccd5c1697485fb320ff82a,"fix(config): Apply config change from Atom, process locking

Summary:
https://github.com/atom/atom/commit/d1c44dcb54994eb733eff0bfde69c8454aeff22c

Also lock config across processes to prevent the user from being logged out when the main process reads config before it's finished writing. This is what is causing the login window to appear.

Test Plan: Rapidly tap between the two display modes. Note that it no longer reverts to the wrong one intermittently.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1931"
bengotow,2015-08-25 19:23:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/e65c078cf3063dd35b30a7721df95fecf2996d05,e65c078cf3063dd35b30a7721df95fecf2996d05,fix(composer): Show From: when replyToMessageId is null
bengotow,2015-08-25 19:23:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/0330dbbc22259070c25664783be331f5cf68041c,0330dbbc22259070c25664783be331f5cf68041c,fix(draft-account-switching): Need to totally delete draft threadId and replyToMessageId
bengotow,2015-08-25 18:49:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c6e3c4db55f9ce3d82663b812bea0dc903fbcfa,2c6e3c4db55f9ce3d82663b812bea0dc903fbcfa,fix(sentry-2518): Better debugging information for when token is not found
bengotow,2015-08-25 18:45:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/27181d177ef1ef66d1f0660762ab5d8c770a0160,27181d177ef1ef66d1f0660762ab5d8c770a0160,fix(sentry-2523): Console.warning is not a method
bengotow,2015-08-25 18:35:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/9dd04223d90da506416ddc7f6106626312c6e48d,9dd04223d90da506416ddc7f6106626312c6e48d,fix(less): Put pointer back on composer toolbar
bengotow,2015-08-25 18:33:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/c1cf4445df3bd1afe48b2d71e8835dda76e27c11,c1cf4445df3bd1afe48b2d71e8835dda76e27c11,fix(mixpanel): Correctly associate events with distinct_ids
emorikawa,2015-08-25 18:03:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff1b41a15472d164a7c4c33949ad29c771a62efa,ff1b41a15472d164a7c4c33949ad29c771a62efa,bump(version): 0.3.1
emorikawa,2015-08-25 18:01:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/462e7e1daea33c4079ae46327f61c024ae0000a4,462e7e1daea33c4079ae46327f61c024ae0000a4,fix(composer): display tooltip controls
bengotow,2015-08-25 01:55:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/7aedb9d22ac279a910b91437c05e0a7c5ac7ae99,7aedb9d22ac279a910b91437c05e0a7c5ac7ae99,downgrade(electron): Also fix less issue on Linux
bengotow,2015-08-25 01:14:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5d67e49846ab419a452234a93cb632fd450e0d2,a5d67e49846ab419a452234a93cb632fd450e0d2,"bump(version): 0.3.0

- Multiple account support!
   + Known issue: Unread badge shows only currnetly selected account
   + Known issue: Canceling add account flow quits the app

- You can now create bullets and lists in the composer

- Fix for mail sent yesterday appearing to be sent ""now""

- Third-party plugins can now define tasks and database models"
bengotow,2015-08-25 00:39:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c09e773051b2584861ed746282f92c4289b0406,7c09e773051b2584861ed746282f92c4289b0406,temp(composer): Do not allow user to switch accounts if files have been attached to draft
bengotow,2015-08-25 00:31:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/78a02ad52c7a7492531e64b2112e7258d44f4955,78a02ad52c7a7492531e64b2112e7258d44f4955,fix(button-dropdown): Broken styles on reply/reply-all button dropdown
bengotow,2015-08-24 21:01:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/2e1e485051e665f1e83f3184279a616ecec89186,2e1e485051e665f1e83f3184279a616ecec89186,fix(database): Allow findVersions to be called with more than 250 items
bengotow,2015-08-24 18:06:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd7722bc1afd0d4b1c21091c81f74dc432f83248,fd7722bc1afd0d4b1c21091c81f74dc432f83248,fix(build-flow): Add missing resolve statement
bengotow,2015-08-24 17:51:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4b8db16f4d0f8234675f50746328605812a2e06,e4b8db16f4d0f8234675f50746328605812a2e06,fix(task-queue): Rename the task queue file to avoid upgrade issues
bengotow,2015-08-24 17:47:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d256fa00a98c513acd235b5c469ecfb0b1b6411,2d256fa00a98c513acd235b5c469ecfb0b1b6411,fix(build-flow): More minor tweaks to applescript runner
bengotow,2015-08-22 01:23:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5b07511dbad6a0cc1d8a7e73f03de3a509978df,d5b07511dbad6a0cc1d8a7e73f03de3a509978df,fix(add-account): Don't check for tokens from secondary windows
bengotow,2015-08-21 23:51:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/fdcbeb638f03d23986db940d561cd2d22f4df012,fdcbeb638f03d23986db940d561cd2d22f4df012,fix(build-flow): Undefined call to getVersion
bengotow,2015-08-21 23:05:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c57108ff242a05a40cdc661bb5dd27cbdf0cca3,0c57108ff242a05a40cdc661bb5dd27cbdf0cca3,"fix(object-serialization): Constrain use of __constructorName, fix infinite recursion, remove hackiness"
bengotow,2015-08-21 22:29:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/81d2edcaf9213f924eb7bd6d9cf2887c9077aedc,81d2edcaf9213f924eb7bd6d9cf2887c9077aedc,"feat(accounts): Kill namespaces, long live accounts

Summary:
This diff replaces the Namespace object with the Account object, and changes all references to namespace_id => account_id, etc. The endpoints are now `/threads` instead of `/n/<id>/threads`.

This diff also adds preliminary support for multiple accounts. When you log in, we now log you in to all the attached accounts on edgehill server. From the preferences panel, you can auth with / unlink additional accounts. Shockingly, this all seems to pretty much work.

When replying to a thread, you cannot switch from addresses. However, when creating a new message in a popout composer, you can change the from address and the SaveDraftTask will delete/re-root the draft on the new account.

Search bar doesn't need to do full refresh on clear if it never committed

Allow drafts to be switched to a different account when not in reply to an existing thread

Fix edge case where ChangeMailTask throws exception if no models are modified during performLocal

Show many dots for many accounts in long polling status bar

add/remove accounts from prefs

Spec fixes!

Test Plan: Run tests, none broken!

Reviewers: evan, dillon

Reviewed By: evan, dillon

Differential Revision: https://phab.nylas.com/D1928"
emorikawa,2015-08-20 23:44:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/23c8466fe0d98d645f9639c4fdb39b3940358f2c,23c8466fe0d98d645f9639c4fdb39b3940358f2c,fix(message): update MessageBodyProcess to key on message version
emorikawa,2015-08-20 23:20:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2af724fa267caa16d8774224f6e9220010962df,e2af724fa267caa16d8774224f6e9220010962df,"fix(thread): fix bug whereby thread list blows up if no ""from"""
emorikawa,2015-08-19 23:25:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/c48bb3f8f283b2ccffeafd82af28d1527383985b,c48bb3f8f283b2ccffeafd82af28d1527383985b,"refactor(models): Enables 3rd party plugins to add Models & Tasks

Summary:
Adding serialzable registry

Added DatabaseObjectRegistry

rename modelReviver to deserializeObject

Consolidate deserizlie

Get rid of model methods from Utils

DatabaseRegistry change notifications

Logic to throttle database refresh requests

Fixes in nylas-exports

Silent model setup

Continue to resolving the database setup phase for non main windows.

A packages `activate` method does not actually get called until the
DatabaseStore says that it's ready. This is necessary to ensure that a
package that introduces database changes has those schema changes take
hold before the activate happens.

However, in windows like the `onboarding` window that do not depend on a
database at all, there is no setup that is run and the promise use to
never resolve thereby making the packages never activate.

In this case, any external windows will go ahead and let their packages
activate.

Check subclass instead of instance!

Use the correct types for ""messages"" and ""drafts""

Move Salesforce models

Proper references to Model and Attributes

Convert Salesforce stores to NylasStores and fix paths

Move database setup to DB

Test Plan: todo

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1899"
emorikawa,2015-08-19 20:35:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/51288b261ac30dc36ffe72fae8eee6526ad58f0c,51288b261ac30dc36ffe72fae8eee6526ad58f0c,fix(specs): fix contenteditable specs
emorikawa,2015-08-19 20:26:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/e018d6a8ecf619a39c0998fae643724d5bafbc93,e018d6a8ecf619a39c0998fae643724d5bafbc93,"feat(composer): add bullets, numbered lists, and tab controls

Summary: Adding bullets, numbered lists, and tabbing indenting and outdenting

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1917"
emorikawa,2015-08-19 17:20:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/06a1eb42b2f20edb214e5fca3b91a3bb0eac1c22,06a1eb42b2f20edb214e5fca3b91a3bb0eac1c22,"fix(iframe): catch relative and malformed uris

Summary:
Fixes T3252

When links were clicked with malformed, relative, or malicious href links
we'd perform default behavior instead of catching them.

If you have href=""www.foo.bar"" the browser by default thinks it's a
relative link. In our case it would prepend the full default base URI
which is file://path/to/edgehill. This would at best fail to do anything
and at worst execute an arbitrary file.

We now blacklist `file:` and check for the existence of a valid RFC 3986
schema on the URI.

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T3252

Differential Revision: https://phab.nylas.com/D1888"
bengotow,2015-08-19 01:28:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/50068116d430de7c821f40fdccafec44dcfea635,50068116d430de7c821f40fdccafec44dcfea635,fix(build-flow): Fix broken promise chaining in publish phase
bengotow,2015-08-19 01:19:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb5f288f550e15ab7b0cfaad74182ea99662c5b4,bb5f288f550e15ab7b0cfaad74182ea99662c5b4,fix(build-flow): Slow down the script - jenkins is slow.
bengotow,2015-08-19 01:04:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/dbe5d474e04cd1daf985c48b453d213884289cdb,dbe5d474e04cd1daf985c48b453d213884289cdb,fix(build-flow): New integration test at the end of mac builds
bengotow,2015-08-18 21:50:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd08bf87b03223c301f5ae186517802b14039f49,fd08bf87b03223c301f5ae186517802b14039f49,fix(keymaps): JSON => CSON during cibuild final phase
bengotow,2015-08-18 18:13:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/a309d72fa09d7d777538050ff8d906db18a9bda5,a309d72fa09d7d777538050ff8d906db18a9bda5,fix(lint): Fix linter issues with preferences
bengotow,2015-08-18 17:57:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/f8837325223a527db1b8937f229473749854308a,f8837325223a527db1b8937f229473749854308a,"bump(version): 0.2.5

Features:
- Preferences! You can now change all kinds of things from Menu > Preferences, including:
  + Key binding sets (Gmail, Outlook, Mail.app)
  + Theme (light or dark)
  + Mark-as-read delay
  + Attachment downloading policy
  + Sounds and notifications
  + Default reply behavior
- Layout and theme are now remembered when you re-launch Nylas Mail
- You can now star the message under the keyboard cursor by pressing 'S'

Performance:
- Creating drafts is now much faster on long threads

Fixes:
- ""Hover and Archive"" is now displayed correctly
- Signing in with an email with capitalization (""BEN@Nylas.com"") no longer breaks subtle things
- Messages sent yesterday are now shown with relative time (2:31PM, 12 hours ago)
- NylasSyncWorker now backs off when it encounters network failure
- On Windows, the database is deleted properly when you log out
- Archiving now properly sends mail to All Mail in Gmail
- Images inside some emails now render without becoming distorted
- Mailto link handling is now case-insensitive"
bengotow,2015-08-18 17:31:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/dff1fd148793934d7e3aa527ceae7f27f2824f97,dff1fd148793934d7e3aa527ceae7f27f2824f97,"fix(*): A few patches for minor sentry errors

Summary:
Fix edge cases where _getRangeInScope is null, fix logic errors

fix(1932) Edge case where we can't find a container for the message Id we're asked to scroll to

Check view exists before trying to perform actions. Will be fixed once keybindings are a React container

Test Plan: Run specs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1906"
bengotow,2015-08-17 23:23:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e43f45401efba5d2c40e5072ac2eb6f1c94451d,3e43f45401efba5d2c40e5072ac2eb6f1c94451d,"perf(drafts): Cache results of running Autolinker, avoid props.children for EmailFrame, fix special case for new draft

Summary:
""results.length"" not ""result.length"".

Eventually I want MessageBodyProcessor to be the public interface to another process which asynchronously runs message body parsing? At the very least, caching the results means that miscelaneous refreshes to the message list don't incur significant string processing cost.

Test Plan: No new tests here

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1898"
bengotow,2015-08-17 21:51:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/19f543e20c51532b73a0f50b0230cd14bf22f1bd,19f543e20c51532b73a0f50b0230cd14bf22f1bd,fix(sentry-archive): Import Actions into ThreadListQuickActions
bengotow,2015-08-17 21:50:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/b890aaca6fc0647d03168b1fa1431794033030ed,b890aaca6fc0647d03168b1fa1431794033030ed,"fix(email-frame): We can no longer specify a max-width on images, because it's relative to an unknown parent container and changes the dynamic of sizing of images inside of tables

We may need another fix, but we sure as hell can't have this one."
bengotow,2015-08-17 19:03:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7337f2b10c885c7d374a8363da4fee55c04bfa2,d7337f2b10c885c7d374a8363da4fee55c04bfa2,fix(packages): Wait for package-store to be used before using APM to load the packages
bengotow,2015-08-14 23:41:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7fce1f120e4e9e8ab357864ee8eeefea5011602,e7fce1f120e4e9e8ab357864ee8eeefea5011602,fix(preferences): Display multiple keybindings when available
bengotow,2015-08-14 23:24:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/94372f22c831e5e88b9e9672ab53fbd8af8fbe07,94372f22c831e5e88b9e9672ab53fbd8af8fbe07,fix(preferences): Windows / Linux styling and adjustments
bengotow,2015-08-14 22:40:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/ed2a5c90d945c3b3f6f0d250c1e01ffa3528f95a,ed2a5c90d945c3b3f6f0d250c1e01ffa3528f95a,"feat(preferences): WIP Preferences panel

Summary:
Things still to come:
- General tab
- Signatures tab (potentially remove and land)

Adding emacs things to gitignore

Adding progress. iterating on html/css is incredibly painful

Added layout for accounts page.

Adding layout for appearance page

layout for shortcuts preferences page

adding layount for notifications menu

Adding signatures layout

WIP

WIP - tab switching, accounts tab

WIP ALL THE THINGS

Keymap template support (Gmail / outlook, etc.)

Test Plan: No tests atm

Reviewers: evan

Differential Revision: https://phab.nylas.com/D1890"
bengotow,2015-08-13 18:20:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac5eac02c038559b3292fc17e4139a0e814c40a4,ac5eac02c038559b3292fc17e4139a0e814c40a4,"fix(sync-worker): Fix specs, add one testing backoff"
bengotow,2015-08-13 18:20:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/afda3c6030f640408c0662aa4e8ca17bcbe1640b,afda3c6030f640408c0662aa4e8ca17bcbe1640b,"fix(curl): If a curl URL a ""&"" in it, we need to wrap the url in quotes"
bengotow,2015-08-11 19:28:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/3a1c74acf0e8b35142480007d249aefd1aeb3c78,3a1c74acf0e8b35142480007d249aefd1aeb3c78,"fix(sync-worker): Replace basic ""every 20 seconds"" retry logic with linear backoff to five minutes

This helps guard against us DDOSing ourselves when the server is intermittently returning bad responses."
bengotow,2015-08-11 17:01:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/804b00cf74287bdc4f609d42fbf678e6690449cc,804b00cf74287bdc4f609d42fbf678e6690449cc,"fix(thread-list): Unread gem hover state should override ""star""

Fixes T3216"
bengotow,2015-08-11 02:06:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb98bbe2e205e0e8b021310a0e5a49d0a0426bbd,fb98bbe2e205e0e8b021310a0e5a49d0a0426bbd,fix(db): Bump the database schema version
bengotow,2015-08-11 01:09:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/4df04eaba9b62e3ac1bb65a9a63d1283305ef9b0,4df04eaba9b62e3ac1bb65a9a63d1283305ef9b0,"bump(version): 0.2.4

- Perf:
    + Mail actions like starring and changing folders are significantly faster
    + Messages and drafts load faster in large mailboxes thanks to better indexing and query management
    + Ingesting changes from the Nylas API no longer floods the database with queries

- Features:
    + Emails with forms and other interactive elements are now supported
    + Drafts now have a blue focus ring, which makes it easier to see keyboard focus
    + Contact search now matches email domains
    + Command-option-F now highlights the search bar

- Bug fixes:
    + Downloading large attachments will no longer crash the app
    + Window focus / blur state is now correctly reflected in the toolbar
    + Emails with some specific image tags now render with the correct height
    + Undoing star/unstar changes to a group of threads now restores previous state correctly
    + The 'send' animation in the message list is now glitch-free
    + Thread participant parsing handles more edge cases
    + Loading ""dots"" no longer cover the thread list in some scenarios
    + Rapidly creating and destroying drafts no longer causes React errors"
bengotow,2015-08-10 22:08:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/48574ddffa6b1c2ba275f10c63b6131e68d6996c,48574ddffa6b1c2ba275f10c63b6131e68d6996c,"fix(multiselect-list): Only show loading dots when list source is empty

Fixes T1118"
bengotow,2015-08-10 21:47:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5f05f52fdb9598f629186f49089b6100c39e83d,a5f05f52fdb9598f629186f49089b6100c39e83d,"fix(composer): Remove unnecessary zIndex rules, fix wrapping around Cc/Bcc/Subject icons

Previously, we were adding 160px of padding to the entire To field. Now the buttons in the top right are floating inside the container and only impact the first line of participants.

I also stripped out a lot of zIndex rules on the participant fields, subject, body that I think were only necessary because ""once you've started adding zindexes you need them everywhere"".

Also changed the hover state of the buttons to be consistent."
bengotow,2015-08-10 21:12:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/e2a1658ab311e4db5c26d758869c923ba4d6f056,e2a1658ab311e4db5c26d758869c923ba4d6f056,"fix(email-styles): Remove img height:auto; causing images to stretch based on their intrinsic size

We constrain images to a max-width of 600px. We have logic to change width and height attributes of inline attachments when both specified (and larger than 600px). This `height:auto` flag causes the image below to render at 600x600 because it's a 1x1 image:

<img src=""http://image.lyftmail.com/lib/fe6915707166047a7d14/m/1/spacer.gif"" height=""1"" width=""600"" style=""display: block; width: 600px; min-width: 600px;"" border=""0"">

I think the height:auto case only happens when A) the image is more than 600px wide B) the image has a hard-coded height and not a hard-coded width. In this case our max-width rule will change the width and the height will be fixed. I think we should disregard this case unless we find scenarios where it happens."
bengotow,2015-08-10 20:36:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/06d1ab6aad508825aa40c420c8a145d87cddcdb1,06d1ab6aad508825aa40c420c8a145d87cddcdb1,"fix(attachments): Do not parse file downloads as UTF8

Fixes T3188 and adds specs for API request construction in FileDownloadStore.Download"
bengotow,2015-08-10 18:58:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b0bc638463cccfb35261ae7d9585db6fc13690f,3b0bc638463cccfb35261ae7d9585db6fc13690f,"fix(search): Command-alt-f to highlight search

Fixes T3011"
bengotow,2015-08-06 21:35:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/6607b463951f39c5b2ef1a77c2ad5c459ac2f3fa,6607b463951f39c5b2ef1a77c2ad5c459ac2f3fa,fix(specs): Fixes for failing specs
bengotow,2015-08-06 20:59:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/4df6d4f705b0beb50e0588730fa533c671f8e3ce,4df6d4f705b0beb50e0588730fa533c671f8e3ce,"fix(file): file.displayExtension should return lowercased extension

T2874"
bengotow,2015-08-06 20:39:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/697a140ab8ad075ecfb6df7ad89efc2ba58cbfa0,697a140ab8ad075ecfb6df7ad89efc2ba58cbfa0,"fix(contact-parsing): Remove quotes around parsed names

Typing or pasting `""John A"" <aaa@market76.com>` should give you John A without the surrounding quotes."
bengotow,2015-08-06 20:12:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2d80d12b5fe87498b479f2898f9f1f240288dcf,b2d80d12b5fe87498b479f2898f9f1f240288dcf,"fix(participant-fragments): Fragment based on name as well as email

Fixes T2880, with a new test"
bengotow,2015-08-06 19:27:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/c4dd6813d6057c400c9d11cd2489a7d9e473615d,c4dd6813d6057c400c9d11cd2489a7d9e473615d,"fix(contact-chips): Remove left/right margin from input to align properly

Fixes T2878"
bengotow,2015-08-06 19:22:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5ac2b5c4c8ba837b5545b1534cdcd6acdea4ffd,b5ac2b5c4c8ba837b5545b1534cdcd6acdea4ffd,fix(nylas-api): The _delta property was not correctly associated with deltas
bengotow,2015-08-06 19:22:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/58a9d60ce11c96e60717505dfd89310a07ad740e,58a9d60ce11c96e60717505dfd89310a07ad740e,"fix(specs/keys): Fix broken specs, clean up CJSX"
bengotow,2015-08-06 19:21:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/23977da41629895133080673dd115ef47c490bcd,23977da41629895133080673dd115ef47c490bcd,"feat(database): Save and retrieve arbitrary json blobs to database

This fixes T2233, which was caused by the main window trying to write config.cson very often as initial sync happened, and the parent process trying to observe those changes on disk to watch for the user's API key being removed. Further refactoring would be good but this will fix it."
bengotow,2015-08-06 19:19:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/e94f5808c4e4010736affdb6525eefb719e9cdda,e94f5808c4e4010736affdb6525eefb719e9cdda,fix(mail-tasks): Bad bug involving wrong call to increment/decrement locks
bengotow,2015-08-06 17:45:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/bcef8e6cc254efca5b8bc07ec543b27b760ec07e,bcef8e6cc254efca5b8bc07ec543b27b760ec07e,"fix(contact-search): Also match domains

Fixes T2468"
bengotow,2015-08-06 17:40:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c7266c1410e01736d37363b851686583911f98d,0c7266c1410e01736d37363b851686583911f98d,"fix(focus): Use BrowserWindow focus/blur, not window focus/blur

Summary: Previously, you could actually click a message iFrame to blur the toolbar, which made no sense. See http://stackoverflow.com/questions/24619114/identifying-window-focus-blur-events-with-iframes

Test Plan: No tests

Differential Revision: https://phab.nylas.com/D1848"
bengotow,2015-08-06 00:41:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/574c32438aada5878ad0ffae138d67af8ce69242,574c32438aada5878ad0ffae138d67af8ce69242,fix(reply-area): Remove animated height from message list reply-area - looks strange since the removal of a draft is not otherwise animated
bengotow,2015-08-06 00:40:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/e17c7812a815984355c4f91a6727dd050f622291,e17c7812a815984355c4f91a6727dd050f622291,fix(drafts): Fix rapid draft creation and deletion issues
bengotow,2015-08-06 00:39:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e39454ad93408043f2799d7c97872550e458feb,5e39454ad93408043f2799d7c97872550e458feb,"fix(labels/folders): Temporarily disable changing nested messages

- It's slow, and causes performLocal to take much longer
- It's making changes we receive from the streaming API a few moments later
- We don't actually display nested folder data anywhere important"
bengotow,2015-08-06 00:38:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/be4af0671bf0c1e590c98a9e78f529c2b5a6bbf5,be4af0671bf0c1e590c98a9e78f529c2b5a6bbf5,feat(composer): Show blue focus ring around the composer
bengotow,2015-08-05 22:53:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e6e857f28362068006210111fe0f710091d3660,1e6e857f28362068006210111fe0f710091d3660,"perf(*): Add indexes, optimize ""shouldAcceptModel"", optimize Tasks

Summary:
Consolidate the smarts from ChangeFolderTask into a generic ChangeMailTask

ChangeMailTask:
   - only makes requests for threads / messages that actually changed
   - handles incrementing / decrementing locks
   - writes changes to the database in a single pass, and only writes modified models
   - encapsulates the undo state that was built into ChangeFolderTask

This change means that ChangeLabelsTask enjoys the same ""smarts"" as ChangeFolderTask. Label changes resulting in no-ops do not create web requests, you can undo label changes and they go back to the correct previous state.

Replace ""UpdateThreadsTask"" and ""UpdateNylasObjectsTask"" with subclasses based on the same code used for folder/labels

This means that the naming and parameter sets are consistent for all thread/message changing tasks. It also means that starring/marking as use the same (tested) business logic and starring 999 already-starred threads doesn't create 999 requests.
Go away DraftCountStore - nobody wants you in secondary windows

Add ""Debug query plans"" option which prints out the steps the database is taking. Look for ""SCAN"" to now you're having a bad time.

Make ""version"" field queryable, when we receive deltas/API response, find all versions of existing models in a single query without loading or parsing the objects

Contact: Add index for lookup by email

Label: add index for lookup by name

Message: Add index for message body join table

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1840"
emorikawa,2015-08-05 16:44:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/4e4e510833e3a45d7628af23f45d55917a2e358c,4e4e510833e3a45d7628af23f45d55917a2e358c,fix(spec): Fix memory leak in NamespaceStoreSpec
emorikawa,2015-08-05 16:34:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/aeced745f352757379f7a642d5dec61c05fcb814,aeced745f352757379f7a642d5dec61c05fcb814,fix(spec): Make specs work with new animated pending message
emorikawa,2015-08-05 02:35:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/a125e7979986dbfb938ed4ed1e980a8dcdf62db5,a125e7979986dbfb938ed4ed1e980a8dcdf62db5,"fix(message-list): get rid of flicker and add transitions

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1841"
emorikawa,2015-08-04 21:41:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d617f7f6284de3eaff520ce8e3ab2c1d9f18885,1d617f7f6284de3eaff520ce8e3ab2c1d9f18885,fix(folder): require `Task` object
bengotow,2015-08-04 20:57:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/1ba02de4072112cd4c94700617c62ea460ff7b86,1ba02de4072112cd4c94700617c62ea460ff7b86,fix(reply-all): Fix edge case where same person in CC/To causes error when replying-all
bengotow,2015-08-04 20:37:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/7cc04a6eed9a878c38021bfbf9072541bcb043b7,7cc04a6eed9a878c38021bfbf9072541bcb043b7,"fix(iframe): allowDefault for events within message iFrames, just not link clicks"
bengotow,2015-08-04 02:46:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a5d90cc568aca1eaf256318c729d985a4d0557c,7a5d90cc568aca1eaf256318c729d985a4d0557c,"bump(version): 0.2.3

- Threads sort the same way they do in Gmail, by ""last message received""
- We now use native SQLite bindings, and SQLite 3.8.11.1, which is 22% faster
- We now display an affordance for undoing changes to threads
- Scroll handling in the message list is much better
- Contact chips have been overhauled in the composer, and are now editable
- Contact autocompletions are better, and based on frequency of use
- Messages wrap better in many scenarios
- More than 20 bug fixes!

We now have more than 1,000 specs for Nylas Mail."
emorikawa,2015-08-04 02:09:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/dae2cec8fbb8c85811e8d35cfd199e4b11f84ae0,dae2cec8fbb8c85811e8d35cfd199e4b11f84ae0,"fix(folder): specs and fixes to ChangeFolderTask

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1834"
bengotow,2015-08-04 02:09:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f849176752987c59f8d2c95a63d2b4cc035e657,7f849176752987c59f8d2c95a63d2b4cc035e657,fix(lint): Address linter errors
bengotow,2015-08-04 01:52:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd7140ee1fc358732871194fc65d5b8bbd9aa97a,dd7140ee1fc358732871194fc65d5b8bbd9aa97a,fix(threads): Use last_message_timestamp fallback until migration has completed
bengotow,2015-08-04 01:39:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b9b72dce5b81df5a97b3a8d42f1edf0fd165c52,0b9b72dce5b81df5a97b3a8d42f1edf0fd165c52,fix(draft-scroll): Ignore composer scroll requests while moving to new draft
bengotow,2015-08-04 01:37:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f76577a152929c048d0237f42a025d5a90a73a7,0f76577a152929c048d0237f42a025d5a90a73a7,"fix(message-scroll): Remove double overflow:auto to prevent scroll weirdness

Fixes T2357"
emorikawa,2015-08-04 00:40:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/c001cb0be8c9173ee7fa3508d7442fc1a17d8320,c001cb0be8c9173ee7fa3508d7442fc1a17d8320,fix(spec): fix rename issue
bengotow,2015-08-04 00:36:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/6e11f3d5b46da1dbe80c34829725f445a8934f04,6e11f3d5b46da1dbe80c34829725f445a8934f04,fix(query): Properly escape single quotes in SQLite
emorikawa,2015-08-04 00:24:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/763e42d974886fab0fc5e1377420c669757a54bf,763e42d974886fab0fc5e1377420c669757a54bf,fix(message-list): fix type and change variable name
emorikawa,2015-08-04 00:19:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/ada9f722f5a8587ac3f818e2c9a39aae78948755,ada9f722f5a8587ac3f818e2c9a39aae78948755,"feat(message-list): better sending state

Summary:
We now have a `MessageItemContainer` class that handles the logic of
deciding what kind of message to show. We introduce a new `PendingMessage`
(which is just a sublcass of `MessageItem`) that has the spinner and
stuff.

Also tests

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1833"
bengotow,2015-08-04 00:05:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b2f830348ba06369e4a4f065885008606a95e52,9b2f830348ba06369e4a4f065885008606a95e52,"fix(*): Minor performance tweaks and fixes to category picker

Summary:
fix(undo-redo): UndoRedoComponent does not take props

fix(category-picker):

- Use Actions.queueTask like the rest of the app so UndoRedoStore can see it. Can change this in the future but it's currently the only place in the app we directly queue tasks.

- Stop subscribing to the FocusedContentStore / FocusedCategoryStore (which are not used in setState?) since we receive threads as props

- Rename categoryDatum to item because it's not a category. (Was super confused that categories were becoming JSON in `_extendCategoryWithDisplayData`) Give item a category property so that tasks can specify items and not IDs (allows for better descriptions like ""Moved one thread to Archive""

Add simple shouldComponentUpdate to retina-img

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1832"
bengotow,2015-08-03 21:46:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/8884435da04efc709794fb90f8fe0b4d9be696cb,8884435da04efc709794fb90f8fe0b4d9be696cb,"fix(undo-redo): Minor tweaks to undo/redo based on testing - see description

Summary:
Give UpdateThreadsTask a description method for strings like ""Marked as read""

Give ChangeLabelsTask a better description method that returns shorter strings and is specific when possible

Give ChangeFolderTask a more specific description and don't assume folderOrId will always be a folder

Make it so that passive ""mark as read"" from the message store isn't undoable

Give the base class a description method that names the object

Change UndoRedo component CSS a bit:

- Use ""inline-flexbox"" with a max-width so that we can define shrinking rules on the label and Undo button (label gets ellipsis, button does not shrink at all)

- Avoid left:39%, since it assumed that the undo-redo element would be 22% of the width of the thread list, which wasn't always true. Instead, make the `undo-redo-manager` container ""text-align:center"", so the `undo-redo` div is always centered within it.

- Add `cursor:default` so that the user sees the pointer, not the text insertion cursor when hovering over ""Undo""

- Add overflow / text-overflow so that if the message is ever too long, the user sees `...` ellipsis properly.

Test Plan: Run a few new tests

Reviewers: evan, ethanb

Reviewed By: ethanb

Differential Revision: https://phab.nylas.com/D1830"
bengotow,2015-08-03 21:45:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/c95ad97a4c477b5ac776c41469b98ccd15d0d6c5,c95ad97a4c477b5ac776c41469b98ccd15d0d6c5,"fix(assertions): Add earlier checks for bad queries, invalid local links"
bengotow,2015-08-03 21:09:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/00bab73fbe4cd379205dda7f4ec100234009c616,00bab73fbe4cd379205dda7f4ec100234009c616,fix(thread-list): Add more shouldComponentUpdate to prevent threadlist re-rendering as you move keyboard cursor
bengotow,2015-08-03 20:06:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/1dc7c03ebd2f5758e21727878911a40c4ef470c6,1dc7c03ebd2f5758e21727878911a40c4ef470c6,"fix(contact-chips): Contact chips are editable and have much better style

Summary:
The TokenizingTextField has several new optional props, including onEdit, which enables
editing of the tokens and tokenIsInvalid, which allows you to make tokens red, while still
accepting them as tokens.

When you go to send a message with invalid recipients it won't let you until you remove/
edit them.

Hotloading

Edit chips, keymappings not through command registry, 7 new tests for editing chips

Test Plan: Run 7 new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1825"
bengotow,2015-08-03 18:56:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b18b9715c04c0ee930a2ee3facdaafbbd6ec3dc,6b18b9715c04c0ee930a2ee3facdaafbbd6ec3dc,"fix(first-responder): Apply changes from Atom to window-event-handler

Applies https://github.com/atom/atom/commit/a4d716c491b7a990a1d878091c50e46afb8df4ee to our code.

Fixes https://sentry.nylas.com/sentry/edgehill/group/1716/"
bengotow,2015-08-03 18:38:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/0ca900c9bd9c4b5d3335cc003ca76bddc00bfb34,0ca900c9bd9c4b5d3335cc003ca76bddc00bfb34,"fix(multiselect-list): Occasionally, no dataView or handler is defined for MultiselectList

Fixes https://sentry.nylas.com/sentry/edgehill/group/1710/"
bengotow,2015-08-03 18:31:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/5280040e5cf1067cff1946bdc61dd59e565eb1be,5280040e5cf1067cff1946bdc61dd59e565eb1be,"fix(change-category): Redefine objectIds when objects cannot be found

Fixes https://sentry.nylas.com/sentry/edgehill/group/1717/"
bengotow,2015-08-03 18:08:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/b2602222bcba01f55cf9ceb1b07795c54bd5fc73,b2602222bcba01f55cf9ceb1b07795c54bd5fc73,"fix(invariant): Remove event listener with ""capture: true""

Fixes https://sentry.nylas.com/sentry/edgehill/group/1831/"
emorikawa,2015-08-03 17:56:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d17b90b93d9399e2c7f4d2cf4ddbf6fef778cb0,9d17b90b93d9399e2c7f4d2cf4ddbf6fef778cb0,fix(tooltip): doesn't show on archive either
emorikawa,2015-08-03 17:41:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/2370c7cdc14f862567858d0655fb98dc43a02a56,2370c7cdc14f862567858d0655fb98dc43a02a56,fix(scroll): don't scroll to region if node doesn't exist
bengotow,2015-08-03 17:21:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/99da4a112afa1d1c6380e92a3b9a3f5a48661307,99da4a112afa1d1c6380e92a3b9a3f5a48661307,fix(undo-redo): Clear timeout when component unmounts to avoid React errors
emorikawa,2015-08-03 17:16:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3f7e405880c606078486e1292894ddfabf822c1,b3f7e405880c606078486e1292894ddfabf822c1,"test(folders): adding specs for changing folders and labels

Summary:
ChangeLabelsTask specs

adding change folders task

Adding tests for ChangeFolderTask

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1806"
bengotow,2015-08-01 01:54:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/83197fabd78c3cc80c3836a88fd4cb994f09d1da,83197fabd78c3cc80c3836a88fd4cb994f09d1da,fix(streaming): Tell the API we want folder/label deltas
bengotow,2015-07-31 19:34:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/73ae6ea6f33329a145a2dbddd0b6c6376a37535c,73ae6ea6f33329a145a2dbddd0b6c6376a37535c,"fix(T2387): Use better file icons from SDW

Summary:
fix misc spec failure by making event store fetch immediately on setup

add specs for displayExtension, displayName

Test Plan: Run new tests

Reviewers: evan

Maniphest Tasks: T2387

Differential Revision: https://phab.nylas.com/D1821"
bengotow,2015-07-31 19:14:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf89ea8c640a2c77e209ea64350090edc2dfe230,bf89ea8c640a2c77e209ea64350090edc2dfe230,fix(build): Linux needs to build sqlite after pulling electron
bengotow,2015-07-31 19:06:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/31512e8d9abab279789a313b67a8e44438074668,31512e8d9abab279789a313b67a8e44438074668,fix(specs): Resolve merge issues in specs
bengotow,2015-07-31 01:31:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/d551fd37f2835109b992a98a3297d0c484ccd8c5,d551fd37f2835109b992a98a3297d0c484ccd8c5,"feat(contact-ranking): Use /contacts/rankings in the Contact Store

Summary:
- New JSONCache class hides logic around saving/loading rankings from a file
- Contacts are sorted whenever they're loaded so the runtime of searchContacts is still O(limit * n)

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1793"
bengotow,2015-07-31 01:29:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/43f9b0b8c31ecf405101d4c91d2552ed9f720945,43f9b0b8c31ecf405101d4c91d2552ed9f720945,"fix(message-list-scrolling): Move scroll logic to ScrollRegion

Summary: This is still a work in progress and needs more specs

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1808"
bengotow,2015-07-31 01:09:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/cab654ec48604776ada63e843e055baf15ac0393,cab654ec48604776ada63e843e055baf15ac0393,"fix(sqlite): Connect to sqlite directly rather than sending queries over IPC (twice...)

Summary:
- We now build sqlite3 manually from source in script/bootstrap
- We now allow queries to run in parallel outside of transaction blocks

- When signining in and out, the main window creates the database file and then advances the database ""phase"", which allows all the windows to connect to the initialized database.

This diff also fixes T2411 where popout drafts opened twice, and several issues around Windows icons and install.

Test Plan: Run existing tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T2411

Differential Revision: https://phab.nylas.com/D1815"
bengotow,2015-07-31 00:49:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa2519923fdd8a6ee1bec60eaa08cf56d27613e6,fa2519923fdd8a6ee1bec60eaa08cf56d27613e6,"fix(T2337): Break words to ensure messages wrap, fall back to horizontal scrolling of messages

Fixes T2337"
bengotow,2015-07-31 00:32:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c3d4d53070a84292118866a1d20b7e262b5279d,2c3d4d53070a84292118866a1d20b7e262b5279d,"fix(T2338): You can now use keyboard shortcuts on focused BrowserWindows

Fixes T2338, and also removes a bit of dead code"
bengotow,2015-07-30 23:43:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/266e50607eed812ee76ccb68da7ff23316b264cb,266e50607eed812ee76ccb68da7ff23316b264cb,"fix(T2347): Alignment of attachment icon is now consistent row-to-row

Fixes https://phab.nylas.com/T2347. Note that it could still appear indented a bit if a thread has a particularly long timestamp, but should account for all cases."
bengotow,2015-07-30 23:34:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/9d8174460ff84b03457adb3041720a0179a64c63,9d8174460ff84b03457adb3041720a0179a64c63,"fix(T2408): On the Mac, show open / save dialogs as sheets

Fixes T2408"
bengotow,2015-07-30 21:51:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/07322b3b6c0b7dd58b25286fc8732dbf73c15e85,07322b3b6c0b7dd58b25286fc8732dbf73c15e85,"fix(T2418): Make buttons in the composer footer 4px taller

Fixes https://phab.nylas.com/T2418 (""Fixes"")"
bengotow,2015-07-28 16:25:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/79dfd0866a29122fd2a37df53c053a50044aed9f,79dfd0866a29122fd2a37df53c053a50044aed9f,"fix(unread-count): Add specs, fix logic in UnreadCountStore

Summary: Fixes T2376

Test Plan: Run 5 new specs

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T2376

Differential Revision: https://phab.nylas.com/D1805"
bengotow,2015-07-28 07:36:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/abca6ffceacabc40694be285e06eca68b2162097,abca6ffceacabc40694be285e06eca68b2162097,fix(spelling): Uprading => Upgrading
bengotow,2015-07-26 20:54:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/23afe673da8b8d2d3e75ec514b3b37eb5e0ba97d,23afe673da8b8d2d3e75ec514b3b37eb5e0ba97d,"bump(version): 0.2.2

- Fix script/bootstrap error"
bengotow,2015-07-25 02:48:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/c0682e4eb5a7b3a0654e13feeacb4e71de5ddca9,c0682e4eb5a7b3a0654e13feeacb4e71de5ddca9,fix(bootstrap): Fix syntax bug in script bootstrap
bengotow,2015-07-25 02:30:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/73a2f7c5c7bc92be9f2ccfa76461618b9612a4df,73a2f7c5c7bc92be9f2ccfa76461618b9612a4df,fix(composer): Remove post-install script
bengotow,2015-07-15 00:08:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a42bc7ac26f4629250b52f1cf780da6c24e39d7,5a42bc7ac26f4629250b52f1cf780da6c24e39d7,fix(window-manager): Stop bindng window state to config when quitting
bengotow,2015-07-14 23:26:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/9097d10e453493eb062ffb4c22e27d329ecbc1ad,9097d10e453493eb062ffb4c22e27d329ecbc1ad,"fix(window-showing): Continue running DOM timers in the main window even when it is not visible

This is a small fix that prevents the window from having to update when you re-show it."
bengotow,2015-07-14 23:24:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/1f748cc2fa445cc6acbe0ec043c469d78bcccc7d,1f748cc2fa445cc6acbe0ec043c469d78bcccc7d,"fix(T2117): Make draft body font size 15px instead of 15.9px

Fixes T2117 as much as possible. Still *slightly* kerned differently but there's not much we can do. DirectWrite font rendering just sucks on Windwos."
bengotow,2015-07-25 02:18:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/4850c678776f8589c5e6e0d4b6a327a2f157f240,4850c678776f8589c5e6e0d4b6a327a2f157f240,"bump(version) 0.2.1

Bug fix for broken dependency building"
bengotow,2015-07-25 02:12:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b751f252087ce687157de8cd1c74cac94695e15,8b751f252087ce687157de8cd1c74cac94695e15,fix(build): Actually install package dependencies
bengotow,2015-07-25 00:09:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/0beca3e93a65f12b55cdc48fa606c81e6a2a7f1c,0beca3e93a65f12b55cdc48fa606c81e6a2a7f1c,"bump(version) 0.2.0 - see release notes!

- Labels and folders!
    + Multicolor labels for Gmail users, folders for everyone else
    + View and remove labels in message view
    + Move mail into labels or folders using the new picker
    + Move mail into labels or folders in the sidebar via drag and drop
    + ""Folder"" in expanded message headers
- New icons and style tweaks
- Tracking pixel detection
    + We no longer ""view"" tracking pixels in your sent mail
- React Component hot-loading
- Hide Sidebar button (design is temporary)
- Draft syncback to the Nylas API
- Today view has been sunset for now
- Quoted text stripping has been rebuilt
    + No longer removes quoted text between inline responses
    + Now supports more quoted text formats
- Lots of bug fixes!"
bengotow,2015-07-25 00:02:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/90d78c8bea37a4111311a2f99884c9bf775d05af,90d78c8bea37a4111311a2f99884c9bf775d05af,fix(popover): Critical binding fix for popover
emorikawa,2015-07-24 21:27:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/2442e0d6b61ca4279ecbf181a86e229343e21074,2442e0d6b61ca4279ecbf181a86e229343e21074,"refactor(cruft): remove old Atom docs and other cruft

Summary:
Getting rid of things that I'm pretty sure we don't need. Lmk if you see
anything to the otherwise.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1799"
emorikawa,2015-07-24 21:21:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/90dbd9f6acaf4beaab709857ee8a3a97c23d218c,90dbd9f6acaf4beaab709857ee8a3a97c23d218c,fix(composer): fix tabbing in composer
bengotow,2015-07-24 21:10:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/d2833cfefa4e725266b75174424038dd19d14725,d2833cfefa4e725266b75174424038dd19d14725,"feat(hotloading): CJSX hotloading when running in dev mode

Summary:
# Conflicts:
#	static/components/tokenizing-text-field.less

Wat no

Test Plan: Tested with ci build

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1216

Differential Revision: https://phab.nylas.com/D1804"
emorikawa,2015-07-24 02:58:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/d06e45b6b1b015ec8816ddcf8a6b5ca208cb00d5,d06e45b6b1b015ec8816ddcf8a6b5ca208cb00d5,fix(objects): fix UpdateNylasObjectsTask
emorikawa,2015-07-24 02:42:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/5b7ca072cd8e1b82b583bdd5a02f70fb861e7e7c,5b7ca072cd8e1b82b583bdd5a02f70fb861e7e7c,"fix(popover): don't let popover overflow

Summary:
The popover class now will adjust itself until it fits within the window
frame. You don't see the intermediate state in the double render.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1795"
bengotow,2015-07-23 22:18:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/add780f28e78e841eac64f8ee3660b8b473cf2b9,add780f28e78e841eac64f8ee3660b8b473cf2b9,fix(message): Show folder in expanded headers
bengotow,2015-07-23 21:30:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/45fd754fd38307b18f2810f8fe944b72927dd6b7,45fd754fd38307b18f2810f8fe944b72927dd6b7,fix(thread-list): Cache `MailLabel` component instances to prevent needless rendering
bengotow,2015-07-23 21:12:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/7dfeabf7c994c4b72ccbc001264542e6cb2f3c3c,7dfeabf7c994c4b72ccbc001264542e6cb2f3c3c,fix(multiselect-bar): Do not render components inside action bar when it's hidden
emorikawa,2015-07-23 19:42:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/344d938c245523af1a40adf208d9a96fdb5a2b42,344d938c245523af1a40adf208d9a96fdb5a2b42,fix(message-store): fix scoping issue in message store
emorikawa,2015-07-23 19:33:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1d9ba623350dcf971bc1d8c743a2fe98596b5ad,f1d9ba623350dcf971bc1d8c743a2fe98596b5ad,feat(labels): replace account sidebar icon with proper image
emorikawa,2015-07-23 19:22:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b3dcd3e352069cdfc86bdf5a58f35dc0afb6344,0b3dcd3e352069cdfc86bdf5a58f35dc0afb6344,fix(styles): fix button padding and styles
emorikawa,2015-07-23 18:47:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/f22d154486fff88bbe0a595c32187b0109495090,f22d154486fff88bbe0a595c32187b0109495090,"feat(picker): new folder and label picker

Summary:
The new, styled folder and label picker!

Some highlights:
- Folder picker has custom icons and a divider
- Label picker has checkboxes with off, checked, and intermediate state
- Extracted LabelColorizer out of mail-label
- Search will bold the results it found
- Fixes to Tooltip to prevent it displaying at invalid moments
- Keyboard UX improvements to Menu

Test Plan: coming soon

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1790"
bengotow,2015-07-23 18:32:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/0aea79f0ba3db63dc47827a3df43fd274e624c41,0aea79f0ba3db63dc47827a3df43fd274e624c41,Fix specs
bengotow,2015-07-23 18:23:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1792a40dca59af4dff8c779e04f4f618a5278ef,e1792a40dca59af4dff8c779e04f4f618a5278ef,Move mac CI spec and publish notifications to #edgehill-ci
bengotow,2015-07-23 18:18:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/5acbdb09554c0f951c41e622e8f98857990ac5c5,5acbdb09554c0f951c41e622e8f98857990ac5c5,"fix(workspace): Support for hidden locations / columns

Summary:
- New control will likely be shortlived - SDW mocking up replacement for when settings UI lands
- New action for toggling location hidden
- New rule for mail labels: can't remove ""Sent""

Test Plan: Run tests - none new atm

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1782"
bengotow,2015-07-23 18:10:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/814ed76510783441cfe57465cd2b5e7d829e2f80,814ed76510783441cfe57465cd2b5e7d829e2f80,"feat(drag-threads): Move threads to folders/labels from thread list

Summary:
Drag threads to the folders / labels in the sidebar
WIP

Drag and drop is styled!

Test Plan: Tests WIP

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1785"
bengotow,2015-07-23 17:57:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0af770cf3fa280d9c0175a9bf1daf63e518858a,b0af770cf3fa280d9c0175a9bf1daf63e518858a,"feat(tracking-pixels): New MessageStore extension cuts out tracking pixels you've *sent* so you don't trigger them

Summary:
- Remove thread_participants prop, we don't use them anywhere and the underscore-case is ugly.

- Move autolinker into extension, update autolinker to 0.18.1 for phone number support

- document message.coffee, add isFromMe()

- Add tracking pixel extension that removes pixels from mail you *send*. Maybe more features later.

Test Plan: Run 1 new test! (woo...)

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1787"
emorikawa,2015-07-23 05:41:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/f29e0163aa0b7ce3e5ef3e69e6caaa735936e1dd,f29e0163aa0b7ce3e5ef3e69e6caaa735936e1dd,"fix(images): compress images

This reduced our image size by 92%. It saves us 4MB.

Several of our images had several hundred KB of plain text Adobe metadata
crap. Some had full blow Fireworks editing histories embedded in them.

I re-saved out these images and verified on both a diffing program and by
comparing the app that no pixels changed in the compression."
bengotow,2015-07-22 22:53:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/a436f2f8d3904e03aeda5424c4a6fddc53ebf557,a436f2f8d3904e03aeda5424c4a6fddc53ebf557,fix(contacts): No longer allow autocompletion to contacts without emails
bengotow,2015-07-22 18:18:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/2f2f5e09c54518a9c2419900693b251449e9949a,2f2f5e09c54518a9c2419900693b251449e9949a,"feat(draft-syncback): Sync drafts with Gmail (API does not support Exchange syncback)

Summary:
Sync drafts not files

WIP

Test Plan: Run syncback task specs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1772"
bengotow,2015-07-22 01:14:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b1b4d043bee6efd00211e47fd63fe797cf251fb,9b1b4d043bee6efd00211e47fd63fe797cf251fb,"fix(nylas-api): Fix broken promise logic in NylasAPI success/error blocks

- Restores file uploading / canceling behavior"
emorikawa,2015-07-21 21:16:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/b89fea38c0528ae3b7ec651f712053775f7b677d,b89fea38c0528ae3b7ec651f712053775f7b677d,"feat(labels): add a new label/folder picker

Summary:
This is the initial diff for the label picker UI. This is all of the
functionality and none of the CSS.

Test Plan: todo

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: sdw

Differential Revision: https://phab.nylas.com/D1761"
bengotow,2015-07-21 20:52:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a9d67953471c26427ddba3c7dfdedfd0b940eaef,a9d67953471c26427ddba3c7dfdedfd0b940eaef,"fix(SDW): Styling of various controls and buttons. See description

- Message reply dropdown uses new images. Fixes T2355
- New hover actions which are darker. Fixes T2358
- New reply icon in the message footer. Fixes T2359
- Toolbar buttons are the correct height. Fixes T2360
- Thread list selection state changes mail label style
- Removed dead assets"
emorikawa,2015-07-21 19:33:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a61974f64438db5c79331c51789304f9546a828,6a61974f64438db5c79331c51789304f9546a828,"fix(salesforce): better message syncing

Summary:
Fixes: T2196

While new incoming messages were syncing properly, a new message you sent
was not getting synced.

Since we re-fetch all of the `Messages` immediately after a send, we had
to be sure that the `sendDraftSuccess` Action fired after the new Message
had been persisted to the DB. Unfortunately, `_handleModelResponse` was
returning before the persist happened. This makes `_handleModelResponse`,
and by extension `NylasAPI::makeRequest`, resolve only after the new
models have been persisted to the DB.

We also were just dumping all of the HTML into the synced SalesforceObject
thread, making it entirely unreadable.

We now grab the `innerText` instead, which works great for basic
conversations. It usually includes the `On {date} {person} wrote:`
information, except for the first message, which we manually include.

The next version will likely create individual tasks for each individual
message, however, doing this properly will require a much more complex
Message <-> SFObject syncing task, as well as tying into the QuotedText
enging so we only sync the correct pieces. We'll also likely need a more
sophisticated plain text interpreter other then `innerText`. I wish we
could get access to the raw TEXT MIME part…

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: gleb

Differential Revision: https://phab.nylas.com/D1766"
bengotow,2015-07-21 18:58:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b506ac4c38b2c2879f9a5522a3a4b8d45acfba0,9b506ac4c38b2c2879f9a5522a3a4b8d45acfba0,fix(update-object-task): Task MUST return a status code after rolling back
bengotow,2015-07-21 18:50:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/a272761951ce4d7515778592e77efd48f7d6aeb5,a272761951ce4d7515778592e77efd48f7d6aeb5,"fix(labels): Labels in the thread list and in the message subject line

Summary: Mail labels

Test Plan: No tests atm, just visual code

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1774"
bengotow,2015-07-20 23:56:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/b26081a7413c5b308f784a2dd4e68b5fd968bec3,b26081a7413c5b308f784a2dd4e68b5fd968bec3,"fix(account-sidebar): Fix icons and ordering—move more into the CategoryStore

Note: Starred is conspicuously missing. That label is being removed from the backend and exposed as ""starred"" which will unfortunately behave differently."
emorikawa,2015-07-21 18:34:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/98a57e434c8706f37fe57ed5c2ec65c30cb8a669,98a57e434c8706f37fe57ed5c2ec65c30cb8a669,"fix(quoted-text): new system to remove quoted text

Summary:
We need to remove quoted text completely from bodies in a composer.
Unfortunately, that makes it very difficult to determine how to put it
back in.

For now the scheme is to append the quoted text at the end. However, that
means that we need to only pull out quoted text at the end of a message.

Unfortunately there are lots of places that quoted text appears inline
with regular text.

Determining whether or not some content is at the ""end"" of a message
turned out to be non-trivial.

We now have a new `DOMUtils` that looks for empty areas at the end.

We also have a new quoted HTML parser that finds trailing quotes.

Fixes T2335

Test Plan: lots of new quoted text tests

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T2335

Differential Revision: https://phab.nylas.com/D1773"
bengotow,2015-07-20 19:41:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/20ca9b5ac580783ee25601e21a35fb21f5b17ac4,20ca9b5ac580783ee25601e21a35fb21f5b17ac4,fix(database): Incorrectly creating join insert queries for exactly 200 objects
bengotow,2015-07-20 18:53:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/78631a4f018d94cefc873384823190cdcd055875,78631a4f018d94cefc873384823190cdcd055875,"fix(today): Temporarily remove today view

Fixes T2342"
bengotow,2015-07-20 17:39:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/809b43d8a7f895f819fbb94608b3ae2c8f120f7d,809b43d8a7f895f819fbb94608b3ae2c8f120f7d,bump(version): 0.1.11
bengotow,2015-07-19 17:56:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/5d0907d7f15b6e60bf2107be7bf84d67c4508c79,5d0907d7f15b6e60bf2107be7bf84d67c4508c79,"fix(build): Remove explicit .coffee extensions in UpdateThreadsTask, update linter to check for these"
bengotow,2015-07-18 01:51:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/5f66ee4cefcc5e29950a4a50bff3073caa1e516d,5f66ee4cefcc5e29950a4a50bff3073caa1e516d,"fix(archive): With labels, ""archive"" means ""remove from current label and add archive"", not ""remove from inbox"""
bengotow,2015-07-18 01:28:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/58dcf3ae22b737afaa3d81993dfe2e15f29e2742,58dcf3ae22b737afaa3d81993dfe2e15f29e2742,"fix(uploads): Animate upload bars, throttle FileUploadStore updates triggered by progress changes"
bengotow,2015-07-18 00:13:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/563131636071e51044fb064edf3facd48fd1bae8,563131636071e51044fb064edf3facd48fd1bae8,fix(specs): Accidentally broke specs because they included my user folder
bengotow,2015-07-17 23:36:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/642121385daa9f8ff7af3907e6b33dcf201d1e78,642121385daa9f8ff7af3907e6b33dcf201d1e78,"fix(attachments): specs, bug fixes for attachments. See details.

Summary:
- You cannot drag an attachmentComponent unless it represents a fully downloaded file on disk.
- You cannot drag and drop an item from a composer onto the same composer.
- Attachments on expanded messages start downloading as soon as it's viewed (necessary for drag and dropping attachments, also probably best. Previously was just images.)
- You can now cancel an attachment download. Was really broken.

Test Plan: Run many new specs!

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1196

Differential Revision: https://phab.nylas.com/D1764"
bengotow,2015-07-17 23:34:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/741f360df5c368b83f0a60aa237ae16cb223a291,741f360df5c368b83f0a60aa237ae16cb223a291,fix(thread-list): Show an attachment indicator using thread metadata
bengotow,2015-07-17 23:17:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/63f5c4091dbdcc6cf3f70850566b6ec3eac196ec,63f5c4091dbdcc6cf3f70850566b6ec3eac196ec,fix(account-sidebar): Remove oversize padding SDW doesn't like
bengotow,2015-07-17 20:25:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/728135e07d40a7db0371406f2abf546f14f0205a,728135e07d40a7db0371406f2abf546f14f0205a,"fix(close): Closing a draft always works on the first try

We were accidentally firing atom.close() in the same tick that we returned false and canceled the close."
bengotow,2015-07-17 03:34:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/12e692a26c41ef174d6ecfaa070fb8fa58e588d2,12e692a26c41ef174d6ecfaa070fb8fa58e588d2,fix(notifications): > 5 should be >= 5
bengotow,2015-07-17 02:28:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/b52077c1c3335881b5f213c61968117fc26a806d,b52077c1c3335881b5f213c61968117fc26a806d,fix(notifications): make notifications clickable
bengotow,2015-07-17 00:51:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/3983269004a081b348b7ab79025a149fd4dd3da5,3983269004a081b348b7ab79025a149fd4dd3da5,"fix(toolbar-style): Add gradient to top toolbar, blurred styling"
bengotow,2015-07-17 00:47:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/26705d8cfe181c4fb6187572c5bdc678ace92275,26705d8cfe181c4fb6187572c5bdc678ace92275,"fix(migration-path): Very basic database versioning with re-fetch

Summary: The diff adds very basic versioning to the database via sqlite's built-in `user_version`. If the version is bumped in DatabaseStore, it means that all existing data should be blown away and the user should have to refetch the entire cache. Critically, this does not log the user out.

Test Plan: Run no new tests :-(

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1760"
emorikawa,2015-07-16 15:54:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/3954289cf4750a62355121954eea4426622aef55,3954289cf4750a62355121954eea4426622aef55,"WIP: This is the initial diff for new folders & labels.

Summary:
There are now two objects, Folders & Labels. These inherit from `Category`
(that's what Eben said they were using on the backend).

There are two separate tasks.

1. MoveToFolderTask
2. ApplyLabelsTask

It turns out that the semantics between the two are quite different.
The reverse operation for moving to a folder is a bit tricky.

As of 7-8-15, the Tasks are pretty much complete. I need to write tests
for them still and do some manual testing in the client.

Test Plan: Writing specs

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1724"
emorikawa,2015-07-16 14:41:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/652eaeff2a6ba380e3a4f087596116af847e13a0,652eaeff2a6ba380e3a4f087596116af847e13a0,"fix(composer): performance improvement in composer

Summary:
The issue was that on every key stroke the whole composer, participants
and all, were getting re-rendered. According to React.perf, the
`TokenizingTextField`s were taking a very long time to render and never
changing. This was fixed by adding a simple `shouldComponentUpdate` check.

The composer also has several regions that only change when the `props`
do. These are now cached. The cache reset when the `props` do.

After all of that, rendering the whole composer still takes 20-40ms. If
you're tying in the composer very quickly, text entry can approach that
render time. This starts to stack multiple React rendering passes up and
bogs the whole system down.

Luckily, we can simply render the composer less frequently. Now, after
changes are persisted to the `DraftStoreProxy`, we simply debounce the
proxy `trigger`. The users don't see this because the native
`contenteditable` field will update immediately. When the debounced proxy
trigger fires, it will transparently update the view to the latest state.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: mg

Differential Revision: https://phab.nylas.com/D1749"
bengotow,2015-07-16 03:08:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/c31832a43ae619e17a0dadf72fa2cddfa8b0034d,c31832a43ae619e17a0dadf72fa2cddfa8b0034d,bump(version): 0.1.10
bengotow,2015-07-16 03:06:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/67c48b51363d4311ea5357c7977ea34c6747b578,67c48b51363d4311ea5357c7977ea34c6747b578,"fix(drag-n-drop): Remove react-dnd, display dropzone, allow tokens to be dragged out of app as plaintext

React-dnd is a nice library but it assumes it's going to be the only thing managing your drag and drop in the entire app. It also hides the underlying dataTransfer object so it's difficult to implement native drag and drop behaviors other than for Files and Urls, which they special-case.

Implementing it manually really isn't hard, and we can do things like attach a text/plain version of contact data to the contact drag.

Fixes T2054"
bengotow,2015-07-15 23:52:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/425856b053a5ef41323dcdb2729db79381da7a6b,425856b053a5ef41323dcdb2729db79381da7a6b,"fix(file-uploads): Smattering of bug fixes related to uploading & canceling uploads

Summary:
Cancelling a file upload properly makes the task return Task.Status.Finished (previously it was broken and returning Task.Status.Retry)

Dragging a directory now gives you a nice error message

Aborting an upload now looks for the task with the given ID, not a task with the given filepath since there could be identical uploads happening in other windows

Make it more explicit that the uploadId is not the task ID

Add a few tests

Test Plan: Run new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1750"
bengotow,2015-07-15 23:48:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/b7a0ac0f7539d0babfee31a28237132d36fa1625,b7a0ac0f7539d0babfee31a28237132d36fa1625,fix(draft-list): Nesting of participants class name causing problems
bengotow,2015-07-15 20:49:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/38c6f8b866f6045777317303193628d8ea300cb2,38c6f8b866f6045777317303193628d8ea300cb2,"fix(attachments): Double-click to view instead of single-click

This is related to T2309"
systemizer,2015-07-15 20:18:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/c5acf8fcb222f0289a205f3c783869b78c58bfbe,c5acf8fcb222f0289a205f3c783869b78c58bfbe,"Separate notifications if less than five

Summary: If less than 5 new unread notifications, then show notification for each new message. Each message is separated by 1 second

Test Plan: Added test to make sure Notification is called multiple times

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1295

Differential Revision: https://phab.nylas.com/D1744"
bengotow,2015-07-15 20:15:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/d66f0fedbd0f6d42e0addc77ceec1b9291759d98,d66f0fedbd0f6d42e0addc77ceec1b9291759d98,"fix(*): A few small bug fixes, immediate refres on renderer process crash

Summary:
fix(drafts): One failed promsie breaks ChangeSet.commit forever

Move the quoted text button so it's beneath the quoted text not at the bottom of the composer, also fixes problem with it overlapping content slightly

When the main window crashes, reload it immediately

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1742"
bengotow,2015-07-15 20:15:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/abcf2b7dad71d98b8662d24a8d51e3e19c7fdbc4,abcf2b7dad71d98b8662d24a8d51e3e19c7fdbc4,"feat(attachments): Tons of tiny fixes to attachments, drag-and-drop attachments to other apps

Summary:
consolidate all the ""untitled"" stuff into a convenience method on the File itself. Previously it'd show ""Unnamed Attachment"", download as ""Untitled"" and open as ""<file.id>"". Now it's consistent everywhere and chooses names based on the contenttype (Event.ics).

Rewrite CSS rules for uploads and attachments to be simpler

- remove container divs and classnames from things that have no CSS
- switch to using Flexbox so it's not necesary to have so many containers
- remove zIndex hacks, apply overflow rules to name div only, so long filenames don't make action button unclickable
- consolidate CSS classnames for uploads/attachments
-

Other style fixes

- cursor ""default"" instead of text insertion on image attachments
- cursor ""default"" on action buttons
- image uplaods / attachments with long filenames truncate with ellpsis
- attachments are not indented by an extra 15px in message bodies

Prevent progress bar overflow (was ending above 100%, 100.12315%...)

Update FileDownloadStore so it never creates Download objects when file is downloaded already

- Previously, the download itself decided if it would be a no-op, but this meant the download was around for a split second and you'd see progress indicators flash for a moment when opening/saving an attachment.

Upgrade FileDownloadStore use of promises

Restore Image attachment drag and drop - was broken because the name gradient thing was covering the entire drag region.

Allow file attachments to be drag and dropped to the finder and other applications 😍😍😍

Test Plan: Tests still pass

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1745"
emorikawa,2015-07-15 18:56:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/4223fa089d33455b35c98e00ef36dd7ce0df257b,4223fa089d33455b35c98e00ef36dd7ce0df257b,"fix(tooltip): change tooltip delay to 2 seconds

Prevent from ever showing up in the corner"
bengotow,2015-07-14 23:08:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/9431da532152136a51feaafc2ff71ec0a3a6314f,9431da532152136a51feaafc2ff71ec0a3a6314f,"fix(T2118): Center popout titles on windows/linux

Fixes T2118"
bengotow,2015-07-14 19:27:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c5b2d175fe275badc88ea7ba786e384eae6e6b6,9c5b2d175fe275badc88ea7ba786e384eae6e6b6,"bump(version): 0.1.9

New In This Release:
- Reply/Reply-All keyboard shortcuts now update existing draft rather than creating another new one.
- Extensions can adjust new drafts before they're displayed
- Signatures extension! (signatures still need to be setup manually)
- Pristine drafts are discarded correctly when you leave a thread in two-pane mode
- Fix for ""destroy draft"" task failing
- Fix for ""double sending"" issue
- Upgrade to Electron 0.29.2
- New ""Show / hide quoted text"" control
- Bug fixes"
bengotow,2015-07-14 19:20:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/4959944afb704e392f712f303db12908792ddc9c,4959944afb704e392f712f303db12908792ddc9c,"feat(signatures): Initial signature support

Summary:
- Draft Store extensions can now implement `prepareNewDraft` to have an opportunity to change a draft before it's displayed for the first time.

- When composers are torn down, they delete their draft if it is still pristine. This makes the behavior of closing unedited popout drafts the same as leaving unedited inline drafts.

- The DraftStoreProxy keeps the initial body of the draft *if* it started in a pristine state. This means ""is the body empty"" is just a simple == check, and it takes into account anything added to the body by extensions.

- Calling Actions.destroyDraft doesn't blow up anymore if the draft session can't be found. This was a bug and meant that you couldn't destroy drafts which hadn't been previously edited, and also meant that bad things(tm) happened when you called destroyDraft twice, which seemed like overkill.

- DestroyDraft task now exits gracefully when the draft cannot be found.

You can test this feature by adding the following to your config.cson:

```
  signatures:
     NAMESPACEID: ""<br/><br/><div id=\""Signature\""><div id=\""divtagdefaultwrapper\"" style=\""font-size:12pt; color:#000000; background-color:#FFFFFF; font-family:Calibri,Arial,Helvetica,sans-serif\""><p></p><table border=\""0\"" cellpadding=\""0\"" cellspacing=\""0\"" width=\""450\"" style=\""font-family:'Times New Roman'; table-layout:fixed\""><tbody><tr><td class=\""logo-td\"" align=\""left\"" valign=\""top\"" width=\""76\""><p style=\""margin-bottom:10px; margin-right:10px; font-family:Helvetica,Arial,sans-serif; font-size:14px; line-height:16px\""><a href=\""http://www.nylas.com/\"" class=\""clink logo-container\"" style=\""text-decoration:none\""><img alt=\""Nylas\"" border=\""0\"" class=\""sig-logo\"" height=\""80\"" width=\""66\"" style=\""-webkit-user-select: none;\"" src=\""https://s3-us-west-2.amazonaws.com/nylas-static-assets/nylas-email-signature.png\""></a></p><p class=\""social-list\"" style=\""font-size:0px; line-height:0; font-family:Helvetica,Arial,sans-serif\""></p></td><td align=\""left\"" valign=\""top\"" nowrap=\""nowrap\"" class=\""spacer-td\"" width=\""16\"" style=\""border-left-width:2px; border-left-style:solid; border-left-color:rgb(30,162,162)\""><img width=\""10\"" style=\""-webkit-user-select: none;\"" src=\""https://s3.amazonaws.com/htmlsig-assets/spacer.gif\""></td><td align=\""left\"" valign=\""top\"" nowrap=\""nowrap\"" class=\""content-td\"" width=\""368\""><div class=\""content-pad\""><p style=\""font-family:Helvetica,Arial,sans-serif; font-size:14px; line-height:16px; color:rgb(33,33,33); margin-bottom:10px\""><span class=\""txt signature_name-target sig-hide\"" style=\""font-weight:bold; display:inline\"">Gleb Polyakov</span>&nbsp;<span class=\""email-sep break\"" style=\""display:inline\""><br></span><a class=\""link email signature_email-target sig-hide\"" href=\""mailto:gleb@nylas.com\"" style=\""color:rgb(30,162,162); text-decoration:none; display:inline\"">gleb@nylas.com</a><span class=\""signature_email-sep sep\"" style=\""display:inline\"">&nbsp;/&nbsp;</span><span class=\""txt signature_mobilephone-target sig-hide\"" style=\""display:inline\"">404-786-4100</span></p><p style=\""font-family:Helvetica,Arial,sans-serif; font-size:14px; line-height:16px; margin-bottom:10px\""><span class=\""txt signature_companyname-target sig-hide\"" style=\""font-weight:bold; color:rgb(33,33,33); display:inline\"">Nylas</span>&nbsp;<span class=\""company-sep break\"" style=\""display:inline\""><br></span><span class=\""address-sep break\""></span><span class=\""address2-sep break\""></span><span class=\""website-sep break\""></span><a class=\""link signature_website-target sig-hide\"" href=\""http://www.nylas.com/\"" style=\""color:rgb(30,162,162); text-decoration:none; display:inline\"">http://www.nylas.com</a></p></div></td></tr><tr><td colspan=\""3\""></td></tr><tr><td colspan=\""3\""></td></tr><tr><td colspan=\""3\""><p class=\""txt signature_disclaimer-target\"" style=\""font-family:Helvetica,Arial,sans-serif; color:rgb(33,33,33); font-size:9px; line-height:12px; margin-top:10px\""></p></td></tr></tbody></table><p></p></div></div>""
```

specs for draft store extension hooks, some draft store refactoring

Test Plan: Run a few new specs that make sure extensions are run

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1741"
bengotow,2015-07-14 00:46:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/4c85481c8fc47d50cc9ff8de31f04599e1f0b425,4c85481c8fc47d50cc9ff8de31f04599e1f0b425,"fix(nylas-api): Handle model responses with duplicate entries and warn, avoid guard assertion failure in DatabaseStore"
bengotow,2015-07-14 00:45:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b67801bfa19eb911638ce86688decf5e1baddc5,0b67801bfa19eb911638ce86688decf5e1baddc5,fix(destroy-draft): Update destroy draft task to reflect new tasks API
bengotow,2015-07-13 23:33:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/a384b7621c716cfce54ee3e04a16816ff51a0725,a384b7621c716cfce54ee3e04a16816ff51a0725,"fix(back): Remove ""Back to "" prefix, centralize into back button itself, align using vertial-align instead of margin-top

Summary: Fixes T2135

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T2135

Differential Revision: https://phab.nylas.com/D1731"
bengotow,2015-07-13 23:30:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/eaeeb9619b6a5ab816ab2de3b29a5498f3f425d2,eaeeb9619b6a5ab816ab2de3b29a5498f3f425d2,"fix(reply-behavior): Reply keyboard shortcuts update existing draft rather than creating new ones

Summary:
When bcc or cc is added, the ComposerView should show the fields. We should never hide a populated field!

Move the logic for determining message reply / replyTo participant sets into the message object. This seems OK because the functions don't modify the message and deal entirely with message attributes

Fix miscelaneous scrollbar issue

The MessageList does not always fire a composeReply action in response to keyboard shortcuts and can update the existing draft instead

There are a couple goals here:
- If you have an existing draft, command-R and command-shift-R should never create a new draft, they should just update and focus the existing draft.
- If you actually press the Reply button on the message item it should still create a new draft. It's still possible to have two.
- If you press Command-R and add a participant, and then press Command-Shift-R, it should add participants but not blow away the one you've added manually.
- If you press Command-Shift-R and then Command-R, it should remove the participants that were part of the ""reply all"", but leave other participants you've added untouched.

Test Plan: Run new tests!

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T2140

Differential Revision: https://phab.nylas.com/D1734"
bengotow,2015-07-13 23:28:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/03b248cab2837775b366a189cedfed4b2be7074d,03b248cab2837775b366a189cedfed4b2be7074d,"fix(quoted-text-button): New, more obvious design for quoted text toggle

Test Plan: Run existing tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T2282

Differential Revision: https://phab.nylas.com/D1735"
bengotow,2015-07-13 23:28:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/f11bbe313ae6426bfa5b55a9101c6a4eee9a391b,f11bbe313ae6426bfa5b55a9101c6a4eee9a391b,"bump(electron): 0.29.2 and a few minor bug fixes

Summary:
Saving only 50 models at a time instead of 100 fixes a reproducible issue with database errors during initial sync on my machine. With 100, it reports ""unexpected ; on line 2123..."" during the query.

Only the main window should update the unread badge count.

Test Plan: Tests still pass and it seems like everything is still functional.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1736"
emorikawa,2015-07-13 15:01:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/57c96dcdd8c46e3990335288b0b3d0dd63d590cf,57c96dcdd8c46e3990335288b0b3d0dd63d590cf,"fix(composer): remove colon from ""Subject"""
emorikawa,2015-07-13 14:50:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/5df4ac8e0bc5574efaf25d97b6a660bd714a813a,5df4ac8e0bc5574efaf25d97b6a660bd714a813a,"fix(composer): fix double-sending issue

Summary:
Fixes T2275

Messages were still double sending sometimes because it took a while for
the Task to end up on the TaskQueue, which is what we were using to
determine re-sendability

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T2275

Differential Revision: https://phab.nylas.com/D1728"
emorikawa,2015-07-13 14:25:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/93ea9c6165268728436e04e32b077c4cffe7fb13,93ea9c6165268728436e04e32b077c4cffe7fb13,"fix(*): can select participant with space if it's an email

Summary:
Fixes T2272

If the label is too long, the unread icons will now ellipsis truncate the
text correctly instead of being pushed off of the side.

I made the max-width of the sidebar 17px wider to allow for Karim's french
""Inbox"" translation.

Fixes T2266

Added some more protection to places where filenames could be blank when
downloading.

This was partially fixed by Rob's D1685

Fixes T2258

You can now finish selecting a participant by pressing `space`, but only
when the participant looks like an email address.

When you do this we directly add the email address to the chip instead of
looking up a contact. This allows you to send just to the email instead of
adding a potentially erroneous name into the input field

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T2272, T2266, T2258

Differential Revision: https://phab.nylas.com/D1729"
emorikawa,2015-07-13 14:12:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/ca95d03c5d87a0e653452f80f2c91c7cc113ea19,ca95d03c5d87a0e653452f80f2c91c7cc113ea19,"fix(composer): warn when empty body

Summary:
Fixes T2276
Since the new `QuotedHTMLParser` uses full HTML parsing, when you ask it
for the version of the document without the quoted nodes, it returns a
full html document. Unfortunately I forgot about the 2 <br> tags we
manually generate when creating a reply to a message with quoted text.

This is a pretty brittle solution, but considerably easier then checking
if the contents really are ""blank"". We could check innerText, but would
have to worry about img tags and other text-invisible-but-still-valid
elements. Since we control the generation of the reply in the
`DraftStore`, I think this is acceptable for now

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T2276

Differential Revision: https://phab.nylas.com/D1730"
emorikawa,2015-07-09 21:32:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/07ef2e51a0125a41de6026be0132da0462235e69,07ef2e51a0125a41de6026be0132da0462235e69,bump(version): 0.1.8
emorikawa,2015-07-09 21:05:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/1af9f07f850aedcbcb397829d38a2047cb052bd2,1af9f07f850aedcbcb397829d38a2047cb052bd2,fix(db): fix bug where seutp queries sometimes aren't run
emorikawa,2015-07-08 20:25:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/5067bd3cff17e99e272087b8e5cbde3fa6a672e9,5067bd3cff17e99e272087b8e5cbde3fa6a672e9,feat(api): add api-experimental.nylas.com as login option
emorikawa,2015-07-08 16:51:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8912e0e2e597f384e44488b041a81e0d04ae8f1,e8912e0e2e597f384e44488b041a81e0d04ae8f1,"feat(quoted-text): New quoted text engine

Summary:
Add email reply parser

Quoted text detection for HTML

More blockquote specs

Added 'On … wrote:'

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1719"
bengotow,2015-07-07 17:38:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/45bb16561f9945e45dddd597b1e2b152ccb66bce,45bb16561f9945e45dddd597b1e2b152ccb66bce,"feat(offline-mode, undo-redo): Tasks handle network errors better and retry, undo/redo based on tasks

Summary:
This diff does a couple things:

- Undo redo with a new undo/redo store that maintains it's own queue of undo/redo tasks. This queue is separate from the TaskQueue because not all tasks should be considered for undo history! Right now just the AddRemoveTagsTask is undoable.

- NylasAPI.makeRequest now returns a promise which resolves with the result or rejects with an error. For things that still need them, there's still `success` and `error` callbacks. I also added `started:(req) ->` which allows you to get the underlying request.

- Aborting a NylasAPI request now makes it call it's error callback / promise reject.

- You can now run code after perform local has completed using this syntax:

```
    task = new AddRemoveTagsTask(focused, ['archive'], ['inbox'])
    task.waitForPerformLocal().then ->
      Actions.setFocus(collection: 'thread', item: nextFocus)
      Actions.setCursorPosition(collection: 'thread', item: nextKeyboard)
    Actions.queueTask(task)
```

- In specs, you can now use `advanceClock` to get through a Promise.then/catch/finally. Turns out it was using something low level and not using setTimeout(0).

- The TaskQueue uses promises better and defers a lot of the complexity around queueState for performLocal/performRemote to a task subclass called APITask. APITask implements ""perform"" and breaks it into ""performLocal"" and ""performRemote"".

- All tasks either resolve or reject. They're always removed from the queue, unless they resolve with Task.Status.Retry, which means they internally did a .catch (err) => Promise.resolve(Task.Status.Retry) and they want to be run again later.

- API tasks retry until they succeed or receive a NylasAPI.PermanentErrorCode (400,404,500), in which case they revert and finish.

- The AddRemoveTags Task can now take more than one thread! This is super cool because you can undo/redo a bulk action and also because we'll probably have a bulk tag modification API endpoint soon.

Getting undo / redo working revealed that the thread versioning system we built isn't working because the server was incrementing things by more than 1 at a time. Now we count the number of unresolved ""optimistic"" changes we've made to a given model, and only accept the server's version of it once the number of optimistic changes is back at zero.

Known Issues:

- AddRemoveTagsTasks aren't dependent on each other, so if you (undo/redo x lots) and then come back online, all the tasks try to add / remove all the tags at the same time. To fix this we can either allow the tasks to be merged together into a minimal set or make them block on each other.

- When Offline, you still get errors in the console for GET requests. Need to catch these and display an offline status bar.

- The metadata tasks haven't been updated yet to the new API. Wanted to get it reviewed first!

Test Plan: All the tests still pass!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1694"
bengotow,2015-07-06 20:02:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/af6f3c80b2b5c1eda84c3a7b374a958695d659fc,af6f3c80b2b5c1eda84c3a7b374a958695d659fc,bump(version): 0.1.7
bengotow,2015-07-06 18:23:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/f13d0e04a689828584d2f332ff8b428e660c3b2d,f13d0e04a689828584d2f332ff8b428e660c3b2d,"fix(getting-started): New menu item, sample package for devs"
bengotow,2015-07-02 17:24:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/72dd3171add2eadcd21d55a37ef086089d7e3b5f,72dd3171add2eadcd21d55a37ef086089d7e3b5f,fix(database): Do not send empty error JSON
bengotow,2015-07-02 17:15:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/9542d1179eff6fe26dd72ace854dc27a231ae406,9542d1179eff6fe26dd72ace854dc27a231ae406,fix(linux): Resolve linux launch issue due to missing require
bengotow,2015-07-02 17:15:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef960b21c83fee93bf6fb520711d219c1cf21d7f,ef960b21c83fee93bf6fb520711d219c1cf21d7f,"fix(database): Ensure errors reach the renderer-side by sending them as JSON strings, reinflating as Errors"
bengotow,2015-07-02 16:54:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3a90e4f5df2dfff5c217b980fd17794538ede91,c3a90e4f5df2dfff5c217b980fd17794538ede91,fix(downloads): Cannot download unnamed attachments (resolves Sentry #598)
bengotow,2015-07-02 16:54:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/4fc16b2d6ed71d3e272f73b6e56ab899830d68c9,4fc16b2d6ed71d3e272f73b6e56ab899830d68c9,"fix(nylas-api): When offline, response is undefined"
bengotow,2015-06-30 18:03:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/bfec550cf1883a0bea0ff879c6893d808f7cdc30,bfec550cf1883a0bea0ff879c6893d808f7cdc30,"updater(*): Send current platform in update check, publish to S3 in /darwin/ folder"
bengotow,2015-06-30 00:26:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/9aadd52afc1ef03163f2ed0041b1de6d7ef3d042,9aadd52afc1ef03163f2ed0041b1de6d7ef3d042,"fix(quoted-text): Do not consider gmail_extra quoted text

I don't know what gmail_extra is used for, but it appears from @mg's sample messages that it does not indicate quoted regions of the body. We also weren't looking for it in our hasQuotedText function."
bengotow,2015-06-30 00:25:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/cbf82bf443dc0f749b53c0625469005e8c9dde77,cbf82bf443dc0f749b53c0625469005e8c9dde77,fix(attachment-css): Tiny style tweaks
bengotow,2015-06-27 01:03:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b8a081c14d722fdcd73901ce0fa254f1a6a391d,4b8a081c14d722fdcd73901ce0fa254f1a6a391d,fix(button-dropdown): merge causing style conflicts
bengotow,2015-06-27 00:58:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/e6cbc47716ae178fc2aa9701993f7b1f5a31e9a0,e6cbc47716ae178fc2aa9701993f7b1f5a31e9a0,bump(version): 0.1.6
bengotow,2015-06-26 23:35:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/27315d6196cdbbf9f9b9f52d64e9ec687fc3a05b,27315d6196cdbbf9f9b9f52d64e9ec687fc3a05b,"fix(database): Bad reference to `queryKey` bricking app after slow queries!

Also changed _query to just run a callback because we were doing callback => promise => callback in the IPC handler."
bengotow,2015-06-26 23:15:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/41caae2d2f99138cee3ddc319728558728c48ddb,41caae2d2f99138cee3ddc319728558728c48ddb,"fix(search): Reliably clear back to previously selected Tag when you click ""X""

Fixes T1173"
bengotow,2015-06-26 23:08:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c901e090afca3092b3018c5982cdca60a9474ce,1c901e090afca3092b3018c5982cdca60a9474ce,fix(invariant): Warnings when trying to settle scroll state after unmount
bengotow,2015-06-26 23:02:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/4621f432b0db35b52eb833d58c73b8784b0c2065,4621f432b0db35b52eb833d58c73b8784b0c2065,"fix(counts): Centralize handling of unread count / draft count

Fixes T2155 and T1765"
bengotow,2015-06-26 22:03:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/c6eeddd8e713403632b679d8108d4a05a2e991c2,c6eeddd8e713403632b679d8108d4a05a2e991c2,"fix(reply-dropdown): Improved assets and dropdown styles, hit regions"
bengotow,2015-06-26 21:47:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/e614bea92ed8f69e3de65d569cd9d136adacf9af,e614bea92ed8f69e3de65d569cd9d136adacf9af,"fix(T2049): in 2-pane mode, keyboard actions are applied to selection, not message you are viewing

Fixes T2049 and moves ownership of the reply/reply-all/forward actions to the MessageList, which Rob did for starring and actually makes more sense."
bengotow,2015-06-26 20:49:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/51878453a31b5bbc9a9ffba1e981d67a543dafa3,51878453a31b5bbc9a9ffba1e981d67a543dafa3,"fix(T2138): Clicking the area ""around"" the arrow inside the button doesn't trigger it

Fixes T2138"
bengotow,2015-06-26 20:26:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/19a9a68cc224318c2c28c386fd0eca590d0d310f,19a9a68cc224318c2c28c386fd0eca590d0d310f,bump(version): 0.1.5
emorikawa,2015-06-26 18:17:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d1c4a6e3a86a7476d32a07cfa9c8b20dca1ff63,1d1c4a6e3a86a7476d32a07cfa9c8b20dca1ff63,fix(db): fix database setup
bengotow,2015-06-26 17:54:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/926c623fba6a9082e50f5e08e931145269e71d51,926c623fba6a9082e50f5e08e931145269e71d51,fix(windows): Bad merge
bengotow,2015-06-26 17:50:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/2499e7b57b2daa558b446210acf44147f6c4280e,2499e7b57b2daa558b446210acf44147f6c4280e,"fix(windows): Minor changes to support windows

Summary: Small tweaks to fix the windows build. Details in inline comments

Test Plan: Run windows build

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1689"
bengotow,2015-06-26 17:38:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/00d6a115127cff5262c592f7b217e42ae3dea634,00d6a115127cff5262c592f7b217e42ae3dea634,"fix(assets): New toolbar icons, shadows to achieve less heavy edges on messages

Summary: Just visual changes

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1695"
emorikawa,2015-06-26 14:42:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8d24ea1b5a38a8f7084281523ed3486761c7d05,e8d24ea1b5a38a8f7084281523ed3486761c7d05,"refactor(DB): promisify database

Summary:
WIP. The app launches and works for me. I still need to fix the tests
just the DB ones though :D

I changed the `DatabaseProxy` into a `DatabaseConnection` object. It will
request a fully instantiated databse from the backend Browser.

If we're already setup, it'll connect straight to the existing DB.

If we're not setup, then it'll create a new database and run the inital
schema migration on it. The `_createNewDatabase` promise won't resolve
until the migration has run.

Until we add in a more sophisticated migration system and get rid of the
stupid `modelClassMap` that's shoved in `Utils`, I'm passing in a series
of `_setupQueries()` to get everything started.

The `DatabaseConnection` is also the one responsible for queuing up
queries until the DB is fully populated and ready to go.

We actually get a lot of queries before we're setup because a lot of
Stores will make DB requests on `require` in their `constructor` or `init`
methods. (remember all the times we call `_populateStore` in `init`).

Now those queries are aggregated by the `DatabaseConnection` and then
executed sequentially.

Our methods like `persistModel` now resolve only after both the queries
have completed AND their corresponding `triggerLater` has completed as
well.

Test Plan: in progress

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1688"
emorikawa,2015-06-26 14:06:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f7017a8877eeaf63c6b40c0acff31ae7c1482e1,6f7017a8877eeaf63c6b40c0acff31ae7c1482e1,"fix(*): minor fixes

Summary:
Fixes T1905 - Gost line in recipients field
Fixes T1877 - Collapsed dates should not show time

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1877, T1905

Differential Revision: https://phab.nylas.com/D1671"
grinich,2015-06-24 20:41:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/af291423cb7e267a80b4d1cd05dc90226b1a8604,af291423cb7e267a80b4d1cd05dc90226b1a8604,add win32 exe renaming
bengotow,2015-06-23 22:21:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/03e0e9d9606b8f5bb6eea5b1c4f72f14738743c8,03e0e9d9606b8f5bb6eea5b1c4f72f14738743c8,"fix(composer): Show a scrollbar in the popout composer

Summary:
Fixes T1990

Change the ScrollRegion component so that you can optionally provide a getScrollbar prop that resolves to a ScrollRegion.Scrollbar component. This allows you to easily put the Scrollbar outside of the ScrollRegion if necessary.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1990

Differential Revision: https://phab.nylas.com/D1665"
emorikawa,2015-06-23 00:12:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/6363bed89bdf47461628f48dfadf1cca8fe67fa4,6363bed89bdf47461628f48dfadf1cca8fe67fa4,fix(build): fix tello issue and less linter issue
emorikawa,2015-06-22 23:28:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/d08aa7ca920bcfa52a81b7bad84477ec31596a23,d08aa7ca920bcfa52a81b7bad84477ec31596a23,fix(less): import for build script
emorikawa,2015-06-22 22:49:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/7739f08e848be90e6a9bab4caa423c527c911e78,7739f08e848be90e6a9bab4caa423c527c911e78,"feat(message): New Message List UI

Summary:
Initial message list collapsing

messages can be expanded explicitly

styling message items

composer UI and collapsing

expanding and collapsing headers

style new reply area

adding in message controls

Add message actions dropdown

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1664"
bengotow,2015-06-20 02:29:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a847d36bd9505436101ec6fbb5c61079a34f21d,2a847d36bd9505436101ec6fbb5c61079a34f21d,fix(attachments): Wrong padding on image attachments
bengotow,2015-06-19 23:07:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7e16f0ecaccfe34741c6b5885ae2200439028cb,f7e16f0ecaccfe34741c6b5885ae2200439028cb,"fix(*) Minor friday fixes - see description

- Delete should archive selection in split pane mode
- Thread list ""quick actions"" should be inverted when row is dark blue
- New star ""action hover"" state
- Multiselect list state is based on WorkspaceStore.layoutMode so add it to state"
bengotow,2015-06-19 22:01:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/783dacf9a06fdae25bb1a8605b86dd97e1db93ba,783dacf9a06fdae25bb1a8605b86dd97e1db93ba,fix(button-borders): Use box-shadow to acheive 0.5px borders
bengotow,2015-06-19 18:55:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/cac8b22b2762d0f20a97da2585748e1598da9d4c,cac8b22b2762d0f20a97da2585748e1598da9d4c,"fix(pinch-to-zoom): Catch ctrl-scroll to prevent trackpad zoom

Fixes T2011"
bengotow,2015-06-19 18:31:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/19d97e53936719f0ee954e04c861b394fcc19901,19d97e53936719f0ee954e04c861b394fcc19901,"fix(*): Throttle so that DatabaseView won't pile on queries during scroll, better small attachment styles

Summary:
fix(attachment): Bad filenames breaking icons

fix developer bar colors

fix critical bug with files

Render small attachments inline-block, without hover effect, and with nice dotted transparency background

Test Plan: No new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1661"
bengotow,2015-06-18 18:58:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/0e96dd3372360f45dfb9a3d0d77358680a5a77c7,0e96dd3372360f45dfb9a3d0d77358680a5a77c7,"fix(mailto): Use paste logic to parse fields in mailto links, support poorly encoded URLs

Summary:
Fixes T1927

- Allow email addresses to contain `_`
- Centralize logic for parsing string into Contact objects into ContactStore
- Always decode and then encode mailto links to ensure spaces, special characters are properly encoded and that the URL is valid
- Add specs for mailto:// behavior

Test Plan: Run wonderful new tests covering mailto://

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1927

Differential Revision: https://phab.nylas.com/D1657"
bengotow,2015-06-18 18:35:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b6117afdbf33b0d930ac774a9a57ae3cebd3baa,9b6117afdbf33b0d930ac774a9a57ae3cebd3baa,fix(bold-emoji): Render bold emoji-range characters with standard weight font
emorikawa,2015-06-18 16:43:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/bf11cf31cd08a62adbcb41cb91fe9d90f3236362,bf11cf31cd08a62adbcb41cb91fe9d90f3236362,fix(search): remove red search x
bengotow,2015-06-18 05:38:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/4848d3c4d87f873a15890c5e5f492858b5bd8d2c,4848d3c4d87f873a15890c5e5f492858b5bd8d2c,fix(thread-list-narrow): Missing flex caused items to not be full-width
emorikawa,2015-06-18 03:49:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab2b22749dd78605c29ada42a11f7f5e2749b956,ab2b22749dd78605c29ada42a11f7f5e2749b956,fix(test): remove bad nondeterministic package spec
emorikawa,2015-06-18 03:43:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/1fa8e2d5fa9f2a7c2a8b2007aea1597ab29a9790,1fa8e2d5fa9f2a7c2a8b2007aea1597ab29a9790,fix(lint): fix minor style errors
emorikawa,2015-06-18 03:40:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/c78ff03e60fe9b1927ca4bd1fa95b7373f6b583a,c78ff03e60fe9b1927ca4bd1fa95b7373f6b583a,"feat(salesforce): new UI for Salesforce

Summary:
style opportunity picker and placeholder on tokenizing text fields

UI for synced opportunities

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1655"
bengotow,2015-06-18 03:12:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d6dcfe549ffeac950d87ea8691deb32667b9eb1,8d6dcfe549ffeac950d87ea8691deb32667b9eb1,"perf(thread-list): Tailored SQLite indexes, ListTabular / ScrollRegion optimizations galore

Summary:
Allow Database models to create indexes, but don't autocreate bad ones

fix minor bug in error-reporter

Fix index on message list to make thread list lookups use proper index

Developer bar ignores state changes unless it's open

DatabaseView now asks for metadata for a set of items rather than calling a function for every item. Promise.props was cute but we really needed to make a single database query for all message metadata.

New ""in"" matcher so you can say `thread_id IN (1,2,3)`

Add .scroll-region-content-inner which is larger than the viewport by 1 page size, and uses transform(0,0,0) trick

ScrollRegion exposes `onScrollEnd` so listTabular, et al don't need to re-implement it with more timers. Also removing requestAnimationFrame which was causing us to request scrollTop when it was not ready, and caching the values of...

...clientHeight/scrollHeight while scrolling is in-flight

Updating rendered content 10 rows at a time (RangeChunkSize) was a bad idea. Instead, add every row in a render: pass as it comes in (less work all the time vs more work intermittently). Also remove bad requestAnimationFrame, and prevent calls to...

...updateRangeState from triggering additional calls to updateRangeState by removing `componentDidUpdate => updateRangeState `

Turning off hover (pointer-events:none) is now standard in ScrollRegion

Loading text in the scroll tooltip, instead of random date shown

Handle query parse errors by catching error and throwing a better more explanatory error

Replace ""quick action"" retina images with background images to make React render easier

Replace hasTagId with a faster implementation which doesn't call functions and doesn't build a temporary array

Print query durations when printing to console instead of only in metadata

Remove headers from support from ListTabular, we'll never use it

Making columns part of state was a good idea but changing the array causes the entire ListTabular to re-render.  To avoid this, be smarter about updating columns. This logic could potentially go in `componentDidReceiveProps` too.

Fix specs and add 6 more for new database store functionality

Test Plan: Run 6 new specs. More in the works?

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1651"
bengotow,2015-06-18 02:59:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd9e8166aeeb6b107b670f98fcc9656dbe231f78,fd9e8166aeeb6b107b670f98fcc9656dbe231f78,"fix(selection): Thread mulit-selection should appear with focused style in split mode

Fixes T1983

Summary: Give classes handler nomenclature

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1653"
bengotow,2015-06-18 02:58:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/606fb5839c6b685e9931e3ca6f38358679045a63,606fb5839c6b685e9931e3ca6f38358679045a63,"fix(mark-as-read): Wait for messages to load, then 700msec, before marking as read

Summary: Resolves T1984 fixes T1984 closes T1984

Test Plan: Run two new test cases

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1984

Differential Revision: https://phab.nylas.com/D1654"
emorikawa,2015-06-17 23:03:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b7b76c70e574311b1a0c6f4b4902c0ad63156c8,0b7b76c70e574311b1a0c6f4b4902c0ad63156c8,"feat(composer): new composer and button styles

Summary:
initial styling of image attachments

more styles for composer overflow

style composer toolbar

toolbar styling

Fixes to inline composer

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1647"
emorikawa,2015-06-17 22:58:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe1e18740ccb21e4bfa30a388731f1f802c641d9,fe1e18740ccb21e4bfa30a388731f1f802c641d9,"feat(onboarding): refactor onboarding flow

Summary:
Add spinner and refactor container view to be router

add `NylasStore` as a global importable. specs for APIEnv

login page fixes

add old fixes to container view

finish extracting pages

fix onboarding flow

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1652"
bengotow,2015-06-17 21:39:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/4638c5bc5b7ff1e2ac935c36485485a55839b2d8,4638c5bc5b7ff1e2ac935c36485485a55839b2d8,fix(error-handling): RFC822 endpoint not passing correct params
bengotow,2015-06-17 20:14:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/c3287b7d576070270d790715e44fdfba388fe916,c3287b7d576070270d790715e44fdfba388fe916,"fix(empty-states): Use quotes sparingly, show generic empty text in three-column mode and during search

Summary: We now show the inspirational quotes only when in list mode and viewing a tag. When you're viewing search results, or when you're in three-pane mode, you now see a more generic empty state.

Test Plan: No tests yet, may want to see if this refactor sticks when we start adding more empty states

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1642"
bengotow,2015-06-17 19:29:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/672354260e745820142e5fb29cffac80b167e853,672354260e745820142e5fb29cffac80b167e853,"fix(nylas-api): Globally handle 401s and notify user they need to sign in

Summary: Fixes T1843

Test Plan: No tests for this file yet

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1843

Differential Revision: https://phab.nylas.com/D1641"
bengotow,2015-06-17 19:29:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1af8935109ec21673e2025d51107015e5aaafff,e1af8935109ec21673e2025d51107015e5aaafff,"fix(focus): Wait for cc/bcc to exist before trying to focus them

Summary:
It was hard to notice this regression because the `?` in `@refs[field]?.focus?()` meant `focus('textFieldCc')` failed silently.

Now we catch that the field we're asked to focus doesn't exist, and try again after the next render.

Fixes T1982

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1982

Differential Revision: https://phab.nylas.com/D1643"
bengotow,2015-06-17 19:29:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc796dc7aa7a417b98960ad2c1d8040d4f2e2af1,fc796dc7aa7a417b98960ad2c1d8040d4f2e2af1,"fix(send-warnings): One character is valid body (T1929) and attachment is valid body (T1881)

Summary: This fixes T1881 and fixes T1929 and adds two additional test cases

Test Plan: Run 2 new tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1929, T1881

Differential Revision: https://phab.nylas.com/D1645"
bengotow,2015-06-16 19:07:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/19378ef5b061b9f54730c1b99596a8ccca6c0f13,19378ef5b061b9f54730c1b99596a8ccca6c0f13,fix(source-list-icons): Updated artwork courtesy of @sdw
emorikawa,2015-06-16 16:53:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/16544700d7e2e3a423cb78c8bb4d2209f02c61d1,16544700d7e2e3a423cb78c8bb4d2209f02c61d1,fix(tests): remove unnecessary failing test
emorikawa,2015-06-16 01:48:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/b5654b78034a225ea16934504e09d6a6ed78769d,b5654b78034a225ea16934504e09d6a6ed78769d,v0.1.2
emorikawa,2015-06-16 01:48:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5fc102f8aa7a684a89b09261632c34fc2966e91,d5fc102f8aa7a684a89b09261632c34fc2966e91,"feat(attachment): improved downloading and draggable images

Summary:
Fixes T1975
Fixes T1900
Fixes T1899
Fixes T1979

Attachments downloading update progress

downloads will restart if the file on disk isn't complete

can drag images onto drive

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1900, T1899, T1975, T1979

Differential Revision: https://phab.nylas.com/D1638"
emorikawa,2015-06-16 01:29:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/304c34f91872ce935d77cce47b43afdc1cf2f044,304c34f91872ce935d77cce47b43afdc1cf2f044,"fix(specs): silence noisy specs and fix warnings

Summary:
Silence buffered process spec

Clean up error reporter and spec bootup

fix errors in draft store spec

package manager spec and theme spec fixes

Fix memory leak in draft store

Test Plan: mmmmmm tests. Run all those green passing tests :)

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1628"
bengotow,2015-06-16 01:23:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/f6b5b7ea30ed5fadb46ee19d4ceb096aa12ed770,f6b5b7ea30ed5fadb46ee19d4ceb096aa12ed770,"fix(T1251) When a returnsModel request returns a 404, unpersist the object

Summary:
Give DatabaseStore trigger payload a 'type' so that you can handle the deletion of objects (clear focus if the object is focused, know to remove it from database view)

Fix specs and add one for new DatabaseView => unpersist handler

Test Plan: Run new test case

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1639"
bengotow,2015-06-16 01:22:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e090dd428a685a2b71211cf729cf61e5301a6c22,e090dd428a685a2b71211cf729cf61e5301a6c22,"feat(subject-search): Use basic LIKE query and date ordering to find likely emails

Summary: Begins to fix T1866, but for now only doing a LIKE instead of FTS4, because there are many, many other things to think about there.

Test Plan: No new tests. I still want to rewrite the whole search bar.

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1866

Differential Revision: https://phab.nylas.com/D1634"
bengotow,2015-06-16 01:19:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/646e159a69d10e374b8104c8d07b697cb5ac21b2,646e159a69d10e374b8104c8d07b697cb5ac21b2,"fix(T1886): When sending, strip off fields if they result in specific, known errors on the API

Summary: Fixes T1886

Test Plan: Run 2 new tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1886

Differential Revision: https://phab.nylas.com/D1633"
bengotow,2015-06-15 21:48:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f16659a302926242ae60a79863fb18a78c35b0c,6f16659a302926242ae60a79863fb18a78c35b0c,fix(T1758): Handle initial focus properly if draft is not yet ready
bengotow,2015-06-15 18:22:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/42819e4d7165eef9c7d2686888b27ceb192f8653,42819e4d7165eef9c7d2686888b27ceb192f8653,"upgrade(electron): 0.28.1. Improvements to webview, clipboard on linux"
emorikawa,2015-06-13 00:47:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/7b9f89bc5ddeb4e4fc3a9767f9cb71745679d0b9,7b9f89bc5ddeb4e4fc3a9767f9cb71745679d0b9,fix(keymap): add ctrl-enter to send email
emorikawa,2015-06-12 20:30:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e30e182363d4af2443ea6b6ea149cc170efc2d0,3e30e182363d4af2443ea6b6ea149cc170efc2d0,fix(thread-list): narrow mode isn't hidden
emorikawa,2015-06-12 01:48:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/fed1076d04fc01d870152a93b49d0caf3f5a0576,fed1076d04fc01d870152a93b49d0caf3f5a0576,"Fixes T1928: don't lose focus on cc and bcc fields

Summary: Fixes T1928

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1928

Differential Revision: https://phab.nylas.com/D1622"
bengotow,2015-06-12 01:45:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/f887e4e55a76d71f4bc3c5670b889aeb2cc6e8c0,f887e4e55a76d71f4bc3c5670b889aeb2cc6e8c0,"fix(style): Minor styling adjustments (floating toolbar, token carats)"
emorikawa,2015-06-12 01:39:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f4f0c0ad08911591df21bddaadfd9261c75333b,6f4f0c0ad08911591df21bddaadfd9261c75333b,"Fixes T1868: tokenizing inputs resize properly

Summary:
Fixes T1868
The hidden sizing window was not getting whitespace properly and the width
was different because of different paddings

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1868

Differential Revision: https://phab.nylas.com/D1623"
bengotow,2015-06-12 01:38:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7f1ab3605419feebfc95ab5c20f98444349750b,f7f1ab3605419feebfc95ab5c20f98444349750b,"feat(thread-actions): Hover actions on thread list, improved drawing performance

Summary: Adds hover actions to threads in the thread list, uses overflow:hidden to improve thread list render times

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1621"
bengotow,2015-06-12 01:00:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/aa10ddfd1c8bfd958d5103f50b6d4141cee57c34,aa10ddfd1c8bfd958d5103f50b6d4141cee57c34,"fix(thread-list): Narrow mode, and new selection rules for three-pane

Summary:
Fix bug in apm_wrapper

Refactor model selection so that it's easier to understand the logic for split vs list mode

Test Plan: Run new specs (WIP)

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1619"
emorikawa,2015-06-11 19:08:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/d7f12873b313f9e53b5e22fb25803c67ffe7a2c3,d7f12873b313f9e53b5e22fb25803c67ffe7a2c3,"feat(update): autoupdater adds an `updateLevel` param

Summary:
There's now an `updateLevel` that can be set in the config file.

It has the valid values of ""major"", ""minor"", ""patch"", and ""commit"". By
default it upgrades on the ""patch"" level.

If you want to be on the bleeding edge, manually change the config file to
add `updateLevel: 'commit'`

Test Plan: A new `auto-update-manager-spec` :)

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1567"
emorikawa,2015-06-11 18:54:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f62a7c9e13ce24ddafab81c11aa7e033c5e2347,4f62a7c9e13ce24ddafab81c11aa7e033c5e2347,"feat(salesforce): can convert a Lead to a Contact

Summary:
In order to create a Contact from a Lead you need to:

1. Create an Account
2. Create an Opportunity and link it to the newly created Account
3. Create a Contact and link it to the Account
4. Create an OpportunityContactRole and link it to both a Contact and an
Opportunity

Working on passing pending object ids around

add in window openers

create lead and check if lead got deleted

Saving form

conversion workflow syncs with opportunities now

Test Plan: manual

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1599"
emorikawa,2015-06-11 18:52:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/6fcd5f2ced8fb1979998989f31272e1745ff33a0,6fcd5f2ced8fb1979998989f31272e1745ff33a0,"feat(attachments): new attachments & uploads UI with img support

Summary:
Initial styles on attachments ui

More file uploading UI

fix race condition in draft saving

attachments and uploads interweaved

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1610"
bengotow,2015-06-09 17:35:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/7a62f5ce7d9c2aadfd6b4307e176068f359cf882,7a62f5ce7d9c2aadfd6b4307e176068f359cf882,"fix(icon-type): Star / unread status should work even when we can't compute ""forwarded / replied"" icons"
bengotow,2015-06-09 00:48:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/6221bf131134eb20543f34f05b7ea2c168ef0fc8,6221bf131134eb20543f34f05b7ea2c168ef0fc8,"fix(fakt): Rename fakt, never try to use the locally installed version (with potentially incorrect baseline)"
bengotow,2015-06-09 00:27:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/336b9f2c76821756afcf3b0b87fcb4cf7416f327,336b9f2c76821756afcf3b0b87fcb4cf7416f327,fix(composer): Border appearing in inline composer
bengotow,2015-06-09 00:24:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/a903bbea7c7be2e6ff4535b83947bf19c999dd41,a903bbea7c7be2e6ff4535b83947bf19c999dd41,fix(build): CSS lint error breaking mac build
bengotow,2015-06-09 00:02:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/256813208fc6d96f84e1aab9f85574d84f88bab5,256813208fc6d96f84e1aab9f85574d84f88bab5,"feat(starring): Star and unstar threads in the thread list

Summary:
When two or more buttons are grouped together, cut the padding off one interior edge so they're spaced more appropriately

Remove source list graphics for active states we aren't using

Starred in the sidebar

Small fix to the feature that keeps the selected item visible as you scroll

Test Plan: No new tests yet

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1607"
bengotow,2015-06-08 19:41:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/43924e29189f87bbcf9971324214a87f9171c697,43924e29189f87bbcf9971324214a87f9171c697,"feat(paste): Add files by pasting them into the composer

Summary: You can now add file attachments by pasting them.

Test Plan: Run 3 new specs! We only had specs for sanitization so I added some for the paste event handler as well.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1604"
bengotow,2015-06-08 18:22:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/92e366653ef313402328bbe13d14328c8e4f4fe3,92e366653ef313402328bbe13d14328c8e4f4fe3,punt(files): Temporarily disable the files package
bengotow,2015-06-06 01:51:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/b6730864be075b87fee1dc39afc7349c7d165111,b6730864be075b87fee1dc39afc7349c7d165111,fix(test): function execution order seems different on CI server?
bengotow,2015-06-06 01:33:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/87dc291327eeaf42c961f222c3d2c9d7ef0b60b0,87dc291327eeaf42c961f222c3d2c9d7ef0b60b0,fix(css): Invalid padding value separated by commas
bengotow,2015-06-06 01:28:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/54b9f2bfb67d8717c3f07636806b76252b9a7b0e,54b9f2bfb67d8717c3f07636806b76252b9a7b0e,fix(RetinaImg): shoudn't throw an exception if you forget to provide an image name
bengotow,2015-06-06 01:22:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/5904381338241ff6853c1b2ca0a84c23e5f2ab01,5904381338241ff6853c1b2ca0a84c23e5f2ab01,fix(mac-build): CSS Linter warnings treated as errors
bengotow,2015-06-05 23:47:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/1bd8767a77bbcb7df5747e29a87c76665ddb93e1,1bd8767a77bbcb7df5747e29a87c76665ddb93e1,"fix(iframes): Contextual menus for email contents

Summary: Fixes T1191

Test Plan: No new tests to see here.

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1191

Differential Revision: https://phab.nylas.com/D1603"
bengotow,2015-06-05 18:50:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb3f7fc4105a8a0fadb5e04bcaa3030a2704aa0e,fb3f7fc4105a8a0fadb5e04bcaa3030a2704aa0e,"feat(scrollbars): Custom scrollbars via ScrollRegion

Summary:
ScrollRegion with support for tooltips shown as you scroll, custom tooltips for thread list and message list.

fix(specs): all other scrollbars hidden to prevent incompatibility

fix scrollbar sizing when used in conjunction with resizableregion

Test Plan: Need to write tests and docs for ScrollRegion - no tests yet

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1597"
bengotow,2015-06-05 18:40:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc916a25306bfb9d77dd163bcda21e3a0b127fc7,bc916a25306bfb9d77dd163bcda21e3a0b127fc7,"feat(theming): Definitely not hacker mode. I don't know what you're talking about.

Summary: Add docs for new RetinaImg modes

Test Plan: Not much to test, except that it looks good!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1595"
bengotow,2015-06-05 18:38:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/ded4da15056e52d88116db64bc1eb584e5c3a8b8,ded4da15056e52d88116db64bc1eb584e5c3a8b8,"fix(draft-speed): Optimize draft creation and reduce scroll / focus delays

Summary:
This diff attempts to improve the responsiveness of the app when you hit ""Reply"". This is achieved by being smarter about creating the draft and loading it into the draft store, and also by allowing the compose* actions to take objects instead of just IDs (resulting in a fetch of the object).

Allow Actions.composeReply,etc. to optionally be called with thread and message objects instead of IDs. This prevents a database lookup and the data is ""right there.""

Create DraftStoreProxy for new drafts optimistically—this allows us to hand it the draft model we just created and it doesn't have to go query for it

When we create a new Draft, immediately bind it to a LocalId. This means that when the MessageStore receives the trigger() event from the Database, it doesn't have to wait while a localId is created

When MessageStore sees a new Message come in which is on the current thread, a draft, and not in the localIds map, assume it's a new draft and shortcut fetchFromCaceh to manually add it to the items array and display. This means the user sees the...

...draft instantly.

Remove delays from focusing draft, scrolling to draft after content is ready. I actually removed these thinking it would break something, and it didn't break anything.... Maybe new Chromium handles better?

Fix specs

Test Plan: Run specs - more in progress right now

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1598"
bengotow,2015-06-05 18:02:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/503631e68560e4b7c6577aed9c93101684a8c5a4,503631e68560e4b7c6577aed9c93101684a8c5a4,"fix(*): Resolve a variety of small and simple bugs

Summary:
Fix T1822 - saving templates not working, not showing template

Fix T1800 - give composers a minimum size

Fix the bottom bar of the composer so the gray bar goes all the way across in popout mode.

Fix T1825 - switch to a more attractive ""June 4, 2015 at 3:10 PM"" styling for expanded dates

Remove, rather than hide, react components for text fields in composer. Fixes T1147

Fix specs

Switch to 999+ instead of infinity. Fixes T1768

Fix broken TemplateStore specs

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1147, T1768, T1822, T1800, T1825

Differential Revision: https://phab.nylas.com/D1601"
bengotow,2015-06-04 01:00:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/3201a9e82eca14dbf2ce1c5c56e7540839863bde,3201a9e82eca14dbf2ce1c5c56e7540839863bde,fix(sentry): Switch to private sentry
bengotow,2015-06-03 23:02:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/89e9cdef8dbeccfb99b61e3b4421498a7e470e1d,89e9cdef8dbeccfb99b61e3b4421498a7e470e1d,"feat(*): draft icon, misc fixes, and WorkspaceStore / custom toolbar in secondary windows

Summary:
Features:
- ThreadListParticipants ignores drafts when computing participants, renders ""Draft"" label, pending design

- Put the WorkspaceStore in every window—means they all get toolbars and custom gumdrop icons on Mac OS X

Bug Fixes:

- Never display notifications for email the user just sent

- Fix obscure issue with DatabaseView trying to update metadata on items it froze. This resolves issue with names remaining bold after marking as read, drafts not appearing in message list immediately.

- When you pop out a draft, save it first and *wait* for the commit() promise to succeed.

- If you scroll very fast, you node.contentWindow can be null in eventedIframe

Other:

Make it OK to re-register the same component

Make it possible to unregister a hot window

Break the Sheet Toolbar out into it's own file to make things manageable

Replace `package.windowPropsReceived` with a store-style model where anyone can listen for changes to `windowProps`

When I put the WorkspaceStore in every window, I ran into a problem because the package was no longer rendering an instance of the Composer, it was declaring a root sheet with a composer in it. This meant that it was actually a React component that needed to listen to window props, not the package itself.

`atom` is already an event emitter, so I added a `onWindowPropsReceived` hook so that components can listen to window props as if they were listening to a store. I think this might be more flexible than only broadcasting the props change event to packages.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1592"
bengotow,2015-06-03 19:04:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/9236a2289b5d254ade7a5ad6e3b2ff802960af93,9236a2289b5d254ade7a5ad6e3b2ff802960af93,"fix(build): Temporarily disable 'Task' tests Jenkins can't run, and avoid empty ui-variables files"
bengotow,2015-06-03 18:10:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/e246ec32049963b6ce114c527f4319988a521d3c,e246ec32049963b6ce114c527f4319988a521d3c,fix(mac-build): Lint error breaking jenkins
bengotow,2015-06-03 18:07:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/2cac5e1edf496c4710cb8c449004674458f46abf,2cac5e1edf496c4710cb8c449004674458f46abf,"fix(fakt): Switch to otf fonts with correct baseline, remove hacky styles"
bengotow,2015-06-03 17:23:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/7ea8b0ea062f414207fbfc91c6194bed67379c27,7ea8b0ea062f414207fbfc91c6194bed67379c27,add(specs): Empty folders and node_modules in spec fixture to fix specs
bengotow,2015-06-03 02:51:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/f0f4df6714bb36ce5ad679986ebef214b1a4b27e,f0f4df6714bb36ce5ad679986ebef214b1a4b27e,add(specs): +101 specs and 403 assertions from Atom
bengotow,2015-06-03 02:04:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b324c4533ae9f32a5540d4dbfa00ab380774b72,2b324c4533ae9f32a5540d4dbfa00ab380774b72,"feature(package-management): Package management interface, APM integration

Summary:
Update a few more packages to deactivate properly

Miscelaneous fixes

Initial commit of new settings package

WIP

WIP - can load and unload and install / uninstall

Click to create new boilerplate package, package updating

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1582"
grinich,2015-06-02 23:24:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/bdc6a9388739d710d41cf01847b6dba6b49f549c,bdc6a9388739d710d41cf01847b6dba6b49f549c,Move guides from Edgehill repo to Redwood and only generate docs from classes
bengotow,2015-06-02 01:31:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/b9ab0fa2345b2bb8fcc346e3503f93b9a982e2bd,b9ab0fa2345b2bb8fcc346e3503f93b9a982e2bd,fix(commands): Broken event dispatch after 0.27.2 push
bengotow,2015-06-02 01:29:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/33606e27e0d106b69c5412379b15e909dcc2bff5,33606e27e0d106b69c5412379b15e909dcc2bff5,"fix(database-view): Double-query when creating DatabaseView objects

Summary: Remove debounce on initial view creation that was causing `retrievePage` to be called twice

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1587"
bengotow,2015-06-02 01:29:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/eac4029dede785ef9a66460b32d9a3ac6c5476df,eac4029dede785ef9a66460b32d9a3ac6c5476df,"fix(selection): Fix issue where selecting offscreen thread (null) could break selection

Summary:
- ModelViewSelection shouldn't break if you accidentally call it with null

- ModelViewSelection methods should throw if you pass non-items, need to do this to narrow down other Sentry errors

Test Plan: Run new specs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1589"
bengotow,2015-06-01 23:01:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/72fdfcd4a1b10755f38678e7121ce8a7ebd00bed,72fdfcd4a1b10755f38678e7121ce8a7ebd00bed,"fix(T1167): When focusing an iFrame, remove selection from the parent document

Summary: Fixes T1167 (MG's additional scenario)

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1167

Differential Revision: https://phab.nylas.com/D1585"
bengotow,2015-06-01 23:00:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/d35dcd32e3256c5fcd5f27feb11b1e074028899c,d35dcd32e3256c5fcd5f27feb11b1e074028899c,"fix(app): When there is no focused window, dispatch events to the mainWindow

Summary: This fixes T1766 and probably others as well, ensuring that commands not handled by the browser-side are still delivered to the main window even when it's hidden.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1766

Differential Revision: https://phab.nylas.com/D1586"
bengotow,2015-06-01 22:21:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/dad36aad2f2301398891425a90c38811549fc5d1,dad36aad2f2301398891425a90c38811549fc5d1,"bump(electron): Electron 0.27.1, Chromium 43

Summary:
0.27.1? Nope webview still broken

Update atom-keymap

As of Chromium 42, you cannot subclass CustomEvent or Event using Object.create(event). This caused the CommandRegistry to break. Creating a new object with the properties of the event seems to work fine.

Resolves ""Deprecated attempt to access property 'target' on a non-Event object.
dispatchEvent
fireCustomEventevent-test.html:8
global codeevent-test.html:21
event-test.html:8"" in Safari and ""TypeError: Illegal Invocation"" in Chromium

Test Plan: Tests still pass

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1584"
bengotow,2015-06-01 22:12:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/8e8eaf0f7dcdb6f16561ecdc57ba4e50e743cba7,8e8eaf0f7dcdb6f16561ecdc57ba4e50e743cba7,"fix(focus): When composing a forward, focus on the To field.

Summary:
fix specs

This functionality used to work but `component` isn't defined and focus: was failing. Added specs to make sure this doesn't happen again.

Test Plan: Run new specs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1583"
emorikawa,2015-06-01 15:24:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/00fe3692e84a9c2c5dec9e186b01af9219e7f658,00fe3692e84a9c2c5dec9e186b01af9219e7f658,"Fixes T1751: Make sure composer can't send twice

Summary:
Fixes T1751
Since there's time between clicking ""send"" and the draft appearing on the
TaskQueue (which is what we use to determine sending state declaratively)
it's possible for it to send twice.

I opted to use `setState` at the Composer View level since I don't think
we should debouce the Action or the Store. It's totally fine for a script
to queue a bunch of messages to send via the queue. We really just want to
stop it at the user intaction level.

Test Plan: There's a test for this now in the composer-spec

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1751

Differential Revision: https://phab.nylas.com/D1576"
bengotow,2015-05-29 01:15:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/80bf2ed43a35cc20f92c502f2f7094f4a8adcf37,80bf2ed43a35cc20f92c502f2f7094f4a8adcf37,"fix(T1744): Display attachments when message has no body, additional specs

Summary:
This fixes T1744 and adds specs for the logic in _attachmentComponents.
 - Attachments should display even when the body is an empty string or null
 - Attachments should not include files without names (mime parts of the message)

Test Plan: Run 2 new tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1744

Differential Revision: https://phab.nylas.com/D1566"
bengotow,2015-05-29 01:13:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/736275cee135b8f25d35ca334626a2a7fde76625,736275cee135b8f25d35ca334626a2a7fde76625,"Fixes T1743: Add replyTo field handling, tests to DraftStore

Summary: Fixed T1743. Adds the replyTo field to Message objects and handling to the DraftStore. Also adds specs to make sure we don't break it.

Test Plan: Run 3 new tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1743

Differential Revision: https://phab.nylas.com/D1565"
emorikawa,2015-05-27 18:23:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d6235b0063a92b86b4b12d14b8c45cc5705ef33,4d6235b0063a92b86b4b12d14b8c45cc5705ef33,"Fixes T1741: database getting deleted on quit

Summary:
Fixes T1741
The database was getting deleted on every quit!
Since the ~/.nylas/config.cson wasn't getting updated messages weren't
getting refetched.

Now we only delete on logout

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1741

Differential Revision: https://phab.nylas.com/D1564"
emorikawa,2015-05-27 16:31:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/e32a7fe0655ff9db0ec16649819e6f3dbf12b860,e32a7fe0655ff9db0ec16649819e6f3dbf12b860,"Removed invalid Action.notificationDismissed firing

Summary:
If a notification is dismissed manually, the setInterval dismissal is still fired.
         This patch adds a check and removes the notification dismissal action from firing

Test Plan: none

Reviewers: ktalwar, bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1218"
bengotow,2015-05-26 23:26:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/91090d37d3d2f5b6669b78a71c746d29d1d48cc7,91090d37d3d2f5b6669b78a71c746d29d1d48cc7,"fix(auto-update): Contrary to all reason, `autoUpdater.quitAndInstall` does not call `before-quit`"
emorikawa,2015-05-26 22:47:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a54cd95f01d6194f646a9c8601c74903260dbeb,8a54cd95f01d6194f646a9c8601c74903260dbeb,"Fixes T1731: code in iframes renders with `white-space: normal`

Summary:
Fixes T1731
Chrome by default on a user-agent stylesheet sets white-space to `pre`.
For `pre` elements. This is useful in most cases since whitespace is taken
literally.

Unfortunately when people send out emails with code in them, the `pre`
blocks can get mangled because there may be unnecessary whitespace in
them.

I personally think the default behavior is much better, however, I think
we should have `pre` blocks render with `white-space: normal` because
anyone who's sending an email with code it in will probably use <span> and
<br> and inline styles to ensure it looks correct on most readers. Since
many places (like Outlook) strip whitespace out of HTML, I think we should
mimic that behavior too.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1731

Differential Revision: https://phab.nylas.com/D1561"
bengotow,2015-05-26 21:15:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/b182fb26f45c0003bf51621e1c449f8b272c6b19,b182fb26f45c0003bf51621e1c449f8b272c6b19,"fix(quit): Destroy hot-loaded windows so they don't block quit - fixes T1282

Summary:
teardown dblite on quit—if it faiels to exit, it blocks the main process from quitting on linux

fix edge case where the "".quit"" sql command is queued to run and then doesn't run because closeRequested is true

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1282

Differential Revision: https://phab.nylas.com/D1559"
bengotow,2015-05-26 21:14:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/9c8016071c22c131cbe0e4e94d3c01081f4cc6cb,9c8016071c22c131cbe0e4e94d3c01081f4cc6cb,"fix(downloads): Wait for download file stream to finalize before resolving and rendering inline attachments. Fixes T1210

Test Plan: No new tests, need to figure out how to prevent regression here.

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1210

Differential Revision: https://phab.nylas.com/D1558"
bengotow,2015-05-25 18:04:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b45742db100ac97be586ce360b8dd7a0c02d7cd,6b45742db100ac97be586ce360b8dd7a0c02d7cd,fix(iframes): Clear selection when blurring iFrames - Fixes T1167
bengotow,2015-05-25 17:27:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/789228e8f2c5fa240081959f20259484b787f290,789228e8f2c5fa240081959f20259484b787f290,fix(notifications): Give notifications `tag` like HTML5 Notifications so you can de-dupe
bengotow,2015-05-23 00:04:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/4cf5e3e82599af7bdeb9c017ef38403f9c00cada,4cf5e3e82599af7bdeb9c017ef38403f9c00cada,fix(spellchecking): Turn off spellcheck on email fields
bengotow,2015-05-22 19:06:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/661f944be258ce61a3898bbc39bd30ea2a57f4b9,661f944be258ce61a3898bbc39bd30ea2a57f4b9,"fix(linux): Closes T1392, updating spellchecker library to be ASAR-aware"
bengotow,2015-05-22 01:22:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/3e0e3a88e79ce1a74e328073b6234587d48f44e7,3e0e3a88e79ce1a74e328073b6234587d48f44e7,fix(linux-build): Move the license file out of app so it works with ASAR
bengotow,2015-05-22 01:08:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/310f8ba0627a5239bbeb274ae35e85939ffa8336,310f8ba0627a5239bbeb274ae35e85939ffa8336,"fix(mailto): Handle mailto on application launch, populate NamespaceStore synchronously

Summary:
atom-window `sendMessage` was not the same as `browserWindow.webContents.send`. WTF.

Save current namespace to config.cson so that it is never null when window opens

Don't re-create thread view on namespace change unless the namespace has changed

Tests for NamespaceStore state

Push worker immediately in workerForNamcespace to avoid creating two connections per namespace

Allow \n to be put into sreaming buffer, but only one

Clear streaming buffer when we're reconnecting to avoid processing same deltas twice (because of 400msec throttle)

Make `onProcessBuffer` more elegant—No functional changes

Test Plan: Run tests!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1551"
emorikawa,2015-05-21 21:50:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/57fc6d61e5e5bc113881d340dfe6ba5206b46d3a,57fc6d61e5e5bc113881d340dfe6ba5206b46d3a,"update linter to look at all less files

Test Plan: script/grunt lint

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1549"
bengotow,2015-05-21 21:41:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/92cf2d520c152071090008f8e52ac381b8680539,92cf2d520c152071090008f8e52ac381b8680539,"fix(asar): Support ASAR, and running of specs in prod builds

Summary:
fix(task-queue): Repair the findTask function

Add ""ship logs"" and ""open logs"" to the developer menu

Patches for Chromium 42

Test Plan: Run tests!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1547"
emorikawa,2015-05-21 20:43:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/f97a3a7b862e208283b448e1ac1b325dc47fc55f,f97a3a7b862e208283b448e1ac1b325dc47fc55f,"Fixes T1363: move file success to task and listen to DB event

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1363

Differential Revision: https://phab.nylas.com/D1548"
emorikawa,2015-05-21 16:52:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b7509e50dcec6a56bd8ddab7394aad89d1a0a9c,8b7509e50dcec6a56bd8ddab7394aad89d1a0a9c,Fixes T1360: don't double register Salesforce component
bengotow,2015-05-20 21:21:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e8235e95439964534c777c08d7118c8662906a9,9e8235e95439964534c777c08d7118c8662906a9,fix(linux-build): Adding linux icons
bengotow,2015-05-20 19:09:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/adf2027f2b3f21935633d78d8ef95ae9ce083249,adf2027f2b3f21935633d78d8ef95ae9ce083249,fix(linux-build): Update build script to reflect 'electron' name
bengotow,2015-05-20 19:04:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f4f921000f5fcae7e2f1c270715f56b1fad4ace,4f4f921000f5fcae7e2f1c270715f56b1fad4ace,"fix(auto-updater): Make updates check happen every 5 minutes, fix critical crash

Summary:
Additional references to the windowmanager

Improve some log messages to make them more clear

Make shipLogs the throttled version. Calling shipLogs over and over leads to crash

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1538"
emorikawa,2015-05-20 17:22:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/14c4c215e6e96dae4549260823ad99d6761b4d9b,14c4c215e6e96dae4549260823ad99d6761b4d9b,Fixes T1344: composer links fixed
emorikawa,2015-05-20 17:20:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5dfc7caddf412d91d032a00be54ac344068cac6,e5dfc7caddf412d91d032a00be54ac344068cac6,"refactor(code): replace all instances of atom-shell and AtomShell and atomShell

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1537"
bengotow,2015-05-20 05:28:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/03e86bf4a5e70bc92c05300d81b31d5c77ad618d,03e86bf4a5e70bc92c05300d81b31d5c77ad618d,fix(ship-logs): never use the .coffee extension
bengotow,2015-05-20 02:23:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a03009a2ba7378da5475481f26cce50fbc502df,8a03009a2ba7378da5475481f26cce50fbc502df,fix(archive): Remove optimizations that were breaking archive...
bengotow,2015-05-20 00:22:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/4b84c558cd0ff13973b540cad471c664b85b7210,4b84c558cd0ff13973b540cad471c664b85b7210,fix(developer-bar-store): Merge conflict not resolved
bengotow,2015-05-20 00:07:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/07cd16a4916948231061a3c74daf1f495d885bc2,07cd16a4916948231061a3c74daf1f495d885bc2,"fix(window-manager): Unregister hot windows, throw away secondary windows on logout

Summary: Fixes T1204 resolves T1204 closes T1204.

Test Plan: Run existing tests - need new tests for this, but will require tons of stubbing.

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1204

Differential Revision: https://phab.nylas.com/D1530"
bengotow,2015-05-20 00:02:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/8599bc03979bb25446a19e6f4fd5aa91993a9272,8599bc03979bb25446a19e6f4fd5aa91993a9272,"feat(logging): Developer bar, verbose logging to logstash, Electron 0.26.0

Summary:
- We now make verbose log files continuously as you use the app
- We ship the logs to LogStash via S3 when an exception occurs
- We log the DatabaseStore, ActionBridge and Analytics packages

- We are now on the latest version of Electron 0.26.0
- We are now on Chrome 42 and io.js 1.4.3
- We should be setup to use ASAR soon.

Update atom.sh to reflect that we're now electron

oniguruma was unnecessary

correctly find log files that haven't been shipped yet

Fix a small issue with nodeIsVisible after upgrade to Chrome 42

Delete old logs, better logging from database store, don't ship empty logs

Test Plan: Run existing tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1531"
emorikawa,2015-05-19 23:12:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/f274bbbf303c6a068b3f55addae5e1bb6355f4dd,f274bbbf303c6a068b3f55addae5e1bb6355f4dd,"fix(composer): polish composer edge cases

Summary:
Fixes T1327
Fixes T1294
Fixes T1307
Fixes T1207

- More robus Undo Manager
- Scrolls to the most recent undo location
- Fixes a variety of bugs when the composer's cursor ends up in an unsupported
location
- Fixes auto-scroll detection at end of content

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1207, T1294, T1307, T1327

Differential Revision: https://phab.nylas.com/D1529"
emorikawa,2015-05-19 23:06:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/4619871e8d6764c78042a59512c4a530f6f62217,4619871e8d6764c78042a59512c4a530f6f62217,"refactor(utils): switch to regular underscore

Summary:
Fixes: T1334

remove final InboxApp references

move out all underscore-plus methods

Mass find and replace of underscore-plus

sed -i '' -- 's/underscore-plus/underscore/g' **/*.coffee
sed -i '' -- 's/underscore-plus/underscore/g' **/*.cjsx

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://phab.nylas.com/D1534"
bengotow,2015-05-19 22:59:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/3af6c45387fb636061decc33dc1de58fd41644b9,3af6c45387fb636061decc33dc1de58fd41644b9,"fix(initial-sync): Make initial sync more robust, show progress, retry on failure

Summary:
Rename ActivityBar => DeveloperBar

Expose sync workers and make them observable

New activity sidebar that replaces momentary notifications

Updated specs

Test Plan: Run new specs!

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1131

Differential Revision: https://phab.nylas.com/D1521"
bengotow,2015-05-19 22:49:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e4aefcebb08c06ff23af1646192a1f21a206621,1e4aefcebb08c06ff23af1646192a1f21a206621,"fix(iframes): Closes T1289—re-attach iFrame event listeners after doc.open

Summary: Re-order the header and toolbar so that the search dropdown appears correctly

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://phab.nylas.com/D1524"
emorikawa,2015-05-19 19:07:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/ab713b5facbba7938af49f3525b53c59d1af2ef8,ab713b5facbba7938af49f3525b53c59d1af2ef8,"refactor(draft): clean up draft store session proxy logic

Summary:
This is an effort to make the logic around the process of sending a draft
cleaner and easier to understand.

Fixes T1253

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1253

Differential Revision: https://phab.nylas.com/D1518"
bengotow,2015-05-19 02:21:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d039398883959158c142416cc643f8b1581540c,1d039398883959158c142416cc643f8b1581540c,"[naming] Nylas Mail => Nylas, Nilas => Nylas"
bengotow,2015-05-18 18:19:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc34be227254e13f80d9d7b5293d34e34ac2a429,dc34be227254e13f80d9d7b5293d34e34ac2a429,[arcconfig] Change to https://phab.nylas.com/
emorikawa,2015-05-16 20:48:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ff8cf682de0fd52bae60041a55ba782212f0090,9ff8cf682de0fd52bae60041a55ba782212f0090,"Fixes T1272: Package keyboard commands work in prod build

CSON files were not being copied over and therefore couldn't be parsed
into the main package.json file. All package-specific keymaps (like the
composer's ctrl+enter send) were not being activated on production builds."
bengotow,2015-05-16 18:12:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/8c08e61d6f6ef71a9700f3b58c5e64a4d209f1fd,8c08e61d6f6ef71a9700f3b58c5e64a4d209f1fd,fix(naming): Mac menus and Info.plist should say Nylas Mail
emorikawa,2015-05-15 20:44:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6784ae7de74b05f0e045b14da9da4b4f6c32a94,d6784ae7de74b05f0e045b14da9da4b4f6c32a94,"fix(drafts): drafts save when they close

Summary: Closes T1264: Drafts save when they close

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1264

Differential Revision: https://review.inboxapp.com/D1515"
emorikawa,2015-05-15 20:16:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fa6ccd9e2e9c6df27ddd0b2c8a0efaf05aafb3e,0fa6ccd9e2e9c6df27ddd0b2c8a0efaf05aafb3e,"fix(draft): drafts order newest to oldest

Summary: Fixes T1192: Allow ordering in database view. Fixes draft list ordering

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Maniphest Tasks: T1192

Differential Revision: https://review.inboxapp.com/D1514"
bengotow,2015-05-15 18:56:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/b12e5c512fa7dc832c2d85bc91d839ce7afcdd0c,b12e5c512fa7dc832c2d85bc91d839ce7afcdd0c,fix(linux): Window manager throwing exception when all closed
bengotow,2015-05-15 17:53:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7b4bb4f1235444fec933231349ef815ce82364a,f7b4bb4f1235444fec933231349ef815ce82364a,InboxAPI => NylasAPI
bengotow,2015-05-15 02:17:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/afcebd64637674c67cce72f5ab07492fe4fda815,afcebd64637674c67cce72f5ab07492fe4fda815,Update docs
bengotow,2015-05-15 00:34:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/29c3e2993b75fb119fb180180a47e4331c162967,29c3e2993b75fb119fb180180a47e4331c162967,"Move atom.inbox => `{NylasAPI} = require 'nylas-exports'`

Conflicts:
	spec-nylas/tasks/file-upload-task-spec.coffee"
bengotow,2015-05-15 00:08:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/91edef9f7a70eb2263d5a2676be5061f613bc188,91edef9f7a70eb2263d5a2676be5061f613bc188,"fix(naming): Move atom/inbox/nilas refs to Nylas

Conflicts:
	internal_packages/inbox-activity-bar/lib/activity-bar-long-poll-item.cjsx"
bengotow,2015-05-15 17:56:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/b0aabf377eaf8e532fd1fa0937b51442d9cc53b1,b0aabf377eaf8e532fd1fa0937b51442d9cc53b1,"fix(paste): Don't paste html with surrounding line breaks

Summary: This resolves T1187 — pasting plain text and html now work pretty well

Test Plan: Run new test case

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1187

Differential Revision: https://review.inboxapp.com/D1511"
bengotow,2015-05-15 17:55:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/b4765329529f462fa54cdd2e6919ec23240ee6d7,b4765329529f462fa54cdd2e6919ec23240ee6d7,"fix(T1241): Key repeat rate higher than animation duration causes cursor to disppear

Summary: Resolves T1241

Test Plan: No tests to run - all CSS!

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1241

Differential Revision: https://review.inboxapp.com/D1510"
bengotow,2015-05-15 17:53:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/e42e683f06aceb86ad5d685a139a7152652b3641,e42e683f06aceb86ad5d685a139a7152652b3641,"fix(T1242): Warn when sending an empty body, or a body that is all quoted text and not a forward.

Summary: Resolves T1242

Test Plan: Run new tests

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1242

Differential Revision: https://review.inboxapp.com/D1509"
emorikawa,2015-05-15 17:45:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/f1cec289aff88f7bbfb10a7d3c98b921ab2477ad,f1cec289aff88f7bbfb10a7d3c98b921ab2477ad,"fix(*): fix draft preparing

Summary:
Fixes T1162: Search no longer lowercases

Fixes T1212: Selection anchor nodes are restored properly

Fixes T1254: Make sessionForLocalId return a promise

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: mg

Maniphest Tasks: T1263, T1212, T1162, T1254

Differential Revision: https://review.inboxapp.com/D1512"
emorikawa,2015-05-14 21:58:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/8941eb791ee21d48ad3c30a6fcef7e61e20659e7,8941eb791ee21d48ad3c30a6fcef7e61e20659e7,"feat(salesforce): add Lead and Contact syncing

Summary:
associating salesforce contacts and leads with Nylas contacts

adding fetcher form salesforce

shows conencted leads and contacts

auto associates acount

fixing salesforce forms

Salesforce composers are styled

fix opportunity association with account on object creation

fix specs

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1507"
bengotow,2015-05-14 21:54:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8f7f76080d12701502956a8ac9b2b8049588759,e8f7f76080d12701502956a8ac9b2b8049588759,"feat(window-manager): Refactor window code, actually destroy main window when logging out

Summary:
Resolves T1200 and probably others.

This diff moves all the window management / hot loading into a new class called the WindowManager
and also changes the way the app transitions between onboarding and main window. When you log out,
the main window clears config and clearing the config causes the window manager to close the main
window and open the login window. When it detects a token again, it opens the main window.

This means you can't:
- Open the main window from the login window
- Open mailto: links and accidentally see the main window or a composer, since the draft store isn't
  running anywhere.
- Don't need to worry about properly resetting thigns when namespaces change, since the window
  is now actually re-created from scratch with the new auth token.

Be a little more defensive about namespace checks in draft-store

Move window code to window-manager

Rename AtomApplication to just `Application`

Specs fix

Test Plan: Run tests, would be good to have more for this.

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T1200

Differential Revision: https://review.inboxapp.com/D1501"
bengotow,2015-05-14 21:12:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ba6c7c59a409bf0f2d9b020f60b433248ccffb3,3ba6c7c59a409bf0f2d9b020f60b433248ccffb3,"fix(thread-list): Archive performance improvements, white rows fix

Summary:
Debounce changes out of the DatabaseStore to prevent lots of calls to persistModel from flooding the app

Tasks must always call super so they get IDs

The task queue shouldn't save every time it adds/removes a task - there could be hundreds

ActivityBar package is actually surprisingly slow, re-rendering needlessly

setState in MultiselectList sometimes renders immediately. Don't do this, because sometimes we're rendering twice back to back

Remove dead references

Never allow duplicate tags in the tags array

Don't archive threads that already have the archive tag (it doesn't do anything bad, but why bother creating tasks?)

Update DB specs

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1506"
bengotow,2015-05-14 17:44:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/6d5f2d66d295cff511e8e6de90ddbf4fa88d607a,6d5f2d66d295cff511e8e6de90ddbf4fa88d607a,fix(build): Turn test reporting back on now that Jenkins is a LaunchAgent not LaunchDaemon
bengotow,2015-05-14 02:23:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ea308e8315f6decf832f5e5cbd17b7cce54ef93,9ea308e8315f6decf832f5e5cbd17b7cce54ef93,fix(build): Temporarily disable tests breaking the build... because they won't run
bengotow,2015-05-13 20:08:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/bbf2e7fc0efa5b4163a8fcd6bab09b7064d413d2,bbf2e7fc0efa5b4163a8fcd6bab09b7064d413d2,fix(build): Fix bad merge when landing previous feature.
bengotow,2015-05-13 19:01:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/ba003726455f6726f52267416c2163bbf87dd49a,ba003726455f6726f52267416c2163bbf87dd49a,"feat(tags): Tags dropdown and new features for Menu and Popover

Summary:
Focused Content Store should notify observers when focused items change, not just when they're reassigned

Popovers should have a `direction` and optional event onOpened

Menu divider documentation was wrong, menus should support checked items by default

Pressing escape in a popover's input should dismiss the popover

Other changes

Remove specs that make no sense anymore

Small tweak to report build breaking. Shouldn't happen often ;)

Test Plan: Run tests, which will now phone home if they break

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1493"
bengotow,2015-05-13 18:44:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/60d9fd48168f9dceadfe4a756020c02fed0441c3,60d9fd48168f9dceadfe4a756020c02fed0441c3,"feat(docs): doc site generation, doc organization into sections, docs for actions and more

Summary: Lots o docs

Test Plan: Run tests, review docs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1496"
bengotow,2015-05-12 22:33:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/32db92e52a1093105e061315ccfef7084e6aa756,32db92e52a1093105e061315ccfef7084e6aa756,fix(long-polling): API changes require ignoring \ns!
emorikawa,2015-05-12 01:07:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/36be4cd497a308672cc01bd175a0abfe68b0f767,36be4cd497a308672cc01bd175a0abfe68b0f767,"fix(search): can search with a colon character

Summary:
Fixes T1127

For now, colons are taken literally. This means you can't type scoped
searches. This will likely change when search gets re-designed

Test Plan:
SearchBar.cjsx got a test for this. The class needs more tests
edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: mg

Maniphest Tasks: T1127

Differential Revision: https://review.inboxapp.com/D1490"
emorikawa,2015-05-12 01:07:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/c65425ab9173b7c2ef5298d5ee6e438878ee38da,c65425ab9173b7c2ef5298d5ee6e438878ee38da,"fix(composer): pasting into composer sanitizes and preserves whitespace

Summary:
Fixes T1132
Added tests, and an html sanitizer.

Test Plan:
See contenteditable-component-spec.cjsx
edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Subscribers: mg

Maniphest Tasks: T1132

Differential Revision: https://review.inboxapp.com/D1492"
bengotow,2015-05-11 21:18:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/3af8bc92c617cc2980741b686be80a6674263188,3af8bc92c617cc2980741b686be80a6674263188,"fix(object-freezing): Null is an `object`, but not a freezable one

Resolves T1141"
emorikawa,2015-05-11 06:33:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/fb230d4e0d3fa7220914b5afd0f4c36b768caf56,fb230d4e0d3fa7220914b5afd0f4c36b768caf56,fix(setup): update atom shell download task
bengotow,2015-05-10 19:21:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/730ba06c4753a21c784d6ed15e461e7fe27bf7d4,730ba06c4753a21c784d6ed15e461e7fe27bf7d4,"fix(unread-notifications): Fix failing tests, add one for ""Unknown"" sender"
emorikawa,2015-05-09 02:55:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/b78aaf432ac4bf1963d4e4c4a3ed7304754fafe5,b78aaf432ac4bf1963d4e4c4a3ed7304754fafe5,fix(thread): support case when email is from nobody
emorikawa,2015-05-09 02:46:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/354c1f0f1df171251319458eff621bc865776958,354c1f0f1df171251319458eff621bc865776958,fix(salesforce): fix object refresh & socket closed error
bengotow,2015-05-09 02:17:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/f999de9b4179507ca67ee25e49cbbb0010096451,f999de9b4179507ca67ee25e49cbbb0010096451,"feat(docs): Compile article docs with `grunt docs`, better styling"
emorikawa,2015-05-08 23:48:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/ff15099f463b7187dd0ed479165dcb9005268340,ff15099f463b7187dd0ed479165dcb9005268340,"feat(salesforce): Sync Salesforce templates to files in the template folder

Summary:
Add Salesforce analytics

template fixes

fix opportunity updating

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1483"
bengotow,2015-05-08 23:36:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/0bd303865ef9b967b26375785dda737a7187860f,0bd303865ef9b967b26375785dda737a7187860f,"fix(friday): Bugs and initial pass at the Today view without content (see summary)

Summary:
Load unread counts from database again, not tags

fix(multiselect-list): Clear selection on esc

fix(onboarding): Make target=_blank links work in onboarding pages

fix(workspace): Items in header and footer regions are in a single column

fix(layout): Critical issue for things not 100% height

fix(activity-bar): Show in dev mode so you know you're in dev mode

fix(quoted-text): Support for #divRplyFwdMsg quoted text marker

Test Plan: Run specs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1484"
bengotow,2015-05-07 22:37:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/a74568168445c9e904d944cc40d7b3ff79f4e733,a74568168445c9e904d944cc40d7b3ff79f4e733,fix(list-tabular): Invariant error caused by onDoneReceivingScrollEvents
bengotow,2015-05-07 22:35:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/6dacda4a696bccd3413231ad9c5e251f4f88704e,6dacda4a696bccd3413231ad9c5e251f4f88704e,fix(message-list): Resolve exception in delayed findDOMNode
emorikawa,2015-05-07 22:28:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c60d7505056d747417c841d5cdd54df24754f8f,2c60d7505056d747417c841d5cdd54df24754f8f,"feat(salesforce): load current user

Summary:
Loads the current user to pre-populate the Salesforce field in the
creators
add tabindex to tokenizing text fields

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1468"
bengotow,2015-05-07 21:42:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/753936b294859f7586dd5f2ea38f27e5f85ff1a2,753936b294859f7586dd5f2ea38f27e5f85ff1a2,"fix(*): Message list container styles, logout exceptions, composer logic cleanup

Summary:
This diff makes a couple changes:

- New drafts are no longer created in the composer component. Draft creation is back in the draft store where it belongs!
  - This means that the Draft List doesn't *always* contain two extra drafts, which are the unopened hot windows.
- Windows never show until they're loaded, which means windows open slowly vs. opening empty. I think the former is preferable but it's easy to change.
- Login window is now sized *before* it's shown instead of afterwards
- The mailto: behavior is now handled by the DraftStore, which gets rid of the whole draftInitialJSON thing that never made any sense.

fix(login) Make login window show at the correct size

logout from edgehill completely

Fix draft delete issue

Don't show windows, hot or cold, until they've loaded

Move logic for responding to mailto links into the draft store

Always fire `windowPropsChanged` after packages load or the window is shown

Show more error codes in red in activity bar

Make sure DraftStoreProxy doesn't interrupt the rendering of the composer with a new draft

Fix account-sidebar scroll issue, maybe?

Test Plan: Run tests!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1479"
emorikawa,2015-05-01 22:07:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/ad1286b9b2ac7aa9034b3d13cd37a05376fef88e,ad1286b9b2ac7aa9034b3d13cd37a05376fef88e,fix(salesforce): object picker typo
emorikawa,2015-05-01 19:58:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/919fc1d70fd3fd0ff62442d1816a4c23e5c5d1bf,919fc1d70fd3fd0ff62442d1816a4c23e5c5d1bf,fix(salesforce): convert to use new ComponentRegistry
emorikawa,2015-05-01 16:58:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/016ea60f3ed7be5bc5a4afec7a74c9a3968d23dc,016ea60f3ed7be5bc5a4afec7a74c9a3968d23dc,"feat(composer): instant composer

Summary: Fixes to make popout composers load instantly

Test Plan: edgheill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1460"
emorikawa,2015-05-01 01:27:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b253a5c4a8ebf05d620b5f6bcf3e1d67145cab1,2b253a5c4a8ebf05d620b5f6bcf3e1d67145cab1,fix(lint): fix linter errors with latest land
bengotow,2015-04-30 23:24:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dd68363b73f3e5ac698b5c4279634f3194248ed,3dd68363b73f3e5ac698b5c4279634f3194248ed,"fix(readme): Rip out Atom readme, replace with our own minimal one"
bengotow,2015-04-30 23:10:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/9ffe0d74dde493d145d15c3c7eb1bb0df192ae94,9ffe0d74dde493d145d15c3c7eb1bb0df192ae94,"feat(unsafe-components): Wrap injected components, catch exceptions, clean up ComponentRegistry

Summary:
This diff gives the ComponentRegistry a cleaner, smaller API. Instead of querying by name, location or role,
it's now just location and role, and you can register components for one or more location and one or more
roles without assigning the entries in the registry separate names.

When you register with the ComponentRegistry, the syntax is also cleaner and uses the component's displayName
instead of requiring you to provide a name. You also provide the actual component when unregistering, ensuring
that you can't unregister someone else's component.

InjectedComponent and InjectedComponentSet now wrap their children in UnsafeComponent, which prevents
render/component lifecycle problems from propogating.

Existing components have been updated:

1. maxWidth / minWidth are now containerStyles.maxWidth/minWidth
2. displayName is now required to use the CR.
3. containerRequired = false can be provided to exempt a component from being wrapped in an UnsafeComponent.
   This is useful because it's slightly faster and keeps DOM flat.

This diff also makes the ""Show Component Regions"" more awesome. It displays column regions, since they now
use the InjectedComponentSet, and also shows for InjectedComponent as well as InjectedComponentSet.

Change ComponentRegistry syntax, lots more work on safely wrapping items. See description.

Fix for inline flexbox scenarios (message actions)

Allow ~/.inbox/packages to be symlinked to a github repo

Test Plan: Run tests!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1457"
emorikawa,2015-04-30 20:08:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/e3dfbe59be97e479efcd85d9c486fbe76334054d,e3dfbe59be97e479efcd85d9c486fbe76334054d,"refactor(react): convert to class-based React components

Summary: Fix react upgrade errors

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1456"
emorikawa,2015-04-30 18:35:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/57cb02c76a048f9267b9140f1aa370640637f9e4,57cb02c76a048f9267b9140f1aa370640637f9e4,"feat(salesforce): associate threads with SF objects

Summary:
#### WIP! ####

This is making it all work with the association endpoint, putting
together the Salesforce Sidebar interfaces, and getting the nested
creators/updaters working.

I still need to do a bunch of UI work and actually debug the whole
workflow still

---

rename SalesforceContactStore to SalesforceSearchStore

rename SalesforceContact to SalesforceSearchResult

salesforce sidebar changes

salesforce association picker

object form store fixes

figuring out newFormItem instigators

Make SalesforceObjectFormStore declarative off SalesforceObjectStore

Make action basd handlers for SalesforceObjectStore

sidebar store create and associate

salesforce sidebar and picker fixes

association works and displays on sidebar

salesforce object form fixes

object form fixes

fix salesforce updating

Test Plan: TODO

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1440"
emorikawa,2015-04-30 00:38:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/01938c1c7811e270c037341d84f2ae7699bcd4dd,01938c1c7811e270c037341d84f2ae7699bcd4dd,"fix(mailto): dead refernece to displayComposer

Summary: mailto from cold start waits for window to open

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1453"
bengotow,2015-04-29 02:23:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/fc594deed1f8cfbb3b77d0ef0e7819253031c4f5,fc594deed1f8cfbb3b77d0ef0e7819253031c4f5,"fix(*) AttributeJoinedData still broken, producing !NULLVALUE! in message bodies"
bengotow,2015-04-29 00:33:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/1efe193d127137b6fb12af9680bf1f7cb5af209e,1efe193d127137b6fb12af9680bf1f7cb5af209e,"fix(*): Composer horizontal scroll, fix archive-lots-and-scroll-down, draft-store cleanup exception,"
bengotow,2015-04-28 23:02:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0dc6612d840729d90f9f891cd8bc0fd1c508bdd,a0dc6612d840729d90f9f891cd8bc0fd1c508bdd,fix(attribute-joined-data): Critical fix for NULL joined data values
bengotow,2015-04-28 22:32:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/8a8cf4b06d64891268b7b53b64d082b35d0940d3,8a8cf4b06d64891268b7b53b64d082b35d0940d3,"fix(*) => bind store classes, consolidate packages, remove ComponentRegistry.Mixin, remove bad findDOMNode() reference"
bengotow,2015-04-28 17:38:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/892205f431e7e3759df9f15d97a14f1d4491ac0c,892205f431e7e3759df9f15d97a14f1d4491ac0c,docs(*): Additional docs for DraftStoreExtensions
bengotow,2015-04-28 02:27:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef27f300964f3f98afe50bc4b2f3ee1dfcb92690,ef27f300964f3f98afe50bc4b2f3ee1dfcb92690,docs(*) Additional API reference docs
bengotow,2015-04-28 01:26:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/7f3816cb67e29cb81e625becfb33e7c871c357e7,7f3816cb67e29cb81e625becfb33e7c871c357e7,"fix(*) Closes 517,603,608, moves search-playground to edgehill-plugins"
bengotow,2015-04-28 00:29:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/b488ffb6a9a125398706ca18dffdc2a84b5b5448,b488ffb6a9a125398706ca18dffdc2a84b5b5448,fix(lint): Resolve linter errors
bengotow,2015-04-28 00:28:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fdef6a1a6e00f7349b41944d079b0da8024cc75,0fdef6a1a6e00f7349b41944d079b0da8024cc75,"docs(*): Break markdown docs into separate files, add model/attribute docs"
bengotow,2015-04-27 20:29:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/0352090007e45369049f047b4a7bc1056b57da0e,0352090007e45369049f047b4a7bc1056b57da0e,docs(*): Additional documentation and high level reference guides
bengotow,2015-04-27 17:04:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/9248747b2678146614b181e14395ffdb84f3c246,9248747b2678146614b181e14395ffdb84f3c246,fix(search-playground): Rename the package so the search bar appears
bengotow,2015-04-25 01:19:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/21b952906384e135eb8898852fb7b8287e9398b9,21b952906384e135eb8898852fb7b8287e9398b9,fix(search-playground): Search bar React conversion issue
bengotow,2015-04-24 23:30:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/d161aa9cf9eb1258f0738e01d2226ed28afd6e89,d161aa9cf9eb1258f0738e01d2226ed28afd6e89,"fix(retina-img): Escape mask url, so it works with spaces"
bengotow,2015-04-24 23:30:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d547739556d0381809f63e37e337d137a7d240f,8d547739556d0381809f63e37e337d137a7d240f,"fix(packages): Look for metadata using helper method, not reading json manually"
bengotow,2015-04-24 23:23:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/007cda443cbb1c200ef3d8b083544da35fbe4e66,007cda443cbb1c200ef3d8b083544da35fbe4e66,"fix(auto-updates): Point at nylas, don't think it's following redirects"
bengotow,2015-04-24 22:43:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/9551a5db213e10fcf0e4dedc4a8e025d5e6b70b1,9551a5db213e10fcf0e4dedc4a8e025d5e6b70b1,"feat(empty-state): New view that appears when a multiselect-list is empty

Summary: fix(query): .count() queries are apparently coming back as strings. Never let this happen

Test Plan: Run 1 new test

Reviewers: evan

Reviewed By: evan

Subscribers: ktalwar

Differential Revision: https://review.inboxapp.com/D1441"
bengotow,2015-04-24 18:33:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/68343ec472a273c4c7d5bc16f524af2a92ba0832,68343ec472a273c4c7d5bc16f524af2a92ba0832,"feat(docs): New docs tasks and React 0.13.2

Summary:
This diff moves us up to React 0.13.2 and transitions some of the core React components to the new
syntax based on plain Javascript objects. `setInitialState` is now just code in the constructor,
`getDOMNode(@)` is now `React.findDOMNode(@)`, and `isMounted` is no longer necessary or available.

This diff also adds `RegisteredComponent` to match `RegisteredRegion`. In another diff,
I think we should change the names of these to be `DynamicComponent` and `DynamicComponentSet`.

This diff also includes preliminary API Reference docs for Menu.cjsx and Popover.cjsx. You can build the docs
using `grunt docs` from the build folder. It produces a simple html format now, but it's easy
to customize.

Also we now ignore ""Unnecessary fat arrow""

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1437"
emorikawa,2015-04-24 16:36:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/365fe400f7860c3bf035c83a5f304540a34b72d2,365fe400f7860c3bf035c83a5f304540a34b72d2,"feat(salesforce): add Salesforce creator

Summary:
tests on the schemas

build input elements

form builder pulls data

grouping by row

salesforce object store

salesforce api logic

successfully pulling salesforce objects into db

object store saving to db

refactoring tokenizing text field

full documented tokenizing text field with specs

linking in object picker component

converting generated form to a controlled input

form change handlers for controlled inputs

Salesforce object creator store

new way of opening windows

removed atom.state.mode

create new salesforce object creator in new window

form creator loading in popup with generated form

generated form renders select and multiselcet and textarea

add checkbox

creating related objects

windnows know when others close

remove debugger statements

form submission

converting data for salesforce posting

hot window loading

new hot window registration

hot loading windows

actions for listening to salesforce objects created

generated form errors

error handling for salesforce object creator

rename saleforce object form store

display errors to form

submitting state passed through

properly posts objects to Salesforce

change name to salesforce object form

add deep clone

use formItemEach

styling for Salesforce form creator

salesforce required fields come back and populate form

generated form loads related objects into fields

remove console logs and fix sales schema adapter test

fix task queue and formbuilder specs

fix action bridge spec

fix tokenizing text field spec

fix draft store and tokenizing proptypes

fix linter issues

fix tokenizing text field bug

rename to refresh window props

remove console.log

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1425"
bengotow,2015-04-22 23:41:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/df38008c567101eb033cffa7d4856e0f115ae461,df38008c567101eb033cffa7d4856e0f115ae461,"fix(*): Small fixes from Lake Tahoe. See Summary.

Summary:
This diff includes a few small things:

- Menu: Don't select the first item until the user taps down arrow, and allow the user to use the arrow keys to move up and down through Menu items.

- Menu: Make scroll code from MultiselectList re-usable, use in Menu. Now if you use the keys to move to an item that is offscreen it will follow.

- Popover: Tapping the button that opened popover should close it

- Make sure buttons in toolbars are at least standard height

- Re-enable Markdown processing via `grunt docs`

- A bit of initial inline documentation for crosjdoc. Need to evaluate whether this is worth doing everywhere.

- New `search-playground` package for experimenting with search and search weights.

- Swap itemClassProvider for more generic itemPropProvider

- Add crojsdoc config file

- Export React, because third party packages can't require things from our app

- [FEATURE] Bring back static file support in third party packages via `nylas://translate/IMG_20150417_124142.jpg`

- Fix invariant error with search bar

- [FEATURE] ""Show Original"" under Message actions

- Fix DatabaseView so that many archives at once don't cause problems

Test Plan: Run specs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1426"
bengotow,2015-04-22 01:16:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/2d51c94f517cbad8586a86efd38681466127a5db,2d51c94f517cbad8586a86efd38681466127a5db,"feat(registered-region): Replace everywhere injecting elements by Role with <RegisteredRegion>

Summary:
This is a small diff that isolates the pattern of ""insert all the things with role=ThreadAction and pass them these props"". The goal is to eventually make this wrapper do some analysis, performance checks, etc. Right now, it just has the advantage of making the parent components simpler and also adding a new inspector view where you can see the regions , their names and the props they take (thread:<Thread> or selection:<ModelListSelection>)

fix(menu): Re-importing different class with same name breaking dropdowns

make composer use flexbox for it's footer

fix alignment of the input in the participant text field. how did this break?

new action for hiding / showing component regions

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1422"
bengotow,2015-04-20 22:59:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/8bd14602c30b4f8e43a4f27eb04622b629d2a6ad,8bd14602c30b4f8e43a4f27eb04622b629d2a6ad,"fix(*): Small patches for thread icons, marking as read, scrollbars

Summary:
fix(scrollbars): overflow-y, not overflow

fix(participants): Overflow not set correctly on participants

fix(thread-list): Don't show reply or fw icon for unsent drafts

Remove bad code for updating sidebar drafts

Mark as read in MessageStore so that receiving new messages while viewing a thread re-marks it as read

Don't show messages I send with the ""Reply"" icon

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1418"
bengotow,2015-04-10 21:33:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/d9ee12cf815ff16c103a9970d2cc4ccbee3aaadc,d9ee12cf815ff16c103a9970d2cc4ccbee3aaadc,"refactor(*): Thread list fixes, flexible workspace store, multiple root sheets

Summary:
Remember to remove all the event listeners added to email frame

New files tab, queryable filename, not attribute

Rename ThreadSelectionBar to RootSelectionBar to go with RootCenterComponent, make it appear for draft selection and file selection as well

Initial file list and file list store, File Location

Remove unnecessary shouldComponentUpdate

Always track whether new requests have happened since ours to prevent out of order triggers

Always scroll to the current [focused/keyboard-cursor] in lists

So goodbye to the trash tag

Only scroll to current item if focus or keyboard has moved

Show message snippet in notification if no subject line

Make the RootSelectionBar pull items from Component Registry

New Archive button (prettier than the other one)

Refactor event additions to iframe so iframe can be used for file display also

Thread List is no longer the uber root package - drafts and files moved to separate packages

WorkspaceStore now allows packages to register sheets, ""view"" concept replaced with ""root sheet"" concept, ""mode"" may not be observed by all sheets, and is now called ""preferred mode""

Don't animate transitions between two root sheets

Mode switch is only visible on root sheets that support multiple modes

Account sidebar now shows ""Views"" that have registered themselves: drafts and files for now

Model Selection Bar is now a component, just like ModelList. Meant to be in the toolbar above a Model List

Misc supporting changes

New files package which registers it's views and components

Rename files package to `file-list`

Move checkmark column down into model list

Don't throw exception if shift-down arrow and nothing selected

Takes a long time on login to fetch first page of threads, make pages smaller

Displaynames, spec fixes

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1412"
emorikawa,2015-04-10 17:43:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/f7fe9a93c827a9ae248c15c2aa6cd96e72f1dd40,f7fe9a93c827a9ae248c15c2aa6cd96e72f1dd40,fix(uploads): upload files work in popout composers
bengotow,2015-04-09 02:35:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/232f23d4289b75cad4e0d0049469321ec11294fe,232f23d4289b75cad4e0d0049469321ec11294fe,fix(build): Never use .coffee extension in `require` statements
bengotow,2015-04-09 02:25:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/86f7d65034807a57a18f5b38004593543e81e7b8,86f7d65034807a57a18f5b38004593543e81e7b8,"feat(thread-list): Multiple selection, bulk actions, refactoring

Summary:
This diff provides multi-selection in the thread list powered by a new ModelList component that implements selection on top of ListTabular (or soon another List component). It includes business logic for single selection, shift selection, command-click selection, etc.

This diff also improves the performance of DatabaseView by assessing whether updates are required based on specific database changes and skipping queries in many scenarios.

WIP

WIP

Move selection into modelView instead of store

WIP

Preparing to convert to ModelList mixin

Make ThreadStore => ThreadListStore

Break the DraftStore in two (new DraftListStore) to avoid keeping all drafts in all windows

Get rid of unread instance variable in favor of getter that falls through to isUnread()

Much smarter logic in DatabaseView to prevent needless queries (especially counts and full invalidation of retained range)

Squashed commit of the following:

commit 486516b540e659735675765ca8b20d8a107ee2a9
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Apr 7 17:30:23 2015 -0700

    Invalidate the retained range debounced

commit 7ac80403f52d108696c555f79c4c687d969f0228
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Apr 7 17:30:16 2015 -0700

    Wait until after the view updates to move focus

commit 88d66eb19a9710847ff98bea22045bb686f30cc6
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Apr 7 17:28:01 2015 -0700

    Bail out early when loading data if a reload has been requested

commit a49bedc44687040f7c675ff298376917a0b5fdcb
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Apr 7 16:38:58 2015 -0700

    Log query data when in a query is being logged

commit c64a9e02f9072fd30edb98c45be581d6ac00c48a
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Apr 7 16:38:45 2015 -0700

    Mark thread and messages as read in parallel instead of in sequence

commit 4b227100a795e20257cda0d60b00cc75b0000b0f
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Apr 7 16:38:32 2015 -0700

    Don't load tags with hardcoded IDs from the database, and load them in parallel instead of in sequence

commit aeb7f1d646786cfa1c247fe78ce5467da07c4446
Author: Ben Gotow <bengotow@gmail.com>
Date:   Tue Apr 7 16:37:54 2015 -0700

    Pass objects instead of ids to thread methods—since we always have the most current thread anyway, this makes things a bit faster

commit e70889d1d05ece81a081b8b3f27b62491429b6f9
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Apr 6 16:41:49 2015 -0700

    [icon] Paper airplanes

Restyle account sidebar, optimize tag count queries a bit more

Fix initialization issue with webkit image mask

Can't compare dates with is/isnt

Assets for check boxes

Bug fixes

Wrap ModelList instead of providing props

Verbose mode for database view

Fix existing specs

Six new specs covering invalidateIfItemsInconsistent

Test Plan: Run 40+ new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1410"
bengotow,2015-04-06 23:41:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/47069ab81d5629f333e9c64b1233d9e56f7c6bbb,47069ab81d5629f333e9c64b1233d9e56f7c6bbb,[icon] Paper airplanes
bengotow,2015-04-06 18:46:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/523ed4b31647ab200b959761cde52f200b093e84,523ed4b31647ab200b959761cde52f200b093e84,"feat(thread-list): Inifite scrolling, powered by new DatabaseView, InboxSyncWorker

Summary:
NamespaceStore needs to be more careful about triggering unnecessarily

ThreadListParticipants should use minimum set of <span> tags, not one per name

FocusedTagStore triggers only when the tag has actually changed

New InboxSyncWorker is responsible for fetching contacts, calendars, threads

Update the draft list to look like the thread list

ThreadStore now uses a ""Database View"" to vend items, which will free it up to focus on things like selection soon. The DatabaseView handles pagination and maintains a cache of items in a ""retained range"" the view needs. It also abstracts the...

...""thread metadata"" concept into a general purpose pattern

Thread-list package implements SearchView to match the DatabaseView. Instead of fetching items from the database it uses the search API

Update existing specs

Bug fix

Specs for focused stores

New specs!

Pad search range so we prefetch the next pages

Clear the scroll offset if the view is changed (between tabs)

Test Plan: Run 58 new tests with 110 new assertions!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1398"
bengotow,2015-04-06 17:15:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/622688e1efb6f8b35bba3363a06e5a601c5dc061,622688e1efb6f8b35bba3363a06e5a601c5dc061,[api] Move from nilas -> nylas for endpoints
bengotow,2015-04-04 01:51:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/4497de634e45fa13281fe28f5c0deb0f2f592245,4497de634e45fa13281fe28f5c0deb0f2f592245,"fix(analytics): Add Mixpanel `alias`, don't store @id locally"
bengotow,2015-04-03 17:08:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/402e481b315f14d4c94c0fc41e636c0ece873cc1,402e481b315f14d4c94c0fc41e636c0ece873cc1,"fix(win32/linux) Quit when the user closes the last window. Was broken because of hidden windows

Test Plan: Run on win32/linux

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1386"
bengotow,2015-04-01 01:58:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/80afdcb7fae489d2ff73ae05ad1068e7dc336ea7,80afdcb7fae489d2ff73ae05ad1068e7dc336ea7,fix(templates): Minor fixes for templating footer actions
bengotow,2015-04-01 00:22:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb27c7cd1bb23001e1857c0032d8c2683558c411,eb27c7cd1bb23001e1857c0032d8c2683558c411,fix(message-list): Revert changes causing message list to appear before content ready and scrolled
emorikawa,2015-04-01 00:20:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/33a33eedca9ddac0f5224546651804bed75b49f8,33a33eedca9ddac0f5224546651804bed75b49f8,fix(specs): remove unnecessary trigger
bengotow,2015-04-01 00:19:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/d15b5080fbe1650594b61159f4f359d29828f0cf,d15b5080fbe1650594b61159f4f359d29828f0cf,"fix(stores): FocusedThreadStore, FocusedTagStore, speed improvements

Summary:
ThreadStore is now in the thread-list package.

Account sidebar no longer has random stuff dealing with search, no longer maintains selection apart from FocusedTagStore

Thread nav buttons are in the thread package

Account sidebar pulls selection from FocusedTagStore, no longer fires an Action to select Inbox, which was weird

Thread store is in thread-list package. No longer has any selection concept -> moved to FocusedThreadStore. Also looks at database changes to do ""shallow"" updates when only threads and not messages have changed, or when only messages of a few...

...threads have changed.

WorkspaceStore now handles both pushing AND popping the thread sheet. So all sheet behavior is here.

ThreadStore => FocusedThreadStore, selectThreadId => selectThread

Include all models in inbox-exports

It actually takes a long time to call Promise.reject because Bluebird generates stack traces. Resolve with false instead (100msec faster!)

Cache the model class map. All the requires take ~20msec per call to this method

ThreadList looks at FocusedThreadStore for selection

FocusedThreadStore, FocusedTagStore

Updated specs

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1384"
emorikawa,2015-04-01 00:04:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/911d7f961dbc3e926b7d177cbb427effe4788f4d,911d7f961dbc3e926b7d177cbb427effe4788f4d,fix:(specs) for message list
emorikawa,2015-03-31 23:32:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/231f31ecf71be53bfdc673ef2f110fb54982cccf,231f31ecf71be53bfdc673ef2f110fb54982cccf,"refactor(message-list): much faster message list loading

Summary:
custom options with tests

speed changes

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1383"
bengotow,2015-03-31 22:54:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d3e5c4938b3ad8c30d483708281da01cc6ef4b6,4d3e5c4938b3ad8c30d483708281da01cc6ef4b6,"fix(participants): Paste contacts with names, and lots of specs

Summary:
- You can now paste Ben Imposter (imposter@nilas.com).
- You can now paste an email and we look up a matching name in the Contact Store

Test Plan: Run glorious new specs

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1378"
emorikawa,2015-03-31 21:31:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/5796e2665cb1171a0530ec7b085deb911f248259,5796e2665cb1171a0530ec7b085deb911f248259,"feat(message-list): tracks when at the bottom and pane resizes

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1377"
bengotow,2015-03-31 01:08:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/c09d6dba770ff823f523d375403a119029341e8b,c09d6dba770ff823f523d375403a119029341e8b,"fix(animations): Don't process API data while animations are in-flight

Summary:
Expose the animation coordinator in Nilas-exports, use in more places

Provide a way for queries to individually bypass waiting (messages query when opening thread)

Test Plan: No new tests to see here yet

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1376"
bengotow,2015-03-31 00:25:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ebe1118ebbd1bbfeef250b932f54dd8c3488e67,6ebe1118ebbd1bbfeef250b932f54dd8c3488e67,"Immediately blow up if the user passes incorrect query params

Summary: If state.selectedId is null, or otherwise cannot find item, don't throw exception

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1373"
emorikawa,2015-03-30 23:43:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/f19f178e3ca29cf68c73efb23b3c7564931e9581,f19f178e3ca29cf68c73efb23b3c7564931e9581,"feat(search): escape will blur and clear search

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1374"
emorikawa,2015-03-30 23:41:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/0a7843c6e72726c1dc56e3b2c91d8cb7b96baa9d,0a7843c6e72726c1dc56e3b2c91d8cb7b96baa9d,"feat(toolbar): long urls make a longer toolbar

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1375"
bengotow,2015-03-30 21:54:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/48e293e146b88f7ef2bbddae636bec26d2232ae6,48e293e146b88f7ef2bbddae636bec26d2232ae6,fix(drag): Resize bars losing mosueup when over iframes
emorikawa,2015-03-30 18:21:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/18165d5ebb4d9c8dc63152e10016bb7d59966cb6,18165d5ebb4d9c8dc63152e10016bb7d59966cb6,"fix(spec): fix thread list participants name undefined error

Summary:
A change in the spec caused an error when message metatdata wasn't
available. The specs were also not updated to reflect the change.

fix thread list participants spec
fix thread list spec

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1372"
bengotow,2015-03-28 01:23:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/24b29fd3978ee8b36dfd257eb87f1a11fe0ee118,24b29fd3978ee8b36dfd257eb87f1a11fe0ee118,fix(thread-list): Email not ready when _prepareColumns runs
bengotow,2015-03-28 01:12:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/115f0b77357fcf16e4cd44f740a7bbbfe7ed6ead,115f0b77357fcf16e4cd44f740a7bbbfe7ed6ead,fix(tags): Don't request unread count for `*`
bengotow,2015-03-27 23:57:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/a764c160d131a78520d7f673b190ed09ee6e273c,a764c160d131a78520d7f673b190ed09ee6e273c,fix(dnd): Update react-dnd package
bengotow,2015-03-27 23:38:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b3bcac256f0a9c70312af7535c09dc8277ac440,9b3bcac256f0a9c70312af7535c09dc8277ac440,"feat(report): Message list actions for phoning home bad text content

Summary: Little feature

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1365"
bengotow,2015-03-27 23:37:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/a10f86a3a2af26df6ee8cec35e7fcc335ceb80c4,a10f86a3a2af26df6ee8cec35e7fcc335ceb80c4,"feat(all-mail): Add special case `*` tag for all mail

Summary: This one is a bit interesting. We want to allow the user to view ""All Mail"", which is essentially ""threads, with no tags query whatsoever."" Rather than try to make `null` a valid selected tag Id, I used `*` as a ""magic"" tag id which is interpreted by the ThreadStore to mean ""no tags where clause."" Definitely a hack, but simpler than trying to make the account sidebar properly select ""all mail"" when selectedTagId = null.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1360"
bengotow,2015-03-27 23:37:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/d0d96f90f5d0bd15e7136be0d193fc63575a2542,d0d96f90f5d0bd15e7136be0d193fc63575a2542,"feat(unread-notifications): Check that unread messages are in inbox

Summary: When we get unread messages, grab their threads and then make sure they're in the inbox before notifying.

Test Plan: See updated specs!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1361"
bengotow,2015-03-27 23:36:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/23e9d8ccf58d5f6eabbc6a79f082ca6407fe4580,23e9d8ccf58d5f6eabbc6a79f082ca6407fe4580,"rm(contextual-menu-manager): See details for reasoning

Summary:
Atom provides a ContextualMenuManager which auto-generates contextual menus based on CSS rules, which fire commands. This is conceptually cool since it allows for extendable contextual menus, but A) it uses commands and B) it doesn't play nicely with React components.

This diff removes this manager object completely. Instead, React components can create contextual menus for themselves and dispatch actions / make local changes as they see fit.

If we want to allow people to extend our contextual menus, we can come up with a new solution that is not based on them having a `cson` file referencing a CSS Selector string that they don't own, and using strings for everything.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1362"
bengotow,2015-03-27 23:35:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c7760c7e3da581bbb7c32a6c4c736ef10ad2061,6c7760c7e3da581bbb7c32a6c4c736ef10ad2061,"fix(reply-area): Use existing flexbox so message-wrap and reply area never competing for clickability

Summary: Just a couple CSS tweaks

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1364"
emorikawa,2015-03-27 23:35:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/9859e594f26e5105db30a28dca59197e3dd218dc,9859e594f26e5105db30a28dca59197e3dd218dc,"feat(composer): typing at the end of the composer tracks scrolling

Summary:
When you're typing at the end of the composer, then the composer should
look like it's scrolling along with you.

When you're typing in the middle of the composer, if the footer
inforamtion scrolls past the end of the page, then that's fine.

When the selection changes, the contenteditable component now caches
whether or not the selection is at the end of the content. It has to do it
at this point, otherwise the cloned, cached DOM nodes of the saved
selection are not the same nodes that will show up in the future.

Whether the cursor is at the end is queried by the composer on a body
change. If it is, then the composer expects a callback from its parent
(the message list), to call to update the scroll position.

The message list immediately updates the scroll position to move the
bottom of the composer to the bottom of the message-wrap window.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1366"
emorikawa,2015-03-27 23:35:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/286fdcfad95e485a29c67f01d9e70ccecd26868b,286fdcfad95e485a29c67f01d9e70ccecd26868b,"feat(icons): mac hover state shows icons

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1359"
bengotow,2015-03-27 23:34:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c298aa15821528730c8abe08d4269b403f32faa,7c298aa15821528730c8abe08d4269b403f32faa,"fix(performance): Thread-list re-renders too often

Summary:
Freeze threads on their way out of the ThreadStore

Don't add an unread attribute to contacts by accident...

Don't pass inline functions as props that are looked at by _isEqual

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1367"
bengotow,2015-03-27 22:24:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/5826d0dd3717f3c4cc014493d9e03d49014937d1,5826d0dd3717f3c4cc014493d9e03d49014937d1,"fix(displayWindow): Don't display on all selection changes, just when clicking notifications"
bengotow,2015-03-27 21:20:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/cef394b2a3b431020260a43fd616c8211e9ecc6f,cef394b2a3b431020260a43fd616c8211e9ecc6f,fix(thread-store): Don't bother fetching if no threadId. Causing `?thread_id=` 400 error
bengotow,2015-03-27 21:17:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb38651c442aca6c5eb394e39286402908f2cd03,bb38651c442aca6c5eb394e39286402908f2cd03,fix(destroy-draft): Do not throw exception deleting non-existent draft
emorikawa,2015-03-27 17:31:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/59d378781b25aee8ae22123649c8fea5d3a240d0,59d378781b25aee8ae22123649c8fea5d3a240d0,fix(composer): better html paste regex
bengotow,2015-03-27 17:12:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0d2cc1785faeddb09b4c2309e3f09f141f8acee,a0d2cc1785faeddb09b4c2309e3f09f141f8acee,"feat(spellcheck): Turn on atom spellchecker, new contextual menu

Summary:
Pending issues:
- As you're typing, Atom Shell says the word you're currently typing is misspelled until you finish it. I will need to patch Atom Shell to fix this.

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1358"
emorikawa,2015-03-27 02:07:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/5bcefd23ba07ad7b4515d6c472eef759386c720d,5bcefd23ba07ad7b4515d6c472eef759386c720d,"feat(notifications): can select a thread from any view

Summary:
The issue was that when selecting a thread id, it was not loaded in the
current list of items in the ThreadList and failing to come up.

The notifications now pass a property that the AccountSidebarStore listens
for to indicate what tag we think is most likely to contain the thread
that we're directly trying to access.

Eventually the correct data set may be loaded that contains the thread we
want. In the meantime, the requested selectedThreadId may or may not
resolve to an actual selectedThread object. If we detect that the
requested thread came into scope, we trigger another action to notify
everyone that the thread is now available. We also pass along a force
flag since this is a case when the requested thread id hasn't changed

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1353"
emorikawa,2015-03-27 02:07:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/cdfaf5cf7782d1a0d012e0a3636d6470ca2c71bf,cdfaf5cf7782d1a0d012e0a3636d6470ca2c71bf,"feat(reply): don't reply to yourself

Summary:
If the last message was sent by you, and you reply to it, you probably
want to talk to you the most recent people you tried to email.

Now with test coverage :)

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1356"
emorikawa,2015-03-27 02:07:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/1c56e5c15bb8f81b6bea95a3908ccba9e4c4020b,1c56e5c15bb8f81b6bea95a3908ccba9e4c4020b,"fix(composer): get rid of extra blank lines on paste

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1357"
bengotow,2015-03-27 01:28:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5f3f3087bf35000b352a96c460e4b4efa2c78a4,e5f3f3087bf35000b352a96c460e4b4efa2c78a4,fix(draft-store-proxy): Centralize check for body
bengotow,2015-03-27 01:25:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e6d5b64d8ba39c2c7a43661f06b2ecb9ee1a744,7e6d5b64d8ba39c2c7a43661f06b2ecb9ee1a744,fix(logs): Minor tweaks to prevent react logging
emorikawa,2015-03-26 18:49:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/9a0fce22c43c7b9c2ad7c413c4f9471984995969,9a0fce22c43c7b9c2ad7c413c4f9471984995969,fix(lint): fix linting css errors
emorikawa,2015-03-26 18:46:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/3f55979bebc9e80b3ab30c3159df5fdbee334d1c,3f55979bebc9e80b3ab30c3159df5fdbee334d1c,"feat(threads): in split mode select the first thread if none selected

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1354"
emorikawa,2015-03-26 18:39:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/ee51602b26a6c259db8d1eaad05812abe569af44,ee51602b26a6c259db8d1eaad05812abe569af44,"feat(selection): by default nothing is selectable.

Summary:
Now all elements by default have selection set to inherit with the root
level body object set to no selection.

This makes everything (except input elements) not selectable by default.

You can explicitly set the css class or use the new `.selectable` class.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1355"
emorikawa,2015-03-26 01:25:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/e728e5990a39c134d7e9459cca0c77f204c4ef76,e728e5990a39c134d7e9459cca0c77f204c4ef76,"feat(attachments): forwarded messages get attachments too

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1351"
bengotow,2015-03-26 01:22:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/dff54659310ef687be4c0b89c61a624dd650f60d,dff54659310ef687be4c0b89c61a624dd650f60d,"fix(*) Small visual tweaks and fixes - see summary

Summary:
ThreadStore should be done loading as soon as threads are available

SearchSuggestionStore should use ContactsStore for contact results

Contact Store should not ""filter all, take 10"" it should only filter until it has 10. It should also check against ""Ben Gotow"" as well as ""Ben"" and ""Gotow"", so I can type ""Ben Go""

Sometimes participants are ""Ben Gotow <ben@g.com>"", ""ben@g.com"". If we get zero contacts after removing Me, put ""Me"" back in...

Fix ""Update Available"" notification, broken reference to `atom.views.getView(atom.workspace)`

A bit more debugging around cursors. Need to handle this case soon.

Only use atomWorkspace if it exists.

Fix for dragging next to / around toolbar window controls

Consolidate the display of Contacts in menus into a single MenuItem subclass

Update Template Popover styling

fetchFromCache should only remove thread loading indicator *IF* it found results in the cache. Doh...

Give the thread list ""Name"" column a fixed width (mg)

Better styling of message list collapsed mode, rage against user selection and cursor: pointer

Occasionally admin.inboxapp.com returns bogus data

Sebaastian feedback on thread list

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1350"
emorikawa,2015-03-25 20:01:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/c04d8a6a937a7bfe180ca18f8f215d13f2152c55,c04d8a6a937a7bfe180ca18f8f215d13f2152c55,fix(lint): fix minor linting errors
bengotow,2015-03-25 19:41:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f2211f6a0b50a2487d0fdc3c4cd1944c29690b5,8f2211f6a0b50a2487d0fdc3c4cd1944c29690b5,"feat(threads): List improvements and message collapsing

Summary:
This diff uses the new ?expanded=true threads request to fetch threads and the messages inside them at the same time. The messages from this endpoint don't contain bodies. Message bodies have been moved to a new ""secondary attribute"" type, which can be optionally requested when making queries. This allows us to 1) quickly fetch messages without worrying about MBs of JSON, 2) update messages without updating their bodies, and 3) avoid calls to /messages?thread_id=123. The new message store fetches just the items it wants to display in expanded mode, and we'll show snippets for the rest.

Fix up forwarded message

Approach: Thread.messageMetadata

join approach WIP

join approach complete

"""" || null = null. OMG.

Make spinner a bit smarter, use code delays and not css delays

Search suggestion store should only show first 10 matches

Msg collapsing, refactored msg store that will fetch individual messages that are marked as expanded, set loaded = true when it's all done

Test Plan: Tests coming soon. The query refactoring here broke a lot of tests...

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1345"
emorikawa,2015-03-25 18:18:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/dd9309c62612e68bc6c3cf30cddf12a79f9485b6,dd9309c62612e68bc6c3cf30cddf12a79f9485b6,"feat(draft): escape deletes pristine drafts

Summary:
quoted text add and remove at filter level

fix double space quoted text issue when replying to message

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1341"
emorikawa,2015-03-25 18:17:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc5941f3f10fe6411bbafa700f11f14ba6d5ba6d,dc5941f3f10fe6411bbafa700f11f14ba6d5ba6d,"feat(archive): archive now pops back to thread list

Summary:
add spec for message toolbar items

add thread list spec

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1344"
KartikTalwar,2015-03-25 17:27:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/79ad424849412b38032f66b5e49881e7f18e2775,79ad424849412b38032f66b5e49881e7f18e2775,"Logging out while looking at a message returns you to the Root sheet

Summary:
If you open a message and logout, and log-in to a new account, upon successfu
         login you see a blank page instead of the thread list view. This makes the default
         edgehill state to return to the root sheet video upon logout

Test Plan: none

Reviewers: bengotow, evan

Reviewed By: evan

Subscribers: evan

Differential Revision: https://review.inboxapp.com/D1346"
emorikawa,2015-03-24 21:32:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/f2267c8ebd03021e9bdf668deaa51c1bb95d4441,f2267c8ebd03021e9bdf668deaa51c1bb95d4441,fix(toolbar): fix css lint error
emorikawa,2015-03-24 21:03:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d75da673b53e0a2691a28d94795cdbc0ca4ce09,3d75da673b53e0a2691a28d94795cdbc0ca4ce09,"fix(salesforce): salesforce only displays focused contact

Summary: re-display information on re-entry of thread

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1340"
emorikawa,2015-03-24 20:57:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1ec298d4b32f9169e647905a15d31eb9348d257,e1ec298d4b32f9169e647905a15d31eb9348d257,"feat(messages): floating reply area in message-list

Summary:
reply text now scrolls to bottom on new draft

tests for reply type

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1338"
emorikawa,2015-03-24 14:41:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/27345e771924c335a3964c1bd50ca2bf69da893b,27345e771924c335a3964c1bd50ca2bf69da893b,"feat(message-list): nav buttons disable if first or last message

Summary:
fix message list nav buttons

fix buttons

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1332"
emorikawa,2015-03-24 14:40:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/25792f0c9090bdfd4a5cf8d8afc16b34de582339,25792f0c9090bdfd4a5cf8d8afc16b34de582339,"fix(composer): don't show tooltip until double-click & drag is done

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1334"
bengotow,2015-03-23 23:33:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/0669468ec0c406c3a75aca67bae807ca031b805c,0669468ec0c406c3a75aca67bae807ca031b805c,"fix(*): Small fixes for drafts, interface tweaks

Summary:
Message list can be narrower

Account sidebar is narrower

Never open new windows on single click

Blue send button

Clean up cruft from draft deletion

Render composer empty, setProps when draft populated

Use new `pristine` attribute to discard un-changed new drafts

_addToProxy needs deep equals to prevent ""save to = [], cc = []""

Mark as read on click, not afterwards

Allow toolbar / sheet items to style based on the workspace mode

specs covering draft unloading / behavior of cleanup

Always, always reset mode to spec after each test

New tests for destroy draft functionality

Test Plan: Run a handful of new tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1335"
KartikTalwar,2015-03-23 22:57:19,https://api.github.com/repos/nylas/nylas-mail/git/commits/fe72c75dc5b3b2482e9ed9b35b5d58f4bedc6966,fe72c75dc5b3b2482e9ed9b35b5d58f4bedc6966,"Composer now focuses on cc and bbc field onclick

Summary: Refactored focus delays to focus function

Test Plan: none

Reviewers: bengotow, evan

Reviewed By: evan

Subscribers: evan

Differential Revision: https://review.inboxapp.com/D1329"
emorikawa,2015-03-23 22:52:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/bc7fade77c49ae06b6d40f8ac3430490cbc4fb92,bc7fade77c49ae06b6d40f8ac3430490cbc4fb92,fix(sidebar): switch to using Nilas FullContact key
bengotow,2015-03-21 18:59:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/0bbc2e826ab1122f94215fb1d66bb5b0cc84c14d,0bbc2e826ab1122f94215fb1d66bb5b0cc84c14d,"fix(internal): Only for @nilas.com emails, linter errors"
bengotow,2015-03-21 02:18:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/438009e47f7fd0544bae8e6fa4900d116b74e7f2,438009e47f7fd0544bae8e6fa4900d116b74e7f2,friday(*): Minor bug patch for internal sidebar
bengotow,2015-03-21 02:15:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/3ec0fccf4e5513814b58f07a9bd5011e3ba4c469,3ec0fccf4e5513814b58f07a9bd5011e3ba4c469,"friday(*): New ""Internal"" Nilas features in Sidebar"
bengotow,2015-03-21 01:08:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/4bfcf625faae5cf31da553d1d2e8429234311cba,4bfcf625faae5cf31da553d1d2e8429234311cba,fix(packages): Incorrect package names breaking build
bengotow,2015-03-21 00:52:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1fec8b7892f7bda2707f8dfe3557e5e33f0ce48,d1fec8b7892f7bda2707f8dfe3557e5e33f0ce48,"fix(speed): Mark packages as `engine:atom`, don't include coffee,cjsx in compiled app"
bengotow,2015-03-21 00:51:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1edb2a2201992db285d11cff07aae4af17e05e2,e1edb2a2201992db285d11cff07aae4af17e05e2,fix(speed): Remove explicit .cjsx extensions from requires
emorikawa,2015-03-20 23:46:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/17d175b69b0c7370536d540073dd112ee6a4cfc2,17d175b69b0c7370536d540073dd112ee6a4cfc2,fix(loading): fix utils loading bug
emorikawa,2015-03-20 23:31:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/564ecca8e0da61d423314d30d2e6e638ac063756,564ecca8e0da61d423314d30d2e6e638ac063756,"feat(sidebar): add more Salesforce states

Summary:
add more Salesforce states

more salesforce sidebar

extract focused contacts into its own store

fullcontact store fixes

extract thread participants to own module

typo

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1326"
bengotow,2015-03-20 23:16:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/b005d0204b2462e29dbc303502e7f49982561810,b005d0204b2462e29dbc303502e7f49982561810,fix(lint): Whitespace issue
bengotow,2015-03-20 23:16:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/29a7531fd17edd8c2d88f8c5dde0e5dc4428fe8d,29a7531fd17edd8c2d88f8c5dde0e5dc4428fe8d,fix(quoted-text): No quoted text style not being applied
bengotow,2015-03-20 21:52:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/8cb70f9ce603822fa21b304ef73f270185fc51ac,8cb70f9ce603822fa21b304ef73f270185fc51ac,fix(email-frame): Listening for mouse events not necessary?
bengotow,2015-03-20 21:52:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/21e8455ef64445d933664e6741e5fe17a2de5561,21e8455ef64445d933664e6741e5fe17a2de5561,"refactor(layout): More configuration into WorkspaceStore, less in packages"
bengotow,2015-03-20 17:23:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/eb6cc11a8371281dcbb305e2058adf5b56076680,eb6cc11a8371281dcbb305e2058adf5b56076680,"feature(templates): Pick templates, fill variable regions, Draft extensions

Summary:
fix(keymappings): Enter to focus item, logout works now

Minor fix for some problems with activity bar

Fix tabindex = 1 where tabindex should be =-1

Remove idgen that was causing footers to be replaced

WIP

Draft store extension hooks

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1320"
emorikawa,2015-03-20 00:21:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/00631b2e9909b0d85c6e323efc638a68f9b6ffd7,00631b2e9909b0d85c6e323efc638a68f9b6ffd7,"feat(sidebar): add FullContact and Salesforce sidebar

Summary:
store not intelligently figures out the most relevant contact

fix primary contact logic

styling on contactstore

can select different people on the sidebar

add salesforce stub

put return statement back in checking for Salesforce Token

salesforce sidebar loads real data now

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1319"
emorikawa,2015-03-20 00:16:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d99a18bf631b412486cd1111b290d9bee47009a,1d99a18bf631b412486cd1111b290d9bee47009a,"feat(composer): floating toolbar now fades in

Summary: tooltip fades in now

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1317"
emorikawa,2015-03-19 23:57:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/891f86ebce7c9f865ea709ba27217d37fab676f7,891f86ebce7c9f865ea709ba27217d37fab676f7,feat(composer): subject label is a placeholder
emorikawa,2015-03-19 17:28:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/ffd762a9bca45afaa84a37c5ed2a561559b5ab67,ffd762a9bca45afaa84a37c5ed2a561559b5ab67,fix(edgehill-server): auth uses GET token param instead of basic auth
emorikawa,2015-03-19 03:00:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/753a342daec55a976b3d04974396cdc3847523ca,753a342daec55a976b3d04974396cdc3847523ca,fix(composer): fix backwards typing text
bengotow,2015-03-19 02:18:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d89d5059442a536f5dedf0c36836cb7b6cd9d88,4d89d5059442a536f5dedf0c36836cb7b6cd9d88,fix(login): Correct issue with stray `#` at the end of /connect/complete
bengotow,2015-03-19 01:50:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/a791c9d8ba8c72324da02003bbe0fc71fe376a56,a791c9d8ba8c72324da02003bbe0fc71fe376a56,fix(subject): Show the subject line in expanded headers
bengotow,2015-03-19 01:21:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/aad21317e5d1608b16ba5e9f34d341a795a9d72d,aad21317e5d1608b16ba5e9f34d341a795a9d72d,"feat(ui): Updates from March 17th mockups

Summary:
There are two known issues:
- toolbar is not draggable in some areas when in three-pane mode.
- archive button appears over very long subjects. Propose moving this button elsewhere.

WIP

WIP

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1311"
KartikTalwar,2015-03-19 01:11:12,https://api.github.com/repos/nylas/nylas-mail/git/commits/015bd62937c478bc2de807943bb3f5a16818c441,015bd62937c478bc2de807943bb3f5a16818c441,"Added dequeueMatchingTask action to abort fileUploads

Summary:
Moved dequeing action in the same loop

Added fix to delete multiple files

Test Plan: None

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1314"
bengotow,2015-03-18 20:54:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/b61863d33208192b7f23dc080bd231913bad7cf9,b61863d33208192b7f23dc080bd231913bad7cf9,"fix(inline-attachments): Precompute sizes for better inline attachment loading

Summary: test case and fixes

Test Plan: Run new test!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1309"
emorikawa,2015-03-17 23:19:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/d283cb432ba34ef4157680ec72f3ab2168464baf,d283cb432ba34ef4157680ec72f3ab2168464baf,"feat(composer): new composer styles

Summary:
tooltip styling

new styled floating toolbar

move buttons to bottom

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1305"
emorikawa,2015-03-17 23:19:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/b020795b3b84845b5e5470c7e88cfd0c78c55e98,b020795b3b84845b5e5470c7e88cfd0c78c55e98,"feat(contacts): pull full list of contacts from API

Summary:
Also allow to search by last name
Add tests for the ContactStore

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1308"
bengotow,2015-03-17 20:53:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/cce71a38aa696e8be81abee9934b5cfdb9feb28d,cce71a38aa696e8be81abee9934b5cfdb9feb28d,"fix(buttons): Don't use pointer cursor in title bar, or elsewhere for buttons"
bengotow,2015-03-17 19:11:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/dee14a37b715695cec6f306170619c9bc1c6dd87,dee14a37b715695cec6f306170619c9bc1c6dd87,"fix(message-list): Adds fade-in, fixes jerky scroll offset when viewing messages

Summary:
feat(debugging): Put db query tiemstamps in js timelines

Mark as read *after* you stop looking at a message, to avoid pointless repaint while looking

fix specs :'(

Make focus() do something smart if not provided a field name

Stop doing the partial load / full load from cache. Slower, but also means we can evaluate ""correct"" scroll offset in one pass

refactor message-list to fade in after load. simplifies scroll logic

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1306"
emorikawa,2015-03-16 23:17:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/0cc1457d0862d073158bd68f177b42fb796b6bbc,0cc1457d0862d073158bd68f177b42fb796b6bbc,fix(threadlist): can click already-selected thread to re-open
emorikawa,2015-03-16 20:55:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5ec9c16af7773aee27e4dc903f9616f7d00febd,e5ec9c16af7773aee27e4dc903f9616f7d00febd,fix(participants): make remove menu option work
bengotow,2015-03-16 20:42:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/3369d1476c731535c4c1d2c25426e424927053f6,3369d1476c731535c4c1d2c25426e424927053f6,"fix(*) remove console.log, fix CJSX class= issue"
bengotow,2015-03-16 20:42:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/8d0ec33b3cb438f65037b88dca65e3f28dd05775,8d0ec33b3cb438f65037b88dca65e3f28dd05775,fix(logout): Quick fix for infinite logout issue
bengotow,2015-03-14 00:51:42,https://api.github.com/repos/nylas/nylas-mail/git/commits/b43a79a75b81b3445d2942bcd9bea4808440fc20,b43a79a75b81b3445d2942bcd9bea4808440fc20,fix(atom): Requiring react breaking build
emorikawa,2015-03-14 00:05:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/809033c601a81af5366c27a65effc0788e41fdde,809033c601a81af5366c27a65effc0788e41fdde,"feat(analytics) add Mixpanel

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1299"
bengotow,2015-03-14 00:02:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/6b270734efef579d320adce73f9717db5604a6ae,6b270734efef579d320adce73f9717db5604a6ae,"feat(title-bar): Custom titlebar in main app window (darwin-only)

Summary: Only applies to the main window. Will be applied to secondary windows like the composer when design decides whether that window will have a toolbar. (white or gray at the top?)

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1298"
emorikawa,2015-03-13 23:32:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/5a948a7222a950d72ad0041734f20f9859bbf772,5a948a7222a950d72ad0041734f20f9859bbf772,"feat(tags): Draft counts num drafts. Remove trash. Remove important

Summary:
The Drafts tag now displays the total number of local drafts instead of
the number of unread drafts from the server.

The Trash label has been removed since there's no way in the UI to add or
remove stuff from there.

The Important label has been removed since it's a poorly understood
Gmail-specific feature and there's no way in the UI to add or remove
things from that label.

There is no Starred label because there's no UI to indicate whther or not
something is starred and no UI interface to add or remove from stars.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1296"
emorikawa,2015-03-13 20:17:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/02439f3a28f0a2a1a42ed6bae6e1d2f1698958ca,02439f3a28f0a2a1a42ed6bae6e1d2f1698958ca,"feat(composer): show quoted text when forwarding messages

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1291"
bengotow,2015-03-13 20:11:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/c301dcfbb1b5187d4608fdb52a393c196f849aad,c301dcfbb1b5187d4608fdb52a393c196f849aad,"feat(mode-switch): New layout designed for small form factors

Summary:
feat(mode-switch): almost working

Remove SheetStore in favor of bigger WorkspaceStore

Back button for mode switching

Test Plan: Tests WIP

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1292"
emorikawa,2015-03-13 19:55:52,https://api.github.com/repos/nylas/nylas-mail/git/commits/7c9797c7066ffc3317a10bc041925343f609d353,7c9797c7066ffc3317a10bc041925343f609d353,"feat(composer): don't prompt for attachment if in quoted text

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1290"
bengotow,2015-03-13 17:55:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/fa69b07eaa2903a5a9ab03d057b294a4ce899e68,fa69b07eaa2903a5a9ab03d057b294a4ce899e68,"fix(attachments): T427 - show attachments with contentIds not in body

Summary: Resolves an issue where an attachment with a contentId was excluded from the attachments list on the message, even though the cid was not found in the message body.

Test Plan: New test case

Reviewers: evan

Reviewed By: evan

Maniphest Tasks: T427

Differential Revision: https://review.inboxapp.com/D1293"
emorikawa,2015-03-13 01:47:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c2bcd3fba9d784f27adc6f172dd46e1b6a700de,0c2bcd3fba9d784f27adc6f172dd46e1b6a700de,"fix(toolbar): slash focuses search & hidden buttons don't act

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1289"
bengotow,2015-03-13 01:23:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/974f216dcfcd99ca572aa4255688e4f0212e9aac,974f216dcfcd99ca572aa4255688e4f0212e9aac,fix(default-client): Missing return statement
bengotow,2015-03-13 00:55:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/cb59a497d816ee59de6e0a7ccac23bc6ff82d873,cb59a497d816ee59de6e0a7ccac23bc6ff82d873,"fix(react-warnings): Add keys, displayName to React components"
bengotow,2015-03-13 00:36:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/4d6566327fc7eb14f4e42f5c7a2d0eaca2799742,4d6566327fc7eb14f4e42f5c7a2d0eaca2799742,"fix(participants): Remove all sorts of broken cruft, remove ""Me"""
emorikawa,2015-03-12 22:33:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/453e4499558640f58f8e606234e62b8ecd3cf38f,453e4499558640f58f8e606234e62b8ecd3cf38f,fix(tooltip): don't show tooltips for hidden items
emorikawa,2015-03-12 22:11:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/3dbbc6b4744824f219f7bbc7110bd3c67798c7e9,3dbbc6b4744824f219f7bbc7110bd3c67798c7e9,fix(tooltip): hides tooltip if state change underneath you
emorikawa,2015-03-12 22:09:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/033008e036e3eec3e07759dc74f5de5586d3e7d1,033008e036e3eec3e07759dc74f5de5586d3e7d1,"feat(tooltip): add informational tooltip component

Summary: Add tooltip. To use just add a data-tooltip=""plain string""

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1288"
bengotow,2015-03-12 22:07:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/34facc920f4448444b33e4d35d55072dfe2fdd7a,34facc920f4448444b33e4d35d55072dfe2fdd7a,"fix(sheets): Move toolbar, re-introduce :Top region, refactor sheet layout

Summary:
Debounce Component Registry trigger to make app launch much more efficient

Allow arbitrary additional attributes to be set on flexbox, resizable-region

Updates to notification styling

Sheet store maintains an array of sheet types3 instead of sheet elements

Search bar and composer new should be globally visible

Toolbar is now in sheet container instead of individual sheet columns

The sheet container monitors sheet column width and manually positions toolbars

Test Plan: No new tests yet - will see if this design sticks first.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1287"
emorikawa,2015-03-12 21:48:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/6a03c6a034ff86a4efd66d7483ea50f9e756ca53,6a03c6a034ff86a4efd66d7483ea50f9e756ca53,"feat(composer): blocks multiple sending & lots of tests

Summary: fix in composer sending

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1286"
bengotow,2015-03-12 18:43:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/818bca892c05ee209a7cf104925037d79245a50d,818bca892c05ee209a7cf104925037d79245a50d,fix(menu): Fix flashing selection as you type
bengotow,2015-03-11 23:01:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/afe1168acc1e6ecf861d82659f944708dff076ca,afe1168acc1e6ecf861d82659f944708dff076ca,fix(specs): Inconsistent indentation breaking build
bengotow,2015-03-11 22:55:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/6445febbd91b9df21f26dc61b7f29addad09ccde,6445febbd91b9df21f26dc61b7f29addad09ccde,"spec(drafts): Re: -> Fwd: when forwarding, 12 new specs"
bengotow,2015-03-11 21:31:44,https://api.github.com/repos/nylas/nylas-mail/git/commits/5e1b6caa9ea8def480e474a7affbf17c6702c834,5e1b6caa9ea8def480e474a7affbf17c6702c834,fix(onboarding): Drag area was over (X)
bengotow,2015-03-11 21:20:17,https://api.github.com/repos/nylas/nylas-mail/git/commits/9aeeb431cbaffc5fbf77eae156df23cc3afc31d4,9aeeb431cbaffc5fbf77eae156df23cc3afc31d4,fix(drafts): Don't display raw HTML tags in draft previews
bengotow,2015-03-11 20:53:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/443b3ce642f87d5c5593f6099ecbe7e01733e135,443b3ce642f87d5c5593f6099ecbe7e01733e135,"fix(size): On initial launch, make the window full-screen"
emorikawa,2015-03-11 20:17:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/8b2797d3b01e74c25af4e8e88837d1e04938057a,8b2797d3b01e74c25af4e8e88837d1e04938057a,"feat(notifications): move to sidebar

Summary: feat(notifications): move to sidebar

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1282"
bengotow,2015-03-11 20:13:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/69c42115b262732512ad1df25d63c71b1d110691,69c42115b262732512ad1df25d63c71b1d110691,fix(win32): Resize cursors need to be different for win
bengotow,2015-03-11 19:09:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d52458e56ad3497fd8f43309be27d5b222c0b62,3d52458e56ad3497fd8f43309be27d5b222c0b62,refactor(quoted-text): Give `withoutQuotedText` its own specs
emorikawa,2015-03-11 01:44:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/bd2cdd876b1ed5658ea753d691d87e82566928c6,bd2cdd876b1ed5658ea753d691d87e82566928c6,feat(composer): focus on to field for forwarded message
emorikawa,2015-03-11 01:27:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/984b8fb303c9b46e987e6c8f5f722a915c5bde1c,984b8fb303c9b46e987e6c8f5f722a915c5bde1c,feat(composer): shows subject if forwarded message
emorikawa,2015-03-11 01:14:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/0fb7e2c101ad8581f1d7bdc3f6f0f39582f0bb6a,0fb7e2c101ad8581f1d7bdc3f6f0f39582f0bb6a,feat(composer): add popout icon and header styles
bengotow,2015-03-11 01:07:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/6c6e1f2466d92b718a686689cadbb8b1e95716e9,6c6e1f2466d92b718a686689cadbb8b1e95716e9,fix(reply/fwd): Fix for quoted text in new messages
bengotow,2015-03-11 00:45:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/0c97de1bff999000763743a2a5e7d1a6734eb079,0c97de1bff999000763743a2a5e7d1a6734eb079,"feat(onboarding): Make onboarding window taller, stopgap"
emorikawa,2015-03-11 00:52:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/7d10a3a00d4b048ceb4f950169515f401747d52d,7d10a3a00d4b048ceb4f950169515f401747d52d,feat(menus): remove unused menu items
emorikawa,2015-03-10 23:08:07,https://api.github.com/repos/nylas/nylas-mail/git/commits/72f1035324cf2b23dc6cb69091ee576fe369a92c,72f1035324cf2b23dc6cb69091ee576fe369a92c,fix(notifications): only show notification for new messages
emorikawa,2015-03-10 22:45:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/f875650c27430cca03a2300cf2f989b019de19cd,f875650c27430cca03a2300cf2f989b019de19cd,fix(menu): always auto-select the first item of the dropdown menu
emorikawa,2015-03-10 22:40:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/77d9526ecd907c849cf31e643d0980902fed2712,77d9526ecd907c849cf31e643d0980902fed2712,fix(email): iframe bug and search refreshing if not committed
emorikawa,2015-03-10 22:13:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/221817d1e4b7aa0448390c31da3a5034dce78da6,221817d1e4b7aa0448390c31da3a5034dce78da6,fix(send): fix linting error
emorikawa,2015-03-10 22:12:13,https://api.github.com/repos/nylas/nylas-mail/git/commits/501704359e6844cc61b09cb10ac706e2e1bae40d,501704359e6844cc61b09cb10ac706e2e1bae40d,"fix(participants): bcc field displays properly

Can also select text by clicking on the participant"
emorikawa,2015-03-10 21:32:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/961680ef345862c6658eb3cf1f06a754ea0d832e,961680ef345862c6658eb3cf1f06a754ea0d832e,"feat(sending): close immediately and reopen if error

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1276"
bengotow,2015-03-10 20:56:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/6607e3abdc60236dc746c9e37a8f5dab6f6d375b,6607e3abdc60236dc746c9e37a8f5dab6f6d375b,"fix(quoted-text): Better handling for ""Wildcard filters"" email"
emorikawa,2015-03-10 20:27:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/ae73880b2b8eb2432e53e5f140714c2bd67c3256,ae73880b2b8eb2432e53e5f140714c2bd67c3256,feat(messages): add bcc label to message headers
emorikawa,2015-03-10 20:15:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/d5eb68ece1ddb97c9b8b8ed16fdc6fbc1af27d8b,d5eb68ece1ddb97c9b8b8ed16fdc6fbc1af27d8b,fix(scrolling): scroll to end once. Fix draft deletion
bengotow,2015-03-10 19:11:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/6af864e3bdce574e00a99895b064fe0f1c19dc27,6af864e3bdce574e00a99895b064fe0f1c19dc27,fix(*): remove unnecessary code from last commit
bengotow,2015-03-10 19:06:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/46a6e229eb0e5096d0230c506223b8bb1bf752b0,46a6e229eb0e5096d0230c506223b8bb1bf752b0,"fix(fields): paste multiple emails at a time, even with garbage"
emorikawa,2015-03-10 18:30:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/697acd3f0b3835eaf586d879ce5233f2c9d15507,697acd3f0b3835eaf586d879ce5233f2c9d15507,feat(color): fix color visisted state
emorikawa,2015-03-10 18:29:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/fd43c7002d250d4a308af40a547e17b2e3d75f53,fd43c7002d250d4a308af40a547e17b2e3d75f53,"feat(colors): new colors for selection states

Summary: adjust colors

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1273"
bengotow,2015-03-10 18:23:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/c4c6f7c65ae92bf29db3cd25b72066072691436d,c4c6f7c65ae92bf29db3cd25b72066072691436d,fix(dnd): You can now drag and drop attachments onto drafts
bengotow,2015-03-10 18:05:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/df2c64f4dda73d6c832b6029f69596fcdcd781bf,df2c64f4dda73d6c832b6029f69596fcdcd781bf,fix(specs): Thread needs to be defined for MessageItem
bengotow,2015-03-10 18:02:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/682f7efcdc8963f36578f5512814131e3919c58b,682f7efcdc8963f36578f5512814131e3919c58b,fix(drafts): Don't cc the user on reply-all (specs were broken)
bengotow,2015-03-10 17:42:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/e42c649e54203258bf1fb745be874f5100782b74,e42c649e54203258bf1fb745be874f5100782b74,fix(sentry): No longer flood sentry with errors sent while running with `--dev`
bengotow,2015-03-10 17:36:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/16cd75a9332522111c503a1416666ede0665ddf3,16cd75a9332522111c503a1416666ede0665ddf3,feat(activity-bar): Hidden until you show developer tools
emorikawa,2015-03-10 17:32:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/9536feb3397bca98b19c37996890b491bcedb7a2,9536feb3397bca98b19c37996890b491bcedb7a2,fix(message): dont scroll down if only 1 item
emorikawa,2015-03-10 17:08:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/282cc40e9a4ffc20de4c31d528095216b5662fc0,282cc40e9a4ffc20de4c31d528095216b5662fc0,"feat(message): change long format timestamp

Summary: Minor UI fixes

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1271"
emorikawa,2015-03-10 16:52:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ec84561c4323f39b919d50c518deca065ec6b95,6ec84561c4323f39b919d50c518deca065ec6b95,"feat(composer): popout only closes when message sending succeeds

Summary:
This is a WIP to fix the blatant case of messages dissapearing when
there's an error. It's pending a better through through notification UI

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1270"
bengotow,2015-03-10 01:36:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/2189f4f2b7c9c98809d30c06b5e4767ed267a8bd,2189f4f2b7c9c98809d30c06b5e4767ed267a8bd,"fix(speed): Since we don't have pagination yet, show only 100 threads"
bengotow,2015-03-10 01:32:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef7ff27c56140d596ce1732c94e3d4ab6a34e88c,ef7ff27c56140d596ce1732c94e3d4ab6a34e88c,fix(unread): Don't show bogus numbers in thread list
bengotow,2015-03-10 01:31:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/0944dd60b0853d07800d3733ddbc2ab4447d744f,0944dd60b0853d07800d3733ddbc2ab4447d744f,fix(invariant-violation): Don't listen until components are mounted
bengotow,2015-03-10 01:25:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/343e592569771b7ffe89f879d01147914bfb5d99,343e592569771b7ffe89f879d01147914bfb5d99,"feat(draft-list) Refactor thread-list, create draft-list

Summary: Adds the draft list using a refactored list-tabular class. Also fixes several draft bugs that appeared after allowing editing.

Test Plan: Run tests (need to test new ListTabular component ASAP)

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1272"
emorikawa,2015-03-09 18:17:22,https://api.github.com/repos/nylas/nylas-mail/git/commits/b479e099c1c9af711be7c4d81fd8540ba3862c2d,b479e099c1c9af711be7c4d81fd8540ba3862c2d,"feat(messages): expandable message headers

Summary: feat(messages): expandable message headers

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1267"
bengotow,2015-03-09 17:06:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/09dc8887b7efd471b5e9e6d0b1d100ca3c3eb037,09dc8887b7efd471b5e9e6d0b1d100ca3c3eb037,fix(logout): atom-workspace not focused breaking logout
bengotow,2015-03-07 02:37:06,https://api.github.com/repos/nylas/nylas-mail/git/commits/9362f1e9c506dd81bee12236ec835c14c9529525,9362f1e9c506dd81bee12236ec835c14c9529525,fix(win32): Hide menu bar of non-main windows
bengotow,2015-03-07 02:32:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/a650158c8c2c8d7b449a5c986ef0c01017b0a68a,a650158c8c2c8d7b449a5c986ef0c01017b0a68a,fix(win32): Add log out option to windows File menu
bengotow,2015-03-07 00:55:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/27aa11aa60233fc44efbf5c94b84b13eea6e66d8,27aa11aa60233fc44efbf5c94b84b13eea6e66d8,fix(env): Always use staging for now
bengotow,2015-03-07 00:10:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/86c41ca272e961f64924efd4380f29475196d5cf,86c41ca272e961f64924efd4380f29475196d5cf,fix(compose): Temporarily disable composer full height feature
bengotow,2015-03-07 00:08:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/82089f8dbe29395da3a50655c3ff6339a164c92e,82089f8dbe29395da3a50655c3ff6339a164c92e,fix(less): Minor style changes
bengotow,2015-03-06 20:31:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/8788962809e3f555b9ef77c6b9eeff8561c34454,8788962809e3f555b9ef77c6b9eeff8561c34454,fix(buttons): Fix toolbar button sizes to be consistent
bengotow,2015-03-06 20:28:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/54e651da0e09912cfd36e2ef2227523d6d1f5c24,54e651da0e09912cfd36e2ef2227523d6d1f5c24,fix(attachments): Don't show attachments with no name (that are alternative body formats)
bengotow,2015-03-06 20:12:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/0991cf693a0129c514f295a622c013d974f359c7,0991cf693a0129c514f295a622c013d974f359c7,fix(message-list): Clean up unused wrappers and styles
bengotow,2015-03-06 20:03:32,https://api.github.com/repos/nylas/nylas-mail/git/commits/d55aad9ce9374409bb8f1fbbb141a783cad7cb6b,d55aad9ce9374409bb8f1fbbb141a783cad7cb6b,refactor(toolbar): Toolbar items for messages are back!
bengotow,2015-03-06 19:05:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e447ad501a21fccf990e6521a84fef29eb09237,9e447ad501a21fccf990e6521a84fef29eb09237,refactor(toolbar): Better base for building toolbars
bengotow,2015-03-06 18:31:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/a7a46abb8bac996c6fdc3f9475ddd37e3943c6dc,a7a46abb8bac996c6fdc3f9475ddd37e3943c6dc,fix(specs): Run specs from ~/.inbox-spec to prevent collision
bengotow,2015-03-06 05:16:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/3d2a576bf4316aa9667f89e858ba0f329f6c1839,3d2a576bf4316aa9667f89e858ba0f329f6c1839,fix(images): Resolve bad merge
bengotow,2015-03-06 05:16:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/35ac15da3a37126deb87f78d1e375280f973b661,35ac15da3a37126deb87f78d1e375280f973b661,fix(activity-bar): Use more aggressive smoothing for courier
bengotow,2015-03-06 05:15:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/d99c8f1a65622a447741f1c71678e6ffc9aacb36,d99c8f1a65622a447741f1c71678e6ffc9aacb36,fix(long-poll): Turn delta sync back on
emorikawa,2015-03-06 03:57:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/7e7f8e5eda4a8251527fcac0699719023ee4f14e,7e7f8e5eda4a8251527fcac0699719023ee4f14e,"Merge branch 'feat-refactor-layout' of github.com:inboxapp/edgehill into feat-refactor-layout

Conflicts:
	src/flux/models/utils.coffee"
bengotow,2015-03-06 03:46:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/699da9435f994f83cf0d4fa4d25bfb2e1a517192,699da9435f994f83cf0d4fa4d25bfb2e1a517192,fix(specs): Remove workspace from spec helper
bengotow,2015-03-06 03:23:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/0b68f6ebb232c50d20bf005ea5dd69561128b986,0b68f6ebb232c50d20bf005ea5dd69561128b986,Merge branch 'feat-refactor-layout' of github.com:inboxapp/edgehill into feat-refactor-layout
bengotow,2015-03-06 03:22:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/3802e4899b626b3ae282b13697941b7db0d3837f,3802e4899b626b3ae282b13697941b7db0d3837f,fix(search-bar): A few minor tweaks to search
bengotow,2015-03-06 03:22:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/c21f992ed21f13fce18621db51c533ee69774ee4,c21f992ed21f13fce18621db51c533ee69774ee4,fix(activity-bar): Fix activity bar resizing
bengotow,2015-03-06 02:49:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/567acfb14bdadf428a51046e606fe87e3afa0f1b,567acfb14bdadf428a51046e606fe87e3afa0f1b,fix(*) minor patches and fixes for specs / ui
bengotow,2015-03-06 02:49:43,https://api.github.com/repos/nylas/nylas-mail/git/commits/2437528c536fa7d3de3b53662a56cee5df6b3ce0,2437528c536fa7d3de3b53662a56cee5df6b3ce0,fix(*) minor patches and fixes for specs / ui
bengotow,2015-03-06 02:49:26,https://api.github.com/repos/nylas/nylas-mail/git/commits/a3478935943eb44add18f89f93a6a1b442312668,a3478935943eb44add18f89f93a6a1b442312668,fix(keymappings): fix platform keymappings
bengotow,2015-03-06 02:49:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/3c35ef488b5f96ac38ff190cbe9df9cf00879242,3c35ef488b5f96ac38ff190cbe9df9cf00879242,"rm(workspace): Remove workspace, we don't need it."
bengotow,2015-03-06 01:55:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/e5975b2acc810b6b0275a377edc57ea758637dd9,e5975b2acc810b6b0275a377edc57ea758637dd9,fix(packages): Update other packages to new UI
emorikawa,2015-03-06 00:38:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/e49a5e0adca39d4b427453ed4a69df99cdde6d57,e49a5e0adca39d4b427453ed4a69df99cdde6d57,allow removal of cc and bcc fields
bengotow,2015-03-06 00:31:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/9e7a180f0628d596b541be9eabce9fd26004504f,9e7a180f0628d596b541be9eabce9fd26004504f,fix(app): Don't actually need application: handlers
emorikawa,2015-03-06 00:15:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/8823050eb4b9abb3e4ee257f96be8e42ce8051e9,8823050eb4b9abb3e4ee257f96be8e42ce8051e9,more contenteditable component tests
emorikawa,2015-03-06 00:02:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/c443eb333138770db852f3e2857213c87c32239d,c443eb333138770db852f3e2857213c87c32239d,remove fdescribe
emorikawa,2015-03-06 00:00:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/73f4c9791052726ecf2273d68022faa708bf0c27,73f4c9791052726ecf2273d68022faa708bf0c27,tests for contenteditable component
bengotow,2015-03-05 23:59:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/175db163e987d424cf4db042d4539943f33f35ac,175db163e987d424cf4db042d4539943f33f35ac,fix(image-map): Build image map without relative path dependency
bengotow,2015-03-05 23:42:38,https://api.github.com/repos/nylas/nylas-mail/git/commits/d04951dd61d1db48013b29738b3d6fb1b99fb4f2,d04951dd61d1db48013b29738b3d6fb1b99fb4f2,fix(less): Lint errors preventing successful build
emorikawa,2015-03-05 23:41:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/06eb12f39599727ace6ee517bbaec921acc0e528,06eb12f39599727ace6ee517bbaec921acc0e528,add tests for undo manager
emorikawa,2015-03-05 23:19:05,https://api.github.com/repos/nylas/nylas-mail/git/commits/a0cbe8606a8a95941a81663fe58b6c61d07da9de,a0cbe8606a8a95941a81663fe58b6c61d07da9de,fix tests
emorikawa,2015-03-05 22:09:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/db4cc4ef08749e907b1b775926a669b7a06b8a85,db4cc4ef08749e907b1b775926a669b7a06b8a85,adjust min width of account sidebar to prevent text overflow
emorikawa,2015-03-05 21:56:55,https://api.github.com/repos/nylas/nylas-mail/git/commits/4635bf7d144b7764fbfde8ea1b4544e9a978a9ac,4635bf7d144b7764fbfde8ea1b4544e9a978a9ac,test fixes
emorikawa,2015-03-05 21:53:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/b3271432ef23d85fd977db75f751672c6ea418df,b3271432ef23d85fd977db75f751672c6ea418df,inline composer optimistic expansion
emorikawa,2015-03-05 21:33:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/d1b3b83e38cb5b1831f3088cc9802bf6b2c1904b,d1b3b83e38cb5b1831f3088cc9802bf6b2c1904b,remove single space hack
emorikawa,2015-03-05 21:31:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/4af00cfaf4ed0306ab7fd4cb5c92c8470ca8f447,4af00cfaf4ed0306ab7fd4cb5c92c8470ca8f447,more composer styles
bengotow,2015-03-05 21:19:24,https://api.github.com/repos/nylas/nylas-mail/git/commits/d8dbe90c970622208fa0d687ce82c7ef6964eefe,d8dbe90c970622208fa0d687ce82c7ef6964eefe,fix(windows): Windows build changes
bengotow,2015-03-05 18:59:00,https://api.github.com/repos/nylas/nylas-mail/git/commits/6ca63fc01c2d5695aaa1e4ea82828ed31e3a1076,6ca63fc01c2d5695aaa1e4ea82828ed31e3a1076,"Merge branch 'feat-refactor-layout' of github.com:inboxapp/edgehill into feat-refactor-layout

Conflicts:
	static/components/tokenizing-text-field.less"
bengotow,2015-03-05 18:58:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/cce9eba509b189c062370bd6d1fd4bfaa3b14a2f,cce9eba509b189c062370bd6d1fd4bfaa3b14a2f,"Rename `inbox.env` to `env`, because it's not for inbox alone"
emorikawa,2015-03-05 03:06:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7f3e77fde948df2ca626dd39b71eed4eb20e36b,e7f3e77fde948df2ca626dd39b71eed4eb20e36b,composer fixes
emorikawa,2015-03-05 02:47:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/05c6fc9ecf664e926789b7c7de04bbb9f9d755ee,05c6fc9ecf664e926789b7c7de04bbb9f9d755ee,more composer styling
bengotow,2015-03-05 02:12:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/a5508e46bc4eb2d1b1e546da59d143d0b7d05fc7,a5508e46bc4eb2d1b1e546da59d143d0b7d05fc7,New login flow with mobile user agent set
emorikawa,2015-03-04 23:52:40,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecccf72cd836eef4750dc3ac8c1609d29634eb86,ecccf72cd836eef4750dc3ac8c1609d29634eb86,composer footer full-width
bengotow,2015-03-04 23:22:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/ef694d1766be144ac264f012164f2f5172e3ae94,ef694d1766be144ac264f012164f2f5172e3ae94,Fix window level commands by putting an atom-workspace back
bengotow,2015-03-04 23:19:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/2c1975472b708b8ad321cf04a022d0fb171c7413,2c1975472b708b8ad321cf04a022d0fb171c7413,New onboarding
emorikawa,2015-03-04 22:26:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/689ca426de38f0216b40199dedc35540e63a2a17,689ca426de38f0216b40199dedc35540e63a2a17,styling autocomplete
emorikawa,2015-03-04 20:30:54,https://api.github.com/repos/nylas/nylas-mail/git/commits/14a6fa2ab1fe691d8d4198607d95db8973111072,14a6fa2ab1fe691d8d4198607d95db8973111072,participant chip improvements
emorikawa,2015-03-04 18:37:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1535e6a3d0d65a5d296e3eedc36de6df3529477,e1535e6a3d0d65a5d296e3eedc36de6df3529477,antialias text
emorikawa,2015-03-04 18:24:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/79e1d18432eb3e9317888f7814b60aadbe7e8eb8,79e1d18432eb3e9317888f7814b60aadbe7e8eb8,fix quoted text control
emorikawa,2015-03-04 17:49:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/8f89954fd9fbe56f1948169b80bab3ec2d9a0e93,8f89954fd9fbe56f1948169b80bab3ec2d9a0e93,message list styling
emorikawa,2015-03-04 02:51:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7a1f2204656d992954d6a4fdb4d5e3b62a63a3c,e7a1f2204656d992954d6a4fdb4d5e3b62a63a3c,message list styles
emorikawa,2015-03-04 02:09:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/b61e62c6a389a0637d5a83ea97c6d4708b2e239b,b61e62c6a389a0637d5a83ea97c6d4708b2e239b,button and less changes
emorikawa,2015-03-03 20:24:48,https://api.github.com/repos/nylas/nylas-mail/git/commits/b63aad83f182ec664cf2e993e578389f04bb36b1,b63aad83f182ec664cf2e993e578389f04bb36b1,more UI variable improvements
emorikawa,2015-03-03 20:00:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/0f56d1fcaba2cdf4c156a03db41604d290ec2858,0f56d1fcaba2cdf4c156a03db41604d290ec2858,refactoring ui variables for colors
bengotow,2015-03-02 22:15:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/07efd7d432f80e0ca99fb538cb489266bdad08ad,07efd7d432f80e0ca99fb538cb489266bdad08ad,LESS Tweaks
bengotow,2015-03-02 21:28:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/2b195442197338869e0aea88acee0a0bd2c99760,2b195442197338869e0aea88acee0a0bd2c99760,"Restoring SearchBar, adding FontAwesome for icons not designed yet"
bengotow,2015-03-02 21:27:56,https://api.github.com/repos/nylas/nylas-mail/git/commits/cabae1db504f99b0a02b2276feb7c9baf850faf8,cabae1db504f99b0a02b2276feb7c9baf850faf8,"New RetinaImg component, images in sidebar"
bengotow,2015-02-28 00:52:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/a2b93f454e19185fc79f6bb222302e426d0926d9,a2b93f454e19185fc79f6bb222302e426d0926d9,Fix & test case for containsQuotedText
bengotow,2015-02-28 00:51:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/95b8b2df1511ebe7bfbbacb6cd4adc4e097ecf9e,95b8b2df1511ebe7bfbbacb6cd4adc4e097ecf9e,Fix for stray `class=`
bengotow,2015-02-27 23:37:21,https://api.github.com/repos/nylas/nylas-mail/git/commits/1d4c526c6ee4eb9c53a989acf6d39799ccf3ede0,1d4c526c6ee4eb9c53a989acf6d39799ccf3ede0,Adding sebaastian's artwork for icons
bengotow,2015-02-27 23:34:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/985aaf285cacaae2c62b306aefe74a067ad314f0,985aaf285cacaae2c62b306aefe74a067ad314f0,"Make ResizableRegion a core component, not registered with component registry"
bengotow,2015-02-20 21:17:11,https://api.github.com/repos/nylas/nylas-mail/git/commits/d6336dae08a7c3c74a98b6e0c5a1c40f0486c72f,d6336dae08a7c3c74a98b6e0c5a1c40f0486c72f,"Squashed commit of deeply broken branch

commit d1c455515e04424d429c87a07aff248a4a767f23
Merge: 72e5536 512f8db
Author: Ben Gotow <bengotow@gmail.com>
Date:   Thu Feb 19 18:42:29 2015 -0800

    Merge sheet and flexbox components, fonts, and more

    Conflicts:
    	static/workspace-view.less

commit 72e553652f5b26a96155c51e04db46baafb916be
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Feb 18 12:33:08 2015 -0800

    Start transitioning to a better set of ui-variables (from bootstrap)

commit ed22fb7fe1c6544af44fae69b83e7e63965ddf4d
Author: Ben Gotow <bengotow@gmail.com>
Date:   Wed Feb 18 11:55:58 2015 -0800

    I hate CSS

commit 512f8db414ceef74712c9d63ba5a67b44cf778c4
Author: Ben Gotow <bengotow@gmail.com>
Date:   Mon Feb 16 10:10:44 2015 -0800

    Initial work on top toolbar

commit c2d7a0e0a2f6f6ebe254cca24ad0735336d57b70
Author: Ben Gotow <bengotow@gmail.com>
Date:   Thu Feb 12 18:47:26 2015 -0800

    New UI Prototype interaction / stores for sheets"
emorikawa,2015-03-03 03:43:49,https://api.github.com/repos/nylas/nylas-mail/git/commits/cf839fad9c4e17eb7b99b1af9d3655c6d0916c31,cf839fad9c4e17eb7b99b1af9d3655c6d0916c31,fix(composer): normalize html before getting selection
bengotow,2015-03-02 23:47:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/542c2bd4d71f88706588dc0c2e93f996c7249a31,542c2bd4d71f88706588dc0c2e93f996c7249a31,fix(specs): Indentation issue causing bad code
emorikawa,2015-03-02 23:33:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/e7868df1ad99d762849e5af0c9a2ab808d9d7879,e7868df1ad99d762849e5af0c9a2ab808d9d7879,"feat(contenteditable): a React compatible contenteditable

Summary:
toolbar popup displays

restore caret protection on contenteditable

BAD - can't use cursor saving and restoring with react :(

_findNode works

saves and restores cursor state

contenteditable fixes to support cursor

comments on cursor

initial undo manager

extract undo manager and move up in stack

make undo manager a mixin

adding selection snapshots in composer

fixes in undo manager

selection saves selection states properly

move UndoManager and fix draft

selection state can now select backwards

selection works backwards and click not overridden

change bold class to allow for bolding and unbolding

styling of hover component

can set links in composer

bold and italic clicking works. text seleciton works

show link modal on hover

selection fixes

Test Plan: TODO

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1249"
bengotow,2015-03-02 19:23:35,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1fc34a562307bcb4c0ca418aaf8f069cd01f336,e1fc34a562307bcb4c0ca418aaf8f069cd01f336,"fix(drafts): Draft syncing completely disabled to reduce code complexity

Summary:
fix(streaming): Reconnect every 30 seconds, always

Never accept drafts via any API source

fix(attachments): Fix for changes to open API

Get rid of shouldAbort, just let tasks decide what to do in cleanup

Never let SaveDraftTask run while another SaveDraftTask for same draft is running

Never used IPC

Ignore destroy draft 404

Moving draft store proxy to draft store level

Only block on older saves

Replace SaveDraftTask with SyncbackDraftTask, do saving directly from proxy

Never sync back ;-)

Fix specs

Alter SendDraftTask so that it can send an unsaved draft

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1245"
bengotow,2015-02-25 00:24:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/71e216ddff343612075419d8864bd11bc2353158,71e216ddff343612075419d8864bd11bc2353158,fix(messages): Timestamp display issue after merge
bengotow,2015-02-25 00:20:57,https://api.github.com/repos/nylas/nylas-mail/git/commits/2a93c70214889a5602061e04a7cb13a147ce9d07,2a93c70214889a5602061e04a7cb13a147ce9d07,"fix(quoted-text): Show quoted text for short forwarded msgs

Summary: tiny patch, but with lots of tests for message-item and factored out message-timestamp

Test Plan: Run brand new specs!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1225"
bengotow,2015-02-25 00:19:47,https://api.github.com/repos/nylas/nylas-mail/git/commits/0468cb4b39759261371c480a27d4d83d573475d9,0468cb4b39759261371c480a27d4d83d573475d9,"feat(drafts) Reply to draft and minor fixes

Summary:
Initial hooks for reply to message

Per-message actions and reply to message!

Always commit changes before openinig popout composer

Flip message display - newest at bottom like Gmail

WIP specs

New activity bar inspector for deltas

Don't allow long polling connection to restart after end() called

A bit of activity bar refactoring and filter options, clear

Include ""On ... someone wrote"" in replies / fw

Slightly more robust quoted text removal, detects ""On...""

Abort request to really end it

Additional specs for draft store

Test Plan: Run 20 new tests!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1230"
bengotow,2015-02-23 23:13:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/10e9b62ab8bf09531c578a1dfcf6f3a118be6d07,10e9b62ab8bf09531c578a1dfcf6f3a118be6d07,fix(sound): Don't play sounds in specs
emorikawa,2015-02-23 17:34:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/3b0fc853fbfbc6c910e2649409c54360135e274c,3b0fc853fbfbc6c910e2649409c54360135e274c,fix(composer): fix bug where message body says undefined
emorikawa,2015-02-23 02:08:04,https://api.github.com/repos/nylas/nylas-mail/git/commits/25acabc3a00fafb045d97834ac9c8045adeab17b,25acabc3a00fafb045d97834ac9c8045adeab17b,fix(autocomplete): autocomplete dropown can be clicked & selects first
emorikawa,2015-02-23 01:26:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/bb7909f37980a5bf06316aff6714d587ba819d27,bb7909f37980a5bf06316aff6714d587ba819d27,fix(draft): saves silently resolve if draft can't be found
emorikawa,2015-02-21 02:33:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/551ced639e9ee255c3005f2c96fb33c80d278b72,551ced639e9ee255c3005f2c96fb33c80d278b72,fix(build): no more squirrel
emorikawa,2015-02-21 01:50:39,https://api.github.com/repos/nylas/nylas-mail/git/commits/742d38c4ef03a42303d6905c8abfacad9ae41ed4,742d38c4ef03a42303d6905c8abfacad9ae41ed4,fix(draft): fix draft not sending if it wasn't saved first
bengotow,2015-02-20 22:39:02,https://api.github.com/repos/nylas/nylas-mail/git/commits/344524d25926651bdf781fc1af4c51055c554431,344524d25926651bdf781fc1af4c51055c554431,temp(streaming): Never consume deletions to messages
bengotow,2015-02-20 22:34:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/39cdb7abfa0ba4b43aa39bf52aa601a155fe4e46,39cdb7abfa0ba4b43aa39bf52aa601a155fe4e46,temp(streaming): Never consume changes to drafts
emorikawa,2015-02-20 20:24:15,https://api.github.com/repos/nylas/nylas-mail/git/commits/132263c38c1e2289d8331acf362580292efa1daf,132263c38c1e2289d8331acf362580292efa1daf,"refactor(tasks): refactor task store

Summary:
task store fixes

more task store fixes

check for blocked tasks

retry tasks

add spec descriptions

more test stubs

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1209"
bengotow,2015-02-20 20:19:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/c952ea3b1224a68af20bcab5257afc26b56c997b,c952ea3b1224a68af20bcab5257afc26b56c997b,"feat(notifications): Initial pass at new mail notifications

Summary:
Eventually, notification stuff should be moved out of InboxAPI into a separate package, and we should have some documented way of watching for ""new"" things. (Right now it'd be a bit hard to do on the database store...)

Additional fixes:
- AddRemoveTagsTask now optimistically updates the version. Before it would get the new version from the API response. This was bad because it could still cause local changes to be overwritten if you were changing tags really fast.

- AddRemoveTagsTask now takes a threadId, not a thread for consistency with all the rest of our Tasks

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1214"
bengotow,2015-02-19 01:41:18,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8dff2005d5ff173d701f03e34dd043ee314b1ec,e8dff2005d5ff173d701f03e34dd043ee314b1ec,fix(streaming): A few minor fixes for login/logout
bengotow,2015-02-18 22:32:20,https://api.github.com/repos/nylas/nylas-mail/git/commits/cd8afcadf6f21d16dfda41501580743f3e1c9b4b,cd8afcadf6f21d16dfda41501580743f3e1c9b4b,fix(build): Minor LESS lint issue
bengotow,2015-02-18 22:24:34,https://api.github.com/repos/nylas/nylas-mail/git/commits/a94f9ad2a863b6c12b8cde5944c8743453224747,a94f9ad2a863b6c12b8cde5944c8743453224747,"fix(autoupdater): Restore auto update functionality, this time with tests

Summary:
fix(autoupdater): Fix bizarrely broken code in autoupdater

fix(urls): Use nilas.com instead of inboxapp

fix(show-main-window): Cmd-1 is the mac standard

fix(autoupdater): TESTS

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1199"
bengotow,2015-02-18 22:24:16,https://api.github.com/repos/nylas/nylas-mail/git/commits/165f5045fb135da95ee6ff5b5388f44a1dd6a918,165f5045fb135da95ee6ff5b5388f44a1dd6a918,"feat(quoted-text): Edit quoted text in replies

Summary:
Use blockquote, apply gmail's styling

Fix in popout composer so the ... button rests at the bottom

Test Plan: Need to figure out the best strategy for tests here - will write tomorrow

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1197"
bengotow,2015-02-18 22:09:46,https://api.github.com/repos/nylas/nylas-mail/git/commits/651f1057409ba870e54ade53996375192369072a,651f1057409ba870e54ade53996375192369072a,"fix(tests): Clean up after ReactTestUtils, wipe ComponentRegistry between specs

Summary:
Why does message-list have default participants? No other packages do

Component registry warns if mixin component name not found

Clear the component registry between tests and wipe React elements inserted into DOM

Everything should have a displayName, even you ComposerView

Stub all ComponentRegistry dependencies, always

Test Plan: Run all the tests at the same time

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1201"
bengotow,2015-02-18 21:59:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/b97f607a6e483e2f39abe86fc00e93c3c197f87d,b97f607a6e483e2f39abe86fc00e93c3c197f87d,"fix(long-polling): Close streaming connections, wait for changes to stop

Summary: fix(*): Minor onboarding react issue

Test Plan: Run existing tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1208"
bengotow,2015-02-17 01:24:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/f97a1bec22e934a37b3eaba3773fe751880ca130,f97a1bec22e934a37b3eaba3773fe751880ca130,"fix(unread): Use the API instead of the database for unread counts

Summary: Populates the unread tag counts using new API feature instead of using the local cache.

Test Plan: No tests for now :-(

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1195"
bengotow,2015-02-17 01:22:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/dc59b876d3f3ab7894b45f3d2209c30a9ccdc069,dc59b876d3f3ab7894b45f3d2209c30a9ccdc069,"fix(streaming) Use thread/draft version #'s to prevent bad updates

Summary:
fix(http): Support http for API in addition to https throughout

test(attributes): Additional testing for model attributes

fix(versioning): Use version numbers with drafts as well as threads

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1194"
emorikawa,2015-02-17 01:09:28,https://api.github.com/repos/nylas/nylas-mail/git/commits/e8533d8903467fc28166251135f8ff437294e38e,e8533d8903467fc28166251135f8ff437294e38e,"fix(composer): focus on creation and sanitize paste

Summary:
focuses on draft when replying

focus on to field on new composer

santize html on paste in contentedtiable

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1177"
bengotow,2015-02-12 19:40:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/e1b504b1d15e4f9ea0dbdc6baee86118094902fc,e1b504b1d15e4f9ea0dbdc6baee86118094902fc,"🍴 Removing Text Editor, Project and other source

Summary:
🍴 Removing dot-atom

🍴 Fix specs

Remove more unnecessary files

Test Plan: Run tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1186"
bengotow,2015-02-10 19:36:29,https://api.github.com/repos/nylas/nylas-mail/git/commits/104267050dca50cf4485439480def8c3228e45c2,104267050dca50cf4485439480def8c3228e45c2,"fix(specs): Lots of spec improvements. See details

Summary:
- Remove unnecessary log statements
- Use dbPath = null in specs, results in in-memory database
- Only surface promise errors that are Javascript syntax, refernece range or type problems
- Stub out NamespaceStore.current() always

Test Plan: Run tests, see less garbage!

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1171"
emorikawa,2015-02-10 19:10:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/637d5928e6bce8cd6e9f573d6693249583c76ce5,637d5928e6bce8cd6e9f573d6693249583c76ce5,"fix(ui): upgrade packages, minor ui/ux fixes

Summary:
fix keymaps and add archive-and-previous

test for star thread

focus bcc and cc

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1174"
bengotow,2015-02-10 03:31:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/ac30c2569656bb9dff6de9770c23e158acf40b10,ac30c2569656bb9dff6de9770c23e158acf40b10,"fix(cid): Remove src=""cid:"" when we don't have the source"
bengotow,2015-02-10 00:42:53,https://api.github.com/repos/nylas/nylas-mail/git/commits/e9cda3ee7e18eb9017e236c2e39a9de3082bd3da,e9cda3ee7e18eb9017e236c2e39a9de3082bd3da,fix(lint): Resolves minor linter issues
bengotow,2015-02-10 00:22:45,https://api.github.com/repos/nylas/nylas-mail/git/commits/feacf8948bd494116f6227d2ddd77c8a9ee46f96,feacf8948bd494116f6227d2ddd77c8a9ee46f96,fix(feedback): Don't include tokens in feedback logs
bengotow,2015-02-10 00:15:08,https://api.github.com/repos/nylas/nylas-mail/git/commits/2fc89f7d6fbcdb44b75a1f2ca23e640cae224529,2fc89f7d6fbcdb44b75a1f2ca23e640cae224529,fix(launch-services): Use the same approach on all Mac OS X versions
bengotow,2015-02-09 23:22:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/70b260b2850147ab21aafa7938f4e69b85c3bbe0,70b260b2850147ab21aafa7938f4e69b85c3bbe0,fix(launch-services): Support for secure launch services plist
bengotow,2015-02-09 19:23:14,https://api.github.com/repos/nylas/nylas-mail/git/commits/99ff91be3f10a8bf4a5e24c547a0b602bc4d900c,99ff91be3f10a8bf4a5e24c547a0b602bc4d900c,Merge branch 'master' of github.com:inboxapp/edgehill
bengotow,2015-02-09 19:23:09,https://api.github.com/repos/nylas/nylas-mail/git/commits/6f6b916377c6f1ee6071d39539a3d5751017447e,6f6b916377c6f1ee6071d39539a3d5751017447e,fix(database): Fix missing require that caused Linux to silently fail
emorikawa,2015-02-09 18:29:58,https://api.github.com/repos/nylas/nylas-mail/git/commits/a48e5ac3ec48520f434c2195227e37753b2831a8,a48e5ac3ec48520f434c2195227e37753b2831a8,fix(packages): upgrade package versions to fix io.js bug
bengotow,2015-02-07 01:07:01,https://api.github.com/repos/nylas/nylas-mail/git/commits/51922d23a2f448f209a87bf8a2be2a736d907ddd,51922d23a2f448f209a87bf8a2be2a736d907ddd,refactor(*): Remove disabledPackages that no longer exist
bengotow,2015-02-07 00:57:33,https://api.github.com/repos/nylas/nylas-mail/git/commits/73b99880fdad3e831929db7d49f40a6f8461eec3,73b99880fdad3e831929db7d49f40a6f8461eec3,"refactor(*): Remove Atom package dependecies and Atom styles!

Test Plan: Run existing tests

Reviewers: evan

Differential Revision: https://review.inboxapp.com/D1160"
emorikawa,2015-02-06 23:57:03,https://api.github.com/repos/nylas/nylas-mail/git/commits/210162167facdc0d7a0fd88b77306b2c4834db84,210162167facdc0d7a0fd88b77306b2c4834db84,fix(keymaps): typo
emorikawa,2015-02-06 23:55:37,https://api.github.com/repos/nylas/nylas-mail/git/commits/2ec4161b85b6470d31736ccd8e63584f1468e148,2ec4161b85b6470d31736ccd8e63584f1468e148,fix(keymaps): make shift arrows and others work in inputs
emorikawa,2015-02-06 23:47:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/9b15858bf2ecba65d4d87cce8d2f24a97285fe64,9b15858bf2ecba65d4d87cce8d2f24a97285fe64,fix(attachment): fix message attachment & rename to AttachmentComponent
bengotow,2015-02-06 23:28:36,https://api.github.com/repos/nylas/nylas-mail/git/commits/59b715535745dc5c0111edb4e13175f773d3db5e,59b715535745dc5c0111edb4e13175f773d3db5e,fix(flex): Slightly tweaked flex constants (only until redesign)
bengotow,2015-02-06 23:09:51,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f1746503bf6518fe3d4faa7190fd8f6c1524e38,4f1746503bf6518fe3d4faa7190fd8f6c1524e38,"fix(*): Post-merge cleanup, keymaps, database init issue"
bengotow,2015-02-06 22:47:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/a54f4ed3ba711651ce6abeab36ad1987f01bfaa9,a54f4ed3ba711651ce6abeab36ad1987f01bfaa9,"refactor(database): Open only one sqlite connection, run requests from Browser process

Summary: This diff is the beginning of a larger refactor to move lots of stuff to the Browser process!

Test Plan: No tests

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1156"
bengotow,2015-02-06 22:46:30,https://api.github.com/repos/nylas/nylas-mail/git/commits/e4889b390f2d57c1963326312b352c028b63672e,e4889b390f2d57c1963326312b352c028b63672e,"refactor(participants): Use DragDropMixin, Menu

Summary:
This diff replaces the participant text fields with ones based on TokenizingTextField, a new core
component that handles autocompletion, drag and drop of tokens, etc.

Fix large queries overloading SQLite size limits

New general purpose tokenized text field with token selection, copy paste, etc

Move pre-send logic to the view since DraftStore requests from db, which may not have settled

Tests - still a WIP

Support for contextual menus instead of X

Test Plan: Run new tests. Needs many more, but have higher priority things to fix

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1142"
emorikawa,2015-02-06 22:41:59,https://api.github.com/repos/nylas/nylas-mail/git/commits/a31c2808a946861a1d9c6f51382b71fee784861c,a31c2808a946861a1d9c6f51382b71fee784861c,"fix(composer): make uploading attachments work

Summary:
There were several issues causing uploading to not work:

  # The file upload response came back as a string instead of an Object. Needed to detect and `JSON.parse`
  # The `MessageAttachment` component was not available as a package on the popout composer (since it used to be inside of `MessageList`)
  # The `message.draft` bit was not set properly causing the DB changes to be ignored
  # The actions notifying of `uploadStateChanged` were only being broadcasted in the main window (where the `TaskStore` is) and never making it to the popout composer.

Also keybindings for close window and up & down arrows were fixed.

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1157"
bengotow,2015-02-06 21:13:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/db669fd9a9c5ee724b18ac679447998f424735b6,db669fd9a9c5ee724b18ac679447998f424735b6,"feature(attachments): Inline attachments, download store does not use tasks

Summary:
This diff updates the FileDownloadStore to use it's own internal Download class instead of leveraging the TaskStore (since downloads shouldn't be resumable / serialized to disk anyway). This means things can be tighter and less dependent on Actions. Downloads are now promise-based, so actions like ""open file after downloading"" can be chained to the end of the Download promise.

The MessageStore now queues downloads for inline attachments when you view the thread, and the MessageItem.cjsx substitutes in local file paths for cid:<CID>.

Test Plan: I made some pretty big changes and did not break any tests. This is a bad sign... Tests forthcoming, but will probably ship this to users tomorrow first.

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1149"
emorikawa,2015-02-05 02:31:41,https://api.github.com/repos/nylas/nylas-mail/git/commits/4f8366a772976629558fda8ee585679f7ae7bfbc,4f8366a772976629558fda8ee585679f7ae7bfbc,"refactor(keymaps): override-key-bindings instead of native-key-bindings

Summary: This diff essentially inverts the behavior of native-key-bindings. Instead of opting-in to native-key-bindings, they're applied UNLESS there's an override-key-bindings class. I think this may be a better solution for us since we don't often want to override behavior like Copy and Select All.

Test Plan: No new tests on this one...

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1124"
emorikawa,2015-02-05 02:22:23,https://api.github.com/repos/nylas/nylas-mail/git/commits/708dff10ed6fed947e40ac0fc7eaa9c6ed8b773a,708dff10ed6fed947e40ac0fc7eaa9c6ed8b773a,"feat(star): add star to tabular thread list item

Summary:
Also fixed a bug whereby the thread list item wasn't changing because the
tag change was too deep for React to diff properly

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1132"
emorikawa,2015-02-05 02:17:50,https://api.github.com/repos/nylas/nylas-mail/git/commits/735f4fd1169e0b914c32b98e4e8f276e16652784,735f4fd1169e0b914c32b98e4e8f276e16652784,"fix(iframe): open iframe links that are nested in an <a> tag

Summary: Also remove the static email-iframe.css since it's now inline

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1133"
emorikawa,2015-02-05 02:17:10,https://api.github.com/repos/nylas/nylas-mail/git/commits/469e9b049f2e85ff4f9ded137c275821e3ce78f1,469e9b049f2e85ff4f9ded137c275821e3ce78f1,"feat(text): overflow uses ellipsis instead of wrapping

Test Plan: edgehill --test

Reviewers: bengotow

Reviewed By: bengotow

Differential Revision: https://review.inboxapp.com/D1134"
bengotow,2015-02-04 23:30:27,https://api.github.com/repos/nylas/nylas-mail/git/commits/ecd6f37ef06d37393e67dfbee602dc0527236908,ecd6f37ef06d37393e67dfbee602dc0527236908,"fix(builds): Resolve issues that have been blocking builds

Summary:
Fix bad LESS

Use CJSX glob-to-multiple?

Look for themes in internal_packages

Test Plan: Run build

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1127"
bengotow,2015-02-04 01:16:25,https://api.github.com/repos/nylas/nylas-mail/git/commits/b189afeeaf42c40ec38a30d34dcf6fa9cd882ca1,b189afeeaf42c40ec38a30d34dcf6fa9cd882ca1,fix(drafts): Rename files inbox-composer =>composer
bengotow,2015-02-04 00:24:31,https://api.github.com/repos/nylas/nylas-mail/git/commits/1e8fd46342ae431424581f45ca4640dc86fb6324,1e8fd46342ae431424581f45ca4640dc86fb6324,"fix(drafts): Various improvements and fixes to drafts, draft state management

Summary:
This diff contains a few major changes:

1. Scribe is no longer used for the text editor. It's just a plain contenteditable region. The toolbar items (bold, italic, underline) still work. Scribe was causing React inconcistency issues in the following scenario:
   - View thread with draft, edit draft
   - Move to another thread
   - Move back to thread with draft
   - Move to another thread. Notice that one or more messages from thread with draft are still there.

There may be a way to fix this, but I tried for hours and there are Github Issues open on it's repository asking for React compatibility, so it may be fixed soon. For now contenteditable is working great.

2. Action.saveDraft() is no longer debounced in the DraftStore. Instead, firing that action causes the save to happen immediately, and the DraftStoreProxy has a new ""DraftChangeSet"" class which is responsbile for batching saves as the user interacts with the ComposerView. There are a couple big wins here:

   - In the future, we may want to be able to call Action.saveDraft() in other situations and it should behave like a normal action. We may also want to expose the DraftStoreProxy as an easy way of backing interactive draft UI.

   - Previously, when you added a contact to To/CC/BCC, this happened:

     <input> -> Action.saveDraft -> (delay!!) -> Database -> DraftStore -> DraftStoreProxy -> View Updates

Increasing the delay to something reasonable like 200msec meant there was 200msec of lag before you saw the new view state.

To fix this, I created a new class called DraftChangeSet which is responsible for accumulating changes as they're made and firing Action.saveDraft. ""Adding"" a change to the change set also causes the Draft provided by the DraftStoreProxy to change immediately (the changes are a temporary layer on top of the database object). This means no delay while changes are being applied. There's a better explanation in the source!

This diff includes a few minor fixes as well:

1. Draft.state is gone—use Message.object = draft instead
2. String model attributes should never be null
3. Pre-send checks that can cancel draft send
4. Put the entire curl history and task queue into feedback reports
5. Cache localIds for extra speed
6. Move us up to latest React

Test Plan: No new tests - once we lock down this new design I'll write tests for the DraftChangeSet

Reviewers: evan

Reviewed By: evan

Differential Revision: https://review.inboxapp.com/D1125"
