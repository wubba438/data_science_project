ExoPlayer,An extensible media player for Android
username,timestamp,url,sha,message
ojw28,2019-08-09 20:01:05,https://api.github.com/repos/google/ExoPlayer/git/commits/85c10b02567b66ecfaaaacfd0ba9389b41bf919e,85c10b02567b66ecfaaaacfd0ba9389b41bf919e,"Merge pull request #6279 from google/dev-v2-r2.10.4

r2.10.4"
tonihei,2019-08-05 15:57:44,https://api.github.com/repos/google/ExoPlayer/git/commits/d1ac2727a6e1d2928d203791c6453908e77038e5,d1ac2727a6e1d2928d203791c6453908e77038e5,"Update stale TrackSelections in chunk sources when keeping the streams.

If we keep streams in chunk sources after selecting new tracks, we also keep
a reference to a stale disabled TrackSelection object. Fix this by updating
the TrackSelection object when keeping the stream. The static part of the
selection (i.e. the subset of selected tracks) stays the same in all cases.

Issue:#6256
PiperOrigin-RevId: 261696082"
tonihei,2019-08-05 09:43:50,https://api.github.com/repos/google/ExoPlayer/git/commits/936a7789c98484616bef4df30bed8ccf79786734,936a7789c98484616bef4df30bed8ccf79786734,"Check if controller is used when performing click directly.

Issue:#6260
PiperOrigin-RevId: 261647858"
ojw28,2019-08-02 18:03:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b0c2b1a0fa762a9c09ecad0c300193dd768827ce,b0c2b1a0fa762a9c09ecad0c300193dd768827ce,"Bump annotations dependency

PiperOrigin-RevId: 261353271"
ojw28,2019-08-02 17:05:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f3e5aaae3dddf779aa26be1d8f3cb7fd71a6596c,f3e5aaae3dddf779aa26be1d8f3cb7fd71a6596c,"Upgrade dependency versions

PiperOrigin-RevId: 261341256"
ojw28,2019-08-02 17:02:21,https://api.github.com/repos/google/ExoPlayer/git/commits/f2cff05c6914b1f987120e11ab4aedf05de210e7,f2cff05c6914b1f987120e11ab4aedf05de210e7,"Remove obsolete workaround

PiperOrigin-RevId: 261340526"
ojw28,2019-08-02 15:49:17,https://api.github.com/repos/google/ExoPlayer/git/commits/cd7fe05db72011154508087753f85cb198981a45,cd7fe05db72011154508087753f85cb198981a45,"Constraint seek targetGranule within bounds + simplify tests

PiperOrigin-RevId: 261328701"
ojw28,2019-08-02 14:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/f497bb96100bf86ba15f01dfe6007757ab9e5b8e,f497bb96100bf86ba15f01dfe6007757ab9e5b8e,"Move DefaultOggSeeker tests into a single class

PiperOrigin-RevId: 261320318"
ojw28,2019-08-02 14:29:12,https://api.github.com/repos/google/ExoPlayer/git/commits/1da5689ea08a527efebcd9a0391703fa75d7dcc6,1da5689ea08a527efebcd9a0391703fa75d7dcc6,"Improve extractor tests based on ExtractorAsserts

- Test seeking to (timeUs=0, position=0), which should always work
  and produce the same output as initially reading from the start
  of the stream.
- Reset the input when testing seeking, to ensure IO errors are
  simulated for this case.

PiperOrigin-RevId: 261317898"
ojw28,2019-08-02 14:20:35,https://api.github.com/repos/google/ExoPlayer/git/commits/3c8c5a3346eb05db16a9125072b8d101b8e222e2,3c8c5a3346eb05db16a9125072b8d101b8e222e2,"Fix DefaultOggSeeker seeking

- When in STATE_SEEK with targetGranule==0, seeking would exit
  without checking that the input was positioned at the correct
  place.
- Seeking could fail due to trying to read beyond the end of the
  stream.
- Seeking was not robust against IO errors during the skip phase
  that occurs after the binary search has sufficiently converged.

PiperOrigin-RevId: 261317035"
andrewlewis,2019-08-01 18:36:18,https://api.github.com/repos/google/ExoPlayer/git/commits/80bc50b647b2cf3555f1ba4c2d4cf1900bba8858,80bc50b647b2cf3555f1ba4c2d4cf1900bba8858,"Revert to using header bitrate for CBR MP3s

A previous change switched to calculation of the bitrate based on the
first MPEG audio header in the stream. This had the effect of fixing
seeking to be consistent with playing from the start for streams where
every frame has the same padding value, but broke streams where the
encoder (correctly) modifies the padding value to match the declared
bitrate in the header.

Issue: #6238
PiperOrigin-RevId: 261163904"
ojw28,2019-08-01 20:06:56,https://api.github.com/repos/google/ExoPlayer/git/commits/88b68e5902c52ccf407a074aabd587d9fb473110,88b68e5902c52ccf407a074aabd587d9fb473110,Fix ExoPlayerTest
ojw28,2019-08-01 15:32:29,https://api.github.com/repos/google/ExoPlayer/git/commits/f5e92134af3c0f112ec8ad7644d7282b7e8e2ce8,f5e92134af3c0f112ec8ad7644d7282b7e8e2ce8,"Shorten data length if it exceeds length of input

Issue: #6241
PiperOrigin-RevId: 261126968"
ojw28,2019-07-31 18:54:12,https://api.github.com/repos/google/ExoPlayer/git/commits/6d20a5cf0cc080f2bff03c60fd8e5321faea2dac,6d20a5cf0cc080f2bff03c60fd8e5321faea2dac,"WavExtractor: Skip to data start position if position reset to 0

PiperOrigin-RevId: 260970865"
ojw28,2019-07-31 12:27:57,https://api.github.com/repos/google/ExoPlayer/git/commits/c373ff0a1c72c39e811dea1cc0ddb1da3915c28f,c373ff0a1c72c39e811dea1cc0ddb1da3915c28f,"Don't print warning when skipping RIFF and FMT chunks

They're not unexpected!

PiperOrigin-RevId: 260907687"
andrewlewis,2019-04-18 13:15:38,https://api.github.com/repos/google/ExoPlayer/git/commits/7ec7aab320eb13a5a1459cb7b158fac1b0c94fc5,7ec7aab320eb13a5a1459cb7b158fac1b0c94fc5,"Move E-AC3 workaround out of MediaCodecUtil

PiperOrigin-RevId: 244173887"
ojw28,2019-08-01 17:39:20,https://api.github.com/repos/google/ExoPlayer/git/commits/7162bd81537723c1f92137b3000e0e9c916541cb,7162bd81537723c1f92137b3000e0e9c916541cb,"Propagate non-standard MIME type aliases

Issue: #5938
PiperOrigin-RevId: 261150349"
ojw28,2019-08-01 15:14:12,https://api.github.com/repos/google/ExoPlayer/git/commits/23ace1936984238e8dbf616ad5a1751687fcb0c2,23ace1936984238e8dbf616ad5a1751687fcb0c2,"Standardize ALAC initialization data

Android considers ALAC initialization data to consider of the magic
cookie only, where-as FFmpeg requires a full atom. Standardize around
the Android definition, since it makes more sense (the magic cookie
being contained within an atom is container specific, where-as the
decoder shouldn't care what container the media stream is carried in)

Issue: #5938
PiperOrigin-RevId: 261124155"
ojw28,2019-08-01 12:06:45,https://api.github.com/repos/google/ExoPlayer/git/commits/520275ec71fd886b5f50a834deaaf60038a1650e,520275ec71fd886b5f50a834deaaf60038a1650e,"Make OggSeeker.startSeek take a granule rather than a time

PiperOrigin-RevId: 261102180"
ojw28,2019-08-01 12:05:07,https://api.github.com/repos/google/ExoPlayer/git/commits/740502103fac125a5ae948ce7b60fcf7d1baff54,740502103fac125a5ae948ce7b60fcf7d1baff54,"Some no-op cleanup for DefaultOggSeeker

PiperOrigin-RevId: 261102008"
marcbaechinger,2019-08-01 11:15:59,https://api.github.com/repos/google/ExoPlayer/git/commits/4438cdb282b4413c2b2ec0261094ebc95d86cc47,4438cdb282b4413c2b2ec0261094ebc95d86cc47,"return lg specific mime type as codec supported type for OMX.lge.alac.decoder

ISSUE: #5938
PiperOrigin-RevId: 261097045"
ojw28,2019-08-01 19:37:19,https://api.github.com/repos/google/ExoPlayer/git/commits/309d043ceeb9d1adb392ebebf12f7e300b45780c,309d043ceeb9d1adb392ebebf12f7e300b45780c,"Merge pull request #6239 from ittiam-systems:vorbis-picture-parse

PiperOrigin-RevId: 261087432"
ojw28,2019-08-01 09:34:11,https://api.github.com/repos/google/ExoPlayer/git/commits/e159e3acd0ce45d41dc67ae001ab5bd2a08933cb,e159e3acd0ce45d41dc67ae001ab5bd2a08933cb,"Mp3Extractor: Avoid outputting non-zero position seek frame as a sample

Checking inputPosition == 0 isn't sufficient because the synchronization
at the top of read() may advance the input (i.e. in the case where there's
some garbage prior to the seek frame).

PiperOrigin-RevId: 261086901"
ojw28,2019-07-31 17:02:21,https://api.github.com/repos/google/ExoPlayer/git/commits/3e99e7af547f625ad3a616538947e88adaf7e123,3e99e7af547f625ad3a616538947e88adaf7e123,"Clean up some Ogg comments & document granulePosition

PiperOrigin-RevId: 260947018"
ojw28,2019-07-31 15:44:19,https://api.github.com/repos/google/ExoPlayer/git/commits/b5ca187e85930228fee353a29c270af3ea43049b,b5ca187e85930228fee353a29c270af3ea43049b,"Mp3Extractor: Avoid outputting seek frame as a sample

This could previously occur when seeking back to position=0

PiperOrigin-RevId: 260933636"
ojw28,2019-07-30 15:14:06,https://api.github.com/repos/google/ExoPlayer/git/commits/58e70e8351a2de018f41f91be63f388220268e01,58e70e8351a2de018f41f91be63f388220268e01,"Update javadoc for TrackOutput#sampleData to make it more clear that implementors aren't expected to rewind with setPosition()

PiperOrigin-RevId: 260718614"
ojw28,2019-07-29 21:41:58,https://api.github.com/repos/google/ExoPlayer/git/commits/8c1b60f2db09ce063d5f3815c74ee02f1d54a257,8c1b60f2db09ce063d5f3815c74ee02f1d54a257,"Tweak Firebase JobDispatcher extension README

PiperOrigin-RevId: 260583198"
andrewlewis,2019-07-29 15:08:37,https://api.github.com/repos/google/ExoPlayer/git/commits/f5980a54a3f96537f8b905b9df47d722a6c3f8a0,f5980a54a3f96537f8b905b9df47d722a6c3f8a0,"Ensure the SilenceMediaSource position is in range

Issue: #6229
PiperOrigin-RevId: 260500986"
ojw28,2019-07-28 19:29:55,https://api.github.com/repos/google/ExoPlayer/git/commits/d279c3d281a7affcbc72a4b81ad2dddf088e0303,d279c3d281a7affcbc72a4b81ad2dddf088e0303,Update README.md
ojw28,2019-07-28 19:29:29,https://api.github.com/repos/google/ExoPlayer/git/commits/d395db97df3f493fe9fe4913f81cf83d934eac38,d395db97df3f493fe9fe4913f81cf83d934eac38,Update README.md
ojw28,2019-07-28 19:27:35,https://api.github.com/repos/google/ExoPlayer/git/commits/e56deba9fe3bd5108a91bea9caa46e3297d2758e,e56deba9fe3bd5108a91bea9caa46e3297d2758e,Update README.md
ojw28,2019-07-28 19:26:55,https://api.github.com/repos/google/ExoPlayer/git/commits/926ad198229fd19286a562790880699c4d916209,926ad198229fd19286a562790880699c4d916209,Update README.md
erdemguven,2019-05-21 15:01:24,https://api.github.com/repos/google/ExoPlayer/git/commits/9c88e54837f4b9f7ac0ef885597d09c6b64e8115,9c88e54837f4b9f7ac0ef885597d09c6b64e8115,"Deprecate JobDispatcherScheduler

PiperOrigin-RevId: 249250184"
ojw28,2019-07-26 17:07:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d76bf4bfcae925c2bd3799225f9ba5b8ca5aa96d,d76bf4bfcae925c2bd3799225f9ba5b8ca5aa96d,"Bump version to 2.10.4

PiperOrigin-RevId: 260164426"
andrewlewis,2019-07-26 16:20:45,https://api.github.com/repos/google/ExoPlayer/git/commits/95d2988490f7335474059154cdc7807150a253d1,95d2988490f7335474059154cdc7807150a253d1,"Fix handling of channel count changes with speed adjustment

When using speed adjustment it was possible for playback to get stuck at a
period transition when the channel count changed: SonicAudioProcessor would be
drained at the point of the period transition in preparation for creating a new
AudioTrack with the new channel count, but during draining the incorrect (new)
channel count was used to calculate the output buffer size for pending data from
Sonic. This meant that, for example, if the channel count changed from stereo to
mono we could have an output buffer size that stored an non-integer number of
audio frames, and in turn this would cause writing to the AudioTrack to get
stuck as the AudioTrack would prevent writing a partial audio frame.

Use Sonic's current channel count when draining output to fix the issue.

PiperOrigin-RevId: 260156541"
ojw28,2019-07-26 16:01:47,https://api.github.com/repos/google/ExoPlayer/git/commits/70978cee78ff83959b7937c74b0902f0c25480e5,70978cee78ff83959b7937c74b0902f0c25480e5,Update release notes
ojw28,2019-07-18 18:40:34,https://api.github.com/repos/google/ExoPlayer/git/commits/0b756a9646e3e979a2645219acc4fd6fec960e2b,0b756a9646e3e979a2645219acc4fd6fec960e2b,"Merge pull request #6042 from Timbals:dev-v2

PiperOrigin-RevId: 258812820"
ojw28,2019-07-26 15:08:56,https://api.github.com/repos/google/ExoPlayer/git/commits/78d6393213bdb8973508a2b91ff38046af723c9e,78d6393213bdb8973508a2b91ff38046af723c9e,"Add A10-70L to output surface workaround

Issue: #6222
PiperOrigin-RevId: 260146226"
ojw28,2019-07-23 18:59:55,https://api.github.com/repos/google/ExoPlayer/git/commits/97e98ab4ed6a7bed687777a17e9a1c4d853c8a92,97e98ab4ed6a7bed687777a17e9a1c4d853c8a92,"Cast: Remove obsolete flavor dimension

PiperOrigin-RevId: 259582498"
tonihei,2019-07-18 15:18:49,https://api.github.com/repos/google/ExoPlayer/git/commits/40fd11d9e8fe094a8cf2d3d66c2d00407c423897,40fd11d9e8fe094a8cf2d3d66c2d00407c423897,"Further language normalization tweaks for API < 21.

1. Using the Locale on API<21 doesn't make any sense because it's a no-op
   anyway. Slightly restructured the code to avoid that.
2. API<21 often reports languages with non-standard underscores instead of
   dashes. Normalize that too.
3. Some invalid language tags on API>21 get normalized to ""und"". Use original
   tag in such a case.

Issue:#6153
PiperOrigin-RevId: 258773463"
tonihei,2019-07-18 09:08:19,https://api.github.com/repos/google/ExoPlayer/git/commits/f82920926d107252f3bceea78c8a5da215b43d47,f82920926d107252f3bceea78c8a5da215b43d47,"Switch language normalization to 2-letter language codes.

2-letter codes (ISO 639-1) are the standard Android normalization and thus we
should prefer them to 3-letter codes (although both are technically allowed
according the BCP47).

This helps in two ways:
 1. It simplifies app interaction with our normalized language codes as the
    Locale class makes it easy to convert a 2-letter to a 3-letter code but
    not the other way round.
 2. It better normalizes codes on API<21 where we previously had issues with
    language+country codes (see tests).
 3. It allows us to normalize both ISO 639-2/T and ISO 639-2/B codes to the same
    language.

PiperOrigin-RevId: 258729728"
AquilesCanta,2019-07-17 17:22:04,https://api.github.com/repos/google/ExoPlayer/git/commits/e181d4bd3520756a590078b6248a891e915c0977,e181d4bd3520756a590078b6248a891e915c0977,"Fix DataSchemeDataSource re-opening and range requests

Issue:#6192
PiperOrigin-RevId: 258592902"
tonihei,2019-07-17 16:33:36,https://api.github.com/repos/google/ExoPlayer/git/commits/962d5e7040d1aeb6e1098488851965e42f862e33,962d5e7040d1aeb6e1098488851965e42f862e33,"Keep default start position (TIME_UNSET) as content position for preroll ads.

If we use the default start position, we currently resolve it immediately
even if we need to play an ad first, and later try to project forward again
if we believe that the default start position should be used.

This causes problems if a specific start position is set and the later
projection after the preroll ad shouldn't take place.

The problem is solved by keeping the content position as TIME_UNSET (= default
position) if an ad needs to be played first. The content after the ad can
then be resolved to its current default position if needed.

PiperOrigin-RevId: 258583948"
ojw28,2019-07-17 09:10:39,https://api.github.com/repos/google/ExoPlayer/git/commits/fa691035d3cb51debd041fa10d157b68aa8294a0,fa691035d3cb51debd041fa10d157b68aa8294a0,"Extend RK video_decoder workaround to newer API levels

Issue: #6184
PiperOrigin-RevId: 258527533"
ojw28,2019-07-14 15:24:00,https://api.github.com/repos/google/ExoPlayer/git/commits/bba0a27cb6fda742e29ef31aa5b52889076fb181,bba0a27cb6fda742e29ef31aa5b52889076fb181,"Merge pull request #6151 from ittiam-systems:bug-5527

PiperOrigin-RevId: 257668797"
ojw28,2019-07-06 10:09:36,https://api.github.com/repos/google/ExoPlayer/git/commits/b6777e030e7cec89ef7b735515be8c2d0ef5bb82,b6777e030e7cec89ef7b735515be8c2d0ef5bb82,"Remove some UI classes from nullness blacklist

PiperOrigin-RevId: 256751627"
ojw28,2019-07-05 16:07:38,https://api.github.com/repos/google/ExoPlayer/git/commits/b5e3ae454249af6b5932145d2a417452d113f53a,b5e3ae454249af6b5932145d2a417452d113f53a,"Add Nullable annotations to CastPlayer

PiperOrigin-RevId: 256680382"
ojw28,2019-07-04 19:02:20,https://api.github.com/repos/google/ExoPlayer/git/commits/383c0adcca44a907699b3873489a17563ad5f064,383c0adcca44a907699b3873489a17563ad5f064,"Remove more low hanging fruit from nullness blacklist

PiperOrigin-RevId: 256573352"
ojw28,2019-07-04 10:38:48,https://api.github.com/repos/google/ExoPlayer/git/commits/a2a14146231a803ecc5bd3a0afde0cfa0e842d7b,a2a14146231a803ecc5bd3a0afde0cfa0e842d7b,"Remove FlacExtractor from nullness blacklist

PiperOrigin-RevId: 256526365"
ojw28,2019-07-04 10:32:20,https://api.github.com/repos/google/ExoPlayer/git/commits/008efd10a4ba4aff4c68be7be5c46601e79373c1,008efd10a4ba4aff4c68be7be5c46601e79373c1,"Make FlacExtractor output methods static

This gives a caller greater confidence that the methods have no
side effects, and remove any nullness issues with these methods
accessing @Nullable member variables.

PiperOrigin-RevId: 256525739"
ojw28,2019-07-04 10:23:52,https://api.github.com/repos/google/ExoPlayer/git/commits/98714235ad93caee62f586c6fa66f3fe3b9b572a,98714235ad93caee62f586c6fa66f3fe3b9b572a,"Simplify FlacExtractor (step toward enabling nullness checking)

- Inline some unnecessarily split out helper methods
- Clear ExtractorInput from FlacDecoderJni data after usage
- Clean up exception handling for StreamInfo decode failures

PiperOrigin-RevId: 256524955"
ojw28,2019-07-02 18:15:08,https://api.github.com/repos/google/ExoPlayer/git/commits/67ad84f121767da42b185aa475daa9105724aa66,67ad84f121767da42b185aa475daa9105724aa66,"Remove more classes from nullness blacklist

PiperOrigin-RevId: 256202135"
ojw28,2019-05-20 14:12:57,https://api.github.com/repos/google/ExoPlayer/git/commits/f045bb2d0791dba27752269d5262195d0fb39720,f045bb2d0791dba27752269d5262195d0fb39720,"Merge pull request #5617 from loki666:workmanager

PiperOrigin-RevId: 248533906"
ojw28,2019-07-14 17:01:01,https://api.github.com/repos/google/ExoPlayer/git/commits/51acd8150c25a2064c3e0c49e04540bd4e2db6f9,51acd8150c25a2064c3e0c49e04540bd4e2db6f9,"Merge pull request #6150 from google/dev-v2-r2.10.3

r2.10.3"
ojw28,2019-07-11 17:11:08,https://api.github.com/repos/google/ExoPlayer/git/commits/1275217bca00184d52f0c374d59db985ebf070c1,1275217bca00184d52f0c374d59db985ebf070c1,"Add missing file header

PiperOrigin-RevId: 257630168"
marcbaechinger,2019-07-09 14:11:11,https://api.github.com/repos/google/ExoPlayer/git/commits/f314be583aef39e3bfc07ebb39c58fb98ce465d5,f314be583aef39e3bfc07ebb39c58fb98ce465d5,"fix typo in release notes

PiperOrigin-RevId: 257185017"
AquilesCanta,2019-07-09 14:06:12,https://api.github.com/repos/google/ExoPlayer/git/commits/1273f18e809dada00649799fb72c0d1071f0faec,1273f18e809dada00649799fb72c0d1071f0faec,"Fix syntax error in publish.gradle

PiperOrigin-RevId: 257184313"
ojw28,2019-07-09 10:50:56,https://api.github.com/repos/google/ExoPlayer/git/commits/fdef76c8431a3577f206605c629f68452a8652ec,fdef76c8431a3577f206605c629f68452a8652ec,"Bump version to 2.10.3

PiperOrigin-RevId: 257161518"
ojw28,2019-07-09 10:18:50,https://api.github.com/repos/google/ExoPlayer/git/commits/be9fea89a6a669a2d7125a90a90054810c9a4d0b,be9fea89a6a669a2d7125a90a90054810c9a4d0b,"Fix race condition in DownloadHelper

Sending MESSAGE_PREPARE_SOURCE should happen last in the constructor.
It was previously happening before initialization finished (and in
particular before pendingMediaPeriods was instantiated).

Issue: #6146
PiperOrigin-RevId: 257158275"
tonihei,2019-07-04 11:54:56,https://api.github.com/repos/google/ExoPlayer/git/commits/dbabb7c9a3ba6640c51230bc7932c7ab471284d8,dbabb7c9a3ba6640c51230bc7932c7ab471284d8,"Apply playback parameters in a consistent way.

Currently, we sometimes apply new playback parameters directly and sometimes
through the list of playbackParameterCheckpoints. Only when using the checkpoints,
we also reset the offset and corresponding position for speedup position
calculation. However, these offsets need to be changed in all cases to prevent
calculation errors during speedup calculation[1].

This change channels all playback parameters changes through the checkpoints to
ensure the offsets get updated accordingly. This fixes an issue introduced in
https://github.com/google/ExoPlayer/commit/31911ca54a13b0003d6cf902b95c2ed445afa930.

[1] - The speed up is calculated using the ratio of input and output bytes in
SonicAudioProcessor.scaleDurationForSpeedUp. Whenever we set new playback
parameters to the audio processor these two counts are reset. If we don't reset
the offsets too, the scaled timestamp can be a large value compared to the input
and output bytes causing massive inaccuracies (like the +20 seconds in the
linked issue).

Issue:#6117
PiperOrigin-RevId: 256533780"
andrewlewis,2019-04-23 08:18:03,https://api.github.com/repos/google/ExoPlayer/git/commits/1d766c4603a9767f8ef69c8db2445af709c71547,1d766c4603a9767f8ef69c8db2445af709c71547,"Play out remaining data on reconfiguration

Before this change we'd release the audio track and create a new one as soon
as audio processors had drained when reconfiguring.

Fix this behavior by stop()ing the AudioTrack to play out all written data.

Issue: #2446
PiperOrigin-RevId: 244812402"
ojw28,2019-07-09 10:36:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b3495dfe66da2b5c364df21f97f2a679f067aecf,b3495dfe66da2b5c364df21f97f2a679f067aecf,Update release notes
ojw28,2019-07-09 07:50:01,https://api.github.com/repos/google/ExoPlayer/git/commits/6fd235f95a7393675a1ed63ebac1bbf2cec08a91,6fd235f95a7393675a1ed63ebac1bbf2cec08a91,"Merge pull request #5732 from ToxicBakery:feature/add-license-to-pom

PiperOrigin-RevId: 257138448"
tonihei,2019-07-08 16:24:18,https://api.github.com/repos/google/ExoPlayer/git/commits/d035f24e878f6106dbb71e414164836568e78ce0,d035f24e878f6106dbb71e414164836568e78ce0,"CEA608: Fix repeated Special North American chars.

We currently handle most the control code logic after handling special
characters. This includes filtering out repeated control codes and checking
for the correct channel. As the special character sets are control codes as well,
these checks should happen before parsing the characters.

Issue:#6133
PiperOrigin-RevId: 256993672"
tonihei,2019-07-05 15:20:17,https://api.github.com/repos/google/ExoPlayer/git/commits/1538e5d9661f5d20b756784d9ba4692768692b0d,1538e5d9661f5d20b756784d9ba4692768692b0d,"CEA608: no-op readability clean-up

PiperOrigin-RevId: 256676196"
ojw28,2019-07-02 16:49:45,https://api.github.com/repos/google/ExoPlayer/git/commits/91728d41de971a1d7b43fa280172968dded8e6df,91728d41de971a1d7b43fa280172968dded8e6df,"Merge pull request #5908 from sr1990:dev-v2

PiperOrigin-RevId: 256147805"
ojw28,2019-07-02 12:42:05,https://api.github.com/repos/google/ExoPlayer/git/commits/3d5d23778abc9cdc1bc94da6930be6feacad5815,3d5d23778abc9cdc1bc94da6930be6feacad5815,"FLV extractor fixes

1. Only output video starting from a keyframe
2. When calculating the timestamp offset to adjust live streams to start
   at t=0, use the timestamp of the first tag from which a sample is actually
   output, rather than just the first audio/video tag. The test streams in
   the referenced GitHub issue start with a video tag whose packet type is
   AVC_PACKET_TYPE_SEQUENCE_HEADER (i.e. does not contain a sample) and whose
   timestamp is set to 0 (i.e. isn't set). The timestamp is set correctly on
   tags that from which a sample is actually output.

Issue: #6111
PiperOrigin-RevId: 256147747"
marcbaechinger,2019-07-01 18:13:03,https://api.github.com/repos/google/ExoPlayer/git/commits/c4c7f4bafa4cfa91e1ca2c10ee0674e60ac9f728,c4c7f4bafa4cfa91e1ca2c10ee0674e60ac9f728,"MediaSessionConnector: Document how to provide metadata asynchronously

Issue: #6047
PiperOrigin-RevId: 255992898"
tonihei,2019-07-01 12:03:07,https://api.github.com/repos/google/ExoPlayer/git/commits/71e0f2e81cedbb927526a587b6dbcf6fb3f54b72,71e0f2e81cedbb927526a587b6dbcf6fb3f54b72,"Don't consume touch events if no controller is attached.

Issue:#6109
PiperOrigin-RevId: 255933121"
andrewlewis,2019-06-28 12:21:43,https://api.github.com/repos/google/ExoPlayer/git/commits/5365272b609b5c18ddaf5532621d9e25f704b60b,5365272b609b5c18ddaf5532621d9e25f704b60b,"Use the floor of the frame rate for capability checks

PiperOrigin-RevId: 255584000"
marcbaechinger,2019-06-27 20:51:41,https://api.github.com/repos/google/ExoPlayer/git/commits/d3e7ea89d94ada524a52e3444213887222855218,d3e7ea89d94ada524a52e3444213887222855218,"call setPlayWhenReady in any case

ISSUE: #6093
PiperOrigin-RevId: 255471282"
ojw28,2019-06-27 12:26:47,https://api.github.com/repos/google/ExoPlayer/git/commits/cdf70edf6e2228300f9d4974912266008bee866f,cdf70edf6e2228300f9d4974912266008bee866f,"Remove unnecessary FileDescriptor sync

PiperOrigin-RevId: 255380796"
ojw28,2019-06-26 14:16:22,https://api.github.com/repos/google/ExoPlayer/git/commits/d57a8587d2b379555786eae63ba514931fd3c583,d57a8587d2b379555786eae63ba514931fd3c583,"Add threading model note to hello-word page

Also add layer of indirection between code and the guide, to
make moving content easier going forward.

PiperOrigin-RevId: 255182216"
eneim,2019-07-02 09:04:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e3f1332b1e7c2b8fb186494807586c72aad9e441,e3f1332b1e7c2b8fb186494807586c72aad9e441,"Update TrackSelectionDialog.java

Fix a super tiny typo."
tonihei,2019-06-17 08:56:50,https://api.github.com/repos/google/ExoPlayer/git/commits/18f1b06a688dbfe6980f49b8358af7458f0d8b47,18f1b06a688dbfe6980f49b8358af7458f0d8b47,"Fix all FIXME comments.

These are mostly nullability issues.

PiperOrigin-RevId: 253537068"
tonihei,2019-06-18 10:31:54,https://api.github.com/repos/google/ExoPlayer/git/commits/feefaacb31561c0272b038905fd4d030bdd695c2,feefaacb31561c0272b038905fd4d030bdd695c2,"Gracefully handle revoked ACCESS_NETWORK_STATE permission.

This permission has normal access right and can't be revoked by the user.
However, an app can choose to revoke it when using ExoPlayer, e.g. if
no network is required and the app doesn't want to list this permission.

Support this use case by gracefully catching the exception in the relevant
places.

Issue:#6019
PiperOrigin-RevId: 253759332"
ojw28,2019-06-21 17:22:40,https://api.github.com/repos/google/ExoPlayer/git/commits/1c7bb2899ccaaf26855700bf2c9d890812b092f5,1c7bb2899ccaaf26855700bf2c9d890812b092f5,"Merge pull request #6055 from xirac:dev-v2

PiperOrigin-RevId: 254182080"
tonihei,2019-06-04 13:20:51,https://api.github.com/repos/google/ExoPlayer/git/commits/913dcb3e1dafc1f9340e5592df099ee460cb5c26,913dcb3e1dafc1f9340e5592df099ee460cb5c26,"Display last frame when seeking to end of stream.

We currently don't display the last frame because the seek time is behind the
last frame's timestamps and it's thus marked as decodeOnly.

This case can be detected by checking whether all data sent to the codec is
marked as decodeOnly at the time we read the end of stream signal. If so, we
can re-enable the last frame. This should work for almost all cases because the
end-of-stream signal is read in the same feedInputBuffer loop as the last
frame and we therefore haven't released the last frame buffer yet.

Issue:#2568
PiperOrigin-RevId: 251425870"
ojw28,2019-06-26 08:59:55,https://api.github.com/repos/google/ExoPlayer/git/commits/1ab402cf27ab3c52d671ef15b25a1cdde1fe84c8,1ab402cf27ab3c52d671ef15b25a1cdde1fe84c8,Create player-accessed-on-wrong-thread.md
ojw28,2019-06-23 15:15:27,https://api.github.com/repos/google/ExoPlayer/git/commits/f6297f4f51f00c20d5b937d8f636ef215d89730f,f6297f4f51f00c20d5b937d8f636ef215d89730f,"Merge pull request #5986 from google/dev-v2-r2.10.2

r2.10.2"
ojw28,2019-06-21 18:58:27,https://api.github.com/repos/google/ExoPlayer/git/commits/b9c8861b3ecc37412b137c69d48c7e8c95133fe8,b9c8861b3ecc37412b137c69d48c7e8c95133fe8,"Disable publishEnabled

Issue: #6016"
andrewlewis,2019-06-21 12:14:06,https://api.github.com/repos/google/ExoPlayer/git/commits/4703ce1b26285d6627867147c6464bea42861508,4703ce1b26285d6627867147c6464bea42861508,"Fix ad pod index offset calculation without preroll

Issue: #5928
PiperOrigin-RevId: 254379085"
ojw28,2019-06-20 08:59:53,https://api.github.com/repos/google/ExoPlayer/git/commits/fbf58425b23aea392453e8d108a1f1be103e5489,fbf58425b23aea392453e8d108a1f1be103e5489,"Release notes language tweaks

PiperOrigin-RevId: 254156143"
andrewlewis,2019-06-21 10:50:12,https://api.github.com/repos/google/ExoPlayer/git/commits/679909793025fb4682a37fd031a62cf2f0f91f1e,679909793025fb4682a37fd031a62cf2f0f91f1e,"Fix decoder fallback for E-AC3 JOC to E-AC3


Issue: #6073"
ojw28,2019-06-19 17:59:31,https://api.github.com/repos/google/ExoPlayer/git/commits/c8955ed5ff134e197143da98bb52edecd3efd090,c8955ed5ff134e197143da98bb52edecd3efd090,Fix build
marcbaechinger,2019-06-19 09:41:54,https://api.github.com/repos/google/ExoPlayer/git/commits/66e1211350b11bf701c1f70336873931cf20cc3b,66e1211350b11bf701c1f70336873931cf20cc3b,"allow multiple style rules in a STYLE block of a webvtt file

PiperOrigin-RevId: 253959976"
marcbaechinger,2019-06-19 09:27:38,https://api.github.com/repos/google/ExoPlayer/git/commits/5d544974e9c5531c2e014e68a276de7248e5e557,5d544974e9c5531c2e014e68a276de7248e5e557,"keep notification when stop(false) is called

ISSUE: #6041
PiperOrigin-RevId: 253958225"
ojw28,2019-06-18 16:52:54,https://api.github.com/repos/google/ExoPlayer/git/commits/0f514a093b14b2b661caa044e9bbe2b7c4e46032,0f514a093b14b2b661caa044e9bbe2b7c4e46032,"Update release notes for 2.10.2 cherrypicks

PiperOrigin-RevId: 253808562"
tonihei,2019-06-18 15:02:50,https://api.github.com/repos/google/ExoPlayer/git/commits/8286e1d725f4a39e03ae3fad24e72fc44dfd59e1,8286e1d725f4a39e03ae3fad24e72fc44dfd59e1,"Prevent negative renderer timestamps when seeking back.

We are currently queuing periods in a way such that the new start position
lines up with the end of the previous period (to ensure continuous playback).
However, if the start position of the new period is larger than the total of
all previously played period durations, we may end up with negative renderer
timestamps when seeking back to the beginning of this new period. Negative
timestamps should be avoided as most decoders have problems handling them
correctly.

This change forces a renderer reset if we detect such a seek to a negative
renderer time and also resets the renderer offset to 0 every time all
renderers are disabled, as this is the only time where we can savely change
the offset of an existing media period.

Also, if playback starts with an ad, we choose the content position as
renderer offset to prevent the whole issue from occurring for the seek-behind-
midroll case.

Issue:#6009
Issue:#5323
PiperOrigin-RevId: 253790054"
ojw28,2019-06-18 14:24:53,https://api.github.com/repos/google/ExoPlayer/git/commits/def01f68b98f2eacbaa2987f3997f4c5f18e157d,def01f68b98f2eacbaa2987f3997f4c5f18e157d,"Let AudioTrack write headers on SDK_INT >= 26

Issue: #6031
PiperOrigin-RevId: 253784986"
AquilesCanta,2019-06-18 13:59:11,https://api.github.com/repos/google/ExoPlayer/git/commits/d072a5261eaf9d26745c04f018fdd7ca27464010,d072a5261eaf9d26745c04f018fdd7ca27464010,"Fix application of maxAudioBitrate for adaptive audio track groups

Issue:#6006
PiperOrigin-RevId: 253781533"
tonihei,2019-06-18 13:50:06,https://api.github.com/repos/google/ExoPlayer/git/commits/9da2c3305b5f492288f9046c37c7ba0867e0e567,9da2c3305b5f492288f9046c37c7ba0867e0e567,"Prevent negative total buffered duration at the point where it is calculated.

In some edge cases the renderer position may be slightly ahead of the
buffered position and the total buffered duration is thus negative. We already
filter that in ExoPlayerImpl for the publicly accessible value. However, we
forward the unfiltered value to other components like the LoadControl, which
may be confusing.

Issue:#6015
PiperOrigin-RevId: 253780460"
AquilesCanta,2019-06-18 11:03:54,https://api.github.com/repos/google/ExoPlayer/git/commits/a090f7ecca5cc079bbd70a7fed07e31298a81381,a090f7ecca5cc079bbd70a7fed07e31298a81381,"Remove unused variable

PiperOrigin-RevId: 253762488"
tonihei,2019-06-18 10:31:54,https://api.github.com/repos/google/ExoPlayer/git/commits/e1ff3d028f4ff323d43cd070d73cd26776c49896,e1ff3d028f4ff323d43cd070d73cd26776c49896,"Gracefully handle revoked ACCESS_NETWORK_STATE permission.

This permission has normal access right and can't be revoked by the user.
However, an app can choose to revoke it when using ExoPlayer, e.g. if
no network is required and the app doesn't want to list this permission.

Support this use case by gracefully catching the exception in the relevant
places.

Issue:#6019
PiperOrigin-RevId: 253759332"
marcbaechinger,2019-06-17 16:13:32,https://api.github.com/repos/google/ExoPlayer/git/commits/76b9175072993d8a4ec2ba65c98bf0aa987f0e54,76b9175072993d8a4ec2ba65c98bf0aa987f0e54,"Add bug report section to question and content_not_playing issue templates.

PiperOrigin-RevId: 253593267"
tonihei,2019-06-14 15:50:10,https://api.github.com/repos/google/ExoPlayer/git/commits/7f435b4787c838ed5d8cbae92ae7f6fc928d6fa1,7f435b4787c838ed5d8cbae92ae7f6fc928d6fa1,"Merge pull request #6036 from angelrc96:dev-v2

PiperOrigin-RevId: 253228214"
marcbaechinger,2019-06-18 18:43:29,https://api.github.com/repos/google/ExoPlayer/git/commits/7e407089f96b4ea77c26935e4522a779e6b7b108,7e407089f96b4ea77c26935e4522a779e6b7b108,add sections for bug report and link to test content
marcbaechinger,2019-06-18 18:42:39,https://api.github.com/repos/google/ExoPlayer/git/commits/67879f9557d2165e964a6d1ea1cd434d39ed8575,67879f9557d2165e964a6d1ea1cd434d39ed8575,add sections asking for bug report
marcbaechinger,2019-06-18 18:41:01,https://api.github.com/repos/google/ExoPlayer/git/commits/95c08ad8642cc5c85aaa2b2bd80c2181adc2dcee,95c08ad8642cc5c85aaa2b2bd80c2181adc2dcee,tell user that #1234 should be the issue number
ojw28,2019-06-05 23:42:40,https://api.github.com/repos/google/ExoPlayer/git/commits/d3967b557a044f2cdbed77e70a0ecfd0c13c0457,d3967b557a044f2cdbed77e70a0ecfd0c13c0457,"Don't throw DecoderQueryException from getCodecMaxSize

It's only thrown in an edge case on API level 20 and below. If it
is thrown it causes playback failure when playback could succeed,
by throwing up through configureCodec.

It seems better just to catch the exception and have the codec be
configured using the format's own width and height.

PiperOrigin-RevId: 251745539"
AquilesCanta,2019-06-05 11:28:37,https://api.github.com/repos/google/ExoPlayer/git/commits/f638634fe2c7eab3b8a4334ee07a9d321ba9a921,f638634fe2c7eab3b8a4334ee07a9d321ba9a921,"Simplify re-creation of the CastPlayer queue in the Cast demo app

PiperOrigin-RevId: 251617354"
AquilesCanta,2019-06-05 11:14:14,https://api.github.com/repos/google/ExoPlayer/git/commits/2f8c8b609f6d526c8404088a9b7602d726001b0e,2f8c8b609f6d526c8404088a9b7602d726001b0e,"Fix detection of current window index in CastPlayer

Issue:#5955
PiperOrigin-RevId: 251616118"
AquilesCanta,2019-06-04 09:19:29,https://api.github.com/repos/google/ExoPlayer/git/commits/83a6d51fd12371758e79a1f46e078f33b4a2c065,83a6d51fd12371758e79a1f46e078f33b4a2c065,"Use listener notification batching in CastPlayer

PiperOrigin-RevId: 251399230"
ojw28,2019-06-03 13:11:16,https://api.github.com/repos/google/ExoPlayer/git/commits/edee3dd3409710abf8d3c7a6301ca1be62f8a5a2,edee3dd3409710abf8d3c7a6301ca1be62f8a5a2,"Bump to 2.10.2

PiperOrigin-RevId: 251216822"
andrewlewis,2019-05-17 17:34:07,https://api.github.com/repos/google/ExoPlayer/git/commits/578abccf1658c92b7c91b909075a8fc3297f2c60,578abccf1658c92b7c91b909075a8fc3297f2c60,"Add SilenceMediaSource

Issue: #5735
PiperOrigin-RevId: 248745617"
tonihei,2019-05-21 12:50:28,https://api.github.com/repos/google/ExoPlayer/git/commits/d11778dbc800fbb171c5de2eedd18a726797301d,d11778dbc800fbb171c5de2eedd18a726797301d,"Add ResolvingDataSource for just-in-time resolution of DataSpecs.

Issue:#5779
PiperOrigin-RevId: 249234058"
ojw28,2019-06-03 15:34:41,https://api.github.com/repos/google/ExoPlayer/git/commits/19de134aa659beaf6ad3255f39d0a1d3f675e56b,19de134aa659beaf6ad3255f39d0a1d3f675e56b,CEA608: Handling XDS and TEXT modes
erdemguven,2019-05-30 13:41:03,https://api.github.com/repos/google/ExoPlayer/git/commits/c231e1120eb980f8ca9c658ff9336faf6db3ce23,c231e1120eb980f8ca9c658ff9336faf6db3ce23,"Fix misreporting cached bytes when caching is paused

When caching is resumed, it starts from the initial position. This makes
more data to be reported as cached.

Issue:#5573
PiperOrigin-RevId: 250678841"
erdemguven,2019-05-30 09:47:28,https://api.github.com/repos/google/ExoPlayer/git/commits/811cdf06ac932a5ba232978f4c5c5ff9522da1d3,811cdf06ac932a5ba232978f4c5c5ff9522da1d3,"Modify DashDownloaderTest to test if content length is stored

PiperOrigin-RevId: 250655481"
erdemguven,2019-05-30 09:40:00,https://api.github.com/repos/google/ExoPlayer/git/commits/bbf8a9ac13861b16afd065f8accdd78ea826467a,bbf8a9ac13861b16afd065f8accdd78ea826467a,"Simplify CacheUtil

PiperOrigin-RevId: 250654697"
erdemguven,2019-05-29 19:42:25,https://api.github.com/repos/google/ExoPlayer/git/commits/92e2581e238e1d5996e45e150b9326a0969e61b7,92e2581e238e1d5996e45e150b9326a0969e61b7,"Fix CacheUtil.cache() use too much data

cache() opens all connections with unset length to avoid position errors.
This makes more data then needed to be downloading by the underlying
network stack.

This fix makes makes it open connections for only required length.

Issue:#5927
PiperOrigin-RevId: 250546175"
tonihei,2019-04-25 12:48:36,https://api.github.com/repos/google/ExoPlayer/git/commits/25e93a178adea0e54ca2954fbcc29c38c32e7131,25e93a178adea0e54ca2954fbcc29c38c32e7131,"Toggle playback controls according to standard Android click handling.

We currently toggle the view in onTouchEvent ACTION_DOWN which is non-standard
and causes problems when used in a ViewGroup intercepting touch events.

Switch to standard Android click handling instead which is also what most
other player apps are doing.

Issue:#5784
PiperOrigin-RevId: 245219728"
tonihei,2019-05-30 14:08:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b9f3fd429d6c2e90d67e8e15103d9af22ff4cc43,b9f3fd429d6c2e90d67e8e15103d9af22ff4cc43,"Make parallel adaptive track selection more robust.

Using parallel adaptation for Formats without bitrate information currently
causes an exception. Handle this gracefully and also cases where all formats
have the same bitrate.

Issue:#5971
PiperOrigin-RevId: 250682127"
tonihei,2019-05-30 12:40:49,https://api.github.com/repos/google/ExoPlayer/git/commits/d626e4bc54d0e78560cb411b452d1dcdd40c0b32,d626e4bc54d0e78560cb411b452d1dcdd40c0b32,"Rename host_activity.xml to avoid manifest merge conflicts.

PiperOrigin-RevId: 250672752"
ojw28,2019-05-30 11:19:33,https://api.github.com/repos/google/ExoPlayer/git/commits/7cdcd89873e5874e3a33a97502dec3d2e2dd728a,7cdcd89873e5874e3a33a97502dec3d2e2dd728a,"Update cast extension build

PiperOrigin-RevId: 250664791"
ojw28,2019-05-30 10:54:15,https://api.github.com/repos/google/ExoPlayer/git/commits/9860c486e0409f4c410cb28877e83cae85a7175e,9860c486e0409f4c410cb28877e83cae85a7175e,"Keep controller visible on d-pad key events

PiperOrigin-RevId: 250661977"
AquilesCanta,2019-05-29 17:36:01,https://api.github.com/repos/google/ExoPlayer/git/commits/9da9941e384322134f442ea93f3b0099ce37abdb,9da9941e384322134f442ea93f3b0099ce37abdb,"Fix TTML bitmap subtitles

+ Use start for anchoring, instead of center.
+ Add the height to the TTML bitmap cue rendering layout.

Issue:#5633
PiperOrigin-RevId: 250519710"
andrewlewis,2019-05-29 17:25:27,https://api.github.com/repos/google/ExoPlayer/git/commits/082aee692b5d42a8ce9c3da01e2eab2bc2ca3606,082aee692b5d42a8ce9c3da01e2eab2bc2ca3606,"Allow passthrough of E-AC3-JOC streams

PiperOrigin-RevId: 250517338"
andrewlewis,2019-05-29 09:09:54,https://api.github.com/repos/google/ExoPlayer/git/commits/41ab7ef7c092b73e809963696463779750233b19,41ab7ef7c092b73e809963696463779750233b19,"Fix video size reporting in surface YUV mode

In surface YUV output mode the width/height fields of the VpxOutputBuffer were
never populated. Fix this by adding a new method to set the width/height and
calling it from JNI like we do for GL YUV mode.

PiperOrigin-RevId: 250449734"
andrewlewis,2019-05-28 16:40:50,https://api.github.com/repos/google/ExoPlayer/git/commits/8bc14bc2a9cb336956bc5a8c309bf7977c20efe3,8bc14bc2a9cb336956bc5a8c309bf7977c20efe3,"Allow enabling decoder fallback in DefaultRenderersFactory

Also allow enabling decoder fallback with MediaCodecAudioRenderer.

Issue: #5942
PiperOrigin-RevId: 250301422"
andrewlewis,2019-05-28 15:36:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5d72942a4927928d86f4587072faa1f750d6bf76,5d72942a4927928d86f4587072faa1f750d6bf76,"Fix VP9 build setup

Update configuration script to use an external build, so we can remove use of
isysroot which is broken in the latest NDK r19c. Also switch from gnustl_static
to c++_static so that ndk-build with NDK r19c succeeds.

Issue: #5922
PiperOrigin-RevId: 250287551"
AquilesCanta,2019-05-28 11:20:14,https://api.github.com/repos/google/ExoPlayer/git/commits/42ffc5215fc2c300b37246dbc47bbed109750316,42ffc5215fc2c300b37246dbc47bbed109750316,"Fix anchor usage in SubtitlePainter's setupBitmapLayout

According to Cue's constructor (for bitmaps) documentation:
+ cuePositionAnchor does horizontal anchoring.
+ cueLineAnchor does vertical anchoring.

Usage is currently inverted.

Issue:#5633
PiperOrigin-RevId: 250253002"
ojw28,2019-05-24 12:53:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9b104f6ec09e3ae0cd7cb6d4be52da8903f6149a,9b104f6ec09e3ae0cd7cb6d4be52da8903f6149a,"Reset upstream format when empty track selection happens

PiperOrigin-RevId: 249819080"
ojw28,2019-05-23 09:56:58,https://api.github.com/repos/google/ExoPlayer/git/commits/2e1ea379c3858f960c7e2402ac20722b43b2002d,2e1ea379c3858f960c7e2402ac20722b43b2002d,"Fix IndexOutOfBounds when there are no available codecs

PiperOrigin-RevId: 249610014"
tonihei,2019-05-22 13:54:41,https://api.github.com/repos/google/ExoPlayer/git/commits/cf93b8e73e2f996744247de54b554dc598892911,cf93b8e73e2f996744247de54b554dc598892911,"Release DownloadHelper automatically if preparation failed.

This prevents further unexpected updates if the MediaSource happens to
finish its preparation at a later point.

Issue:#5915
PiperOrigin-RevId: 249439246"
erdemguven,2019-05-22 10:27:57,https://api.github.com/repos/google/ExoPlayer/git/commits/b1ff911e6a09a2ce9a4ba3e3c9f4c674b2557955,b1ff911e6a09a2ce9a4ba3e3c9f4c674b2557955,"Remove mistakenly left link in vp9 readme

PiperOrigin-RevId: 249417898"
andrewlewis,2019-05-22 08:17:49,https://api.github.com/repos/google/ExoPlayer/git/commits/7e587ae98f586ff9193189c395512b0f42ce39f9,7e587ae98f586ff9193189c395512b0f42ce39f9,"Add missing annotations dependency

Issue: #5926
PiperOrigin-RevId: 249404152"
ojw28,2019-05-21 15:05:56,https://api.github.com/repos/google/ExoPlayer/git/commits/94c10f1984b9197ba37f42ce81974cc5001e1bca,94c10f1984b9197ba37f42ce81974cc5001e1bca,"Propagate attributes to DefaultTimeBar

Issue: #5765
PiperOrigin-RevId: 249251150"
andrewlewis,2019-05-21 14:02:16,https://api.github.com/repos/google/ExoPlayer/git/commits/1d0618ee1abf5a78465c86a2410bddab8112dbe6,1d0618ee1abf5a78465c86a2410bddab8112dbe6,"Update surface directly from SphericalSurfaceView

The SurfaceListener just sets the surface on the VideoComponent, but
SphericalSurfaceView already accesses the VideoComponent directly so it seems
simpler to update the surface directly.

PiperOrigin-RevId: 249242185"
andrewlewis,2019-05-20 16:53:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e4d66c4105bf8c74f7e49e0dd4e8c77f5c66228f,e4d66c4105bf8c74f7e49e0dd4e8c77f5c66228f,"Update a reference to SimpleExoPlayerView

PiperOrigin-RevId: 249068395"
marcbaechinger,2019-05-20 16:48:15,https://api.github.com/repos/google/ExoPlayer/git/commits/b4d72d12f7cb90c2d5693f1008d036f3af7a8323,b4d72d12f7cb90c2d5693f1008d036f3af7a8323,"Add ProgressUpdateListener

Issue: #5834
PiperOrigin-RevId: 249067445"
marcbaechinger,2019-05-16 16:29:32,https://api.github.com/repos/google/ExoPlayer/git/commits/e961def004243546830770cc0f3b9fe4725bf7e6,e961def004243546830770cc0f3b9fe4725bf7e6,"Add playWhenReady to prepareXyz methods of PlaybackPreparer.

Issue: #5891
PiperOrigin-RevId: 248541827"
marcbaechinger,2019-05-15 18:20:27,https://api.github.com/repos/google/ExoPlayer/git/commits/0a5a8f547f076f7c64e142004c8c1184b19e2191,0a5a8f547f076f7c64e142004c8c1184b19e2191,"don't call stop before preparing the player

Issue: #5891
PiperOrigin-RevId: 248369509"
marcbaechinger,2019-05-22 18:50:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ecb7b8758cd6a700b72275a56d22b3dc56959764,ecb7b8758cd6a700b72275a56d22b3dc56959764,Update issue template for questions
marcbaechinger,2019-05-22 18:48:45,https://api.github.com/repos/google/ExoPlayer/git/commits/762a13253703456b8c5b4641031898022ef62882,762a13253703456b8c5b4641031898022ef62882,Update issue template for feature requests
marcbaechinger,2019-05-22 18:47:45,https://api.github.com/repos/google/ExoPlayer/git/commits/a5d18f3fa73c749b14e72f84302d76e065180aa3,a5d18f3fa73c749b14e72f84302d76e065180aa3,Update issue template for content_not_playing
marcbaechinger,2019-05-22 18:45:48,https://api.github.com/repos/google/ExoPlayer/git/commits/6fa58f8d695657f901f59c9e4d2807c7949a33ce,6fa58f8d695657f901f59c9e4d2807c7949a33ce,Update issue template for bugs
ojw28,2019-05-20 16:39:18,https://api.github.com/repos/google/ExoPlayer/git/commits/35e030f56b4e3312e863e44a1e8fe27aef4310b7,35e030f56b4e3312e863e44a1e8fe27aef4310b7,"Merge pull request #5895 from google/dev-v2-r2.10.1

r2.10.1"
andrewlewis,2019-05-16 11:38:07,https://api.github.com/repos/google/ExoPlayer/git/commits/9ec330e7c771d33b8cb7ac043eb52aee4af4b316,9ec330e7c771d33b8cb7ac043eb52aee4af4b316,"Fix platform scheduler javadoc

PiperOrigin-RevId: 248503971"
ojw28,2019-05-16 11:30:13,https://api.github.com/repos/google/ExoPlayer/git/commits/15b319cba24fcca91c18de6a111b0994651bbee1,15b319cba24fcca91c18de6a111b0994651bbee1,"Bump release to 2.10.1 and update release notes

PiperOrigin-RevId: 248503235"
tonihei,2019-05-16 10:42:05,https://api.github.com/repos/google/ExoPlayer/git/commits/9e4b89d1cb21a97c230321311cf0446540726249,9e4b89d1cb21a97c230321311cf0446540726249,"Ignore empty timelines in ImaAdsLoader.

We previously only checked whether the reason for the timeline change is
RESET which indicates an empty timeline. Change this to an explicit check
for empty timelines to also ignore empty media or intermittent timeline
changes to an empty timeline which are not marked as RESET.

Issue:#5831
PiperOrigin-RevId: 248499118"
marcbaechinger,2019-05-15 18:20:27,https://api.github.com/repos/google/ExoPlayer/git/commits/6e581f5270f5cfa9f09633ae83daefa62d83152d,6e581f5270f5cfa9f09633ae83daefa62d83152d,"Revert ""don't call stop before preparing the player""

This reverts commit 8efaf5fd7d5bdf1f55f35109a43380e8f7f6be0b."
marcbaechinger,2019-05-15 18:20:27,https://api.github.com/repos/google/ExoPlayer/git/commits/8efaf5fd7d5bdf1f55f35109a43380e8f7f6be0b,8efaf5fd7d5bdf1f55f35109a43380e8f7f6be0b,"don't call stop before preparing the player

Issue: #5891
PiperOrigin-RevId: 248369509"
ojw28,2019-05-15 16:50:50,https://api.github.com/repos/google/ExoPlayer/git/commits/7f89fa9a8ce63d56f840352c79e7360e445d5402,7f89fa9a8ce63d56f840352c79e7360e445d5402,"Add simpler HttpDataSource constructors

PiperOrigin-RevId: 248350557"
AquilesCanta,2019-05-14 22:18:42,https://api.github.com/repos/google/ExoPlayer/git/commits/6e9df31e7d432d1c1c5196a35cfcd26d12bd8bef,6e9df31e7d432d1c1c5196a35cfcd26d12bd8bef,"Add links to the developer guide in some READMEs

PiperOrigin-RevId: 248221982"
ojw28,2019-05-14 12:42:16,https://api.github.com/repos/google/ExoPlayer/git/commits/3ce0d89c56fa8d0a53b3ed82bd4dc67e58ef877a,3ce0d89c56fa8d0a53b3ed82bd4dc67e58ef877a,"Allow empty values in ICY metadata

Issue: #5876
PiperOrigin-RevId: 248119726"
marcbaechinger,2019-05-14 11:33:19,https://api.github.com/repos/google/ExoPlayer/git/commits/cea3071b333618161d09931ee4dcab3d14fa3125,cea3071b333618161d09931ee4dcab3d14fa3125,"Fix rendering DVB subtitle on API 28.

Issue: #5862
PiperOrigin-RevId: 248112524"
tonihei,2019-05-13 15:21:33,https://api.github.com/repos/google/ExoPlayer/git/commits/035686e58cd45916aac05e15e6c24f30350a77b6,035686e58cd45916aac05e15e6c24f30350a77b6,"Fix Javadoc generation.

Accessing task providers (like javaCompileProvider) at sync time is not
possible. That's why the source sets of all generateJavadoc tasks is empty.

The set of source directories can also be accessed directly through the static
sourceSets field. Combining these allows to statically provide the relevant
source files to the javadoc task without needing to access the run-time task
provider.

PiperOrigin-RevId: 247938176"
ojw28,2019-05-13 15:05:34,https://api.github.com/repos/google/ExoPlayer/git/commits/48de1010a8ca84dcc89c0f6c139d644719acc6e0,48de1010a8ca84dcc89c0f6c139d644719acc6e0,"Allow line terminators in ICY metadata

Issue: #5876
PiperOrigin-RevId: 247935822"
tonihei,2019-05-13 10:56:35,https://api.github.com/repos/google/ExoPlayer/git/commits/bef386bea8c9fe4ef3e765a46503a49a0401d1ae,bef386bea8c9fe4ef3e765a46503a49a0401d1ae,"Increase gradle heap size

The update to Gradle 5.1.1 decreased the default heap size to 512MB and our
build runs into Out-of-Memory errors.

Setting the gradle flags to higher values instead.

See https://developer.android.com/studio/releases/gradle-plugin#3-4-0

PiperOrigin-RevId: 247908526"
tonihei,2019-05-10 17:12:05,https://api.github.com/repos/google/ExoPlayer/git/commits/1b9d018296ae5c2a6fa6bf23ed9b563d12e804c5,1b9d018296ae5c2a6fa6bf23ed9b563d12e804c5,"Fix Javadoc links.

PiperOrigin-RevId: 247630389"
tonihei,2019-05-10 16:13:36,https://api.github.com/repos/google/ExoPlayer/git/commits/6ead14880bea2471add1fcea1f8fa026d06d7a61,6ead14880bea2471add1fcea1f8fa026d06d7a61,"Add setCodecOperatingRate workaround for 48KHz audio on ZTE Axon7 mini.

Issue:#5821
PiperOrigin-RevId: 247621164"
tonihei,2019-05-10 15:23:02,https://api.github.com/repos/google/ExoPlayer/git/commits/ac07c56dab4b5d90f17731d3b5e878a9b154206a,ac07c56dab4b5d90f17731d3b5e878a9b154206a,"Fix NPE in HLS deriveAudioFormat.

Issue:#5868
PiperOrigin-RevId: 247613811"
andrewlewis,2019-05-09 14:10:41,https://api.github.com/repos/google/ExoPlayer/git/commits/29add854af1b9ad2a645a229da8c601807731d52,29add854af1b9ad2a645a229da8c601807731d52,"Update player accessed on wrong thread URL

PiperOrigin-RevId: 247418601"
tonihei,2019-05-09 13:40:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ee5981c02dc1e6c465a463c2f8d826963619149b,ee5981c02dc1e6c465a463c2f8d826963619149b,"Ensure messages get deleted if they throw an exception.

If a PlayerMessage throws an exception, it is currently not deleted from the
list of pending messages. This may be problematic as the list of pending
messages is kept when the player is retried without reset and the message is
sent again in such a case.

PiperOrigin-RevId: 247414494"
andrewlewis,2019-05-09 03:40:24,https://api.github.com/repos/google/ExoPlayer/git/commits/85a86e434a6aa4be083afe38130818865622d061,85a86e434a6aa4be083afe38130818865622d061,"Increase gapless trim sample count

PiperOrigin-RevId: 247348352"
tonihei,2019-05-08 17:05:26,https://api.github.com/repos/google/ExoPlayer/git/commits/0698bd1dbb5c4a8bf7f8253e5321dd56078226be,0698bd1dbb5c4a8bf7f8253e5321dd56078226be,"Add option to clear all downloads.

Adding an explicit option to clear all downloads prevents repeated database
access in a loop when trying to delete all downloads.

However, we still create an arbitrary number of parallel Task threads for this
and seperate callbacks for each download.

PiperOrigin-RevId: 247234181"
ojw28,2019-05-15 18:53:35,https://api.github.com/repos/google/ExoPlayer/git/commits/8325e400182edcbddf2ce84abd1c884d0002e10f,8325e400182edcbddf2ce84abd1c884d0002e10f,Merge commit '2a0ead1b295c3ac2ad5e4ddc42913331a0616aa5' into dev-v2-r2.10.1
ojw28,2019-05-15 18:51:49,https://api.github.com/repos/google/ExoPlayer/git/commits/3609a7ebba509957d385b5b78bfce9e3c1a8572b,3609a7ebba509957d385b5b78bfce9e3c1a8572b,Merge commit 'faecef0befc4bb97c4c4a9316a94732dfd6aaec1' into dev-v2-r2.10.1
erdemguven,2019-04-25 15:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/b626dd70c3445e921a63b5c3cf4797472378ac52,b626dd70c3445e921a63b5c3cf4797472378ac52,"Add DownloadHelper.createMediaSource utility method

PiperOrigin-RevId: 245243488"
ojw28,2019-05-06 17:29:21,https://api.github.com/repos/google/ExoPlayer/git/commits/44293e8f45fc62ff918001b4425c44d0ded5ffc9,44293e8f45fc62ff918001b4425c44d0ded5ffc9,"Merge pull request #5833 from google/dev-v2-r2.10.0

r2.10.0"
ojw28,2019-05-05 18:42:42,https://api.github.com/repos/google/ExoPlayer/git/commits/7d430423d7bf37a87561af2d084f4655ecb636be,7d430423d7bf37a87561af2d084f4655ecb636be,"Merge pull request #5760 from matamegger:feature/hex_format_tags_in_url_template

PiperOrigin-RevId: 246733842"
ojw28,2019-05-05 18:42:42,https://api.github.com/repos/google/ExoPlayer/git/commits/2a0ead1b295c3ac2ad5e4ddc42913331a0616aa5,2a0ead1b295c3ac2ad5e4ddc42913331a0616aa5,"Merge pull request #5760 from matamegger:feature/hex_format_tags_in_url_template

PiperOrigin-RevId: 246733842"
ojw28,2019-05-05 17:44:35,https://api.github.com/repos/google/ExoPlayer/git/commits/d31f23f30e5cb1d90ac9fe75ebb3b959b6215de7,d31f23f30e5cb1d90ac9fe75ebb3b959b6215de7,Merge branch 'release-v2' into dev-v2-r2.10.0
ojw28,2019-05-05 17:42:57,https://api.github.com/repos/google/ExoPlayer/git/commits/03f518265bafee38f7f12ce68f9a391c010d30d6,03f518265bafee38f7f12ce68f9a391c010d30d6,Merge branch 'release-v2' into dev-v2
ojw28,2019-05-05 16:58:33,https://api.github.com/repos/google/ExoPlayer/git/commits/90cb157985891d3cabb20a86965b9dccf003ba1b,90cb157985891d3cabb20a86965b9dccf003ba1b,"Update translations

PiperOrigin-RevId: 246729123"
ojw28,2019-05-05 16:25:48,https://api.github.com/repos/google/ExoPlayer/git/commits/8b2d436d7c5483272cf034eca87eadaaecb6c206,8b2d436d7c5483272cf034eca87eadaaecb6c206,"Prevent CachedContentIndex.idToKey from growing without bound

PiperOrigin-RevId: 246727723"
ojw28,2019-05-05 16:58:33,https://api.github.com/repos/google/ExoPlayer/git/commits/f4968e1a8e39563603a4b8528d8e826ee8c504ca,f4968e1a8e39563603a4b8528d8e826ee8c504ca,"Update translations

PiperOrigin-RevId: 246729123"
ojw28,2019-05-05 16:42:06,https://api.github.com/repos/google/ExoPlayer/git/commits/1ef49ed205956122bff013c8359d1bce828125fc,1ef49ed205956122bff013c8359d1bce828125fc,"Fix broken Javadoc

PiperOrigin-RevId: 246728418"
ojw28,2019-05-05 16:25:48,https://api.github.com/repos/google/ExoPlayer/git/commits/b53ac32b8c35cb62ede7df920d3d5b0015edad5e,b53ac32b8c35cb62ede7df920d3d5b0015edad5e,"Prevent CachedContentIndex.idToKey from growing without bound

PiperOrigin-RevId: 246727723"
ojw28,2019-05-03 20:12:02,https://api.github.com/repos/google/ExoPlayer/git/commits/ce37c799687315a8d488e2f524cc3321c71823ee,ce37c799687315a8d488e2f524cc3321c71823ee,Fix Javadoc
ojw28,2019-05-03 12:14:38,https://api.github.com/repos/google/ExoPlayer/git/commits/71d7e0afe20e02fd83063bba024907c3da84be30,71d7e0afe20e02fd83063bba024907c3da84be30,"Add a couple of assertions to DownloadManager set methods

PiperOrigin-RevId: 246491511"
ojw28,2019-05-02 16:35:30,https://api.github.com/repos/google/ExoPlayer/git/commits/116602d8c04ec977dbc364841ae0e1e882c3d155,116602d8c04ec977dbc364841ae0e1e882c3d155,"Minor download documentation tweaks

PiperOrigin-RevId: 246333281"
ojw28,2019-05-03 12:14:38,https://api.github.com/repos/google/ExoPlayer/git/commits/1292a35ec65f23a1ed9c453d25ef4e132390d9f3,1292a35ec65f23a1ed9c453d25ef4e132390d9f3,"Add a couple of assertions to DownloadManager set methods

PiperOrigin-RevId: 246491511"
ojw28,2019-05-02 16:35:30,https://api.github.com/repos/google/ExoPlayer/git/commits/76184deb21af9ea058bcdf0cb35b28441e419c6e,76184deb21af9ea058bcdf0cb35b28441e419c6e,"Minor download documentation tweaks

PiperOrigin-RevId: 246333281"
AquilesCanta,2019-05-02 10:41:06,https://api.github.com/repos/google/ExoPlayer/git/commits/c33835b4785f4253133c0951e46847894bfa39ba,c33835b4785f4253133c0951e46847894bfa39ba,"Fix SmoothStreaming links

NOTE: Streams are working on ExoPlayer but querying them from
other platforms yields ""bad request"".

The new links:
+ Match Microsoft's test server.
+ Allow querying from clients other than ExoPlayer, like curl.

PiperOrigin-RevId: 246289755"
tonihei,2019-05-02 09:37:31,https://api.github.com/repos/google/ExoPlayer/git/commits/241ce2df490bc024814d33b08c26950f56c67920,241ce2df490bc024814d33b08c26950f56c67920,"Post-submit fixes for https://github.com/google/ExoPlayer/commit/eed5d957d87d44cb9c716f1a4c80f39ad2a6a442.

One wrong return value, a useless assignment, unusual visibility of private
class fields and some nullability issues.

PiperOrigin-RevId: 246282995"
ojw28,2019-05-01 19:50:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9f9cf316bd3c7740c3fa1fa5ccbfa0d5dd3c417b,9f9cf316bd3c7740c3fa1fa5ccbfa0d5dd3c417b,"Remove unnecessary logging

As justification for why we should not have this type of logging,
it would scale up to about 13K LOC, 1800 Strings, and 36K (after
pro-guarding - in the case of the demo app) if we did it through
the whole code base*. It makes the code messier to read, and in
most cases doesn't add significant value.

Note: I left the Scheduler logging because it logs interactions
with some awkward library components outside of ExoPlayer, so is
perhaps a bit more justified.

* This is a bit unfair since realistically we wouldn't ever add
  lots of logging into trivial classes. But I think it is fair
  to say that the deltas would be non-negligible.

PiperOrigin-RevId: 246181421"
ojw28,2019-05-01 19:06:11,https://api.github.com/repos/google/ExoPlayer/git/commits/214a372e062f9740644d73501c0a08e338ac5657,214a372e062f9740644d73501c0a08e338ac5657,"Periodically persist progress to index whilst downloading

PiperOrigin-RevId: 246173972"
ojw28,2019-05-01 18:19:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d215b81167f1b8768a2fb24ada4cfd72b2837bd1,d215b81167f1b8768a2fb24ada4cfd72b2837bd1,"Rework DownloadManager to fix remaining TODOs

- Removed DownloadInternal and its sometimes-out-of-sync
  duplicate state
- Fixed downloads being in STOPPED rather than QUEUED state
  when the manager is paused
- Fixed setMaxParallelDownloads to start/stop downloads if
  necessary when the value changes
- Fixed isWaitingForRequirements

PiperOrigin-RevId: 246164845"
AquilesCanta,2019-05-02 10:41:06,https://api.github.com/repos/google/ExoPlayer/git/commits/ad5948f3ed62941acf6a8e39ce43a4001c53a255,ad5948f3ed62941acf6a8e39ce43a4001c53a255,"Fix SmoothStreaming links

NOTE: Streams are working on ExoPlayer but querying them from
other platforms yields ""bad request"".

The new links:
+ Match Microsoft's test server.
+ Allow querying from clients other than ExoPlayer, like curl.

PiperOrigin-RevId: 246289755"
tonihei,2019-05-02 09:37:31,https://api.github.com/repos/google/ExoPlayer/git/commits/5992699d91406e8e1d289e565f95a15e3b40a11b,5992699d91406e8e1d289e565f95a15e3b40a11b,"Post-submit fixes for https://github.com/google/ExoPlayer/commit/eed5d957d87d44cb9c716f1a4c80f39ad2a6a442.

One wrong return value, a useless assignment, unusual visibility of private
class fields and some nullability issues.

PiperOrigin-RevId: 246282995"
ojw28,2019-05-01 19:50:44,https://api.github.com/repos/google/ExoPlayer/git/commits/de7c62a915076dd8363054acb0377c43601d794a,de7c62a915076dd8363054acb0377c43601d794a,"Remove unnecessary logging

As justification for why we should not have this type of logging,
it would scale up to about 13K LOC, 1800 Strings, and 36K (after
pro-guarding - in the case of the demo app) if we did it through
the whole code base*. It makes the code messier to read, and in
most cases doesn't add significant value.

Note: I left the Scheduler logging because it logs interactions
with some awkward library components outside of ExoPlayer, so is
perhaps a bit more justified.

* This is a bit unfair since realistically we wouldn't ever add
  lots of logging into trivial classes. But I think it is fair
  to say that the deltas would be non-negligible.

PiperOrigin-RevId: 246181421"
ojw28,2019-05-01 19:06:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ea0efa74641fb688ece3e170a0ecfe42a3f3ffe5,ea0efa74641fb688ece3e170a0ecfe42a3f3ffe5,"Periodically persist progress to index whilst downloading

PiperOrigin-RevId: 246173972"
ojw28,2019-05-01 18:19:02,https://api.github.com/repos/google/ExoPlayer/git/commits/eed5d957d87d44cb9c716f1a4c80f39ad2a6a442,eed5d957d87d44cb9c716f1a4c80f39ad2a6a442,"Rework DownloadManager to fix remaining TODOs

- Removed DownloadInternal and its sometimes-out-of-sync
  duplicate state
- Fixed downloads being in STOPPED rather than QUEUED state
  when the manager is paused
- Fixed setMaxParallelDownloads to start/stop downloads if
  necessary when the value changes
- Fixed isWaitingForRequirements

PiperOrigin-RevId: 246164845"
ojw28,2019-05-02 12:04:32,https://api.github.com/repos/google/ExoPlayer/git/commits/faecef0befc4bb97c4c4a9316a94732dfd6aaec1,faecef0befc4bb97c4c4a9316a94732dfd6aaec1,"Merge pull request #5807 from zsmatyas:dev-v2

PiperOrigin-RevId: 246132620"
ojw28,2019-05-01 09:08:27,https://api.github.com/repos/google/ExoPlayer/git/commits/f8cd770d84dfcc03ac43251eb77cc1f3a8d5e83b,f8cd770d84dfcc03ac43251eb77cc1f3a8d5e83b,"Migrate from is(Not)SameAs to is(Not)SameInstanceAs.

They behave identically, and the old names are being removed.

Open-source note: The new methods are available in Truth as of version 0.44.

END_PUBLIC

More information:
  go/issameas-lsc

Tested:
    TAP --sample ran all affected tests and none failed
    http://test/OCL:246024032:BASE:246042619:1556672975894:513e7746
PiperOrigin-RevId: 246101315"
AquilesCanta,2019-04-30 11:26:39,https://api.github.com/repos/google/ExoPlayer/git/commits/6c1065c6d25d682521d8bcdf0728f5712d5a3ab2,6c1065c6d25d682521d8bcdf0728f5712d5a3ab2,"Prevent index out of bounds exceptions in some live HLS scenarios

Can happen if the load position falls behind in every playlist and
when we try to load the next segment, the adaptive selection logic
decides to change variant.

Issue:#5816
PiperOrigin-RevId: 245923006"
ojw28,2019-04-30 11:25:04,https://api.github.com/repos/google/ExoPlayer/git/commits/4a5b8e17de84d9ae34af3f0964147f9a2bffcd49,4a5b8e17de84d9ae34af3f0964147f9a2bffcd49,"DownloadManager improvements

- Do requirements TODO
- Add useful helper method to retrieve not met requirements
- Fix WritableDownloadIndex Javadoc

PiperOrigin-RevId: 245922903"
ojw28,2019-04-30 09:56:23,https://api.github.com/repos/google/ExoPlayer/git/commits/6b34ade908dfe750f6d26c2ca74636a542556ac3,6b34ade908dfe750f6d26c2ca74636a542556ac3,"Rename DownloadThread to Task

This resolves some naming confusion that previously existed
as a result of DownloadThread also being used for removals.
Some related variables (e.g. activeDownloadCount) would refer
to both download and removal tasks, whilst others
(e.g. maxParallelDownloads) would refer only to downloads.
This change renames those that refer to both to use ""task""
terminology.

This change also includes minor test edits.

PiperOrigin-RevId: 245913671"
marcbaechinger,2019-04-29 14:56:41,https://api.github.com/repos/google/ExoPlayer/git/commits/618d97db1c6fbb917740ed53848fc120cad957d1,618d97db1c6fbb917740ed53848fc120cad957d1,"Never set null as a session meta data object.

Issue: #5810
PiperOrigin-RevId: 245745646"
tonihei,2019-04-30 15:57:19,https://api.github.com/repos/google/ExoPlayer/git/commits/c480818249b6c470990c4c1b7849969020d1f46f,c480818249b6c470990c4c1b7849969020d1f46f,"Fix some random AndroidStudio warnings.

PiperOrigin-RevId: 245956915"
tonihei,2019-04-30 11:51:34,https://api.github.com/repos/google/ExoPlayer/git/commits/0bb32a8f0917d589ecc5d90343986f57a7c70656,0bb32a8f0917d589ecc5d90343986f57a7c70656,"Add IntDef for Player states.

PiperOrigin-RevId: 245925254"
AquilesCanta,2019-04-30 11:26:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f64011ae04632e23d6b5c4c20a8d90fad39e3bd6,f64011ae04632e23d6b5c4c20a8d90fad39e3bd6,"Prevent index out of bounds exceptions in some live HLS scenarios

Can happen if the load position falls behind in every playlist and
when we try to load the next segment, the adaptive selection logic
decides to change variant.

Issue:#5816
PiperOrigin-RevId: 245923006"
ojw28,2019-04-30 11:25:04,https://api.github.com/repos/google/ExoPlayer/git/commits/802ebc8db10336a9fc2a60b4128d3e522a549645,802ebc8db10336a9fc2a60b4128d3e522a549645,"DownloadManager improvements

- Do requirements TODO
- Add useful helper method to retrieve not met requirements
- Fix WritableDownloadIndex Javadoc

PiperOrigin-RevId: 245922903"
ojw28,2019-04-30 09:56:23,https://api.github.com/repos/google/ExoPlayer/git/commits/51914f8f82c8c17e16e4e59f9a64b9204d74ce0d,51914f8f82c8c17e16e4e59f9a64b9204d74ce0d,"Rename DownloadThread to Task

This resolves some naming confusion that previously existed
as a result of DownloadThread also being used for removals.
Some related variables (e.g. activeDownloadCount) would refer
to both download and removal tasks, whilst others
(e.g. maxParallelDownloads) would refer only to downloads.
This change renames those that refer to both to use ""task""
terminology.

This change also includes minor test edits.

PiperOrigin-RevId: 245913671"
marcbaechinger,2019-04-29 14:56:41,https://api.github.com/repos/google/ExoPlayer/git/commits/44ad47746a452ac24a37af37053afe6be7dd9d31,44ad47746a452ac24a37af37053afe6be7dd9d31,"Never set null as a session meta data object.

Issue: #5810
PiperOrigin-RevId: 245745646"
tonihei,2019-04-29 09:31:36,https://api.github.com/repos/google/ExoPlayer/git/commits/1fb128df36f9c2a8ecbac5de319bd4cfa5b56f6a,1fb128df36f9c2a8ecbac5de319bd4cfa5b56f6a,"Move playback session manager to core library.

This allows to use the session management capabilities for other analytics
purposes.

PiperOrigin-RevId: 245710588"
ojw28,2019-04-26 17:54:07,https://api.github.com/repos/google/ExoPlayer/git/commits/880f4031811460471791b2243d360bd8717333a7,880f4031811460471791b2243d360bd8717333a7,"Fix line break

PiperOrigin-RevId: 245448908"
zsmatyas,2019-04-29 19:56:25,https://api.github.com/repos/google/ExoPlayer/git/commits/3e14ce1094a5bf932fd33c225ed8b53b573d9db3,3e14ce1094a5bf932fd33c225ed8b53b573d9db3,Code changes suggested by tonihei
zsmatyas,2019-04-26 21:37:26,https://api.github.com/repos/google/ExoPlayer/git/commits/2f356badd231302ae1780f28285cb6741b2a49d7,2f356badd231302ae1780f28285cb6741b2a49d7,"Handling XDS and TEXT modes

[Problem]
There are 3 services / modes transported on line 21:
- Captioning
- TEXT (generally not program related)
- XDS (eXtended Data Services)

Bytes belonging to the unsupported modes are interleaved with the
bytes of the captioning mode.
See Chapter 7, Chapter 8.5 and Chapter 8.6 of the CEA608 Standard for
more details.

[Solution]
Drop all bytes belonging to unsupported modes.

[Test]
- All streams containing only captioning services should not be influenced
- Test all 4 CEA 608 channels with live over-the-air content and
using all available TEXT and XDS streams."
ojw28,2019-04-26 19:41:29,https://api.github.com/repos/google/ExoPlayer/git/commits/590140c1a6c7b48d968c71c9157bd1ea00c5a849,590140c1a6c7b48d968c71c9157bd1ea00c5a849,Fix bad merge
ojw28,2019-04-26 17:49:45,https://api.github.com/repos/google/ExoPlayer/git/commits/5eb36f86a25a3f988771ad38fd746f3b9bd25c66,5eb36f86a25a3f988771ad38fd746f3b9bd25c66,Fix line break
ojw28,2019-04-26 17:48:06,https://api.github.com/repos/google/ExoPlayer/git/commits/cb13f2df0f975ede53328d55ad59f8e24b4ad677,cb13f2df0f975ede53328d55ad59f8e24b4ad677,Merge branch 'dev-v2-r2.10.0' of https://github.com/google/ExoPlayer into dev-v2-r2.10.0
erdemguven,2019-04-26 11:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/0128cebce1e1cb04c5a4974f25006354579fe286,0128cebce1e1cb04c5a4974f25006354579fe286,"Add simpler DownloadManager constructor

PiperOrigin-RevId: 245397736"
erdemguven,2019-04-26 17:26:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e4f1f89f5ca4a21c064f34d70b76a4094fb42cb9,e4f1f89f5ca4a21c064f34d70b76a4094fb42cb9,"Downloading documentation

PiperOrigin-RevId: 245443109"
tonihei,2019-04-23 10:00:55,https://api.github.com/repos/google/ExoPlayer/git/commits/9463c31cded5cd6523769c4deab04cc4204eeb3c,9463c31cded5cd6523769c4deab04cc4204eeb3c,"Update default min duration for playbacks with video to match max duration.

Experiments show this is beneficial for rebuffers with only minor impact
on battery usage.

Configurations which explicitly set a minimum buffer duration are unaffected.

Issue:#2083
PiperOrigin-RevId: 244823642"
andrewlewis,2019-04-26 17:14:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f62fa434dd8513a1766e688e59febb258762e968,f62fa434dd8513a1766e688e59febb258762e968,"Log warnings when extension libraries can't be used

Issue: #5788
PiperOrigin-RevId: 245440858"
ojw28,2019-04-26 13:35:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b55e17588b2328c77a33586e5c81cd9413ff6201,b55e17588b2328c77a33586e5c81cd9413ff6201,"Link blog post from release notes

PiperOrigin-RevId: 245411528"
ojw28,2019-04-26 12:53:58,https://api.github.com/repos/google/ExoPlayer/git/commits/56520b7c731ca41088f18e6a7c3ded28f7346a00,56520b7c731ca41088f18e6a7c3ded28f7346a00,"Move DownloadManager internal logic into isolated inner class

There are no logic changes here. It's just moving code around and removing
the ""internal"" part of names where no longer required.

PiperOrigin-RevId: 245407238"
ojw28,2019-04-26 12:30:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d187d9ec8fa252fdd25333a90116b3e11a9a3afb,d187d9ec8fa252fdd25333a90116b3e11a9a3afb,"Post maxParallelDownload and minRetryCount changes

PiperOrigin-RevId: 245405316"
ojw28,2019-04-26 11:46:48,https://api.github.com/repos/google/ExoPlayer/git/commits/9d03ae41095495df6e0f4f4ff6aee847610c8582,9d03ae41095495df6e0f4f4ff6aee847610c8582,"Add missing getters and clarify STATE_QUEUED documentation

PiperOrigin-RevId: 245401274"
erdemguven,2019-04-26 11:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/fc35d5fca6b0f8c505376583a040a602a7094dfa,fc35d5fca6b0f8c505376583a040a602a7094dfa,"Add simpler DownloadManager constructor

PiperOrigin-RevId: 245397736"
erdemguven,2019-04-26 09:25:21,https://api.github.com/repos/google/ExoPlayer/git/commits/c97ee9429ba8c7284268f0b9abd1b0584c23ee1c,c97ee9429ba8c7284268f0b9abd1b0584c23ee1c,"Allow content id to be set in DownloadHelper.getDownloadRequest

PiperOrigin-RevId: 245388082"
tonihei,2019-04-25 12:38:54,https://api.github.com/repos/google/ExoPlayer/git/commits/249f6a77ee31c05e486df5d37e2adbab889cfdaa,249f6a77ee31c05e486df5d37e2adbab889cfdaa,"Update gradle plugin (part 2).

PiperOrigin-RevId: 245218900"
tonihei,2019-04-25 12:32:07,https://api.github.com/repos/google/ExoPlayer/git/commits/7626ff72de8e6d9feab54980e6dee13dcab8361f,7626ff72de8e6d9feab54980e6dee13dcab8361f,"Update gradle plugin.

This also removes the build warning about the experimental flag.

PiperOrigin-RevId: 245218251"
erdemguven,2019-04-24 10:08:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4da14e46fa7ded200c11771a19946949fb9c34da,4da14e46fa7ded200c11771a19946949fb9c34da,"Add DownloadService SET_REQUIREMENTS action

PiperOrigin-RevId: 245014381"
erdemguven,2019-04-23 16:09:05,https://api.github.com/repos/google/ExoPlayer/git/commits/f7f6489f573189f84d8c3f9b0b9ab0797f648d08,f7f6489f573189f84d8c3f9b0b9ab0797f648d08,"Add option to add entries in an ActionFile to DownloadIndex as completed

PiperOrigin-RevId: 244864742"
tonihei,2019-04-23 14:50:30,https://api.github.com/repos/google/ExoPlayer/git/commits/615513985677ad3accef8e32370915565b93e3c4,615513985677ad3accef8e32370915565b93e3c4,"Fix bug which logs errors twice if stack traces are disabled.

Disabling stack trackes currently logs messages twice, once with and once
without stack trace.

PiperOrigin-RevId: 244853127"
tonihei,2019-04-23 12:35:58,https://api.github.com/repos/google/ExoPlayer/git/commits/3d6407a58e6a0762885f73f04add750c5eeaad15,3d6407a58e6a0762885f73f04add750c5eeaad15,"Always update loading period in handleSourceInfoRefreshed.

This ensures we keep the loading period in sync with the the playing period in
PlybackInfo, when the latter changes to something new.

PiperOrigin-RevId: 244838123"
erdemguven,2019-04-26 17:26:24,https://api.github.com/repos/google/ExoPlayer/git/commits/3e519824ff909b0d5e0a31936ca2886c29f844c0,3e519824ff909b0d5e0a31936ca2886c29f844c0,"Downloading documentation

PiperOrigin-RevId: 245443109"
andrewlewis,2019-04-26 17:14:55,https://api.github.com/repos/google/ExoPlayer/git/commits/1bc279795b6a7d4e78ccab86ee0e08e540832588,1bc279795b6a7d4e78ccab86ee0e08e540832588,"Log warnings when extension libraries can't be used

Issue: #5788
PiperOrigin-RevId: 245440858"
ojw28,2019-04-26 13:35:51,https://api.github.com/repos/google/ExoPlayer/git/commits/61f28f8107434143794b6c5757d7d8cc34a91248,61f28f8107434143794b6c5757d7d8cc34a91248,"Link blog post from release notes

PiperOrigin-RevId: 245411528"
ojw28,2019-04-26 12:53:58,https://api.github.com/repos/google/ExoPlayer/git/commits/2b0b6e1b2e52357d0c905901787d65f0302ab9ed,2b0b6e1b2e52357d0c905901787d65f0302ab9ed,"Move DownloadManager internal logic into isolated inner class

There are no logic changes here. It's just moving code around and removing
the ""internal"" part of names where no longer required.

PiperOrigin-RevId: 245407238"
ojw28,2019-04-26 12:30:48,https://api.github.com/repos/google/ExoPlayer/git/commits/f37b28f12e1b50908dd1e8511f5e8544cb06873b,f37b28f12e1b50908dd1e8511f5e8544cb06873b,"Post maxParallelDownload and minRetryCount changes

PiperOrigin-RevId: 245405316"
ojw28,2019-04-26 11:46:48,https://api.github.com/repos/google/ExoPlayer/git/commits/643e187d991ef7a0b688fcd7a4cdd8801b00032c,643e187d991ef7a0b688fcd7a4cdd8801b00032c,"Add missing getters and clarify STATE_QUEUED documentation

PiperOrigin-RevId: 245401274"
erdemguven,2019-04-26 11:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/01ad1c1a84ab8761736705a2c16940146daeb133,01ad1c1a84ab8761736705a2c16940146daeb133,"Add simpler DownloadManager constructor

PiperOrigin-RevId: 245397736"
erdemguven,2019-04-26 09:25:21,https://api.github.com/repos/google/ExoPlayer/git/commits/3382c74488196f5b5977dfa545f142d6ac30f120,3382c74488196f5b5977dfa545f142d6ac30f120,"Allow content id to be set in DownloadHelper.getDownloadRequest

PiperOrigin-RevId: 245388082"
erdemguven,2019-04-25 15:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/708cad6b28ed66c02826fb1d3ded8974591ecf7e,708cad6b28ed66c02826fb1d3ded8974591ecf7e,"Add DownloadHelper.createMediaSource utility method

PiperOrigin-RevId: 245243488"
tonihei,2019-04-25 12:48:36,https://api.github.com/repos/google/ExoPlayer/git/commits/21b2a471bb1580ef5e0d1ae5584a25dc8ca9d683,21b2a471bb1580ef5e0d1ae5584a25dc8ca9d683,"Toggle playback controls according to standard Android click handling.

We currently toggle the view in onTouchEvent ACTION_DOWN which is non-standard
and causes problems when used in a ViewGroup intercepting touch events.

Switch to standard Android click handling instead which is also what most
other player apps are doing.

Issue:#5784
PiperOrigin-RevId: 245219728"
tonihei,2019-04-25 12:38:54,https://api.github.com/repos/google/ExoPlayer/git/commits/84e03aea7064f82e1220c094382a0410a3e3b348,84e03aea7064f82e1220c094382a0410a3e3b348,"Update gradle plugin (part 2).

PiperOrigin-RevId: 245218900"
tonihei,2019-04-25 12:32:07,https://api.github.com/repos/google/ExoPlayer/git/commits/b4420f61d1c22b61d0c6d2fb5396b57b207e1919,b4420f61d1c22b61d0c6d2fb5396b57b207e1919,"Update gradle plugin.

This also removes the build warning about the experimental flag.

PiperOrigin-RevId: 245218251"
andrewlewis,2019-04-25 11:11:17,https://api.github.com/repos/google/ExoPlayer/git/commits/009d6296503965143959687a770528338a3b8885,009d6296503965143959687a770528338a3b8885,"Check codec profiles/levels for VP9

Also add some unit tests for codecs strings parsing.

PiperOrigin-RevId: 245210490"
erdemguven,2019-04-24 10:08:00,https://api.github.com/repos/google/ExoPlayer/git/commits/0ff47a8c0df183d8206d4f7bc98393a8f06a2aff,0ff47a8c0df183d8206d4f7bc98393a8f06a2aff,"Add DownloadService SET_REQUIREMENTS action

PiperOrigin-RevId: 245014381"
ojw28,2019-04-23 18:03:22,https://api.github.com/repos/google/ExoPlayer/git/commits/d60b6d64abc6ae6a0900c1cdd1f98920f2a25cb6,d60b6d64abc6ae6a0900c1cdd1f98920f2a25cb6,"Migrate from containsAllOf to containsAtLeast.

The two behave identically, and containsAllOf is being removed.

More information:
  go/containsall-lsc

Tested:
    TAP --sample for global presubmit queue
    http://test/OCL:244737393:BASE:244782138:1555991083653:3080d7c7
PiperOrigin-RevId: 244886736"
ojw28,2019-04-23 18:03:05,https://api.github.com/repos/google/ExoPlayer/git/commits/ba94f9dc0195c8698a39c04ac75d966b5fbc5b67,ba94f9dc0195c8698a39c04ac75d966b5fbc5b67,"Migrate from isNotSameAs to isNotSameInstanceAs.

The two behave identically, and isNotSameAs is being removed.

More information:
  go/issameas-lsc

Tested:
    TAP --sample for global presubmit queue
    http://test/OCL:244736857:BASE:244751659:1555988098671:1e0f72c5
PiperOrigin-RevId: 244886651"
erdemguven,2019-04-23 16:09:05,https://api.github.com/repos/google/ExoPlayer/git/commits/03313fb5e29a92dfa4a3c6de5ca88ca8459a8204,03313fb5e29a92dfa4a3c6de5ca88ca8459a8204,"Add option to add entries in an ActionFile to DownloadIndex as completed

PiperOrigin-RevId: 244864742"
tonihei,2019-04-23 14:50:30,https://api.github.com/repos/google/ExoPlayer/git/commits/06586b75b00c9e43065fbd171465bd46d7aa01c9,06586b75b00c9e43065fbd171465bd46d7aa01c9,"Fix bug which logs errors twice if stack traces are disabled.

Disabling stack trackes currently logs messages twice, once with and once
without stack trace.

PiperOrigin-RevId: 244853127"
tonihei,2019-04-23 14:09:57,https://api.github.com/repos/google/ExoPlayer/git/commits/4507c6870deec9715802d31e433b2756bcaaae59,4507c6870deec9715802d31e433b2756bcaaae59,"Move away from AndroidX bundled Truth to be closer to head revision.

The AndroidX bundled version (0.42) lags behind the most up-to-date public
release (0.44) making it more difficult to stay close to the actual head
revision which is used internally.

PiperOrigin-RevId: 244848568"
tonihei,2019-04-23 12:36:24,https://api.github.com/repos/google/ExoPlayer/git/commits/3acd8a6048882902d835d5a6ea999a12ce585027,3acd8a6048882902d835d5a6ea999a12ce585027,"Remove unused PlaybackInfo.resetToNewPosition

PiperOrigin-RevId: 244838165"
tonihei,2019-04-23 12:35:58,https://api.github.com/repos/google/ExoPlayer/git/commits/9441f7244520e3e17ea8dce4f6372e108d3ecd03,9441f7244520e3e17ea8dce4f6372e108d3ecd03,"Always update loading period in handleSourceInfoRefreshed.

This ensures we keep the loading period in sync with the the playing period in
PlybackInfo, when the latter changes to something new.

PiperOrigin-RevId: 244838123"
ojw28,2019-04-23 10:23:34,https://api.github.com/repos/google/ExoPlayer/git/commits/3e9a45b9d360760cd82216e6cc072a3107b18a9a,3e9a45b9d360760cd82216e6cc072a3107b18a9a,"Fix DownloadManagerDashTest tests

Also re-enable two of them, although note that the fix here is
not related to the flakiness that caused them to be disabled.
I'm re-enabling them since much has changed in DownloadManager,
and the hope is that these tests are no longer flaky.

PiperOrigin-RevId: 244826225"
tonihei,2019-04-23 10:00:55,https://api.github.com/repos/google/ExoPlayer/git/commits/9725132e3c09280c2532f2de3077e9cd6ba28b1d,9725132e3c09280c2532f2de3077e9cd6ba28b1d,"Update default min duration for playbacks with video to match max duration.

Experiments show this is beneficial for rebuffers with only minor impact
on battery usage.

Configurations which explicitly set a minimum buffer duration are unaffected.

Issue:#2083
PiperOrigin-RevId: 244823642"
ojw28,2019-04-23 08:58:52,https://api.github.com/repos/google/ExoPlayer/git/commits/d89f3eeb29884f02bc91e7cbadf6327bbbcb7a74,d89f3eeb29884f02bc91e7cbadf6327bbbcb7a74,"Update dependency versions

PiperOrigin-RevId: 244816212"
andrewlewis,2019-04-23 08:18:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b01075f325ca48e6ad24928330610621989dd174,b01075f325ca48e6ad24928330610621989dd174,"Play out remaining data on reconfiguration

Before this change we'd release the audio track and create a new one as soon
as audio processors had drained when reconfiguring.

Fix this behavior by stop()ing the AudioTrack to play out all written data.

Issue: #2446
PiperOrigin-RevId: 244812402"
ojw28,2019-04-19 15:05:04,https://api.github.com/repos/google/ExoPlayer/git/commits/6473d46cbd9e24f9c8b480659be969c67e379937,6473d46cbd9e24f9c8b480659be969c67e379937,Fix tests
ojw28,2019-04-18 23:04:02,https://api.github.com/repos/google/ExoPlayer/git/commits/b4b82f5b1eb00b668d1abe5004da0e3b8c577316,b4b82f5b1eb00b668d1abe5004da0e3b8c577316,Remove dev-v2 section for 2.10
ojw28,2019-04-18 23:00:53,https://api.github.com/repos/google/ExoPlayer/git/commits/7f885351dba24321dcc98b163bba4b3196d73cd6,7f885351dba24321dcc98b163bba4b3196d73cd6,Upgrade dependency versions
ojw28,2019-04-18 22:44:58,https://api.github.com/repos/google/ExoPlayer/git/commits/0d8146cbcab4ea9b8478d70ee06e0beaefe58dfd,0d8146cbcab4ea9b8478d70ee06e0beaefe58dfd,"Further improve DownloadService action names & methods

- We had buildAddRequest and sendNewDownload. Converged to
  buildAddDownload and sendAddDownload.
- Also fixed a few more inconsistencies, and brought the
  action constants into line as well.

PiperOrigin-RevId: 244274041"
ojw28,2019-04-18 22:44:58,https://api.github.com/repos/google/ExoPlayer/git/commits/748a29e8f5ddf808d8da43f284b1c6227aa77e87,748a29e8f5ddf808d8da43f284b1c6227aa77e87,"Further improve DownloadService action names & methods

- We had buildAddRequest and sendNewDownload. Converged to
  buildAddDownload and sendAddDownload.
- Also fixed a few more inconsistencies, and brought the
  action constants into line as well.

PiperOrigin-RevId: 244274041"
ojw28,2019-04-18 22:17:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b8cdd7e40bff8f56aa078a8e2fd760e21cedec39,b8cdd7e40bff8f56aa078a8e2fd760e21cedec39,"Fix lint warnings for 2.10

PiperOrigin-RevId: 244268855"
ojw28,2019-04-18 22:08:43,https://api.github.com/repos/google/ExoPlayer/git/commits/b30efe968b8459d77779daea9960d15c3e6268a1,b30efe968b8459d77779daea9960d15c3e6268a1,"Clean up database tables for launch

PiperOrigin-RevId: 244267255"
ojw28,2019-04-18 20:02:48,https://api.github.com/repos/google/ExoPlayer/git/commits/54a5d6912bfd516091279fcd23d8984709819485,54a5d6912bfd516091279fcd23d8984709819485,"Improve progress reporting logic

- Listener based reporting of progress allows the content length
  to be persisted into the download index (and notified via a
  download state change) as soon as it's available.
- Moved contentLength back into Download proper. It should only
  ever change once, so I'm not sure it belongs in the mutable part
  of Download.
- Made a DownloadProgress class, for naming sanity.

PiperOrigin-RevId: 244242487"
ojw28,2019-04-18 18:34:00,https://api.github.com/repos/google/ExoPlayer/git/commits/7d67047e9472efad1291d3a2522edd913a784628,7d67047e9472efad1291d3a2522edd913a784628,"Support multiple DefaultDownloadIndex instances

PiperOrigin-RevId: 244226680"
ojw28,2019-04-18 18:19:38,https://api.github.com/repos/google/ExoPlayer/git/commits/38c5350c2cfbb86264081db7d367584f80f32044,38c5350c2cfbb86264081db7d367584f80f32044,"Simplify DownloadManager constructors

PiperOrigin-RevId: 244223870"
ojw28,2019-04-18 17:48:09,https://api.github.com/repos/google/ExoPlayer/git/commits/8c624081201b418c51747af753e41880d14f1edf,8c624081201b418c51747af753e41880d14f1edf,"Rename start/stopDownloads to resume/pauseDownloads

PiperOrigin-RevId: 244216620"
ojw28,2019-04-18 17:26:00,https://api.github.com/repos/google/ExoPlayer/git/commits/138da6d51900e831ee4bcaee885bb373655d7b90,138da6d51900e831ee4bcaee885bb373655d7b90,"Rename manualStopReason to stopReason

PiperOrigin-RevId: 244210737"
erdemguven,2019-04-18 16:04:31,https://api.github.com/repos/google/ExoPlayer/git/commits/6d8bd34590f88110041e3ff6ee085b3235b5eaaa,6d8bd34590f88110041e3ff6ee085b3235b5eaaa,"Add missing DownloadService build*Intent and startWith* methods

PiperOrigin-RevId: 244196081"
AquilesCanta,2019-04-18 13:41:45,https://api.github.com/repos/google/ExoPlayer/git/commits/b6337adc4724236ef6b1d033b01feeb563437777,b6337adc4724236ef6b1d033b01feeb563437777,"Avoid selecting a forced text track that doesn't match the audio selection

Assuming there is no text language preference.

PiperOrigin-RevId: 244176667"
erdemguven,2019-04-18 12:34:52,https://api.github.com/repos/google/ExoPlayer/git/commits/a501f8c2452eafafb4c792179fc342a71e3bcc03,a501f8c2452eafafb4c792179fc342a71e3bcc03,"Fix flaky DownloadManagerDashTest

PiperOrigin-RevId: 244170179"
AquilesCanta,2019-04-18 12:17:04,https://api.github.com/repos/google/ExoPlayer/git/commits/be0acc3621759a5c900f19185bfda34931ba55e3,be0acc3621759a5c900f19185bfda34931ba55e3,"Add test for HlsTrackMetadataEntry population in the HlsPlaylistParser

PiperOrigin-RevId: 244168713"
andrewlewis,2019-04-18 07:35:07,https://api.github.com/repos/google/ExoPlayer/git/commits/c2bbf38ee8798246a0060897712a79154437d392,c2bbf38ee8798246a0060897712a79154437d392,"Extend Bluetooth dead audio track workaround to Q

PiperOrigin-RevId: 244139959"
ojw28,2019-04-17 23:58:44,https://api.github.com/repos/google/ExoPlayer/git/commits/898bfbff6c9cf677e6c4d83205d31557608d98d9,898bfbff6c9cf677e6c4d83205d31557608d98d9,"[libvpx] permalaunch number of buffers.

PiperOrigin-RevId: 244094942"
ojw28,2019-04-17 19:45:03,https://api.github.com/repos/google/ExoPlayer/git/commits/0748566482161e12d18e85751b2fea39fcdad37d,0748566482161e12d18e85751b2fea39fcdad37d,"Remove TODOs we're not going to do

1. customCacheKey for DASH/HLS/SS is now asserted against
   in DownloadRequest
2. Merging of event delivery in DownloadManager is very
   tricky to get right and probably not a good idea

PiperOrigin-RevId: 244048392"
erdemguven,2019-04-17 16:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/289a8ffe4ced9050e8ef3fedd0955c213a3ce99d,289a8ffe4ced9050e8ef3fedd0955c213a3ce99d,"Small javadoc fix for DownloadManager constructors

PiperOrigin-RevId: 244009343"
ojw28,2019-04-17 15:59:11,https://api.github.com/repos/google/ExoPlayer/git/commits/afd72839dceeaad8e99940a0710181782ab51f03,afd72839dceeaad8e99940a0710181782ab51f03,"Disable cache span touching for offline

Currently SimpleCache will touch cache spans whenever it reads
from them. With legacy SimpleCache setups this involves a potentially
expensive file rename. With new SimpleCache setups it involves
a more efficient but still non-free database write.

For offline use cases, and more generally any use case where the
eviction policy doesn't use last access timestamps, touching is
not useful. This change allows the evictor to specify whether it
needs cache spans to be touched or not. SimpleCache will only touch
spans if the evictor requires it.

Note: There is a potential change in behavior in cases where a
cache uses an evictor that doesn't need cache spans to be touched,
but then later switches to an evictor that does. The new evictor
may temporarily make sub-optimal eviction decisions as a result.
I think this is a very fair trade-off, since this scenario is
unlikely to occur much, if at all, in practice, and even if it
does occur the result isn't that bad.
PiperOrigin-RevId: 244005682"
ojw28,2019-04-17 15:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/2907f79e69633b7739ae7b48a225572abf54a7b7,2907f79e69633b7739ae7b48a225572abf54a7b7,"Don't start download if user explicitly deselects all tracks

PiperOrigin-RevId: 244003817"
andrewlewis,2019-04-17 13:50:40,https://api.github.com/repos/google/ExoPlayer/git/commits/c1246937dfac4fd047ae9ab48606b33aeee1ac34,c1246937dfac4fd047ae9ab48606b33aeee1ac34,"Upgrade IMA to 3.11.2

PiperOrigin-RevId: 243988105"
ojw28,2019-04-17 13:45:18,https://api.github.com/repos/google/ExoPlayer/git/commits/e15e6212f25d531c2f1403876e463dc645e4ab29,e15e6212f25d531c2f1403876e463dc645e4ab29,"Fix playback of badly clipped MP3 streams

Issue: #5772
PiperOrigin-RevId: 243987497"
ojw28,2019-04-17 12:32:17,https://api.github.com/repos/google/ExoPlayer/git/commits/721e1dbfaf8c18c4a62badf5a6aa7518e999e152,721e1dbfaf8c18c4a62badf5a6aa7518e999e152,"Add WritableDownloadIndex interface

One goal we forgot about a little bit was to allow applications
to provide their own index implementation. This requires the
writable side to also be defined by an interface.

PiperOrigin-RevId: 243979660"
andrewlewis,2019-04-17 10:47:48,https://api.github.com/repos/google/ExoPlayer/git/commits/6b0fd513788c7eee458f7d336905dcf779cfc808,6b0fd513788c7eee458f7d336905dcf779cfc808,"Reset playback info but not position/state in release

ImaAdsLoader gets the player position after the app releases
the player to support resuming ads at their current position
if the same ads loader is reused.

PiperOrigin-RevId: 243969916"
erdemguven,2019-04-17 08:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/dcb8417a3c6a18e636be07c44d21eddf98208639,dcb8417a3c6a18e636be07c44d21eddf98208639,"Assert customCacheKey is null for DASH, HLS and SmoothStreaming downloads

PiperOrigin-RevId: 243954989"
ojw28,2019-04-18 22:17:03,https://api.github.com/repos/google/ExoPlayer/git/commits/bab7b9e9a1f434e5380c71bcef1c7ba069dbc22a,bab7b9e9a1f434e5380c71bcef1c7ba069dbc22a,"Fix lint warnings for 2.10

PiperOrigin-RevId: 244268855"
ojw28,2019-04-18 22:08:43,https://api.github.com/repos/google/ExoPlayer/git/commits/864b59080aed2c2f9433d3a5a0b9b2127ee0529a,864b59080aed2c2f9433d3a5a0b9b2127ee0529a,"Clean up database tables for launch

PiperOrigin-RevId: 244267255"
ojw28,2019-04-18 20:02:48,https://api.github.com/repos/google/ExoPlayer/git/commits/82061e9afbc660aaf788578e76d69cab1ddc52c1,82061e9afbc660aaf788578e76d69cab1ddc52c1,"Improve progress reporting logic

- Listener based reporting of progress allows the content length
  to be persisted into the download index (and notified via a
  download state change) as soon as it's available.
- Moved contentLength back into Download proper. It should only
  ever change once, so I'm not sure it belongs in the mutable part
  of Download.
- Made a DownloadProgress class, for naming sanity.

PiperOrigin-RevId: 244242487"
ojw28,2019-04-18 18:34:00,https://api.github.com/repos/google/ExoPlayer/git/commits/0ccda60ab4d24c90b75aeab3983229512bee8fad,0ccda60ab4d24c90b75aeab3983229512bee8fad,"Support multiple DefaultDownloadIndex instances

PiperOrigin-RevId: 244226680"
ojw28,2019-04-18 18:19:38,https://api.github.com/repos/google/ExoPlayer/git/commits/e9413b0d4180036e0163e8e38c41d244b6454bd3,e9413b0d4180036e0163e8e38c41d244b6454bd3,"Simplify DownloadManager constructors

PiperOrigin-RevId: 244223870"
ojw28,2019-04-18 17:48:09,https://api.github.com/repos/google/ExoPlayer/git/commits/62964026b91d7b466f005d83264ffd5160ef4088,62964026b91d7b466f005d83264ffd5160ef4088,"Rename start/stopDownloads to resume/pauseDownloads

PiperOrigin-RevId: 244216620"
ojw28,2019-04-18 17:26:00,https://api.github.com/repos/google/ExoPlayer/git/commits/82af6899a0903cb6638ff1776cbcd7e2b89521c2,82af6899a0903cb6638ff1776cbcd7e2b89521c2,"Rename manualStopReason to stopReason

PiperOrigin-RevId: 244210737"
erdemguven,2019-04-18 16:04:31,https://api.github.com/repos/google/ExoPlayer/git/commits/f9f009645d8978d87da45d5527184aa042b39eb9,f9f009645d8978d87da45d5527184aa042b39eb9,"Add missing DownloadService build*Intent and startWith* methods

PiperOrigin-RevId: 244196081"
AquilesCanta,2019-04-18 13:41:45,https://api.github.com/repos/google/ExoPlayer/git/commits/4ea2463856566818008a1441941e20be7cd7956a,4ea2463856566818008a1441941e20be7cd7956a,"Avoid selecting a forced text track that doesn't match the audio selection

Assuming there is no text language preference.

PiperOrigin-RevId: 244176667"
andrewlewis,2019-04-18 13:15:38,https://api.github.com/repos/google/ExoPlayer/git/commits/fe65f002a50898314d15b8e37fd3f7e5e812ac94,fe65f002a50898314d15b8e37fd3f7e5e812ac94,"Move E-AC3 workaround out of MediaCodecUtil

PiperOrigin-RevId: 244173887"
andrewlewis,2019-04-18 12:37:08,https://api.github.com/repos/google/ExoPlayer/git/commits/6665af5b7b332587138d90a185cc2a8043c65132,6665af5b7b332587138d90a185cc2a8043c65132,"Support additional DV profiles that require fallback

PiperOrigin-RevId: 244170391"
erdemguven,2019-04-18 12:34:52,https://api.github.com/repos/google/ExoPlayer/git/commits/50c9fe629486c1d417913176fa379c1fb1d19429,50c9fe629486c1d417913176fa379c1fb1d19429,"Fix flaky DownloadManagerDashTest

PiperOrigin-RevId: 244170179"
AquilesCanta,2019-04-18 12:17:04,https://api.github.com/repos/google/ExoPlayer/git/commits/f6de1aa24203681e5999898cd9b07f06ddf77a33,f6de1aa24203681e5999898cd9b07f06ddf77a33,"Add test for HlsTrackMetadataEntry population in the HlsPlaylistParser

PiperOrigin-RevId: 244168713"
andrewlewis,2019-04-18 12:03:14,https://api.github.com/repos/google/ExoPlayer/git/commits/2347bd2c9901cb679979dd4b292c6b1ef18cd65c,2347bd2c9901cb679979dd4b292c6b1ef18cd65c,"Prioritize decoders with format support

PiperOrigin-RevId: 244167456"
andrewlewis,2019-04-18 07:35:07,https://api.github.com/repos/google/ExoPlayer/git/commits/a985ca93c5c7dcf9aef38eca93f5f907d4de871a,a985ca93c5c7dcf9aef38eca93f5f907d4de871a,"Extend Bluetooth dead audio track workaround to Q

PiperOrigin-RevId: 244139959"
ojw28,2019-04-17 23:58:44,https://api.github.com/repos/google/ExoPlayer/git/commits/4c967895e9a493d0f59dc593fa39563c7a9d3b48,4c967895e9a493d0f59dc593fa39563c7a9d3b48,"[libvpx] permalaunch number of buffers.

PiperOrigin-RevId: 244094942"
AquilesCanta,2019-04-17 20:31:21,https://api.github.com/repos/google/ExoPlayer/git/commits/92269ff774c59cc8f0af0210720a0e743f951a57,92269ff774c59cc8f0af0210720a0e743f951a57,"Make MediaCodecRenderer#onInputFormatChanged take a FormatHolder

PiperOrigin-RevId: 244056421"
ojw28,2019-04-17 19:45:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4d6aca7629445cb8ac8c73b29f7ba0229274c0a8,4d6aca7629445cb8ac8c73b29f7ba0229274c0a8,"Remove TODOs we're not going to do

1. customCacheKey for DASH/HLS/SS is now asserted against
   in DownloadRequest
2. Merging of event delivery in DownloadManager is very
   tricky to get right and probably not a good idea

PiperOrigin-RevId: 244048392"
erdemguven,2019-04-17 16:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/f001e492956c42f8d4ae1eb5124e84331342d017,f001e492956c42f8d4ae1eb5124e84331342d017,"Small javadoc fix for DownloadManager constructors

PiperOrigin-RevId: 244009343"
ojw28,2019-04-17 15:59:11,https://api.github.com/repos/google/ExoPlayer/git/commits/e290f883d1ede6523b00854c3fdf439b0e4b851f,e290f883d1ede6523b00854c3fdf439b0e4b851f,"Disable cache span touching for offline

Currently SimpleCache will touch cache spans whenever it reads
from them. With legacy SimpleCache setups this involves a potentially
expensive file rename. With new SimpleCache setups it involves
a more efficient but still non-free database write.

For offline use cases, and more generally any use case where the
eviction policy doesn't use last access timestamps, touching is
not useful. This change allows the evictor to specify whether it
needs cache spans to be touched or not. SimpleCache will only touch
spans if the evictor requires it.

Note: There is a potential change in behavior in cases where a
cache uses an evictor that doesn't need cache spans to be touched,
but then later switches to an evictor that does. The new evictor
may temporarily make sub-optimal eviction decisions as a result.
I think this is a very fair trade-off, since this scenario is
unlikely to occur much, if at all, in practice, and even if it
does occur the result isn't that bad.
PiperOrigin-RevId: 244005682"
ojw28,2019-04-17 15:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/d656782bd4deaba624ab47da4d4f4e44d56c0786,d656782bd4deaba624ab47da4d4f4e44d56c0786,"Don't start download if user explicitly deselects all tracks

PiperOrigin-RevId: 244003817"
andrewlewis,2019-04-17 13:50:40,https://api.github.com/repos/google/ExoPlayer/git/commits/a0fe7ace833000dbb92cacf5a42cca25b318c077,a0fe7ace833000dbb92cacf5a42cca25b318c077,"Upgrade IMA to 3.11.2

PiperOrigin-RevId: 243988105"
ojw28,2019-04-17 13:45:18,https://api.github.com/repos/google/ExoPlayer/git/commits/c9470296ab59d0c66ac07f46d988841c357abbe8,c9470296ab59d0c66ac07f46d988841c357abbe8,"Fix playback of badly clipped MP3 streams

Issue: #5772
PiperOrigin-RevId: 243987497"
ojw28,2019-04-17 12:32:17,https://api.github.com/repos/google/ExoPlayer/git/commits/2feadc97626a9ddea4c8d44687205c547084b9a7,2feadc97626a9ddea4c8d44687205c547084b9a7,"Add WritableDownloadIndex interface

One goal we forgot about a little bit was to allow applications
to provide their own index implementation. This requires the
writable side to also be defined by an interface.

PiperOrigin-RevId: 243979660"
andrewlewis,2019-04-17 10:47:48,https://api.github.com/repos/google/ExoPlayer/git/commits/e0c8af51909e552473bf4339673eaf8161352ca4,e0c8af51909e552473bf4339673eaf8161352ca4,"Reset playback info but not position/state in release

ImaAdsLoader gets the player position after the app releases
the player to support resuming ads at their current position
if the same ads loader is reused.

PiperOrigin-RevId: 243969916"
erdemguven,2019-04-17 08:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/d92e6bfaf82e068133aa0fd5cec4b82d8e0c791b,d92e6bfaf82e068133aa0fd5cec4b82d8e0c791b,"Assert customCacheKey is null for DASH, HLS and SmoothStreaming downloads

PiperOrigin-RevId: 243954989"
ojw28,2019-04-16 17:56:09,https://api.github.com/repos/google/ExoPlayer/git/commits/af5131e393dd5c0de31de2144bf2238d65f2820e,af5131e393dd5c0de31de2144bf2238d65f2820e,"Rename Shadow*Looper classes (PR#4868)

ShadowLooper -> ShadowLegacyLooper
ShadowRealisticLooper -> ShadowPausedLooper
ShadowBaseLooper -> ShadowLooper

And all public methods from ShadowLegacyLooper get pushed up to ShadowLooper

Pull Request: https://github.com/robolectric/robolectric/pull/4868

Copybara: OK

Also adjust Google3 tests  using custom looper shadows where necessary.
Convert exoplayer to paused looper to eliminate reliance on custom shadows

PiperOrigin-RevId: 243839311"
ojw28,2019-04-16 16:27:11,https://api.github.com/repos/google/ExoPlayer/git/commits/10f3b8db6ed5c920188c66eb87637ea4b16e1ad1,10f3b8db6ed5c920188c66eb87637ea4b16e1ad1,"Update release notes for 2.10 branch cut

PiperOrigin-RevId: 243821394"
tonihei,2019-04-16 16:16:00,https://api.github.com/repos/google/ExoPlayer/git/commits/e62da368d28f6fe2286fafa611397966fad6b83d,e62da368d28f6fe2286fafa611397966fad6b83d,"Use player.retry in demo app instead of manual position tracking.

We currently do manual position tracking while the player is in error mode.
This is to allow an initial seek to the new position when trying to re-prepare.

Instead, we can just use our player.retry method and remove the tracking code.

PiperOrigin-RevId: 243819580"
tonihei,2019-04-16 16:15:08,https://api.github.com/repos/google/ExoPlayer/git/commits/8e7a2ba9587072c549b72189fa8aa115201a3d5a,8e7a2ba9587072c549b72189fa8aa115201a3d5a,"Don't reset masking position when prepare fails.

The removed condition only applies when prepare fails and no timeline was or
is known. We should keep a pending seek position in such a case. The internal
player does the same thing already.

PiperOrigin-RevId: 243819466"
ojw28,2019-04-16 15:26:09,https://api.github.com/repos/google/ExoPlayer/git/commits/ee08e7dcac508af05c9cc9ab6663df34299264a7,ee08e7dcac508af05c9cc9ab6663df34299264a7,"Fix key and accessibility scrubbing

Issue: #5767
PiperOrigin-RevId: 243811443"
nic0lette,2019-04-16 14:57:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0be4bee25f2fd89c8a8b1f9efd3eca351dcc769a,0be4bee25f2fd89c8a8b1f9efd3eca351dcc769a,"Add ""setCustomErrorMessage"" override that allows including an extras bundle with a custom error.

PiperOrigin-RevId: 243807109"
erdemguven,2019-04-16 14:55:27,https://api.github.com/repos/google/ExoPlayer/git/commits/5856e75781c5f4edc209ffb29ddec90b81f598bd,5856e75781c5f4edc209ffb29ddec90b81f598bd,"Rename DownloadAction to DownloadRequest

PiperOrigin-RevId: 243806888"
nic0lette,2019-04-16 13:54:40,https://api.github.com/repos/google/ExoPlayer/git/commits/9fc3ea79a122bc63ae9b1bdc5cade3584de563d6,9fc3ea79a122bc63ae9b1bdc5cade3584de563d6,"Add ability to register/unregister custom CommandReceivers.

PiperOrigin-RevId: 243799572"
erdemguven,2019-04-16 10:53:15,https://api.github.com/repos/google/ExoPlayer/git/commits/c2c7c43a369d90303f9c61bd72b56eb8515c726b,c2c7c43a369d90303f9c61bd72b56eb8515c726b,"Remove redundant proguard files

PiperOrigin-RevId: 243781000"
ojw28,2019-04-15 22:09:15,https://api.github.com/repos/google/ExoPlayer/git/commits/77b78b96dff4d117ef7dffe0ff3d77314eafce19,77b78b96dff4d117ef7dffe0ff3d77314eafce19,"DownloadTracker shouldn't depend on DefaultDownloadIndex

- It can work with any DownloadIndex
- Also simplify things to not require that it's registered
  as a DownloadManager listener by someone else

PiperOrigin-RevId: 243697352"
ojw28,2019-04-15 17:09:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9c759a867b51d1fb4e95f7169646c71256679247,9c759a867b51d1fb4e95f7169646c71256679247,"Prepare SimpleCache for 2.10.0 release

- Expose constructors that take DatabaseProvider. Deprecate those
  that do not.
- Expose Cache.getUid. This will likely be used for naming of the
  tables accessed by DefaultDownloadIndex .

PiperOrigin-RevId: 243637786"
andrewlewis,2019-04-15 17:05:01,https://api.github.com/repos/google/ExoPlayer/git/commits/45348a97a954d4c13aeaf56b6c55e8ea01623ec7,45348a97a954d4c13aeaf56b6c55e8ea01623ec7,"Fix Atom ConstantCaseForConstant suppression

PiperOrigin-RevId: 243636923"
AquilesCanta,2019-04-15 16:41:11,https://api.github.com/repos/google/ExoPlayer/git/commits/68bd5da3cb1d01c69054c9698813fdc1e5521fff,68bd5da3cb1d01c69054c9698813fdc1e5521fff,"Fix DecryptionResource.Owner#onLastReferenceReleased type

PiperOrigin-RevId: 243632134"
ojw28,2019-04-15 16:11:03,https://api.github.com/repos/google/ExoPlayer/git/commits/7b84a1ead7fb487a957ca8d029c38ca57ff77ceb,7b84a1ead7fb487a957ca8d029c38ca57ff77ceb,"DownloadManager.getCurrentDownloads: Return list instead of array

- Allows enforcing immutability, which in a future CL will allow
  avoiding allocating a new array/list on every call.
- Also some left over doc cleanup from the DownloadState rename.

PiperOrigin-RevId: 243627352"
AquilesCanta,2019-04-15 15:54:03,https://api.github.com/repos/google/ExoPlayer/git/commits/9ddd39c1c06d57f233de731bd4153ec35283e3d7,9ddd39c1c06d57f233de731bd4153ec35283e3d7,"Add the HlsMetadataEntry from the Master playlist to the Hls tracks

PiperOrigin-RevId: 243624081"
AquilesCanta,2019-04-15 15:20:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e9a7d47f62a7e2ddc677912ba8d1afa3946a3e4f,e9a7d47f62a7e2ddc677912ba8d1afa3946a3e4f,"Move the RELEASENOTES entry for PlayReady's LA_URL workaround from HLS to DRM

PiperOrigin-RevId: 243618907"
erdemguven,2019-04-15 15:03:41,https://api.github.com/repos/google/ExoPlayer/git/commits/ba91501751af1112332ea29594ee44e35fc42c13,ba91501751af1112332ea29594ee44e35fc42c13,"Add DownloadService.invalidateForegroundNotification

ISSUE: #4563
PiperOrigin-RevId: 243616444"
ojw28,2019-04-15 11:40:30,https://api.github.com/repos/google/ExoPlayer/git/commits/18dd3fdb46acd1b51bb8eb74aa751da03eff901e,18dd3fdb46acd1b51bb8eb74aa751da03eff901e,"Bump release to 2.10.0 and update release notes

PiperOrigin-RevId: 243592790"
tonihei,2019-04-15 11:33:54,https://api.github.com/repos/google/ExoPlayer/git/commits/1ee51518ae032569f4b333006bf8076c3b4a3efc,1ee51518ae032569f4b333006bf8076c3b4a3efc,"Use new exoplayer.dev domain everywhere.

The old domain automatically forwards to the new one. For consistency, change
all doc and code references regardless.

Also adds GitHub CNAME config file which configures our page for the custom
domain.

PiperOrigin-RevId: 243592110"
tonihei,2019-04-15 10:51:43,https://api.github.com/repos/google/ExoPlayer/git/commits/75238e5e4f8813961902893c50d0d41c13eaa239,75238e5e4f8813961902893c50d0d41c13eaa239,"Remove duplications from handleSourceInfoRefreshed.

handleSourceInfoRefreshed checks for various conditions which may trigger a
change in position. In all cases, we need to resolve the new position for ads,
and if the corresponding MediaPeriods already exist, perform the seek to the new
position.

This change simplified the code by
 1. Moving all conditions in a single if-else structure which just determines
    the new playback position. This makes it easier to read and to follow.
 2. Doing the subsequent seek and position update in one final step to remove
    duplicated code.

As a side effect, it also improves some edge cases. For example when skipping
an ad to an already prebuffered period, we now properly update the existing
prebuffered period.

PiperOrigin-RevId: 243588014"
AquilesCanta,2019-04-15 10:00:12,https://api.github.com/repos/google/ExoPlayer/git/commits/1bf1790edc9428f1b77591f0911f60e97abdf3d5,1bf1790edc9428f1b77591f0911f60e97abdf3d5,"Extract factory method for FragmentedMp4Extractor in DefaultHlsExtractorFactory

PiperOrigin-RevId: 243582468"
ojw28,2019-04-13 00:44:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2e3eac25b79453d9a0c4ca86c1b32fccf55d949b,2e3eac25b79453d9a0c4ca86c1b32fccf55d949b,"Cleanly detach DownloadThreads on release

- Make a best effort to avoid posting MSG_DOWNLOAD_THREAD_STOPPED
  if the internal thread has already quit. Doing so is harmless,
  but causes an error in Logcat. We used to generate this warning
  quite a bit in ExoPlayerImplInternal as well, and we got quite
  a few issues filed about it, so best to avoid it if possible.
- Null out the back reference DownloadThread holds to its manager
  on release. This avoids a potential issue where a download thread
  can prevent GC of its manager if it doesn't cancel quickly.
  There's similar logic (with a similar comment) in Loader.LoadTask.

PiperOrigin-RevId: 243365143"
AquilesCanta,2019-04-12 18:49:19,https://api.github.com/repos/google/ExoPlayer/git/commits/97acc681d10036c0b90573c5ba7d701c45f1e979,97acc681d10036c0b90573c5ba7d701c45f1e979,"Add HlsMetadataEntries to HlsMasterPlaylist's variants and renditions

PiperOrigin-RevId: 243304549"
ojw28,2019-04-12 14:07:07,https://api.github.com/repos/google/ExoPlayer/git/commits/b2c29da6b39668605c8c3da556b298480d4edd19,b2c29da6b39668605c8c3da556b298480d4edd19,"Finalize DownloadManager interface

- Rename getAllDownloads to getCurrentDownloads to make it clear
  that it doesn't include completed and failed downloads
- Change getDownloadCount to isWaitingForRequirements, which is
  what it's used for. Added TODO to make it returns the right thing

PiperOrigin-RevId: 243257856"
tonihei,2019-04-12 13:13:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c1e25f7768a1bcc3730cf51487c9f7c941137709,c1e25f7768a1bcc3730cf51487c9f7c941137709,"Add check for retryDelayMs==C.TIME_UNSET in DASH and SS manifest onLoadError.

If the returned retry delay is unset, we should use a DONT_RETRY_FATAL action
instead and dispatch the event with the ""canceled"" flag.

PiperOrigin-RevId: 243251554"
ojw28,2019-04-12 13:00:41,https://api.github.com/repos/google/ExoPlayer/git/commits/a588717b4648b1d365376d842b184c7e0a480137,a588717b4648b1d365376d842b184c7e0a480137,"Move download state transitions into DownloadManager

Non-trivial download state transitions are currently split across
DownloadManager and Download. These transitions are part of the
same state machine, so it's clearer if they're all in the same place
(i.e. DownloadManager, since this is the component that transitions
downloads between states).

PiperOrigin-RevId: 243249915"
ojw28,2019-04-12 12:09:14,https://api.github.com/repos/google/ExoPlayer/git/commits/f623a9dea0afbca26a28e4a1f91998575d774864,f623a9dea0afbca26a28e4a1f91998575d774864,"Reduce use of DownloadInternal in DownloadManager

The only state DownloadInternal holds is duplicate of state contained
in Download, but can confusingly be temporarily out of sync. This is
error prone because it's easy to use the wrong variable (e.g.
download.state vs state). DownloadInternals methods are called into
and call out into DownloadManager, which makes some code paths that
are quite hard to follow.

It's possible to simplify DownloadManager quite a lot by removing the
duplicated state in DownloadInternal, at which point DownloadInternal's
methods flatten into DownloadManager, which can just hold an internal
list of Downloads directly.

This is a first step, which makes it clear that DownloadThready only
needs its immutable DownloadAction + an isRemove flag.

PiperOrigin-RevId: 243245288"
AquilesCanta,2019-04-12 11:58:40,https://api.github.com/repos/google/ExoPlayer/git/commits/bd841b18f22ee5d184c22fb98d21d0a76d0ad4bb,bd841b18f22ee5d184c22fb98d21d0a76d0ad4bb,"Add DecryptionResource to FormatHolder

PiperOrigin-RevId: 243243975"
AquilesCanta,2019-04-12 10:53:38,https://api.github.com/repos/google/ExoPlayer/git/commits/936bc244b64f8c9f7ad11f07858b36275ad8d6d1,936bc244b64f8c9f7ad11f07858b36275ad8d6d1,"Add an HLS metadata entry sublcass to populate HLS track formats

Include information to facilitate adaptive track selection in HLS.

PiperOrigin-RevId: 243238232"
AquilesCanta,2019-04-12 10:40:39,https://api.github.com/repos/google/ExoPlayer/git/commits/9cfac7ea077e9c54b2ddbeb0498dd0ac9b01a73b,9cfac7ea077e9c54b2ddbeb0498dd0ac9b01a73b,"Rename CryptoResource to DecryptionResource

PiperOrigin-RevId: 243237265"
andrewlewis,2019-04-12 01:12:55,https://api.github.com/repos/google/ExoPlayer/git/commits/53934c13b2800cdcc49c7f3df5005b0a9b3d7943,53934c13b2800cdcc49c7f3df5005b0a9b3d7943,"Select non-primary tunneling decoder

Issue: #3100
Issue: #5547
PiperOrigin-RevId: 243181217"
ojw28,2019-04-11 16:36:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b84c51434f7750924b6d7a6a5ef9bcd13c818812,b84c51434f7750924b6d7a6a5ef9bcd13c818812,"Deprecate ActionFile and simplify upgrading

PiperOrigin-RevId: 243085292"
ojw28,2019-04-10 17:15:45,https://api.github.com/repos/google/ExoPlayer/git/commits/112117a1ac016db57e78f66e56b228d4d01ff537,112117a1ac016db57e78f66e56b228d4d01ff537,"Reorder DownloadManager methods

Put methods into a more sensible order (the same order as
in the switch statement, which is a more natural order with
e.g. initialize coming first and release coming last).

PiperOrigin-RevId: 242891742"
ojw28,2019-04-10 17:15:27,https://api.github.com/repos/google/ExoPlayer/git/commits/9779d71a1d7f6d9e009b8816d820a1c8d07935c7,9779d71a1d7f6d9e009b8816d820a1c8d07935c7,"Fix stopping downloads

- Changed startDownloads/stopDownloads back to their previous behavior
  of starting and stopping all downloads at the manager level.
- Made setManualStopReason methods for the new case of setting a manual
  stop reason or some or all downloads.
- Added plumbing to specify an initial manual stop reason when adding a
  new download, without also overwriting the manual stop reasons of all
  other preexisting downloads. Using the value is left as a TODO pending
  a bit of further cleanup that'll make it easier.

PiperOrigin-RevId: 242891688"
ojw28,2019-04-10 14:49:01,https://api.github.com/repos/google/ExoPlayer/git/commits/68993f233d9c9acd43a20066f411ff3af6515bae,68993f233d9c9acd43a20066f411ff3af6515bae,"Improve DownloadNotificationHelper

- Remove completed downloads from progress notification.
- Treat restarting as a downloading, When there are both
remove and download tasks ongoing, we prefer to show a
download notification to a remove one. A restarting task
encapsulates is basically a (remove+download) task. Given
our preference, we should treat it as a download rather
than as a removal.

PiperOrigin-RevId: 242867228"
tonihei,2019-04-10 12:47:25,https://api.github.com/repos/google/ExoPlayer/git/commits/c830c8dc634d643271cd6e2c13b15e6598339098,c830c8dc634d643271cd6e2c13b15e6598339098,"Use LoadErrorHandlingPolicy.getRetryDelayMsFor for DASH/SS manifest loads.

Both manifest loads currently use the default retry delay although a
LoadErrorHandlingPolicy is provided to the MediaSource.

PiperOrigin-RevId: 242852672"
ojw28,2019-04-10 12:32:52,https://api.github.com/repos/google/ExoPlayer/git/commits/30beb9b30054e076d75eb7aad75727c284d97270,30beb9b30054e076d75eb7aad75727c284d97270,"Add DownloadAction merge tests

PiperOrigin-RevId: 242851294"
erdemguven,2019-04-10 10:37:56,https://api.github.com/repos/google/ExoPlayer/git/commits/8688bd2d8885c381853938325b800b26663a6821,8688bd2d8885c381853938325b800b26663a6821,"Rename DownloadState to Download

PiperOrigin-RevId: 242839480"
tonihei,2019-04-10 09:16:08,https://api.github.com/repos/google/ExoPlayer/git/commits/f0cd144baf8705e601e87e67cbb76d73fc36ba9e,f0cd144baf8705e601e87e67cbb76d73fc36ba9e,"Update UI translations.

We have new strings for track role types.

PiperOrigin-RevId: 242829944"
ojw28,2019-04-09 19:03:32,https://api.github.com/repos/google/ExoPlayer/git/commits/3f565c33befdbd260958b0a0eb1e2d9468efaf82,3f565c33befdbd260958b0a0eb1e2d9468efaf82,"Simplify offline Requirements

- Remove NETWORK_TYPE_NOT_ROAMING and NETWORK_TYPE_METERED
  because JobScheduler doesn't support them, and they're
  probably not useful to many people (data when roaming is
  normally enabled/disabled at the OS level, and restricting
  to *only* metered networks seems niche)
- Convert network requirements proper flags
- Stop persisting requirements in DownloadIndex. The direction
  we're headed to solve the manager start/stop problem is
  going to involve state in DownloadManager determining whether
  downloads actually start, and if we're doing that then it's
  no worse to do it for this as well

PiperOrigin-RevId: 242713196"
tonihei,2019-04-09 17:12:07,https://api.github.com/repos/google/ExoPlayer/git/commits/9e6f9ee9dd090aac086f246e59c736e6155c1353,9e6f9ee9dd090aac086f246e59c736e6155c1353,"Remove DataSpec self-links.

We usually avoid linking to the same page. Replacing all {@link DataSpec}
with just ""data spec"" accordingly.

PiperOrigin-RevId: 242689537"
AquilesCanta,2019-04-09 16:56:55,https://api.github.com/repos/google/ExoPlayer/git/commits/9779b34885eeb9df3d50afc2fc18ac33c243e39d,9779b34885eeb9df3d50afc2fc18ac33c243e39d,"Fix Parcelable.Creator#newArray implementations

PiperOrigin-RevId: 242686312"
ojw28,2019-04-09 12:06:06,https://api.github.com/repos/google/ExoPlayer/git/commits/d3b63a97ad731a66c4629083fa97bfbe774fb654,d3b63a97ad731a66c4629083fa97bfbe774fb654,"Remove DownloadAction serialization

Implement Parcelable instead, which is a more intented way of
passing structured data via Intents.

PiperOrigin-RevId: 242646441"
tonihei,2019-04-09 09:46:17,https://api.github.com/repos/google/ExoPlayer/git/commits/14d40b0faf3f6e0313eed4bcd0d1cb11f4b6ed05,14d40b0faf3f6e0313eed4bcd0d1cb11f4b6ed05,"Fix test which is relying on wrong Robolectric behavior.

Robolectric calls messages posted to the main thread immediately inline. This
will change in the upcoming release and will break tests implicitly relying
on that behavior.

Update ConcatenatingMediaSourceTest to actually wait for the posted message.

PiperOrigin-RevId: 242631531"
ojw28,2019-04-08 23:26:07,https://api.github.com/repos/google/ExoPlayer/git/commits/18dcad9b8d825ed1afe56985b3ea065376c20989,18dcad9b8d825ed1afe56985b3ea065376c20989,"Simplify DownloadState to contain its DownloadAction

This makes sense now that DownloadAction is only for downloading,
and not also for removal.

PiperOrigin-RevId: 242561575"
AquilesCanta,2019-04-08 16:28:18,https://api.github.com/repos/google/ExoPlayer/git/commits/73acdcf1e295af3fa83c7fde3d1cd6678996b446,73acdcf1e295af3fa83c7fde3d1cd6678996b446,"Add a flag to enable the preemptive 608 track in HLS

By passing false, users can disable the preemptive 608 track.

Issue:#5736
PiperOrigin-RevId: 242476274"
ojw28,2019-04-08 15:13:46,https://api.github.com/repos/google/ExoPlayer/git/commits/9a03e73b7a6f0d80f48e5f3b5d35d839192db502,9a03e73b7a6f0d80f48e5f3b5d35d839192db502,"Remove ActionFile serialization, which is no longer used

PiperOrigin-RevId: 242465135"
ojw28,2019-04-08 14:41:20,https://api.github.com/repos/google/ExoPlayer/git/commits/e7d717b96c8530fb7d78b09304e44e262a050859,e7d717b96c8530fb7d78b09304e44e262a050859,"Sanitize naming of keys variable.

PiperOrigin-RevId: 242460786"
ojw28,2019-04-08 14:40:49,https://api.github.com/repos/google/ExoPlayer/git/commits/a0c21461aaa8823a101f753bc465e4696a4578a1,a0c21461aaa8823a101f753bc465e4696a4578a1,"Ensure getAllDownloadStates order is stable

HashMap.values does not guarantee a stable order, but our tests
assert that the order is stable. It's probably a nice property
that the order is the same as that in which downloads are added,
so this change makes the order stable, with that order.

A future change will likely improve the way this works, by
changing the internal thread ""downloads"" variable to have type
ArrayList<Download>, at which point the internal thread can just
pass a read-only copy of its list to the main thread whenever a
state changes.

PiperOrigin-RevId: 242460725"
marcbaechinger,2019-04-08 14:31:36,https://api.github.com/repos/google/ExoPlayer/git/commits/8b766ba4b8a8ac1eeaf853877372efbab87e95d4,8b766ba4b8a8ac1eeaf853877372efbab87e95d4,"Use FLAG_UPDATE_CURRENT for PendingIntents of playback commands.

ISSUE: #5734
PiperOrigin-RevId: 242459668"
ojw28,2019-04-08 14:15:11,https://api.github.com/repos/google/ExoPlayer/git/commits/47601980d95d7748c053cfd9bb6abcd6e8240591,47601980d95d7748c053cfd9bb6abcd6e8240591,"Use DownloadAction.id properly

- Fix ID being dropped when DownloadAction is serialized and
  de-serialized as it's passed to DownloadService
- Properly set DownloadAction.id when building an action from
  a DownloadState
- Make ID a required constructor argument. Else it's too easy
  to not propagate it by accident.

PiperOrigin-RevId: 242457831"
andrewlewis,2019-04-08 13:46:02,https://api.github.com/repos/google/ExoPlayer/git/commits/401e20d9c8caf5f96e4ff2651cd14f46f1c35517,401e20d9c8caf5f96e4ff2651cd14f46f1c35517,"Signal fallback via renderer constructor

Remove MediaCodecSelector.DEFAULT_WITH_FALLBACK, as codec selectors
will need to be able to return a list of decoder infos even when not
using fallback in a later change. Instead signal that fallback should
be used via a renderer constructor.

Fallback is always disabled for audio.

PiperOrigin-RevId: 242454172"
marcbaechinger,2019-04-08 13:34:57,https://api.github.com/repos/google/ExoPlayer/git/commits/baf00406c029a9129d98127a1a137ad40e0870c0,baf00406c029a9129d98127a1a137ad40e0870c0,"Provide option to include next/prev button in lock screen/compact mode.

Issue: #5616
PiperOrigin-RevId: 242452686"
tonihei,2019-04-08 13:07:03,https://api.github.com/repos/google/ExoPlayer/git/commits/a6d52d4ae723e3ee87bd3a4bc25412c16fc22c05,a6d52d4ae723e3ee87bd3a4bc25412c16fc22c05,"Update initial bitrate estimates.

PiperOrigin-RevId: 242449883"
tonihei,2019-04-08 13:00:25,https://api.github.com/repos/google/ExoPlayer/git/commits/2d7b9d876f8b01b26eaa97cad1ff68c58ba3d1cc,2d7b9d876f8b01b26eaa97cad1ff68c58ba3d1cc,"Allow ContainerMediaChunks to provide their own TrackOutputProvider.

Adding a protected method for that allows to supply a customized
TrackOutputProvider to the ExtractorWrapper used by the ContainerMediaChunk
(e.g. for logging purposes).

The alternative would be to provide a  TrackOutputProvider through the
ChunkSampleStream constructor, but the extra initialization taking place
in the ChunkSampleStream constructor would need to move somewhere else and
some methods of BaseMediaChunkOutput would need to move to the
TrackOutputProvider interface. This seems too much effort for niche
customization case.

PiperOrigin-RevId: 242448776"
ojw28,2019-04-08 12:20:03,https://api.github.com/repos/google/ExoPlayer/git/commits/66e416b61537ab7af0891c4ecb0b1674eacd7be3,66e416b61537ab7af0891c4ecb0b1674eacd7be3,"Fix bug when caching from non-zero position

The position should be subtracted from the total content length
retrieved from the cache in this case, both for iteration and for
filling out counters.contentLength (for the latter, note not
doing it this way is inconsistent with what happens when dataSpec
length is set to a known value).

PiperOrigin-RevId: 242445034"
ojw28,2019-04-08 12:10:13,https://api.github.com/repos/google/ExoPlayer/git/commits/0daaba443c3347068db8ac7a868ed69928263093,0daaba443c3347068db8ac7a868ed69928263093,"Get rid of DownloadState.STATE_REMOVED

It's a transient state whose only use is when passing a removed
download to onDownloadStateChanged. It's a bit strange to have it
as a proper state, since we end up asserting that it's an invalid
value in other places.

This change adds an explicit onDownloadRemoved, which allows
removal of the transient STATE_REMOVED, related assertions, and
uncertainty when dealing with an @State variable whether it's
necessary to handle it being STATE_REMOVED.

PiperOrigin-RevId: 242444128"
ojw28,2019-04-08 11:21:23,https://api.github.com/repos/google/ExoPlayer/git/commits/925dd5aa122cc8f1c6cdbb026a0d8f7e463b0238,925dd5aa122cc8f1c6cdbb026a0d8f7e463b0238,"Fix most remaining issues with DownloadManager threading

PiperOrigin-RevId: 242439330"
erdemguven,2019-04-08 11:00:48,https://api.github.com/repos/google/ExoPlayer/git/commits/c17c7221589b502a53ccdfcddaa38a46e9b1eecc,c17c7221589b502a53ccdfcddaa38a46e9b1eecc,"Make DataIndex accessing code run on internal thread

This is the last cl of a series of cls that will convert DownloadManager
threading model as public methods post actions on an internal thread
which then do the work.

PiperOrigin-RevId: 242437229"
matamegger,2019-04-12 08:49:48,https://api.github.com/repos/google/ExoPlayer/git/commits/55154ad475eb3f498fcf31a7430bf6354b526fdb,55154ad475eb3f498fcf31a7430bf6354b526fdb,Allow hex format tags when parsing url templates
vigneshvg,2019-04-05 19:21:33,https://api.github.com/repos/google/ExoPlayer/git/commits/3169b140fc5cceba848fa1bd6a103645e873c115,3169b140fc5cceba848fa1bd6a103645e873c115,"vp9_extension: Use the vp9_codec_control macro

This is part of the public API and the underscored versions
weren't intended to be used outside the library.

Also updating the external instructions to checkout the version
of libvpx that supports this macro for this particular constant.

#codehealth

PiperOrigin-RevId: 242170926"
AquilesCanta,2019-04-05 13:00:34,https://api.github.com/repos/google/ExoPlayer/git/commits/be61715517a21b1114cf7deaed647aecd4bdd20d,be61715517a21b1114cf7deaed647aecd4bdd20d,"Fix Cast demo app

Broken in https://github.com/google/ExoPlayer/commit/399aa706a7e570e8ed7ca93b54beaae6ee3dac91

PiperOrigin-RevId: 242112068"
tonihei,2019-04-05 10:12:56,https://api.github.com/repos/google/ExoPlayer/git/commits/346c72c00e3af146f5f445fc18cad61eeec82e72,346c72c00e3af146f5f445fc18cad61eeec82e72,"Move PriorityTaskManager from DefaultLoadControl to SimpleExoPlayer.

The priority task manager only needs to listen to loading state changes and
is independent of the rest of DefaultLoadControl. This also fixes problems
where the player stops loading without consultin the LoadControl.

PiperOrigin-RevId: 242098374"
andrewlewis,2019-04-05 09:29:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d6244773eceb1591b09e2d776f42770e87adbbfd,d6244773eceb1591b09e2d776f42770e87adbbfd,"Add back missing libvpx build instructions

PiperOrigin-RevId: 242094027"
ojw28,2019-04-03 21:56:06,https://api.github.com/repos/google/ExoPlayer/git/commits/9471d61183fa5f1ddadeaf031cf890e777880a8f,9471d61183fa5f1ddadeaf031cf890e777880a8f,"Fix ExoPlayer's demo app

PiperOrigin-RevId: 241811732"
erdemguven,2019-04-03 18:41:22,https://api.github.com/repos/google/ExoPlayer/git/commits/37bab0a98de45a9ad3bacf96cb83dc21a7b03c30,37bab0a98de45a9ad3bacf96cb83dc21a7b03c30,"Temporally make DataIndex accessing code run on main thread

This is the second cl of a series of cls that will convert DownloadManager
threading model as public methods post actions on an internal thread
which then do the work.

PiperOrigin-RevId: 241773765"
AquilesCanta,2019-04-03 18:26:17,https://api.github.com/repos/google/ExoPlayer/git/commits/9c0819001dc111dfc840ee28537e16625ee762f3,9c0819001dc111dfc840ee28537e16625ee762f3,"Fix ExoPlayer's demo app gradle build

Broken by https://github.com/google/ExoPlayer/commit/399aa706a7e570e8ed7ca93b54beaae6ee3dac91.

PiperOrigin-RevId: 241770676"
erdemguven,2019-04-03 17:52:03,https://api.github.com/repos/google/ExoPlayer/git/commits/27884c70f88ea18a11678b4ec40f105e743ff5d2,27884c70f88ea18a11678b4ec40f105e743ff5d2,"Make DownloadState counters mutable

PiperOrigin-RevId: 241763220"
marcbaechinger,2019-04-03 17:46:57,https://api.github.com/repos/google/ExoPlayer/git/commits/b10f4023f09193f2e68ff76b29ef061f4aefe0a1,b10f4023f09193f2e68ff76b29ef061f4aefe0a1,"handle meta atom as a full box when parsing mp4

Issues: #5698, #5694
PiperOrigin-RevId: 241762106"
AquilesCanta,2019-04-03 10:19:50,https://api.github.com/repos/google/ExoPlayer/git/commits/95f65e5258007057b1c5cb893c9fb6aa47798f7d,95f65e5258007057b1c5cb893c9fb6aa47798f7d,"Add abstract superclass for Crypto resources

Necessary for implementing scheme-independant resource management.

Example: A media source needs to have ownership of a crypto resource
while samples are in buffer (but not yet in the renderer).
PiperOrigin-RevId: 241698575"
ojw28,2019-04-03 03:29:19,https://api.github.com/repos/google/ExoPlayer/git/commits/399aa706a7e570e8ed7ca93b54beaae6ee3dac91,399aa706a7e570e8ed7ca93b54beaae6ee3dac91,"Remove usages of the widget package and migrate to new packages.

PiperOrigin-RevId: 241656157"
erdemguven,2019-04-03 00:24:07,https://api.github.com/repos/google/ExoPlayer/git/commits/8480a4b44d37f442282c141a5ce5ffd12a076f08,8480a4b44d37f442282c141a5ce5ffd12a076f08,"Add Downloader.getCounters method

PiperOrigin-RevId: 241636860"
ojw28,2019-04-02 16:42:06,https://api.github.com/repos/google/ExoPlayer/git/commits/ee7bf4b0ee5729e2f6200cc60b610def02af6497,ee7bf4b0ee5729e2f6200cc60b610def02af6497,"Make callback Handler instantiation consistent

Most of our components that have Handler instances for calling
back to application code instantiate the Handler using Util.getLooper
in the constructor. This makes the two components that do
something else consistent with that model.

PiperOrigin-RevId: 241545575"
ojw28,2019-04-02 16:36:52,https://api.github.com/repos/google/ExoPlayer/git/commits/7c265dfb3a1d485ab794823f3e2a7344b20b5a47,7c265dfb3a1d485ab794823f3e2a7344b20b5a47,"Detect external surround sound on Amazon devices

PiperOrigin-RevId: 241544595"
erdemguven,2019-04-02 16:30:24,https://api.github.com/repos/google/ExoPlayer/git/commits/9b064fb9d5aaba215e6beafc3e3b5e09f301f88a,9b064fb9d5aaba215e6beafc3e3b5e09f301f88a,"Use CachingCounters in SegmentDownloader

PiperOrigin-RevId: 241543543"
erdemguven,2019-04-02 14:34:18,https://api.github.com/repos/google/ExoPlayer/git/commits/d5b19694faca3ecb73c40601760ddcac564f4615,d5b19694faca3ecb73c40601760ddcac564f4615,"Add percentage field to CacheUtil.CachingCounters

PiperOrigin-RevId: 241524766"
ojw28,2019-04-02 14:23:38,https://api.github.com/repos/google/ExoPlayer/git/commits/9aacef47ad1690bf4660133aab172c7fe136e03c,9aacef47ad1690bf4660133aab172c7fe136e03c,"Allow TrackSelectionDialog to indicate whether it has any content

PiperOrigin-RevId: 241523313"
ojw28,2019-04-02 10:37:57,https://api.github.com/repos/google/ExoPlayer/git/commits/42b641221c9cb72c5058769bf84d7e7583fd50ea,42b641221c9cb72c5058769bf84d7e7583fd50ea,"Provide flag to disable throwing of cache initialization exceptions

PiperOrigin-RevId: 241497141"
andrewlewis,2019-04-01 19:55:48,https://api.github.com/repos/google/ExoPlayer/git/commits/9dc22c3086590bd36f67ec2c6ced0b1d2f7b4865,9dc22c3086590bd36f67ec2c6ced0b1d2f7b4865,"Enable HDMV DTS stream detection if a flag is set

Issue: #5330
PiperOrigin-RevId: 241381723"
marcbaechinger,2019-04-01 18:08:17,https://api.github.com/repos/google/ExoPlayer/git/commits/2dc07fc4614244788f515be17d0cc919ed2829c7,2dc07fc4614244788f515be17d0cc919ed2829c7,"assert userAgent is not empty when constructing a DefaultHttpDataSourceFactory

Issue: #5706
PiperOrigin-RevId: 241360166"
ojw28,2019-04-01 18:05:13,https://api.github.com/repos/google/ExoPlayer/git/commits/e8b0d489eb8c67a5846142d34f1b54a3984f2b67,e8b0d489eb8c67a5846142d34f1b54a3984f2b67,"Rename Lib Opus in ExoV2 to avoid the namespace collision between ExoV1 and ExoV2's version of libopusJNI.so

PiperOrigin-RevId: 241359424"
marcbaechinger,2019-04-01 15:26:29,https://api.github.com/repos/google/ExoPlayer/git/commits/e612511afc2cf99b0979ac358edf9d523bca1ab6,e612511afc2cf99b0979ac358edf9d523bca1ab6,"take byte offset into account when unsynchronizing an id3 frame

Issue #5673

PiperOrigin-RevId: 241328598"
tonihei,2019-04-01 14:45:02,https://api.github.com/repos/google/ExoPlayer/git/commits/5fd4fddfacd5af99fb39c47f220e85742deefb6b,5fd4fddfacd5af99fb39c47f220e85742deefb6b,"Use system Locale language to select audio track.

If no track matches the preferred language or no preferred language is provided,
use the system Locale language as the next decision criterion.

PiperOrigin-RevId: 241322703"
AquilesCanta,2019-04-01 13:22:24,https://api.github.com/repos/google/ExoPlayer/git/commits/129a64c477398517ac0bc4b21dfbf63066224123,129a64c477398517ac0bc4b21dfbf63066224123,"Use getItemIds to get the actual size of the Cast media queue

Issue:#4964
PiperOrigin-RevId: 241311763"
ojw28,2019-04-01 19:31:39,https://api.github.com/repos/google/ExoPlayer/git/commits/334da7deb9a8b57ae7e8adc13415aa862ae7d1cf,334da7deb9a8b57ae7e8adc13415aa862ae7d1cf,"Merge pull request #5390 from zsmatyas:dev-v2

PiperOrigin-RevId: 241308265"
ojw28,2019-03-31 22:40:58,https://api.github.com/repos/google/ExoPlayer/git/commits/592b5eafee3613646f0a8e6bfffd3eec6beef5a4,592b5eafee3613646f0a8e6bfffd3eec6beef5a4,"Support multiple CC channels in DASH

Issue: #5656
PiperOrigin-RevId: 241235377"
ojw28,2019-03-29 16:10:03,https://api.github.com/repos/google/ExoPlayer/git/commits/5db33deef4aaff76ec22c41390e738e63a5ae6c7,5db33deef4aaff76ec22c41390e738e63a5ae6c7,"HLS: Fix playlist tracker bundle lookup

As of https://github.com/google/ExoPlayer/commit/99f89132c219b52b991b4614322fa7af6208c906 an identity check isn't sufficient for the lookup.

PiperOrigin-RevId: 240989848"
ojw28,2019-03-29 13:48:17,https://api.github.com/repos/google/ExoPlayer/git/commits/99f89132c219b52b991b4614322fa7af6208c906,99f89132c219b52b991b4614322fa7af6208c906,"Remove HlsUrl and introduce HlsMasterPlaylist.mediaPlaylistUrls

- This removes the need for Variant and Rendition to have a common
  base class, allowing the url field to be marked as @Nullable in
  Rendition but not in Variant.
- The addition of mediaPlaylistUrls is needed for the new StreamKey
  indexing for HLS. It's also convenient in a couple of places (e.g.
  HlsDownloader), where a list of all media playlist URLs is needed.
- Lots of places where HlsUrl was passed only needed the actual
  URL (not the Format, which is the other piece of HlsUrl). Passing
  just the URL is a little simpler, and resolves some of the naming
  confusion.

Issue: #5596
Issue: #2600
PiperOrigin-RevId: 240970466"
ojw28,2019-03-29 13:13:24,https://api.github.com/repos/google/ExoPlayer/git/commits/2623b4b3820251409d0bf17f8fe64923864087dd,2623b4b3820251409d0bf17f8fe64923864087dd,"Pre-resolve HlsUrl urls

This is to make it possible to use equality of HlsUrl.url fields
to determine whether two HlsUrls point at the same media playlist.
This doesn't work currently because it's possible to mix absolute
and relative urls, which will not be equal until after the relative
url is resolved against the playlist baseUrl.

Issue: #5596
Issue: #2600
PiperOrigin-RevId: 240966503"
tonihei,2019-03-28 17:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/32924e3f178cd76dbf0ccbe1202618d10701fffb,32924e3f178cd76dbf0ccbe1202618d10701fffb,"Use role flags in DefaultTrackNameProvider.

Also make combination of language and role flags the default over the label,
as it's more readable and auto-translated into other languages.

PiperOrigin-RevId: 240801070"
tonihei,2019-03-28 15:12:58,https://api.github.com/repos/google/ExoPlayer/git/commits/28ea31cd4c0e973b34c312478ed84241a90a38d2,28ea31cd4c0e973b34c312478ed84241a90a38d2,"Use Closeable interface for DownloadStateCursor to simplify closing.

PiperOrigin-RevId: 240775823"
tonihei,2019-03-28 14:58:49,https://api.github.com/repos/google/ExoPlayer/git/commits/e8cf67c0cdf17fe0ee2c96b76b12e84a31962d5b,e8cf67c0cdf17fe0ee2c96b76b12e84a31962d5b,"Allow simplified custom adaptive track selection factories.

Custom factories currently need to copy most of the code in the
AdaptiveTrackSelection.Factory to make use of the same functionality.
Simplify this by allowing to overwrite the factory.

PiperOrigin-RevId: 240773271"
tonihei,2019-03-28 14:23:20,https://api.github.com/repos/google/ExoPlayer/git/commits/bb48dc99169d18467e00f3aa46f84faf85e82133,bb48dc99169d18467e00f3aa46f84faf85e82133,"Close cursor in DownloadManager.

Not closing the cursor crashes the demo app when in run in StrictMode.

PiperOrigin-RevId: 240768493"
erdemguven,2019-03-28 10:32:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b1a13f96513b01a3b81816ca7b07d7305f47418d,b1a13f96513b01a3b81816ca7b07d7305f47418d,"Create internal methods that will run on internal thread

This is the first of a series of cls that will convert DownloadManager
threading model as public methods post actions on an internal thread
which then do the work.

PiperOrigin-RevId: 240743400"
AquilesCanta,2019-03-28 10:20:33,https://api.github.com/repos/google/ExoPlayer/git/commits/62f719f3ee0a2fb883f775fd73dc8159f665dd4a,62f719f3ee0a2fb883f775fd73dc8159f665dd4a,"Remove some long-deprecated DefaultDrmSessionManager constructors

PiperOrigin-RevId: 240742207"
ojw28,2019-03-27 20:08:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0810fe9159fe4d11e18b8513007c6415aed85533,0810fe9159fe4d11e18b8513007c6415aed85533,"Remove ""variant"" terminology from HlsChunkSource

HlsChunkSource may also be downloading segments from demuxed
renditions, which are not variants.

PiperOrigin-RevId: 240625139"
ojw28,2019-03-27 20:01:06,https://api.github.com/repos/google/ExoPlayer/git/commits/65bab95f72bfbe2c36d44c4f4cb8f66e4432de82,65bab95f72bfbe2c36d44c4f4cb8f66e4432de82,"Add video and closed caption renditions to HlsMasterPlaylist

Still skipping any renditions that have a null URL, which means that
closedCaptions in particular is always empty. This restriction will
be removed in a subsequent change, which will also remove muxedAudioFormat
and muxedAudioCaptions from HlsMasterPlaylist and instead derive them
from the Variant and Rendition information in HlsMediaPeriod.

Issue: #5596
Issue: #2600
PiperOrigin-RevId: 240623500"
ojw28,2019-03-27 15:42:31,https://api.github.com/repos/google/ExoPlayer/git/commits/6e6df6a2f014956b8c8b2e877e3e6335e2d2ec5b,6e6df6a2f014956b8c8b2e877e3e6335e2d2ec5b,"Improve DownloadService notification documentation

The one functional change here is to require subclasses to implement getForegroundNotification. It seems easier and less error prone to
force developers to implement it than it does to document the cases
in which they need to override it (which is most cases).

PiperOrigin-RevId: 240566737"
erdemguven,2019-03-27 14:53:14,https://api.github.com/repos/google/ExoPlayer/git/commits/facd32e65ebbb0dd65d5f45ea4247360c8ad53c8,facd32e65ebbb0dd65d5f45ea4247360c8ad53c8,"Remove DownloadAction.createRemoveAction

PiperOrigin-RevId: 240557315"
erdemguven,2019-03-26 22:45:03,https://api.github.com/repos/google/ExoPlayer/git/commits/d4f5c9c721d5bba4a35c8c979633d2b7ddeb6148,d4f5c9c721d5bba4a35c8c979633d2b7ddeb6148,"Remove DownloadHelper.getRemoveAction

PiperOrigin-RevId: 240444051"
ojw28,2019-03-26 22:27:40,https://api.github.com/repos/google/ExoPlayer/git/commits/9d99f92146edb950835e2995138246bf245d8ca5,9d99f92146edb950835e2995138246bf245d8ca5,"Improve DownloadService action documentation

PiperOrigin-RevId: 240440477"
ojw28,2019-03-26 20:49:36,https://api.github.com/repos/google/ExoPlayer/git/commits/e3a8429ee299c2aea275e587c6286b0bdf894745,e3a8429ee299c2aea275e587c6286b0bdf894745,"More faithfully parse content of HLS master playlists

- Split HlsUrl into Rendition and Variant
- Add Rendition/Variant specific information to the new types

Issue: #5596
PiperOrigin-RevId: 240419763"
erdemguven,2019-03-26 17:31:28,https://api.github.com/repos/google/ExoPlayer/git/commits/ae5e5f7efc41d94261a35e3ffad428270c09bc87,ae5e5f7efc41d94261a35e3ffad428270c09bc87,"Stop using remove DownloadActions in DownloadManager

PiperOrigin-RevId: 240376409"
erdemguven,2019-03-26 16:31:15,https://api.github.com/repos/google/ExoPlayer/git/commits/709a712a5f1e1897c056ec0b1112e34d6fd679b8,709a712a5f1e1897c056ec0b1112e34d6fd679b8,"DownloadAction custom id

PiperOrigin-RevId: 240363716"
ojw28,2019-03-26 15:06:19,https://api.github.com/repos/google/ExoPlayer/git/commits/30d66f50315ec0ac972b1cccadccfd0b26e48695,30d66f50315ec0ac972b1cccadccfd0b26e48695,"Rollback of https://github.com/google/ExoPlayer/commit/be69d5b747ca1f12129ac061cbb259ec45470ef8

Issue: #5596

This arguably made a worse problem than it solved, and also I think subtly broken HLS
downloads by changing which renditions HlsMasterPlaylist.copy would retain in some
cases. Reverting as a mini step toward removing smart logic from the HLS playlist parser.

*** Original commit ***

Expand check for muxed audio media tags to include uris that match variants

Issue:#5313

***

PiperOrigin-RevId: 240348969"
erdemguven,2019-03-26 14:37:43,https://api.github.com/repos/google/ExoPlayer/git/commits/9220b18bdc4494f01b18958d963d49439581d9b2,9220b18bdc4494f01b18958d963d49439581d9b2,"Fix parameter order in JobDispatcherScheduler.schedule()

Issue: #5613
PiperOrigin-RevId: 240344666"
ojw28,2019-03-26 13:11:55,https://api.github.com/repos/google/ExoPlayer/git/commits/07e3509dd9e4fbf2077a8cf3222efe68b73d00c2,07e3509dd9e4fbf2077a8cf3222efe68b73d00c2,"Support providing all keys via EXT-X-SESSION-KEY tags

PiperOrigin-RevId: 240333415"
erdemguven,2019-03-26 12:51:41,https://api.github.com/repos/google/ExoPlayer/git/commits/c04f5b9c5d8378e184cd01116daf9b150621516e,c04f5b9c5d8378e184cd01116daf9b150621516e,"Add DownloadManager.removeDownload method

PiperOrigin-RevId: 240330799"
erdemguven,2019-03-26 11:20:13,https://api.github.com/repos/google/ExoPlayer/git/commits/3919f3843d55197996784de3c060584122e28b34,3919f3843d55197996784de3c060584122e28b34,"Make DownloadManager use DownloadIndex

PiperOrigin-RevId: 240320220"
ojw28,2019-03-26 11:04:01,https://api.github.com/repos/google/ExoPlayer/git/commits/e4b49477ec74f83f0369e9d25cae8a46889f3361,e4b49477ec74f83f0369e9d25cae8a46889f3361,"Some nullability cleanup for HLS playlists

PiperOrigin-RevId: 240318686"
tonihei,2019-03-25 16:03:33,https://api.github.com/repos/google/ExoPlayer/git/commits/679b628326ab128bc03ea15f6c157da76b2132a2,679b628326ab128bc03ea15f6c157da76b2132a2,"Add experimental option for multiple parallel adaptive track selections.

If enabled, DefaultTrackSelector returns multiple groups with more than one
track. AdaptiveTrackSelection then decides on the order in which the tracks
are changed such that the BandwidthProvider for each selection can figure out
the allocated bandwidth.

PiperOrigin-RevId: 240150206"
AquilesCanta,2019-03-25 14:18:09,https://api.github.com/repos/google/ExoPlayer/git/commits/32347362f452c83d28021a92b578d15f6666dc23,32347362f452c83d28021a92b578d15f6666dc23,"Select text track matching selected audio language when selecting forced text tracks

PiperOrigin-RevId: 240133676"
ojw28,2019-03-25 12:30:30,https://api.github.com/repos/google/ExoPlayer/git/commits/e91eec7cf8e482e52227ed6f26ebc20fa758f227,e91eec7cf8e482e52227ed6f26ebc20fa758f227,"Make DownloadThread extend Thread

PiperOrigin-RevId: 240120782"
tonihei,2019-03-25 11:35:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b0bb6ec8a5b5ba0e4645244fa517830264f66b80,b0bb6ec8a5b5ba0e4645244fa517830264f66b80,"Allow to set selection reason and data when specifying an override.

It's currently very difficult to actually set a reason for track selection
triggered by a SelectionOverride. It would require creating a new custom
TrackSelection.Factory where the reason gets injected somehow before the
override is specified on the player.

Simplify this whole procedure by allowing to set the reason directly and
forward this reason to all fixed selections created based on this override.

PiperOrigin-RevId: 240114942"
erdemguven,2019-03-25 10:37:35,https://api.github.com/repos/google/ExoPlayer/git/commits/6f9d33dbd3be68a31ce32bc4d04594d1aafbdbf8,6f9d33dbd3be68a31ce32bc4d04594d1aafbdbf8,"Add DefaultDownloadIndex setManualStopReason variant for single download

PiperOrigin-RevId: 240108843"
tonihei,2019-03-25 10:10:27,https://api.github.com/repos/google/ExoPlayer/git/commits/afd9014b823a3ff194a6f410cefe4bed53280693,afd9014b823a3ff194a6f410cefe4bed53280693,"Ignore AC-3 tracks with fscod=3.

3 (""11"") is the reserved code for fscod in AC3. The spec says that ""If the
reserved code is indicated, the decoder should not attempt to decode audio and
should mute.""

We currently throw an exception as we try to access an array with an invalid
index. Now ignoring the track instead by invalidating the format.

Issue:#5638
PiperOrigin-RevId: 240106255"
tonihei,2019-03-26 10:40:14,https://api.github.com/repos/google/ExoPlayer/git/commits/5da4c67c8ab3a657047b64aa8beef3213b7dd7cb,5da4c67c8ab3a657047b64aa8beef3213b7dd7cb,"Merge pull request #5303 from DolbyLaboratories:dev-v2-ac4

PiperOrigin-RevId: 239957730"
ojw28,2019-03-22 19:41:25,https://api.github.com/repos/google/ExoPlayer/git/commits/77d597de5f1565419ec9ec7ada0633379b15b1b3,77d597de5f1565419ec9ec7ada0633379b15b1b3,"Parse CHARACTERISTICS attribute for EXT-X-MEDIA tags

PiperOrigin-RevId: 239844963"
AquilesCanta,2019-03-22 16:43:19,https://api.github.com/repos/google/ExoPlayer/git/commits/cdd433acda1b8fd9f842f395473d71694f164418,cdd433acda1b8fd9f842f395473d71694f164418,"Disambiguate comment in Ac3Reader

PiperOrigin-RevId: 239810798"
tonihei,2019-03-22 13:13:34,https://api.github.com/repos/google/ExoPlayer/git/commits/e5aed73fbaf9a30900dd9f13a714d288d8dc68a7,e5aed73fbaf9a30900dd9f13a714d288d8dc68a7,"Switch format language tag to use full BCP 47 codes.

This allows to distinguish between regional variants and scripts.

We still need to normalize the language code itself to make track selection
independent of the whether 2 or 3 letter codes are used.

PiperOrigin-RevId: 239783115"
tonihei,2019-03-21 16:04:48,https://api.github.com/repos/google/ExoPlayer/git/commits/3543116da4486fd013229f762bf3ba86a30526e7,3543116da4486fd013229f762bf3ba86a30526e7,"Prevent seeking when ICY metadata is present.

Any seek map with non-zero offsets breaks playback with ICY metadata as
the metadata is no longer read from the correct position.

Issue:#5658
PiperOrigin-RevId: 239605839"
AquilesCanta,2019-03-21 14:51:22,https://api.github.com/repos/google/ExoPlayer/git/commits/b7299a1164c5358fcc8a8a09f2b7fc7465e41881,b7299a1164c5358fcc8a8a09f2b7fc7465e41881,"DefaultTrackSelector: make audio track selections before text

PiperOrigin-RevId: 239594105"
tonihei,2019-03-21 10:07:30,https://api.github.com/repos/google/ExoPlayer/git/commits/a989304a4d0f524fafcbc9919999b775d38eb7ad,a989304a4d0f524fafcbc9919999b775d38eb7ad,"Add missing thread verification to SimpleExoPlayer.release().

This call also needs to be made from the right thread to prevent messages
from getting lost and causing ANRs.

PiperOrigin-RevId: 239564573"
ojw28,2019-03-20 21:35:20,https://api.github.com/repos/google/ExoPlayer/git/commits/68ef1d3e97cbb45a34c83d1faf787a7da0d9134b,68ef1d3e97cbb45a34c83d1faf787a7da0d9134b,"Temporarily disable cache UID creation.

PiperOrigin-RevId: 239476751"
ojw28,2019-03-20 17:50:23,https://api.github.com/repos/google/ExoPlayer/git/commits/3abf5ed1433f423118bab7aa486e685eb4a58f49,3abf5ed1433f423118bab7aa486e685eb4a58f49,"Automated g4 rollback of changelist 239294713.

*** Reason for rollback ***

Trying to forward fix instead.

*** Original change description ***

Automated g4 rollback of changelist 237051112.

*** Original change description ***

Add SimpleCache deletion functionality

This is needed now that index data may be stored outside
of the cache directory.

***

***

PiperOrigin-RevId: 239429430"
AquilesCanta,2019-03-20 15:40:58,https://api.github.com/repos/google/ExoPlayer/git/commits/f7f500988378c4a854652fe3507dac6addb41134,f7f500988378c4a854652fe3507dac6addb41134,"Add workaround for PlayReady issue with setMediaDrmSession

PiperOrigin-RevId: 239403506"
ojw28,2019-03-20 23:28:26,https://api.github.com/repos/google/ExoPlayer/git/commits/a86a9137be5f0ed89de3d68f4c4800a7753cc881,a86a9137be5f0ed89de3d68f4c4800a7753cc881,"Merge pull request #5578 from szaboa:dev-v2-5529

PiperOrigin-RevId: 239398940"
ojw28,2019-03-20 11:13:14,https://api.github.com/repos/google/ExoPlayer/git/commits/448ca0cf7f7503e459ff7b428d1014bffc9bdc8a,448ca0cf7f7503e459ff7b428d1014bffc9bdc8a,"Sanitize internal parameter ordering in Format

This is a precursor to merging https://github.com/google/ExoPlayer/pull/5578

PiperOrigin-RevId: 239371046"
ojw28,2019-03-19 23:33:17,https://api.github.com/repos/google/ExoPlayer/git/commits/d775b9b4126fa0b920c08fdae89cafe437b12cf5,d775b9b4126fa0b920c08fdae89cafe437b12cf5,"Automated g4 rollback of changelist 237051112.

*** Original change description ***

Add SimpleCache deletion functionality

This is needed now that index data may be stored outside
of the cache directory.

***

PiperOrigin-RevId: 239294713"
andrewlewis,2019-03-19 10:14:54,https://api.github.com/repos/google/ExoPlayer/git/commits/35d82e1808566f9c39df9742add776bdcf0960f0,35d82e1808566f9c39df9742add776bdcf0960f0,"Upgrade IMA to 3.10.9

PiperOrigin-RevId: 239157535"
andrewlewis,2019-03-19 09:06:56,https://api.github.com/repos/google/ExoPlayer/git/commits/2b42f0d35af80af4ae14a290a7250b1a5c3e2693,2b42f0d35af80af4ae14a290a7250b1a5c3e2693,"Remove unnecessary check

PiperOrigin-RevId: 239149688"
ojw28,2019-03-19 04:24:15,https://api.github.com/repos/google/ExoPlayer/git/commits/8ffd7da890fcbe6d96d31db43746f4559c9d603a,8ffd7da890fcbe6d96d31db43746f4559c9d603a,"[libvpx] Add flag to experiment with the impact of input/output buffers

PiperOrigin-RevId: 239122083"
AquilesCanta,2019-03-18 21:53:29,https://api.github.com/repos/google/ExoPlayer/git/commits/c81c14ae86dc736eda72c45baf0c5fe423e5d125,c81c14ae86dc736eda72c45baf0c5fe423e5d125,"Work around lack of LA_URL attributes in PlayReady key requests init data

PiperOrigin-RevId: 239066912"
erdemguven,2019-03-18 20:08:37,https://api.github.com/repos/google/ExoPlayer/git/commits/b5e4523b584f8abcd054ededafd3aa3474f11229,b5e4523b584f8abcd054ededafd3aa3474f11229,"Remove index modifier methods from DownloadIndex interface

PiperOrigin-RevId: 239045412"
erdemguven,2019-03-18 18:00:43,https://api.github.com/repos/google/ExoPlayer/git/commits/d85ee01ae70f8702431e52c425a367e1343886b8,d85ee01ae70f8702431e52c425a367e1343886b8,"Convert DownloadManager.Listener methods no-op default methods

PiperOrigin-RevId: 239019504"
erdemguven,2019-03-18 16:40:47,https://api.github.com/repos/google/ExoPlayer/git/commits/d229e1f4051694d82ed13a8598c9a402bf3fb6ad,d229e1f4051694d82ed13a8598c9a402bf3fb6ad,"Add helper methods to check existence and delete ActionFiles

PiperOrigin-RevId: 239002281"
andrewlewis,2019-03-18 14:41:44,https://api.github.com/repos/google/ExoPlayer/git/commits/a5616cb552a4c07e03f848d1f35f44d85b4a0564,a5616cb552a4c07e03f848d1f35f44d85b4a0564,"Extract AV1 streams in DASH (fMP4/Matroska)

PiperOrigin-RevId: 238983394"
erdemguven,2019-03-18 11:03:43,https://api.github.com/repos/google/ExoPlayer/git/commits/3e4c15aa15410828753cfbf40f01d2847c9c7286,3e4c15aa15410828753cfbf40f01d2847c9c7286,"Add methods to DefaultDownloadIndex to set manual stop reason and not met requirements

PiperOrigin-RevId: 238960156"
ojw28,2019-03-15 17:32:12,https://api.github.com/repos/google/ExoPlayer/git/commits/2959b5f9c2a0c6b26345a1020f1b66d81719ff11,2959b5f9c2a0c6b26345a1020f1b66d81719ff11,"Roll forward of 238625384.

PiperOrigin-RevId: 238666870"
ojw28,2019-03-15 12:37:15,https://api.github.com/repos/google/ExoPlayer/git/commits/a291d6221f5b05b5d4ffb281a6a7dd0c54ba6d75,a291d6221f5b05b5d4ffb281a6a7dd0c54ba6d75,"Automated g4 rollback of changelist 238625384.

*** Original change description ***

Allow exoplayer/v2 mockito2

***

PiperOrigin-RevId: 238626401"
ojw28,2019-03-15 12:24:43,https://api.github.com/repos/google/ExoPlayer/git/commits/07702cecddf989fa56cfe422e240365cf19a9131,07702cecddf989fa56cfe422e240365cf19a9131,"Allow exoplayer/v2/ mockito2

PiperOrigin-RevId: 238625384"
andrewlewis,2019-03-15 01:04:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f9055396b80e284bfa49687c2df7b952218bc37a,f9055396b80e284bfa49687c2df7b952218bc37a,"Post errors before calling stopInternal

When an error occurs we call stopInternal, and this clears the MediaPeriodQueue,
which in turn releases media period holders and notifies that media periods have
been released. AnalyticsCollector updates its information about media periods
using the media period release events, which means that if we post the source
error after stopInternal posts its events we can't determine what media period
the source error corresponds to.

Move error notifications before calling stopInternal, so that
AnalyticsCollector's model of the media period queue contains the loading period
at the point when it handles the error.

For consistency also move the other (non-source) error notifications to match
the new ordering.

PiperOrigin-RevId: 238559324"
erdemguven,2019-03-14 14:59:54,https://api.github.com/repos/google/ExoPlayer/git/commits/d088be7accf0aa68f926e0d537f81d55aaed4f09,d088be7accf0aa68f926e0d537f81d55aaed4f09,"Remove DownloadState.stopFlags

PiperOrigin-RevId: 238442845"
AquilesCanta,2019-03-14 09:17:38,https://api.github.com/repos/google/ExoPlayer/git/commits/f566c9486c5efb0c19719b0daa1d98eb6c979f79,f566c9486c5efb0c19719b0daa1d98eb6c979f79,"Remove app-specific build configurations recommendations from dev-guide and readme

Issue:#5572
PiperOrigin-RevId: 238401862"
tonihei,2019-03-13 15:16:03,https://api.github.com/repos/google/ExoPlayer/git/commits/d93ee00d195e3f28cdc2edc92e877bc0beeecfc1,d93ee00d195e3f28cdc2edc92e877bc0beeecfc1,"Add convenience method to DownloadHelper to add selection for single renderer.

This simplifies the DownloadHelper code in the demo app and is generally
useful for more specific updates with SelectionOverrides.

PiperOrigin-RevId: 238228276"
tonihei,2019-03-12 14:39:44,https://api.github.com/repos/google/ExoPlayer/git/commits/8e80acd18fe00b2e75d19dd43f91a9a72a228d97,8e80acd18fe00b2e75d19dd43f91a9a72a228d97,"Use androidx.test and extensions.

This replaces the deprecated usages of RobolectricTestRunner and
RuntimeEnvironent and fully migrates the tests to androidx.

PiperOrigin-RevId: 238011667"
erdemguven,2019-03-12 13:31:08,https://api.github.com/repos/google/ExoPlayer/git/commits/9c6c74d564d7cb2a939d87e26b60df70484c211f,9c6c74d564d7cb2a939d87e26b60df70484c211f,"Fix merging download action to completed and stop flag set download

PiperOrigin-RevId: 238002393"
andrewlewis,2019-03-11 22:57:26,https://api.github.com/repos/google/ExoPlayer/git/commits/76e99504097a7519d496de3d709f14c7e73bb55e,76e99504097a7519d496de3d709f14c7e73bb55e,"Make MatroskaExtractor.seek() non-final

Now that this class can be extended, it makes sense for subclasses to be able
to clear state in seek().

PiperOrigin-RevId: 237902276"
andrewlewis,2019-03-11 22:50:35,https://api.github.com/repos/google/ExoPlayer/git/commits/7acc0ee798d4e5fb1bc97a179d47fa232f166680,7acc0ee798d4e5fb1bc97a179d47fa232f166680,"Fix ProgressiveMediaSource DefaultExtractorsFactory proguarding

PiperOrigin-RevId: 237900673"
tonihei,2019-03-11 15:08:15,https://api.github.com/repos/google/ExoPlayer/git/commits/7bf963c06c275f4f328243cc058902bf12a7a321,7bf963c06c275f4f328243cc058902bf12a7a321,"Add unit tests for buffer-based ABR.

PiperOrigin-RevId: 237803831"
tonihei,2019-03-11 10:46:44,https://api.github.com/repos/google/ExoPlayer/git/commits/64af87cba0d42db8069890205e07654028bdb49a,64af87cba0d42db8069890205e07654028bdb49a,"Depend on androidx leanback 1.0 for the leanback extension.

PiperOrigin-RevId: 237772784"
tonihei,2019-03-08 17:56:01,https://api.github.com/repos/google/ExoPlayer/git/commits/c0e1f425e8807ef6624c67e40bdc6fe6880d1703,c0e1f425e8807ef6624c67e40bdc6fe6880d1703,"Fix gradle leanback build by switching to androidx leanback.

PiperOrigin-RevId: 237467628"
tonihei,2019-03-08 11:15:40,https://api.github.com/repos/google/ExoPlayer/git/commits/57e2ec6a1d9e10aa3d6e736f1f585b5e8dd12b4a,57e2ec6a1d9e10aa3d6e736f1f585b5e8dd12b4a,"Actually use view atrribute for min update interval.

We didn't read the attribute value so far.

PiperOrigin-RevId: 237420697"
tonihei,2019-03-08 10:33:22,https://api.github.com/repos/google/ExoPlayer/git/commits/d92973dbe2fb0abd9d89e8c5fc51832cedf6fe59,d92973dbe2fb0abd9d89e8c5fc51832cedf6fe59,"Add release notes for time bar changes.

PiperOrigin-RevId: 237416206"
ojw28,2019-03-15 04:50:32,https://api.github.com/repos/google/ExoPlayer/git/commits/89908794e618507b6fad58a246b051b9a4388152,89908794e618507b6fad58a246b051b9a4388152,"Merge pull request #5496 from szaboa:dev-v2-5040

PiperOrigin-RevId: 237412166"
andrewlewis,2019-03-07 15:59:27,https://api.github.com/repos/google/ExoPlayer/git/commits/3ea6d78ee7690c26a1841246a266141134747952,3ea6d78ee7690c26a1841246a266141134747952,"Add some tests for DefaultAudioSink

PiperOrigin-RevId: 237247769"
tonihei,2019-03-07 14:35:35,https://api.github.com/repos/google/ExoPlayer/git/commits/1aad0f8e22f9d4517f368e5cc77bef23254d33ad,1aad0f8e22f9d4517f368e5cc77bef23254d33ad,"Don't throw in ProgressiveMediaPeriod.onLoadCompleted.

We may currently throw if the load completes before we finished preparation.
Don't throw and instead check for this condition in maybeThrowPrepareError.

PiperOrigin-RevId: 237237000"
ojw28,2019-03-06 17:58:31,https://api.github.com/repos/google/ExoPlayer/git/commits/851134ec163d5eb8022b643a2371545c9b8519df,851134ec163d5eb8022b643a2371545c9b8519df,"Derive Format.frameRate for MP4 videos

Issue: #5598
PiperOrigin-RevId: 237067179"
szaboa,2019-03-06 22:09:11,https://api.github.com/repos/google/ExoPlayer/git/commits/d7c2519a5dbfac421ff24770785ad4097eed5033,d7c2519a5dbfac421ff24770785ad4097eed5033,Fixes according to the code review
ojw28,2019-03-06 16:33:20,https://api.github.com/repos/google/ExoPlayer/git/commits/f35dbeb567cc009db799572beedb714b369a04b5,f35dbeb567cc009db799572beedb714b369a04b5,"TrackSelectionView: Default to Auto when last check box deselected

PiperOrigin-RevId: 237052890"
AquilesCanta,2019-03-06 16:27:30,https://api.github.com/repos/google/ExoPlayer/git/commits/97ea23fb89514ba744d2a92c35bcdb28750a36b8,97ea23fb89514ba744d2a92c35bcdb28750a36b8,"Fix load error handling call in ProgressiveMediaPeriod

PiperOrigin-RevId: 237052069"
ojw28,2019-03-06 16:20:57,https://api.github.com/repos/google/ExoPlayer/git/commits/a8d8f610ba486a0b6db5150fd63dacf60683172b,a8d8f610ba486a0b6db5150fd63dacf60683172b,"Add SimpleCache deletion functionality

This is needed now that index data may be stored outside
of the cache directory.

PiperOrigin-RevId: 237051112"
tonihei,2019-03-06 15:31:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ea42bfbf3452c64454676cfedef446865002c3b5,ea42bfbf3452c64454676cfedef446865002c3b5,"Don't retry UnexpectedLoaderExceptions.

These are thrown for non-IOException encountered during loading. Also, they
are thrown from an unexpected position and retrying is likely to fail anyway
because the Extractor is left in an unrecoverable state.

PiperOrigin-RevId: 237043948"
ojw28,2019-03-06 14:51:03,https://api.github.com/repos/google/ExoPlayer/git/commits/ab5dae64b9caf51752a095d2f8fbdd6f0e618a59,ab5dae64b9caf51752a095d2f8fbdd6f0e618a59,"Make sure we handle SQLiteException and other IO errors properly

SQLiteException is a runtime exception, which makes it easy to
forget to handle it. This change converts SQLiteExceptions into
a checked exception, which is then handled appropriately.

PiperOrigin-RevId: 237038793"
andrewlewis,2019-03-06 13:18:14,https://api.github.com/repos/google/ExoPlayer/git/commits/dd06a2d5f17c6c8a7fc5187ad364a3052c20837f,dd06a2d5f17c6c8a7fc5187ad364a3052c20837f,"Fix integer bitrate division

PiperOrigin-RevId: 237028164"
AquilesCanta,2019-03-06 13:11:09,https://api.github.com/repos/google/ExoPlayer/git/commits/155a129d2c3bd887e9795fa329727e1374dc1f7d,155a129d2c3bd887e9795fa329727e1374dc1f7d,"Make flags-only DecoderInputBuffer hold all flags

Currently a flags-only DecoderInputBuffer may hold only the end-of-stream
flag. This change makes flags-only buffer read any kind of flag set in
the next sample. If no sample is available RESULT_NOTHING_READ is
returned.

PiperOrigin-RevId: 237027581"
ojw28,2019-03-06 12:57:32,https://api.github.com/repos/google/ExoPlayer/git/commits/a4754bb7410cd8ca31c0bd8261762cf5c425f31e,a4754bb7410cd8ca31c0bd8261762cf5c425f31e,"Don't show track selection tabs if there's only one

PiperOrigin-RevId: 237025639"
tonihei,2019-03-06 10:49:13,https://api.github.com/repos/google/ExoPlayer/git/commits/3500f07be6c266e0903bc42f1dfdb0df63b1c1b9,3500f07be6c266e0903bc42f1dfdb0df63b1c1b9,"Use theme overlay for track selection dialog.

We currrently just inherit the acitivity's alertDialogTheme style (which
is equivalent to ThemeOverlay.AppCompat.Dialog.Alert). Using the theme
overlay directly and also force-enable the title such that the title is
shown even if the activity disabled the title.

PiperOrigin-RevId: 237012601"
andrewlewis,2019-03-05 14:51:07,https://api.github.com/repos/google/ExoPlayer/git/commits/febb8c589ecf0d88f0ba4b7ddc000b2fe6c10389,febb8c589ecf0d88f0ba4b7ddc000b2fe6c10389,"Improve handling of failed NAL prefix reads

nalPrefix.readUnsignedIntToInt() will throw if the unsigned output doesn't fit
in an int. Before this change, in the error case we'd retry reading from after
the NAL prefix position. Throw a ParserException so that reading an obviously
invalid NAL prefix will be treated as a fatal exception by the default load
error handling policy.

PiperOrigin-RevId: 236839690"
andrewlewis,2019-03-05 09:16:39,https://api.github.com/repos/google/ExoPlayer/git/commits/034209c5a20e078b640899aeb2a0b4b912bd0635,034209c5a20e078b640899aeb2a0b4b912bd0635,"Remove vp9 RGB output mode-related code

PiperOrigin-RevId: 236805460"
tonihei,2019-03-04 17:38:27,https://api.github.com/repos/google/ExoPlayer/git/commits/36060e36cb01dc80067a6f6ccd09cd0cdeb6beb0,36060e36cb01dc80067a6f6ccd09cd0cdeb6beb0,"Fix TrackSelectionView selection/deselection again.

There are 6 different situations which are now more explicitly covered to
ensure we handle them correctly:
1. Radio button (non-adaptive, single group only)
   Selected -> Do nothing.
   Unselected -> Replace override with selected track.
2. Check box (non-adaptive, but multi-group allowed)
   Selected -> Remove track (and override). If last one, set isDisabled flag.
   Unselected -> Replace override with selected track.
3. Check box (adaptive allowed, single or multi group)
   Selected -> Remove track. If last, remove override and maybe set isDisabled.
   Unselected -> Add track to override.

PiperOrigin-RevId: 236668642"
tonihei,2019-03-04 15:55:09,https://api.github.com/repos/google/ExoPlayer/git/commits/641c1d2af4f9bf7a1fb60d0e054373af0bb23926,641c1d2af4f9bf7a1fb60d0e054373af0bb23926,"Properly release DownloadHelper and TrackSelectionDialog.

The release needs to post to the MediaSource thread and also needs to post
back to the DownloadHelper thread to prevent sending updates after release has
been called. The point where we release the downloadHelper also needs to
dismiss the dialog in case the creation has already been queued before the
release.

PiperOrigin-RevId: 236652309"
AquilesCanta,2019-03-04 15:24:54,https://api.github.com/repos/google/ExoPlayer/git/commits/8a2fc55c497caee0fbd54acdc0fc2b7677e407e0,8a2fc55c497caee0fbd54acdc0fc2b7677e407e0,"Fix load error handling policy invocation

PiperOrigin-RevId: 236648435"
ojw28,2019-03-04 15:00:03,https://api.github.com/repos/google/ExoPlayer/git/commits/d68c861b21e6ab4760be76f99f15d57b32c20a06,d68c861b21e6ab4760be76f99f15d57b32c20a06,"Remove duplicate layout file

PiperOrigin-RevId: 236645446"
tonihei,2019-03-04 11:30:06,https://api.github.com/repos/google/ExoPlayer/git/commits/28c7cb3716c2c054d47a55a927f368058a0ed2a5,28c7cb3716c2c054d47a55a927f368058a0ed2a5,"Reset period position when resetState=True.

This is more in line with ""forgetting all previous state"" as documented for
resetState=True. Also only apply the current position as initial seek position
in this case.
PiperOrigin-RevId: 236623630"
AquilesCanta,2019-03-04 11:10:19,https://api.github.com/repos/google/ExoPlayer/git/commits/7a1b8a95850bdf9142865b764432ec62f49b9bed,7a1b8a95850bdf9142865b764432ec62f49b9bed,"Extract method in MediaCodecRenderer

Deduplicates a bit of code

PiperOrigin-RevId: 236621851"
tonihei,2019-03-01 08:59:42,https://api.github.com/repos/google/ExoPlayer/git/commits/8fce3ce678689888f7b499b3f15180286a6e20b8,8fce3ce678689888f7b499b3f15180286a6e20b8,"Do not throw in resolveSeekPosition on playback thread.

We currently throw if a pending seek position was valid when the user issued
it on the app thread, but can't be resolved on the playback thread because the
timeline changed in the meantime. Throwing in this case seems wrong as the
user could not have known about the issue (and the seek position was actually
valid). Also, in other cases where the currently playing period is no longer
in the new timeline, we gracefully use a subsequent period or transition to
ENDED state instead of throwing. So it seems more consistent to transition to
ENDED state as well.

PiperOrigin-RevId: 236274862"
tonihei,2019-02-28 17:27:13,https://api.github.com/repos/google/ExoPlayer/git/commits/b48ceb19bd656fefbed95e78c53a24e4d2c6c814,b48ceb19bd656fefbed95e78c53a24e4d2c6c814,"Remove unneccessary deprecated constants and classes.

This constants and classes are defined by the same name in the super class and
thus can be safely removed.

PiperOrigin-RevId: 236136197"
tonihei,2019-02-28 17:10:22,https://api.github.com/repos/google/ExoPlayer/git/commits/0624046a7b8eaefc5c5c5714a7d4e20ca2260f27,0624046a7b8eaefc5c5c5714a7d4e20ca2260f27,"Stop using deprecated method in demo app.

PiperOrigin-RevId: 236133636"
tonihei,2019-02-28 16:02:24,https://api.github.com/repos/google/ExoPlayer/git/commits/f87cb81f3541a0f35314626dcfd7b2da37b16959,f87cb81f3541a0f35314626dcfd7b2da37b16959,"Enable caching in internal demo app.

So far it's only enabled in the external demo app.

PiperOrigin-RevId: 236122825"
tonihei,2019-02-28 15:42:37,https://api.github.com/repos/google/ExoPlayer/git/commits/cde6189c14c8eebc8485ea274b20500ab44a2233,cde6189c14c8eebc8485ea274b20500ab44a2233,"Repair progressive downloads in DownloadTracker.

They are currently broken because we ignore downloads without periods.
As the DownloadHelper doesn't create periods for progressive media, we don't
download them. Fixing by starting download automatically without showing
track selection dialog.

PiperOrigin-RevId: 236120202"
tonihei,2019-02-28 15:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/84c8842dfa78becbc4bfccc2e26426a6cb4f840f,84c8842dfa78becbc4bfccc2e26426a6cb4f840f,"Prevent multiple track selection dialogs in PlayerActivity.

PiperOrigin-RevId: 236119640"
tonihei,2019-02-28 15:33:17,https://api.github.com/repos/google/ExoPlayer/git/commits/3eeb3acb3b50676bedbfd4cdcb631d15ec7b9f91,3eeb3acb3b50676bedbfd4cdcb631d15ec7b9f91,"Remove nullness suppressions.

These were added in an internal clean-up and are better fixed than suppressed.

PiperOrigin-RevId: 236118715"
tonihei,2019-02-28 15:31:33,https://api.github.com/repos/google/ExoPlayer/git/commits/84e20216d7b283cb76e9978a27030d717067832a,84e20216d7b283cb76e9978a27030d717067832a,"Do not allow deselection of radio button.

Instead just set the currently clicked item as override. If the already
selected button is clicked, the override is reset with the same value.

PiperOrigin-RevId: 236118429"
tonihei,2019-02-28 15:31:09,https://api.github.com/repos/google/ExoPlayer/git/commits/0bb123aa4c9cc1c0dc94ef2ba3d326658e2c53d1,0bb123aa4c9cc1c0dc94ef2ba3d326658e2c53d1,"TrackSelectionView: Use same ""isAdaptive"" logic in updateViews and onClick.

We currently do not show check boxes if the renderer does not support adaptive
switches between tracks in one group. However, we assume check boxes in the
onClick method.

Use same logic for both methods to be consistent.

PiperOrigin-RevId: 236118372"
tonihei,2019-02-28 13:00:20,https://api.github.com/repos/google/ExoPlayer/git/commits/2ae07936baf638bfd2a714a1a73ef9f31eab8e9c,2ae07936baf638bfd2a714a1a73ef9f31eab8e9c,"Handle !resetPosition as initial seek position.

The flag in ExoPlayer.prepare is documented as keeping the current window
index and window position. We are currently using the current period UID and
period position instead. This causes problems when the media source is changed
but the position is not reset.

Using the initial seek position instead ensures we actually use the window
index and position.

Issue:#5520
PiperOrigin-RevId: 236101024"
tonihei,2019-02-28 11:55:24,https://api.github.com/repos/google/ExoPlayer/git/commits/377e550d0fa7036853fa16514ca129d20212544e,377e550d0fa7036853fa16514ca129d20212544e,"Improve new error type documentation and prevent NPE in error listener.

Adding new error types may cause issues when listeners assume a fixed set of
error types and don't handle arbitrary defaults.

Fixing error handling in one case and improving documentation to make people
aware of the issue.

PiperOrigin-RevId: 236093265"
tonihei,2019-02-28 11:21:09,https://api.github.com/repos/google/ExoPlayer/git/commits/92a7bb534a706fe917308af48a4958c99b3bb754,92a7bb534a706fe917308af48a4958c99b3bb754,"Remove wrong documentation.

This is a left-over from the past and is no longer true.

PiperOrigin-RevId: 236089921"
ojw28,2019-02-27 00:07:01,https://api.github.com/repos/google/ExoPlayer/git/commits/b25d2c9978d69de6836b7a06cf6e4aa658abea85,b25d2c9978d69de6836b7a06cf6e4aa658abea85,"Adding @SuppressWarnings for the latest stable SDK Q drop

Global Presubmit : https://test.corp.google.com/ui#id=OCL:235456897:BASE:235767406:1551211793273:aa1704f6

LSC doc: go/android-sdk-lsc

PiperOrigin-RevId: 235812819"
marcbaechinger,2019-02-26 10:26:17,https://api.github.com/repos/google/ExoPlayer/git/commits/9798fdeadee1b66e40274cd4571f1ed896780180,9798fdeadee1b66e40274cd4571f1ed896780180,"add comments to issue templates which make the bot validate them

PiperOrigin-RevId: 235685393"
ojw28,2019-02-25 20:07:22,https://api.github.com/repos/google/ExoPlayer/git/commits/0645a1838adf54cdf628cdda6721c6d23136484d,0645a1838adf54cdf628cdda6721c6d23136484d,"[libvpx] Allow enabling row multi thread mode decoding in LibVPX

PiperOrigin-RevId: 235576645"
ojw28,2019-02-25 17:14:14,https://api.github.com/repos/google/ExoPlayer/git/commits/8449e7f45072b4a88da4835684c1437a1762200b,8449e7f45072b4a88da4835684c1437a1762200b,"Add stubs for onCreate() and onPostCreate()

PiperOrigin-RevId: 235541545"
andrewlewis,2019-02-25 15:11:00,https://api.github.com/repos/google/ExoPlayer/git/commits/8edecd5ccb59880a24e9d3f104920eb1a1ce161e,8edecd5ccb59880a24e9d3f104920eb1a1ce161e,"Update Matroska video codec FourCCs

Issue: #5503
PiperOrigin-RevId: 235523955"
andrewlewis,2019-02-25 10:20:47,https://api.github.com/repos/google/ExoPlayer/git/commits/f394697d4a485a4c2b1f75b2d470d621ba5675c8,f394697d4a485a4c2b1f75b2d470d621ba5675c8,"Fix updating rate with codec reuse while disabled

While disabled the renderer does not have non-null stream formats. This means
that setting the operating rate could cause a NullPointerException if there was
a codec for reuse.

Check for being enabled/started before trying to set the operating rate. After
the renderer is enabled it should receive a new input format which will update
the operating rate as needed.

PiperOrigin-RevId: 235494384"
andrewlewis,2019-02-23 20:20:10,https://api.github.com/repos/google/ExoPlayer/git/commits/caeaa9574e5f3841425d970ee6cf564bed1ec9dd,caeaa9574e5f3841425d970ee6cf564bed1ec9dd,"Avoid draining audio processors while reset

If the DefaultAudioSink was reconfigured in a way that was compatible with the
previous configuration just after having been reset, we would try to drain audio
processors despite not having an AudioTrack. This could result in a
NullPointerException if speed adjustment was active.

Fix this behavior by only trying to drain audio processors if we actually have
an AudioTrack.

PiperOrigin-RevId: 235355466"
marcbaechinger,2019-02-22 16:29:36,https://api.github.com/repos/google/ExoPlayer/git/commits/e8077fb3f4a8f970e8d1314975b42ee8f746804f,e8077fb3f4a8f970e8d1314975b42ee8f746804f,"honour shuffle order when publishing queue to media session

Issue #5360

PiperOrigin-RevId: 235196177"
AquilesCanta,2019-02-22 15:39:36,https://api.github.com/repos/google/ExoPlayer/git/commits/eea1ce3e0a505f04d17feeaceffea6c1ee1df442,eea1ce3e0a505f04d17feeaceffea6c1ee1df442,"Fix channel count propagation on HLS traditional preparation

PiperOrigin-RevId: 235189983"
ojw28,2019-02-22 15:27:28,https://api.github.com/repos/google/ExoPlayer/git/commits/3e03e71cf96679c9307bbe212d69909138c3f698,3e03e71cf96679c9307bbe212d69909138c3f698,"Start enabling database based SimpleCache indexing

- Expose constructor (package private for now, for tests only)
- Add some tests for cache initialization
- Add some TODOs for handling initialization failure

PiperOrigin-RevId: 235188386"
ojw28,2019-02-22 15:12:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ff7f0304e583296f290d8d80d15ba4e213edf6ba,ff7f0304e583296f290d8d80d15ba4e213edf6ba,"Automated g4 rollback of changelist 235153912.

*** Reason for rollback ***

Breaks ExoPlayer's gradle build

*** Original change description ***

Migrate Mockito Matchers.{hamcrestMethods} to MockitoHamcrest.{hamcrestMethods}

All methods accepting a hamcrest Matcher in org.mockito.Matchers have been changed
to only accept an ArgumentMatcher. The corresponding methods are now available on
MockitoHamcrest.

For more information see http://go/mockito-2-lsc

Tested:
    TAP --sample for global presubmit queue
    http://test/OCL:235033293:BASE:234998256:1550793421835:c2ccbbda

***

PiperOrigin-RevId: 235186705"
AquilesCanta,2019-02-22 11:34:44,https://api.github.com/repos/google/ExoPlayer/git/commits/6682580ad71de542569180e3c49415b29ebd162c,6682580ad71de542569180e3c49415b29ebd162c,"Extract HlsMediaChunk#feedDataToExtractor method

Deduplicates the call to Extractor#read and sorrounding logic.

PiperOrigin-RevId: 235165499"
ojw28,2019-02-22 09:38:19,https://api.github.com/repos/google/ExoPlayer/git/commits/325029d58eb67a72d0ee8204e280cfd555f15b14,325029d58eb67a72d0ee8204e280cfd555f15b14,"Migrate Mockito Matchers.{hamcrestMethods} to MockitoHamcrest.{hamcrestMethods}

All methods accepting a hamcrest Matcher in org.mockito.Matchers have been changed
to only accept an ArgumentMatcher. The corresponding methods are now available on
MockitoHamcrest.

For more information see http://go/mockito-2-lsc

Tested:
    TAP --sample for global presubmit queue
    http://test/OCL:235033293:BASE:234998256:1550793421835:c2ccbbda
PiperOrigin-RevId: 235153912"
marcbaechinger,2019-02-21 16:14:30,https://api.github.com/repos/google/ExoPlayer/git/commits/7f9a156323df278f09ed0e2e0f38a5c195eb1fe0,7f9a156323df278f09ed0e2e0f38a5c195eb1fe0,"fix issue templates

PiperOrigin-RevId: 234997641"
szaboa,2019-03-05 21:38:49,https://api.github.com/repos/google/ExoPlayer/git/commits/854419962ada33b34a734b3801edd9e05c083684,854419962ada33b34a734b3801edd9e05c083684,Merge role and accessibility fields into RoleFlags
szaboa,2019-03-03 18:26:31,https://api.github.com/repos/google/ExoPlayer/git/commits/58d746ecaa811d29f9bb52b1e4e232b3bc92ed07,58d746ecaa811d29f9bb52b1e4e232b3bc92ed07,"Add IntDef for role and accessibility descriptor's value, parse these also for video / audio tracks"
szaboa,2019-02-27 22:11:04,https://api.github.com/repos/google/ExoPlayer/git/commits/43ea3880980b01a7740a51e3a223fea5b7af498b,43ea3880980b01a7740a51e3a223fea5b7af498b,Remove old parseRole method that looked only for main
szaboa,2019-02-27 21:53:52,https://api.github.com/repos/google/ExoPlayer/git/commits/06ed877845dbe971fc92df94872520119e8a9543,06ed877845dbe971fc92df94872520119e8a9543,Pass role and accessibility descriptor values from adaptation set to format
marcbaechinger,2019-02-26 10:38:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4bc79c9465abd00e29ff576c5f7a7517be632f5a,4bc79c9465abd00e29ff576c5f7a7517be632f5a,Add comment for template validation with Google OSS Bot
marcbaechinger,2019-02-26 10:36:50,https://api.github.com/repos/google/ExoPlayer/git/commits/266f196cbf8c90b783a3d6c42772823cf36d992b,266f196cbf8c90b783a3d6c42772823cf36d992b,Add comments for template validation with Google OSS Bot
marcbaechinger,2019-02-26 10:35:26,https://api.github.com/repos/google/ExoPlayer/git/commits/fd0d4433618dbf6d1b9ec3e51b983bc0dd48ad02,fd0d4433618dbf6d1b9ec3e51b983bc0dd48ad02,Add comment for template validation with Google OSS Bot
marcbaechinger,2019-02-26 10:34:19,https://api.github.com/repos/google/ExoPlayer/git/commits/52a18d09b29b8aa833b94a626b807598eaa578a6,52a18d09b29b8aa833b94a626b807598eaa578a6,Add comment for template validation with Google OSS Bot
marcbaechinger,2019-02-21 16:05:23,https://api.github.com/repos/google/ExoPlayer/git/commits/b88cc63951ae43e7d166867a56d2f04174f21936,b88cc63951ae43e7d166867a56d2f04174f21936,fix issue template for 'question'
marcbaechinger,2019-02-21 16:04:46,https://api.github.com/repos/google/ExoPlayer/git/commits/544dd8a18ab3e48e7c2cad813beccab2a48fa2dd,544dd8a18ab3e48e7c2cad813beccab2a48fa2dd,fix issue template for 'feature request'
marcbaechinger,2019-02-21 16:03:58,https://api.github.com/repos/google/ExoPlayer/git/commits/04a74bb82ce0cd57896389f40d45bf0b3d0f7854,04a74bb82ce0cd57896389f40d45bf0b3d0f7854,fix issue template for 'content not playing'
marcbaechinger,2019-02-21 16:02:04,https://api.github.com/repos/google/ExoPlayer/git/commits/4747604c0640fa93a6a62a930e977909dbe811cc,4747604c0640fa93a6a62a930e977909dbe811cc,fix issue tempate for bugs
andrewlewis,2019-02-21 15:03:06,https://api.github.com/repos/google/ExoPlayer/git/commits/8ec4aad001667674da679f37136bf986ab0e8493,8ec4aad001667674da679f37136bf986ab0e8493,"Merge pull request #5553 from google/dev-v2-r2.9.6

r2.9.6"
andrewlewis,2019-02-21 11:51:45,https://api.github.com/repos/google/ExoPlayer/git/commits/6e8a5f78ddc7652f6e03db3aa9f6a8681f617e58,6e8a5f78ddc7652f6e03db3aa9f6a8681f617e58,"Automated g4 rollback of changelist 230206675.

*** Reason for rollback ***

Reverting as this may break playback on other Amlogic devices and/or playback of non-interlaced content.

*** Original change description ***

Add max video size workaround for Amlogic decoder.

The Amlogic awesome decoder reduces the video size of interlaced videos by half
if the internal configuration isn't force reset with new maximum input size
values. The product of these new values must exceed 1920x1088 to force the
reset.

Issue:#5003

***

PiperOrigin-RevId: 234967314"
andrewlewis,2019-02-21 11:08:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ea49e61b5edadf4ea9e54ea594ccb68349c6867f,ea49e61b5edadf4ea9e54ea594ccb68349c6867f,"Register the overlay view as non-obstructing

Currently IMA determines that the overlay is obstructing, even
if it's empty. Register it as friendly, which means we're
assuming that anything the apps puts in it is necessary for
playback.

PiperOrigin-RevId: 234963065"
andrewlewis,2019-02-21 11:51:45,https://api.github.com/repos/google/ExoPlayer/git/commits/8746d4a885851e5740ff3ba6bd43908f40764a7c,8746d4a885851e5740ff3ba6bd43908f40764a7c,"Automated g4 rollback of changelist 230206675.

*** Reason for rollback ***

Reverting as this may break playback on other Amlogic devices and/or playback of non-interlaced content.

*** Original change description ***

Add max video size workaround for Amlogic decoder.

The Amlogic awesome decoder reduces the video size of interlaced videos by half
if the internal configuration isn't force reset with new maximum input size
values. The product of these new values must exceed 1920x1088 to force the
reset.

Issue:#5003

***

PiperOrigin-RevId: 234967314"
AquilesCanta,2019-02-21 11:48:00,https://api.github.com/repos/google/ExoPlayer/git/commits/6b4c48a329efc7838ac57591b34d68abac4dd72a,6b4c48a329efc7838ac57591b34d68abac4dd72a,"Replace initLoadCompleted with initDataLoadRequired

PiperOrigin-RevId: 234966936"
andrewlewis,2019-02-21 11:08:11,https://api.github.com/repos/google/ExoPlayer/git/commits/253ea78679376bed4c29cfde04d05feab6a62d21,253ea78679376bed4c29cfde04d05feab6a62d21,"Register the overlay view as non-obstructing

Currently IMA determines that the overlay is obstructing, even
if it's empty. Register it as friendly, which means we're
assuming that anything the apps puts in it is necessary for
playback.

PiperOrigin-RevId: 234963065"
ojw28,2019-02-21 03:32:57,https://api.github.com/repos/google/ExoPlayer/git/commits/1450b3713fc91d97333e2e8368840b19cee6f658,1450b3713fc91d97333e2e8368840b19cee6f658,"Suppress warnings emitted by Checker Framework version 2.6.0

PiperOrigin-RevId: 234917536"
marcbaechinger,2019-02-19 19:36:21,https://api.github.com/repos/google/ExoPlayer/git/commits/af9a0a913f6ddcfbd096be50e6d1a09e184c5bc4,af9a0a913f6ddcfbd096be50e6d1a09e184c5bc4,"add GitHub issue templates according

PiperOrigin-RevId: 234641428"
AquilesCanta,2019-02-20 11:03:46,https://api.github.com/repos/google/ExoPlayer/git/commits/70d7b26f4f0adce977cf011e413230cf67df0a26,70d7b26f4f0adce977cf011e413230cf67df0a26,"Remove lates HLS changes from 2.9.6 release notes

PiperOrigin-RevId: 234765847"
AquilesCanta,2019-02-20 10:49:26,https://api.github.com/repos/google/ExoPlayer/git/commits/3c0ce056d95d6d92e01cb1335fee560249a90ff2,3c0ce056d95d6d92e01cb1335fee560249a90ff2,"Fix HlsSampleStream#read non-fatal lack of mapping

HlsSampleStream#read should return end of stream when
there is no mapping for the sample stream, instead of
nothing read. This allows the player to transition to
ended.

Issue:#5524
PiperOrigin-RevId: 234764027"
AquilesCanta,2019-02-20 12:30:42,https://api.github.com/repos/google/ExoPlayer/git/commits/e502672b89dc53ad90da570cf98f027442cd2c1b,e502672b89dc53ad90da570cf98f027442cd2c1b,"Encapsulate the key cache in HlsChunkSource

PiperOrigin-RevId: 234773649"
AquilesCanta,2019-02-20 11:03:46,https://api.github.com/repos/google/ExoPlayer/git/commits/0d24098c7dd516c02b4970da03120ac402b51f7a,0d24098c7dd516c02b4970da03120ac402b51f7a,"Remove lates HLS changes from 2.9.6 release notes

PiperOrigin-RevId: 234765847"
AquilesCanta,2019-02-20 10:49:26,https://api.github.com/repos/google/ExoPlayer/git/commits/16f41dbaab2262538f87c6213dd617e059c5bf1f,16f41dbaab2262538f87c6213dd617e059c5bf1f,"Fix HlsSampleStream#read non-fatal lack of mapping

HlsSampleStream#read should return end of stream when
there is no mapping for the sample stream, instead of
nothing read. This allows the player to transition to
ended.

Issue:#5524
PiperOrigin-RevId: 234764027"
ojw28,2019-02-19 21:28:40,https://api.github.com/repos/google/ExoPlayer/git/commits/2685b8bd9029ae5b02e12db288300d5ce6d5edb0,2685b8bd9029ae5b02e12db288300d5ce6d5edb0,"Support multiple instances of database features

- Use Cache UID for CacheContentIndex and CacheFileMetadataIndex. This
  enables SD card swapping for a single device.
- I'm hopeful of finding a way to get the Cache UID to DefaultDownloadIndex
  so we can do the same there.

PiperOrigin-RevId: 234662753"
marcbaechinger,2019-02-19 19:36:21,https://api.github.com/repos/google/ExoPlayer/git/commits/5b891a4c1f25f0dd9570605516574db15e61cdcb,5b891a4c1f25f0dd9570605516574db15e61cdcb,"add GitHub issue templates according

PiperOrigin-RevId: 234641428"
ojw28,2019-02-19 18:53:26,https://api.github.com/repos/google/ExoPlayer/git/commits/bfc60e1694ba09876b47e44d0ae2841f8467184f,bfc60e1694ba09876b47e44d0ae2841f8467184f,"Set vertical orientation by default in TrackSelectionView

Horizontal orientation doesn't make sense. I thought about
overriding the setter to throw something, but it's probably
not worth the extra lines.

PiperOrigin-RevId: 234632530"
ojw28,2019-02-12 09:18:08,https://api.github.com/repos/google/ExoPlayer/git/commits/90c4cd2e717e4b534e25bffdd85c66ae05431947,90c4cd2e717e4b534e25bffdd85c66ae05431947,"Fix EventMessage timestamp issue

Stop encoding/decoding presentation time as part of the message.
What's actually in emsg boxes is a presentation time delta,
which is why it's only 32 bits, and hence why it doesn't handle
large absolute timestamps. We were using this field to hold
absolute timestamps only for the purpose of passing presentation
times from DashManifestParser.parseEvent back to the calling
method. After this change, we return Pair<Long, EventMessage>
instead.

Issue: #5490
PiperOrigin-RevId: 233561731"
andrewlewis,2019-02-19 12:32:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b1fcfa9677c9304a8fe6286449b07ed59a08f1b0,b1fcfa9677c9304a8fe6286449b07ed59a08f1b0,"Bump version for 2.9.6 release

PiperOrigin-RevId: 234578712"
andrewlewis,2019-02-19 15:50:40,https://api.github.com/repos/google/ExoPlayer/git/commits/b68fda0322938809df1704144874fe1222af6319,b68fda0322938809df1704144874fe1222af6319,"Update release notes to include HLS init segment fix

PiperOrigin-RevId: 234600750"
AquilesCanta,2019-02-19 13:56:31,https://api.github.com/repos/google/ExoPlayer/git/commits/28434cff4c11b0e19a3145bfbaff6c9507a574b1,28434cff4c11b0e19a3145bfbaff6c9507a574b1,"Support customization of the PlaylistStuckException waiting period

Issue:#5487
PiperOrigin-RevId: 234586819"
AquilesCanta,2019-02-19 13:55:45,https://api.github.com/repos/google/ExoPlayer/git/commits/a174af0d70929c53093c62186a1d336e1837ea4d,a174af0d70929c53093c62186a1d336e1837ea4d,"Remove deprecated HLS-related constructors

PiperOrigin-RevId: 234586744"
AquilesCanta,2019-02-19 12:43:52,https://api.github.com/repos/google/ExoPlayer/git/commits/774c01d02046993e824aa31e2cb49bfc1283bc78,774c01d02046993e824aa31e2cb49bfc1283bc78,"Make MimeType top level check related methods more robust

Throwing an IllegalArgumentException doesn't help the method signature.

PiperOrigin-RevId: 234579722"
andrewlewis,2019-02-19 12:32:54,https://api.github.com/repos/google/ExoPlayer/git/commits/8e7ae9201a3188591e38bda4286301465f6ce6ea,8e7ae9201a3188591e38bda4286301465f6ce6ea,"Bump version for 2.9.6 release

PiperOrigin-RevId: 234578712"
ojw28,2019-02-19 11:31:57,https://api.github.com/repos/google/ExoPlayer/git/commits/d79735cbc359ce074be5a4f888d0df1c2c9d4f3e,d79735cbc359ce074be5a4f888d0df1c2c9d4f3e,"Strip unnecessary constant

PiperOrigin-RevId: 234573193"
marcbaechinger,2019-02-19 11:15:16,https://api.github.com/repos/google/ExoPlayer/git/commits/44e23fabe694d3c2d8606de17e2e32dfb8bb6da2,44e23fabe694d3c2d8606de17e2e32dfb8bb6da2,"let apps intercept/handle media button events by using a MediaButtonEventHandler

Issue #5179

PiperOrigin-RevId: 234571837"
ojw28,2019-02-18 21:24:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0622afe170d3e9d3803572cb81e84dad975de121,0622afe170d3e9d3803572cb81e84dad975de121,"Migrate to androidx

Issue: #5489
PiperOrigin-RevId: 234507428

Add missing annotation dependency

Issue: #5489
PiperOrigin-RevId: 234566177"
andrewlewis,2019-02-12 11:15:02,https://api.github.com/repos/google/ExoPlayer/git/commits/ac68f9042e1a2f80d59ba74a720e4b1cc79dbdad,ac68f9042e1a2f80d59ba74a720e4b1cc79dbdad,"Skip ad group on unknown load error

PiperOrigin-RevId: 233576600"
ojw28,2019-02-11 17:11:08,https://api.github.com/repos/google/ExoPlayer/git/commits/dbfaf17bba44a5af66019b435e8053a3f16703dc,dbfaf17bba44a5af66019b435e8053a3f16703dc,"Add missing permission to IMA demo app

PiperOrigin-RevId: 233418784"
andrewlewis,2019-02-11 14:07:13,https://api.github.com/repos/google/ExoPlayer/git/commits/5402f20216f45bfcb6a77ea1d94cc8739f996b3d,5402f20216f45bfcb6a77ea1d94cc8739f996b3d,"Allow registration of control overlays for ad viewability

Switch from passing an ad UI ViewGroup to passing an object that can also
provide information about controls overlays.

Also switch to using a dedicated overlay for ads instead of the overlay frame
layout, which apps have easy access to.

PiperOrigin-RevId: 233393500"
andrewlewis,2019-02-08 17:54:27,https://api.github.com/repos/google/ExoPlayer/git/commits/e7687764a178629d5349c566228a09f8eda237cb,e7687764a178629d5349c566228a09f8eda237cb,"Add an overlay FrameLayout for ad UI

This will be used instead of the current overlay FrameLayout (which apps can
interact with directly).

PiperOrigin-RevId: 233077175"
andrewlewis,2019-02-08 09:04:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c16af7371776f46adbe5a06d61765466ef693d26,c16af7371776f46adbe5a06d61765466ef693d26,"Remove deprecated ImaAdsMediaSource and constructors

Given the change to require setPlayer on AdsLoaders, it seems like a good
opportunity to clean up deprecated ads-related symbols.

PiperOrigin-RevId: 233020171"
andrewlewis,2019-02-06 16:04:58,https://api.github.com/repos/google/ExoPlayer/git/commits/2e9ef8abeb62437121472a7188b044c21d804db0,2e9ef8abeb62437121472a7188b044c21d804db0,"Update test names for attach -> start renaming

PiperOrigin-RevId: 232676346"
andrewlewis,2019-02-05 18:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/73813b9b11d3ab8db1cc1e07e831b9ac4d9ea19c,73813b9b11d3ab8db1cc1e07e831b9ac4d9ea19c,"Switch to non-deprecated way of setting AdDisplayContainer

PiperOrigin-RevId: 232507469"
andrewlewis,2019-02-05 17:46:03,https://api.github.com/repos/google/ExoPlayer/git/commits/0c159984ee9825d76603c8c26c1038d333317ff7,0c159984ee9825d76603c8c26c1038d333317ff7,"Set player on ads loader in IMA demo

Issue: #5476
PiperOrigin-RevId: 232503736"
tonihei,2019-01-29 12:01:33,https://api.github.com/repos/google/ExoPlayer/git/commits/85b8e1f706577f53b1589d61961c353dee7784ab,85b8e1f706577f53b1589d61961c353dee7784ab,"Add back deprecated MediaSource.prepareSource for ExoPlayerSampleExtractor.

This should be removed after releasing.

PiperOrigin-RevId: 231380393"
tonihei,2019-01-04 17:56:10,https://api.github.com/repos/google/ExoPlayer/git/commits/a973b6f34f21b99fba29951d992cdd8c765ca351,a973b6f34f21b99fba29951d992cdd8c765ca351,"Remove player and isTopLevelSource parameters from MediaSource.prepare.

They are not longer needed anywhere, are error-prone (because of threading
requirements), and complicate testing and using MediaSources without a player.

PiperOrigin-RevId: 227871157"
tonihei,2019-01-03 14:54:37,https://api.github.com/repos/google/ExoPlayer/git/commits/5fc975b728d77497864302a4224af9440bca36ad,5fc975b728d77497864302a4224af9440bca36ad,"Replace isTopLevelSource check by period count check in AdsMediaSource.

The top level requirement only tried to ensure that the entire timeline only
has one period. This is already asserted by ImaAdsLoader. AdsMediaSource
itself works fine as long as the wrapped timeline has one period only. This
is now asserted instead.

PiperOrigin-RevId: 227682141"
tonihei,2019-01-03 14:54:22,https://api.github.com/repos/google/ExoPlayer/git/commits/caca14c5f95684526f0c825721913ed932b480d6,caca14c5f95684526f0c825721913ed932b480d6,"Set Player separately in AdsLoader interface.

Passing the player through MediaSource.prepare is only needed for the AdsLoader
and complicates other usages of MediaSource. Providing the player directly to
the AdsLoader is also in line with the usage pattern of PlayerView and other
components.

Also rename methods to start/stop to better reflect their usage.

PiperOrigin-RevId: 227682112"
andrewlewis,2019-02-18 18:43:56,https://api.github.com/repos/google/ExoPlayer/git/commits/f3bd93394be715203e48e95102489cd4245975db,f3bd93394be715203e48e95102489cd4245975db,"Fix copybara stripping

PiperOrigin-RevId: 234496529"
erdemguven,2019-02-18 15:55:27,https://api.github.com/repos/google/ExoPlayer/git/commits/03e28d4689ea17d09bbe7209428d27280ac33000,03e28d4689ea17d09bbe7209428d27280ac33000,"Support stopping/starting single downloads

Also added intent actions to stop/start one or all downloads.

Issue: #4433
Issue: #4860
PiperOrigin-RevId: 234481515"
andrewlewis,2019-02-18 15:50:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2b67f2a6268daf1d05904db0be11c898f511e695,2b67f2a6268daf1d05904db0be11c898f511e695,"Avoid crashing process on OOM

Catch OutOfMemoryErrors and surface them as unexpected ExoPlaybackExceptions.

PiperOrigin-RevId: 234481140"
AquilesCanta,2019-02-18 15:33:17,https://api.github.com/repos/google/ExoPlayer/git/commits/0ceff589b33992a98db0e439b24aea75f772e6ef,0ceff589b33992a98db0e439b24aea75f772e6ef,"HLS Bugfix: Avoid loading initialization segment when reusing extractor

This bug affects any playlist that uses initialization segments. In practice,
almost exclusively fragmented mp4 segmented playlists are affected.

The bottom line is that extractors are chosen for reuse after the
initialization segment connection is open. However, reused extractors
do not need re-parsing the init segment, so loading the initialization is
wasteful.

PiperOrigin-RevId: 234479467"
andrewlewis,2019-02-18 14:48:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e97910a694e5374a1104f1f279de1480deecd02a,e97910a694e5374a1104f1f279de1480deecd02a,"Fix seek exception unit

PiperOrigin-RevId: 234475237"
andrewlewis,2019-02-18 11:18:53,https://api.github.com/repos/google/ExoPlayer/git/commits/5d8e1784b94fcb501ea50ee9be7542913eacee25,5d8e1784b94fcb501ea50ee9be7542913eacee25,"Fix MIME type for divx in Matroska

Issue: #3863
PiperOrigin-RevId: 234453728"
tonihei,2019-02-15 17:19:20,https://api.github.com/repos/google/ExoPlayer/git/commits/cedfa1998897de850feecaa89499047856d3bdbb,cedfa1998897de850feecaa89499047856d3bdbb,"Prevent using view state and use state saved in fragment instead.

The system may destroy views at any time and may not have created the view
at all. Use the state saved in the fragment to be independant of the existance
of the view.

PiperOrigin-RevId: 234156285"
tonihei,2019-02-15 16:55:17,https://api.github.com/repos/google/ExoPlayer/git/commits/c6195dbbaf6909e48e212fd4e15a3b23022daa8a,c6195dbbaf6909e48e212fd4e15a3b23022daa8a,"Handle recreation of TrackSelectionView instances.

TrackSelectionView requires an initialization with a call to init(...).
That's why we shouldn't let the view retain its view hierarchy automatically
as the views won't be backed by data if restored. Instead add a listener
which lets the containing activity/fragment save and restore the state if
needed.

PiperOrigin-RevId: 234152491"
marcbaechinger,2019-02-15 15:09:05,https://api.github.com/repos/google/ExoPlayer/git/commits/f9f55ae4d51246dabea22b9d6114e4eb2be6addb,f9f55ae4d51246dabea22b9d6114e4eb2be6addb,"improve documentation on how to update queue when asynchronously loading media item assets

Issue #5494

PiperOrigin-RevId: 234138162"
andrewlewis,2019-02-15 15:05:14,https://api.github.com/repos/google/ExoPlayer/git/commits/bcadb47a74fee9482ea904721943fa833682178d,bcadb47a74fee9482ea904721943fa833682178d,"Fix typo

PiperOrigin-RevId: 234137695"
tonihei,2019-02-15 13:48:10,https://api.github.com/repos/google/ExoPlayer/git/commits/eae09c67e7bad6e1314523c337748ffc86e38e8a,eae09c67e7bad6e1314523c337748ffc86e38e8a,"Release download helper if new download track selection is started.

PiperOrigin-RevId: 234128521"
erdemguven,2019-02-15 12:39:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b69041bea2c86722ab4a213be3d506d0dc330ec0,b69041bea2c86722ab4a213be3d506d0dc330ec0,"Prevent NullPointerException exceptions in SimpleCache initialization

This is a temporary fix to prevent NullPointerException exceptions.
Though writing to cache will still fail if the cache folder isn't a real
folder.

There are a few thing we can try:
* The listing might be failing because the cache folder is just created.
We can wait and try again.
* If the cache folder is a regular file, we can try deleting and creating
a folder with the same name.

PiperOrigin-RevId: 234121925"
AquilesCanta,2019-02-15 11:09:16,https://api.github.com/repos/google/ExoPlayer/git/commits/8982da4b7502cddc4946a0acfe62de3986ee36c0,8982da4b7502cddc4946a0acfe62de3986ee36c0,"Support encrypted initialization segment

Defined in RFC 8216 Section 4.3.2.5.

Issue:#5441
PiperOrigin-RevId: 234114119"
ojw28,2019-02-14 23:35:25,https://api.github.com/repos/google/ExoPlayer/git/commits/d61171a100a738fe2bda9125fa1ff6859c905726,d61171a100a738fe2bda9125fa1ff6859c905726,"[libvpx] Reducing the number of buffers for LibVPX in order to avoid OOM crashes.

PiperOrigin-RevId: 234042474"
andrewlewis,2019-02-14 22:45:35,https://api.github.com/repos/google/ExoPlayer/git/commits/31911ca54a13b0003d6cf902b95c2ed445afa930,31911ca54a13b0003d6cf902b95c2ed445afa930,"Drain audio processors on reconfiguration

Previously we would get a new AudioTrack and flush all audio processors if any
AudioProcessor needed to be flushed on reconfiguration. This was problematic for
the case of TrimmingAudioProcessor because it could become active or inactive
due to transitioning to a period with gapless metadata or without it (we don't
keep it active all the time because it is wasteful to populate its end buffer
for content that is not gapless).

This change handles the case where we don't need an AudioTrack but
AudioProcessors do need to be flushed. In this case we drain all the audio
processors when next handling data then switch to the new configuration.

This avoids truncation when period transitions change whether
TrimmingAudioProcessor is active but don't require a new AudioTrack, and is also
a step towards draining the AudioTrack when transitioning between periods if we
do need a new AudioTrack.

To do this, it needs to be possible to drain any pending output data from an
AudioProcessor after it's configured to a new format, so this change makes sure
AudioProcessors allow calling playToEndOfStream and getOutput after
reconfiguration and before flush.

PiperOrigin-RevId: 234033552"
andrewlewis,2019-02-14 22:06:03,https://api.github.com/repos/google/ExoPlayer/git/commits/83545fb7b2d929c7bcd83210496546cb009de2b4,83545fb7b2d929c7bcd83210496546cb009de2b4,"Factor out common audio processor functionality

PiperOrigin-RevId: 234025553"
andrewlewis,2019-02-14 21:23:47,https://api.github.com/repos/google/ExoPlayer/git/commits/03006f0595ee6b82fdee6dd5050df53d00451140,03006f0595ee6b82fdee6dd5050df53d00451140,"Fix some AudioProcessor nits

- Fix nullness warnings
- Fix annotations
- Make TeeAudioProcessor flush its sink for every format change

PiperOrigin-RevId: 234017068"
andrewlewis,2019-02-14 19:06:19,https://api.github.com/repos/google/ExoPlayer/git/commits/3e6cf42f83635a6db42915797d4bc057a0b85bde,3e6cf42f83635a6db42915797d4bc057a0b85bde,"Factor out default audio sink configuration

This cleanup is in preparation for draining audio processors on reconfiguration
to a format that doesn't require a new AudioTrack to be created.

PiperOrigin-RevId: 233990983"
AquilesCanta,2019-02-14 15:42:16,https://api.github.com/repos/google/ExoPlayer/git/commits/12ed18c74cac660433a6ed796fd26e423adfcc19,12ed18c74cac660433a6ed796fd26e423adfcc19,"Add encryption information to initialization segments

PiperOrigin-RevId: 233953493"
tonihei,2019-02-14 14:35:27,https://api.github.com/repos/google/ExoPlayer/git/commits/1c38b226ea547783f63bd1732549e198a56f6878,1c38b226ea547783f63bd1732549e198a56f6878,"Stop using AlertDialog for TrackSelectionDialog.

AlertDialog owns its view, which causes problems with TabLayout on API 21
and 22. Now using AppCompatDialog instead so that we can own the view
ourselves.

Also:
 - Renamed layout files from download_xyz to track_selection_xyz.
 - Added OK and Cancel buttons to the view.
 - Applied alert dialog style to the ""normal"" dialog to get a nicer UI.
PiperOrigin-RevId: 233944647"
AquilesCanta,2019-02-13 19:21:23,https://api.github.com/repos/google/ExoPlayer/git/commits/73d9b2d21a3bc28b84403157609368f51dfcedd1,73d9b2d21a3bc28b84403157609368f51dfcedd1,"Hide ExoCastPlayer components again

This CL is effectively a rollback of cr/233072247.

PiperOrigin-RevId: 233793032"
AquilesCanta,2019-02-13 19:10:58,https://api.github.com/repos/google/ExoPlayer/git/commits/5c2aa4bd9e66d55886e27bef304dba1408a244a4,5c2aa4bd9e66d55886e27bef304dba1408a244a4,"Automated g4 rollback of changelist 233073011.

*** Reason for rollback ***

Pending discussions about cast

*** Original change description ***

Remove default-receiver-related classes from Cast demo app

***

PiperOrigin-RevId: 233790699"
AquilesCanta,2019-02-13 17:11:27,https://api.github.com/repos/google/ExoPlayer/git/commits/04e606149870213dd22de3b5e3255a8f41a5c825,04e606149870213dd22de3b5e3255a8f41a5c825,"Reduce the number of parameters required to create an HlsMediaChunk

PiperOrigin-RevId: 233765839"
AquilesCanta,2019-02-13 11:35:11,https://api.github.com/repos/google/ExoPlayer/git/commits/cc153cfca37aa0f0ca96148681cfd80af353fb38,cc153cfca37aa0f0ca96148681cfd80af353fb38,"Use floating action button in the cast demo app

PiperOrigin-RevId: 233723028"
tonihei,2019-02-13 10:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/ca67c0c2e5eea2a5ef4aa4025d67716515d66efa,ca67c0c2e5eea2a5ef4aa4025d67716515d66efa,"Extend TrackSelectionDialog for usage in PlayerActivity.

We need additional initial selection settings and a configurable title.
The update logic for the track selection parameters moved to a static helper
method in TrackSelectionDialog.

PiperOrigin-RevId: 233713788"
ojw28,2019-02-12 20:10:27,https://api.github.com/repos/google/ExoPlayer/git/commits/d6b60637986430620536c70bd65bbd848cd08e9f,d6b60637986430620536c70bd65bbd848cd08e9f,"Allow specifying number of decoding threads to libvpx library.

PiperOrigin-RevId: 233653857"
tonihei,2019-02-12 16:36:03,https://api.github.com/repos/google/ExoPlayer/git/commits/edabbd52d0eeaf7c5c28b1a9a34688cec80aa512,edabbd52d0eeaf7c5c28b1a9a34688cec80aa512,"Update Robolectric and Truth.

PiperOrigin-RevId: 233612344"
ojw28,2019-02-12 14:18:05,https://api.github.com/repos/google/ExoPlayer/git/commits/f299a65a335bd703c74d3d3f40e5afd5a17c41ac,f299a65a335bd703c74d3d3f40e5afd5a17c41ac,"Fix proguard for external cast extension, disable for internal

PiperOrigin-RevId: 233594542"
ojw28,2019-02-12 13:09:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c7788c18db53c34b425991e90c081204b2e051f0,c7788c18db53c34b425991e90c081204b2e051f0,"Fix / cleanup some layout in the Cast demo

PiperOrigin-RevId: 233587404"
erdemguven,2019-02-12 13:07:03,https://api.github.com/repos/google/ExoPlayer/git/commits/5782bbc6e551d6668f26e4dfa51394e61d552ca7,5782bbc6e551d6668f26e4dfa51394e61d552ca7,"Use DownloadState in DownloadManager

PiperOrigin-RevId: 233587184"
tonihei,2019-02-12 12:39:40,https://api.github.com/repos/google/ExoPlayer/git/commits/399a963e020d0b145ffb12639bd6f2917b2a2ce6,399a963e020d0b145ffb12639bd6f2917b2a2ce6,"Revert removal of single track option in TrackSelectionView.

PiperOrigin-RevId: 233584155"
tonihei,2019-02-12 12:20:46,https://api.github.com/repos/google/ExoPlayer/git/commits/1dd36ae391447613d9fb67cc514c1fb59ffbbe5a,1dd36ae391447613d9fb67cc514c1fb59ffbbe5a,"Add TrackSelectionDialog (with swipe tabs) to demo app.

PiperOrigin-RevId: 233582549"
AquilesCanta,2019-02-12 11:35:56,https://api.github.com/repos/google/ExoPlayer/git/commits/00c31265cd0f18915f68da82ba6ae3014328d634,00c31265cd0f18915f68da82ba6ae3014328d634,"Move depended below dependant as per usual

PiperOrigin-RevId: 233578341"
AquilesCanta,2019-02-12 11:30:54,https://api.github.com/repos/google/ExoPlayer/git/commits/55e6d1d70895f735b7a13f821dc452d7c88bb0d7,55e6d1d70895f735b7a13f821dc452d7c88bb0d7,"Prevent concurrent queue modifications from breaking the cast demo app UI

PiperOrigin-RevId: 233577854"
andrewlewis,2019-02-12 11:15:02,https://api.github.com/repos/google/ExoPlayer/git/commits/3a5ed6b889003ea03c5b5f1f98d9cfe8f5b8551d,3a5ed6b889003ea03c5b5f1f98d9cfe8f5b8551d,"Skip ad group on unknown load error

PiperOrigin-RevId: 233576600"
ojw28,2019-02-12 09:18:08,https://api.github.com/repos/google/ExoPlayer/git/commits/c66d26b6014be13cfa0cc4be35ebc6ae4f85eb00,c66d26b6014be13cfa0cc4be35ebc6ae4f85eb00,"Fix EventMessage timestamp issue

Stop encoding/decoding presentation time as part of the message.
What's actually in emsg boxes is a presentation time delta,
which is why it's only 32 bits, and hence why it doesn't handle
large absolute timestamps. We were using this field to hold
absolute timestamps only for the purpose of passing presentation
times from DashManifestParser.parseEvent back to the calling
method. After this change, we return Pair<Long, EventMessage>
instead.

Issue: #5490
PiperOrigin-RevId: 233561731"
andrewlewis,2019-02-11 18:29:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ad69a93708b45a6510dda216b20d4a45def7645e,ad69a93708b45a6510dda216b20d4a45def7645e,"Handle alternative DV MIME types

Also detect ISOBMFF brand for DV when sniffing.

PiperOrigin-RevId: 233433449"
ojw28,2019-02-11 18:04:02,https://api.github.com/repos/google/ExoPlayer/git/commits/a21572f0dd665040e49db79b5fe912f5fcc92f7e,a21572f0dd665040e49db79b5fe912f5fcc92f7e,"Fix minor issues and lint errors

PiperOrigin-RevId: 233428556"
erdemguven,2019-02-11 17:28:16,https://api.github.com/repos/google/ExoPlayer/git/commits/6a7157de11cb04e1febb1a45b678878a84431b93,6a7157de11cb04e1febb1a45b678878a84431b93,"Fix flaky test DownloadManager.differentDownloadActionsMerged

PiperOrigin-RevId: 233421480"
ojw28,2019-02-11 17:19:36,https://api.github.com/repos/google/ExoPlayer/git/commits/6d461f5b25fc09dea43b28e1e42d5754a7ed6910,6d461f5b25fc09dea43b28e1e42d5754a7ed6910,"Fix PlayerNotificationManager lint error

builder.mActions is marked as @RestrictTo(LIBRARY_GROUP). We'll
just have to put up with notification flicker on KitKat if the
actions change.

PiperOrigin-RevId: 233420076"
ojw28,2019-02-11 17:11:08,https://api.github.com/repos/google/ExoPlayer/git/commits/de720fef7705b6a9d8897d82c48509b9f475ab20,de720fef7705b6a9d8897d82c48509b9f475ab20,"Add missing permission to IMA demo app

PiperOrigin-RevId: 233418784"
ojw28,2019-02-11 16:19:01,https://api.github.com/repos/google/ExoPlayer/git/commits/71ab19c7717a029f7a475322f8a2df5b7cfbb984,71ab19c7717a029f7a475322f8a2df5b7cfbb984,"Fix a few GVR 360 nits

- Remove unused TAG
- android.Theme.Material can only be used from API level 21
- Rm ""Base"" from activity name for consistency

PiperOrigin-RevId: 233410603"
ojw28,2019-02-11 15:53:57,https://api.github.com/repos/google/ExoPlayer/git/commits/ae12b76ac44ab19f4ba54cdddc41c3c5629381ab,ae12b76ac44ab19f4ba54cdddc41c3c5629381ab,"Add tests to ensure DefaultRenderersFactory reflection works

Also add explicit Lint.IfChange/ThenChange rules to make it
clearer what needs to be done when changing one of the code
paths that's accessed via reflection.

PiperOrigin-RevId: 233406709"
andrewlewis,2019-02-11 14:07:13,https://api.github.com/repos/google/ExoPlayer/git/commits/56944caa2167b045f361e6fb86d40570c95e5cc0,56944caa2167b045f361e6fb86d40570c95e5cc0,"Allow registration of control overlays for ad viewability

Switch from passing an ad UI ViewGroup to passing an object that can also
provide information about controls overlays.

Also switch to using a dedicated overlay for ads instead of the overlay frame
layout, which apps have easy access to.

PiperOrigin-RevId: 233393500"
ojw28,2019-02-11 14:02:46,https://api.github.com/repos/google/ExoPlayer/git/commits/01836787473f0d8381ee8567fb494e488db02258,01836787473f0d8381ee8567fb494e488db02258,"Suppress obsolete API warning

We'll toggle the publish flag only when doing releases.

Issue: #5477
PiperOrigin-RevId: 233392733"
ojw28,2019-02-11 13:40:45,https://api.github.com/repos/google/ExoPlayer/git/commits/8401097ead92c66bbab2f709716900a84d5f238f,8401097ead92c66bbab2f709716900a84d5f238f,"Upgrade gradle plugin and friends

PiperOrigin-RevId: 233390513"
AquilesCanta,2019-02-11 10:56:23,https://api.github.com/repos/google/ExoPlayer/git/commits/905927554abfbddb7b61244694d33144687350b8,905927554abfbddb7b61244694d33144687350b8,"Fix Cast demo app's blaze build and enable proguarding

PiperOrigin-RevId: 233372668"
tonihei,2019-02-11 10:01:34,https://api.github.com/repos/google/ExoPlayer/git/commits/abb53d7ce707476e5ab22fa990070bc8d7b2179f,abb53d7ce707476e5ab22fa990070bc8d7b2179f,"Support multiple overrides in TrackSelectionView and factor out Builder.

Supporting multiple overrides allows to select tracks from multiple groups, if
enabled. As more options are added, the creation of the dialog is moved to a
separate builder class.

PiperOrigin-RevId: 233366282"
AquilesCanta,2019-02-08 19:03:24,https://api.github.com/repos/google/ExoPlayer/git/commits/fc2710498ae8c894a8e986723a2cea890ee8097d,fc2710498ae8c894a8e986723a2cea890ee8097d,"Handle player errors more gracefully in the Cast demo app

PiperOrigin-RevId: 233090773"
AquilesCanta,2019-02-08 18:59:20,https://api.github.com/repos/google/ExoPlayer/git/commits/3d822bd2282321feeb19480aabbf3754ed401f47,3d822bd2282321feeb19480aabbf3754ed401f47,"Rename ExoCastPlayerManager to PlayerManager

PiperOrigin-RevId: 233089799"
andrewlewis,2019-02-08 17:54:27,https://api.github.com/repos/google/ExoPlayer/git/commits/ef139b2e31c921b7111000a171054594256c19dc,ef139b2e31c921b7111000a171054594256c19dc,"Add an overlay FrameLayout for ad UI

This will be used instead of the current overlay FrameLayout (which apps can
interact with directly).

PiperOrigin-RevId: 233077175"
AquilesCanta,2019-02-08 17:29:18,https://api.github.com/repos/google/ExoPlayer/git/commits/a263fb16311da11b4d00529e102d2f0d047d380f,a263fb16311da11b4d00529e102d2f0d047d380f,"Remove default-receiver-related classes from Cast demo app

PiperOrigin-RevId: 233073011"
AquilesCanta,2019-02-08 17:23:29,https://api.github.com/repos/google/ExoPlayer/git/commits/6f1daff3f1edce4ac474a77486f364755dcf8c03,6f1daff3f1edce4ac474a77486f364755dcf8c03,"Remove copybara scrubbing of ExoCast components

PiperOrigin-RevId: 233072247"
andrewlewis,2019-02-08 16:45:00,https://api.github.com/repos/google/ExoPlayer/git/commits/9b6caf9edaa873d2b2b77a8b449e36325273124c,9b6caf9edaa873d2b2b77a8b449e36325273124c,"Merge #5438: Dolby Vision

Imported from GitHub PR https://github.com/google/ExoPlayer/pull/5438

Plus the following changes:
- Only support profile 5 (handling other profiles requires
  backward-compatibility changes in the renderer which are left for a later
  change.)
- Only add KEY_PROFILE to the codec configuration MediaFormat for Dolby Vision.
- In MediaCodecUtil support all DV profiles that Android has constants for. This
  includes ones that are ""not supported for new applications"". Since we don't
  extract these profiles, this is currently only for the benefit of custom
  extractors.
- Misc code style fixes and reordering for consistency.

Merge 37878b975c2bc082b0568e21cbe62bfcef97c10d into 67be9e77834c0dc9d2b5d462c01c2f39718c8817

PiperOrigin-RevId: 233066799"
ojw28,2019-02-08 16:27:47,https://api.github.com/repos/google/ExoPlayer/git/commits/434b5a30293cb7701ea35c25b1c7302fe3b8ce89,434b5a30293cb7701ea35c25b1c7302fe3b8ce89,"Enable use of database storage in CachedContentIndex

It's not yet enabled in the SimpleCache layer, however, so
this is a no-op change.

PiperOrigin-RevId: 233064490"
andrewlewis,2019-02-08 15:32:31,https://api.github.com/repos/google/ExoPlayer/git/commits/9c3ac92ae833575a9e2ef06eec797b207dd13b97,9c3ac92ae833575a9e2ef06eec797b207dd13b97,"Allow extension of MatroskaExtractor

Subclasses can handle arbitrary elements.

PiperOrigin-RevId: 233057241"
AquilesCanta,2019-02-08 14:50:26,https://api.github.com/repos/google/ExoPlayer/git/commits/36da5fb5115cc81ac9a66b46af8e5a96e14a8457,36da5fb5115cc81ac9a66b46af8e5a96e14a8457,"Group audio renditions by name

Allows the player to adapt between audio renditions with different
names.

PiperOrigin-RevId: 233052105"
AquilesCanta,2019-02-08 14:33:42,https://api.github.com/repos/google/ExoPlayer/git/commits/891ec2230ef2f20e1cb9a725ce1c107277f2ddaf,891ec2230ef2f20e1cb9a725ce1c107277f2ddaf,"Rearrange condition blocking to ensure Handler thread loops

Without this change, any prepare() operation that requires posting to
the DummyMainThread's handler cannot complete preparation.

PiperOrigin-RevId: 233050367"
ojw28,2019-02-08 13:25:11,https://api.github.com/repos/google/ExoPlayer/git/commits/fd979790f24511701c233fad2013000a8ede8cd1,fd979790f24511701c233fad2013000a8ede8cd1,"Some no-op CacheContentIndex cleanup

Push Cipher and SecretKeySpec instantiation into AtomicFileStorage,
since SQLiteStorage no longer needs them.

PiperOrigin-RevId: 233043754"
ojw28,2019-02-08 10:53:39,https://api.github.com/repos/google/ExoPlayer/git/commits/42e691519a9af7f475971b8e67e5a7d5959df73f,42e691519a9af7f475971b8e67e5a7d5959df73f,"Generate per-cache unique identifier.

PiperOrigin-RevId: 233030337"
andrewlewis,2019-02-08 09:04:56,https://api.github.com/repos/google/ExoPlayer/git/commits/dec00997e3f6b023527208888004d56a0da54317,dec00997e3f6b023527208888004d56a0da54317,"Remove deprecated ImaAdsMediaSource and constructors

Given the change to require setPlayer on AdsLoaders, it seems like a good
opportunity to clean up deprecated ads-related symbols.

PiperOrigin-RevId: 233020171"
ojw28,2019-02-07 20:28:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1a5bf28669a34583eb77e524560305a80382e4c2,1a5bf28669a34583eb77e524560305a80382e4c2,"Cleanup for database on internal storage

PiperOrigin-RevId: 232923385"
ojw28,2019-02-07 14:38:49,https://api.github.com/repos/google/ExoPlayer/git/commits/dd99fdcb8256c1bcdfee5611f2e9a128f89ffd1f,dd99fdcb8256c1bcdfee5611f2e9a128f89ffd1f,"Changes for SQLite databases on internal storage

- Remove ability to encrypt content index for SQLite storage
- Remove hack for specifying arbitrary database location

PiperOrigin-RevId: 232863763"
ojw28,2019-02-07 10:21:13,https://api.github.com/repos/google/ExoPlayer/git/commits/a7324061b3db3fd9b2c6e3a10fdc2f8106d6109d,a7324061b3db3fd9b2c6e3a10fdc2f8106d6109d,"Fix proguard configuration

PiperOrigin-RevId: 232835218"
andrewlewis,2019-02-06 16:04:58,https://api.github.com/repos/google/ExoPlayer/git/commits/858415e3b1bd0b9d533b78009cc7d07c3d6df6c3,858415e3b1bd0b9d533b78009cc7d07c3d6df6c3,"Update test names for attach -> start renaming

PiperOrigin-RevId: 232676346"
tonihei,2019-02-06 15:59:33,https://api.github.com/repos/google/ExoPlayer/git/commits/f898bddbfc90276fbf4d4d0ff0459b7e76501e69,f898bddbfc90276fbf4d4d0ff0459b7e76501e69,"Do not prepare MediaPeriods in a loop.

They may prepare immediately and let pendingMediaPeriods become empty before
all other periods are even created.

PiperOrigin-RevId: 232675283"
szaboa,2019-02-16 10:17:09,https://api.github.com/repos/google/ExoPlayer/git/commits/eaf0d40886db5cb15f0ce29882f63619cc7f5475,eaf0d40886db5cb15f0ce29882f63619cc7f5475,Extract time bar delay calculations to a static method
szaboa,2019-02-13 17:31:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ecfce46296978b5c9f9daba718f773d597568e5a,ecfce46296978b5c9f9daba718f773d597568e5a,Changes according to the code review
szaboa,2019-02-12 21:02:34,https://api.github.com/repos/google/ExoPlayer/git/commits/62e6455dce87c92754ba939010d6c1b40a95218f,62e6455dce87c92754ba939010d6c1b40a95218f,Taking consideration the current position before calculating the delay before the next update
szaboa,2019-02-10 19:43:34,https://api.github.com/repos/google/ExoPlayer/git/commits/c905891d108d34ee0c914c298de08c89141af053,c905891d108d34ee0c914c298de08c89141af053,Taking into consideration the media's duration when updating the time bar
ojw28,2019-02-10 19:21:53,https://api.github.com/repos/google/ExoPlayer/git/commits/de39925ce941efe95cc80e8b43c294ccc8d76a0c,de39925ce941efe95cc80e8b43c294ccc8d76a0c,"Merge pull request #5455 from google/dev-v2-r2.9.5

r2.9.5"
ojw28,2019-02-10 19:06:35,https://api.github.com/repos/google/ExoPlayer/git/commits/4d843da6b0c4b98409e35d8d915a6ad7b15a2ddf,4d843da6b0c4b98409e35d8d915a6ad7b15a2ddf,Remove failing test on 2.9.5
zsmatyas,2019-02-07 21:13:47,https://api.github.com/repos/google/ExoPlayer/git/commits/fd4998bccad6a20a2df924869caa89bb7a7a463f,fd4998bccad6a20a2df924869caa89bb7a7a463f,Merge branch 'dev-v2' into dev-v2
ojw28,2019-02-06 15:17:00,https://api.github.com/repos/google/ExoPlayer/git/commits/a6c1dbe1563fc77cdc3b389ce3f1cca1cefa0aba,a6c1dbe1563fc77cdc3b389ce3f1cca1cefa0aba,"Implement CacheFileMetadataIndex using SQLite

PiperOrigin-RevId: 232670039"
erdemguven,2019-02-06 15:11:33,https://api.github.com/repos/google/ExoPlayer/git/commits/7eed60c9e31492e0ba18ce634b03482ddb340801,7eed60c9e31492e0ba18ce634b03482ddb340801,"Add DownloadManager.stopDownloads(int manualStopReason)

Also removed STOP_FLAG_DOWNLOAD_MANAGER_NOT_READY.

PiperOrigin-RevId: 232669463"
ojw28,2019-02-06 14:26:02,https://api.github.com/repos/google/ExoPlayer/git/commits/bdc87a4fc7fc07ca4446c790a644f5d60e42109d,bdc87a4fc7fc07ca4446c790a644f5d60e42109d,"API and plumbing for indexing file metadata (length + timestamp)

When SimpleCache uses a CacheFileMetadataIndex, it will be able to avoid
querying file.length() and renaming files, both of which are expensive
operations on some file systems.

PiperOrigin-RevId: 232664255"
ojw28,2019-02-06 13:45:55,https://api.github.com/repos/google/ExoPlayer/git/commits/3845304e5812717d82e2f28b3e100370069eab8a,3845304e5812717d82e2f28b3e100370069eab8a,"Shard SimpleCache files into 10 sub-directories

Issue: #4253
PiperOrigin-RevId: 232659869"
andrewlewis,2019-02-06 12:23:57,https://api.github.com/repos/google/ExoPlayer/git/commits/2169b9417faf249dc154acf969d749f6e1abf4b9,2169b9417faf249dc154acf969d749f6e1abf4b9,"Fix HEVC level error logging

PiperOrigin-RevId: 232651944"
ojw28,2019-02-05 19:05:59,https://api.github.com/repos/google/ExoPlayer/git/commits/ebfbb4f915d5dce884e31c4f7685fb9bbf25c552,ebfbb4f915d5dce884e31c4f7685fb9bbf25c552,"Hide progress bar for end state download notifications

Now we're reusing the builder, it's necessary to set maxProgress
back to 0 to avoid the progress bar appearing for end state
notifications.

PiperOrigin-RevId: 232520007"
andrewlewis,2019-02-05 18:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/0bf9ebf91e30e2699f4e9eef723c65f457070dd7,0bf9ebf91e30e2699f4e9eef723c65f457070dd7,"Switch to non-deprecated way of setting AdDisplayContainer

PiperOrigin-RevId: 232507469"
AquilesCanta,2019-02-05 18:04:30,https://api.github.com/repos/google/ExoPlayer/git/commits/fc2a99a68881d0381d81e1dbcded1b0d808355c1,fc2a99a68881d0381d81e1dbcded1b0d808355c1,"Generalize selectedVariantIndices in preparation for non-main adaptation

After this change, multiple HlsSampleStreamWrappers may contain an apdaptive
track group.

PiperOrigin-RevId: 232507292"
ojw28,2019-02-05 18:04:25,https://api.github.com/repos/google/ExoPlayer/git/commits/6b81d9e7a4f6c8cfdc309c4c61af362fe03051c3,6b81d9e7a4f6c8cfdc309c4c61af362fe03051c3,"Fix DownloadHelper for some HLS streams

onContinueLoadingRequested can occur during preparation, so
MediaPreparer needs to handle it.

PiperOrigin-RevId: 232507267"
andrewlewis,2019-02-05 17:46:03,https://api.github.com/repos/google/ExoPlayer/git/commits/589af35c65b98cbb2ef921dd0d2120b1b04d251e,589af35c65b98cbb2ef921dd0d2120b1b04d251e,"Set player on ads loader in IMA demo

Issue: #5476
PiperOrigin-RevId: 232503736"
ojw28,2019-02-05 17:45:39,https://api.github.com/repos/google/ExoPlayer/git/commits/e3981ec48404ee440dd4ac2cd53ee90e0785300a,e3981ec48404ee440dd4ac2cd53ee90e0785300a,"Fix notifications to avoid flicker on KitKat

On KitKat you need to reuse the same notification builder when
generating a notification that's intended to replace a previous
one. See:

https://stackoverflow.com/questions/6406730/updating-an-ongoing-notification-quietly

PiperOrigin-RevId: 232503682"
ojw28,2019-02-05 15:30:13,https://api.github.com/repos/google/ExoPlayer/git/commits/391f2bb6c2433895d48e3c79ac3d00d38633b9f6,391f2bb6c2433895d48e3c79ac3d00d38633b9f6,"Remove indirection in DefaultDownloadIndex

DefaultDownloadIndex is currently just forwarding all calls to its
inner class. getDownloadTable() handles initialization, but this
doesn't really seem different to having an initialization method. It
doesn't guarantee initialization happens, since a bad method
implementation could try and access downloadTable directly, just as
a bad method implementation could forget to call the initialization
method. Hence this change removes the indirection.

PiperOrigin-RevId: 232482228"
ojw28,2019-02-05 15:25:01,https://api.github.com/repos/google/ExoPlayer/git/commits/784906b87209328e1f208cf833ff6cc426c77040,784906b87209328e1f208cf833ff6cc426c77040,"Update release notes

PiperOrigin-RevId: 232481580"
erdemguven,2019-02-05 10:09:00,https://api.github.com/repos/google/ExoPlayer/git/commits/c0e6cd1b179ba4b5c705c59ffa7c79649398d1e0,c0e6cd1b179ba4b5c705c59ffa7c79649398d1e0,"Add DownloadState.mergeAction method

This method is needed by DownloadManager.

PiperOrigin-RevId: 232447145"
ojw28,2019-02-04 20:02:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c38cd1cca9e9deb50724d82fcbc3ac02c49505a9,c38cd1cca9e9deb50724d82fcbc3ac02c49505a9,Update release notes
ojw28,2019-02-04 19:59:52,https://api.github.com/repos/google/ExoPlayer/git/commits/9ea62f70cdbd5e4d7b5afd11ad452bee74ca7f05,9ea62f70cdbd5e4d7b5afd11ad452bee74ca7f05,Update release notes
tonihei,2019-02-04 17:40:01,https://api.github.com/repos/google/ExoPlayer/git/commits/6330d46d9eb2d653503dd172df70ab34839ad6b5,6330d46d9eb2d653503dd172df70ab34839ad6b5,"Improve housekeeping of ConcatenatingMediaSource callbacks.

When calling releaseSource(), all pending messages will be removed. That means
that all action-on-completion callbacks which are somewhere in flight are
just dropped without being called. This change adds code to keep track of the
current state of each callback to allow all of them being called when the
source is released.

Issue:#5464
PiperOrigin-RevId: 232312528"
tonihei,2019-01-15 11:07:05,https://api.github.com/repos/google/ExoPlayer/git/commits/9dc5c87079dff00abe9c92854fd1f6b8f9e11a29,9dc5c87079dff00abe9c92854fd1f6b8f9e11a29,"Remove messages on release of ConcatenatingMediaSource.

That was previously handled by the player. But since we switched to Handler
messages instead of player messages, we should do that manually.

PiperOrigin-RevId: 229341747"
tonihei,2019-01-04 17:55:49,https://api.github.com/repos/google/ExoPlayer/git/commits/22599a6d6cb581ddc578f485c8ba08c51a4a09a5,22599a6d6cb581ddc578f485c8ba08c51a4a09a5,"Pass Handler together with Runnable callbacks for playlist commands.

We currently either use the app thread returned by the player or the thread
the commands are called on depending on whether the media source is already
prepared or not.

This change lets the application decide which callback thread to use. As a
side effect, we also don't longer need access the player instance passed to
MediaSource.prepare.

PiperOrigin-RevId: 227871111"
ojw28,2019-02-04 19:35:06,https://api.github.com/repos/google/ExoPlayer/git/commits/fb81d629f0ee34a3bd4bb49cc7680d184298c297,fb81d629f0ee34a3bd4bb49cc7680d184298c297,"Merge #5462: Making easier to set the playClearSampleWithoutKeys to renderers

Imported from GitHub PR https://github.com/google/ExoPlayer/pull/5462

Pull request for the following issue: #5421
Merge d9d88b079c4ca0533a836b2715a65b924babbb89 into a73819162751116acd3863cf5473b0ff78fac805

PiperOrigin-RevId: 232335113"
tonihei,2019-02-04 17:39:35,https://api.github.com/repos/google/ExoPlayer/git/commits/1f476ecef077639a2407c34c2df974a4d2284c3c,1f476ecef077639a2407c34c2df974a4d2284c3c,"Add missing removeCallbacksAndMessages to RobolectricUtil.

The Util class already handles removeMessages calls but so far ignored calls
to removeCallbacksAndMessages.

PiperOrigin-RevId: 232312458"
ojw28,2019-02-04 16:11:26,https://api.github.com/repos/google/ExoPlayer/git/commits/f8772fda21135e519f05d3e168e95eadb54d0c1b,f8772fda21135e519f05d3e168e95eadb54d0c1b,"Wider fix for OMX.SEC.mp3.dec issue

Issue: #4519
PiperOrigin-RevId: 232299233"
ojw28,2019-02-04 19:35:06,https://api.github.com/repos/google/ExoPlayer/git/commits/67be9e77834c0dc9d2b5d462c01c2f39718c8817,67be9e77834c0dc9d2b5d462c01c2f39718c8817,"Merge #5462: Making easier to set the playClearSampleWithoutKeys to renderers

Imported from GitHub PR https://github.com/google/ExoPlayer/pull/5462

Pull request for the following issue: #5421
Merge d9d88b079c4ca0533a836b2715a65b924babbb89 into a73819162751116acd3863cf5473b0ff78fac805

PiperOrigin-RevId: 232335113"
tonihei,2019-02-04 18:26:40,https://api.github.com/repos/google/ExoPlayer/git/commits/3818d7329d19cdcd2d87bce812794a4ca77c9d30,3818d7329d19cdcd2d87bce812794a4ca77c9d30,"Use ExoPlayer's AnalyticsListener and AnalyticsCollector.

This combines all the different listeners in ExoVideosPlayerV2 into one and
moves the PlaybackLogger class towards ExoPlayer's AnalyticsCollector with
the same purpose.

In the future this allows two things:
 1. Gradually move LogginClient implementations to AnalyticsListener to
    prevent custom event forwarding.
 2. Using ExoPlayer's QoE extension (which is also an AnalyticsListener).

PiperOrigin-RevId: 232321182"
tonihei,2019-02-04 17:40:01,https://api.github.com/repos/google/ExoPlayer/git/commits/7a4cf96f4a91a51c42a83e0ba70eed6a2d5d9199,7a4cf96f4a91a51c42a83e0ba70eed6a2d5d9199,"Improve housekeeping of ConcatenatingMediaSource callbacks.

When calling releaseSource(), all pending messages will be removed. That means
that all action-on-completion callbacks which are somewhere in flight are
just dropped without being called. This change adds code to keep track of the
current state of each callback to allow all of them being called when the
source is released.

Issue:#5464
PiperOrigin-RevId: 232312528"
tonihei,2019-02-04 17:39:35,https://api.github.com/repos/google/ExoPlayer/git/commits/cd536a73b19f41d25846ae6cbc57443547043a71,cd536a73b19f41d25846ae6cbc57443547043a71,"Add missing removeCallbacksAndMessages to RobolectricUtil.

The Util class already handles removeMessages calls but so far ignored calls
to removeCallbacksAndMessages.

PiperOrigin-RevId: 232312458"
erdemguven,2019-02-04 17:03:12,https://api.github.com/repos/google/ExoPlayer/git/commits/a5d64463c781092f60664d9b86d9e0867dec0561,a5d64463c781092f60664d9b86d9e0867dec0561,"Make DownloadTracker use DownloadIndex

DownloadTracker will stop updating DownloadIndex when DownloadManager
starts using the same DownloadIndex.

PiperOrigin-RevId: 232306803"
ojw28,2019-02-04 16:48:34,https://api.github.com/repos/google/ExoPlayer/git/commits/fb99c26426b2f5b82b8528f52f6890c7ed2ef23b,fb99c26426b2f5b82b8528f52f6890c7ed2ef23b,"Implement CacheContentIndex storage switching

This change enables transitioning to/from different Storage
implementations, to allow experimentally enabling (and if
necessary, disabling) SQLiteStorage. All that's left to do
is the final wiring to turn it on

PiperOrigin-RevId: 232304458"
ojw28,2019-02-04 16:11:26,https://api.github.com/repos/google/ExoPlayer/git/commits/f1ded9c3c2192c0f72678df0ea0cf32f6cc1465e,f1ded9c3c2192c0f72678df0ea0cf32f6cc1465e,"Wider fix for OMX.SEC.mp3.dec issue

Issue: #4519
PiperOrigin-RevId: 232299233"
erdemguven,2019-02-04 13:06:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5e311fc82ac6996f2bb634f3f466f1bb4dd2f96f,5e311fc82ac6996f2bb634f3f466f1bb4dd2f96f,"Refactor DownloadManage to simplify DownloadThread management

Now DownloadManager is responsible for starting and stopping DownloadThreads.

PiperOrigin-RevId: 232278072"
AquilesCanta,2019-01-31 17:38:48,https://api.github.com/repos/google/ExoPlayer/git/commits/c61c0bd1ac429429f4264f061a5aebb96b172208,c61c0bd1ac429429f4264f061a5aebb96b172208,"Cast demo: Fix a few miscellaneous bugs

PiperOrigin-RevId: 231801562"
ybai001,2019-02-01 01:03:40,https://api.github.com/repos/google/ExoPlayer/git/commits/55ed5cfac665a563f6369056b387453223e7b223,55ed5cfac665a563f6369056b387453223e7b223,Set ac4-is sync only if SDK_INT <= 28
andrewlewis,2019-01-31 14:03:11,https://api.github.com/repos/google/ExoPlayer/git/commits/41689fdef7956409328e724fde5339fab092c65c,41689fdef7956409328e724fde5339fab092c65c,"Remove remainder of skip button focus hack

PiperOrigin-RevId: 231772920"
ojw28,2019-01-31 11:45:08,https://api.github.com/repos/google/ExoPlayer/git/commits/ba2ef0be9449a8a8ac966ec26a13b6d3375a090a,ba2ef0be9449a8a8ac966ec26a13b6d3375a090a,"Add additional device to output surface workaround

Issue: #4468
PiperOrigin-RevId: 231759438"
andrewlewis,2019-01-31 14:03:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a73819162751116acd3863cf5473b0ff78fac805,a73819162751116acd3863cf5473b0ff78fac805,"Remove remainder of skip button focus hack

PiperOrigin-RevId: 231772920"
AquilesCanta,2019-01-31 12:39:14,https://api.github.com/repos/google/ExoPlayer/git/commits/503c17d2ed9003562f0dd73716b7aace8970e0a5,503c17d2ed9003562f0dd73716b7aace8970e0a5,"Add constraint based track selection for ExoCast

PiperOrigin-RevId: 231764284"
ojw28,2019-01-31 11:45:08,https://api.github.com/repos/google/ExoPlayer/git/commits/d0b3d1cf635d1150793a535b443263633a8ea601,d0b3d1cf635d1150793a535b443263633a8ea601,"Add additional device to output surface workaround

Issue: #4468
PiperOrigin-RevId: 231759438"
ojw28,2019-01-31 09:13:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ef6725bf4827148526f016467f26398fd20d0013,ef6725bf4827148526f016467f26398fd20d0013,"Bump version for 2.9.5 release

PiperOrigin-RevId: 231744540"
ybai001,2019-01-31 03:31:19,https://api.github.com/repos/google/ExoPlayer/git/commits/8f32c29cc6691536255d6d93bfd6537f1e245a5f,8f32c29cc6691536255d6d93bfd6537f1e245a5f,"Update code based on code review result

 * remove field mimeType in Ac4Util.java
 * change constant CHANNEL_COUNT_2 to private in Ac4Util.java"
ybai001,2019-01-31 03:19:59,https://api.github.com/repos/google/ExoPlayer/git/commits/3ea71f8ab8f4b3f8f291c0d7a83324161ff68f62,3ea71f8ab8f4b3f8f291c0d7a83324161ff68f62,Merge branch 'dev-v2-ac4' of https://github.com/DolbyLaboratories/ExoPlayer into dev-v2-ac4
ojw28,2019-01-30 22:35:19,https://api.github.com/repos/google/ExoPlayer/git/commits/7a819cba656a98c7a7ab97f2ae17c4c23be47b7d,7a819cba656a98c7a7ab97f2ae17c4c23be47b7d,Remove stray line
ojw28,2019-01-30 22:33:12,https://api.github.com/repos/google/ExoPlayer/git/commits/4a946550c9dd9aeb45c6f2475e584a8b29ceb7ad,4a946550c9dd9aeb45c6f2475e584a8b29ceb7ad,Update version
ojw28,2019-01-30 22:31:33,https://api.github.com/repos/google/ExoPlayer/git/commits/9997bb41ab3b3da128647fa8883721867290972b,9997bb41ab3b3da128647fa8883721867290972b,Update release notes
ojw28,2019-01-30 20:22:33,https://api.github.com/repos/google/ExoPlayer/git/commits/e553fb3f66e0b1b0dde584bb322cd957e4b77c5d,e553fb3f66e0b1b0dde584bb322cd957e4b77c5d,"Update OkHttp and Cronet dependencies

PiperOrigin-RevId: 231644908"
ojw28,2019-01-30 20:22:33,https://api.github.com/repos/google/ExoPlayer/git/commits/2ab91bf08a1fee65cb3164fc92619daa513123c5,2ab91bf08a1fee65cb3164fc92619daa513123c5,"Update OkHttp and Cronet dependencies

PiperOrigin-RevId: 231644908"
AquilesCanta,2019-01-30 17:32:03,https://api.github.com/repos/google/ExoPlayer/git/commits/2bd12c2270c6d5e335e01cd25f0391fecdc3228e,2bd12c2270c6d5e335e01cd25f0391fecdc3228e,"Move DefaultTrackSelector.Parameters out of DefaultTrackSelector

Including ParametersBuilder and TrackSelectionOverride.

PiperOrigin-RevId: 231609249"
AquilesCanta,2019-01-21 10:18:01,https://api.github.com/repos/google/ExoPlayer/git/commits/92e60d2edb575cf19f385bfc7d5af212401bddc0,92e60d2edb575cf19f385bfc7d5af212401bddc0,"Add DefaultTsPayloadReaderFactory flag to ignore HDMV DTS streams

Prevents collisions with SCTE-35 subtitles.

Issue:#5330
PiperOrigin-RevId: 230195494"
ojw28,2019-01-30 20:05:16,https://api.github.com/repos/google/ExoPlayer/git/commits/e5bf47e8cfba66209a12d2e15312d66cc14dac5d,e5bf47e8cfba66209a12d2e15312d66cc14dac5d,Fix issue delivering events to PlayerView OnClickListener
andrewlewis,2019-01-29 16:19:39,https://api.github.com/repos/google/ExoPlayer/git/commits/4acdc8d0b7363be550ebb88874fe4a399516c42c,4acdc8d0b7363be550ebb88874fe4a399516c42c,"Fix buffered position when loading has not completed

If there is data after the last samples in the container, we may request
continue loading after the last samples have been read but before the load has
completed. In this situation the buffered position is returned as
Long.MAX_VALUE, which prevents continuing loading, yet the media period is not
treated as fully buffered because its buffered position is not
C.TIME_END_OF_SOURCE.

PiperOrigin-RevId: 231406964"
andrewlewis,2019-01-28 09:02:05,https://api.github.com/repos/google/ExoPlayer/git/commits/21e593a14d54a5ddc42dd662556d2e3760575f9c,21e593a14d54a5ddc42dd662556d2e3760575f9c,"Fix float output capability check

Float output is only possible from API 21, but the high-res int
to float conversion path was checking for 32-bit PCM not float
output capability.

PiperOrigin-RevId: 231172495"
ojw28,2019-01-28 08:52:42,https://api.github.com/repos/google/ExoPlayer/git/commits/a96d26dbc1d6645298440710b3d23abcad64eaaf,a96d26dbc1d6645298440710b3d23abcad64eaaf,"Clarify LoopingMediaSource documentation

PiperOrigin-RevId: 231171425"
andrewlewis,2019-01-25 12:07:37,https://api.github.com/repos/google/ExoPlayer/git/commits/aec2b19c7d5853381043b6189c2771e4e755468d,aec2b19c7d5853381043b6189c2771e4e755468d,"Update IMA to 3.10.6

This brings in a memory leak fix.

Issue: #4114
PiperOrigin-RevId: 230880521"
AquilesCanta,2019-01-24 18:12:27,https://api.github.com/repos/google/ExoPlayer/git/commits/c176789927985183d292482c31eda760dd31f978,c176789927985183d292482c31eda760dd31f978,"Parse CHANNELS attribute from EXT-X-MEDIA

PiperOrigin-RevId: 230743198"
AquilesCanta,2019-01-24 17:19:51,https://api.github.com/repos/google/ExoPlayer/git/commits/28434044122e8e408ee357c2dd0f63b1e10c1cdc,28434044122e8e408ee357c2dd0f63b1e10c1cdc,"Move parseSelectionFlags with the rest of the parse{attribute} methods

PiperOrigin-RevId: 230734189"
ojw28,2019-01-30 16:34:23,https://api.github.com/repos/google/ExoPlayer/git/commits/ab67ab1aeab47fe3d68ebe354a8f9f6cf6a381e1,ab67ab1aeab47fe3d68ebe354a8f9f6cf6a381e1,"Implement database CachedContentIndex.Storage

PiperOrigin-RevId: 231600104"
erdemguven,2019-01-30 14:51:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c9b848e5006ebcdadc218b4e3ec7d481db3ee839,c9b848e5006ebcdadc218b4e3ec7d481db3ee839,"Synchronously change to next state from downloading state

PiperOrigin-RevId: 231586206"
andrewlewis,2019-01-30 13:48:30,https://api.github.com/repos/google/ExoPlayer/git/commits/55b5814842091af13d5ddc0d540f431c9d31142d,55b5814842091af13d5ddc0d540f431c9d31142d,"Remove unused vpxInit methods

PiperOrigin-RevId: 231578828"
AquilesCanta,2019-01-30 11:42:53,https://api.github.com/repos/google/ExoPlayer/git/commits/dc7bc4785ebce95a80db53d143d75d74fdcd8e8f,dc7bc4785ebce95a80db53d143d75d74fdcd8e8f,"Update ProgressiveMediaSource note

PiperOrigin-RevId: 231567138"
ojw28,2019-01-29 18:16:25,https://api.github.com/repos/google/ExoPlayer/git/commits/0dd305461d12da68667afe2155f19b143ad25ce5,0dd305461d12da68667afe2155f19b143ad25ce5,"Clarity improvement: Use named variables

PiperOrigin-RevId: 231425073"
andrewlewis,2019-01-29 16:19:39,https://api.github.com/repos/google/ExoPlayer/git/commits/52ff1820dfbb1933794c1f46c95c9bf1fdd8c7f5,52ff1820dfbb1933794c1f46c95c9bf1fdd8c7f5,"Fix buffered position when loading has not completed

If there is data after the last samples in the container, we may request
continue loading after the last samples have been read but before the load has
completed. In this situation the buffered position is returned as
Long.MAX_VALUE, which prevents continuing loading, yet the media period is not
treated as fully buffered because its buffered position is not
C.TIME_END_OF_SOURCE.

PiperOrigin-RevId: 231406964"
tonihei,2019-01-29 16:13:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f4e7af3fd0b22f211da06c9c5d63eac753cf000e,f4e7af3fd0b22f211da06c9c5d63eac753cf000e,"Handle duration change in updateQueuedPeriods.

We can keep the reading media period and continue playing if we haven't read
beyond the new duration. Otherwise, we can keep the period, but need to reset
the renderers as we already read too far.

PiperOrigin-RevId: 231406252"
ojw28,2019-01-29 14:47:13,https://api.github.com/repos/google/ExoPlayer/git/commits/d49e7ebae2c09cde5a0ed5af488555e4fdd62fd1,d49e7ebae2c09cde5a0ed5af488555e4fdd62fd1,"Fix nullness checks (pending stub to fix it properly)

PiperOrigin-RevId: 231396213"
ojw28,2019-01-29 13:18:25,https://api.github.com/repos/google/ExoPlayer/git/commits/e0711c64b84cd86a75f00ff659af19ea52d41f7f,e0711c64b84cd86a75f00ff659af19ea52d41f7f,"DatabaseFileProvidingContext: Support older API levels

On older API levels it's also necessary to implement
openOrCreateDatabase, to be called by SQLiteOpenHelper.

PiperOrigin-RevId: 231387559"
ojw28,2019-01-29 13:14:39,https://api.github.com/repos/google/ExoPlayer/git/commits/45433869e5069019fc48c69589c14331d889bd60,45433869e5069019fc48c69589c14331d889bd60,"Rename ExtractorMediaSource to ProgressiveMediaSource

It better describes what the class does. More importantly, we've had
inconsistent class names since we added offline support, for which we
added ProgressiveDownloader (""ExtractorDownloader"" doesn't make any
sense). We could really do with aligning the names for clarity.

(Sorry)

PiperOrigin-RevId: 231387268"
tonihei,2019-01-29 12:59:29,https://api.github.com/repos/google/ExoPlayer/git/commits/ef8335fc506f846527807a51e73ef74dc9428158,ef8335fc506f846527807a51e73ef74dc9428158,"Ensure normalized language code is used everywhere and update documentation.

Issue:#2867
PiperOrigin-RevId: 231385677"
tonihei,2019-01-29 12:59:04,https://api.github.com/repos/google/ExoPlayer/git/commits/6983f92ffd4b287be53dcac2e9289ba86aa429e2,6983f92ffd4b287be53dcac2e9289ba86aa429e2,"Add convenience methods to select multiple audio or text tracks for downloading.

These methods take a list of languages to be downloaded and add selections for
each of the languages.

PiperOrigin-RevId: 231385632"
tonihei,2019-01-29 12:58:45,https://api.github.com/repos/google/ExoPlayer/git/commits/71d77d7fa07521ee37436423d8fd28004e995bbf,71d77d7fa07521ee37436423d8fd28004e995bbf,"Remove DownloadHelper subclasses and use static methods instead.

The subclasses only call specific constructor combinations and can easily
replaced by static methods.

PiperOrigin-RevId: 231385606"
tonihei,2019-01-29 12:58:28,https://api.github.com/repos/google/ExoPlayer/git/commits/0a8ae74217f04e981786ea6b74192a0488e6ddb4,0a8ae74217f04e981786ea6b74192a0488e6ddb4,"Update DownloadHelper to use MediaSource and MediaPeriod directly.

This requires to prepare the media source and the periods in a small helper similar
to the metadata retriever. It also gets rid of the need to have abstract protected
methods to load the manifest, to extract the track groups and to convert to stream keys,
as this can now be handled by the media period.

PiperOrigin-RevId: 231385590"
tonihei,2019-01-29 12:58:10,https://api.github.com/repos/google/ExoPlayer/git/commits/32b40502fcc50a7287581003e3dd6e80d87bf21c,32b40502fcc50a7287581003e3dd6e80d87bf21c,"Add HlsMediaPeriod getStreamKeys implementation and tests.

PiperOrigin-RevId: 231385563"
tonihei,2019-01-29 12:57:53,https://api.github.com/repos/google/ExoPlayer/git/commits/6a52cd7445f3008e5d36fdce8bb02196052b5523,6a52cd7445f3008e5d36fdce8bb02196052b5523,"Ensure HlsMediaPeriod works with playlists without variants.

Currently, we remove all variants if none of the stream keys contains any
variants. This causes HlsMediaPeriod to throw exceptions as it expects at least
one variant.

Change it to support master playlists without variants.

PiperOrigin-RevId: 231385547"
tonihei,2019-01-29 12:57:37,https://api.github.com/repos/google/ExoPlayer/git/commits/9779f2c358913a947e02bd19aa7c423d677e5c28,9779f2c358913a947e02bd19aa7c423d677e5c28,"Add DashMediaPeriod getStreamKeys implementation and test.

PiperOrigin-RevId: 231385518"
tonihei,2019-01-29 12:57:22,https://api.github.com/repos/google/ExoPlayer/git/commits/92bf8e918cc183cfaf2c6c93ff4533583c51c107,92bf8e918cc183cfaf2c6c93ff4533583c51c107,"Change getStreamKeys to take a list of TrackSelections.

Converting a single track selection to stream keys is only possible if the output
is independent from other track selections being made.

This is not the case for DASH and HLS embedded track groups which should select the
already selected primary track if possible (and thus needs to know  whether a primary
track group is selected).

Also, update the test method to take a period index.

PiperOrigin-RevId: 231385490"
tonihei,2019-01-29 12:01:33,https://api.github.com/repos/google/ExoPlayer/git/commits/f74e0eb992900c8198d384168fca745b33c6db59,f74e0eb992900c8198d384168fca745b33c6db59,"Add back deprecated MediaSource.prepareSource for ExoPlayerSampleExtractor.

This should be removed after releasing.

PiperOrigin-RevId: 231380393"
ojw28,2019-01-29 11:01:26,https://api.github.com/repos/google/ExoPlayer/git/commits/39505452deda442d0b59d8a4224d0132e77995f1,39505452deda442d0b59d8a4224d0132e77995f1,"Make VersionTable static

The way it is currently, it's very unclear that an operation on the
version table will correctly belong to a transaction in code such as
this, taken from DefaultDownloadIndex:

writableDatabase.beginTransaction();
try {
  writableDatabase.execSQL(...);
  versionTable.setVersion(...);
  writableDatabase.setTransactionSuccessful();
} finally {
  writableDatabase.endTransaction();
}

This change explicitly passes the database, to make it obvious that
the operation will really go into the same transaction:

writableDatabase.beginTransaction();
try {
  writableDatabase.execSQL(....);
  VersionTable.setVersion(writableDatabase, ...);
  writableDatabase.setTransactionSuccessful();
} finally {
  writableDatabase.endTransaction();
}

PiperOrigin-RevId: 231374933"
erdemguven,2019-01-28 16:24:47,https://api.github.com/repos/google/ExoPlayer/git/commits/bac8dfea12d307c45cb59dcca55f725f043b258e,bac8dfea12d307c45cb59dcca55f725f043b258e,"Add DownloadState not met requirement stop flags

PiperOrigin-RevId: 231223201"
ojw28,2019-01-28 12:51:48,https://api.github.com/repos/google/ExoPlayer/git/commits/19144c4c7361d47ee99799fa2b53a134160f3e4f,19144c4c7361d47ee99799fa2b53a134160f3e4f,"Allow to disable libyuv dependency on LIBVPX

Goal: reduce binary size.
PiperOrigin-RevId: 231198579"
andrewlewis,2019-01-28 09:02:05,https://api.github.com/repos/google/ExoPlayer/git/commits/866835ea03d1ee908a4a8d4fd3b8c69357679285,866835ea03d1ee908a4a8d4fd3b8c69357679285,"Fix float output capability check

Float output is only possible from API 21, but the high-res int
to float conversion path was checking for 32-bit PCM not float
output capability.

PiperOrigin-RevId: 231172495"
ojw28,2019-01-28 08:52:42,https://api.github.com/repos/google/ExoPlayer/git/commits/6b068c6ffbd0cd418cfe865ba6c4329f361ba8e4,6b068c6ffbd0cd418cfe865ba6c4329f361ba8e4,"Clarify LoopingMediaSource documentation

PiperOrigin-RevId: 231171425"
ojw28,2019-01-25 13:54:57,https://api.github.com/repos/google/ExoPlayer/git/commits/3c6b72ee29f5cebc1079648a73c461a26e035fa8,3c6b72ee29f5cebc1079648a73c461a26e035fa8,"Fix nullness test

PiperOrigin-RevId: 230889470"
ojw28,2019-01-25 12:57:32,https://api.github.com/repos/google/ExoPlayer/git/commits/a1c13ca6f5033f713b499e841d407c6e45e161a1,a1c13ca6f5033f713b499e841d407c6e45e161a1,"Hack to instantiate ExoDatabaseProvider without a context

This will allow CachedContentIndex to start using database
storage without us having to change the SimpleCache and
CachedContentIndex constructors to require a Context or a
DatabaseProvider.

PiperOrigin-RevId: 230884501"
andrewlewis,2019-01-25 12:07:37,https://api.github.com/repos/google/ExoPlayer/git/commits/0cf43fc64ea80ff34ed4dc650260286c5535fd1f,0cf43fc64ea80ff34ed4dc650260286c5535fd1f,"Update IMA to 3.10.6

This brings in a memory leak fix.

Issue: #4114
PiperOrigin-RevId: 230880521"
tonihei,2019-01-25 11:42:22,https://api.github.com/repos/google/ExoPlayer/git/commits/582adb748ae1c1beff071b962f5a3ef08d6f01b7,582adb748ae1c1beff071b962f5a3ef08d6f01b7,"Decouple end position from MediaPeriodId again.

If are allowing changing durations of periods, we shouldn't use the end position
of clipped content as part of the id as it may change. This change moves the end
position back to MediaPeriodInfo and adds the next ad group index to the id
instead to ensure we still have unique ids for all content parts.

PiperOrigin-RevId: 230878389"
AquilesCanta,2019-01-24 18:12:27,https://api.github.com/repos/google/ExoPlayer/git/commits/6dde1e67d3a3462cf6a40d290a76bcf32147652e,6dde1e67d3a3462cf6a40d290a76bcf32147652e,"Parse CHANNELS attribute from EXT-X-MEDIA

PiperOrigin-RevId: 230743198"
AquilesCanta,2019-01-24 17:19:51,https://api.github.com/repos/google/ExoPlayer/git/commits/9d19a7a4b67e8ad3e3b3cec0ebc883367e45a261,9d19a7a4b67e8ad3e3b3cec0ebc883367e45a261,"Move parseSelectionFlags with the rest of the parse{attribute} methods

PiperOrigin-RevId: 230734189"
AquilesCanta,2019-01-24 15:26:59,https://api.github.com/repos/google/ExoPlayer/git/commits/642a0275d84b060f11e19122dca69498a1792a25,642a0275d84b060f11e19122dca69498a1792a25,"Propagate ExoCast errors receiver from the receiver app

PiperOrigin-RevId: 230717561"
ojw28,2019-01-24 13:01:36,https://api.github.com/repos/google/ExoPlayer/git/commits/355b3d6334f48e185d4d471a4d154147d551b471,355b3d6334f48e185d4d471a4d154147d551b471,"Increase minSdkVersion to 16

The combination of pre-16 API levels accounting for ~0.5% of the device
population, and that the most important components in ExoPlayer (e.g.
the MediaCodec renderers) have always required API level 16, mean it's
very unlikely this will negatively impact on anyone.

PiperOrigin-RevId: 230701808"
ojw28,2019-01-24 11:50:58,https://api.github.com/repos/google/ExoPlayer/git/commits/2c54b8346466128b81edcac879d728d6196e5eda,2c54b8346466128b81edcac879d728d6196e5eda,"Move CachedContentIndex storage behind an interface

This interface will get an SQLite implementation in a subsequent CL

PiperOrigin-RevId: 230693881"
ojw28,2019-01-24 11:33:44,https://api.github.com/repos/google/ExoPlayer/git/commits/f182c0c1169cba7c22280058368127c24609054f,f182c0c1169cba7c22280058368127c24609054f,"Centralize serialization in CachedContentIndex

We need to support serialization to/from an SQLite table. The
model of passing something around for each class to write into
doesn't work well for SQL, and it would be messy to have two
different structural designs for serialization. This change
centralizes the logic in CachedContentIndex, where a centralized
SQL based version can more easily sit alongside it.

PiperOrigin-RevId: 230692291"
tonihei,2019-01-24 11:02:39,https://api.github.com/repos/google/ExoPlayer/git/commits/49b9775d0822c2310fb633a8e3cd779d11b9e029,49b9775d0822c2310fb633a8e3cd779d11b9e029,"Add getReadingPositionUs to Renderer.

This method is a generalization of the existing hasReadStreamToEnd. It is
useful to determine whether a renderer already read beyond a new duration of
a period.

PiperOrigin-RevId: 230689165"
AquilesCanta,2019-01-23 17:46:44,https://api.github.com/repos/google/ExoPlayer/git/commits/fd081d49c7f29baaea8e51eb5eb8721a96c4941b,fd081d49c7f29baaea8e51eb5eb8721a96c4941b,"Make the Cast demo app absorb remote queue changes

Necessary in two scenarios:
+ When the demo app starts casting to a receiver app that already
  had a queue.
+ When two demo apps are connected to the same receiver app and
  both make modifications.

PiperOrigin-RevId: 230546851"
tonihei,2019-01-23 14:30:01,https://api.github.com/repos/google/ExoPlayer/git/commits/d7b382017506382531c492e5a27218d7317c7366,d7b382017506382531c492e5a27218d7317c7366,"Make updateQueuedPeriods more readable and fix bug.

1. The method kept track of the current period index to check if the next
period is still in the correct period. This is unneccessary since we no longer
use the period index but the actual uid in MediaPeriodId and mismatches are
already detected by canKeepMediaPeriodHolder.
2. We updated the MediaPeriodIndfo twice: once in getFollowingMediaPeriodInfo
and once in getUpdatedMediaPeriodInfo. That's confusing and difficult to
follow. The only difference is that getUpdatedMediaPeriodInfo keeps the
content position while getFollowingMediaPeriodInfo resets it. This is made more
explicit for readability.
3. The durations compatibility check for all following periods was broken as
it compared the same durations (partly due to the confusion caused by 2.)

PiperOrigin-RevId: 230519295"
ojw28,2019-01-23 10:51:02,https://api.github.com/repos/google/ExoPlayer/git/commits/3a54d744b94f38e626af696d7083d71b679d3494,3a54d744b94f38e626af696d7083d71b679d3494,"Default to respecting the DataSpec cache fragmentation flag

Issue: #4253
PiperOrigin-RevId: 230497544"
AquilesCanta,2019-01-23 10:40:56,https://api.github.com/repos/google/ExoPlayer/git/commits/52f25f6ea800e98063b5cabdcdc6d9467ccf065b,52f25f6ea800e98063b5cabdcdc6d9467ccf065b,"Add HLS stream and remove non-working content from Cast demo app

PiperOrigin-RevId: 230496581"
ojw28,2019-01-22 17:43:55,https://api.github.com/repos/google/ExoPlayer/git/commits/4182f37b6e28869debe19c004cddc6681c3c18dd,4182f37b6e28869debe19c004cddc6681c3c18dd,"Make notification dismissible iff player is active

Seems like more useful default behaviour

PiperOrigin-RevId: 230356813"
ojw28,2019-01-21 23:52:18,https://api.github.com/repos/google/ExoPlayer/git/commits/de3a749b970b22258b2ab50c707fa6dbdb09dc1a,de3a749b970b22258b2ab50c707fa6dbdb09dc1a,"Fix scheduler NPE in DownloadService

PiperOrigin-RevId: 230260266"
ojw28,2019-01-21 21:06:03,https://api.github.com/repos/google/ExoPlayer/git/commits/29711b922d2b14cf89819af06a0a4dc2561bec7d,29711b922d2b14cf89819af06a0a4dc2561bec7d,"Cancel notification on dismiss

This doesn't happen automatically after all on older devices

PiperOrigin-RevId: 230251258"
ojw28,2019-01-21 14:38:00,https://api.github.com/repos/google/ExoPlayer/git/commits/9fec49f326d62c7ea8137635101a4f6dceed9d82,9fec49f326d62c7ea8137635101a4f6dceed9d82,"Update 2.9.4 release notes

PiperOrigin-RevId: 230220448"
ybai001,2019-01-25 08:49:43,https://api.github.com/repos/google/ExoPlayer/git/commits/51632f027d09a1c1d456c184cf3b2ea79fc1330f,51632f027d09a1c1d456c184cf3b2ea79fc1330f,Update Ac4Reader.java
ybai001,2018-12-24 01:38:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e462c6aab7dc5cab47c3daae5298626612d352be,e462c6aab7dc5cab47c3daae5298626612d352be,"Add AC-4 format support

 * Add AC-4 MIME type definition
 * Add AC-4 format support in Mp4Extractor and TsExtractor
 * Add AC-4 Extractor
 * Add AC-4 playback support in MPEG-4, MPEG-DASH, TS and HLS"
ybai001,2018-12-24 01:38:52,https://api.github.com/repos/google/ExoPlayer/git/commits/460f57614230837eab74b1f6bcd200bb3e3da15f,460f57614230837eab74b1f6bcd200bb3e3da15f,"Add AC-4 format support

 * Add AC-4 MIME type definition
 * Add AC-4 format support in Mp4Extractor and TsExtractor
 * Add AC-4 Extractor
 * Add AC-4 playback support in MPEG-4, MPEG-DASH, TS and HLS"
ojw28,2019-01-21 20:57:18,https://api.github.com/repos/google/ExoPlayer/git/commits/1c4ea26ff0ff530a1282398377a2cddfceefc3f6,1c4ea26ff0ff530a1282398377a2cddfceefc3f6,"Merge pull request #5388 from google/dev-v2-r2.9.4

r2.9.4"
ojw28,2019-01-21 14:21:29,https://api.github.com/repos/google/ExoPlayer/git/commits/200c877d712a15456ffa8129299658090f3f99a6,200c877d712a15456ffa8129299658090f3f99a6,Fix release notes
tonihei,2019-01-21 13:52:14,https://api.github.com/repos/google/ExoPlayer/git/commits/0b49d002f109b2c85538f896e27def12236c1ae2,0b49d002f109b2c85538f896e27def12236c1ae2,"Use loading period event time for fatal load errors.

ExoPlaybackExceptions of type SOURCE are always associated with the loading
period and thus we can use the event time for the loading period in
onPlayerError. Renderer and unexpected exceptions are still associated with the
currently playing period.

Issue:#5407
PiperOrigin-RevId: 230216253"
tonihei,2019-01-21 13:52:14,https://api.github.com/repos/google/ExoPlayer/git/commits/923aa420dfe6eb19eb05647d90d7c5aff62198fb,923aa420dfe6eb19eb05647d90d7c5aff62198fb,"Use loading period event time for fatal load errors.

ExoPlaybackExceptions of type SOURCE are always associated with the loading
period and thus we can use the event time for the loading period in
onPlayerError. Renderer and unexpected exceptions are still associated with the
currently playing period.

Issue:#5407
PiperOrigin-RevId: 230216253"
andrewlewis,2019-01-21 13:23:52,https://api.github.com/repos/google/ExoPlayer/git/commits/289f63c6505a95049a955fc294ac189e44453686,289f63c6505a95049a955fc294ac189e44453686,"Fix GVR dependency

PiperOrigin-RevId: 230213842"
andrewlewis,2019-01-18 16:21:57,https://api.github.com/repos/google/ExoPlayer/git/commits/95bef2d9b138fefb48ed0efd0cd51c17a63dd130,95bef2d9b138fefb48ed0efd0cd51c17a63dd130,"Upgrade to GVR SDK 1.190.0

Change the dependency to the new monolithic GVR SDK target.

PiperOrigin-RevId: 229931549"
andrewlewis,2019-01-21 13:23:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e671dac9a2c31d2670470f7a6d9c0cd7ada5030b,e671dac9a2c31d2670470f7a6d9c0cd7ada5030b,"Fix GVR dependency

PiperOrigin-RevId: 230213842"
tonihei,2019-01-21 12:15:30,https://api.github.com/repos/google/ExoPlayer/git/commits/563d3c20ab32a8f4bdf46d8f9e6dcd62fb6aaccf,563d3c20ab32a8f4bdf46d8f9e6dcd62fb6aaccf,"Add max video size workaround for Amlogic decoder.

The Amlogic awesome decoder reduces the video size of interlaced videos by half
if the internal configuration isn't force reset with new maximum input size
values. The product of these new values must exceed 1920x1088 to force the
reset.

Issue:#5003
PiperOrigin-RevId: 230206675"
tonihei,2019-01-17 17:08:52,https://api.github.com/repos/google/ExoPlayer/git/commits/29376b3dd2c820bd3c3497edd7ff583d9b0f530d,29376b3dd2c820bd3c3497edd7ff583d9b0f530d,"Add missing @Nullable to SimpleExoPlayer fields and methods.

Issue:#5402
PiperOrigin-RevId: 229758525"
ojw28,2019-01-21 12:44:07,https://api.github.com/repos/google/ExoPlayer/git/commits/c2f6dd6b0aab6c35424ea6a47974c99bc60b9fc3,c2f6dd6b0aab6c35424ea6a47974c99bc60b9fc3,"Only allow one layer of sub-directories in the cache for now

PiperOrigin-RevId: 230209898"
tonihei,2019-01-21 12:15:30,https://api.github.com/repos/google/ExoPlayer/git/commits/e4eaaedad32945aa25e9148c7c495f764ca66d0b,e4eaaedad32945aa25e9148c7c495f764ca66d0b,"Add max video size workaround for Amlogic decoder.

The Amlogic awesome decoder reduces the video size of interlaced videos by half
if the internal configuration isn't force reset with new maximum input size
values. The product of these new values must exceed 1920x1088 to force the
reset.

Issue:#5003
PiperOrigin-RevId: 230206675"
ojw28,2019-01-21 11:42:47,https://api.github.com/repos/google/ExoPlayer/git/commits/fb6154a905cdc7c111c7343a7a6a331dfc5527d1,fb6154a905cdc7c111c7343a7a6a331dfc5527d1,"Wipe database on downgrade

PiperOrigin-RevId: 230203593"
AquilesCanta,2019-01-21 10:18:01,https://api.github.com/repos/google/ExoPlayer/git/commits/93e24561bbc642fa1abf62f4c1ecdacff403edfe,93e24561bbc642fa1abf62f4c1ecdacff403edfe,"Add DefaultTsPayloadReaderFactory flag to ignore HDMV DTS streams

Prevents collisions with SCTE-35 subtitles.

Issue:#5330
PiperOrigin-RevId: 230195494"
ojw28,2019-01-18 18:03:15,https://api.github.com/repos/google/ExoPlayer/git/commits/82da627c1a2273021fc1df027e879db71907b630,82da627c1a2273021fc1df027e879db71907b630,"Split out shared database components for reuse in caching

PiperOrigin-RevId: 229946997"
tonihei,2019-01-18 16:44:29,https://api.github.com/repos/google/ExoPlayer/git/commits/02dc937c78370240ffa763e9b5c89fa002a36cbd,02dc937c78370240ffa763e9b5c89fa002a36cbd,"Fix flaky DownloadIndexUtilTest.

PiperOrigin-RevId: 229934901"
marcbaechinger,2019-01-18 16:41:06,https://api.github.com/repos/google/ExoPlayer/git/commits/57ed00873ff948370d38901b5b0fd73992abfc7e,57ed00873ff948370d38901b5b0fd73992abfc7e,"bazel build and workspace to build cast receiver

PiperOrigin-RevId: 229934333"
ojw28,2019-01-18 16:39:44,https://api.github.com/repos/google/ExoPlayer/git/commits/14eb561e3818579ab77ff727b612f0f9b55dcecc,14eb561e3818579ab77ff727b612f0f9b55dcecc,"Use MediaCrypto.setMediaDrmSession to avoid black flicker

Issue: #3561
PiperOrigin-RevId: 229934093"
AquilesCanta,2019-01-18 16:27:53,https://api.github.com/repos/google/ExoPlayer/git/commits/6a55fda66d5c51b75497bd940f138e3a82b674e0,6a55fda66d5c51b75497bd940f138e3a82b674e0,"Add DRM protected content to the Cast demo APP

Allows testing DRM-protected content in the receiver app.

Includes the DRM-related data to the media items, but does not
add support for DRM content in the local player yet.

PiperOrigin-RevId: 229932329"
andrewlewis,2019-01-18 16:21:57,https://api.github.com/repos/google/ExoPlayer/git/commits/310925ca129449b67f79167f0e9d2875f01438ff,310925ca129449b67f79167f0e9d2875f01438ff,"Upgrade to GVR SDK 1.190.0

Change the dependency to the new monolithic GVR SDK target.

PiperOrigin-RevId: 229931549"
tonihei,2019-01-18 14:57:10,https://api.github.com/repos/google/ExoPlayer/git/commits/23c07e5c4d1077e67087fa80d8b27d571cf5a60b,23c07e5c4d1077e67087fa80d8b27d571cf5a60b,"Update buffer-based ABR to not select track in constructor.

This mimicks a similar change in the default AdaptiveTrackSelection.
Also adds an option to cap initial format height.

PiperOrigin-RevId: 229923149"
ojw28,2019-01-18 00:44:17,https://api.github.com/repos/google/ExoPlayer/git/commits/ef24125d20b3092c270299e092bdd2f7994bc7e8,ef24125d20b3092c270299e092bdd2f7994bc7e8,"Fix release notes for 2.9.4

PiperOrigin-RevId: 229841782"
tonihei,2019-01-17 17:00:11,https://api.github.com/repos/google/ExoPlayer/git/commits/9911c11191e7df82998eaac377debb33724ac9c0,9911c11191e7df82998eaac377debb33724ac9c0,"Add start position to MediaSource.createPeriod.

That's the same position set in MediaPeriod.prepare (where it may be removed
in the future).

Having the position at an earlier point is necessary to fix an
issue with lazy preparation in ConcatenatingMediaSource where the prepare
position was assumed to be known but MediaPeriod.prepare hasn't been called
yet.

Issue:#5350
PiperOrigin-RevId: 229756637"
marcbaechinger,2019-01-16 11:05:44,https://api.github.com/repos/google/ExoPlayer/git/commits/8bf1267495a414aa5873d67657a23f3e730ff66b,8bf1267495a414aa5873d67657a23f3e730ff66b,"allow developers to set the subText of the notifcation

Issue: #5344
PiperOrigin-RevId: 229527963"
tonihei,2019-01-17 17:08:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ac86d3b5f6bb44b68d673c7a06e4a34bf0202f3c,ac86d3b5f6bb44b68d673c7a06e4a34bf0202f3c,"Add missing @Nullable to SimpleExoPlayer fields and methods.

Issue:#5402
PiperOrigin-RevId: 229758525"
tonihei,2019-01-17 17:00:11,https://api.github.com/repos/google/ExoPlayer/git/commits/22413b8037426ed0c40b479aa09680bca40e5df8,22413b8037426ed0c40b479aa09680bca40e5df8,"Add start position to MediaSource.createPeriod.

That's the same position set in MediaPeriod.prepare (where it may be removed
in the future).

Having the position at an earlier point is necessary to fix an
issue with lazy preparation in ConcatenatingMediaSource where the prepare
position was assumed to be known but MediaPeriod.prepare hasn't been called
yet.

Issue:#5350
PiperOrigin-RevId: 229756637"
marcbaechinger,2019-01-17 16:53:00,https://api.github.com/repos/google/ExoPlayer/git/commits/76baa5724caad62c3bddd312181cf6362b579c5b,76baa5724caad62c3bddd312181cf6362b579c5b,"solve nullness check warnings with asserts

PiperOrigin-RevId: 229755532"
erdemguven,2019-01-17 15:36:25,https://api.github.com/repos/google/ExoPlayer/git/commits/f2139d1b7173b38b21111526b9f32bff8d6cdc8b,f2139d1b7173b38b21111526b9f32bff8d6cdc8b,"Add DownloadIndexUtil

This class includes helper methods to upgrade ActionFiles
and custom download records to DownloadIndex.

PiperOrigin-RevId: 229744441"
marcbaechinger,2019-01-16 20:18:42,https://api.github.com/repos/google/ExoPlayer/git/commits/16a185de1d42b049608c128bc203ea968234864a,16a185de1d42b049608c128bc203ea968234864a,"make PlayerNotificationListener better suited for foreground services

Issue: #5301
Issue: #4988
Issue: #4813
Issue: #5344
Issue: #5117
PiperOrigin-RevId: 229603354"
erdemguven,2019-01-16 14:03:07,https://api.github.com/repos/google/ExoPlayer/git/commits/ec77f737eece3c07f001261249b539fcf341251b,ec77f737eece3c07f001261249b539fcf341251b,"Make DownloadManager watch requirements directly

PiperOrigin-RevId: 229544734"
marcbaechinger,2019-01-16 11:05:44,https://api.github.com/repos/google/ExoPlayer/git/commits/8adc16a6232a523e46a86010b758d4c35ea645d9,8adc16a6232a523e46a86010b758d4c35ea645d9,"allow developers to set the subText of the notifcation

Issue: #5344
PiperOrigin-RevId: 229527963"
zsmatyas,2019-01-15 23:33:32,https://api.github.com/repos/google/ExoPlayer/git/commits/2621d962e70efd1223b4e7f63e1c903c3b586fa3,2621d962e70efd1223b4e7f63e1c903c3b586fa3,"CEA608: handling channel bits properly

[Problem]
CC1 is shown even when CC2-3-4 is selected

[Solution]
 * use incoming channel and frame information
 * Misc Codes need to handle use Frame information
 * Add checks everywhere

[Test]
* Live channels and already existing test should not show any difference
in behavior when CC1 is selected.
* Live channels might have CC2-CC3-CC4
* Sarnoff test content has specific test cases for channel support"
tonihei,2019-01-15 15:08:12,https://api.github.com/repos/google/ExoPlayer/git/commits/4483639f9a710717e9463c793175422f55b90462,4483639f9a710717e9463c793175422f55b90462,"Fix bug where missing switch adaptation set causes multiple identical track groups.

When the extra adaptation set of a switch group isn't defined in the manifest, we
currently assume it's the first adaptation group. This either leads to wrong grouping
or duplicate track groups.

Such a case may easily happen if the manifest is filtered such that only one of the
switch adaptation sets will be present in the manifest.

PiperOrigin-RevId: 229365379"
tonihei,2019-01-15 15:07:47,https://api.github.com/repos/google/ExoPlayer/git/commits/4f1f4fbf49e2cb1dc7743a5d272664ca8d509248,4f1f4fbf49e2cb1dc7743a5d272664ca8d509248,"Fix typo.

PiperOrigin-RevId: 229365333"
tonihei,2019-01-15 15:08:12,https://api.github.com/repos/google/ExoPlayer/git/commits/ca7675ceae7fde67cfca292ed7c1745a050573f7,ca7675ceae7fde67cfca292ed7c1745a050573f7,"Fix bug where missing switch adaptation set causes multiple identical track groups.

When the extra adaptation set of a switch group isn't defined in the manifest, we
currently assume it's the first adaptation group. This either leads to wrong grouping
or duplicate track groups.

Such a case may easily happen if the manifest is filtered such that only one of the
switch adaptation sets will be present in the manifest.

PiperOrigin-RevId: 229365379"
tonihei,2019-01-15 15:07:47,https://api.github.com/repos/google/ExoPlayer/git/commits/c6092bbb43a605d8fe9517fd90d0e3bec1806650,c6092bbb43a605d8fe9517fd90d0e3bec1806650,"Fix typo.

PiperOrigin-RevId: 229365333"
ojw28,2019-01-15 15:02:38,https://api.github.com/repos/google/ExoPlayer/git/commits/84574d9c111a7843795b825fd64fb07ff9ea022f,84574d9c111a7843795b825fd64fb07ff9ea022f,"Bump version for 2.9.4 release

PiperOrigin-RevId: 229364563"
ojw28,2019-01-15 15:02:38,https://api.github.com/repos/google/ExoPlayer/git/commits/36883e6277fed2fbec5a83afddc8c93e1838b884,36883e6277fed2fbec5a83afddc8c93e1838b884,"Bump version for 2.9.4 release

PiperOrigin-RevId: 229364563"
ojw28,2019-01-15 15:03:22,https://api.github.com/repos/google/ExoPlayer/git/commits/3b5e8ada31a098065c401cca2fffdf263a51b8c6,3b5e8ada31a098065c401cca2fffdf263a51b8c6,"Merge pull request #5355 from zsmatyas:dev-v2

PiperOrigin-RevId: 229364147"
ojw28,2019-01-15 14:32:15,https://api.github.com/repos/google/ExoPlayer/git/commits/516e02c696c13d95802fa91f843d73cce50d7d9d,516e02c696c13d95802fa91f843d73cce50d7d9d,Fix release branch
tonihei,2019-01-15 14:18:29,https://api.github.com/repos/google/ExoPlayer/git/commits/e1b55e6d278913341370ac7a54cfc77ceb80df3d,e1b55e6d278913341370ac7a54cfc77ceb80df3d,"Add buffer flag for last sample to improve buffered position calculation.

The buffered position is currently based on the mimimum queued timestamp of
all AV tracks. If the tracks have unequal lengths, one track continues loading
without bounds as the ""buffered position"" will always stay at the shorter
track's duration.

This change adds an optional buffer flag to mark the last sample of the
stream. This is set in the Mp4Extractor only so far. ExtractorMediaSource
uses this flag to ignore AV streams in the buffered duration calculation if
they already finished loading.

Issue:#3670
PiperOrigin-RevId: 229359899"
tonihei,2019-01-15 14:18:29,https://api.github.com/repos/google/ExoPlayer/git/commits/b97b35e2e0f1c1bf50c0c04de892592d3b2fe942,b97b35e2e0f1c1bf50c0c04de892592d3b2fe942,"Add buffer flag for last sample to improve buffered position calculation.

The buffered position is currently based on the mimimum queued timestamp of
all AV tracks. If the tracks have unequal lengths, one track continues loading
without bounds as the ""buffered position"" will always stay at the shorter
track's duration.

This change adds an optional buffer flag to mark the last sample of the
stream. This is set in the Mp4Extractor only so far. ExtractorMediaSource
uses this flag to ignore AV streams in the buffered duration calculation if
they already finished loading.

Issue:#3670
PiperOrigin-RevId: 229359899"
tonihei,2019-01-15 11:07:05,https://api.github.com/repos/google/ExoPlayer/git/commits/fcda01eb5c383751557f8ea817202aa98a12647e,fcda01eb5c383751557f8ea817202aa98a12647e,"Remove messages on release of ConcatenatingMediaSource.

That was previously handled by the player. But since we switched to Handler
messages instead of player messages, we should do that manually.

PiperOrigin-RevId: 229341747"
tonihei,2019-01-15 09:32:38,https://api.github.com/repos/google/ExoPlayer/git/commits/1900e941449db022bbbb9c7ddadd8375bd786feb,1900e941449db022bbbb9c7ddadd8375bd786feb,"Do not select a track in AdaptiveTrackSelection constructor.

This is not necessary as the track selection needs to be updated with
updateSelectedTrack anyway. It's also error-prone as the selection code
calls into a protected method of a not fully initialized class.

PiperOrigin-RevId: 229331669"
ojw28,2019-01-14 23:02:03,https://api.github.com/repos/google/ExoPlayer/git/commits/546af063d63de9b7b94470fb7b914b58ced9d5ef,546af063d63de9b7b94470fb7b914b58ced9d5ef,"Fix DRM protected SmoothStreaming with subtitles

Issue: #5378
PiperOrigin-RevId: 229261658"
tonihei,2019-01-14 14:02:46,https://api.github.com/repos/google/ExoPlayer/git/commits/66ca43ed1dca3011ce6efdf00703f14f8360948b,66ca43ed1dca3011ce6efdf00703f14f8360948b,"Don't forget isSeekable in ExtractorMediaSource.

We currently forget whether a source is seekable at re-preparation. This was
implemented intentionally this way under the assumption that we really can't seek
until we have loaded the seek map again. However, seek operations are only
allowed after a media period is prepared. So there is no harm in remembering
whether a source is seekable.

This problem currently prevents reusing ClippingMediaSources with
ExtractorMediaSource and a non-zero start clip position.

Issue: #5351
PiperOrigin-RevId: 229169441"
andrewlewis,2019-01-14 10:05:17,https://api.github.com/repos/google/ExoPlayer/git/commits/34d0e0cea124edaffb416a919665766d0b285b6c,34d0e0cea124edaffb416a919665766d0b285b6c,"Blacklist OMX.SEC.mp3.dec for more devices

Issue: #4519
PiperOrigin-RevId: 229145790"
tonihei,2019-01-09 17:23:30,https://api.github.com/repos/google/ExoPlayer/git/commits/81ca7fe090d3b22ca3b28bc3c5bae09c17c94541,81ca7fe090d3b22ca3b28bc3c5bae09c17c94541,"Add missing call to timeline.getWindow.

The window object is used without being filled with data. This used to work
well for most cases as the same live stream is sending regular updates and the
first update is almost never used if it's not the first item in a playlist.

It causes problems when the first timeline update of a live stream is actually
used for playback (e.g. when the live stream is lazily prepared in a playlist
and played first).

PiperOrigin-RevId: 228530232"
tonihei,2019-01-09 10:24:32,https://api.github.com/repos/google/ExoPlayer/git/commits/e760965595f914a56dcea7697c40c24110f7914e,e760965595f914a56dcea7697c40c24110f7914e,"Update README and dev guide with Java 8 config for Kotlin.

Setting the target conpatibility only seems to work for Java. Added the
equivalent Kotlin config options to the docs.

Issue:#5276
PiperOrigin-RevId: 228482496"
ojw28,2019-01-08 09:36:30,https://api.github.com/repos/google/ExoPlayer/git/commits/80645056d29ce5b48801bca3f6b64f7284d70b95,80645056d29ce5b48801bca3f6b64f7284d70b95,"Doc fix.

PiperOrigin-RevId: 228296962"
AquilesCanta,2019-01-07 14:34:31,https://api.github.com/repos/google/ExoPlayer/git/commits/93f4a19f07939bb3cdf606f69142f8de527735f7,93f4a19f07939bb3cdf606f69142f8de527735f7,"Expand check for muxed audio media tags to include uris that match variants

Issue:#5313
PiperOrigin-RevId: 228155222"
AquilesCanta,2019-01-07 12:36:59,https://api.github.com/repos/google/ExoPlayer/git/commits/32bad6915851b39a48d5385b1268a87d87d7ff20,32bad6915851b39a48d5385b1268a87d87d7ff20,"Increase search size in mp4 sniffing once moov has been found

Issue:#5320
PiperOrigin-RevId: 228142567"
andrewlewis,2019-01-04 16:42:40,https://api.github.com/repos/google/ExoPlayer/git/commits/ff9a40f0d76130c56b9eca7ec7cd7a00c8e6dd1d,ff9a40f0d76130c56b9eca7ec7cd7a00c8e6dd1d,"Update FakeAd overrides

These are part of published IMA SDK 3.10.2.

PiperOrigin-RevId: 227861713"
andrewlewis,2019-01-04 15:07:13,https://api.github.com/repos/google/ExoPlayer/git/commits/99bc13221c7448c9c2cb736e8b6c495c5a27db3f,99bc13221c7448c9c2cb736e8b6c495c5a27db3f,"Treat AVERROR_INVALIDDATA as non-fatal

Also configure the FFmpeg context to ignore errors as far as possible (this
appears to have an effect only for certain decoders).

Issue: #5293
PiperOrigin-RevId: 227851397"
andrewlewis,2019-01-04 09:51:01,https://api.github.com/repos/google/ExoPlayer/git/commits/189e3c31be13ca83d8f0f935d374c11099953420,189e3c31be13ca83d8f0f935d374c11099953420,"Fix nullness issue

PiperOrigin-RevId: 227822937"
andrewlewis,2019-01-04 08:27:21,https://api.github.com/repos/google/ExoPlayer/git/commits/a568fbdd51111f2790c88230d148ed0956912030,a568fbdd51111f2790c88230d148ed0956912030,"Parse frame rate from 'mdta' metadata

PiperOrigin-RevId: 227813461"
AquilesCanta,2019-01-03 16:02:48,https://api.github.com/repos/google/ExoPlayer/git/commits/4847889a2f200cc7070cf51fb10fe52ffea57fcb,4847889a2f200cc7070cf51fb10fe52ffea57fcb,"Prevent IllegalStateException in Mp4 sniffing

If a negative value is read, sniffing should just fail.

PiperOrigin-RevId: 227689568"
AquilesCanta,2019-01-03 13:29:00,https://api.github.com/repos/google/ExoPlayer/git/commits/61a7750f235b5a3fe457a8fbbbe42421d8e0bf18,61a7750f235b5a3fe457a8fbbbe42421d8e0bf18,"Enable setOutputSurfaceWorkaround for Huawei P10 lite

Issue:#5312
PiperOrigin-RevId: 227673949"
AquilesCanta,2019-01-03 12:26:03,https://api.github.com/repos/google/ExoPlayer/git/commits/aff689a7da40423fdd1601660c3b459a4450dfae,aff689a7da40423fdd1601660c3b459a4450dfae,"Fix bug when calculating EOF position in mp4 sniffing

PiperOrigin-RevId: 227668426"
tonihei,2019-01-03 09:36:35,https://api.github.com/repos/google/ExoPlayer/git/commits/fc168339035cfe091c75d5c169840be61d34170c,fc168339035cfe091c75d5c169840be61d34170c,"Use Handler instead of ExoPlayer messages in ConcatenatingMediaSource

ExoPlayer methods must not be called from any thread besides the specified
app thread. Therefore we shouldn't use them here. Using a regular Handler
instead is fully equivalent.

Issue:#5240
PiperOrigin-RevId: 227650489"
andrewlewis,2019-01-03 09:04:10,https://api.github.com/repos/google/ExoPlayer/git/commits/f11abbda97b80cfb01625ebb0da36b4d66243173,f11abbda97b80cfb01625ebb0da36b4d66243173,"Fix replacement char check

PiperOrigin-RevId: 227646358"
ojw28,2019-01-02 15:43:11,https://api.github.com/repos/google/ExoPlayer/git/commits/6373554d6a7f94ab8dba9b3f82bda928c7bd4dff,6373554d6a7f94ab8dba9b3f82bda928c7bd4dff,"Move syncFileDescriptor to use an experimental method

PiperOrigin-RevId: 227520168"
andrewlewis,2019-01-02 15:04:20,https://api.github.com/repos/google/ExoPlayer/git/commits/13638f1c29327bfec7d1e887771bcce8fb2bfd34,13638f1c29327bfec7d1e887771bcce8fb2bfd34,"Remove AdsLoader listeners on releasing ImaAdsLoader

Issue: #4114
PiperOrigin-RevId: 227516509"
ojw28,2019-01-02 11:39:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e448ecdff88ded7304ba7bb308b0fc114e0f3639,e448ecdff88ded7304ba7bb308b0fc114e0f3639,"Remove stray word

PiperOrigin-RevId: 227500707"
andrewlewis,2018-12-24 14:26:01,https://api.github.com/repos/google/ExoPlayer/git/commits/d3f5057d59f26cc50b6baae6de176a2df7f9b596,d3f5057d59f26cc50b6baae6de176a2df7f9b596,"Handle rectangular rotation projections in Matroska

See also https://github.com/Matroska-Org/matroska-specification/issues/269.

PiperOrigin-RevId: 226758584"
AquilesCanta,2018-12-17 13:52:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c0cdf3cd2d05afaa5d222d8bf720a5db5cf7556d,c0cdf3cd2d05afaa5d222d8bf720a5db5cf7556d,"Handle failure to get Cast context more gracefully

Issue:#4160
Issue:#4743
PiperOrigin-RevId: 225813243"
AquilesCanta,2018-12-17 13:45:40,https://api.github.com/repos/google/ExoPlayer/git/commits/c9cf8e409d4589415da4767d54465e883c8b7dd9,c9cf8e409d4589415da4767d54465e883c8b7dd9,"Update the Cast framework dependency

PiperOrigin-RevId: 225812585"
tonihei,2018-12-11 15:50:54,https://api.github.com/repos/google/ExoPlayer/git/commits/f79005ab0a8ba0a683d018b5469fe0c3aa76a969,f79005ab0a8ba0a683d018b5469fe0c3aa76a969,"Fix manifest uri in SsDownloadHelper.

This is the same as in SsMediaSource.

PiperOrigin-RevId: 225001911"
tonihei,2018-12-21 15:19:24,https://api.github.com/repos/google/ExoPlayer/git/commits/3833d98755f97a41d8ac294f11c8d72951876f59,3833d98755f97a41d8ac294f11c8d72951876f59,"Improve doc for setKeepContentOnPlayerReset.

This also applies when seeking or transitioning to unprepared media, which
isn't clear from the current documentation.

Issue:#5267
PiperOrigin-RevId: 226486685"
ojw28,2019-01-14 23:02:03,https://api.github.com/repos/google/ExoPlayer/git/commits/9ab08bbe5df406e3812acbf9c1980fc52f0262e0,9ab08bbe5df406e3812acbf9c1980fc52f0262e0,"Fix DRM protected SmoothStreaming with subtitles

Issue: #5378
PiperOrigin-RevId: 229261658"
ojw28,2019-01-14 22:17:50,https://api.github.com/repos/google/ExoPlayer/git/commits/0bfbcea632c14c56e6c14d8a3d1760b6e251a26b,0bfbcea632c14c56e6c14d8a3d1760b6e251a26b,"Reset requiresSecureDecoder boolean on codec release

PiperOrigin-RevId: 229253065"
ojw28,2019-01-14 15:09:13,https://api.github.com/repos/google/ExoPlayer/git/commits/1b62277a0b2bf72d68abd3afb6510647a7ff6643,1b62277a0b2bf72d68abd3afb6510647a7ff6643,"Disable cache fragmentation except for progressive

DataSpec.FLAG_ALLOW_CACHE_FRAGMENTATION is added to indicate to the
cache when fragmentation is allowed. This flag is set for progressive
requests only.

To avoid breaking changes, CacheDataSink defaults to ignoring the flag
(and enabling fragmentation) for now. Respecting the flag can be
enabled manually. DownloaderConstructorHelper enables respecting of
the flag.

Issue: #4253
PiperOrigin-RevId: 229176835"
tonihei,2019-01-14 14:02:46,https://api.github.com/repos/google/ExoPlayer/git/commits/86637facdd16f95a4ba2b444234dea722696daa5,86637facdd16f95a4ba2b444234dea722696daa5,"Don't forget isSeekable in ExtractorMediaSource.

We currently forget whether a source is seekable at re-preparation. This was
implemented intentionally this way under the assumption that we really can't seek
until we have loaded the seek map again. However, seek operations are only
allowed after a media period is prepared. So there is no harm in remembering
whether a source is seekable.

This problem currently prevents reusing ClippingMediaSources with
ExtractorMediaSource and a non-zero start clip position.

Issue: #5351
PiperOrigin-RevId: 229169441"
andrewlewis,2019-01-14 10:05:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f44fc542bb6cd22fb430ec3ca269d36a1ffc819e,f44fc542bb6cd22fb430ec3ca269d36a1ffc819e,"Blacklist OMX.SEC.mp3.dec for more devices

Issue: #4519
PiperOrigin-RevId: 229145790"
ojw28,2019-01-11 19:02:00,https://api.github.com/repos/google/ExoPlayer/git/commits/1f03093dc52c7e5ddd22ad9675d4037ea9a0aa92,1f03093dc52c7e5ddd22ad9675d4037ea9a0aa92,"DRM: Pass sessionId rather than MediaCrypto

ExoMediaCrypto.requiresSecureDecoderComponent() is removed, and
FrameworkMediaCrypto.forceAllowInsecureDecoderComponents is made
public to allow determining whether a secure decoder is required
to be implemented in MediaCodecRenderer.

PiperOrigin-RevId: 228909771"
ojw28,2019-01-11 18:39:27,https://api.github.com/repos/google/ExoPlayer/git/commits/2d30d66746242018a3aff0f239048e93c34ecc0f,2d30d66746242018a3aff0f239048e93c34ecc0f,"Fix release of DRM sessions

There were some edge cases in which we'd forget to release DRM
sessions. For example if we read a format and acquired a
pendingDrmSession (in onInputFormatChanged), then immediately
read another format and overwrote pendingDrmSession, we'd
forget to release the one that's been overwritten.

This change hopefully makes release much clearer. We keep a list
of all drm sessions we're currently holding. Whenever we update
either drmSession or pendingDrmSession, we release any other
sessions that are in the list.

PiperOrigin-RevId: 228905465"
erdemguven,2019-01-10 14:46:40,https://api.github.com/repos/google/ExoPlayer/git/commits/71d4f39400f20743e01c98f6e1f9a06a0200cfaa,71d4f39400f20743e01c98f6e1f9a06a0200cfaa,"Call Listener methods on the thread started RequirementsWatcher

PiperOrigin-RevId: 228701917"
erdemguven,2019-01-10 10:33:11,https://api.github.com/repos/google/ExoPlayer/git/commits/92bec21c03532b9e051c0843022eeb51198bda4f,92bec21c03532b9e051c0843022eeb51198bda4f,"Add DownloadIndex and DefaultDownloadIndex

DownloadIndex will be used to store and query DownloadStates.

PiperOrigin-RevId: 228673766"
tonihei,2019-01-09 17:23:30,https://api.github.com/repos/google/ExoPlayer/git/commits/637b52ae0e7d5515f0e581da73df600a9cb56e51,637b52ae0e7d5515f0e581da73df600a9cb56e51,"Add missing call to timeline.getWindow.

The window object is used without being filled with data. This used to work
well for most cases as the same live stream is sending regular updates and the
first update is almost never used if it's not the first item in a playlist.

It causes problems when the first timeline update of a live stream is actually
used for playback (e.g. when the live stream is lazily prepared in a playlist
and played first).

PiperOrigin-RevId: 228530232"
tonihei,2019-01-09 10:24:32,https://api.github.com/repos/google/ExoPlayer/git/commits/8792c20be53f2d69024104eca824f5ad1e6af486,8792c20be53f2d69024104eca824f5ad1e6af486,"Update README and dev guide with Java 8 config for Kotlin.

Setting the target conpatibility only seems to work for Java. Added the
equivalent Kotlin config options to the docs.

Issue:#5276
PiperOrigin-RevId: 228482496"
zsmatyas,2019-01-09 20:18:02,https://api.github.com/repos/google/ExoPlayer/git/commits/fff602358fed751a5cf906338b20a56df1433522,fff602358fed751a5cf906338b20a56df1433522,"CEA608: Limiting duplicated command checks to immediate frames

Reported in https://github.com/google/ExoPlayer/issues/3860
For failing examples see the github link above.

[Problem]
We drop matching control codes even if they are not received on
consecutive frames.

The specification says
""(4) If the first transmission of a control code pair passes parity,
it is acted upon within one video frame. If the NEXT frame contains
a perfect repeat of the same pair, the redundant code is ignored.""

Keyword is the NEXT. The frames must arrive immediately after
each other.

See https://www.law.cornell.edu/cfr/text/47/79.101

[Solution]
Set an additional flag when any data is processed. Control code
duplication checks should be limited only for the first control
byte pairs processed after any control code.

[Test]
Sarnoff tests have equivalent CEA708 and CEA608 Streams."
ojw28,2019-01-08 17:17:59,https://api.github.com/repos/google/ExoPlayer/git/commits/e0c6f538af671553b169c573207ae664c6e9478e,e0c6f538af671553b169c573207ae664c6e9478e,"Merge pull request #5201 from zsmatyas:dev-v2

PiperOrigin-RevId: 228341073"
erdemguven,2019-01-08 15:14:04,https://api.github.com/repos/google/ExoPlayer/git/commits/0b56a03880d715cc4d4e20fccfbe015e8b6bad35,0b56a03880d715cc4d4e20fccfbe015e8b6bad35,"Use stop flag to prevent download start when not initialization/released

PiperOrigin-RevId: 228324452"
ojw28,2019-01-08 12:38:18,https://api.github.com/repos/google/ExoPlayer/git/commits/255a34d367fbe84d5ed9d5033a1701d6775f5d7e,255a34d367fbe84d5ed9d5033a1701d6775f5d7e,"Noop cleanup of Cea608Decoder.CueBuilder

PiperOrigin-RevId: 228309236"
ojw28,2019-01-08 11:51:15,https://api.github.com/repos/google/ExoPlayer/git/commits/6e127d0152b3389faa257853dbd858a188c66004,6e127d0152b3389faa257853dbd858a188c66004,"SimpleCache: Scan sub-directories during initialization

This is the initialization part of mitigating issue #4253. The
remaining work is on the writing side, and is simply a case of
having startFile return File instances that are sharded into
sub-directories. We still need to decide what scheme we want
to use for doing that.

Issue: #4253
PiperOrigin-RevId: 228306327"
ojw28,2019-01-08 09:36:30,https://api.github.com/repos/google/ExoPlayer/git/commits/194caf23e5fc00bccf8b0ea03a6b75bdd2d96a39,194caf23e5fc00bccf8b0ea03a6b75bdd2d96a39,"Doc fix.

PiperOrigin-RevId: 228296962"
ojw28,2019-01-07 17:30:11,https://api.github.com/repos/google/ExoPlayer/git/commits/8c47b02083a13617f882d27d398d6b99a5aab12a,8c47b02083a13617f882d27d398d6b99a5aab12a,"Reduce number of calls to File.length()

Calls to File.length() can be O(N) where N is the number of files
in the containing folder. This is believed to be true for at least
FAT32. Repeated calls for the same file tend to be faster,
presumably due to caching in the file system, however are still
surprisingly expensive. Hence minimizing the number of calls is
preferable.

Issue: #4253
PiperOrigin-RevId: 228179921"
AquilesCanta,2019-01-07 14:34:31,https://api.github.com/repos/google/ExoPlayer/git/commits/be69d5b747ca1f12129ac061cbb259ec45470ef8,be69d5b747ca1f12129ac061cbb259ec45470ef8,"Expand check for muxed audio media tags to include uris that match variants

Issue:#5313
PiperOrigin-RevId: 228155222"
AquilesCanta,2019-01-07 12:36:59,https://api.github.com/repos/google/ExoPlayer/git/commits/147deafd01e18621cb5221132f0e39598ceeb186,147deafd01e18621cb5221132f0e39598ceeb186,"Increase search size in mp4 sniffing once moov has been found

Issue:#5320
PiperOrigin-RevId: 228142567"
tonihei,2019-01-04 17:56:10,https://api.github.com/repos/google/ExoPlayer/git/commits/e8a7cb25460aa91bf2471a8a839908ebdb984608,e8a7cb25460aa91bf2471a8a839908ebdb984608,"Remove player and isTopLevelSource parameters from MediaSource.prepare.

They are not longer needed anywhere, are error-prone (because of threading
requirements), and complicate testing and using MediaSources without a player.

PiperOrigin-RevId: 227871157"
tonihei,2019-01-04 17:55:49,https://api.github.com/repos/google/ExoPlayer/git/commits/682879755561df4a428ea67bd7bafa337d451d91,682879755561df4a428ea67bd7bafa337d451d91,"Pass Handler together with Runnable callbacks for playlist commands.

We currently either use the app thread returned by the player or the thread
the commands are called on depending on whether the media source is already
prepared or not.

This change lets the application decide which callback thread to use. As a
side effect, we also don't longer need access the player instance passed to
MediaSource.prepare.

PiperOrigin-RevId: 227871111"
andrewlewis,2019-01-04 16:42:40,https://api.github.com/repos/google/ExoPlayer/git/commits/0afd9b0d23e2633740d101184db31a4d186ee9cd,0afd9b0d23e2633740d101184db31a4d186ee9cd,"Update FakeAd overrides

These are part of published IMA SDK 3.10.2.

PiperOrigin-RevId: 227861713"
andrewlewis,2019-01-04 15:07:13,https://api.github.com/repos/google/ExoPlayer/git/commits/14027bc98e1c569d889361d14586edfae087a162,14027bc98e1c569d889361d14586edfae087a162,"Treat AVERROR_INVALIDDATA as non-fatal

Also configure the FFmpeg context to ignore errors as far as possible (this
appears to have an effect only for certain decoders).

Issue: #5293
PiperOrigin-RevId: 227851397"
andrewlewis,2019-01-04 09:51:01,https://api.github.com/repos/google/ExoPlayer/git/commits/5efbcb4443e17f948a04d5f002f5fde1a452120a,5efbcb4443e17f948a04d5f002f5fde1a452120a,"Fix nullness issue

PiperOrigin-RevId: 227822937"
andrewlewis,2019-01-04 08:27:21,https://api.github.com/repos/google/ExoPlayer/git/commits/ed1f41db1bc960109dafeb434e313dd91546cf44,ed1f41db1bc960109dafeb434e313dd91546cf44,"Parse frame rate from 'mdta' metadata

PiperOrigin-RevId: 227813461"
ojw28,2019-01-03 21:01:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d834eeab6fcd68e63bbdd89aa2e029055ee37b10,d834eeab6fcd68e63bbdd89aa2e029055ee37b10,"Set MediaSessionConnector components separately

Also support preparation without a player, in line with PlayerView.

PiperOrigin-RevId: 227735260"
AquilesCanta,2019-01-03 16:02:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d30375c9a18205cf9c32fe2c5cd4db21e9438f75,d30375c9a18205cf9c32fe2c5cd4db21e9438f75,"Prevent IllegalStateException in Mp4 sniffing

If a negative value is read, sniffing should just fail.

PiperOrigin-RevId: 227689568"
erdemguven,2019-01-03 14:59:40,https://api.github.com/repos/google/ExoPlayer/git/commits/781ba39097794f1abb0b17867f85a6d2c7279ef4,781ba39097794f1abb0b17867f85a6d2c7279ef4,"Disabled test case due to flakiness

PiperOrigin-RevId: 227682600"
erdemguven,2019-01-03 14:54:49,https://api.github.com/repos/google/ExoPlayer/git/commits/a940d8bc9d70ea59952ebfe3c60c502a7206825e,a940d8bc9d70ea59952ebfe3c60c502a7206825e,"Use removing and restarting state internally in DownloadManager

PiperOrigin-RevId: 227682159"
tonihei,2019-01-03 14:54:37,https://api.github.com/repos/google/ExoPlayer/git/commits/c130723929897ad0403eab073cf3fced34f86eb2,c130723929897ad0403eab073cf3fced34f86eb2,"Replace isTopLevelSource check by period count check in AdsMediaSource.

The top level requirement only tried to ensure that the entire timeline only
has one period. This is already asserted by ImaAdsLoader. AdsMediaSource
itself works fine as long as the wrapped timeline has one period only. This
is now asserted instead.

PiperOrigin-RevId: 227682141"
tonihei,2019-01-03 14:54:22,https://api.github.com/repos/google/ExoPlayer/git/commits/e4ad90efd0b111e1239e2dfadc2a8ae06794dddc,e4ad90efd0b111e1239e2dfadc2a8ae06794dddc,"Set Player separately in AdsLoader interface.

Passing the player through MediaSource.prepare is only needed for the AdsLoader
and complicates other usages of MediaSource. Providing the player directly to
the AdsLoader is also in line with the usage pattern of PlayerView and other
components.

Also rename methods to start/stop to better reflect their usage.

PiperOrigin-RevId: 227682112"
AquilesCanta,2019-01-03 13:29:00,https://api.github.com/repos/google/ExoPlayer/git/commits/bfc8f9c4d8a063202d0fa858a7f2e94f917fbbdb,bfc8f9c4d8a063202d0fa858a7f2e94f917fbbdb,"Enable setOutputSurfaceWorkaround for Huawei P10 lite

Issue:#5312
PiperOrigin-RevId: 227673949"
AquilesCanta,2019-01-03 12:26:03,https://api.github.com/repos/google/ExoPlayer/git/commits/7f266ceb33b6b43b6dddb0c9b2362783e150b452,7f266ceb33b6b43b6dddb0c9b2362783e150b452,"Fix bug when calculating EOF position in mp4 sniffing

PiperOrigin-RevId: 227668426"
erdemguven,2019-01-03 11:57:33,https://api.github.com/repos/google/ExoPlayer/git/commits/7ae768376c0947ab4c49d7c107db233445658019,7ae768376c0947ab4c49d7c107db233445658019,"Prepare DownloadState for upcoming changes

Made DownloadState top level class.
Replaced action field DownloadAction fields.
Added removing, removed and restarting states.
Renamed started state to downloading.

PiperOrigin-RevId: 227664735"
tonihei,2019-01-03 09:36:35,https://api.github.com/repos/google/ExoPlayer/git/commits/803b878a8aeaa3fa2ed3d53077bad55a572269a2,803b878a8aeaa3fa2ed3d53077bad55a572269a2,"Use Handler instead of ExoPlayer messages in ConcatenatingMediaSource

ExoPlayer methods must not be called from any thread besides the specified
app thread. Therefore we shouldn't use them here. Using a regular Handler
instead is fully equivalent.

Issue:#5240
PiperOrigin-RevId: 227650489"
andrewlewis,2019-01-03 09:04:10,https://api.github.com/repos/google/ExoPlayer/git/commits/440824ae5cbef6010a572b39fcdd52ca54d6c915,440824ae5cbef6010a572b39fcdd52ca54d6c915,"Fix replacement char check

PiperOrigin-RevId: 227646358"
ojw28,2019-01-02 16:21:09,https://api.github.com/repos/google/ExoPlayer/git/commits/0ed7ddecd781364c8e4eae8f7e21e8b65ef32a05,0ed7ddecd781364c8e4eae8f7e21e8b65ef32a05,"Reduce the number of cache files

- Increase the default cache file size to 5MB
- Recommended a minimum cache file size of 2MB to discourage
  applications from specifying values small enough such that
  unreasonably large numbers of cache files are generated
- Allow maxCacheFileSize=C.LENGTH_UNSET, equivalent to setting it
  to MAX_VALUE. This is just for API consistency with other APIs
  we have that accept LENGTH_UNSET

Issue: #4253
PiperOrigin-RevId: 227524233"
ojw28,2019-01-02 15:43:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ae65bcecd4a654185eed461b18dc59d8bc454fd8,ae65bcecd4a654185eed461b18dc59d8bc454fd8,"Move syncFileDescriptor to use an experimental method

PiperOrigin-RevId: 227520168"
andrewlewis,2019-01-02 15:04:20,https://api.github.com/repos/google/ExoPlayer/git/commits/1e992240194b24663803a6f11e33227f32d58d14,1e992240194b24663803a6f11e33227f32d58d14,"Remove AdsLoader listeners on releasing ImaAdsLoader

Issue: #4114
PiperOrigin-RevId: 227516509"
ojw28,2019-01-02 13:43:19,https://api.github.com/repos/google/ExoPlayer/git/commits/3a9557c72f9f8be786a6bdecd8ff5d477d2a8354,3a9557c72f9f8be786a6bdecd8ff5d477d2a8354,"Don't pass maxCacheFileSize to CacheEvictor if real size is unknown

CacheEvictor.onStartFile currently receives a length, which is the
maximum size of the content that might be written. The LRU cache
evictor will make sure there's sufficient space for the specified
size. If the actual size of the content is unknown, CacheDataSink
passes maxCacheFileSize.

The current behavior isn't ideal. It seems valid for a developer to
specify maxCacheFileSize=Long.MAX_VALUE if they don't want any
file fragmentation in the cache. However if they then attempt to
cache something with unknown length, LRU cache will try and make
room for content of length Long.MAX_VALUE, and end up evicting the
entire cache to do so.

This change alters the logic so a length is only passed if the
actual size of the content is known. In other cases C.LENGTH_UNSET
is now passed. The LRU evictor will not evict until after the file
is committed. Note a custom LRU evictor could still opt to evict to
ensure some application specified amount of space, if that's the
desired behavior.

PiperOrigin-RevId: 227509525"
ojw28,2019-01-02 11:39:46,https://api.github.com/repos/google/ExoPlayer/git/commits/243b12f37ef06628b119512a8296b25a599bd3f0,243b12f37ef06628b119512a8296b25a599bd3f0,"Remove stray word

PiperOrigin-RevId: 227500707"
andrewlewis,2018-12-24 14:26:01,https://api.github.com/repos/google/ExoPlayer/git/commits/fc6a1ea52264a5f2972602b3bbc90ad1fabba16c,fc6a1ea52264a5f2972602b3bbc90ad1fabba16c,"Handle rectangular rotation projections in Matroska

See also https://github.com/Matroska-Org/matroska-specification/issues/269.

PiperOrigin-RevId: 226758584"
tonihei,2018-12-21 15:19:24,https://api.github.com/repos/google/ExoPlayer/git/commits/9728ac54ba003dbc564e2eaf31d0f2a5e1ba4035,9728ac54ba003dbc564e2eaf31d0f2a5e1ba4035,"Improve doc for setKeepContentOnPlayerReset.

This also applies when seeking or transitioning to unprepared media, which
isn't clear from the current documentation.

Issue:#5267
PiperOrigin-RevId: 226486685"
erdemguven,2018-12-21 10:11:21,https://api.github.com/repos/google/ExoPlayer/git/commits/3c0107752a465a7f8c1bf258492c88e7982f8857,3c0107752a465a7f8c1bf258492c88e7982f8857,"Add STOPPED state to DownloadManager

PiperOrigin-RevId: 226460891"
ojw28,2018-12-21 09:55:42,https://api.github.com/repos/google/ExoPlayer/git/commits/173f36897b9c2df2807bf027839411779f5c1754,173f36897b9c2df2807bf027839411779f5c1754,"Update release notes

PiperOrigin-RevId: 226459209"
ybai001,2018-12-24 01:38:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ae40208d92b19535d12d81ebb38f95fe90ba155c,ae40208d92b19535d12d81ebb38f95fe90ba155c,"Add AC-4 format support

 * Add AC-4 MIME type definition
 * Add AC-4 format support in Mp4Extractor and TsExtractor
 * Add AC-4 Extractor
 * Add AC-4 playback support in MPEG-4, MPEG-DASH, TS and HLS"
ojw28,2018-12-21 14:13:59,https://api.github.com/repos/google/ExoPlayer/git/commits/71f72c59537711399dc5496136dd6b867acc6d77,71f72c59537711399dc5496136dd6b867acc6d77,"Merge pull request #5283 from google/dev-v2-r2.9.3

r2.9.3"
ojw28,2018-12-10 20:07:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f042ae4cf3de9c6bbcc0e5897af925b3cd78b927,f042ae4cf3de9c6bbcc0e5897af925b3cd78b927,"Don't write CachedContentIndex to disk on key removal

Issue: #5136
PiperOrigin-RevId: 224857629"
ojw28,2018-12-20 18:30:57,https://api.github.com/repos/google/ExoPlayer/git/commits/c73c6f2013efd15ec6db7f79f9d9293477ac9339,c73c6f2013efd15ec6db7f79f9d9293477ac9339,"Bump for 2.9.3

PiperOrigin-RevId: 226356810"
ojw28,2018-12-20 18:30:57,https://api.github.com/repos/google/ExoPlayer/git/commits/f4d741a5653ea0beb81563b805ad6911c2963d8e,f4d741a5653ea0beb81563b805ad6911c2963d8e,"Bump for 2.9.3

PiperOrigin-RevId: 226356810"
ojw28,2018-12-20 18:30:38,https://api.github.com/repos/google/ExoPlayer/git/commits/a16f4aec90817eaa41d66c2c368877f8b6b22d8e,a16f4aec90817eaa41d66c2c368877f8b6b22d8e,"Fix out of data Javadoc

PiperOrigin-RevId: 226356758"
andrewlewis,2018-12-20 14:00:03,https://api.github.com/repos/google/ExoPlayer/git/commits/d3ecbf75b2b70d81dd6030baf29baaf9c58d2343,d3ecbf75b2b70d81dd6030baf29baaf9c58d2343,"Fix buffer size for renderers with TRACK_TYPE_NONE

This includes NoSampleRenderers.

PiperOrigin-RevId: 226323693"
andrewlewis,2018-12-20 09:05:08,https://api.github.com/repos/google/ExoPlayer/git/commits/bad8ec59521759d67fc60b7c6b9046f8628ad645,bad8ec59521759d67fc60b7c6b9046f8628ad645,"Relax audio decoder capability checks

Issue: #5145
PiperOrigin-RevId: 226297129"
ojw28,2018-12-20 12:31:20,https://api.github.com/repos/google/ExoPlayer/git/commits/4ccfa6f06847f0631df25b9528ca79c64ac37200,4ccfa6f06847f0631df25b9528ca79c64ac37200,"Fix buffer size for renderers with TRACK_TYPE_NONE

This includes NoSampleRenderers."
ojw28,2018-12-19 22:01:20,https://api.github.com/repos/google/ExoPlayer/git/commits/6060b8113dea64f42624865343f4c50f2e0491ce,6060b8113dea64f42624865343f4c50f2e0491ce,"Relax audio decoder capability checks

Issue: #5145"
AquilesCanta,2018-12-17 11:10:25,https://api.github.com/repos/google/ExoPlayer/git/commits/f6165f753c0e1a900ba9f81883693d67db233d0a,f6165f753c0e1a900ba9f81883693d67db233d0a,"Mitigate the need for FLAG_ALLOW_NON_IDR_KEYFRAMES

Use random access indicator in transport streams

Issue:#1967
Issue:#2020
Issue:#2182
Issue:#2469
Issue:#2581
Issue:#2748
Issue:#2939
Issue:#2979
Issue:#3316
Issue:#3574
Issue:#3709
Issue:#3747
Issue:#4103
Issue:#4184
Issue:#4355
Issue:#4538
Issue:#4719
Issue:#4861
Issue:#4925
Issue:#4951
Issue:#5108
Issue:#5186
PiperOrigin-RevId: 225798044"
ojw28,2018-12-19 21:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/7426c14b2a65c4b450d97bde8316ebd4f6cf3480,7426c14b2a65c4b450d97bde8316ebd4f6cf3480,Update release notes
ojw28,2018-12-14 15:42:57,https://api.github.com/repos/google/ExoPlayer/git/commits/fa82004fa3423021a25149bce5f2a50e884ab804,fa82004fa3423021a25149bce5f2a50e884ab804,"Merge pull request #5066 from szaboa:feature/1583_support_png_ttml

PiperOrigin-RevId: 225531695"
ojw28,2018-12-19 19:30:09,https://api.github.com/repos/google/ExoPlayer/git/commits/ca9ecaa4480fc74ebd5c32b07e4fd17be10da21c,ca9ecaa4480fc74ebd5c32b07e4fd17be10da21c,"Blacklist OMX.SEC.mp3.dec for more devices

Issue #4519

PiperOrigin-RevId: 226205245"
andrewlewis,2018-12-18 14:58:01,https://api.github.com/repos/google/ExoPlayer/git/commits/975ed6c2772cadf8238f5cf5967f1a7cc92813f4,975ed6c2772cadf8238f5cf5967f1a7cc92813f4,"Use the true bitrate for CBR MP3 seeking

PiperOrigin-RevId: 225989898"
ojw28,2018-12-18 19:46:21,https://api.github.com/repos/google/ExoPlayer/git/commits/78cdd5fee1ecdb0724620753637a8d719c9482e1,78cdd5fee1ecdb0724620753637a8d719c9482e1,"Merge pull request #5216 from mseroczynski:dev-v2

PiperOrigin-RevId: 225966289"
ojw28,2018-12-17 10:48:01,https://api.github.com/repos/google/ExoPlayer/git/commits/abdb58485f9abddafd367c90a730b830df2e1c0a,abdb58485f9abddafd367c90a730b830df2e1c0a,"Add Player.MetadataComponent for completeness

PiperOrigin-RevId: 225795581"
ojw28,2018-12-14 13:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/f41dadca5851d965cab5f46607de9e4c207b9284,f41dadca5851d965cab5f46607de9e4c207b9284,"Remove unused interface method

PiperOrigin-RevId: 225528632"
andrewlewis,2018-12-13 17:25:43,https://api.github.com/repos/google/ExoPlayer/git/commits/479841f65f58d4d5341b5db07a82ee3617b846bb,479841f65f58d4d5341b5db07a82ee3617b846bb,"Add Nexus Player to output surface workaround

PiperOrigin-RevId: 225383173"
ojw28,2018-12-13 16:58:39,https://api.github.com/repos/google/ExoPlayer/git/commits/e7e2cbdc909c4aa8a8cb39d25607dfdc382a7545,e7e2cbdc909c4aa8a8cb39d25607dfdc382a7545,"Add missing ..

PiperOrigin-RevId: 225379305"
ojw28,2018-12-13 16:17:14,https://api.github.com/repos/google/ExoPlayer/git/commits/fd6874809a7d5383636cbe5e6d5b360118e4f972,fd6874809a7d5383636cbe5e6d5b360118e4f972,"Clarify that the shutter can prevent flicker

PiperOrigin-RevId: 225374071"
ojw28,2018-12-13 11:23:55,https://api.github.com/repos/google/ExoPlayer/git/commits/942ac78a0c74f0fa16c712317fd7fdf22d88f4c9,942ac78a0c74f0fa16c712317fd7fdf22d88f4c9,"Add 4K Bravia to output surface workaroud

PiperOrigin-RevId: 225344232"
ojw28,2018-12-14 15:40:57,https://api.github.com/repos/google/ExoPlayer/git/commits/1851d5e193db3b3050a022bc23f7b08cc5495d3f,1851d5e193db3b3050a022bc23f7b08cc5495d3f,"Merge pull request #5245 from natario1:videosize-override

PiperOrigin-RevId: 225187852"
ojw28,2018-12-12 13:56:21,https://api.github.com/repos/google/ExoPlayer/git/commits/84ad3f7b667d6f462d3d91e618f1cfc2c9ebb8dc,84ad3f7b667d6f462d3d91e618f1cfc2c9ebb8dc,"Fix release notes

PiperOrigin-RevId: 225170404"
ojw28,2018-12-11 18:19:07,https://api.github.com/repos/google/ExoPlayer/git/commits/db5083d18ac3d54874dc48e9eef44317b2fe0591,db5083d18ac3d54874dc48e9eef44317b2fe0591,"Enable setOutputSurfaceWorkaround for dangal

Issue: #5169
PiperOrigin-RevId: 225025357"
erdemguven,2018-12-09 19:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/be2942cee360b6eee0e3a0095b00ac6a5e180912,be2942cee360b6eee0e3a0095b00ac6a5e180912,"Apply EOS flush workaround to stvm8 devices

Issue:#5203
PiperOrigin-RevId: 224726041"
tonihei,2018-12-06 13:48:09,https://api.github.com/repos/google/ExoPlayer/git/commits/0e139e994544467907a703be6872a60ff44e4c4c,0e139e994544467907a703be6872a60ff44e4c4c,"Use media source tag in dummy timeline.

This is now possible as it's directly accessible from the media source.

Issue:#5177
Issue:#5155
PiperOrigin-RevId: 224321917"
andrewlewis,2018-12-06 09:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/ee1ec8d3d6c89dfa11ca5504fd4eae919fcd83ac,ee1ec8d3d6c89dfa11ca5504fd4eae919fcd83ac,"Disable post processing on Nvidia devices

PiperOrigin-RevId: 224291309"
ojw28,2018-12-05 17:49:05,https://api.github.com/repos/google/ExoPlayer/git/commits/5f33c7fcf5dee242eb04627720ab2b75d8906a5b,5f33c7fcf5dee242eb04627720ab2b75d8906a5b,"Merge pull request #5187 from BrainCrumbz:feat/get-tag

PiperOrigin-RevId: 224166374"
tonihei,2018-12-04 17:30:08,https://api.github.com/repos/google/ExoPlayer/git/commits/ddda2eef7eb8a02af7a61dd49a53f7460fcdd62f,ddda2eef7eb8a02af7a61dd49a53f7460fcdd62f,"Add no-op defaults to Video(Audio)RendererEventListener.

This is in line with how Player.EventListener and AnalyticsListener methods are
defined and helps to only implement the callbacks needed.

PiperOrigin-RevId: 223991262"
ojw28,2018-12-19 19:30:09,https://api.github.com/repos/google/ExoPlayer/git/commits/4f8b09830717b8a29aa2bab7e75833d5880f78c5,4f8b09830717b8a29aa2bab7e75833d5880f78c5,"Blacklist OMX.SEC.mp3.dec for more devices

Issue #4519

PiperOrigin-RevId: 226205245"
ojw28,2018-12-18 19:46:54,https://api.github.com/repos/google/ExoPlayer/git/commits/be2636c365123b680a889d80c63967363947f9da,be2636c365123b680a889d80c63967363947f9da,"Merge pull request #4993 from saschpe:icy

PiperOrigin-RevId: 226031838"
andrewlewis,2018-12-18 14:58:01,https://api.github.com/repos/google/ExoPlayer/git/commits/0e8e9621c005913ab4d4240c9e1b336eb2a7e42c,0e8e9621c005913ab4d4240c9e1b336eb2a7e42c,"Use the true bitrate for CBR MP3 seeking

PiperOrigin-RevId: 225989898"
erdemguven,2018-12-18 10:49:16,https://api.github.com/repos/google/ExoPlayer/git/commits/ee2e89e0cdc4b9800e129db16433d7647b464ce5,ee2e89e0cdc4b9800e129db16433d7647b464ce5,"Remove DownloadManager Download interim state when created

When a Download is created it's set to queued state but doesn't notify
listeners about this state. DownloadManager checks if it can start the
download. After this checks it notifies the listeners.

With this change Download can immediately check if it can be started and
sends correct notification.

PiperOrigin-RevId: 225967129"
ojw28,2018-12-18 19:46:21,https://api.github.com/repos/google/ExoPlayer/git/commits/4d282b2278df465426b7c52a98e31cbf32697b6e,4d282b2278df465426b7c52a98e31cbf32697b6e,"Merge pull request #5216 from mseroczynski:dev-v2

PiperOrigin-RevId: 225966289"
erdemguven,2018-12-17 18:34:31,https://api.github.com/repos/google/ExoPlayer/git/commits/3dc72a690c29f843794c7809aa59e5f8b1574355,3dc72a690c29f843794c7809aa59e5f8b1574355,"Remove targetState in DownloadManager.Download

PiperOrigin-RevId: 225849846"
erdemguven,2018-12-17 15:41:04,https://api.github.com/repos/google/ExoPlayer/git/commits/3d6707e2c43ee25a4110ede383694f4573cd7d08,3d6707e2c43ee25a4110ede383694f4573cd7d08,"Don't create Downloads until DownloadManager is initialized

PiperOrigin-RevId: 225824428"
AquilesCanta,2018-12-17 13:52:56,https://api.github.com/repos/google/ExoPlayer/git/commits/f4fd3b12e6beb4e5c49bb8e6afa53b7e85a524da,f4fd3b12e6beb4e5c49bb8e6afa53b7e85a524da,"Handle failure to get Cast context more gracefully

Issue:#4160
Issue:#4743
PiperOrigin-RevId: 225813243"
AquilesCanta,2018-12-17 13:45:40,https://api.github.com/repos/google/ExoPlayer/git/commits/768f48e1d9c225cf3286528d3aebc835b276be7e,768f48e1d9c225cf3286528d3aebc835b276be7e,"Update the Cast framework dependency

PiperOrigin-RevId: 225812585"
tonihei,2018-12-17 13:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/ee14b1fa40c91fd79dec87ac424d1b7adc83c320,ee14b1fa40c91fd79dec87ac424d1b7adc83c320,"Add test for SsMediaPeriod.getStreamKeys

PiperOrigin-RevId: 225811310"
AquilesCanta,2018-12-17 11:10:25,https://api.github.com/repos/google/ExoPlayer/git/commits/8202cb2d2a58e47cd1f53a4f0a8989124ffa2df6,8202cb2d2a58e47cd1f53a4f0a8989124ffa2df6,"Mitigate the need for FLAG_ALLOW_NON_IDR_KEYFRAMES

Use random access indicator in transport streams

Issue:#1967
Issue:#2020
Issue:#2182
Issue:#2469
Issue:#2581
Issue:#2748
Issue:#2939
Issue:#2979
Issue:#3316
Issue:#3574
Issue:#3709
Issue:#3747
Issue:#4103
Issue:#4184
Issue:#4355
Issue:#4538
Issue:#4719
Issue:#4861
Issue:#4925
Issue:#4951
Issue:#5108
Issue:#5186
PiperOrigin-RevId: 225798044"
ojw28,2018-12-17 10:48:01,https://api.github.com/repos/google/ExoPlayer/git/commits/d5e53d11f7dafedb94209a82fcf6c85c7399a962,d5e53d11f7dafedb94209a82fcf6c85c7399a962,"Add Player.MetadataComponent for completeness

PiperOrigin-RevId: 225795581"
erdemguven,2018-12-14 17:52:16,https://api.github.com/repos/google/ExoPlayer/git/commits/9198e4cf7a27dbf0dbb81e07b7ea2824cf3c3812,9198e4cf7a27dbf0dbb81e07b7ea2824cf3c3812,"Make RequirementsWatcher notify listener on not met requirements change

PiperOrigin-RevId: 225557638"
erdemguven,2018-12-14 16:57:29,https://api.github.com/repos/google/ExoPlayer/git/commits/28dca0b339f0c01c17ec641686871f205e7ccd7f,28dca0b339f0c01c17ec641686871f205e7ccd7f,"Add method to Requirements to get not met requirements

PiperOrigin-RevId: 225549778"
tonihei,2018-12-14 16:03:42,https://api.github.com/repos/google/ExoPlayer/git/commits/1a3d735bc33ccc4f6c6227f33eb4812f5e162ebc,1a3d735bc33ccc4f6c6227f33eb4812f5e162ebc,"Add assertion helper to verify MediaSource/TrackGroups/TrackSelection/StreamKey cycle.

This is useful to write integration tests for MediaSources which check that the
stream keys returned by getStreamKeys are compatible with the respective manifest
parser.

PiperOrigin-RevId: 225542606"
mseroczynski,2018-12-17 11:50:20,https://api.github.com/repos/google/ExoPlayer/git/commits/9fa2525225449f31fdfbb70569f33ebae5552b7e,9fa2525225449f31fdfbb70569f33ebae5552b7e,Merge remote-tracking branch 'origin/dev-v2' into dev-v2
mseroczynski,2018-12-17 11:50:11,https://api.github.com/repos/google/ExoPlayer/git/commits/4aabff96342c29b4bfaa421965896ed84fb1e9cc,4aabff96342c29b4bfaa421965896ed84fb1e9cc,Blacklist OMX.SEC.mp3.dec and OMX.brcm.audio.mp3.decoder on Samsung devices
mseroczynski,2018-12-17 10:19:50,https://api.github.com/repos/google/ExoPlayer/git/commits/49a99beaefe2de09f12f2bcd8b79e107ee1040f1,49a99beaefe2de09f12f2bcd8b79e107ee1040f1,Merge branch 'dev-v2' into dev-v2
mseroczynski,2018-12-17 09:58:27,https://api.github.com/repos/google/ExoPlayer/git/commits/3390b21618d0ca17e3e983e878bb4f81b43d9ef7,3390b21618d0ca17e3e983e878bb4f81b43d9ef7,Blacklist OMX.SEC.mp3.dec and OMX.brcm.audio.mp3.decoder on Samsung devices
ojw28,2018-12-14 15:42:57,https://api.github.com/repos/google/ExoPlayer/git/commits/254589cbe8bf9c0e9bae59b4aa4ba5c091f841a4,254589cbe8bf9c0e9bae59b4aa4ba5c091f841a4,"Merge pull request #5066 from szaboa:feature/1583_support_png_ttml

PiperOrigin-RevId: 225531695"
ojw28,2018-12-14 13:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/bbf222854a54f65f56a73e530b48da571c7257f9,bbf222854a54f65f56a73e530b48da571c7257f9,"Remove unused interface method

PiperOrigin-RevId: 225528632"
tonihei,2018-12-14 11:16:33,https://api.github.com/repos/google/ExoPlayer/git/commits/173ddd6ee70a241f1b1251d4ec0172eb386fa06a,173ddd6ee70a241f1b1251d4ec0172eb386fa06a,"Add simplified adaptive media source stream key filter to factory classes.

This change only simplifies the API by using the ManifestParser internally.

PiperOrigin-RevId: 225516193"
ojw28,2018-12-13 17:26:01,https://api.github.com/repos/google/ExoPlayer/git/commits/845f54a46741a19e086b5c83b7497ea6d2ee50ad,845f54a46741a19e086b5c83b7497ea6d2ee50ad,"Remove Cache.[get|set]ContentLength

Problem: There is nothing in the Cache interface that enforces that
these methods are implemented by reading/writing content metadata,
however our own code (CacheDataSource) relies on this property since
it mixes use of [get|set]ContentLength and use of metadata. Using
metadata is the right approach because it minimizes the number of
index writes (e.g. it allows the redirect URI and the content length
to be committed by a single write).

Solution: Remove [get|set]ContentLength, which are redundant anyway,
and use metadata everywhere. Also expose the keys being used through
the public API; there's no particular reason why they shouldn't be.
We previously had an API for getting and setting content length, but
no API for getting and setting redirect uri.
PiperOrigin-RevId: 225383211"
andrewlewis,2018-12-13 17:25:43,https://api.github.com/repos/google/ExoPlayer/git/commits/03d6f1370b4191f9998f79867813bbeb56bcc2aa,03d6f1370b4191f9998f79867813bbeb56bcc2aa,"Add Nexus Player to output surface workaround

PiperOrigin-RevId: 225383173"
ojw28,2018-12-13 16:58:39,https://api.github.com/repos/google/ExoPlayer/git/commits/c2c5e560e99de66b735a6bc5243ae0840c70c350,c2c5e560e99de66b735a6bc5243ae0840c70c350,"Add missing ..

PiperOrigin-RevId: 225379305"
tonihei,2018-12-13 16:40:42,https://api.github.com/repos/google/ExoPlayer/git/commits/9ed2a393b0612fd152608b9f5eebde1ca1f52d8e,9ed2a393b0612fd152608b9f5eebde1ca1f52d8e,"Add FilterableMediaPeriod interface and SmoothStreaming implementation.

This interface allows to put the mapping from tracks to StreamKeys in the same place
where we map manifest to tracks.

PiperOrigin-RevId: 225377033"
ojw28,2018-12-13 16:17:14,https://api.github.com/repos/google/ExoPlayer/git/commits/9c4258fef94f853b728232c57863cab041b7ba97,9c4258fef94f853b728232c57863cab041b7ba97,"Clarify that the shutter can prevent flicker

PiperOrigin-RevId: 225374071"
erdemguven,2018-12-13 14:51:10,https://api.github.com/repos/google/ExoPlayer/git/commits/383df3f0c311d2ab8658162918e77331fe82bdf4,383df3f0c311d2ab8658162918e77331fe82bdf4,"Add start and update time fields to DownloadState

PiperOrigin-RevId: 225363788"
tonihei,2018-12-13 14:16:18,https://api.github.com/repos/google/ExoPlayer/git/commits/36f2bead16254d2f1ead9d138825b73525e432f2,36f2bead16254d2f1ead9d138825b73525e432f2,"Clarify StreamKey documentation.

StreamKey makes only sense in the context of a specific manifest type and its only
used for manifest filtering.

PiperOrigin-RevId: 225360357"
erdemguven,2018-12-13 13:36:59,https://api.github.com/repos/google/ExoPlayer/git/commits/41f76bdb53e5ba82771f30ca643298036df7eb69,41f76bdb53e5ba82771f30ca643298036df7eb69,"Convert DownloadState id to String

For now this id can not be set by client but auto generated using
content cache key and uri.

PiperOrigin-RevId: 225356645"
ojw28,2018-12-13 11:23:55,https://api.github.com/repos/google/ExoPlayer/git/commits/044066f4b12f41bb6db8cee7ffae444fe5530a7d,044066f4b12f41bb6db8cee7ffae444fe5530a7d,"Add 4K Bravia to output surface workaroud

PiperOrigin-RevId: 225344232"
ojw28,2018-12-14 15:40:57,https://api.github.com/repos/google/ExoPlayer/git/commits/3bfe103b82b86e3d0cb085b49a49b5582ae87e68,3bfe103b82b86e3d0cb085b49a49b5582ae87e68,"Merge pull request #5245 from natario1:videosize-override

PiperOrigin-RevId: 225187852"
ojw28,2018-12-12 13:56:21,https://api.github.com/repos/google/ExoPlayer/git/commits/7d21154b6284db388b4a2f86e2e617dd5c0f3933,7d21154b6284db388b4a2f86e2e617dd5c0f3933,"Fix release notes

PiperOrigin-RevId: 225170404"
tonihei,2018-12-12 11:53:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c03b7e32e2154d6c9940197db4141f7b29654edf,c03b7e32e2154d6c9940197db4141f7b29654edf,"Remove TrackKey and its remaining usages.

This is no longer needed as the public API uses TrackSelection as the way to specify
selected tracks.

PiperOrigin-RevId: 225158867"
erdemguven,2018-12-12 11:01:48,https://api.github.com/repos/google/ExoPlayer/git/commits/8cedfc46fb1a8adcf525bc7841d75a9ed910cf07,8cedfc46fb1a8adcf525bc7841d75a9ed910cf07,"Add failureReason to DownloadState

PiperOrigin-RevId: 225154121"
erdemguven,2018-12-12 09:40:43,https://api.github.com/repos/google/ExoPlayer/git/commits/4bf42bd2ad1ed24620088cb1dfc33872006d1d33,4bf42bd2ad1ed24620088cb1dfc33872006d1d33,"Rename TaskState to DownloadState

PiperOrigin-RevId: 225145311"
erdemguven,2018-12-11 21:29:12,https://api.github.com/repos/google/ExoPlayer/git/commits/230a798f238d676a4954f17d61f3b4d7930cbda7,230a798f238d676a4954f17d61f3b4d7930cbda7,"Create only one task for all DownloadActions for the same content

PiperOrigin-RevId: 225060323"
ojw28,2018-12-11 18:19:07,https://api.github.com/repos/google/ExoPlayer/git/commits/05bfeca50b001298da4cffee53b22e983831aaa6,05bfeca50b001298da4cffee53b22e983831aaa6,"Enable setOutputSurfaceWorkaround for dangal

Issue: #5169
PiperOrigin-RevId: 225025357"
tonihei,2018-12-11 17:13:57,https://api.github.com/repos/google/ExoPlayer/git/commits/defbd046753fd90d7b9dd700f1bdb0b3621c027c,defbd046753fd90d7b9dd700f1bdb0b3621c027c,"Update StartDownloadDialogHelper to use TrackSelectionView.

This is now possible as the download helper uses a track selector.

PiperOrigin-RevId: 225014517"
tonihei,2018-12-11 15:50:54,https://api.github.com/repos/google/ExoPlayer/git/commits/8d137c2e6187e7cf0ef9fc58d968d4d52412134a,8d137c2e6187e7cf0ef9fc58d968d4d52412134a,"Fix manifest uri in SsDownloadHelper.

This is the same as in SsMediaSource.

PiperOrigin-RevId: 225001911"
tonihei,2018-12-11 15:48:59,https://api.github.com/repos/google/ExoPlayer/git/commits/272a5e59f20e5466cdbe09c70774133496c8cc92,272a5e59f20e5466cdbe09c70774133496c8cc92,"Use download icon instead of play icon for download notification.

PiperOrigin-RevId: 225001681"
ojw28,2018-12-10 20:07:42,https://api.github.com/repos/google/ExoPlayer/git/commits/2f365e5a4b1721c43edc03fe9071008d3e81aaea,2f365e5a4b1721c43edc03fe9071008d3e81aaea,"Don't write CachedContentIndex to disk on key removal

Issue: #5136
PiperOrigin-RevId: 224857629"
natario1,2018-12-11 21:07:40,https://api.github.com/repos/google/ExoPlayer/git/commits/c819856530d394a2352a68e7ce92e8a83a8d7071,c819856530d394a2352a68e7ce92e8a83a8d7071,Add protected method to override the AspectRatioFrameLayout aspect ratio
tonihei,2018-12-10 13:43:51,https://api.github.com/repos/google/ExoPlayer/git/commits/6a6b211233c8cd4d6e1f07610f978430176f75d6,6a6b211233c8cd4d6e1f07610f978430176f75d6,"Update DownloadHelper constructors and their usage in the demo app.

PiperOrigin-RevId: 224797598"
ojw28,2018-12-10 12:58:56,https://api.github.com/repos/google/ExoPlayer/git/commits/a02dba210c787f415339acb3f0619afdce26ffb6,a02dba210c787f415339acb3f0619afdce26ffb6,"Remove no-longer-true documentation

PiperOrigin-RevId: 224793600"
erdemguven,2018-12-09 19:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/b23b86d137ab94084fd056a5f73f91af8eaafde0,b23b86d137ab94084fd056a5f73f91af8eaafde0,"Apply EOS flush workaround to stvm8 devices

Issue:#5203
PiperOrigin-RevId: 224726041"
erdemguven,2018-12-08 14:29:14,https://api.github.com/repos/google/ExoPlayer/git/commits/480bb50b54bbd51b0fef7e5836eb8d42b38dcf9b,480bb50b54bbd51b0fef7e5836eb8d42b38dcf9b,"Add DownloadActionUtil class

PiperOrigin-RevId: 224647076"
tonihei,2018-12-07 16:22:00,https://api.github.com/repos/google/ExoPlayer/git/commits/22948f2eda7b7cfb8ac4ff413b9a0cfe0d2aa0a9,22948f2eda7b7cfb8ac4ff413b9a0cfe0d2aa0a9,"Use TrackSelector in DownloadHelper.

This adds the basic track selection capabilties (including tests).
The new capabilities are not exposed yet through the DownloadHelper implementations
and there will also be more helper methods (e.g. to select multiple audio lanuages at
once).

PiperOrigin-RevId: 224518477"
erdemguven,2018-12-07 14:39:11,https://api.github.com/repos/google/ExoPlayer/git/commits/771aa080f643f9f315852ee83f453a852548843f,771aa080f643f9f315852ee83f453a852548843f,"Add totalBytes to TaskState

PiperOrigin-RevId: 224506700"
erdemguven,2018-12-07 11:42:23,https://api.github.com/repos/google/ExoPlayer/git/commits/17e8c55425e04a5cf355df2e840ff384f678862a,17e8c55425e04a5cf355df2e840ff384f678862a,"Extract DownloadThread class from DownloadManager.Task

PiperOrigin-RevId: 224492268"
tonihei,2018-12-06 13:48:09,https://api.github.com/repos/google/ExoPlayer/git/commits/c48b77d1ec614872128a3420660242202f78cce1,c48b77d1ec614872128a3420660242202f78cce1,"Use media source tag in dummy timeline.

This is now possible as it's directly accessible from the media source.

Issue:#5177
Issue:#5155
PiperOrigin-RevId: 224321917"
AquilesCanta,2018-12-06 12:04:48,https://api.github.com/repos/google/ExoPlayer/git/commits/73da205279ec775c9e89c78dc7c64fc0143b7125,73da205279ec775c9e89c78dc7c64fc0143b7125,"Add receiver flavor to CastDemo

PiperOrigin-RevId: 224310086"
AquilesCanta,2018-12-06 11:56:27,https://api.github.com/repos/google/ExoPlayer/git/commits/891961d5e11e558cec9bf87062a7230d46d3a819,891961d5e11e558cec9bf87062a7230d46d3a819,"Revert usage of MediaItems for Cast demo sample list

PiperOrigin-RevId: 224308973"
tonihei,2018-12-06 10:54:45,https://api.github.com/repos/google/ExoPlayer/git/commits/5776bed190ef7792fb3553db6e78a4e4119f3840,5776bed190ef7792fb3553db6e78a4e4119f3840,"TrackSelection.Factory clean-up.

We currently have two factory methods where it is completely unclear which one needs
to be overridden.

This change deprecates the old one, adds a Util method to easily map back from the new
to the old behaviour, and updates all implementations of the now deprecated method in
our code.

PiperOrigin-RevId: 224303560"
andrewlewis,2018-12-06 09:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/9a5096ee6459411267d61277244306cb86e97634,9a5096ee6459411267d61277244306cb86e97634,"Disable post processing on Nvidia devices

PiperOrigin-RevId: 224291309"
mseroczynski,2018-12-07 14:59:44,https://api.github.com/repos/google/ExoPlayer/git/commits/66e8a32766af42ae6310f335d2096baa62ad1ce1,66e8a32766af42ae6310f335d2096baa62ad1ce1,Blacklist OMX.SEC.mp3.dec and OMX.brcm.audio.mp3.decoder on Samsung devices
mseroczynski,2018-12-07 14:49:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ea2d1f89b732af245225dd052a2ef889a99dc010,ea2d1f89b732af245225dd052a2ef889a99dc010,Blacklist OMX.SEC.mp3.dec and OMX.brcm.audio.mp3.decoder on Samsung devices
ybai001,2018-12-06 01:44:39,https://api.github.com/repos/google/ExoPlayer/git/commits/246d464466611291cd450ca830393c49507296d9,246d464466611291cd450ca830393c49507296d9,"Merge pull request #2 from google/dev-v2

Pull from google/ExoPlayer dev-v2"
zsmatyas,2018-11-07 23:12:12,https://api.github.com/repos/google/ExoPlayer/git/commits/80807534f03b966d7aaa00a63809e8ecc773ebcf,80807534f03b966d7aaa00a63809e8ecc773ebcf,"CEA608: Match alignment of consecutive lines in POP-ON mode

[Problem]
As the alignment of each lineas are calculated individually, the
artificially introduced CENTER and RIGHT alignments can be mixed
with each other and with the default LEFT alignment. The mixed results
look worse than just using the original DEFAULT, and the readability
is radically decreased.

[Solution]
Pre-calculate the alignment for each line, and use the leftmost of them
for all lines. The intention of caption provider could be different, but
the worst case scenario is that we revert back everything to LEFT
alignment that is the only option in the CEA608 standard so we
show everything at the exact location it is set in the content.
The readability is never worse than the one given by the content
provider.

[Test]
This should influence CEA608 pop-up cations only. (Not roll up).
Test various live channels with this change.
Note: Beginning of commercials tend to have PAINT-ON mode as that
is immediately showing incoming characters, not just at the end
of the line like POP-on mode."
ojw28,2018-12-05 17:49:05,https://api.github.com/repos/google/ExoPlayer/git/commits/556dd7e9e0f013b6246aed674f347b064b4d36cd,556dd7e9e0f013b6246aed674f347b064b4d36cd,"Merge pull request #5187 from BrainCrumbz:feat/get-tag

PiperOrigin-RevId: 224166374"
tonihei,2018-12-05 09:48:23,https://api.github.com/repos/google/ExoPlayer/git/commits/b993367a3b9e5c1d1b0a74795bc1249d3c97c85c,b993367a3b9e5c1d1b0a74795bc1249d3c97c85c,"Add util method to extract renderer capabilities.

This instantiates the renderers and extract the capabilities. None of the known
renderes incurs any overhead during instantiation.

PiperOrigin-RevId: 224118511"
ojw28,2018-12-05 17:48:51,https://api.github.com/repos/google/ExoPlayer/git/commits/0d79208cd653f05c2424b510e139e31c96d88694,0d79208cd653f05c2424b510e139e31c96d88694,"Merge pull request #5147 from zsmatyas:dev-v2

PiperOrigin-RevId: 224114911"
ojw28,2018-12-04 23:28:11,https://api.github.com/repos/google/ExoPlayer/git/commits/22a8aa311bf37936e4e4d51b3ab40863ea5d885d,22a8aa311bf37936e4e4d51b3ab40863ea5d885d,"Clean up requesting non-media segments in downloader implementations

- Enable GZIP for media playlist + encryption key chunk requests in
  HLS, as we do during playback
- Pass around DataSpecs rather than Uris. This will be needed for if
  we add manifest cacheKey support (which seems like a good idea for
  completeness, if nothing else)

PiperOrigin-RevId: 224057139"
ojw28,2018-12-04 22:38:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f8b85739b13eb423e092fd8a0f7078527cf2f42b,f8b85739b13eb423e092fd8a0f7078527cf2f42b,"Fix race condition that could cause downloader not to be canceled

PiperOrigin-RevId: 224048465"
ojw28,2018-12-04 17:45:50,https://api.github.com/repos/google/ExoPlayer/git/commits/5bbe3ae7d6f65db9e0e97076da84ead7fe5f907e,5bbe3ae7d6f65db9e0e97076da84ead7fe5f907e,"Cache data with unknown length by default

We currently default to not caching data if the content length
cannot be resolved once the DataSource has been open. The
reason for this is to avoid caching progressive live streams.
By doing this we were accidentally not caching in other places
where caching is possible, such as DASH/SS/HLS segments during
playback if the server doesn't include a Content-Length header.
Also HLS encryption key chunks, which were very unlikely to be
cached during playback because we explicitly set FLAG_ALLOW_GZIP
(which normally stops content length from resolving) without
setting FLAG_ALLOW_CACHING_UNKNOWN_LENGTH.

It seems like a good idea to flip the default at this point,
and explicitly disable caching in the one case where we want
that to happen.

PiperOrigin-RevId: 223994110"
tonihei,2018-12-04 17:30:08,https://api.github.com/repos/google/ExoPlayer/git/commits/976a21f1392d92746f8c2f8377372b4dc00f709b,976a21f1392d92746f8c2f8377372b4dc00f709b,"Add no-op defaults to Video(Audio)RendererEventListener.

This is in line with how Player.EventListener and AnalyticsListener methods are
defined and helps to only implement the callbacks needed.

PiperOrigin-RevId: 223991262"
tonihei,2018-12-04 14:16:20,https://api.github.com/repos/google/ExoPlayer/git/commits/8a566fb330918eb029a05fe8b558f4045358f15b,8a566fb330918eb029a05fe8b558f4045358f15b,"Converge DownloadHelper implementations.

Moving most of the logic to the base DownloaderHelper helps to implement track
selection for downloading in a single place instead of multiple places.

PiperOrigin-RevId: 223964869"
ybai001,2018-12-05 07:07:41,https://api.github.com/repos/google/ExoPlayer/git/commits/7a924d64f0dd1d5e1b1eef4d0bc7b6d40c6d803d,7a924d64f0dd1d5e1b1eef4d0bc7b6d40c6d803d,"Merge pull request #1 from google/dev-v2

Pull from google:dev-v2"
ojw28,2018-12-03 20:07:01,https://api.github.com/repos/google/ExoPlayer/git/commits/8de149eb78f58b67892292920acfec6c72a56f40,8de149eb78f58b67892292920acfec6c72a56f40,"Use custom cache key factory for removal as well as downloading

Issue #5013

PiperOrigin-RevId: 223838303"
ojw28,2018-12-03 16:08:01,https://api.github.com/repos/google/ExoPlayer/git/commits/87a74ee021daabadea95501e89454eefba9a8ff0,87a74ee021daabadea95501e89454eefba9a8ff0,"Simplify DownloadManager.Task to use external state

PiperOrigin-RevId: 223797364"
ojw28,2018-12-03 16:02:27,https://api.github.com/repos/google/ExoPlayer/git/commits/f196630863dbb96442a6e4d850ce0dc6432e901f,f196630863dbb96442a6e4d850ce0dc6432e901f,"Remove contentId from Representation creators/constructor

PiperOrigin-RevId: 223796377"
erdemguven,2018-12-03 14:50:57,https://api.github.com/repos/google/ExoPlayer/git/commits/500b1faf145666d8dcdee9db415929d8885e470b,500b1faf145666d8dcdee9db415929d8885e470b,"Add Downloader.getTotalBytes() method

PiperOrigin-RevId: 223787832"
tonihei,2018-12-03 14:21:09,https://api.github.com/repos/google/ExoPlayer/git/commits/9f1e32f11292bdab5414c0874917a7466e2d2fdf,9f1e32f11292bdab5414c0874917a7466e2d2fdf,"Add experimental flag to AdaptiveTrackSelection.Factory to block fixed track bandwidth

This option to block bandwidth already exists on the AdaptiveTrackSelection itself
but it's not currently possible to forward the total fixed track bandwidth
automatically.

PiperOrigin-RevId: 223785139"
ojw28,2018-12-01 02:01:20,https://api.github.com/repos/google/ExoPlayer/git/commits/24f2cbb2154cf3e1e8459adb032983a888e905bb,24f2cbb2154cf3e1e8459adb032983a888e905bb,"updateQueuedPeriods(): If known duration changed for a media period, remove all media periods after

PiperOrigin-RevId: 223603915"
GiuseppePiscopo,2018-12-03 17:24:38,https://api.github.com/repos/google/ExoPlayer/git/commits/a11a8716ef0560fcd2d714a5d74978d036c99694,a11a8716ef0560fcd2d714a5d74978d036c99694,feat(MediaSource): provide getTag default implementation
GiuseppePiscopo,2018-12-03 17:21:37,https://api.github.com/repos/google/ExoPlayer/git/commits/b278b02816c9b188eb90fc97d00c05557848bb5b,b278b02816c9b188eb90fc97d00c05557848bb5b,chore(MediaSource): move getTag after removeEventListener
GiuseppePiscopo,2018-12-03 14:17:36,https://api.github.com/repos/google/ExoPlayer/git/commits/8a359bb1fb6d63f80a98e497f2c778eee568a8d7,8a359bb1fb6d63f80a98e497f2c778eee568a8d7,feat(MediaSource): client code can get the tag of a MediaSource
ojw28,2018-12-01 03:57:39,https://api.github.com/repos/google/ExoPlayer/git/commits/6b0e1758b22994a2725a2aa1ec9125e83aa58419,6b0e1758b22994a2725a2aa1ec9125e83aa58419,"Merge pull request #5164 from google/dev-v2-r2.9.2

r2.9.2"
ojw28,2018-11-30 23:01:07,https://api.github.com/repos/google/ExoPlayer/git/commits/a94fa330f5d093285779900a238ae1d25588f9e1,a94fa330f5d093285779900a238ae1d25588f9e1,"Prevent Cea608Decoder from generating Subtitles with null Cues list.

PiperOrigin-RevId: 223580953"
ojw28,2018-11-30 22:57:29,https://api.github.com/repos/google/ExoPlayer/git/commits/c55d95086b2b00e761acb1aad2e685c6faa15ce7,c55d95086b2b00e761acb1aad2e685c6faa15ce7,"Add several devices to setOutputSurface workaround:
- Asus ZenFone GO (ASUS_X00AD_2)
- Sugar S9 (i9031)
- Redmi Note 3 (kate)

These devices trigger native crashes similar to
https://github.com/google/ExoPlayer/issues/4460

I'm not sure why Asus Zenfone Go (model: ZB500KL, device: ASUS_X00AD_2) was removed here
https://github.com/google/ExoPlayer/commit/73af056da39b6ebead767d3d4c6e3162cc4c344c

PiperOrigin-RevId: 223580393"
ojw28,2018-11-30 23:01:07,https://api.github.com/repos/google/ExoPlayer/git/commits/ffbb0da8932b28a0bb21f49eb02cf39275044bdd,ffbb0da8932b28a0bb21f49eb02cf39275044bdd,"Prevent Cea608Decoder from generating Subtitles with null Cues list.

PiperOrigin-RevId: 223580953"
ojw28,2018-11-30 22:57:29,https://api.github.com/repos/google/ExoPlayer/git/commits/d98ab35a61f746330e9b608d3d34e5410ce342ab,d98ab35a61f746330e9b608d3d34e5410ce342ab,"Add several devices to setOutputSurface workaround:
- Asus ZenFone GO (ASUS_X00AD_2)
- Sugar S9 (i9031)
- Redmi Note 3 (kate)

These devices trigger native crashes similar to
https://github.com/google/ExoPlayer/issues/4460

I'm not sure why Asus Zenfone Go (model: ZB500KL, device: ASUS_X00AD_2) was removed here
https://github.com/google/ExoPlayer/commit/73af056da39b6ebead767d3d4c6e3162cc4c344c

PiperOrigin-RevId: 223580393"
ojw28,2018-11-30 18:37:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d650f8e0e38ba55aca8eb5ec863b7a027fc0c735,d650f8e0e38ba55aca8eb5ec863b7a027fc0c735,"Remove ability to inject content-id via DashManifestParser

It doesn't make sense for multi-period manifest

PiperOrigin-RevId: 223537958"
ojw28,2018-11-30 18:21:45,https://api.github.com/repos/google/ExoPlayer/git/commits/a1b8e17ed149b557fcfa261825f21d327cd433e3,a1b8e17ed149b557fcfa261825f21d327cd433e3,"Remove Representation.contentId. It doesn't really make sense.

PiperOrigin-RevId: 223535353"
tonihei,2018-11-30 17:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/8ffef3d6322cef16255bb2448680bb9d7920904b,8ffef3d6322cef16255bb2448680bb9d7920904b,"Add clarification to TextOutput doc.

The list may be empty if no cues are available.

PiperOrigin-RevId: 223527105"
ojw28,2018-11-30 16:34:59,https://api.github.com/repos/google/ExoPlayer/git/commits/8ee1af2aeaed0ce8c0c94f103cf148239c52ec60,8ee1af2aeaed0ce8c0c94f103cf148239c52ec60,"Update release notes for 2.9.2

PiperOrigin-RevId: 223520119"
ojw28,2018-11-30 16:20:49,https://api.github.com/repos/google/ExoPlayer/git/commits/88af944891efb1876d1ee3651dc018d20b8906d6,88af944891efb1876d1ee3651dc018d20b8906d6,"Move CachedContentIndex and SimpleCacheSpan tests to robolectric

PiperOrigin-RevId: 223518390"
andrewlewis,2018-11-29 12:15:51,https://api.github.com/repos/google/ExoPlayer/git/commits/f8ad6d309e9296544c1a78caf5dd721ef1811344,f8ad6d309e9296544c1a78caf5dd721ef1811344,"Fix clearkey DRM UUID passed to MediaCrypto

PiperOrigin-RevId: 223324279"
andrewlewis,2018-11-29 10:30:39,https://api.github.com/repos/google/ExoPlayer/git/commits/66f7e984ff855b146d52487417562b9a24722682,66f7e984ff855b146d52487417562b9a24722682,"Specify a version for the FFmpeg dependency

Issue: #5154
PiperOrigin-RevId: 223314749"
AquilesCanta,2018-11-28 19:39:04,https://api.github.com/repos/google/ExoPlayer/git/commits/9d50a6191e1c3d720a353b768407b44a710b974d,9d50a6191e1c3d720a353b768407b44a710b974d,"Add missing dot at the end of RELEASENOTES item

PiperOrigin-RevId: 223206504"
andrewlewis,2018-11-28 18:31:53,https://api.github.com/repos/google/ExoPlayer/git/commits/6d232f5b2b71bc8f90f4269d9d14a5435f67d876,6d232f5b2b71bc8f90f4269d9d14a5435f67d876,"Replace remaining stbl assertions with warnings

Issue: #5162
PiperOrigin-RevId: 223193019"
ojw28,2018-11-30 16:08:41,https://api.github.com/repos/google/ExoPlayer/git/commits/beae7c9df5199cd76a39115ab0d884e60883e462,beae7c9df5199cd76a39115ab0d884e60883e462,"Don't resolve UtcTiming element for static manifests

It doesn't do anything useful in this case.

PiperOrigin-RevId: 223516909"
tonihei,2018-11-30 08:40:17,https://api.github.com/repos/google/ExoPlayer/git/commits/ea483f8c8e2778bcaa7f0254b9390886640cb09b,ea483f8c8e2778bcaa7f0254b9390886640cb09b,"Fix some potential Uri nullness violations.

PiperOrigin-RevId: 223476569"
andrewlewis,2018-11-29 12:15:51,https://api.github.com/repos/google/ExoPlayer/git/commits/282cf303a4ad321fa97e73faa8a133c130c8dd95,282cf303a4ad321fa97e73faa8a133c130c8dd95,"Fix clearkey DRM UUID passed to MediaCrypto

PiperOrigin-RevId: 223324279"
andrewlewis,2018-11-29 10:30:39,https://api.github.com/repos/google/ExoPlayer/git/commits/1093aaf1853672ed5161fa21640dcb29f13c18bc,1093aaf1853672ed5161fa21640dcb29f13c18bc,"Specify a version for the FFmpeg dependency

Issue: #5154
PiperOrigin-RevId: 223314749"
AquilesCanta,2018-11-28 19:39:04,https://api.github.com/repos/google/ExoPlayer/git/commits/59cf8c1edfbd625f7138cd5563c273d9c40a9a8c,59cf8c1edfbd625f7138cd5563c273d9c40a9a8c,"Add missing dot at the end of RELEASENOTES item

PiperOrigin-RevId: 223206504"
andrewlewis,2018-11-28 18:31:53,https://api.github.com/repos/google/ExoPlayer/git/commits/699fee9727b0ace91e46a20c3de7186a05976fb2,699fee9727b0ace91e46a20c3de7186a05976fb2,"Replace remaining stbl assertions with warnings

Issue: #5162
PiperOrigin-RevId: 223193019"
ojw28,2018-11-28 11:41:33,https://api.github.com/repos/google/ExoPlayer/git/commits/51344778732bca8f568e9b6ae53cb873b89638a2,51344778732bca8f568e9b6ae53cb873b89638a2,"Bump for 2.9.2

PiperOrigin-RevId: 223141203"
andrewlewis,2018-11-28 08:26:41,https://api.github.com/repos/google/ExoPlayer/git/commits/15d13bdccd17e40a0ca7d26ed541af6b0a0db4cc,15d13bdccd17e40a0ca7d26ed541af6b0a0db4cc,"Handle metadata failing to decode in MetadataRenderer

Issue: #5149
PiperOrigin-RevId: 223121651"
ojw28,2018-11-28 11:41:33,https://api.github.com/repos/google/ExoPlayer/git/commits/f45943b4fbda8c102174a44161d3259bd509c49a,f45943b4fbda8c102174a44161d3259bd509c49a,"Bump for 2.9.2

PiperOrigin-RevId: 223141203"
andrewlewis,2018-11-28 08:26:41,https://api.github.com/repos/google/ExoPlayer/git/commits/510749fa15de05898b371e17e6fcef6b5975190a,510749fa15de05898b371e17e6fcef6b5975190a,"Handle metadata failing to decode in MetadataRenderer

Issue: #5149
PiperOrigin-RevId: 223121651"
ojw28,2018-11-27 13:58:44,https://api.github.com/repos/google/ExoPlayer/git/commits/017923ed81001c9827b452c2b06cbddd07bda776,017923ed81001c9827b452c2b06cbddd07bda776,"Fall back to TYPE_ROTATION_VECTOR if TYPE_GAME_ROTATION_VECTOR unavailable

Issue: #5119
PiperOrigin-RevId: 222978448"
ojw28,2018-11-27 13:14:22,https://api.github.com/repos/google/ExoPlayer/git/commits/38c53298b046445f6ee059c99910826d1ec300f3,38c53298b046445f6ee059c99910826d1ec300f3,"Strip private ID3 data from HLS sample formats

Issue: #5063
PiperOrigin-RevId: 222975020"
ojw28,2018-11-26 15:28:18,https://api.github.com/repos/google/ExoPlayer/git/commits/1e37d3186771d78404149508847e7af12d8fece5,1e37d3186771d78404149508847e7af12d8fece5,"Remove spurious VisibleForTesting annotation

It needs to have package visiblity, otherwise nothing can use it.

PiperOrigin-RevId: 222821546"
tonihei,2018-11-26 13:21:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d3f4c18401e82c781042d65e5c81462fc7edb595,d3f4c18401e82c781042d65e5c81462fc7edb595,"Provide Cronet request and response data for subclasses.

Subclasses may want to analyze, log and react to the Cronet-specific
connection data.

Issue:#5134
PiperOrigin-RevId: 222809441"
ojw28,2018-11-26 12:30:23,https://api.github.com/repos/google/ExoPlayer/git/commits/0bcce18976da6065256a12efc4c87ceace1b7ecb,0bcce18976da6065256a12efc4c87ceace1b7ecb,"Assume text tracks in protected SmoothStreaming are not protected

Issue: #4838
PiperOrigin-RevId: 222805051"
ojw28,2018-11-26 12:10:02,https://api.github.com/repos/google/ExoPlayer/git/commits/2cab83e6e4ed3b0a90b170e540f5021d3407100b,2cab83e6e4ed3b0a90b170e540f5021d3407100b,"Fix unnecessary media playlist requests when playing live streams

Issue: #5059
PiperOrigin-RevId: 222803511"
ojw28,2018-11-26 10:38:14,https://api.github.com/repos/google/ExoPlayer/git/commits/3a0b12707475a0eb7c310a8e81540a4c8592dca0,3a0b12707475a0eb7c310a8e81540a4c8592dca0,"Update content url for IMA demo app

The existing one seems to be dead, and isn't https.

PiperOrigin-RevId: 222795996"
ojw28,2018-11-26 10:50:49,https://api.github.com/repos/google/ExoPlayer/git/commits/9c821777a02af8db736202d5ba599d7a0287d494,9c821777a02af8db736202d5ba599d7a0287d494,"Noop fix to WebvttDecoder

We already have tests for comment blocks, and they already
pass because we discard the comment when we fail to parse it
as a cue. We should just skip it directly, however."
ojw28,2018-11-23 17:37:46,https://api.github.com/repos/google/ExoPlayer/git/commits/327d23c711d90e9a2c7c372bf3d34630fc355bd9,327d23c711d90e9a2c7c372bf3d34630fc355bd9,"Clarify contribution branch

PiperOrigin-RevId: 222632883"
ojw28,2018-11-23 16:55:26,https://api.github.com/repos/google/ExoPlayer/git/commits/07053aaa51576320bbfe28ff1c49ef386020fc82,07053aaa51576320bbfe28ff1c49ef386020fc82,"Add Lint.IfChange/ThenChange for repeat modes

PiperOrigin-RevId: 222630411"
ojw28,2018-11-23 16:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/2d808010ee5b836ce7e067a36ec451316a3cd85b,2d808010ee5b836ce7e067a36ec451316a3cd85b,"Ensure changes are reflected into attrs

PiperOrigin-RevId: 222628386"
BrainCrumbz,2018-11-23 12:36:43,https://api.github.com/repos/google/ExoPlayer/git/commits/e99c9041793cbbaddde5958fb6625929cdeab30b,e99c9041793cbbaddde5958fb6625929cdeab30b,"Merge #5126: fix(playlist): always call onCompletion when moving media sources

Imported from GitHub PR https://github.com/google/ExoPlayer/pull/5126

Closes #5125
Merge 55a4c1e15de7f100f37e38119f1da360910fd1e3 into fe41f17c387b7c18a818c8cf2a1ebcdfbd36836a

PiperOrigin-RevId: 222612873"
tonihei,2018-11-23 09:13:57,https://api.github.com/repos/google/ExoPlayer/git/commits/3039c358cc667eeea49d19d89530f94b92fd187f,3039c358cc667eeea49d19d89530f94b92fd187f,"Fix show_buffering attribute values.

The corresponding IntDef has changed without updating the attribute values.

Issue:#5139
PiperOrigin-RevId: 222598044"
tonihei,2018-11-22 17:32:04,https://api.github.com/repos/google/ExoPlayer/git/commits/0701fed7088e5f43a412ecf53504bbcf7d356849,0701fed7088e5f43a412ecf53504bbcf7d356849,"Use overflow-save add operation for blacklisting duration.

This allows to specify open-ended blacklisting with Long.MAX_VALUE.

PiperOrigin-RevId: 222550939"
ojw28,2018-11-23 12:28:23,https://api.github.com/repos/google/ExoPlayer/git/commits/028bd9df8f8071edf375423b1135c6b9195bb030,028bd9df8f8071edf375423b1135c6b9195bb030,Remove stray proguard files
ojw28,2018-11-21 15:38:37,https://api.github.com/repos/google/ExoPlayer/git/commits/d075e4f91b2597e3608d6ae911a4eb34359e873b,d075e4f91b2597e3608d6ae911a4eb34359e873b,"Fix HLS ID3 sniffing

The input.getLength() check is invalid because the length may be
unknown (i.e. if the server doesn't include a Content-Length
response header when serving chunks).

Issue: #5063 (tangentially related only)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222406347"
AquilesCanta,2018-11-21 13:58:24,https://api.github.com/repos/google/ExoPlayer/git/commits/473ed4cf69c3541cd82cd14e3d81d0087da05260,473ed4cf69c3541cd82cd14e3d81d0087da05260,"Support removal of ranges from ShuffleOrders

This allows more efficient range removals and is consistent with addition,
which supports adding multiple elements in a single operation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222396310"
ojw28,2018-11-21 13:09:46,https://api.github.com/repos/google/ExoPlayer/git/commits/56b0294ba2c6f28cdd7c6bc5d20740758174ce99,56b0294ba2c6f28cdd7c6bc5d20740758174ce99,"Support Opus and Flac in MP4/DASH

Issue: #4883

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222392621"
ojw28,2018-11-21 12:06:51,https://api.github.com/repos/google/ExoPlayer/git/commits/233ff0729dae360c6dccafe87ae02f6ab8075666,233ff0729dae360c6dccafe87ae02f6ab8075666,"Add test that DefaultDataSource is able to build an RtmpDataSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222387374"
andrewlewis,2018-11-19 17:23:11,https://api.github.com/repos/google/ExoPlayer/git/commits/269615e62f9675ac84728132cfa5562a74945d4b,269615e62f9675ac84728132cfa5562a74945d4b,"Update IMA SDK and Play Services Ads versions

Since version 17.0 play-services-ads requires specifying AD_MANAGER_APP=true in
AndroidManifest.xml, so add this in the IMA extension's manifest. See also
https://developers.google.com/ad-manager/mobile-ads-sdk/android/quick-start.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222087771"
tonihei,2018-11-15 17:46:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ec43ed7e59b3b7aaec2c031595cd6517a8f3ac0d,ec43ed7e59b3b7aaec2c031595cd6517a8f3ac0d,"Improve DefaultLoadControl.shouldContinueLoading for the minBuffer=maxBuffer case.

Currently no path may be chosen if
minBufferUs == maxBufferUs == bufferedDurationUs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221639199"
tonihei,2018-11-15 17:40:33,https://api.github.com/repos/google/ExoPlayer/git/commits/30941c41c3a2ca316eb78d7c4b9185983ae63183,30941c41c3a2ca316eb78d7c4b9185983ae63183,"Ensure DefaultLoadControl.Builder is single-use.

This is needed because the allocator can't be reused for example.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221638233"
ojw28,2018-11-14 16:40:42,https://api.github.com/repos/google/ExoPlayer/git/commits/c08edc5e0a065790e115d79a465317cc656f39d1,c08edc5e0a065790e115d79a465317cc656f39d1,"Workaround for TS seeking

- Increase the search window size to fix TS seeking for problematic
  media we've had provided to us.
- As per my comments on the issue, we should look at doing more here
  to better fix the problem. This will solve the worst of the
  immediate problem, however.
- The memory usage is non-trivial, particularly with the increased
  search window size. I've made the allocations only live whilst
  determining duration and seeking to address this. I've done the same
  for PS just for consistency.

Issue: #5097

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221449988"
ojw28,2018-11-14 15:13:10,https://api.github.com/repos/google/ExoPlayer/git/commits/84fc24492fa20b26393a910bb68f239c0c0d2f57,84fc24492fa20b26393a910bb68f239c0c0d2f57,"DASH: Fix detection of end of live events

The remaining work is to split Window.isDynamic so that it's
possible to represent a window that wont be appended to, but
may still be removed from.

Issue: #4780

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221439220"
ojw28,2018-11-14 14:44:38,https://api.github.com/repos/google/ExoPlayer/git/commits/177f3883e9d12d041b19d6d0a490bef024a84bb7,177f3883e9d12d041b19d6d0a490bef024a84bb7,"Noop cleanup of binary seeking / duration reading.

This is a precursor for fixing the ref'd issue. These classes are
well tested, so the tests passing should give you reasonable
confidence I didn't break anything :).

Issue: #5097

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221435824"
ojw28,2018-11-12 13:45:14,https://api.github.com/repos/google/ExoPlayer/git/commits/0311e153f367d5a798999721ecbfcdbd26d3725c,0311e153f367d5a798999721ecbfcdbd26d3725c,"Document need to call MediaSessionCompat.setActive

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221078075"
AquilesCanta,2018-11-12 13:11:37,https://api.github.com/repos/google/ExoPlayer/git/commits/f7ed39ee173175f1154e6ad0be30fb03d2211d0e,f7ed39ee173175f1154e6ad0be30fb03d2211d0e,"Add constructor to DefaultShuffleOrder to support sideloaded shuffle orders

Issue: #4915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221075615"
ojw28,2018-11-12 12:43:43,https://api.github.com/repos/google/ExoPlayer/git/commits/2426a047f1aa54cfcbf105faeda7cbff5ee9cc5a,2426a047f1aa54cfcbf105faeda7cbff5ee9cc5a,"Make support-media-compat an API dependency

The extension cannot be used without also using support-media-compat
(e.g. to instantiate a MediaSessionCompat). So it may as well be an
API dependency.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221072128"
andrewlewis,2018-11-08 16:18:44,https://api.github.com/repos/google/ExoPlayer/git/commits/d9462b9d2b987e5280e9d9a9717ef9d70665f2b3,d9462b9d2b987e5280e9d9a9717ef9d70665f2b3,"Include channel count in capabilities check

Issue: #4690

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220640737"
ojw28,2018-11-27 13:58:44,https://api.github.com/repos/google/ExoPlayer/git/commits/05a79a417a8ef5e1f38092531494cfc0d074f9c9,05a79a417a8ef5e1f38092531494cfc0d074f9c9,"Fall back to TYPE_ROTATION_VECTOR if TYPE_GAME_ROTATION_VECTOR unavailable

Issue: #5119
PiperOrigin-RevId: 222978448"
andrewlewis,2018-11-27 13:56:46,https://api.github.com/repos/google/ExoPlayer/git/commits/19a6f904e549c09ce15af8e6d469a80a1fc23826,19a6f904e549c09ce15af8e6d469a80a1fc23826,"Reformat cast DemoUtil

PiperOrigin-RevId: 222978255"
ojw28,2018-11-27 13:14:22,https://api.github.com/repos/google/ExoPlayer/git/commits/1ce33362c94a693b766d42f0dddc8bae2b8a5340,1ce33362c94a693b766d42f0dddc8bae2b8a5340,"Strip private ID3 data from HLS sample formats

Issue: #5063
PiperOrigin-RevId: 222975020"
ojw28,2018-11-27 11:11:22,https://api.github.com/repos/google/ExoPlayer/git/commits/681919269042e93efaed9a74c118799127e05ab5,681919269042e93efaed9a74c118799127e05ab5,"Clean up CacheDataSourceTest

PiperOrigin-RevId: 222965111"
ojw28,2018-11-27 11:02:11,https://api.github.com/repos/google/ExoPlayer/git/commits/aacb212c174c802282b976d067148c3140cdb3d1,aacb212c174c802282b976d067148c3140cdb3d1,"Remove duplicate CacheAsserts class

PiperOrigin-RevId: 222963935"
ojw28,2018-11-26 16:53:41,https://api.github.com/repos/google/ExoPlayer/git/commits/e31730590974e801d74d329562155f13a387f63a,e31730590974e801d74d329562155f13a387f63a,"Remove custom data from remove actions

A remove action will eventually just be the unique ID of the download
that should be removed. This is a step toward that goal.

PiperOrigin-RevId: 222832456"
zsmatyas,2018-11-07 22:07:09,https://api.github.com/repos/google/ExoPlayer/git/commits/d1e49f20744d2beab7b41bc110e1e53a8de0a73f,d1e49f20744d2beab7b41bc110e1e53a8de0a73f,"CEA608: PAINT-ON Mode must keep the last shown captions on the screen

[Problem]
PAINT-ON mode is not implemented. From the compliance tests:
* RDC command has no effect except to select paint-on style.
* Next data are written directly to the display upon receipt.
* If other captioning is already on the screen, the four-row
limit is still in effect.

[Solution]
It is a rare use case, we do not support overriding characters in
existing cueBuilders as PAINT-ON would require. But several
compliance tests check if the screen is cleared when the mode
switch happens. We must keep the old captions when switching
to PAINT-ON mode

[Test]
- Live Over-the-Air content, beginning of commercials often uses
PAINT-ON mode"
ojw28,2018-11-26 15:28:18,https://api.github.com/repos/google/ExoPlayer/git/commits/f4d9deddaf6b9e213d160435d79f43ee6be3bb44,f4d9deddaf6b9e213d160435d79f43ee6be3bb44,"Remove spurious VisibleForTesting annotation

It needs to have package visiblity, otherwise nothing can use it.

PiperOrigin-RevId: 222821546"
ojw28,2018-11-26 15:13:16,https://api.github.com/repos/google/ExoPlayer/git/commits/a31a3f3c73246b2ea49d6c2c8c0e7875459c2ba0,a31a3f3c73246b2ea49d6c2c8c0e7875459c2ba0,"Simplify DownloadActionTest legacy tests using assets

PiperOrigin-RevId: 222819933"
tonihei,2018-11-26 13:21:02,https://api.github.com/repos/google/ExoPlayer/git/commits/30e753ea1df77fb64caf48484cc2aee830374a7b,30e753ea1df77fb64caf48484cc2aee830374a7b,"Provide Cronet request and response data for subclasses.

Subclasses may want to analyze, log and react to the Cronet-specific
connection data.

Issue:#5134
PiperOrigin-RevId: 222809441"
ojw28,2018-11-26 12:30:23,https://api.github.com/repos/google/ExoPlayer/git/commits/3e150b54f42908f3bd7d7fdb8b93f87c95bbacb4,3e150b54f42908f3bd7d7fdb8b93f87c95bbacb4,"Assume text tracks in protected SmoothStreaming are not protected

Issue: #4838
PiperOrigin-RevId: 222805051"
ojw28,2018-11-26 12:10:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d6b6600a28b959ef9b9e1f3bb3135f2e81355f13,d6b6600a28b959ef9b9e1f3bb3135f2e81355f13,"Fix unnecessary media playlist requests when playing live streams

Issue: #5059
PiperOrigin-RevId: 222803511"
ojw28,2018-11-26 11:48:11,https://api.github.com/repos/google/ExoPlayer/git/commits/40c65dbcea913447cf97a6fe900b291547c02de1,40c65dbcea913447cf97a6fe900b291547c02de1,"Move deserialization code to a more natural location

- Add DownloadAction.fromByteArray for symmetry with toByteArray
- Make DownloadService call fromByteArray, for symmetry with calls
  to toByteArray

PiperOrigin-RevId: 222801703"
ojw28,2018-11-26 11:06:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5284ad2e41edb1f6d46e9633d6bc0c492319cc19,5284ad2e41edb1f6d46e9633d6bc0c492319cc19,"Merge pull request #5144 from google:dev-v2-vttfix

PiperOrigin-RevId: 222798467"
ojw28,2018-11-26 10:58:41,https://api.github.com/repos/google/ExoPlayer/git/commits/17eadcc4335cf9079b3ebbd419fde94cff989906,17eadcc4335cf9079b3ebbd419fde94cff989906,"Fix Cea608 caption valid

PiperOrigin-RevId: 222797622"
ojw28,2018-11-26 10:38:14,https://api.github.com/repos/google/ExoPlayer/git/commits/03101444aff3b321931bba059dcae5d9459d2d56,03101444aff3b321931bba059dcae5d9459d2d56,"Update content url for IMA demo app

The existing one seems to be dead, and isn't https.

PiperOrigin-RevId: 222795996"
ojw28,2018-11-26 10:50:49,https://api.github.com/repos/google/ExoPlayer/git/commits/166acad93dac6ddfe3aa71c11b18e07008a0e71b,166acad93dac6ddfe3aa71c11b18e07008a0e71b,"Noop fix to WebvttDecoder

We already have tests for comment blocks, and they already
pass because we discard the comment when we fail to parse it
as a cue. We should just skip it directly, however."
ojw28,2018-11-23 17:58:45,https://api.github.com/repos/google/ExoPlayer/git/commits/799bf16764f3cdb267897c30a933e5364856a3a4,799bf16764f3cdb267897c30a933e5364856a3a4,"Pull reading of data bytes back above if(...){continue} clauses

PiperOrigin-RevId: 222633838"
ojw28,2018-11-23 17:46:26,https://api.github.com/repos/google/ExoPlayer/git/commits/e2e1c459c8e41cecfae0d89fe826cd030e92de91,e2e1c459c8e41cecfae0d89fe826cd030e92de91,"Merge #5140: Cea608 - Check parity and valid bits

Imported from GitHub PR https://github.com/google/ExoPlayer/pull/5140

https://github.com/google/ExoPlayer/pull/5086 moved onto the right branch.
Merge 8822e188d24c1d9b3ed101918763b16e46c8debc into 0c385a854d1c54f794789b390a5793a43a0eb147

PiperOrigin-RevId: 222633340"
ojw28,2018-11-23 17:37:46,https://api.github.com/repos/google/ExoPlayer/git/commits/0c385a854d1c54f794789b390a5793a43a0eb147,0c385a854d1c54f794789b390a5793a43a0eb147,"Clarify contribution branch

PiperOrigin-RevId: 222632883"
ojw28,2018-11-23 16:55:26,https://api.github.com/repos/google/ExoPlayer/git/commits/121606825533394c7dea518b872c1e40c0905803,121606825533394c7dea518b872c1e40c0905803,"Add Lint.IfChange/ThenChange for repeat modes

PiperOrigin-RevId: 222630411"
ojw28,2018-11-23 16:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ea8696d820bbb6def20acc241f3e9c063c5f34a5,ea8696d820bbb6def20acc241f3e9c063c5f34a5,"Ensure changes are reflected into attrs

PiperOrigin-RevId: 222628386"
BrainCrumbz,2018-11-23 12:36:43,https://api.github.com/repos/google/ExoPlayer/git/commits/d3095cccfed3c6efd393118508e3094493234e9c,d3095cccfed3c6efd393118508e3094493234e9c,"Merge #5126: fix(playlist): always call onCompletion when moving media sources

Imported from GitHub PR https://github.com/google/ExoPlayer/pull/5126

Closes #5125
Merge 55a4c1e15de7f100f37e38119f1da360910fd1e3 into fe41f17c387b7c18a818c8cf2a1ebcdfbd36836a

PiperOrigin-RevId: 222612873"
AquilesCanta,2018-11-23 11:46:24,https://api.github.com/repos/google/ExoPlayer/git/commits/fe41f17c387b7c18a818c8cf2a1ebcdfbd36836a,fe41f17c387b7c18a818c8cf2a1ebcdfbd36836a,"Move listener invocation classes to BasePlayer

PiperOrigin-RevId: 222609579"
tonihei,2018-11-23 09:13:57,https://api.github.com/repos/google/ExoPlayer/git/commits/1a9705e247623abd93b665b712976d11ced12e53,1a9705e247623abd93b665b712976d11ced12e53,"Fix show_buffering attribute values.

The corresponding IntDef has changed without updating the attribute values.

Issue:#5139
PiperOrigin-RevId: 222598044"
tonihei,2018-11-22 17:32:04,https://api.github.com/repos/google/ExoPlayer/git/commits/f8a3c135e5ba0216053a9a041f4020888579b6f5,f8a3c135e5ba0216053a9a041f4020888579b6f5,"Use overflow-save add operation for blacklisting duration.

This allows to specify open-ended blacklisting with Long.MAX_VALUE.

PiperOrigin-RevId: 222550939"
ojw28,2018-11-23 12:28:23,https://api.github.com/repos/google/ExoPlayer/git/commits/56e4860cb0683de34cd464aa85abaa733a959a29,56e4860cb0683de34cd464aa85abaa733a959a29,Remove stray proguard files
ojw28,2018-11-22 12:39:26,https://api.github.com/repos/google/ExoPlayer/git/commits/dd2cba04ddea84e069f427d0dd45a086a7ab6d86,dd2cba04ddea84e069f427d0dd45a086a7ab6d86,"Offline refactor step 1b - Consolidate tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222529260"
tonihei,2018-11-21 15:41:27,https://api.github.com/repos/google/ExoPlayer/git/commits/fd2f8eaba8604bef2c1fadf3e70a2154772790dd,fd2f8eaba8604bef2c1fadf3e70a2154772790dd,"Make ABR playback tests more resilient to HostActivity failures.

We currently fail the entire playback tests if we exceed a start timeout
or the test gets stopped forcefully. This is problematic as the start timeout
may happen from time to time for the ABR tests and we'd still like to have the
remaining playbacks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222406639"
ojw28,2018-11-21 15:38:37,https://api.github.com/repos/google/ExoPlayer/git/commits/dd47bfffb0b981031a80e8f9a3d1e5ddf6ff4ace,dd47bfffb0b981031a80e8f9a3d1e5ddf6ff4ace,"Fix HLS ID3 sniffing

The input.getLength() check is invalid because the length may be
unknown (i.e. if the server doesn't include a Content-Length
response header when serving chunks).

Issue: #5063 (tangentially related only)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222406347"
AquilesCanta,2018-11-21 13:58:24,https://api.github.com/repos/google/ExoPlayer/git/commits/5f12b065a44668483c0da661654ed889e8891c5f,5f12b065a44668483c0da661654ed889e8891c5f,"Support removal of ranges from ShuffleOrders

This allows more efficient range removals and is consistent with addition,
which supports adding multiple elements in a single operation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222396310"
ojw28,2018-11-21 13:09:46,https://api.github.com/repos/google/ExoPlayer/git/commits/265462bcbd41a7de2b28152222ca77428a899408,265462bcbd41a7de2b28152222ca77428a899408,"Support Opus and Flac in MP4/DASH

Issue: #4883

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222392621"
ojw28,2018-11-21 12:06:51,https://api.github.com/repos/google/ExoPlayer/git/commits/42cb2c0d622200bb8dad3307642a633bf6cc0ee2,42cb2c0d622200bb8dad3307642a633bf6cc0ee2,"Add test that DefaultDataSource is able to build an RtmpDataSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222387374"
tonihei,2018-11-21 11:24:54,https://api.github.com/repos/google/ExoPlayer/git/commits/1699fbfa74f127a5b4cef5770db8d71e23e0d43c,1699fbfa74f127a5b4cef5770db8d71e23e0d43c,"Add experimental option to subtract non-allocatable bandwidth.

This allows to account for bandwidth used by fixed track selections.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222383736"
erdemguven,2018-11-20 21:03:52,https://api.github.com/repos/google/ExoPlayer/git/commits/10eaa7d74876a7e36ab9341b407af29e5a53502f,10eaa7d74876a7e36ab9341b407af29e5a53502f,"Replace BandwidthMeter with BandwidthProvider in AdaptiveTrackSelection

BandwidthProvider allows bandwidth allocation logic to be customized.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222293581"
ojw28,2018-11-20 17:33:47,https://api.github.com/repos/google/ExoPlayer/git/commits/6ebb6124bbcc8645f8e7bae4905a6439a1b3ad33,6ebb6124bbcc8645f8e7bae4905a6439a1b3ad33,"Offline refactor step 1a - Make DownloadAction concrete

1. Pull up all subclasses of DownloadAction into DownloadAction
2. Add DownloaderFactory for Downloader instantiation, and DefaultDownloaderFactory
   to replace the instantiation logic being removed from the DownloadAction
   subclasses.

This change will upgrade existing action files gracefully (i.e. it does not
lose compatibility with the existing offline implementation, other than some
minor breaking changes to the API).

TODOs:

1. Move test methods from the XDownloadActionTest classes into DownloadActionTest.
   This will be done in a subsequent CL. There's a lot of consolidation that can
   be done here, including de-duplicating some of the test code added in this CL.
2. Look at merging DownloaderConstructorHelper into DefaultDownloaderFactory.
3. Use customCacheKey in DASH/HLS/SS Downloaders, for completeness.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222258983"
szaboa,2018-11-22 09:09:44,https://api.github.com/repos/google/ExoPlayer/git/commits/651db9159e512b15c119d826c51edb30714d500f,651db9159e512b15c119d826c51edb30714d500f,#1583 - Adding support for pixel defined regions
erdemguven,2018-11-20 13:32:51,https://api.github.com/repos/google/ExoPlayer/git/commits/527f2cf730bb7fe45e9c6075b34d927bc6a17626,527f2cf730bb7fe45e9c6075b34d927bc6a17626,"Add TrackSelection.Factory createTrackSelections

createTrackSelections decides whether to create an adaptive or a fixed track seletion to create.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222231011"
tonihei,2018-11-20 12:57:12,https://api.github.com/repos/google/ExoPlayer/git/commits/55cc0df558089da0197757d517af5ba8beaa067b,55cc0df558089da0197757d517af5ba8beaa067b,"Create actual copy of listener list instead of just copying the reference.

Forwarding the listeners to the notification update is meant to ensure we
only notify the listeners which were registered at the time the event happened

However, we currently just copy the reference to the actual list instead of
doing a deep copy of the listeners.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222227735"
tonihei,2018-11-20 12:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b7ab570094240b051e3dc4914b7bceffe2749b0e,b7ab570094240b051e3dc4914b7bceffe2749b0e,"Use serialized listener notification for all listener notifications.

This ensures that all callbacks use the same notification mechanism.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222226913"
tonihei,2018-11-20 12:45:11,https://api.github.com/repos/google/ExoPlayer/git/commits/771db2c9fcd312a653d9a215f28f29f6157bbe7d,771db2c9fcd312a653d9a215f28f29f6157bbe7d,"Move playWhenReady update out of PlaybackInfoUpdate.

The update is actually unrelated and putting it all in one large update
object complicates adding the same update mechanism for other values.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222226825"
tonihei,2018-11-20 11:36:02,https://api.github.com/repos/google/ExoPlayer/git/commits/edff52ba5f5dad51a868ea57011a22f1ce47528d,edff52ba5f5dad51a868ea57011a22f1ce47528d,"Add buffer size based adaptive track selection.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222221294"
andrewlewis,2018-11-19 17:23:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a3c046983765b26688e8ac0e24a1539172594f7a,a3c046983765b26688e8ac0e24a1539172594f7a,"Update IMA SDK and Play Services Ads versions

Since version 17.0 play-services-ads requires specifying AD_MANAGER_APP=true in
AndroidManifest.xml, so add this in the IMA extension's manifest. See also
https://developers.google.com/ad-manager/mobile-ads-sdk/android/quick-start.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222087771"
erdemguven,2018-11-19 14:18:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f48ad85b196a9adab622bd4185d5073c01416cd9,f48ad85b196a9adab622bd4185d5073c01416cd9,"Add experiment to use WindowedTrackBitrateEstimator

WindowedTrackBitrateEstimator, uses future and past chunks in a window
of time to estimate track bitrate values.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=222065409"
tonihei,2018-11-15 17:46:19,https://api.github.com/repos/google/ExoPlayer/git/commits/9dd814fcfe96c61c18c8a292478a141e5f27b6c4,9dd814fcfe96c61c18c8a292478a141e5f27b6c4,"Improve DefaultLoadControl.shouldContinueLoading for the minBuffer=maxBuffer case.

Currently no path may be chosen if
minBufferUs == maxBufferUs == bufferedDurationUs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221639199"
tonihei,2018-11-15 17:40:33,https://api.github.com/repos/google/ExoPlayer/git/commits/7cf62a03f0f2d8fc7c2f83a69c3d81125dbec185,7cf62a03f0f2d8fc7c2f83a69c3d81125dbec185,"Ensure DefaultLoadControl.Builder is single-use.

This is needed because the allocator can't be reused for example.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221638233"
AquilesCanta,2018-11-15 14:59:10,https://api.github.com/repos/google/ExoPlayer/git/commits/67b662158ca7de98b4c592c3a4aa427254636ab1,67b662158ca7de98b4c592c3a4aa427254636ab1,"Add binarySearchCeil method for integers

This matches the binarySearchFloor method overload.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221617114"
ojw28,2018-11-14 16:40:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b77109148e500b1d0271aa97dd99fe808fd5474d,b77109148e500b1d0271aa97dd99fe808fd5474d,"Workaround for TS seeking

- Increase the search window size to fix TS seeking for problematic
  media we've had provided to us.
- As per my comments on the issue, we should look at doing more here
  to better fix the problem. This will solve the worst of the
  immediate problem, however.
- The memory usage is non-trivial, particularly with the increased
  search window size. I've made the allocations only live whilst
  determining duration and seeking to address this. I've done the same
  for PS just for consistency.

Issue: #5097

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221449988"
ojw28,2018-11-14 15:13:10,https://api.github.com/repos/google/ExoPlayer/git/commits/5e6174fe3809684f8749c8bd11b9254b345ea434,5e6174fe3809684f8749c8bd11b9254b345ea434,"DASH: Fix detection of end of live events

The remaining work is to split Window.isDynamic so that it's
possible to represent a window that wont be appended to, but
may still be removed from.

Issue: #4780

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221439220"
AquilesCanta,2018-11-14 14:58:42,https://api.github.com/repos/google/ExoPlayer/git/commits/76eb06d6f2e6cd3fe605878bb3880b87ec1c9c7e,76eb06d6f2e6cd3fe605878bb3880b87ec1c9c7e,"Add Timeline to nullness check

This allows client code to run nullability checks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221437215"
ojw28,2018-11-14 14:44:38,https://api.github.com/repos/google/ExoPlayer/git/commits/866b088d0bf7be3daf87c1ac324bb5d6a1ba78c4,866b088d0bf7be3daf87c1ac324bb5d6a1ba78c4,"Noop cleanup of binary seeking / duration reading.

This is a precursor for fixing the ref'd issue. These classes are
well tested, so the tests passing should give you reasonable
confidence I didn't break anything :).

Issue: #5097

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221435824"
ojw28,2018-11-12 22:06:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c20b157bd7feae35ffdcb84cc46647ba8f23e208,c20b157bd7feae35ffdcb84cc46647ba8f23e208,"Wire up experiment to use AdaptiveTrackSelection based selections

LegacyVideoTrackSelection is the previous implementation (unchanged).
VideoTrackSelection is rewritten to extend AdaptiveTrackSelection.

An experiment is added to allow use of the new VideoTrackSelection
implementation. It's envisaged that this transition will be more or
less a no-op change. The experiment flag is only in case of bugs
during roll-out, and will be removed with LegacyVideoTrackSelection
upon successful transition.

VideoTrackSelection also implements discard-on-trick-play-exit, which
was a TODO in the previous implementation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221153827"
ojw28,2018-11-12 13:45:14,https://api.github.com/repos/google/ExoPlayer/git/commits/f5af6e8f169e9be98353ac8951275e5d44ff5d15,f5af6e8f169e9be98353ac8951275e5d44ff5d15,"Document need to call MediaSessionCompat.setActive

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221078075"
ojw28,2018-11-12 13:18:03,https://api.github.com/repos/google/ExoPlayer/git/commits/9ca019b8f808a38fea3a467cff200ff7ebf876ce,9ca019b8f808a38fea3a467cff200ff7ebf876ce,"PlaybackNotificationManager should show play button in ENDED state

- This brings it in line with PlayerControlView. The play action is displayed
instead, and pressing it seeks to the default position of the current window.
- Do the same for MediaSessionConnector
- Add support for PlaybackPreparer consistent with PlayerControlView

Issue: #5072

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221076008"
AquilesCanta,2018-11-12 13:11:37,https://api.github.com/repos/google/ExoPlayer/git/commits/51461d7e0022394a1d2f68b2281020d769532e3e,51461d7e0022394a1d2f68b2281020d769532e3e,"Add constructor to DefaultShuffleOrder to support sideloaded shuffle orders

Issue: #4915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221075615"
ojw28,2018-11-12 12:43:43,https://api.github.com/repos/google/ExoPlayer/git/commits/afebaed0c58bfc3e36eaf16fa57c9469a310a746,afebaed0c58bfc3e36eaf16fa57c9469a310a746,"Make support-media-compat an API dependency

The extension cannot be used without also using support-media-compat
(e.g. to instantiate a MediaSessionCompat). So it may as well be an
API dependency.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221072128"
ojw28,2018-11-12 12:24:51,https://api.github.com/repos/google/ExoPlayer/git/commits/eb6859e436b5ef7735b83d3e38b94b6826c97c7e,eb6859e436b5ef7735b83d3e38b94b6826c97c7e,"Align navigation implementation across UI components

This change also paves the way for splitting out functionality into a utility class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221070262"
ojw28,2018-11-12 11:32:39,https://api.github.com/repos/google/ExoPlayer/git/commits/75082194160dbdc3b92ee077ba8131a31205b05e,75082194160dbdc3b92ee077ba8131a31205b05e,"Simplify PlayerControlView fast forward and rewind implementation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=221065798"
ojw28,2018-11-09 18:14:58,https://api.github.com/repos/google/ExoPlayer/git/commits/063f5704cd80a733bf770375d8fbf402a6c5d958,063f5704cd80a733bf770375d8fbf402a6c5d958,"Simplify MediaSessionConnector

- Make MediaSessionConnector use a ControlDispatcher and add setControlDispatcher,
  setFastForwardIncrementMs and setRewindIncrementMs methods. This brings it in line
  with our other UI components, including PlayerControlView and
  PlayerNotificationManager.
- Collapsed DefaultPlaybackController into MediaSessionConnector, since I'm not
  sure there's a legitimate alternative implementation (note ControlDispatcher does
  provide some equivalent functionality e.g. to modify calls being made on the
  player).
- Pass the Player and ControlDispatcher to command receivers and custom actions,
  so they don't need their own references.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220822082"
ojw28,2018-11-09 13:33:57,https://api.github.com/repos/google/ExoPlayer/git/commits/8ec757ad2bca4280fbfe8d83a49a876a4eccb1cb,8ec757ad2bca4280fbfe8d83a49a876a4eccb1cb,"Some MediaSessionConnector simplifications

- Simplify logic for dispatching to the rating callback
- Simplify CommandReceiver by removing getCommands. Simply calling
  receivers is simpler, and more flexible because it doesn't force
  implementations to define a static set of things that they handle
  up front.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220788423"
erdemguven,2018-11-08 16:44:22,https://api.github.com/repos/google/ExoPlayer/git/commits/4754aa59bd0429e671eca5e5d7b35debc5c714ca,4754aa59bd0429e671eca5e5d7b35debc5c714ca,"Use estimated bitrates in AdaptiveTrackSelection

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220643861"
andrewlewis,2018-11-08 16:18:44,https://api.github.com/repos/google/ExoPlayer/git/commits/bce1fab03cd55d7ea95c32db79e8fe5dd389aac9,bce1fab03cd55d7ea95c32db79e8fe5dd389aac9,"Include channel count in capabilities check

Issue: #4690

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220640737"
marcbaechinger,2018-11-08 12:24:59,https://api.github.com/repos/google/ExoPlayer/git/commits/91d9fbd95d5acfdf2e74685141b199f7d97c9e68,91d9fbd95d5acfdf2e74685141b199f7d97c9e68,"pass the notification listener to the constructor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220616166"
ojw28,2018-11-08 08:19:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b44f837d1b16f89c0f3b6996a530e17141b6962f,b44f837d1b16f89c0f3b6996a530e17141b6962f,"Update release notes for 2.9.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220592303"
erdemguven,2018-11-07 22:28:44,https://api.github.com/repos/google/ExoPlayer/git/commits/158bc1edacf6e316de7de9623e37d008e86f5651,158bc1edacf6e316de7de9623e37d008e86f5651,"Add TrackBitrateEstimator and WindowedTrackBitrateEstimator

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220529628"
szaboa,2018-11-12 21:11:44,https://api.github.com/repos/google/ExoPlayer/git/commits/78ef90f61c8d2cd3f80ca4b34b4d5871cd0024b6,78ef90f61c8d2cd3f80ca4b34b4d5871cd0024b6,"Correcting default sizing of bitmaps, code review adjustments"
szaboa,2018-11-10 15:07:07,https://api.github.com/repos/google/ExoPlayer/git/commits/d159050eebc7b93ab816bd4b97a38d8972cb4875,d159050eebc7b93ab816bd4b97a38d8972cb4875,"#1583 - Set default region attrs in SubtitlePainter, extend TtmlDecoderTest"
szaboa,2018-11-08 20:22:23,https://api.github.com/repos/google/ExoPlayer/git/commits/c7f763a3692b1bd24f24e0e9492360bfe937a74f,c7f763a3692b1bd24f24e0e9492360bfe937a74f,"#1583 - Modify in event time generation of TtmlNode

Look for ""div"" tags when generating the set of times."
ojw28,2018-11-08 16:48:20,https://api.github.com/repos/google/ExoPlayer/git/commits/b5beb32618ac99adc58b537031a6f7c3dd761b9a,b5beb32618ac99adc58b537031a6f7c3dd761b9a,"Merge pull request #5037 from google/dev-v2-r2.9.1

r2.9.1"
ojw28,2018-11-07 19:35:23,https://api.github.com/repos/google/ExoPlayer/git/commits/f895be6b1f7b0202802a3d1a196f36e9131b4db6,f895be6b1f7b0202802a3d1a196f36e9131b4db6,"AudioFocusManager - Treat idle state consistently

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220500268"
ojw28,2018-11-07 19:24:02,https://api.github.com/repos/google/ExoPlayer/git/commits/a02a75ba57c7e8486b0a22a9df8bb69f0cd7d495,a02a75ba57c7e8486b0a22a9df8bb69f0cd7d495,Fix audio focus
ojw28,2018-11-07 16:53:09,https://api.github.com/repos/google/ExoPlayer/git/commits/f5c3b30290692f2385ad43e7e8ca26f742508476,f5c3b30290692f2385ad43e7e8ca26f742508476,"Fix BasePlayer.next()

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220470213"
ojw28,2018-11-07 16:49:10,https://api.github.com/repos/google/ExoPlayer/git/commits/6bc04082224daae7440e555ecc357abc9aecc99f,6bc04082224daae7440e555ecc357abc9aecc99f,"Make BasePlayer.get[Next/Previous]WindowIndex more useful

When in REPEAT_MODE_ONE, it's unlikely apps want next/previous methods
on the player to keep them in the same window. Music apps in particular
tend to implement next/previous functionality as though repeat mode were
off when in this mode (i.e. current song loops forever during playback,
but next/previous navigation still navigates to next/previous items).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220469655"
ojw28,2018-11-07 16:39:05,https://api.github.com/repos/google/ExoPlayer/git/commits/fd98d70a113baf67d173714ae781bc0315e2f2f6,fd98d70a113baf67d173714ae781bc0315e2f2f6,"Make TimelineQueueNavigator shuffle aware

Issue: #5065

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220468285"
ojw28,2018-11-07 15:47:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b8b8844083ff7589836485db013907b908683d60,b8b8844083ff7589836485db013907b908683d60,"Add missing update on repeat toggle mode change

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220461315"
nic0lette,2018-11-06 19:18:28,https://api.github.com/repos/google/ExoPlayer/git/commits/ac0b11edc0606dbf82e2623828bbbc416e069f7e,ac0b11edc0606dbf82e2623828bbbc416e069f7e,"Fix for #5055 - Cannot disable audio focus after enabled.

This fixes an issue where disabling audio focus handling
while audio focus is held would not release audio focus.

A new test was added for this situation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220316866"
andrewlewis,2018-11-06 14:03:59,https://api.github.com/repos/google/ExoPlayer/git/commits/54075ed166f64089d645a4e58a7f26ff70f85da2,54075ed166f64089d645a4e58a7f26ff70f85da2,"Remove executable bit from some resources

Copybara propagates this bit on the files, so removing it avoids some
unnecessary changes in the first migrated commit.

Also losslessly optimize two PNG files.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220268951"
ojw28,2018-11-07 16:53:09,https://api.github.com/repos/google/ExoPlayer/git/commits/8d833c319d6be36bf49ad03c99594263a75d1ea1,8d833c319d6be36bf49ad03c99594263a75d1ea1,"Fix BasePlayer.next()

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220470213"
ojw28,2018-11-07 16:49:10,https://api.github.com/repos/google/ExoPlayer/git/commits/e82d29f47a4b6ce6a7ec1778195ed3fa2c92f656,e82d29f47a4b6ce6a7ec1778195ed3fa2c92f656,"Make BasePlayer.get[Next/Previous]WindowIndex more useful

When in REPEAT_MODE_ONE, it's unlikely apps want next/previous methods
on the player to keep them in the same window. Music apps in particular
tend to implement next/previous functionality as though repeat mode were
off when in this mode (i.e. current song loops forever during playback,
but next/previous navigation still navigates to next/previous items).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220469655"
ojw28,2018-11-07 16:39:05,https://api.github.com/repos/google/ExoPlayer/git/commits/15dda17905502b99d6fe830895811737ab78476e,15dda17905502b99d6fe830895811737ab78476e,"Make TimelineQueueNavigator shuffle aware

Issue: #5065

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220468285"
ojw28,2018-11-07 16:09:16,https://api.github.com/repos/google/ExoPlayer/git/commits/2d606f26f7f0ea04ba04d58ccf4cb2bfad64db78,2d606f26f7f0ea04ba04d58ccf4cb2bfad64db78,"Minor cleanup to mediasession extension

- Make units of time clear for seeking
- Remove option to specify supported repeat modes in default
  playback controller. It doesn't seem useful, given we can't
  control what the session is sent.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220464529"
ojw28,2018-11-07 15:47:51,https://api.github.com/repos/google/ExoPlayer/git/commits/0dfd478a2044b8a2b4bb52c74e783f55dd66e8e7,0dfd478a2044b8a2b4bb52c74e783f55dd66e8e7,"Add missing update on repeat toggle mode change

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220461315"
erdemguven,2018-11-07 13:28:34,https://api.github.com/repos/google/ExoPlayer/git/commits/5a18a98fbd8ce75786de804f97b3c80722d19fde,5a18a98fbd8ce75786de804f97b3c80722d19fde,"Add TrackSelectionUtil getBitratesUsingPastAndFutureInfo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220447459"
erdemguven,2018-11-07 10:29:53,https://api.github.com/repos/google/ExoPlayer/git/commits/7a114cb3746f832c671112aebcba4b1faebce036,7a114cb3746f832c671112aebcba4b1faebce036,"Uncomment VisibleForTesting annotations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220432564"
erdemguven,2018-11-06 19:52:16,https://api.github.com/repos/google/ExoPlayer/git/commits/d7e23f826b62f167ba27c1c9f8f0b0e83d215621,d7e23f826b62f167ba27c1c9f8f0b0e83d215621,"Fix package visibility comments

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220323772"
nic0lette,2018-11-06 19:18:28,https://api.github.com/repos/google/ExoPlayer/git/commits/0c4d0ee1c11f0649ab55b8cbb5fda61d923b86f5,0c4d0ee1c11f0649ab55b8cbb5fda61d923b86f5,"Fix for #5055 - Cannot disable audio focus after enabled.

This fixes an issue where disabling audio focus handling
while audio focus is held would not release audio focus.

A new test was added for this situation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220316866"
andrewlewis,2018-11-06 15:26:27,https://api.github.com/repos/google/ExoPlayer/git/commits/abb7d8a2d501deb6c8537ac64b78301b793de85a,abb7d8a2d501deb6c8537ac64b78301b793de85a,"Include UI module tests in open source push

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220277660"
andrewlewis,2018-11-06 14:03:59,https://api.github.com/repos/google/ExoPlayer/git/commits/bc5e12013b793b9772b31cfdfbfa24e0d0e7d9fa,bc5e12013b793b9772b31cfdfbfa24e0d0e7d9fa,"Remove executable bit from some resources

Copybara propagates this bit on the files, so removing it avoids some
unnecessary changes in the first migrated commit.

Also losslessly optimize two PNG files.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220268951"
szaboa,2018-11-06 19:54:34,https://api.github.com/repos/google/ExoPlayer/git/commits/eafca5402a9595d4ea160df732f72c02f7b34722,eafca5402a9595d4ea160df732f72c02f7b34722,#1583 - Correcting comment in TtmlNode#getCues()
szaboa,2018-11-06 19:25:08,https://api.github.com/repos/google/ExoPlayer/git/commits/254a586e27fa800f2fd53e6b30bd4f84525bcfc1,254a586e27fa800f2fd53e6b30bd4f84525bcfc1,#1583 - Parsing base64 encoded image data from metadata
andrewlewis,2018-11-06 08:35:42,https://api.github.com/repos/google/ExoPlayer/git/commits/3e35b6d0161530d49c74a7804b97aea274189755,3e35b6d0161530d49c74a7804b97aea274189755,"Work around non-empty EoS buffers with timestamp 0

Issue: #5045

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220237752"
andrewlewis,2018-11-05 18:54:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e347239ac557c7c12d0f4ddb8eb81fefccd7b272,e347239ac557c7c12d0f4ddb8eb81fefccd7b272,"Document error case for generateAudioSessionIdV21

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220132865"
ojw28,2018-11-05 09:23:47,https://api.github.com/repos/google/ExoPlayer/git/commits/af2b3f578f75016f6105faa9d03af84ddd5a0f5c,af2b3f578f75016f6105faa9d03af84ddd5a0f5c,"Tweak dev guide / readme

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220059244"
andrewlewis,2018-11-06 08:35:42,https://api.github.com/repos/google/ExoPlayer/git/commits/032883e1d280f1f4f659370007afdce858c065ae,032883e1d280f1f4f659370007afdce858c065ae,"Work around non-empty EoS buffers with timestamp 0

Issue: #5045

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220237752"
andrewlewis,2018-11-05 18:54:24,https://api.github.com/repos/google/ExoPlayer/git/commits/a8d1f04f92e15b2832ba810bc4fb993312f23073,a8d1f04f92e15b2832ba810bc4fb993312f23073,"Document error case for generateAudioSessionIdV21

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220132865"
ojw28,2018-11-05 18:11:27,https://api.github.com/repos/google/ExoPlayer/git/commits/8844694dfd0a033472b98c00e8cbaf023f69d596,8844694dfd0a033472b98c00e8cbaf023f69d596,"Automated g4 rollback of changelist 219585084.

*** Reason for rollback ***

Rolling forward again as [] should fix issue that prompted the rollback

*** Original change description ***

Automated g4 rollback of changelist 219130576.

*** Original change description ***

Re-enable codec re-use

Issue: #2826

***

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220124362"
erdemguven,2018-11-05 10:29:53,https://api.github.com/repos/google/ExoPlayer/git/commits/0afd9c17e64eda74f5c3d52b08c25a653201af38,0afd9c17e64eda74f5c3d52b08c25a653201af38,"Add TrackSelectionUtil getBitratesUsingPastInfo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220066159"
ojw28,2018-11-05 09:23:47,https://api.github.com/repos/google/ExoPlayer/git/commits/894bac617350df582dbf59a832d042fe64979649,894bac617350df582dbf59a832d042fe64979649,"Tweak dev guide / readme

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=220059244"
erdemguven,2018-11-02 18:13:53,https://api.github.com/repos/google/ExoPlayer/git/commits/37f4540156369891e95f515bd2edf739f067cb85,37f4540156369891e95f515bd2edf739f067cb85,"Move BaseGvrPlayerActivity to com.google.android.exoplayer2.ext.gvr

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219829614"
ojw28,2018-11-02 17:32:44,https://api.github.com/repos/google/ExoPlayer/git/commits/c5db69d22cd4daa913e2493a5c76384ad9959530,c5db69d22cd4daa913e2493a5c76384ad9959530,"Fix further issues with decoder re-use

It's no longer guaranteed that onOutputFormatChanged will always be
called when the renderer is re-enabled, since the codec may be kept
and its output format may not change. Hence we need to avoid resetting
state in onDisabled that we need when the renderer is enabled again.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219821519"
ojw28,2018-11-02 17:26:55,https://api.github.com/repos/google/ExoPlayer/git/commits/251c4207674aa2f721b7212f618a6d2907916db8,251c4207674aa2f721b7212f618a6d2907916db8,"Experimental parameter for setting a render time limit in MediaCodecRenderer

Currently, MediaCodecRenderer's render loop does not have any time limit. We
always try to drain and feed as much buffers as possible. This may lead to a
pattern of feeding phase takes too much time from previous loop, which makes
the next draining phase drops all buffers, making these buffers available for
feeding all at once, and the pattern keeps repeating.

This CL adds an experimental parameter for setting a time limit. If the time
limit is exceeded, the feeding process stops even if more input could be fed.
The default behavior is unchanged

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219820386"
AquilesCanta,2018-11-02 14:26:30,https://api.github.com/repos/google/ExoPlayer/git/commits/8f57d85881a0fd5e713b04bc5d6b6055f9bbfc70,8f57d85881a0fd5e713b04bc5d6b6055f9bbfc70,"Add support for .cmf* extension in DefaultHlsExtractorFactory

This makes extractor selection a bit more efficient for some CMAF files.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219795105"
AquilesCanta,2018-11-02 12:28:24,https://api.github.com/repos/google/ExoPlayer/git/commits/6d84b2a496c5168322d39eb2d7856f0675a97183,6d84b2a496c5168322d39eb2d7856f0675a97183,"Update the DefaultExtractorInput's peek buffer length on each write

This prevents leaving an inconsistent state after a EOF exception.

Issue:#5039

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219785275"
andrewlewis,2018-11-02 08:36:41,https://api.github.com/repos/google/ExoPlayer/git/commits/1866e6bfbaf40c36996276c5feebd21669dc6743,1866e6bfbaf40c36996276c5feebd21669dc6743,"Double the buffer duration for AC3

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219765107"
AquilesCanta,2018-11-02 14:26:30,https://api.github.com/repos/google/ExoPlayer/git/commits/34797651c28ffac03082ceed96b8609063fe14ae,34797651c28ffac03082ceed96b8609063fe14ae,"Add support for .cmf* extension in DefaultHlsExtractorFactory

This makes extractor selection a bit more efficient for some CMAF files.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219795105"
AquilesCanta,2018-11-02 12:28:24,https://api.github.com/repos/google/ExoPlayer/git/commits/32927bb62ca8d59f8f6af22ae13520e8cb145f16,32927bb62ca8d59f8f6af22ae13520e8cb145f16,"Update the DefaultExtractorInput's peek buffer length on each write

This prevents leaving an inconsistent state after a EOF exception.

Issue:#5039

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219785275"
AquilesCanta,2018-11-02 11:25:31,https://api.github.com/repos/google/ExoPlayer/git/commits/b0555315cb693ae2d191b2579713be63c18403fa,b0555315cb693ae2d191b2579713be63c18403fa,"Move all messaging constants to ExoCastConstants

Also make ExoCastMessage#mediaItemAsJsonObject protected.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219780620"
andrewlewis,2018-11-02 08:36:41,https://api.github.com/repos/google/ExoPlayer/git/commits/3b1d0e270bf67567021388ef86625dc236cc5eb3,3b1d0e270bf67567021388ef86625dc236cc5eb3,"Double the buffer duration for AC3

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219765107"
erdemguven,2018-11-01 15:17:18,https://api.github.com/repos/google/ExoPlayer/git/commits/76688589d2f49c2681afb8a9a6b1a5c10a7c33df,76688589d2f49c2681afb8a9a6b1a5c10a7c33df,"Add TrackSelectionUtil.getAverageBitrates method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219636548"
ojw28,2018-11-01 11:55:40,https://api.github.com/repos/google/ExoPlayer/git/commits/57042adec74a7e02cd69d6ef7ad6300ef1a36635,57042adec74a7e02cd69d6ef7ad6300ef1a36635,Remove methods now in BasePlayer
AquilesCanta,2018-09-27 14:37:39,https://api.github.com/repos/google/ExoPlayer/git/commits/10511e56cf13fde9340cd5b4621b7b6532dd7e6c,10511e56cf13fde9340cd5b4621b7b6532dd7e6c,"Add constructor for adding payload reader factory flags

Issue:#4861

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214772527"
ojw28,2018-11-01 10:08:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f9a805070a21fb9dd19db9cb0eb3858ae2c32f33,f9a805070a21fb9dd19db9cb0eb3858ae2c32f33,"Bump version to 2.9.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219609471"
andrewlewis,2018-11-01 07:58:32,https://api.github.com/repos/google/ExoPlayer/git/commits/7876999ae7a2b723edde2adc0317e94c2e8e65c0,7876999ae7a2b723edde2adc0317e94c2e8e65c0,"Fix extended service number calculation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219597894"
ojw28,2018-11-01 10:08:01,https://api.github.com/repos/google/ExoPlayer/git/commits/e1c6229cc8e38ee70cc13b10d2d46f3c75e8d6f3,e1c6229cc8e38ee70cc13b10d2d46f3c75e8d6f3,"Bump version to 2.9.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219609471"
andrewlewis,2018-11-01 07:58:32,https://api.github.com/repos/google/ExoPlayer/git/commits/36fef95f47de48bd540c0321691f9ac78e43eb23,36fef95f47de48bd540c0321691f9ac78e43eb23,"Fix extended service number calculation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219597894"
tonihei,2018-09-26 10:27:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e4c20aa3de4878110cf1f2b87cf8e8bd64da6684,e4c20aa3de4878110cf1f2b87cf8e8bd64da6684,"Add convenience methods player.next() and player.previous()

This simplifies code skipping items in a playlist programatically.

Issue:#4863

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214580742"
tonihei,2018-10-02 12:52:56,https://api.github.com/repos/google/ExoPlayer/git/commits/bbd82cf5da8072a0c67f5a422c426ef2d71e315e,bbd82cf5da8072a0c67f5a422c426ef2d71e315e,"Add BasePlayer to avoid code duplication for common convenience methods.

A lot of methods just forward to other methods and there is no conceivable
way a player should implement it another way. Moving these methods to a
base player class allows to remove duplicated code across our player
implementations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215374192"
ojw28,2018-10-31 22:18:31,https://api.github.com/repos/google/ExoPlayer/git/commits/4d9044d69019296acaca499bdba9d9e30df310cf,4d9044d69019296acaca499bdba9d9e30df310cf,Fix release notes typo
ojw28,2018-10-31 22:04:37,https://api.github.com/repos/google/ExoPlayer/git/commits/c04cf3096090447ba5ebf75cae643374b2efe84d,c04cf3096090447ba5ebf75cae643374b2efe84d,Update release notes
tonihei,2018-10-04 09:07:17,https://api.github.com/repos/google/ExoPlayer/git/commits/eef7e28ab2b42c6168dd378f24d4857b46a57244,eef7e28ab2b42c6168dd378f24d4857b46a57244,"Add test action to wait for an isLoading change.

This allows to wait until loading started or finished.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215704424"
tonihei,2018-10-04 09:06:32,https://api.github.com/repos/google/ExoPlayer/git/commits/7a3447fe9c4f2b3e31b7f720fb4305cfac54bb14,7a3447fe9c4f2b3e31b7f720fb4305cfac54bb14,"Simplify some buffered position related code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215704344"
ojw28,2018-10-31 20:40:57,https://api.github.com/repos/google/ExoPlayer/git/commits/c9c4bd89c74d10b44fc6562c9212da102dfa2274,c9c4bd89c74d10b44fc6562c9212da102dfa2274,Fix nullability
ojw28,2018-10-31 20:37:59,https://api.github.com/repos/google/ExoPlayer/git/commits/9c0bba3b5a05d6effb3f196d6e788c5613dbca6f,9c0bba3b5a05d6effb3f196d6e788c5613dbca6f,Misc fixes / stylistic consistency changes for merged pull requests
ojw28,2018-10-31 20:21:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b88c88e21ea4cea82c0bb68bdf4b387541e7b9d7,b88c88e21ea4cea82c0bb68bdf4b387541e7b9d7,"Merge pull request #4930 from Comcast/program_information

Add Support for Parsing ProgramInformation"
ojw28,2018-10-31 20:16:23,https://api.github.com/repos/google/ExoPlayer/git/commits/8200fe5ae6da02cf29ec090364ce2c6ea51a8b76,8200fe5ae6da02cf29ec090364ce2c6ea51a8b76,Merge branch 'customize-ads-rendering-settings-more' of https://github.com/ogaclejapan/ExoPlayer into ogaclejapan-customize-ads-rendering-settings-more
ojw28,2018-10-31 20:01:56,https://api.github.com/repos/google/ExoPlayer/git/commits/22ee67617e1137da8ea528750b4194910d818271,22ee67617e1137da8ea528750b4194910d818271,"Merge pull request #5004 from pakerfeldt/status-message-invalidresponsecodeexception

Provide http status message to InvalidResponseCodeException"
ojw28,2018-10-31 19:17:25,https://api.github.com/repos/google/ExoPlayer/git/commits/e4989d1743fa825dd0d57dcc915b325b47d3fc3b,e4989d1743fa825dd0d57dcc915b325b47d3fc3b,"Merge pull request #4996 from YukiMatsumura/fix-idle-requirements

fix checkIdleRequirement"
ojw28,2018-10-31 19:17:14,https://api.github.com/repos/google/ExoPlayer/git/commits/bb09f5cb12f491d647bacfa7291fe4c58d3dd2c5,bb09f5cb12f491d647bacfa7291fe4c58d3dd2c5,"Merge pull request #4911 from Comcast/feature/hls-audio-text-id-uniqueness

Create unique id for HLS audio and text tracks"
tonihei,2018-10-31 11:59:04,https://api.github.com/repos/google/ExoPlayer/git/commits/1fb2d83ba5fc469d49179ce65701e7eee3487dad,1fb2d83ba5fc469d49179ce65701e7eee3487dad,"Clarify Java 8 gradle requirement in developer guide.

Issue:#5026

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219454985"
andrewlewis,2018-10-31 10:37:24,https://api.github.com/repos/google/ExoPlayer/git/commits/b1d5966ea567111fbdaa087c6b971a65d195c87c,b1d5966ea567111fbdaa087c6b971a65d195c87c,"Allow MP4s with truncated stco to be played

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219448836"
andrewlewis,2018-10-30 09:19:08,https://api.github.com/repos/google/ExoPlayer/git/commits/b007cbf2b488bd851f2af0e9d7642a60453ed606,b007cbf2b488bd851f2af0e9d7642a60453ed606,"Let apps specify whether to focus skip button on ATV

Issue: #5019

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219267048"
ojw28,2018-10-31 21:43:46,https://api.github.com/repos/google/ExoPlayer/git/commits/609f10b5eccd37dc991c7bd077ba2089c26a716f,609f10b5eccd37dc991c7bd077ba2089c26a716f,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219540864"
ojw28,2018-10-31 20:40:57,https://api.github.com/repos/google/ExoPlayer/git/commits/a442c72814bc798f0d1f18886cea824e3029fa62,a442c72814bc798f0d1f18886cea824e3029fa62,Fix nullability
ojw28,2018-10-31 20:37:59,https://api.github.com/repos/google/ExoPlayer/git/commits/2dfe7a7ad6a784482b8de094c41b7815a09444b8,2dfe7a7ad6a784482b8de094c41b7815a09444b8,Misc fixes / stylistic consistency changes for merged pull requests
ojw28,2018-10-31 20:21:44,https://api.github.com/repos/google/ExoPlayer/git/commits/16326bae46a48bd7aa2e016df4d14816639ef273,16326bae46a48bd7aa2e016df4d14816639ef273,"Merge pull request #4930 from Comcast/program_information

Add Support for Parsing ProgramInformation"
ojw28,2018-10-31 20:16:30,https://api.github.com/repos/google/ExoPlayer/git/commits/24e4a616fef02298d279f5393d8dd12b15db1d3b,24e4a616fef02298d279f5393d8dd12b15db1d3b,Merge branch 'ogaclejapan-customize-ads-rendering-settings-more' into dev-v2
ojw28,2018-10-31 20:16:23,https://api.github.com/repos/google/ExoPlayer/git/commits/38681411fbf1f097d20e8e7160fca628ff614d85,38681411fbf1f097d20e8e7160fca628ff614d85,Merge branch 'customize-ads-rendering-settings-more' of https://github.com/ogaclejapan/ExoPlayer into ogaclejapan-customize-ads-rendering-settings-more
ojw28,2018-10-31 20:11:16,https://api.github.com/repos/google/ExoPlayer/git/commits/0b5ef52702ef77f0c9cab49880f659c9819c3385,0b5ef52702ef77f0c9cab49880f659c9819c3385,Merge branch 'task/add_force_highest_bitrate_test' of https://github.com/Comcast/ExoPlayer into dev-v2
ojw28,2018-10-31 20:01:56,https://api.github.com/repos/google/ExoPlayer/git/commits/3b7d0b7923ce89bb2dfc1d8df1a9fccb95da6f7d,3b7d0b7923ce89bb2dfc1d8df1a9fccb95da6f7d,"Merge pull request #5004 from pakerfeldt/status-message-invalidresponsecodeexception

Provide http status message to InvalidResponseCodeException"
ojw28,2018-10-31 19:49:24,https://api.github.com/repos/google/ExoPlayer/git/commits/f1d31bdf4f5f6294f2a69f05725d3f175a81f221,f1d31bdf4f5f6294f2a69f05725d3f175a81f221,Fix test
ojw28,2018-10-31 19:46:03,https://api.github.com/repos/google/ExoPlayer/git/commits/988225cdb04eb36b6272620a7279d8ed51ae2281,988225cdb04eb36b6272620a7279d8ed51ae2281,Merge branch 'Comcast-task/add_force_highest_bitrate_test' into dev-v2
ojw28,2018-10-31 19:45:32,https://api.github.com/repos/google/ExoPlayer/git/commits/097c045befeeec76d8ed8dab7a97e022ec7d4ed9,097c045befeeec76d8ed8dab7a97e022ec7d4ed9,Resolve conflicts
ojw28,2018-10-31 19:17:25,https://api.github.com/repos/google/ExoPlayer/git/commits/02573297f4983394bc5f065eb433d0e0eeee01e1,02573297f4983394bc5f065eb433d0e0eeee01e1,"Merge pull request #4996 from YukiMatsumura/fix-idle-requirements

fix checkIdleRequirement"
ojw28,2018-10-31 19:17:14,https://api.github.com/repos/google/ExoPlayer/git/commits/0501b677adca6fcf942d46b861f6a270a2f9abab,0501b677adca6fcf942d46b861f6a270a2f9abab,"Merge pull request #4911 from Comcast/feature/hls-audio-text-id-uniqueness

Create unique id for HLS audio and text tracks"
erdemguven,2018-10-31 14:57:14,https://api.github.com/repos/google/ExoPlayer/git/commits/9d947a56f837cd7698c59b229baca9860bb61172,9d947a56f837cd7698c59b229baca9860bb61172,"Add MediaChunkListIterator

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219472988"
AquilesCanta,2018-10-31 14:50:19,https://api.github.com/repos/google/ExoPlayer/git/commits/140d5fc9a96ee8be60138629c98f091fc0be80e0,140d5fc9a96ee8be60138629c98f091fc0be80e0,"Fix naming in MediaItemTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219472219"
AquilesCanta,2018-10-31 14:36:49,https://api.github.com/repos/google/ExoPlayer/git/commits/db832d691b0a9279c8c6103ad73d0ac9dadf3d28,db832d691b0a9279c8c6103ad73d0ac9dadf3d28,"Add equals and hashCode to MediaItem

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219470655"
tonihei,2018-10-31 11:59:04,https://api.github.com/repos/google/ExoPlayer/git/commits/58f50ca6555eb60e87e84e717a3c49e0cee17703,58f50ca6555eb60e87e84e717a3c49e0cee17703,"Clarify Java 8 gradle requirement in developer guide.

Issue:#5026

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219454985"
ojw28,2018-10-31 11:58:25,https://api.github.com/repos/google/ExoPlayer/git/commits/5f6c907c652c70f44869a7a7e7f70573fc88d89c,5f6c907c652c70f44869a7a7e7f70573fc88d89c,"Reset DefaultBandwidthMeter on network type change

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219454931"
andrewlewis,2018-10-31 10:37:24,https://api.github.com/repos/google/ExoPlayer/git/commits/7d99794bb8f731484416053a0fa471eda2b24f37,7d99794bb8f731484416053a0fa471eda2b24f37,"Allow MP4s with truncated stco to be played

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219448836"
tonihei,2018-10-31 10:06:40,https://api.github.com/repos/google/ExoPlayer/git/commits/53e06e636df1c63ae8de35a3470861b019b9753e,53e06e636df1c63ae8de35a3470861b019b9753e,"Clean up ExoHostedTest.

Some test specific things, like adding an extra listener or adding decoder
counters are currently handled by ExoHostedTest. They can be moved to the
classes actually using them to clean up ExoHostedTest.

This also adds more flexibility to further generic clean-up in onTestFinished.

Also, reorder player setup to what ExoPlayerTestRunner is doing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219446276"
andrewlewis,2018-10-31 09:42:14,https://api.github.com/repos/google/ExoPlayer/git/commits/1094da2b61a05cacef7036ce1bb81c698bab90f8,1094da2b61a05cacef7036ce1bb81c698bab90f8,"Fix player state transitions for postroll ads

Before this change, the player state would be STATE_ENDED then
STATE_BUFFERING (when the postroll ad was marked as played) then
STATE_ENDED again.

Queueing a final content media period with start point equal to
the content duration after a postroll ensures that the player
state doesn't change to STATE_ENDED transiently.

Switch from using C.TIME_END_OF_SOURCE to C.TIME_UNSET for media
periods that should not have an end point and are not followed
by an ad.

Content media periods before postrolls have end position
C.TIME_END_OF_SOURCE. If the postroll ad loads, its content
position is set to the content duration, which should be known
at the point of loading the postroll, then a final 'empty'
content media period with start position equal to its duration
is queued. If the postroll fails to load, this empty content
media period is queued up directly after the preceding content
media period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219443683"
andrewlewis,2018-10-30 09:19:08,https://api.github.com/repos/google/ExoPlayer/git/commits/4b9530c214d9d5ac0e3db7421b10224daf0efd34,4b9530c214d9d5ac0e3db7421b10224daf0efd34,"Let apps specify whether to focus skip button on ATV

Issue: #5019

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219267048"
ojw28,2018-10-29 19:25:39,https://api.github.com/repos/google/ExoPlayer/git/commits/053a7bc0b9af79e183ec5b5fed7f0501dbd79348,053a7bc0b9af79e183ec5b5fed7f0501dbd79348,"Simplify DefaultDrmSession event handling

- Handling EVENT_PROVISION_REQUIRED is unnecessary because we handle
  it via NotProvisionedException, which was thrown on all API levels.
- Handling EVENT_KEY_EXPIRED during playback is unnecessary. All it
  does is cause an error to be thrown, but an error will be thrown
  anyway out of the MediaCodec when it tries to use the expired keys.
  It's currently a race condition where the error gets thrown from,
  where-as having it always be thrown from one place is preferable.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219172021"
ojw28,2018-10-29 18:08:22,https://api.github.com/repos/google/ExoPlayer/git/commits/7eeeb40d24d179a074e4a69f802ff6a6bff58b09,7eeeb40d24d179a074e4a69f802ff6a6bff58b09,"Add options for controlling audio track selection

Issue: #3314

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219158729"
ojw28,2018-10-29 16:22:55,https://api.github.com/repos/google/ExoPlayer/git/commits/069e3cbf7df6c582a88b41c4a2275412491f5530,069e3cbf7df6c582a88b41c4a2275412491f5530,"Clean up DefaultTrackSelectorTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219139356"
ojw28,2018-10-29 15:19:54,https://api.github.com/repos/google/ExoPlayer/git/commits/038238430b0a70eb1dcf669d337a6a8d6530423c,038238430b0a70eb1dcf669d337a6a8d6530423c,"Re-enable codec re-use

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219130576"
ojw28,2018-10-29 14:37:23,https://api.github.com/repos/google/ExoPlayer/git/commits/4824f352de137f84638289f612f631f08ee7fa39,4824f352de137f84638289f612f631f08ee7fa39,"Decouple input format and codec format

This paves the way to cleanly fix the first two issues
listed in [] onDisabled will null inputFormat,
but nulling of codecFormat will remain tied to the codec
being released.

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219125458"
erdemguven,2018-10-29 13:43:56,https://api.github.com/repos/google/ExoPlayer/git/commits/5de17b9adc0971b79a6e07bf1d5f980c40427ca6,5de17b9adc0971b79a6e07bf1d5f980c40427ca6,"Add support for playing spherical videos on Daydream

RELNOTES=true

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219119888"
ojw28,2018-10-29 11:43:48,https://api.github.com/repos/google/ExoPlayer/git/commits/194d0f3331aa90d42275ab9a7f55fa6226438616,194d0f3331aa90d42275ab9a7f55fa6226438616,"Add a bit of structure DefaultTrackSelector, for sanity

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=219109829"
erdemguven,2018-10-26 17:44:14,https://api.github.com/repos/google/ExoPlayer/git/commits/ed32e2a7f7857e7bbcea79b05dd16a80882ba5eb,ed32e2a7f7857e7bbcea79b05dd16a80882ba5eb,"Add TrackSelectionUtil.getAverageBitrate method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218877191"
AquilesCanta,2018-10-26 13:45:08,https://api.github.com/repos/google/ExoPlayer/git/commits/9ea678c5e6974436f407c7c39dd11b95302fcf16,9ea678c5e6974436f407c7c39dd11b95302fcf16,"Add ExoCastMessage

ExoCastMessage contains all player management messages that the sender app can
send to the receiver app. ExoCastMessages can be serialized as JSON strings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218846977"
ojw28,2018-10-25 10:41:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ede62e97b2d6679fddbb80a056130944300ff505,ede62e97b2d6679fddbb80a056130944300ff505,"Fix track selection when forceLowestBitrate is enabled:

- Only use bitrate when comparing two tracks if their bitrates are
  actually different.
- For audio, prefer to use bitrate over selection flags.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218660886"
ojw28,2018-10-24 18:56:58,https://api.github.com/repos/google/ExoPlayer/git/commits/4fe14c76935ab1625c3e2370a6d8fa7934be71de,4fe14c76935ab1625c3e2370a6d8fa7934be71de,"Minor cleanup to BandwidthMeter/DefaultBandwidthMeter

- Improve variable naming
- In the edge case that bytes are transferred in a sample that
  has 0 elapsed time, carry the bytes forward into the next
  sample. If we don't do this then the estimate will be calculated
  as though those bytes were never transferred. In practice I
  suspect this very rarely occurs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218551208"
ojw28,2018-10-24 18:01:58,https://api.github.com/repos/google/ExoPlayer/git/commits/1b6801c0914f51a9e8018dd0814819f5663a990f,1b6801c0914f51a9e8018dd0814819f5663a990f,"Simplify setting of codec operating rate

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218540967"
andrewlewis,2018-10-23 16:49:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e6b49a5410f42fa44c0ec3e76137390b609afaf6,e6b49a5410f42fa44c0ec3e76137390b609afaf6,"Fix handling of MP3s with appended data

Issue: #4954

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218357113"
ojw28,2018-10-23 13:23:50,https://api.github.com/repos/google/ExoPlayer/git/commits/13e0513ea3efd6385d4cddbaca47a43807d486aa,13e0513ea3efd6385d4cddbaca47a43807d486aa,"Give EventDispatcher more predictable behavior

If EventDispatcher.removeListener is called to remove a listener,
and if the call is made from the same thread that said listener
handles events on, then it should be guaranteed that the listener
will not be subsequently invoked on that thread.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218331427"
tonihei,2018-10-23 12:41:48,https://api.github.com/repos/google/ExoPlayer/git/commits/5ae60a6f18d564e7b174f4ec593f85f42eb97298,5ae60a6f18d564e7b174f4ec593f85f42eb97298,"Swap google() and jcenter() in docs and gradle config.

This seems to be more stable in case Bintray has issues updating the ExoPlayer
sources.

Issue:#4997

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218327350"
tonihei,2018-10-22 10:31:38,https://api.github.com/repos/google/ExoPlayer/git/commits/8b1080d5ccc2428d81ff71a9ff4a0cc18b4f672b,8b1080d5ccc2428d81ff71a9ff4a0cc18b4f672b,"Check if source has been prepared before releasing it.

In ConcatenatingMediaSource, the source may be removed before it started
preparing (this may happen if lazyPreparation=true). In this case, we
shouldn't call releaseSource as the preparation didn't start.

Issue:#4986

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218141658"
andrewlewis,2018-10-21 09:53:00,https://api.github.com/repos/google/ExoPlayer/git/commits/efb025154163c28f6645420119ba851c69b77943,efb025154163c28f6645420119ba851c69b77943,"Add ACCESS_NETWORK_STATE permission for MH tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218058185"
tonihei,2018-10-19 17:36:35,https://api.github.com/repos/google/ExoPlayer/git/commits/9607c6de1bb8cca0e8e8449090bce3296d390a47,9607c6de1bb8cca0e8e8449090bce3296d390a47,"Properly reset period id and start position in ExoPlayerImpl.

This is a no-op change as the respective values are not used so far but
the change makes the current state cleaner and is less error-prone.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217892421"
andrewlewis,2018-10-23 16:49:45,https://api.github.com/repos/google/ExoPlayer/git/commits/706ce49bd37938dd5b9ae65957ada0717de5c74c,706ce49bd37938dd5b9ae65957ada0717de5c74c,"Fix handling of MP3s with appended data

Issue: #4954

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218357113"
ojw28,2018-10-23 15:44:40,https://api.github.com/repos/google/ExoPlayer/git/commits/66a6921c26acab24b4d31635d450b1c02170c748,66a6921c26acab24b4d31635d450b1c02170c748,"Remove non-addEventListener ways of adding an event listener

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218347641"
ojw28,2018-10-23 15:34:32,https://api.github.com/repos/google/ExoPlayer/git/commits/d56b7ad8117e48ea1dcc4b404be995a41cab55bf,d56b7ad8117e48ea1dcc4b404be995a41cab55bf,"Clean up codec reinitialization

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218346327"
ojw28,2018-10-23 13:30:52,https://api.github.com/repos/google/ExoPlayer/git/commits/66c508651ad1de2e011a25ce2e935a1b9fea4f2c,66c508651ad1de2e011a25ce2e935a1b9fea4f2c,"Cleanup codec init, flush and release

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218332277"
ojw28,2018-10-23 13:23:50,https://api.github.com/repos/google/ExoPlayer/git/commits/2fc122745a1bde8aafe45f87e38be36006660460,2fc122745a1bde8aafe45f87e38be36006660460,"Give EventDispatcher more predictable behavior

If EventDispatcher.removeListener is called to remove a listener,
and if the call is made from the same thread that said listener
handles events on, then it should be guaranteed that the listener
will not be subsequently invoked on that thread.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218331427"
tonihei,2018-10-23 12:41:48,https://api.github.com/repos/google/ExoPlayer/git/commits/2d63be096229571508939e8277c0537ac81c0728,2d63be096229571508939e8277c0537ac81c0728,"Swap google() and jcenter() in docs and gradle config.

This seems to be more stable in case Bintray has issues updating the ExoPlayer
sources.

Issue:#4997

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218327350"
vigneshvg,2018-10-22 21:58:21,https://api.github.com/repos/google/ExoPlayer/git/commits/e1ba9b0086b8510614160d0ab7df08aa509c3181,e1ba9b0086b8510614160d0ab7df08aa509c3181,"vp9_extension: Enable fast loop filtering

Turn on flag to enable fast loop filtering. This improves
multi-threaded decode performance by starting loop filtering early
if there are free threads available to do so.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218239442"
AquilesCanta,2018-10-22 19:59:24,https://api.github.com/repos/google/ExoPlayer/git/commits/4343dc6084cb53bcdb67278a480a475a624437ef,4343dc6084cb53bcdb67278a480a475a624437ef,"Remove the Uri suffix from MediaItem.DrmScheme.licenseServerUri

Makes it consistent with MediaItem.media.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218217648"
tonihei,2018-10-22 10:31:38,https://api.github.com/repos/google/ExoPlayer/git/commits/5ce2f1763d061d63f9d2f95e94da0a5441328c20,5ce2f1763d061d63f9d2f95e94da0a5441328c20,"Check if source has been prepared before releasing it.

In ConcatenatingMediaSource, the source may be removed before it started
preparing (this may happen if lazyPreparation=true). In this case, we
shouldn't call releaseSource as the preparation didn't start.

Issue:#4986

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218141658"
erdemguven,2018-10-22 09:50:26,https://api.github.com/repos/google/ExoPlayer/git/commits/ea49d39a4d34feb7f6da5d643235eafdb0feed0d,ea49d39a4d34feb7f6da5d643235eafdb0feed0d,"Add VR string and icon

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218137830"
andrewlewis,2018-10-21 09:53:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4170c79a4b1e7fe2a1b14d90d605c600e9cd1e9f,4170c79a4b1e7fe2a1b14d90d605c600e9cd1e9f,"Add ACCESS_NETWORK_STATE permission for MH tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218058185"
ojw28,2018-10-20 13:41:04,https://api.github.com/repos/google/ExoPlayer/git/commits/62759e8dd622177a9959d903d6e91b5e484a2710,62759e8dd622177a9959d903d6e91b5e484a2710,"Cleanup VR video player sample app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=218003875"
ojw28,2018-10-19 20:47:45,https://api.github.com/repos/google/ExoPlayer/git/commits/f3b4575436d86024e537eb6afa582b752a38e916,f3b4575436d86024e537eb6afa582b752a38e916,"Temporarily disable codec reuse

There are multiple subtle issues with the current implementation:

1. setOperatingRate can cause a codec initialization even if the
   renderer is disabled. This is not supposed to happen.
2. If the codec is released whilst the renderer is disabled, the
   renderer can instantiate a new codec using the old format when
   it's enabled again, only to immediately have to reconfigure or
   release it if the actual format to be played is different.
3. Codec reuse does not take into account renderer configuration.
   The specific case where this is problematic is if the video
   renderer is re-enabled with a different tunneling session id.
   The reused codec is then not configured correctly.

Also moved availableCodecInfos reset into releaseCodec for sanity.

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217924592"
andrewlewis,2018-10-19 18:57:29,https://api.github.com/repos/google/ExoPlayer/git/commits/bb5a9ef8add0217e4d67e4ad000440bfd9c69069,bb5a9ef8add0217e4d67e4ad000440bfd9c69069,"Remove extra blank line

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217907544"
ojw28,2018-10-19 18:05:50,https://api.github.com/repos/google/ExoPlayer/git/commits/42c9b244eee6e5775c91967f6f529b6fb8589d64,42c9b244eee6e5775c91967f6f529b6fb8589d64,"Make context non-optional in AudioFocusManager

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217897796"
tonihei,2018-10-19 17:36:35,https://api.github.com/repos/google/ExoPlayer/git/commits/6977fdbc1d4515f2cc5f16efd2bbee2d17624cd8,6977fdbc1d4515f2cc5f16efd2bbee2d17624cd8,"Properly reset period id and start position in ExoPlayerImpl.

This is a no-op change as the respective values are not used so far but
the change makes the current state cleaner and is less error-prone.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217892421"
ojw28,2018-10-19 17:05:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ca4b5d0a0def1928323b4ec86dd4564b89d4bba4,ca4b5d0a0def1928323b4ec86dd4564b89d4bba4,"Make context non-optional for DefaultBandwidthMeter

- Added ability to override the DefaultBandwidthMeter network type.
- These methods currently only work properly if called before the
  meter is used, but the plan is for them to be handled in the same
  way as internally detected network changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217887019"
tonihei,2018-10-19 16:32:07,https://api.github.com/repos/google/ExoPlayer/git/commits/4c6507e7a0e101468268cce03c062275c5c13b65,4c6507e7a0e101468268cce03c062275c5c13b65,"Remove deprecated MediaSource.prepareSource.

This method only ensured backward compatibility while the new version was not
public yet. Now ExoPlayer 2.9.0. is public, this workaround can be removed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217881691"
ojw28,2018-10-19 15:37:01,https://api.github.com/repos/google/ExoPlayer/git/commits/bf57d4402343f214985a330255bc2f044c6707a9,bf57d4402343f214985a330255bc2f044c6707a9,"Update VR video player sample app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217874381"
erdemguven,2018-10-19 10:14:26,https://api.github.com/repos/google/ExoPlayer/git/commits/8f3c3e284155ff26a23c29a089305bdb0a6ab7e4,8f3c3e284155ff26a23c29a089305bdb0a6ab7e4,"Add GlUtil createBuffer overload which doesn't copy values

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217846755"
tonihei,2018-10-23 16:46:52,https://api.github.com/repos/google/ExoPlayer/git/commits/70ccbc6eb8f82488d7163af606e81ef358acd640,70ccbc6eb8f82488d7163af606e81ef358acd640,"Fix review comments

See https://github.com/google/ExoPlayer/pull/5004"
pakerfeldt,2018-10-23 14:25:40,https://api.github.com/repos/google/ExoPlayer/git/commits/8c5703e9313db0dde1b37563a1c8c56e0fae2a40,8c5703e9313db0dde1b37563a1c8c56e0fae2a40,"Provide http status message to InvalidResponseCodeException

When response code alone is not enough to distinguish error responses, the http status message is helpful."
YukiMatsumura,2018-10-23 08:13:26,https://api.github.com/repos/google/ExoPlayer/git/commits/9d114b1ccb784fe5d4b5392eb41d30d67eb19e64,9d114b1ccb784fe5d4b5392eb41d30d67eb19e64,fix checkIdleRequirement
ogaclejapan,2018-10-23 02:44:53,https://api.github.com/repos/google/ExoPlayer/git/commits/23666e3ac89ae28ae78679dc5e3300e91822562f,23666e3ac89ae28ae78679dc5e3300e91822562f,Fix adUiElements variables even more robust
ogaclejapan,2018-10-23 02:24:41,https://api.github.com/repos/google/ExoPlayer/git/commits/090a9923326e348aef5074108c1ded38d9225e28,090a9923326e348aef5074108c1ded38d9225e28,Fix setMediaBitrateKbps naming from consistency point of view
saschpe,2018-10-22 21:40:25,https://api.github.com/repos/google/ExoPlayer/git/commits/535b40539ad1c94ab98bfca73eb0d8b83aea83ad,535b40539ad1c94ab98bfca73eb0d8b83aea83ad,Add ICY demo application
saschpe,2018-10-22 21:02:01,https://api.github.com/repos/google/ExoPlayer/git/commits/95eff3b747dabb7e8eaeee238b40d4812d91d29a,95eff3b747dabb7e8eaeee238b40d4812d91d29a,"Add Shoutcast Metadata Protocol (ICY) extension

Based on the OkHttp extension.

Resolves #3735"
ogaclejapan,2018-10-21 04:54:07,https://api.github.com/repos/google/ExoPlayer/git/commits/cfcbd2114ba43a7a906577981e383a264d437929,cfcbd2114ba43a7a906577981e383a264d437929,Allow setting the ad UI elements to be rendered in ImaAdsLoader
ogaclejapan,2018-10-21 04:23:53,https://api.github.com/repos/google/ExoPlayer/git/commits/861b81694de78b4eaba324121fec4bd997e99f73,861b81694de78b4eaba324121fec4bd997e99f73,Allow setting the ad media bitrate in ImaAdsLoader
tonihei,2018-10-02 16:41:59,https://api.github.com/repos/google/ExoPlayer/git/commits/6ae015ecbd134c87b3ad47a8f71ffc04f174e9c9,6ae015ecbd134c87b3ad47a8f71ffc04f174e9c9,"Replace DefaultBandwidthMeter with CountryAndNetworkTypeBandwidthMeter.

This removes the experimental bandwidth meter and uses it as the new default.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215404065"
ojw28,2018-10-20 13:34:21,https://api.github.com/repos/google/ExoPlayer/git/commits/40b91090fc05e9b9d2bfe548a62946623bf78b77,40b91090fc05e9b9d2bfe548a62946623bf78b77,Update release notes
AquilesCanta,2018-10-18 15:54:19,https://api.github.com/repos/google/ExoPlayer/git/commits/41129280cf46a1279134ead55e5a142a602cb6d9,41129280cf46a1279134ead55e5a142a602cb6d9,"Update the cast framework gradle dependency in the Cast extension

Issue:#4960

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217707957"
ojw28,2018-10-18 11:01:53,https://api.github.com/repos/google/ExoPlayer/git/commits/e346707199d7034d4fd57285734bcbce570435f3,e346707199d7034d4fd57285734bcbce570435f3,"Code shrinking doesn't like Class.super.defaultMethodName

Just not doing it seems simplier and more obviously correct
than suppressing the warnings in our proguard file.

Issue: #4890

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217675527"
andrewlewis,2018-10-16 02:44:39,https://api.github.com/repos/google/ExoPlayer/git/commits/225230b98429ad027b2c7303c1894b004fbe8486,225230b98429ad027b2c7303c1894b004fbe8486,"Support seeking based on MLLT metadata

Issue: #3241

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217252254"
ojw28,2018-10-15 09:49:05,https://api.github.com/repos/google/ExoPlayer/git/commits/0d169ca45613c261c01f252cd3bf40889e11689d,0d169ca45613c261c01f252cd3bf40889e11689d,"Remove assertion causing failure on some Samsung devices

The assertion was so weak it probably wouldn't detect genuine
misuse of the DefaultAllocator API, so it seems fine just to
remove it.

We don't really know what happens when the player is allowed to
continue on the affected devices, but hopefully it either ""just
works"" or fails in a more graceful way.

Issue: #4532

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217113060"
ojw28,2018-10-15 08:03:23,https://api.github.com/repos/google/ExoPlayer/git/commits/8bf8b447994095a0465331a94bf8c0867ef5ad29,8bf8b447994095a0465331a94bf8c0867ef5ad29,"Fix DashManifestParser to properly skip unknown tags

Robustness fix to make sure we ignore tags with known names, but
which are nested inside of unknown tags. For example we don't want
to parse the third period in:

<Period>...</Period>
<Period>...</Period>
<CustomTag>
  <Period>...</Period>
</CustomTag>

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217101630"
andrewlewis,2018-10-11 16:00:00,https://api.github.com/repos/google/ExoPlayer/git/commits/362a21e17b3515eb210639b14ab824ac30ff7c65,362a21e17b3515eb210639b14ab824ac30ff7c65,"Handle rotation signaled in MKV track name from HTC devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=216704331"
andrewlewis,2018-10-11 11:27:22,https://api.github.com/repos/google/ExoPlayer/git/commits/db0f107fb3bdc1127d7f0dcdad76405e763491cd,db0f107fb3bdc1127d7f0dcdad76405e763491cd,"Project start position for preroll ad to content transitions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=216675981"
ojw28,2018-10-04 17:40:29,https://api.github.com/repos/google/ExoPlayer/git/commits/4d8b6803afde3e49dcbba147bf3a7fe8033d81a0,4d8b6803afde3e49dcbba147bf3a7fe8033d81a0,"Minor fixes for period clipping

- Always clip to period duration for the last chunk. We previously
  did this only when the last chunk explicitly exceeded the period
  end time. We now also do it when the chunk claims to end at the
  period boundary, but still contains samples that exceed it.
- If pendingResetPositionUs == chunk.startTimeUs == 0 but the
  chunk still contains samples with negative timestamps, we now
  clip them by setting the decode only flag. Previously we only
  clipped such samples if the first chunk explicitly preceeded the
  start of the period.

Issue: #4899

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215763467"
tonihei,2018-10-04 10:32:54,https://api.github.com/repos/google/ExoPlayer/git/commits/a35bf5151da9b02d55d050edd89de8f936173f71,a35bf5151da9b02d55d050edd89de8f936173f71,"Fix updates of loading period and buffered positions in PlaybackInfo.

This makes the following changes to improve consistency among the PlaybackInfo
values:
 1. Update buffered position and total buffered duration after loading period
    is set as both values are affected by a loading period update.
 2. Add copyWithPosition to allow updating the position without resetting the
    loading period.
 3. Forward the total buffered duration to playing position updates
    as it may have changed with the new playing position.

Issue:#4899

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215712328"
ojw28,2018-10-03 21:19:13,https://api.github.com/repos/google/ExoPlayer/git/commits/4347bf04161b4a063de5ca15144778e5f7e543bb,4347bf04161b4a063de5ca15144778e5f7e543bb,Subrip cleanup
ojw28,2018-10-03 21:15:11,https://api.github.com/repos/google/ExoPlayer/git/commits/4d6b008ef664b053133d6b22ce5bc6ff4f8dd19e,4d6b008ef664b053133d6b22ce5bc6ff4f8dd19e,"Merge pull request #4582 from szaboa/feature/4306_srt_position_tags

#4306 - Extract tags from SubRip subtitles, add support for alignment"
tonihei,2018-10-03 09:33:53,https://api.github.com/repos/google/ExoPlayer/git/commits/6ee946515ad4cb91b50f7c6e933df04b775d8200,6ee946515ad4cb91b50f7c6e933df04b775d8200,"Fix left position for subtitles.

When SubtitlePainter positions the cues centred in the given box, it must add
the left offset of the box to get the correct position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215535289"
tonihei,2018-10-03 09:33:50,https://api.github.com/repos/google/ExoPlayer/git/commits/e2c82a256ea15754690d2aee038e440804335d8d,e2c82a256ea15754690d2aee038e440804335d8d,"Fix positioning of subtitles.

SubtitleView forwards the cue box position to SubtitlePainter. This should be
the position relative to the canvas of the SubtitleView. Currently, however,
we forward the position relative to the parent of SubtitleView. That causes
problems if SubtitleView has a non-zero offset position to its parent.

Issue:#4788

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215535281"
erdemguven,2018-10-01 15:05:01,https://api.github.com/repos/google/ExoPlayer/git/commits/b59781b3eb34f00957a5872ad57da70c870bfc7e,b59781b3eb34f00957a5872ad57da70c870bfc7e,"Increase supported libflac version to 1.3.2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215214894"
tonihei,2018-10-01 14:50:26,https://api.github.com/repos/google/ExoPlayer/git/commits/49215950416e931d0decac36ad1724768a86df9e,49215950416e931d0decac36ad1724768a86df9e,"Fix prepare position of DeferredMediaPeriods for windows with non-zero offset.

If we prepare a deferred media period before the actual timeline is available,
we either prepare with position zero (= the default) or with a non-zero
initial seek position.

So far, the zero (default) position got replaced by the actual default position
(including any potential non-zero window offset) when the timeline became known.

However, a non-zero initial seek position was not corrected by the non-zero
window offset. This is fixed by this change.

Related to that, we always assumed that the deferred media period will the
first period in the actual timeline. This is not true if we prepare with an
offset (either because of an initial seek position or because of a default
window position). So, we also determine the actual first period when the
timeline becomes known.

Issue:#4873

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215213030"
tonihei,2018-09-28 17:04:14,https://api.github.com/repos/google/ExoPlayer/git/commits/6b562f0a744600d73a1289c10ede3104ad2ebafc,6b562f0a744600d73a1289c10ede3104ad2ebafc,"Add @Documented to @IntDef and @StringDef annotations.

This makes the annotations appear in the generated JavaDoc.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214952419"
talklittle,2018-09-28 01:34:49,https://api.github.com/repos/google/ExoPlayer/git/commits/edee8cfbde860042b57c446a661d79b3cafaafdf,edee8cfbde860042b57c446a661d79b3cafaafdf,"Make DefaultTrackSelector.AudioTrackScore protected

This allows selectAudioTrack() to be overridden."
hacker1024,2018-09-27 22:10:57,https://api.github.com/repos/google/ExoPlayer/git/commits/a51c114942f1d90eba2003f5029270da5b506cd5,a51c114942f1d90eba2003f5029270da5b506cd5,Call rating with extras
ojw28,2018-10-18 21:49:51,https://api.github.com/repos/google/ExoPlayer/git/commits/1ef3efaa909df3b9ef49133a872d5e3ee39fdf73,1ef3efaa909df3b9ef49133a872d5e3ee39fdf73,"Automated g4 rollback of changelist 217356705.

*** Reason for rollback ***

Photos regression is resolved by []

*** Original change description ***

Automated g4 rollback of changelist 217189082.

*** Reason for rollback ***

Broke photos (b/117818304)

*** Original change description ***

Add ExoPlayer.setForegroundMode

Issue: #2826

***

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217773278"
ojw28,2018-10-18 16:17:28,https://api.github.com/repos/google/ExoPlayer/git/commits/3805717026b1fb2b81b73b20e3496be40d21bbe9,3805717026b1fb2b81b73b20e3496be40d21bbe9,"Decouple dummySurface lifespan from codec lifespans

I don't think there's any particular reason for releasing
dummySurface when we release the codec. It seems to make
more sense to decouple the two, and treat a dummySurface as
a resource that should be released on reset.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217711788"
AquilesCanta,2018-10-18 15:56:36,https://api.github.com/repos/google/ExoPlayer/git/commits/80e9c84a9ef9d13fdc3990f4b87b4424e2e0b877,80e9c84a9ef9d13fdc3990f4b87b4424e2e0b877,"Remove RemotePlayer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217708323"
AquilesCanta,2018-10-18 15:54:19,https://api.github.com/repos/google/ExoPlayer/git/commits/50dd089794ac70e3aa34873d513cc832b4c009cf,50dd089794ac70e3aa34873d513cc832b4c009cf,"Update the cast framework gradle dependency in the Cast extension

Issue:#4960

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217707957"
ojw28,2018-10-18 11:11:48,https://api.github.com/repos/google/ExoPlayer/git/commits/1c6abc8b03c6015d226a1ded8f634e4c5693549d,1c6abc8b03c6015d226a1ded8f634e4c5693549d,"Set output on surface in all states

setSurface only sets the output surface on the codec if the
renderer is enabled or started. This was fine in the past
because the codec was always null in other states, however
the recent codec reuse work means this is no longer the case.

The output surface should always be set if the codec is
non-null. If setting the surface requires releasing the codec
instance, we should only instantiate the new instance if
enabled or started. This is in line with what onDisabled does
if flushing requires releasing the codec

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217676434"
ojw28,2018-10-18 11:01:53,https://api.github.com/repos/google/ExoPlayer/git/commits/05a98a7b79e255b188ab7c0c40c02c2dfeb4f383,05a98a7b79e255b188ab7c0c40c02c2dfeb4f383,"Code shrinking doesn't like Class.super.defaultMethodName

Just not doing it seems simplier and more obviously correct
than suppressing the warnings in our proguard file.

Issue: #4890

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217675527"
erdemguven,2018-10-17 12:57:40,https://api.github.com/repos/google/ExoPlayer/git/commits/86fdcb08d84de1e04a0f0ffaa0aa9baa55b6c00a,86fdcb08d84de1e04a0f0ffaa0aa9baa55b6c00a,"Fix documentation confusion in MediaChunkIterator subclasses

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217505571"
falhassen,2018-10-16 18:44:56,https://api.github.com/repos/google/ExoPlayer/git/commits/423a954e1b0940ddaa3a1458ee80500ecdf09e5f,423a954e1b0940ddaa3a1458ee80500ecdf09e5f,"Automated g4 rollback of changelist 217189082.

*** Reason for rollback ***

Broke photos (b/117818304)

*** Original change description ***

Add ExoPlayer.setForegroundMode

Issue: #2826

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217356705"
andrewlewis,2018-10-16 02:44:39,https://api.github.com/repos/google/ExoPlayer/git/commits/ee02c6789a6a404a935fb4f23fdffa7d6bd62d9e,ee02c6789a6a404a935fb4f23fdffa7d6bd62d9e,"Support seeking based on MLLT metadata

Issue: #3241

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217252254"
ojw28,2018-10-15 19:37:44,https://api.github.com/repos/google/ExoPlayer/git/commits/bfd67992f41a7c5698700322e712544432b23bc2,bfd67992f41a7c5698700322e712544432b23bc2,"Add ExoPlayer.setForegroundMode

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217189082"
ojw28,2018-10-15 15:30:28,https://api.github.com/repos/google/ExoPlayer/git/commits/dbf5b073a60b2e6224e3d2275981ee915c731abc,dbf5b073a60b2e6224e3d2275981ee915c731abc,"Network type cleanup

1. Remove option to pass null context to Util.getNetworkType. IMO it's
   clearer for the caller to just not call the method in this case.
2. Stop using deprecated DefaultBandwidthMeter.Builder constructor in
   all but one place.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217147091"
ojw28,2018-10-15 14:28:20,https://api.github.com/repos/google/ExoPlayer/git/commits/6e7b41512f7f7fd2910134a2dbe2621f68a36c84,6e7b41512f7f7fd2910134a2dbe2621f68a36c84,"No-op cleanup of DefaultDrmSessionManager

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217139869"
jlieblich2,2018-10-15 21:37:42,https://api.github.com/repos/google/ExoPlayer/git/commits/0af9ccc99090f87a509965805d343a426f439b16,0af9ccc99090f87a509965805d343a426f439b16, added handling of unexpected tags
jlieblich2,2018-10-15 21:35:49,https://api.github.com/repos/google/ExoPlayer/git/commits/a7ace5871234e2502783188df57bb17d75c30393,a7ace5871234e2502783188df57bb17d75c30393,Merge branch 'dev-v2' into program_information
ojw28,2018-10-15 09:49:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6fb8f66ba6e86850d52777bf591941d9ef479c34,6fb8f66ba6e86850d52777bf591941d9ef479c34,"Remove assertion causing failure on some Samsung devices

The assertion was so weak it probably wouldn't detect genuine
misuse of the DefaultAllocator API, so it seems fine just to
remove it.

We don't really know what happens when the player is allowed to
continue on the affected devices, but hopefully it either ""just
works"" or fails in a more graceful way.

Issue: #4532

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217113060"
ojw28,2018-10-15 08:03:23,https://api.github.com/repos/google/ExoPlayer/git/commits/d511370338415733a1b9a40a23c3e9837dd5ed7d,d511370338415733a1b9a40a23c3e9837dd5ed7d,"Fix DashManifestParser to properly skip unknown tags

Robustness fix to make sure we ignore tags with known names, but
which are nested inside of unknown tags. For example we don't want
to parse the third period in:

<Period>...</Period>
<Period>...</Period>
<CustomTag>
  <Period>...</Period>
</CustomTag>

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=217101630"
ojw28,2018-10-12 13:21:39,https://api.github.com/repos/google/ExoPlayer/git/commits/ba6a1189981cddb4950bb0bcff64ead93555664d,ba6a1189981cddb4950bb0bcff64ead93555664d,"Retain decoder instance after the renderer is disabled

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=216852679"
ojw28,2018-10-12 09:57:28,https://api.github.com/repos/google/ExoPlayer/git/commits/842f622d29eb1fa3929a0b2e91f5fc425c78313b,842f622d29eb1fa3929a0b2e91f5fc425c78313b,"Allow codec flushing without re-initialization

For decoder reuse, we want disable() to flush the decoder. However,
if the flush needs to release the decoder for some reason, it seems
non-ideal to immediately re-initialize it. Re-initialization can
also throw ExoPlaybackException, which we don't want for disabling.

This change allows a variant of flush that wont re-initialize the
decoder if it has to be released, which will be used from disable().

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=216834862"
andrewlewis,2018-10-11 16:00:00,https://api.github.com/repos/google/ExoPlayer/git/commits/42c3ff393413966bcd3743421511a1c05b016ef1,42c3ff393413966bcd3743421511a1c05b016ef1,"Handle rotation signaled in MKV track name from HTC devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=216704331"
andrewlewis,2018-10-11 11:27:22,https://api.github.com/repos/google/ExoPlayer/git/commits/81a9293072faabdd95f241f84b29e32217982ac9,81a9293072faabdd95f241f84b29e32217982ac9,"Project start position for preroll ad to content transitions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=216675981"
vsethia,2018-10-11 02:39:52,https://api.github.com/repos/google/ExoPlayer/git/commits/048c8bd68f437ab384a573c4b5b1ba481393ecda,048c8bd68f437ab384a573c4b5b1ba481393ecda,"Snapshots are going to become the default soon and these tests are failing when
reloading frmo snapshots. b/117347850. This is a no-op change as the current
default == _fullboot. When we globally flip and make snapshots the default,
these tests would fail and we are moving them over so that when we flip your
tests still pass.

https://groups.google.com[]forum/#!topic/mobile-ninjas/Y69PTAT5GyY

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=216634430"
tonihei,2018-10-05 14:36:40,https://api.github.com/repos/google/ExoPlayer/git/commits/0a7745bc03c93709e178c578a4649eb534e8a9e0,0a7745bc03c93709e178c578a4649eb534e8a9e0,"Fix some random Android Studio warnings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215904019"
andrewlewis,2018-10-05 08:01:51,https://api.github.com/repos/google/ExoPlayer/git/commits/8dedbd5748b87f4bda71e83bb57cb60f1808cd9d,8dedbd5748b87f4bda71e83bb57cb60f1808cd9d,"Fix release notes Markdown syntax

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215868785"
ojw28,2018-10-04 17:40:29,https://api.github.com/repos/google/ExoPlayer/git/commits/c5f9ad9f8b9594c9abb12b25b9bc088eb3dee76c,c5f9ad9f8b9594c9abb12b25b9bc088eb3dee76c,"Minor fixes for period clipping

- Always clip to period duration for the last chunk. We previously
  did this only when the last chunk explicitly exceeded the period
  end time. We now also do it when the chunk claims to end at the
  period boundary, but still contains samples that exceed it.
- If pendingResetPositionUs == chunk.startTimeUs == 0 but the
  chunk still contains samples with negative timestamps, we now
  clip them by setting the decode only flag. Previously we only
  clipped such samples if the first chunk explicitly preceeded the
  start of the period.

Issue: #4899

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215763467"
tonihei,2018-10-04 14:24:07,https://api.github.com/repos/google/ExoPlayer/git/commits/76a1569e79dbb3edb64ed225c075727252336927,76a1569e79dbb3edb64ed225c075727252336927,"Update release notes to better describe Java 8 change.

Apps need to set the target compatibility to VERSION_1_8 to enable the
automatic desugaring if they haven't done so already.

Issue:#4907

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215733070"
ojw28,2018-10-04 13:56:29,https://api.github.com/repos/google/ExoPlayer/git/commits/cc7684d09f0a66de0e501882da668cdd35504752,cc7684d09f0a66de0e501882da668cdd35504752,"Introduce Renderer.reset

- It's a no-op for now
- Renderers that want to support retaining resources will move
  some functionality from their disable() implementations into
  reset()
- ExoPlayerImplInternal will be updated to not always call reset()
  immediately after disable(), which is what will enable resources
  to actually be retained.

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215729783"
tonihei,2018-10-04 10:32:54,https://api.github.com/repos/google/ExoPlayer/git/commits/d4b87cdc2338e79f6d020d076da82491566fdfff,d4b87cdc2338e79f6d020d076da82491566fdfff,"Fix updates of loading period and buffered positions in PlaybackInfo.

This makes the following changes to improve consistency among the PlaybackInfo
values:
 1. Update buffered position and total buffered duration after loading period
    is set as both values are affected by a loading period update.
 2. Add copyWithPosition to allow updating the position without resetting the
    loading period.
 3. Forward the total buffered duration to playing position updates
    as it may have changed with the new playing position.

Issue:#4899

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215712328"
tonihei,2018-10-04 09:07:17,https://api.github.com/repos/google/ExoPlayer/git/commits/711f9f8b6ada665a5d2f9cd29724f3b718304d9d,711f9f8b6ada665a5d2f9cd29724f3b718304d9d,"Add test action to wait for an isLoading change.

This allows to wait until loading started or finished.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215704424"
tonihei,2018-10-04 09:06:32,https://api.github.com/repos/google/ExoPlayer/git/commits/9ca6544311c30a12b7f77dbea034a3fd2c922fbf,9ca6544311c30a12b7f77dbea034a3fd2c922fbf,"Simplify some buffered position related code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215704344"
jlieblich2,2018-10-12 17:00:17,https://api.github.com/repos/google/ExoPlayer/git/commits/ced302fd83c24258ee43932c68fa3245ea6ac789,ced302fd83c24258ee43932c68fa3245ea6ac789,added javadoc for  ProgramInformation
jlieblich2,2018-10-11 23:09:00,https://api.github.com/repos/google/ExoPlayer/git/commits/6cbac152c9da36cddec56d6722666abd1721ba73,6cbac152c9da36cddec56d6722666abd1721ba73,added attribute parsin
jlieblich2,2018-10-11 22:25:21,https://api.github.com/repos/google/ExoPlayer/git/commits/ce0b5e4c445b96ca4a62bab722f34a29c844d9e7,ce0b5e4c445b96ca4a62bab722f34a29c844d9e7,removed custom element parsing
BetweenTwoBits,2018-10-11 19:05:21,https://api.github.com/repos/google/ExoPlayer/git/commits/30c7954482d10ef305803dca7e04ff55d7e7f3b5,30c7954482d10ef305803dca7e04ff55d7e7f3b5,add bitrate that is unsupported by renderer
BetweenTwoBits,2018-10-11 19:04:17,https://api.github.com/repos/google/ExoPlayer/git/commits/211a2dfd7a9dc044f6c215a806e37e6c0d4ec074,211a2dfd7a9dc044f6c215a806e37e6c0d4ec074,Ensure formats have unique ids
BetweenTwoBits,2018-10-11 19:01:33,https://api.github.com/repos/google/ExoPlayer/git/commits/a5b72762299adaf78b3609b454e8d28ce404aab6,a5b72762299adaf78b3609b454e8d28ce404aab6,Correct javadoc for forced bitrate tests
BetweenTwoBits,2018-10-11 18:57:23,https://api.github.com/repos/google/ExoPlayer/git/commits/8a671c1cfecfad30a7f5f41e49b302b68b5dc905,8a671c1cfecfad30a7f5f41e49b302b68b5dc905,add check to ensure single track selection
jlieblich2,2018-10-10 21:34:29,https://api.github.com/repos/google/ExoPlayer/git/commits/e42786d6f2e0a6ece1c2e26f9e62e2e8638d1ecc,e42786d6f2e0a6ece1c2e26f9e62e2e8638d1ecc,added parsing for program information
BetweenTwoBits,2018-10-05 14:37:30,https://api.github.com/repos/google/ExoPlayer/git/commits/57d90f30a88f58b09b6c6f0e8706833d30cdc844,57d90f30a88f58b09b6c6f0e8706833d30cdc844,add test for setForceHighestSupportedBitrate
ojw28,2018-10-05 12:24:01,https://api.github.com/repos/google/ExoPlayer/git/commits/fa9d7d5e3eb1a0bf5362d5c80b0c5b33a8b6151b,fa9d7d5e3eb1a0bf5362d5c80b0c5b33a8b6151b,"Update RELEASENOTES.md

Fix markdown"
BetweenTwoBits,2018-10-04 17:44:59,https://api.github.com/repos/google/ExoPlayer/git/commits/35cc479f76ec8d96a27409398acc0275f672a713,35cc479f76ec8d96a27409398acc0275f672a713,"Create unique id for hls audio and text tracks

Combine groupId and name for uniqueness"
tonihei,2018-10-04 14:24:20,https://api.github.com/repos/google/ExoPlayer/git/commits/ab054084193f210d01c6f1a5a0dd73d600fbfd62,ab054084193f210d01c6f1a5a0dd73d600fbfd62,"Update release notes to better describe Java 8 chang

Apps need to set the target compatibility to VERSION_1_8 to enable the
automatic desugaring if they haven't done so already.

Issue:#4907"
ojw28,2018-10-03 21:19:13,https://api.github.com/repos/google/ExoPlayer/git/commits/7849a5eb52a434883a0c0d33f0b9a9ab20067679,7849a5eb52a434883a0c0d33f0b9a9ab20067679,Subrip cleanup
ojw28,2018-10-03 21:15:11,https://api.github.com/repos/google/ExoPlayer/git/commits/16fe67bfce1d693274da3a4135a00326ebe0e506,16fe67bfce1d693274da3a4135a00326ebe0e506,"Merge pull request #4582 from szaboa/feature/4306_srt_position_tags

#4306 - Extract tags from SubRip subtitles, add support for alignment"
erdemguven,2018-10-03 14:56:51,https://api.github.com/repos/google/ExoPlayer/git/commits/e91065c4b070d239d17b1a5d22e4c5bf3ac27222,e91065c4b070d239d17b1a5d22e4c5bf3ac27222,"Remove ProjectionRenderer.EyeType

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215562599"
erdemguven,2018-10-03 13:04:16,https://api.github.com/repos/google/ExoPlayer/git/commits/645f08af73f4e69fa42a5256e64c11ae504ae2b8,645f08af73f4e69fa42a5256e64c11ae504ae2b8,"Prevent binding to DownloadService

DownloadService isn't designed to be bound.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215552423"
erdemguven,2018-10-03 10:45:00,https://api.github.com/repos/google/ExoPlayer/git/commits/9f8c22d7195d55eccca6a1d9b35cef23a3d3dce8,9f8c22d7195d55eccca6a1d9b35cef23a3d3dce8,"Make it possible to use CacheKeyFactory with CacheDataSourceFactory and DownloaderConstructorHelper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215541062"
tonihei,2018-10-03 09:33:53,https://api.github.com/repos/google/ExoPlayer/git/commits/f0e0a7cf57323b41f44de611e2e52f865f760f01,f0e0a7cf57323b41f44de611e2e52f865f760f01,"Fix left position for subtitles.

When SubtitlePainter positions the cues centred in the given box, it must add
the left offset of the box to get the correct position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215535289"
tonihei,2018-10-03 09:33:50,https://api.github.com/repos/google/ExoPlayer/git/commits/43c01562d15782d68c06b9d438f96e05780833ea,43c01562d15782d68c06b9d438f96e05780833ea,"Fix positioning of subtitles.

SubtitleView forwards the cue box position to SubtitlePainter. This should be
the position relative to the canvas of the SubtitleView. Currently, however,
we forward the position relative to the parent of SubtitleView. That causes
problems if SubtitleView has a non-zero offset position to its parent.

Issue:#4788

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215535281"
tonihei,2018-10-02 16:41:59,https://api.github.com/repos/google/ExoPlayer/git/commits/4386d5d4660d26965f99de1b6247dff7f2215c11,4386d5d4660d26965f99de1b6247dff7f2215c11,"Replace DefaultBandwidthMeter with CountryAndNetworkTypeBandwidthMeter.

This removes the experimental bandwidth meter and uses it as the new default.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215404065"
AquilesCanta,2018-10-02 15:04:50,https://api.github.com/repos/google/ExoPlayer/git/commits/34c286682e19d11d7989d94c346eb00b425f78de,34c286682e19d11d7989d94c346eb00b425f78de,"Extract PlayerManager interface in the Cast demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215389291"
tonihei,2018-10-02 12:52:56,https://api.github.com/repos/google/ExoPlayer/git/commits/a8b851ce34e2932172bce0bae3b71e176ceb3929,a8b851ce34e2932172bce0bae3b71e176ceb3929,"Add BasePlayer to avoid code duplication for common convenience methods.

A lot of methods just forward to other methods and there is no conceivable
way a player should implement it another way. Moving these methods to a
base player class allows to remove duplicated code across our player
implementations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215374192"
tonihei,2018-10-02 10:52:27,https://api.github.com/repos/google/ExoPlayer/git/commits/8b2d99844069d61f694ded113a169cede05358ba,8b2d99844069d61f694ded113a169cede05358ba,"Remove deprecated ExoPlayer members with same name as non-deprecated version.

For example, using ExoPlayer.STATE_IDLE falls back to the Player.STATE_IDLE
automatically and thus there is no need to keep the deprecated members.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215363841"
ojw28,2018-10-01 19:40:42,https://api.github.com/repos/google/ExoPlayer/git/commits/687756ed31090e91cc57d26dd13e2593c4d4e343,687756ed31090e91cc57d26dd13e2593c4d4e343,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215261807"
szaboa,2018-10-02 15:45:06,https://api.github.com/repos/google/ExoPlayer/git/commits/56c7e1ff475ea6b9a7fb06ad9dd14303b1104e26,56c7e1ff475ea6b9a7fb06ad9dd14303b1104e26,"#4306 - grouping line/lineAnchor and position/positionAnchor assignments, setting Cue's textAlignment to def value - null"
szaboa,2018-10-01 20:16:48,https://api.github.com/repos/google/ExoPlayer/git/commits/75a7385bbb4a2e6940f6a97ba8d5814e2dcd6049,75a7385bbb4a2e6940f6a97ba8d5814e2dcd6049,#4306 - extends test case with line and position anchor verifications
szaboa,2018-10-01 19:45:15,https://api.github.com/repos/google/ExoPlayer/git/commits/fc5eb12e7955e1272f52a90ec25a1a385429a47c,fc5eb12e7955e1272f52a90ec25a1a385429a47c,#4306 - breaking after the first alignment tag is found
ojw28,2018-10-01 19:36:44,https://api.github.com/repos/google/ExoPlayer/git/commits/a7f8226571b7aac8512875282ed82ed7a93e8d43,a7f8226571b7aac8512875282ed82ed7a93e8d43,"Merge pull request #4884 from hacker1024/patch-1

Call rating with extras"
ojw28,2018-10-01 19:05:08,https://api.github.com/repos/google/ExoPlayer/git/commits/b4ba9130088c129ab4c4be3a43bbd60b1a861c84,b4ba9130088c129ab4c4be3a43bbd60b1a861c84,"Merge pull request #4886 from talklittle/protected-audiotrackscore

Make DefaultTrackSelector.AudioTrackScore protected"
erdemguven,2018-10-01 15:05:01,https://api.github.com/repos/google/ExoPlayer/git/commits/6cc049f6efca7227b92670e32ab5cb223f763996,6cc049f6efca7227b92670e32ab5cb223f763996,"Increase supported libflac version to 1.3.2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215214894"
erdemguven,2018-10-01 14:52:26,https://api.github.com/repos/google/ExoPlayer/git/commits/7940fdfc5ed7ea1e358b0b166ec8f70db78f03e5,7940fdfc5ed7ea1e358b0b166ec8f70db78f03e5,"Fix DownloadManager.TaskState javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215213255"
tonihei,2018-10-01 14:50:26,https://api.github.com/repos/google/ExoPlayer/git/commits/46731cdd1dc5ac940f95414ad28a18910431a644,46731cdd1dc5ac940f95414ad28a18910431a644,"Fix prepare position of DeferredMediaPeriods for windows with non-zero offset.

If we prepare a deferred media period before the actual timeline is available,
we either prepare with position zero (= the default) or with a non-zero
initial seek position.

So far, the zero (default) position got replaced by the actual default position
(including any potential non-zero window offset) when the timeline became known.

However, a non-zero initial seek position was not corrected by the non-zero
window offset. This is fixed by this change.

Related to that, we always assumed that the deferred media period will the
first period in the actual timeline. This is not true if we prepare with an
offset (either because of an initial seek position or because of a default
window position). So, we also determine the actual first period when the
timeline becomes known.

Issue:#4873

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215213030"
tonihei,2018-10-01 13:44:49,https://api.github.com/repos/google/ExoPlayer/git/commits/90ca3716aabb38a813e68c56cd2d416368256b9e,90ca3716aabb38a813e68c56cd2d416368256b9e,"Improve MediaPeriodHolder documentation and member access.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215205796"
tonihei,2018-10-01 12:45:24,https://api.github.com/repos/google/ExoPlayer/git/commits/d97d289b6b3d2021bdb0340c47083079453bc2f0,d97d289b6b3d2021bdb0340c47083079453bc2f0,"Clarify and improve TrackSelection .enable() and .disable() calls.

These two methods are meant to indicate to the track selection that it's
started or stopped being used. This is helpful to schedule background tasks
related to track selection (e.g. register network change listeners etc.).
This intention is not clearly stated in the method docs.

Also, all track selections of all prebuffered periods stay enabled in
parallel at the moment. As the whole purpose of these methods is to know
whether dynamic updates via updateSelectedTrack may happen, it's better to
only enable track selections of the current loading media period. That's
similar to how we always forward the loading track selections to the
LoadControl.

This change:
 1. Improves the JavaDoc of TrackSelection.
 2. Disables track selections if loading moves to another period.
 3. Reenables track selection if loading moves back to a previous period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215199987"
andrewlewis,2018-10-01 08:50:07,https://api.github.com/repos/google/ExoPlayer/git/commits/f59f557704cb0406a4bfa4e542b4914e977171d2,f59f557704cb0406a4bfa4e542b4914e977171d2,"Use recommended way of checking for TV

Switch to the recommended way of checking whether the app is running on a TV
device.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=215177587"
andrewlewis,2018-09-28 20:33:23,https://api.github.com/repos/google/ExoPlayer/git/commits/5d5b641c1dec222eb4e504391fc021c35d73f6fd,5d5b641c1dec222eb4e504391fc021c35d73f6fd,"Extend physical display size workaround for ATVs

Extend Sony workaround up to and including Oreo.

Due to a platform issue the Display API couldn't report 1080p UI
and 4k SurfaceView support until Oreo. Since Oreo it is still
common for devices to misreport their display sizes via Display,
so this change switches to using system properties up to and
including Pie.

On Pie treble may prevent writing sys.display-size so check for
vendor.display-size instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214987203"
tonihei,2018-09-28 17:04:14,https://api.github.com/repos/google/ExoPlayer/git/commits/5c8dabade63769b4cdb289a87d7ae003cb78376a,5c8dabade63769b4cdb289a87d7ae003cb78376a,"Add @Documented to @IntDef and @StringDef annotations.

This makes the annotations appear in the generated JavaDoc.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214952419"
talklittle,2018-09-28 01:34:49,https://api.github.com/repos/google/ExoPlayer/git/commits/9b111fbd95c56221e75fa20e408ed7f978c5ae79,9b111fbd95c56221e75fa20e408ed7f978c5ae79,"Make DefaultTrackSelector.AudioTrackScore protected

This allows selectAudioTrack() to be overridden."
hacker1024,2018-09-27 22:10:57,https://api.github.com/repos/google/ExoPlayer/git/commits/47ce263bee3505206c51d2446843d47090d254c6,47ce263bee3505206c51d2446843d47090d254c6,Call rating with extras
ojw28,2018-09-27 17:02:21,https://api.github.com/repos/google/ExoPlayer/git/commits/028f3e6438be5c9f2a44c259e159600b9c8c6abb,028f3e6438be5c9f2a44c259e159600b9c8c6abb,"Don't recreate the audio decoder if Format is unchanged

More specifically, if the parts of the Format that are used
for decoder configuration are unchanged.

Issue: #2826

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214791234"
ojw28,2018-09-27 18:39:42,https://api.github.com/repos/google/ExoPlayer/git/commits/1dd0533af6661e2c37947d5fa0af73c7ab7882f4,1dd0533af6661e2c37947d5fa0af73c7ab7882f4,Merge branch 'release-v2' into dev-v2
ojw28,2018-09-27 18:38:12,https://api.github.com/repos/google/ExoPlayer/git/commits/afba6386d333b993777ba74a81d7d8c9d2f808f7,afba6386d333b993777ba74a81d7d8c9d2f808f7,"Merge pull request #4881 from google/dev-v2-r2.9.0

r2.9.0"
ojw28,2018-09-27 18:37:04,https://api.github.com/repos/google/ExoPlayer/git/commits/1f9a003b4b3b39badf649bcf6487d42e5e99d7df,1f9a003b4b3b39badf649bcf6487d42e5e99d7df,Merge branch 'release-v2' into dev-v2-r2.9.0
tonihei,2018-09-27 16:33:36,https://api.github.com/repos/google/ExoPlayer/git/commits/150e54b560275646ed53c167ce580a812aa3505f,150e54b560275646ed53c167ce580a812aa3505f,"Fix issue with stale createPeriod events in ConcatenatingMediaSource.

If a source is removed from the playlist, the player may still call createPeriod
for a period of the removed source as long as the new timeline hasn't been handled
by the player. These events are stale and can be ignored by using a dummy media
source. The stale media period will be released when the player handles the updated
timeline.

Issue:#4871

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214787090"
andrewlewis,2018-09-27 16:16:37,https://api.github.com/repos/google/ExoPlayer/git/commits/66c9d41ba05a2bbb02df0205a45943212eaf659a,66c9d41ba05a2bbb02df0205a45943212eaf659a,"Update release notes for 2.9.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214784773"
tonihei,2018-09-27 16:33:36,https://api.github.com/repos/google/ExoPlayer/git/commits/827ea636571998b4d97a43d564410e1c6251b146,827ea636571998b4d97a43d564410e1c6251b146,"Fix issue with stale createPeriod events in ConcatenatingMediaSource.

If a source is removed from the playlist, the player may still call createPeriod
for a period of the removed source as long as the new timeline hasn't been handled
by the player. These events are stale and can be ignored by using a dummy media
source. The stale media period will be released when the player handles the updated
timeline.

Issue:#4871

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214787090"
andrewlewis,2018-09-27 16:16:37,https://api.github.com/repos/google/ExoPlayer/git/commits/a394ab7be31e403c6fc214b75c2fd49ae9d513bd,a394ab7be31e403c6fc214b75c2fd49ae9d513bd,"Update release notes for 2.9.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214784773"
AquilesCanta,2018-09-27 14:37:39,https://api.github.com/repos/google/ExoPlayer/git/commits/e50214a5a1fd378d66db0ab088f1d9a4f2ccb2d9,e50214a5a1fd378d66db0ab088f1d9a4f2ccb2d9,"Add constructor for adding payload reader factory flags

Issue:#4861

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214772527"
AquilesCanta,2018-09-27 10:42:40,https://api.github.com/repos/google/ExoPlayer/git/commits/2a50621118df38a88232ea2d2f3d887ec2bfde10,2a50621118df38a88232ea2d2f3d887ec2bfde10,"Use media item in the cast demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214750185"
AquilesCanta,2018-09-26 13:55:17,https://api.github.com/repos/google/ExoPlayer/git/commits/776ad20a507048edd848e99b4b3f9c5a27c42a7a,776ad20a507048edd848e99b4b3f9c5a27c42a7a,"Add a MediaQueue abstraction to the cast extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214598078"
AquilesCanta,2018-09-26 11:22:36,https://api.github.com/repos/google/ExoPlayer/git/commits/1bb7ec8203ad92ecdb21f111ec522a13d365a89b,1bb7ec8203ad92ecdb21f111ec522a13d365a89b,"Make DefaultLoadErrorHandlingPolicy non-final

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214584874"
AquilesCanta,2018-09-26 11:22:36,https://api.github.com/repos/google/ExoPlayer/git/commits/a8efa27fabf18dcbfb61d5375c58d6aada0dfbb6,a8efa27fabf18dcbfb61d5375c58d6aada0dfbb6,"Make DefaultLoadErrorHandlingPolicy non-final

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214584874"
erdemguven,2018-09-26 10:47:54,https://api.github.com/repos/google/ExoPlayer/git/commits/c9ebaacae01d1e2afbb95850e4f8f0d6791243a1,c9ebaacae01d1e2afbb95850e4f8f0d6791243a1,"Use GlUtil class to share GL methods

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214582295"
tonihei,2018-09-26 10:27:52,https://api.github.com/repos/google/ExoPlayer/git/commits/b2e0a365d35feb5e5edb6439293f056ab022432c,b2e0a365d35feb5e5edb6439293f056ab022432c,"Add convenience methods player.next() and player.previous()

This simplifies code skipping items in a playlist programatically.

Issue:#4863

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214580742"
AquilesCanta,2018-09-24 16:15:41,https://api.github.com/repos/google/ExoPlayer/git/commits/083350b7dbae4569a1c2a5838715b968929c3510,083350b7dbae4569a1c2a5838715b968929c3510,"Do not retry failed loads whose error is FileNotFoundException

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214277073"
ojw28,2018-09-24 13:34:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d92787b58d86f4c91d641ff6f4473e2f97e132c5,d92787b58d86f4c91d641ff6f4473e2f97e132c5,"Don't request session sharing on CDMs that don't support it

Issue: #4834

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214258163"
ojw28,2018-09-24 13:00:38,https://api.github.com/repos/google/ExoPlayer/git/commits/b0cd6cf6229115c1a4102cdea5b91763f55d1fe4,b0cd6cf6229115c1a4102cdea5b91763f55d1fe4,"Allow configuration of DefaultLoadControl back buffer

Issue: #4857

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214254231"
andrewlewis,2018-09-24 08:17:21,https://api.github.com/repos/google/ExoPlayer/git/commits/614f964cfe717db77ea88bb693b3e52aed23a3ce,614f964cfe717db77ea88bb693b3e52aed23a3ce,"Update README for libvpx 1.7.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214227045"
ojw28,2018-09-21 13:49:26,https://api.github.com/repos/google/ExoPlayer/git/commits/321393e7cf9e722ffe6e8ac2ab96e76c07ad1b40,321393e7cf9e722ffe6e8ac2ab96e76c07ad1b40,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213979058"
erdemguven,2018-09-24 14:09:26,https://api.github.com/repos/google/ExoPlayer/git/commits/e86d5efb2147c1f99074311ee3852cca307823ad,e86d5efb2147c1f99074311ee3852cca307823ad,"Recenter SphericalSurfaceView view on startup

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214261973"
ojw28,2018-09-24 13:34:12,https://api.github.com/repos/google/ExoPlayer/git/commits/c934ce744dbc55ddd6dbde29037c441afde7671c,c934ce744dbc55ddd6dbde29037c441afde7671c,"Don't request session sharing on CDMs that don't support it

Issue: #4834

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214258163"
ojw28,2018-09-24 13:00:38,https://api.github.com/repos/google/ExoPlayer/git/commits/34c37596ddb2dc7d953fc3b9b1ed241cfd1930ec,34c37596ddb2dc7d953fc3b9b1ed241cfd1930ec,"Allow configuration of DefaultLoadControl back buffer

Issue: #4857

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214254231"
andrewlewis,2018-09-24 08:17:21,https://api.github.com/repos/google/ExoPlayer/git/commits/56f4717465d56de6bdb22f7526066d8c899c66be,56f4717465d56de6bdb22f7526066d8c899c66be,"Update README for libvpx 1.7.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=214227045"
ojw28,2018-09-21 13:49:26,https://api.github.com/repos/google/ExoPlayer/git/commits/275cfd9e772aedf6d8f6db2130628c482fe42ea4,275cfd9e772aedf6d8f6db2130628c482fe42ea4,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213979058"
szaboa,2018-09-21 12:05:43,https://api.github.com/repos/google/ExoPlayer/git/commits/876080ed1a70762d06ab97fbafda7ac7575487bc,876080ed1a70762d06ab97fbafda7ac7575487bc,#4306 - code review fixes
tonihei,2018-09-21 10:02:09,https://api.github.com/repos/google/ExoPlayer/git/commits/108a7099e43b68ea98c0f300ca12b4aacebf0cc6,108a7099e43b68ea98c0f300ca12b4aacebf0cc6,"Add missing calls to LoadControl.onTracksSelected.

This method needs to be called whenever the track selection of the current
loading period changes, but also when the loading period itself (and thus
the ""loading track selection"") changes. These are the same situations in which
we update the loading media period id and thus we can move both updates in
a common helper method.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213959982"
ojw28,2018-09-21 08:29:49,https://api.github.com/repos/google/ExoPlayer/git/commits/edf7561b9f4eb12285e04a806539ecbd856b917f,edf7561b9f4eb12285e04a806539ecbd856b917f,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213951977"
andrewlewis,2018-09-20 16:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b79156c334c559515bafe6309df0b5e8a4a28607,b79156c334c559515bafe6309df0b5e8a4a28607,"Propagate output format in tunneling mode

From API 23 this uses the timed format queue. Before API 23 the
format is notified as soon as the buffer is queued.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213830729"
andrewlewis,2018-09-20 16:34:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b58daf8dc5e2aa19e00edca82ac5ae37b8c9dbf5,b58daf8dc5e2aa19e00edca82ac5ae37b8c9dbf5,"Reset start trim only if input was queued

Before this change we would reset the start trim to zero after initial
configuration (at the start of playback) and after seeking to any position. The
fact that no trimming was applied at the start of playback meant that after the
first period transition we'd see a mismatch between the next buffer timestamp
(equal to the duration of the period taking into account edits) and the duration
of audio submitted to the sink.

This change modifies the behavior so that we reset the start trim to zero only
if some audio was queued since configuration. This is incorrect in the case of
starting playback at a non-zero position, but fixes the common case of starting
at zero. As before, a later seek to any position is handled via a flush and
resets the trim as required.

Transitions from one period to the next are unaffected by this change.

One way to implement start trimming correctly would be to provide the input
buffer timestamp to the audio processors and only trim when handling audio from
the start of the stream, but that is a larger change so left for later.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213828511"
andrewlewis,2018-09-20 16:34:14,https://api.github.com/repos/google/ExoPlayer/git/commits/a5fc7883a68f915ef7ac4d6601ab41cb8ce1650c,a5fc7883a68f915ef7ac4d6601ab41cb8ce1650c,"Add IMA tests to presubmit

Also fix internal build by adding some methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213828434"
andrewlewis,2018-09-20 16:07:45,https://api.github.com/repos/google/ExoPlayer/git/commits/7e55a6311f878d7d6a62714feac1d2279e902864,7e55a6311f878d7d6a62714feac1d2279e902864,"Fix ImaAdsLoaderTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213824217"
andrewlewis,2018-09-20 15:40:19,https://api.github.com/repos/google/ExoPlayer/git/commits/1c07b95fbb696fc774970c9b4008edd46afb8282,1c07b95fbb696fc774970c9b4008edd46afb8282,"Compensate for trimmed audio in buffer time check

After a period transition the first buffer queued has the sum of previous period
durations added to its source presentation timestamp. These durations take into
account gapless edits, but the check on the timestamp was based on the submitted
frame count, not the frame count after trimming.

This change fixes an issue where audio/video would gradually drift apart due to
accumulated error in the audio track position, which could lead to freezing due
to the audio renderer stopping being ready and switching to the standalone media
clock.

Issue: #4559

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213819908"
tonihei,2018-09-21 10:02:09,https://api.github.com/repos/google/ExoPlayer/git/commits/d411ace97d0e41eb2ce172e8ef1c15fb81358aaa,d411ace97d0e41eb2ce172e8ef1c15fb81358aaa,"Add missing calls to LoadControl.onTracksSelected.

This method needs to be called whenever the track selection of the current
loading period changes, but also when the loading period itself (and thus
the ""loading track selection"") changes. These are the same situations in which
we update the loading media period id and thus we can move both updates in
a common helper method.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213959982"
ojw28,2018-09-21 08:29:49,https://api.github.com/repos/google/ExoPlayer/git/commits/bd3bf3fc8db6b757d974ae73f98efe20cf589663,bd3bf3fc8db6b757d974ae73f98efe20cf589663,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213951977"
andrewlewis,2018-09-20 16:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/03fe503f1c4744848a1a2a68950b96d81c2f845c,03fe503f1c4744848a1a2a68950b96d81c2f845c,"Propagate output format in tunneling mode

From API 23 this uses the timed format queue. Before API 23 the
format is notified as soon as the buffer is queued.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213830729"
andrewlewis,2018-09-20 16:34:44,https://api.github.com/repos/google/ExoPlayer/git/commits/300dc05e85605218d958a36e95cbc666b7962364,300dc05e85605218d958a36e95cbc666b7962364,"Reset start trim only if input was queued

Before this change we would reset the start trim to zero after initial
configuration (at the start of playback) and after seeking to any position. The
fact that no trimming was applied at the start of playback meant that after the
first period transition we'd see a mismatch between the next buffer timestamp
(equal to the duration of the period taking into account edits) and the duration
of audio submitted to the sink.

This change modifies the behavior so that we reset the start trim to zero only
if some audio was queued since configuration. This is incorrect in the case of
starting playback at a non-zero position, but fixes the common case of starting
at zero. As before, a later seek to any position is handled via a flush and
resets the trim as required.

Transitions from one period to the next are unaffected by this change.

One way to implement start trimming correctly would be to provide the input
buffer timestamp to the audio processors and only trim when handling audio from
the start of the stream, but that is a larger change so left for later.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213828511"
andrewlewis,2018-09-20 16:34:14,https://api.github.com/repos/google/ExoPlayer/git/commits/d0fb4b4729b9247bb1b17a14aea5b605e0e0dfa8,d0fb4b4729b9247bb1b17a14aea5b605e0e0dfa8,"Add IMA tests to presubmit

Also fix internal build by adding some methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213828434"
andrewlewis,2018-09-20 16:07:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e90d36cb699083a4ee74b27d0960df7e2352e1bc,e90d36cb699083a4ee74b27d0960df7e2352e1bc,"Fix ImaAdsLoaderTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213824217"
andrewlewis,2018-09-20 15:40:19,https://api.github.com/repos/google/ExoPlayer/git/commits/a0ab96623acfad89468a70677fee2c36b2e4d9ed,a0ab96623acfad89468a70677fee2c36b2e4d9ed,"Compensate for trimmed audio in buffer time check

After a period transition the first buffer queued has the sum of previous period
durations added to its source presentation timestamp. These durations take into
account gapless edits, but the check on the timestamp was based on the submitted
frame count, not the frame count after trimming.

This change fixes an issue where audio/video would gradually drift apart due to
accumulated error in the audio track position, which could lead to freezing due
to the audio renderer stopping being ready and switching to the standalone media
clock.

Issue: #4559

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213819908"
ojw28,2018-09-20 11:46:31,https://api.github.com/repos/google/ExoPlayer/git/commits/7d90396c27dd52fe93a54a202092c1e081a3ee92,7d90396c27dd52fe93a54a202092c1e081a3ee92,Cleanup
ojw28,2018-09-20 11:40:13,https://api.github.com/repos/google/ExoPlayer/git/commits/1e3c2a6b378f2448768f256ffc31efbdd3c26ad3,1e3c2a6b378f2448768f256ffc31efbdd3c26ad3,"Merge pull request #4801 from nicklasl/trackselector-filter-on-framerate

Trackselector filter on framerate"
ojw28,2018-09-20 11:46:31,https://api.github.com/repos/google/ExoPlayer/git/commits/4b33d3c8a235dfca892d987618d577ff20967e98,4b33d3c8a235dfca892d987618d577ff20967e98,Cleanup
ojw28,2018-09-20 11:40:13,https://api.github.com/repos/google/ExoPlayer/git/commits/2a235184c079b2d0f90e31e5005162b3405ad8d7,2a235184c079b2d0f90e31e5005162b3405ad8d7,"Merge pull request #4801 from nicklasl/trackselector-filter-on-framerate

Trackselector filter on framerate"
tonihei,2018-09-19 17:27:11,https://api.github.com/repos/google/ExoPlayer/git/commits/b07eef6d440740163c09a6cc9f5a68d2d9e0b689,b07eef6d440740163c09a6cc9f5a68d2d9e0b689,"Fix drm nullability warnings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213650027"
tonihei,2018-09-19 16:08:52,https://api.github.com/repos/google/ExoPlayer/git/commits/6323c1904fd9f12d16513e1ccca64638a3c0dbfc,6323c1904fd9f12d16513e1ccca64638a3c0dbfc,"Stop overriding deprecated method.

Fixed and random track selection were still overriding the deprecated version
of updateSelectedTrack.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213637728"
tonihei,2018-09-19 16:07:10,https://api.github.com/repos/google/ExoPlayer/git/commits/5c1829f063691f01946e218e8e1e8dcd1cbf38f0,5c1829f063691f01946e218e8e1e8dcd1cbf38f0,"Deprecate FixedTrackSelecion.Factory.

The only use of track selection factories is as adaptive track selection factories
in the DefaultTrackSelector. Using the fixed track selection factory here is dangerous
as it will throw if more than one track is selected.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213637500"
ojw28,2018-09-19 09:57:36,https://api.github.com/repos/google/ExoPlayer/git/commits/64b50ff9e6d9445ec938ccf88eab974e5c4f2ca3,64b50ff9e6d9445ec938ccf88eab974e5c4f2ca3,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213599127"
ojw28,2018-09-18 17:59:20,https://api.github.com/repos/google/ExoPlayer/git/commits/918a43e48d20ff3dc91111903b9e1e78a908a93b,918a43e48d20ff3dc91111903b9e1e78a908a93b,"Work around adaptation issue for Tab 4

The decoder doesn't claim to be adaptive, but if we're staying
in the same resolution we'll try and re-use the decoder anyway.
The H264 decoder can't handle this case on the Tab 4 can't deal
with this case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213478378"
andrewlewis,2018-09-18 16:33:07,https://api.github.com/repos/google/ExoPlayer/git/commits/7fe5230a7ef3a5a5f2a812ec24b10e3202f224f4,7fe5230a7ef3a5a5f2a812ec24b10e3202f224f4,"Use gapless edit duration as sample table duration

This matches the non-gapless case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213462936"
andrewlewis,2018-09-18 15:11:16,https://api.github.com/repos/google/ExoPlayer/git/commits/e4f41880bda81af216d4ce8cf26a90edd02fc73c,e4f41880bda81af216d4ce8cf26a90edd02fc73c,"Add E-AC3 Ac3Extractor sample and test

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213451163"
AquilesCanta,2018-09-18 14:02:47,https://api.github.com/repos/google/ExoPlayer/git/commits/bca2f5c3a0892a46651e7cc4a8c026afc268e52a,bca2f5c3a0892a46651e7cc4a8c026afc268e52a,"Fix Ac3 extractor sniffing for E-AC-3 frames

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213443047"
tonihei,2018-09-18 13:57:40,https://api.github.com/repos/google/ExoPlayer/git/commits/a92344ac9e030cffc604f945ed81dc67ad6aaf3f,a92344ac9e030cffc604f945ed81dc67ad6aaf3f,"Log warning with stack trace if player is accessed from the wrong thread.

This doesn't break apps which violate this policy. But it creates a clear
warning which is also likely to be reported in analytics tools.

Issue:#4463

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213442510"
AquilesCanta,2018-09-18 13:24:37,https://api.github.com/repos/google/ExoPlayer/git/commits/db33b3bbd1718f57389a9e5ce9e145bd3356b991,db33b3bbd1718f57389a9e5ce9e145bd3356b991,"Allow HlsSampleStreamWrapper to cancel partial media chunk loads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213439145"
tonihei,2018-09-18 13:13:00,https://api.github.com/repos/google/ExoPlayer/git/commits/decbb33490dde692903d00ea7b9b932ee6eda64b,decbb33490dde692903d00ea7b9b932ee6eda64b,"Add super-simple SimpleExoPlayer factory method.

The DefaultTrackSelector can now be constructed without leaving out a
vital part of the initialization. This allows this new simple factory method.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213438163"
AquilesCanta,2018-09-18 13:02:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a89645d0923135962d53b88e8cc8959c7c95f3a7,a89645d0923135962d53b88e8cc8959c7c95f3a7,"For HLS segment sniffing, fall back on extractor creation by file extension

This reduces the possiblity of regressions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213436912"
tonihei,2018-09-18 09:59:33,https://api.github.com/repos/google/ExoPlayer/git/commits/e25b7d2148caabe0db75d541662eb99df3ed8080,e25b7d2148caabe0db75d541662eb99df3ed8080,"Add wrapper for Log messages to allow settig the log level.

Currently there is no way to disable (or reduce) the logcat output generated
by ExoPlayer.

Issue:#4665

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213421072"
AquilesCanta,2018-09-17 17:43:57,https://api.github.com/repos/google/ExoPlayer/git/commits/c9e4f6b429ef9033f41cab978b007b8626fb5d0e,c9e4f6b429ef9033f41cab978b007b8626fb5d0e,"Make HlsMediaSource.Factory take a factory of trackers instead of an instance

This allows creating multiple HLS media sources from a single Factory, as
required by the interface.

Issue:#4814

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213297850"
ojw28,2018-09-17 16:38:41,https://api.github.com/repos/google/ExoPlayer/git/commits/b09e36dcb7c3ebd992407ba6a844353177f30ed3,b09e36dcb7c3ebd992407ba6a844353177f30ed3,"SmoothStreaming: Test for fourCC equal to DFXP

Issue: #4824

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213285790"
tonihei,2018-09-17 16:02:11,https://api.github.com/repos/google/ExoPlayer/git/commits/585806de24ebc72934c55c9e965592d0d581b7b3,585806de24ebc72934c55c9e965592d0d581b7b3,"Clarify doc of components which only allow a main thread player.

ExoPlayer can be run on a background thread, but some components (UI and IMA)
only support players on the main thread. This adds some documentation and
assertions for that.

To simplify assertions, this also moves the getApplicationLooper method from
ExoPlayer to Player.

Issue:#4439

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213280359"
tonihei,2018-09-17 13:32:49,https://api.github.com/repos/google/ExoPlayer/git/commits/c18ee3f96d9bedaa8c3f08d5a8377c4d25e85df4,c18ee3f96d9bedaa8c3f08d5a8377c4d25e85df4,"Add some missing @Nullable to public API to improve Kotlin compatiblity.

Kotlin will throw NPE whenever a method returns null or an interface is
called with a null parameter and the respective values are not marked as
@Nullable.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213262886"
AquilesCanta,2018-09-17 11:09:44,https://api.github.com/repos/google/ExoPlayer/git/commits/76255dfae767caadb07ecd6ad92294f44b627e85,76255dfae767caadb07ecd6ad92294f44b627e85,"Make ExtractorsFactory javadoc consistent

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213248388"
andrewlewis,2018-09-17 10:29:54,https://api.github.com/repos/google/ExoPlayer/git/commits/dc807c11a1bd7b66b246fdc99fb965653e8e64ea,dc807c11a1bd7b66b246fdc99fb965653e8e64ea,"Fix some release notes formatting

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213245186"
tonihei,2018-09-17 08:55:42,https://api.github.com/repos/google/ExoPlayer/git/commits/d1df41a39e0950a18b8c8b01f6094f926f3c823a,d1df41a39e0950a18b8c8b01f6094f926f3c823a,"Fix window index comparison.

To check the validity of a window index it needs to be compared with a greater
or equal sign to the window count.

Issue:#4822

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=213234403"
AquilesCanta,2018-09-14 16:21:01,https://api.github.com/repos/google/ExoPlayer/git/commits/caa46d49e5a549aff26a2c9841e1a1b57676435a,caa46d49e5a549aff26a2c9841e1a1b57676435a,"Explicitly document empty range removal in Util.removeRange.

Also prevent an unnecessary allocation when the removed range is empty.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212993427"
tonihei,2018-09-14 14:40:03,https://api.github.com/repos/google/ExoPlayer/git/commits/1284f9ea4dee579d59410fdfd39b3e737062d35c,1284f9ea4dee579d59410fdfd39b3e737062d35c,"Add Nullable to message payload.

Not having this annotation may cause Kotlin implementations to fail.

Issue:#4802

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212980643"
ojw28,2018-09-13 17:32:15,https://api.github.com/repos/google/ExoPlayer/git/commits/6f6f381beb5a096a3be9114627a18c1044dbda0f,6f6f381beb5a096a3be9114627a18c1044dbda0f,"Fix audio and text track selection in the multi-renderer case

If we can select a track that has a strictly higher score than a
selection already made for a renderer of the same type, we should
prefer it.

Issue: #4711

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212835895"
AquilesCanta,2018-09-13 14:28:34,https://api.github.com/repos/google/ExoPlayer/git/commits/3e4115ff3c9834cabc6b56f7c3944fa6be021f74,3e4115ff3c9834cabc6b56f7c3944fa6be021f74,"No-op ConcatenatingMediaSource simplification

- Make addMediaSource a specific case of addMediaSources.
- Make clear a specific case of removeMediaSourceRange.
- Make removeMediaSource a specific case of removeMediaSourceRange.
- Remove the unnecessary message handling and constants.
- Move a method so that depending appears before depended.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212809667"
ojw28,2018-09-13 11:13:45,https://api.github.com/repos/google/ExoPlayer/git/commits/62532f9a2ea988ccb3c785e205d01010093ab6b2,62532f9a2ea988ccb3c785e205d01010093ab6b2,"Revert accidental change to media.exolist.json

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212790665"
ojw28,2018-09-12 15:33:29,https://api.github.com/repos/google/ExoPlayer/git/commits/b17d49ed27304abf94e641135cd4a0102c7ad2fa,b17d49ed27304abf94e641135cd4a0102c7ad2fa,"Add nullness annotations to a few more files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212644046"
ojw28,2018-09-12 12:30:06,https://api.github.com/repos/google/ExoPlayer/git/commits/b4dfed874d33bdeb49bd9e8aaa4371386624d6a0,b4dfed874d33bdeb49bd9e8aaa4371386624d6a0,"Enable GZIP for SingleSampleMediaSource

Issue: #4771

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212623142"
ojw28,2018-09-12 11:51:51,https://api.github.com/repos/google/ExoPlayer/git/commits/a5a7e988e32b307e757de8915d91678f62740a1e,a5a7e988e32b307e757de8915d91678f62740a1e,"Clip DASH periods to their durations

Issue: #4185

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212619419"
andrewlewis,2018-09-11 13:51:22,https://api.github.com/repos/google/ExoPlayer/git/commits/35c230f3c6ed9c249dfed1b5ea18f3e17bb7990e,35c230f3c6ed9c249dfed1b5ea18f3e17bb7990e,"Allow partial format for adaptation check

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212443793"
tonihei,2018-09-11 13:44:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b1d48179e87197c697bbf6e2663c0e570c6839cc,b1d48179e87197c697bbf6e2663c0e570c6839cc,"Add support to change shuffle order after playlist creation.

This allows to update the shuffle order after the ConcatenatingMediaSource
has been created. ShuffleOrder objects should be immutable to ensure thread
safety and thus there is no way to do this currently.

Issue:#4791

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212443146"
ojw28,2018-09-11 13:43:32,https://api.github.com/repos/google/ExoPlayer/git/commits/b31438b67065e6d95fe86298b1244057043aaacc,b31438b67065e6d95fe86298b1244057043aaacc,"Clean up downstream format notification for ChunkSampleStream

- Fixes the referenced issue.
- Provides more consistent behavior for the edge case of empty
  chunks (i.e. chunks containing now samples). Format changes
  will now always be reported for such chunks, unless the empty
  chunk is discarded from upstream before there's a chance to
  do so.

Issue: #4533

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212443043"
tonihei,2018-09-11 12:28:15,https://api.github.com/repos/google/ExoPlayer/git/commits/21c5b0bf67c96ddd1031c96e7933506be3b87883,21c5b0bf67c96ddd1031c96e7933506be3b87883,"Add missing AudioSink discontinuity for stream changes.

When the stream is changed in the audio renderer, the timestamps of the
samples can no longer be expected to match the calculations in the AudioSink.

This change tracks the samples at which the stream is changed and notifies the
AudioSink of the discontinuity.

Issue:#4559
Issue:#3829

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212435859"
ojw28,2018-09-11 12:24:41,https://api.github.com/repos/google/ExoPlayer/git/commits/a083c29f7edb50cfe5233607753a0caf885598c1,a083c29f7edb50cfe5233607753a0caf885598c1,"Don't discard when a reset is pending

When a reset is pending the sample queues normally contain pre-seek
samples (which will be emptied when a pending load is canceled). The
position passed to discard will be a post-seek position. I don't
think anything bad happened in any of the cases being changed, but
discarding is unnecessary in such cases, and reasoning about such
cases is difficult.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212435556"
ojw28,2018-09-11 12:15:52,https://api.github.com/repos/google/ExoPlayer/git/commits/46af49e282cc260049827231484bdd4a59d3db19,46af49e282cc260049827231484bdd4a59d3db19,"Clean up easy cases of downstream format notification

- This makes it so that onDownstreamFormatChanged will occur before the corresponding
  renderer event. This was not previously the case, since the renderer would typically
  read the format (and report its event), then a sample (causing the
  onDownstreamFormatChanged event).
- The remaining ones to update are ChunkSampleStream (DASH + HLS), which will be done
  in a way that fixes #4533, and HLS.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212434874"
ojw28,2018-09-11 11:54:00,https://api.github.com/repos/google/ExoPlayer/git/commits/6c3c71b5545f74ff6541491fb296d22d4c832b20,6c3c71b5545f74ff6541491fb296d22d4c832b20,"Fix SampleQueue splicing when sampleOffsetUs != 0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212432661"
ojw28,2018-09-11 11:50:13,https://api.github.com/repos/google/ExoPlayer/git/commits/ba8c22aba521b46656c5ce580f40c8b6278440ae,ba8c22aba521b46656c5ce580f40c8b6278440ae,"Make seeking when there's a pending reset more obviously correct

If there's already a pending reset, we need only update the pending
reset position. We can currently end up calling cancelLoading more
than once on the loader for the same task, which is hard to reason
about (although I don't think anything actually broke in practice).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212432266"
tonihei,2018-09-11 09:57:42,https://api.github.com/repos/google/ExoPlayer/git/commits/72efc8003717646c40af35d216271946466e31f5,72efc8003717646c40af35d216271946466e31f5,"Correct timescale of edit list duration parsing for stbl atoms.

We currently apply the track.timescale whereas we should be applying the
track.movieTimescale. The parsing for the trak atom does this correctly
and the duration from the trak atom currently always takes precedence over the
durations from the stbl atoms as it's always larger.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212421687"
andrewlewis,2018-09-10 18:34:35,https://api.github.com/repos/google/ExoPlayer/git/commits/be11369966bb28df60dc84a178b3f68d68e7f35d,be11369966bb28df60dc84a178b3f68d68e7f35d,"Remove UnhandledEditListException

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212303130"
tonihei,2018-09-10 16:03:55,https://api.github.com/repos/google/ExoPlayer/git/commits/bf0a7937e20d9e545bb7847688e7e69766411fa9,bf0a7937e20d9e545bb7847688e7e69766411fa9,"Fix util nullness warnings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212276150"
andrewlewis,2018-09-10 14:50:21,https://api.github.com/repos/google/ExoPlayer/git/commits/09aaec6b0143e61debfc59ed1a9d24aad1286e57,09aaec6b0143e61debfc59ed1a9d24aad1286e57,"Add proguard configuration for download actions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212266041"
tonihei,2018-09-10 10:53:22,https://api.github.com/repos/google/ExoPlayer/git/commits/95aa5db14829183519867de95b76c1ed8717c338,95aa5db14829183519867de95b76c1ed8717c338,"Reenable edit lists without keyframe again but remove samples before keyframe.

Ignoring all edit lists if they don't start with a keyframe causes A/V sync
issues when valid edit lists are applied at the beginning.

This change allows such edit lists again but removes all samples before the
first keyframe (these samples would be ignored by the renderer anyway if at
the beginning OR cause visible distortions when appended to an unrelated
keyframe).

Issue:#4774
Issue:#4348

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212244407"
tonihei,2018-09-10 10:50:17,https://api.github.com/repos/google/ExoPlayer/git/commits/1a800973083c840ae58f7636144d5067d537176b,1a800973083c840ae58f7636144d5067d537176b,"Fix NPE in FrameworkMediaDrm.

Currently causing GTS tests to fail.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=212244198"
AquilesCanta,2018-09-07 15:09:12,https://api.github.com/repos/google/ExoPlayer/git/commits/b14e0935b1da7c6b5603a9bc4d46670e72a80d37,b14e0935b1da7c6b5603a9bc4d46670e72a80d37,"Add container format sniffing in HLS

Issue:#2025

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211977802"
AquilesCanta,2018-09-07 15:01:03,https://api.github.com/repos/google/ExoPlayer/git/commits/da88b34687f7339ac01fd5bb1d64e01b324d3468,da88b34687f7339ac01fd5bb1d64e01b324d3468,"Fix HLS advanced TS and fMP4 sample streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211976724"
ojw28,2018-09-07 12:20:20,https://api.github.com/repos/google/ExoPlayer/git/commits/cb5c78917c3a45b613dd03bfe2b38eb218098dff,cb5c78917c3a45b613dd03bfe2b38eb218098dff,"Simplify notification of downstream format change for embedded track

- There's no particular need to read or skip a sample before notifying
- Add missing isPendingReset check

Issue: #4533

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211959762"
ojw28,2018-09-07 11:06:00,https://api.github.com/repos/google/ExoPlayer/git/commits/38386c480a7b78f9a59f1c8f51c2ce6b667102c4,38386c480a7b78f9a59f1c8f51c2ce6b667102c4,"Be explicit about character set.

The default character set is always UTF-8 anyway on Android, but
we don't want our code to behave any differently where it's not
(e.g. robolectric test runs could potentially run in an environment
where UTF-8 isn't the default?).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211953885"
tonihei,2018-09-07 08:52:03,https://api.github.com/repos/google/ExoPlayer/git/commits/77a529f0edb8830aa790ac8bd97183e16b7a5a19,77a529f0edb8830aa790ac8bd97183e16b7a5a19,"Add static Util.EMPTY_BYTE_ARRAY

This prevents repeated instantiation of empty arrays.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211941723"
joseph-marques,2018-09-06 19:58:39,https://api.github.com/repos/google/ExoPlayer/git/commits/aa7134d53867924d41a3638d638f5c9d0f1c20be,aa7134d53867924d41a3638d638f5c9d0f1c20be,"Adds support for the messageData attribute of the Event element in DASH MPDs for ExoPlayer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211854408"
AquilesCanta,2018-09-06 17:14:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f47f1b9f4b2685980435c82b329ea3a4ed6a3500,f47f1b9f4b2685980435c82b329ea3a4ed6a3500,"Remove BOM check in Webvtt header checks

Reverts the BOM check changes in []

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211826731"
tonihei,2018-09-06 16:26:03,https://api.github.com/repos/google/ExoPlayer/git/commits/67a2bb3d28d946e0085c1f4760d21e46f71cc3d6,67a2bb3d28d946e0085c1f4760d21e46f71cc3d6,"Fix various period preparation and source info refresh error throwing issues

1. Currently, we may throw source info refresh errors while the previous media
   period is still playing.
2. We don't throw if the next period in a playlist fails to prepare and the
   previous renderers are all disabled.
3. We throw source info refresh errors for playlists before playback reaches
   the culprit source.

This change:
1. Defers the exceptions until all existing media periods have been played.
2. Checks for period preparation exception if the next period is not
   getting prepared and the renderer time reached the next period.
3. Does no longer throw from ConcatenatingMediaSource.maybeThrowSourceInfo
   RefreshError. The deferred media periods take care of that for each source
   individually.

Issue:#4661

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211819436"
ojw28,2018-09-06 12:37:12,https://api.github.com/repos/google/ExoPlayer/git/commits/502fae7cd4b69c604553b7af404222408d7edf13,502fae7cd4b69c604553b7af404222408d7edf13,"Bump version to 2.9.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211792952"
ojw28,2018-09-05 16:29:11,https://api.github.com/repos/google/ExoPlayer/git/commits/c3c309b8a826912808360a344443703ee878720e,c3c309b8a826912808360a344443703ee878720e,"Blacklist OMX.SEC.mp3.dec on SM-T530

Issue: #4519

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211646358"
marcbaechinger,2018-09-05 11:37:20,https://api.github.com/repos/google/ExoPlayer/git/commits/0e12eb4d92ea7c9c45736e849554d46ecec5f072,0e12eb4d92ea7c9c45736e849554d46ecec5f072,"Dispatch notification actions to the originating PlayerNotificationManager only.

Issue #4643

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211613803"
tonihei,2018-09-05 11:16:38,https://api.github.com/repos/google/ExoPlayer/git/commits/782dee266d0b94c05446d8899f4f8dd672719e9b,782dee266d0b94c05446d8899f4f8dd672719e9b,"Change past to present tense in release notes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211612207"
ojw28,2018-09-04 15:47:59,https://api.github.com/repos/google/ExoPlayer/git/commits/c57fe1897c16620df0ffc579c43a680d4c474832,c57fe1897c16620df0ffc579c43a680d4c474832,"Add ExoPlayer.retry convenience method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211463309"
AquilesCanta,2018-09-04 14:45:13,https://api.github.com/repos/google/ExoPlayer/git/commits/7959a691ad89bfd3d864f4c911eac3fc126130f1,7959a691ad89bfd3d864f4c911eac3fc126130f1,"Add sniffing to WebvttExtractor

Preparation for sniffing in HLS

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211455454"
ojw28,2018-09-04 13:32:11,https://api.github.com/repos/google/ExoPlayer/git/commits/70f8aeb10b882ecd7504962e6301a098711b5ad2,70f8aeb10b882ecd7504962e6301a098711b5ad2,"Clean up release notes in preparation for 2.9.0

- Try and put things into a vaguely sane order
- Remove/simplify overly-detailed release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211447350"
ojw28,2018-09-04 13:20:00,https://api.github.com/repos/google/ExoPlayer/git/commits/80e64e58ec527b6e867fbb44172cefd447b1b7bf,80e64e58ec527b6e867fbb44172cefd447b1b7bf,"WAV: Don't output data beyond the data limit

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211446207"
ojw28,2018-09-03 14:19:51,https://api.github.com/repos/google/ExoPlayer/git/commits/29ab6f7466983f6968534a125a43fc7d4919f6b2,29ab6f7466983f6968534a125a43fc7d4919f6b2,Automatic styling fix
ojw28,2018-09-03 14:17:18,https://api.github.com/repos/google/ExoPlayer/git/commits/fc47f2222c0c33fe6aa26645d955c3da1f8cb9a5,fc47f2222c0c33fe6aa26645d955c3da1f8cb9a5,"Merge pull request #4747 from kolpacheque/issue-4360-pcm-mulaw-support

Add parsing a-law and mu-law atom types"
ojw28,2018-09-03 14:09:26,https://api.github.com/repos/google/ExoPlayer/git/commits/8d0c4b1b87c292abf595dabdcb86fa1b68a75ad7,8d0c4b1b87c292abf595dabdcb86fa1b68a75ad7,"Fix some Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211352749"
tonihei,2018-09-03 09:43:29,https://api.github.com/repos/google/ExoPlayer/git/commits/3a802eb06c7a3bee9e8477015a857a4ca7bcc005,3a802eb06c7a3bee9e8477015a857a4ca7bcc005,"Add onDrmSessionAcquired and onDrmSessionReleased callbacks.

To report DRM session metrics in the future as part of the listener, we need
a callback at the end of the drm session to get the final metric state.
For completion, the session acquired callback is also added.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211328412"
erdemguven,2018-08-31 14:44:12,https://api.github.com/repos/google/ExoPlayer/git/commits/5335b258de8b2bec4d6bf84288323fc4d200183b,5335b258de8b2bec4d6bf84288323fc4d200183b,"Make SceneRenderer implement VideoFrameMetadataListener and CameraMotionListener

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211084127"
AquilesCanta,2018-08-31 12:30:23,https://api.github.com/repos/google/ExoPlayer/git/commits/514edb699f861e2d817da045ef7030195250d4fe,514edb699f861e2d817da045ef7030195250d4fe,"Add a type check for OGG files with a single payload page

Also make some javadocs more consistent with the rest of the library.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=211071559"
nic0lette,2018-08-29 13:56:55,https://api.github.com/repos/google/ExoPlayer/git/commits/595b6b8fde97a6511cd739325a3e53395a3f221f,595b6b8fde97a6511cd739325a3e53395a3f221f,"Add unit tests for AudioFocusManager.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210714110"
tonihei,2018-08-29 13:46:34,https://api.github.com/repos/google/ExoPlayer/git/commits/d308fff88d6f23aa2244885190bfdcecf03ca8c9,d308fff88d6f23aa2244885190bfdcecf03ca8c9,"Restructure media period queue tracker in AnalyticsCollector.

The current structure tries to associate events to media periods and windows
based on the reported values and the current timeline. However the reported
EventTime may not always be consistent in case the timeline doesn't contain
windows or media periods yet or not anymore.

The recent changes to MediaPeriodId allow to use it as a unique identifer for
media periods independent of the timeline. This enables more accurate tracking
of the media period queue and prevents reporting events with inconsistent
data.

Issue:#4492
Issue:#4634

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210713120"
erdemguven,2018-08-29 10:43:56,https://api.github.com/repos/google/ExoPlayer/git/commits/ca0e276798af1f2addc1a14798de1abfa875bd44,ca0e276798af1f2addc1a14798de1abfa875bd44,"Reset camera motion rotation when camera motion track is disabled

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210696525"
ojw28,2018-08-28 16:19:35,https://api.github.com/repos/google/ExoPlayer/git/commits/13889c911665e306d3a6e438d8413df632e92295,13889c911665e306d3a6e438d8413df632e92295,"Pass multiple PSSH boxes to Widevine CDM

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210551848"
tonihei,2018-08-28 16:19:19,https://api.github.com/repos/google/ExoPlayer/git/commits/6b9e1824ad067636e1f85eb262670e8ec8a5bac1,6b9e1824ad067636e1f85eb262670e8ec8a5bac1,"Extend updateSelectedTrack method with additional information.

This provides the list of currently buffered media chunks and iterators over
the potential next chunks to the track selection. Having these two parameters
enables more advanced decision logic based on this data.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210551812"
kolpacheque,2018-08-29 14:23:34,https://api.github.com/repos/google/ExoPlayer/git/commits/89080874afa5d2b4649753c754317bd3d7f68591,89080874afa5d2b4649753c754317bd3d7f68591,Add parsing a-law and mu-law atom types
erdemguven,2018-08-28 14:28:41,https://api.github.com/repos/google/ExoPlayer/git/commits/a429f4819efedcf970853b578eda7959c03ea22f,a429f4819efedcf970853b578eda7959c03ea22f,"Use camera motion metadata to stabilize 360 videos

RELNOTES=true

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210537375"
ojw28,2018-08-28 13:33:42,https://api.github.com/repos/google/ExoPlayer/git/commits/ce1d8d6ce2a5f87348b474214fc8a05af44d26ca,ce1d8d6ce2a5f87348b474214fc8a05af44d26ca,"Remove obsolete SDK_INT modification

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210531569"
andrewlewis,2018-08-28 13:10:42,https://api.github.com/repos/google/ExoPlayer/git/commits/efe8f09f45fe7804e8c92089f744d717502f9019,efe8f09f45fe7804e8c92089f744d717502f9019,"Propagate EoS in renderer when using video tunneling

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210529471"
erdemguven,2018-08-28 10:01:02,https://api.github.com/repos/google/ExoPlayer/git/commits/23817eecfd77ddac87dbcba2ccb9aef1e459b178,23817eecfd77ddac87dbcba2ccb9aef1e459b178,"Release zip inflater when finished

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210513776"
tonihei,2018-08-24 16:14:51,https://api.github.com/repos/google/ExoPlayer/git/commits/d0161ad18b86bc2cbd232ec77058ac9d5723a66d,d0161ad18b86bc2cbd232ec77058ac9d5723a66d,"Fix all error-prone, style, optional suggestion, etc. issues.

This fixes or suppresses all reported issues by the code review linter tools.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210107759"
ojw28,2018-08-24 14:11:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ff1812d3fed7d18baefb778b91f7397c9c61a8bc,ff1812d3fed7d18baefb778b91f7397c9c61a8bc,"Fix ClearKey prior to API 27

There are C.CLEARKEY_UUID.equals(uuid) checks in FrameworkMediaDrm,
so uuid needs to be CLEARKEY_UUID, not COMMON_PSSH_UUID

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210094372"
ojw28,2018-08-24 14:00:47,https://api.github.com/repos/google/ExoPlayer/git/commits/fdda2bb8414a2ae7ee832a1c97c64c9958a0edeb,fdda2bb8414a2ae7ee832a1c97c64c9958a0edeb,"Make setConstantBitrateSeekingEnabled consistent with other method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210093143"
ojw28,2018-08-24 13:53:31,https://api.github.com/repos/google/ExoPlayer/git/commits/3196bc40dbac54bac272cedc4fe42f47f551b88b,3196bc40dbac54bac272cedc4fe42f47f551b88b,"Fix CronetDataSource redirect logic

- Remove usage of deprecated postBody field
- Transform POST to GET on redirect, as in DefaultHttpDataSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210092576"
ojw28,2018-08-24 13:51:33,https://api.github.com/repos/google/ExoPlayer/git/commits/924a76d5323e072eb075bf0a6e50fd5eda7fd064,924a76d5323e072eb075bf0a6e50fd5eda7fd064,"Clean up use of deprecated APIs

- Add @Deprecated on overrides of deprecated method.
- Suppress deprecation warnings where appropriate.
- Use non-deprecated alternatives where appropriate.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210092434"
ojw28,2018-08-24 11:44:53,https://api.github.com/repos/google/ExoPlayer/git/commits/0da7f6ca08d88d07ab5600cb3d38b85058329a57,0da7f6ca08d88d07ab5600cb3d38b85058329a57,"Use EventLogger in ExoHostedTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210082909"
tonihei,2018-08-24 10:43:50,https://api.github.com/repos/google/ExoPlayer/git/commits/335fa130635b463e9b5d8acce30178fd6d180d9a,335fa130635b463e9b5d8acce30178fd6d180d9a,"Use set-like behaviour for BaseDataSource listeners.

This prevents problems caused by unintended double-registration of the same
transfer listener.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210078454"
ojw28,2018-08-24 10:31:11,https://api.github.com/repos/google/ExoPlayer/git/commits/38f2f352f9bbed34c77d8d7a8197f64d0de6d6e8,38f2f352f9bbed34c77d8d7a8197f64d0de6d6e8,"Move playback tests off deprecated APIs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210077548"
tonihei,2018-08-24 09:40:21,https://api.github.com/repos/google/ExoPlayer/git/commits/a71e28440d2827d202d206a80d1d9c68ad731dbe,a71e28440d2827d202d206a80d1d9c68ad731dbe,"Add parameter to force disable adaptive track selection.

This option is currently not available as a non-null adaptive track selection
has to be provided. Adds a parameter ""forceHighestSupportedBitrate"" which
corresponds to the default fixed track selection for audio and video.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210073675"
andrewlewis,2018-08-24 09:12:13,https://api.github.com/repos/google/ExoPlayer/git/commits/9c3677360214d783b2d529f8bbb867fa8c7b3819,9c3677360214d783b2d529f8bbb867fa8c7b3819,"Fix playback of postrolls with multiple ads

At the point of starting to play a postroll, source info refreshes for future
postroll ads in the same ad group would cause a seek that incorrectly identified
the media period to play as the content media period. Fix the logic in
getAdGroupIndexForPositionUs to address this.

Also handle empty postroll ad breaks by resetting the expected ad group index
when we send content complete.

Issue: #4710
Issue: #4681

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=210071054"
AquilesCanta,2018-08-23 17:27:24,https://api.github.com/repos/google/ExoPlayer/git/commits/24d04a26e43972629182b9676677d404c073d92d,24d04a26e43972629182b9676677d404c073d92d,"Add support for variable substition in HLS

Issue:#4422

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209958623"
ojw28,2018-08-23 16:17:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4d8a5c44b31a8b3865357d2a94cf989a2e001e54,4d8a5c44b31a8b3865357d2a94cf989a2e001e54,"Fix some more lint issues

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209947034"
tonihei,2018-08-23 11:18:25,https://api.github.com/repos/google/ExoPlayer/git/commits/2a9d5c21e27a13773864e40dac1543711979f5c0,2a9d5c21e27a13773864e40dac1543711979f5c0,"Clarify doc for Player.getDuration and add Player.getContentDuration.

Similar to getBufferedPosition and getCurrentPosition, getDuration should
mention that it also returns the duration of the current ad.

And, also similar to getContentBufferedDuration and getContentPosition, a
new method getContentDuration simplifies querying the content duration while
playing an ad.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209914696"
erdemguven,2018-08-23 10:19:30,https://api.github.com/repos/google/ExoPlayer/git/commits/3f70454cc2fdd80de30a40f55534322e94500092,3f70454cc2fdd80de30a40f55534322e94500092,"Fix controller ui toggling when using SphericalSurfaceView

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209909845"
tonihei,2018-08-23 09:00:37,https://api.github.com/repos/google/ExoPlayer/git/commits/74e2384fb6e129e273f955616ad31aa127f505d4,74e2384fb6e129e273f955616ad31aa127f505d4,"Add response headers to LoadEventInfo.

The response headers of the last load are available from the loading source
when creating media source events and can be easily forwarded.

Issue:#4361
Issue:#4615

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209900693"
tonihei,2018-08-22 15:51:52,https://api.github.com/repos/google/ExoPlayer/git/commits/4bf5e4991c0afce1fe099b60da2be85302a97055,4bf5e4991c0afce1fe099b60da2be85302a97055,"Improve IntDef javadoc.

The doc can be improved by enumerating and linking all possible values from
the interface doc.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209772309"
erdemguven,2018-08-22 14:29:16,https://api.github.com/repos/google/ExoPlayer/git/commits/14c7c2995c612e011822cdf0cca0f85b637d6568,14c7c2995c612e011822cdf0cca0f85b637d6568,"Add android.permission.FOREGROUND_SERVICE

Apps targeting P or later now must request this permission in order to
use foreground services.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209762160"
erdemguven,2018-08-22 14:07:40,https://api.github.com/repos/google/ExoPlayer/git/commits/509be44fe86f6f686d6aeb6645b1bae303ceabef,509be44fe86f6f686d6aeb6645b1bae303ceabef,"Ignore cache span rename error

This happens rarely and SimpleCache can continue fine.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209759996"
ojw28,2018-08-22 13:53:11,https://api.github.com/repos/google/ExoPlayer/git/commits/9f0303b0797bf9bbd403c25f85a3713dc38ef4b3,9f0303b0797bf9bbd403c25f85a3713dc38ef4b3,"Fix a bunch of misc analysis warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209758330"
ojw28,2018-08-22 13:51:42,https://api.github.com/repos/google/ExoPlayer/git/commits/9ccbb5bd6d7825021668a41fe1845ebcc0170cf6,9ccbb5bd6d7825021668a41fe1845ebcc0170cf6,"Add some missing Nullable annotations

Also remove NonNull, since we assume NonNull by default. Except
where explicitly overriding a method with NonNull annotated args,
in which case we're still expected to use it.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209758204"
ojw28,2018-08-22 13:43:30,https://api.github.com/repos/google/ExoPlayer/git/commits/e2ebb78b6345ae7e2095284880373f56fbc40237,e2ebb78b6345ae7e2095284880373f56fbc40237,"Don't apply dependency check in non-app modules

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209757391"
erdemguven,2018-08-22 13:08:55,https://api.github.com/repos/google/ExoPlayer/git/commits/02a8964fe286133bc002b7145c5dd54caab13ffe,02a8964fe286133bc002b7145c5dd54caab13ffe,"Support VR180 videos

If available parse and use spherical metadata:
https://github.com/google/spatial-media/blob/master/docs/spherical-video-v2-rfc.md

RELNOTES=true

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209754080"
ojw28,2018-08-22 12:52:15,https://api.github.com/repos/google/ExoPlayer/git/commits/2b8938533ff766dd58d9a39944b8cb551f1919a8,2b8938533ff766dd58d9a39944b8cb551f1919a8,"Put all DASH gts URLs in the same place

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209752603"
andrewlewis,2018-08-22 12:48:27,https://api.github.com/repos/google/ExoPlayer/git/commits/38ea53fcdcefced0b17d06278d7cbea94d5d00cb,38ea53fcdcefced0b17d06278d7cbea94d5d00cb,"Revert discarding empty ad breaks

The previous change was too aggressive as it would clear future ad breaks.

Still clear the pending content position so the real content position is
reported after an empty ad break.

Issue: #4681
Issue: #4622

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209752306"
tonihei,2018-08-22 10:55:24,https://api.github.com/repos/google/ExoPlayer/git/commits/bf43cca302153e1920198fd3f4986af81f5a072f,bf43cca302153e1920198fd3f4986af81f5a072f,"Fix flaky ExoPlayerTest tests.

Some tests were flaky because of the PlayUntilPosition action which called
player.setPlayWhenReady from the wrong thread. Also fixed some other misc
flakiness.

ExoPlayerTest seems to be non-flaky now (tested with 10000 runs).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209743076"
AquilesCanta,2018-08-22 10:41:18,https://api.github.com/repos/google/ExoPlayer/git/commits/8927993b0315887914c2b20101bebc8ca7614713,8927993b0315887914c2b20101bebc8ca7614713,"Prevent a Demo app NPE on Android TV

The options menu is not available on Android TV, which triggers a
null pointer exception whenever a sample is chosen.

This CL is a temporary fix until we rework the UI to not use
an options menu.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209742076"
AquilesCanta,2018-08-22 10:39:57,https://api.github.com/repos/google/ExoPlayer/git/commits/afebd60ee48f7b22775f0541b8f5c34ab5301c47,afebd60ee48f7b22775f0541b8f5c34ab5301c47,"Do not seek to the start of live Transport Streams after preparation

Issue:#4666

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209742008"
ojw28,2018-08-21 12:40:31,https://api.github.com/repos/google/ExoPlayer/git/commits/bcc69efc7c508de0905f909816fa05e8bc8fb819,bcc69efc7c508de0905f909816fa05e8bc8fb819,"Remove deprecated SimpleExoPlayer constructor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209580625"
tonihei,2018-08-20 23:36:25,https://api.github.com/repos/google/ExoPlayer/git/commits/56aecf66147cb3757dc7efd6b0fc77e5abc95fa8,56aecf66147cb3757dc7efd6b0fc77e5abc95fa8,"Make HLS and SS chunk iterators private.

They don't need to be accessed publicly and are can be moved into the
respective chunk sources. This is the same structure used for Dash.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209507217"
tonihei,2018-08-20 16:24:58,https://api.github.com/repos/google/ExoPlayer/git/commits/d51b98dd1f6290504b4be9d86d71e70ebe217513,d51b98dd1f6290504b4be9d86d71e70ebe217513,"Replace period index with uid in MediaPeriodId.

The MediaPeriodId with index is only properly defined together with a
timeline containing the index. Changing it to the period uid allows to use
the MediaPeriodId independent of the corresponding timeline.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209430257"
AquilesCanta,2018-08-20 14:55:19,https://api.github.com/repos/google/ExoPlayer/git/commits/2cd7d7102baafc2f08d51e095050860904163ddc,2cd7d7102baafc2f08d51e095050860904163ddc,"Add DummyExtractorOutput

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209417004"
andrewlewis,2018-08-20 14:32:32,https://api.github.com/repos/google/ExoPlayer/git/commits/e56a9d1bb5384c33a6136b369c98d38b9f997722,e56a9d1bb5384c33a6136b369c98d38b9f997722,"Add missing API level checks in EnumerateDecodersTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209414373"
andrewlewis,2018-08-20 14:13:26,https://api.github.com/repos/google/ExoPlayer/git/commits/5c2dd9ca42839d36430f0868c5d297d0a91f2e1e,5c2dd9ca42839d36430f0868c5d297d0a91f2e1e,"Move all tests to JUnit 4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209412403"
ojw28,2018-08-20 11:28:11,https://api.github.com/repos/google/ExoPlayer/git/commits/05dcf502e55e94d4288628e40d0b69bea6bab6d3,05dcf502e55e94d4288628e40d0b69bea6bab6d3,"Add missing cases to IntDef switch + fix default locale usage

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209396260"
AquilesCanta,2018-08-20 10:17:29,https://api.github.com/repos/google/ExoPlayer/git/commits/f64ec43acd403c2d36b98f3255005a387696082e,f64ec43acd403c2d36b98f3255005a387696082e,"Remove usage of deprecated method from the Demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209390036"
erdemguven,2018-08-17 19:57:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b58f6940ebdfd966d6679beb2d9c985ce473fd7d,b58f6940ebdfd966d6679beb2d9c985ce473fd7d,"Add VideoFrameMetadataListener

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209193233"
ojw28,2018-08-17 16:49:03,https://api.github.com/repos/google/ExoPlayer/git/commits/bd8a956d53b4fa0c12954748c31939f7764f85fe,bd8a956d53b4fa0c12954748c31939f7764f85fe,"Use lamdas everywhere

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209162373"
ojw28,2018-08-17 15:26:41,https://api.github.com/repos/google/ExoPlayer/git/commits/0831f6cab36d8607fa63a6dcac5a17abead75c90,0831f6cab36d8607fa63a6dcac5a17abead75c90,"Remove deprecated usage of MediaSession APIs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209152304"
ojw28,2018-08-17 21:05:50,https://api.github.com/repos/google/ExoPlayer/git/commits/09d1e3e35d98fd02c31391ac1c891f0c73e76375,09d1e3e35d98fd02c31391ac1c891f0c73e76375,"Merge pull request #4675 from google/dev-v2-r2.8.4

r2.8.4"
ojw28,2018-08-17 12:06:54,https://api.github.com/repos/google/ExoPlayer/git/commits/37af6ac03cdcc2785db0d63e0635ed990f1cbf4b,37af6ac03cdcc2785db0d63e0635ed990f1cbf4b,"Bump version to 2.8.4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209134753"
ojw28,2018-08-17 12:06:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b34c46415dc4067fa50ff94f7ce104ff0d90c123,b34c46415dc4067fa50ff94f7ce104ff0d90c123,"Bump version to 2.8.4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209134753"
andrewlewis,2018-08-09 15:42:00,https://api.github.com/repos/google/ExoPlayer/git/commits/e7bbdbf59d23c11547970a75d91089784231df05,e7bbdbf59d23c11547970a75d91089784231df05,"Enable IMA SDK debug mode if flag is set

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208054150"
andrewlewis,2018-08-09 15:59:17,https://api.github.com/repos/google/ExoPlayer/git/commits/5c118f974151229da3a9b739da28a3386fd79166,5c118f974151229da3a9b739da28a3386fd79166,"Release ads loader on new intent in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208056265"
andrewlewis,2018-08-09 15:55:36,https://api.github.com/repos/google/ExoPlayer/git/commits/e9e1c08cd262c162ae0d134b4a10c13c953706cf,e9e1c08cd262c162ae0d134b4a10c13c953706cf,"Improve handling of consecutive empty ad groups

Issue: #4030
Issue: #4280

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208055792"
marcbaechinger,2018-08-13 19:45:26,https://api.github.com/repos/google/ExoPlayer/git/commits/7572461115ed2dbd81793007df2219f49cfb5093,7572461115ed2dbd81793007df2219f49cfb5093,"adjust timestamps for cea608 and emsg in FMP4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208526775"
ojw28,2018-08-16 12:12:32,https://api.github.com/repos/google/ExoPlayer/git/commits/4662e586cd62eea85b9fd9ce977d845e37850778,4662e586cd62eea85b9fd9ce977d845e37850778,"Add more information to unexpected assertion failure

Issue: #4532

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208968252"
andrewlewis,2018-08-17 07:56:09,https://api.github.com/repos/google/ExoPlayer/git/commits/d05d2fcea90d7e9e29900eb561e56b0fb197b72c,d05d2fcea90d7e9e29900eb561e56b0fb197b72c,"Support seamless adaptation of xHE-AAC audio streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=209113673"
AquilesCanta,2018-08-16 16:42:45,https://api.github.com/repos/google/ExoPlayer/git/commits/4530944ed7e689727aab9efc87f481aa5867b55e,4530944ed7e689727aab9efc87f481aa5867b55e,"Rework HlsPlaylist attribute inheritance

The reason for the change is that variable substititution requires
master playlist variable definitions at the moment of parsing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208997963"
ojw28,2018-08-16 16:07:53,https://api.github.com/repos/google/ExoPlayer/git/commits/7a34869f9ad27dc8f7e2ddcf62f882bae8e5ffb4,7a34869f9ad27dc8f7e2ddcf62f882bae8e5ffb4,"Fix seeking in progressive live streams

Issue: https://github.com/google/ExoPlayer/issues/4493

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208992790"
ojw28,2018-08-16 16:02:08,https://api.github.com/repos/google/ExoPlayer/git/commits/32bd69d4b273869056f384fa81e0c685d38a80ce,32bd69d4b273869056f384fa81e0c685d38a80ce,Cleanup recent merged pull requests
ojw28,2018-08-16 15:58:39,https://api.github.com/repos/google/ExoPlayer/git/commits/071155d219b2032046acefc66f7a49c24690a8c5,071155d219b2032046acefc66f7a49c24690a8c5,Merge branch 'mitrejcevski-fix/vectorArtWork' into dev-v2
ojw28,2018-08-16 15:58:31,https://api.github.com/repos/google/ExoPlayer/git/commits/94fa4d99896c984a1c95ebde64f6e09e02668ff5,94fa4d99896c984a1c95ebde64f6e09e02668ff5,Merge branch 'fix/vectorArtWork' of https://github.com/mitrejcevski/ExoPlayer into dev-v2
ojw28,2018-08-16 15:45:47,https://api.github.com/repos/google/ExoPlayer/git/commits/52b6b3b8e073fe2459bc8e2402b3f566bf285e70,52b6b3b8e073fe2459bc8e2402b3f566bf285e70,"Merge pull request #4564 from BrainCrumbz/feat/playlist-remove-range

feat(playlist): remove MediaSource range"
ojw28,2018-08-16 15:45:36,https://api.github.com/repos/google/ExoPlayer/git/commits/d06b01c2205006ca82601720a40b3213d76445d3,d06b01c2205006ca82601720a40b3213d76445d3,"Merge pull request #4602 from gpinigin/webvtt-extractor-public

WebvttExtractor: make public to allow create custom HlsExtractorFactory outside of library"
ojw28,2018-08-16 15:45:25,https://api.github.com/repos/google/ExoPlayer/git/commits/4d931b9cadb41e7ef49f57d59fbda2c19014b536,4d931b9cadb41e7ef49f57d59fbda2c19014b536,"Merge pull request #4585 from szaboa/feature/4304_buffering_view_option

#4304 - Add option to show buffering view when setPlayWhenReady is false"
ojw28,2018-08-16 14:01:41,https://api.github.com/repos/google/ExoPlayer/git/commits/ab72dd44edee2ab89eb4548caa726efb971a7a44,ab72dd44edee2ab89eb4548caa726efb971a7a44,"Move decoder and ABR preferences to overflow menu

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208977806"
ojw28,2018-08-16 12:12:32,https://api.github.com/repos/google/ExoPlayer/git/commits/94c7fbbc243402f5c940f2ce65f01b7bcdb51401,94c7fbbc243402f5c940f2ce65f01b7bcdb51401,"Add more information to unexpected assertion failure

Issue: #4532

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208968252"
andrewlewis,2018-08-15 10:25:40,https://api.github.com/repos/google/ExoPlayer/git/commits/80f5b7e7b2743e6b51b1f9b2b2d4343c7f57cbeb,80f5b7e7b2743e6b51b1f9b2b2d4343c7f57cbeb,"Check CodecProfileLevels for audio decoders

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208796064"
andrewlewis,2018-08-14 15:25:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e7ef75342cf4ec437e0d4210ec1476a60c1eb375,e7ef75342cf4ec437e0d4210ec1476a60c1eb375,"Scale up initial video decoder maximum input size

When playing a playlist where the exact maximum input size is known from the
container for each item, it may be necessary to recreate the decoder to increase
its maximum input buffer size at the point of transitioning from one item to the
next, which can make transitions non-seamless.

Scale up the initial video decoder maximum input size so playlist item
transitions with small increases in maximum sample size don't require
reinitialization.

Issue: #4510

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208650244"
AquilesCanta,2018-08-14 10:27:38,https://api.github.com/repos/google/ExoPlayer/git/commits/c5bc2d5f804aae283838d1db6d14065958b5f152,c5bc2d5f804aae283838d1db6d14065958b5f152,"Add support for reporting AudioCapabilities changes on custom threads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208622197"
andrewlewis,2018-08-14 08:45:25,https://api.github.com/repos/google/ExoPlayer/git/commits/8854aa415fbc39def3dfbd9c97d3a25812305999,8854aa415fbc39def3dfbd9c97d3a25812305999,"Add support for setting auxiliary audio effects

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208611493"
marcbaechinger,2018-08-13 19:45:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c4024e17f65e97c678bfb534d2c090e7ff167986,c4024e17f65e97c678bfb534d2c090e7ff167986,"adjust timestamps for cea608 and emsg in FMP4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208526775"
andrewlewis,2018-08-13 12:50:58,https://api.github.com/repos/google/ExoPlayer/git/commits/32035e1bf38cba4474373504a5e5b549bb35c50d,32035e1bf38cba4474373504a5e5b549bb35c50d,"Fix NPE in ExtractorMediaPeriod

Also turn on nullity checks for ExtractorMediaPeriod.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208467644"
ojw28,2018-08-13 18:56:47,https://api.github.com/repos/google/ExoPlayer/git/commits/242bf0b99190540f531ff5e0c8c044cda356c8bf,242bf0b99190540f531ff5e0c8c044cda356c8bf,Merge branch 'fix/vectorArtWork' of https://github.com/mitrejcevski/ExoPlayer into mitrejcevski-fix/vectorArtWork
andrewlewis,2018-08-10 17:33:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1c09af02f7888a926fe719ae618ba4b99803366f,1c09af02f7888a926fe719ae618ba4b99803366f,"Fix handling of text codecs strings in DashManifestParser

Also fix an NPE in FfmpegAudioRenderer if sampleMimeType wasn't set.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208230947"
andrewlewis,2018-08-10 14:45:34,https://api.github.com/repos/google/ExoPlayer/git/commits/9d14a3b31bbfdc7b23b7c89337778ef6b1821010,9d14a3b31bbfdc7b23b7c89337778ef6b1821010,"Remove unneeded null check

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208208099"
andrewlewis,2018-08-10 14:12:30,https://api.github.com/repos/google/ExoPlayer/git/commits/5f75d6ea139377317b6ef726fc5476e32f83048e,5f75d6ea139377317b6ef726fc5476e32f83048e,"Target API 28

Apps targeting API 28 by default do not grant permission for cleartext traffic,
so update the demo app to show a warning if loading an HTTP URI will fail. See
https://developer.android.com/about/versions/pie/android-9.0-changes-28 for
information on behavior changes in API 28.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208204937"
ojw28,2018-08-10 12:24:30,https://api.github.com/repos/google/ExoPlayer/git/commits/bac597cb076e79ed71cf4fe38dc35749c3a2074a,bac597cb076e79ed71cf4fe38dc35749c3a2074a,"Update dependencies + misc fixes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208195761"
erdemguven,2018-08-10 08:34:20,https://api.github.com/repos/google/ExoPlayer/git/commits/2ed42409a71bf9291376a182866b6800b9e8a8c6,2ed42409a71bf9291376a182866b6800b9e8a8c6,"Add missing fields to Format hashcode calculation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208176661"
AquilesCanta,2018-08-09 19:40:23,https://api.github.com/repos/google/ExoPlayer/git/commits/d399c00f9e49be9e74f6c74321692e03816da13f,d399c00f9e49be9e74f6c74321692e03816da13f,"Add support for multiple alternative EXT-X-KEY in HLS

Also add support for parsing PlayReady DRM information

Issue:#4180

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208094290"
andrewlewis,2018-08-09 17:59:50,https://api.github.com/repos/google/ExoPlayer/git/commits/5b3b4e64f92eb36f04e5c34b746b4f79b3b6e5b0,5b3b4e64f92eb36f04e5c34b746b4f79b3b6e5b0,"Revert MediaCodecSelector API change

Future changes for checking codec capabilities will go in the renderer rather
than in the codec selector, so the codec selector only needs a MIME type as
before.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208076716"
andrewlewis,2018-08-09 15:59:17,https://api.github.com/repos/google/ExoPlayer/git/commits/93f591be3e355d23e2c3e116bb5bee4cddcd096c,93f591be3e355d23e2c3e116bb5bee4cddcd096c,"Release ads loader on new intent in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208056265"
andrewlewis,2018-08-09 15:55:36,https://api.github.com/repos/google/ExoPlayer/git/commits/5a8af74b4b15edb7a2a64acc718b5e3927641d38,5a8af74b4b15edb7a2a64acc718b5e3927641d38,"Improve handling of consecutive empty ad groups

Issue: #4030
Issue: #4280

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208055792"
andrewlewis,2018-08-09 15:42:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4d6d7903e01455a3b49b7f317b913f718b027719,4d6d7903e01455a3b49b7f317b913f718b027719,"Enable IMA SDK debug mode if flag is set

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208054150"
nic0lette,2018-08-09 14:33:04,https://api.github.com/repos/google/ExoPlayer/git/commits/9db0dbc0e9ffb83fd4dcb2ebfa9d77f935834f57,9db0dbc0e9ffb83fd4dcb2ebfa9d77f935834f57,"Allow SimpleExoPlayer to handle audio focus

Add automatic audio focus handling to SimpleExoPlayer. Audio focus
handling is an opt-in feature that can be requested by passing
the system's AudioManager and an AudioFocusConfiguration to
SimpleExoPlayer.setAudioFocusConfiguration.

When audio focus is being managed by SimpleExoPlayer, the player
will transparently handle pausing playback during
AUDIOFOCUS_LOSS_TRANSIENT, as well as lowering playback volume
during AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208045732"
AquilesCanta,2018-08-09 10:39:33,https://api.github.com/repos/google/ExoPlayer/git/commits/c1998da44e5938d7b69e87057ee54bddde126439,c1998da44e5938d7b69e87057ee54bddde126439,"Fix missing error handling durations in HLS

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208023954"
AquilesCanta,2018-08-09 09:51:04,https://api.github.com/repos/google/ExoPlayer/git/commits/d5c7bff643262386df8e6a38deb7573e835df64c,d5c7bff643262386df8e6a38deb7573e835df64c,"Use LoadErrorHandlingPolicy in SsMediaSource and DashMediaSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208020030"
ojw28,2018-08-09 09:29:53,https://api.github.com/repos/google/ExoPlayer/git/commits/4ebc455c09fdc437266e1cd09a5ec7cc7ad100dc,4ebc455c09fdc437266e1cd09a5ec7cc7ad100dc,"Fix ldpi fullscreen icons to be the correct size

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208017966"
erdemguven,2018-08-09 07:34:55,https://api.github.com/repos/google/ExoPlayer/git/commits/fc9c8516018214c000f34f55d7c7d5399676ce2b,fc9c8516018214c000f34f55d7c7d5399676ce2b,"Fix media.exolist.json format

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=208006056"
erdemguven,2018-08-08 18:29:31,https://api.github.com/repos/google/ExoPlayer/git/commits/1f89903bbb3e2ec130fec8dcd21ac0ff559f7167,1f89903bbb3e2ec130fec8dcd21ac0ff559f7167,"Minor javadoc fix

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207918525"
andrewlewis,2018-08-08 14:34:16,https://api.github.com/repos/google/ExoPlayer/git/commits/9eff531c0860e464d6e4b42f686c00f7ba730836,9eff531c0860e464d6e4b42f686c00f7ba730836,"Use only HTTPS for external demo app media

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207881679"
ojw28,2018-08-08 13:23:17,https://api.github.com/repos/google/ExoPlayer/git/commits/63bfa3d4131f004eb51ea30fffe87f7f183df2a4,63bfa3d4131f004eb51ea30fffe87f7f183df2a4,"Use gradle dependencies for Cronet extension

This also allows us to distribute the extension via jCenter

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207874626"
erdemguven,2018-08-08 09:58:32,https://api.github.com/repos/google/ExoPlayer/git/commits/eda408dc09d4168e87e133adbaf2588e18aa5144,eda408dc09d4168e87e133adbaf2588e18aa5144,"Move inflate method to Util class

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207857927"
andrewlewis,2018-08-08 09:08:58,https://api.github.com/repos/google/ExoPlayer/git/commits/a3c08465eb83f7bd5fe18e6108e86b12385b1fe0,a3c08465eb83f7bd5fe18e6108e86b12385b1fe0,"Fix typos in release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207852110"
ojw28,2018-08-07 18:06:49,https://api.github.com/repos/google/ExoPlayer/git/commits/95bc60798eac1931d9706c0a7f98833395085b67,95bc60798eac1931d9706c0a7f98833395085b67,Fix silence skipping test
ojw28,2018-08-07 15:02:29,https://api.github.com/repos/google/ExoPlayer/git/commits/ca473c86c7a357d9686eeb9dc761b6f8a9552654,ca473c86c7a357d9686eeb9dc761b6f8a9552654,"Simplify DefaultDataSourceChain to use addTransferListener

Also locally cache length in BaseDataSource and use zero cost
castNonNull to make sure there's no performance regression.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207715734"
ojw28,2018-08-07 14:42:34,https://api.github.com/repos/google/ExoPlayer/git/commits/af507efb2adbeecde3c58120ae75183594f7ad6a,af507efb2adbeecde3c58120ae75183594f7ad6a,"Deprecate/remove DataSource constructors that accept listeners

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207713478"
andrewlewis,2018-08-07 13:47:32,https://api.github.com/repos/google/ExoPlayer/git/commits/829f55e9cd0b24430ccf3864b06040aba6416b72,829f55e9cd0b24430ccf3864b06040aba6416b72,"Make AudioCapabilities constructor public

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207707035"
ojw28,2018-08-06 17:26:16,https://api.github.com/repos/google/ExoPlayer/git/commits/cab1d02c0c17ddc0ba99eb3d40f7b81a51f85b80,cab1d02c0c17ddc0ba99eb3d40f7b81a51f85b80,"Allow setting constant bitrate flags in DefaultExtractorsFactory

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207566605"
ojw28,2018-08-07 14:50:14,https://api.github.com/repos/google/ExoPlayer/git/commits/8cbcfd669db0595ad8c84425b7a99f62d55e3569,8cbcfd669db0595ad8c84425b7a99f62d55e3569,"Merge pull request #4556 from google/dev-v2-r2.8.3

r2.8.3"
ojw28,2018-08-07 14:47:57,https://api.github.com/repos/google/ExoPlayer/git/commits/563f13a83260f268f10e55e4657ea57b8426da47,563f13a83260f268f10e55e4657ea57b8426da47,Adjust trim silence parameters to make it less aggressive.
ojw28,2018-08-06 16:21:57,https://api.github.com/repos/google/ExoPlayer/git/commits/4558eb4e99b399defddd44a677a40e899a395218,4558eb4e99b399defddd44a677a40e899a395218,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207556225"
ojw28,2018-08-06 15:39:16,https://api.github.com/repos/google/ExoPlayer/git/commits/ecee873b6415533162f542dda504531c18986b32,ecee873b6415533162f542dda504531c18986b32,"Mini cleanup of improved seeking support for release

* Make dedicated section in RELEASENOTES
* Clean up AMR FACTORY

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207550281"
ojw28,2018-08-06 15:03:55,https://api.github.com/repos/google/ExoPlayer/git/commits/dc8dc0e3921e0c757f929e8ae25cd09922da4ad0,dc8dc0e3921e0c757f929e8ae25cd09922da4ad0,"Declare all InternalState values in switch statement

Lint likes all constants for an IntDef to be declared explicitly
in switch statements.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207545682"
ojw28,2018-08-06 15:02:27,https://api.github.com/repos/google/ExoPlayer/git/commits/44101fc00b270096c44acfa2ea5135874d6032a8,44101fc00b270096c44acfa2ea5135874d6032a8,"Use shifting for flag constants

Lint likes flags to be declared in this way, for safety, apparently

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207545382"
ojw28,2018-08-06 14:35:53,https://api.github.com/repos/google/ExoPlayer/git/commits/dbaf6e15f73e1d16f1d418a1841a48800c4f27bc,dbaf6e15f73e1d16f1d418a1841a48800c4f27bc,"Fix AOSP headers to use (C) rather than (c)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207542583"
botaydotcom,2018-08-03 15:20:21,https://api.github.com/repos/google/ExoPlayer/git/commits/a86b6048a5836ed0daf98eb6ea0ac8150d85371e,a86b6048a5836ed0daf98eb6ea0ac8150d85371e,"Add MetadataRetriever demo.

Add a demo app that shows case how to use APIs from MetadataRetriever to
retriever track groups and frames from some media.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207269221"
ojw28,2018-08-06 13:52:46,https://api.github.com/repos/google/ExoPlayer/git/commits/74ac722b55c7961fe175077edfa7c319a963add3,74ac722b55c7961fe175077edfa7c319a963add3,Fix fullscreen icons to be the correct size
ojw28,2018-08-06 12:58:29,https://api.github.com/repos/google/ExoPlayer/git/commits/89e2a61c80e632d5d3380b541e649b657e392e3e,89e2a61c80e632d5d3380b541e649b657e392e3e,"Update release notes for release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207532902"
botaydotcom,2018-08-06 12:23:10,https://api.github.com/repos/google/ExoPlayer/git/commits/077f2c3036f417d641f8d4181aeeef97818096b2,077f2c3036f417d641f8d4181aeeef97818096b2,"Supports seeking for TS Streams.

This CL adds support for seeking witin TS streams by using binary search. For
any seek timestamp, it tries to find the location in the stream where PCR
timestamp is close to the target timestamp, and return this position as the
seek position.

Github: #966.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207529906"
ojw28,2018-08-06 12:34:53,https://api.github.com/repos/google/ExoPlayer/git/commits/27f05c412d8b4fc73708bd59d9661cb7f6b110d1,27f05c412d8b4fc73708bd59d9661cb7f6b110d1,Remove Java 8 usage from release
andrewlewis,2018-08-03 10:25:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4cd57e0963400e3d555912c7599be9d9dfac3f87,4cd57e0963400e3d555912c7599be9d9dfac3f87,"Fix DefaultTimeBar accessibility class name

See https://support.google.com/accessibility/android/answer/7661305.

Also fix/suppress nullability warnings.

Issue: #4611

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207245115"
ojw28,2018-08-06 10:06:27,https://api.github.com/repos/google/ExoPlayer/git/commits/e92d65533f8720793d186b81c4c50aedb7411395,e92d65533f8720793d186b81c4c50aedb7411395,"Fix freezing playing multi-period DASH with EventStreams

EventSampleStream.readData required eventStreamUpdatable to be
false for END_OF_STREAM to be returned, but it was only being
set to false when the manifest became static. This change also
sets it to false if the period is not the last one in a dynamic
manifest. It also renames it the parameter to appendable, since
that's what it really represents. Events may still be removed
from the start of the EventStream as the period starts moving
out of the live window.

Issue: #4492

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207517265"
ojw28,2018-08-06 12:01:42,https://api.github.com/repos/google/ExoPlayer/git/commits/5ce9ce56f3984e58fae1a8262fa094ab8fb097d1,5ce9ce56f3984e58fae1a8262fa094ab8fb097d1,"Minimal fix for non-default cenc name prefixes in DASH manifests

For now, just allow any prefix (and don't check the namespace).
Checking the namespace requires turning on the XmlPullParser
namespace awareness feature, but this can only be done before
parsing, and I think requires us to specify the namespace when
querying other attributes. This would also risk breaking services
who currently don't set namespaces correctly.

It's possible we'll run into similar issues with the few other
tags (e.g. mspr:pro). We should revisit enabling namespace
awareness if/when we see this.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207526883"
ojw28,2018-08-06 12:01:42,https://api.github.com/repos/google/ExoPlayer/git/commits/7fcd6b6d65ea37f647cd53b2360db3e2ec181ab5,7fcd6b6d65ea37f647cd53b2360db3e2ec181ab5,"Minimal fix for non-default cenc name prefixes in DASH manifests

For now, just allow any prefix (and don't check the namespace).
Checking the namespace requires turning on the XmlPullParser
namespace awareness feature, but this can only be done before
parsing, and I think requires us to specify the namespace when
querying other attributes. This would also risk breaking services
who currently don't set namespaces correctly.

It's possible we'll run into similar issues with the few other
tags (e.g. mspr:pro). We should revisit enabling namespace
awareness if/when we see this.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207526883"
AquilesCanta,2018-08-06 11:50:41,https://api.github.com/repos/google/ExoPlayer/git/commits/18d2a2ea2ad4e82961325735e665ba938572d3b6,18d2a2ea2ad4e82961325735e665ba938572d3b6,"Use LoadErrorHandlingPolicy in SingleSampleMediaSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207525746"
erdemguven,2018-08-06 11:48:37,https://api.github.com/repos/google/ExoPlayer/git/commits/bf6b6470887b483dcd46f2131dcbd872984c9d62,bf6b6470887b483dcd46f2131dcbd872984c9d62,"Rename spherical/Utils class to GlUtil

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207525621"
ojw28,2018-08-06 10:06:27,https://api.github.com/repos/google/ExoPlayer/git/commits/454b106921524fd8746aeb106ade6c4a8f7178a8,454b106921524fd8746aeb106ade6c4a8f7178a8,"Fix freezing playing multi-period DASH with EventStreams

EventSampleStream.readData required eventStreamUpdatable to be
false for END_OF_STREAM to be returned, but it was only being
set to false when the manifest became static. This change also
sets it to false if the period is not the last one in a dynamic
manifest. It also renames it the parameter to appendable, since
that's what it really represents. Events may still be removed
from the start of the EventStream as the period starts moving
out of the live window.

Issue: #4492

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207517265"
andrewlewis,2018-08-06 09:48:21,https://api.github.com/repos/google/ExoPlayer/git/commits/27aa39e8c6e991ca29e3578f222037be23751077,27aa39e8c6e991ca29e3578f222037be23751077,"Upgrade IMA dependency

The IMA SDK now handles focusing the skip button so remove the workaround.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207515573"
andrewlewis,2018-08-06 09:40:30,https://api.github.com/repos/google/ExoPlayer/git/commits/11bf7ae03d2c57c5123a0b01ffbeb120910edb08,11bf7ae03d2c57c5123a0b01ffbeb120910edb08,"Add GTS test that enumerates decoders

Decoder capabilities are logged via MetricsLogger.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207514564"
erdemguven,2018-08-06 09:05:37,https://api.github.com/repos/google/ExoPlayer/git/commits/718b76898f26cc89ce9cb156655771a15f12c75c,718b76898f26cc89ce9cb156655771a15f12c75c,"Remove demo-retriever from settings.gradle

It isn't ready to be open sourced.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207510151"
botaydotcom,2018-08-06 09:02:48,https://api.github.com/repos/google/ExoPlayer/git/commits/c3d8ad2488496999970d559c758d595410a62cbe,c3d8ad2488496999970d559c758d595410a62cbe,"Add supports for Seeking in ADTS format using a constant bitrate seekmap.

- Use ConstantBitrateSeeker to implement seeking for ADTS format. Since most
ADTS streams are VBR, we use the average bitrate of the first 1000 frames as
the average bit rate.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207509651"
andrewlewis,2018-08-03 16:39:41,https://api.github.com/repos/google/ExoPlayer/git/commits/f3ad87d6532a5acfde6c63274068b29be8864e62,f3ad87d6532a5acfde6c63274068b29be8864e62,"Update MP4RA URL

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207278934"
botaydotcom,2018-08-03 16:24:34,https://api.github.com/repos/google/ExoPlayer/git/commits/0cdeb555d1fd6df7bccd3316944ef3312185ffc8,0cdeb555d1fd6df7bccd3316944ef3312185ffc8,"Use a custom video renderer for MetadataRetrieverImpl.

Currently, MetadataRetrieverImpl uses MediaCodecVideoRenderer to renderering
frames to capture. It suffers from 2 issues:
- MediaCodecVideoRenderer has a lot of logic to time frame release, including
drop frames if late or try to keep up with feeding speed etc... These are not
necessary at all for frame retrieval.
- MediaCodecVideoRenderer always tries to render 1 frame after video surface
update. This may some times lead to the wrong image being rendered for
MetadataRetriever.
This CL replaces this with a custom video renderer, that does not time frame
releases, and only render first frame after position reset / renderer
re-enabling.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207276937"
botaydotcom,2018-08-03 15:20:21,https://api.github.com/repos/google/ExoPlayer/git/commits/b3d52f5d80e20e8cd3b65c8c4feddd154136b22b,b3d52f5d80e20e8cd3b65c8c4feddd154136b22b,"Add MetadataRetriever demo.

Add a demo app that shows case how to use APIs from MetadataRetriever to
retriever track groups and frames from some media.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207269221"
andrewlewis,2018-08-03 10:25:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b3b835676688fb293b5010264e47524277e6fe4b,b3b835676688fb293b5010264e47524277e6fe4b,"Fix DefaultTimeBar accessibility class name

See https://support.google.com/accessibility/android/answer/7661305.

Also fix/suppress nullability warnings.

Issue: #4611

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207245115"
ojw28,2018-08-03 08:36:28,https://api.github.com/repos/google/ExoPlayer/git/commits/4c7fbd67eae039d405ba5c8ba4cf055d8561a5bf,4c7fbd67eae039d405ba5c8ba4cf055d8561a5bf,"Suppress WrongConstant lint error

The error is spurious, and is due to an incorrect annotation in
the framework.

[Internal: b/32137960]

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207234603"
ojw28,2018-08-03 08:35:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f549cf5635fd921402c2aabe54750660e765fd03,f549cf5635fd921402c2aabe54750660e765fd03,"Fix Aes128DataSourceTest portability issue

For background on why doing this works, see below. I don't want to change
how we get our Cipher instance in non-test code, since PKCS7 always works
on Android. It's only when the tests are running on a non-Android host
machine that they can fail. An alternative would be to make it an androidTest,
but androidTests are slow.

------

Background:

""While Java considers PKCS5 and PKCS7 padding to be the ""same"" (and
one should always use the string ""AES/CBC/PKCS5Padding"" because
""AES/CBC/PKCS7Padding"" will cause NoSuchAlgorithmException to be thrown
when initializing an AES block cipher using the Java crypto API), I
consider this a gross misnaming in the Java platform because the pure
technical definitions of these paddings are not the same.""

Ref: https://stackoverflow.com/questions/10193567/java-security-nosuchalgorithmexceptioncannot-find-any-provider-supporting-aes-e

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207234518"
AquilesCanta,2018-08-02 14:30:05,https://api.github.com/repos/google/ExoPlayer/git/commits/a7e9ebcf68001f45fed3b2798f3fd00f972fd969,a7e9ebcf68001f45fed3b2798f3fd00f972fd969,"Build codecs string from SPS data in H.264

Issue:#4555

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207096569"
xian,2018-08-01 23:26:24,https://api.github.com/repos/google/ExoPlayer/git/commits/03b04ef23c4c8db4724bf418373d030958ccb3ef,03b04ef23c4c8db4724bf418373d030958ccb3ef,"[third_party] Avoid saving Robolectric shadow instances; instead, save the real framework object, and get its shadow when needed using Shadows.shadowOf(). Call Android framework methods directly on the framework object instead of its shadow whenever possible.

LSC: []
Additional details: []

Cleanup change automatically generated by javacflume/refactory
Refactoring: //third_party/java_src/robolectric/errorprone:ShadowUsageCheck

Tested:
    TAP --sample for global presubmit queue
    []

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=207014379"
AquilesCanta,2018-08-01 18:41:59,https://api.github.com/repos/google/ExoPlayer/git/commits/cc2a8bb85456d813db0fa290504c5009c68b4508,cc2a8bb85456d813db0fa290504c5009c68b4508,"Fix encryption data extraction when default values should be used

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206963956"
AquilesCanta,2018-08-01 14:40:25,https://api.github.com/repos/google/ExoPlayer/git/commits/d458b90cc7c414acd95f103aab78883984ad1984,d458b90cc7c414acd95f103aab78883984ad1984,"Parameterize load error handling in ExtractorMediaSource

Issue:#2844
Issue:#3370
Issue:#2981

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206927295"
ojw28,2018-08-01 13:42:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d744c979ee78a119b0f3719e5ac08d39ffe62cd2,d744c979ee78a119b0f3719e5ac08d39ffe62cd2,"Update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206921981"
ojw28,2018-08-01 18:58:05,https://api.github.com/repos/google/ExoPlayer/git/commits/180d6ae902754f49a037a349b02c011cc783503e,180d6ae902754f49a037a349b02c011cc783503e,Disable tests that fail on some host machines
ojw28,2018-08-01 18:02:32,https://api.github.com/repos/google/ExoPlayer/git/commits/96c8557e00ec16b4971804d911bafd911fb4b7d6,96c8557e00ec16b4971804d911bafd911fb4b7d6,Release fixes
AquilesCanta,2018-07-31 11:06:22,https://api.github.com/repos/google/ExoPlayer/git/commits/fa1049ec5e7b420c4d5d911711a2b78b29f37155,fa1049ec5e7b420c4d5d911711a2b78b29f37155,"Fix SCTE-35 timestamp adjustment

Issue:#4573

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206737252"
erdemguven,2018-07-26 09:36:23,https://api.github.com/repos/google/ExoPlayer/git/commits/c41f955f0f24f60566610fe1b3705d643c97a3f9,c41f955f0f24f60566610fe1b3705d643c97a3f9,"Disable automatic imports for inner classes

Inner classes generally has generic names and they make sense when they
are considered with the top level class they appear in.

When this setting is disabled, Android Studio inserts import for the top
level class and append the top level class's name before the reference
to the inner class name.

NO_SQ

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206127763"
ojw28,2018-07-25 14:07:53,https://api.github.com/repos/google/ExoPlayer/git/commits/00891f6469a8f23e58209451ae6ae4d0adfd8062,00891f6469a8f23e58209451ae6ae4d0adfd8062,"Don't exclude .idea from MOE input

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205988261"
ojw28,2018-08-01 12:56:04,https://api.github.com/repos/google/ExoPlayer/git/commits/5faa662e438d35066dd4afe77514fdeb6efbf1d1,5faa662e438d35066dd4afe77514fdeb6efbf1d1,"Apply setOutputSurfaceWorkaround to required FireOS devices

Amazon like to use Device.MODEL, so key on that instead for
these workarounds.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206917935"
erdemguven,2018-08-01 11:32:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ed18be4eea1edc7cc23a05d447768373385299f7,ed18be4eea1edc7cc23a05d447768373385299f7,"Add missing Nullable annotation Player.EventListener.onTimelineChanged

Issue: #4593

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206911927"
ojw28,2018-08-01 12:56:04,https://api.github.com/repos/google/ExoPlayer/git/commits/d0d68567251bb4e7e3518716bf78af1854527360,d0d68567251bb4e7e3518716bf78af1854527360,"Apply setOutputSurfaceWorkaround to required FireOS devices

Amazon like to use Device.MODEL, so key on that instead for
these workarounds.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206917935"
botaydotcom,2018-08-01 12:28:29,https://api.github.com/repos/google/ExoPlayer/git/commits/0fbe083d4ec81e4482f8cdbe6cb53f6bc6173ecb,0fbe083d4ec81e4482f8cdbe6cb53f6bc6173ecb,"Return empty track groups and track selections when user seeks to unprepared period

When user seeks to an unprepared period, since there is no period being played, currently the track groups and track selections are still the ones from previous period. This CL changes it so that when such seeking happens, PlaybackInfo's track groups and track selections are changed to empty.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206916109"
erdemguven,2018-08-01 11:32:11,https://api.github.com/repos/google/ExoPlayer/git/commits/45c1e9eef3dac7b04a064b1eb8c6f3a3305bdeae,45c1e9eef3dac7b04a064b1eb8c6f3a3305bdeae,"Add missing Nullable annotation Player.EventListener.onTimelineChanged

Issue: #4593

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206911927"
andrewlewis,2018-08-01 09:19:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5715960304f421feb8dae3671f66a74ff6e40cb6,5715960304f421feb8dae3671f66a74ff6e40cb6,"Add Context to SimpleExoPlayer factory methods

This is needed for implementing (optional) support for audio focus handling in a
later change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206899837"
andrewlewis,2018-08-01 08:04:23,https://api.github.com/repos/google/ExoPlayer/git/commits/429bf4d099b5162ae304c0efd71f585e89939f2f,429bf4d099b5162ae304c0efd71f585e89939f2f,"Expand passthrough channel count workaround to all devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206893078"
botaydotcom,2018-07-31 17:44:34,https://api.github.com/repos/google/ExoPlayer/git/commits/f08ad55892d3fec2da9ebdb7191a087bf5b21877,f08ad55892d3fec2da9ebdb7191a087bf5b21877,"Supports seeking for MPEG PS Streams.

This CL adds support for seeking within PS streams by using binary search. For
any seek timestamp, it tries to find the location in the stream where SCR
timestamp is close to the target timestamp, and return this position as the
seek position.

Github: #4476.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206787691"
botaydotcom,2018-07-31 15:29:15,https://api.github.com/repos/google/ExoPlayer/git/commits/377314a69f233b002e2d00feb9277988abca29b0,377314a69f233b002e2d00feb9277988abca29b0,"Remove unnecessary DefaultKeyStatus, DefaultKeyRequest and DefaultProvisionRequest.

Currently, we have KeyStatus, KeyRequest and ProvisionRequest as interface, so we can use
custom implementation for purpose such as wrapping native objects. However, these interfaces and the corresponding default classes are only used to bundle data, and in all existing implementation (including native code), it's just as efficient to just use the Java default implementation. Therefore we can just get rid of the interfaces, and change
the interfaces into classes with the default implementation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206765389"
andrewlewis,2018-07-31 13:10:35,https://api.github.com/repos/google/ExoPlayer/git/commits/7ead31021976eb9544826b5179cb3d9a8a955e87,7ead31021976eb9544826b5179cb3d9a8a955e87,"Use maximum bitrates for encoded output buffer sizes

There is some risk associated with this change, as audio track buffers come from
shared memory and limits may be device-specific. I've tested these sizes on
Nvidia Shield TV and Nexus Player on various builds. The maximum size allocated
is about 800 KB. We could implement support for retrying creating the audio
track if it fails to initialize, but it seems preferable to avoid the extra
complexity required to do that unless we know it's necessary to work around
device-specific limitations.

Issue: #3803

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206749222"
erdemguven,2018-07-31 12:53:23,https://api.github.com/repos/google/ExoPlayer/git/commits/02e9972630c5df0422d1827044f9b907002d205d,02e9972630c5df0422d1827044f9b907002d205d,"Add 360 video samples to the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206747144"
AquilesCanta,2018-07-31 11:06:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9ec14d1ada60d5db4ddeced0f3fb74e90c75dd74,9ec14d1ada60d5db4ddeced0f3fb74e90c75dd74,"Fix SCTE-35 timestamp adjustment

Issue:#4573

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206737252"
andrewlewis,2018-07-31 10:30:17,https://api.github.com/repos/google/ExoPlayer/git/commits/e2bf474c1e6341b50b4d9a62f058055fd3a4cdfc,e2bf474c1e6341b50b4d9a62f058055fd3a4cdfc,"Extend Nexus Player mono workaround to Oreo

The platform fix was merged into O MR1, not O. Nexus Player has
not received this build.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206734342"
andrewlewis,2018-07-31 09:05:04,https://api.github.com/repos/google/ExoPlayer/git/commits/19d24ac633bdab4acea2345ba162282776b33da3,19d24ac633bdab4acea2345ba162282776b33da3,"Remove extra brackets

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206725219"
andrewlewis,2018-07-31 07:54:38,https://api.github.com/repos/google/ExoPlayer/git/commits/ded2b2eb2afda996ae25180d1eed1d7cbc236ee0,ded2b2eb2afda996ae25180d1eed1d7cbc236ee0,"Allow outputting audio to a WAV file

Add TeeAudioProcessor that doesn't modify the input audio but writes it to an
AudioBufferSink, and WavFileAudioBufferSink for writing audio to a .wav file.

This is intended to be used for diagnostics and debugging.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206717458"
andrewlewis,2018-07-30 14:01:18,https://api.github.com/repos/google/ExoPlayer/git/commits/68add98c239e23d1fb05fc2c70ee3624f5b1004f,68add98c239e23d1fb05fc2c70ee3624f5b1004f,"Fix detection of TrueHD syncframe in MatroskaExtractor

MatroskaExtractor was checking for INDEX_UNSET as the sample count for buffers
not containing syncframes, but actually 0 was returned for these. Theoretically
this could prevent us starting to play a TrueHD stream as we wait until we can
read the sample count from a syncframe before accepting the audio in
DefaultAudioSink, but it seems that rechunking avoided this issue arising in
practice.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206575462"
tonihei,2018-07-27 16:25:27,https://api.github.com/repos/google/ExoPlayer/git/commits/656c2172ddf6feedeb0bf7b012329ad8342b6fa9,656c2172ddf6feedeb0bf7b012329ad8342b6fa9,"Fix event reporting for merging and looping media sources.

The looping media source doesn't convert the media period id to the externally
visible media period id. And the merging media source reports media period
creations multiple times which will break listeners assuming a media period
with a specific id will only be created once.

Also amend the doc for MediaSource.createPeriod to reflect that media periods
created in parallel do not actually have the same id.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206327241"
tonihei,2018-07-27 13:40:40,https://api.github.com/repos/google/ExoPlayer/git/commits/a237ae18100989bcb44216064b04cdf31b409895,a237ae18100989bcb44216064b04cdf31b409895,"Fix period transition with non-zero start position.

Period transitions with non-zero start position happen too early as the
playing period is advanced as soon as the renderer offset is reached not
taking into account that the start position needs to be added to that.

Issue:#4583

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206310328"
andrewlewis,2018-07-27 13:10:51,https://api.github.com/repos/google/ExoPlayer/git/commits/6a2f94ec4ba5d7cdba2e8ca45a52fd5604cc9ca8,6a2f94ec4ba5d7cdba2e8ca45a52fd5604cc9ca8,"Document top-level limitation of AdsMediaSource

Issue: #4591

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206307948"
andrewlewis,2018-07-27 13:10:01,https://api.github.com/repos/google/ExoPlayer/git/commits/0c0c5942ab237b7ded023874144e75a37e72a949,0c0c5942ab237b7ded023874144e75a37e72a949,"Fix incorrect channel configuration for 8 ch pre-M

AudioTrack checks the channel configuration against a mask of allowed channels.
Before Android M the check in getMinBufferSize would always fail for 8 channel
output.

For Android L constants are available to build the required channel
configuration for a conventional 7.1 setup and these constants are part of the
allowed channels mask, so switch to using them.

Before Android L the constants for 7.1 aren't in the allowed channels mask, so
discard channels to give a 5.1 stream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206307892"
erdemguven,2018-07-27 12:27:16,https://api.github.com/repos/google/ExoPlayer/git/commits/30fecb71d26b8871fbaa7ebcf3239c8d032748e3,30fecb71d26b8871fbaa7ebcf3239c8d032748e3,"Fix TouchTrackerTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206304655"
AquilesCanta,2018-07-27 10:56:24,https://api.github.com/repos/google/ExoPlayer/git/commits/4eee4745557b012f40c43bb0ede2b0ea7cfe4c83,4eee4745557b012f40c43bb0ede2b0ea7cfe4c83,"Remove minLoadableRetryCount from HLS components

Remove minLoadableRetryCount from HLS components in favor of
LoadErrorHandlingPolicy#getMinimumLoadableRetryCount.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206298419"
andrewlewis,2018-07-27 10:32:30,https://api.github.com/repos/google/ExoPlayer/git/commits/877837c893ac5569c557d5f3fe4aa0c4371ad90d,877837c893ac5569c557d5f3fe4aa0c4371ad90d,"Add audio/eac3-joc to FFmpeg supported formats

If compiled with eac3, audio/eac3-joc stream 5.1 bed-channels
can be decoded. The stream will be decoded as 2-D rather than
3-D.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206296930"
tonihei,2018-07-27 09:19:53,https://api.github.com/repos/google/ExoPlayer/git/commits/d3c2cb2aa4fc803d9e854b42158e77fe73defc2e,d3c2cb2aa4fc803d9e854b42158e77fe73defc2e,"Update remaining DataSource's with new addTransferListener method.

The new method allows to add TransferListeners after the DataSource
has been created. Most implementations just forward to their wrapped
upstream DataSource. Implementation which directly read data implement
BaseDataSource instead.

Also removes the temporary default no-op implementation in DataSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206289986"
gpinigin,2018-07-31 12:45:30,https://api.github.com/repos/google/ExoPlayer/git/commits/8f624861e1b1dda9a80a6a4fe4bc164bbc747e72,8f624861e1b1dda9a80a6a4fe4bc164bbc747e72,WebvttExtractor: make public to allow create custom HlsExtractorFactory outside of library
szaboa,2018-07-27 10:41:02,https://api.github.com/repos/google/ExoPlayer/git/commits/dbd25d58545afc965b93c6ffd7f6194a76265b25,dbd25d58545afc965b93c6ffd7f6194a76265b25,#4304 - Adjustments after code review
mitrejcevski,2018-07-27 10:03:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5635ca27928d6b21a7b302bbe2368794b4f9150f,5635ca27928d6b21a7b302bbe2368794b4f9150f,Reset aspect ratio
szaboa,2018-07-26 21:49:11,https://api.github.com/repos/google/ExoPlayer/git/commits/1f12f22bb500468750a316cb8657150e94c7f3ae,1f12f22bb500468750a316cb8657150e94c7f3ae,#4304 - Add option to show buffering view when setPlayWhenReady is false
ojw28,2018-07-26 18:06:33,https://api.github.com/repos/google/ExoPlayer/git/commits/3b61a400c5458526ca3821e385206566d39c7aee,3b61a400c5458526ca3821e385206566d39c7aee,Remove stray file
tonihei,2018-07-26 15:11:10,https://api.github.com/repos/google/ExoPlayer/git/commits/133f5f16b81a8fcad6c33776ec8ddd322f0fec9f,133f5f16b81a8fcad6c33776ec8ddd322f0fec9f,"Pass MediaPeriodId to DeferredMediaPeriod when actual period is created.

This helps to distinguish between the MediaPeriodId the deferred media period is being
created with and the MediaPeriodId which is used to create the actual underlying period.

This serves two purposes:
1. The error reporting of ad prepare errors uses the correct media period id (the
   externally visible ad media period id).
2. The transition to using media period uid instead of indices is simplified.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206160463"
tonihei,2018-07-26 14:01:48,https://api.github.com/repos/google/ExoPlayer/git/commits/49ef1f3f8ca4c840ad31a62dd1db695ac8c170e3,49ef1f3f8ca4c840ad31a62dd1db695ac8c170e3,"Fix nullness warnings in Util and Assertions, and provide own castNonNull.

Using our own no-op castNonNull prevents linking into checkerframeworks library.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206152148"
erdemguven,2018-07-26 09:36:23,https://api.github.com/repos/google/ExoPlayer/git/commits/26a0ddcaec3f58069f27d459b2b7d6413162014f,26a0ddcaec3f58069f27d459b2b7d6413162014f,"Disable automatic imports for inner classes

Inner classes generally has generic names and they make sense when they
are considered with the top level class they appear in.

When this setting is disabled, Android Studio inserts import for the top
level class and append the top level class's name before the reference
to the inner class name.

NO_SQ

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206127763"
andrewlewis,2018-07-26 08:16:43,https://api.github.com/repos/google/ExoPlayer/git/commits/217247f113dc6cd88f02acd9a46654a48aa7468c,217247f113dc6cd88f02acd9a46654a48aa7468c,"Remove naming assumption for passthrough decoders

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206119357"
andrewlewis,2018-07-25 18:06:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5da703a588702f381da15cf606f0495d5c1e20e1,5da703a588702f381da15cf606f0495d5c1e20e1,"Fix some nullness warnings in audio classes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206021873"
botaydotcom,2018-07-25 17:17:21,https://api.github.com/repos/google/ExoPlayer/git/commits/d810352f2c225965aa8211868f74f59a6e0d637f,d810352f2c225965aa8211868f74f59a6e0d637f,"Refactor FlacBinarySearchSeeker.

Rewrite FlacBinarySearchSeeker and extract out the core binary search algorithm
into BinarySearchSeeker class so it can be re-used for other formats.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=206012900"
mitrejcevski,2018-07-26 10:26:29,https://api.github.com/repos/google/ExoPlayer/git/commits/72a2b82370bcfafacca3956ae3205751ab8b4f4d,72a2b82370bcfafacca3956ae3205751ab8b4f4d,Suggestions from Code Review
mitrejcevski,2018-07-26 07:50:55,https://api.github.com/repos/google/ExoPlayer/git/commits/46232977f6d037497055660de3804017405544b3,46232977f6d037497055660de3804017405544b3,"Convert defaultArtwork from Bitmap to Drawable

Using bitmaps is still supported, but also this will allow using other types of drawables to be set as artwork."
GiuseppePiscopo,2018-07-25 16:31:14,https://api.github.com/repos/google/ExoPlayer/git/commits/7878bf6a3148d2cdaab8245dd8fbac1754391415,7878bf6a3148d2cdaab8245dd8fbac1754391415,"chore(playlist): reorder message IDs, fix tabbing"
GiuseppePiscopo,2018-07-25 16:30:35,https://api.github.com/repos/google/ExoPlayer/git/commits/cc7f011ecb0b6c40e36e04dadeeed43f1b9efbcc,cc7f011ecb0b6c40e36e04dadeeed43f1b9efbcc,feat(playlist): stick to list.subList API
ojw28,2018-07-25 14:07:53,https://api.github.com/repos/google/ExoPlayer/git/commits/8952ccac320d2062acb5fc6d851134cdf7d3de55,8952ccac320d2062acb5fc6d851134cdf7d3de55,"Don't exclude .idea from MOE input

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205988261"
ojw28,2018-07-25 11:08:18,https://api.github.com/repos/google/ExoPlayer/git/commits/14216ef53b3dd6fd2907b6bd52965526cafbc70d,14216ef53b3dd6fd2907b6bd52965526cafbc70d,"Nullness fixes for emsg and id3 metadata classes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205972857"
tonihei,2018-07-25 11:05:54,https://api.github.com/repos/google/ExoPlayer/git/commits/3d55bc78f7724771994bce33371b4695ad33e4b5,3d55bc78f7724771994bce33371b4695ad33e4b5,"Use country and network based initial bitrate estimate.

This changes the default initial bitrate estimate to be country (group) and
network type specific. The existing overwrite still works as before and new
overwrites for the country or specific network types are provided for
customization.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205972705"
szaboa,2018-07-24 22:29:07,https://api.github.com/repos/google/ExoPlayer/git/commits/ae520a8c2cfac9702f3cc1c87d504faf5232d95f,ae520a8c2cfac9702f3cc1c87d504faf5232d95f,"#4306 - Extract tags from SubRip subtitles, add support for alignment tags based on SSA v4+"
ojw28,2018-07-24 13:47:38,https://api.github.com/repos/google/ExoPlayer/git/commits/a3e3f64b7951117d259945ea90e0207526b35a9c,a3e3f64b7951117d259945ea90e0207526b35a9c,"Add PRO7S to surface switch workaround

Issue: #4468

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205821059"
ojw28,2018-07-24 13:47:38,https://api.github.com/repos/google/ExoPlayer/git/commits/0287fa21f38c497f9829e3ba1d04cdb18eef3066,0287fa21f38c497f9829e3ba1d04cdb18eef3066,"Add PRO7S to surface switch workaround

Issue: #4468

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205821059"
ojw28,2018-07-24 13:01:10,https://api.github.com/repos/google/ExoPlayer/git/commits/340d846d9b12877def389bcfd7c272bc7a104b7d,340d846d9b12877def389bcfd7c272bc7a104b7d,"Remove some files from the nullness blacklist

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205816544"
tonihei,2018-07-24 10:14:15,https://api.github.com/repos/google/ExoPlayer/git/commits/138b222457015bbe416de83c2aef24816c18c0de,138b222457015bbe416de83c2aef24816c18c0de,"Prevent dummy period id in ExoPlayerImplInternal from leaking into actual use.

While the timeline is empty, we keep a dummy MediaPeriodId in PlaybackInfo with
a period index of 0. We leak this MediaPeriodId in actual use in these
situations:
 1. When issuing an IllegalSeekPosition after preparation. The timeline becomes
    non-empty, but the media period id stays at its dummy value.
 2. When re-adding sources to a previously empty timeline. The dummy period id
    is used as the start position for the new non-empty timeline.

This change makes:
 - the constructor of PlaybackInfo using those dummy values more explicit
 - prevents the issues above by using the correct default position in the new
   non-empty timeline for the above mentioned cases.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205803006"
tonihei,2018-07-24 09:30:23,https://api.github.com/repos/google/ExoPlayer/git/commits/ffdc17d0e05e92796eef6aedba58d4dcbc53e7bf,ffdc17d0e05e92796eef6aedba58d4dcbc53e7bf,"Remove generic type parameter from TransferListener.

All known instances use DataSource as generic type and thus code can be simplified
by removing the generic type altogether.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205798542"
marcbaechinger,2018-07-23 21:12:32,https://api.github.com/repos/google/ExoPlayer/git/commits/9d0ec37ead702063a61d851010a6cdd5aac8158a,9d0ec37ead702063a61d851010a6cdd5aac8158a,"Show notification whilst ads are playing but hide playback actions.

Issue:#4535

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205722036"
erdemguven,2018-07-23 21:05:27,https://api.github.com/repos/google/ExoPlayer/git/commits/9c337c88061217b6a9a6ac2f75548ddaca5cca41,9c337c88061217b6a9a6ac2f75548ddaca5cca41,"Add monoscopic 360 surface type to PlayerView

Using this surface it's possible to play 360 videos in a non-VR Activity that is
affected by phone and touch input.

RELNOTES=true

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205720776"
GiuseppePiscopo,2018-07-24 07:55:19,https://api.github.com/repos/google/ExoPlayer/git/commits/2c801ca2678016d5464caf214f45e6448f018756,2c801ca2678016d5464caf214f45e6448f018756,docs(playlist): fix javadoc comments
GiuseppePiscopo,2018-07-24 07:53:52,https://api.github.com/repos/google/ExoPlayer/git/commits/c9b6a73cd8b820cac80d3343829e1f3dc122db18,c9b6a73cd8b820cac80d3343829e1f3dc122db18,feat(playlist): add API to remove range of indices
mitrejcevski,2018-07-24 06:16:53,https://api.github.com/repos/google/ExoPlayer/git/commits/1f1762538fe0a2953fc464c6f23f2f588a687559,1f1762538fe0a2953fc464c6f23f2f588a687559,Support vector drawables to be used as default artwork
ojw28,2018-07-23 14:51:13,https://api.github.com/repos/google/ExoPlayer/git/commits/a3de7bf39920603fed9526a4c01ea7e83dcd3bcf,a3de7bf39920603fed9526a4c01ea7e83dcd3bcf,"Update release notes + bump version

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205660355"
ojw28,2018-07-23 14:51:13,https://api.github.com/repos/google/ExoPlayer/git/commits/61b838f4141cdf1bf4265f049255a66b57fd140b,61b838f4141cdf1bf4265f049255a66b57fd140b,"Update release notes + bump version

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205660355"
tonihei,2018-07-23 14:30:36,https://api.github.com/repos/google/ExoPlayer/git/commits/5933d923949d9c4876af7c5abdafe8ffe7653a6f,5933d923949d9c4876af7c5abdafe8ffe7653a6f,"Add simplified Dash and Ss media source factory constructors.

As the manifest and media data sources can be the same now, we can provide
a simplified constructor with just one data source factory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205658046"
ojw28,2018-07-23 13:44:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b0f44029b7554efc8f3c9f37f787c09b11dbc208,b0f44029b7554efc8f3c9f37f787c09b11dbc208,Clean up release notes
andrewlewis,2018-06-20 08:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f39d28135dd872b4de88d5acb6378714eed5791f,f39d28135dd872b4de88d5acb6378714eed5791f,"Pass through all ID3 internal data from udta

Also switch from using a CommentFrame to a new InternalFrame type for ID3 data
stored with ID '----', to distinguish internal data from actual ID3 comments.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201315254"
ojw28,2018-06-18 13:44:23,https://api.github.com/repos/google/ExoPlayer/git/commits/224d0c2b2c68a3d9001fa7f8ce37c4d79c4d66b6,224d0c2b2c68a3d9001fa7f8ce37c4d79c4d66b6,"Add isControllerVisible

Issue: #4385

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200986828"
ojw28,2018-07-23 13:06:29,https://api.github.com/repos/google/ExoPlayer/git/commits/dcd549bd3e689e54d953c8b49cbd1b25bb7127b4,dcd549bd3e689e54d953c8b49cbd1b25bb7127b4,Fix release branch
ojw28,2018-07-23 13:03:59,https://api.github.com/repos/google/ExoPlayer/git/commits/50c8197004884196701b83d987a5c5af451c6296,50c8197004884196701b83d987a5c5af451c6296,Widen setOutputSurface workaround
tonihei,2018-07-23 10:12:22,https://api.github.com/repos/google/ExoPlayer/git/commits/7d4ac516e72233ebee63bc57fa4529c8b76c54d1,7d4ac516e72233ebee63bc57fa4529c8b76c54d1,"Update period index in DashMediaPeriod event dispatcher after manifest update.

Issue:#4492

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205636634"
tonihei,2018-07-20 10:25:11,https://api.github.com/repos/google/ExoPlayer/git/commits/e03623f7012cd25075fd90d01dad4504fac684cf,e03623f7012cd25075fd90d01dad4504fac684cf,"Fix issue with keeping window sequence number after repeated seeks.

The number is shelved in calls to queue.clear() to keep it for the next
media period. However, the queue may also become empty by repeated calls to
advancePlayingPeriod which may happen when seeking to an unprepared period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205376036"
andrewlewis,2018-07-20 10:01:16,https://api.github.com/repos/google/ExoPlayer/git/commits/9bb64b7e44dee50baf8eed7ee444575aa6ddaf87,9bb64b7e44dee50baf8eed7ee444575aa6ddaf87,"Add support for setting companion ad slots

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205373398"
ojw28,2018-07-13 14:13:46,https://api.github.com/repos/google/ExoPlayer/git/commits/0b8724cb668b7c09008dffcef0652f7ff0456b3d,0b8724cb668b7c09008dffcef0652f7ff0456b3d,"Fix bug where sourceId wasn't set for the first chunk

The sample queues haven't been created when the first init call
occurs. In this case we need to set sourceId when we subsequently
create the queues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204467538"
botaydotcom,2018-07-13 14:08:13,https://api.github.com/repos/google/ExoPlayer/git/commits/d24e7cdffe53c545c8125d0aa226602313321577,d24e7cdffe53c545c8125d0aa226602313321577,"Fix a bug with TTML using font size as % of cellResolution.

After [] we support default font size for TTML, relative to the cellResolution of the document. However, this introduced a bug that makes TTML font-size in such case always follow the cellResolution font size, even when SubtitleView.setApplyEmbeddedStyles(false) and SubtitleView.setApplyEmbeddedFontSizes(false) were used.

This CL updates the fix so that the default font-size using cellResolution works in the same way as other embedded styles, and can be turned off using setters from SubtitleView.

GitHub: #4491

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204467033"
andrewlewis,2018-07-12 08:47:22,https://api.github.com/repos/google/ExoPlayer/git/commits/0a46e74105eb51f3499ec544260e25a2ac2f6848,0a46e74105eb51f3499ec544260e25a2ac2f6848,"Ignore all edit lists if one track's edits can't be applied

Issue: #4348

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204261718"
erdemguven,2018-07-10 12:00:34,https://api.github.com/repos/google/ExoPlayer/git/commits/2f6273c9fcc2fcafe49a6404ab658042e13dfe17,2f6273c9fcc2fcafe49a6404ab658042e13dfe17,"Fix DownloadService doesn't stop when the app is killed

Also fixed showing ""remove notification"" when download is completed.

Issue:#4469
Issue:#4488

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203927268"
ojw28,2018-07-09 15:17:36,https://api.github.com/repos/google/ExoPlayer/git/commits/44c45fd18db8345d389ed3335aaffd69b658dcf0,44c45fd18db8345d389ed3335aaffd69b658dcf0,"Move subsampleOffset in Format

It's no longer text specific (it's used for metadata as well, and
in theory could apply to any stream in which samples contain multiple
sub-samples)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203767825"
tonihei,2018-07-09 15:07:39,https://api.github.com/repos/google/ExoPlayer/git/commits/7e9e29d8a87557acdbf5fe52c5445761c48af900,7e9e29d8a87557acdbf5fe52c5445761c48af900,"Fix wrong loop variable in DashMediaPeriod.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203766579"
tonihei,2018-07-09 12:44:39,https://api.github.com/repos/google/ExoPlayer/git/commits/522adc3772e8a1397941fffc054885b92d7f2ef3,522adc3772e8a1397941fffc054885b92d7f2ef3,"Restructure track selection in DashMediaPeriod.

Until now, the streams were released and re-enabled for each type of stream
(primary, event, embedded) in that order. That leads to problems when replacing
streams from one type to another (for example embedded to primary).

This change restructures the track selection to:
1. Release and reset all streams that need to be released or replaced.
 1(a). Including embedded orphan streams.
2. Select new streams.

Issue:#4477

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203751233"
ojw28,2018-07-09 08:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/d49c5a476db87ae38533fd18d9cd5d49b777453f,d49c5a476db87ae38533fd18d9cd5d49b777453f,"Tweak DefaultTrackSelector documentation

Viewport constraints apply to adaptive content even if the
actual playback isn't adaptive (i.e. because the selector
ends up making a fixed track selection).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203726831"
drhill,2018-07-07 16:28:58,https://api.github.com/repos/google/ExoPlayer/git/commits/7207665ce0bc24bf5d3f6e56fc13b8db153dbc94,7207665ce0bc24bf5d3f6e56fc13b8db153dbc94,flip flag values to their proper names so that trackselector parameters can be useful
tonihei,2018-07-06 16:16:31,https://api.github.com/repos/google/ExoPlayer/git/commits/f2f149adca2bd9133e9d973d33de2efee0409c2d,f2f149adca2bd9133e9d973d33de2efee0409c2d,"Add workaround for unmatched track indices in tkhd and tfhd.

If there is only one track, we can assume that both boxes refer to the same track
even if the track indices don't match.

Issue:#4083

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203485872"
ojw28,2018-07-06 15:36:14,https://api.github.com/repos/google/ExoPlayer/git/commits/6ad98405a331e31f3cc673204ef96623399e2be4,6ad98405a331e31f3cc673204ef96623399e2be4,"Avoid providing invalid responses to MediaDrm

MediaDrm.provideXResponse methods only accept the response
corresponding to the most recent MediaDrm.getXRequest call.
Previously, our code allowed the following incorrect call
sequence:

a = getKeyRequest
b = getKeyRequest
provideKeyResponse(responseFor(a));

This would occur in the edge case of a second key request
being triggered whilst the first was still in flight. The
provideKeyResponse call would then fail.

This change fixes the problem by treating responseFor(a)
as stale. Note that a slightly better fix would be to
defer calling getKeyRequest the second time until after
processing the response corresponding to the first one,
however this is significantly harder to implement, and is
probably not worth it for what should be an edge case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203481685"
tonihei,2018-07-06 15:32:38,https://api.github.com/repos/google/ExoPlayer/git/commits/a50d31a70b975d16bd863ded771451b6157675ad,a50d31a70b975d16bd863ded771451b6157675ad,"Add workaround for unmatched track indices in trex and tkhd.

Both boxes should contain the same list of track indices. However, if only one
track index in each list does not match, we can just assume that these belong
together.

Issue:#4477

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203481258"
ojw28,2018-07-02 08:38:26,https://api.github.com/repos/google/ExoPlayer/git/commits/1f188c7c0063c374e18d445b48415df533100442,1f188c7c0063c374e18d445b48415df533100442,"Exclude text streams from duration calculations

Issue: #4029

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202912333"
ojw28,2018-06-29 16:43:49,https://api.github.com/repos/google/ExoPlayer/git/commits/165fef878239f8483d4e2d171b47060ac87bb26d,165fef878239f8483d4e2d171b47060ac87bb26d,"Fix application of styles for CEA-608

Issue: #4321

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202660712"
ojw28,2018-06-29 10:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/3c4384ddd974316a23ba313a4cb060ceacf00f97,3c4384ddd974316a23ba313a4cb060ceacf00f97,"Simplify DefaultTrackSelector documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202623116"
ojw28,2018-06-28 16:54:09,https://api.github.com/repos/google/ExoPlayer/git/commits/6cdaf593e01483e87b32c04bd14495ed9064b0bf,6cdaf593e01483e87b32c04bd14495ed9064b0bf,"Improve DefaultTrackSelector documentation

It's quite hard to find the defaults currently. Placing them
on each variable makes them easier to find.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202495929"
tonihei,2018-06-28 11:05:43,https://api.github.com/repos/google/ExoPlayer/git/commits/186711287b0ebd827fa175a0556e8d9b64f38426,186711287b0ebd827fa175a0556e8d9b64f38426,"Add some leeway for finding additional tracks in PsExtractor.

Currently we immediately stop searching after we found one video and one
audio track. This change adds some leeway to detect additional tracks.

Issue:#4406

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202455491"
tonihei,2018-06-27 09:47:21,https://api.github.com/repos/google/ExoPlayer/git/commits/a0810856e71018551a077569e13c2d630adc622e,a0810856e71018551a077569e13c2d630adc622e,"Add DRM workaround for Asus Zenfone 2.

Issue: #4413

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202277924"
AquilesCanta,2018-06-26 10:34:19,https://api.github.com/repos/google/ExoPlayer/git/commits/be995f0b274c98efa286121b25cfbcf69fa15af7,be995f0b274c98efa286121b25cfbcf69fa15af7,"Rename HlsPlaylistTracker's release to stop

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202103550"
andrewlewis,2018-06-26 10:03:36,https://api.github.com/repos/google/ExoPlayer/git/commits/fd8751dbc6de30194584e623a047c7ba19b1beb1,fd8751dbc6de30194584e623a047c7ba19b1beb1,"Make ImaAdsLoader robust to calls after it's released

Issue: #3879

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202100576"
keiththompson,2018-06-27 15:19:22,https://api.github.com/repos/google/ExoPlayer/git/commits/4a8bd911cf98f967ec25605f19f6d92290ff5c1d,4a8bd911cf98f967ec25605f19f6d92290ff5c1d,Add withSkippedAd method to AdPlaybackState. Currently it is only possible to skip entire ad groups but not individual ads within a given ad group.
murdly,2018-06-27 10:29:04,https://api.github.com/repos/google/ExoPlayer/git/commits/cbfa602866fedaef883ecb0118c14ce46645633a,cbfa602866fedaef883ecb0118c14ce46645633a,opt out of using DummySurface on specific Fire TV device
ojw28,2018-06-22 16:27:37,https://api.github.com/repos/google/ExoPlayer/git/commits/9c76ba06036b56205232cca4f2e97e748334ee80,9c76ba06036b56205232cca4f2e97e748334ee80,"Wait for DRM keys before codec configuration on FireOS devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201695876"
AquilesCanta,2018-06-22 16:19:23,https://api.github.com/repos/google/ExoPlayer/git/commits/a37bd0d66fffb287190139166daa4405b9525ae0,a37bd0d66fffb287190139166daa4405b9525ae0,"Parse ms:laurl from ContentProtection in DASH

Issue:#3393

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201694813"
ojw28,2018-06-22 14:01:57,https://api.github.com/repos/google/ExoPlayer/git/commits/0a80b47edb83503297e1e629e1db86712b6bfb06,0a80b47edb83503297e1e629e1db86712b6bfb06,"Extract scheme specific data from PSSH for some FireOS devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201679215"
ojw28,2018-06-22 13:55:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9b4981df8a6d304c766219b66e50ecce4859d584,9b4981df8a6d304c766219b66e50ecce4859d584,"Add some FireOS workarounds for max input buffer size limitations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201678686"
ojw28,2018-06-22 13:50:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5992b310ad0e05232e9b584006b2c5bc862866f5,5992b310ad0e05232e9b584006b2c5bc862866f5,"Enable EOS workaround for FireTV Gen 2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201678261"
AquilesCanta,2018-06-07 16:06:17,https://api.github.com/repos/google/ExoPlayer/git/commits/5f79aa253bdcaba23906ce724a4f7d3de2f5c97d,5f79aa253bdcaba23906ce724a4f7d3de2f5c97d,"Add license server URL to SchemeData

Allows DrmInitData to carry a license server URL when the media declares one.

Issue:#3393

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199643743"
tonihei,2018-07-23 11:37:37,https://api.github.com/repos/google/ExoPlayer/git/commits/c24a699b340a53024b3556dccb166f8b59420eae,c24a699b340a53024b3556dccb166f8b59420eae,"Update demo apps to use player-provided default bandwidth meter.

This simplifies the player setup and prevents using deprecated methods in the demo.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205642981"
tonihei,2018-07-23 11:34:23,https://api.github.com/repos/google/ExoPlayer/git/commits/1d636520cacc7218206cac457d825d051405fa1b,1d636520cacc7218206cac457d825d051405fa1b,"Auto-register AnalyticsCollector as bandwidth meter listener.

This allows to automatically forward bandwidth estimate events to
AnalyticsListeners.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205642752"
ojw28,2018-07-23 11:32:18,https://api.github.com/repos/google/ExoPlayer/git/commits/3c4b0aa11b9dbee8005d12def4b20cbd0d98b640,3c4b0aa11b9dbee8005d12def4b20cbd0d98b640,Merge branch 'dev-v2' of https://github.com/peddisri/ExoPlayer into dev-v2
tonihei,2018-07-23 10:34:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a67c73650efba61ffb9a9063bda2c31e940dd7a3,a67c73650efba61ffb9a9063bda2c31e940dd7a3,"Add helper method to get uid of timeline period.

This removes the need to populate the entire period for the common usage of
getting the uid from the period.

Also add default implementation to get period by uid.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205638265"
tonihei,2018-07-23 10:12:22,https://api.github.com/repos/google/ExoPlayer/git/commits/97e66ef11bb46d06abc4849d3a2adce04ca45ff9,97e66ef11bb46d06abc4849d3a2adce04ca45ff9,"Update period index in DashMediaPeriod event dispatcher after manifest update.

Issue:#4492

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205636634"
tonihei,2018-07-23 09:53:28,https://api.github.com/repos/google/ExoPlayer/git/commits/0b3fa5176a5df7a96a8214c0f7c89c466dbbbe43,0b3fa5176a5df7a96a8214c0f7c89c466dbbbe43,"Move media period end position from MediaperiodInfo to MediaPeriodId.

The end position is needed to make the MediaPeriodId unique as multiple
content periods may only vary in this parameter.

This also simplfies some other comparisons where the end position needed to
be compared in addition to the media period id.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205634508"
ojw28,2018-07-23 09:39:02,https://api.github.com/repos/google/ExoPlayer/git/commits/41345dcb8353ffe9cc78ff11ec030696d95d00e1,41345dcb8353ffe9cc78ff11ec030696d95d00e1,Simplify DASH live presentation delay override
ojw28,2018-07-23 09:37:45,https://api.github.com/repos/google/ExoPlayer/git/commits/58fcf52b178e19a432c240cbfddca215b50bc64b,58fcf52b178e19a432c240cbfddca215b50bc64b,"Merge pull request #4534 from Chimerapps/dev-v2

Allow specifying the default live presentation delay"
ojw28,2018-07-20 16:35:30,https://api.github.com/repos/google/ExoPlayer/git/commits/d2eb3fbefa7042070d1176e91f2c79c1272b2678,d2eb3fbefa7042070d1176e91f2c79c1272b2678,"Cleanup: Remove unnecessary generic types

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205409290"
ojw28,2018-07-20 16:22:11,https://api.github.com/repos/google/ExoPlayer/git/commits/7551d980874901a3cb9af1f1ae35bdf6ce8cd1ce,7551d980874901a3cb9af1f1ae35bdf6ce8cd1ce,"Cleanup: Use lambdas for extractor factories

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205407693"
tonihei,2018-07-20 16:04:32,https://api.github.com/repos/google/ExoPlayer/git/commits/8be95042cc3a91d96842f2d6b3a1192c06a70aad,8be95042cc3a91d96842f2d6b3a1192c06a70aad,"Fix typo in variable name.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205405072"
ojw28,2018-07-20 15:15:30,https://api.github.com/repos/google/ExoPlayer/git/commits/badd9356f8d617802724e58f7c7aaab40f026134,badd9356f8d617802724e58f7c7aaab40f026134,Refine use of KEY_OPERATING_RATE
ojw28,2018-07-20 15:12:04,https://api.github.com/repos/google/ExoPlayer/git/commits/f4219b55e64a57364c1a80fd2df7676e415d8dc4,f4219b55e64a57364c1a80fd2df7676e415d8dc4,"Merge pull request #3634 from jinminghe/bugfix/format

Set KEY_OPERATING_RATE for MediaCodecVideoRenderer."
marcbaechinger,2018-07-20 10:50:33,https://api.github.com/repos/google/ExoPlayer/git/commits/1699876aab97a2b3fada8130fe2309835f830074,1699876aab97a2b3fada8130fe2309835f830074,"call stop(true) when media action stop is received

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205377624"
tonihei,2018-07-20 10:25:11,https://api.github.com/repos/google/ExoPlayer/git/commits/0721d372a74e64f85937225d3e05101323d63393,0721d372a74e64f85937225d3e05101323d63393,"Fix issue with keeping window sequence number after repeated seeks.

The number is shelved in calls to queue.clear() to keep it for the next
media period. However, the queue may also become empty by repeated calls to
advancePlayingPeriod which may happen when seeking to an unprepared period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205376036"
andrewlewis,2018-07-20 10:01:16,https://api.github.com/repos/google/ExoPlayer/git/commits/b6548069964bc0a212dd7da669d4d35979e1ef84,b6548069964bc0a212dd7da669d4d35979e1ef84,"Add support for setting companion ad slots

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205373398"
botaydotcom,2018-07-19 14:13:34,https://api.github.com/repos/google/ExoPlayer/git/commits/ce629348618a4f6fc36b47ca7c250d3a0e9db991,ce629348618a4f6fc36b47ca7c250d3a0e9db991,"Fix a bug with VideoRendererOutputCapturer when extracting frames of different size

Currently, when the VideoRendererOutputCapturer updates output size, it will
set the new surface, then release the old surface. This can lead to problem
when both surface depends on EGL, since the second release() can release EGL
resources of the first surface.

This CL reverses this process, and ensures that the old surface is released before the new one is created.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=205235451"
NicolaChimerapps,2018-07-19 09:53:42,https://api.github.com/repos/google/ExoPlayer/git/commits/cf99963aab4e5107df3a5e84e7b3b5395133d1b2,cf99963aab4e5107df3a5e84e7b3b5395133d1b2,Typo in docs
NicolaChimerapps,2018-07-19 09:22:03,https://api.github.com/repos/google/ExoPlayer/git/commits/26a7516b55d835bc37c8abbbae7d53b5db42e5e4,26a7516b55d835bc37c8abbbae7d53b5db42e5e4,Updated formatting
NicolaChimerapps,2018-07-19 09:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/fbc0db965a0a70890deb785852315528d7129bd9,fbc0db965a0a70890deb785852315528d7129bd9,"Updated formatting
Added constructor and field in source itself"
NicolaChimerapps,2018-07-19 09:04:28,https://api.github.com/repos/google/ExoPlayer/git/commits/e6d32d3fb53b90651ed7675fb6d75007e9847907,e6d32d3fb53b90651ed7675fb6d75007e9847907,Updated formatting
NicolaChimerapps,2018-07-19 08:58:58,https://api.github.com/repos/google/ExoPlayer/git/commits/fbef465ca8a0a0fd004a7db0c7306d62881643c0,fbef465ca8a0a0fd004a7db0c7306d62881643c0,Allow specifying the default live presentation delay instead of using hardcoded constant
tonihei,2018-07-17 16:46:57,https://api.github.com/repos/google/ExoPlayer/git/commits/a076924caac92664d8c0b2fab772febb1cdc7282,a076924caac92664d8c0b2fab772febb1cdc7282,"Simplify using DataSource factories without a TransferListener.

Setting the transfer listener on the data source factories is only needed for debug
purposes, logging and for custom bandwidth metering which doesn't use the
player-provided bandwidth meter. As such, it is not compulsary and it should be easy
to set up the data source factory without a transfer listener.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204926083"
tonihei,2018-07-17 13:45:18,https://api.github.com/repos/google/ExoPlayer/git/commits/59b18a52d27c9335ce66c98fa3428b5885e16054,59b18a52d27c9335ce66c98fa3428b5885e16054,"Make passing BandwidthMeter to TrackSelector and TrackSelection non-optional.

This was only needed temporatily until we could ensure that the player always
provides a BandwidthMeter.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204903640"
ojw28,2018-07-17 12:55:52,https://api.github.com/repos/google/ExoPlayer/git/commits/972fd0ced85f896f3a5cce3491db96748627a334,972fd0ced85f896f3a5cce3491db96748627a334,"Use maxInputSize for extension decoders where possible

Issue: #3120

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204898773"
ojw28,2018-07-17 10:59:21,https://api.github.com/repos/google/ExoPlayer/git/commits/73af056da39b6ebead767d3d4c6e3162cc4c344c,73af056da39b6ebead767d3d4c6e3162cc4c344c,"Widen setOutputSurface workaround

As part of this change:

- Don't apply the workaround on API level 27+. GTS coverage
  should prevent such devices from existing.
- Use Util.DEVICE consistently.
- Remove the ""// Device name"", which don't really add much
  but make extra work when updating the list.

Issue: #4468

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204889657"
AquilesCanta,2018-07-17 10:53:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f155aa2563e6d9a64b0ad948b1f9865ba13d6777,f155aa2563e6d9a64b0ad948b1f9865ba13d6777,"Add getMinimumLoadableRetryCount to LoadErrorHandlingPolicy.

This will allow deduplicating the argument from all Loader clients.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204889331"
tonihei,2018-07-17 09:38:15,https://api.github.com/repos/google/ExoPlayer/git/commits/6aab2bdc5545b8013e0989b4034efa572c139d1a,6aab2bdc5545b8013e0989b4034efa572c139d1a,"Set bandwidth meter at player level.

This bandwidth meter is then forwarded to the track selection and as a transfer
listener to media and data sources.

When no bandwidth meter is specified in the ExoPlayerFactory methods, a static
singleton instance will be used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204881497"
tonihei,2018-07-17 09:00:30,https://api.github.com/repos/google/ExoPlayer/git/commits/74dadae520fdcdb8e94fc0706eaa73619cdc8c0a,74dadae520fdcdb8e94fc0706eaa73619cdc8c0a,"Make values forwarded to bandwidth listener final again.

When notifying the bandwidth listeners of new samples, the forwarded values
need to be final to prevent concurrent access. Putting the event forwarding
into a separate method ensures the values are final.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204877650"
ojw28,2018-07-16 13:30:47,https://api.github.com/repos/google/ExoPlayer/git/commits/b25a124239aebea95d3c857245cb8fca283e69c6,b25a124239aebea95d3c857245cb8fca283e69c6,"HLS: Fill primary sample formats with track format info (e.g. bitrate)

Issue: #3297

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204732266"
erdemguven,2018-07-16 12:59:01,https://api.github.com/repos/google/ExoPlayer/git/commits/7b2da629ea553aa4b72867b27a13bda2e15efaac,7b2da629ea553aa4b72867b27a13bda2e15efaac,"Make it possible to disable DownloadService notifications

Issue: #4389

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204728270"
ojw28,2018-07-16 11:59:11,https://api.github.com/repos/google/ExoPlayer/git/commits/8f0729b5ad80edf8d6dbdc08f675cde25e7e4c81,8f0729b5ad80edf8d6dbdc08f675cde25e7e4c81,"Add AudioListener (audio equivalent to VideoListener)

Issue: #3994

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204722997"
AquilesCanta,2018-07-16 11:14:28,https://api.github.com/repos/google/ExoPlayer/git/commits/e247a08a3663907a7b0e0c25cbcab70da31ff5e9,e247a08a3663907a7b0e0c25cbcab70da31ff5e9,"Parameterize load error handling in HLS

Issue:#2844
Issue:#2981

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204718939"
ojw28,2018-07-13 14:41:10,https://api.github.com/repos/google/ExoPlayer/git/commits/e2059eabe1c000b55ad9005d6697239744230e77,e2059eabe1c000b55ad9005d6697239744230e77,"Enhance copyWithManifestFormatInfo to handle muxed manifest formats

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204470264"
ojw28,2018-07-13 14:13:46,https://api.github.com/repos/google/ExoPlayer/git/commits/450448b220f4f7919b37bcfda66bb82c66a764db,450448b220f4f7919b37bcfda66bb82c66a764db,"Fix bug where sourceId wasn't set for the first chunk

The sample queues haven't been created when the first init call
occurs. In this case we need to set sourceId when we subsequently
create the queues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204467538"
ojw28,2018-07-13 14:10:55,https://api.github.com/repos/google/ExoPlayer/git/commits/ef728178a83f93af706fc738dc25a2df3af41b53,ef728178a83f93af706fc738dc25a2df3af41b53,"Improve format derivation for chunkless preparation

1. Copy label into derived formats
2. If audio is the primary track type, copy additional fields from
   the variant formats. This is probably a no-op in practice, since
   I don't think variant formats have these fields set anyway, but
   it seems like the right thing to do in case they ever are set in
   the future.

Note: It's a bit strange to use createXContainerFormat rather than
createXSampleFormat, but in practice the methods used here are
better matched for what we're trying to do.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204467287"
botaydotcom,2018-07-13 14:08:13,https://api.github.com/repos/google/ExoPlayer/git/commits/19cc2c822a37b6c6e4d53309e73742ff11199f44,19cc2c822a37b6c6e4d53309e73742ff11199f44,"Fix a bug with TTML using font size as % of cellResolution.

After [] we support default font size for TTML, relative to the cellResolution of the document. However, this introduced a bug that makes TTML font-size in such case always follow the cellResolution font size, even when SubtitleView.setApplyEmbeddedStyles(false) and SubtitleView.setApplyEmbeddedFontSizes(false) were used.

This CL updates the fix so that the default font-size using cellResolution works in the same way as other embedded styles, and can be turned off using setters from SubtitleView.

GitHub: #4491

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204467033"
botaydotcom,2018-07-13 13:00:29,https://api.github.com/repos/google/ExoPlayer/git/commits/7cba5429fc96bfeb242e06cec3c6f002f7bbcda5,7cba5429fc96bfeb242e06cec3c6f002f7bbcda5,"Add supports for frame-capture retrying for MetadataRetriever.

For the MetadataRetriever, for certain queries, after setting up the player to
render a frame (by seeking to the position), sometimes the player will seek to
the same position and ignore the seek, leading to the frame not being captured,
leaving the retriever in deadlock, waiting for the frame forever. This CL adds
a retry timer to avoid this and make sure we can return query result after some
time.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204460200"
ojw28,2018-07-13 11:06:52,https://api.github.com/repos/google/ExoPlayer/git/commits/cba6da8906c67fedd737f9f1ba7feb3eccd49b27,cba6da8906c67fedd737f9f1ba7feb3eccd49b27,"No-op cleanup of DashTimeline

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204451894"
ojw28,2018-07-12 19:06:40,https://api.github.com/repos/google/ExoPlayer/git/commits/18ab4b9112a8b0affac9ce1c4a376e08c7478ced,18ab4b9112a8b0affac9ce1c4a376e08c7478ced,"Fix / improve format merging

1. Prefer label and language values in the manifest to those in
   the media. This is particularly helpful if the sample format
   contains ""und"" as the language.
2. Copy label when deriving formats in HlsSampleStreamWrapper
3. When there's only one variant in HlsSampleStreamWrapper, use
   the regular copyWithManifestFormatInfo. This allows more
   information to be retained from the sample format.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204340008"
andrewlewis,2018-07-12 15:16:13,https://api.github.com/repos/google/ExoPlayer/git/commits/a26bb350eec38c512571a862cde02a37642111af,a26bb350eec38c512571a862cde02a37642111af,"Add IMA and FLAC tests to the codebase

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204302135"
jinminghe,2018-07-16 13:36:00,https://api.github.com/repos/google/ExoPlayer/git/commits/5cdb886db160e902f9bec6e2398281211302b562,5cdb886db160e902f9bec6e2398281211302b562,Address comments.
jinminghe,2018-07-16 13:04:25,https://api.github.com/repos/google/ExoPlayer/git/commits/db53606c1d349e7193ab7c8712a306c100389755,db53606c1d349e7193ab7c8712a306c100389755,Merge master into bugfix/format.
ojw28,2018-07-12 15:08:11,https://api.github.com/repos/google/ExoPlayer/git/commits/05a31dfd2439eb625de80d0b3ab194b6fbdd283c,05a31dfd2439eb625de80d0b3ab194b6fbdd283c,Format cleanup
ojw28,2018-07-12 15:05:19,https://api.github.com/repos/google/ExoPlayer/git/commits/41636ada8825a786496fad9313bc7dd95031870d,41636ada8825a786496fad9313bc7dd95031870d,"Merge pull request #4391 from kaltura/add-label

Add label attribute support for DASH audio/text"
ojw28,2018-07-12 14:55:03,https://api.github.com/repos/google/ExoPlayer/git/commits/28bb3ba73e91032873b8f63f7722504cf291dc39,28bb3ba73e91032873b8f63f7722504cf291dc39,Merge branch 'JungleGenius-dev-v2' into dev-v2
ojw28,2018-07-12 14:54:47,https://api.github.com/repos/google/ExoPlayer/git/commits/e4b05a5ae6699df534d69715ed088391cbb17576,e4b05a5ae6699df534d69715ed088391cbb17576,Merge branch 'dev-v2' of https://github.com/JungleGenius/ExoPlayer into JungleGenius-dev-v2
ojw28,2018-07-12 14:48:05,https://api.github.com/repos/google/ExoPlayer/git/commits/423cfa3b730a9f4d0e16967c1bec3d5c003ff8a7,423cfa3b730a9f4d0e16967c1bec3d5c003ff8a7,"Merge pull request #4442 from keiththompson/keiththompson__/skip_ad_within_ad_group

Add withSkippedAd method to AdPlaybackState."
ojw28,2018-07-12 14:46:49,https://api.github.com/repos/google/ExoPlayer/git/commits/651cfd9ebb9b85e04a750ac9861644cec0adefc7,651cfd9ebb9b85e04a750ac9861644cec0adefc7,"Merge pull request #4480 from drhill/dev-v2_mkv_forced_default_flipped

MKV Extractor flip default and forced flag values to their proper names"
andrewlewis,2018-07-12 08:47:22,https://api.github.com/repos/google/ExoPlayer/git/commits/44c253058ece6db30f074925c878f0bf37a07599,44c253058ece6db30f074925c878f0bf37a07599,"Ignore all edit lists if one track's edits can't be applied

Issue: #4348

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204261718"
tonihei,2018-07-12 07:37:16,https://api.github.com/repos/google/ExoPlayer/git/commits/78d7754f2934d4a029115a56eec4a8c33e8ba0d3,78d7754f2934d4a029115a56eec4a8c33e8ba0d3,"Add addListener/removeListener to BandwidthMeter.

That allows to add listeners after the BandwidthMeter has been created which is
helpful as the BandwidthMeter instances are often long-lived static instances.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204255299"
AquilesCanta,2018-07-11 17:42:28,https://api.github.com/repos/google/ExoPlayer/git/commits/32a91b5689351a327b6fae65522068933009d2b5,32a91b5689351a327b6fae65522068933009d2b5,"Add LoadErrorHandlingPolicy to customize blacklisting and backoff logic

Issue:#2844
Issue:#3370
Issue:#2981

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204149284"
tonihei,2018-07-11 10:48:55,https://api.github.com/repos/google/ExoPlayer/git/commits/095c6e4bf8ddeebfdde0a22acb41c5e475739d7e,095c6e4bf8ddeebfdde0a22acb41c5e475739d7e,"Add MediaChunkIterator for HLS media playlists.

This allows to iterate through the available segments of the playlist.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=204100116"
botaydotcom,2018-07-10 15:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/39b812298d9e4720abef412c14a192c1b810c412,39b812298d9e4720abef412c14a192c1b810c412,"Add supports for reading duration for a PS stream.

Add supports for reading duration for a PS stream by reading SCR values from
the header of packs at the start and at the end of the stream, calculating the
difference, and converting that into stream duration.

Github: #4476

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203954752"
tonihei,2018-07-10 15:26:17,https://api.github.com/repos/google/ExoPlayer/git/commits/68822c0c415e31f2fa2dade8fdcdc51c584c0335,68822c0c415e31f2fa2dade8fdcdc51c584c0335,"Remove BandaidTransferListener.

It has now become an empty shell as the real TransferListener provides all its
methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203950443"
tonihei,2018-07-10 15:25:17,https://api.github.com/repos/google/ExoPlayer/git/commits/c3df64f1027aba05e9aebd43be1ca204c88e251e,c3df64f1027aba05e9aebd43be1ca204c88e251e,"Extend TransferListener with onTransferInitializing and additional parameters.

This allows more fine-grained analysis of transfers.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203950327"
tonihei,2018-07-10 13:37:49,https://api.github.com/repos/google/ExoPlayer/git/commits/2b1434dfcbc0b1f22c3451c6d8c07205129d9950,2b1434dfcbc0b1f22c3451c6d8c07205129d9950,"Change DataSource.Type to a boolean.

There are only two types at the moment and we can therefore use a boolean.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203937357"
peddisri,2018-06-26 08:04:10,https://api.github.com/repos/google/ExoPlayer/git/commits/2a388ff852d87a89018d48a0d61d3ff38e8441f8,2a388ff852d87a89018d48a0d61d3ff38e8441f8,"Support CEA 608/708 captions in MPEG2 TS stream

[Problem] Sarnoff spec complaince tests streams are MPEG2 TS.
Currently, parsing CC data from MPEG2 TS is not supported

[Solution] Parsed CC data from MPEG2 stream because all Sarnoff streams are MPEG2"
erdemguven,2018-07-10 12:00:34,https://api.github.com/repos/google/ExoPlayer/git/commits/18d208ab937e274da4974fad7b8601d35179e486,18d208ab937e274da4974fad7b8601d35179e486,"Fix DownloadService doesn't stop when the app is killed

Also fixed showing ""remove notification"" when download is completed.

Issue:#4469
Issue:#4488

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203927268"
ojw28,2018-07-09 15:17:36,https://api.github.com/repos/google/ExoPlayer/git/commits/17a58969af075bfbcf53f20466f0098d024b24f9,17a58969af075bfbcf53f20466f0098d024b24f9,"Move subsampleOffset in Format

It's no longer text specific (it's used for metadata as well, and
in theory could apply to any stream in which samples contain multiple
sub-samples)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203767825"
tonihei,2018-07-09 15:07:39,https://api.github.com/repos/google/ExoPlayer/git/commits/5c9fd1649a6be7dead48e636af466cd4f9569664,5c9fd1649a6be7dead48e636af466cd4f9569664,"Fix wrong loop variable in DashMediaPeriod.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203766579"
tonihei,2018-07-09 12:44:39,https://api.github.com/repos/google/ExoPlayer/git/commits/74d8f89cb64ff3d14adede765a2b01f9ab6f2212,74d8f89cb64ff3d14adede765a2b01f9ab6f2212,"Restructure track selection in DashMediaPeriod.

Until now, the streams were released and re-enabled for each type of stream
(primary, event, embedded) in that order. That leads to problems when replacing
streams from one type to another (for example embedded to primary).

This change restructures the track selection to:
1. Release and reset all streams that need to be released or replaced.
 1(a). Including embedded orphan streams.
2. Select new streams.

Issue:#4477

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203751233"
ojw28,2018-07-09 09:06:42,https://api.github.com/repos/google/ExoPlayer/git/commits/dc8b73d372cdd3b119dde1c4f8995308e8ba5123,dc8b73d372cdd3b119dde1c4f8995308e8ba5123,"Apply setOutputSurface workaround to all non-Google decoders

Where a device has this issue, it most likely applies to all
SOC vendor provided decoders, which are normally the only
video decoders other than the OMX.google software decoders
on the device. The fact we currently only blacklist for AVC
decoders is likely just a side effect of AVC's popularity.

I checked two devices already on the blacklist, and both
failed with other SOC vendor decoders on the device as well
(but passed if forced to use OMX.google decoders instead)

Issue: #4468

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203728285"
ojw28,2018-07-09 08:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/13789a3c1d5818b897657c549875cbb4b69c93b4,13789a3c1d5818b897657c549875cbb4b69c93b4,"Tweak DefaultTrackSelector documentation

Viewport constraints apply to adaptive content even if the
actual playback isn't adaptive (i.e. because the selector
ends up making a fixed track selection).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203726831"
drhill,2018-07-07 16:28:58,https://api.github.com/repos/google/ExoPlayer/git/commits/e8072125144abb3dfebdaf37890ba500a21396ba,e8072125144abb3dfebdaf37890ba500a21396ba,flip flag values to their proper names so that trackselector parameters can be useful
ojw28,2018-07-06 17:26:49,https://api.github.com/repos/google/ExoPlayer/git/commits/8fa34c1ed681ccf6f3783f96abfd1d0af4ebc486,8fa34c1ed681ccf6f3783f96abfd1d0af4ebc486,Delete stray file
botaydotcom,2018-07-06 16:49:16,https://api.github.com/repos/google/ExoPlayer/git/commits/c1acf87fbacbc2452b5a5cc60fd1333b57c91564,c1acf87fbacbc2452b5a5cc60fd1333b57c91564,"Support handling frame queries for MetadataRetriever.

- Support handling frame queries (i.e get frames at times, output to certain
sizes) from MetadataRetriever.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203489788"
tonihei,2018-07-06 16:16:31,https://api.github.com/repos/google/ExoPlayer/git/commits/2c00be1aa3ee9ca5049ea094d231faa2570352ae,2c00be1aa3ee9ca5049ea094d231faa2570352ae,"Add workaround for unmatched track indices in tkhd and tfhd.

If there is only one track, we can assume that both boxes refer to the same track
even if the track indices don't match.

Issue:#4083

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203485872"
ojw28,2018-07-06 15:36:14,https://api.github.com/repos/google/ExoPlayer/git/commits/3b70d1d889d8d254a84124775cb74546ec466f39,3b70d1d889d8d254a84124775cb74546ec466f39,"Avoid providing invalid responses to MediaDrm

MediaDrm.provideXResponse methods only accept the response
corresponding to the most recent MediaDrm.getXRequest call.
Previously, our code allowed the following incorrect call
sequence:

a = getKeyRequest
b = getKeyRequest
provideKeyResponse(responseFor(a));

This would occur in the edge case of a second key request
being triggered whilst the first was still in flight. The
provideKeyResponse call would then fail.

This change fixes the problem by treating responseFor(a)
as stale. Note that a slightly better fix would be to
defer calling getKeyRequest the second time until after
processing the response corresponding to the first one,
however this is significantly harder to implement, and is
probably not worth it for what should be an edge case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203481685"
tonihei,2018-07-06 15:32:38,https://api.github.com/repos/google/ExoPlayer/git/commits/1cf8b255dcc5277f274b06e394b3ed7558eae224,1cf8b255dcc5277f274b06e394b3ed7558eae224,"Add workaround for unmatched track indices in trex and tkhd.

Both boxes should contain the same list of track indices. However, if only one
track index in each list does not match, we can just assume that these belong
together.

Issue:#4477

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203481258"
ojw28,2018-07-06 15:20:13,https://api.github.com/repos/google/ExoPlayer/git/commits/bd952a802a0c968141362ed9b1d9b748e8646add,bd952a802a0c968141362ed9b1d9b748e8646add,"Re-merge output surface workarounds and add TODO list

Issue: #4468

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203479944"
ojw28,2018-07-06 13:50:24,https://api.github.com/repos/google/ExoPlayer/git/commits/3b29eeaef84ec70049a5412d3d4df76e213337b8,3b29eeaef84ec70049a5412d3d4df76e213337b8,Merge branch 'joomcode-dev-v2' into dev-v2
ojw28,2018-07-05 12:26:11,https://api.github.com/repos/google/ExoPlayer/git/commits/0ed8e86ba4cd2dcf0f27fa0b91979e89360a6e57,0ed8e86ba4cd2dcf0f27fa0b91979e89360a6e57,"Allow overriding of setOutputSurface workarounds

Since this is an ongoing problem, it's reasonable that we allow
developers to toggle these workarounds without too much hassle.

Issue: #4468

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203364488"
tonihei,2018-07-05 11:17:22,https://api.github.com/repos/google/ExoPlayer/git/commits/264bed06f253bc10b2c16c03c3416699e1f0569c,264bed06f253bc10b2c16c03c3416699e1f0569c,"Forward addTransferListener for all wrapping data sources.

This allows to register a listener on an outer wrapping data source which
receives data transfer events from the wrapped source.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203358981"
andrewlewis,2018-07-05 08:01:02,https://api.github.com/repos/google/ExoPlayer/git/commits/5047a5a4daaebdd90dd820c07fdf55e226197199,5047a5a4daaebdd90dd820c07fdf55e226197199,"Fix pre-L codec buffer initialization

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203341457"
tonihei,2018-07-04 14:59:03,https://api.github.com/repos/google/ExoPlayer/git/commits/acbe52d0d74b2913c7bfc463664d9566a6973661,acbe52d0d74b2913c7bfc463664d9566a6973661,"Forward TransferListener from MediaSources to DataSources.

This wires up recent changes of passing a transfer listener to the MediaSource and
allowing DataSources to accept new listeners.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203280818"
tonihei,2018-07-04 10:58:23,https://api.github.com/repos/google/ExoPlayer/git/commits/abb4d6ff70a9778d54c8fb85987498abe74d7d62,abb4d6ff70a9778d54c8fb85987498abe74d7d62,"Use correct generics type bounds for TransferListener in MediaSources.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203260699"
botaydotcom,2018-07-04 09:46:09,https://api.github.com/repos/google/ExoPlayer/git/commits/2237603a4d02c41a87671b2b40135fbe0226e230,2237603a4d02c41a87671b2b40135fbe0226e230,"Add supports for reading duration for a TS stream.

Add supports for reading duration for a TS stream by reading PCR values of the PCR PID packets at the start and at the end of the stream, calculating the difference, and converting that into stream duration.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203254626"
andrewlewis,2018-07-04 07:57:19,https://api.github.com/repos/google/ExoPlayer/git/commits/0b631b05c2fef9321a0cc36716f2606a74908500,0b631b05c2fef9321a0cc36716f2606a74908500,"Optionally fall back to other decoders if init fails

Codec initialization may fail in creation, configuration or when start()ing the
codec. If codec initialization fails, there may be other codecs available that
could handle the same format, but currently ExoPlayer can only try to use the
first listed codec for the input format and gives up if it fails to initialize.

This change implements support for optionally falling back to alternative
decoders if initialization fails. MediaCodecSelector can now return a list of
decoders to try in priority order, and use the Format when choosing a codec.
With the default implementation, the codecs and order come from MediaCodecList,
and matches the order used internally by MediaCodec.createDecoderByType (which
implements the same kind of fallback though only to the creation step, without
configuring/starting the codec).

This feature is useful for apps that want to play several videos concurrently on
devices that have software decoders (like OMX.google.h264.decoder), as the new
behavior allows new codecs to be created when no hardware-accelerated decoders
are available.

The list of available codecs is queried when initializing the codec after a
format change that requires a new codec to be instantiated. When a decoder fails
to initialize it is removed from the list of available decoders and won't be
tried again until the next format change (or until the renderer is disabled).

Note: this change does not affect the renderer capabilities API, as when
checking format support we don't know which codec will be used.

Issue: #273

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203242285"
andrewlewis,2018-07-03 17:11:53,https://api.github.com/repos/google/ExoPlayer/git/commits/930833627fcc9fe9e3fb50dc5afda48002a109a0,930833627fcc9fe9e3fb50dc5afda48002a109a0,"Use androidx test runner in gradle configuration

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203141421"
tonihei,2018-07-03 15:49:06,https://api.github.com/repos/google/ExoPlayer/git/commits/f2b01275cb021bd7f70d8544e08f8177c9af3e02,f2b01275cb021bd7f70d8544e08f8177c9af3e02,"Add back old deprecated MediaSource.prepareSource - remove for next release!

This ensures compatiblity of other apps depending on our public GitHub code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203129076"
tonihei,2018-07-03 12:14:15,https://api.github.com/repos/google/ExoPlayer/git/commits/f4bcfe082dfe153e6c83c5c154c3a9336d9bc462,f4bcfe082dfe153e6c83c5c154c3a9336d9bc462,"Add MediaChunkIterator for SmoothStreaming stream elements.

This allows to iterate through the available chunks of the stream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203105813"
tonihei,2018-07-03 11:39:09,https://api.github.com/repos/google/ExoPlayer/git/commits/97120bc6cbbb9779df12e3bfdf86490af3ba7b00,97120bc6cbbb9779df12e3bfdf86490af3ba7b00,"Add MediaChunkIterator for FakeAdaptiveDataSet.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203102464"
tonihei,2018-07-03 11:35:45,https://api.github.com/repos/google/ExoPlayer/git/commits/55ce085a0d615a233151983969676c51f29edadf,55ce085a0d615a233151983969676c51f29edadf,"Add transferInitializing to BaseDataSource.

This allows implementations to notify when the transfer is about to be started.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203102117"
tonihei,2018-07-03 10:44:00,https://api.github.com/repos/google/ExoPlayer/git/commits/985160a47dd4186ab53b7f83953aea6a8e17dbbf,985160a47dd4186ab53b7f83953aea6a8e17dbbf,"Use BaseDataSource for all internal leaf data sources.

This allows all leaf data sources (i.e. ones which do not forward the requests
to other data sources) to accept multiple listeners.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=203097587"
ojw28,2018-07-02 16:46:59,https://api.github.com/repos/google/ExoPlayer/git/commits/e48b712a32e0c597afa0036528bdae8050c08844,e48b712a32e0c597afa0036528bdae8050c08844,"Fail tests quickly if they don't start within the host activity

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202965785"
tonihei,2018-07-02 15:31:21,https://api.github.com/repos/google/ExoPlayer/git/commits/c8af6d176f93368372852f2dd425cd6f11b15150,c8af6d176f93368372852f2dd425cd6f11b15150,"Forward queue of media chunks to getNextChunk.

This allows to use this queue in the track selection in the future.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202954871"
ojw28,2018-07-02 14:36:59,https://api.github.com/repos/google/ExoPlayer/git/commits/04341394a3ed22c8432953bc7ad12bdf95134b88,04341394a3ed22c8432953bc7ad12bdf95134b88,"Add section to guide about track selection

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202948642"
tonihei,2018-07-02 13:19:33,https://api.github.com/repos/google/ExoPlayer/git/commits/8ca9a32d8eb302cb2fdada0872f855e7c570e45b,8ca9a32d8eb302cb2fdada0872f855e7c570e45b,"Add MediaChunkIterator interface and DASH implementation.

This will allow to provide available information about future chunks to the
track selection.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202940994"
marcbaechinger,2018-07-02 10:51:37,https://api.github.com/repos/google/ExoPlayer/git/commits/e50167ef54d63739825042c31597be272bb2c1c5,e50167ef54d63739825042c31597be272bb2c1c5,"prevent controls from hiding whilst the user is interacting with it

Issue:#2395

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202926448"
AquilesCanta,2018-07-02 10:17:38,https://api.github.com/repos/google/ExoPlayer/git/commits/caa90844c626ac96bc0a42f7fa3046d07875cdde,caa90844c626ac96bc0a42f7fa3046d07875cdde,"Allow overridable empty closed caption format list in DefaultTsPayloadReaderFactory

Issue:#4451

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202923630"
ojw28,2018-07-02 08:38:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c23910ad3ac13f6f2e637cce51d32e556d641a09,c23910ad3ac13f6f2e637cce51d32e556d641a09,"Exclude text streams from duration calculations

Issue: #4029

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202912333"
brettchabot,2018-06-30 20:27:01,https://api.github.com/repos/google/ExoPlayer/git/commits/1ee36101f6da5142daef051e95807a2a3432c2ce,1ee36101f6da5142daef051e95807a2a3432c2ce,"Replace references to android.support.test with androidx.test.

The Android Test Support Library is being renamed to AndroidX Test, with its root java namespace changing from android.support.test to androidx.test.
And code location changing from tp/android/android_test_support to tp/android/androidx_test.

More information: []

TAP global presubmit: []

BUG:
79205333

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202796842"
ojw28,2018-06-29 16:43:49,https://api.github.com/repos/google/ExoPlayer/git/commits/62b90c83dfa8a832193d3b8ad4499b4cebdec70b,62b90c83dfa8a832193d3b8ad4499b4cebdec70b,"Fix application of styles for CEA-608

Issue: #4321

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202660712"
tonihei,2018-06-29 15:20:55,https://api.github.com/repos/google/ExoPlayer/git/commits/6f6c72266ee7cd3c82cef3a45b8c66ce0935d83f,6f6c72266ee7cd3c82cef3a45b8c66ce0935d83f,"Add addTransferListener method to DataSource and provide BaseDataSource.

The new method allows to add transfer listeners (e.g. the BandwidthMeter) after
the data source has been created. To simplify the implementation for
subclasses, this change also introduces a BaseDataSource which handles
the list of listeners and the listener registration.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202649563"
tonihei,2018-06-29 14:29:02,https://api.github.com/repos/google/ExoPlayer/git/commits/98afaa60d05a1ac9645acf774ca222d68cc84f20,98afaa60d05a1ac9645acf774ca222d68cc84f20,"Forward TransferListener to media sources.

In the future, this allows to register the BandwidthMeter (managed by the player)
as a listener to all media transfers related to this media source.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202643946"
botaydotcom,2018-06-29 13:31:45,https://api.github.com/repos/google/ExoPlayer/git/commits/824c0b20a58f16f936bdd633db3dcc9eef8a8e65,824c0b20a58f16f936bdd633db3dcc9eef8a8e65,"Add supports for Seeking in AMR format using a constant bitrate seekmap.

- Extract ConstantBitrateSeeker from Mp3 package into a more general
ConstantBitrateSeekMap.
- Use this seekmap to implement seeking for AMR format.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202638183"
AquilesCanta,2018-06-29 11:28:33,https://api.github.com/repos/google/ExoPlayer/git/commits/efa714ab4fc3ae85843300d5a93f1c9dfbe22304,efa714ab4fc3ae85843300d5a93f1c9dfbe22304,"Support EXT-X-INDEPENDENT-SEGMENTS in the master playlist

From the spec:

If the EXT-X-INDEPENDENT-SEGMENTS tag appears in a Master
Playlist, it applies to every Media Segment in every Media
Playlist in the Master Playlist.

----

This requires propagation of attributes from the master
playlist to the media playlists. This CL only includes
independent segments, but other inheritable attributes
will be supported in following changes. Other inheritable
attributes include variable substitution definitions and
session keys.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202628422"
dkostyrev,2018-07-02 17:27:46,https://api.github.com/repos/google/ExoPlayer/git/commits/db88222660d9417e9e102870b095f8efd9f2fa9b,db88222660d9417e9e102870b095f8efd9f2fa9b,"Opt out of using DummySurface on Asus Zenfone Go
Issue: #4460"
botaydotcom,2018-06-29 11:00:27,https://api.github.com/repos/google/ExoPlayer/git/commits/a916ad6a5075b70a34e85dd8043ecca205e8e662,a916ad6a5075b70a34e85dd8043ecca205e8e662,"Refactor, move MetadataRetrieverTestRunner to testutil package.

- Make it looks more natural to have MetadataRetrieverTestRunner in the same
package as ExoPlayerTestRunner.
- Change moe_config script to remove the file MetadataRetrieverTestRunner,
instead of the folder.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202626238"
andrewlewis,2018-06-29 10:48:06,https://api.github.com/repos/google/ExoPlayer/git/commits/f94cef43e8595b6458043953db5b5d18c4c9fc52,f94cef43e8595b6458043953db5b5d18c4c9fc52,"Fix ImaAdsLoader @Override for unreleased method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202625377"
ojw28,2018-06-29 10:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/557fa17945f14a3e2603aaf47a25b61cf884e15e,557fa17945f14a3e2603aaf47a25b61cf884e15e,"Simplify DefaultTrackSelector documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202623116"
ojw28,2018-06-28 16:54:09,https://api.github.com/repos/google/ExoPlayer/git/commits/f934df7780f05ca89effb6aa354ba2387f1e24a9,f934df7780f05ca89effb6aa354ba2387f1e24a9,"Improve DefaultTrackSelector documentation

It's quite hard to find the defaults currently. Placing them
on each variable makes them easier to find.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202495929"
ojw28,2018-06-28 16:51:05,https://api.github.com/repos/google/ExoPlayer/git/commits/94784249eb4d8a304bcb3880962828eebd33c3bf,94784249eb4d8a304bcb3880962828eebd33c3bf,Cleanup
ojw28,2018-06-28 15:22:58,https://api.github.com/repos/google/ExoPlayer/git/commits/b06a38b6149fa8a7d7d248a869c2b879499fff32,b06a38b6149fa8a7d7d248a869c2b879499fff32,"Merge pull request #4411 from Comcast/bugfix/caption_background_fix

Fix system caption style background being used when cue style is provided."
ojw28,2018-06-28 15:22:28,https://api.github.com/repos/google/ExoPlayer/git/commits/7d489a8893b6e59d1e9d4ee32eca50a4f48a939d,7d489a8893b6e59d1e9d4ee32eca50a4f48a939d,"Merge pull request #4441 from murdly/dev-v2

opt out of using DummySurface on specific Fire TV device"
botaydotcom,2018-06-28 13:01:34,https://api.github.com/repos/google/ExoPlayer/git/commits/4f57c46560006f188d6c8cf64aa3d7ffc003368c,4f57c46560006f188d6c8cf64aa3d7ffc003368c,"Do not discard TS PES payload readers on Seek for TSExtractor in non-HLS mode.

Currently, we are discarding all TS PES payload readers on seek. This is to fix
a bug that makes PES stream readers read packets inconsistently after seeking (first
time, the readers ignore all packets before PMT, second seek time after PMT is
read, the readers will read all packets before PMT).
This works fine if we don't support seeking to arbitrary position within the TS
stream. However, this may lead to a problem if we want to support seeking, because
some TS streams only have track format at the begining of the stream, and reseting
the payload readers after seeking can lead to track format not available anymore.

This change reverts the original fix (do not discard TS PES payload readers on seek
anymore). Instead, in non-HLS mode, after we have processed all PMTs packets in
the strea, we will re-seek to the beginning and perform readin again to make sure
the result will be consistent across multiple seeks. This is a prepare step to
support seeking in TS streams.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202466233"
tonihei,2018-06-28 11:36:33,https://api.github.com/repos/google/ExoPlayer/git/commits/dd14500ebad24a209770b5a12cead9644daecafa,dd14500ebad24a209770b5a12cead9644daecafa,"Add url (after redirection) to LoadEventInfo.

This url is readily available when creating media source events (from the
data source) but so far not published to external listeners. This change
adds a new field to LoadEventInfo which corresponds to DataSource.getUri().

Issue:#2054

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202459049"
tonihei,2018-06-28 11:05:43,https://api.github.com/repos/google/ExoPlayer/git/commits/236eb5cef63bf779261ec87c84282b95003021bd,236eb5cef63bf779261ec87c84282b95003021bd,"Add some leeway for finding additional tracks in PsExtractor.

Currently we immediately stop searching after we found one video and one
audio track. This change adds some leeway to detect additional tracks.

Issue:#4406

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202455491"
nic0lette,2018-06-27 19:35:43,https://api.github.com/repos/google/ExoPlayer/git/commits/4e35d1a47b5057fdcc6fd137c1b26cf61397dd82,4e35d1a47b5057fdcc6fd137c1b26cf61397dd82,"MediaSession extension: Allow setting of custom errors.

Add methods setCustomErrorMessage(@Nullable CharSequence message)
and setCustomErrorMessage(@Nullable CharSequence message, int code)
to MediaSessionConnector to report errors to the MediaSession
which are not player errors.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202352083"
nchavez324,2018-06-27 16:50:31,https://api.github.com/repos/google/ExoPlayer/git/commits/6b9fb456a123ddda9e02a6899f6fb10a88af9fdc,6b9fb456a123ddda9e02a6899f6fb10a88af9fdc,"Roll forward of CL 201223315 with ExoPlayer IMA extension fix
Original change by nickchavez@nickchavez:andcsvol:3257:citc on 2018/06/19 12:41:18.

Add VolumeProvider interface to VideoAdPlayer and VideoStreamPlayer.
  - Send volume on videoDisplay.start so that it can be sent to OMID.
  - Add unit tests for AdPlayerCalback and ExoPlayerVideoAdPlayerImpl.
  - Add functional tests for client side and DAI volume updates.

Add onVolumeChanged() to VideoAdPlayerCallback and VideoStreamPlayerCallback.
  - Implement volume updates for SDK owned video player.
  - Remove mute/unmute events, which are handled in JS instead (like iOS).
  - Collect volume changes from client side and DAI video players.

External: Publisher players will now have to implement getVolume() and onVolumeChanged() for custom video players.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202324636"
AquilesCanta,2018-06-27 15:33:33,https://api.github.com/repos/google/ExoPlayer/git/commits/fc2168eb617bf8b9ec5e61d8d8905115b8d762e6,fc2168eb617bf8b9ec5e61d8d8905115b8d762e6,"Add an errorCount argument to onLoadError

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202313695"
erdemguven,2018-06-27 12:48:04,https://api.github.com/repos/google/ExoPlayer/git/commits/93cbae5bff50eca719b0ac2542388f70d11b7e18,93cbae5bff50eca719b0ac2542388f70d11b7e18,"Use default Deserializers if non given to DownloadManager

Also moved shared code to SegmentDownloadAction between its subclasses.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202294880"
tonihei,2018-06-27 11:21:37,https://api.github.com/repos/google/ExoPlayer/git/commits/f2ce0d898193fd482590643cef6ca57646e4ee9d,f2ce0d898193fd482590643cef6ca57646e4ee9d,"Make RepresentationHolder immutable.

This allows to use it as a snapshot of the representation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202287466"
tonihei,2018-06-27 09:47:21,https://api.github.com/repos/google/ExoPlayer/git/commits/65a58ffcb5cf04344d451e64ac1012c2585bec97,65a58ffcb5cf04344d451e64ac1012c2585bec97,"Add DRM workaround for Asus Zenfone 2.

Issue: #4413

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202277924"
marcbaechinger,2018-06-26 16:00:12,https://api.github.com/repos/google/ExoPlayer/git/commits/5dd9ef0086dfbd29d789978b23ebd47b855e3367,5dd9ef0086dfbd29d789978b23ebd47b855e3367,"add invalidate methods for playback state, metadata and queue of the media session

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202136530"
ojw28,2018-06-26 15:51:49,https://api.github.com/repos/google/ExoPlayer/git/commits/3ec0cae0b216c4082d0937c209a32cd48802d0ba,3ec0cae0b216c4082d0937c209a32cd48802d0ba,"Update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202135484"
tonihei,2018-06-26 15:30:21,https://api.github.com/repos/google/ExoPlayer/git/commits/a494846a85c4cafca1504da6892fa62ee7bc5ceb,a494846a85c4cafca1504da6892fa62ee7bc5ceb,"Fix release notes formatting.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202132623"
AquilesCanta,2018-06-26 10:34:19,https://api.github.com/repos/google/ExoPlayer/git/commits/f850c0de73d1210fd5d93a22cb22b0f2ef7a9517,f850c0de73d1210fd5d93a22cb22b0f2ef7a9517,"Rename HlsPlaylistTracker's release to stop

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202103550"
andrewlewis,2018-06-26 10:03:36,https://api.github.com/repos/google/ExoPlayer/git/commits/9a6a72521f79ad534cc55d58cd48694a1e2a8aed,9a6a72521f79ad534cc55d58cd48694a1e2a8aed,"Make ImaAdsLoader robust to calls after it's released

Issue: #3879

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202100576"
andrewlewis,2018-06-26 06:32:19,https://api.github.com/repos/google/ExoPlayer/git/commits/57b7e18b230ee9c4b90154b361bb0e675ee541f3,57b7e18b230ee9c4b90154b361bb0e675ee541f3,"Add a test for preroll ad playback with ImaAdsLoader

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=202080962"
keiththompson,2018-06-27 15:19:22,https://api.github.com/repos/google/ExoPlayer/git/commits/8342b1dae4a0792df0a5799628ce92f8f46e8e4d,8342b1dae4a0792df0a5799628ce92f8f46e8e4d,Add withSkippedAd method to AdPlaybackState. Currently it is only possible to skip entire ad groups but not individual ads within a given ad group.
murdly,2018-06-27 10:29:04,https://api.github.com/repos/google/ExoPlayer/git/commits/99d3e8f1d39e1f605ec34345a4673dc817e95f70,99d3e8f1d39e1f605ec34345a4673dc817e95f70,opt out of using DummySurface on specific Fire TV device
ojw28,2018-06-26 14:54:16,https://api.github.com/repos/google/ExoPlayer/git/commits/f7ed789fc3841b2536f5629c6bb10f4cb4ee5130,f7ed789fc3841b2536f5629c6bb10f4cb4ee5130,"Merge pull request #4434 from google/dev-v2-r2.8.2

r2.8.2"
ojw28,2018-06-25 22:15:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d880fac582ea156ca84388d1ca9f8627c64c70d6,d880fac582ea156ca84388d1ca9f8627c64c70d6,Fix release build
AquilesCanta,2018-06-21 15:39:25,https://api.github.com/repos/google/ExoPlayer/git/commits/3ede1aaa8ec1633cd0e27f9dd56619a78a28e411,3ede1aaa8ec1633cd0e27f9dd56619a78a28e411,"Fix re-starting of DefaultHlsPlalyistTracker

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201530049"
tonihei,2018-06-12 14:26:26,https://api.github.com/repos/google/ExoPlayer/git/commits/35ac394de339fad2a988a0dce7e005c49da17254,35ac394de339fad2a988a0dce7e005c49da17254,"Add missing onLoadStarted events to HLS playlist tracker.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200211755"
AquilesCanta,2018-06-01 09:22:31,https://api.github.com/repos/google/ExoPlayer/git/commits/f1fe1c40a625e3fd516fec29c53e978e5023ca6e,f1fe1c40a625e3fd516fec29c53e978e5023ca6e,"Extract HlsPlaylistTracker interface

This allows injection of custom implementations and configuration of
DefaultHlsPlaylistTracker without modifying the HlsMediaSource interface.

Issue:#2844

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198846607"
AquilesCanta,2018-06-19 15:20:21,https://api.github.com/repos/google/ExoPlayer/git/commits/798b29e3eff3de07677471139cd21a995b963562,798b29e3eff3de07677471139cd21a995b963562,"Normalize timestamps in HlsChunkSource

Issue:#4394

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201178909"
andrewlewis,2018-06-21 15:03:30,https://api.github.com/repos/google/ExoPlayer/git/commits/680d3fda3edc1da0f6a20e8251b72030aa10b87c,680d3fda3edc1da0f6a20e8251b72030aa10b87c,"Fix download cancellation

Issue: #4403

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201525284"
andrewlewis,2018-06-20 17:38:00,https://api.github.com/repos/google/ExoPlayer/git/commits/b7d149604e48bb2620f3dd73215e06f3169b273c,b7d149604e48bb2620f3dd73215e06f3169b273c,"Fully clean up resources in EGLSurfaceTexture

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201376315"
AquilesCanta,2018-06-25 19:09:27,https://api.github.com/repos/google/ExoPlayer/git/commits/a1f89bec0dcc30bdc2f3a8889371447f701ae9b7,a1f89bec0dcc30bdc2f3a8889371447f701ae9b7,"Allow configuration of the Loader retry delay

Issue:#3370

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201996109"
botaydotcom,2018-06-25 16:51:47,https://api.github.com/repos/google/ExoPlayer/git/commits/eb8c686243b2650aa3b05f91637f320a4d871382,eb8c686243b2650aa3b05f91637f320a4d871382,"Fix a bug with MetadataRetriever getMedatadata query.

When getMedatadata from an ExtractorMediaPeriod, due to the MediaPeriod refreshing its Timeline twice, the MetadataRetriever may wrongly reset periodIndex of the current trackGroup to C.TIME_UNSET, which makes it unable to handle subsequent metadata queries.

This CL changes the MetadataRetriever to keep track of periodUid of the current trackGroup instead of period index. PeriodUid is not changed on timeline refreshing, so is not prone the existing problem.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201969350"
botaydotcom,2018-06-25 11:12:26,https://api.github.com/repos/google/ExoPlayer/git/commits/de57f0980131e041bfefdd25ce99e388c9daa61c,de57f0980131e041bfefdd25ce99e388c9daa61c,"Refactor TS Extractor.

Refactor sniff(), and extract a few methods out from read() to make it look clearer. This CL does not change any functionality.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201933207"
tonihei,2018-06-25 10:54:30,https://api.github.com/repos/google/ExoPlayer/git/commits/24c21a292f3a68ab427c094f0cab635bab4ff8b5,24c21a292f3a68ab427c094f0cab635bab4ff8b5,"Deprecate DefaultAnalyticsListener in favor of default no-ops in interface.

The DefaultAnalyticsListener was added for selective overrides. Now that Java 8
support is enabled, these selective listener overrides can be implemented
more easily and more flexible using default methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201931770"
ojw28,2018-06-22 16:27:37,https://api.github.com/repos/google/ExoPlayer/git/commits/a407c028d4e3fc59320cf1a51bc8edbff1e5c19f,a407c028d4e3fc59320cf1a51bc8edbff1e5c19f,"Wait for DRM keys before codec configuration on FireOS devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201695876"
tonihei,2018-06-22 16:24:28,https://api.github.com/repos/google/ExoPlayer/git/commits/156e2317cca99e9e1f114e75cd90f501d5c8df2a,156e2317cca99e9e1f114e75cd90f501d5c8df2a,"Deprecate Player.DefaultEventListener in favor of default no-ops in interface.

The DefaultEventListener was added for selective overrides. Now that Java 8
support is enabled, these selective listener overrides can be implemented
more easily and more flexible using default methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201695490"
AquilesCanta,2018-06-22 16:19:23,https://api.github.com/repos/google/ExoPlayer/git/commits/b031c3d6bbe9424c1c5dac6aef4bbca6293dfbd9,b031c3d6bbe9424c1c5dac6aef4bbca6293dfbd9,"Parse ms:laurl from ContentProtection in DASH

Issue:#3393

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201694813"
ojw28,2018-06-22 14:01:57,https://api.github.com/repos/google/ExoPlayer/git/commits/78d83304af63e5f781d325525cf7137e98ca3ed2,78d83304af63e5f781d325525cf7137e98ca3ed2,"Extract scheme specific data from PSSH for some FireOS devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201679215"
ojw28,2018-06-22 13:55:44,https://api.github.com/repos/google/ExoPlayer/git/commits/04d1d5a8b6cdd4ca56592774828d66a193e6ae8d,04d1d5a8b6cdd4ca56592774828d66a193e6ae8d,"Add some FireOS workarounds for max input buffer size limitations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201678686"
ojw28,2018-06-22 13:50:28,https://api.github.com/repos/google/ExoPlayer/git/commits/2043d90a739b82b6222ca4d8b9d06710f0d37f46,2043d90a739b82b6222ca4d8b9d06710f0d37f46,"Enable EOS workaround for FireTV Gen 2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201678261"
tonihei,2018-06-22 11:03:15,https://api.github.com/repos/google/ExoPlayer/git/commits/fcc0bd403ff2c9d0abe7f4b7503398e4e4636e06,fcc0bd403ff2c9d0abe7f4b7503398e4e4636e06,"Report uri and response headers of chunks.

Both values are helpful for event reporting, but are only available while
the data source is open. Similar to bytesLoaded, they need to be reported
through the Chunk.

Issue:#2054
Issue:#4361

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201664907"
andrewlewis,2018-06-22 10:49:56,https://api.github.com/repos/google/ExoPlayer/git/commits/ddda4a026dd882b44b079c8d7434967799431982,ddda4a026dd882b44b079c8d7434967799431982,"Add AudioComponent to the Player interface

This will make it possible for ImaAdsLoader to access the player volume when
used with SimpleExoPlayer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201664189"
AquilesCanta,2018-06-21 15:39:25,https://api.github.com/repos/google/ExoPlayer/git/commits/8802da6bb343aaf0092a517730ed02f0d0b7bfb1,8802da6bb343aaf0092a517730ed02f0d0b7bfb1,"Fix re-starting of DefaultHlsPlalyistTracker

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201530049"
andrewlewis,2018-06-21 15:03:30,https://api.github.com/repos/google/ExoPlayer/git/commits/a610857017ce795a296bd654e8739a613d064beb,a610857017ce795a296bd654e8739a613d064beb,"Fix download cancellation

Issue: #4403

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201525284"
marcbaechinger,2018-06-21 09:54:21,https://api.github.com/repos/google/ExoPlayer/git/commits/10690630bfdd14ddab6421b183b3621f4212633d,10690630bfdd14ddab6421b183b3621f4212633d,"allow an app to force an update of the player notification

Issue:#4379

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201497585"
andrewlewis,2018-06-21 08:02:20,https://api.github.com/repos/google/ExoPlayer/git/commits/38096fb73472718a87a78a8cd905bebd40403c9d,38096fb73472718a87a78a8cd905bebd40403c9d,"Add some Robolectric tests for ImaAdsLoader

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201484853"
andrewlewis,2018-06-20 17:38:00,https://api.github.com/repos/google/ExoPlayer/git/commits/8ab8b86a7b3a12fb869ecb53f4135310d95ba66e,8ab8b86a7b3a12fb869ecb53f4135310d95ba66e,"Fully clean up resources in EGLSurfaceTexture

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201376315"
BetweenTwoBits,2018-06-18 21:19:28,https://api.github.com/repos/google/ExoPlayer/git/commits/4b6edc5785c204b85d0fb388d38f2c66e2a923ba,4b6edc5785c204b85d0fb388d38f2c66e2a923ba,"Fix CaptioningManager background being shown behind cue background.

remove extra space"
ojw28,2018-06-20 17:28:05,https://api.github.com/repos/google/ExoPlayer/git/commits/c14d59041258a39320de6af959959a77a2fc5882,c14d59041258a39320de6af959959a77a2fc5882,"Fix release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201374393"
ojw28,2018-06-20 17:28:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6bdd184eab8fa3ca8cfb4aee823d158b067193b0,6bdd184eab8fa3ca8cfb4aee823d158b067193b0,"Fix release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201374393"
botaydotcom,2018-06-20 17:13:30,https://api.github.com/repos/google/ExoPlayer/git/commits/8dbec616c4a814f7849fc68fd147eeb519e3e872,8dbec616c4a814f7849fc68fd147eeb519e3e872,"Use isAtLeast() instead of (>=) to make the tests clearer.

Replace assertThat(a >= b).isTrue() with assertThat(a).isAtLeast(b) because it
reads more natural, and in case the assertion fails, it will print out the
actual values to help debugging.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201371993"
erdemguven,2018-06-20 09:53:26,https://api.github.com/repos/google/ExoPlayer/git/commits/d82f91845e862d11f8941a404b452d31857302ea,d82f91845e862d11f8941a404b452d31857302ea,"Fix HlsMediaPlaylist download using HlsDownloadHelper

Issue: #4396

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201324467"
marcbaechinger,2018-06-20 14:37:25,https://api.github.com/repos/google/ExoPlayer/git/commits/62ee13b11dcfaa504d9cab782662bcf8afcf7578,62ee13b11dcfaa504d9cab782662bcf8afcf7578,"allow apps to set custom metadata

[]

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201350930"
tonihei,2018-06-20 11:08:31,https://api.github.com/repos/google/ExoPlayer/git/commits/4f2b596062090e12b6f68486593acd0f5a950e59,4f2b596062090e12b6f68486593acd0f5a950e59,"Allow to specify player looper at the time of ExoPlayer creation.

Currently, the looper of the thread the player is created on is used (or the
main looper if this thread doesn't have a looper). To allow more control over
the threading, this change lets users specificy the looper which must be used
to call player methods and which is used for event callbacks.

Issue:#4278

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201331564"
erdemguven,2018-06-20 09:53:26,https://api.github.com/repos/google/ExoPlayer/git/commits/01ce549e8f5e5707d2bf12e90318cb9db6098458,01ce549e8f5e5707d2bf12e90318cb9db6098458,"Fix HlsMediaPlaylist download using HlsDownloadHelper

Issue: #4396

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201324467"
andrewlewis,2018-06-20 08:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/a75b5fb6a9225a87b89c3779b1d55f8ec7c2c062,a75b5fb6a9225a87b89c3779b1d55f8ec7c2c062,"Pass through all ID3 internal data from udta

Also switch from using a CommentFrame to a new InternalFrame type for ID3 data
stored with ID '----', to distinguish internal data from actual ID3 comments.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201315254"
AquilesCanta,2018-06-19 15:20:21,https://api.github.com/repos/google/ExoPlayer/git/commits/d8a61aade7fb82f0788c73d46ac551564b4b8971,d8a61aade7fb82f0788c73d46ac551564b4b8971,"Normalize timestamps in HlsChunkSource

Issue:#4394

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201178909"
botaydotcom,2018-06-19 10:21:35,https://api.github.com/repos/google/ExoPlayer/git/commits/3d3ab1f72eb6e8bbb49069130c28e20cedc6f30f,3d3ab1f72eb6e8bbb49069130c28e20cedc6f30f,"Add VideoRendererOutputCapturer

Added a capturer that can capture output from video renderer into bitmaps. This
class uses SurfaceCapturer to setup a surface, then configures this surface as the
output for a video renderer. Once the output is set, it will capture the
output frames from the video renderer and return them as bitmaps.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=201148184"
itaykinnrot,2017-06-04 14:19:37,https://api.github.com/repos/google/ExoPlayer/git/commits/cd9041c0894b9a599bbca4e4519900c4f97540c0,cd9041c0894b9a599bbca4e4519900c4f97540c0,Parse the label of audio and text from stream and add it to Format type + add it to default ui + update from dev-v2
ojw28,2018-06-18 14:29:23,https://api.github.com/repos/google/ExoPlayer/git/commits/0e4cb5297927fdb51f3cc6e24cb171b1e726c79b,0e4cb5297927fdb51f3cc6e24cb171b1e726c79b,"Don't show player controls unless key press is handled

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200991862"
ojw28,2018-06-18 13:44:23,https://api.github.com/repos/google/ExoPlayer/git/commits/9eedb8e855a8f5f784277c5e56a7c22485676a45,9eedb8e855a8f5f784277c5e56a7c22485676a45,"Add isControllerVisible

Issue: #4385

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200986828"
ojw28,2018-06-18 11:18:24,https://api.github.com/repos/google/ExoPlayer/git/commits/5725a72783d85eb879e6755292dc98a8755fb0ab,5725a72783d85eb879e6755292dc98a8755fb0ab,"Update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200972456"
ojw28,2018-06-18 12:23:10,https://api.github.com/repos/google/ExoPlayer/git/commits/eef986bf0c23127858e12d96a8fc8ead802939c8,eef986bf0c23127858e12d96a8fc8ead802939c8,"Merge pull request #4384 from Khang-NT/fix_document

Correct document of PlayerView & PlayerControlView"
andrewlewis,2018-06-18 08:36:06,https://api.github.com/repos/google/ExoPlayer/git/commits/1776e6e5b0f7660c26b38b77b8fcadbb9e099f1c,1776e6e5b0f7660c26b38b77b8fcadbb9e099f1c,"Make no context current when releasing DummySurface

This avoids a small native leak.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200955086"
ojw28,2018-06-14 09:23:28,https://api.github.com/repos/google/ExoPlayer/git/commits/3570232cf0cd63731e519bce82d8522898068df3,3570232cf0cd63731e519bce82d8522898068df3,"CEA608 - Add space when handling mid-row codes

Issue: #3906

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200526335"
ojw28,2018-06-08 22:03:39,https://api.github.com/repos/google/ExoPlayer/git/commits/9ecf959613b6d1d9f76dd37fdeaf495f77fdf691,9ecf959613b6d1d9f76dd37fdeaf495f77fdf691,"Offset SIDX timestamps by presentationTimeOffset

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199856613"
andrewlewis,2018-06-08 11:45:57,https://api.github.com/repos/google/ExoPlayer/git/commits/799d281e58c521bd8dafaa2a7f4c65ecabe41cc3,799d281e58c521bd8dafaa2a7f4c65ecabe41cc3,"Add support for registering custom MIME types

Also add a few missing MP4 object types.

Issue: #4264

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199778373"
ojw28,2018-06-08 07:38:16,https://api.github.com/repos/google/ExoPlayer/git/commits/7bf98b9fc2b6b1d5fac46aec8c8b961487e02ec9,7bf98b9fc2b6b1d5fac46aec8c8b961487e02ec9,"Update forced dependencies to fix release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199758072"
ojw28,2018-06-07 20:08:24,https://api.github.com/repos/google/ExoPlayer/git/commits/cae427ad7e8dcb5b942794a826592320c8f24d8c,cae427ad7e8dcb5b942794a826592320c8f24d8c,"Fix incorrect padding application

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199683216"
andrewlewis,2018-06-07 16:56:07,https://api.github.com/repos/google/ExoPlayer/git/commits/3f2d20140f0006748b9b044746ff772e1e1d5fef,3f2d20140f0006748b9b044746ff772e1e1d5fef,"Fix some javadoc errors

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199650794"
andrewlewis,2018-06-18 08:36:06,https://api.github.com/repos/google/ExoPlayer/git/commits/6c733702de74d545c1b7722ad160b9256b96888e,6c733702de74d545c1b7722ad160b9256b96888e,"Make no context current when releasing DummySurface

This avoids a small native leak.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200955086"
erdemguven,2018-06-15 09:19:00,https://api.github.com/repos/google/ExoPlayer/git/commits/e4f9ff5d9115d3101a4d3dd2f85aad78083088d1,e4f9ff5d9115d3101a4d3dd2f85aad78083088d1,"Add ability to update download requirements to DownloadService

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200689527"
ojw28,2018-06-14 09:23:28,https://api.github.com/repos/google/ExoPlayer/git/commits/afc19bf6dba83e49b5261fe7db78311b803af0e2,afc19bf6dba83e49b5261fe7db78311b803af0e2,"CEA608 - Add space when handling mid-row codes

Issue: #3906

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200526335"
tonihei,2018-06-12 15:15:20,https://api.github.com/repos/google/ExoPlayer/git/commits/4dc6c85de459c57fc3f04367b2f92fa203050cb7,4dc6c85de459c57fc3f04367b2f92fa203050cb7,"Use proper buffered duration in AnalyticsCollector.

This replaces the workaround calculation which was needed before the
referenced bug was fixed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200217241"
AquilesCanta,2018-06-12 14:32:29,https://api.github.com/repos/google/ExoPlayer/git/commits/943de70a1561a206acc7075f0edec44d8291303a,943de70a1561a206acc7075f0edec44d8291303a,"Pass HTTP DataSource's response headers to HlsExtractorFactory

Issue:#2025

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200212344"
tonihei,2018-06-12 14:26:26,https://api.github.com/repos/google/ExoPlayer/git/commits/37516d312657fed335e9e8ab95e592a1348bf697,37516d312657fed335e9e8ab95e592a1348bf697,"Add missing onLoadStarted events to HLS playlist tracker.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200211755"
andrewlewis,2018-06-12 09:29:25,https://api.github.com/repos/google/ExoPlayer/git/commits/7b10e637e762e02ae930ecd57055e4c993024777,7b10e637e762e02ae930ecd57055e4c993024777,"Support mu-law and A-law PCM with ffmpeg

Issue: #4360

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200186465"
tonihei,2018-06-11 16:59:56,https://api.github.com/repos/google/ExoPlayer/git/commits/877c6965c34e542f4dc8f4162f29ff685f0e01e5,877c6965c34e542f4dc8f4162f29ff685f0e01e5,"Correctly report type of ParsingLoadable.

The helper method only reported DATA_TYPE_UNKNOWN even if the actual type
is known.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200067296"
tonihei,2018-06-11 13:32:16,https://api.github.com/repos/google/ExoPlayer/git/commits/c1181000f94837b1a70910bf8add6dc33ba6fb36,c1181000f94837b1a70910bf8add6dc33ba6fb36,"Correctly report buffered position for multi-period window.

Currently only the buffered position in the current media period can be queried.

To achieve this, we save the buffered positions of all MediaPeriods to the
PlaybackInfo together with a list of MediaPeriodIds. ExoPlayerImpl can then
determine the correct buffered position for multi-period windows and windows
with midroll ads.

In addition, this change adds two new convenience methods to the Player interface
to query the total buffered duration across all windows and to get the buffered
duration of the content while playing an ad.

Issue:#4023

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=200041791"
ojw28,2018-06-08 22:03:39,https://api.github.com/repos/google/ExoPlayer/git/commits/d6878f152c9af863ad5928df8e90897b902c1540,d6878f152c9af863ad5928df8e90897b902c1540,"Offset SIDX timestamps by presentationTimeOffset

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199856613"
tonihei,2018-06-08 15:26:31,https://api.github.com/repos/google/ExoPlayer/git/commits/fcb9ca7b81f6cd6ced6798ad0223dba8a2b98b56,fcb9ca7b81f6cd6ced6798ad0223dba8a2b98b56,"Replace onViewportSizeChanged with onSurfaceSizeChanged in AnalyticsListener.

This allows the AnalyticsCollector to register itself as a VideoListener to
get these updates automatically instead of relying on the user to provide
updates.

The ViewportSizeReporter was amended to do the pixel to dp conversion itself.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199796532"
andrewlewis,2018-06-08 14:40:30,https://api.github.com/repos/google/ExoPlayer/git/commits/448ce43ddfee6ad328f95c726a4117a6fc09564f,448ce43ddfee6ad328f95c726a4117a6fc09564f,"Fix unused playlistParser in deprecated constructor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199792156"
erdemguven,2018-06-08 14:35:28,https://api.github.com/repos/google/ExoPlayer/git/commits/fb00221d7d4ec628ddf6f43f1fbf15c57c1559ac,fb00221d7d4ec628ddf6f43f1fbf15c57c1559ac,"Fix demo app multi period stream track selection for downloading

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199791722"
tonihei,2018-06-08 14:15:28,https://api.github.com/repos/google/ExoPlayer/git/commits/0beff724520c6a00519e8bd5219662a423d58de6,0beff724520c6a00519e8bd5219662a423d58de6,"Remove onNetworkTypeChanged from AnalyticsListener.

It doesn't really serve a purpose and is not automatically triggered.
Apps need to trigger it manually through
AnalyticsCollector.notifyNetworkTypeChanged which is easy to forget.
Moreover, the current network type can be obtained by Util.getNetworkType
at any time when it's needed without the need for a listener.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199790033"
andrewlewis,2018-06-08 11:45:57,https://api.github.com/repos/google/ExoPlayer/git/commits/f02788af4b409f4940f810179ac81945a4e7dd2a,f02788af4b409f4940f810179ac81945a4e7dd2a,"Add support for registering custom MIME types

Also add a few missing MP4 object types.

Issue: #4264

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199778373"
erdemguven,2018-06-08 09:11:37,https://api.github.com/repos/google/ExoPlayer/git/commits/a406dc8bee7a9fdcb57d2a5a209ff2506e58904f,a406dc8bee7a9fdcb57d2a5a209ff2506e58904f,"Use TrackKey in place of RepresentetionKey, StreamKey, RenditionKey

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199767518"
ojw28,2018-06-08 07:38:16,https://api.github.com/repos/google/ExoPlayer/git/commits/8e65696f02abe6f7e75c6ad473f57c1a0e3393a4,8e65696f02abe6f7e75c6ad473f57c1a0e3393a4,"Update forced dependencies to fix release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199758072"
ojw28,2018-06-07 20:08:24,https://api.github.com/repos/google/ExoPlayer/git/commits/b408de9ad9a19028cd3060bbdcf056cf2bc1eee0,b408de9ad9a19028cd3060bbdcf056cf2bc1eee0,"Fix incorrect padding application

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199683216"
andrewlewis,2018-06-07 16:56:07,https://api.github.com/repos/google/ExoPlayer/git/commits/4256759011a83575be1d8ea0ceb997fef5c53f48,4256759011a83575be1d8ea0ceb997fef5c53f48,"Fix some javadoc errors

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199650794"
AquilesCanta,2018-06-07 16:06:17,https://api.github.com/repos/google/ExoPlayer/git/commits/4bbc93b0228eda41d8960947eed176346b9cd323,4bbc93b0228eda41d8960947eed176346b9cd323,"Add license server URL to SchemeData

Allows DrmInitData to carry a license server URL when the media declares one.

Issue:#3393

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199643743"
tonihei,2018-06-07 13:45:03,https://api.github.com/repos/google/ExoPlayer/git/commits/48193e2901bf4860d7b2a62645f122de157fc1ea,48193e2901bf4860d7b2a62645f122de157fc1ea,"Add QoE field reporter for formats.

This reports video and audio format selections.
See [] for spec details.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199627176"
AquilesCanta,2018-06-07 10:07:27,https://api.github.com/repos/google/ExoPlayer/git/commits/bb684b528e7dc6882609601f4ecabb84d6e6b671,bb684b528e7dc6882609601f4ecabb84d6e6b671,"Promote getResponseHeaders to DataSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199607604"
tonihei,2018-06-07 09:42:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ccc41f1adf106f38d57985e465e86afca5315119,ccc41f1adf106f38d57985e465e86afca5315119,"Add surface size change callback to VideoListener.

This allows to detect changes in the surface size. SimpleExoPlayer already
has the necessary listeners to report size changes for all surfaces whose
lifecycle are managed by SimpleExoPlayer.

In a subsequent change, AnalyticsCollector can be registered as a
VideoListener to automatically notify of surface size changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199605434"
tonihei,2018-06-07 09:41:21,https://api.github.com/repos/google/ExoPlayer/git/commits/9f20683a6c9f40c252472e1f83ee1efa5dbe53b8,9f20683a6c9f40c252472e1f83ee1efa5dbe53b8,"Factor out Handler creation in construtor to prevent warning suppression.

Using new Handler(this) in a constructor potentially leaks an uninitialized
object. This is mostly not a problem because we don't use the Handler within
the constructor. Added a Util method to keep the warning suppression local.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199605377"
Khang-NT,2018-06-14 17:46:10,https://api.github.com/repos/google/ExoPlayer/git/commits/3a99f965bd4c336690664d5791b454ee535c654b,3a99f965bd4c336690664d5791b454ee535c654b,"Correct document of PlayerView & PlayerControlView
Change R.id to R.layout"
andrewlewis,2018-06-06 15:55:07,https://api.github.com/repos/google/ExoPlayer/git/commits/ef8a47ba7db79c12fce7477dc40de50f62a9e6bb,ef8a47ba7db79c12fce7477dc40de50f62a9e6bb,"Fix some categories of error prone warnings

When switching from Stack to ArrayDeque, calls to add() need to be replaced by
calls to push() because ArrayDeque treats the first element in the list as the
top of the stack.

String.split() has counterintuitive default behavior; see
https://github.com/google/error-prone/blob/master/docs/bugpattern/StringSplitter.md.
I've switched usages to pass limit = -1 argument, which means empty elements are
no longer removed from the end of the returned array.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199472592"
andrewlewis,2018-06-06 16:42:23,https://api.github.com/repos/google/ExoPlayer/git/commits/879f6894885e941fd3b74e3abb1e38ac9821393f,879f6894885e941fd3b74e3abb1e38ac9821393f,"Set METADATA_KEY_TITLE

Issue: #4292

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199478946"
ojw28,2018-06-06 13:09:26,https://api.github.com/repos/google/ExoPlayer/git/commits/1481801891774038e88e8b67afda2a0757f11bf5,1481801891774038e88e8b67afda2a0757f11bf5,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199453125"
AquilesCanta,2018-06-06 12:22:55,https://api.github.com/repos/google/ExoPlayer/git/commits/04565a3158e48ce73a80af7e15237a3543bb4cd2,04565a3158e48ce73a80af7e15237a3543bb4cd2,"Fix leak in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199448766"
tonihei,2018-06-06 17:34:21,https://api.github.com/repos/google/ExoPlayer/git/commits/cad3de91c92d835e3a438b39897115e992478196,cad3de91c92d835e3a438b39897115e992478196,"Add utility methods for network type and country.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199487948"
andrewlewis,2018-06-06 16:42:23,https://api.github.com/repos/google/ExoPlayer/git/commits/199f686fe1a884a403753383e2ca93240b21ff55,199f686fe1a884a403753383e2ca93240b21ff55,"Set METADATA_KEY_TITLE

Issue: #4292

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199478946"
andrewlewis,2018-06-06 15:55:07,https://api.github.com/repos/google/ExoPlayer/git/commits/f59e6e572bde74d60b89b00f49df87de6bb5ac9e,f59e6e572bde74d60b89b00f49df87de6bb5ac9e,"Fix some categories of error prone warnings

When switching from Stack to ArrayDeque, calls to add() need to be replaced by
calls to push() because ArrayDeque treats the first element in the list as the
top of the stack.

String.split() has counterintuitive default behavior; see
https://github.com/google/error-prone/blob/master/docs/bugpattern/StringSplitter.md.
I've switched usages to pass limit = -1 argument, which means empty elements are
no longer removed from the end of the returned array.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199472592"
botaydotcom,2018-06-06 15:50:07,https://api.github.com/repos/google/ExoPlayer/git/commits/a0b4e58312aa50dccd2dbaadcb006a1775ef90fb,a0b4e58312aa50dccd2dbaadcb006a1775ef90fb,"Update PixelCopySurfaceCapturerV24, uses only 1 copy step.

Currently, we are using 2 copy steps for PixelCopySurfaceCapturerV24:
- Copy from the source surface to a similarly sized bitmap (using PixelCopy API).
- Copy from the bitmap to a scaled bitmap, based on the given output size, using scaledBitmap API.
This CL merges the 2 steps and uses PixelCopy API to perform copy directly from
the source surface to the bitmap of the given output size.
However, since our test uses scaledBitmap API to create reference bitmap from original image, due to various Bitmap copy optimizations (filtering, antialiasing etc...) that are different between PixelCopy API and scaledBitmap API implementations, the result images cannot be the same. We can perform the our tests by asserting that their PSNR value is very high, which means they are very similar.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199472005"
ojw28,2018-06-06 13:09:26,https://api.github.com/repos/google/ExoPlayer/git/commits/50c50a463592dbfba9f6967ee96c9600a20e8d52,50c50a463592dbfba9f6967ee96c9600a20e8d52,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199453125"
AquilesCanta,2018-06-06 12:22:55,https://api.github.com/repos/google/ExoPlayer/git/commits/645363059b5a400f92f9f800b150124b9414c42f,645363059b5a400f92f9f800b150124b9414c42f,"Fix leak in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199448766"
ojw28,2018-06-05 21:37:44,https://api.github.com/repos/google/ExoPlayer/git/commits/a877bbaf7ba51e8adc672919663b6ed50c38378a,a877bbaf7ba51e8adc672919663b6ed50c38378a,Remove NullableType usage from release branch
ojw28,2018-06-05 21:30:58,https://api.github.com/repos/google/ExoPlayer/git/commits/97e68ecc3120036c6fbeaae28b60ec0eb7549dfb,97e68ecc3120036c6fbeaae28b60ec0eb7549dfb,Fix release branch
ojw28,2018-06-05 18:34:54,https://api.github.com/repos/google/ExoPlayer/git/commits/615b2b103980403187341a1843c215f1605abcc4,615b2b103980403187341a1843c215f1605abcc4,Fix punctuation
TakuSemba,2018-05-29 06:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/993eb8eda078845b3fbbc4524d53ed04d27425de,993eb8eda078845b3fbbc4524d53ed04d27425de,close initDataSource after reading
Anton111111,2018-05-29 07:28:17,https://api.github.com/repos/google/ExoPlayer/git/commits/4998354cb1e807c669465cd0d39a785b7404c226,4998354cb1e807c669465cd0d39a785b7404c226,"Blacklist Moto C from setOutputSurface

Issue: #4315"
ojw28,2018-06-05 18:34:54,https://api.github.com/repos/google/ExoPlayer/git/commits/050ee4a0a378df59d17c690ef61fea4251c5b810,050ee4a0a378df59d17c690ef61fea4251c5b810,Fix punctuation
ojw28,2018-06-05 18:25:14,https://api.github.com/repos/google/ExoPlayer/git/commits/c7c9788f03027536f16bb92d6bebb3ce0453f365,c7c9788f03027536f16bb92d6bebb3ce0453f365,"Merge pull request #4316 from Anton111111/dev-v2

Blacklist Moto C from setOutputSurface"
ojw28,2018-06-05 18:25:01,https://api.github.com/repos/google/ExoPlayer/git/commits/ad2996afe4c8744e00311207bb25389ecdcecbd6,ad2996afe4c8744e00311207bb25389ecdcecbd6,"Merge pull request #4314 from TakuSemba/fix-bug-when-loading-init-data

close initDataSource after reading"
tonihei,2018-06-05 13:20:30,https://api.github.com/repos/google/ExoPlayer/git/commits/1773708fe454b222cfd88f63145e71fac1e485b0,1773708fe454b222cfd88f63145e71fac1e485b0,"Allow passing BandwidthMeter to TrackSelector and TrackSelection.Factory.

This enabled the player to specify the bandwidth meter after the track
selector and the track selection factory have been created.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199286400"
tonihei,2018-06-05 09:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/3c6ca19c8567231d9050d76d5152f9f87b9cf7c7,3c6ca19c8567231d9050d76d5152f9f87b9cf7c7,"Fix track selection nullability issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199266768"
ojw28,2018-06-04 16:24:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6a82f99ca15c09ca95742cdc9d96bebca832a29e,6a82f99ca15c09ca95742cdc9d96bebca832a29e,"Explicitly null MediaPeriod callbacks on release

If a MediaPeriod uses a Loadable, then there are typically
reference chains of the form:

LoadingThread[GCroot]->Loadable->MediaPeriod->Player

Where the player is the MediaPeriod callback. When the
player is released, this reference chain prevents the
player from being GC'd until Loadable cancellation
completes, which may not always be fast. This in turn
will typically prevent the application's activity from
being GC'd, since it'll normally be registered as a
listener on the player (directly or indirectly via
something like a view).

This change mitigates the issue by removing references
that the MediaPeriod holds back to the player. The
MediaPeriod will still not be eligible for GC, but the
player and application activity will be, which in most
cases will be most of the leak (in terms of size).

Issue: #4249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199143646"
erdemguven,2018-06-04 14:30:27,https://api.github.com/repos/google/ExoPlayer/git/commits/5a6507b72da90d8589af5f557a368ae065a36835,5a6507b72da90d8589af5f557a368ae065a36835,"Fix starting the download service in the background throw exception

This happens when the device screen is locked.

This fixes a previous attempt to fix the problem.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199130325"
andrewlewis,2018-06-04 12:47:51,https://api.github.com/repos/google/ExoPlayer/git/commits/0d59dc4c436d78d809a3ca4d4d2a36c1711fae84,0d59dc4c436d78d809a3ca4d4d2a36c1711fae84,"Fix variable name

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199120421"
tonihei,2018-06-04 10:00:35,https://api.github.com/repos/google/ExoPlayer/git/commits/b68dcb0b5b49650c8e42e152fee16472a995f1df,b68dcb0b5b49650c8e42e152fee16472a995f1df,"Allow setting player lazily in AnalyticsCollector.

This helps to use the AnalyticsCollector without SimpleExoPlayer. Currently,
that may be problematic, if the contructor needs the player, but in order to
create the player, one already needs the AnalyticsCollector as a listener for
the renderers.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199105012"
erdemguven,2018-06-01 15:25:29,https://api.github.com/repos/google/ExoPlayer/git/commits/a535da81288782d52782e57b966f1d4c8f5b0dc4,a535da81288782d52782e57b966f1d4c8f5b0dc4,"Fix starting the download service in the background throw exception

This happens when the device screen is locked.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198875192"
ojw28,2018-06-01 14:46:29,https://api.github.com/repos/google/ExoPlayer/git/commits/7621a71bc390164cffba9ea8533c10933bef9ea6,7621a71bc390164cffba9ea8533c10933bef9ea6,"Remove Loadable.isLoadCanceled

This simplifies Loadable implementations, and also removes the
possibility of an incorrect Loadable implementation causing the
wrong Loader.Callback method being called (perviously, for the
correct method to be called, we relied on isLoadCanceled being
implemented correctly).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198871133"
erdemguven,2018-06-01 12:44:04,https://api.github.com/repos/google/ExoPlayer/git/commits/3670111310bdae56a58ecbb58dfd14d212a5112c,3670111310bdae56a58ecbb58dfd14d212a5112c,"Avoid starting RequirementsWatcher if there is no download task

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198860680"
tonihei,2018-06-01 11:31:10,https://api.github.com/repos/google/ExoPlayer/git/commits/928cbfa7bcb63d7a26f67d8bf094255ccc92fa5a,928cbfa7bcb63d7a26f67d8bf094255ccc92fa5a,"Replace hash by Object reference for uids.

There is the small (but unlikely) chance that the uids clash because the
Objects have the same hash code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198855724"
ojw28,2018-05-31 18:04:00,https://api.github.com/repos/google/ExoPlayer/git/commits/7d0769249f7d88c03c984b37849cea8bbdddff54,7d0769249f7d88c03c984b37849cea8bbdddff54,"Avoid possibility of leaking an activity/service context

The bug here was that we'd create a VideoFrameReleaseTimeHelper
using whatever context DefaultRenderersFactory has, and it would
then hold a reference to that context via DisplayManager. A leak
could then occur if the player outlived the life of the context
used to create it (which would be strange/unusual, but not
impossible).

Issue: #4249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198747599"
ojw28,2018-05-31 16:52:18,https://api.github.com/repos/google/ExoPlayer/git/commits/4ecce9802bf549fc563ce46fdd8725e67654696f,4ecce9802bf549fc563ce46fdd8725e67654696f,"Explicitly null out LoadTask.callback on release

As highlighted by the ref'd issue, we can end up with
memory leaks if Loadable.load implementations take a long
time to return upon cancelation. This change cuts off one
of the two problematic reference chains.

This doesn't do much about the ref'd issue, since there's
a second reference chain that's much harder to deal with:
Thread->LoadTask->loadable. But since it's easy just to
cut this one off, I figure it makes sense to do so.

Issue: #4249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198735386"
tonihei,2018-05-31 10:11:25,https://api.github.com/repos/google/ExoPlayer/git/commits/cd65cc85e21a1c890760fab132c4e4d8a8b2f7da,cd65cc85e21a1c890760fab132c4e4d8a8b2f7da,"Clarify threading requirements for the player in the doc.

This makes the requirement that all calls are made on one thread more
explicit and also mentions this in the Getting Started guide.

Issue:#4278

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198694579"
andrewlewis,2018-05-30 10:45:29,https://api.github.com/repos/google/ExoPlayer/git/commits/2bbfc8424259aaebd94e35e6564cf5483be48912,2bbfc8424259aaebd94e35e6564cf5483be48912,"Don't advertise support for video/mpeg ads

Issue: #4297

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198536888"
andrewlewis,2018-05-30 10:38:43,https://api.github.com/repos/google/ExoPlayer/git/commits/f7dcee2e78925eb467f212f88b7b894dc25c468e,f7dcee2e78925eb467f212f88b7b894dc25c468e,"Update IMA and Play Services

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198536438"
ojw28,2018-05-29 15:04:57,https://api.github.com/repos/google/ExoPlayer/git/commits/059f8107740f62107ae0d594cbb2cae220e24e0c,059f8107740f62107ae0d594cbb2cae220e24e0c,"Make BaseMediaChunkOutput properly public

I think it was just wrong that it was package private before, since
it resulted in our public API referencing something that's not part
of the public API:

https://google.github.io/ExoPlayer/doc/reference/com/google/android/exoplayer2/source/chunk/BaseMediaChunk.html#init-com.google.android.exoplayer2.source.chunk.BaseMediaChunkOutput-

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198396555"
erdemguven,2018-05-29 10:02:20,https://api.github.com/repos/google/ExoPlayer/git/commits/1d7ecd73b7c40e8cc5a7def2757cc210b589ebb4,1d7ecd73b7c40e8cc5a7def2757cc210b589ebb4,"Roll forward of []

Set content length and redirect uri in a single transaction.

New: Fixed the code where DataSpec.uri is set to null in []

Automated g4 rollback of changelist 196765970.

*** Reason for rollback ***

Fixed the code where DataSpec.uri is set to null in []

*** Original change description ***

Automated g4 rollback of changelist 194932235.

*** Reason for rollback ***

This CL breaks the playability of Mango's offlined progressive videos.

*** Original change description ***

Set content length and redirect uri in a single transaction

NORELNOTES=true
NO_BUG

***

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198370211"
tonihei,2018-05-25 11:02:53,https://api.github.com/repos/google/ExoPlayer/git/commits/9de96782fd651491c801728eedcb0b8132ae139f,9de96782fd651491c801728eedcb0b8132ae139f,"Serialize recursive listener notifications.

When the player state is changed from an event listener callback, we may
get recursive listener notifications. These recursions can produce a wrong
order, skip or duplicate updates, and send different notifications to
different listeners.

This change serializes listener notifications by clustering all update data
in a helper data class and adding the updates to a queue which can be handled
in a loop on the outer layer of the recursion.

As playWhenReady updates also reference the current playbackInfo, we need to
redirect the listener notifcations for setPlayWhenReady to the same queue.

Issue:#4276

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198031431"
tonihei,2018-06-05 09:58:21,https://api.github.com/repos/google/ExoPlayer/git/commits/23afdd6f66843dccc5ca5f64480b0504cfaff854,23afdd6f66843dccc5ca5f64480b0504cfaff854,"Add QoEAnalyticsListener implementation and test.

The implementation keeps track of QoE sessions and forwards events to the
field reporters of the relevant sessions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199269574"
tonihei,2018-06-05 09:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/841ce9df71f6b8ea15f582262e7d848a42699cf3,841ce9df71f6b8ea15f582262e7d848a42699cf3,"Fix track selection nullability issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199266768"
AquilesCanta,2018-06-05 09:21:14,https://api.github.com/repos/google/ExoPlayer/git/commits/17ab9da5b675c93b23ce713bf3bae44b74273178,17ab9da5b675c93b23ce713bf3bae44b74273178,"Enable java 8 for some missing projects

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199265539"
ojw28,2018-06-04 16:24:05,https://api.github.com/repos/google/ExoPlayer/git/commits/a5820b7535048cde26928fdc7f4868d7c1ead225,a5820b7535048cde26928fdc7f4868d7c1ead225,"Explicitly null MediaPeriod callbacks on release

If a MediaPeriod uses a Loadable, then there are typically
reference chains of the form:

LoadingThread[GCroot]->Loadable->MediaPeriod->Player

Where the player is the MediaPeriod callback. When the
player is released, this reference chain prevents the
player from being GC'd until Loadable cancellation
completes, which may not always be fast. This in turn
will typically prevent the application's activity from
being GC'd, since it'll normally be registered as a
listener on the player (directly or indirectly via
something like a view).

This change mitigates the issue by removing references
that the MediaPeriod holds back to the player. The
MediaPeriod will still not be eligible for GC, but the
player and application activity will be, which in most
cases will be most of the leak (in terms of size).

Issue: #4249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199143646"
erdemguven,2018-06-04 14:30:27,https://api.github.com/repos/google/ExoPlayer/git/commits/810e06c33887833fb2c39d8e72c75bd5c01939b5,810e06c33887833fb2c39d8e72c75bd5c01939b5,"Fix starting the download service in the background throw exception

This happens when the device screen is locked.

This fixes a previous attempt to fix the problem.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199130325"
tonihei,2018-06-04 13:36:33,https://api.github.com/repos/google/ExoPlayer/git/commits/0f1931cbcf9d1adaec90b041fecbf679430a2d71,0f1931cbcf9d1adaec90b041fecbf679430a2d71,"Add getTransferListener to BandwidthMeter.

This will allow the player to obtain the transfer listener used by the
bandwidth meter in order to pass it automatically to the relevant data
sources.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199124880"
andrewlewis,2018-06-04 12:47:51,https://api.github.com/repos/google/ExoPlayer/git/commits/bdaea799f1ab991081c990f2f2c1f213bfb04de6,bdaea799f1ab991081c990f2f2c1f213bfb04de6,"Fix variable name

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199120421"
falhassen,2018-06-04 11:06:16,https://api.github.com/repos/google/ExoPlayer/git/commits/8e4e5fe0cc6f673598419729210aa8c5a3feed0d,8e4e5fe0cc6f673598419729210aa8c5a3feed0d,"Fix javadoc in CacheKeyFactory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199110920"
tonihei,2018-06-04 10:00:35,https://api.github.com/repos/google/ExoPlayer/git/commits/007d3c61bd5e98d4f28ed25bd0c169e993f0c99b,007d3c61bd5e98d4f28ed25bd0c169e993f0c99b,"Allow setting player lazily in AnalyticsCollector.

This helps to use the AnalyticsCollector without SimpleExoPlayer. Currently,
that may be problematic, if the contructor needs the player, but in order to
create the player, one already needs the AnalyticsCollector as a listener for
the renderers.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=199105012"
falhassen,2018-06-01 15:57:01,https://api.github.com/repos/google/ExoPlayer/git/commits/49eb27da0acb81be3066d098fbcab3f2189c76d7,49eb27da0acb81be3066d098fbcab3f2189c76d7,"Add a CacheKeyFactory to CacheDataSource.

A CacheKeyFactory can be passed to the CacheDataSource constructor, allowing clients to dynamically generate a custom cache key for any given upstream uri.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198878723"
erdemguven,2018-06-01 15:25:29,https://api.github.com/repos/google/ExoPlayer/git/commits/536bd68294af4151a71ad8ee076eef980333c279,536bd68294af4151a71ad8ee076eef980333c279,"Fix starting the download service in the background throw exception

This happens when the device screen is locked.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198875192"
ojw28,2018-06-01 14:46:29,https://api.github.com/repos/google/ExoPlayer/git/commits/6cfc7b7ebb685f4596cab148cb0f156293ee6b04,6cfc7b7ebb685f4596cab148cb0f156293ee6b04,"Remove Loadable.isLoadCanceled

This simplifies Loadable implementations, and also removes the
possibility of an incorrect Loadable implementation causing the
wrong Loader.Callback method being called (perviously, for the
correct method to be called, we relied on isLoadCanceled being
implemented correctly).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198871133"
erdemguven,2018-06-01 12:44:04,https://api.github.com/repos/google/ExoPlayer/git/commits/47c1404865b6c1455de6aad825cc70c45d2ba5be,47c1404865b6c1455de6aad825cc70c45d2ba5be,"Avoid starting RequirementsWatcher if there is no download task

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198860680"
tonihei,2018-06-01 11:31:10,https://api.github.com/repos/google/ExoPlayer/git/commits/bf3c943b233be2aaf7cb95dd50c3845bfafcec9a,bf3c943b233be2aaf7cb95dd50c3845bfafcec9a,"Replace hash by Object reference for uids.

There is the small (but unlikely) chance that the uids clash because the
Objects have the same hash code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198855724"
tonihei,2018-06-01 11:30:33,https://api.github.com/repos/google/ExoPlayer/git/commits/b6113763b436d8b2c7d1ceae96ced562726db982,b6113763b436d8b2c7d1ceae96ced562726db982,"Allow lazy preparation of child source in a concatenation.

This adds an optional parameter to ConcatenatingMediaSource to prepare
child sources only lazily when are needed. This is helpful for long playlists
of media sources with manifests to prevent a lot of simultaneous manifest
loads.

Issue:#3972

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198855676"
AquilesCanta,2018-06-01 09:22:31,https://api.github.com/repos/google/ExoPlayer/git/commits/7f866b2a070712e75bfeac873c05a2f9c7ce340e,7f866b2a070712e75bfeac873c05a2f9c7ce340e,"Extract HlsPlaylistTracker interface

This allows injection of custom implementations and configuration of
DefaultHlsPlaylistTracker without modifying the HlsMediaSource interface.

Issue:#2844

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198846607"
ojw28,2018-05-31 18:04:00,https://api.github.com/repos/google/ExoPlayer/git/commits/29b9320fb9ce9b0ee592c1192d795caee86e8be0,29b9320fb9ce9b0ee592c1192d795caee86e8be0,"Avoid possibility of leaking an activity/service context

The bug here was that we'd create a VideoFrameReleaseTimeHelper
using whatever context DefaultRenderersFactory has, and it would
then hold a reference to that context via DisplayManager. A leak
could then occur if the player outlived the life of the context
used to create it (which would be strange/unusual, but not
impossible).

Issue: #4249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198747599"
ojw28,2018-05-31 16:52:18,https://api.github.com/repos/google/ExoPlayer/git/commits/69b4aa9e36b854ee34a2b104d9569ab7d0767ea7,69b4aa9e36b854ee34a2b104d9569ab7d0767ea7,"Explicitly null out LoadTask.callback on release

As highlighted by the ref'd issue, we can end up with
memory leaks if Loadable.load implementations take a long
time to return upon cancelation. This change cuts off one
of the two problematic reference chains.

This doesn't do much about the ref'd issue, since there's
a second reference chain that's much harder to deal with:
Thread->LoadTask->loadable. But since it's easy just to
cut this one off, I figure it makes sense to do so.

Issue: #4249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198735386"
tonihei,2018-05-31 12:59:31,https://api.github.com/repos/google/ExoPlayer/git/commits/27f009d239c819cd6a0eb109087ec372701f7ec9,27f009d239c819cd6a0eb109087ec372701f7ec9,"Enable Java 8 support.

This enables compiler support for Java 8 features.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198709705"
tonihei,2018-05-31 10:11:25,https://api.github.com/repos/google/ExoPlayer/git/commits/2813c0699fef8a2e4df5a37534401cbdaa8af572,2813c0699fef8a2e4df5a37534401cbdaa8af572,"Clarify threading requirements for the player in the doc.

This makes the requirement that all calls are made on one thread more
explicit and also mentions this in the Getting Started guide.

Issue:#4278

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198694579"
andrewlewis,2018-05-30 10:45:29,https://api.github.com/repos/google/ExoPlayer/git/commits/9852af7372ee4bb68d9bb73f4935e7caf3294f69,9852af7372ee4bb68d9bb73f4935e7caf3294f69,"Don't advertise support for video/mpeg ads

Issue: #4297

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198536888"
andrewlewis,2018-05-30 10:38:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c7081ed76418fd5384570704d335f10175efb2bf,c7081ed76418fd5384570704d335f10175efb2bf,"Update IMA and Play Services

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198536438"
ojw28,2018-05-29 15:04:57,https://api.github.com/repos/google/ExoPlayer/git/commits/25f4ee22d63ef2ccbbdcbfe09bfc489f02746a13,25f4ee22d63ef2ccbbdcbfe09bfc489f02746a13,"Make BaseMediaChunkOutput properly public

I think it was just wrong that it was package private before, since
it resulted in our public API referencing something that's not part
of the public API:

https://google.github.io/ExoPlayer/doc/reference/com/google/android/exoplayer2/source/chunk/BaseMediaChunk.html#init-com.google.android.exoplayer2.source.chunk.BaseMediaChunkOutput-

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198396555"
erdemguven,2018-05-29 10:02:20,https://api.github.com/repos/google/ExoPlayer/git/commits/f07331654765b1adbe6281ff38e1341d2f26e1e5,f07331654765b1adbe6281ff38e1341d2f26e1e5,"Roll forward of []

Set content length and redirect uri in a single transaction.

New: Fixed the code where DataSpec.uri is set to null in []

Automated g4 rollback of changelist 196765970.

*** Reason for rollback ***

Fixed the code where DataSpec.uri is set to null in []

*** Original change description ***

Automated g4 rollback of changelist 194932235.

*** Reason for rollback ***

This CL breaks the playability of Mango's offlined progressive videos.

*** Original change description ***

Set content length and redirect uri in a single transaction

NORELNOTES=true
NO_BUG

***

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198370211"
tonihei,2018-05-25 11:02:53,https://api.github.com/repos/google/ExoPlayer/git/commits/0912fd1d74c413918f4feaf5c1e504e458bbba4c,0912fd1d74c413918f4feaf5c1e504e458bbba4c,"Serialize recursive listener notifications.

When the player state is changed from an event listener callback, we may
get recursive listener notifications. These recursions can produce a wrong
order, skip or duplicate updates, and send different notifications to
different listeners.

This change serializes listener notifications by clustering all update data
in a helper data class and adding the updates to a queue which can be handled
in a loop on the outer layer of the recursion.

As playWhenReady updates also reference the current playbackInfo, we need to
redirect the listener notifcations for setPlayWhenReady to the same queue.

Issue:#4276

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=198031431"
botaydotcom,2018-05-23 15:53:08,https://api.github.com/repos/google/ExoPlayer/git/commits/0cb34dcd1ccb5b9534b47030de495e7b5bf5e9d6,0cb34dcd1ccb5b9534b47030de495e7b5bf5e9d6,"Add SurfaceCapturer base class, and provide the first implementation

Use PixelCopy API for the first SurfaceCapturer implementation. This supports
devices from API 24+.

Github: #3609.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197732711"
tonihei,2018-05-23 15:43:39,https://api.github.com/repos/google/ExoPlayer/git/commits/a98d8fedfabf1a31e932357387afcbc31927d262,a98d8fedfabf1a31e932357387afcbc31927d262,"Fix nullness errors in at least one file per module to be able to use test.

Some module/extensions couldn't use the static test so far because all files
needed to be put on the blacklist. To ensure the test it set up for all
modules, this fixes at least one file for each of the modules.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197731449"
Anton111111,2018-05-29 07:28:17,https://api.github.com/repos/google/ExoPlayer/git/commits/ff8b3ebfb84dcc8d6eb0d0786a53cd855f82402d,ff8b3ebfb84dcc8d6eb0d0786a53cd855f82402d,"Blacklist Moto C from setOutputSurface

Issue: #4315"
TakuSemba,2018-05-29 06:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/368534909b96ff330925b8e0f64b83d5ffe8f6ab,368534909b96ff330925b8e0f64b83d5ffe8f6ab,close initDataSource after reading
andrewlewis,2018-05-22 11:18:22,https://api.github.com/repos/google/ExoPlayer/git/commits/2b55c91af0afd1f50f689adb1046f1cf78c887f6,2b55c91af0afd1f50f689adb1046f1cf78c887f6,"Merge pull request #4281 from google/dev-2.8.1-rc

r2.8.1"
andrewlewis,2018-05-22 11:02:03,https://api.github.com/repos/google/ExoPlayer/git/commits/7e38b2694671978b03f72d746b25886362763611,7e38b2694671978b03f72d746b25886362763611,Merge branch 'release-v2' into dev-2.8.1-rc
andrewlewis,2018-05-22 10:58:22,https://api.github.com/repos/google/ExoPlayer/git/commits/f6cc43cec7b4fd2933e711a5d33754d804a642b2,f6cc43cec7b4fd2933e711a5d33754d804a642b2,Update release notes
andrewlewis,2018-05-22 09:54:14,https://api.github.com/repos/google/ExoPlayer/git/commits/2a23838116bf941ee023298631a950a1f5fc08f0,2a23838116bf941ee023298631a950a1f5fc08f0,"Bump version to 2.8.1 and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197535443"
andrewlewis,2018-05-22 09:16:10,https://api.github.com/repos/google/ExoPlayer/git/commits/1896f2fa7c5c572a68cb9dffd5f21c9e03674a3f,1896f2fa7c5c572a68cb9dffd5f21c9e03674a3f,"Save/restore current cues in SimpleExoPlayer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197531839"
andrewlewis,2018-05-22 09:14:56,https://api.github.com/repos/google/ExoPlayer/git/commits/51403410944dd3fd003e9879cd5f17739a43bdf3,51403410944dd3fd003e9879cd5f17739a43bdf3,"Make ffmpeg build instructions repeatable

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197531723"
andrewlewis,2018-05-22 09:13:56,https://api.github.com/repos/google/ExoPlayer/git/commits/49691e5117c5a358534b863a9ec15121c005f11a,49691e5117c5a358534b863a9ec15121c005f11a,"Merge pull request #4252 from pedromfmachado/save_current_subtitle_cues

Saving current subtitle cues on SimpleExoPlayer"
andrewlewis,2018-05-22 09:13:09,https://api.github.com/repos/google/ExoPlayer/git/commits/203f737b0a4cbbf81982d657a0beb4ab50e9bc6c,203f737b0a4cbbf81982d657a0beb4ab50e9bc6c,"Merge pull request #4242 from ened/patch-2

[extension-ffmpeg] repeatable build instructions"
tonihei,2018-05-21 17:34:40,https://api.github.com/repos/google/ExoPlayer/git/commits/7b855e45e60a2932105c1ffbf091c937cf3b7679,7b855e45e60a2932105c1ffbf091c937cf3b7679,"Enable HLS sample queues as soon as possible.

Currently, the sample queues are lazily enabled when they are first read from.
This causes problems when the player tries to discard buffer and the
HlsSampleStreamWrapper assumes the sample queue is disabled even though it's
actually enabled but hasn't been read from.

This change moves setting the sample queue index of the sample stream back into
HlsSampleStreamWrapper. It enables the sample queues at track selection if the
queues are already built, or immediately after they have been built for
chunkless preparation.

Issue:#4241

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197415741"
tonihei,2018-05-21 15:37:51,https://api.github.com/repos/google/ExoPlayer/git/commits/e162d35689ee5b0b086a2e3087a477e2c0cd666b,e162d35689ee5b0b086a2e3087a477e2c0cd666b,"Fix permissions in demo app.

The ACCESS_NETWORK_STATE permission is only included indirectly which doesn't
work in all build systems.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197399274"
botaydotcom,2018-05-18 14:08:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f3e650b8c7173ceb6d28cb9776a153f1536d889f,f3e650b8c7173ceb6d28cb9776a153f1536d889f,"Update InstrumentationTestCase to use JUnit4.

InstrumentationTestCase has been deprecated, and it does not offer some useful
features, such as targeting SDK version level for tests, or skipping tests if
necessary.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197141082"
tonihei,2018-05-18 12:48:48,https://api.github.com/repos/google/ExoPlayer/git/commits/2b9c31a14f177bbfd6c190726dcb5d3fcb75f17b,2b9c31a14f177bbfd6c190726dcb5d3fcb75f17b,"Add MediaSource and DataSource to inject playback nonce into URLs.

A new playback nonce is created for each playback of the same item. Thus we
need to inject the nonce dynamically into the data source factory.

This CL adds the DataSource which does the actual insertion into the request
URLs and a MediaSource which listens to new media periods, to request the
nonce and to configure the data source factory for this media period to use
this nonce.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197134217"
andrewlewis,2018-05-18 11:17:57,https://api.github.com/repos/google/ExoPlayer/git/commits/f459611e04143566b897c489df32e231107f77c9,f459611e04143566b897c489df32e231107f77c9,"Notify consistent event information to listeners

Issue: #4262

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197126757"
AquilesCanta,2018-05-17 16:50:31,https://api.github.com/repos/google/ExoPlayer/git/commits/317d2c7b5c54398d4c5ecca76870829be920dab1,317d2c7b5c54398d4c5ecca76870829be920dab1,"Fail for non-blacklistable playlist load errors in HLS

This CL allows failure if a playlist load fails with a non-blacklistable
error. For example, loss of internet connection.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=197006579"
botaydotcom,2018-05-17 13:52:56,https://api.github.com/repos/google/ExoPlayer/git/commits/15413548193863a7377fb0326c5cd5e44498f605,15413548193863a7377fb0326c5cd5e44498f605,"Support TTML font size using % correctly.

For TTML, if the font size is expressed in %, the font size should be relative
to the cellResolution of the document which we did not support before. This CL
adds support for handling this correctly.
Note that this still does not support font size using c unit.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196985694"
andrewlewis,2018-05-17 09:04:36,https://api.github.com/repos/google/ExoPlayer/git/commits/5e1b430839bb38f7795d78915e0e42cdb0f2614d,5e1b430839bb38f7795d78915e0e42cdb0f2614d,"Fix check for missing profile/level

SparseIntArray.get(key) defaults to zero for missing keys (the null check was
left over from when a Map was used).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196957452"
andrewlewis,2018-05-16 17:34:38,https://api.github.com/repos/google/ExoPlayer/git/commits/e23392a4fe8e5fea44790c60e79c817a2f4d66e7,e23392a4fe8e5fea44790c60e79c817a2f4d66e7,"Update views when a new track name provider is set

Also update TrackSelectionView with nullness annotations.

Issue: #4263

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196849706"
erdemguven,2018-05-16 16:22:37,https://api.github.com/repos/google/ExoPlayer/git/commits/7d76685e6030818ed04b063ba0224f5ede35f6da,7d76685e6030818ed04b063ba0224f5ede35f6da,"Fix padding oracle in CachedContentIndex

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196838184"
botaydotcom,2018-05-16 14:09:55,https://api.github.com/repos/google/ExoPlayer/git/commits/24b16f34195070794bcd98db27d84e8dc716a3d2,24b16f34195070794bcd98db27d84e8dc716a3d2,"Fix a bug with TTML font styling that displays empty lines.

If the caption line has no text (empty line or only line break), we should not
display its background.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196823319"
botaydotcom,2018-05-16 12:58:42,https://api.github.com/repos/google/ExoPlayer/git/commits/972304f16b0f5aba21439785b4c9e2b831e364f6,972304f16b0f5aba21439785b4c9e2b831e364f6,"Supports seeking for FLAC files without a SEEKTABLE.

Currently, ExoPlayer only supports seeking for FLAC files with a SEEKTABLE.
This CL adds support seeking for cases when the FLAC files do not have a
SEEKTABLE by searching for individual frames within the file using binary
search.

Github: #1088.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196816398"
botaydotcom,2018-05-16 11:33:57,https://api.github.com/repos/google/ExoPlayer/git/commits/17abab455e5d9e9008bc266ac48b32bf5345ed6c,17abab455e5d9e9008bc266ac48b32bf5345ed6c,"Fix a bug with TTML font styling.

Due to a bug, for each TTML node, when applying its style to the encompassed
regions, it applies child nodes's styling several time for each region (the
number of time is equal to the number of region). This leads to a styling issue
if there are multiple regions in a node displayed at the same time in TTML file.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196810046"
AquilesCanta,2018-05-16 09:01:25,https://api.github.com/repos/google/ExoPlayer/git/commits/9a45d504d386aadfb4175e584ab2bdc485c0c64e,9a45d504d386aadfb4175e584ab2bdc485c0c64e,"Fix playback of live HLS streams with #EXT-X-PROGRAM-DATE-TIME tags

Issue:#4239
Issue:#4254

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196796569"
andrewlewis,2018-05-15 13:56:19,https://api.github.com/repos/google/ExoPlayer/git/commits/75db04d51d383a104f7e2b24e1b69286c1a5545f,75db04d51d383a104f7e2b24e1b69286c1a5545f,"Fix extraction of PCM (sowt) in MP4/MOV

The sample size from the stsd box takes precedence over the sample size in the
stsz box.

Also remove assumption that C.INDEX_UNSET is -1 in ChunkIterator (which is a
no-op change).

Issue: #4228

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196661751"
tonihei,2018-05-15 09:39:10,https://api.github.com/repos/google/ExoPlayer/git/commits/0c3b1a64016c507e055c428a2954fdd2122fa07c,0c3b1a64016c507e055c428a2954fdd2122fa07c,"Allow canceling player messages.

This adds a cancel method to PlayerMessage.

Issue:#4230

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196638901"
botaydotcom,2018-05-14 23:35:08,https://api.github.com/repos/google/ExoPlayer/git/commits/8a0af84c425a47dcac480381f9276575d47e5376,8a0af84c425a47dcac480381f9276575d47e5376,"Supports seeking for FLAC stream using binary search.

Added FlacBinarySearchSeeker, which supports seeking in a FLAC stream by searching for individual frames within the file using binary search.

Github: #1808.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196587198"
botaydotcom,2018-05-14 20:55:59,https://api.github.com/repos/google/ExoPlayer/git/commits/d3d4b33cacebcfbcf6f91186dc84e449bbf00c52,d3d4b33cacebcfbcf6f91186dc84e449bbf00c52,"Blacklist Moto E(4) from setOutputSurface.

GitHub: #4134.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196562078"
erdemguven,2018-05-14 18:45:32,https://api.github.com/repos/google/ExoPlayer/git/commits/eb151a79e6f8f64ecec679a0a3d11f28a08d1fd9,eb151a79e6f8f64ecec679a0a3d11f28a08d1fd9,"Small DownloadManager fixes

Fix suppressing initial ""state changed to paused"" listener invocations
for new added tasks that are immediately started.

Notify listeners for loaded actions queued state if they are not started
immediately.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196542693"
tonihei,2018-05-14 14:43:36,https://api.github.com/repos/google/ExoPlayer/git/commits/b3c3717007b36ad2162c20b3dae39d6983ea1856,b3c3717007b36ad2162c20b3dae39d6983ea1856,"Prevent NPE in PlayerNotificationManager.

The app can set the player to null while messages from the player are still
in flight. This may cause NPEs.

Issue:#4238

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196504077"
pedromfmachado,2018-05-14 16:50:44,https://api.github.com/repos/google/ExoPlayer/git/commits/2c55f5893826aae396c7b48bcf36d3de5c7cb286,2c55f5893826aae396c7b48bcf36d3de5c7cb286,Fixed nullability issues
pedromfmachado,2018-05-14 14:34:06,https://api.github.com/repos/google/ExoPlayer/git/commits/edd237e196b44398b057ee5098dff34d9cf5609a,edd237e196b44398b057ee5098dff34d9cf5609a,Saving current subtitle cues on SimpleExoPlayer
ojw28,2018-05-12 06:33:28,https://api.github.com/repos/google/ExoPlayer/git/commits/1af93341881a1ee2b207738688ae555946886427,1af93341881a1ee2b207738688ae555946886427,"Add option to keep content visible in PlayerView when player is reset

Issue: #2843

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196349533"
andrewlewis,2018-05-11 23:09:06,https://api.github.com/repos/google/ExoPlayer/git/commits/f848d0e3393e159128e3a764582f867458d799fb,f848d0e3393e159128e3a764582f867458d799fb,"Remove stray space

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196323463"
tonihei,2018-05-11 14:05:48,https://api.github.com/repos/google/ExoPlayer/git/commits/74df3766f9da2f49a6cf3fafaf177c4c19d69276,74df3766f9da2f49a6cf3fafaf177c4c19d69276,"Include checkerframework annotatons with compileOnly and remove lint exclusion

The lint error suppression only works locally and not for external developers
who still see the lint error and need to suppress it themselves.

This changes 'implementation' to 'compileOnly' in gradle to prevent the
dependency from being exported. Also removes the local lint suppression.

Issue:#4234

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196251407"
botaydotcom,2018-05-11 11:33:34,https://api.github.com/repos/google/ExoPlayer/git/commits/0fce0a0bcbe36cfb5e8bb3c557b6d0e867e2447e,0fce0a0bcbe36cfb5e8bb3c557b6d0e867e2447e,"Refactor DummySurfaceThread, move code to generate SurfaceTexture to new class

This makes way for reusing EGLSurfaceTexture in other places, such as metadata
and frame retriever.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196240576"
andrewlewis,2018-05-10 22:23:31,https://api.github.com/repos/google/ExoPlayer/git/commits/36d24c7aaa93d5c6aa4bb4af611bebadeb4b5424,36d24c7aaa93d5c6aa4bb4af611bebadeb4b5424,"Catch all errors in loadAd

Issue: #4231

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196180271"
ojw28,2018-05-10 21:11:36,https://api.github.com/repos/google/ExoPlayer/git/commits/d6d7c41065df08e174eccbe650e4b73e5be96d8a,d6d7c41065df08e174eccbe650e4b73e5be96d8a,"Expose manifests/playlists from download helpers

This is useful to get hold of the manifest to then obtain DRM init data in
the download flow for protected content (without having to download the
manifest again).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196168938"
andrewlewis,2018-05-10 01:09:45,https://api.github.com/repos/google/ExoPlayer/git/commits/b779b1599f9f8ad7848530c948e582404306adbd,b779b1599f9f8ad7848530c948e582404306adbd,"Support setting some DefaultTimeBar attributes

Issue: #4207

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196059445"
ojw28,2018-05-09 20:56:07,https://api.github.com/repos/google/ExoPlayer/git/commits/f7d4fa882939100fd467c280fa7739b38b84f79c,f7d4fa882939100fd467c280fa7739b38b84f79c,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=196024195"
ened,2018-05-11 08:53:41,https://api.github.com/repos/google/ExoPlayer/git/commits/8d5cab8acfca829d6975aaf16b2c31ac7675c389,8d5cab8acfca829d6975aaf16b2c31ac7675c389,"[extension-ffmpeg] repeatable build instructions

Ensure the build instructions are repeatable once the ffmpeg repository is checked out."
ojw28,2018-05-09 20:52:32,https://api.github.com/repos/google/ExoPlayer/git/commits/9adf9542e143c1462ec1ba2ddeaefc01cfffe7a2,9adf9542e143c1462ec1ba2ddeaefc01cfffe7a2,"Merge pull request #4175 from cdotchen/FixDefaultTimeBar

Fix timebar scrubber notify wrong start position"
ojw28,2018-05-09 20:27:37,https://api.github.com/repos/google/ExoPlayer/git/commits/18a679fe07784dc2637a6cf774ad3a8d54736257,18a679fe07784dc2637a6cf774ad3a8d54736257,Update release notes
tonihei,2018-05-09 10:28:00,https://api.github.com/repos/google/ExoPlayer/git/commits/81c37698807c9be6e001ca1dcc1d619c9d60f54a,81c37698807c9be6e001ca1dcc1d619c9d60f54a,"Add missing @Nullable to equals implementations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195947382"
ojw28,2018-05-09 20:11:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a962f2d4d8f008dfff6db566b083aaeb494b6ce7,a962f2d4d8f008dfff6db566b083aaeb494b6ce7,"Merge pull request #4156 from ValveSoftware/dev-v2

OkHttp extension - response headers instead of request in InvalidResponseCodeException"
ojw28,2018-05-08 07:20:32,https://api.github.com/repos/google/ExoPlayer/git/commits/000f3f23056aae30a98ac74fb30e484844548b3e,000f3f23056aae30a98ac74fb30e484844548b3e,"Merge pull request #4219 from google/dev-v2-r2.8.0

r2.8.0"
ojw28,2018-05-08 07:03:34,https://api.github.com/repos/google/ExoPlayer/git/commits/5912707deae1fd411ade2f65bcd8486818ff888f,5912707deae1fd411ade2f65bcd8486818ff888f,Merge branch 'dev-v2' into dev-v2-r2.8.0
ojw28,2018-05-08 07:01:17,https://api.github.com/repos/google/ExoPlayer/git/commits/d9d13630a997165156670d92393e6261234ca6fe,d9d13630a997165156670d92393e6261234ca6fe,Merge branch 'release-v2' into dev-v2
ojw28,2018-05-08 00:59:52,https://api.github.com/repos/google/ExoPlayer/git/commits/9763a506a0d485d368ec5cf1afbc042351364076,9763a506a0d485d368ec5cf1afbc042351364076,"Fix demo app playlist playbacks

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195752969"
ojw28,2018-05-08 00:59:26,https://api.github.com/repos/google/ExoPlayer/git/commits/646cdbc6d2766cfb541edc54c13f818b1b854872,646cdbc6d2766cfb541edc54c13f818b1b854872,"Revert retention of audio decoders

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195752931"
ojw28,2018-05-08 00:59:52,https://api.github.com/repos/google/ExoPlayer/git/commits/94ffbee7e536d119f21074fe8ef07f65fa30fad7,94ffbee7e536d119f21074fe8ef07f65fa30fad7,"Fix demo app playlist playbacks

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195752969"
ojw28,2018-05-08 00:59:26,https://api.github.com/repos/google/ExoPlayer/git/commits/483cf771200ceb229e9f41f8a7f6aec127c5ab0c,483cf771200ceb229e9f41f8a7f6aec127c5ab0c,"Revert retention of audio decoders

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195752931"
ojw28,2018-05-07 22:15:01,https://api.github.com/repos/google/ExoPlayer/git/commits/e3aa8a06175e752496a04b3dc21f0ee29f105d8b,e3aa8a06175e752496a04b3dc21f0ee29f105d8b,Remove non-release notes from release branch
ojw28,2018-05-07 18:06:28,https://api.github.com/repos/google/ExoPlayer/git/commits/b7399c755910a0475be69e1fa38b5051b5ef0e18,b7399c755910a0475be69e1fa38b5051b5ef0e18,"Fix bug in Aes128DataSource

Open was not calling through to upstream.open. This was not problematic for
reading, because DataSourceInputStream.read would open the upstream if it's
not open already. It was however a problem for calling getUri() between
calling open and the first call to read, which would end up calling
upstream.getUri() on the not-yet-opened upstream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195689472"
ojw28,2018-05-07 18:06:18,https://api.github.com/repos/google/ExoPlayer/git/commits/590edf5288ca734d102bbb536daa5be1bc22a5af,590edf5288ca734d102bbb536daa5be1bc22a5af,"Fix checker-framework build issues

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195689456"
ojw28,2018-05-07 18:04:36,https://api.github.com/repos/google/ExoPlayer/git/commits/4b22aa7519c5dc0d7d659f65124c9d69bdb3d092,4b22aa7519c5dc0d7d659f65124c9d69bdb3d092,"Update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195689103"
ojw28,2018-05-06 20:40:09,https://api.github.com/repos/google/ExoPlayer/git/commits/6e8867c39ee9ba7ceaf6dc25bcda21ebb67c732c,6e8867c39ee9ba7ceaf6dc25bcda21ebb67c732c,"Fix broken notification (missing line in onStartCommand)

Also only listen to requirements when actually necessary, else we can
put the service into the foreground when it needn't be there.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195597750"
ojw28,2018-05-06 19:06:09,https://api.github.com/repos/google/ExoPlayer/git/commits/7afdf84a9d36bbd151fff7bf9afb38da672d822e,7afdf84a9d36bbd151fff7bf9afb38da672d822e,"Fix DownloadService notification flicker

This type of flicker was visible (at least on my S8) whenever starting
the demo app process (from being properly killed) when other notifications
(e.g. completed download notification) was present.

This change passes whether the service was started as foreground through
the intent, and only applies the show-notification-on-stop hack if it
was. It's only necessary to start as foreground if your app is not already
in the foreground, so it's not necessary to do this from activity/ui
components.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195594930"
ojw28,2018-05-06 19:04:45,https://api.github.com/repos/google/ExoPlayer/git/commits/983fe9cc9f8ea30e6d3708fe6c415087a0c20524,983fe9cc9f8ea30e6d3708fe6c415087a0c20524,"Add DownloadManager.Listener.onInitialized

If an app wants to reconcile its own state with that of a DownloadManager,
it's helpful to know when the DownloadManager has finished restoring any
previously persisted tasks.

Also suppress initial ""state changed to paused"" listener invocations for
tasks that are immediately started.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195594881"
ojw28,2018-05-06 18:03:31,https://api.github.com/repos/google/ExoPlayer/git/commits/b9aaf1ebabadecb246856fde9df93df450cd4c01,b9aaf1ebabadecb246856fde9df93df450cd4c01,"Improve offline support in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195593235"
ojw28,2018-05-06 07:17:54,https://api.github.com/repos/google/ExoPlayer/git/commits/f2cef123674ca0ef75ada0bfe63ce896fb992d99,f2cef123674ca0ef75ada0bfe63ce896fb992d99,"Reorder DownloadManager methods into a more natural order

- Start before stop
- Release near bottom
- Private after public

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195570480"
ojw28,2018-05-06 07:15:40,https://api.github.com/repos/google/ExoPlayer/git/commits/c5e8f6ff9ee60ff9fa3e59466f142cea57a596be,c5e8f6ff9ee60ff9fa3e59466f142cea57a596be,"Fix probable race condition in DownloadManager

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195570401"
ojw28,2018-05-06 00:08:07,https://api.github.com/repos/google/ExoPlayer/git/commits/5adfd7e9d93042dcd3c71577c4358f6e8efc018c,5adfd7e9d93042dcd3c71577c4358f6e8efc018c,"Simplify OkHttp extension build.gradle

The lint workaround and org.json exclusion aren't needed any more.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195557066"
ojw28,2018-05-05 23:28:43,https://api.github.com/repos/google/ExoPlayer/git/commits/9de27560ae9d24b9e2e0a903d743908667f261ee,9de27560ae9d24b9e2e0a903d743908667f261ee,"Fix Javadoc errors

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195555915"
ojw28,2018-05-05 21:36:09,https://api.github.com/repos/google/ExoPlayer/git/commits/051da40dc33ee1364a0e40ef540273dca3f596d3,051da40dc33ee1364a0e40ef540273dca3f596d3,"Misc cleanup

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195552434"
ojw28,2018-05-05 16:53:48,https://api.github.com/repos/google/ExoPlayer/git/commits/dbd768fbd7ad1f37067ff2984a338b7f87a12afc,dbd768fbd7ad1f37067ff2984a338b7f87a12afc,"Fix selection item

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195544030"
ojw28,2018-05-05 03:45:16,https://api.github.com/repos/google/ExoPlayer/git/commits/17b4e020f4c0dba5c23b10001b8f43cdd03172ff,17b4e020f4c0dba5c23b10001b8f43cdd03172ff,"Tweak sample chooser

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195511490"
ojw28,2018-05-05 01:52:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4e42c547ac5737ad407461fd0e34de9f036e2bbe,4e42c547ac5737ad407461fd0e34de9f036e2bbe,"Small cleanup

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195504064"
ojw28,2018-05-05 01:02:27,https://api.github.com/repos/google/ExoPlayer/git/commits/416d6c9eebc7d2d944e1dd3c4104be07d5d06a95,416d6c9eebc7d2d944e1dd3c4104be07d5d06a95,"Move download helpers into core library

Also convert them to exposing periods and track groups, like
regular MediaSources do. This gets us much closer to being
able to use standard track selection components during offline
initialization. The helper is responsible for reverse mapping
selected tracks onto physical streams when generating the
download action. This is trivial except for the HLS case, which
is a TODO for now.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195500826"
andrewlewis,2018-05-04 23:06:22,https://api.github.com/repos/google/ExoPlayer/git/commits/4ee1daef0e8648d69a18e643918c9d60ea919d17,4ee1daef0e8648d69a18e643918c9d60ea919d17,"Make download action custom data a byte[]

This may be preferable for using custom binary data,
and it's still easy to store Strings if needed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195486817"
andrewlewis,2018-05-04 21:09:10,https://api.github.com/repos/google/ExoPlayer/git/commits/9e122cbaf93b9835dd8934e56d2b64b1937678e2,9e122cbaf93b9835dd8934e56d2b64b1937678e2,"Use non-deprecated AdsMediaSource constructor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195468987"
andrewlewis,2018-05-04 16:26:06,https://api.github.com/repos/google/ExoPlayer/git/commits/2a06e0020141660ba777c7edc4f824c75f42f515,2a06e0020141660ba777c7edc4f824c75f42f515,"Expose ad load errors via MediaSourceEventListener

The old event listener on AdsMediaSource is deprecated, in favor of
reporting in the normal way (via MediaSourceEventListener).

Add AdLoadException with information on what ad/ads failed to load.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195426144"
ojw28,2018-05-04 15:50:46,https://api.github.com/repos/google/ExoPlayer/git/commits/0edc832d67e9a7166306a958d3ba1abaebc7f97d,0edc832d67e9a7166306a958d3ba1abaebc7f97d,"Get all track key objects into a consistent state

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195421908"
botaydotcom,2018-05-04 12:18:27,https://api.github.com/repos/google/ExoPlayer/git/commits/b8206a70e64ec44144d7cc35a56449149d213793,b8206a70e64ec44144d7cc35a56449149d213793,"Support handling metadata queries for MetadataRetriever.

- Support handling metadata queries (a.k.a get TrackGroupArray, which contains
Format and associated Metadata) from MetadataRetriever.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195401204"
andrewlewis,2018-05-04 05:42:25,https://api.github.com/repos/google/ExoPlayer/git/commits/a0b15595f45cb500d30017cd0d1fe0ac38d218e9,a0b15595f45cb500d30017cd0d1fe0ac38d218e9,"Cancel and interrupt downloads

Upstream components may incorrectly clear the interrupted flag and not
propagate an exception when the caching thread is interrupted due to
cancellation. Pass a settable flag down to CacheUtil.cache and check it
frequently so it's not necessary to rely on the interrupted flag.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195371244"
andrewlewis,2018-05-04 04:21:50,https://api.github.com/repos/google/ExoPlayer/git/commits/d5034ca889486d41382b47de4d3319315f76938b,d5034ca889486d41382b47de4d3319315f76938b,"Set interrupted flag when throwing InterruptedIOE

This avoids the interrupted flag being lost if the exception
is handled as an IOException.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195366244"
ojw28,2018-05-04 04:01:15,https://api.github.com/repos/google/ExoPlayer/git/commits/d4d1fd64b3fb455fb7a9a6064d209e3410c4bcc9,d4d1fd64b3fb455fb7a9a6064d209e3410c4bcc9,"Clean up DownloadManagerTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195364299"
ojw28,2018-05-04 03:41:26,https://api.github.com/repos/google/ExoPlayer/git/commits/08e56394c5613cb98b11cb07aa2053ef94f677a6,08e56394c5613cb98b11cb07aa2053ef94f677a6,"Rename DownloadManager.DownloadListener -> DownloadManager.Listener

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195362765"
andrewlewis,2018-05-04 02:55:29,https://api.github.com/repos/google/ExoPlayer/git/commits/c13722992f8938b21ed8801f8ac89393ec846166,c13722992f8938b21ed8801f8ac89393ec846166,"Misc nit fixes for downloader

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195358542"
ojw28,2018-05-04 01:48:48,https://api.github.com/repos/google/ExoPlayer/git/commits/e6973226202052fa045d2913f736c469d71d1051,e6973226202052fa045d2913f736c469d71d1051,"Tidy up naming

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195351640"
ojw28,2018-05-04 01:15:13,https://api.github.com/repos/google/ExoPlayer/git/commits/fdbea33a14e850a294027d123e7d243cb4c1be61,fdbea33a14e850a294027d123e7d243cb4c1be61,"Improve track naming when sampleMimeType unset

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195346555"
ojw28,2018-05-03 22:07:55,https://api.github.com/repos/google/ExoPlayer/git/commits/bef4a20c317f187b951518fa89a827ac1e1320ce,bef4a20c317f187b951518fa89a827ac1e1320ce,"Move DownloadManager initialization into the application

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195317847"
andrewlewis,2018-05-03 18:23:55,https://api.github.com/repos/google/ExoPlayer/git/commits/a0b3fb4e873b5294ea89be64df14f876371ed2f3,a0b3fb4e873b5294ea89be64df14f876371ed2f3,"Clarify not using 'and' as the item separator

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195282481"
ojw28,2018-05-03 17:21:48,https://api.github.com/repos/google/ExoPlayer/git/commits/bf88b043806d7fbdd027a0fd37a8e91378c83ab3,bf88b043806d7fbdd027a0fd37a8e91378c83ab3,"Bump version to 2.8.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195271273"
ojw28,2018-05-03 17:13:10,https://api.github.com/repos/google/ExoPlayer/git/commits/c5bf7f4513874f39387364ccacb6ccdfb3da3435,c5bf7f4513874f39387364ccacb6ccdfb3da3435,"Further clean up DownloadActions + DownloadActivity

- Made parts of DownloadActions public that were previously hidden.
  This is necessary so that when an app is listening to the
  DownloadManager, it can tell something about the tasks.
- Simplified DownloadActivity some more. The helpers may migrate
  into their corresponding modules at some point, and also be
  converted to return structured TrackGroupArrays rather than a
  flat list of Formats.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195269824"
tonihei,2018-05-03 11:04:07,https://api.github.com/repos/google/ExoPlayer/git/commits/5a1431c904257c51c1a0318dea7667862ca1fed5,5a1431c904257c51c1a0318dea7667862ca1fed5,"Turn on automatic nullness check for DASH.

Also add a build rule to simplify the test setup with a custom blacklist.
In addition, the test path pattern are made less specific to capture all the
static nullness tests in the /main/ directories.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195230334"
ojw28,2018-05-03 05:32:16,https://api.github.com/repos/google/ExoPlayer/git/commits/b23eabd93963fd2e70847e0911a036f0123a9538,b23eabd93963fd2e70847e0911a036f0123a9538,"Add error and buffering views to PlayerView

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195203362"
tonihei,2018-05-02 15:47:52,https://api.github.com/repos/google/ExoPlayer/git/commits/7799e8fd5e057c536e890fd78e9bc7ef96723ae4,7799e8fd5e057c536e890fd78e9bc7ef96723ae4,"Add dependency on nullness annotations and add missing annotations for DASH.

This includes only the (hopefully) non-debatable changes for the DASH module
and all needed changes for call into the core library.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195097791"
ojw28,2018-05-02 09:25:44,https://api.github.com/repos/google/ExoPlayer/git/commits/c466fabb1c267a102b0559a56fccbf4066b1323d,c466fabb1c267a102b0559a56fccbf4066b1323d,"Use integers for HLS rendition keys

Currently it's possible to copy a master playlist with a URL
that was never present in the original. This change prevents
this, and also moves the key more in line with DASH/SS.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=195065286"
ojw28,2018-05-01 19:59:08,https://api.github.com/repos/google/ExoPlayer/git/commits/d38e4dc8e0cff77a5a7c25d02d6253bc8f648d83,d38e4dc8e0cff77a5a7c25d02d6253bc8f648d83,"Give actions per-type versioning

A single master version prevents app developers from providing
custom download functionality (because they can't increment the
version). It's also error prone to expect someone modifying the
DASH action to remember to update the ActionFile master version.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194981886"
andrewlewis,2018-05-01 17:57:17,https://api.github.com/repos/google/ExoPlayer/git/commits/3f003c517c08d697118cb61c1902eeb31776f118,3f003c517c08d697118cb61c1902eeb31776f118,"Remove documentation on calling startDownloads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194961264"
tonihei,2018-05-01 14:52:21,https://api.github.com/repos/google/ExoPlayer/git/commits/ddeafa4fef19cc008a0fe6ff63d5e8633a688cd5,ddeafa4fef19cc008a0fe6ff63d5e8633a688cd5,"Remove ad events from analytics listener and collector.

Ad load errors will be forwarded as media source load errors in the future
and other ad events are not actually player related to warrant reporting
them as part of playback analytics.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194936656"
ojw28,2018-05-01 14:10:36,https://api.github.com/repos/google/ExoPlayer/git/commits/175a0100d093bd2ea3f1bacd1d9a9839f0b03134,175a0100d093bd2ea3f1bacd1d9a9839f0b03134,"Remove ability to query Downloader implementations

This was adding a lot of code, and the multiple use cases
for Downloader was pretty confusing (in particular the
ordering of method calls was unclear). It's also not
performant (e.g. it requires loading/parsing manifest(s)
and initialization segments from disk).

In practice I think apps will need to keep a record of
what's offlined in their app's database (or equivalent),
which they can update by registering as a listener on
DownloadManager. This will be done for the demo app in
a subsequent change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194932876"
ojw28,2018-05-01 14:04:26,https://api.github.com/repos/google/ExoPlayer/git/commits/d4f75963c4e2521390e5f215a7a99f049d92168a,d4f75963c4e2521390e5f215a7a99f049d92168a,"Set content length and redirect uri in a single transaction

NORELNOTES=true
NO_BUG

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194932235"
ojw28,2018-05-01 11:17:01,https://api.github.com/repos/google/ExoPlayer/git/commits/59c620c23cb816567ec90755a7ca4a21c13bf6f8,59c620c23cb816567ec90755a7ca4a21c13bf6f8,"Clean up offline notifications

- It's much cleaner to split completed/error notification methods.
- Make error notification show the content title in the demo app.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194920507"
andrewlewis,2018-05-01 07:25:10,https://api.github.com/repos/google/ExoPlayer/git/commits/5d3c080f06c5e083be1cb0ebe93f1e90f2e6778d,5d3c080f06c5e083be1cb0ebe93f1e90f2e6778d,"Fix NPE on tapping download notification

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194902748"
andrewlewis,2018-05-01 02:09:12,https://api.github.com/repos/google/ExoPlayer/git/commits/880ce3f59a55a534073c3536147bf42aca49e3d2,880ce3f59a55a534073c3536147bf42aca49e3d2,"Add content intent for download notifications

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194882787"
AquilesCanta,2018-04-30 19:50:08,https://api.github.com/repos/google/ExoPlayer/git/commits/d412dc97dcf7b7e4789fb30520a439394bc15dd5,d412dc97dcf7b7e4789fb30520a439394bc15dd5,"Fix seeking in live HLS streams

Issue:#4187

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194829857"
ojw28,2018-04-30 19:39:17,https://api.github.com/repos/google/ExoPlayer/git/commits/c8ec77ef96fdf8ac5ee4e267046f5a4a7f7059ee,c8ec77ef96fdf8ac5ee4e267046f5a4a7f7059ee,"Make MediaSessionConnector use getPlaybackError

It's no longer necessary to stash a reference to the
error yourself. This also correctly handles the case
where setPlayer is called with a player that's already
in an error state.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194828387"
ojw28,2018-04-30 19:34:53,https://api.github.com/repos/google/ExoPlayer/git/commits/fedf8dd5c195136ace10ac80e135fbef95282fca,fedf8dd5c195136ace10ac80e135fbef95282fca,"Make download notification more informative when removing downloads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194827787"
ojw28,2018-04-30 18:17:04,https://api.github.com/repos/google/ExoPlayer/git/commits/7723f5bdf1638455d06ee9a24f24dc52cb070e16,7723f5bdf1638455d06ee9a24f24dc52cb070e16,"Clean up offline class names

This change is intended to resolve overloading of ""Download"",
where a DownloadTask could be an actual download task, or a
remove task.

Also cleaned up some documentation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194815058"
ojw28,2018-04-30 15:41:25,https://api.github.com/repos/google/ExoPlayer/git/commits/c68e00e28fc9b24ebbfbc363ffc1cb9a48789c33,c68e00e28fc9b24ebbfbc363ffc1cb9a48789c33,"Fix crash in CronetEngineWrapper

Cronet now returns an unmodifiable list, so we need to copy it

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194790506"
ojw28,2018-04-30 14:56:52,https://api.github.com/repos/google/ExoPlayer/git/commits/c6bedc6a8528a555a741feabc484d4503e438d7c,c6bedc6a8528a555a741feabc484d4503e438d7c,"Improve scheduling

- Redefine Scheduler interface to better describe what implementations
  do. The previous version was too general, in that it allowed concrete
  DownloadService implementations to pass different Requirements to
  the base class and to the Scheduler. It's also difficult to see how
  that version could ever support dynamic updates to Requirements, which
  is probably a feature we'll need to add quite soon.
- Fix a (probably theoretical) problem where static fields in
  DownloadService assumed only a single concrete implementation.
- Stop using PlatformScheduler pre-API-21 in demo app, because it will
  fail.
- Define default Requirements that require network.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194785751"
tonihei,2018-04-30 13:45:47,https://api.github.com/repos/google/ExoPlayer/git/commits/c1e3cb767eeca3379563ee05793feebaaf1220dc,c1e3cb767eeca3379563ee05793feebaaf1220dc,"Don't forward main looper messages to custom looper.

Our current custom looper implementation tries to handle all messages
including those sent to the main looper. However, the main looper does not
use our doLoop implementation and thus messages never get executed.

This adds a check whether the target looper is the main looper and if so,
uses the default message forwarding implementation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194779214"
ojw28,2018-04-30 13:35:21,https://api.github.com/repos/google/ExoPlayer/git/commits/410264954f47020f218ffb3275ee030c75e011b9,410264954f47020f218ffb3275ee030c75e011b9,"Don't open DataSink if resolved length is 0

- It's wasted effort
- DataSpec reconstruction fails because creating a DataSpec with 0
  length isn't allowed.
- Also better document DataSink open/close, to be like DataSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194778132"
tonihei,2018-04-30 11:54:11,https://api.github.com/repos/google/ExoPlayer/git/commits/d1fdc518fb9a407e09c3ddad23864dfd5b6a3bbf,d1fdc518fb9a407e09c3ddad23864dfd5b6a3bbf,"Use AnalyticsListener in EventLogger.

This replaces the existing listeners and provides some additional meta data
for each event.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194770421"
ojw28,2018-04-30 10:23:31,https://api.github.com/repos/google/ExoPlayer/git/commits/c0fdbde903408b636874ef59c306ffe918762821,c0fdbde903408b636874ef59c306ffe918762821,"Fix permissions lint errors.

- Add ACCESS_NETWORK_STATE to core library. It seems fairly fundamental. We should
  also be using it elsewhere (e.g. to fail fast if there's no network).
- Add annotation to force apps using PlatformScheduler to declare RECEIVE_BOOT_PERMISSION

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194763051"
ojw28,2018-04-30 10:07:00,https://api.github.com/repos/google/ExoPlayer/git/commits/9c15c63d4e9d7a4ece6fded468ecd36ea9216134,9c15c63d4e9d7a4ece6fded468ecd36ea9216134,"Add util method for starting foreground services

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194761771"
ojw28,2018-04-29 08:22:12,https://api.github.com/repos/google/ExoPlayer/git/commits/85384cf45b5285fcb6aabe30de7c58fa5f1b04e8,85384cf45b5285fcb6aabe30de7c58fa5f1b04e8,"Add extra context to strings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194691625"
ojw28,2018-04-27 13:38:05,https://api.github.com/repos/google/ExoPlayer/git/commits/159979e69e6733152ff48fac2750a65a9b540078,159979e69e6733152ff48fac2750a65a9b540078,"Remove spurious TargetApi annotation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194535300"
botaydotcom,2018-04-27 09:28:02,https://api.github.com/repos/google/ExoPlayer/git/commits/ed994517b2e6d969f306bacf9f73ebeb891848ff,ed994517b2e6d969f306bacf9f73ebeb891848ff,"Changes MetadataRetrieverTest to use a TestRunner.

Add a TestRunner for MetadataRetriever that roughly follow the test runner for
ExoPlayer. The TestRunner supports scheduling test steps in a sequence, compare
expected callbacks with actual callbacks, and block the test until it is done.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194518738"
ojw28,2018-04-26 21:21:06,https://api.github.com/repos/google/ExoPlayer/git/commits/3e764646668c792d96c4212a953c563e6e73f9f3,3e764646668c792d96c4212a953c563e6e73f9f3,"Fix download percentage reporting

- When calculating the downloaded percentage in DASH, there was no
  way to disambiguate between 0 of 0 segments being downloaded because
  there are no cached indexes (i.e. 0% downloaded) and 0 of 0 segments
  being downloaded because the index defines 0 segments (i.e. 100%
  downloaded).
- Also replace use of NaN with a named constant.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194453202"
botaydotcom,2018-04-26 16:29:01,https://api.github.com/repos/google/ExoPlayer/git/commits/fe32401792bcf8ec7b674262946549c3136b8b60,fe32401792bcf8ec7b674262946549c3136b8b60,"Supports extracting from AMR container format.

Supports extracting data from AMR container format for both narrow and wide
band formats. Also added AmrExtractor as one of the default extractor to be
used in DefaultExtractorsFactory.

GitHub: #2527.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194407507"
ojw28,2018-04-26 12:00:12,https://api.github.com/repos/google/ExoPlayer/git/commits/59f01ec333dec260a9afe7de205bca9dcd725d45,59f01ec333dec260a9afe7de205bca9dcd725d45,"Use manifest filtering when downloading.

When we play downloaded content, we rely on the manifest filters
to produce a manifest that contains only the content that was
downloaded. It makes sense just to use the same filters during
download too, so we don't have to worry about any implementation
differences.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194380704"
ojw28,2018-04-26 10:36:12,https://api.github.com/repos/google/ExoPlayer/git/commits/6ac252843ec990ff32acb30429f2173ea44b73c9,6ac252843ec990ff32acb30429f2173ea44b73c9,"Move TrackSelectionHelper to UI module

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194373357"
AquilesCanta,2018-04-25 11:38:57,https://api.github.com/repos/google/ExoPlayer/git/commits/ddef32c9e2f8d754d46af58566229f179bb00bc8,ddef32c9e2f8d754d46af58566229f179bb00bc8,"Support multiple EXT-X-MAP tags

Issue:#4182

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194223312"
ojw28,2018-04-25 10:56:26,https://api.github.com/repos/google/ExoPlayer/git/commits/dcff063709185326c632b78250c1c956b245d837,dcff063709185326c632b78250c1c956b245d837,"Fix DefaultTrackSelector bug + improve equals check

- clone() wasn't performing a deep enough copy
- Sort tracks in overrides to improve equals check

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194220596"
ojw28,2018-04-25 10:54:13,https://api.github.com/repos/google/ExoPlayer/git/commits/0d9d1998f457aa4f919f78a7663ac24202aa133b,0d9d1998f457aa4f919f78a7663ac24202aa133b,"Centralize manifest filtering.

The generic type for track key will go away soon.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194220450"
ojw28,2018-04-25 09:36:19,https://api.github.com/repos/google/ExoPlayer/git/commits/b77d6c4ef4c93740be717c9776918e6eb542c956,b77d6c4ef4c93740be717c9776918e6eb542c956,"Remove Downloader.ProgressListener

ProgressiveDownloader never implemented this properly, and we
don't use it in DownloadManager/DownloadService, both of which
use a polling model. A polling model is also what's used elsewhere,
for example to query the current playback position.

This is effectively doing the TODO in ProgressiveDownloader.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194214579"
ojw28,2018-04-24 20:32:17,https://api.github.com/repos/google/ExoPlayer/git/commits/b6f646ed966d810b8541f4eb5b52161c51e156f1,b6f646ed966d810b8541f4eb5b52161c51e156f1,"Clean up DownloadAction instances

This removes a fair chunk of code. The line delta would
be more negative if it not for adding all the /* x= */
comments in DashDownloadActionTest!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194136689"
ojw28,2018-04-24 15:17:34,https://api.github.com/repos/google/ExoPlayer/git/commits/c9bb102f937d18af679e4a39d8a67eed2b23b799,c9bb102f937d18af679e4a39d8a67eed2b23b799,"Use Uri rather than string for ProgressiveDownloadAction

This makes it consistent with the other download types.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194089486"
tonihei,2018-04-24 12:21:06,https://api.github.com/repos/google/ExoPlayer/git/commits/f320d9e0ab5e0a10cb08a4855302b278fc1ef49d,f320d9e0ab5e0a10cb08a4855302b278fc1ef49d,"Deprecate add/remove video/audio debug listener in SimpleExoPlayer.

Using addAnalyticsListener provides the same functionality with additional
information.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194071893"
ojw28,2018-04-24 10:49:14,https://api.github.com/repos/google/ExoPlayer/git/commits/1f3adacac320cca541d1523952dd315d45e3eb01,1f3adacac320cca541d1523952dd315d45e3eb01,"Use parcelable keys for HLS downloads to remove special casing

This removes the need for separate String/Parcelable filter paths in
the demo app. Hopefully this is a temporary measure as we work
toward using track groups + consistent keys for all media types.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194065499"
tonihei,2018-04-24 09:26:07,https://api.github.com/repos/google/ExoPlayer/git/commits/874dc202f84ddf06545a8c6cc2f7ea11fc59b0ab,874dc202f84ddf06545a8c6cc2f7ea11fc59b0ab,"Prevent timeline access in AnalyticsCollector for future windows and periods.

Some of the events are emitted by the media periods itself and their index may
not be available in the publicly accessible timeline yet.

To prevent this, we currently check for timeline.isEmpty() only. But this may
also happen for dynamic changes, e.g. when new sources are added in fast
succession and a manifest for one of the new sources starts loading before the
updated timeline is reported.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=194057401"
ojw28,2018-04-23 20:04:26,https://api.github.com/repos/google/ExoPlayer/git/commits/f96f053f2e0d5965f6117e5874b131089707e0c4,f96f053f2e0d5965f6117e5874b131089707e0c4,"Reinstate non-static useExtensionRenderers method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193970940"
marcbaechinger,2018-04-23 18:50:30,https://api.github.com/repos/google/ExoPlayer/git/commits/301bb3ada44c2115819eb43582d8287a35d3fcad,301bb3ada44c2115819eb43582d8287a35d3fcad,"add flag to hide play/pause button

exoghi/4056

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193960004"
ojw28,2018-04-23 18:04:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f7c5e475a7c8db3699f21d121337ccd7f14904b8,f7c5e475a7c8db3699f21d121337ccd7f14904b8,"Prevent native crash in raw decoder

Playback will still fail if an input sample is larger
than 32K, but will now fail gracefully.

Issue: #4057

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193951955"
ojw28,2018-04-23 17:12:09,https://api.github.com/repos/google/ExoPlayer/git/commits/895ac660a872b156884e954e4264a306bd7d40c7,895ac660a872b156884e954e4264a306bd7d40c7,"Default playClearSamplesWithoutKeys consistently to false

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193942368"
andrewlewis,2018-04-23 17:06:07,https://api.github.com/repos/google/ExoPlayer/git/commits/ddd603a1ee30dc0ca463f1c29379a25cf30a5413,ddd603a1ee30dc0ca463f1c29379a25cf30a5413,"Add DownloadService constructor for notification channel

Also move NotificationUtil from the UI module to the core module.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193941401"
ojw28,2018-04-23 17:00:47,https://api.github.com/repos/google/ExoPlayer/git/commits/79c105be599a40754a53db9885c2a55e34730d67,79c105be599a40754a53db9885c2a55e34730d67,"Clean up naming of demo app download components

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193940323"
andrewlewis,2018-04-23 16:59:53,https://api.github.com/repos/google/ExoPlayer/git/commits/f6d5cb9934814a5e3b4ec1c4a12207d3cd6a288f,f6d5cb9934814a5e3b4ec1c4a12207d3cd6a288f,"Add a convenience constructor for DownloadManagers

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193940183"
ojw28,2018-04-23 16:45:44,https://api.github.com/repos/google/ExoPlayer/git/commits/adc77fd0b16ec4970caeacb59f0a6dcf0505c0df,adc77fd0b16ec4970caeacb59f0a6dcf0505c0df,"Simplify & clean up offline support in demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193938140"
marcbaechinger,2018-04-23 16:17:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e0af050163f8afaafdd8f2998cb85d5e3171e654,e0af050163f8afaafdd8f2998cb85d5e3171e654,"add notification priority for lower API levels

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193934212"
ojw28,2018-04-23 13:17:07,https://api.github.com/repos/google/ExoPlayer/git/commits/7d6b0e1fdab2708f4192cec1621fb50d384a06e1,7d6b0e1fdab2708f4192cec1621fb50d384a06e1,"Move renderer flags, overrides and tunneling ID into Parameters

- This is needed to make DefaultTrackSelector properly thread
  safe, and enable atomic changes to the selector that, for
  example, disable a renderer and enable another one at the same
  time.

- This change also saves/restores parameters and the start
  position in PlayerActivity, resolving the ref'd issue.

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193913350"
andrewlewis,2018-04-23 11:48:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5926e20105ac0fd4d1529f605b4e86526e411ed5,5926e20105ac0fd4d1529f605b4e86526e411ed5,"Use the codec MIME type for configuration

This may differ from the format MIME type for audio/eac3-joc.

Issue: #4165

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193906521"
andrewlewis,2018-04-23 10:43:03,https://api.github.com/repos/google/ExoPlayer/git/commits/a07471ddef6e5b01b0ed4c6ab65feadf82bec112,a07471ddef6e5b01b0ed4c6ab65feadf82bec112,"Add player to getMediaDescription

This allows access to the timeline for example.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193900798"
ojw28,2018-04-23 10:03:21,https://api.github.com/repos/google/ExoPlayer/git/commits/d3cdf52591768148b8c689ad1402172728f5cdc3,d3cdf52591768148b8c689ad1402172728f5cdc3,"Sanitize MappedTrackInfo API

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193897041"
falhassen,2018-04-20 20:02:02,https://api.github.com/repos/google/ExoPlayer/git/commits/c116391fe26244d02a47ef4367ac2bc36f6f1c02,c116391fe26244d02a47ef4367ac2bc36f6f1c02,"Override RangedUri#toString.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193710604"
andrewlewis,2018-04-20 15:19:01,https://api.github.com/repos/google/ExoPlayer/git/commits/30e040a48de7bb9a1c9660409b917dca9e904806,30e040a48de7bb9a1c9660409b917dca9e904806,"Add @DrawableRes for player notification manager icon

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193670840"
andrewlewis,2018-04-20 14:41:18,https://api.github.com/repos/google/ExoPlayer/git/commits/9de4e5d7ac032f16d4dc5e6e38d0cbca2f589880,9de4e5d7ac032f16d4dc5e6e38d0cbca2f589880,"Make MediaDescriptionAdapter the last argument

If the caller wants to pass an anonymous inner class for the media description
adapter, this results in slightly more readable code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193666444"
AquilesCanta,2018-04-20 14:22:04,https://api.github.com/repos/google/ExoPlayer/git/commits/400619c1c676a2950d871a0796c9f80887826aa5,400619c1c676a2950d871a0796c9f80887826aa5,"Preemptively declare an ID3 track for HLS chunkless preparation

Issue:#3149
Issue:#4016

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193664294"
ojw28,2018-04-20 14:17:27,https://api.github.com/repos/google/ExoPlayer/git/commits/a1b8aa1514c5df6bed3f928dcb8563991f6b88cd,a1b8aa1514c5df6bed3f928dcb8563991f6b88cd,"Adding useful track selection strings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193663850"
erdemguven,2018-04-20 14:04:16,https://api.github.com/repos/google/ExoPlayer/git/commits/53a003bae242db08063365a8ab0a5d2a19c43371,53a003bae242db08063365a8ab0a5d2a19c43371,"Start downloads on DownloadService creation if there are no requirements

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193662396"
andrewlewis,2018-04-20 11:57:29,https://api.github.com/repos/google/ExoPlayer/git/commits/b125d79ed65c7644a16117c8fbfb451fbc9d0ea1,b125d79ed65c7644a16117c8fbfb451fbc9d0ea1,"Add a convenience constructor for a notification manager + channel

Also fix duplicate action strings when using a custom stop action, and do some
misc no-op cleanup.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193652377"
ojw28,2018-04-20 11:34:44,https://api.github.com/repos/google/ExoPlayer/git/commits/503a911a773b74898bf34f8ca0b843d49e492c13,503a911a773b74898bf34f8ca0b843d49e492c13,"Use correct IntDef

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193651020"
erdemguven,2018-04-20 08:57:19,https://api.github.com/repos/google/ExoPlayer/git/commits/80c28f14b38c1dbfe7bf2f14cfc27d87ea1b7bf4,80c28f14b38c1dbfe7bf2f14cfc27d87ea1b7bf4,"Re enable single SimpleCache instance assertion and add helper methods

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193637830"
falhassen,2018-04-20 00:28:19,https://api.github.com/repos/google/ExoPlayer/git/commits/0666e4f30632b46044561846edbfdb9b249ff471,0666e4f30632b46044561846edbfdb9b249ff471,"Override ChunkIndex#toString.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193600860"
erdemguven,2018-04-19 19:09:30,https://api.github.com/repos/google/ExoPlayer/git/commits/f4ade38ae461a0e376dc7446693166dde9288da0,f4ade38ae461a0e376dc7446693166dde9288da0,"Add ability to download not DRM protected content to the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193554024"
andrewlewis,2018-04-19 16:49:56,https://api.github.com/repos/google/ExoPlayer/git/commits/117dd6f33f806dfc0a2fb2753a66c402050d9254,117dd6f33f806dfc0a2fb2753a66c402050d9254,"Mark optional parameters @Nullable

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193530582"
andrewlewis,2018-04-19 15:25:49,https://api.github.com/repos/google/ExoPlayer/git/commits/2b367759cf15f9d73058d918e1fa2cf8b86c9ea6,2b367759cf15f9d73058d918e1fa2cf8b86c9ea6,"Allow overriding skipping/scaling with custom AudioProcessors

Issue: #3142

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193519029"
AquilesCanta,2018-04-19 11:09:10,https://api.github.com/repos/google/ExoPlayer/git/commits/d2c6871ce613129cb60a26bf9a5cd180792a8041,d2c6871ce613129cb60a26bf9a5cd180792a8041,"Fix HLS encryption method detection

Issue:#4145

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193494319"
ojw28,2018-04-19 11:05:34,https://api.github.com/repos/google/ExoPlayer/git/commits/cdb13dd5481f24b999fccb9667f6c6e6337a6078,cdb13dd5481f24b999fccb9667f6c6e6337a6078,"Make SelectionOverride parcelable

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193494016"
andrewlewis,2018-04-19 10:27:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5fe0b0a13b9cfedfb3e9e5c2dcdd1d729f2b14bd,5fe0b0a13b9cfedfb3e9e5c2dcdd1d729f2b14bd,"Fix @link typo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193491200"
erdemguven,2018-04-19 09:00:15,https://api.github.com/repos/google/ExoPlayer/git/commits/35e3892dbf96e733c5b4dcf503e1a921ca3a83c9,35e3892dbf96e733c5b4dcf503e1a921ca3a83c9,"Invoke CacheDataSource EventListener.onCacheIgnored once per request

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193480939"
andrewlewis,2018-04-19 08:02:21,https://api.github.com/repos/google/ExoPlayer/git/commits/8bbdb1b1437beab885a38e0077564309e9d6d290,8bbdb1b1437beab885a38e0077564309e9d6d290,"Add an @IntDef for notification channel importance

This is to avoid callers needing to do an API check or suppress inlined constant
warnings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193476188"
ojw28,2018-04-18 19:41:15,https://api.github.com/repos/google/ExoPlayer/git/commits/d4aceef8a8bdc868c9d8d2b82c597ab7057cca3a,d4aceef8a8bdc868c9d8d2b82c597ab7057cca3a,"Add getPlaybackError to Player/ExoPlayer interface

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193400443"
botaydotcom,2018-04-18 09:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/fb5e31d3d6627ab231ee10b758ae75633cfff549,fb5e31d3d6627ab231ee10b758ae75633cfff549,"Simplify logic to handle FLAC files with ID3 header.

LibFlac internally can skip ID3 tags correctly. Therefore, we don't need to keep track of the whole ID3 header section and skip through this section in Java code. We can just set the whole stream to the native library, and it will handle skipping ID3 tags correctly.

The only thing that the Java part need to do is peeking and parsing ID3 tags (if present), in order to populate the track format metadata.

GitHub: #4055.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193327602"
erdemguven,2018-04-17 09:02:27,https://api.github.com/repos/google/ExoPlayer/git/commits/a8e16f3cfe42a55842ab54a768581c00cd070f2b,a8e16f3cfe42a55842ab54a768581c00cd070f2b,"Simplify DownloadService notification requirements

This makes DownloadService easier to use in general and when only single
notification is used for all downloads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193165982"
ojw28,2018-04-16 15:46:22,https://api.github.com/repos/google/ExoPlayer/git/commits/fec7d32836dafd432894efe23d6cfeab1923d73f,fec7d32836dafd432894efe23d6cfeab1923d73f,"Remove TrackSelection.Factory from SelectionOverride

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193045534"
ojw28,2018-04-16 15:34:09,https://api.github.com/repos/google/ExoPlayer/git/commits/e99b8802eb80d650c4710df3ea6888c5675a4927,e99b8802eb80d650c4710df3ea6888c5675a4927,"Update translations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193044028"
ojw28,2018-04-16 11:08:13,https://api.github.com/repos/google/ExoPlayer/git/commits/45ed7c304cf89735943a2441c2465012b74bdb6b,45ed7c304cf89735943a2441c2465012b74bdb6b,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193016758"
cdotchen,2018-04-24 14:05:45,https://api.github.com/repos/google/ExoPlayer/git/commits/693fe2841d7844e990cb7a491b900593a1649c9b,693fe2841d7844e990cb7a491b900593a1649c9b,fix timebar scrubber notify wrong start position
ojw28,2018-04-16 10:36:59,https://api.github.com/repos/google/ExoPlayer/git/commits/d4eb2e5b8571f57169126a155c98af775f14b4ad,d4eb2e5b8571f57169126a155c98af775f14b4ad,Resync internal/external codebases
ojw28,2018-04-16 10:07:26,https://api.github.com/repos/google/ExoPlayer/git/commits/b5912efb031cf5dbaea108cb39834f2ad120e108,b5912efb031cf5dbaea108cb39834f2ad120e108,"Merge pull request #3921 from wischnow/dev-v2

support zlib compressed PGS subtitles"
ojw28,2018-04-16 10:07:11,https://api.github.com/repos/google/ExoPlayer/git/commits/650f96fd6e5294244a0f4db7c85848fa69cd22d6,650f96fd6e5294244a0f4db7c85848fa69cd22d6,"Merge pull request #4000 from jianx9/dev-v2

Provide an option to skip file descriptor sync in CacheDataSink. closeCurrentOutputStream"
tonihei,2018-04-16 09:23:22,https://api.github.com/repos/google/ExoPlayer/git/commits/92dd708ef8fa4598b8e14cdf40e30fa601e58b0c,92dd708ef8fa4598b8e14cdf40e30fa601e58b0c,"Automated g4 rollback of changelist 192816182.

*** Reason for rollback ***

Added the missing initialization to Timeline.EMPTY.

*** Original change description ***

Automated g4 rollback of changelist 192742299.

*** Reason for rollback ***

Culprit for b/78018932.

*** Original change description ***

Auto-register analytics collector in SimpleExoPlayer.

This automatically registers and deregisters an analytics collector in
SimpleExoPlayer. Doing this also allows to write integration tests checking
whether the reported window indices and media period ids are correct.

***

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=193006701"
falhassen,2018-04-13 20:35:44,https://api.github.com/repos/google/ExoPlayer/git/commits/752b90027c29bedd2117881a408e973a67a3bfc6,752b90027c29bedd2117881a408e973a67a3bfc6,"Automated g4 rollback of changelist 192742299.

*** Reason for rollback ***

Culprit for b/78018932.

*** Original change description ***

Auto-register analytics collector in SimpleExoPlayer.

This automatically registers and deregisters an analytics collector in
SimpleExoPlayer. Doing this also allows to write integration tests checking
whether the reported window indices and media period ids are correct.

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192816182"
botaydotcom,2018-04-13 16:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/0b0868889ec3caaa64579d0f3212229fc987a304,0b0868889ec3caaa64579d0f3212229fc987a304,"Supports FLAC files with high sample rate (176400 and 192000).

Also add testing media to verify FLAC extension can play these sample rates.

Github: #3769.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192783193"
andrewlewis,2018-04-13 15:04:22,https://api.github.com/repos/google/ExoPlayer/git/commits/fdbf16ed6d597339535ee6f964b9dc16be84cc9a,fdbf16ed6d597339535ee6f964b9dc16be84cc9a,"Allow setting the ad media load timeout in ImaAdsLoader

Issue: #3691

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192769801"
ojw28,2018-04-13 13:38:23,https://api.github.com/repos/google/ExoPlayer/git/commits/1944ebb46304d761ca991244e2ada2d595d4b5ee,1944ebb46304d761ca991244e2ada2d595d4b5ee,"Move random adaptation to an intent extra.

This will help with removing selection factories from
SelectionOverride. It doesn't seem worth the effort to
have this togglable and in the UI of our demo app.

This change will also:

- Help to move TrackSelectionHelper into the UI module,
  since it removes the part that's obviously debug-only.
- Make it possible to specify the ABR algorithm for each
  sample, which might be nice as we start implementing
  more of them.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192760196"
ojw28,2018-04-13 13:25:25,https://api.github.com/repos/google/ExoPlayer/git/commits/67cde97a70f60e9de6bd7fe9804fe48a7366c16f,67cde97a70f60e9de6bd7fe9804fe48a7366c16f,"Move code unrelated to mapping to DefaultTrackSelector

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192759210"
ojw28,2018-04-13 10:25:04,https://api.github.com/repos/google/ExoPlayer/git/commits/0ee39637896485bb4319b5dfd865026def4518a2,0ee39637896485bb4319b5dfd865026def4518a2,"Follow 307/308 POST redirects for license requests

I was considering putting this directly in DefaultHttpDataSource, however:

- We'd need to modify at least OkHttpDataSource as well. I'm not sure whether
  Cronet follows this type of redirect automatically or not.
- HttpDataSource instances don't know how they're going to be used, so it's
  probably correct that they behave like the underlying network stack.

Issue: #4108

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192745408"
andrewlewis,2018-04-13 10:18:19,https://api.github.com/repos/google/ExoPlayer/git/commits/22b8ab5c098d71f68d285d0caec1ad34e626d4d2,22b8ab5c098d71f68d285d0caec1ad34e626d4d2,"Fix initial application of playback parameters

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192744823"
tonihei,2018-04-13 09:59:00,https://api.github.com/repos/google/ExoPlayer/git/commits/b4a3385a6fa3feaf032ac2121c4bdeec40e34c34,b4a3385a6fa3feaf032ac2121c4bdeec40e34c34,"Auto-register analytics collector in SimpleExoPlayer.

This automatically registers and deregisters an analytics collector in
SimpleExoPlayer. Doing this also allows to write integration tests checking
whether the reported window indices and media period ids are correct.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192742299"
andrewlewis,2018-04-13 08:58:59,https://api.github.com/repos/google/ExoPlayer/git/commits/387cc2f2bd11521b2f61cc13868c8dc021f08a32,387cc2f2bd11521b2f61cc13868c8dc021f08a32,"Trim more than one sample for elst gapless

Allow trimming an arbitrary small number of samples (needing to trim up to two
samples actually seems to be common). For larger numbers of samples we do coarse
trimming by applying the edit list in the normal path, and don't use gapless
playback.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192736956"
tonihei,2018-04-13 08:54:17,https://api.github.com/repos/google/ExoPlayer/git/commits/0a68d1f09c17cb2ff0174a0434c6ad4a59416791,0a68d1f09c17cb2ff0174a0434c6ad4a59416791,"Fix pending stream offset activation in video renderer.

Currently, pending stream offset changes are kept until an output buffer
timestamp surpasses the next pending stream offset. However, this is
problematic if the next stream offset overlaps with the current output
buffer sample times (e.g. because the next stream starts at a non-zero start
time).

To correctly time the switch to the next stream offset, this change keeps
the timestamp of the last queued input sample as switch point. And we only
switch to the new offset after an output sample timestamp reached this switch
point.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192736637"
erdemguven,2018-04-12 17:17:57,https://api.github.com/repos/google/ExoPlayer/git/commits/9a4e083b4ec6286b94f7e2bd7feefaaa12cabde7,9a4e083b4ec6286b94f7e2bd7feefaaa12cabde7,"Blacklist Philips QM163E from setOutputSurface

Issue: #4104

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192629223"
tonihei,2018-04-12 16:27:36,https://api.github.com/repos/google/ExoPlayer/git/commits/0802ecfee351b1b115c3b8c8547882612b34e1c8,0802ecfee351b1b115c3b8c8547882612b34e1c8,"Automated g4 rollback of changelist 192621199.

*** Reason for rollback ***

Rollback only needed to cherry-pick into Photos release.

*** Original change description ***

Automated g4 rollback of changelist 190906020.

*** Reason for rollback ***

Breaks looping.

*** Original change description ***

Automated g4 rollback of changelist 190628272.

*** Reason for rollback ***

b/76391022 was caused by a timestamp correction in StabilizableSimpleExoPlayer which will be fixed with this CL.

*** Original change description ***

Automated g4 rollback of changelist 189570277.

*** Reason for rollback ***

causes b/76391022, motion still playback in Photos is broken

**...

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192621719"
falhassen,2018-04-12 16:23:32,https://api.github.com/repos/google/ExoPlayer/git/commits/692b7a674a6214ac26f4abef0da38ebc8c53223b,692b7a674a6214ac26f4abef0da38ebc8c53223b,"Automated g4 rollback of changelist 190906020.

*** Reason for rollback ***

Breaks looping.

*** Original change description ***

Automated g4 rollback of changelist 190628272.

*** Reason for rollback ***

b/76391022 was caused by a timestamp correction in StabilizableSimpleExoPlayer which will be fixed with this CL.

*** Original change description ***

Automated g4 rollback of changelist 189570277.

*** Reason for rollback ***

causes b/76391022, motion still playback in Photos is broken

*** Original change description ***

Used fixed time frame in clipping media period.

Currently, whenever the clipping is updated, we...

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192621199"
AquilesCanta,2018-04-12 14:51:36,https://api.github.com/repos/google/ExoPlayer/git/commits/10d727e8104eeb38b2db8259babf096f73b64833,10d727e8104eeb38b2db8259babf096f73b64833,"Use misc status code string when a Cast status code description is not available

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192609475"
erdemguven,2018-04-12 12:37:13,https://api.github.com/repos/google/ExoPlayer/git/commits/8809193266cbc8a86e282bbc8a49ca403b0a5492,8809193266cbc8a86e282bbc8a49ca403b0a5492,"Add ContentMetadataInternal helper class

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192596362"
AquilesCanta,2018-04-12 11:07:50,https://api.github.com/repos/google/ExoPlayer/git/commits/7d0067e29838d87da659f00360fb09a092e4da98,7d0067e29838d87da659f00360fb09a092e4da98,"Fix external storage read permissions bug

Fix bug which causes the PlayerActivity to finish whenever the
android.permission.READ_EXTERNAL_STORAGE permission is requested.

A better solution would involve not requesting permissions if a
previous request is still pending. This would involve keeping
extra state in the activity, so this solution is used to keep
the demo app's complexity at a minimum.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192588821"
andrewlewis,2018-04-11 06:41:20,https://api.github.com/repos/google/ExoPlayer/git/commits/3c78dc22f6df82a3169bd558d5fe165ff468144e,3c78dc22f6df82a3169bd558d5fe165ff468144e,"Handle non-empty EoS buffers, for audio

This fixes gapless playback of streams with encoder padding on devices where the
decoder could set the end of stream flag on a non-empty final buffer.

Issue: #3449

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192407924"
andrewlewis,2018-04-11 05:47:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ee8fc74d651a8d675b1e0633071aa6ba6a07f3db,ee8fc74d651a8d675b1e0633071aa6ba6a07f3db,"Update IMA to 3.8.5 and Play Services to 12.0.0

Issue: #3911

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192404702"
ojw28,2018-04-10 23:33:31,https://api.github.com/repos/google/ExoPlayer/git/commits/d07594548709b568bb394707e34bbbd0793d769e,d07594548709b568bb394707e34bbbd0793d769e,"Merge pull request #3977 from Khang-NT/dev-v2

Remove duplicate code MediaSessionConnector.java"
AquilesCanta,2018-04-10 16:35:06,https://api.github.com/repos/google/ExoPlayer/git/commits/2084ba7b057926e61cefa1a8068801edab358945,2084ba7b057926e61cefa1a8068801edab358945,"Update supported-formats and DrmSessionManager#canAcquireSession

Issue:#4022

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192297801"
ojw28,2018-04-10 10:35:03,https://api.github.com/repos/google/ExoPlayer/git/commits/3c93142a4e85e22e2e8aa6ce6d1b801eecb6230a,3c93142a4e85e22e2e8aa6ce6d1b801eecb6230a,"Move MappingTrackSelector tests to DefaultTrackSelector

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192263391"
ojw28,2018-04-10 09:49:27,https://api.github.com/repos/google/ExoPlayer/git/commits/3568dca3b10e8fe0809866d3c7fad4e42c4f00a3,3568dca3b10e8fe0809866d3c7fad4e42c4f00a3,"Make tests use DefaultTrackSelector

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192259167"
botaydotcom,2018-04-09 15:06:01,https://api.github.com/repos/google/ExoPlayer/git/commits/986095a4a33859d6059b265f16954996dfdbcec3,986095a4a33859d6059b265f16954996dfdbcec3,"Support FLAC files with ID3 headers.

Support parsing ID3 tags at the beginning of FLAC files, even though FLAC spec
does not require this.

GitHub: #4055.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192127929"
ojw28,2018-04-09 14:46:55,https://api.github.com/repos/google/ExoPlayer/git/commits/6dc6f79f6468374115719ed3da2726de11bbb50e,6dc6f79f6468374115719ed3da2726de11bbb50e,"Remove redundant state from TrackSelectorResult

A renderer configuration being null is equivalent to the
renderer being disabled. Remove the redundant state.

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192126015"
andrewlewis,2018-04-09 12:44:09,https://api.github.com/repos/google/ExoPlayer/git/commits/c54b195a2961c6610513d57173406e479e39dd41,c54b195a2961c6610513d57173406e479e39dd41,"Allow applications to access codec capabilities

Issue: #3820

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192115208"
tonihei,2018-04-09 09:32:05,https://api.github.com/repos/google/ExoPlayer/git/commits/d4a03d3b36fff530c5420e4d2e34133ad9c03840,d4a03d3b36fff530c5420e4d2e34133ad9c03840,"Remove some superfluous ""custom""s.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192100852"
andrewlewis,2018-04-09 09:24:57,https://api.github.com/repos/google/ExoPlayer/git/commits/60aecdf3b306ac2bea2befbffbfb576c87ccca48,60aecdf3b306ac2bea2befbffbfb576c87ccca48,"Expose setExtraAdGroupMarkers on PlayerView

Issue: #4097

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=192100000"
ojw28,2018-04-06 16:54:02,https://api.github.com/repos/google/ExoPlayer/git/commits/75338530ef47b690de021e2ced5bde683d9c6b07,75338530ef47b690de021e2ced5bde683d9c6b07,"Simplify disabling renderers in ExoPlayerTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191901120"
ojw28,2018-04-06 15:45:04,https://api.github.com/repos/google/ExoPlayer/git/commits/03a36ce6bae8ec00d19bb7386a4b87a882434f33,03a36ce6bae8ec00d19bb7386a4b87a882434f33,"Fix NPE cause by demo app adding null listener to drm manager

Also added an assertion to the DRM event dispatcher to cause
immediate failure when this happens. This is consistent with
the assertion in the equivalent MediaSource class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191892735"
andrewlewis,2018-04-06 14:28:22,https://api.github.com/repos/google/ExoPlayer/git/commits/f5b568fc7d91fdaaafb2dcefc79612a43c8a6187,f5b568fc7d91fdaaafb2dcefc79612a43c8a6187,"Scale the minimum buffer size in shouldContinueLoading

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191885689"
ojw28,2018-04-06 11:13:24,https://api.github.com/repos/google/ExoPlayer/git/commits/9a507db171fe6b837614bb8cb34e2d2e4b6ef804,9a507db171fe6b837614bb8cb34e2d2e4b6ef804,"Fix ClearKey response conversion pre O-MR1

Issue: #4075

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191872512"
andrewlewis,2018-04-06 10:02:23,https://api.github.com/repos/google/ExoPlayer/git/commits/02bc2d7ce15c5e2ffe994b52a7fe0396fa420cb1,02bc2d7ce15c5e2ffe994b52a7fe0396fa420cb1,"Add DefaultLoadControl test for starting playback

Also refactor the tests to make them behavioral (rather than testing the method)
and inline simple assertions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191867614"
tonihei,2018-04-06 10:01:14,https://api.github.com/repos/google/ExoPlayer/git/commits/66d2b76a6c63e0967ab08fbedfe38a300e90cef6,66d2b76a6c63e0967ab08fbedfe38a300e90cef6,"Remove test max SDK version overrides.

These don't seem to be needed anymore. All tests run without them in gradle
and Blaze.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191867518"
andrewlewis,2018-04-05 18:52:28,https://api.github.com/repos/google/ExoPlayer/git/commits/280cc545dd5c5a8e6af86fdacdb2a4944e02ba5f,280cc545dd5c5a8e6af86fdacdb2a4944e02ba5f,"Search for TrueHD syncframes

In MatroskaExtractor TrueHD audio samples are joined into larger chunks. For
some streams the resulting chunked samples seem never to start with a syncframe.
This could result in playback of TrueHD streams getting stuck after seeking
because we could never read a syncframe at the start of a sample to determine
the sample size.

Instead of expecting to find a syncframe at the start of a sample, search for it
within the sample, to fix this issue.

Note: this means that we may search a few thousand bytes to find the sample
size, but the cost is only incurred for the first audio sample read.

Issue: #3845

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191775779"
andrewlewis,2018-04-05 18:09:19,https://api.github.com/repos/google/ExoPlayer/git/commits/1b845442649cd3f5b0ed72c5f03c8fc67c6b9d70,1b845442649cd3f5b0ed72c5f03c8fc67c6b9d70,"Improve TrueHD syncframe detection

Also increase the chunking size to sixteen samples.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191768169"
tonihei,2018-04-05 14:21:18,https://api.github.com/repos/google/ExoPlayer/git/commits/6b82d1c2bdf7464845d7f31250f87313154ced50,6b82d1c2bdf7464845d7f31250f87313154ced50,"Add setters to MediaSource factories for custom window tag.

This field (formerly ""id"") is almost impossible to use so far. Having setters
in the factories allows to specify custom tags for all media sources.

Also added a ExoPlayer.getCurrentTag() method to retrieve the tag of the
currently playing media source in a convenient way.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191738754"
tonihei,2018-04-05 11:54:11,https://api.github.com/repos/google/ExoPlayer/git/commits/f25c7a859a96a71184d09de9700e09869f4f3452,f25c7a859a96a71184d09de9700e09869f4f3452,"Add analytics listener interface and default data collector.

The data collector keeps track of active media periods to assign each event to
the correct media period and/or window. This information, together with other
information like playback position and buffered duration, is then forwarded
with the event to all registered listeners.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191726408"
botaydotcom,2018-04-05 11:08:39,https://api.github.com/repos/google/ExoPlayer/git/commits/68627717255446d7fddbf805eb2920ab3ee5624a,68627717255446d7fddbf805eb2920ab3ee5624a,"Remove duplicate line in Releasenotes.md.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191722477"
ojw28,2018-04-05 09:57:47,https://api.github.com/repos/google/ExoPlayer/git/commits/e26cad1a6d42189bae139ccd03656dd8b5e96573,e26cad1a6d42189bae139ccd03656dd8b5e96573,"Blacklist Huawei P9 Lite from setOutputSurface

Issue: #4084

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191716636"
andrewlewis,2018-04-05 07:44:45,https://api.github.com/repos/google/ExoPlayer/git/commits/6ea79c8a4e072e1c95b1dffd50c3c9f3a2050c55,6ea79c8a4e072e1c95b1dffd50c3c9f3a2050c55,"Fix usage of 'samples' vs 'frames' for gapless

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191704629"
andrewlewis,2018-04-04 14:01:58,https://api.github.com/repos/google/ExoPlayer/git/commits/e3eddc4d2023d828ef380d17dda89826d9d20423,e3eddc4d2023d828ef380d17dda89826d9d20423,"Apply new playback parameters only once drained

Previously the SonicAudioProcessor and SilenceSkippingAudioProcessor would track
their pending playback parameters and only apply them in flush(). Having the
values only take effect once flushed made the processors a bit more difficult to
use, especially because the value returned by isActive wouldn't update
immediately.

Make DefaultAudioSink only set the new speed/pitch/skip silence setting after
the audio processors have drained. This means it's no longer necessary to keep
track of pending parameter values and also fixes a bug where initial playback
parameters weren't applied because the audio processors weren't flushed while
uninitialized before DefaultAudioSink called isActive() on them.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191586727"
tonihei,2018-04-04 12:05:47,https://api.github.com/repos/google/ExoPlayer/git/commits/7c65b945783c5fac0245f9d5a668fce5feeced3d,7c65b945783c5fac0245f9d5a668fce5feeced3d,"Check for null listeners in deprecated paths in DefaultDrmSessionManager.

The previous API allowed to pass in null to the constructors although variants
without listeners exist. That's why we need to handle these null values.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191577891"
jinminghe,2018-04-07 03:07:26,https://api.github.com/repos/google/ExoPlayer/git/commits/b3b878daa8df9d50db5342d4d138a2d234dcbdb7,b3b878daa8df9d50db5342d4d138a2d234dcbdb7,Adjust MediaCodec operating rate according to playback rate.
ojw28,2018-04-04 12:19:22,https://api.github.com/repos/google/ExoPlayer/git/commits/4b531dcc5211ef9cb1c2adea5c12642f549c4c78,4b531dcc5211ef9cb1c2adea5c12642f549c4c78,"Merge pull request #4082 from google/dev-v2-r2.7.3

r2.7.3"
ojw28,2018-04-04 08:55:21,https://api.github.com/repos/google/ExoPlayer/git/commits/ccddacc55b8e9711237d4145aeba5e9f9c209e79,ccddacc55b8e9711237d4145aeba5e9f9c209e79,"Bump version to 2.7.3 and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191561921"
ojw28,2018-04-03 15:17:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e98209260af13c53d1258fe0b1750436d0d01c14,e98209260af13c53d1258fe0b1750436d0d01c14,"Add proguard configuration for Cast demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191442704"
ojw28,2018-04-04 08:55:21,https://api.github.com/repos/google/ExoPlayer/git/commits/631e1db7f9d90a414810fdfb50df78c995c7d34b,631e1db7f9d90a414810fdfb50df78c995c7d34b,"Bump version to 2.7.3 and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191561921"
ojw28,2018-04-03 11:21:03,https://api.github.com/repos/google/ExoPlayer/git/commits/738b519cef56925720a2386c4d288bf31f1e7216,738b519cef56925720a2386c4d288bf31f1e7216,"Add proguard configuration for Cast extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191422866"
ojw28,2018-04-03 11:16:38,https://api.github.com/repos/google/ExoPlayer/git/commits/783a1b74e3c642efd1427375f71b1e8976c498b5,783a1b74e3c642efd1427375f71b1e8976c498b5,"OkHttp extension - Improved configuration

- Upgrade to latest version
- Use api dependency, since application code that uses the
  extension more has to use OkHttp directly to make an
  OkHttpClient instance
- Add proguard configuration

Issue #4059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191422594"
ojw28,2018-04-03 10:38:01,https://api.github.com/repos/google/ExoPlayer/git/commits/7171cce92d7670ec3689f9282a244f7babe0155b,7171cce92d7670ec3689f9282a244f7babe0155b,"Don't rely on rootDir for Javadoc gradle files

Issue #4059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191419955"
ojw28,2018-04-03 10:16:25,https://api.github.com/repos/google/ExoPlayer/git/commits/431c5b2354e44729b68c53323804bf5e426ec052,431c5b2354e44729b68c53323804bf5e426ec052,"Remove unnecessary testInstrumentationRunner lines

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191418665"
ojw28,2018-04-03 09:31:45,https://api.github.com/repos/google/ExoPlayer/git/commits/ab3db0e4cba83676ab617b4bc84a873ba366caa0,ab3db0e4cba83676ab617b4bc84a873ba366caa0,"Remove view index adjustment for retry button (which no longer exists)

Issue: #4059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191414566"
ojw28,2018-04-03 08:27:10,https://api.github.com/repos/google/ExoPlayer/git/commits/fb868ad725f14c62143c8d5ccee7c576a54a13ef,fb868ad725f14c62143c8d5ccee7c576a54a13ef,"Remove unnecessary line from test manifests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191409777"
ojw28,2018-04-03 08:03:23,https://api.github.com/repos/google/ExoPlayer/git/commits/8e1611c15839f78c8508dca8b8f9b2bce239dc7f,8e1611c15839f78c8508dca8b8f9b2bce239dc7f,"Actually use IMA proguard configuration (oops!)

Issue: #3723

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191407560"
ojw28,2018-04-03 15:17:46,https://api.github.com/repos/google/ExoPlayer/git/commits/fa1856942bc8d2a952cd208e0d2f7750ffadc71f,fa1856942bc8d2a952cd208e0d2f7750ffadc71f,"Add proguard configuration for Cast demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191442704"
andrewlewis,2018-04-03 15:13:54,https://api.github.com/repos/google/ExoPlayer/git/commits/f2399c1c856a83ce5956167e674aa687a9aedaa9,f2399c1c856a83ce5956167e674aa687a9aedaa9,"Make flush() update parameters, and make Sonic flushable

Previously it was necessary to create a new Sonic instance every time the
processor was flushed. Add a flush() method to Sonic so that it can be reused
when seeking. It still needs to be recreated when parameters change.

SonicAudioProcessor and SilenceSkippingAudioProcessor have methods for setting
parameters that are documented as taking effect after a call to flush(), but
actually the value returned by isActive() was updated immediately. Track the
pending values and apply them in flush() to fix this.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191442336"
ojw28,2018-04-03 11:21:03,https://api.github.com/repos/google/ExoPlayer/git/commits/cb01b281dfdd924d7dcc981fc573542b5ee7b781,cb01b281dfdd924d7dcc981fc573542b5ee7b781,"Add proguard configuration for Cast extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191422866"
ojw28,2018-04-03 11:16:38,https://api.github.com/repos/google/ExoPlayer/git/commits/c861b506a3533bcea1455eed30418da6dca47014,c861b506a3533bcea1455eed30418da6dca47014,"OkHttp extension - Improved configuration

- Upgrade to latest version
- Use api dependency, since application code that uses the
  extension more has to use OkHttp directly to make an
  OkHttpClient instance
- Add proguard configuration

Issue #4059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191422594"
ojw28,2018-04-03 10:42:54,https://api.github.com/repos/google/ExoPlayer/git/commits/5f03c3759943d52b88c4b410f8ccea4ca4705a23,5f03c3759943d52b88c4b410f8ccea4ca4705a23,"Don't refresh DASH manifest if minUpdatePeriod is unset

We currently refresh repeatedly in this case. According to the
DASH spec omitting minUpdatePeriod indicates that the manifest
does not change, and therefore we should not refresh. I think
it might be valid to omit minUpdatePeriod in a dynamic manifest
if relying exclusively on EMSGs to trigger manifest refresh.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191420247"
ojw28,2018-04-03 10:38:01,https://api.github.com/repos/google/ExoPlayer/git/commits/231e1a00210d2636513a7d660297d98cdf678a9a,231e1a00210d2636513a7d660297d98cdf678a9a,"Don't rely on rootDir for Javadoc gradle files

Issue #4059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191419955"
erdemguven,2018-04-03 10:32:24,https://api.github.com/repos/google/ExoPlayer/git/commits/f7e2cdbbbb24075ca1f117cb63e7a9a7efe34972,f7e2cdbbbb24075ca1f117cb63e7a9a7efe34972,"Add missing synchronized keywords and assertions

applyContentMetadataMutations and getContentMetadata methods suppossed to be synchronized and assert the instance isn't released.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191419637"
ojw28,2018-04-03 10:16:25,https://api.github.com/repos/google/ExoPlayer/git/commits/82c71378eb8a685e2ddbf8570c9a552bfd7b214c,82c71378eb8a685e2ddbf8570c9a552bfd7b214c,"Remove unnecessary testInstrumentationRunner lines

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191418665"
ojw28,2018-04-03 09:31:45,https://api.github.com/repos/google/ExoPlayer/git/commits/62aea5857c32c0c30dde92a7ff1f79585c9c5026,62aea5857c32c0c30dde92a7ff1f79585c9c5026,"Remove view index adjustment for retry button (which no longer exists)

Issue: #4059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191414566"
andrewlewis,2018-04-03 08:35:01,https://api.github.com/repos/google/ExoPlayer/git/commits/53eae50c0c44b4d4871c67352c290db66fb2b5d6,53eae50c0c44b4d4871c67352c290db66fb2b5d6,"Simplify buffer resizing in Sonic

This is in preparation for making it possible to flush a Sonic instance so that
it's not necessary to create new ones every time the processor is flushed.

There should be no behavior changes here.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191410326"
ojw28,2018-04-03 08:27:10,https://api.github.com/repos/google/ExoPlayer/git/commits/8b5a34769f74a7c8d22985d9b92bb5c9ab1e748a,8b5a34769f74a7c8d22985d9b92bb5c9ab1e748a,"Remove unnecessary line from test manifests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191409777"
ojw28,2018-04-03 08:03:23,https://api.github.com/repos/google/ExoPlayer/git/commits/4c69826b9cea806a59bc7dd31181bc0b4ccb3346,4c69826b9cea806a59bc7dd31181bc0b4ccb3346,"Actually use IMA proguard configuration (oops!)

Issue: #3723

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=191407560"
ojw28,2018-03-29 20:58:39,https://api.github.com/repos/google/ExoPlayer/git/commits/1c6149b4d71c2948b1d8212783a5423fcdae079b,1c6149b4d71c2948b1d8212783a5423fcdae079b,"Merge pull request #4054 from google/dev-v2-r2.7.2

r2.7.2"
ojw28,2018-03-29 20:26:15,https://api.github.com/repos/google/ExoPlayer/git/commits/976182cb049d393536a2f69a3deca3a0bac8123e,976182cb049d393536a2f69a3deca3a0bac8123e,"Improve Javadoc postprocessing 2

- Fix typo
- Reinstate copy step. It's needed for images

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190976774"
ojw28,2018-03-29 20:26:15,https://api.github.com/repos/google/ExoPlayer/git/commits/aefd948e9677e95544087c26a64b5070ee0683bb,aefd948e9677e95544087c26a64b5070ee0683bb,"Improve Javadoc postprocessing 2

- Fix typo
- Reinstate copy step. It's needed for images

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190976774"
ojw28,2018-03-29 20:01:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ced8710ff96649156fb1b232c5c4d0d3940f5d62,ced8710ff96649156fb1b232c5c4d0d3940f5d62,"Improve Javadoc postprocessing

- Remove stray extra ""/"" from postprocessed oracle URLs
- Remove date lines so the Javadoc diff better shows what
  actually changed between releases

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190973079"
ojw28,2018-03-29 20:01:11,https://api.github.com/repos/google/ExoPlayer/git/commits/64b2b34798d598901cbf100ae90d4827e5e1deb1,64b2b34798d598901cbf100ae90d4827e5e1deb1,"Improve Javadoc postprocessing

- Remove stray extra ""/"" from postprocessed oracle URLs
- Remove date lines so the Javadoc diff better shows what
  actually changed between releases

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190973079"
erdemguven,2018-03-29 13:44:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a9ed7a01818432c47f670990abbdd4e9078c9682,a9ed7a01818432c47f670990abbdd4e9078c9682,"Fix DashDownloader failure for some multi segment representations

Issue: #3729

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190922866"
ojw28,2018-03-29 16:38:54,https://api.github.com/repos/google/ExoPlayer/git/commits/033b83c82eb3eef4a5f011017440191ebc42cb5b,033b83c82eb3eef4a5f011017440191ebc42cb5b,"Make toUpperCase conversions locale invariant

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190942033"
ojw28,2018-03-29 16:37:02,https://api.github.com/repos/google/ExoPlayer/git/commits/f77077a84c404510f4cc2961b533b4e266bfcf0b,f77077a84c404510f4cc2961b533b4e266bfcf0b,"Don't call getLayoutDirection before API level 17

Weirdly, the Android Javadoc indicates that it returns something
before the API level on which the same Javadoc states it was added.
In any case, we can simply not call the method to avoid the
warning, since we only use the value if the API level is at least
23 anyway.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190941776"
ojw28,2018-03-29 16:36:12,https://api.github.com/repos/google/ExoPlayer/git/commits/7be249ea2b375900de4ba5d99318cc117995d56b,7be249ea2b375900de4ba5d99318cc117995d56b,"Bump version to 2.7.2 + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190941619"
ojw28,2018-03-29 16:38:54,https://api.github.com/repos/google/ExoPlayer/git/commits/3a98f7aa9925c7b9cfa84bf261b786479b662369,3a98f7aa9925c7b9cfa84bf261b786479b662369,"Make toUpperCase conversions locale invariant

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190942033"
ojw28,2018-03-29 16:37:02,https://api.github.com/repos/google/ExoPlayer/git/commits/1648e4e9f900cc7db5c29195713156083f364fc5,1648e4e9f900cc7db5c29195713156083f364fc5,"Don't call getLayoutDirection before API level 17

Weirdly, the Android Javadoc indicates that it returns something
before the API level on which the same Javadoc states it was added.
In any case, we can simply not call the method to avoid the
warning, since we only use the value if the API level is at least
23 anyway.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190941776"
ojw28,2018-03-29 16:36:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d2fe3cf9c9dba147ae84358f08056548b18a69a6,d2fe3cf9c9dba147ae84358f08056548b18a69a6,"Bump version to 2.7.2 + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190941619"
andrewlewis,2018-03-29 16:01:35,https://api.github.com/repos/google/ExoPlayer/git/commits/8d47209a46d53b4cf4728a037bc41d2f954e4062,8d47209a46d53b4cf4728a037bc41d2f954e4062,"Make video playback smoother at the beginning

Video renderers assume that the player position is advancing linearly while in
the started state. MediaCodecVideoRenderer schedules frames for rendering in the
future in the expectation that the player position is advancing.

This assumption is not currently true when using a position from the AudioTrack:
the player position can be fixed for (in the worst case) up to about 100 ms
before it starts increasing. This leads to an effect where the first frame is
rendered then a few other frames are rendered, then there's a pause before
frames start being rendered smoothly.

Work around this issue by checking whether the position has started advancing
before scheduling frames to be rendered in the future.

It might be preferable to make the audio renderer only become ready when its
timestamp can start advancing, but this is likely to be complicated.

Issue: #3841

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190937429"
andrewlewis,2018-03-29 14:18:39,https://api.github.com/repos/google/ExoPlayer/git/commits/78204970060bca9cbad755714e6bb686e507ec16,78204970060bca9cbad755714e6bb686e507ec16,"Add speed-only constructor for PlaybackParameters

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190927811"
erdemguven,2018-03-29 13:44:04,https://api.github.com/repos/google/ExoPlayer/git/commits/1d2d777f66ec8efcd8ff1008d870ea0d3d25a7af,1d2d777f66ec8efcd8ff1008d870ea0d3d25a7af,"Fix DashDownloader failure for some multi segment representations

Issue: #3729

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190922866"
andrewlewis,2018-03-29 12:47:47,https://api.github.com/repos/google/ExoPlayer/git/commits/ba8bbd8941afca62454ef69608cc2a6be90fbdc6,ba8bbd8941afca62454ef69608cc2a6be90fbdc6,"Add skip silence option to PlaybackParameters

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190917894"
andrewlewis,2018-03-29 12:30:18,https://api.github.com/repos/google/ExoPlayer/git/commits/017c95ffdd43f4066f12ffe7730f6555c4cbe83b,017c95ffdd43f4066f12ffe7730f6555c4cbe83b,"Use audio frames vs samples consistently in Sonic

In audio processors an audio frame consists of a sample (which is 2 bytes for
16-bit PCM) for each channel. Sonic used ""sample"" to refer to this.

We've already diverged from the original source for Sonic quite a bit (deleting
code and making stylistic changes) and there haven't been upstream changes so
far, so it seems fine to start making more substantial changes here.

There should be no behavior changes here.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190916793"
ojw28,2018-03-29 12:20:58,https://api.github.com/repos/google/ExoPlayer/git/commits/90bdf09f1541a90ce63e5ec38e6a3662fe98c746,90bdf09f1541a90ce63e5ec38e6a3662fe98c746,"Fix Javadoc generation + Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190916130"
ojw28,2018-03-29 08:39:15,https://api.github.com/repos/google/ExoPlayer/git/commits/9433e44c09198236b4e3ef6be7fb21b7ed546f47,9433e44c09198236b4e3ef6be7fb21b7ed546f47,"Update build tools for Android Studio 3.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190896757"
ojw28,2018-03-28 11:34:24,https://api.github.com/repos/google/ExoPlayer/git/commits/f36de381d9ba52cf903f112a0de7fd638c8c1d2c,f36de381d9ba52cf903f112a0de7fd638c8c1d2c,"Fix ""FLAC decoder input buffer too small"" issue

Issue: #3514

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190752950"
tonihei,2018-03-28 11:13:59,https://api.github.com/repos/google/ExoPlayer/git/commits/516f163887ed973898a8402dc2ce7c678dcf8860,516f163887ed973898a8402dc2ce7c678dcf8860,"Update Ffmpeg README with supported NDK versions disclaimer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190751660"
botaydotcom,2018-03-27 17:26:09,https://api.github.com/repos/google/ExoPlayer/git/commits/9299d3b3a5aee8e0325e45bba539b9acd5949e50,9299d3b3a5aee8e0325e45bba539b9acd5949e50,"Update Gradle version from 4.1 to 4.4

In Gradle 4.4, it is a bug to resolve a configuration before the lint task is
created ([see [] Therefore, to upgrade
gradle version, we need to change the ""generateJavadoc"" task to remove using
files() call during initialization phase, but change move this to doFirst()
instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190634090"
AquilesCanta,2018-03-27 12:54:52,https://api.github.com/repos/google/ExoPlayer/git/commits/50457d9110a4e27818b4802d6ef2595c958eb6bc,50457d9110a4e27818b4802d6ef2595c958eb6bc,"Assume TS when the HLS segment URI has no path

Issue:#4033

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190603518"
AquilesCanta,2018-03-27 10:00:13,https://api.github.com/repos/google/ExoPlayer/git/commits/6d9201e8db6c5a461eaf94b8751dc7d485adf62a,6d9201e8db6c5a461eaf94b8751dc7d485adf62a,"Escape :dash: emoji in RELEASENOTES

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190591835"
ojw28,2018-03-26 11:05:13,https://api.github.com/repos/google/ExoPlayer/git/commits/febe604ca177a04442c9e997ddd51dcc476b5415,febe604ca177a04442c9e997ddd51dcc476b5415,"Trim zero padding from EBML string values

Issue #4010

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190442962"
AquilesCanta,2018-03-21 13:03:55,https://api.github.com/repos/google/ExoPlayer/git/commits/da6ec9cafe203de44f599939898d0fabeed5e0d2,da6ec9cafe203de44f599939898d0fabeed5e0d2,"Add santoni and mido to codecNeedsSetOutputSurfaceWorkaround

Issue:#4006

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189896023"
marcbaechinger,2018-03-20 11:31:36,https://api.github.com/repos/google/ExoPlayer/git/commits/b04ec2190b80b0096653ce2fc8865b63d1ba2671,b04ec2190b80b0096653ce2fc8865b63d1ba2671,"Omit fast forward and rewind actions when current window is not seekable

Issue: #4001

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189722812"
botaydotcom,2018-03-15 10:31:37,https://api.github.com/repos/google/ExoPlayer/git/commits/5ce0c6feadc2d1e1bb18183bb75b7e4d80f30d9e,5ce0c6feadc2d1e1bb18183bb75b7e4d80f30d9e,"Match codecs starting with ""mp4a"" to different Audio MimeTypes

Currently, we are treating all codecs starting with ""mp4a"" as AAC. However,
some codec strings starting with ""mp4a"" are not AAC format, as should be
treated differently.

GitHub: #3779

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189163517"
ojw28,2018-03-15 08:32:11,https://api.github.com/repos/google/ExoPlayer/git/commits/38914a260b1d9bc0870a0b6d59c78f5d4f47bf28,38914a260b1d9bc0870a0b6d59c78f5d4f47bf28,"Upgrade bintray-release and gradle versions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189153913"
ojw28,2018-03-29 12:20:58,https://api.github.com/repos/google/ExoPlayer/git/commits/2b9b2510dc0a6893a7e4a30723a2f0f1b0e88288,2b9b2510dc0a6893a7e4a30723a2f0f1b0e88288,"Fix Javadoc generation + Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190916130"
andrewlewis,2018-03-29 12:13:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f634b1d4d8bfba6f4ec760ea2bd5e3c96fd5cb43,f634b1d4d8bfba6f4ec760ea2bd5e3c96fd5cb43,"Resolve locale warnings in EventLogger

Use string concatenation for Metadata.Entry instances, and add
Util.formatInvariant for numerical formatting.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190915643"
tonihei,2018-03-29 11:03:15,https://api.github.com/repos/google/ExoPlayer/git/commits/39e4112e8fd9201462da60a48a0543eff83f242a,39e4112e8fd9201462da60a48a0543eff83f242a,"Add proper live stream clipping.

This adds two options to the ClippingMediaSource which allow proper clipping
of live streams:
 1. The clipping stays fixed relative to already created media periods. That
    means that playback actually progresses through the clipped media and
    eventually reaches the end of the clipping. The window is also marked
    as non-dynamic to let playback end in this case.
 2. Allow to specify a clipping duration relative to the default position to
    be able to specify the duration of live stream which is to be played.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190911049"
tonihei,2018-03-29 10:12:37,https://api.github.com/repos/google/ExoPlayer/git/commits/09cf92771376a235599272ed65308d74a642ccca,09cf92771376a235599272ed65308d74a642ccca,"Make constructor in EventDispatcher public.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190907004"
tonihei,2018-03-29 10:02:59,https://api.github.com/repos/google/ExoPlayer/git/commits/4db6d6fbaa401272aa595a08798aa854fcf0abf7,4db6d6fbaa401272aa595a08798aa854fcf0abf7,"Automated g4 rollback of changelist 190628272.

*** Reason for rollback ***

b/76391022 was caused by a timestamp correction in StabilizableSimpleExoPlayer which will be fixed with this CL.

*** Original change description ***

Automated g4 rollback of changelist 189570277.

*** Reason for rollback ***

causes b/76391022, motion still playback in Photos is broken

*** Original change description ***

Used fixed time frame in clipping media period.

Currently, whenever the clipping is updated, we move the time frame of the
clipped period to start at 0. This causes problems when we are already playing
this period and the renderer position does no longer match the stream
positions.

This change keeps the time frame of the...

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190906020"
ojw28,2018-03-29 08:39:15,https://api.github.com/repos/google/ExoPlayer/git/commits/e716e315ff8d74fff468d1b3d555863efb8a3879,e716e315ff8d74fff468d1b3d555863efb8a3879,"Update build tools for Android Studio 3.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190896757"
andrewlewis,2018-03-29 08:30:11,https://api.github.com/repos/google/ExoPlayer/git/commits/78ff4af6a7e298207b437a87177f542d10e70708,78ff4af6a7e298207b437a87177f542d10e70708,"Clean up AudioProcessor implementations

- Ensure that no memory is used by audio processors that are always inactive, by
  only allocating in flush() if active. If data was already allocated but a
  processor becomes inactive we assume that the allocation may be needed in
  future so do not remove it (e.g., in the case of ResamplingAudioProcessor).
- Make SilenceSkippingAudioProcessor set up its buffers in flush(), and clarify
  that it is always necessary to call flush() if configure() returns true.
- Make reset() reset all state for all processors.
- Use @Nullable state or empty arrays for inactive audio processor buffers.
- Miscellaneous style/consistency cleanup.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190895783"
erdemguven,2018-03-28 19:52:34,https://api.github.com/repos/google/ExoPlayer/git/commits/acca4f238bff3197fe495f67959dbca45f1f1dda,acca4f238bff3197fe495f67959dbca45f1f1dda,"Add missing @Nullable annotations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190817805"
AquilesCanta,2018-03-28 17:03:50,https://api.github.com/repos/google/ExoPlayer/git/commits/fbd7c0bd1f8bc160beec04901141f63dc5e5a5d0,fbd7c0bd1f8bc160beec04901141f63dc5e5a5d0,"Fix typo in DownloadAction

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190787979"
erdemguven,2018-03-28 17:02:59,https://api.github.com/repos/google/ExoPlayer/git/commits/e12f890dee0fea2a744d3ac9878b1fe97379820e,e12f890dee0fea2a744d3ac9878b1fe97379820e,"Fix NPE in PlayerActivity while playing a playlist

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190787884"
erdemguven,2018-03-28 16:21:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f40add52440a81abf1fa16bc0271b3bf36dd2033,f40add52440a81abf1fa16bc0271b3bf36dd2033,"Add a DownloadManager constructor with default parameter values

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190782395"
tonihei,2018-03-28 14:27:50,https://api.github.com/repos/google/ExoPlayer/git/commits/db475fea86793c728365db059273e89b138f2927,db475fea86793c728365db059273e89b138f2927,"Add back accidentally deleted parameter in PlayerActivity.

A merge error in a previous change removed the drmSessionManager from
the player factory call.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190769364"
tonihei,2018-03-28 14:18:17,https://api.github.com/repos/google/ExoPlayer/git/commits/a71a87af5c5c54498e6160ffa00ca26abe604be6,a71a87af5c5c54498e6160ffa00ca26abe604be6,"Amend WaitForTimelineChange action to allow waiting for arbitrary timeline.

In some situations, the timeline can't be specified because it is created
internally by the media source under test. If the test still needs to wait for
a timeline update, this change allows to do that by specifying an expected
timeline of null.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190768386"
tonihei,2018-03-28 13:52:53,https://api.github.com/repos/google/ExoPlayer/git/commits/e2289478317f00b916b555acd64d231cc2333819,e2289478317f00b916b555acd64d231cc2333819,"Check for failure cases in demo app before instantiating player and source.

Doing that in the current order may result in cases where we have a player
instance but a null media source and thus the next call to initializePlayer
will fail.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190765633"
ojw28,2018-03-28 11:34:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0989f272f2f9c01e5181b238b01e494e8639404b,0989f272f2f9c01e5181b238b01e494e8639404b,"Fix ""FLAC decoder input buffer too small"" issue

Issue: #3514

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190752950"
tonihei,2018-03-28 11:13:59,https://api.github.com/repos/google/ExoPlayer/git/commits/11dbe6d04bc934ca5f2f2137e3c1b8849b6dd5a0,11dbe6d04bc934ca5f2f2137e3c1b8849b6dd5a0,"Update Ffmpeg README with supported NDK versions disclaimer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190751660"
andrewlewis,2018-03-28 08:14:56,https://api.github.com/repos/google/ExoPlayer/git/commits/6dcfe57fd3136bf82e8db41eb6d547461119ac23,6dcfe57fd3136bf82e8db41eb6d547461119ac23,"Add SilenceSkippingAudioProcessor

This uses a simple threshold-based algorithm for classifying audio frames as
silent, and removes silences from input audio that last longer than a given
duration.

The plan is to expose this functionality via PlaybackParameters in a later
change.

Issue: #2635

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190737027"
ojw28,2018-03-27 18:03:44,https://api.github.com/repos/google/ExoPlayer/git/commits/18df028ce2e014947be50bad65e7071312b3b39b,18df028ce2e014947be50bad65e7071312b3b39b,"Remove TrackGroups from TrackSelectorResult

They don't really belong there; it was basically a convenience
thing where one of the arguments to the track selector was being
packaged up in the result to avoid having to hold a separate
reference to it.

This change is being made as a precursor to a subsequent change
where creating the TrackSelectorResult will move from
MappingTrackSelector to DefaultTrackSelector. DefaultTrackSelector
doesn't currently have access to the un-mapped tracks, and so is
unable to create a TrackSelectorResult. It's IMO preferable to
keep it that way rather than passing them down just so they can
be included in the result.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190640594"
ojw28,2018-03-27 17:35:41,https://api.github.com/repos/google/ExoPlayer/git/commits/0a4ea1cd3e5b91277f1b5054c1a445872755250a,0a4ea1cd3e5b91277f1b5054c1a445872755250a,"Make DefaultTrackSelector.Parameters parcelable

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190635670"
botaydotcom,2018-03-27 17:26:09,https://api.github.com/repos/google/ExoPlayer/git/commits/13592dfb53ec99ce1fdb2744e34717dbdec9dea8,13592dfb53ec99ce1fdb2744e34717dbdec9dea8,"Update Gradle version from 4.1 to 4.4

In Gradle 4.4, it is a bug to resolve a configuration before the lint task is
created ([see [] Therefore, to upgrade
gradle version, we need to change the ""generateJavadoc"" task to remove using
files() call during initialization phase, but change move this to doFirst()
instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190634090"
AquilesCanta,2018-03-27 16:18:57,https://api.github.com/repos/google/ExoPlayer/git/commits/74b7b905557497262b0aab6d6130ee9b75e737b6,74b7b905557497262b0aab6d6130ee9b75e737b6,"Propagate non-MediaSource-preparation playlist load errors through HlsChunkSource

Erroneous condition:
===================
If the track selection contains a subset of the available variants in the
master playlist, but only the selected variants return 404, the playlist
tracker will never propagate the error.

Fix:
====
The Chunk source will propagate the playlist load error if no more
alternative playlists are available (because all are already blacklisted).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190624484"
AquilesCanta,2018-03-27 12:54:52,https://api.github.com/repos/google/ExoPlayer/git/commits/71e5b2c07333a475d6f723a566afbef8d7eb92c9,71e5b2c07333a475d6f723a566afbef8d7eb92c9,"Assume TS when the HLS segment URI has no path

Issue:#4033

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190603518"
erdemguven,2018-03-27 11:30:11,https://api.github.com/repos/google/ExoPlayer/git/commits/5925f92482e8352c6ff892b3dd292815df0d0982,5925f92482e8352c6ff892b3dd292815df0d0982,"Persist content redirected URI in CacheDataSource

Issue: #2360

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190597773"
AquilesCanta,2018-03-27 11:13:18,https://api.github.com/repos/google/ExoPlayer/git/commits/f0bb6bb263e39e8e37a4c96b6fb01592c2dfd8ea,f0bb6bb263e39e8e37a4c96b6fb01592c2dfd8ea,"Make MediaPeriod implementations compliant with its specification

Currently, MediaPeriod states that continueLoading may be called
during preparation. Some implementations would throw an error if
this happened.

Also make MediaPeriod documentation clearer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190596870"
AquilesCanta,2018-03-27 10:00:13,https://api.github.com/repos/google/ExoPlayer/git/commits/b7c4a117fabac78975732a5f45f5b878c2c0e4fe,b7c4a117fabac78975732a5f45f5b878c2c0e4fe,"Escape :dash: emoji in RELEASENOTES

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190591835"
andrewlewis,2018-03-27 08:18:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6cb07adcee5c818b1b1701618557487d13855974,6cb07adcee5c818b1b1701618557487d13855974,"Fix handling of timestamps before play()

If the AudioTimestamp was sampled before play() was called, it was incorrectly
returned to the caller for sanity-checking. Fix this behavior by dropping the
timestamp internally in the AudioTimestampPoller.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190584412"
ojw28,2018-03-26 22:55:34,https://api.github.com/repos/google/ExoPlayer/git/commits/eb34a2a1021e08c9d57b138ddb9286af7e932aa8,eb34a2a1021e08c9d57b138ddb9286af7e932aa8,"Improve DASH/SS seek performance

This change enables feeding decoders from the closest sync frame
before a specified seek position, where-as previously we'd
always feed decoders from the start of the chunk. This avoids
decoding and discarding many audio samples during each seek. The
same benefit also applies to video chunks containing more than
one key-frame.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190539547"
ojw28,2018-03-26 18:39:32,https://api.github.com/repos/google/ExoPlayer/git/commits/f7cd9f7d1d16e1d470f70967f43e28ff212c23fa,f7cd9f7d1d16e1d470f70967f43e28ff212c23fa,"Seek to sync frame within moof in FragmentedMp4Extractor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190498206"
tonihei,2018-03-26 16:50:11,https://api.github.com/repos/google/ExoPlayer/git/commits/3cbe91a3b0b31ac5b7a9a206e3378f87d662678b,3cbe91a3b0b31ac5b7a9a206e3378f87d662678b,"Pass DrmSessionManager through SimpleExoPlayer.

This will allow SimpleExoPlayer to auto-register its own listener before the
drm session manager is used to set-up the renderers.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190478174"
tonihei,2018-03-26 14:40:00,https://api.github.com/repos/google/ExoPlayer/git/commits/6c0d676050a77073b3762562a6048cc3f78ccb2b,6c0d676050a77073b3762562a6048cc3f78ccb2b,"Add callbacks for media period life cycle.

This adds callbacks for creating, releasing, and starting to read from media
periods.

Such events allow listeners to keep a list of active media periods. This is
useful to determine when no further events for a certain media period are
expected. It also allows listeners to associate renderer events unambigiously
with a reading media period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190462717"
erdemguven,2018-03-26 14:26:27,https://api.github.com/repos/google/ExoPlayer/git/commits/2a85e792f80fb85b08c194e00c4d6425dfcae5f2,2a85e792f80fb85b08c194e00c4d6425dfcae5f2,"Rename Cache getContentMetadataSnapshot to getContentMetadata

And in ContentMetadata javadoc emphasize that it's a snapshot.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190461436"
tonihei,2018-03-26 12:26:09,https://api.github.com/repos/google/ExoPlayer/git/commits/eb84b144bf5279ac58e9590f8b68040e6557c7df,eb84b144bf5279ac58e9590f8b68040e6557c7df,"Move window index and media period id out of MediaLoadData again.

This gives the MediaSourceEventListener API a consistent look when new methods are
added which only have a window index and media period id.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190450270"
ojw28,2018-03-26 11:05:13,https://api.github.com/repos/google/ExoPlayer/git/commits/dfe4bfba03c10bd136c22310f6fdf78d550365be,dfe4bfba03c10bd136c22310f6fdf78d550365be,"Trim zero padding from EBML string values

Issue #4010

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190442962"
tonihei,2018-03-23 17:18:34,https://api.github.com/repos/google/ExoPlayer/git/commits/40947d52f0876b7d040c68b72953be75f1ff7c85,40947d52f0876b7d040c68b72953be75f1ff7c85,"Support multiple DefaultDrmSessionManager listeners.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190236842"
AquilesCanta,2018-03-23 14:13:09,https://api.github.com/repos/google/ExoPlayer/git/commits/416e05f58ca557d38879a93cb10f7d32b22a069f,416e05f58ca557d38879a93cb10f7d32b22a069f,"Fix exception message

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190215051"
tonihei,2018-03-22 11:16:31,https://api.github.com/repos/google/ExoPlayer/git/commits/432d746d82848806aed6be9786ac18b8247ec174,432d746d82848806aed6be9786ac18b8247ec174,"Remove default 60sec renderer offset.

This was only needed to ensure a ClippingMediaSource can provide samples from
a key frame before the clipping start time. Now the ClippingMediaSource will
not report negative timestamps, this workaround can be removed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=190045302"
ojw28,2018-03-21 17:48:19,https://api.github.com/repos/google/ExoPlayer/git/commits/391a99974e2f27a364fada183c81cce3505d4d4a,391a99974e2f27a364fada183c81cce3505d4d4a,"Fix hypothetical issue with encrypted CEA608

This will never happen in practice, since CEA608 shouldn't be encrypted (and we
can't handle it if it is), but in theory appendSampleEncryptionData can be called,
then skipFully can throw when applying the CEA608 transformation, then when
retrying appendSampleEncryptionData will be called again for the same sample.
appendSampleEncryptionData consumes from trackFragment.sampleEncryptionData, and
so the second time around data is being consumed one sample ahead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189931631"
tonihei,2018-03-21 14:41:19,https://api.github.com/repos/google/ExoPlayer/git/commits/7095a14db6fac8c56877f25b6bad32c33d9c1f5d,7095a14db6fac8c56877f25b6bad32c33d9c1f5d,"Remove MediaSourceEventListener base class from AdsMediaSource.EventListener

The ad events are independent of the other media source events. Also,
registering the listener to the internal ad media sources will report the
regular media source events twice: once directly (with a non-ad media period
id) and once through the wrapping ads source (with the correct ad media period
id).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189905561"
AquilesCanta,2018-03-21 13:03:55,https://api.github.com/repos/google/ExoPlayer/git/commits/35460dc73562b63b9d4d787081314c2b2b2face0,35460dc73562b63b9d4d787081314c2b2b2face0,"Add santoni and mido to codecNeedsSetOutputSurfaceWorkaround

Issue:#4006

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189896023"
erdemguven,2018-03-20 21:50:08,https://api.github.com/repos/google/ExoPlayer/git/commits/522f8c8a9957a3b1c593abc8fac49b7491d63dc1,522f8c8a9957a3b1c593abc8fac49b7491d63dc1,"Make demo app play content from download cache

It's inserted before HttpDataSource as read only.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189815245"
erdemguven,2018-03-20 20:15:01,https://api.github.com/repos/google/ExoPlayer/git/commits/764d18f68f94eb9588be740051f03ad46f2a78a4,764d18f68f94eb9588be740051f03ad46f2a78a4,"Add ability to play filtered manifests in PlayerActivity

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189796293"
andrewlewis,2018-03-20 17:37:21,https://api.github.com/repos/google/ExoPlayer/git/commits/c9d827fa2cfe1fc7017690ac7b13c7ac607c5832,c9d827fa2cfe1fc7017690ac7b13c7ac607c5832,"Poll the audio timestamp more frequently at the start of playback

Add logic to poll AudioTimestamp at different rates depending on when
playback starts and how the audio timestamp advances.

This fixes a pause about 500 ms after starting playback that occurs on some
devices and also makes our polling interval match the recommendations of the
AudioTrack documentation.

Issue: #3830
Issue: #3841

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189765200"
tonihei,2018-03-20 17:28:30,https://api.github.com/repos/google/ExoPlayer/git/commits/95d591e0ce1eb1db59521af8ad7853a4c052dc9d,95d591e0ce1eb1db59521af8ad7853a4c052dc9d,"Handle default position in DeferredMediaPeriod.

When creating DeferredMediaPeriods, we don't know the actual timeline yet and
thus the default position is also unknown. We can still forward the correct
default position by forwarding it the deferred media period as soon as it
becomes known.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189763460"
marcbaechinger,2018-03-20 11:31:36,https://api.github.com/repos/google/ExoPlayer/git/commits/6674f63b8bf1818ae311066abb56d795d1c4cc43,6674f63b8bf1818ae311066abb56d795d1c4cc43,"Omit fast forward and rewind actions when current window is not seekable

Issue: #4001

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189722812"
andrewlewis,2018-03-20 09:40:48,https://api.github.com/repos/google/ExoPlayer/git/commits/aad5927a2bc7e42d31372cb6020ae5f5b718a041,aad5927a2bc7e42d31372cb6020ae5f5b718a041,"Update audio renderer position before pausing

As part of pausing DefaultAudioSink, its position-related fields are reset. If
the audio timestamp API was in use, this results in falling back to the
getPlaybackHeadPosition API, which (on some devices) can lead to a jump in the
reported position.

Sample the position before pausing instead of after, to avoid this jump.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189713376"
andrewlewis,2018-03-19 14:49:34,https://api.github.com/repos/google/ExoPlayer/git/commits/99959d61303815b14f3c74c1c5be562afc229adc,99959d61303815b14f3c74c1c5be562afc229adc,"Fix handling of getLatency throwing

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189582319"
tonihei,2018-03-19 13:33:02,https://api.github.com/repos/google/ExoPlayer/git/commits/e3a90a44b7988547033128082b57b9bc753a63fb,e3a90a44b7988547033128082b57b9bc753a63fb,"Support media source events for composite media sources.

This is achieved by automatically registering a listener for child sources in
compositions. The composite media source has the chance to correct the
reported window index and media period id in the MediaLoadData of the events.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189575414"
tonihei,2018-03-19 12:16:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6b527da4621fc13d31a68bf99f6d854e6c073a0f,6b527da4621fc13d31a68bf99f6d854e6c073a0f,"Used fixed time frame in clipping media period.

Currently, whenever the clipping is updated, we move the time frame of the
clipped period to start at 0. This causes problems when we are already playing
this period and the renderer position does no longer match the stream
positions.

This change keeps the time frame of the clipped media period as it is and
instead specifies the offset of the window in the period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189570277"
erdemguven,2018-03-19 10:44:07,https://api.github.com/repos/google/ExoPlayer/git/commits/371f3acea87f6685ee65173ae30cbba5f2b6dd6b,371f3acea87f6685ee65173ae30cbba5f2b6dd6b,"Prevent multiple instances of SimpleCache in the same folder

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189562865"
andrewlewis,2018-03-16 15:51:13,https://api.github.com/repos/google/ExoPlayer/git/commits/245c59cecc3bf86a6bc98eef1526997f81b45c50,245c59cecc3bf86a6bc98eef1526997f81b45c50,"Factor out position tracking from DefaultAudioSink

DefaultAudioSink had a lot of code related to tracking the position of the
underlying AudioTrack, and working around issues with the position APIs.

Move this code to a separate class responsible for position tracking. This is in
preparation for improving the audio timestamp polling behavior.

This change is intended not to cause any behavior changes.

Issue: #3841

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189344743"
AquilesCanta,2018-03-16 11:19:52,https://api.github.com/repos/google/ExoPlayer/git/commits/137d70b0926952b6106b4a43728fd24753e30269,137d70b0926952b6106b4a43728fd24753e30269,"Clear fatal errors in Loader#startLoading

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189323050"
tonihei,2018-03-15 17:20:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c7c9a1e9e4805387348aa7aee6eeafff3378cb74,c7c9a1e9e4805387348aa7aee6eeafff3378cb74,"Send media source events for fake media sources.

This allows to test sending events when using fake media sources.
The FakeMediaSource now simulates a manifest load when being prepared.
And the FakeMediaPeriod simulates a media load when being prepared.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189205285"
andrewlewis,2018-03-15 15:19:40,https://api.github.com/repos/google/ExoPlayer/git/commits/bb72d9eb6aa7d790a021c60a45470e2bf74c9060,bb72d9eb6aa7d790a021c60a45470e2bf74c9060,"Upgrade bintray

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189188071"
erdemguven,2018-03-15 15:07:14,https://api.github.com/repos/google/ExoPlayer/git/commits/d9f2989c9e358ffc77568163bee0d420c0e4f019,d9f2989c9e358ffc77568163bee0d420c0e4f019,"Add getContentMetadata and applyContentMetadataMutations to Cache interface

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189186679"
andrewlewis,2018-03-15 12:15:06,https://api.github.com/repos/google/ExoPlayer/git/commits/234d611175752dfe7abd2f831137961cbac7b0fa,234d611175752dfe7abd2f831137961cbac7b0fa,"Automated g4 rollback of changelist 189153913.

*** Reason for rollback ***

This is breaking gradle sync with an error ""Error:Cannot create variant 'android-lint' after configuration ':exo-library-core:debugRuntimeElements' has been resolved"".

*** Original change description ***

Upgrade bintray-release and gradle versions

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189171139"
erdemguven,2018-03-15 12:00:30,https://api.github.com/repos/google/ExoPlayer/git/commits/bb71b050c9d42dfb6184cafd426204e02466b5c3,bb71b050c9d42dfb6184cafd426204e02466b5c3,"Add getContentMetadata and applyContentMetadataMutations to SimpleCache

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189169899"
erdemguven,2018-03-15 11:03:38,https://api.github.com/repos/google/ExoPlayer/git/commits/10a48e778ebc9c578e3a25077d27a1688806de7e,10a48e778ebc9c578e3a25077d27a1688806de7e,"Make CachedContent serialize whole metadata

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189166039"
botaydotcom,2018-03-15 10:31:37,https://api.github.com/repos/google/ExoPlayer/git/commits/42d7a319cd4569a93bcf43d73015e315637e144a,42d7a319cd4569a93bcf43d73015e315637e144a,"Match codecs starting with ""mp4a"" to different Audio MimeTypes

Currently, we are treating all codecs starting with ""mp4a"" as AAC. However,
some codec strings starting with ""mp4a"" are not AAC format, as should be
treated differently.

GitHub: #3779

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189163517"
andrewlewis,2018-03-15 09:00:08,https://api.github.com/repos/google/ExoPlayer/git/commits/db0d656932b37313dfba668e2c21a930e570f00d,db0d656932b37313dfba668e2c21a930e570f00d,"Consolidate position-related error handling in DefaultAudioSink

This is a step towards factoring out position tracking functionality.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189155624"
ojw28,2018-03-15 08:32:11,https://api.github.com/repos/google/ExoPlayer/git/commits/405d39b518f9aaed2a69b3706420d5d700a68fe5,405d39b518f9aaed2a69b3706420d5d700a68fe5,"Upgrade bintray-release and gradle versions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189153913"
andrewlewis,2018-03-14 14:51:47,https://api.github.com/repos/google/ExoPlayer/git/commits/e6ce6764d71d2032c025d793b8f6269769ff05c1,e6ce6764d71d2032c025d793b8f6269769ff05c1,"Clean up DefaultAudioSink

This is a first step towards factoring out position tracking functionality.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189027731"
ojw28,2018-03-14 09:16:27,https://api.github.com/repos/google/ExoPlayer/git/commits/0b182d1849cb7966515187072139d2dc6f9ff717,0b182d1849cb7966515187072139d2dc6f9ff717,"Remove versions from IMA demo manifest that are now specified via gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=189000217"
erdemguven,2018-03-13 17:12:38,https://api.github.com/repos/google/ExoPlayer/git/commits/e565a46a7d4723d3bc46b51f1b1760fa0f6f46ed,e565a46a7d4723d3bc46b51f1b1760fa0f6f46ed,"Add DefaultContentMetadata serialization and deserialization

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188889091"
ojw28,2018-03-14 00:17:06,https://api.github.com/repos/google/ExoPlayer/git/commits/b6155d2e08580dc07cd249d6439beacd99ca08b2,b6155d2e08580dc07cd249d6439beacd99ca08b2,"Merge pull request #3983 from google/dev-v2-r2.7.1

r2.7.1"
ojw28,2018-03-13 23:48:55,https://api.github.com/repos/google/ExoPlayer/git/commits/ff43df1e89ef11713e0e247ace65757a4b8e858c,ff43df1e89ef11713e0e247ace65757a4b8e858c,Remove versions from IMA demo manifest that are now specified via gradle
ojw28,2018-03-13 23:44:52,https://api.github.com/repos/google/ExoPlayer/git/commits/bd71a60f48c364b5de2a2c4ef0cd063870173ee5,bd71a60f48c364b5de2a2c4ef0cd063870173ee5,Remove stray test
AquilesCanta,2018-03-13 14:48:04,https://api.github.com/repos/google/ExoPlayer/git/commits/5706105b7c269d416f5732ee59a126dacd4bf25e,5706105b7c269d416f5732ee59a126dacd4bf25e,"Recreate the cast media queue whenever the timeline is cleared

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188871914"
AquilesCanta,2018-03-13 14:48:04,https://api.github.com/repos/google/ExoPlayer/git/commits/18b1ec7a2fa033009c4173d839d0959d4e5beb01,18b1ec7a2fa033009c4173d839d0959d4e5beb01,"Recreate the cast media queue whenever the timeline is cleared

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188871914"
andrewlewis,2018-03-13 10:54:48,https://api.github.com/repos/google/ExoPlayer/git/commits/07f898d44142c2a64689ea9fa2883a6acbff5ad0,07f898d44142c2a64689ea9fa2883a6acbff5ad0,"Use @IntDef for some more int-based enumerations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188853170"
tonihei,2018-03-13 09:45:33,https://api.github.com/repos/google/ExoPlayer/git/commits/4f5663632859e986077d5fcf2ac98314b19d7a4b,4f5663632859e986077d5fcf2ac98314b19d7a4b,"Add window index and media period id to media source event listener events.

This allows to distinguish between media source events of multi-window and
multi-period media sources. In this change, only media sources currently reporting
events are changed. Proper support in composite sources will be added in a later
change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188847366"
erdemguven,2018-03-12 17:36:23,https://api.github.com/repos/google/ExoPlayer/git/commits/00a7306fd8aaf7e6f036449eb08f295a47de42cf,00a7306fd8aaf7e6f036449eb08f295a47de42cf,"Make CachedContent store content length in ContentMetadata

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188742379"
ojw28,2018-03-09 19:38:20,https://api.github.com/repos/google/ExoPlayer/git/commits/f9b70c23741c9b5004c1e4e62a6e2161e0efa7b6,f9b70c23741c9b5004c1e4e62a6e2161e0efa7b6,"Bump version to 2.7.1 and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188514063"
ojw28,2018-03-09 16:44:24,https://api.github.com/repos/google/ExoPlayer/git/commits/bdc5b5624d45f5abe3292d7dd03091c8f413f493,bdc5b5624d45f5abe3292d7dd03091c8f413f493,"Centralize version and target sdk constants

We had these specified directly in AndroidManifest.xml due to
our internal build setup. This change makes our internal build
re-write AndroidManifest.xml to dynamically insert the required
values, meaning they no longer need specifying in each manifest.

Bonus 1: Internally built demo apps now include the CL number at
which they're built in the version name :).

Bonus 2: Removes lint warning that complains min/target SDK
values in the manifest are redundant.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188489115"
ojw28,2018-03-12 13:56:35,https://api.github.com/repos/google/ExoPlayer/git/commits/29839ab6a65ebbbe745612956291f240ead140ec,29839ab6a65ebbbe745612956291f240ead140ec,"Fix min api check in RobolectricUtil

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188716201"
tonihei,2018-03-12 14:19:33,https://api.github.com/repos/google/ExoPlayer/git/commits/c38e7b1aeb46b4c0d9b7c205a4d979823243a483,c38e7b1aeb46b4c0d9b7c205a4d979823243a483,"Simplify list of pending deferred media periods in ConcatenatingMediaSource.

This change also simplifies reporting the right media source events in a
future change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188718504"
ojw28,2018-03-12 13:56:35,https://api.github.com/repos/google/ExoPlayer/git/commits/78e6979725733fc1140d4a79dad859dad30ab2fe,78e6979725733fc1140d4a79dad859dad30ab2fe,"Fix min api check in RobolectricUtil

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188716201"
ojw28,2018-03-09 19:38:20,https://api.github.com/repos/google/ExoPlayer/git/commits/9c10c2d2a664d7d7fdf2a62de6b0a130864ffa68,9c10c2d2a664d7d7fdf2a62de6b0a130864ffa68,"Bump version to 2.7.1 and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188514063"
ojw28,2018-03-09 16:44:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0e756b0e71d99ba1b52174164ee6b5a74e0bcdfb,0e756b0e71d99ba1b52174164ee6b5a74e0bcdfb,"Centralize version and target sdk constants

We had these specified directly in AndroidManifest.xml due to
our internal build setup. This change makes our internal build
re-write AndroidManifest.xml to dynamically insert the required
values, meaning they no longer need specifying in each manifest.

Bonus 1: Internally built demo apps now include the CL number at
which they're built in the version name :).

Bonus 2: Removes lint warning that complains min/target SDK
values in the manifest are redundant.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188489115"
erdemguven,2018-03-09 15:25:35,https://api.github.com/repos/google/ExoPlayer/git/commits/e13789bfcc5bc544fe951e033a55e6d12610da8a,e13789bfcc5bc544fe951e033a55e6d12610da8a,"Hide internal DownloadManager states

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188481259"
andrewlewis,2018-03-09 11:43:45,https://api.github.com/repos/google/ExoPlayer/git/commits/a58bffbe52fb5cbd6e6b9e485678f79d741a06a3,a58bffbe52fb5cbd6e6b9e485678f79d741a06a3,"Fix clipping to end of source

Issue: #3966

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188465096"
tonihei,2018-03-09 10:46:00,https://api.github.com/repos/google/ExoPlayer/git/commits/8f952162ffe35138ed0d257858a3417ebb915479,8f952162ffe35138ed0d257858a3417ebb915479,"Allow multiple media source event listeners.

This is achieved by moving the listener registration and the creation of the
event dispatcher into BaseMediaSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188461932"
erdemguven,2018-03-08 18:40:37,https://api.github.com/repos/google/ExoPlayer/git/commits/ebfd9d05350e65697706b8d308377fc5f41bc848,ebfd9d05350e65697706b8d308377fc5f41bc848,"Convert AbstractContentMetadata to DefaultContentMetadata

As it turns out there isn't much gain by subclassing
AbstractContentMetadata. Moved abstract onChange method to a listener
interface.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188353673"
marcbaechinger,2018-03-08 18:31:27,https://api.github.com/repos/google/ExoPlayer/git/commits/afd11de57dcc7ec01c9c42401ae28234e717b4d3,afd11de57dcc7ec01c9c42401ae28234e717b4d3,"add a PlayerNotificationManager to post media style notifications.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188352116"
tonihei,2018-03-08 17:02:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a526d3fafd1ec2456d3ed817c54589b528810787,a526d3fafd1ec2456d3ed817c54589b528810787,"Keep window sequence number of playing period if queue is cleared.

This allows to keep the same window sequence number if playback fails and
is then retried without resetting the position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188339509"
tonihei,2018-03-08 16:27:07,https://api.github.com/repos/google/ExoPlayer/git/commits/2a737eecc1ec1aee0240bf0dce9dee476f6fae70,2a737eecc1ec1aee0240bf0dce9dee476f6fae70,"Update default max buffer in DefaultLoadControl.

The value is increased to 50 seconds. With that the player can better handle
short network problems. This does NOT increase the maximum memory used as we
still apply the seperate DEFAULT_TARGET_BUFFER_BYTES.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188335603"
erdemguven,2018-03-08 15:11:42,https://api.github.com/repos/google/ExoPlayer/git/commits/2675d03b303cfa3e8417574334467ea5d8f65845,2675d03b303cfa3e8417574334467ea5d8f65845,"Fix typo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188327736"
andrewlewis,2018-03-08 13:54:44,https://api.github.com/repos/google/ExoPlayer/git/commits/81417e10934bba510bc4f947eca0e8a3357ef6a2,81417e10934bba510bc4f947eca0e8a3357ef6a2,"Fix workaround for stale passthrough AudioTrack position

When creating a new AC-3 passthrough AudioTrack the position
may advance from an old AudioTrack's position. The workaround
checked for the playback head position returning to zero, but
a subsequent change meant that we'd always start writing data
to the new track immediately (rather than waiting for its
position to 'stabilize' at zero).

Fix the issue by using the AudioTrack position directly. (Nb.
this doesn't handle the case of the stale position before
unwrapping being zero, but it is very unlikely to occur.)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188319795"
erdemguven,2018-03-08 11:12:08,https://api.github.com/repos/google/ExoPlayer/git/commits/5f576819d75253dde780d557ac3c554e3424308c,5f576819d75253dde780d557ac3c554e3424308c,"Add test for DefaultLoadControl.shouldContinueLoading

Also simplified shouldContinueLoading condition code and added a builder for DefaultLoadControl.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188306213"
Khang-NT,2018-03-12 12:48:52,https://api.github.com/repos/google/ExoPlayer/git/commits/41d8aa8e54456919c417fb48c8b80007fcaf08c7,41d8aa8e54456919c417fb48c8b80007fcaf08c7,"Remove duplicate code MediaSessionConnector.java
Fix updateMediaSessionMetadata() called twice;"
ojw28,2018-03-06 18:07:23,https://api.github.com/repos/google/ExoPlayer/git/commits/f44a96f184338a77432adfe8e8c6b2e1784736cb,f44a96f184338a77432adfe8e8c6b2e1784736cb,"Remove ""r"" from instructions for extension modules

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188038757"
botaydotcom,2018-02-28 13:24:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f91e6349fdd464db6902e66a672667a601abe797,f91e6349fdd464db6902e66a672667a601abe797,"Migrate ExoPlayer Gradle build files.

- Change 'compile' configuration (deprecared) to using 'implementation'
and 'api' configurations instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187311778"
tonihei,2018-02-26 15:58:29,https://api.github.com/repos/google/ExoPlayer/git/commits/4519c31c5806cbad51bc1c6c731aee703842dc5e,4519c31c5806cbad51bc1c6c731aee703842dc5e,"Move extension tests to Robolectric.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187021822"
AdityaAnand1,2018-02-26 03:41:02,https://api.github.com/repos/google/ExoPlayer/git/commits/7c7711c3558409f84a410b7edad07b68f56dba22,7c7711c3558409f84a410b7edad07b68f56dba22,replace 'compile' with 'implementation'
andrewlewis,2018-03-07 15:26:51,https://api.github.com/repos/google/ExoPlayer/git/commits/91c44902497c3ad1df5127d34d9975c99880ae19,91c44902497c3ad1df5127d34d9975c99880ae19,"Work around stalled AudioTrack up to API 28

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188173078"
andrewlewis,2018-03-07 09:21:08,https://api.github.com/repos/google/ExoPlayer/git/commits/f71b087fe4197e9e7215cb964d065dc17ad67c96,f71b087fe4197e9e7215cb964d065dc17ad67c96,"Force rendering a frame every 100 ms

Also remove logic for tracking the next output buffer in LibvpxVideoRenderer, as
this allowed many consecutive frames to be rendered that were actually late
after dropping to keyframe. It looks better to show frames at a consistent
100 ms rate.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188144739"
marcbaechinger,2018-03-06 19:52:10,https://api.github.com/repos/google/ExoPlayer/git/commits/7a386d9179b91c8539cfc87e71013e007fafb3df,7a386d9179b91c8539cfc87e71013e007fafb3df,"Add separate interface RatingCallback to handle user ratings.

To support Google Assistant media apps need to support the action
ACTION_SET_RATING. Before this change developers have to use a QueueEditor for
this which does not have any other mandatory actions required for Assistant.
With this change developers can implement the rating action with the
PlaybackPreparer which they need to implement anyway to support Assistant.

https://developer.android.com/guide/topics/media-apps/interacting-with-assistant.html#transport_controls

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188056722"
tonihei,2018-03-06 17:44:15,https://api.github.com/repos/google/ExoPlayer/git/commits/0160b87c435926f0f61686c63a5ca34b59bf13ee,0160b87c435926f0f61686c63a5ca34b59bf13ee,"Fix divergence of timeline between ExoPlayerImpl and ExoPlayerImplInternal.

The playback state in ExoPlayerImpl and ExoPlayerImplInternal is usually kept
in sync. Only the timeline was so far not updated in the same way with the
internal player using a null timeline while ExoPlayerImpl keeps the previous
timeline.

This change removes the need to keep a null timeline which allows to update
the internal timeline in the same way as the external one. This fixes problems
when retrying a failed playback multiple times.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188034988"
tonihei,2018-03-06 16:22:41,https://api.github.com/repos/google/ExoPlayer/git/commits/b7d2ae145790662f442d448063a2486fb6975b2e,b7d2ae145790662f442d448063a2486fb6975b2e,"Fix wrong start position in resetInternal.

The start position was set to the old start position instead of the current
playback position. We need to set the start position to the current playback
position to ensure a repreperation with the same media starts from the last
playback position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188025439"
ojw28,2018-03-06 15:37:46,https://api.github.com/repos/google/ExoPlayer/git/commits/b10f0332292e25417673f9819fa87f3bf99c7a63,b10f0332292e25417673f9819fa87f3bf99c7a63,"Derive duration from sample table if missing from track header

Issue: #3926

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188020756"
ojw28,2018-03-05 16:00:58,https://api.github.com/repos/google/ExoPlayer/git/commits/110d6e4fdf98fa1dbf3f07704cbec255490e61dd,110d6e4fdf98fa1dbf3f07704cbec255490e61dd,"Propagate failures handling messages on the playback thread

This restores functionality that was lost when we added
support for general timed message delivery.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187866807"
andrewlewis,2018-03-02 08:46:10,https://api.github.com/repos/google/ExoPlayer/git/commits/d8d3bd7b3fb30da8fe4dad6159674470ea2f5353,d8d3bd7b3fb30da8fe4dad6159674470ea2f5353,"Make the period and initial window positions match for all HLS streams

Before this change, HlsMediaSource timelines had a period starting at the epoch.
For VOD streams the window position in the period was the program date time.

This change makes period and initial window positions match. For live streams
the window position advances as segments are removed, so its position in the
period is the difference between the initial program date time and the program
date time of the latest playlist.

This also makes it possible to insert ads in VOD HLS content with program date
time, as the period and window are now aligned.

Issue: #3865

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187590948"
andrewlewis,2018-02-26 10:08:28,https://api.github.com/repos/google/ExoPlayer/git/commits/452e4debcc1529c190a73567ba84b223702a2dd7,452e4debcc1529c190a73567ba84b223702a2dd7,"Fix ImaAdsMediaSource isTopLevelSource

AdsMediaSource must be top-level. Currently the (deprecated) ImaAdsMediaSource
can't be used because it prepares its contained AdsMediaSource as a child
source.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186990882"
andrewlewis,2018-03-07 15:26:51,https://api.github.com/repos/google/ExoPlayer/git/commits/4fa383c02604cd2aa92167dbe4691ad4874058b6,4fa383c02604cd2aa92167dbe4691ad4874058b6,"Work around stalled AudioTrack up to API 28

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188173078"
tonihei,2018-03-07 09:38:37,https://api.github.com/repos/google/ExoPlayer/git/commits/b37773c5d60ba2e225c7d2cd7a4fc39665051a03,b37773c5d60ba2e225c7d2cd7a4fc39665051a03,"Keep ExtractorMediaSource duration for repreparation.

This allows to know the duration immediately and fixes the temporary unknown
duration in the UI when repreparing the same extractor media source.

The isSeekable property is still reset to false as we can't actually seek
until the seek map has been reloaded.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188145860"
andrewlewis,2018-03-07 09:21:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e9f36f06ec1802c487c60f7c282e8a65d38f64b3,e9f36f06ec1802c487c60f7c282e8a65d38f64b3,"Force rendering a frame every 100 ms

Also remove logic for tracking the next output buffer in LibvpxVideoRenderer, as
this allowed many consecutive frames to be rendered that were actually late
after dropping to keyframe. It looks better to show frames at a consistent
100 ms rate.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188144739"
marcbaechinger,2018-03-06 19:52:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ae421bb50ccc754e62aa16e2375403fc14c693e7,ae421bb50ccc754e62aa16e2375403fc14c693e7,"Add separate interface RatingCallback to handle user ratings.

To support Google Assistant media apps need to support the action
ACTION_SET_RATING. Before this change developers have to use a QueueEditor for
this which does not have any other mandatory actions required for Assistant.
With this change developers can implement the rating action with the
PlaybackPreparer which they need to implement anyway to support Assistant.

https://developer.android.com/guide/topics/media-apps/interacting-with-assistant.html#transport_controls

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188056722"
ojw28,2018-03-06 18:57:43,https://api.github.com/repos/google/ExoPlayer/git/commits/b7c9912a3d9842599ae29248a4c7855d0973d0db,b7c9912a3d9842599ae29248a4c7855d0973d0db,"Make TrackGroup and TrackGroupArray parcelable

Issue: #3915

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188047131"
erdemguven,2018-03-06 18:23:38,https://api.github.com/repos/google/ExoPlayer/git/commits/f81dc4411244f62423d89bd4f6ed9b0ca6b6f855,f81dc4411244f62423d89bd4f6ed9b0ca6b6f855,"Add ContentMetadata and AbstractContentMetadata

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188041418"
ojw28,2018-03-06 18:07:23,https://api.github.com/repos/google/ExoPlayer/git/commits/73048f18c1f5d7722cb7dadf7161b4adc7a5f2b5,73048f18c1f5d7722cb7dadf7161b4adc7a5f2b5,"Remove ""r"" from instructions for extension modules

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188038757"
tonihei,2018-03-06 17:44:15,https://api.github.com/repos/google/ExoPlayer/git/commits/82fc5730e7b5beb2a957fe43da89d75931418530,82fc5730e7b5beb2a957fe43da89d75931418530,"Fix divergence of timeline between ExoPlayerImpl and ExoPlayerImplInternal.

The playback state in ExoPlayerImpl and ExoPlayerImplInternal is usually kept
in sync. Only the timeline was so far not updated in the same way with the
internal player using a null timeline while ExoPlayerImpl keeps the previous
timeline.

This change removes the need to keep a null timeline which allows to update
the internal timeline in the same way as the external one. This fixes problems
when retrying a failed playback multiple times.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188034988"
tonihei,2018-03-06 16:22:41,https://api.github.com/repos/google/ExoPlayer/git/commits/4e69f71e52c3600726b00f32dec73092c5419190,4e69f71e52c3600726b00f32dec73092c5419190,"Fix wrong start position in resetInternal.

The start position was set to the old start position instead of the current
playback position. We need to set the start position to the current playback
position to ensure a repreperation with the same media starts from the last
playback position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188025439"
ojw28,2018-03-06 15:37:46,https://api.github.com/repos/google/ExoPlayer/git/commits/b40e5d8c0fd720166dc4f7cb4434c10a4bb98ee1,b40e5d8c0fd720166dc4f7cb4434c10a4bb98ee1,"Derive duration from sample table if missing from track header

Issue: #3926

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188020756"
tonihei,2018-03-06 14:34:05,https://api.github.com/repos/google/ExoPlayer/git/commits/2c671711f47dac2d5b375b0cde1829774216d132,2c671711f47dac2d5b375b0cde1829774216d132,"Ensure child source ids are kept in ConcatenatingMediaSource.

Previously, child source ids were reassigned when the media source is reused.
Now the creation of the ids moved to outer level to stay in sync with the list
of child media sources.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=188014739"
ojw28,2018-03-05 16:00:58,https://api.github.com/repos/google/ExoPlayer/git/commits/8c24184f8be38fb25ca9b803a065500e9aad1581,8c24184f8be38fb25ca9b803a065500e9aad1581,"Propagate failures handling messages on the playback thread

This restores functionality that was lost when we added
support for general timed message delivery.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187866807"
tonihei,2018-03-05 15:52:22,https://api.github.com/repos/google/ExoPlayer/git/commits/c0c11af29f46d64e7bfc7f9e7c63319ee97bc6d5,c0c11af29f46d64e7bfc7f9e7c63319ee97bc6d5,"Reuse media sources in demo apps.

Especially the cast demo app benefits from this feature as it can keep its
ConcatenatingMediaSource all the time without having to repopulate it
when switching players.

Issue:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187866048"
tonihei,2018-03-05 15:44:26,https://api.github.com/repos/google/ExoPlayer/git/commits/6e5ae87cae43ebc9794f8d075e0fda1267900213,6e5ae87cae43ebc9794f8d075e0fda1267900213,"Remove initial bitrate estimate from AdaptiveTrackSelection.

This value can now be set in the DefaultBandwidthMeter instead. As a result
NO_VALUE can be removed from BandwidthMeter as we now always provide an
estimate.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187865341"
tonihei,2018-03-05 15:28:25,https://api.github.com/repos/google/ExoPlayer/git/commits/c3d6731188f9432ebd22813810fb80ed77485b96,c3d6731188f9432ebd22813810fb80ed77485b96,"Add clear method to ConcatenatingMediaSource.

This simplifies clearing a playlist without having to call removeMediaSource
repeatedly. It will also update the timeline only once.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187863857"
tonihei,2018-03-05 14:17:14,https://api.github.com/repos/google/ExoPlayer/git/commits/3eaab9e2abe8f3e96f132f9bb01c1de0d48487ab,3eaab9e2abe8f3e96f132f9bb01c1de0d48487ab,"Group arguments in MediaSourceEventListener.

There is a large number of repeated arguments in the callback methods of
MediaSourceEventListener. Grouping them into load related data and media
related data allows to significantly reduce the amount of boiler plate code
and also simplifies future extensions of either set of data.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187857252"
tonihei,2018-03-02 10:09:40,https://api.github.com/repos/google/ExoPlayer/git/commits/5fb6fc12269cb76ce49cf9f0b5b9f98a6ae2b98a,5fb6fc12269cb76ce49cf9f0b5b9f98a6ae2b98a,"Allow to specify initial bitrate estimate in DefaultBandwidthMeter.

This value is logically part of the bandwidth estimation and will eventually be
moved there from the adaptive track selection.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187597038"
andrewlewis,2018-03-02 08:46:10,https://api.github.com/repos/google/ExoPlayer/git/commits/4373e63fac9a845b04e4edf8df7393888d43a96b,4373e63fac9a845b04e4edf8df7393888d43a96b,"Make the period and initial window positions match for all HLS streams

Before this change, HlsMediaSource timelines had a period starting at the epoch.
For VOD streams the window position in the period was the program date time.

This change makes period and initial window positions match. For live streams
the window position advances as segments are removed, so its position in the
period is the difference between the initial program date time and the program
date time of the latest playlist.

This also makes it possible to insert ads in VOD HLS content with program date
time, as the period and window are now aligned.

Issue: #3865

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187590948"
ojw28,2018-03-01 18:49:07,https://api.github.com/repos/google/ExoPlayer/git/commits/73b6b20fa3e93a3787682b381786a93fb4c98fdb,73b6b20fa3e93a3787682b381786a93fb4c98fdb,"Improve decoder retention logic.

1. Allow retaining a decoder without any reconfiguration, in addition
   to retaining with reconfiguration (and not retaining)
2. Fix retention logic for video decoders to take into account changing
   ColorInfo
3. Allow retention of audio decoders when possible

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187500285"
erdemguven,2018-03-01 18:39:39,https://api.github.com/repos/google/ExoPlayer/git/commits/380ec828813c68fcc4d66613a4587145ff6be5ae,380ec828813c68fcc4d66613a4587145ff6be5ae,"Update PlayerView javadoc

Added a note about using TextureView only on hardware accelerated window.

Issue: #3901

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187498594"
botaydotcom,2018-03-01 16:52:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a3c8062e523ac66109927679ae70cb405cc5ed7e,a3c8062e523ac66109927679ae70cb405cc5ed7e,"Add support for listening to AspectRatioFrameLayout's aspect ratio update

Currently, AspectRatioFrameLayout may need to resize itself if it could not
satisfy a target aspect ratio. User may want to know when this happen, or
whether this can happen, so they can update their UI accordingly. For
example: show/hide a button to toggle different resize mode only when the
aspect ratio of the view and the content is very different.

GitHub: #3736

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187484241"
tonihei,2018-03-01 12:16:45,https://api.github.com/repos/google/ExoPlayer/git/commits/fdfaa029811dd21087a642bb6f5447c84424e0bb,fdfaa029811dd21087a642bb6f5447c84424e0bb,"Update issue template to use ""Issue #1234"" as subject for emails.

This is to ensure valid emails don't get a canned response. The canned response
is triggered when the subject doens't contain the word ""issue"".

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187458580"
tonihei,2018-02-28 13:46:18,https://api.github.com/repos/google/ExoPlayer/git/commits/75c3bfb55c6827b796fad7f322b3c3b06083bac0,75c3bfb55c6827b796fad7f322b3c3b06083bac0,"Rename Listener for timeline update to avoid confusion with MediaSourceEventListener.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187313128"
botaydotcom,2018-02-28 13:24:42,https://api.github.com/repos/google/ExoPlayer/git/commits/fcb796a80cd717f8797957b0187df44d2347ab3e,fcb796a80cd717f8797957b0187df44d2347ab3e,"Migrate ExoPlayer Gradle build files.

- Change 'compile' configuration (deprecared) to using 'implementation'
and 'api' configurations instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187311778"
tonihei,2018-02-28 10:30:20,https://api.github.com/repos/google/ExoPlayer/git/commits/2f4a3d2e5da2a45723089e1e53e5edb07b58b812,2f4a3d2e5da2a45723089e1e53e5edb07b58b812,"Replace ConcatenatingMediaSource with DynamicConcatenatingMediaSource.

The non-dynamic media source has a strict subset of features of the dynamic one and
thus can be replaced.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187299432"
tonihei,2018-02-28 09:46:40,https://api.github.com/repos/google/ExoPlayer/git/commits/32b4db361f09436f13075b6d4dd2d3150151a28e,32b4db361f09436f13075b6d4dd2d3150151a28e,"Send empty timeline for empty DynamicConcatenatingMediaSource immediately.

Without child sources, the timeline can't possibly updated again within the
current looper message. Thus, we can send the empty timeline immediately.

This fixes a recently introduced flakiness in the test.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187295700"
andrewlewis,2018-02-28 09:12:23,https://api.github.com/repos/google/ExoPlayer/git/commits/38914f0ba5a6e1fd1f32c8684699a64d885d5eaf,38914f0ba5a6e1fd1f32c8684699a64d885d5eaf,"Allow clipping offset windows

ClippingMediaSource provides a timeline where the period and window have the
same start/end positions, so when clipping a child timeline with a non-zero
offset between the window and period it is necessary to clear the offset then
apply the offset to the start/end positions used in the ClippingMediaPeriod.

Also add a message to clipping exceptions.

Also fix adjustment of seeks to the start of the clipped view.

Issue: #3888

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187292506"
tonihei,2018-02-27 17:29:49,https://api.github.com/repos/google/ExoPlayer/git/commits/b2c445776aaab420e7b971d2f2feb95846c41624,b2c445776aaab420e7b971d2f2feb95846c41624,"Allow parallel reuse of media sources.

This is achieved by adding a BaseMediaSource which keeps a reference count of the
number of times the source has been prepared and forwards to the actual implementations
only once, such that only minimal changes are needed for each media source.

Issue:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187186691"
tonihei,2018-02-27 16:37:07,https://api.github.com/repos/google/ExoPlayer/git/commits/b489f58cdbf3581ef7091e3d1af5bb671869ca6d,b489f58cdbf3581ef7091e3d1af5bb671869ca6d,"Change listener notification in DynamicConcatenatingMediaSource.

Up to now we use a boolean ""preventListenerNotification"" to suppress updates
while other operations are still in progress. This ensures, for example, that
only one initial timeline is issued even for multiple child sources.

As soon as we allow to reuse the same instance, it becomes increasingly difficult
to manage this manual listener notification suppression. Therefore, this change
schedules an update as a new message on the playback thread immediately after the
current message. This way, we also ensure that all simultaneous updates within one
looper message iteration are reported together.

Issue:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187180342"
ojw28,2018-02-27 14:01:13,https://api.github.com/repos/google/ExoPlayer/git/commits/322e15f63b358bc5f16c9d0abdeaa26a86d40cb0,322e15f63b358bc5f16c9d0abdeaa26a86d40cb0,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187165173"
tonihei,2018-03-01 10:32:27,https://api.github.com/repos/google/ExoPlayer/git/commits/052de3c6772a9932e7d30c217c23e89cea59b1f2,052de3c6772a9932e7d30c217c23e89cea59b1f2,Update ISSUE_TEMPLATE
wischnow,2018-02-28 17:08:03,https://api.github.com/repos/google/ExoPlayer/git/commits/5d1c84cebca32a629d90f6ac1d6a798f43be064f,5d1c84cebca32a629d90f6ac1d6a798f43be064f,support zlib compressed PGS subtitles
ojw28,2018-02-27 13:57:18,https://api.github.com/repos/google/ExoPlayer/git/commits/aa570621991904c18291369d9e804c94351cad70,aa570621991904c18291369d9e804c94351cad70,Restore equivalence
ojw28,2018-02-27 11:24:44,https://api.github.com/repos/google/ExoPlayer/git/commits/51405c9959deff77dfca126b337508919b63e43f,51405c9959deff77dfca126b337508919b63e43f,"Merge pull request #3863 from drhill/dev-v2_mkvDIVX

add h263 format support in fourcc codecID"
ojw28,2018-02-27 11:24:29,https://api.github.com/repos/google/ExoPlayer/git/commits/dc34ff2e6b2bc33fea71db88d80fcbbc4120ad44,dc34ff2e6b2bc33fea71db88d80fcbbc4120ad44,"Merge pull request #3771 from reudismam/dev-v2

Use the pattern ""string literal"".equals(something) to prevent NPE "
ojw28,2018-02-27 11:24:12,https://api.github.com/repos/google/ExoPlayer/git/commits/932abaf0bc43ad1a288c3dead6c3e9a19238b36a,932abaf0bc43ad1a288c3dead6c3e9a19238b36a,"Merge pull request #3887 from CoryCharlton/dev-v2

Add abstract logging methods to EventLogger"
ojw28,2018-02-27 11:24:04,https://api.github.com/repos/google/ExoPlayer/git/commits/926a276c80c49d63e631ee2873bd58a2f95110db,926a276c80c49d63e631ee2873bd58a2f95110db,"Merge pull request #3900 from AdityaAnand1/patch-1

replace 'compile' with 'implementation'"
ojw28,2018-02-26 16:40:02,https://api.github.com/repos/google/ExoPlayer/git/commits/803f15dec746be68f845d7a1e179a27edd789cdd,803f15dec746be68f845d7a1e179a27edd789cdd,"Sync issue template

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187026802"
tonihei,2018-02-26 15:58:29,https://api.github.com/repos/google/ExoPlayer/git/commits/b47fb2826be2230bd81e5102d93cb5717f49ffc9,b47fb2826be2230bd81e5102d93cb5717f49ffc9,"Move extension tests to Robolectric.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187021822"
ojw28,2018-02-26 15:56:13,https://api.github.com/repos/google/ExoPlayer/git/commits/d400efd0f7da2350498af96f4e8db237672166a2,d400efd0f7da2350498af96f4e8db237672166a2,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187021535"
ojw28,2018-02-26 15:45:24,https://api.github.com/repos/google/ExoPlayer/git/commits/5dade716090113644be46dcf3baff41c2656e45e,5dade716090113644be46dcf3baff41c2656e45e,Merge branch 'release-v2' into dev-v2
ojw28,2018-02-26 14:16:09,https://api.github.com/repos/google/ExoPlayer/git/commits/099cc384a81e3f7a5e8de31da438246abdd6afe3,099cc384a81e3f7a5e8de31da438246abdd6afe3,"Move scheduler into its own top level package

The util package is, in practice, for things that are misc enough
to not warrant their own package. If something is deserving of a
package, it's IMO best placed somewhere else (I know you could
argue it's a util, but you could argue that about almost anything
else as well).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=187010018"
ojw28,2018-02-26 11:49:15,https://api.github.com/repos/google/ExoPlayer/git/commits/0de6bb28a25d7730ddb47d16332b282becaa5209,0de6bb28a25d7730ddb47d16332b282becaa5209,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186999051"
andrewlewis,2018-02-26 10:08:28,https://api.github.com/repos/google/ExoPlayer/git/commits/c4f82514bf4513b16b6545f17cd2aa2b5aed8efb,c4f82514bf4513b16b6545f17cd2aa2b5aed8efb,"Fix ImaAdsMediaSource isTopLevelSource

AdsMediaSource must be top-level. Currently the (deprecated) ImaAdsMediaSource
can't be used because it prepares its contained AdsMediaSource as a child
source.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186990882"
ojw28,2018-02-26 10:02:32,https://api.github.com/repos/google/ExoPlayer/git/commits/f2f5aac7c5d1ba7aed0ea03994e604f4088114cf,f2f5aac7c5d1ba7aed0ea03994e604f4088114cf,"Allow audio position to jump on first input buffer

Allow the position to jump on receiving the first presentable input buffer,
if and only if the buffer timestamp differs significantly from what was
expected. This prevents a stuck buffering case for streams that are thought
to start at t=0, but actually start at t=large_value.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186990214"
AdityaAnand1,2018-02-26 03:41:02,https://api.github.com/repos/google/ExoPlayer/git/commits/707b481f2c3fd56e6f8d8a6cc9ac766bde8dc857,707b481f2c3fd56e6f8d8a6cc9ac766bde8dc857,replace 'compile' with 'implementation'
CoryCharlton,2018-02-23 17:15:14,https://api.github.com/repos/google/ExoPlayer/git/commits/9f2d53dc218f2c841927c025d0e03379b80e1fb9,9f2d53dc218f2c841927c025d0e03379b80e1fb9,Fixed the Log.d call in loge
CoryCharlton,2018-02-22 21:47:10,https://api.github.com/repos/google/ExoPlayer/git/commits/afd81146f5627d97b061ea56cbcd6b5b0a465cd6,afd81146f5627d97b061ea56cbcd6b5b0a465cd6,Add abstract logging methods to EventLogger
ojw28,2018-02-22 11:48:01,https://api.github.com/repos/google/ExoPlayer/git/commits/eb9c67fbc58e4a9bf4f17580e988ab321752e364,eb9c67fbc58e4a9bf4f17580e988ab321752e364,"Merge pull request #3882 from google/dev-v2-r2.7.0

r2.7.0"
ojw28,2018-02-22 11:43:02,https://api.github.com/repos/google/ExoPlayer/git/commits/166c4ba795ff3b5f2019c400d11bb641a4d9caa9,166c4ba795ff3b5f2019c400d11bb641a4d9caa9,Remove dev release notes from 2.7.0
ojw28,2018-02-22 11:35:18,https://api.github.com/repos/google/ExoPlayer/git/commits/1f6607a9aa6a85eeccb52d64e4fdde89288a0bc9,1f6607a9aa6a85eeccb52d64e4fdde89288a0bc9,Merge branch 'release-v2' into dev-v2-r2.7.0
ojw28,2018-02-22 10:32:17,https://api.github.com/repos/google/ExoPlayer/git/commits/6054ba418f0e4cebba8944a0c10c9616efa3ac99,6054ba418f0e4cebba8944a0c10c9616efa3ac99,Fix bad Javadoc
ojw28,2018-02-22 10:24:11,https://api.github.com/repos/google/ExoPlayer/git/commits/1a5d985e2ad37b4d5fdc18ecd20b5a914d0fdd57,1a5d985e2ad37b4d5fdc18ecd20b5a914d0fdd57,Remove stray translations
ojw28,2018-02-22 10:01:04,https://api.github.com/repos/google/ExoPlayer/git/commits/2cff596162fbdca51230e4e339967399ab174472,2cff596162fbdca51230e4e339967399ab174472,"Allow audio position to jump on first input buffer

Allow the position to jump on receiving the first presentable input buffer,
if and only if the buffer timestamp differs significantly from what was
expected. This prevents a stuck buffering case for streams that are thought
to start at t=0, but actually start at t=large_value."
ojw28,2018-02-21 15:14:25,https://api.github.com/repos/google/ExoPlayer/git/commits/f69cc191ab046b8f8c786033f7b77ed5e0137e4b,f69cc191ab046b8f8c786033f7b77ed5e0137e4b,"Drop EMSG atoms before MOOV

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186454715"
ojw28,2018-02-21 15:14:25,https://api.github.com/repos/google/ExoPlayer/git/commits/e3d44646356342a5d4abd0afbd657be0dc184d7b,e3d44646356342a5d4abd0afbd657be0dc184d7b,"Drop EMSG atoms before MOOV

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186454715"
ojw28,2018-02-20 16:21:19,https://api.github.com/repos/google/ExoPlayer/git/commits/93a40d104895a4dbf49970b05ef2f19407874878,93a40d104895a4dbf49970b05ef2f19407874878,"Fix bad @see Javadoc in CastPlayer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186305613"
ojw28,2018-02-20 16:21:19,https://api.github.com/repos/google/ExoPlayer/git/commits/fba2b46a8b547072e3e1391005aba123221549a7,fba2b46a8b547072e3e1391005aba123221549a7,"Fix bad @see Javadoc in CastPlayer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186305613"
ojw28,2018-02-20 14:36:11,https://api.github.com/repos/google/ExoPlayer/git/commits/5e6a2e57afd83340d8abf1d48f2f2517a13d0735,5e6a2e57afd83340d8abf1d48f2f2517a13d0735,Fix issue template
ojw28,2018-02-20 13:46:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c851ee9388de6db80f767dfeb8c0ce9e9508b7a8,c851ee9388de6db80f767dfeb8c0ce9e9508b7a8,"Fix robolectric tests when running with gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186291489"
ojw28,2018-02-20 14:36:11,https://api.github.com/repos/google/ExoPlayer/git/commits/356e97918785ca84a714d1d2cd7d71a78a0d79f9,356e97918785ca84a714d1d2cd7d71a78a0d79f9,Fix issue template
ojw28,2018-02-20 13:46:26,https://api.github.com/repos/google/ExoPlayer/git/commits/44f683e04ef668be9ec0689a4649e002d435eb17,44f683e04ef668be9ec0689a4649e002d435eb17,"Fix robolectric tests when running with gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186291489"
ojw28,2018-02-20 13:39:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d7a467c6bef6f3d2e95479533d8893176ea4a6b6,d7a467c6bef6f3d2e95479533d8893176ea4a6b6,Remove unnecessary strings for 2.7.0
ojw28,2018-02-19 11:02:12,https://api.github.com/repos/google/ExoPlayer/git/commits/db1f9d0a0f8b6846a1cf36aba4cad4e700d90819,db1f9d0a0f8b6846a1cf36aba4cad4e700d90819,"Bump to 2.7.0 and prepare release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186200840"
andrewlewis,2018-02-16 15:36:08,https://api.github.com/repos/google/ExoPlayer/git/commits/da27e7d22c0dc75691c163e943ba6aa554a6e5c5,da27e7d22c0dc75691c163e943ba6aa554a6e5c5,"Fix content progress updates and position faking

Occasionally the player could transition from playing content to playing an ad
after IMA called playAd. The discontinuity triggered faking the content
position, and the fake position was passed to IMA when content resumed causing
the wrong ad group to be loaded. Fix this by only faking the position if the
player transitions before playAd.

Also fix the calculation of the expected ad group index for a postroll ad, and
wait for the player to transition back from ad to content before passing a
content progress update.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185994229"
andrewlewis,2018-02-16 14:07:55,https://api.github.com/repos/google/ExoPlayer/git/commits/20dc5dc096da5b737ce29e01dec8c85a106a29e3,20dc5dc096da5b737ce29e01dec8c85a106a29e3,"Catch exceptions in all IMA callbacks

If an exception is thrown in an IMA callback it crashes the process with lots of
logging from WebView (including several stack traces, etc.). This change wraps
ImaAdsLoader code that might throw, skips any remaining ads (as the errors are
not recoverable, in general) and notifies a new load error callback so that the
application can implement its own handling. The intention is to make the loader
robust to unexpected requests from IMA and avoid crashes.

Also handle IMA loading an ad in an ad group that has no available ads. In rare
cases IMA will try to load an ad for which an error was previously notified, so
this drops those load requests allowing playback of the content to continue.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185985850"
AquilesCanta,2018-02-16 11:05:55,https://api.github.com/repos/google/ExoPlayer/git/commits/b36db1a87e16e3f6d8ccc4b9ce09e59a0cab3ccc,b36db1a87e16e3f6d8ccc4b9ce09e59a0cab3ccc,"Add little endian and 14-bit mode support for DtsReader

Issue:#3340

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185973510"
tonihei,2018-02-15 14:29:45,https://api.github.com/repos/google/ExoPlayer/git/commits/454ec5a2d7b6af94a39cd1b196979d7911ab9721,454ec5a2d7b6af94a39cd1b196979d7911ab9721,"Add window sequence number to MediaPeriodId.

All media periods are part of a queue of windows buffered and played by
ExoPlayer. When repeating windows, the current MediaPeriodId is insufficient
to distinguish between the repetitions of the same period. This makes it hard
to see to which media period load events belong to, and it is also difficult to
determine whether two media periods belong to the same logical window or
whether they are part of different repetitions of the same window.

Therefore this change adds a unique sequence number to each window in the
sequence of windows and this sequence number is saved as part of the
MediaPeriodId.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185829509"
andrewlewis,2018-02-15 12:10:53,https://api.github.com/repos/google/ExoPlayer/git/commits/fe2b01c57e21db84a74a7bad814e581aea8eda8b,fe2b01c57e21db84a74a7bad814e581aea8eda8b,"Fix content progress reporting if there is no preroll

If there was no preroll and the pending content position was set before the
first midroll, the pending content position was never cleared so loading the ad
was never triggered.

Only set a pending content position if we know that we need to trigger playing
an ad for the current position and IMA will poll for an ad (because there is a
midroll ad group). Clearing the pending content position happens when IMA pauses
content to play the ad.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185818315"
andrewlewis,2018-02-15 08:44:09,https://api.github.com/repos/google/ExoPlayer/git/commits/1c140603d4bf6f51532734c52e44fa12bf7c5105,1c140603d4bf6f51532734c52e44fa12bf7c5105,"Fix handling of ad group load errors

IMA sometimes delivers an ad group load error just after the time of the ad
group, which is problematic now that we set the expected ad group index based on
the last returned content progress.

Only update the expected ad group index once we are within a fixed preloading
threshold of the next ad.

Also fix updating the ad group to use the new ad count, and check for ad group
load errors when we have no expected ad group defensively.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185803086"
tonihei,2018-02-14 15:11:38,https://api.github.com/repos/google/ExoPlayer/git/commits/bc792c3202d0bf75e972ed7b15b2e8e9d29090d6,bc792c3202d0bf75e972ed7b15b2e8e9d29090d6,"Broaden the surface switching workaround to other Moto C+ variants.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185681751"
andrewlewis,2018-02-14 15:03:40,https://api.github.com/repos/google/ExoPlayer/git/commits/95f298f5a49e90d6fe80c10690281ecf73a91bd7,95f298f5a49e90d6fe80c10690281ecf73a91bd7,"Fix handling of ad tags with only preroll and postroll ads

Content progress is only polled if there are midroll ad groups. If the ad tag
had only preroll/postroll ads, the pending content position was not provided to
IMA, which meant that the postroll ad could never play.

Only set the pending content position if there are midroll ads.

Issue: #3715

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185680803"
AquilesCanta,2018-02-14 14:14:36,https://api.github.com/repos/google/ExoPlayer/git/commits/4276a199baf4f1b7fc1e8e9fad6f693bcac79809,4276a199baf4f1b7fc1e8e9fad6f693bcac79809,"Add initial support for EXT-X-GAP

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185676652"
erdemguven,2018-02-13 15:18:07,https://api.github.com/repos/google/ExoPlayer/git/commits/0ae56cc117a26158ec81910b753591825dba1b0a,0ae56cc117a26158ec81910b753591825dba1b0a,"Fix SmoothStreaming manifest url for downloading

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185526653"
ojw28,2018-02-14 13:31:02,https://api.github.com/repos/google/ExoPlayer/git/commits/93e6813f7694512766aa35f8cc236b1195241e49,93e6813f7694512766aa35f8cc236b1195241e49,"Use stable order for subtitle buffers with identical timestamps

Issue: #3782

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185673731"
AquilesCanta,2018-02-14 13:26:28,https://api.github.com/repos/google/ExoPlayer/git/commits/8dad8fde7801826f16c47f1d71305bbfc3ee3208,8dad8fde7801826f16c47f1d71305bbfc3ee3208,"Fix CeaUtil's invalid SeiMessage skipping

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185673454"
AquilesCanta,2018-02-14 12:25:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ed527437b7ea97bfb20bab719950c84b12a6e2e1,ed527437b7ea97bfb20bab719950c84b12a6e2e1,"Make ID3 GEOB frames parsing more robust

Issue:#3792

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185668919"
andrewlewis,2018-02-14 11:13:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5bd744000cde6dd6a9521f75d4824a00be046280,5bd744000cde6dd6a9521f75d4824a00be046280,"Handle VAST_LINEAR_ASSET_MISMATCH

This error marks the current ad group as unplayable.

Issue: #3801

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185663472"
tonihei,2018-02-14 10:55:37,https://api.github.com/repos/google/ExoPlayer/git/commits/1d7e8efbdf7226cd35113648cc4867f4cf2879d1,1d7e8efbdf7226cd35113648cc4867f4cf2879d1,"Add Meizu M5C, Lenovo K4 Note, and Sony Xperia E5 to surface workaround.

Also added comments for all existing devices for easier reference.

Issue:#3835
Issue:#3236

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185661900"
andrewlewis,2018-02-14 09:35:45,https://api.github.com/repos/google/ExoPlayer/git/commits/4ca755a3449820566250f25ff264b39705f47d94,4ca755a3449820566250f25ff264b39705f47d94,"Skip ads for which the media failed to prepare

Also make ad group skipping more robust. After calling onError for an ad, IMA
will sometimes trigger an ad group load error, so this needs to be handled in a
way that allows some ads to be loaded already for the ad group.

This change also fixes calculation of the expected ad index to take into account
whether the position is being faked to trigger loading an ad or is the actual
player position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185655844"
andrewlewis,2018-02-14 08:41:53,https://api.github.com/repos/google/ExoPlayer/git/commits/7b5bdd3c445c5a655c3873b9176f564dc979bed3,7b5bdd3c445c5a655c3873b9176f564dc979bed3,"Release Extractors on the loading thread

Releasing the player released the internal playback thread once renderers were
released. Releasing a MediaPeriod queued a Loader.ReleaseTask on the loading
thread which would post back to the playback thread. If the playback thread had
been quit by the time this happened, the release task wouldn't be run.

Release on the loading thread instead of the playback thread. This avoids
needing to block releasing the player until the loading threads have ended, and
ensures that release tasks will run eventually. As part of this change,
ExtractorMediaPeriod's call to Extractor.release will now run on the loading
thread (which means that all Extractor methods are called on that thread) and
other cleanup in ReleaseCallback will run on the loading thread instead of the
playback thread.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185651320"
ojw28,2018-02-13 18:14:17,https://api.github.com/repos/google/ExoPlayer/git/commits/99e5a3c9b41a7942dcd62583765cb5ca9a7be0e5,99e5a3c9b41a7942dcd62583765cb5ca9a7be0e5,"Add Y611 to setOutputSurfaceWorkaround

Issue: #3724

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185548632"
tonihei,2018-02-13 09:58:41,https://api.github.com/repos/google/ExoPlayer/git/commits/d4693980d6f62ab79713f4707e2c7d3d917c56b6,d4693980d6f62ab79713f4707e2c7d3d917c56b6,"Add Moto C+ to surface switching workaround.

Issue:#3835

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185501181"
andrewlewis,2018-02-13 09:05:08,https://api.github.com/repos/google/ExoPlayer/git/commits/4fec24294a4e192c3bb021ab14df9f05faa3a49b,4fec24294a4e192c3bb021ab14df9f05faa3a49b,"Fix handling of ad tags where ad groups are out of order

IMA's cue points may not be in order, so sort them. It looks like IMA events use
time ordered ad indices, so it is not necessary to map between the original cue
point order and the time order.

Issue: #3716

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185495798"
ojw28,2018-02-12 19:38:36,https://api.github.com/repos/google/ExoPlayer/git/commits/3ec96aee17983f1daa5f1d254c8e91da19b6dad8,3ec96aee17983f1daa5f1d254c8e91da19b6dad8,"Translation console import

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185409304"
tonihei,2018-02-12 13:41:57,https://api.github.com/repos/google/ExoPlayer/git/commits/6c82431e7555a5a64f571c4f82cdbeb0c9cf07bd,6c82431e7555a5a64f571c4f82cdbeb0c9cf07bd,"Move (almost all) remaining core library instrumentation tests to Robolectric.

There are 4 tests which can't currently be moved:
 - DownloadManagerTest explicitly uses the main looper which isn't easily
   supported because the test runs on this thread.
 - ContentDataSourceTest uses an AssetFileDescriptor which wraps a
   ParcelFileDescriptor. It seems Robolectric doesn't correctly forward the
   inner wrapped file descriptor leading to NPE.
 - CacheContentIndexTest and SimpleCacheSpanTest both work fine with Gradle
   but fail with seemingly valid test failures on Blaze.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185366678"
andrewlewis,2018-02-09 15:24:45,https://api.github.com/repos/google/ExoPlayer/git/commits/fbc6ed2e8100cef3b77bba6f3191695b59558517,fbc6ed2e8100cef3b77bba6f3191695b59558517,"Set the expected ad group based on the content position

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185139106"
andrewlewis,2018-02-09 15:12:51,https://api.github.com/repos/google/ExoPlayer/git/commits/5fe235b7c143e6f314f0204036664b677f63ee2b,5fe235b7c143e6f314f0204036664b677f63ee2b,"Move two further methods from Timeline to AdPlaybackState

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185138158"
tonihei,2018-02-09 13:21:52,https://api.github.com/repos/google/ExoPlayer/git/commits/97999ef3b16e4432863e1ec2cd2c93e1a9f5c2eb,97999ef3b16e4432863e1ec2cd2c93e1a9f5c2eb,"Fix bug in media period queue update at dynamic timeline changes.

If the period uid doesn't match, the update procedure currently doesn't
remove the correct periods. This may cause the player to get stuck or to play
the wrong periods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185129503"
AquilesCanta,2018-02-09 11:57:13,https://api.github.com/repos/google/ExoPlayer/git/commits/d274ca6750c44e9b705fced8440d69fca1aec85a,d274ca6750c44e9b705fced8440d69fca1aec85a,"Extend support of 608 captions in SEI messages

Issue:#3816

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185124378"
andrewlewis,2018-02-09 11:06:43,https://api.github.com/repos/google/ExoPlayer/git/commits/6aad066d51a20e2cb1f1e6ac70e785f2fc36bc45,6aad066d51a20e2cb1f1e6ac70e785f2fc36bc45,"Check sys.display-size on Philips ATVs

Device models are from
https://support.google.com/googleplay/answer/1727131?hl=en. It looks like among
these devices Build.MANUFACTURER can be set to either ""PHILIPS"" or ""Philips"",
based on looking at internal bug reports.

Issue: #3807

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185121182"
andrewlewis,2018-02-08 09:57:46,https://api.github.com/repos/google/ExoPlayer/git/commits/542855b6eb59a13d290a0f70b38fcfc05944c161,542855b6eb59a13d290a0f70b38fcfc05944c161,"Link libopus statically with libopusJNI

We now build one .so file for the opus extension in the
internal build, so make the external build work the same way.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184962896"
andrewlewis,2018-02-07 16:59:32,https://api.github.com/repos/google/ExoPlayer/git/commits/36bf0b2658add4f7da0c423bac98e25f96f54caf,36bf0b2658add4f7da0c423bac98e25f96f54caf,"Add issue link to release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184844870"
andrewlewis,2018-02-07 14:45:52,https://api.github.com/repos/google/ExoPlayer/git/commits/5c49633c30ca1e26a8a760a28ecd1d230115fb6c,5c49633c30ca1e26a8a760a28ecd1d230115fb6c,"Fix ad group skipping

Allow skipping an ad group when requested by IMA, even if we aren't currently
playing one, to handle cases where no ads in an ad group will load (so IMA
requests resuming content but we never managed to start playing an ad).

Use the known ad group index (rather than the expected one) when handling ad
group load errors. This ensures we skip the right ad group if we notify IMA of
playback errors for every ad in the ad group, then IMA notifies that the ad
group is empty via a load error.

Also make some other miscellaneous small fixes to ads code:

- Avoid warning about unexpected ad group indices more than once.
- Output a warning if the ad count in an ad group decreases.
- Remove unnecessary assertion.
- Fix getting the ad duration for ad indices that haven't loaded yet.
- Allow setting an ad group state to its current value.
- Fix javadoc for setting the ad resume position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184831495"
andrewlewis,2018-02-07 10:44:23,https://api.github.com/repos/google/ExoPlayer/git/commits/84a105b0314f30771d73ce566ed82a26ae2efa2f,84a105b0314f30771d73ce566ed82a26ae2efa2f,"Get the next ad index to play in MediaPeriodQueue

The ad index in the ad group may need to skip over ads that failed to load, so
it can't just be incremented any more.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184812556"
AquilesCanta,2018-02-06 13:47:07,https://api.github.com/repos/google/ExoPlayer/git/commits/fea75f2e4287c2cc12fb0ae07551768c5581570c,fea75f2e4287c2cc12fb0ae07551768c5581570c,"Prevent ""unexpected read attempt"" illegal state exception

When using cronet data source, calling read after the end of input has
been read will trigger this.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184667794"
tonihei,2018-02-05 15:34:31,https://api.github.com/repos/google/ExoPlayer/git/commits/784e8a634477542dab41e6f90a05bf67965a4c7c,784e8a634477542dab41e6f90a05bf67965a4c7c,"Support isAtomic flag in DynamicConcatenatingMediaSource.

This feature is supported in the ConcatenatingMediaSource and is easily copied to this
media source. Also adding tests to check whether the atomic property works in normal
concatenation and in also in nested use.

Also fixes a bug where timeline methods of the DeferredTimeline were not correctly
forwarded.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184526881"
tonihei,2018-02-05 14:48:48,https://api.github.com/repos/google/ExoPlayer/git/commits/fe98477045097a75efe1abf01ab4d5c51668870e,fe98477045097a75efe1abf01ab4d5c51668870e,"Fix potential media source release before media period release.

This could happen when a media source is removed from a
DynamicConcatenatingMediaSource and one of its media periods is still active.
This media period is only removed by the player after the player received
a timeline update and thus we shouldn't release the removed child source
as long as it has active media periods.

Issue:#3796

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184522836"
andrewlewis,2018-02-05 13:38:54,https://api.github.com/repos/google/ExoPlayer/git/commits/7b19de2e994bb292b9d491f18cb3bc43a46f20ee,7b19de2e994bb292b9d491f18cb3bc43a46f20ee,"Handle LOG AdEvents for ad group load errors.

If IMA loads an empty VAST document for an ad group it notifies via a LOG
AdEvent. Handle the event by updating the AdPlaybackState accordingly.

The error state will be handled in ExoPlayerImplInternal in a separate change.

Issue: #3584

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184516585"
andrewlewis,2018-02-05 13:15:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4775b52741854110cebd00c98d0b07f03b846083,4775b52741854110cebd00c98d0b07f03b846083,"Fix media period queue updating for ads

Resolve the media period for ad playback when resolving a subsequent period and
when receiving a timeline where the playing period in range (but wasn't before).

Fix the seek position calculation when a current ad must be skipped and is
followed by another ad.

Check MediaPeriodInfos match when checking MediaPeriodHolders, to handle cases
where a future ad should no longer be played. This may involve playing two
content media periods consecutively.

Issue: #3584

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184514558"
erdemguven,2018-02-05 10:36:34,https://api.github.com/repos/google/ExoPlayer/git/commits/b210c20e8405ff5d9ec95a1c74b0b777694b7f8e,b210c20e8405ff5d9ec95a1c74b0b777694b7f8e,"Fix not thread safe static buffer usage

DefaultExtractorInput.SCRATCH_SPACE buffer is used to skip data by
reading it into this buffer and discarding.

Simultaneous use of skip methods corrupts this buffer. Normally the
read data is discarded so it doesn't matter but the underlying
DataSource may use the buffer too. If it's a CacheDataSource it uses
this buffer to read data from upstream then write to cache.

Issue: #3762

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184502170"
andrewlewis,2018-02-05 10:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/2d76d63c3e9adde31c35100ea71196b061adafd1,2d76d63c3e9adde31c35100ea71196b061adafd1,"Refer to E-AC3 JOC rather than Atmos in MIME type/comments

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184501752"
andrewlewis,2018-02-02 18:09:24,https://api.github.com/repos/google/ExoPlayer/git/commits/8bc5febbb8e922defb8463b03c0f0572477afce0,8bc5febbb8e922defb8463b03c0f0572477afce0,"Only override gapless data if set in ClippingMediaPeriod

This avoids reading a format that is not equal because of switching between
NO_VALUE and 0.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184298076"
andrewlewis,2018-02-02 17:41:31,https://api.github.com/repos/google/ExoPlayer/git/commits/258122c89cca09467b14d264073dd315d9166aee,258122c89cca09467b14d264073dd315d9166aee,"Interrupt the test thread for uncaught errors

This makes assertion errors in code running on the Looper less easy to miss.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184294290"
andrewlewis,2018-02-02 13:52:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c03f326274a9ce8051f9fd918d3d35b996d04e50,c03f326274a9ce8051f9fd918d3d35b996d04e50,"Update internal opus build

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184274139"
andrewlewis,2018-02-01 17:32:21,https://api.github.com/repos/google/ExoPlayer/git/commits/b44bf32f8b21d133ad86d4d6c8ea254f2aac12e3,b44bf32f8b21d133ad86d4d6c8ea254f2aac12e3,"Handle repeat mode/shuffle mode changes in MediaPeriodQueue

This should be a no-op change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184150266"
drhill,2018-02-19 21:57:54,https://api.github.com/repos/google/ExoPlayer/git/commits/eae1606b904935ce9641cfa1a37574b08ce59855,eae1606b904935ce9641cfa1a37574b08ce59855,comment and newline cleanup
ojw28,2018-02-19 17:51:05,https://api.github.com/repos/google/ExoPlayer/git/commits/aa02df78ebd5a0eceee724f3fcfd6ba1f4b79044,aa02df78ebd5a0eceee724f3fcfd6ba1f4b79044,Merge branch 'release-v2' into dev-v2
ojw28,2018-02-19 11:02:12,https://api.github.com/repos/google/ExoPlayer/git/commits/69496eb17efd5cb2f7a572a17bb8608523792159,69496eb17efd5cb2f7a572a17bb8608523792159,"Bump to 2.7.0 and prepare release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186200840"
tonihei,2018-02-16 17:01:50,https://api.github.com/repos/google/ExoPlayer/git/commits/24067851601eea09c786591e4cf3a478df59fb59,24067851601eea09c786591e4cf3a478df59fb59,"Move DownloadManagerTest to Robolectric.

The waiting for a ConditionVariable to be false was replaced by a
CountDownLatch whose count is asserted to be one. The timeout of a
ConditionVariable doesn't work in Robolectric unless someone is
manually increasing the SystemClock time.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=186003125"
andrewlewis,2018-02-16 15:36:08,https://api.github.com/repos/google/ExoPlayer/git/commits/56c9d023faa856fa72bff6ab40637cdef4e032e4,56c9d023faa856fa72bff6ab40637cdef4e032e4,"Fix content progress updates and position faking

Occasionally the player could transition from playing content to playing an ad
after IMA called playAd. The discontinuity triggered faking the content
position, and the fake position was passed to IMA when content resumed causing
the wrong ad group to be loaded. Fix this by only faking the position if the
player transitions before playAd.

Also fix the calculation of the expected ad group index for a postroll ad, and
wait for the player to transition back from ad to content before passing a
content progress update.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185994229"
andrewlewis,2018-02-16 14:07:55,https://api.github.com/repos/google/ExoPlayer/git/commits/6c3b677ddbb39e0e0fd3c09a8557e76980e2f02e,6c3b677ddbb39e0e0fd3c09a8557e76980e2f02e,"Catch exceptions in all IMA callbacks

If an exception is thrown in an IMA callback it crashes the process with lots of
logging from WebView (including several stack traces, etc.). This change wraps
ImaAdsLoader code that might throw, skips any remaining ads (as the errors are
not recoverable, in general) and notifies a new load error callback so that the
application can implement its own handling. The intention is to make the loader
robust to unexpected requests from IMA and avoid crashes.

Also handle IMA loading an ad in an ad group that has no available ads. In rare
cases IMA will try to load an ad for which an error was previously notified, so
this drops those load requests allowing playback of the content to continue.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185985850"
drhill,2018-02-18 21:53:56,https://api.github.com/repos/google/ExoPlayer/git/commits/9e340291dee9e828150ad948e535e5293afcd167,9e340291dee9e828150ad948e535e5293afcd167,mkv h263 CR changes
drhill,2018-02-17 18:08:14,https://api.github.com/repos/google/ExoPlayer/git/commits/25c241e5bc9c179cb5681072faed9b490fd8861e,25c241e5bc9c179cb5681072faed9b490fd8861e,add h263 format support in fourcc codecID
JungleGenius,2018-02-16 23:32:33,https://api.github.com/repos/google/ExoPlayer/git/commits/90ee038f8914f2f5c57043898d2ceb658d746634,90ee038f8914f2f5c57043898d2ceb658d746634,Merge branch 'dev-v2' into dev-v2
AquilesCanta,2018-02-16 11:05:55,https://api.github.com/repos/google/ExoPlayer/git/commits/8ffd40ab9a396a9ab3a411d54e1e8d2b26a40bed,8ffd40ab9a396a9ab3a411d54e1e8d2b26a40bed,"Add little endian and 14-bit mode support for DtsReader

Issue:#3340

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185973510"
tonihei,2018-02-15 14:29:45,https://api.github.com/repos/google/ExoPlayer/git/commits/67780bfbc28b2da0069ce91ec4116ec6b1d331cb,67780bfbc28b2da0069ce91ec4116ec6b1d331cb,"Add window sequence number to MediaPeriodId.

All media periods are part of a queue of windows buffered and played by
ExoPlayer. When repeating windows, the current MediaPeriodId is insufficient
to distinguish between the repetitions of the same period. This makes it hard
to see to which media period load events belong to, and it is also difficult to
determine whether two media periods belong to the same logical window or
whether they are part of different repetitions of the same window.

Therefore this change adds a unique sequence number to each window in the
sequence of windows and this sequence number is saved as part of the
MediaPeriodId.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185829509"
andrewlewis,2018-02-15 12:10:53,https://api.github.com/repos/google/ExoPlayer/git/commits/0291bc5e2da83e3084356e3bab77f0f8ccd35e41,0291bc5e2da83e3084356e3bab77f0f8ccd35e41,"Fix content progress reporting if there is no preroll

If there was no preroll and the pending content position was set before the
first midroll, the pending content position was never cleared so loading the ad
was never triggered.

Only set a pending content position if we know that we need to trigger playing
an ad for the current position and IMA will poll for an ad (because there is a
midroll ad group). Clearing the pending content position happens when IMA pauses
content to play the ad.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185818315"
andrewlewis,2018-02-15 08:44:09,https://api.github.com/repos/google/ExoPlayer/git/commits/344932af75de43b16c2335ac8e4561422e17d50c,344932af75de43b16c2335ac8e4561422e17d50c,"Fix handling of ad group load errors

IMA sometimes delivers an ad group load error just after the time of the ad
group, which is problematic now that we set the expected ad group index based on
the last returned content progress.

Only update the expected ad group index once we are within a fixed preloading
threshold of the next ad.

Also fix updating the ad group to use the new ad count, and check for ad group
load errors when we have no expected ad group defensively.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185803086"
tonihei,2018-02-14 15:11:38,https://api.github.com/repos/google/ExoPlayer/git/commits/6af2a3c9ef425223523400f336b1252410ee8c34,6af2a3c9ef425223523400f336b1252410ee8c34,"Broaden the surface switching workaround to other Moto C+ variants.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185681751"
andrewlewis,2018-02-14 15:03:40,https://api.github.com/repos/google/ExoPlayer/git/commits/da08b65f3b89e472bd1535c8f6d927b0630efebd,da08b65f3b89e472bd1535c8f6d927b0630efebd,"Fix handling of ad tags with only preroll and postroll ads

Content progress is only polled if there are midroll ad groups. If the ad tag
had only preroll/postroll ads, the pending content position was not provided to
IMA, which meant that the postroll ad could never play.

Only set the pending content position if there are midroll ads.

Issue: #3715

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185680803"
AquilesCanta,2018-02-14 14:14:36,https://api.github.com/repos/google/ExoPlayer/git/commits/1d4bc7dda70e874527eb441dc94df1a4dc8ad914,1d4bc7dda70e874527eb441dc94df1a4dc8ad914,"Add initial support for EXT-X-GAP

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185676652"
erdemguven,2018-02-14 13:43:47,https://api.github.com/repos/google/ExoPlayer/git/commits/c8e950537d17c2240e237568e1bf2a6a96de0764,c8e950537d17c2240e237568e1bf2a6a96de0764,"Run DownloadManager on a custom thread while testing

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185674707"
ojw28,2018-02-14 13:31:02,https://api.github.com/repos/google/ExoPlayer/git/commits/55f2b093406e33e773be1071bfa95f105ee77766,55f2b093406e33e773be1071bfa95f105ee77766,"Use stable order for subtitle buffers with identical timestamps

Issue: #3782

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185673731"
AquilesCanta,2018-02-14 13:26:28,https://api.github.com/repos/google/ExoPlayer/git/commits/115d19953219c726745e36813f60c60d22e95faa,115d19953219c726745e36813f60c60d22e95faa,"Fix CeaUtil's invalid SeiMessage skipping

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185673454"
AquilesCanta,2018-02-14 12:25:44,https://api.github.com/repos/google/ExoPlayer/git/commits/4d26b316ccc2335f09b606b84b0d669f93bc25d8,4d26b316ccc2335f09b606b84b0d669f93bc25d8,"Make ID3 GEOB frames parsing more robust

Issue:#3792

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185668919"
andrewlewis,2018-02-14 11:13:09,https://api.github.com/repos/google/ExoPlayer/git/commits/43cfb08207edec6c639ecfbf72c0f527b0a75fe1,43cfb08207edec6c639ecfbf72c0f527b0a75fe1,"Handle VAST_LINEAR_ASSET_MISMATCH

This error marks the current ad group as unplayable.

Issue: #3801

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185663472"
tonihei,2018-02-14 10:55:37,https://api.github.com/repos/google/ExoPlayer/git/commits/09de29d5341357b5b54b4235e318262aaf8a5c04,09de29d5341357b5b54b4235e318262aaf8a5c04,"Add Meizu M5C, Lenovo K4 Note, and Sony Xperia E5 to surface workaround.

Also added comments for all existing devices for easier reference.

Issue:#3835
Issue:#3236

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185661900"
andrewlewis,2018-02-14 09:35:45,https://api.github.com/repos/google/ExoPlayer/git/commits/5b6344a006cb4745869b6f8f9f834d988a49756e,5b6344a006cb4745869b6f8f9f834d988a49756e,"Skip ads for which the media failed to prepare

Also make ad group skipping more robust. After calling onError for an ad, IMA
will sometimes trigger an ad group load error, so this needs to be handled in a
way that allows some ads to be loaded already for the ad group.

This change also fixes calculation of the expected ad index to take into account
whether the position is being faked to trigger loading an ad or is the actual
player position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185655844"
andrewlewis,2018-02-14 08:41:53,https://api.github.com/repos/google/ExoPlayer/git/commits/b9f9232b9dcfed32b403328f13307c9a47dd9589,b9f9232b9dcfed32b403328f13307c9a47dd9589,"Release Extractors on the loading thread

Releasing the player released the internal playback thread once renderers were
released. Releasing a MediaPeriod queued a Loader.ReleaseTask on the loading
thread which would post back to the playback thread. If the playback thread had
been quit by the time this happened, the release task wouldn't be run.

Release on the loading thread instead of the playback thread. This avoids
needing to block releasing the player until the loading threads have ended, and
ensures that release tasks will run eventually. As part of this change,
ExtractorMediaPeriod's call to Extractor.release will now run on the loading
thread (which means that all Extractor methods are called on that thread) and
other cleanup in ReleaseCallback will run on the loading thread instead of the
playback thread.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185651320"
ojw28,2018-02-13 18:14:17,https://api.github.com/repos/google/ExoPlayer/git/commits/2dab21ab4eaad67d332f16de212f29e4e8b1721d,2dab21ab4eaad67d332f16de212f29e4e8b1721d,"Add Y611 to setOutputSurfaceWorkaround

Issue: #3724

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185548632"
erdemguven,2018-02-13 15:18:07,https://api.github.com/repos/google/ExoPlayer/git/commits/73e3e16949037cad02335582fafc760097d9e661,73e3e16949037cad02335582fafc760097d9e661,"Fix SmoothStreaming manifest url for downloading

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185526653"
tonihei,2018-02-13 09:58:41,https://api.github.com/repos/google/ExoPlayer/git/commits/51a88ac59d4fcf0cec4829b8353b9668a3349cf0,51a88ac59d4fcf0cec4829b8353b9668a3349cf0,"Add Moto C+ to surface switching workaround.

Issue:#3835

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185501181"
andrewlewis,2018-02-13 09:05:08,https://api.github.com/repos/google/ExoPlayer/git/commits/4cb2d255abcfdd8f83d4eb481072ba2df517bc62,4cb2d255abcfdd8f83d4eb481072ba2df517bc62,"Fix handling of ad tags where ad groups are out of order

IMA's cue points may not be in order, so sort them. It looks like IMA events use
time ordered ad indices, so it is not necessary to map between the original cue
point order and the time order.

Issue: #3716

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185495798"
ojw28,2018-02-12 19:38:36,https://api.github.com/repos/google/ExoPlayer/git/commits/77ec24ca5850386d0060fd2a6c37d1abd7245157,77ec24ca5850386d0060fd2a6c37d1abd7245157,"Translation console import

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185409304"
tonihei,2018-02-12 13:41:57,https://api.github.com/repos/google/ExoPlayer/git/commits/c14ef7503716b6b52b1af45116a4f0d59cd7fb34,c14ef7503716b6b52b1af45116a4f0d59cd7fb34,"Move (almost all) remaining core library instrumentation tests to Robolectric.

There are 4 tests which can't currently be moved:
 - DownloadManagerTest explicitly uses the main looper which isn't easily
   supported because the test runs on this thread.
 - ContentDataSourceTest uses an AssetFileDescriptor which wraps a
   ParcelFileDescriptor. It seems Robolectric doesn't correctly forward the
   inner wrapped file descriptor leading to NPE.
 - CacheContentIndexTest and SimpleCacheSpanTest both work fine with Gradle
   but fail with seemingly valid test failures on Blaze.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185366678"
erdemguven,2018-02-12 12:08:59,https://api.github.com/repos/google/ExoPlayer/git/commits/fc7a6d259657121ad6893a6beaab28e64b67504b,fc7a6d259657121ad6893a6beaab28e64b67504b,"Increase character limit for download notification strings

This is requested for Romanian translation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185359071"
andrewlewis,2018-02-09 15:24:45,https://api.github.com/repos/google/ExoPlayer/git/commits/b6a46fd3eeedf82300e0527abe30e08ffe22187a,b6a46fd3eeedf82300e0527abe30e08ffe22187a,"Set the expected ad group based on the content position

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185139106"
andrewlewis,2018-02-09 15:12:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ac2f6cbf98af801280e641767b4d251a16721ae7,ac2f6cbf98af801280e641767b4d251a16721ae7,"Move two further methods from Timeline to AdPlaybackState

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185138158"
erdemguven,2018-02-09 14:36:19,https://api.github.com/repos/google/ExoPlayer/git/commits/2c2aaf0a4bcb18d67da074aaa2401e30eb0c8d27,2c2aaf0a4bcb18d67da074aaa2401e30eb0c8d27,"Make SegmentDownloadAction constructor keys parameter simpler

Removed option to pass null keys parameter.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185134822"
tonihei,2018-02-09 13:21:52,https://api.github.com/repos/google/ExoPlayer/git/commits/4916baabf039d6f9cbcc901aebdc02cfb4ea56be,4916baabf039d6f9cbcc901aebdc02cfb4ea56be,"Fix bug in media period queue update at dynamic timeline changes.

If the period uid doesn't match, the update procedure currently doesn't
remove the correct periods. This may cause the player to get stuck or to play
the wrong periods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185129503"
AquilesCanta,2018-02-09 11:57:13,https://api.github.com/repos/google/ExoPlayer/git/commits/a9e11e4107b2fdd4ceb4bbe8cd150130758da054,a9e11e4107b2fdd4ceb4bbe8cd150130758da054,"Extend support of 608 captions in SEI messages

Issue:#3816

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185124378"
andrewlewis,2018-02-09 11:06:43,https://api.github.com/repos/google/ExoPlayer/git/commits/34a318d348b6ff8184780017627539ba6e471dae,34a318d348b6ff8184780017627539ba6e471dae,"Check sys.display-size on Philips ATVs

Device models are from
https://support.google.com/googleplay/answer/1727131?hl=en. It looks like among
these devices Build.MANUFACTURER can be set to either ""PHILIPS"" or ""Philips"",
based on looking at internal bug reports.

Issue: #3807

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185121182"
erdemguven,2018-02-08 16:59:21,https://api.github.com/repos/google/ExoPlayer/git/commits/0e51a77839d6f0776365b8fc60644bd33fb0e6cc,0e51a77839d6f0776365b8fc60644bd33fb0e6cc,"Add message parameter to DownloadNotificationUtil.createNotification

DownloadNotificationUtil should not use getData().

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=185002149"
JungleGenius,2018-02-15 19:51:34,https://api.github.com/repos/google/ExoPlayer/git/commits/cb46e875e4f037785002861302f90be96b5b3a48,cb46e875e4f037785002861302f90be96b5b3a48,"Added parsing of optional human-readable title #EXTINF:<duration>,[<title>]"
andrewlewis,2018-02-08 09:57:46,https://api.github.com/repos/google/ExoPlayer/git/commits/f432b52111710fed647762b0efd9d471d3bab1a1,f432b52111710fed647762b0efd9d471d3bab1a1,"Link libopus statically with libopusJNI

We now build one .so file for the opus extension in the
internal build, so make the external build work the same way.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184962896"
andrewlewis,2018-02-07 16:59:32,https://api.github.com/repos/google/ExoPlayer/git/commits/0384ff07ef7c30cd095dfae84282fbf75b58d32c,0384ff07ef7c30cd095dfae84282fbf75b58d32c,"Add issue link to release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184844870"
andrewlewis,2018-02-07 14:45:52,https://api.github.com/repos/google/ExoPlayer/git/commits/6fc70149b56d05262349402979d9951c1238bbb8,6fc70149b56d05262349402979d9951c1238bbb8,"Fix ad group skipping

Allow skipping an ad group when requested by IMA, even if we aren't currently
playing one, to handle cases where no ads in an ad group will load (so IMA
requests resuming content but we never managed to start playing an ad).

Use the known ad group index (rather than the expected one) when handling ad
group load errors. This ensures we skip the right ad group if we notify IMA of
playback errors for every ad in the ad group, then IMA notifies that the ad
group is empty via a load error.

Also make some other miscellaneous small fixes to ads code:

- Avoid warning about unexpected ad group indices more than once.
- Output a warning if the ad count in an ad group decreases.
- Remove unnecessary assertion.
- Fix getting the ad duration for ad indices that haven't loaded yet.
- Allow setting an ad group state to its current value.
- Fix javadoc for setting the ad resume position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184831495"
andrewlewis,2018-02-07 10:44:23,https://api.github.com/repos/google/ExoPlayer/git/commits/165fce4c64d547e01ef4e5f6fbb23ebc06354f2b,165fce4c64d547e01ef4e5f6fbb23ebc06354f2b,"Get the next ad index to play in MediaPeriodQueue

The ad index in the ad group may need to skip over ads that failed to load, so
it can't just be incremented any more.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184812556"
AquilesCanta,2018-02-06 13:47:07,https://api.github.com/repos/google/ExoPlayer/git/commits/8f81abee868b43e667481212b410e65f4d6dc232,8f81abee868b43e667481212b410e65f4d6dc232,"Prevent ""unexpected read attempt"" illegal state exception

When using cronet data source, calling read after the end of input has
been read will trigger this.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184667794"
tonihei,2018-02-05 15:34:31,https://api.github.com/repos/google/ExoPlayer/git/commits/81eed7c2c3930ddd6e7ab43a872c1815adc35428,81eed7c2c3930ddd6e7ab43a872c1815adc35428,"Support isAtomic flag in DynamicConcatenatingMediaSource.

This feature is supported in the ConcatenatingMediaSource and is easily copied to this
media source. Also adding tests to check whether the atomic property works in normal
concatenation and in also in nested use.

Also fixes a bug where timeline methods of the DeferredTimeline were not correctly
forwarded.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184526881"
tonihei,2018-02-05 14:48:48,https://api.github.com/repos/google/ExoPlayer/git/commits/4437de4818c7a52ef17e0f80cfbfb8afb8571495,4437de4818c7a52ef17e0f80cfbfb8afb8571495,"Fix potential media source release before media period release.

This could happen when a media source is removed from a
DynamicConcatenatingMediaSource and one of its media periods is still active.
This media period is only removed by the player after the player received
a timeline update and thus we shouldn't release the removed child source
as long as it has active media periods.

Issue:#3796

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184522836"
andrewlewis,2018-02-05 13:38:54,https://api.github.com/repos/google/ExoPlayer/git/commits/aa63ad3af03a10c63809996e92b4461c6c1bf1b7,aa63ad3af03a10c63809996e92b4461c6c1bf1b7,"Handle LOG AdEvents for ad group load errors.

If IMA loads an empty VAST document for an ad group it notifies via a LOG
AdEvent. Handle the event by updating the AdPlaybackState accordingly.

The error state will be handled in ExoPlayerImplInternal in a separate change.

Issue: #3584

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184516585"
andrewlewis,2018-02-05 13:15:40,https://api.github.com/repos/google/ExoPlayer/git/commits/901dd19e3e494aba8a24c1ccfbe800636209d97a,901dd19e3e494aba8a24c1ccfbe800636209d97a,"Fix media period queue updating for ads

Resolve the media period for ad playback when resolving a subsequent period and
when receiving a timeline where the playing period in range (but wasn't before).

Fix the seek position calculation when a current ad must be skipped and is
followed by another ad.

Check MediaPeriodInfos match when checking MediaPeriodHolders, to handle cases
where a future ad should no longer be played. This may involve playing two
content media periods consecutively.

Issue: #3584

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184514558"
erdemguven,2018-02-05 10:36:34,https://api.github.com/repos/google/ExoPlayer/git/commits/de293af3a42b15b1ac809d55d31fde756f7a565d,de293af3a42b15b1ac809d55d31fde756f7a565d,"Fix not thread safe static buffer usage

DefaultExtractorInput.SCRATCH_SPACE buffer is used to skip data by
reading it into this buffer and discarding.

Simultaneous use of skip methods corrupts this buffer. Normally the
read data is discarded so it doesn't matter but the underlying
DataSource may use the buffer too. If it's a CacheDataSource it uses
this buffer to read data from upstream then write to cache.

Issue: #3762

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184502170"
andrewlewis,2018-02-05 10:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/e437248f4f9f8e9c06d580715503b7d1129f61d7,e437248f4f9f8e9c06d580715503b7d1129f61d7,"Refer to E-AC3 JOC rather than Atmos in MIME type/comments

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184501752"
andrewlewis,2018-02-02 18:09:24,https://api.github.com/repos/google/ExoPlayer/git/commits/75574928e5d9aba554771fe759bb44ba5db877b9,75574928e5d9aba554771fe759bb44ba5db877b9,"Only override gapless data if set in ClippingMediaPeriod

This avoids reading a format that is not equal because of switching between
NO_VALUE and 0.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184298076"
andrewlewis,2018-02-02 17:41:31,https://api.github.com/repos/google/ExoPlayer/git/commits/0b2497799f0c225a9c279f5a8a3b369cb3545394,0b2497799f0c225a9c279f5a8a3b369cb3545394,"Interrupt the test thread for uncaught errors

This makes assertion errors in code running on the Looper less easy to miss.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184294290"
andrewlewis,2018-02-02 13:52:30,https://api.github.com/repos/google/ExoPlayer/git/commits/451721d4a7ea490c25b6cb0327042f55194f0299,451721d4a7ea490c25b6cb0327042f55194f0299,"Update internal opus build

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184274139"
andrewlewis,2018-02-01 17:32:21,https://api.github.com/repos/google/ExoPlayer/git/commits/10033623e78827ba4f29b87db289c7fadbc9b4c7,10033623e78827ba4f29b87db289c7fadbc9b4c7,"Handle repeat mode/shuffle mode changes in MediaPeriodQueue

This should be a no-op change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184150266"
erdemguven,2018-02-01 14:23:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a075b23893ba48e1e043cb9e38b35e150443506c,a075b23893ba48e1e043cb9e38b35e150443506c,"Fix API level 16 method use without guard and refactoring

For below API level 16, the logic copied from ConnectivityManagerCompat.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184131406"
erdemguven,2018-01-26 16:42:46,https://api.github.com/repos/google/ExoPlayer/git/commits/61ba0f28279678158d43dcf52b55951c1d4ea836,61ba0f28279678158d43dcf52b55951c1d4ea836,"Fix FilteringHlsPlaylistParser

Only filter HlsMasterPlaylists.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183394956"
erdemguven,2018-01-25 13:51:57,https://api.github.com/repos/google/ExoPlayer/git/commits/e1dbaf26c299fdbf65136efc4877a4734ad25c59,e1dbaf26c299fdbf65136efc4877a4734ad25c59,"Add DownloadNotificationHelper

Helper class to create notifications for downloads using DownloadManager.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183225948"
erdemguven,2018-01-24 10:54:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b3da82dc1c9bfb0c5de78e3b001b38fe55098977,b3da82dc1c9bfb0c5de78e3b001b38fe55098977,"Open source DownloadService, DownloadManager and related classes

Issue: #2643

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184844484"
ojw28,2018-02-01 13:27:12,https://api.github.com/repos/google/ExoPlayer/git/commits/340501246b7fce18559f65be811e556c575992cd,340501246b7fce18559f65be811e556c575992cd,"Fix dependency in cast extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184125114"
tonihei,2018-02-01 12:52:51,https://api.github.com/repos/google/ExoPlayer/git/commits/c8f39fe14d08caa83404a284fcdcd157aa6fa3e9,c8f39fe14d08caa83404a284fcdcd157aa6fa3e9,"Update ExoPlayer doc to specifically discourage parallel access instead of allowing it.

Even if a developer synchronizes every method, thread safety is still not guaranteed
because the internal callback methods can't be synced from outside.

Issue:#3773

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184122072"
ojw28,2018-02-01 12:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/51963dea2e85dae49a75e7f2cee5b6169e12ca9b,51963dea2e85dae49a75e7f2cee5b6169e12ca9b,"Clean up message naming in EPII

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184122057"
ojw28,2018-02-01 12:36:26,https://api.github.com/repos/google/ExoPlayer/git/commits/1950152378c0574f21393349676ea41148e632c7,1950152378c0574f21393349676ea41148e632c7,"Tweak download notifications

1. Add string for STATE_CANCELED. Lint doesn't like that the
   switch statement on the state IntDef doesn't have a case
   for STATE_CANCELED. May as well add one, even if we're not
   planning on our demo app showing notifications for this
   state.
2. Replace non-human-readable error message with one provided
   by ErrorMessageProvider.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184120892"
ojw28,2018-02-01 12:36:14,https://api.github.com/repos/google/ExoPlayer/git/commits/e8fb3078d6ea046d983099e211182b1a4fb2a30e,e8fb3078d6ea046d983099e211182b1a4fb2a30e,"Normalize language code independently of device language

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184120873"
ojw28,2018-02-01 12:32:56,https://api.github.com/repos/google/ExoPlayer/git/commits/696ebf3ded109d0a447ad2138c2751f68be4475c,696ebf3ded109d0a447ad2138c2751f68be4475c,"Suppress proguard notes about unresolved classes

In the case of the components we deliberately access via
reflection, it's normal that they might not be resolved
due to proguarding (i.e. if the app isn't being built to
include them). Don't note their omission.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184120611"
ojw28,2018-02-01 12:19:02,https://api.github.com/repos/google/ExoPlayer/git/commits/ca3be996bca9e3a8ef8feb0f6776f08f52f6e53e,ca3be996bca9e3a8ef8feb0f6776f08f52f6e53e,"Add proper exception checks when returning to native from Java.

The pending exception will be thrown upon returning to Java
from native, but we should return early rather than continuing
to execute the native method to the end so as to avoid undefined
behavior. Note that the return value is irrelevant (because the
pending exception will be thrown).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184119606"
ojw28,2018-02-01 12:14:56,https://api.github.com/repos/google/ExoPlayer/git/commits/1bf4926338159e6ba0aa8680ce948c0cca440b7e,1bf4926338159e6ba0aa8680ce948c0cca440b7e,"Stop using Map<Integer, X>

Lint recommends switching to SparseArray<X> instead.
This is done for the DASH case. For the Cast case it's
easier to use a switch statement.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184119312"
ojw28,2018-02-01 12:13:47,https://api.github.com/repos/google/ExoPlayer/git/commits/34b4c52a014a90dfc8679095e1e5150eb24016a3,34b4c52a014a90dfc8679095e1e5150eb24016a3,"Disable InvalidPackage lint check for testutils

Note this case is special in that JUnit is an actual
compile dependency, as opposed to a testCompile or
androidTestCompile dependency.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184119235"
tonihei,2018-02-01 12:11:52,https://api.github.com/repos/google/ExoPlayer/git/commits/430579dcd91e70123cc501476bc1c2747c3de200,430579dcd91e70123cc501476bc1c2747c3de200,"Update developer guide for sending messages again.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184119097"
ojw28,2018-02-01 11:57:17,https://api.github.com/repos/google/ExoPlayer/git/commits/6ee87b7ad9f75bdbf6b98d329da15bba2916b3cb,6ee87b7ad9f75bdbf6b98d329da15bba2916b3cb,"Remove static imports of constants with API level > 14

I think (?) they're harmless, but lint doesn't like them.
Using them within the class body means the TargetApi
annotation applies, which makes lint happy.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184117951"
botaydotcom,2018-02-01 10:44:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4f36ab203f6b8c54a582cf07aea290ca10a645a3,4f36ab203f6b8c54a582cf07aea290ca10a645a3,"Use new MediaCodec APIs in MediaCodecRenderer.

In MediaCodecRenderer, we currently uses codec.getInput/OutputBuffers event
though these APIs are deprecated and are not recommended from API 21+. This
change makes sure that:
- On API 20 and below, we will keep using codec.getInput/OutputBuffers.
- On API 21+, we will use getInput/OutputBuffer(index) APIs instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184112329"
ojw28,2018-01-31 23:56:54,https://api.github.com/repos/google/ExoPlayer/git/commits/a7d4d2d21c93f7d015edfcd4125331838c254073,a7d4d2d21c93f7d015edfcd4125331838c254073,"Automated g4 rollback of changelist 184056034.

*** Reason for rollback ***

Broke everything

*** Original change description ***

Clean up message naming in EPII

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184061352"
ojw28,2018-01-31 23:22:35,https://api.github.com/repos/google/ExoPlayer/git/commits/fd10a3cbb02ab41ef643e9cced40140bb79c6c1b,fd10a3cbb02ab41ef643e9cced40140bb79c6c1b,"Fix initial visibility of PlayerControlView

This applies when PlayerControlView is used as a standalone
component (not inside PlayerView). Previously hideAtMs was
set to 0, which caused the view to be immediatley hidden in
onAttachedToWindow. After this change the first time the view
is attached to the window is effectively treated as a ""user
interaction"" for the purposes of deciding when to timeout.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184056324"
ojw28,2018-01-31 23:20:41,https://api.github.com/repos/google/ExoPlayer/git/commits/2f932bfaf7c31746945a997a852a213a7b7b1d81,2f932bfaf7c31746945a997a852a213a7b7b1d81,"Clean up message naming in EPII

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=184056034"
tonihei,2018-01-31 15:54:22,https://api.github.com/repos/google/ExoPlayer/git/commits/cb95f7e95ba03e199dfb0e0ad1a5675080d1667a,cb95f7e95ba03e199dfb0e0ad1a5675080d1667a,"Make remaining media source reusable.

This make sure all media sources can be reprepared after being released.

Issue:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183990416"
tonihei,2018-01-31 12:51:23,https://api.github.com/repos/google/ExoPlayer/git/commits/286977998da55fff2f03a19a1733f4b535c78bd2,286977998da55fff2f03a19a1733f4b535c78bd2,"Fix bug in DynamicConcatenatingMediaSource at dynamic changes of empty timelines.

When the dynamic media source contains multiple empty timelines in a row and some
of them dynamically change to a non-empty timeline, the window and period indices
are not updated correctly because the index of the changed child source is wrong.

To fix this bug, the child index is added to the media period holder to have direct
access on the current child index to prevent ambiguity.

Furthermore, the uid is changed to be the hash code of the MediaSourceHolder not the
MediaSource itself to allow adding the same MediaSource twice without violating the
unique uid policy.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183973462"
AquilesCanta,2018-01-30 15:51:23,https://api.github.com/repos/google/ExoPlayer/git/commits/e7ba2caf47944df02f906ebe423d88d89d08e8e8,e7ba2caf47944df02f906ebe423d88d89d08e8e8,"Clear the media queue and stop casting on app pause

Simplifies the app and prevents inconsistent states between
both players and the media queue.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183831329"
tonihei,2018-01-30 10:21:18,https://api.github.com/repos/google/ExoPlayer/git/commits/17edae6528b908e284f2498cc1ca7289ff6e88af,17edae6528b908e284f2498cc1ca7289ff6e88af,"Make AdsMediaSource reusable.

Also fixes a bug where deferred media periods were kept in the list for
an unprepared media source although the media period was already released.

Issue:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183800889"
erdemguven,2018-01-30 09:13:00,https://api.github.com/repos/google/ExoPlayer/git/commits/6709dc7f6439c77a8bcfa5a8f5b1a820cea517fc,6709dc7f6439c77a8bcfa5a8f5b1a820cea517fc,"Enable caching for data loaded by ParsingLoadable

This enables caching manifest files for DASH, HLS and SmoothStreaming.

To disable caching a non cache DataSource should be provided for reading
manifest to the used MediaSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183794252"
erdemguven,2018-01-29 16:09:15,https://api.github.com/repos/google/ExoPlayer/git/commits/168a5d63c5d949485cd59d178e62ee810551ae2c,168a5d63c5d949485cd59d178e62ee810551ae2c,"Remove empty CachedContent in SimpleCache.releaseHoleSpan()

In startReadWrite*() methods a new CachedContent is created if the there
isn't one already for the given key. If the span is release without
writing any content, this fix removes the added CachedContent.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183666821"
erdemguven,2018-01-29 14:22:03,https://api.github.com/repos/google/ExoPlayer/git/commits/1dde2adbf3092bce62cd3262e55bac360051a56e,1dde2adbf3092bce62cd3262e55bac360051a56e,"Add SegmentDownloader.getAllRepresentationKeys method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183656655"
andrewlewis,2018-01-29 14:06:29,https://api.github.com/repos/google/ExoPlayer/git/commits/b82178ecb40b88cd50e2931833ceeab47e09a5e1,b82178ecb40b88cd50e2931833ceeab47e09a5e1,"Make ad state immutable and store state of each ad

Before this change, the ad playback state stored the number of played ads in
each ad group. There was no way to represent that an ad had failed to load (and
it wouldn't be possible just to increment the played ad count to signal a load
error because there might be an unplayed ad before the ad that failed to load).

Represent the state of each ad (unavailable, available, skipped, played, error)
in each ad group. In a later change the player will use this information to
update its loaded MediaPeriods in response to future ads failing to load.

Also make the AdPlaybackState immutable and remove copying/duplication of its
fields in the ad timeline and period.

Issue: #3584

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183655308"
ojw28,2018-01-29 13:31:02,https://api.github.com/repos/google/ExoPlayer/git/commits/0c67a5783f11908eaa787716a2c63ac7901d4e59,0c67a5783f11908eaa787716a2c63ac7901d4e59,"Add descriptions for strings.

For our strings to be translated, we're required to provide
added context in the form of a description, and specify a
maximum length for the translated strings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183651515"
tonihei,2018-01-29 12:53:24,https://api.github.com/repos/google/ExoPlayer/git/commits/72d99284c145dd4251f7b3b23060bc6d5b89d4f7,72d99284c145dd4251f7b3b23060bc6d5b89d4f7,"Make DynamicConcatenatingMediaSource reusable.

Issue:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183648419"
ojw28,2018-01-29 12:50:15,https://api.github.com/repos/google/ExoPlayer/git/commits/1f6d161d4d33f2d31d456bc701965b472370cdf6,1f6d161d4d33f2d31d456bc701965b472370cdf6,"Fix proguard configurations

1. When we try and load something via reflection and find the
   class, always throw rather than failing silently if we
   subsequently fail to instantiate an instance. This is
   indicative of a broken proguard setup, and failing silently
   makes it hard to spot.
2. Add library/core proguard configuration to ensure extension
   renderer constructors that we access via reflection are kept.
3. Add demos/main proguard configuration to ensure ImaAdsLoader
   constructor that we access via reflection is kept.
4. Added IMA proguard file to hopefully fix #3723, although I
   wasn't actually able to reproduce the issue.

Issue: #3723

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183648187"
ojw28,2018-01-29 12:31:49,https://api.github.com/repos/google/ExoPlayer/git/commits/e26dc3990df2d30d6b92de726073113e3bfa50e6,e26dc3990df2d30d6b92de726073113e3bfa50e6,"Partially revert ""Tell LoadControl whether playback can start""

- Renderers becoming ready is asynchronous, so the change wasn't
well thought through :(.
- This will bring back the possibility of getting stuck in the
buffering-but-not-loading anything state. This will need to be
addressed in a future CL.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183646837"
tonihei,2018-01-29 12:30:55,https://api.github.com/repos/google/ExoPlayer/git/commits/d32181e4e9538d65b061edb3e3f60a7df13e895f,d32181e4e9538d65b061edb3e3f60a7df13e895f,"Use more realistic timeline window duration for playback unit tests.

100ms is unrealistically short and, for example, causes the player to buffer
many periods ahead when looping.

Previously this was not feasible, because ExoPlayerTest as instrumentation test
actually needed to wait for the realtime playback duration.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183646772"
ojw28,2018-01-29 11:41:01,https://api.github.com/repos/google/ExoPlayer/git/commits/67a812c1c2cee25074497284408f2b34d5f9c661,67a812c1c2cee25074497284408f2b34d5f9c661,"Make FakeRenderer more realistic

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183643457"
ojw28,2018-01-29 09:29:57,https://api.github.com/repos/google/ExoPlayer/git/commits/91c52a473007f60f3d1b8df8dc9d78a46b5c7e30,91c52a473007f60f3d1b8df8dc9d78a46b5c7e30,"Suppress logging for BufferLengthLogAction

It's really spammy. Decided not to document tag as also
being nullable in case we ever use it for anything else
in the base action class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183632944"
erdemguven,2018-01-26 16:42:46,https://api.github.com/repos/google/ExoPlayer/git/commits/f6541b498ada56c3675d9a0d66698fe3e9db57b8,f6541b498ada56c3675d9a0d66698fe3e9db57b8,"Fix FilteringHlsPlaylistParser

Only filter HlsMasterPlaylists.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183394956"
tonihei,2018-01-26 16:17:18,https://api.github.com/repos/google/ExoPlayer/git/commits/1ace5fa95b73aba590effa450fbb818d73cf2899,1ace5fa95b73aba590effa450fbb818d73cf2899,"Make FakeMediaSource reusable.

GitHub:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183392095"
tonihei,2018-01-26 16:08:19,https://api.github.com/repos/google/ExoPlayer/git/commits/f581acbf5d9597981dd3edaa7571afda7b2d6df9,f581acbf5d9597981dd3edaa7571afda7b2d6df9,"Allow reusing SingleSampleMediaSource.

GitHub:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183391117"
andrewlewis,2018-01-26 16:08:19,https://api.github.com/repos/google/ExoPlayer/git/commits/de8d402aa616597f858602e41032c0032663e41b,de8d402aa616597f858602e41032c0032663e41b,"Merge MediaPeriodInfoSequence into MediaPeriodQueue

MediaPeriodInfoSequence has functionality for determining what MediaPeriod
should be loaded next. Move this into the queue as an initial step towards
moving logic concerning updating the queue of media periods out of
ExoPlayerImplInternal.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183391114"
AquilesCanta,2018-01-26 16:05:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ac630b616c6fa5e498ebc17c10cdd9b21cfb2ab0,ac630b616c6fa5e498ebc17c10cdd9b21cfb2ab0,"Propagate RemoteMediaClient's current duration to timeline if necessary

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183390851"
AquilesCanta,2018-01-26 15:56:29,https://api.github.com/repos/google/ExoPlayer/git/commits/8ba3335145755d5af0173970a75d5173f4ac85f4,8ba3335145755d5af0173970a75d5173f4ac85f4,"Use long segment indices for DASH

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183389701"
tonihei,2018-01-26 15:32:32,https://api.github.com/repos/google/ExoPlayer/git/commits/46c4ca7ddbb0ff80a5ea64a56f035037a345d0bb,46c4ca7ddbb0ff80a5ea64a56f035037a345d0bb,"Add CompositeMediaSource to handle common tasks for composite media sources.

This removes some boiler-plate code for compostite sources and will also
simplify resuing media source in the future (because this class can keep track
of child listeners).

Issue:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183387123"
tonihei,2018-01-26 14:09:26,https://api.github.com/repos/google/ExoPlayer/git/commits/ea21f72c622bd963acabd5248c20257a42e51eb2,ea21f72c622bd963acabd5248c20257a42e51eb2,"Allow reusing ExtractorMediaSource.

GitHub:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183378776"
tonihei,2018-01-26 13:43:04,https://api.github.com/repos/google/ExoPlayer/git/commits/e6d25a9cb6d3ce7e5aaa928baea88ada9b139722,e6d25a9cb6d3ce7e5aaa928baea88ada9b139722,"Keep replaced manifest uri in DashMediaSource after release.

This is only allowed for user-replaced manifest uris. If the manifest
itself forwards to another manifest, we keep the original manifest in
case the forwarding changes.

Also removed the initialManifest as it can be simplified by using the
sideloadedManifest indicator.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183376209"
tonihei,2018-01-26 13:09:17,https://api.github.com/repos/google/ExoPlayer/git/commits/d418204e261ea2011373c19ba4bc6e8d9a88e5ab,d418204e261ea2011373c19ba4bc6e8d9a88e5ab,"Allow reusing HlsMediaSource.

GitHub:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183373647"
tonihei,2018-01-26 12:12:59,https://api.github.com/repos/google/ExoPlayer/git/commits/e4a91b9e3d6ce0e647da23dcc1fe6ed7556cf2a7,e4a91b9e3d6ce0e647da23dcc1fe6ed7556cf2a7,"Make SsMediaSource reusable.

GitHub:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183369041"
AquilesCanta,2018-01-26 11:37:55,https://api.github.com/repos/google/ExoPlayer/git/commits/677fc291cf143641ea7c56f56a865216c0e9cb94,677fc291cf143641ea7c56f56a865216c0e9cb94,"Use long for HLS media sequences

Issue:#3747

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183366339"
tonihei,2018-01-25 17:52:30,https://api.github.com/repos/google/ExoPlayer/git/commits/bc9dbdb49e39cb993ece4ca8054031b0212ffa8d,bc9dbdb49e39cb993ece4ca8054031b0212ffa8d,"Make DashMediaSource reusable.

GitHub:#3498

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183253017"
botaydotcom,2018-01-25 16:29:22,https://api.github.com/repos/google/ExoPlayer/git/commits/3d320e95060d38bc5a482d0da82a3dcbfb26c23b,3d320e95060d38bc5a482d0da82a3dcbfb26c23b,"Fix a minor bug in SsMediaSource.

When SsMediaSource loads Manifest, it dispatches loadCompleted event even when
the load is cancelled. This change makes sure SsMediaSource dispatch
loadCancelled event instead.

GitHub: #3754

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183241940"
andrewlewis,2018-01-25 15:58:03,https://api.github.com/repos/google/ExoPlayer/git/commits/f402a84dfa057a6f0a0ac747145683fca6b03ee9,f402a84dfa057a6f0a0ac747145683fca6b03ee9,"Group Timeline.getPeriod overloads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183238240"
botaydotcom,2018-01-25 15:52:17,https://api.github.com/repos/google/ExoPlayer/git/commits/205055a01f92cdc357b3970151ff7ac174d62be0,205055a01f92cdc357b3970151ff7ac174d62be0,"Update ExoPlayer PlayerView, add zoom mode for PlayerView xml attributes

Since AspectRatioFrameLayout supports zoom mode as another resize_mode,
PlayerView's resize mode xml attribute should include this as well.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183237663"
erdemguven,2018-01-25 13:51:57,https://api.github.com/repos/google/ExoPlayer/git/commits/10879e32ba589210994914d0480108438905ffc9,10879e32ba589210994914d0480108438905ffc9,"Add DownloadNotificationHelper

Helper class to create notifications for downloads using DownloadManager.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183225948"
reudismam,2018-01-30 15:50:20,https://api.github.com/repos/google/ExoPlayer/git/commits/a3891f6f5ae1bcc502118f858300d75f19a22029,a3891f6f5ae1bcc502118f858300d75f19a22029,Use the pattern ''string literal''.equals(something) to prevent NPE as it is done in many other locations in the codebase.
ojw28,2018-01-24 19:27:45,https://api.github.com/repos/google/ExoPlayer/git/commits/23ff4efda1918527c446d165e3edeba9b93f2eac,23ff4efda1918527c446d165e3edeba9b93f2eac,"Tell LoadControl whether playback can start

- This gives LoadControl enough information in shouldContinueLoading
  to know whether returning false will result in a terminal non-playback
  state.
- DefaultLoadControl will always return true when returning false will
  result in a terminal non-playback state, unless the target buffer size
  is exceeded. This can help to avoid getting stuck in the case that a
  MediaPeriod is providing samples from an unexpected starting time.
- Make the terminal state actually terminal. Previously the player would
  end up in an indefinite buffering state. We now fail with an error.
- Also remove the opportunity for LoadControl implementations to livelock
  playback. No sane LoadControl should simultaneously tell the player that
  it doesn't want to load anything and that it doesn't want to start
  playback. So this change removes the opportunity and starts playback in
  EPII instead in this case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183114797"
AquilesCanta,2018-01-24 18:18:06,https://api.github.com/repos/google/ExoPlayer/git/commits/35dad90bea56999371d42b5a647c7e859df9e550,35dad90bea56999371d42b5a647c7e859df9e550,"Fix DefaultDrmSessionManager canAcquireSession for offline modes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183102837"
ojw28,2018-01-24 17:49:02,https://api.github.com/repos/google/ExoPlayer/git/commits/6174d0475578556bed756a03d3642ecbf0906f93,6174d0475578556bed756a03d3642ecbf0906f93,"Fix CacheDataSource hold-lock-forever problem

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183098172"
AquilesCanta,2018-01-24 14:17:18,https://api.github.com/repos/google/ExoPlayer/git/commits/8716c0ee32a6c5399d8f2e6b3e4f14563bb14c7f,8716c0ee32a6c5399d8f2e6b3e4f14563bb14c7f,"Implement a best-effort DRM session acquisition approach

Try to delay failure for as long as possible. That is, propagate
DRM session failures only after an encrypted buffer arrives or clear
sample playback without session is not allowed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183076348"
AquilesCanta,2018-01-24 12:34:15,https://api.github.com/repos/google/ExoPlayer/git/commits/91cacc29ff58636a0bbe54ebf7966ad2b6dbdd0c,91cacc29ff58636a0bbe54ebf7966ad2b6dbdd0c,"Fix SimpleDecoderAudioRenderer processEndOfStream error propagation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183068548"
andrewlewis,2018-01-24 11:42:21,https://api.github.com/repos/google/ExoPlayer/git/commits/b8bb1f642b01306b717ebca78768efd3acc5cfc0,b8bb1f642b01306b717ebca78768efd3acc5cfc0,"Move MediaPeriodHolder and MediaPeriodHolderQueue to top level

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183065262"
ojw28,2018-01-24 10:51:31,https://api.github.com/repos/google/ExoPlayer/git/commits/c8298e70b1a6678e99edbcdf442bdce6af7fdb63,c8298e70b1a6678e99edbcdf442bdce6af7fdb63,Update version of rtmp-client to 3.0.1
ojw28,2018-01-24 10:51:05,https://api.github.com/repos/google/ExoPlayer/git/commits/d098effa699bed846f02575d3ae8b0aaddf4498d,d098effa699bed846f02575d3ae8b0aaddf4498d,Cleanup merged pull requests
ojw28,2018-01-24 10:40:32,https://api.github.com/repos/google/ExoPlayer/git/commits/4d2e0bf1225251236ca642397361604f752a7d82,4d2e0bf1225251236ca642397361604f752a7d82,"Merge pull request #3635 from drhill/dev-v2_24bitpcm

add support in mediacodecaudiorenderer for 24bit pcm to float"
ojw28,2018-01-24 10:40:23,https://api.github.com/repos/google/ExoPlayer/git/commits/13b46dab93183b9c73e9aef613195ad3851aafe0,13b46dab93183b9c73e9aef613195ad3851aafe0,"Merge pull request #3719 from eneim/improve/raw-resource

Improve raw resource data source (recreated)"
ojw28,2018-01-24 10:20:59,https://api.github.com/repos/google/ExoPlayer/git/commits/a1274591b14be1b22d75f21d7467d08ea3602375,a1274591b14be1b22d75f21d7467d08ea3602375,"Defer retries for progressive live audio streams

Issue: #1606

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183058160"
ojw28,2018-01-24 10:11:56,https://api.github.com/repos/google/ExoPlayer/git/commits/5dff21e5deaa3a84e7038e9d2f37013ef779c76e,5dff21e5deaa3a84e7038e9d2f37013ef779c76e,"Remove part of DemoUtil from demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183056883"
andrewlewis,2018-01-24 08:16:49,https://api.github.com/repos/google/ExoPlayer/git/commits/d240249b6c55502b3a23663ebf1f5e6f97ad2721,d240249b6c55502b3a23663ebf1f5e6f97ad2721,"Work around missed ad LOADED events

Track the expected next ad group index so that it can be used as a fallback if
IMA does not notify the ad index via a LOADED event.

Also do some miscellaneous minor cleanup (including logging all LOG events, and
logging at debug level where appropriate).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=183048612"
erdemguven,2018-01-23 23:06:13,https://api.github.com/repos/google/ExoPlayer/git/commits/5ce40fa04b69c2bdd56f8cf8c15954315297710a,5ce40fa04b69c2bdd56f8cf8c15954315297710a,"Fix CacheDataSource trying to read more after EOS

setBytesRemaining() doesn't work when called after closeCurrentSource()

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182999254"
erdemguven,2018-01-23 15:52:00,https://api.github.com/repos/google/ExoPlayer/git/commits/8b7902888023dfe0c7faabd5969c2906f92f13ad,8b7902888023dfe0c7faabd5969c2906f92f13ad,"Add filtering manifest parsers for DASH, HLS and SmoothStreaming

These parsers can be used to get a manifest which includes only the
representations identified by the given keys.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182932874"
tonihei,2018-01-23 12:00:15,https://api.github.com/repos/google/ExoPlayer/git/commits/4671c23c4db6bba62f786aeaa54d79728d66efaf,4671c23c4db6bba62f786aeaa54d79728d66efaf,"Migrate ExoPlayerTest to Robolectric.

So far this wasn't possible because Robolectric's Looper and MessageQueue
implementations have multiple shortcomings:
 1. The message loop of new HandlerThreads is an not an actual loop and
    scheduled messages are executed on the thread the message is enqueued
    (not the handler thread).
 2. The scheduler used to replace the message queue is synchronizing all its
    methods. Thus, when a test attempts to add messages to a Handler from
    two different threads, it may easily run into a deadlock.
 3. The scheduler doesn't correctly emulate the order of messages as they
    would be in an actual MessageQueue:
   a. If the message is enqueued on the handler thread, it gets executed
      immediately (and not after all other messages at the same time).
   b. The list of messages is always re-sorted by time, meaning that the
      order of execution for messages at the same time is indeterminate.
 4. Robolectric's SystemClock implementation returns the current scheduler
    time of the main UI thread. So, unless this scheduler is used to add
    messages in the future, the SystemClock time never advances.

This CL adds two helper classes which extend and replace Robolectric's
ShadowLooper and ShadowMessageQueue.
 1. We intercept messages being enqueued or deleted in the message queue.
    Thus Robolectric's faulty scheduler gets never used. Instead, we keep
    a blocking priority queue of messages, sorted first by execution time
    and then by FIFO order to correctly emulate the real MessageQueue.
 2. We also keep a list of deleted messages to know which messages to ignore
    when they come up in the looper.
 3. When a new Looper is started, we override the dummy loop to an actual
    eternal while loop which waits for new messages, checks if they haven't
    been deleted, and runs the messages (similar to what Robolectric's
    MessageQueue would have done at this point).

Because we don't actually use the main UI thread in our tests, we can't rely
on the SystemClock to progress in any sensible manner. To overcome this issue,
we can use the auto-advancing FakeClock also used for the simulation tests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182912510"
tonihei,2018-01-23 11:31:03,https://api.github.com/repos/google/ExoPlayer/git/commits/e991a8015bdf2521d084bde3d255992178804ec0,e991a8015bdf2521d084bde3d255992178804ec0,"Use Truth instead of framework asserts in all tests.

This achieves two things:
1. All our tests use the same type of assertions.
2. The tests currently run as instrumentation test can be moved to
   Robolectric without changing the assertions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182910542"
erdemguven,2018-01-22 16:53:22,https://api.github.com/repos/google/ExoPlayer/git/commits/aa1b41bf2fb32d4d20f46db0a5362f69f4b208dc,aa1b41bf2fb32d4d20f46db0a5362f69f4b208dc,"Generalize parameter type in DemoApplication build methods

Instead of DefaultBandwidthMeter, TransferListener<? super DataSource>
is used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182785785"
tonihei,2018-01-22 16:48:09,https://api.github.com/repos/google/ExoPlayer/git/commits/32e6cf55092b514bfcf21c9834891f71ca641877,32e6cf55092b514bfcf21c9834891f71ca641877,"Remove further potential flakiness from ExoPlayerTest.

These were caused by two issues:
1. The FakeMediaSource can be updated with a new timeline. The setNewSourceInfo
is called from a different thread than prepareSource and both access local
variables without synchronization.
2. For multi-window playback, the FakeRenderer claims that isReady and isEnded
are both set to false if it read the end of the stream. However isReady should be
true because it is able to ""render"" its data until the end of the stream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182785169"
andrewlewis,2018-01-22 14:30:47,https://api.github.com/repos/google/ExoPlayer/git/commits/d8c61532b60fd4ec62ee2099e395d22eb6ac7655,d8c61532b60fd4ec62ee2099e395d22eb6ac7655,"Group binarySearchFloor overloads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182770109"
botaydotcom,2018-01-22 14:29:51,https://api.github.com/repos/google/ExoPlayer/git/commits/a06a670d63803b216e4f39af9a3d6c64b144af35,a06a670d63803b216e4f39af9a3d6c64b144af35,"Use same logic for DASH manifest reloading for all cases when manifest is invalid.

When a loaded DASH manifest is invalid (either some periods were removed
illegally, or a manifest for a live event is stale), we will retry using 1
logic:
- Retry loading with back-off up-to a limit.
- Throw a DashManifestExpiredException() if we exceed retry limit.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182770028"
erdemguven,2018-01-22 11:44:53,https://api.github.com/repos/google/ExoPlayer/git/commits/05e55f37ebe9f75b64d532041bc26e8bb0f85959,05e55f37ebe9f75b64d532041bc26e8bb0f85959,"Fix DashDownloaderTest.testDownloadManifestFailure

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182754993"
ojw28,2018-01-22 10:29:22,https://api.github.com/repos/google/ExoPlayer/git/commits/196f5f7917f1f9885ac1dee8d05b0f7ee8cca5f5,196f5f7917f1f9885ac1dee8d05b0f7ee8cca5f5,"Include P8 in setOutputSurfaceWorkaround

Also disable use of dummy surface for devices that require the
workaround. It's only useful in the case that we can use
setOutputSurfaceWorkaround, so if it's disabled the dummy surface
has no purpose (it actually makes things worse by consuming past
the key-frame prior to the current position, which doesn't happen
if you have no surface at all).

Issue: #3724

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182750068"
erdemguven,2018-01-19 23:08:17,https://api.github.com/repos/google/ExoPlayer/git/commits/b3d1635ac48c387a12cfd144813c699dec48756f,b3d1635ac48c387a12cfd144813c699dec48756f,"Fix CacheDataSource and SimpleCache issues

This fixes a very specific case where the data read has non-cached gaps
and a read-only CDS switches to read from upstream in a gap then the
cached data is deleted. When the CDS reaches the end of the gap, it
tries to open the next source. As there is no cached data, it tries to
continue with the already opened upstream data source but as it reached
end of the gap range, the code starts looping.

Also fixes infinite lock which occurs when in the previous case CDS isn't
readonly. It locks the content while filling the gap in the cache. At the
end of the gap, as the following data is deleted it tries to lock the
content for writing but the content is already locked by itself.

The last fix is preventing removal of CachedContent entry from
CachedContentIndex while associated key is locked.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182595426"
tonihei,2018-01-19 16:01:01,https://api.github.com/repos/google/ExoPlayer/git/commits/4ba17bb69036ed99797961ad61e999d99110f3dc,4ba17bb69036ed99797961ad61e999d99110f3dc,"Remove potential flakiness from ExoPlayerTest caused by multi-threading.

Some tests in ExoPlayerTest issue commands to the player from the test thread
while the player is actively playing media (playWhenReady=true). Due to the
indeterminate time taken to enqueue the commands on the playback thread, they
may arrive when the player already proceeded to another window or finished
playback.

To ensure the tests are always deterministic, this change pauses playback in
the tests where this may happen before issuing the commands.
Also, for tests where we need to wait for a new window before issuing the
next command, a new action is added which allows to play until a specified
position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182535096"
ojw28,2018-01-19 15:54:04,https://api.github.com/repos/google/ExoPlayer/git/commits/24f866e7886d6432787d48c657ad238c8d1bc3e8,24f866e7886d6432787d48c657ad238c8d1bc3e8,"Fix DashMediaSource NPE

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182534505"
AquilesCanta,2018-01-19 15:41:02,https://api.github.com/repos/google/ExoPlayer/git/commits/fe1e4fa1f26aeaff292a953a377df0b124780842,fe1e4fa1f26aeaff292a953a377df0b124780842,"Fix preparation of media sources with empty timeline

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182533415"
ojw28,2018-01-19 15:07:22,https://api.github.com/repos/google/ExoPlayer/git/commits/cf27bc84e68103fcb31baa90c9313b941cb0c020,cf27bc84e68103fcb31baa90c9313b941cb0c020,"DashMediaSource cleanup

- Get handling of ""stale"" and ""out of sync"" manifests so
  they're right next to each other (to be merged)
- Move startLoadingManifest to be next to the methods that
  schedule it, and actually start loading stuff.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182530683"
tonihei,2018-01-19 11:56:23,https://api.github.com/repos/google/ExoPlayer/git/commits/9de0123e84fa7276161cb2fd300fdb0d0fa17237,9de0123e84fa7276161cb2fd300fdb0d0fa17237,"When seeking while player is idle, ensure EPII's position is in sync with EPI.

As soon as the seek gets acknowledged by EPII, EPI returns the actual position
from the playback info again which is set by EPII. Thus, EPII needs to update
the position to reflect the changes expected by EPI.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182515106"
marcbaechinger,2018-01-19 11:20:49,https://api.github.com/repos/google/ExoPlayer/git/commits/32f8c2e907c4ca31cef648ddd355b6a7f907771d,32f8c2e907c4ca31cef648ddd355b6a7f907771d,"add strings and drawables for fullscreen button

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182512582"
ojw28,2018-01-19 10:10:57,https://api.github.com/repos/google/ExoPlayer/git/commits/4828f275c7177a486fa1518b6242ac962741cb87,4828f275c7177a486fa1518b6242ac962741cb87,"Make play button behave differently in IDLE and ENDED states

- In IDLE, the button will now call a preparer. This allows
  removal of the separate retry button from the demo app.
- In ENDED, the button will seek back to the default position
  and play.
- Behavior is made consistent with LeanbackPlayerAdapter.

Issue: #3689

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182506855"
tonihei,2018-01-19 09:45:09,https://api.github.com/repos/google/ExoPlayer/git/commits/7cacbfedc5a9eb67494fce18f000babfdb7a5987,7cacbfedc5a9eb67494fce18f000babfdb7a5987,"Mitigate OOM at poorly interleaved Mp4 streams.

When determining the next sample to load, the Mp4Extractor now takes
into account how far one stream is reading ahead of the others.
If one stream is reading ahead more than a threshold (default: 10 seconds),
the extractor continues reading the other stream even though it needs
to reload the source at a new position.

GitHub:#3481
GitHub:#3214
GitHub:#3670

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182504396"
kqyang,2018-01-18 19:11:25,https://api.github.com/repos/google/ExoPlayer/git/commits/06be0fd712e6c48741752f4f43738ba522e152d0,06be0fd712e6c48741752f4f43738ba522e152d0,"Add SAMPLE-AES-CTR, which replaces SAMPLE-AES-CENC per latest spefication: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182407790"
ojw28,2018-01-18 17:11:46,https://api.github.com/repos/google/ExoPlayer/git/commits/68387f98ee836d4b4491866162ac74693f441063,68387f98ee836d4b4491866162ac74693f441063,"Simplify demo app by moving EventLogger into core

It seems good to have EventLogger available from the library.
In particular because when app developers use it and then
submit bug reports, it makes it much easier to work out what
happened. It will also allow EventLogger to be used across
our (now multiple) demo apps.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182389407"
tonihei,2018-01-18 16:20:35,https://api.github.com/repos/google/ExoPlayer/git/commits/029c95832cea5a4ac81b1afb75b764595e7338d2,029c95832cea5a4ac81b1afb75b764595e7338d2,"Add queue abstraction to ExoPlayerImplInternal.

This gets rid of the manual tracking of this queue with reading, playing,
and loading period holders. Still keeping these names for queue access methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182378944"
ojw28,2018-01-18 14:59:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c577d9d35191b11b46ec215be4812b96accd06a0,c577d9d35191b11b46ec215be4812b96accd06a0,"Let SimpleExoPlayerView/LeanbackPlayerAdapter bind with any Player

Also sanitize naming (PlayerView/PlayerControlView).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182364487"
AquilesCanta,2018-01-18 14:46:31,https://api.github.com/repos/google/ExoPlayer/git/commits/605aeb3a42c66c01069071c6d1fe6bba3ee39084,605aeb3a42c66c01069071c6d1fe6bba3ee39084,"Make id3 context usage robust against container format changes

Issue:#3622

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182363243"
ojw28,2018-01-17 21:33:39,https://api.github.com/repos/google/ExoPlayer/git/commits/65597e0db8b1e525d077a61170f5adc5d4c47cc4,65597e0db8b1e525d077a61170f5adc5d4c47cc4,"DashMediaSource variable name cleanup

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182261649"
AquilesCanta,2018-01-17 14:40:23,https://api.github.com/repos/google/ExoPlayer/git/commits/78c6b39ae82843ad8dfdbfe75bab91d254f431f2,78c6b39ae82843ad8dfdbfe75bab91d254f431f2,"Fix HLS media playlist only playback

This was broken by []

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182206548"
AquilesCanta,2018-01-17 13:59:50,https://api.github.com/repos/google/ExoPlayer/git/commits/0697fb3955d8a30edb935cc428d515e2fd9d48cb,0697fb3955d8a30edb935cc428d515e2fd9d48cb,"Fail on HLS+TS loss of sync

Issue:#3632

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182202289"
ojw28,2018-01-17 10:11:55,https://api.github.com/repos/google/ExoPlayer/git/commits/0708aa87ba87a54fb5c1e85a6d2c5359439b1f66,0708aa87ba87a54fb5c1e85a6d2c5359439b1f66,"Fix stray calculation in PGS decoder

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182183184"
AquilesCanta,2018-01-16 17:56:12,https://api.github.com/repos/google/ExoPlayer/git/commits/3919843db27c78dc04ec498087182058393cced0,3919843db27c78dc04ec498087182058393cced0,"Force single audio and video sample queues

This solves the problem of having dense tracks' ids change.
For example, if the available variants offer both HEVC and AVC video
tracks, all video samples will map to the same sample queue even if
IDs don't match.

Issue:#3653

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182070486"
AquilesCanta,2018-01-16 17:11:07,https://api.github.com/repos/google/ExoPlayer/git/commits/be304486e043616a36ee13eba75dab6431ed6930,be304486e043616a36ee13eba75dab6431ed6930,"Fix HLS' mime type propagation

Issue:#3653

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182064250"
ojw28,2018-01-16 15:59:51,https://api.github.com/repos/google/ExoPlayer/git/commits/a4114f59b6897a28dd10cff2f11311dc04fc9363,a4114f59b6897a28dd10cff2f11311dc04fc9363,"Seek at chunk level when seeking to chunk start positions

This avoids issues that can arise due to slight discrepancies between
chunk start times (obtained from the manifest of segment index) and
the timestamps of the samples contained within those chunks.

Issue: #2882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182054959"
erdemguven,2018-01-16 15:23:59,https://api.github.com/repos/google/ExoPlayer/git/commits/965bc4f6771c1fc9d848188b9e11807bf90f23ba,965bc4f6771c1fc9d848188b9e11807bf90f23ba,"Add JobDispatcherScheduler

This is a Scheduler implementation which uses Firebase JobDispatcher.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182051350"
botaydotcom,2018-01-16 12:09:09,https://api.github.com/repos/google/ExoPlayer/git/commits/6749623cd127f15c014dcf21ade1349fe436ef60,6749623cd127f15c014dcf21ade1349fe436ef60,"Handle DASH `emsg' events targeting player.

For live streaming, there are several types of DASH `emsg' events that directly
target the player. These events can signal whether the manifest is expired, or
the live streaming has ended, and should be handle directly within the player.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182034591"
andrewlewis,2018-01-16 08:23:47,https://api.github.com/repos/google/ExoPlayer/git/commits/6bed2ffc047130faf3beb32aacc75aa251d355bc,6bed2ffc047130faf3beb32aacc75aa251d355bc,"Remove ndk-build from [] flac build rules

Android NDK r9 in [] is deprecated (see []

Update the ExoPlayer flac extensions to use android_jni_library.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=182017669"
AquilesCanta,2018-01-15 16:21:33,https://api.github.com/repos/google/ExoPlayer/git/commits/515fdf3bfd9aed9826bd84a3f2194ffc8481f000,515fdf3bfd9aed9826bd84a3f2194ffc8481f000,"Allow extension of DebugTextViewHelper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181970955"
tonihei,2018-01-15 15:55:53,https://api.github.com/repos/google/ExoPlayer/git/commits/cfed8791b0fb5698cf8d0b268e7746d1153cfb3a,cfed8791b0fb5698cf8d0b268e7746d1153cfb3a,"Send downStreamFormatChanged notification for embedded streams.

This allows listeners to get notified of any change to the embedded tracks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181969023"
ojw28,2018-01-15 15:04:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ebfd5a7fe039d53108e8afcd6772f3371eef9aa7,ebfd5a7fe039d53108e8afcd6772f3371eef9aa7,"Don't discard embedded queues beyond primary queue.

ChunkSampleStream.seekToUs assumes that if we can seek within the
primary sample queue, we can also seek within the embedded queues.
This assumption can be violated fairly easily if discardBuffer is
called with toKeyframe=true, since this can cause samples to be
discarded from the embedded queues within the period for which a
seek in the primary sample queue will succeed. This change fixes
the issue.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181965902"
ojw28,2018-01-15 14:22:08,https://api.github.com/repos/google/ExoPlayer/git/commits/7b534cd9fda70290aac6f270291e5c28abb0fad4,7b534cd9fda70290aac6f270291e5c28abb0fad4,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181962471"
eneim,2018-01-18 00:36:48,https://api.github.com/repos/google/ExoPlayer/git/commits/88f8c768b0aca93da652d3955dda846dbc03b97f,88f8c768b0aca93da652d3955dda846dbc03b97f,"Also check if the Uri is built for raw resource data, and then create the RawResourceDataSource for it."
eneim,2018-01-18 00:32:46,https://api.github.com/repos/google/ExoPlayer/git/commits/408bc08682328c50ba323ac74406983682464d4b,408bc08682328c50ba323ac74406983682464d4b,"Make Raw Resource Scheme to be public, accessible from outside."
ojw28,2018-01-15 14:13:30,https://api.github.com/repos/google/ExoPlayer/git/commits/141f3aa836daf22e9daf514ca02dfe0a9474bfb8,141f3aa836daf22e9daf514ca02dfe0a9474bfb8,Simplify PGS captions + sync with internal tree
ojw28,2018-01-15 13:47:16,https://api.github.com/repos/google/ExoPlayer/git/commits/dc38e86945ef0a35f58abc73dbc2667e4736b2ac,dc38e86945ef0a35f58abc73dbc2667e4736b2ac,"Merge pull request #3673 from drhill/dev-v2_PGS

PGS subtitle decoding support"
ojw28,2018-01-15 13:47:05,https://api.github.com/repos/google/ExoPlayer/git/commits/96b7daa93ab129c8d7645c24d999bea652e0660c,96b7daa93ab129c8d7645c24d999bea652e0660c,"Merge pull request #3667 from alexcohn/ndk-r16-support

minimal fix to support NDK r16"
andrewlewis,2018-01-15 11:10:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f20c158a38ec8f4aa4775f0f6ee9a34eeda62f61,f20c158a38ec8f4aa4775f0f6ee9a34eeda62f61,"Fix IMA sample ad tag URL

Issue: #3703

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181947101"
tonihei,2018-01-12 17:26:04,https://api.github.com/repos/google/ExoPlayer/git/commits/7a5640304601f5518060689785ad5fa27b82f25f,7a5640304601f5518060689785ad5fa27b82f25f,"Add missing downstreamFormatChanged to Extractor and SingleSample media source.

These haven't been included in the recent changes but can be reported as
soon as the first sample of each stream is read.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181753141"
tonihei,2018-01-12 15:52:49,https://api.github.com/repos/google/ExoPlayer/git/commits/ad3e6ef4cdac12d1983f4998e594a70fbe28eee8,ad3e6ef4cdac12d1983f4998e594a70fbe28eee8,"Add missing onLoadStarted callback to Extractor and SingleSample media period.

We added the other callbacks some time ago, but didn't include onLoadStarted.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181743764"
tonihei,2018-01-11 15:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/f977ba256fdef5fd808d0ead6fdfea0a10719149,f977ba256fdef5fd808d0ead6fdfea0a10719149,"Add ad insertion discontinuity reason.

This it to distinguish between actual period transitions and the
transitions occuring to and from ads within one timeline period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181606023"
ojw28,2018-01-10 14:13:25,https://api.github.com/repos/google/ExoPlayer/git/commits/214d46d95781401eaad48eb2510200b63651a1e9,214d46d95781401eaad48eb2510200b63651a1e9,"Set selection flags on image sample formats.

Issue: #3008

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181455340"
erdemguven,2018-01-10 10:51:40,https://api.github.com/repos/google/ExoPlayer/git/commits/1fc250a9f3c877bb2704096c7848f9687bc15847,1fc250a9f3c877bb2704096c7848f9687bc15847,"Make CacheUtil documentation clearer

Also fixed some other Cache related javadoc.

Issue: #3374

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181440687"
AquilesCanta,2018-01-10 10:48:27,https://api.github.com/repos/google/ExoPlayer/git/commits/11bae0af5a2ca1cf52ffa440b4ff564d8df7c696,11bae0af5a2ca1cf52ffa440b4ff564d8df7c696,"Add minimal logging for SCTE-35 splice commands in the Demo App

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181440439"
andrewlewis,2018-01-09 17:46:51,https://api.github.com/repos/google/ExoPlayer/git/commits/13fbe7b2f23c038cadc10e264e288c7143ca7b68,13fbe7b2f23c038cadc10e264e288c7143ca7b68,"Fix cronet extension package name

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181331715"
andrewlewis,2018-01-09 16:04:36,https://api.github.com/repos/google/ExoPlayer/git/commits/96e490d7fef3b5dee8cdcefb36cf35cf939eee78,96e490d7fef3b5dee8cdcefb36cf35cf939eee78,"Make it possible to subclass LibvpxVideoRenderer

Make LibvpxVideoRenderer non-final and add protected methods to match
MediaCodecVideoRenderer.

Reorganize methods to separate BaseRenderer, protected and internal methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181320714"
ojw28,2018-01-09 14:52:54,https://api.github.com/repos/google/ExoPlayer/git/commits/ff1bb2f70287d8ddf1d9d1ddd3ccd92724db7ba1,ff1bb2f70287d8ddf1d9d1ddd3ccd92724db7ba1,"Apply SeekParameters to DASH + SmoothStreaming playbacks

Issue: #2882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181314086"
tonihei,2018-01-09 11:34:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4ee971052bb39acf1f33a52959d77c7204de8498,4ee971052bb39acf1f33a52959d77c7204de8498,"Improve Extractor partial read tests.

Partial reads were performed once using a partial size of 1 byte.
This was not enough to detect problems which only occur in combination
with IOExceptions. Partial reads are now only applied when no exception
is thrown.

Moreover, the tests didn't check whether the total number of sampled bytes
is what it is supposed to be. Added a field to the data dumps checking
the total number of bytes in the sampled data.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181296545"
erdemguven,2018-01-08 15:06:15,https://api.github.com/repos/google/ExoPlayer/git/commits/d427a1dd62eac30af5bb7519e0c7b437dd64e8db,d427a1dd62eac30af5bb7519e0c7b437dd64e8db,"Make Cache.getCachedSpans return empty set rather than null

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181161289"
andrewlewis,2018-01-08 11:07:49,https://api.github.com/repos/google/ExoPlayer/git/commits/67d4626701ee93f6df8f7a274af1927ecbec780d,67d4626701ee93f6df8f7a274af1927ecbec780d,"Add support for non-Extractor content MediaSources in IMA demo

Issue: #3676

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181140929"
ojw28,2018-01-08 10:25:16,https://api.github.com/repos/google/ExoPlayer/git/commits/d533a83ae41a19ae33b56bef83683549c52722d3,d533a83ae41a19ae33b56bef83683549c52722d3,"Partial revert of DRM fixes

----------------------------------
Original change description:

DRM fixes

- Parse multiple kids from default_KID. It's specified as a whitespace
  separated list of UUIDs rather than a single UUID.
- Opportunistically proceed with playback in cases where the manifest
  only defines a single SchemeData with the common PSSH UUID. In such
  cases the manifest isn't saying anything about which specific DRM
  schemes it supports.

Issue: #3630

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181137621"
ojw28,2018-01-08 10:23:40,https://api.github.com/repos/google/ExoPlayer/git/commits/73892f21b15a90cb5ce6acda470d13c31855d3ad,73892f21b15a90cb5ce6acda470d13c31855d3ad,"Ubernit line re-order

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181137491"
tonihei,2018-01-08 09:57:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c991b80c856f0d2f8cfb8afb8106a0fc05b625ae,c991b80c856f0d2f8cfb8afb8106a0fc05b625ae,"Rmeove unused variable in Mp4Extractor and HeifExtractor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=181135589"
tonihei,2018-01-05 17:03:48,https://api.github.com/repos/google/ExoPlayer/git/commits/4867748c501412668572b1518e09a4c10792e244,4867748c501412668572b1518e09a4c10792e244,"Add assertions to check that media sources are not prepared twice.

This lets apps fail-fast when they try to reuse media source instances.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180934445"
erdemguven,2018-01-05 16:14:43,https://api.github.com/repos/google/ExoPlayer/git/commits/4b018b4d19c6dc658ba1eaaf72ab9610224a3687,4b018b4d19c6dc658ba1eaaf72ab9610224a3687,"Document how unset length request are cached

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180929422"
botaydotcom,2018-01-05 15:35:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5364962dca36136d0765aefb885af61015fb503e,5364962dca36136d0765aefb885af61015fb503e,"Automatically apply rotation for TextureView in SimpleExoPlayer.

If SimpleExoPlayer is using TextView as output, we can handle video rotation by
automatically applying a matrix transformation to the TextureView when we have
this information available from the video (from video's metadata).

GitHub: #91

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180925571"
erdemguven,2018-01-05 09:22:41,https://api.github.com/repos/google/ExoPlayer/git/commits/373935aeb66c5e19275fa9c42409913aa04fafc2,373935aeb66c5e19275fa9c42409913aa04fafc2,"Make CacheDataSource detect cache availability change

In certain conditions CacheDataSource switch to reading from upstream
without writing back to cache. This change makes it detect the change of
these conditions and switch to reading from or writing to cache.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180901463"
drhill,2018-01-14 15:55:54,https://api.github.com/repos/google/ExoPlayer/git/commits/aaf469ce065205593e99cfbd655e6f57b7763d62,aaf469ce065205593e99cfbd655e6f57b7763d62,code review changes and fix for discontinuity
drhill,2018-01-06 05:26:18,https://api.github.com/repos/google/ExoPlayer/git/commits/821ea0e58b94ffa2eb95a7934c173aa44752fe2a,821ea0e58b94ffa2eb95a7934c173aa44752fe2a,moved floatresample into defaultaudiosink and added new constructor in defaultaudiosync to use that resample when audio input is 24/32bit pcm and the new flag is enabled
drhill,2017-12-23 18:25:45,https://api.github.com/repos/google/ExoPlayer/git/commits/ca0c090c1a98aa37bfaf6d85e1ae681f6d6f5236,ca0c090c1a98aa37bfaf6d85e1ae681f6d6f5236,add support in mediacodecaudiorenderer for 24bit pcm to float
drhill,2018-01-06 04:10:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b610e1144338a93e89604b095ac1792b72f7a5af,b610e1144338a93e89604b095ac1792b72f7a5af,PGS subtitle decoding support
ojw28,2018-01-04 13:39:42,https://api.github.com/repos/google/ExoPlayer/git/commits/a1bac99f3bae78e510e367b61dd49a37e4301476,a1bac99f3bae78e510e367b61dd49a37e4301476,"Fix loadDrmInitData given DASH manifest parser changes

DASH manifests can now contain non-null but incomplete
DRM init data. Hence using the manifest init data when
non-null is not always the correct thing to do. This
change merges the sample and manifest formats (which
correctly merges the DRM init data) and then uses the
result.

Issue: #3630

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180787784"
andrewlewis,2018-01-04 12:31:44,https://api.github.com/repos/google/ExoPlayer/git/commits/c89cc81b710e7bc5e8f35c56e59cc8f8f99f1a0b,c89cc81b710e7bc5e8f35c56e59cc8f8f99f1a0b,"Configure MediaCodecs for realtime priority

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180782164"
andrewlewis,2018-01-04 11:23:27,https://api.github.com/repos/google/ExoPlayer/git/commits/682953c411208a673f59975620b1b55682772c70,682953c411208a673f59975620b1b55682772c70,"Fix typos

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180778084"
ojw28,2018-01-04 11:13:32,https://api.github.com/repos/google/ExoPlayer/git/commits/a314db04ad56999ab9bbcd9bfda984cf905c6eec,a314db04ad56999ab9bbcd9bfda984cf905c6eec,"Reformat UI classes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180777553"
andrewlewis,2018-01-03 17:18:11,https://api.github.com/repos/google/ExoPlayer/git/commits/8e8e53c42d7a63ee5f6703d86902ebb102c10af5,8e8e53c42d7a63ee5f6703d86902ebb102c10af5,"Add support for Dolby TrueHD passthrough

Issue: #2147

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180678595"
ojw28,2018-01-03 16:44:56,https://api.github.com/repos/google/ExoPlayer/git/commits/7314e9bddc2635c9426cbe237b237f35f24bb15b,7314e9bddc2635c9426cbe237b237f35f24bb15b,"DRM fixes

- Parse multiple kids from default_KID. It's specified as a whitespace
  separated list of UUIDs rather than a single UUID.
- Opportunistically proceed with playback in cases where the manifest
  only defines a single SchemeData with the common PSSH UUID. In such
  cases the manifest isn't saying anything about which specific DRM
  schemes it supports.

Issue: #3630

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180675056"
tonihei,2018-01-03 14:52:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2bc734afec7b8f729f19eae495b13de2dd481c40,2bc734afec7b8f729f19eae495b13de2dd481c40,"Replace message delay with send at time in playback loop.

This removes the need to calculate the time needed to run the doSomeWork
method. Consequently, we can use both the real Clock/Handler and the
FakeClock without changing the way the playback loop works and without
violating the interfaces of Clock or Handler.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180665647"
ojw28,2018-01-03 13:59:18,https://api.github.com/repos/google/ExoPlayer/git/commits/a29fb7b989c676967f806cdff572855203097894,a29fb7b989c676967f806cdff572855203097894,"Update release notes to cherry-pick 32-bit WAVE support

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180661355"
tonihei,2018-01-03 13:39:57,https://api.github.com/repos/google/ExoPlayer/git/commits/183870d9d3421a85b7c3c8c91da4a24c2c0d684a,183870d9d3421a85b7c3c8c91da4a24c2c0d684a,"Update Cronet extension readme on how to enable Java 8 features.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180660349"
ojw28,2018-01-03 13:30:56,https://api.github.com/repos/google/ExoPlayer/git/commits/7b9f71b44d0d8a290f6d4e6844a0c73e2a5502fe,7b9f71b44d0d8a290f6d4e6844a0c73e2a5502fe,"Don't kill the process if SimpleDecoder.decode throws.

Issue: #3645

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180659855"
erdemguven,2018-01-03 10:46:59,https://api.github.com/repos/google/ExoPlayer/git/commits/d3ba207a4b425b019423c0a2a6da81e7bdf6046b,d3ba207a4b425b019423c0a2a6da81e7bdf6046b,"Refactor CacheDataSource

Simplified and clarified the code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180649983"
alexcohn,2018-01-04 11:22:13,https://api.github.com/repos/google/ExoPlayer/git/commits/2cc044ded10f548b5e7dd89922cd3a494f7898aa,2cc044ded10f548b5e7dd89922cd3a494f7898aa,minimal fix to support NDK r16
ojw28,2018-01-03 14:01:53,https://api.github.com/repos/google/ExoPlayer/git/commits/2b20780482a9c6b07416bcbf4de829532859d10a,2b20780482a9c6b07416bcbf4de829532859d10a,"Merge pull request #3659 from google/dev-v2-r2.6.1

r2.6.1"
ojw28,2018-01-02 15:00:04,https://api.github.com/repos/google/ExoPlayer/git/commits/b704a1d6436ba64a0d6fab2868d36a6b47030fdc,b704a1d6436ba64a0d6fab2868d36a6b47030fdc,"Typo fix

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180543378"
erdemguven,2017-12-27 17:02:40,https://api.github.com/repos/google/ExoPlayer/git/commits/134c494b1b4b6ae03706c3a6859ce264020856ae,134c494b1b4b6ae03706c3a6859ce264020856ae,"Typo fixes

Issue:#3631

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180197723"
andrewlewis,2017-12-22 15:35:30,https://api.github.com/repos/google/ExoPlayer/git/commits/42a3e2e9d2c4383c00bca1b2b032fedeb47aadb7,42a3e2e9d2c4383c00bca1b2b032fedeb47aadb7,"Add support for extracting 32-bit float WAVE

Issue: #3379

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179925320"
ojw28,2018-01-03 13:50:24,https://api.github.com/repos/google/ExoPlayer/git/commits/f8c76f62e40fb29913635fc6b0d8225698cd4bf3,f8c76f62e40fb29913635fc6b0d8225698cd4bf3,Fix ClippingSampleStream
ojw28,2018-01-02 18:07:15,https://api.github.com/repos/google/ExoPlayer/git/commits/f657893973a27ee57dd1ece40ed19c30b9b33662,f657893973a27ee57dd1ece40ed19c30b9b33662,"Make SsaDecoder more robust against malformed content

Issue: #3645

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180559196"
botaydotcom,2017-12-22 13:33:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ad95a147d24d2a16412d70ba5981ea1f8f5fa303,ad95a147d24d2a16412d70ba5981ea1f8f5fa303,"Fix a bug that makes ClippingMediaSource not stop in some occasions.

If ClippingMediaSource contains a child MediaSource with embedded metadata
stream, and the embedded stream is being used, it can lead to
ClippingMediaSource not be able to stop after the clipping end point. The
reason being the metadata stream cannot read anymore sample, but it's also not
end of source at that point. This CL fix this by changing the condition to
check if the child stream cannot read anymore sample and it has read past the
clipping end point.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179918038"
ojw28,2018-01-02 18:07:15,https://api.github.com/repos/google/ExoPlayer/git/commits/bf3d6028fac610ee3de0009abb7c602457f25b68,bf3d6028fac610ee3de0009abb7c602457f25b68,"Make SsaDecoder more robust against malformed content

Issue: #3645

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180559196"
ojw28,2018-01-02 18:04:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0821f578e8ca51fda23b9cddf901ed1f594bd493,0821f578e8ca51fda23b9cddf901ed1f594bd493,"Remove HandlerWrapper.Factory

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180558741"
tonihei,2018-01-02 15:12:25,https://api.github.com/repos/google/ExoPlayer/git/commits/22f8ee37d429e9ed0304da00d507035d7e7ef887,22f8ee37d429e9ed0304da00d507035d7e7ef887,"Clean-up of player message handling.

Some readability fixes for PlayerMessage and the handling in
ExoPlayerImplInternal.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180544294"
ojw28,2018-01-02 15:00:04,https://api.github.com/repos/google/ExoPlayer/git/commits/884f64017fd407aff53bc6e756a73d0f083d9cc1,884f64017fd407aff53bc6e756a73d0f083d9cc1,"Typo fix

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180543378"
ojw28,2018-01-02 14:15:13,https://api.github.com/repos/google/ExoPlayer/git/commits/88abb153bb18c9b15be0d8e15ea673cfd9dccf3e,88abb153bb18c9b15be0d8e15ea673cfd9dccf3e,"Force audio renderers to report same position when not started

Whilst the previous behavior was WAI and had the advantage of
updating the position to be more exact when known, there were
a couple of disadvantages:

1. If seeking to the very end of a period in a playlist when
   paused, the position adjustment could trigger a position
   discontinuity to the next period.
2. We de-duplicate seeks to the current playback position.
   The position adjustment can prevent this from being
   effective. This is particularly important with the new
   SeekParameters support. When seeking to nearest sync point
   it's often possible to de-duplicate seeks, but we cannot
   do so if the playback position adjusts away from the sync
   point's time.

Issue: #2439
Issue: #2882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180540736"
tonihei,2018-01-02 13:35:14,https://api.github.com/repos/google/ExoPlayer/git/commits/2bd704d8335292e36f0bcd84767282881c3df05b,2bd704d8335292e36f0bcd84767282881c3df05b,"Add missing override for reevaluateBuffer in FakeAdaptiveMediaPeriod.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180538379"
tonihei,2017-12-28 10:14:20,https://api.github.com/repos/google/ExoPlayer/git/commits/ad80784c19981eb95ad22550cd41f445b5b7d101,ad80784c19981eb95ad22550cd41f445b5b7d101,"Fix parameter order in DefaultLoadControl constructor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180254437"
erdemguven,2017-12-27 17:02:40,https://api.github.com/repos/google/ExoPlayer/git/commits/8f1ef6a29aeedfdf8934e85b9bf9089fe06c6dfb,8f1ef6a29aeedfdf8934e85b9bf9089fe06c6dfb,"Typo fixes

Issue:#3631

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=180197723"
tonihei,2017-12-22 16:39:21,https://api.github.com/repos/google/ExoPlayer/git/commits/f279f3c843ff9825b2e323d58feb0096a29e64a7,f279f3c843ff9825b2e323d58feb0096a29e64a7,"Replace FakeExoPlayer with real player running with fake clock.

This ensures that simulated playbacks always use the current player implementation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179929911"
tonihei,2017-12-22 15:43:36,https://api.github.com/repos/google/ExoPlayer/git/commits/410e614cfd1c42299bce27dbcbf4d695b2943511,410e614cfd1c42299bce27dbcbf4d695b2943511,"Run custom messages executed on playback thread immediately.

This ensures message order if multiple custom messages running on the
playback thread and direct player commands are called immedately after
each other.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179925852"
andrewlewis,2017-12-22 15:35:30,https://api.github.com/repos/google/ExoPlayer/git/commits/f2bb2d27be3cd34654d555970910bd8d459ff77a,f2bb2d27be3cd34654d555970910bd8d459ff77a,"Add support for extracting 32-bit float WAVE

Issue: #3379

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179925320"
tonihei,2017-12-22 14:36:46,https://api.github.com/repos/google/ExoPlayer/git/commits/61b9e846a86fde4b97b2cda27b3850ba475262b5,61b9e846a86fde4b97b2cda27b3850ba475262b5,"Allow setting a Clock for the main playback thread.

This allows to inject a FakeClock for tests. Other playback components
(e.g. some media sources) still use SystemClock but they can be amended
in the future if needed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179921889"
tonihei,2017-12-22 13:37:39,https://api.github.com/repos/google/ExoPlayer/git/commits/c6529344db8128314ff77980bf66275fa743cb27,c6529344db8128314ff77980bf66275fa743cb27,"Introduce Handler interface allowing to switch to other Handlers.

Especially this removes the need for the Clock interface to directly
implement Handler methods. Instead, we have a separate Handler interface
and the FakeClock is able to construct such a Handler.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179918255"
botaydotcom,2017-12-22 13:33:11,https://api.github.com/repos/google/ExoPlayer/git/commits/35d4cbf99f6dae832a5a8e0ff3f46e03474376e2,35d4cbf99f6dae832a5a8e0ff3f46e03474376e2,"Fix a bug that makes ClippingMediaSource not stop in some occasions.

If ClippingMediaSource contains a child MediaSource with embedded metadata
stream, and the embedded stream is being used, it can lead to
ClippingMediaSource not be able to stop after the clipping end point. The
reason being the metadata stream cannot read anymore sample, but it's also not
end of source at that point. This CL fix this by changing the condition to
check if the child stream cannot read anymore sample and it has read past the
clipping end point.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179918038"
ojw28,2017-12-22 13:28:52,https://api.github.com/repos/google/ExoPlayer/git/commits/6f4110f3f873c79e9369537e23f1b3479d0d5700,6f4110f3f873c79e9369537e23f1b3479d0d5700,"Fix buffer re-evaluation edge cases

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179917833"
tonihei,2017-12-22 11:25:13,https://api.github.com/repos/google/ExoPlayer/git/commits/7fb296dab98c007718227fc50ad47d689e3c40d1,7fb296dab98c007718227fc50ad47d689e3c40d1,"Initialize sample streams in FakeAdaptiveMediaPeriod.

This prevents NPE when release or stop is called before
tracks have been selected.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179911907"
tonihei,2017-12-20 15:26:49,https://api.github.com/repos/google/ExoPlayer/git/commits/ec71c05e8bef510e91996ed24273dcd9bfda90eb,ec71c05e8bef510e91996ed24273dcd9bfda90eb,"Add possiblity to send messages at playback position.

This adds options to ExoPlayer.sendMessages which allow to specify a window index
and position at which the message should be sent. Additionally, the options can be
configured to use a custom Handler for the messages and whether the message should
be repeated when playback reaches the same position again.

The internal player converts these window positions to period index and position
at the earliest possibility. The internal player also attempts to update these
when the source info is refreshed. A sorted list of pending posts is kept and the
player triggers these posts when the playback position moves over the specified
position.

Issue:#2189

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179683841"
tonihei,2017-12-19 17:22:59,https://api.github.com/repos/google/ExoPlayer/git/commits/6c2d1e1966625cd9132c0629649f8210764b205a,6c2d1e1966625cd9132c0629649f8210764b205a,"Add possiblity to send messages at playback position.

This adds options to ExoPlayer.sendMessages which allow to specify a window index
and position at which the message should be sent. Additionally, the options can be
configured to use a custom Handler for the messages and whether the message should
be repeated when playback reaches the same position again.

The internal player converts these window positions to period index and position
at the earliest possibility. The internal player also attempts to update these
when the source info is refreshed. A sorted list of pending posts is kept and the
player triggers these posts when the playback position moves over the specified
position.

Issue:#2189

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179563355"
ojw28,2017-12-18 12:44:58,https://api.github.com/repos/google/ExoPlayer/git/commits/539d291fce5928adbb638dea67dd415425ff2d10,539d291fce5928adbb638dea67dd415425ff2d10,"Fix some lint/analyze errors

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179406910"
ojw28,2017-12-15 20:38:05,https://api.github.com/repos/google/ExoPlayer/git/commits/16ad280817f68376d0017fdeb7cb16508571701a,16ad280817f68376d0017fdeb7cb16508571701a,"Bump version to 2.6.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179227114"
ojw28,2017-12-15 20:38:05,https://api.github.com/repos/google/ExoPlayer/git/commits/d9bee4d29c54eb12ca64b64e6f455add96d242ba,d9bee4d29c54eb12ca64b64e6f455add96d242ba,"Bump version to 2.6.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179227114"
ojw28,2017-12-15 19:59:36,https://api.github.com/repos/google/ExoPlayer/git/commits/3fae0b8e6e756c1210636071088dd1fe7e9c080e,3fae0b8e6e756c1210636071088dd1fe7e9c080e,"Fix analyze/lint errors

- Lint doesn't like a static import of something not available on
  the minimum API level.
- The method linked to in the Javadoc was incorrect (wrong signature).
  I couldn't really work out why it was there, so I got rid of it
  rather than updating.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179222587"
ojw28,2017-12-15 19:59:36,https://api.github.com/repos/google/ExoPlayer/git/commits/0287f13c0a10de2a97867125b185702e3eed6978,0287f13c0a10de2a97867125b185702e3eed6978,"Fix analyze/lint errors

- Lint doesn't like a static import of something not available on
  the minimum API level.
- The method linked to in the Javadoc was incorrect (wrong signature).
  I couldn't really work out why it was there, so I got rid of it
  rather than updating.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179222587"
tonihei,2017-12-14 16:38:02,https://api.github.com/repos/google/ExoPlayer/git/commits/1e36c76654004a00b9805d9bf6a365334f724c03,1e36c76654004a00b9805d9bf6a365334f724c03,"Allow to configure maximum buffer size in DefaultLoadControl.

This adds a parameter to configure a maximum buffer size in bytes. If left
at its default of C.LENGTH_UNSET, the target buffer is determined using a
overridable method based on the track selection. Also adding a parameter
to decide whether to prioritize time or size constraints.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179048554"
andrewlewis,2017-11-21 16:58:02,https://api.github.com/repos/google/ExoPlayer/git/commits/236df9a571890d0eed256782e5ed484652b12776,236df9a571890d0eed256782e5ed484652b12776,"Remove DefaultLoadControl buffer time state

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176515168"
andrewlewis,2017-12-15 11:06:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ab7503843c3c336b5df397a0a97ece2278da168d,ab7503843c3c336b5df397a0a97ece2278da168d,"Use playAd/stopAd to control position updates switching

Previously the ad/content progress updates were toggled based on whether the
player was playing ads or content. After this change, we switch based on
whether playAd/stopAd has been called instead.

This seems to resolve an issue where occasionally the player would get stuck at
the start of an ad, but as I don't have a root cause for that issue and it's
only sporadically reproducible I'm not certain this is a reliable fix.

Issue: #3525

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179169296"
ojw28,2017-12-15 10:47:56,https://api.github.com/repos/google/ExoPlayer/git/commits/52794e749d1ae214cbb9be1a2f7124ff1dd1e2d0,52794e749d1ae214cbb9be1a2f7124ff1dd1e2d0,"Fix typo

Issue #3594

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179167738"
andrewlewis,2017-12-15 10:47:56,https://api.github.com/repos/google/ExoPlayer/git/commits/04108eec48f85cc0bf1b5eecadba8b7a5127fdb2,04108eec48f85cc0bf1b5eecadba8b7a5127fdb2,"Fix condition for detecting that an ad has ended

onEnded was being called also for content finishing, as in this case the playing
ad index changed (from INDEX_UNSET to 0). Fix this test so we only detect ads
finishing.

Also add logging for onEnded callbacks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179167737"
andrewlewis,2017-12-15 10:17:30,https://api.github.com/repos/google/ExoPlayer/git/commits/b97ce44182ea61fc42584938c79a554c9891654c,b97ce44182ea61fc42584938c79a554c9891654c,"Pass -1 not C.TIME_UNSET when duration is unknown

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179165479"
ojw28,2017-12-14 16:27:32,https://api.github.com/repos/google/ExoPlayer/git/commits/403f773f8703f013b129ef02336b881678f1311f,403f773f8703f013b129ef02336b881678f1311f,"Add missing attrs to SimpleExoplayerView

They worked without being present in the declare-styleable,
but they need to be present for Android Studio auto-complete
to suggest them.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179047478"
ojw28,2017-12-13 16:32:28,https://api.github.com/repos/google/ExoPlayer/git/commits/67b94a72a55ba1e1e50665bbede907a0e3fc749e,67b94a72a55ba1e1e50665bbede907a0e3fc749e,"Update SingleSampleMediaSource with factory/listener changes

- Convert the Builder into a Factory
- Have it use MediaSourceEventListener
- Also made some misc related fixes to other sources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178906521"
tonihei,2017-12-13 16:09:21,https://api.github.com/repos/google/ExoPlayer/git/commits/8a6c375c53005fec5de6790bb1109f3937363632,8a6c375c53005fec5de6790bb1109f3937363632,"Check if native libraries are available in tests.

If the library is not available, no tracks can be selected and the
tests silently run through by immediately switching to ended state
without error.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178904347"
ojw28,2017-12-13 10:16:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ae514b68ff3c93e09972d6410ab2b64cffe62684,ae514b68ff3c93e09972d6410ab2b64cffe62684,"Update release notes for current 2.6.1 feature set

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178877884"
ojw28,2017-12-13 07:43:16,https://api.github.com/repos/google/ExoPlayer/git/commits/65ccff24483a60bb93ac31255b062803d9c60f86,65ccff24483a60bb93ac31255b062803d9c60f86,"Update release notes to reflect builder -> factory change

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178866131"
marcbaechinger,2017-12-12 19:05:57,https://api.github.com/repos/google/ExoPlayer/git/commits/bf9a919005a0968909f565e5a6840d8eb4b12e08,bf9a919005a0968909f565e5a6840d8eb4b12e08,"Propagate extras from queue item to metadata item.

norelnotes=true

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178785377"
botaydotcom,2017-12-15 11:42:17,https://api.github.com/repos/google/ExoPlayer/git/commits/bb8c60879517280a1fc10601ed871f377c1f5138,bb8c60879517280a1fc10601ed871f377c1f5138,"Make updating showTimeoutMs takes effect immediately.

Update PlaybackControlView and SimpleExoPlayerView so when showTimeoutMs is set
while the controller is shown, the new timeout takes effect immediately.

GitHub: #3554

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179171727"
andrewlewis,2017-12-15 11:06:10,https://api.github.com/repos/google/ExoPlayer/git/commits/8e35bffcc3f6a1bbadf94b748c7ea7e215874e8b,8e35bffcc3f6a1bbadf94b748c7ea7e215874e8b,"Use playAd/stopAd to control position updates switching

Previously the ad/content progress updates were toggled based on whether the
player was playing ads or content. After this change, we switch based on
whether playAd/stopAd has been called instead.

This seems to resolve an issue where occasionally the player would get stuck at
the start of an ad, but as I don't have a root cause for that issue and it's
only sporadically reproducible I'm not certain this is a reliable fix.

Issue: #3525

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179169296"
ojw28,2017-12-15 10:47:56,https://api.github.com/repos/google/ExoPlayer/git/commits/3cc08d0ea3d28c88b2aef7c650bbe5f85a67c712,3cc08d0ea3d28c88b2aef7c650bbe5f85a67c712,"Fix typo

Issue #3594

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179167738"
andrewlewis,2017-12-15 10:47:56,https://api.github.com/repos/google/ExoPlayer/git/commits/e913ede77e65cfbea63426ef35005c740048e783,e913ede77e65cfbea63426ef35005c740048e783,"Fix condition for detecting that an ad has ended

onEnded was being called also for content finishing, as in this case the playing
ad index changed (from INDEX_UNSET to 0). Fix this test so we only detect ads
finishing.

Also add logging for onEnded callbacks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179167737"
andrewlewis,2017-12-15 10:17:30,https://api.github.com/repos/google/ExoPlayer/git/commits/65360760c2fba971de5e8433f94b0448eb22f41f,65360760c2fba971de5e8433f94b0448eb22f41f,"Pass -1 not C.TIME_UNSET when duration is unknown

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179165479"
tonihei,2017-12-14 16:38:02,https://api.github.com/repos/google/ExoPlayer/git/commits/edbb9795517363e486b203e0dd5e0dd3a5e41e53,edbb9795517363e486b203e0dd5e0dd3a5e41e53,"Allow to configure maximum buffer size in DefaultLoadControl.

This adds a parameter to configure a maximum buffer size in bytes. If left
at its default of C.LENGTH_UNSET, the target buffer is determined using a
overridable method based on the track selection. Also adding a parameter
to decide whether to prioritize time or size constraints.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179048554"
ojw28,2017-12-14 16:27:32,https://api.github.com/repos/google/ExoPlayer/git/commits/435686f96923c56212cab540c0940f39ce180a18,435686f96923c56212cab540c0940f39ce180a18,"Add missing attrs to SimpleExoplayerView

They worked without being present in the declare-styleable,
but they need to be present for Android Studio auto-complete
to suggest them.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179047478"
AquilesCanta,2017-12-14 14:54:12,https://api.github.com/repos/google/ExoPlayer/git/commits/0ccf816a5caabb99484cfedc23df9a703edfc68e,0ccf816a5caabb99484cfedc23df9a703edfc68e,"Add a bitmask for text tracks' selection flags in DefaultTrackSelector

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179039563"
ojw28,2017-12-14 13:18:07,https://api.github.com/repos/google/ExoPlayer/git/commits/37a275f67e85f6077548bb5d8894fb958e81923c,37a275f67e85f6077548bb5d8894fb958e81923c,"Enable SeekParameters functionality for ExtractorMediaSource

Also fix ClippingMediaSource to consider the start position an
artificial key-frame, and to properly offset the value returned
by getAdjustedSeekPositionUs.

Issue: #2882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179032243"
tonihei,2017-12-14 12:25:51,https://api.github.com/repos/google/ExoPlayer/git/commits/a17375b7d3a5b95751ad15d4cae4a80081149c8c,a17375b7d3a5b95751ad15d4cae4a80081149c8c,"Resend playback info update when skipping very short periods.

Skipping short periods in a while loop is conceptually a new operation
and thus we need to send out the updated playback info in between for
the listeners to receive multiple period transition discontinuities.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=179027334"
ojw28,2017-12-13 17:54:25,https://api.github.com/repos/google/ExoPlayer/git/commits/073c92ed3618030cb7a5cb3901b6026b6f1a1e0c,073c92ed3618030cb7a5cb3901b6026b6f1a1e0c,"Don't send playback info updates when released.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178916145"
tonihei,2017-12-13 16:37:27,https://api.github.com/repos/google/ExoPlayer/git/commits/2cbf0ef0ab978979988fbe35251e644df2faf6a6,2cbf0ef0ab978979988fbe35251e644df2faf6a6,"Move playback state, isLoading, and track selector result to PlaybackInfo.

This is a no-op change replacing the local variables in ExoPlayerImplInternal
with the new ones in PlaybackInfo.

***
Use playbackState, isLoading and trackSelectorResult from playbackInfo in ExoPlayerImpl.

***
Move duplicated listener notification in ExoPlayerImpl to new method.

Also split reset method in one parts which creates the new playback info
and one part which notifies the listeners. The increment of the pending
operation counter needs to happen in between.

***
Use only one pending operation counter in ExoPlayerImpl.

This also allows to move onSeekProcessed into the notification chain.

***
Replace playback info changing messages to ExoPlayerImpl by single message type.

As they are all handled in the same way, they can be summarized to one message.

***
Only send playback info change notifications once per playback thread message.

This ensures that all concurrent changes actually reach ExoPlayerImpl concurrently.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178907165"
ojw28,2017-12-13 16:32:28,https://api.github.com/repos/google/ExoPlayer/git/commits/a5cd0b87bc504593771b14926f02e84c71d9b490,a5cd0b87bc504593771b14926f02e84c71d9b490,"Update SingleSampleMediaSource with factory/listener changes

- Convert the Builder into a Factory
- Have it use MediaSourceEventListener
- Also made some misc related fixes to other sources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178906521"
tonihei,2017-12-13 16:09:21,https://api.github.com/repos/google/ExoPlayer/git/commits/106e69b3fca7a1e53ad367897d64e9d3b016c7c0,106e69b3fca7a1e53ad367897d64e9d3b016c7c0,"Check if native libraries are available in tests.

If the library is not available, no tracks can be selected and the
tests silently run through by immediately switching to ended state
without error.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178904347"
ojw28,2017-12-13 10:16:15,https://api.github.com/repos/google/ExoPlayer/git/commits/a092262d0b3f3852affb83253574a2abd8b4998c,a092262d0b3f3852affb83253574a2abd8b4998c,"Update release notes for current 2.6.1 feature set

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178877884"
tonihei,2017-12-13 09:59:28,https://api.github.com/repos/google/ExoPlayer/git/commits/318618d7a2412facf1274bd166608b6c2f8f0b7d,318618d7a2412facf1274bd166608b6c2f8f0b7d,"Fix seek/prepare/stop acks when exception is thrown.

1. The player doesn't acknowledge phantom stops when an exception is thrown anymore.
2. It also makes sure it doesn't reset the pendingPrepareCount unless it's actually
immediately acknowledging these prepares.
3. It ensures a seek is acknowledged even though an exception is thrown during seeking.

Added tests (which previously failed) for all three cases.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178876362"
ojw28,2017-12-13 07:43:16,https://api.github.com/repos/google/ExoPlayer/git/commits/6c4bb2cdec71ecfae08af6bf2104e4d9e6d0c780,6c4bb2cdec71ecfae08af6bf2104e4d9e6d0c780,"Update release notes to reflect builder -> factory change

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178866131"
marcbaechinger,2017-12-12 19:05:57,https://api.github.com/repos/google/ExoPlayer/git/commits/f3dc075cabe720002580581463cebf165f1a9ff8,f3dc075cabe720002580581463cebf165f1a9ff8,"Propagate extras from queue item to metadata item.

norelnotes=true

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178785377"
andrewlewis,2017-12-12 17:03:15,https://api.github.com/repos/google/ExoPlayer/git/commits/b223988e30c9f176de8a156c9ed49e5cef124b80,b223988e30c9f176de8a156c9ed49e5cef124b80,"Add Builder for ImaAdsLoader and allow early requestAds

Also fix propagation of ad errors that occur when no player
is attached.

Issue: #3548
Issue: #3556

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178767997"
andrewlewis,2017-12-11 15:19:53,https://api.github.com/repos/google/ExoPlayer/git/commits/7a089c3a293e32642e8c81f4ba6dbb1749507619,7a089c3a293e32642e8c81f4ba6dbb1749507619,"Support non-extractor ads in AdsMediaSource and demo apps

Issue: #3302

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178615074"
andrewlewis,2017-12-11 13:23:00,https://api.github.com/repos/google/ExoPlayer/git/commits/f31696b79a608328454f1ae20ef8801aba91dfd0,f31696b79a608328454f1ae20ef8801aba91dfd0,"Make ExtractorMediaSource.Builder a factory for ExtractorMediaSources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178605481"
andrewlewis,2017-12-11 13:08:01,https://api.github.com/repos/google/ExoPlayer/git/commits/babd5750e3411cf78ea597dbbe92f08ecdd54b59,babd5750e3411cf78ea597dbbe92f08ecdd54b59,"Use surfaceless context in DummySurface, if available

Issue: #3558

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178604607"
andrewlewis,2017-12-08 17:07:55,https://api.github.com/repos/google/ExoPlayer/git/commits/42b612a49f801f95bfa72b81cafef90329ac2737,42b612a49f801f95bfa72b81cafef90329ac2737,"Make HlsMediaSource.Builder a factory for HlsMediaSources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178384204"
andrewlewis,2017-12-08 16:32:46,https://api.github.com/repos/google/ExoPlayer/git/commits/4c71d6361ddb322f53aca12be0f333a8e287abfe,4c71d6361ddb322f53aca12be0f333a8e287abfe,"Make SsMediaSource.Builder a factory for SsMediaSources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178380856"
andrewlewis,2017-12-08 15:57:06,https://api.github.com/repos/google/ExoPlayer/git/commits/a0d42b53b734ec8d533ef56681ffad9453903d59,a0d42b53b734ec8d533ef56681ffad9453903d59,"Make DashMediaSource.Builder a factory for DashMediaSources

This is in preparation for supporting non-extractor MediaSources for ads in
AdsMediaSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178377627"
andrewlewis,2017-12-08 14:51:51,https://api.github.com/repos/google/ExoPlayer/git/commits/3e9c86fcb5826fc3fab0c94bfae317f50ecb0477,3e9c86fcb5826fc3fab0c94bfae317f50ecb0477,"Add an option to turn off hiding controls during ads

Issue: #3532

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178372763"
ojw28,2017-12-08 12:44:55,https://api.github.com/repos/google/ExoPlayer/git/commits/88d012bad0fbf482629d8a07d8d221fe735c9628,88d012bad0fbf482629d8a07d8d221fe735c9628,"Treat captions that are wider than expected as middle aligned

Issue: #3534

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178364353"
andrewlewis,2017-12-07 14:38:39,https://api.github.com/repos/google/ExoPlayer/git/commits/a99295b364d86d9113addc34ff5ff503343f9d40,a99295b364d86d9113addc34ff5ff503343f9d40,"Fix ad loading when there is no preroll

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178234009"
ojw28,2017-12-07 11:06:54,https://api.github.com/repos/google/ExoPlayer/git/commits/f677d1309d7971d7f7bbdd07e5ca412288ea4c3d,f677d1309d7971d7f7bbdd07e5ca412288ea4c3d,"Blacklist Moto Z from using secure DummySurface.

Issue: #3215

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178218535"
andrewlewis,2017-12-07 11:05:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a4a02f74498c86e65b95c5961b8c794ef4f53f2a,a4a02f74498c86e65b95c5961b8c794ef4f53f2a,"Skip ads before the initial player position

Issue: #3527

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178218391"
andrewlewis,2017-12-07 10:45:16,https://api.github.com/repos/google/ExoPlayer/git/commits/e7d4524c27820e8bb0b9954b5113364b34eca0a9,e7d4524c27820e8bb0b9954b5113364b34eca0a9,"Use mappedTrackInfo local

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178216750"
ojw28,2017-12-06 18:33:23,https://api.github.com/repos/google/ExoPlayer/git/commits/39e8f07566a61c4d45d5c8f4003f03d5440ca549,39e8f07566a61c4d45d5c8f4003f03d5440ca549,"Add missing Nullable annotation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178117289"
ojw28,2017-12-05 13:19:48,https://api.github.com/repos/google/ExoPlayer/git/commits/02e32a183881490b581528407965d8de4f6469f6,02e32a183881490b581528407965d8de4f6469f6,"Hide subtitles when switching player in SimpleExoPlayerView

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177941993"
ojw28,2017-12-05 12:21:18,https://api.github.com/repos/google/ExoPlayer/git/commits/9cb0c2f70292c65e0f430263e210e5ea48c11878,9cb0c2f70292c65e0f430263e210e5ea48c11878,"Remove self @link

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177938212"
andrewlewis,2017-12-05 11:53:01,https://api.github.com/repos/google/ExoPlayer/git/commits/3c0bb7263b73c0472a5274f545b9be8b4f086cca,3c0bb7263b73c0472a5274f545b9be8b4f086cca,"Invoke onLoadCanceled/Completed for ExtractorMediaSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177936271"
andrewlewis,2017-12-05 08:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/82122b9f3bf994ab326be6dd026b6b54f323c527,82122b9f3bf994ab326be6dd026b6b54f323c527,"Make one ad request in ImaAdsLoader

This fixes an issue where quickly detaching and reattaching the player might
cause ads to be requested multiple times with both responses handled.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177922167"
ojw28,2017-12-04 15:35:50,https://api.github.com/repos/google/ExoPlayer/git/commits/13a7037c82a91290757862e5704920e6f89d6392,13a7037c82a91290757862e5704920e6f89d6392,"Fix playback of FLV live streams with no audio track

Issue: #3188

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177811487"
andrewlewis,2017-12-04 15:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/bc7bfb4e7cccdbdb203e3e3af1a07c32e3b47d51,bc7bfb4e7cccdbdb203e3e3af1a07c32e3b47d51,"Fix setting supported ad MIME types without preloading

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177810991"
ojw28,2017-12-04 14:56:04,https://api.github.com/repos/google/ExoPlayer/git/commits/29f6351b192b192618bff721f63fc8c14669ea9a,29f6351b192b192618bff721f63fc8c14669ea9a,"Support timezone offsets in ISO8601 timestamps

Issue: #3524

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177808106"
ojw28,2017-12-04 14:08:33,https://api.github.com/repos/google/ExoPlayer/git/commits/a8298b4c563b7df7d80125882dd358a73d7a688d,a8298b4c563b7df7d80125882dd358a73d7a688d,"Tentative fix for roll-up row count

Issue: #3513

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177804505"
ojw28,2017-12-12 21:40:58,https://api.github.com/repos/google/ExoPlayer/git/commits/10b24be6f089b77713e5f1b1fc1c431aa2b83599,10b24be6f089b77713e5f1b1fc1c431aa2b83599,Fix build
andrewlewis,2017-12-04 10:06:42,https://api.github.com/repos/google/ExoPlayer/git/commits/e759462af8b2d6df4ff2f378cf216e409ae8e7b2,e759462af8b2d6df4ff2f378cf216e409ae8e7b2,"Update internal usages of deprecated AdaptiveMediaSourceEventListener

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177786580"
andrewlewis,2017-12-04 09:18:58,https://api.github.com/repos/google/ExoPlayer/git/commits/393a7625630e50dcbb84b7c653d4d61f1168725e,393a7625630e50dcbb84b7c653d4d61f1168725e,"Use AdaptiveMediaSourceEventListener for ExtractorMediaSource

This is a step towards harmonizing the MediaSource Builders and (potentially)
providing MediaSource factories.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177783157"
ojw28,2017-11-30 16:36:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b61d09c4166c798bd242cb3fa573de77b579ff88,b61d09c4166c798bd242cb3fa573de77b579ff88,"Fix mp3 extractor test

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177458840"
ojw28,2017-11-30 15:20:45,https://api.github.com/repos/google/ExoPlayer/git/commits/0ea8c8bfa0db99fb2322e5ed2b3c9fb66c2bf9f7,0ea8c8bfa0db99fb2322e5ed2b3c9fb66c2bf9f7,"Fix VBRI and XING seekers

- Remove skipping of the VBRI/XING frame before calculating position
  offsets. This was incorrect. Instead, a constraint is used to ensure
  we don't return positions within these frames, the difference being
  that the constraint adjusts only positions that would fall within
  the frames, where-as the previous approach shifted positions through
  the whole stream.
- Excluded last entry in the VBRI table because it has an invalid
  position (the length of the stream).
- Give variables in XingSeeker descriptive names.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177451295"
andrewlewis,2017-11-30 13:39:50,https://api.github.com/repos/google/ExoPlayer/git/commits/022b85a625468235075de679cc19374fca823d8a,022b85a625468235075de679cc19374fca823d8a,"Move resetting audio processors to initialize()

The set of active audio processors was only updated on reconfiguration and when
draining playback parameters completed. Draining playback parameters are cleared
in reset(), so if parameters were set while paused then the sink was quickly
reset, without draining completing, the set of active audio processors wouldn't
be updated. This means that a switch to or from speed or pitch = 1 would not be
handled correctly if made while paused and followed by a seek.

Move resetting active audio processors from configure (where if the active audio
processors were reset we'd always initialize a new AudioTrack) to initialize().

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177442098"
ojw28,2017-11-30 13:34:51,https://api.github.com/repos/google/ExoPlayer/git/commits/8fbc2a5c9b0f9904eef67fb77792e3b42cf904b3,8fbc2a5c9b0f9904eef67fb77792e3b42cf904b3,"Snap to frame boundary in ConstantBitrateSeeker

- This change snaps the seek position for constant bitrate MP3s
  to the nearest frame boundary, avoiding the need to skip one
  byte at a time to re-synchronize (this may still happen if the
  MP3 does not really have fixed size frames).
- Tweaked both ConstantBitrateSeeker and WavHeader to ensure the
  returned positions are valid.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177441798"
andrewlewis,2017-11-30 10:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/4e8b9282f518ea2568290c1a9b8655b0b8ca1d92,4e8b9282f518ea2568290c1a9b8655b0b8ca1d92,"Add a notice that NDK <= version 15c is required for VP9

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177430827"
andrewlewis,2017-11-30 09:27:07,https://api.github.com/repos/google/ExoPlayer/git/commits/315a6c3558024038f3ca736844cb67534ab2806f,315a6c3558024038f3ca736844cb67534ab2806f,"Update getPosition(0) positions for FragmentedMp4Extractor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177424314"
andrewlewis,2017-11-30 09:25:28,https://api.github.com/repos/google/ExoPlayer/git/commits/9526e8586adedc8022abf1b4b30883efe3c69ea5,9526e8586adedc8022abf1b4b30883efe3c69ea5,"Use a MediaSource factory internally in AdsMediaSource

Support ad MediaSources that aren't prepared immediately by using
DeferredMediaPeriod, moved up from DynamicConcatenatingMediaSource.

In a later change the new interfaces will be made public so that apps
can provide their own MediaSource factories.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177424172"
andrewlewis,2017-11-30 08:33:10,https://api.github.com/repos/google/ExoPlayer/git/commits/2567bf51fc10ee8466d4aefbe062f5c01e5add15,2567bf51fc10ee8466d4aefbe062f5c01e5add15,"Log load errors from AdsMediaSource in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177419981"
ojw28,2017-11-29 17:09:17,https://api.github.com/repos/google/ExoPlayer/git/commits/800cfeea3d18d2f7d1e8198c2a483460413fa08f,800cfeea3d18d2f7d1e8198c2a483460413fa08f,"Optimize seeking for unseekable SeekMaps

- Avoid re-downloading data prior to the first mdat box when
  seeking back to the start of an unseekable FMP4.
- Avoid re-downloading data prior to the first frame for
  constant bitrate MP3.
- Update SeekMap.getPosition documentation to allow a non-zero
  position for the unseekable case. Note that XingSeeker was
  already returning a non-zero position if unseekable.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177317256"
ojw28,2017-11-29 16:53:27,https://api.github.com/repos/google/ExoPlayer/git/commits/91b324f6b970c8b036289872e03841ba1754ab64,91b324f6b970c8b036289872e03841ba1754ab64,"Fix weird XingSeeker indexing

There are still things broken about the seeker, but this
cleans up some of the weird bits.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177315136"
tonihei,2017-11-28 18:45:38,https://api.github.com/repos/google/ExoPlayer/git/commits/63dbf56b6c0bcd69d8e218a7aa55e3214c94b130,63dbf56b6c0bcd69d8e218a7aa55e3214c94b130,"Allow multiple video and audio debug listeners in SimpleExoPlayer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177184331"
andrewlewis,2017-11-28 17:53:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c12349e2c937ed6bd9fcea6b9ac47b9031f62bda,c12349e2c937ed6bd9fcea6b9ac47b9031f62bda,"Allow setting supported formats on AdsLoaders

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177175377"
ojw28,2017-11-28 17:43:08,https://api.github.com/repos/google/ExoPlayer/git/commits/9eed1150e083a224a732506ed9db66bd3699f989,9eed1150e083a224a732506ed9db66bd3699f989,"Clean up some extrator SeekMap implementations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177173618"
AquilesCanta,2017-11-28 17:22:32,https://api.github.com/repos/google/ExoPlayer/git/commits/a8d4ad94f4011ec310e3d3359d06d405bd9ef37e,a8d4ad94f4011ec310e3d3359d06d405bd9ef37e,"Fix DefaultTrackSelector#Parameter withSelectUndeterminedTextLanguage

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177170994"
ojw28,2017-11-28 16:40:21,https://api.github.com/repos/google/ExoPlayer/git/commits/0e0300b802bc10e210b0e36db18ecf35ecd30af2,0e0300b802bc10e210b0e36db18ecf35ecd30af2,"Extractor cleanup

- Align class summary Javadoc
- Fix ErrorProne + Style warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177165593"
ojw28,2017-11-28 11:58:30,https://api.github.com/repos/google/ExoPlayer/git/commits/7a031980281555edd99d353469a7fdc5ea7fec22,7a031980281555edd99d353469a7fdc5ea7fec22,"Add some clarifications to MediaSource documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177141094"
ojw28,2017-11-27 21:32:44,https://api.github.com/repos/google/ExoPlayer/git/commits/1d96492c1e370cf5c0792c987d106ea579285856,1d96492c1e370cf5c0792c987d106ea579285856,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177063576"
pstambrecht,2017-12-04 14:52:12,https://api.github.com/repos/google/ExoPlayer/git/commits/ee05b60a19ef9bb1e43d9e7d337a41552f3f9f78,ee05b60a19ef9bb1e43d9e7d337a41552f3f9f78,Iso8601Parser improved to be able to parse timestamp offsets from UTC
pstambrecht,2017-12-04 14:45:54,https://api.github.com/repos/google/ExoPlayer/git/commits/e175bf9e4271bae6c85bc49ff2d51897660de5c2,e175bf9e4271bae6c85bc49ff2d51897660de5c2,Iso8601Parser improved to be able to parse timestamp offsets from UTC
ojw28,2017-11-28 17:02:04,https://api.github.com/repos/google/ExoPlayer/git/commits/d3fd2d1b872d2584453a60b5aaf3fe8ef502f48e,d3fd2d1b872d2584453a60b5aaf3fe8ef502f48e,Update ISSUE_TEMPLATE
ojw28,2017-11-27 20:42:53,https://api.github.com/repos/google/ExoPlayer/git/commits/23a7f2d994007f59bd88106e35db45b93f78fcb5,23a7f2d994007f59bd88106e35db45b93f78fcb5,"Force wrapping of HLS ID3 timestamp

Merge of https://github.com/google/ExoPlayer/pull/3495

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177057183"
tonihei,2017-11-27 15:02:33,https://api.github.com/repos/google/ExoPlayer/git/commits/1861aea2b3159537e11d7e5329210dede110e048,1861aea2b3159537e11d7e5329210dede110e048,"Add throws IllegalSeekPositionException doc to seekTo(windowIndex, positionMs).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177011497"
AquilesCanta,2017-11-27 14:29:47,https://api.github.com/repos/google/ExoPlayer/git/commits/c1c892f5ec5546257d1da1b125fc4c3466daede2,c1c892f5ec5546257d1da1b125fc4c3466daede2,"Support undefined text track language when preferred is not available

Also slightly improve language normalization/documentation.

For this CL, it is assumed that null and ""und"" languages are different
entities. Once we fully tackle language tag normalization, we can decide
whether to normalize the ""undefined"" language.

Issue:#2867
Issue:#2980

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177008509"
tonihei,2017-11-27 11:57:45,https://api.github.com/repos/google/ExoPlayer/git/commits/ce557b11fcec3515fdd4315ab8deb5001e379f48,ce557b11fcec3515fdd4315ab8deb5001e379f48,"Add final to boolean used within Runnable.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176997767"
tonihei,2017-11-27 11:45:24,https://api.github.com/repos/google/ExoPlayer/git/commits/86d91a59a0eb15d19952e01f09038d6f050874d0,86d91a59a0eb15d19952e01f09038d6f050874d0,"Remove race condition when stopping FakeExoPlayer.

A message to stop the playback and to quit the playback thread was posted in release().
The stop message removed all other already queued messages which might include
the second message to quit the thread. That led to infinite waiting in the
release method because the playback thread never got the quit signal.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176997104"
andrewlewis,2017-11-24 18:00:44,https://api.github.com/repos/google/ExoPlayer/git/commits/6c1f562230f87bd9882a069d2f1b92fd00d31e9a,6c1f562230f87bd9882a069d2f1b92fd00d31e9a,"Switch from currentTimeMillis to elapsedRealtime

currentTimeMillis is not guaranteed to be monotonic and elapsedRealtime is
recommend for interval timing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176853118"
andrewlewis,2017-11-24 10:20:35,https://api.github.com/repos/google/ExoPlayer/git/commits/b19512fb20e5f832066067480d9c9151e62ba964,b19512fb20e5f832066067480d9c9151e62ba964,"Propagate the player error to ExoPlayerTestRunner

In a test run where no exceptions were thrown on the main thread and the test
did not time out, exceptions from onPlayerError were not correctly propagated to
the test thread (handleException would be called with null).

Fix ExoPlayerTestRunner.onPlayerError to propagate the actual exception from the
player.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176825907"
ojw28,2017-11-22 21:22:41,https://api.github.com/repos/google/ExoPlayer/git/commits/d5b79f3a43ec2b996c71736b4b31fa8c34b30a84,d5b79f3a43ec2b996c71736b4b31fa8c34b30a84,"Update gradle wrapper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176693785"
botaydotcom,2017-11-21 18:16:50,https://api.github.com/repos/google/ExoPlayer/git/commits/f2a78adc21a6a221b37ae8bd467a2a84bffbb9dc,f2a78adc21a6a221b37ae8bd467a2a84bffbb9dc,"Parse DASH manifest's publish time.

Parse DASH manifest's publishTime node as defined by ISO/IEC 23009-1:2014,
section 5.3.1.2.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176525922"
ojw28,2017-11-20 16:50:09,https://api.github.com/repos/google/ExoPlayer/git/commits/fa5cc5be5104094a7368cdbc039351cc1003f418,fa5cc5be5104094a7368cdbc039351cc1003f418,"Bump target API level to 27

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176366693"
ojw28,2017-11-20 16:48:10,https://api.github.com/repos/google/ExoPlayer/git/commits/5c0e1f3e8aa057d419d87db403bf7edaf5438563,5c0e1f3e8aa057d419d87db403bf7edaf5438563,"Use MediaSourceTestRunner in additional source tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176366471"
AquilesCanta,2017-11-20 14:22:54,https://api.github.com/repos/google/ExoPlayer/git/commits/790316688657c5d9b7fa8a2a6bce58a1ee833f39,790316688657c5d9b7fa8a2a6bce58a1ee833f39,"Allow human readable strings as DRM intent extras.

Issue:#3478

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176351086"
andrewlewis,2017-11-20 12:32:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c3b92f84562aa55dc79d764f6fa4cd2e827f39e7,c3b92f84562aa55dc79d764f6fa4cd2e827f39e7,"Add support for Dolby Atmos

Issue: #2465

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176341309"
tonihei,2017-11-20 12:20:52,https://api.github.com/repos/google/ExoPlayer/git/commits/82ce68009cf84e681272cd628289b91e06af0097,82ce68009cf84e681272cd628289b91e06af0097,"Move MockitoUtils to testutils and use it for all Mockito set-ups.

In particular this allows to have the workaround for
https://code.google.com/p/dexmaker/issues/detail?id=2 in one place only.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176340526"
AquilesCanta,2017-11-20 11:17:29,https://api.github.com/repos/google/ExoPlayer/git/commits/2ad87f4f5b08a8f201b2ed750ac028933aaf46ff,2ad87f4f5b08a8f201b2ed750ac028933aaf46ff,"Add time unit and javadocs to fields in DashManifest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176335667"
AquilesCanta,2017-11-20 10:49:39,https://api.github.com/repos/google/ExoPlayer/git/commits/dc425a942c3cc6181113a3aa0549665af64825ea,dc425a942c3cc6181113a3aa0549665af64825ea,"Use consistent case for sideloaded

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176333544"
botaydotcom,2017-11-20 10:41:38,https://api.github.com/repos/google/ExoPlayer/git/commits/09f3055badc4ac99cd3a7639cef9a099891483a9,09f3055badc4ac99cd3a7639cef9a099891483a9,"Add Builder to SingleSampleMediaSource.

Add Builder pattern to SingleSampleMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176332964"
ojw28,2017-11-17 17:22:17,https://api.github.com/repos/google/ExoPlayer/git/commits/1b7c950d1e6639e2a2f10140598d6646c8257122,1b7c950d1e6639e2a2f10140598d6646c8257122,"Add MediaSourceTestRunner for MediaSource tests.

- MediaSourceTestRunner aims to encapsulate some of the logic
  currently used in DynamicConcatenatingMediaSourceTest, so it
  can be re-used for testing other MediaSource implementations.
- The change also fixes DynamicConcatenatingMediaSourceTest to
  execute calls on the correct threads, and to release handler
  threads at the end of each test.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176117535"
ojw28,2017-11-17 17:18:06,https://api.github.com/repos/google/ExoPlayer/git/commits/14299e0643cca287e3c4920c258ef9340e7ba38f,14299e0643cca287e3c4920c258ef9340e7ba38f,"Simplify LoopingMediaSourceTest setup

This test seems to obtain a timeline from a prepared
FakeMediaSource, but that's identical to the timeline
passed into that source to start with :).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176117133"
tonihei,2017-11-17 13:26:58,https://api.github.com/repos/google/ExoPlayer/git/commits/bb4be4314a942998e895114e471bd38c3e2ce62e,bb4be4314a942998e895114e471bd38c3e2ce62e,"Add simplified FakeTimeline constructor.

This is helpful for tests which don't care about detailled timeline set-ups
besides the number of windows.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176097369"
botaydotcom,2017-11-17 11:08:55,https://api.github.com/repos/google/ExoPlayer/git/commits/1f70d3cdd7b8487c8754f303932cd16a9e7c2e42,1f70d3cdd7b8487c8754f303932cd16a9e7c2e42,"Add Builder to ExtractorMediaSource.

Add Builder pattern to ExtractorMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176088810"
ojw28,2017-11-16 13:08:44,https://api.github.com/repos/google/ExoPlayer/git/commits/f5a3a277263aaa05057ac06100ad8d997ce7fbf2,f5a3a277263aaa05057ac06100ad8d997ce7fbf2,"Deduplicate ExtractorMediaPeriod discontinuity reporting

This change makes sure progress is being made before reporting
a discontinuity. Else in cases like having no network and
playing a live stream, we allow the discontinuity to be read
each time an internal retry occurs, meaning it gets read
repeatedly. This does no harm, but is noisy and unnecessary.

We should also not allow skipping whilst there is a pending
reset or discontinuity notification, just like we don't allow
reads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175953064"
andrewlewis,2017-11-16 10:03:02,https://api.github.com/repos/google/ExoPlayer/git/commits/820a4459448176a9b06a64983127d92a52b4e0b3,820a4459448176a9b06a64983127d92a52b4e0b3,"Add support for float output for FfmpegAudioRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175940553"
andrewlewis,2017-11-16 09:07:51,https://api.github.com/repos/google/ExoPlayer/git/commits/108900cf5292211e2dc54c1b22ba1fd46cf63ea0,108900cf5292211e2dc54c1b22ba1fd46cf63ea0,"Add support for float output in DefaultAudioSink

Also switch from using MIME types to C.ENCODING_* encodings in DefaultAudioSink.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175936872"
andrewlewis,2017-11-15 17:46:28,https://api.github.com/repos/google/ExoPlayer/git/commits/d49fc54968b33c027ca205597a81c1f36cf110ec,d49fc54968b33c027ca205597a81c1f36cf110ec,"Use ArrayDeque for playback parameters checkpoints

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175837754"
botaydotcom,2017-11-15 11:08:11,https://api.github.com/repos/google/ExoPlayer/git/commits/57868092eaec2cb02ba6bd74407d0621ec08e734,57868092eaec2cb02ba6bd74407d0621ec08e734,"Add Builder pattern to HlsMediaSource.

Add Builder pattern to HlsMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175803853"
ojw28,2017-11-15 10:19:48,https://api.github.com/repos/google/ExoPlayer/git/commits/4bb5cda5f1c48075675c45ba49ff29057ab19f8f,4bb5cda5f1c48075675c45ba49ff29057ab19f8f,"Some test cleanup

The purpose of this change isn't to fix anything. It's just to
simplify things a little bit. There will be following CLs that
make some changes to get things onto correct threads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175800354"
tonihei,2017-11-14 16:06:50,https://api.github.com/repos/google/ExoPlayer/git/commits/76ba1890aa48202d46cbbeccc7b69286e272d263,76ba1890aa48202d46cbbeccc7b69286e272d263,"Add method to FakeMediaSource to trigger source info refresh.

This allows to remove the LazyMediaSource used within
DynamicConcatenatingMediaSourceTest and also allows to write test which
simulates dynamic timeline or manifest updates.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175680371"
tonihei,2017-11-14 14:17:02,https://api.github.com/repos/google/ExoPlayer/git/commits/eea8cd169c76b52bcf303c137ceab60e6773c47f,eea8cd169c76b52bcf303c137ceab60e6773c47f,"Replaced the duplicated EMPTY track group array with the one already defined
in TrackGroupArray.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175670266"
tonihei,2017-11-14 12:08:38,https://api.github.com/repos/google/ExoPlayer/git/commits/77b48691aa0f5fc5218bfc9cb3d6cff4c8b06179,77b48691aa0f5fc5218bfc9cb3d6cff4c8b06179,"Suppress reference equality warning in EventLogger.

We deliberately compare the track group returned by the track selection
with the track group in the parameter to check if the track selection is
referring to this particular track group.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175660909"
botaydotcom,2017-11-14 11:48:47,https://api.github.com/repos/google/ExoPlayer/git/commits/8d81698d2ac2c9099ccb2c9c7339b96b9b0370d1,8d81698d2ac2c9099ccb2c9c7339b96b9b0370d1,"Continue adding Builder to MediaSource.

Add Builder pattern to SsMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175659618"
AquilesCanta,2017-11-13 21:18:42,https://api.github.com/repos/google/ExoPlayer/git/commits/25dd8aa1f8c173563d114e5a55f9c08cbd60b840,25dd8aa1f8c173563d114e5a55f9c08cbd60b840,"Fix cenc mode support and add support for the .mp4a extension.

Also add encrypted HLS internal sample streams.

Issue:#1661

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175577648"
AquilesCanta,2017-11-03 14:24:10,https://api.github.com/repos/google/ExoPlayer/git/commits/79a9155438d92e459cd320b2f540e34cd029f325,79a9155438d92e459cd320b2f540e34cd029f325,"Add support for 608/708 captions in HLS+fMP4

This also allows exposing multiple CC channels to any fMP4 extractor client.

Issue:#1661

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174458725"
botaydotcom,2017-11-13 19:10:54,https://api.github.com/repos/google/ExoPlayer/git/commits/5bf4c249a28b13acb06f8cd27db5fbe497237cc8,5bf4c249a28b13acb06f8cd27db5fbe497237cc8,"Notify TrackSelection when it's enabled and disabled.

Add onEnable() and onDisable() call-backs to TrackSelection. This allows
TrackSelection to perform interesting operations (like subscribe to
NetworkStatus) and clean up after itself.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175558485"
botaydotcom,2017-11-13 15:28:57,https://api.github.com/repos/google/ExoPlayer/git/commits/bff221b85e365733cbc9bcf630fc5b27efcfe3c6,bff221b85e365733cbc9bcf630fc5b27efcfe3c6,"Introduce Builder pattern to create MediaSource.

Start with DASH MediaSource. The number of injected arguments is getting
out-of-control.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175529031"
tonihei,2017-11-10 16:55:50,https://api.github.com/repos/google/ExoPlayer/git/commits/566170f308d2e29d7ee568f98be3344a1a3743ed,566170f308d2e29d7ee568f98be3344a1a3743ed,"Add javadoc to ExoPlayerTestRunner.

Someone must have forgotten to do this when rewriting this class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175296249"
andrewlewis,2017-12-12 17:03:15,https://api.github.com/repos/google/ExoPlayer/git/commits/e2bba1567e55eea81552a8810949d78f6d0b71db,e2bba1567e55eea81552a8810949d78f6d0b71db,"Add Builder for ImaAdsLoader and allow early requestAds

Also fix propagation of ad errors that occur when no player
is attached.

Issue: #3548
Issue: #3556

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178767997"
andrewlewis,2017-12-11 15:19:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a4ae206ebefd22dcc58fd20e6766f42695b15f9f,a4ae206ebefd22dcc58fd20e6766f42695b15f9f,"Support non-extractor ads in AdsMediaSource and demo apps

Issue: #3302

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178615074"
ojw28,2017-12-11 13:31:54,https://api.github.com/repos/google/ExoPlayer/git/commits/2e3667eeff663a154395b48d9cb1e46cf0d8b99a,2e3667eeff663a154395b48d9cb1e46cf0d8b99a,"Expose ability to get adjusted seek position from MediaPeriod

Issue: #2882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178606133"
andrewlewis,2017-12-11 13:23:00,https://api.github.com/repos/google/ExoPlayer/git/commits/8c7fe8a258e88fa513c4a1a88a4fe70c65eec2d4,8c7fe8a258e88fa513c4a1a88a4fe70c65eec2d4,"Make ExtractorMediaSource.Builder a factory for ExtractorMediaSources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178605481"
andrewlewis,2017-12-11 13:08:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f8834dacc64027efaeef373c26d68d2abe93e920,f8834dacc64027efaeef373c26d68d2abe93e920,"Use surfaceless context in DummySurface, if available

Issue: #3558

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178604607"
andrewlewis,2017-12-08 17:07:55,https://api.github.com/repos/google/ExoPlayer/git/commits/ba32d95dc476c452dd1e4e97229e04d0cd1c2632,ba32d95dc476c452dd1e4e97229e04d0cd1c2632,"Make HlsMediaSource.Builder a factory for HlsMediaSources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178384204"
andrewlewis,2017-12-08 16:32:46,https://api.github.com/repos/google/ExoPlayer/git/commits/8947950b5277fbeb01cf4cafa070bb7db1da094e,8947950b5277fbeb01cf4cafa070bb7db1da094e,"Make SsMediaSource.Builder a factory for SsMediaSources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178380856"
andrewlewis,2017-12-08 15:57:06,https://api.github.com/repos/google/ExoPlayer/git/commits/e419154b86b0aad7ccd0cdcdda8db25d935fedb8,e419154b86b0aad7ccd0cdcdda8db25d935fedb8,"Make DashMediaSource.Builder a factory for DashMediaSources

This is in preparation for supporting non-extractor MediaSources for ads in
AdsMediaSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178377627"
andrewlewis,2017-12-08 14:51:51,https://api.github.com/repos/google/ExoPlayer/git/commits/aa01fb85dc816e035ab8ab2f75a30ca256953b8b,aa01fb85dc816e035ab8ab2f75a30ca256953b8b,"Add an option to turn off hiding controls during ads

Issue: #3532

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178372763"
ojw28,2017-12-08 14:14:14,https://api.github.com/repos/google/ExoPlayer/git/commits/2b0b39ca3898ec71a8aa7b29386f789b3fff26fb,2b0b39ca3898ec71a8aa7b29386f789b3fff26fb,"Public API for setting seek parameters

Issue: #2882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178370038"
ojw28,2017-12-08 12:44:55,https://api.github.com/repos/google/ExoPlayer/git/commits/fede9c39c6c3ec4eaea64e13f149da4abac16e97,fede9c39c6c3ec4eaea64e13f149da4abac16e97,"Treat captions that are wider than expected as middle aligned

Issue: #3534

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178364353"
andrewlewis,2017-12-07 14:38:39,https://api.github.com/repos/google/ExoPlayer/git/commits/44a8245a1a6a4ca575e2ac808a549fb1d9cbd926,44a8245a1a6a4ca575e2ac808a549fb1d9cbd926,"Fix ad loading when there is no preroll

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178234009"
ojw28,2017-12-07 11:06:54,https://api.github.com/repos/google/ExoPlayer/git/commits/439c3022d9453691432d7b4c05957e2b5c1521fc,439c3022d9453691432d7b4c05957e2b5c1521fc,"Blacklist Moto Z from using secure DummySurface.

Issue: #3215

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178218535"
andrewlewis,2017-12-07 11:05:22,https://api.github.com/repos/google/ExoPlayer/git/commits/8b4b01c7f67e7d28d7125c7848a7236f0463586b,8b4b01c7f67e7d28d7125c7848a7236f0463586b,"Skip ads before the initial player position

Issue: #3527

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178218391"
andrewlewis,2017-12-07 10:45:16,https://api.github.com/repos/google/ExoPlayer/git/commits/2f6a497d4418fa1c949104d309894648a53e66eb,2f6a497d4418fa1c949104d309894648a53e66eb,"Use mappedTrackInfo local

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178216750"
ojw28,2017-12-06 18:33:23,https://api.github.com/repos/google/ExoPlayer/git/commits/a7b11ecb17acb3dbd28b9158a13c9cab0f95efb1,a7b11ecb17acb3dbd28b9158a13c9cab0f95efb1,"Add missing Nullable annotation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178117289"
AquilesCanta,2017-12-06 16:06:51,https://api.github.com/repos/google/ExoPlayer/git/commits/586e657bd7fe9aeb194e40f2bff9dc3d3bbaff8e,586e657bd7fe9aeb194e40f2bff9dc3d3bbaff8e,"Allow opt-in HLS chunkless preparation

If allowed, the media period will try to finish preparation without downloading
chunks (similar to what DashMediaPeriod does). To create track groups,
HlsMediaPeriod will try to obtain as much information as possible from the
master playlist. If any vital information is missing for specific urls,
traditional preparation will take place instead.

This version does not support tracks with DrmInitData info. This affects tracks
with CDM DRM (e.g: Widevine, Clearkey, etc). AES_128 encryption is not affected.
This information needs to be obtained from media playlists, and this version
only takes the master playlist into account for preparation.

Issue:#3149

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=178098759"
tonihei,2017-12-05 17:10:05,https://api.github.com/repos/google/ExoPlayer/git/commits/8a0a8339e84262e72594cfa192f190bbf60ffc10,8a0a8339e84262e72594cfa192f190bbf60ffc10,"Change handling of renderer position offset for first media period.

This should be a no-op change. And it eliminates the need to use the index variable
which will be removed once the MediaPeriodHolderQueue is implemented.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177963360"
botaydotcom,2017-12-05 16:31:17,https://api.github.com/repos/google/ExoPlayer/git/commits/88dea59cd225e424dc360e3fd7f412441ec3dc21,88dea59cd225e424dc360e3fd7f412441ec3dc21,"Add ability for media period to discard buffered media at the back of the queue

In some occasions, we may want to discard a part of the buffered media to
improve playback quality. This CL adds this functionality by allowing the
loading media period to re-evaluate its buffer periodically (every 2s) and discard
chunks as it needs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177958910"
AquilesCanta,2017-12-05 15:12:10,https://api.github.com/repos/google/ExoPlayer/git/commits/6606d73b29c3e27184ff59aa94a5d68908bbc30c,6606d73b29c3e27184ff59aa94a5d68908bbc30c,"Unset sample queue index in HlsSampleStream#unbindSampleQueue

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177950960"
tonihei,2017-12-05 14:57:27,https://api.github.com/repos/google/ExoPlayer/git/commits/aebc7da82b38ccb0f796ee50c610c5fc0aecc3f4,aebc7da82b38ccb0f796ee50c610c5fc0aecc3f4,"Immediately release temp buffer memory in FakeRenderer.

FakeRenderer only needs to allocate real memory because it extends BaseRenderer
which uses the actual SampleStream implementation. Immediately release the
memory after using it to prevent excessive memory usage when running fast
simulations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177949628"
ojw28,2017-12-05 13:19:48,https://api.github.com/repos/google/ExoPlayer/git/commits/a155edc5685d8ebe6c15724dfe843a0652693d80,a155edc5685d8ebe6c15724dfe843a0652693d80,"Hide subtitles when switching player in SimpleExoPlayerView

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177941993"
ojw28,2017-12-05 12:21:18,https://api.github.com/repos/google/ExoPlayer/git/commits/2b317234346bacfe8d77e53cfb3ad6b9760db5e1,2b317234346bacfe8d77e53cfb3ad6b9760db5e1,"Remove self @link

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177938212"
andrewlewis,2017-12-05 11:53:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f2f767bc1229cc982d3011b29e90cc0239d1f45a,f2f767bc1229cc982d3011b29e90cc0239d1f45a,"Invoke onLoadCanceled/Completed for ExtractorMediaSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177936271"
AquilesCanta,2017-12-05 08:42:28,https://api.github.com/repos/google/ExoPlayer/git/commits/f0e9dbf148fb6c7090fe6c69eae4beaf89fe6e89,f0e9dbf148fb6c7090fe6c69eae4beaf89fe6e89,"Fix HLS (broken on []

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177922948"
andrewlewis,2017-12-05 08:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/59f6b059b0c44c8dcc572ade7fa9f6d815ea0d80,59f6b059b0c44c8dcc572ade7fa9f6d815ea0d80,"Make one ad request in ImaAdsLoader

This fixes an issue where quickly detaching and reattaching the player might
cause ads to be requested multiple times with both responses handled.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177922167"
AquilesCanta,2017-12-04 18:50:33,https://api.github.com/repos/google/ExoPlayer/git/commits/002df729a558773ca1dc347ad1a05c4cedd449d5,002df729a558773ca1dc347ad1a05c4cedd449d5,"Allow late HLS sample queue building

Issue:#3149

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177836048"
ojw28,2017-12-04 16:12:35,https://api.github.com/repos/google/ExoPlayer/git/commits/fbfa43f5a3ef11f5da115c439092b521564fb4fa,fbfa43f5a3ef11f5da115c439092b521564fb4fa,"Enhance SeekMaps to return SeekPoints

Issue: #2882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177814974"
ojw28,2017-12-04 15:35:50,https://api.github.com/repos/google/ExoPlayer/git/commits/bb0fae3ee8243ecd4633b07e5469ad47f251e5c6,bb0fae3ee8243ecd4633b07e5469ad47f251e5c6,"Fix playback of FLV live streams with no audio track

Issue: #3188

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177811487"
andrewlewis,2017-12-04 15:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/7792f667d4474da3c13f4cf29baf69655d22ff90,7792f667d4474da3c13f4cf29baf69655d22ff90,"Fix setting supported ad MIME types without preloading

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177810991"
ojw28,2017-12-04 14:56:04,https://api.github.com/repos/google/ExoPlayer/git/commits/9c63d377917b45ca9f37f0c41516dbf9f7fffde8,9c63d377917b45ca9f37f0c41516dbf9f7fffde8,"Support timezone offsets in ISO8601 timestamps

Issue: #3524

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177808106"
ojw28,2017-12-04 14:08:33,https://api.github.com/repos/google/ExoPlayer/git/commits/a9c3ca1cfe0fd9295a6472265a9ac71b7f8c64bd,a9c3ca1cfe0fd9295a6472265a9ac71b7f8c64bd,"Tentative fix for roll-up row count

Issue: #3513

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177804505"
andrewlewis,2017-12-04 10:06:42,https://api.github.com/repos/google/ExoPlayer/git/commits/fd938fb4545dddb9016c80cb126f4fa6f9d51d43,fd938fb4545dddb9016c80cb126f4fa6f9d51d43,"Update internal usages of deprecated AdaptiveMediaSourceEventListener

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177786580"
andrewlewis,2017-12-04 09:18:58,https://api.github.com/repos/google/ExoPlayer/git/commits/fbccdf594a589abd01d0b0e6fc5dca7229b66b8f,fbccdf594a589abd01d0b0e6fc5dca7229b66b8f,"Use AdaptiveMediaSourceEventListener for ExtractorMediaSource

This is a step towards harmonizing the MediaSource Builders and (potentially)
providing MediaSource factories.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177783157"
tonihei,2017-12-03 19:25:51,https://api.github.com/repos/google/ExoPlayer/git/commits/03b0d9d46c48ff4ef03928ca6cb4cc6fe571224d,03b0d9d46c48ff4ef03928ca6cb4cc6fe571224d,"Fix flaky testEmptyTimeline again.

Waiting for the timeline change didn't work correctly because the timeline was
already equal to Timeline.EMPTY (due to the masking). Now waiting explicitly
for the empty Timeline exposed by the source.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177749292"
tonihei,2017-12-01 11:33:49,https://api.github.com/repos/google/ExoPlayer/git/commits/80fff0b7ceba2835cf103f52c16ee4cbcbf4ba3c,80fff0b7ceba2835cf103f52c16ee4cbcbf4ba3c,"Discard buffer in FakeExoPlayer.

This is in line with a recent change in ExoPlayerImplInternal. Not discarding the buffer
causes OOM when running simulated playbacks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177573930"
AquilesCanta,2017-11-30 17:08:11,https://api.github.com/repos/google/ExoPlayer/git/commits/23cc102151fbfd1c18e10e7ec7b6f448a1094a5b,23cc102151fbfd1c18e10e7ec7b6f448a1094a5b,"Move internal HlsSampleStreamWrapper methods under internal methods

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177462449"
ojw28,2017-11-30 16:36:03,https://api.github.com/repos/google/ExoPlayer/git/commits/3a6b7a346cbd45bbf499955aa76d633c01edc55f,3a6b7a346cbd45bbf499955aa76d633c01edc55f,"Fix mp3 extractor test

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177458840"
ojw28,2017-11-30 15:20:45,https://api.github.com/repos/google/ExoPlayer/git/commits/754260e9441c9dc32a320689503e3adcb08d580c,754260e9441c9dc32a320689503e3adcb08d580c,"Fix VBRI and XING seekers

- Remove skipping of the VBRI/XING frame before calculating position
  offsets. This was incorrect. Instead, a constraint is used to ensure
  we don't return positions within these frames, the difference being
  that the constraint adjusts only positions that would fall within
  the frames, where-as the previous approach shifted positions through
  the whole stream.
- Excluded last entry in the VBRI table because it has an invalid
  position (the length of the stream).
- Give variables in XingSeeker descriptive names.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177451295"
tonihei,2017-11-30 13:53:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e28adb00ff500cdc35e3078f8695b0a46aa0e34c,e28adb00ff500cdc35e3078f8695b0a46aa0e34c,"Use Handler to post action schedule finished callback.

Calling it directly might skip other callbacks. For example:
ActionSchedule.Builder().waitForTimelineChanged(...).build().
is currently immediately calling through to
callback.onActionScheduleFinished when the timeline changes.
Depending on the position of the action schedule listener in the
listener set, it may skip other listeners also
listening to timeline changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177442975"
andrewlewis,2017-11-30 13:39:50,https://api.github.com/repos/google/ExoPlayer/git/commits/7b0889981822a2e3f6e8d6145491827a7a4fa1e2,7b0889981822a2e3f6e8d6145491827a7a4fa1e2,"Move resetting audio processors to initialize()

The set of active audio processors was only updated on reconfiguration and when
draining playback parameters completed. Draining playback parameters are cleared
in reset(), so if parameters were set while paused then the sink was quickly
reset, without draining completing, the set of active audio processors wouldn't
be updated. This means that a switch to or from speed or pitch = 1 would not be
handled correctly if made while paused and followed by a seek.

Move resetting active audio processors from configure (where if the active audio
processors were reset we'd always initialize a new AudioTrack) to initialize().

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177442098"
ojw28,2017-11-30 13:34:51,https://api.github.com/repos/google/ExoPlayer/git/commits/cc54d4d3e6902acf127a41ab88d724d024b95dab,cc54d4d3e6902acf127a41ab88d724d024b95dab,"Snap to frame boundary in ConstantBitrateSeeker

- This change snaps the seek position for constant bitrate MP3s
  to the nearest frame boundary, avoiding the need to skip one
  byte at a time to re-synchronize (this may still happen if the
  MP3 does not really have fixed size frames).
- Tweaked both ConstantBitrateSeeker and WavHeader to ensure the
  returned positions are valid.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177441798"
AquilesCanta,2017-11-30 13:17:49,https://api.github.com/repos/google/ExoPlayer/git/commits/21d55d4ebabc11206be1546ea9610d64e656cdf8,21d55d4ebabc11206be1546ea9610d64e656cdf8,"Rename DefaultTrackSelector.ParameterBuilder.setViewportSize{FromContext->ToPhysicalDisplaySize}

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177440699"
AquilesCanta,2017-11-30 12:48:24,https://api.github.com/repos/google/ExoPlayer/git/commits/58e60e1f9d4506e5e537b095840c6dcfa678fac9,58e60e1f9d4506e5e537b095840c6dcfa678fac9,"Use the Builder pattern for DefaultTrackSelector#Parameters

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177438430"
AquilesCanta,2017-11-30 12:12:48,https://api.github.com/repos/google/ExoPlayer/git/commits/ce8736c71ace969920a49f94ef3e8a88b5f939fd,ce8736c71ace969920a49f94ef3e8a88b5f939fd,"Avoid concurrent read/write access to sampleQueues in HlsSampleStreamWrapper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177435977"
tonihei,2017-11-30 11:39:17,https://api.github.com/repos/google/ExoPlayer/git/commits/ef8fa28163e6a72d4519c21542484be7785cff06,ef8fa28163e6a72d4519c21542484be7785cff06,"Use VideoRendererEventListener to resolve unknown resolution.

Some streams don't have the new video resolution in the primary format.
Use the subsequent call to videoListener.onVideoInputFormatChanged to
resolve this unknown resolution.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177433618"
andrewlewis,2017-11-30 10:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/a367ae0d2bbde0dc9feea9a4295070f653b788fb,a367ae0d2bbde0dc9feea9a4295070f653b788fb,"Add a notice that NDK <= version 15c is required for VP9

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177430827"
andrewlewis,2017-11-30 09:27:07,https://api.github.com/repos/google/ExoPlayer/git/commits/a9c33590dfa0297a3e281c0d17bacf2d2032b158,a9c33590dfa0297a3e281c0d17bacf2d2032b158,"Update getPosition(0) positions for FragmentedMp4Extractor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177424314"
andrewlewis,2017-11-30 09:25:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5865f1fe408dcd6df1be6cd72ce88cc7a7b6f7f1,5865f1fe408dcd6df1be6cd72ce88cc7a7b6f7f1,"Use a MediaSource factory internally in AdsMediaSource

Support ad MediaSources that aren't prepared immediately by using
DeferredMediaPeriod, moved up from DynamicConcatenatingMediaSource.

In a later change the new interfaces will be made public so that apps
can provide their own MediaSource factories.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177424172"
andrewlewis,2017-11-30 08:33:10,https://api.github.com/repos/google/ExoPlayer/git/commits/882d698d5f64d3cf735f97deec09cd124ed50572,882d698d5f64d3cf735f97deec09cd124ed50572,"Log load errors from AdsMediaSource in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177419981"
botaydotcom,2017-11-29 17:23:57,https://api.github.com/repos/google/ExoPlayer/git/commits/3afdb24f25d7a224e5963384d0955e3393548527,3afdb24f25d7a224e5963384d0955e3393548527,"Add support for outputing Emsg messages to a sideloaded track output.

Currently FragmentedMp4Extractor only parses and outputs emsg messages if the
flag FLAG_ENABLE_EMSG_TRACK is set (when there's a metadata renderer that
handles emsg messages). Since there are emsg messages that only targets the
player, which we want to handle independently from MetadateRenderer, this CL
adds the ability for FragmentedMp4Extractor to output emsg messages to an
additional TrackOutput if provided, independently from FLAG_ENABLED_EMSG_TRACK.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177318983"
ojw28,2017-11-29 17:09:17,https://api.github.com/repos/google/ExoPlayer/git/commits/a99ef01d3a01dc9619fe2b6751cb44a107c58c33,a99ef01d3a01dc9619fe2b6751cb44a107c58c33,"Optimize seeking for unseekable SeekMaps

- Avoid re-downloading data prior to the first mdat box when
  seeking back to the start of an unseekable FMP4.
- Avoid re-downloading data prior to the first frame for
  constant bitrate MP3.
- Update SeekMap.getPosition documentation to allow a non-zero
  position for the unseekable case. Note that XingSeeker was
  already returning a non-zero position if unseekable.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177317256"
ojw28,2017-11-29 16:53:27,https://api.github.com/repos/google/ExoPlayer/git/commits/21ea9a821df397df9e52bfb61f18829c1c7333e9,21ea9a821df397df9e52bfb61f18829c1c7333e9,"Fix weird XingSeeker indexing

There are still things broken about the seeker, but this
cleans up some of the weird bits.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177315136"
tonihei,2017-11-29 10:07:44,https://api.github.com/repos/google/ExoPlayer/git/commits/835b6382acf17835798883a518376a5a2c382407,835b6382acf17835798883a518376a5a2c382407,"Move external timeline and start position overwrites to ExoPlayerImpl.

Makes it less error-prone to accidentatly forget to set the right overwrites.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177282089"
tonihei,2017-11-28 18:45:38,https://api.github.com/repos/google/ExoPlayer/git/commits/9e8f50a9c06e4e7cbae6b31eca9b3acee761f7d0,9e8f50a9c06e4e7cbae6b31eca9b3acee761f7d0,"Allow multiple video and audio debug listeners in SimpleExoPlayer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177184331"
andrewlewis,2017-11-28 17:53:30,https://api.github.com/repos/google/ExoPlayer/git/commits/2282527821a0232e5d80f554d417828e0f7cf771,2282527821a0232e5d80f554d417828e0f7cf771,"Allow setting supported formats on AdsLoaders

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177175377"
ojw28,2017-11-28 17:43:08,https://api.github.com/repos/google/ExoPlayer/git/commits/ff49bc97c459062a87310557197c72162dfa7dcb,ff49bc97c459062a87310557197c72162dfa7dcb,"Clean up some extrator SeekMap implementations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177173618"
AquilesCanta,2017-11-28 17:22:32,https://api.github.com/repos/google/ExoPlayer/git/commits/baa80a1b68329c8c6ea2e746b332dfae1a00a024,baa80a1b68329c8c6ea2e746b332dfae1a00a024,"Fix DefaultTrackSelector#Parameter withSelectUndeterminedTextLanguage

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177170994"
tonihei,2017-11-28 17:00:43,https://api.github.com/repos/google/ExoPlayer/git/commits/54a1bb186e860c172c473713eb24f1cc5d073d07,54a1bb186e860c172c473713eb24f1cc5d073d07,"Allow resetInternal to release MediaSource but keep timeline.

This allows to keep the state synced with ExoPlayerImpl after stopping the player,
but still releases the media source immediately as it needs to be reprepared.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177167980"
ojw28,2017-11-28 16:40:21,https://api.github.com/repos/google/ExoPlayer/git/commits/f2d554175297c3f8ae6c42a25d20fad6d2db14cf,f2d554175297c3f8ae6c42a25d20fad6d2db14cf,"Extractor cleanup

- Align class summary Javadoc
- Fix ErrorProne + Style warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177165593"
AquilesCanta,2017-11-28 13:18:35,https://api.github.com/repos/google/ExoPlayer/git/commits/69f8b250d5c60470394f7a1e5787345ae411cd6b,69f8b250d5c60470394f7a1e5787345ae411cd6b,"Match SequenceableLoader method order in HlsSampleStreamWrapper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177146923"
AquilesCanta,2017-11-28 13:02:15,https://api.github.com/repos/google/ExoPlayer/git/commits/20567633a03fb4c90b36e31b8cfad2e25f81f3fd,20567633a03fb4c90b36e31b8cfad2e25f81f3fd,"Add queue manipulation to the Cast demo

Against all odds, samples can be reordered by using drag & drop.

Issue:#1706
Issue:#2283

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177145553"
tonihei,2017-11-28 12:40:06,https://api.github.com/repos/google/ExoPlayer/git/commits/efc709f36616d7bdce397f307d69e9fd09b4192b,efc709f36616d7bdce397f307d69e9fd09b4192b,"Remove initial seek counting in ExoPlayerImplInternal.

We can acknoledge seeks before preparation finished immediately now,
because ExoPlayerImpl won't leave the masking state until the first prepare
operation is processed.

As a side effect, it also cleans up the responsibility of the callbacks.
Prepares are always acknowledged with a SOURCE_INFO_REFRESHED, while seeks
are always acknowledged with a SEEK_ACK.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177144089"
ojw28,2017-11-28 11:58:30,https://api.github.com/repos/google/ExoPlayer/git/commits/1ae50cb9e56e6b6a00606f1fac3066d2461db17d,1ae50cb9e56e6b6a00606f1fac3066d2461db17d,"Add some clarifications to MediaSource documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177141094"
tonihei,2017-11-28 09:53:15,https://api.github.com/repos/google/ExoPlayer/git/commits/f46cb907b7f88eb753497ff4bb92ceb694025329,f46cb907b7f88eb753497ff4bb92ceb694025329,"Add stop with position reset to Player interface.

The ExoPlayerImpl implementation forwards the stop request with this optional
parameter. To ensure correct masking (e.g. when timeline updates arrive after
calling reset in ExoPlayerImpl but before resetInternal in
ExoPlayerImplInternal), we use the existing prepareAck counter and extend it
also count stop operations. For this to work, we also return the updated
empty timeline after finishing the reset.

The CastPlayer doesn't support the two reset options so far.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177132107"
ojw28,2017-11-27 21:32:44,https://api.github.com/repos/google/ExoPlayer/git/commits/d84398788ab67871c4a511df06248464c412e5dc,d84398788ab67871c4a511df06248464c412e5dc,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177063576"
ojw28,2017-12-04 15:02:35,https://api.github.com/repos/google/ExoPlayer/git/commits/de96bb5e4f8ee04bb4cff778550cc02b843ccb31,de96bb5e4f8ee04bb4cff778550cc02b843ccb31,"Merge pull request #3545 from pstambrecht/feature/iso8601-parser-2

Feature/iso8601 parser 2"
pstambrecht,2017-12-04 14:52:12,https://api.github.com/repos/google/ExoPlayer/git/commits/28d709aa8f7b5a4c57f0e68515b3a099e3da4a57,28d709aa8f7b5a4c57f0e68515b3a099e3da4a57,Iso8601Parser improved to be able to parse timestamp offsets from UTC
pstambrecht,2017-12-04 14:45:54,https://api.github.com/repos/google/ExoPlayer/git/commits/ad16efdf5688b1f25fb3d6f694b41d9c928287e3,ad16efdf5688b1f25fb3d6f694b41d9c928287e3,Iso8601Parser improved to be able to parse timestamp offsets from UTC
ojw28,2017-11-28 17:02:04,https://api.github.com/repos/google/ExoPlayer/git/commits/117608edef8c896f9496f0ed3651d0826c4ccf28,117608edef8c896f9496f0ed3651d0826c4ccf28,Update ISSUE_TEMPLATE
ojw28,2017-11-27 20:42:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a0f6bba842d8aeb8716c31a2ff2a4b207b970861,a0f6bba842d8aeb8716c31a2ff2a4b207b970861,"Force wrapping of HLS ID3 timestamp

Merge of https://github.com/google/ExoPlayer/pull/3495

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177057183"
tonihei,2017-11-27 16:58:57,https://api.github.com/repos/google/ExoPlayer/git/commits/95de9c96fe0eedee5b7f34bcc939ed5f3da6ea41,95de9c96fe0eedee5b7f34bcc939ed5f3da6ea41,"Don't always wait for action schedule in ExoPlayerTestRunner.

Unconditionally waiting for the action schedule to finish in ExoPlayerTestRunner
doesn't work if the action schedule is not intended to be finished.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177024139"
tonihei,2017-11-27 15:02:33,https://api.github.com/repos/google/ExoPlayer/git/commits/ee26da682c495d0a8b6ed4022273bf5d0fa4d196,ee26da682c495d0a8b6ed4022273bf5d0fa4d196,"Add throws IllegalSeekPositionException doc to seekTo(windowIndex, positionMs).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177011497"
AquilesCanta,2017-11-27 14:29:47,https://api.github.com/repos/google/ExoPlayer/git/commits/16c43c6bb71a6ee486d79355189e2445ef7753b9,16c43c6bb71a6ee486d79355189e2445ef7753b9,"Support undefined text track language when preferred is not available

Also slightly improve language normalization/documentation.

For this CL, it is assumed that null and ""und"" languages are different
entities. Once we fully tackle language tag normalization, we can decide
whether to normalize the ""undefined"" language.

Issue:#2867
Issue:#2980

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=177008509"
ojw28,2017-11-27 20:43:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ec2fbe5d1eafa1f9a44152cb2e25f8309490498a,ec2fbe5d1eafa1f9a44152cb2e25f8309490498a,"Merge pull request #3495 from simophin/patch-1

Guard against out-of-range timestamp"
andrewlewis,2017-11-27 09:50:47,https://api.github.com/repos/google/ExoPlayer/git/commits/1b66908f7d79b6891d8d99705470797640457e72,1b66908f7d79b6891d8d99705470797640457e72,"Update version strings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176989632"
tonihei,2017-11-27 11:57:45,https://api.github.com/repos/google/ExoPlayer/git/commits/818d5a0b0062e846acdd26cda1ffdde8c178eb63,818d5a0b0062e846acdd26cda1ffdde8c178eb63,"Add final to boolean used within Runnable.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176997767"
tonihei,2017-11-27 11:45:24,https://api.github.com/repos/google/ExoPlayer/git/commits/a4fbb453252f1318b3d0df775e47490536398451,a4fbb453252f1318b3d0df775e47490536398451,"Remove race condition when stopping FakeExoPlayer.

A message to stop the playback and to quit the playback thread was posted in release().
The stop message removed all other already queued messages which might include
the second message to quit the thread. That led to infinite waiting in the
release method because the playback thread never got the quit signal.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176997104"
andrewlewis,2017-11-27 09:50:47,https://api.github.com/repos/google/ExoPlayer/git/commits/70169af6a09f25f2465650f3e67931a55e860ce5,70169af6a09f25f2465650f3e67931a55e860ce5,"Update version strings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176989632"
andrewlewis,2017-11-27 09:43:34,https://api.github.com/repos/google/ExoPlayer/git/commits/8833a2930c0f6a7f43dd27787b72fd6d2c866ce5,8833a2930c0f6a7f43dd27787b72fd6d2c866ce5,"Take into account the playback speed for loading

Update the default AdaptiveTrackSelection and DefaultLoadControl to use playback
speed information.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176989168"
andrewlewis,2017-11-24 18:00:44,https://api.github.com/repos/google/ExoPlayer/git/commits/a9ed6b191dc57c971d70842b07c6a325dffb0574,a9ed6b191dc57c971d70842b07c6a325dffb0574,"Switch from currentTimeMillis to elapsedRealtime

currentTimeMillis is not guaranteed to be monotonic and elapsedRealtime is
recommend for interval timing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176853118"
tonihei,2017-11-24 16:30:53,https://api.github.com/repos/google/ExoPlayer/git/commits/c4385c738f12986702cf94ff6330ae2768bdae7b,c4385c738f12986702cf94ff6330ae2768bdae7b,"Temporarily fix flakiness of testPlayEmptyTimeline.

Fixed by explicitly waiting for the timeline update. This shouldn't be
necessary and will be removed as soon as the correct order of events
can be guaranteed (timeline change -> state change -> onSeekProcessed).

The waiting for the timeline update is implemented by introducing the
feature that the test runner also waits until the action schedule has
finished before stopping the test.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176848540"
andrewlewis,2017-11-24 13:37:49,https://api.github.com/repos/google/ExoPlayer/git/commits/36255c42cf66c7be10ec2a4336cda22e094c7bf7,36255c42cf66c7be10ec2a4336cda22e094c7bf7,"Test setPlaybackParameters before preparation completes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176837939"
andrewlewis,2017-11-24 10:20:35,https://api.github.com/repos/google/ExoPlayer/git/commits/de476ba4e67bb3f1b9ad4f5a97ef8f997ebe0463,de476ba4e67bb3f1b9ad4f5a97ef8f997ebe0463,"Propagate the player error to ExoPlayerTestRunner

In a test run where no exceptions were thrown on the main thread and the test
did not time out, exceptions from onPlayerError were not correctly propagated to
the test thread (handleException would be called with null).

Fix ExoPlayerTestRunner.onPlayerError to propagate the actual exception from the
player.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176825907"
ojw28,2017-11-23 17:22:35,https://api.github.com/repos/google/ExoPlayer/git/commits/e7c60a2a234ab11bc75335453a7836fef9509610,e7c60a2a234ab11bc75335453a7836fef9509610,"Merge pull request #3493 from google/dev-v2-r2.6.0

r2.6.0"
ojw28,2017-11-23 14:55:50,https://api.github.com/repos/google/ExoPlayer/git/commits/91bcde033caeafdb7747a1a85c031e0022777120,91bcde033caeafdb7747a1a85c031e0022777120,"Fix release notes (change was cherry-picked)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176768835"
ojw28,2017-11-23 14:00:46,https://api.github.com/repos/google/ExoPlayer/git/commits/5d70b9e02d452aeba8a9bd92b5493dbffa596545,5d70b9e02d452aeba8a9bd92b5493dbffa596545,"Partialy revert ""Make ExtractorMediaSource timeline dynamic until duration is set""

This change broke playback through playlists.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176764830"
ojw28,2017-11-23 13:43:38,https://api.github.com/repos/google/ExoPlayer/git/commits/874d1be8529771aac6e193f61b20f2cefbc3cde9,874d1be8529771aac6e193f61b20f2cefbc3cde9,"stopInternal should release MediaSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176763841"
ojw28,2017-11-23 12:58:03,https://api.github.com/repos/google/ExoPlayer/git/commits/2537e883d6750751bd1149a1d1d1a66c37c002c4,2537e883d6750751bd1149a1d1d1a66c37c002c4,"Move HlsSampleStreamWrapper to use ArrayList

Also prevent skip when there's a pending reset, and add a
TODO to split/fix chunk discard and downstream format change
reporting.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176760955"
tonihei,2017-11-23 12:27:34,https://api.github.com/repos/google/ExoPlayer/git/commits/7eb0af7c0ef801c1a5a3497b91d129ab82abf942,7eb0af7c0ef801c1a5a3497b91d129ab82abf942,"Replace LinkedList with ArrayList in ChunkSampleStream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176759080"
ojw28,2017-11-23 12:26:05,https://api.github.com/repos/google/ExoPlayer/git/commits/2086c129fcea32590a3b43e0919137c21d61cf1b,2086c129fcea32590a3b43e0919137c21d61cf1b,"Suppress discontinuities that don't change the position

This is mostly useful for suppressing the initial position
discontinuity reported by ClippingMediaPeriod.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176758972"
tonihei,2017-11-23 10:00:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ba5f35995f21c9c2a86842ac9dce1d13009a6378,ba5f35995f21c9c2a86842ac9dce1d13009a6378,"Send discontinuity at adjustments after shuffle/repeat mode changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176749136"
ojw28,2017-11-22 21:22:41,https://api.github.com/repos/google/ExoPlayer/git/commits/1442c047cffc17d9307d4579a805c1def64b4f22,1442c047cffc17d9307d4579a805c1def64b4f22,"Update gradle wrapper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176693785"
ojw28,2017-11-22 20:38:53,https://api.github.com/repos/google/ExoPlayer/git/commits/3562fe1c69c8a085ff5c92449a6d4b2ff95a133e,3562fe1c69c8a085ff5c92449a6d4b2ff95a133e,SampleStream fixes
ojw28,2017-11-22 17:33:10,https://api.github.com/repos/google/ExoPlayer/git/commits/d537c21888ef0dcc7f4dae0fbb2fc8030877fab3,d537c21888ef0dcc7f4dae0fbb2fc8030877fab3,"Test ClippingMediaSource handles initial dynamic timelines

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176666247"
ojw28,2017-11-22 17:14:00,https://api.github.com/repos/google/ExoPlayer/git/commits/e04bdcea50c3242f91537554e01dbada73f1e6a3,e04bdcea50c3242f91537554e01dbada73f1e6a3,"Relax requirement that MergingMediaSource children are not dynamic

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176664332"
ojw28,2017-11-22 16:30:45,https://api.github.com/repos/google/ExoPlayer/git/commits/494a41c8b2eb84178b07acbe1877d84c32952fb9,494a41c8b2eb84178b07acbe1877d84c32952fb9,"Improve ClippingMediaSource ""cannot clip"" behavior

This brings ClippingMediaSource clip failures in line with
what MergingMediaSource does when it cannot merge.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176660123"
ojw28,2017-11-22 13:36:20,https://api.github.com/repos/google/ExoPlayer/git/commits/d909dc1863b5bda2fcfc1edd1e2e00a3a199e3a0,d909dc1863b5bda2fcfc1edd1e2e00a3a199e3a0,"Report correct discontinuity from ClippingMediaPeriod

It currently always reports 0, but it should report the position
passed through selectTracks. Reporting should also be disabled if
there's a seekToUs call.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176644228"
ojw28,2017-11-22 13:10:43,https://api.github.com/repos/google/ExoPlayer/git/commits/b5480e0e97cce89ce6867a2b2b61620e48f41881,b5480e0e97cce89ce6867a2b2b61620e48f41881,"Relax requirement that ClippingMediaSource children are not dynamic

Tests to follow (want to fix breakages first).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176642610"
jrochest,2017-11-22 09:49:47,https://api.github.com/repos/google/ExoPlayer/git/commits/4193a1f705b68627e0090d4bb66f44bf6302dd5a,4193a1f705b68627e0090d4bb66f44bf6302dd5a,"Guard against null TrackSelections in updateTrackSelectionPlaybackSpeed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176629070"
botaydotcom,2017-11-21 18:16:50,https://api.github.com/repos/google/ExoPlayer/git/commits/e575af3ac38e06e78d92d3b97ddc77d2b5bb9b8f,e575af3ac38e06e78d92d3b97ddc77d2b5bb9b8f,"Parse DASH manifest's publish time.

Parse DASH manifest's publishTime node as defined by ISO/IEC 23009-1:2014,
section 5.3.1.2.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176525922"
tonihei,2017-11-21 17:28:10,https://api.github.com/repos/google/ExoPlayer/git/commits/6607f49be609b692efbe210832544d375afc494c,6607f49be609b692efbe210832544d375afc494c,"Fix reporting of format changes in ChunkSampleStream.

Until recently, changing primary track formats were reported when the
corresponding media chunk was discarded which always happened immediately
after the sample has been read.

Now, media chunks may be discarded later on or in batches, leaving the
current reporting mechanism broken because changes may never be reported.

This fix separates the discarding from the reporting such that format changes
can be reported when the media chunk is first read from, while the discarding
operation only discards without reporting format changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176519071"
andrewlewis,2017-11-21 16:58:02,https://api.github.com/repos/google/ExoPlayer/git/commits/15a1f9a55263ac5a571ea89b409125d91676584f,15a1f9a55263ac5a571ea89b409125d91676584f,"Remove DefaultLoadControl buffer time state

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176515168"
botaydotcom,2017-11-21 15:03:55,https://api.github.com/repos/google/ExoPlayer/git/commits/e619079a0d7ef598d3b30c2a34b3dd86f1eac844,e619079a0d7ef598d3b30c2a34b3dd86f1eac844,"Let EventMessage encloses its presentationTimeMs.

Currently EventMessage's presentationTimeMs is kept separately in
EventSampleStream. However, EventMessage's presentationTimeMs maybe used in
other places besides EventSampleStream, such as when handling `emsg' messages
targeting the player. This CL let EventMessage object to holds its
presentationTimeMs for such use cases.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176502938"
ojw28,2017-11-22 18:06:14,https://api.github.com/repos/google/ExoPlayer/git/commits/75b90625839a548124d2f90788b790b3bcd21579,75b90625839a548124d2f90788b790b3bcd21579,Send discontinuity at adjustments after shuffle/repeat mode changes.
ojw28,2017-11-22 17:59:36,https://api.github.com/repos/google/ExoPlayer/git/commits/56c1c3f6a724b62ccb624148e2c892a4ef9519bf,56c1c3f6a724b62ccb624148e2c892a4ef9519bf,"Revert ""Make ExtractorMediaSource timeline dynamic until duration is set""

This reverts commit b688a562508e74721841aaaa770e9dc47bd378dd."
ojw28,2017-11-20 17:35:01,https://api.github.com/repos/google/ExoPlayer/git/commits/74569bba450cc91b21771361f5e323b12ed1227b,74569bba450cc91b21771361f5e323b12ed1227b,"Don't do work after track selection when in ended state

This causes the player to report that it's started loading
when in the ended state.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176371892"
ojw28,2017-11-20 16:56:23,https://api.github.com/repos/google/ExoPlayer/git/commits/fa3052d36b78455c80ce7b23e6526edc092b0561,fa3052d36b78455c80ce7b23e6526edc092b0561,"Report additional position discontinuities

- Properly report internal discontinuities
- Add DISCONTINUITY_REASON_SEEK_ADJUSTMENT to distinguish
  seek adjustments from other internal discontinuity events

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176367365"
ojw28,2017-11-21 12:46:52,https://api.github.com/repos/google/ExoPlayer/git/commits/b688a562508e74721841aaaa770e9dc47bd378dd,b688a562508e74721841aaaa770e9dc47bd378dd,"Make ExtractorMediaSource timeline dynamic until duration is set

We (eventually - albeit possibly infinitely far in the future)
expect a timeline update with a window of known duration. This
also stops live radio stream playbacks transitioning to ended
state when their tracks are disabled.

As part of this fix, I found an issue where getPeriodPosition
could return null even when defaultPositionProjectionUs is 0,
which is not as documented.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176492024"
ojw28,2017-11-21 11:44:06,https://api.github.com/repos/google/ExoPlayer/git/commits/d51944f4b3fe9586c542e4aec4d3d5c7d81d83a2,d51944f4b3fe9586c542e4aec4d3d5c7d81d83a2,"Remove unnecessary dependency

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176487991"
andrewlewis,2017-11-20 16:42:34,https://api.github.com/repos/google/ExoPlayer/git/commits/60555e2c4b6d74f1276ae30b6524174ac8ee2365,60555e2c4b6d74f1276ae30b6524174ac8ee2365,"Improve robustness of ImaAdsLoader

Remove an assertion that there was a call to pause content between two
content -> ad transitions.

Also, only use the player position for resuming an ad on reattaching if the
player is currently playing an ad, in case IMA pauses content before the player
actually transitions to an ad.

Issue: #3430

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176365842"
ojw28,2017-11-21 13:42:12,https://api.github.com/repos/google/ExoPlayer/git/commits/1439b4a3ef5a31f15553db30071177c115ea12f5,1439b4a3ef5a31f15553db30071177c115ea12f5,Mini cleanup
IanDBird,2017-11-21 10:59:04,https://api.github.com/repos/google/ExoPlayer/git/commits/494237548ada77c3dc56e98fc25dd2c479c7f7d5,494237548ada77c3dc56e98fc25dd2c479c7f7d5,Fix initializationData check for SSA subtitles
ojw28,2017-11-21 13:42:12,https://api.github.com/repos/google/ExoPlayer/git/commits/3998ed49ae0d7dd42fab9e1c1e72e17d27c5b988,3998ed49ae0d7dd42fab9e1c1e72e17d27c5b988,Mini cleanup
ojw28,2017-11-21 13:31:06,https://api.github.com/repos/google/ExoPlayer/git/commits/1a138ad4dc6f86a12f43c7994d297acb42ddf7a7,1a138ad4dc6f86a12f43c7994d297acb42ddf7a7,"Merge pull request #3486 from IanDBird/dev-v2

Fix initializationData check for SSA subtitles"
ojw28,2017-11-21 12:46:52,https://api.github.com/repos/google/ExoPlayer/git/commits/856c2f8d3ee59e6b8b0fba23532d8cd98d2616b3,856c2f8d3ee59e6b8b0fba23532d8cd98d2616b3,"Make ExtractorMediaSource timeline dynamic until duration is set

We (eventually - albeit possibly infinitely far in the future)
expect a timeline update with a window of known duration. This
also stops live radio stream playbacks transitioning to ended
state when their tracks are disabled.

As part of this fix, I found an issue where getPeriodPosition
could return null even when defaultPositionProjectionUs is 0,
which is not as documented.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176492024"
ojw28,2017-11-21 11:44:06,https://api.github.com/repos/google/ExoPlayer/git/commits/c49ae5369993059151813ba58ddfc7009928917d,c49ae5369993059151813ba58ddfc7009928917d,"Remove unnecessary dependency

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176487991"
andrewlewis,2017-11-21 10:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/31e2cfce9e21c0d594d6b10cf726d498b07a7492,31e2cfce9e21c0d594d6b10cf726d498b07a7492,"Pass playback speed to LoadControl and TrackSelection

This allows implementations of those classes to take into account the playback
speed for adaptive track selection and controlling when to resume the player.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176484361"
tonihei,2017-11-21 10:44:09,https://api.github.com/repos/google/ExoPlayer/git/commits/a8d867be37ef813a60d64779e2cc9693d3364238,a8d867be37ef813a60d64779e2cc9693d3364238,"Support multiple transitions to STATE_ENDED in ExoPlayerTestRunner.

Currently testRunner.blockUntilEnded waits for the first transition to
STATE_ENDED or _IDLE before returning. In order to support tests with
player repreparations after one playback finished, this change adds an
option to specifiy the number of expected transitions to ended.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176484047"
tonihei,2017-11-21 10:13:04,https://api.github.com/repos/google/ExoPlayer/git/commits/e1d960db68b59590190a0f20ca707cb9a0f745f8,e1d960db68b59590190a0f20ca707cb9a0f745f8,"Unify internal reset method to support state and position resets.

The ExoPlayerImplInternal.reset method now takes the same set of options
as the ExoPlayer.prepare method. This also allows to
- Remove some code duplication within ExoPlayerImplInternal
- Fix calls to prepare(sameSource, resetPosition=true, resetState=false)
  with enabled shuffle mode where the position was not correctly reset to the
  first period index.
- Keep the current timeline when calling stop (in line with ExoPlayerImpl).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176481878"
tonihei,2017-11-21 09:44:18,https://api.github.com/repos/google/ExoPlayer/git/commits/fdb53ac8d1c9a5f13ce36c0286ef69c070cf3560,fdb53ac8d1c9a5f13ce36c0286ef69c070cf3560,"Correct period index counting in ExoPlayerTestRunner.

The initial period index was counted in onPlayerStateChanged. However, we
actually want to save the period index in the newly introduced onPositionDiscontinuity
after preparation.

While being here, also updated deprecated LinkedList to ArrayList.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176479509"
tonihei,2017-11-21 09:33:48,https://api.github.com/repos/google/ExoPlayer/git/commits/aac53cac56143e96bebcc0243f74cebe3e52b817,aac53cac56143e96bebcc0243f74cebe3e52b817,"Add reason to onTimelineChanged.

Currently onTimelineChanged doesn't allow to distinguish easily between the
different reasons why it's being called. Especially, finding
out whether a new media source has been prepared or the current source
refreshed dynamically was impossible without tightly coupling the player
operations with the listener.

The new reasons provide this disdinction by either indicating a newly
initialized media source, a dynamic update to an existing timeline
or manifest, or a reset of the player (which usually results in an
empty timeline).

The original onTimelineChanged method without reason is kept in the
DefaultEventListener as deprecated to prevent the need to update all
existing listeners in one go.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176478701"
ojw28,2017-11-20 17:35:01,https://api.github.com/repos/google/ExoPlayer/git/commits/13b595ed3908588810dce32811830e601bc2548e,13b595ed3908588810dce32811830e601bc2548e,"Don't do work after track selection when in ended state

This causes the player to report that it's started loading
when in the ended state.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176371892"
ojw28,2017-11-20 16:56:23,https://api.github.com/repos/google/ExoPlayer/git/commits/275292cb63d6def2f5366edc576564244f906ac0,275292cb63d6def2f5366edc576564244f906ac0,"Report additional position discontinuities

- Properly report internal discontinuities
- Add DISCONTINUITY_REASON_SEEK_ADJUSTMENT to distinguish
  seek adjustments from other internal discontinuity events

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176367365"
ojw28,2017-11-20 16:50:09,https://api.github.com/repos/google/ExoPlayer/git/commits/c06fe73b66a9664d68adce4a951bfe0e4258fcbd,c06fe73b66a9664d68adce4a951bfe0e4258fcbd,"Bump target API level to 27

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176366693"
ojw28,2017-11-20 16:48:10,https://api.github.com/repos/google/ExoPlayer/git/commits/3656230cb1b93092fb5ee698fe260ff4dfeb976f,3656230cb1b93092fb5ee698fe260ff4dfeb976f,"Use MediaSourceTestRunner in additional source tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176366471"
andrewlewis,2017-11-20 16:42:34,https://api.github.com/repos/google/ExoPlayer/git/commits/2a685da4eb6dec725f737803d223ad9e5d27fa75,2a685da4eb6dec725f737803d223ad9e5d27fa75,"Improve robustness of ImaAdsLoader

Remove an assertion that there was a call to pause content between two
content -> ad transitions.

Also, only use the player position for resuming an ad on reattaching if the
player is currently playing an ad, in case IMA pauses content before the player
actually transitions to an ad.

Issue: #3430

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176365842"
botaydotcom,2017-11-20 16:22:19,https://api.github.com/repos/google/ExoPlayer/git/commits/0de57cbfae7165dd3bb829e323d089cd312b4b1b,0de57cbfae7165dd3bb829e323d089cd312b4b1b,"Allow more flexible loading strategy when loading multiple sub streams.

Currently for a DASH ChunkSource that consists of multiple sub-streams, we
always use a CompositeSequenceableLoader, which only allows the furthest behind
loader or any loader that are behind current playback position to continue
loading.
This changes allow clients to have more flexibility when deciding the loading
strategy:
- They can construct a different kind of composite SequenceableLoader from
the sub-loaders, and use it by injecting a different CompositeSequeableLoaderFactory accordingly.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176363870"
AquilesCanta,2017-11-20 14:22:54,https://api.github.com/repos/google/ExoPlayer/git/commits/e45907193cb1ed7bb9af337aa7e941f8e834ae64,e45907193cb1ed7bb9af337aa7e941f8e834ae64,"Allow human readable strings as DRM intent extras.

Issue:#3478

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176351086"
IanDBird,2017-11-21 10:59:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a9d91b3387262e7fd954db6346b44048616af76c,a9d91b3387262e7fd954db6346b44048616af76c,Fix initializationData check for SSA subtitles
ojw28,2017-11-20 11:36:50,https://api.github.com/repos/google/ExoPlayer/git/commits/e469269f3c45e6c11737512447ccea6d95f505be,e469269f3c45e6c11737512447ccea6d95f505be,"Fix some lint issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176337058"
andrewlewis,2017-11-20 12:32:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c4fe0e648242bf2d2613f217605c83bf7cc91aed,c4fe0e648242bf2d2613f217605c83bf7cc91aed,"Add support for Dolby Atmos

Issue: #2465

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176341309"
tonihei,2017-11-20 12:22:12,https://api.github.com/repos/google/ExoPlayer/git/commits/75acfc7957fd9ce2c9a7774266688c83de5c3a10,75acfc7957fd9ce2c9a7774266688c83de5c3a10,"Move media clock handling to its own class.

This class implements MediaClock itself and handles the switching between
renderer and standalone media clock.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176340615"
tonihei,2017-11-20 12:20:52,https://api.github.com/repos/google/ExoPlayer/git/commits/3f6b4d18a992e3ef912b45fbb44f6a72ce5a09ca,3f6b4d18a992e3ef912b45fbb44f6a72ce5a09ca,"Move MockitoUtils to testutils and use it for all Mockito set-ups.

In particular this allows to have the workaround for
https://code.google.com/p/dexmaker/issues/detail?id=2 in one place only.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176340526"
ojw28,2017-11-20 11:36:50,https://api.github.com/repos/google/ExoPlayer/git/commits/82d0a27fd9f3c375c58ef482268408fc1be20bf1,82d0a27fd9f3c375c58ef482268408fc1be20bf1,"Fix some lint issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176337058"
AquilesCanta,2017-11-20 11:17:29,https://api.github.com/repos/google/ExoPlayer/git/commits/a7c424a15c5139bf8ef9202f8cb92df97b1f99bb,a7c424a15c5139bf8ef9202f8cb92df97b1f99bb,"Add time unit and javadocs to fields in DashManifest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176335667"
AquilesCanta,2017-11-20 10:49:39,https://api.github.com/repos/google/ExoPlayer/git/commits/d856d0f0562a169b5e77576a8c498fe96a0ef44f,d856d0f0562a169b5e77576a8c498fe96a0ef44f,"Use consistent case for sideloaded

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176333544"
botaydotcom,2017-11-20 10:41:38,https://api.github.com/repos/google/ExoPlayer/git/commits/2a02171c42ab262502ef0b8a7c4b642680978909,2a02171c42ab262502ef0b8a7c4b642680978909,"Add Builder to SingleSampleMediaSource.

Add Builder pattern to SingleSampleMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176332964"
ojw28,2017-11-17 21:44:26,https://api.github.com/repos/google/ExoPlayer/git/commits/24672a9c5d26d75980ca60e66baaccc84f5f41cb,24672a9c5d26d75980ca60e66baaccc84f5f41cb,"Don't push anything from TV demo app yet.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176154160"
erdemguven,2017-11-17 14:33:32,https://api.github.com/repos/google/ExoPlayer/git/commits/8940e7b32a188be36f68e244dddbe66456884e66,8940e7b32a188be36f68e244dddbe66456884e66,"Replace hard coded UUID in OfflineLicenseHelper with a parameter

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176102179"
ojw28,2017-11-17 19:34:27,https://api.github.com/repos/google/ExoPlayer/git/commits/0a8d2423851a8b96f6d4c19005b01aec21d5bd2b,0a8d2423851a8b96f6d4c19005b01aec21d5bd2b,Amend release notes for 2.6.0 release
tonihei,2017-11-14 11:01:58,https://api.github.com/repos/google/ExoPlayer/git/commits/be0648541fe4d7cd2c8b44d57822a379c381a7db,be0648541fe4d7cd2c8b44d57822a379c381a7db,"Forward ad group and ad index when creating period from concatanted media sources.

Also added tests which verify the intended behaviour.

GitHub:#3452

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175656478"
ojw28,2017-11-13 17:31:52,https://api.github.com/repos/google/ExoPlayer/git/commits/a361f9043c9c758da6089871e67a007817765b8f,a361f9043c9c758da6089871e67a007817765b8f,Remove stray TV directory from 2.6.0 release
ojw28,2017-11-17 19:26:55,https://api.github.com/repos/google/ExoPlayer/git/commits/47a9609d3f449a94d761492600bd575de217ebb3,47a9609d3f449a94d761492600bd575de217ebb3,Remove cast extension from 2.6.0 release
ojw28,2017-11-17 17:22:17,https://api.github.com/repos/google/ExoPlayer/git/commits/676f3bfc490ad16e4b1dcf75b187c4f1f83f78a7,676f3bfc490ad16e4b1dcf75b187c4f1f83f78a7,"Add MediaSourceTestRunner for MediaSource tests.

- MediaSourceTestRunner aims to encapsulate some of the logic
  currently used in DynamicConcatenatingMediaSourceTest, so it
  can be re-used for testing other MediaSource implementations.
- The change also fixes DynamicConcatenatingMediaSourceTest to
  execute calls on the correct threads, and to release handler
  threads at the end of each test.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176117535"
ojw28,2017-11-17 17:18:06,https://api.github.com/repos/google/ExoPlayer/git/commits/8455d1036641f59e7ab180f3c954e3e31b175f2c,8455d1036641f59e7ab180f3c954e3e31b175f2c,"Simplify LoopingMediaSourceTest setup

This test seems to obtain a timeline from a prepared
FakeMediaSource, but that's identical to the timeline
passed into that source to start with :).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176117133"
erdemguven,2017-11-17 14:33:32,https://api.github.com/repos/google/ExoPlayer/git/commits/00f68b26c965dea7afc3736982398791b13fc99b,00f68b26c965dea7afc3736982398791b13fc99b,"Replace hard coded UUID in OfflineLicenseHelper with a parameter

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176102179"
tonihei,2017-11-17 13:26:58,https://api.github.com/repos/google/ExoPlayer/git/commits/525ae7fed7118edf99cdff5c4f5ca5fb6b23b8e7,525ae7fed7118edf99cdff5c4f5ca5fb6b23b8e7,"Add simplified FakeTimeline constructor.

This is helpful for tests which don't care about detailled timeline set-ups
besides the number of windows.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176097369"
botaydotcom,2017-11-17 11:08:55,https://api.github.com/repos/google/ExoPlayer/git/commits/e349905039646aeeb8e5c5470ce28c4399d7c166,e349905039646aeeb8e5c5470ce28c4399d7c166,"Add Builder to ExtractorMediaSource.

Add Builder pattern to ExtractorMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=176088810"
ojw28,2017-11-16 13:08:44,https://api.github.com/repos/google/ExoPlayer/git/commits/74e74402dac18d1687b1f8f549d269dc661b52d2,74e74402dac18d1687b1f8f549d269dc661b52d2,"Deduplicate ExtractorMediaPeriod discontinuity reporting

This change makes sure progress is being made before reporting
a discontinuity. Else in cases like having no network and
playing a live stream, we allow the discontinuity to be read
each time an internal retry occurs, meaning it gets read
repeatedly. This does no harm, but is noisy and unnecessary.

We should also not allow skipping whilst there is a pending
reset or discontinuity notification, just like we don't allow
reads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175953064"
andrewlewis,2017-11-16 10:03:02,https://api.github.com/repos/google/ExoPlayer/git/commits/b8aedfbf4fa24d9989c0ebcb993ff6fb7e757788,b8aedfbf4fa24d9989c0ebcb993ff6fb7e757788,"Add support for float output for FfmpegAudioRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175940553"
andrewlewis,2017-11-16 09:07:51,https://api.github.com/repos/google/ExoPlayer/git/commits/15a2f47f316d0dc8807af91dacd89faed5ef1cdb,15a2f47f316d0dc8807af91dacd89faed5ef1cdb,"Add support for float output in DefaultAudioSink

Also switch from using MIME types to C.ENCODING_* encodings in DefaultAudioSink.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175936872"
ojw28,2017-11-15 19:13:35,https://api.github.com/repos/google/ExoPlayer/git/commits/8537376a2c6d7a95a2bdeb4d2b523273109dad3d,8537376a2c6d7a95a2bdeb4d2b523273109dad3d,"Update release notes with dev-v2 section

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175852052"
andrewlewis,2017-11-15 17:46:28,https://api.github.com/repos/google/ExoPlayer/git/commits/6db895bd7b4a69fa9208aaa446440e65251d0ce4,6db895bd7b4a69fa9208aaa446440e65251d0ce4,"Use ArrayDeque for playback parameters checkpoints

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175837754"
ojw28,2017-11-15 17:08:32,https://api.github.com/repos/google/ExoPlayer/git/commits/28693ac7d613fedb5f66e97297aaa71f7ce53c92,28693ac7d613fedb5f66e97297aaa71f7ce53c92,"Allow LoadControl to configure the back-buffer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175833398"
ojw28,2017-11-15 11:27:35,https://api.github.com/repos/google/ExoPlayer/git/commits/bd0bc03f643eb95603b8ba97f9439f194891c0ca,bd0bc03f643eb95603b8ba97f9439f194891c0ca,"Inject toKeyframe discard parameter from ExoPlayerImplInternal

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175805139"
botaydotcom,2017-11-15 11:08:11,https://api.github.com/repos/google/ExoPlayer/git/commits/28df0e133b909832feca142e13f63bcd5fa21121,28df0e133b909832feca142e13f63bcd5fa21121,"Add Builder pattern to HlsMediaSource.

Add Builder pattern to HlsMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175803853"
ojw28,2017-11-15 10:19:48,https://api.github.com/repos/google/ExoPlayer/git/commits/5301d3813608ae137d94e511129337619e59fa49,5301d3813608ae137d94e511129337619e59fa49,"Some test cleanup

The purpose of this change isn't to fix anything. It's just to
simplify things a little bit. There will be following CLs that
make some changes to get things onto correct threads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175800354"
tonihei,2017-11-14 16:06:50,https://api.github.com/repos/google/ExoPlayer/git/commits/5aa053d91d7c8c9d06cc5cd103538472a9d4f85c,5aa053d91d7c8c9d06cc5cd103538472a9d4f85c,"Add method to FakeMediaSource to trigger source info refresh.

This allows to remove the LazyMediaSource used within
DynamicConcatenatingMediaSourceTest and also allows to write test which
simulates dynamic timeline or manifest updates.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175680371"
ojw28,2017-11-14 15:14:47,https://api.github.com/repos/google/ExoPlayer/git/commits/22b95032b38613826fe253f0d037b5fd4efad26b,22b95032b38613826fe253f0d037b5fd4efad26b,"Reinstate buffer discard for SmoothStreaming

Now we have a ChunkSampleStream.discardBuffer, we need to call
it from SsMediaPeriod as well as for the DASH case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175675427"
tonihei,2017-11-14 14:17:02,https://api.github.com/repos/google/ExoPlayer/git/commits/b30b7863503cc739c4acf9d1840f29bf460c21c2,b30b7863503cc739c4acf9d1840f29bf460c21c2,"Avoid track group array error-prone reference quality check in CastPlayer.

Also replaced the duplicated EMPTY track group array with the one already defined
in TrackGroupArray.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175670266"
tonihei,2017-11-14 12:08:38,https://api.github.com/repos/google/ExoPlayer/git/commits/244f7a1e332a62b9715218c40a9cf77c779b5af1,244f7a1e332a62b9715218c40a9cf77c779b5af1,"Suppress reference equality warning in EventLogger.

We deliberately compare the track group returned by the track selection
with the track group in the parameter to check if the track selection is
referring to this particular track group.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175660909"
botaydotcom,2017-11-14 11:48:47,https://api.github.com/repos/google/ExoPlayer/git/commits/fee6cf5cd8272168200e6e238237fd29bc5bcc81,fee6cf5cd8272168200e6e238237fd29bc5bcc81,"Continue adding Builder to MediaSource.

Add Builder pattern to SsMediaSource and mark existing constructors as
deprecated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175659618"
tonihei,2017-11-14 11:01:58,https://api.github.com/repos/google/ExoPlayer/git/commits/b865259e6304da7d16e044888971c454451d6154,b865259e6304da7d16e044888971c454451d6154,"Forward ad group and ad index when creating period from concatanted media sources.

Also added tests which verify the intended behaviour.

GitHub:#3452

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175656478"
AquilesCanta,2017-11-13 21:18:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b17ae80679a4ae8c4d1276a47a67019d75b54438,b17ae80679a4ae8c4d1276a47a67019d75b54438,"Fix cenc mode support and add support for the .mp4a extension.

Also add encrypted HLS internal sample streams.

Issue:#1661

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175577648"
ojw28,2017-11-13 17:28:25,https://api.github.com/repos/google/ExoPlayer/git/commits/444358521c9532f5e98f492f3cd5200d4bffd920,444358521c9532f5e98f492f3cd5200d4bffd920,Only set shutter color if attr is declared
nvalletta,2017-11-12 21:23:22,https://api.github.com/repos/google/ExoPlayer/git/commits/427fe668552c2659d94c2e99a766dd7d7349090b,427fe668552c2659d94c2e99a766dd7d7349090b,Add an easy way to set the shutter view background color
yqritc,2017-11-09 01:56:47,https://api.github.com/repos/google/ExoPlayer/git/commits/a573099f93a4a77c7c08f4cb2ee2345446e59b47,a573099f93a4a77c7c08f4cb2ee2345446e59b47,update bravia workaround more precisely
yqritc,2017-11-08 04:41:04,https://api.github.com/repos/google/ExoPlayer/git/commits/2c495502e020041cb999c41e92e375d2a2be808d,2c495502e020041cb999c41e92e375d2a2be808d,add issue link
yqritc,2017-11-08 02:01:47,https://api.github.com/repos/google/ExoPlayer/git/commits/2c8c14d647025817db2a70c3b08763f348907dfd,2c8c14d647025817db2a70c3b08763f348907dfd,add bravia workaround to skip using setOutputSurface in MediaCodec
ojw28,2017-11-13 18:01:30,https://api.github.com/repos/google/ExoPlayer/git/commits/4ac8680b947f6a2d826d916bc49d4a808ce0ea0f,4ac8680b947f6a2d826d916bc49d4a808ce0ea0f,"Update 2.6.0 release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175546817"
ojw28,2017-11-13 17:35:49,https://api.github.com/repos/google/ExoPlayer/git/commits/812ecc3c2dc0d451571c91bc589cca2b4b5b25c6,812ecc3c2dc0d451571c91bc589cca2b4b5b25c6,"Drop the 'r' from release version.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175543465"
ojw28,2017-11-13 17:31:52,https://api.github.com/repos/google/ExoPlayer/git/commits/6e15d5cab7f3de87ca0ef73b5a9974badcdb1711,6e15d5cab7f3de87ca0ef73b5a9974badcdb1711,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175542973"
ojw28,2017-11-13 19:51:51,https://api.github.com/repos/google/ExoPlayer/git/commits/afe6f667b280ede0ef9f25c4727fcfc915017501,afe6f667b280ede0ef9f25c4727fcfc915017501,"Move all buffer discard to MediaPeriod.discardBuffer

This is a step toward retaining a back-buffer in a way that
works for all MediaSource implementations. It's not possible
to adjust the discardBuffer calls in ExoPlayerImplInternal
to discard up to (position - backBufferDurationUs). Next steps
are to:

1. Find an appropriate place to specify the back buffer value,
   to be passed to the discardBuffer calls. I guess the
   LoadControl is the appropriate place to define such values.
2. Enhance discardBuffer to support a toKeyframe argument to
   pass through to discardTo.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175565363"
botaydotcom,2017-11-13 19:10:54,https://api.github.com/repos/google/ExoPlayer/git/commits/67bbbed9fec6860fd267b1c13ad7ed244915b21d,67bbbed9fec6860fd267b1c13ad7ed244915b21d,"Notify TrackSelection when it's enabled and disabled.

Add onEnable() and onDisable() call-backs to TrackSelection. This allows
TrackSelection to perform interesting operations (like subscribe to
NetworkStatus) and clean up after itself.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175558485"
ojw28,2017-11-13 18:01:30,https://api.github.com/repos/google/ExoPlayer/git/commits/d50f7317a282d4f13dd8832c2aa924e6e7516e91,d50f7317a282d4f13dd8832c2aa924e6e7516e91,"Update 2.6.0 release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175546817"
ojw28,2017-11-13 17:35:49,https://api.github.com/repos/google/ExoPlayer/git/commits/96a856c0b54ea5c578234fef4fa09b1eb83d80b9,96a856c0b54ea5c578234fef4fa09b1eb83d80b9,"Drop the 'r' from release version.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175543465"
ojw28,2017-11-13 17:31:52,https://api.github.com/repos/google/ExoPlayer/git/commits/4787ffac9398672cd211e0d7575ac98af8cccb95,4787ffac9398672cd211e0d7575ac98af8cccb95,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175542973"
ojw28,2017-11-13 17:28:25,https://api.github.com/repos/google/ExoPlayer/git/commits/e92667ba5b58cbda9695c8168d3f8fa810da8288,e92667ba5b58cbda9695c8168d3f8fa810da8288,Only set shutter color if attr is declared
ojw28,2017-11-13 17:11:39,https://api.github.com/repos/google/ExoPlayer/git/commits/99d0a7a3da4666654aa75ffca5d930e6ffaa6ed9,99d0a7a3da4666654aa75ffca5d930e6ffaa6ed9,"Merge pull request #3451 from nvalletta/dev-v2-shutter-background-color

Add an easy way to set the shutter view background color"
ojw28,2017-11-13 17:11:24,https://api.github.com/repos/google/ExoPlayer/git/commits/73e96be85c01b9cf9a3c8d08c349f3f4f91b0f09,73e96be85c01b9cf9a3c8d08c349f3f4f91b0f09,"Merge pull request #3440 from yqritc/fix-bravia

Skip using MediaCodec.setOutputSurface on Bravia"
botaydotcom,2017-11-13 15:28:57,https://api.github.com/repos/google/ExoPlayer/git/commits/0be4b46bb486443a3bddd8a9c7e772cc0053ff0f,0be4b46bb486443a3bddd8a9c7e772cc0053ff0f,"Introduce Builder pattern to create MediaSource.

Start with DASH MediaSource. The number of injected arguments is getting
out-of-control.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175529031"
erdemguven,2017-11-09 15:14:21,https://api.github.com/repos/google/ExoPlayer/git/commits/fbfbe7d6c9313b7a9b8fc26e8483989351336320,fbfbe7d6c9313b7a9b8fc26e8483989351336320,"Re-enable index file store at the end of the SimpleCache.initialize()

In the case converting cache files from an earlier version of
SimpleCache, there is no previous version of the index file. If the app
doesn't call any SimpleCache methods which would make the index file
stored before it exists whole data gets lost.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175153650"
tonihei,2017-11-09 11:14:22,https://api.github.com/repos/google/ExoPlayer/git/commits/1331f7adde9b140215ec92b90bea0abcadf94915,1331f7adde9b140215ec92b90bea0abcadf94915,"Add custom callbacks to allows seeks after dynamic playlist modifications.

These callbacks are executed on the app thread after the corresponding
timeline update was triggered. This ensures that seek operations see the
updated timelines and are therefore valid, even if the seek is performed into a
window which didn't exist before.

GitHub:#3407

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175136187"
ojw28,2017-11-08 16:45:17,https://api.github.com/repos/google/ExoPlayer/git/commits/86c0198c8103aab59a563fcea36ec63468e3d450,86c0198c8103aab59a563fcea36ec63468e3d450,"Don't allow cancelation of non-cancelable loads

Issue: #3441

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175011804"
ojw28,2017-11-08 16:34:20,https://api.github.com/repos/google/ExoPlayer/git/commits/e1b3fed5e9a8743e2510c2f9d96af1cbbdece7c6,e1b3fed5e9a8743e2510c2f9d96af1cbbdece7c6,"Add default implementations for ExoMediaDrm.* interfaces

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175010595"
ojw28,2017-11-08 15:56:16,https://api.github.com/repos/google/ExoPlayer/git/commits/681a05d004cee9b66b58d0575f8a3d0e241995ba,681a05d004cee9b66b58d0575f8a3d0e241995ba,"Work around incorrect ClearKey encoding prior to O-MR1

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175006223"
AquilesCanta,2017-11-07 15:50:35,https://api.github.com/repos/google/ExoPlayer/git/commits/52224944ae90b07c04e44cf18b0e0f05ac8744d8,52224944ae90b07c04e44cf18b0e0f05ac8744d8,"Fix DefaultHlsExtractorFactory javadoc

Issue:#2748

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174854541"
ojw28,2017-11-07 15:36:45,https://api.github.com/repos/google/ExoPlayer/git/commits/336c697b9de0851f93a5bff07e2f1d67e4be43b1,336c697b9de0851f93a5bff07e2f1d67e4be43b1,"Update 2.6.0 release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174853112"
botaydotcom,2017-11-07 13:22:48,https://api.github.com/repos/google/ExoPlayer/git/commits/26366f6c8004377d1fff50bafd9af73c3a9b028e,26366f6c8004377d1fff50bafd9af73c3a9b028e,"Fix an issue with seeking that can lead to STATE_END not delivered.

GitHub: #1897

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174841175"
ojw28,2017-11-07 12:30:48,https://api.github.com/repos/google/ExoPlayer/git/commits/3472eda6dc06841c76c2562fa466782b78f1847e,3472eda6dc06841c76c2562fa466782b78f1847e,"Be more robust against load callback failures

Issue: #2795

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174836960"
tonihei,2017-11-07 10:51:43,https://api.github.com/repos/google/ExoPlayer/git/commits/065091cfe3c73ecb7cbe74a63c19d1216700a35a,065091cfe3c73ecb7cbe74a63c19d1216700a35a,"Use helper method to disable Renderers.

Removes duplicated code and starts cleaning up handling of media clocks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174829840"
ojw28,2017-11-06 17:21:01,https://api.github.com/repos/google/ExoPlayer/git/commits/298a66fc0e2fd6c9309b8c526418651673bed5eb,298a66fc0e2fd6c9309b8c526418651673bed5eb,"Relax parsing of ctts sample deltas

Issue: #3384

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174715851"
ojw28,2017-11-06 15:03:09,https://api.github.com/repos/google/ExoPlayer/git/commits/e6e75a536aad6d412dba4d749ea63f91a16726e6,e6e75a536aad6d412dba4d749ea63f91a16726e6,"Don't use InputStream.available in ContentDataSource

Issue: #3426

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174700804"
ojw28,2017-11-06 12:02:06,https://api.github.com/repos/google/ExoPlayer/git/commits/585e70c139de1f9afa8df5ea6a8be76be7e71dbb,585e70c139de1f9afa8df5ea6a8be76be7e71dbb,"Broaden Samsung workaround to API level 25 + J7

Issue: #3257

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174686747"
ojw28,2017-11-06 11:37:16,https://api.github.com/repos/google/ExoPlayer/git/commits/b7f13686965fd321699ade8994501103baed1f10,b7f13686965fd321699ade8994501103baed1f10,"Simplify ContentDataSourceTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174685374"
AquilesCanta,2017-11-03 17:01:15,https://api.github.com/repos/google/ExoPlayer/git/commits/061bcdd136d5dd7a66f6280a920b9139751ff77c,061bcdd136d5dd7a66f6280a920b9139751ff77c,"Allow playback to continue even after SingleSampleMediaPeriod load errors

This prevents users from having to check sideloaded subtitles URLs before
preparing a SingleSampleMediaSource with it.

Issue:#3140

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174475274"
AquilesCanta,2017-11-03 16:36:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c9ede155521ac8da81aa74c2b8ae4c73f27c05b3,c9ede155521ac8da81aa74c2b8ae4c73f27c05b3,"Relax string comparison in DASH parseContentProtection

... by making it case insensitive and null-tolerant for schemeId (as was before
adding playlist drm data merging).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174472123"
tonihei,2017-11-10 16:55:50,https://api.github.com/repos/google/ExoPlayer/git/commits/d2517b258841c32a7b7b2cda9b3bc2324e805946,d2517b258841c32a7b7b2cda9b3bc2324e805946,"Add javadoc to ExoPlayerTestRunner.

Someone must have forgotten to do this when rewriting this class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175296249"
botaydotcom,2017-11-09 18:47:16,https://api.github.com/repos/google/ExoPlayer/git/commits/735af5c0b0ad9466c040ad222cf69dadca63ff43,735af5c0b0ad9466c040ad222cf69dadca63ff43,"Update several minor code/test style issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175180089"
ojw28,2017-11-09 17:58:18,https://api.github.com/repos/google/ExoPlayer/git/commits/eb4e05199fa5d8a417916c9e3e2ca0638cfe0bbf,eb4e05199fa5d8a417916c9e3e2ca0638cfe0bbf,"Expose first index in SampleQueue

This will be needed when retaining a back-buffer. Being able to
query the first index allows us to work out when we've discarded
all samples that were obtained from a particular chunk, which
we'll use to determine when to remove chunks from
ChunkSampleStream.mediaChunks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175172085"
erdemguven,2017-11-09 15:14:21,https://api.github.com/repos/google/ExoPlayer/git/commits/694bd997cb7fe64379fb02e9cc090ae9833697c1,694bd997cb7fe64379fb02e9cc090ae9833697c1,"Re-enable index file store at the end of the SimpleCache.initialize()

In the case converting cache files from an earlier version of
SimpleCache, there is no previous version of the index file. If the app
doesn't call any SimpleCache methods which would make the index file
stored before it exists whole data gets lost.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175153650"
tonihei,2017-11-09 11:14:22,https://api.github.com/repos/google/ExoPlayer/git/commits/04baa42349a88d6d3c10be6cf9e8a8152ccc39e2,04baa42349a88d6d3c10be6cf9e8a8152ccc39e2,"Add custom callbacks to allows seeks after dynamic playlist modifications.

These callbacks are executed on the app thread after the corresponding
timeline update was triggered. This ensures that seek operations see the
updated timelines and are therefore valid, even if the seek is performed into a
window which didn't exist before.

GitHub:#3407

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175136187"
tonihei,2017-11-09 11:01:21,https://api.github.com/repos/google/ExoPlayer/git/commits/6616e6c1a9cf1d96f863b2417fc509b3582d340e,6616e6c1a9cf1d96f863b2417fc509b3582d340e,"Don't check if next period is prepared when ignoring renderer media clock.

When the renderer media clock source read its stream to end but is not ready,
this means one of two things. Either the next period is not prepared yet and
we need to stop the renderers and buffer until it's prepared, or we are
waiting for another track in the current period with a uneven (longer)
duration.

The second case was already covered by this if condition and uses the standalone
clock instead to continue.

The first case now also uses the standalone clock, but it doesn't make a
difference, because both clocks are stopped and still synchronized.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175134975"
botaydotcom,2017-11-08 17:35:11,https://api.github.com/repos/google/ExoPlayer/git/commits/3171c86bdbd65970e3f5f5ce536f1dfc215b8a84,3171c86bdbd65970e3f5f5ce536f1dfc215b8a84,"Supports Out-of-band, in MPD EventStream.

MPD file may include multiple EventStreams in its Periods, which contains Events
that the application may need to handle/respond to.
This change adds support for parsing the EventStream/Event nodes from MPD
file, and exposing these EventStreams as a metadata sample stream that application
can respond in a similar way to other metadata events.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175017697"
ojw28,2017-11-08 16:45:17,https://api.github.com/repos/google/ExoPlayer/git/commits/ed2e4dd91e4a32e7608dbb3fb64edea6df6038dd,ed2e4dd91e4a32e7608dbb3fb64edea6df6038dd,"Don't allow cancelation of non-cancelable loads

Issue: #3441

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175011804"
ojw28,2017-11-08 16:34:20,https://api.github.com/repos/google/ExoPlayer/git/commits/367bb64ba07eb8d50e3f8d7d44b2e4f198eb9fcd,367bb64ba07eb8d50e3f8d7d44b2e4f198eb9fcd,"Add default implementations for ExoMediaDrm.* interfaces

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175010595"
ojw28,2017-11-08 15:56:16,https://api.github.com/repos/google/ExoPlayer/git/commits/acf5247f6e61e552dcf12d29c216c0b8fbc594a2,acf5247f6e61e552dcf12d29c216c0b8fbc594a2,"Work around incorrect ClearKey encoding prior to O-MR1

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=175006223"
AquilesCanta,2017-11-07 17:16:47,https://api.github.com/repos/google/ExoPlayer/git/commits/15543f13b7d10c8280d9560d48346e28112899dc,15543f13b7d10c8280d9560d48346e28112899dc,"Decouple TrackGroups from SampleQueues in HlsSampleStreamWrapper

This CL does not aim to introduce any functionality changes.

Issue:#3149

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174864875"
AquilesCanta,2017-11-07 15:50:35,https://api.github.com/repos/google/ExoPlayer/git/commits/98301467dc14e378aafcc5dc49f31a7f0da37b17,98301467dc14e378aafcc5dc49f31a7f0da37b17,"Fix DefaultHlsExtractorFactory javadoc

Issue:#2748

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174854541"
ojw28,2017-11-07 15:36:45,https://api.github.com/repos/google/ExoPlayer/git/commits/cb72d42e3ef658762f5e13f9ce7ea61b35d92618,cb72d42e3ef658762f5e13f9ce7ea61b35d92618,"Update 2.6.0 release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174853112"
nvalletta,2017-11-12 21:23:22,https://api.github.com/repos/google/ExoPlayer/git/commits/580acb4e2f8e642883dfbd1f08a9ee9c1bbf2581,580acb4e2f8e642883dfbd1f08a9ee9c1bbf2581,Add an easy way to set the shutter view background color
yqritc,2017-11-09 01:56:47,https://api.github.com/repos/google/ExoPlayer/git/commits/d5600b52e17265109ec7e6921959696c5e75a648,d5600b52e17265109ec7e6921959696c5e75a648,update bravia workaround more precisely
yqritc,2017-11-08 04:41:04,https://api.github.com/repos/google/ExoPlayer/git/commits/6f729bdf97d5ebd496f55edc507223b9d5f85583,6f729bdf97d5ebd496f55edc507223b9d5f85583,add issue link
yqritc,2017-11-08 02:01:47,https://api.github.com/repos/google/ExoPlayer/git/commits/73851144ba3455af214bc3f5c9a0d8d9bd216eef,73851144ba3455af214bc3f5c9a0d8d9bd216eef,add bravia workaround to skip using setOutputSurface in MediaCodec
botaydotcom,2017-11-07 13:22:48,https://api.github.com/repos/google/ExoPlayer/git/commits/b60364600b468ad83089af82a3048a1238d358da,b60364600b468ad83089af82a3048a1238d358da,"Fix an issue with seeking that can lead to STATE_END not delivered.

GitHub: #1897

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174841175"
ojw28,2017-11-07 12:30:48,https://api.github.com/repos/google/ExoPlayer/git/commits/7f135f2cda7c4108bcb105a7dfad12e1c13a307d,7f135f2cda7c4108bcb105a7dfad12e1c13a307d,"Be more robust against load callback failures

Issue: #2795

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174836960"
tonihei,2017-11-07 10:51:43,https://api.github.com/repos/google/ExoPlayer/git/commits/f014b67d3e48627dd2cf69f2620349ea39f620de,f014b67d3e48627dd2cf69f2620349ea39f620de,"Use helper method to disable Renderers.

Removes duplicated code and starts cleaning up handling of media clocks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174829840"
ojw28,2017-11-06 17:21:01,https://api.github.com/repos/google/ExoPlayer/git/commits/ea80c3e456a1f7596f13abd8e59e32ce05ab620a,ea80c3e456a1f7596f13abd8e59e32ce05ab620a,"Relax parsing of ctts sample deltas

Issue: #3384

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174715851"
ojw28,2017-11-06 15:03:09,https://api.github.com/repos/google/ExoPlayer/git/commits/2daa098a209bdf52fea41dbe7bc311d39e034551,2daa098a209bdf52fea41dbe7bc311d39e034551,"Don't use InputStream.available in ContentDataSource

Issue: #3426

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174700804"
ojw28,2017-11-06 12:02:06,https://api.github.com/repos/google/ExoPlayer/git/commits/decf437f17d10f53f58a2a0e8f243f0b5b1c2650,decf437f17d10f53f58a2a0e8f243f0b5b1c2650,"Broaden Samsung workaround to API level 25 + J7

Issue: #3257

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174686747"
ojw28,2017-11-06 11:37:16,https://api.github.com/repos/google/ExoPlayer/git/commits/475ea19ae7a859dcc2f1e20f0ce83fe44ba459dc,475ea19ae7a859dcc2f1e20f0ce83fe44ba459dc,"Simplify ContentDataSourceTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174685374"
AquilesCanta,2017-11-03 17:01:15,https://api.github.com/repos/google/ExoPlayer/git/commits/54a2a69b05d7119c82ec89c8c20c05a0e25fade9,54a2a69b05d7119c82ec89c8c20c05a0e25fade9,"Allow playback to continue even after SingleSampleMediaPeriod load errors

This prevents users from having to check sideloaded subtitles URLs before
preparing a SingleSampleMediaSource with it.

Issue:#3140

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174475274"
AquilesCanta,2017-11-03 16:36:43,https://api.github.com/repos/google/ExoPlayer/git/commits/ecaaed96748d6ea70bbca2a9f8566df995dbbfac,ecaaed96748d6ea70bbca2a9f8566df995dbbfac,"Relax string comparison in DASH parseContentProtection

... by making it case insensitive and null-tolerant for schemeId (as was before
adding playlist drm data merging).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174472123"
ojw28,2017-11-03 16:23:21,https://api.github.com/repos/google/ExoPlayer/git/commits/e4a0e977cd06b945d4faf149908dbeb5aa4e0a55,e4a0e977cd06b945d4faf149908dbeb5aa4e0a55,Remove DownloadManager test
ojw28,2017-11-03 16:23:21,https://api.github.com/repos/google/ExoPlayer/git/commits/1cfea625456e4ef66396d6fc94bbd00ec3f2302c,1cfea625456e4ef66396d6fc94bbd00ec3f2302c,Remove DownloadManager test
ojw28,2017-11-03 16:00:45,https://api.github.com/repos/google/ExoPlayer/git/commits/069466988ff0c07e4b698c9fcc04ac14dac3f26d,069466988ff0c07e4b698c9fcc04ac14dac3f26d,"Bump to 2.6.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174467964"
ojw28,2017-11-03 16:00:45,https://api.github.com/repos/google/ExoPlayer/git/commits/b5b87d6a27bbc5286024eec5d840cf7c6e512520,b5b87d6a27bbc5286024eec5d840cf7c6e512520,"Bump to 2.6.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174467964"
AquilesCanta,2017-11-03 15:01:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4630fa2b4c595aeac5e99d98601bb4acc382dc09,4630fa2b4c595aeac5e99d98601bb4acc382dc09,"Propagate codec information from EXT-X-STREAM-INF to EXT-X-MEDIA

This is the first CL in a series to add chunkless preparation support.

Also did a bit a tidying up in HlsSampleStreamWrappen and
HlsMasterPlaylistParserTest.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174461737"
tonihei,2017-11-03 14:46:47,https://api.github.com/repos/google/ExoPlayer/git/commits/dbe0e602ef76f8491e8da41635be3fef2e7b7c50,dbe0e602ef76f8491e8da41635be3fef2e7b7c50,"Use Timeline.getPeriodPosition to resolve period index in ExoPlayerImpl.seekTo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174460558"
AquilesCanta,2017-11-03 14:24:10,https://api.github.com/repos/google/ExoPlayer/git/commits/6ec53f4717df4cfe1fa85fa21a217fe032572823,6ec53f4717df4cfe1fa85fa21a217fe032572823,"Add support for 608/708 captions in HLS+fMP4

This also allows exposing multiple CC channels to any fMP4 extractor client.

Issue:#1661

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174458725"
ojw28,2017-11-03 15:58:09,https://api.github.com/repos/google/ExoPlayer/git/commits/2c7d14cf0f016b6e957681089180d66fa49c8994,2c7d14cf0f016b6e957681089180d66fa49c8994,Merge remote-tracking branch 'origin/release-v2' into dev-v2
erdemguven,2017-11-03 12:32:00,https://api.github.com/repos/google/ExoPlayer/git/commits/872cfc131ad1c1746365e5c358a08f63e6ed33a0,872cfc131ad1c1746365e5c358a08f63e6ed33a0,"Fix unnecessary CachedContentIndex store() calls

First fix, prevents forced rewriting when cipher is set but encrypt is
false.

Second, removes the store() call in SimpleCache.initialize() so
initialization doesn't fail because of CachedContentIndex write issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174450586"
ojw28,2017-11-03 12:09:43,https://api.github.com/repos/google/ExoPlayer/git/commits/d90d04190e3643435fd4b4a3515cbd9fbe784cc1,d90d04190e3643435fd4b4a3515cbd9fbe784cc1,"Allow chunk cancelation only if nothing has been consumed from it.

The mediaChunks.size() > 1 check was supposed to ensure this, and
did roughly the right thing when there was only a single stream
(although it was unnecessarily restrictive in preventing chunk
cancelation for the first chunk, where bytesLoaded != 0 and none
of the samples had been consumed).

Now we have multiple streams the check doesn't do the right thing,
and adding a back-buffer feature will make even more incorrect.
This change switches to checking the condition we actually want
to check directly :).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174449398"
ojw28,2017-11-03 11:03:46,https://api.github.com/repos/google/ExoPlayer/git/commits/b6b09ad40b2151ab40a63e57bbb3a7add36d3e35,b6b09ad40b2151ab40a63e57bbb3a7add36d3e35,"Automated g4 rollback of changelist 173379623.

*** Reason for rollback ***

Breaks setting PlaybackParameters before start of playback

*** Original change description ***

Add support for float output in DefaultAudioSink

Also switch from using MIME types to C.ENCODING_* encodings in DefaultAudioSink.

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174445506"
erdemguven,2017-11-02 16:24:50,https://api.github.com/repos/google/ExoPlayer/git/commits/321bc9c24e847e7368edf836854323e3c6f4ce44,321bc9c24e847e7368edf836854323e3c6f4ce44,"Simplify DownloadService by removing broadcasting

Client can add this functionality by extending DownloadService.

Also made DownloadManager accept multiple listeners. So instead of
broadcast event, client can listen to DownloadManager directly.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174335820"
AquilesCanta,2017-11-02 15:14:29,https://api.github.com/repos/google/ExoPlayer/git/commits/4cb2be2a4641890ab862c8a1e29fc90d5290753b,4cb2be2a4641890ab862c8a1e29fc90d5290753b,"Replace Queue with ArrayDequeue in HlsPlaylistParser

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174327876"
ojw28,2017-11-02 14:31:48,https://api.github.com/repos/google/ExoPlayer/git/commits/9abc1d29741b0d2516c8ce6af058517833b63375,9abc1d29741b0d2516c8ce6af058517833b63375,"Don't call Drawable.setLayoutDirection pre-API-23

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174323423"
ojw28,2017-11-01 18:57:16,https://api.github.com/repos/google/ExoPlayer/git/commits/233a1d165f5c2296e39a9b2fe44fc9f8898a0066,233a1d165f5c2296e39a9b2fe44fc9f8898a0066,"Explicitly document internal onXError are for reporting only

Issue: #3366

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174214690"
ojw28,2017-11-01 18:54:34,https://api.github.com/repos/google/ExoPlayer/git/commits/3021897383162f1520d12b399f848bdd1a688924,3021897383162f1520d12b399f848bdd1a688924,"Allow multiple listeners on TimeBar

Issue: #3406

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174214296"
AquilesCanta,2017-11-01 15:49:57,https://api.github.com/repos/google/ExoPlayer/git/commits/8c424798c44cebf1a5feafa95de7d4fd34e7c1aa,8c424798c44cebf1a5feafa95de7d4fd34e7c1aa,"Fill manifest drm info with media files' pssh when needed

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174185407"
falhassen,2017-10-31 19:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/46172ffd0f473e1ba7c80f75436371bfdddad965,46172ffd0f473e1ba7c80f75436371bfdddad965,"Preserve original  on redirect with the set-cookie flow.

We need to make sure the original header is retained when we redirect.

I filed a request on Cronet to allow headers to be provided to the UrlRequest#followRedirect method:
https://bugs.chromium.org/p/chromium/issues/detail?id=779611

Until that API is changed, i.e., pulled into GMSCore, and most clients are using the version of GMSCore with the API change, we can stick with this approach.

FYI

Cronet generally uses the original headers on redirect:

http://[]

but modifies the headers for these special cases:

hhttp://[]

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174074572"
ojw28,2017-10-31 15:28:06,https://api.github.com/repos/google/ExoPlayer/git/commits/72b679166062019a03694d80d549a5f5bea052ee,72b679166062019a03694d80d549a5f5bea052ee,"Use resolved position for masking when seeking to C.TIME_UNSET

Also fire onPositionDiscontinuity in this case

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174039483"
erdemguven,2017-10-31 15:01:57,https://api.github.com/repos/google/ExoPlayer/git/commits/37d33f58af2889cc8b33b887b4e0ceb67e94ef1a,37d33f58af2889cc8b33b887b4e0ceb67e94ef1a,"Execute DownloadTask threads manually

Instead of using an Executor to run DownloadTasks creates and manages
threads internally.

Also added DownloadThread internal class to better separate the code
that doesn't run on the main thread.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174036872"
ojw28,2017-10-31 13:56:47,https://api.github.com/repos/google/ExoPlayer/git/commits/199b983d42e0cf9c3f3eed68f286cd587cef27ca,199b983d42e0cf9c3f3eed68f286cd587cef27ca,"Split PlaybackInfo into its own file

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=174030901"
ojw28,2017-10-30 17:11:00,https://api.github.com/repos/google/ExoPlayer/git/commits/f150856567747be1f6995b36a40ca133e57efff0,f150856567747be1f6995b36a40ca133e57efff0,"Fix masking step 1

1. Move Timeline/Manifest into PlaybackInfo
2. Don't update externally visible Timeline/Manifest during preparation
3. Ignore MSG_POSITION_DISCONTINUITY during preparation
4. Correctly set masking variables at start of preparation, and use them

Once this change goes in, PlaybackInfo will contain timeline, manifest
and position, which should always be self-consistent with one another.
The next step would then be to move a bunch of logic in ExoPlayerImpl
that derives state from timeline and position into PlaybackInfo, and
split that into its own top level class that can be easily tested to make
sure it never IndexOutOfBounds.

I think we could also replace the masking variables and instead just assign
a new PlaybackInfo to the playbackInfo variable whenever we're doing
something that requires masking. This should be possible because we no
longer update playbackInfo whenever we have pending acks. It would
require allowing PlaybackInfo to mask the window position internally when
the timeline is empty, but I think this is ok, and again is something we
could test pretty easily.

Issue: #3362

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173909791"
AquilesCanta,2017-10-30 12:20:51,https://api.github.com/repos/google/ExoPlayer/git/commits/9b9a294fd883b3c535f087b75836d42638ac63ab,9b9a294fd883b3c535f087b75836d42638ac63ab,"Fix javadoc @see for TrimmingAudioProcessor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173877969"
ojw28,2017-10-30 10:36:48,https://api.github.com/repos/google/ExoPlayer/git/commits/8eee7c0d698f030feb612e62fe0776bd17f35922,8eee7c0d698f030feb612e62fe0776bd17f35922,"Remove apparently unused field

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173871144"
ojw28,2017-10-30 10:04:47,https://api.github.com/repos/google/ExoPlayer/git/commits/8c793184d908b387a3f6856cc518a4d0ccbaf3cf,8c793184d908b387a3f6856cc518a4d0ccbaf3cf,"Fix crash when bad VTT timestamp encountered

Issue: #3396

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173868849"
ojw28,2017-10-27 18:22:59,https://api.github.com/repos/google/ExoPlayer/git/commits/d02e1df4b42edaaaae171c0677730bec677fdc58,d02e1df4b42edaaaae171c0677730bec677fdc58,Clean up VideoFrameReleaseTimeHelper
ojw28,2017-10-27 17:54:38,https://api.github.com/repos/google/ExoPlayer/git/commits/eb54da596dc1321675653e595d0170e44135173a,eb54da596dc1321675653e595d0170e44135173a,"Merge pull request #3345 from drhill/dev-v2_framerate_switch

make videoframereleasetimehelper get refresh rate when it's enabled, "
ojw28,2017-10-27 14:33:34,https://api.github.com/repos/google/ExoPlayer/git/commits/dd5905a9fba3e5f0005560581e53c0384e42e192,dd5905a9fba3e5f0005560581e53c0384e42e192,"Don't query empty timeline for next/previous windows

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173668909"
tonihei,2017-10-27 10:34:50,https://api.github.com/repos/google/ExoPlayer/git/commits/4cf90e32233e135b550673af3b6f1bc2d5dfbb5b,4cf90e32233e135b550673af3b6f1bc2d5dfbb5b,"Fix listener in ImaAdsMediaSource.

As MediaSource listeners now return the MediaSource in on SourceInfoRefreshed,
we need to make sure that media sources wrapping another source don't just
forward the listener, but also provide a listener wrapper. This allows to
inject the wrapper source instance in the callback.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173653307"
ojw28,2017-10-27 10:15:44,https://api.github.com/repos/google/ExoPlayer/git/commits/345084b8feb3a6e49f35593564b3857eb5ae7cab,345084b8feb3a6e49f35593564b3857eb5ae7cab,"Align naming across demo apps.

- Dropped class name prefixes that correspond to whole app name
- Anything that wraps the player is called PlayerManager

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173652288"
tonihei,2017-10-27 08:32:17,https://api.github.com/repos/google/ExoPlayer/git/commits/cd07ff764e42b8485b76952bd796d17fa72fea29,cd07ff764e42b8485b76952bd796d17fa72fea29,"Update gradle tools to 3.0.0 and support library to 27.0.0.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173645345"
falhassen,2017-10-26 13:54:39,https://api.github.com/repos/google/ExoPlayer/git/commits/46bf2540337c20fc51686399dd9f64e356f41900,46bf2540337c20fc51686399dd9f64e356f41900,"Add option for handling ""Set-Cookie"" requests in CronetDataSource.

This time, we avoid using the problematic CookieManager and HttpCookie framework APIs by just forwarding the cookie request only when the client has enabled the feature and the server responds with a ""Set-Cookie"" response header.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173532023"
ojw28,2017-10-26 13:03:25,https://api.github.com/repos/google/ExoPlayer/git/commits/cf38900d20bddbb2dddc245f95ddc39515bc7685,cf38900d20bddbb2dddc245f95ddc39515bc7685,"Simplify non-main demo apps to not care about multi-window

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173528055"
andrewlewis,2017-10-25 16:59:48,https://api.github.com/repos/google/ExoPlayer/git/commits/3602a9a7e41d41f76bfd621b88413873086ec154,3602a9a7e41d41f76bfd621b88413873086ec154,"Allow specifying a Drawable for the TimeBar scrubber

Issue: #3337

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173411321"
falhassen,2017-10-25 14:42:44,https://api.github.com/repos/google/ExoPlayer/git/commits/69e43b6abce57ee344b4e8c9f170075ef5398f3b,69e43b6abce57ee344b4e8c9f170075ef5398f3b,"Automated g4 rollback of changelist 171999924.

*** Reason for rollback ***

CookieManager APIs are fundamentally broken (b/67951242)

*** Original change description ***

Cookie-based validation in CronetDataSource

Using cookie validation from streamer, streamer can enforce that only clients who have the cookie are able to stream the video.

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173396251"
ojw28,2017-10-25 14:00:30,https://api.github.com/repos/google/ExoPlayer/git/commits/3285851147aecca9645a3722f1850aba8e8592a1,3285851147aecca9645a3722f1850aba8e8592a1,"Pass prepareAcks in SourceInfo

This makes it a bit more obvious what's going on during
preparation. In particular, it makes it clear that
MSG_SOURCE_INFO_REFRESHED arrives before MSG_TRACKS_CHANGED.

Issue: #3362

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173392080"
erdemguven,2017-10-25 13:17:28,https://api.github.com/repos/google/ExoPlayer/git/commits/8b3ec4800cd326a60a4baaad1cebffc99d5111e1,8b3ec4800cd326a60a4baaad1cebffc99d5111e1,"Set cause of the exceptions in AtomicFile.startWrite()

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173388899"
ojw28,2017-10-25 11:47:30,https://api.github.com/repos/google/ExoPlayer/git/commits/3c201a04919a7f2c9a598a4c56fc595052d517ef,3c201a04919a7f2c9a598a4c56fc595052d517ef,"Pass MediaSource instance through onSourceInfoRefreshed

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173382423"
ojw28,2017-10-25 11:32:27,https://api.github.com/repos/google/ExoPlayer/git/commits/88b6df1d083eeabd783274b17c706cb09ff027e5,88b6df1d083eeabd783274b17c706cb09ff027e5,"Disable secure DummySurface on Samsung devices on API level 25

Issue: #3373

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173381588"
andrewlewis,2017-10-25 11:01:31,https://api.github.com/repos/google/ExoPlayer/git/commits/7c18baa23f399f800e19317891acd1b208936dc0,7c18baa23f399f800e19317891acd1b208936dc0,"Add support for float output in DefaultAudioSink

Also switch from using MIME types to C.ENCODING_* encodings in DefaultAudioSink.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173379623"
ojw28,2017-10-24 13:13:26,https://api.github.com/repos/google/ExoPlayer/git/commits/ea764b1b792fd0b1d087ce963dad2c9d63e606f8,ea764b1b792fd0b1d087ce963dad2c9d63e606f8,"Fix retry count for live streams in ExtractorMediaPeriod

Also simplify boolean condition in ExtractorMediaSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173247443"
ojw28,2017-10-24 09:27:10,https://api.github.com/repos/google/ExoPlayer/git/commits/e5e984f4c693eaeb25faaeffe25f1700e8501bd0,e5e984f4c693eaeb25faaeffe25f1700e8501bd0,"Re-order events into more of a natural ordering

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173232494"
ojw28,2017-10-23 18:41:11,https://api.github.com/repos/google/ExoPlayer/git/commits/60a81824f58c9bb19021d34e86cef288bce3c7c2,60a81824f58c9bb19021d34e86cef288bce3c7c2,"Clean up IMA demo

Also do some minor cleanup in other demo apps.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173146425"
ojw28,2017-10-23 16:13:44,https://api.github.com/repos/google/ExoPlayer/git/commits/c4f3cad586bf8fc0ee7260058bf8050fb50d3cbf,c4f3cad586bf8fc0ee7260058bf8050fb50d3cbf,"Better behavior if media doesn't support DRM scheme

We don't expect this case to occur, since track selection is
normally expected to check canAcquireSession before selecting
a track. Nevertheless, if an attempt is made to acquire a
session when the media doesn't support the manager's UUID, we
should fail in a more graceful way.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173124170"
ojw28,2017-10-23 15:28:30,https://api.github.com/repos/google/ExoPlayer/git/commits/3289e3e9cbcee9c00e6c2bde1b473841655ce1de,3289e3e9cbcee9c00e6c2bde1b473841655ce1de,"Be robust against provideProvisionResponse throwing unchecked exceptions

Other catch blocks in this class catch everything. This one should
too.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173118891"
andrewlewis,2017-10-23 14:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/43d70bdde977bf4662bb9bee792e8acae2249074,43d70bdde977bf4662bb9bee792e8acae2249074,"Ignore seekTo if an ad is playing

Issue: #3309

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173114842"
ypavlotsky,2017-10-23 14:23:17,https://api.github.com/repos/google/ExoPlayer/git/commits/93423aa8d4cdd10d2e90f8e770abbae30f1e1d0b,93423aa8d4cdd10d2e90f8e770abbae30f1e1d0b,"Moved Exo IMA Demo to ExoPlayer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173112608"
ojw28,2017-10-23 11:16:48,https://api.github.com/repos/google/ExoPlayer/git/commits/82edf01c22db534aef9a355f8c65115c7734bcb1,82edf01c22db534aef9a355f8c65115c7734bcb1,"Re-use single session when multiSession disabled

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173098862"
andrewlewis,2017-10-23 08:23:24,https://api.github.com/repos/google/ExoPlayer/git/commits/9306b24c6566c9dd5013aba1c310a88d0f3b2114,9306b24c6566c9dd5013aba1c310a88d0f3b2114,"Fix some Android Studio inspection warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=173085316"
erdemguven,2017-10-20 13:12:01,https://api.github.com/repos/google/ExoPlayer/git/commits/9568802c6d3c1bbd337eae13aac7326c92fd635c,9568802c6d3c1bbd337eae13aac7326c92fd635c,"Persist DownloadActions in DownloadManager

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172875067"
drhill,2017-10-24 15:19:26,https://api.github.com/repos/google/ExoPlayer/git/commits/208166759124075727fa5fc319b860f1be4561cd,208166759124075727fa5fc319b860f1be4561cd,cleanups for videoframereleasetimehelper
ojw28,2017-10-20 17:54:45,https://api.github.com/repos/google/ExoPlayer/git/commits/ab6f9aea5bbdf414993766308dd808ab660d956b,ab6f9aea5bbdf414993766308dd808ab660d956b,"Merge pull request #3381 from google/dev-v2-r2.5.4

r2.5.4"
drhill,2017-10-20 00:28:17,https://api.github.com/repos/google/ExoPlayer/git/commits/3830307cd3c012ed4e6e5a764793b640ead00e2b,3830307cd3c012ed4e6e5a764793b640ead00e2b,fix not initialized error
drhill,2017-10-19 20:24:07,https://api.github.com/repos/google/ExoPlayer/git/commits/84afad0748125142b3612c5fcd24e31b8d59f2a0,84afad0748125142b3612c5fcd24e31b8d59f2a0,adjustments
ojw28,2017-10-19 16:52:16,https://api.github.com/repos/google/ExoPlayer/git/commits/04862bccc88d5f1c53fe8394c707fcd1fae488a1,04862bccc88d5f1c53fe8394c707fcd1fae488a1,"Bump to 2.5.4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172758309"
ojw28,2017-10-19 16:52:16,https://api.github.com/repos/google/ExoPlayer/git/commits/c2d05f44050c6fb0f068cbfae08667c146f3bcd3,c2d05f44050c6fb0f068cbfae08667c146f3bcd3,"Bump to 2.5.4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172758309"
drhill,2017-10-19 16:49:09,https://api.github.com/repos/google/ExoPlayer/git/commits/feff4d3e0272a9c3594fbb3144ed4453202192ac,feff4d3e0272a9c3594fbb3144ed4453202192ac,fix missing cause of display refresh rate changing between videoframereleasetimehelper constructor and enable being called
andrewlewis,2017-10-18 12:59:14,https://api.github.com/repos/google/ExoPlayer/git/commits/69ec60e0f1406c25705940013c82d80dc4faa158,69ec60e0f1406c25705940013c82d80dc4faa158,"Fix seeking with repeated periods

newPlayingPeriodHolder could be set then updated if seeking to a repeated period
that was loaded more than once. This led to MediaPeriodHolders leaking.

Only set newPlayingPeriodHolder once so that any later holders with the same
period identifier get released.

Also add a regression test. FakeMediaSource checks that all created
MediaPeriods were released when it is released.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172591937"
ojw28,2017-10-18 11:46:05,https://api.github.com/repos/google/ExoPlayer/git/commits/5357726a8cc4765d3d72da61c6f8d0a864b075bd,5357726a8cc4765d3d72da61c6f8d0a864b075bd,"Add some additional device specific workarounds

Issue: #3355
Issue: #3257

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172587141"
ojw28,2017-09-19 16:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e54841436b185007924d5515c00bd2b1ff169bf3,e54841436b185007924d5515c00bd2b1ff169bf3,"Workaround Samsung tablet reboot playing adaptive secure content

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169256059"
AquilesCanta,2017-10-19 10:00:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9ea8a8a7148cdf9adefcbfee109d54e711d1baac,9ea8a8a7148cdf9adefcbfee109d54e711d1baac,"Update HLS sample streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172722536"
andrewlewis,2017-10-19 13:34:02,https://api.github.com/repos/google/ExoPlayer/git/commits/006263e9836ad929f6cfa169a299407f613fdb1c,006263e9836ad929f6cfa169a299407f613fdb1c,"Retain playback position on re-preparation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172736350"
ojw28,2017-10-19 16:28:24,https://api.github.com/repos/google/ExoPlayer/git/commits/64b928e77f605e65a1154eec4d683806e08e7272,64b928e77f605e65a1154eec4d683806e08e7272,Stylistic cleanup
ojw28,2017-10-19 16:23:50,https://api.github.com/repos/google/ExoPlayer/git/commits/28bd4661ed74e0a7d471ce7bbc3c6dca8d40860c,28bd4661ed74e0a7d471ce7bbc3c6dca8d40860c,"Merge pull request #3371 from andymiao858/dev-v2

Fix FLV AVCVIDEOPACKET  CTS Type Issue"
ojw28,2017-10-19 16:23:28,https://api.github.com/repos/google/ExoPlayer/git/commits/24cca8070e8f96d2de62eaea36d1f4bdf72f1ba7,24cca8070e8f96d2de62eaea36d1f4bdf72f1ba7,"Merge pull request #3378 from Miha-x64/patch-2

Removed useless parentheses"
erdemguven,2017-10-19 14:35:51,https://api.github.com/repos/google/ExoPlayer/git/commits/7d0ec68d86dbb0a64365d3ab12fd497c03ed8b4e,7d0ec68d86dbb0a64365d3ab12fd497c03ed8b4e,"Put DownloadTasks on hold until preceding conflicting tasks are complete

Tasks conflict if both of them work on the same media and at least one
of them is remove action.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172741795"
andrewlewis,2017-10-19 13:39:00,https://api.github.com/repos/google/ExoPlayer/git/commits/bb3dea5191088ce13e82f2b614f58f713f38a580,bb3dea5191088ce13e82f2b614f58f713f38a580,"Remove USE_CHORD_PITCH

We have been using USE_CHORD_PITCH == false for a while and the quality of
pitch changes seems fine. It's now possible to set the sample rate too, but
this only works if USE_CHORD_PITCH is false, so remove the constant.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172736631"
andrewlewis,2017-10-19 13:34:02,https://api.github.com/repos/google/ExoPlayer/git/commits/08706f9bfb8d5283d019f55515795677aecb990d,08706f9bfb8d5283d019f55515795677aecb990d,"Retain playback position on re-preparation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172736350"
ojw28,2017-10-19 13:30:50,https://api.github.com/repos/google/ExoPlayer/git/commits/d09f872179d511fb2c620b085734dd06c1b7964e,d09f872179d511fb2c620b085734dd06c1b7964e,"Fix positions passed to TrackSelection

- When transitioning to a new period, the value of bufferedDurationUs
  passed to TrackSelection.updateSelectedTrack was incorrectly set to
  0. It should have been set to correctly reflect buffered media in
  previous periods still being played out.
- This change fixes the issue described above, and also propagates the
  playback position through to this method. The position of the next
  load within the period can be calculated by adding the position and
  bufferedDurationUs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172736101"
AquilesCanta,2017-10-19 10:57:51,https://api.github.com/repos/google/ExoPlayer/git/commits/2cfc478c3ebf3662727cbe38ad5fef7bcddc8a38,2cfc478c3ebf3662727cbe38ad5fef7bcddc8a38,"Allow extractor injection for HLS

Issue:#2748

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172726367"
andrewlewis,2017-10-19 10:21:09,https://api.github.com/repos/google/ExoPlayer/git/commits/49aca6e9ce745f36443e1c5388f0572b4ee1fd58,49aca6e9ce745f36443e1c5388f0572b4ee1fd58,"Fix typo in variable name

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172724250"
AquilesCanta,2017-10-19 10:00:44,https://api.github.com/repos/google/ExoPlayer/git/commits/daf9c8d19a2b6e1d95425af910641896a944e606,daf9c8d19a2b6e1d95425af910641896a944e606,"Update HLS sample streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172722536"
andrewlewis,2017-10-18 14:46:54,https://api.github.com/repos/google/ExoPlayer/git/commits/eb08e1a5c3481057c2672446b50b9e0e565b7895,eb08e1a5c3481057c2672446b50b9e0e565b7895,"Work around AudioTrack Bluetooth connection issue

If connecting a Bluetooth audio device fails, the AudioTrack may be left in a
bad state, where it is not actually playing and its position has jumped back to
zero. Detect and work around this case by resetting the track.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172600912"
ojw28,2017-10-18 13:08:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b8ef1dcc78ed240c7f7535fea193e53d1b5a3867,b8ef1dcc78ed240c7f7535fea193e53d1b5a3867,"Fix MediaPeriod position param Javadoc.

prepare and selectTracks receive the position from which any
loading should start, where-as continueLoading receives the
actual playback position. These are different in the case that
a previous period is still being played out.

Also removed ""relative to the start of the period"" from prepare
documentation because it couldn't really be relative to anything
else.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172592769"
andrewlewis,2017-10-18 12:59:14,https://api.github.com/repos/google/ExoPlayer/git/commits/1e79d6eb849a7e404e7682f24bbdcbd720ab6eda,1e79d6eb849a7e404e7682f24bbdcbd720ab6eda,"Fix seeking with repeated periods

newPlayingPeriodHolder could be set then updated if seeking to a repeated period
that was loaded more than once. This led to MediaPeriodHolders leaking.

Only set newPlayingPeriodHolder once so that any later holders with the same
period identifier get released.

Also add a regression test. FakeMediaSource checks that all created
MediaPeriods were released when it is released.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172591937"
ojw28,2017-10-18 11:46:05,https://api.github.com/repos/google/ExoPlayer/git/commits/fc5e8ee5162757d4a52142f59ec5bf771791af34,fc5e8ee5162757d4a52142f59ec5bf771791af34,"Add some additional device specific workarounds

Issue: #3355
Issue: #3257

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172587141"
andymiao858,2017-10-19 15:18:12,https://api.github.com/repos/google/ExoPlayer/git/commits/69e50a43a8104723fdf2f37d477f27f1f1ee40a5,69e50a43a8104723fdf2f37d477f27f1f1ee40a5,add readSignedInt24 in ParsableByteArray
Miha-x64,2017-10-19 11:23:50,https://api.github.com/repos/google/ExoPlayer/git/commits/276087c532500a191b1559f424cd400e59667e22,276087c532500a191b1559f424cd400e59667e22,Removed useless parentheses
andymiao858,2017-10-19 06:10:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5895884c53a33c8417f231696b27dd9ef30495f7,5895884c53a33c8417f231696b27dd9ef30495f7,Fix bug
andymiao858,2017-10-18 15:03:26,https://api.github.com/repos/google/ExoPlayer/git/commits/4f8f87221ead66dab7610c5c2aa2796f33b3b336,4f8f87221ead66dab7610c5c2aa2796f33b3b336,Fix FLV AVCVIDEOPACKET -> compositionTimeMs Type from UI 24 to SI 24
andrewlewis,2017-10-17 14:33:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ce0a03dbdf8f0d83ac98001805f0c6cea47f6722,ce0a03dbdf8f0d83ac98001805f0c6cea47f6722,"Add an extractor flag for ignoring edit lists

Issue: #3358

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172464053"
ojw28,2017-10-17 10:49:49,https://api.github.com/repos/google/ExoPlayer/git/commits/aa42d3c910fbee0497d94d1896c0748d57794ab5,aa42d3c910fbee0497d94d1896c0748d57794ab5,"We're not playing an ad if the timeline is empty.

Issue: #3334

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172447125"
ojw28,2017-10-13 16:31:00,https://api.github.com/repos/google/ExoPlayer/git/commits/f6d0dae50e4dd21ad6c10a3774db4da6ba1f5f1e,f6d0dae50e4dd21ad6c10a3774db4da6ba1f5f1e,"Workaround/Fix #3351

1. Ignore edit list where the sequence doesn't contain a sync
   sample, rather than failing.
2. Make Mp4Extractor.readAtomPayload so it doesn't try and read
   the same payload twice if a failure occurs parsing it.
3. Make processAtomEnded so that it doesn't pop the moov if
   parsing it fails.

Issue: #3351

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172106244"
andrewlewis,2017-10-17 14:33:19,https://api.github.com/repos/google/ExoPlayer/git/commits/f9249d23eac4d9143f99f2fe5066b93fc96ceb88,f9249d23eac4d9143f99f2fe5066b93fc96ceb88,"Add an extractor flag for ignoring edit lists

Issue: #3358

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172464053"
ojw28,2017-10-17 10:49:49,https://api.github.com/repos/google/ExoPlayer/git/commits/2c10e6f1c3fd1692d8db3d16355648aab92e66f7,2c10e6f1c3fd1692d8db3d16355648aab92e66f7,"We're not playing an ad if the timeline is empty.

Issue: #3334

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172447125"
tonihei,2017-10-17 10:48:15,https://api.github.com/repos/google/ExoPlayer/git/commits/f6821c6d9597389e71a61b3722f2b3d6a1d43b3e,f6821c6d9597389e71a61b3722f2b3d6a1d43b3e,"Split playbacktests mobile_test into multiple version-dependent test targets.

MobileHarness allocates random devices for each test and repeats tests up to 5 times to
account for spurious test failures. Some of our tests automatically pass for SDK versions
below a certain threshold. Thus, even if such a version-guarded test would always fail,
the MobileHarness test is likely to succeed as it only needs one random allocation to a
device with a lower SDK version.

To prevent this behaviour and to make sure all tests are actually run, the mobile_test
target is split into multiple targets one for each minimum SDK version.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172447046"
andrewlewis,2017-10-17 08:00:13,https://api.github.com/repos/google/ExoPlayer/git/commits/ac31dc7c7a83a0cac7314e50369865006ae91359,ac31dc7c7a83a0cac7314e50369865006ae91359,"Allow setting output sample rate in SonicAudioProcessor

This is not really useful with the DefaultAudioSink, but could be used in a
custom AudioSink when mixing audio from sources that have different sample
rates.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172434482"
andrewlewis,2017-10-16 17:04:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e46a7600cf593280ca091423fbdfed4488f7ee12,e46a7600cf593280ca091423fbdfed4488f7ee12,"Document DefaultTimeBar attributes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172339124"
andrewlewis,2017-10-16 15:46:54,https://api.github.com/repos/google/ExoPlayer/git/commits/93563631175d5c2b1856f932b457d94e2ce82c6e,93563631175d5c2b1856f932b457d94e2ce82c6e,"Document load() exceptions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172329677"
AquilesCanta,2017-10-16 15:30:55,https://api.github.com/repos/google/ExoPlayer/git/commits/d0758c93938c6b85fac3ef98c634cb6dec90eb48,d0758c93938c6b85fac3ef98c634cb6dec90eb48,"Fix typo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172328148"
ojw28,2017-09-26 18:09:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e7d6f1a2ce9082169ec5580638675fad8628956b,e7d6f1a2ce9082169ec5580638675fad8628956b,"Prevent unnecessary consecutive playlist loads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170078933"
ojw28,2017-09-26 16:06:36,https://api.github.com/repos/google/ExoPlayer/git/commits/d8ceef1038673ea79195fd18591f0ea55576742e,d8ceef1038673ea79195fd18591f0ea55576742e,Clean up HlsPlaylistTracker
yqritc,2017-09-21 07:01:32,https://api.github.com/repos/google/ExoPlayer/git/commits/98f6e89efd368e17f65a19c02491674b5d7d0092,98f6e89efd368e17f65a19c02491674b5d7d0092,remove space
yqritc,2017-09-21 05:18:59,https://api.github.com/repos/google/ExoPlayer/git/commits/3b8fd4985cd879e9734b775739779efec1b73746,3b8fd4985cd879e9734b775739779efec1b73746,remove keep alive check for updating primary url to avoid redundant playlist loading
yqritc,2017-09-21 03:01:25,https://api.github.com/repos/google/ExoPlayer/git/commits/758de818db009bf0e21372976cf2ffc172523397,758de818db009bf0e21372976cf2ffc172523397,fix primarySnapshotAccessAgeMs
ojw28,2017-10-10 19:39:34,https://api.github.com/repos/google/ExoPlayer/git/commits/e6bf3736122a4a989e85d90b97b70b0451e6fc8f,e6bf3736122a4a989e85d90b97b70b0451e6fc8f,"Allow overriding of DefaultDashChunkSource.getNextChunk

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171718775"
ojw28,2017-10-10 19:40:02,https://api.github.com/repos/google/ExoPlayer/git/commits/04d10ea67db38035d3b7eef9a2111b32c1a88468,04d10ea67db38035d3b7eef9a2111b32c1a88468,"Expose public constructors for FrameworkMediaCrypto

MediaCodecRenderer implementations require DrmSessionManager<FrameworkMediaCrypto>,
but it's currently not possible for an app to provide a custom implementation due
to FrameworkMediaCrypto having a package private constructor. This change exposes
public FrameworkMediaCrypto constructors, hence removing this restriction.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171718853"
ojw28,2017-10-13 18:38:47,https://api.github.com/repos/google/ExoPlayer/git/commits/dbdae4ca25fd023e2d13874ca52236b521c9a8a5,dbdae4ca25fd023e2d13874ca52236b521c9a8a5,"Only parse common-encryption sinf boxes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172124807"
ojw28,2017-10-13 19:40:08,https://api.github.com/repos/google/ExoPlayer/git/commits/feceabadebb7275cc69f85c2854876f3a2045170,feceabadebb7275cc69f85c2854876f3a2045170,Tweak recently merged pull requests
natez0r,2017-10-06 18:35:18,https://api.github.com/repos/google/ExoPlayer/git/commits/1c594b4cdb6c4fd1362c00a9b523b38ed640531c,1c594b4cdb6c4fd1362c00a9b523b38ed640531c,remove reordering playlist parser
natez0r,2017-10-02 19:43:19,https://api.github.com/repos/google/ExoPlayer/git/commits/39cb3f932e984f76494c13ce940a6f8c5b31a57e,39cb3f932e984f76494c13ce940a6f8c5b31a57e,"Allow passing of HlsPlaylistParser to HlsMediaSource.

Also create helper method in HlsMasterPlaylist to allow the copying of
the playlist to another, but with the variants reordered based on a
passed comparator. Also added an implementation of HlsPlaylistParser
which will reorder the variants returned."
AquilesCanta,2017-07-27 13:20:24,https://api.github.com/repos/google/ExoPlayer/git/commits/a7032ede38a1428eb89fdbb34158b7ef77945c77,a7032ede38a1428eb89fdbb34158b7ef77945c77,"Change copyRenditionsList parameters names

Also instantiate the resulting list with a predicted size to minimize
list resizing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163332285"
erdemguven,2017-07-26 15:58:02,https://api.github.com/repos/google/ExoPlayer/git/commits/0a2f485079066e83c9c4b3508da1897eba34f0e9,0a2f485079066e83c9c4b3508da1897eba34f0e9,"Add HlsMasterPlaylist.copy method

Creates a copy of this playlist which includes only the variants identified by the given variantUrls.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163212562"
ojw28,2017-10-16 12:48:46,https://api.github.com/repos/google/ExoPlayer/git/commits/eb5146c39bb15f396cb5bdaa0e051e1b822032f2,eb5146c39bb15f396cb5bdaa0e051e1b822032f2,Merge branch 'release-v2' into dev-v2
ojw28,2017-10-13 19:51:32,https://api.github.com/repos/google/ExoPlayer/git/commits/ebf19c40287ec638ca2140c6ed25b73fa002fe62,ebf19c40287ec638ca2140c6ed25b73fa002fe62,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172133622"
ojw28,2017-10-13 19:40:08,https://api.github.com/repos/google/ExoPlayer/git/commits/12513e9898d99324e45c0a96b0e58df1ece47c7f,12513e9898d99324e45c0a96b0e58df1ece47c7f,Tweak recently merged pull requests
ojw28,2017-10-13 19:29:55,https://api.github.com/repos/google/ExoPlayer/git/commits/e6d8e5b096e0b2cc9a8e5d5e587e763488a4ca06,e6d8e5b096e0b2cc9a8e5d5e587e763488a4ca06,"Merge pull request #3318 from natez0r/pass-playlist-parser

Allow passing of HlsPlaylistParser to HlsMediaSource."
ojw28,2017-10-13 19:29:44,https://api.github.com/repos/google/ExoPlayer/git/commits/40d8b29c9eab8a63706cb3f68f5a47a761eb66f2,40d8b29c9eab8a63706cb3f68f5a47a761eb66f2,"Merge pull request #3328 from ValveSoftware/dev-v2-multiversion

Allow multiple PSSH boxes for same system"
ojw28,2017-10-13 18:38:47,https://api.github.com/repos/google/ExoPlayer/git/commits/cad88512f5c1aae39d90a8f75cf6e2bbb8faf983,cad88512f5c1aae39d90a8f75cf6e2bbb8faf983,"Only parse common-encryption sinf boxes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172124807"
ojw28,2017-10-13 16:31:00,https://api.github.com/repos/google/ExoPlayer/git/commits/2fee010938f9a81ab241b1c7200117d018e46357,2fee010938f9a81ab241b1c7200117d018e46357,"Workaround/Fix #3351

1. Ignore edit list where the sequence doesn't contain a sync
   sample, rather than failing.
2. Make Mp4Extractor.readAtomPayload so it doesn't try and read
   the same payload twice if a failure occurs parsing it.
3. Make processAtomEnded so that it doesn't pop the moov if
   parsing it fails.

Issue: #3351

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172106244"
tonihei,2017-10-13 10:30:29,https://api.github.com/repos/google/ExoPlayer/git/commits/c9ed9366ceebea9f566d406c873338ef596baaba,c9ed9366ceebea9f566d406c873338ef596baaba,"Fix Cronet extension build and test.

Recently added Java 8 features in the cronet extension and the linked native libs
require to enable Java 8 desugaring in gradle. Moreover, junit.assertThrows is not
available in our version and its usage has been replaced by the manual check.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172077967"
tonihei,2017-10-13 08:15:20,https://api.github.com/repos/google/ExoPlayer/git/commits/7038c8fb7052715aa8252f3a9e2cd6a6d63c1002,7038c8fb7052715aa8252f3a9e2cd6a6d63c1002,"Add chunk size variation to fake adaptive data set.

The chunk size of real video data varies around the given average bitrate.
To account for this fact in the fake adaptive data set, the chunk size varies
randomly with a given standard deviation. The standard deviation used for the
BandwidthProfileSimulator is based on the chunk size variation measured on the
1 hour playlist of real media.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=172068110"
tonihei,2017-10-12 17:12:04,https://api.github.com/repos/google/ExoPlayer/git/commits/b71effb7b0b2da1f97e62ba8f4e5b659f13f7f85,b71effb7b0b2da1f97e62ba8f4e5b659f13f7f85,"Fix MobileHarness playback tests.

This change fixes various issues:
 - MobileHarness sometimes allocated devices with SDK < 16. As we have no tests running
   on these SDKs, a new dimension filter for the mobile_test target ensures that only
   devices with SDK >= 16 are selected. A similar filter for SDK version is also added
   to the ABR playback tests to ensure no old devices are selected.
 - DRM specific tests are skipped for Api < 18, but were not able to run because the
   DashTestRunner class tried to link to the MediaDrm constructor. Moved the
   constructor to a seperate Builder class to allow execution on Api levels 16 and 17.
 - DashWidevineOfflineTest also tried to access code for Api >= 18 without checking
   the current level.
 - Action implementations which are waiting for events did not ensure that they have a
   nextAction to wait for. This caused NullPointerExceptions when this next action was
   scheduled.
 - DefaultDrmSession always restored the offline keys when a new license was requested,
   even if the keys were already restored. These repeated slow calls to restoreKeys
   resulted in high numbers of dropped buffers.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171974859"
marcbaechinger,2017-10-12 16:10:00,https://api.github.com/repos/google/ExoPlayer/git/commits/333e745e7bf9d03aa3a4b4fbf83f29dede662c58,333e745e7bf9d03aa3a4b4fbf83f29dede662c58,"show PlaybackControlView when on key event for DPAD center or any direction
and consume event without moving the focus.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171967057"
ojw28,2017-10-11 14:34:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a11c704d27c09ffeb0b50ad51b3911acdd2225fd,a11c704d27c09ffeb0b50ad51b3911acdd2225fd,"Upgrade dependency versions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171819854"
drhill,2017-10-12 18:52:14,https://api.github.com/repos/google/ExoPlayer/git/commits/3a1a032fa81e184c5467ec105838d425a5a7a82e,3a1a032fa81e184c5467ec105838d425a5a7a82e,change to use displaymanager listener for refresh rate updating
drhill,2017-10-12 12:39:06,https://api.github.com/repos/google/ExoPlayer/git/commits/ac3501dd84394bafe9dc14ec2e0a6c04fbfa04a6,ac3501dd84394bafe9dc14ec2e0a6c04fbfa04a6,"make videoframereleasetimehelper get refresh rate when it's enabled, so we can reuse video renderer for multiple clips with different frame rates"
botaydotcom,2017-10-11 10:54:15,https://api.github.com/repos/google/ExoPlayer/git/commits/763f663d019823ea00ae659cda839889648d921e,763f663d019823ea00ae659cda839889648d921e,"Update DefaultTrackSelector to use more conditions when selecting audio track

Update the audio track selection logic in DefaultTrackSelector:

- When forcing lowest bitrate, use bitrate as tie-breaker when track scores are
the same, prefer the lower bitrate.
- Otherwise, use one of the following values as tie-breaker in order:
  - ChannelCount
  - SampleRate
  - BitRate
If the format being checked is within renderer's capabilities, select it if it
has higher tie-break value, else, select it if it has lower tie-break value.

If all tie-break values are the same, prefer the already selected track.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171803092"
ojw28,2017-10-10 19:40:02,https://api.github.com/repos/google/ExoPlayer/git/commits/5d4fa335f98d11c41b5d1e46a4945225545836ce,5d4fa335f98d11c41b5d1e46a4945225545836ce,"Expose public constructors for FrameworkMediaCrypto

MediaCodecRenderer implementations require DrmSessionManager<FrameworkMediaCrypto>,
but it's currently not possible for an app to provide a custom implementation due
to FrameworkMediaCrypto having a package private constructor. This change exposes
public FrameworkMediaCrypto constructors, hence removing this restriction.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171718853"
ojw28,2017-10-10 19:39:34,https://api.github.com/repos/google/ExoPlayer/git/commits/9a6d717a7a0389a57fd0c9c62dc3ae2c072fd2f2,9a6d717a7a0389a57fd0c9c62dc3ae2c072fd2f2,"Allow overriding of DefaultDashChunkSource.getNextChunk

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171718775"
andrewlewis,2017-10-09 14:39:40,https://api.github.com/repos/google/ExoPlayer/git/commits/fc985fe4dabe287d54653aaa3f743607965ac1f8,fc985fe4dabe287d54653aaa3f743607965ac1f8,"Update IMA documentation for AdsLoader

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171533782"
tonihei,2017-10-09 12:51:37,https://api.github.com/repos/google/ExoPlayer/git/commits/030f52b41bb5ae2da5d8e1659af50c58435da57b,030f52b41bb5ae2da5d8e1659af50c58435da57b,"Wait for HandlerThread to terminate after calling quit.

Calling HandlerThread.quit() or .quitSafely() doesn't immediately terminate
the thread. It just instructs the Looper not to accept any new messages and
to terminate at the next opportunity. Added a HandlerThread.join() everywhere
where the intention is to close and release all resources and to stop all
threads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171525241"
andrewlewis,2017-10-09 10:35:45,https://api.github.com/repos/google/ExoPlayer/git/commits/54d3df4b63a6291d8b98bcee67748e78012d0269,54d3df4b63a6291d8b98bcee67748e78012d0269,"Drop to keyframe in LibvpxVideoRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171517156"
andrewlewis,2017-10-09 08:49:56,https://api.github.com/repos/google/ExoPlayer/git/commits/e88716595539ea5034b8bea460ac5aa1ba87a0d1,e88716595539ea5034b8bea460ac5aa1ba87a0d1,"Provide a getter for IMA's AdsLoader

Issue: #3322

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171508635"
erdemguven,2017-10-06 10:25:20,https://api.github.com/repos/google/ExoPlayer/git/commits/10f8192c48dcacfd8aea90c39bb0a3712307a991,10f8192c48dcacfd8aea90c39bb0a3712307a991,"Add ActionFile which stores and loads DownloadActions to/from a file.

This change also replaces individual DownloadAction versions with a
single master version.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171273880"
botaydotcom,2017-10-06 09:56:52,https://api.github.com/repos/google/ExoPlayer/git/commits/d5101d8d461f3d6ff2a87ee638400abf953948d9,d5101d8d461f3d6ff2a87ee638400abf953948d9,"Allow DefaultDRMSession to retry provisioning/key request

For initial DRM provisioning and key request, we allow the requests to be
retried (with increasing delay for each successive retry) before failing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171271384"
tonihei,2017-10-05 10:02:10,https://api.github.com/repos/google/ExoPlayer/git/commits/f73a5bf692a227a4729f4b94f1109e258aaa4399,f73a5bf692a227a4729f4b94f1109e258aaa4399,"Update gradle version to 3.0.0-beta5.

Android Studio refuses to build with the current beta4 version.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171129696"
andrewlewis,2017-10-05 08:36:23,https://api.github.com/repos/google/ExoPlayer/git/commits/20e43ac4f8539229f407700da011d008c253fabd,20e43ac4f8539229f407700da011d008c253fabd,"Allow ads to be paused/resumed

Controls are still hidden while playing ads, but if the app pauses the player,
controls will be shown. During ads, the player is not seekable.

When the player enters the background then returns to the foreground, the
content period may not be prepared, so also cache the content window duration.
This means that if the app reenters the foreground while an ad is paused the
time bar can be populated.

Issue: #3303

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171123428"
andrewlewis,2017-07-14 23:49:09,https://api.github.com/repos/google/ExoPlayer/git/commits/09165ab870132e5fe7a68a94e62b6cbff08899e2,09165ab870132e5fe7a68a94e62b6cbff08899e2,"Rename droppedOutputBufferCount

Now this counter includes input buffers too, which are dropped as part of
skipping to keyframes for catch up.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171119930"
tonihei,2017-10-04 14:59:09,https://api.github.com/repos/google/ExoPlayer/git/commits/331c179a883fe720c394cbb35ca70f5f88151846,331c179a883fe720c394cbb35ca70f5f88151846,"Wait until playback started in certain action schedules.

Some action schedules (especially those for real media with potentially
long initial buffering times) don't wait until the playback started
before executing the rest of the schedule.

Added waitForPlaybackStateChanged(STATE_READY) to all applicable action schedules.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171009434"
tonihei,2017-10-04 14:14:06,https://api.github.com/repos/google/ExoPlayer/git/commits/d7b4f8a645e0751be6c4500ddd185762683be2a1,d7b4f8a645e0751be6c4500ddd185762683be2a1,"Amend seek action in ActionSchedule to optionally wait until playback resumes.

This allows more deterministic action schedules, especially for real media
which may take an arbitrary amount of time to rebuffer after seeking.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=171005231"
andrewlewis,2017-10-04 09:04:03,https://api.github.com/repos/google/ExoPlayer/git/commits/498ff144395b511dbeb1865cc60027cfd456fb26,498ff144395b511dbeb1865cc60027cfd456fb26,"Add @IntDef annotations to DefaultEventListener

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170980737"
andrewlewis,2017-10-04 07:59:14,https://api.github.com/repos/google/ExoPlayer/git/commits/b3d462df398578836139f14cd708230fdf8a9b04,b3d462df398578836139f14cd708230fdf8a9b04,"Catch up video rendering by dropping to keyframes

If the current output buffer is very late and the playback position is in a
later group of pictures, drop all buffers to the keyframe preceding the
playback position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170975259"
andrewlewis,2017-10-03 10:37:26,https://api.github.com/repos/google/ExoPlayer/git/commits/45c1f0838394a386d7e1af4b9ea10d2cbe5dbbee,45c1f0838394a386d7e1af4b9ea10d2cbe5dbbee,"Annotate the content type local

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170831088"
andrewlewis,2017-10-03 10:01:33,https://api.github.com/repos/google/ExoPlayer/git/commits/ad500ca87110d4a43eb1ac56298743f6522278a4,ad500ca87110d4a43eb1ac56298743f6522278a4,"Replace IMA ad state booleans with an @IntDef

imaPausedInAd could only be true when imaPlayingAd was true, so there are only
three possible states.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170827974"
tonihei,2017-10-03 09:46:04,https://api.github.com/repos/google/ExoPlayer/git/commits/5baddfb56a9db55bd87e2dbc296fd9e28d1c9558,5baddfb56a9db55bd87e2dbc296fd9e28d1c9558,"Add onSeekProcessed callback to Player interface.

This is useful to determine when a seek request was processed by the player
and all playback state changes (mostly to BUFFERING) have been performed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170826793"
natez0r,2017-10-06 18:35:18,https://api.github.com/repos/google/ExoPlayer/git/commits/9783fc0924334beab16d1350548e5cce73b9b070,9783fc0924334beab16d1350548e5cce73b9b070,remove reordering playlist parser
natez0r,2017-10-02 19:43:19,https://api.github.com/repos/google/ExoPlayer/git/commits/2f622b8bd8f4d647256613ba012276161a12f1b9,2f622b8bd8f4d647256613ba012276161a12f1b9,"Allow passing of HlsPlaylistParser to HlsMediaSource.

Also create helper method in HlsMasterPlaylist to allow the copying of
the playlist to another, but with the variants reordered based on a
passed comparator. Also added an implementation of HlsPlaylistParser
which will reorder the variants returned."
ojw28,2017-10-02 17:16:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1495b9a47370b95043eaf31aaef56a1e1e0da0ba,1495b9a47370b95043eaf31aaef56a1e1e0da0ba,"Fix stuck playback when media has uneven track end times

* Always assume a renderer is ready if it's read to the end of
  its current stream and there's a subsequent period already
  prepared. This prevents getting stuck when a non-clock renderer
  has a short stream.
* Switch to the standalone clock if the renderer providing the
  media clock has read to the end of its current stream, is no
  longer ready, and there's a subsequent period already prepared.
  This prevents getting stuck when a clock renderer has a short
  stream.
* Remove unnecessary clock synchronization logic (since it would
  need to be made more complicated as a result of this change).
* Don't update the playing period holder when playWhenReady is
  false. This avoids the position jumping to the start of the
  next period when seeking to the very end of the current period
  whilst paused (we still end up showing the first frame of video
  from the next period, but fixing that will have to wait).

Github: #1874

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170717481"
tonihei,2017-10-02 11:37:38,https://api.github.com/repos/google/ExoPlayer/git/commits/7e7fea4068d9b178b463ab74c818d78831c894ca,7e7fea4068d9b178b463ab74c818d78831c894ca,"Add WaitForPlaybackStateChanged action to action schedule.

This works similar to the existing WaitForXXXX actions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170687058"
ojw28,2017-09-30 01:35:39,https://api.github.com/repos/google/ExoPlayer/git/commits/fd576d218960d0ee862c9478ea5586a41646a332,fd576d218960d0ee862c9478ea5586a41646a332,"Smoother PlaybackControlView updates when speed != 1

* If speed <= 0.1, update every second.
* If 0.1 < speed < 1, update approximately once per
  second in real time, aligned so that each second boundary
  in media time has a corresponding updatae.
* If speed == 1, keep existing behavior.
* If 1 < speed <= 5, update every second in media time
* If speed > 5, update every 200ms.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170559037"
tonihei,2017-09-29 08:51:00,https://api.github.com/repos/google/ExoPlayer/git/commits/096d7651d2b2f1636ee128bda05685009212f0fd,096d7651d2b2f1636ee128bda05685009212f0fd,"Execute actions in action schedule immediately.

Run next action immediately without using the handler when the requested
delay is zero. This ensures that no other code can run between these two
actions to improve deterministic test behaviour.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170456852"
tonihei,2017-09-28 17:17:19,https://api.github.com/repos/google/ExoPlayer/git/commits/28173991d18f5d4fef0ed70af61b538956a35c3e,28173991d18f5d4fef0ed70af61b538956a35c3e,"Return requested position when selecting tracks in FakeMediaPeriod.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170360487"
ojw28,2017-09-28 15:04:01,https://api.github.com/repos/google/ExoPlayer/git/commits/a3a9c0f3b0eb5d38702aaecfe4308333ebd273ae,a3a9c0f3b0eb5d38702aaecfe4308333ebd273ae,"Sanity check current position <= written frame position

This avoids spurious position reports following an underrun.

Github: #1874

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170344399"
botaydotcom,2017-07-25 01:37:22,https://api.github.com/repos/google/ExoPlayer/git/commits/7665571ff92a55fd7059ff3e03a3b96c11fb308e,7665571ff92a55fd7059ff3e03a3b96c11fb308e,"Do not copy data to output frame in libvpx unless necessary.

In out libvpx extension, currently we always call vpxGetFrame and copy the data
from the native decoder to output frame. However, if the inputBuffer has
isDecoderOnly set, we can avoid populating the output buffer, but only setting
BUFFER_FLAG_DECODE_ONLY.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170318527"
andrewlewis,2017-09-28 09:32:27,https://api.github.com/repos/google/ExoPlayer/git/commits/60de1574105e2669734237f79e7880b063e45834,60de1574105e2669734237f79e7880b063e45834,"Add a few initial tests for SimpleDecoderAudioRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170318174"
andrewlewis,2017-09-28 07:56:03,https://api.github.com/repos/google/ExoPlayer/git/commits/9c7950f342a9312ea2354df60cf3cdb84efd432c,9c7950f342a9312ea2354df60cf3cdb84efd432c,"Add AudioSink interface and use it from audio renderers

This change allows applications to provide custom AudioSinks, which could be
based on android.media.AudioTrack like AudioTrackAudioSink, or could be
completely custom.

The refactoring is mostly mechanical and shouldn't result in any functionality
changes.

Some android.media.AudioTrack-specific details have to appear in the AudioSink
interface so this change modifies the javadoc on the AudioTrack (now AudioSink)
to note that some methods will have no effect.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170311083"
tonihei,2017-09-27 10:43:18,https://api.github.com/repos/google/ExoPlayer/git/commits/52de36c5ebd52b61f01347ca258fe5336b04b815,52de36c5ebd52b61f01347ca258fe5336b04b815,"Add abstract, default Player event listener.

This allows simplified listener implementations as most listeners
will not listen to all possible notifications.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170177821"
ojw28,2017-09-27 10:14:20,https://api.github.com/repos/google/ExoPlayer/git/commits/55f696e11d6aa3fef22539d2eb998bb19bd0eeb5,55f696e11d6aa3fef22539d2eb998bb19bd0eeb5,"Fix spurious failures due to late decoding.

By default, if a codec is instantiated during an ongoing
playback, ExoPlayer will render the first frame that it
receives (so that there's ""something other than black""
drawn to the surface). This frame is the key-frame before
the current playback position, and may be as much as 5
seconds behind the current position. ExoPlayer then drops
subsequent frames that are late until it's caught up to
the current position again.

For GTS tests that are counting dropped frames, this is
not desirable behavior, since it will cause spurious test
failures in cases where DummySurface is not supported.
This change overrides the default behavior so that the
player instead skips (rather than drops) frames until it's
caught up to the current playback position, and only then
renders the first frame.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170175944"
ojw28,2017-09-26 18:09:45,https://api.github.com/repos/google/ExoPlayer/git/commits/a3be9376509b9802171ae9b1b088b8f17ec2f999,a3be9376509b9802171ae9b1b088b8f17ec2f999,"Prevent unnecessary consecutive playlist loads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=170078933"
ojw28,2017-09-26 16:06:36,https://api.github.com/repos/google/ExoPlayer/git/commits/792f046c02b45fee7a4f6f0f8ce8de41e081334d,792f046c02b45fee7a4f6f0f8ce8de41e081334d,Clean up HlsPlaylistTracker
ojw28,2017-09-26 15:54:47,https://api.github.com/repos/google/ExoPlayer/git/commits/8ee6da1fe974bb850434e37451d38612099155fb,8ee6da1fe974bb850434e37451d38612099155fb,"Merge pull request #3280 from yqritc/fix-primary-playlist-update

Fix primary hls playlist update"
ojw28,2017-09-25 17:44:28,https://api.github.com/repos/google/ExoPlayer/git/commits/b17a6ba51dbdfc5808330ebf0b370e920beee085,b17a6ba51dbdfc5808330ebf0b370e920beee085,"Add TODO to respect FLAG_ALLOW_GZIP in CronetDataSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169927989"
andrewlewis,2017-09-25 09:20:14,https://api.github.com/repos/google/ExoPlayer/git/commits/06f7b6be6ae5e085606cc11e122b861c1bec9d19,06f7b6be6ae5e085606cc11e122b861c1bec9d19,"Use IntDef for AudioTrack.startMediaTimeState

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169880369"
ojw28,2017-09-24 11:57:51,https://api.github.com/repos/google/ExoPlayer/git/commits/505d5cd0a4953e43094759efdd4c6cbc0749bee7,505d5cd0a4953e43094759efdd4c6cbc0749bee7,"Fix a few lint warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169830938"
erdemguven,2017-09-22 13:27:22,https://api.github.com/repos/google/ExoPlayer/git/commits/1f8a8dbfa39d8b50a2465d6b04b5508d799f0d68,1f8a8dbfa39d8b50a2465d6b04b5508d799f0d68,"Add version number to serialized DownloadAction data

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169681768"
AquilesCanta,2017-09-22 10:22:02,https://api.github.com/repos/google/ExoPlayer/git/commits/4fb18453e1dd02e301fa99e73b01c19b58c862a2,4fb18453e1dd02e301fa99e73b01c19b58c862a2,"Add a ""forceLowestBitrate"" option to DefaultTrackSelector

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169668371"
AquilesCanta,2017-09-21 16:18:43,https://api.github.com/repos/google/ExoPlayer/git/commits/25a9177ce36aee20dfa95447695969e98a52b0c0,25a9177ce36aee20dfa95447695969e98a52b0c0,"Deduplicate DefaultTrackSelector javadocs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169552239"
botaydotcom,2017-03-07 05:42:33,https://api.github.com/repos/google/ExoPlayer/git/commits/324339b88f18da30817e69218bc93be8dea51661,324339b88f18da30817e69218bc93be8dea51661,"Tweak live-streaming track selection logic.

Follow-up on the update to ABR logic in AdaptiveTrackSelection for live
streaming case:
- Do not reset liveEdgeTimeUs when user seek to a different position.
- For HlsChunkSource, for non-independent segments, currently the
bufferedDuration calculate will subtract previousChunk's duration. So to make
it work with live-streaming ABR logic, we subtract timeToLiveEdgeUs a similar
amount to compensate for that operation.
- Minor update to DefaultSSChunkSource, only perform TrackSelection when needed
(after checking necessary conditions).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169531275"
erdemguven,2017-09-21 10:42:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d71400d28023ef36e8ac049113c688fec4bc0240,d71400d28023ef36e8ac049113c688fec4bc0240,"Add DashDownloadActionTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169522830"
yqritc,2017-09-21 07:01:32,https://api.github.com/repos/google/ExoPlayer/git/commits/455f9fb9f0fb422652ed3e1771f843db0c1383a1,455f9fb9f0fb422652ed3e1771f843db0c1383a1,remove space
yqritc,2017-09-21 05:18:59,https://api.github.com/repos/google/ExoPlayer/git/commits/cac16f1647be29828c1b404e5de0b6e2577d2e61,cac16f1647be29828c1b404e5de0b6e2577d2e61,remove keep alive check for updating primary url to avoid redundant playlist loading
yqritc,2017-09-21 03:01:25,https://api.github.com/repos/google/ExoPlayer/git/commits/ff2ece56dd9afa7eaf03bdb994e1ef9387fe44a6,ff2ece56dd9afa7eaf03bdb994e1ef9387fe44a6,fix primarySnapshotAccessAgeMs
ojw28,2017-09-20 18:21:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ce7aaab3c6adc8d8b0d6723c0e59441fcca9bce2,ce7aaab3c6adc8d8b0d6723c0e59441fcca9bce2,"Handle bracket params on the end of SmoothStreaming URLs

Issue: #3230

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169421873"
AquilesCanta,2017-09-20 12:38:24,https://api.github.com/repos/google/ExoPlayer/git/commits/6314a0ec82343ee79075e7f8794a69471599b019,6314a0ec82343ee79075e7f8794a69471599b019,"Add support for Widevine encrypted HLS

This includes both cbcs and cenc. Will only work for streams that require a single
pssh.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169382884"
ojw28,2017-09-20 13:59:47,https://api.github.com/repos/google/ExoPlayer/git/commits/1fdc11f2b30547392c6fe6d2485493837d8f41a2,1fdc11f2b30547392c6fe6d2485493837d8f41a2,"Merge pull request #3277 from google/dev-v2-r2.5.3

r2.5.3"
ojw28,2017-09-20 13:49:23,https://api.github.com/repos/google/ExoPlayer/git/commits/a8136cbb991ec3de9407a72e36fb48a1e8f966de,a8136cbb991ec3de9407a72e36fb48a1e8f966de,Rm test class from release
ojw28,2017-09-20 10:37:59,https://api.github.com/repos/google/ExoPlayer/git/commits/eb3cc0b3502a2b4c6ff283ec23aeac07f20e0c6d,eb3cc0b3502a2b4c6ff283ec23aeac07f20e0c6d,"Tweak release notes for 2.5.3

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169374725"
ojw28,2017-09-19 17:04:50,https://api.github.com/repos/google/ExoPlayer/git/commits/48bc420d02d118e7638075e7e41015fa8ae9cf07,48bc420d02d118e7638075e7e41015fa8ae9cf07,"Bump version + release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169257339"
erdemguven,2017-09-19 16:10:35,https://api.github.com/repos/google/ExoPlayer/git/commits/c127a577d7af8e419f0d9308d66951717bbaedeb,c127a577d7af8e419f0d9308d66951717bbaedeb,"Notify span listeners even if index store fails in SimpleCache.removeSpan

This fixes infinite loop in LeastRecentlyUsedCacheEvictor.evictCache when index store fails.

Also made CachedContentIndex not final so it can be mocked and added a package protected SimpleCache
constructor so mock index can be injected.

Issue: #3260

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169249517"
erdemguven,2017-09-19 16:07:04,https://api.github.com/repos/google/ExoPlayer/git/commits/8b43d896f1441c89bf7cec9b79eb8674ddb511e0,8b43d896f1441c89bf7cec9b79eb8674ddb511e0,"Workaround a cipher issue in Android 4.3

[]

Issue: #2755

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169249093"
AquilesCanta,2017-09-19 15:46:04,https://api.github.com/repos/google/ExoPlayer/git/commits/ca4d482b59d74bd4a88e13c5d32558b993b1c966,ca4d482b59d74bd4a88e13c5d32558b993b1c966,"Fix PTS wraparound in HLS+Webvtt

Issue:#2928

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169246424"
erdemguven,2017-09-18 16:39:09,https://api.github.com/repos/google/ExoPlayer/git/commits/06bba08be78bbb8a4c44853eafcf3c099578fecf,06bba08be78bbb8a4c44853eafcf3c099578fecf,"Check if the cache is already empty before trying to evict more span

This case may happen if the max span size is more than the max size the
evictor is configured.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169101093"
AquilesCanta,2017-09-18 12:44:31,https://api.github.com/repos/google/ExoPlayer/git/commits/961f01a850f2879d5eda461f4f431e04347a5e34,961f01a850f2879d5eda461f4f431e04347a5e34,"Fix 2 CEA decoder bugs

1- Avoid dropped buffers by using a PriorityQueue instead of a set.
2- Process the end of stream after non-EOS buffers.

Issue:#3250

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169077365"
andrewlewis,2017-09-15 16:28:28,https://api.github.com/repos/google/ExoPlayer/git/commits/30a04fd14b15f9c329faa1ae137332b7c3de5f0c,30a04fd14b15f9c329faa1ae137332b7c3de5f0c,"Work around broken AAC decoders on Galaxy S6

Issue: #3249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168844850"
andrewlewis,2017-09-14 11:31:17,https://api.github.com/repos/google/ExoPlayer/git/commits/642e95beaaeb57421ee4da43e0b72c3293c3191c,642e95beaaeb57421ee4da43e0b72c3293c3191c,"Workaround the skip ad button not being focused

Issue: #3258

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168669969"
ojw28,2017-09-20 10:37:59,https://api.github.com/repos/google/ExoPlayer/git/commits/26d789e6d3e1160d14cde0d06a7cb0ddbe82a4c7,26d789e6d3e1160d14cde0d06a7cb0ddbe82a4c7,"Tweak release notes for 2.5.3

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169374725"
ojw28,2017-09-20 10:36:32,https://api.github.com/repos/google/ExoPlayer/git/commits/67567ffa6c5d3b5c532eaf2d78874a7ab9932209,67567ffa6c5d3b5c532eaf2d78874a7ab9932209,"TsExtractor: Do less work if payload reader does not exist

There's no reason to perform the discontinuity check or skip
the adaptation field if we don't have a payload reader for
the packet.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169374609"
ojw28,2017-09-12 15:21:43,https://api.github.com/repos/google/ExoPlayer/git/commits/aacfb37dff4671f801872e429074447a466eaa04,aacfb37dff4671f801872e429074447a466eaa04,"De-dupe ACTION_DOWN events

Issue: #3259

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168378650"
ojw28,2017-09-19 17:04:50,https://api.github.com/repos/google/ExoPlayer/git/commits/ed76882271e45f1098ad69f8e796f836d6d193f0,ed76882271e45f1098ad69f8e796f836d6d193f0,"Bump version + release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169257339"
ojw28,2017-09-19 16:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/d346266dc9631a985c662c6c1e444f47bbb12caa,d346266dc9631a985c662c6c1e444f47bbb12caa,"Workaround Samsung tablet reboot playing adaptive secure content

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169256059"
ojw28,2017-09-19 16:48:28,https://api.github.com/repos/google/ExoPlayer/git/commits/89f66924d514732ffa74689d22c97b0fe3c16a38,89f66924d514732ffa74689d22c97b0fe3c16a38,"Use IntDef for MediaCodecRenderer internal states

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169254794"
erdemguven,2017-09-19 16:10:35,https://api.github.com/repos/google/ExoPlayer/git/commits/09248608c08ebd349b5805a9e4685b147c41e55f,09248608c08ebd349b5805a9e4685b147c41e55f,"Notify span listeners even if index store fails in SimpleCache.removeSpan

This fixes infinite loop in LeastRecentlyUsedCacheEvictor.evictCache when index store fails.

Also made CachedContentIndex not final so it can be mocked and added a package protected SimpleCache
constructor so mock index can be injected.

Issue: #3260

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169249517"
erdemguven,2017-09-19 16:07:04,https://api.github.com/repos/google/ExoPlayer/git/commits/8a0e148041ad4368276c407afcc841c6848f8099,8a0e148041ad4368276c407afcc841c6848f8099,"Workaround a cipher issue in Android 4.3

[]

Issue: #2755

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169249093"
AquilesCanta,2017-09-19 15:46:04,https://api.github.com/repos/google/ExoPlayer/git/commits/fed2a1a6eaf8025bc6ff8ff92c78ce7dcabc17d1,fed2a1a6eaf8025bc6ff8ff92c78ce7dcabc17d1,"Fix PTS wraparound in HLS+Webvtt

Issue:#2928

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169246424"
ojw28,2017-09-19 14:44:46,https://api.github.com/repos/google/ExoPlayer/git/commits/5b0e693419c189f76cd0822fb6168311c660658b,5b0e693419c189f76cd0822fb6168311c660658b,"Fix DefaultDashChunkSource.updateLiveEdgeTimeUs

Very subtle, but lastAvailableSegmentNum is shifted by
RepresentationHolder.segmentNumShift. When accessing the
index directly it's necessary to unshift. The easiest way
to do this is to call through the holder, which does this
for you.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169239928"
erdemguven,2017-09-18 16:39:09,https://api.github.com/repos/google/ExoPlayer/git/commits/9bdf1ee944ad8d021cf5a03bbdb399ff768d57d3,9bdf1ee944ad8d021cf5a03bbdb399ff768d57d3,"Check if the cache is already empty before trying to evict more span

This case may happen if the max span size is more than the max size the
evictor is configured.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169101093"
AquilesCanta,2017-09-18 12:44:31,https://api.github.com/repos/google/ExoPlayer/git/commits/5e2c7d967a74fe0ce67b9c57bb391c40935566d1,5e2c7d967a74fe0ce67b9c57bb391c40935566d1,"Fix 2 CEA decoder bugs

1- Avoid dropped buffers by using a PriorityQueue instead of a set.
2- Process the end of stream after non-EOS buffers.

Issue:#3250

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169077365"
erdemguven,2017-09-18 09:42:26,https://api.github.com/repos/google/ExoPlayer/git/commits/8d739067ece566284c76e2e0ac7248c790a602bb,8d739067ece566284c76e2e0ac7248c790a602bb,"Add HlsDownloadTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=169064003"
andrewlewis,2017-09-15 16:28:28,https://api.github.com/repos/google/ExoPlayer/git/commits/457d0ba1b9b9b4995e25d028655867fb4e5821e7,457d0ba1b9b9b4995e25d028655867fb4e5821e7,"Work around broken AAC decoders on Galaxy S6

Issue: #3249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168844850"
AquilesCanta,2017-09-15 14:51:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b2bc4450df84c8c6f6720a508dc08d5249761886,b2bc4450df84c8c6f6720a508dc08d5249761886,"Run cbc1/cbcs tests from API 25 onwards

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168834998"
AquilesCanta,2017-09-15 10:44:41,https://api.github.com/repos/google/ExoPlayer/git/commits/6592a6474e99d0710b0b03454bde750221a73d64,6592a6474e99d0710b0b03454bde750221a73d64,"Improve documentation for SCTE35-related metadata

Also expose break_durations in microseconds instead of 90kHz.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168816992"
ojw28,2017-09-14 18:09:18,https://api.github.com/repos/google/ExoPlayer/git/commits/a3a2fb506ce30bd8a3e02eeea5b4503af2d22d44,a3a2fb506ce30bd8a3e02eeea5b4503af2d22d44,"Provisioning: Fix some (admittedly quite theoretical) issues:

1. Only tell sessions that want provisioning when provisioning occurs.
2. Also propagate failure to provision to these sessions.
3. If a session responsible for provisioning is released, start
   provisioning using another session instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168713918"
ojw28,2017-09-14 17:34:30,https://api.github.com/repos/google/ExoPlayer/git/commits/a479afff5f45f21810e0345f705fb07a14657ca8,a479afff5f45f21810e0345f705fb07a14657ca8,"Fix potential NPE/ThreadSafety issues with MediaDrm listener

- MediaDrmEventListener.onEvent is typically called on the
  app's main thread. mediaDrmHandler is instantiated on the
  playback thread. Hence mediaDrmHandler should be volatile
  to ensure visibility.
- Nulling mediaDrmHandler could result in a NPE in onEvent.
  Instantiate mediaDrmHandler (and don't null it again) to
  avoid this. MediaDrmHandler.handleMessage will correctly
  discard any events for sessions that are now closed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168707938"
andrewlewis,2017-09-14 17:34:22,https://api.github.com/repos/google/ExoPlayer/git/commits/58293abc11a92eb90a0b634e879129d001eec15f,58293abc11a92eb90a0b634e879129d001eec15f,"Remove IMA dependency and add AdsMediaSource

AdsMediaSource lives in the core library so only ImaAdsLoader remains in
the ima extension. AdsMediaSource takes an AdsLoader implementation.

ImaAdsMediaSource is deprecated rather than removed for now.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168707921"
ojw28,2017-09-14 16:35:08,https://api.github.com/repos/google/ExoPlayer/git/commits/0ad39c642d8ff7881d7b3623a82669461c6deb48,0ad39c642d8ff7881d7b3623a82669461c6deb48,"Relax test termination for API level 23 and above

This allows test runs to continue when the activity
is paused (but not stopped), which is in line with
what we do in the demo app's PlayerActivity.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168699521"
andrewlewis,2017-09-14 11:31:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f2aed7186e9c47ddc55456c5f5bbeb5cb3100988,f2aed7186e9c47ddc55456c5f5bbeb5cb3100988,"Workaround the skip ad button not being focused

Issue: #3258

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168669969"
botaydotcom,2017-09-14 11:28:56,https://api.github.com/repos/google/ExoPlayer/git/commits/b3004ab1c302bf9a0e195fc4234b982f2ffee255,b3004ab1c302bf9a0e195fc4234b982f2ffee255,"Do not apply SampleStream skip-ahead for NoSampleRenderer.

Currently, to make transition to next media period seamless, after the renderer
has read until the end of the current SampleStream, we may send it the next
SampleStream so the renderer may read from the next SampleStream ahead of the
transition.
For NoSampleRenderer, we should avoid doing this: skipping ahead for such
renderer doesn't have any benefit (the renderer does not consume data from
SampleStream), and it will change the provided rendererOffsetUs while the
renderer is still rendering from the playing media period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168669800"
tonihei,2017-09-13 16:25:46,https://api.github.com/repos/google/ExoPlayer/git/commits/7d59383cc442d8e443e08732c985b886f8d033a0,7d59383cc442d8e443e08732c985b886f8d033a0,"Add reason to onPositionDiscontinuity.

This allows listeners to easily determine the source of the discontinuity.
Reasons can be period transitions, seeks, and internal reasons.

Listeners still using the deprecated ExoPlayer.EventListener interface were
updated to Player.EventListener.

GitHub: #3252

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168549612"
andrewlewis,2017-09-13 16:08:43,https://api.github.com/repos/google/ExoPlayer/git/commits/872cbec9e13391da31135bf6e1fad280f41c5458,872cbec9e13391da31135bf6e1fad280f41c5458,"Add TrimmingAudioProcessor for gapless

Remove gapless functionality that relies on MediaCodec, and implement this in
an AudioProcessor instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168547487"
botaydotcom,2017-09-13 15:54:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c9591d76179c1fd9f4bd49ab442c5f7f484ee64a,c9591d76179c1fd9f4bd49ab442c5f7f484ee64a,"Added support for No-Sample Renderer.

Currently our Renderer is always associated with and consume data from
some SampleStreams, which were constructed from the provided MediaSource.
There are use-cases, in which the users want to have simple Renderer
implementation that does not consume data from SampleStream at all, but
render using their custom logic at each rendering position - they mostly just
need ExoPlayer to keep track of the playback position and enable/disable the
renderer.
This CL adds support for such Renderer by adding a TRACK_TYPE_NONE.
Renderer of such type will be:
- Associated with null TrackSelection as the result of track-selection
operation.
- Associated with EmptySampleStream.

GitHub: #3212

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168545749"
botaydotcom,2017-09-13 14:25:41,https://api.github.com/repos/google/ExoPlayer/git/commits/5019da3e7b499f50dadfe691af807327e79b5d7c,5019da3e7b499f50dadfe691af807327e79b5d7c,"Update ABR logic in AdaptiveTrackSelection for live streaming case

In live streaming, if the playback position is very close to live edge,
the buffered duration will never reach minDurationForQualityIncreaseMs,
which prevents switching from ever happening. So we will provide the
durationToLiveEdgeUs to AdaptiveTrackSelection in live streaming case,
so it can handle this edge case.

GitHub: #3017

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168535969"
ojw28,2017-09-12 15:21:43,https://api.github.com/repos/google/ExoPlayer/git/commits/39dbb9a7fcaac16704c196187d937b99ba442fd6,39dbb9a7fcaac16704c196187d937b99ba442fd6,"De-dupe ACTION_DOWN events

Issue: #3259

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168378650"
AquilesCanta,2017-09-12 13:18:03,https://api.github.com/repos/google/ExoPlayer/git/commits/f257300d8e770b57a22cc4a9cbf1120943be7e91,f257300d8e770b57a22cc4a9cbf1120943be7e91,"Add tv module for USB tuner support + demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168366847"
ojw28,2017-09-11 18:34:44,https://api.github.com/repos/google/ExoPlayer/git/commits/0adb4502f6476f83cdbfcc8cfb9e4ba4fbde28ce,0adb4502f6476f83cdbfcc8cfb9e4ba4fbde28ce,"Ignore all-zero defaultKid

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168259911"
tonihei,2017-09-11 10:40:58,https://api.github.com/repos/google/ExoPlayer/git/commits/f9661b5373f0a88b131b2bddf84b0acbb8454a25,f9661b5373f0a88b131b2bddf84b0acbb8454a25,"Use Handler callback instead of sleep() to catch InteruptedException.

The sleep used to simulate data load times is ignoring InterruptedExceptions.
(This is intended and in line with SystemClock.sleep()). However, when a
Loader cancels an ongoing load, it uses interrupts. To be able to catch these
and to immediately return from the reading data source, a handler callback
is used instead of the sleep() method which allows interuptable waiting.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168212652"
tonihei,2017-09-11 10:03:05,https://api.github.com/repos/google/ExoPlayer/git/commits/c4bf83dd1a713376e2ba5658de3b1b782a1717ec,c4bf83dd1a713376e2ba5658de3b1b782a1717ec,"Support stop() in FakeExoPlayer and release media properly.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168209817"
tonihei,2017-09-11 08:57:00,https://api.github.com/repos/google/ExoPlayer/git/commits/c1810575506764f7aa8ba0a4ec03f9ea2aa51a24,c1810575506764f7aa8ba0a4ec03f9ea2aa51a24,"Fix bug in ActionSchedule.

When having a repeat() action and another subsequent action,
the next action should only be scheduled once (and not repeatedly).
Thus, the ""next"" pointer in the repeated action needs to be nulled
in the first iteration to prevent repeated scheduling of the next action.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168202212"
tonihei,2017-09-11 08:50:04,https://api.github.com/repos/google/ExoPlayer/git/commits/9a91482a1b3ded48c2c163c53e198dbc870ebd75,9a91482a1b3ded48c2c163c53e198dbc870ebd75,"Release streams in fake adaptive media period.

Releasing the media period should also release the sample streams
to allow resources to be cleaned up.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168201377"
ojw28,2017-09-11 07:25:36,https://api.github.com/repos/google/ExoPlayer/git/commits/75d5adce6fd5ce9b45b74236fb7f9cd93990e8f2,75d5adce6fd5ce9b45b74236fb7f9cd93990e8f2,"Update dependency versions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168194589"
ojw28,2017-09-10 17:38:40,https://api.github.com/repos/google/ExoPlayer/git/commits/9a026671301f8a6f9d987bf689b7df07360c0a28,9a026671301f8a6f9d987bf689b7df07360c0a28,Update README.md
ojw28,2017-09-10 17:29:42,https://api.github.com/repos/google/ExoPlayer/git/commits/2fb09dbb79ffb051adb521a99e0491faf374ff12,2fb09dbb79ffb051adb521a99e0491faf374ff12,"Merge pull request #3253 from google/dev-v2-r2.5.2

r2.5.2"
ojw28,2017-08-17 14:59:29,https://api.github.com/repos/google/ExoPlayer/git/commits/4ce862adf285120709d60c655bf197877259b8d2,4ce862adf285120709d60c655bf197877259b8d2,"Tweak and add READMEs + remove refs to V1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165578518"
andrewlewis,2017-08-17 13:40:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b174bcc173f34b63fde94ca1a1a32ccf0fa7164d,b174bcc173f34b63fde94ca1a1a32ccf0fa7164d,"Update extension README with usage instructions

Issue: #3162

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165572088"
ojw28,2017-09-10 15:39:15,https://api.github.com/repos/google/ExoPlayer/git/commits/9b18130eccce4c9bd6e974e24a0e641b7b1102fc,9b18130eccce4c9bd6e974e24a0e641b7b1102fc,"Bump to 2.5.2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168155713"
ojw28,2017-09-10 15:39:15,https://api.github.com/repos/google/ExoPlayer/git/commits/340d0be40a6a1d744c79245289075b97db26f78e,340d0be40a6a1d744c79245289075b97db26f78e,"Bump to 2.5.2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168155713"
ojw28,2017-08-11 13:27:59,https://api.github.com/repos/google/ExoPlayer/git/commits/4c1fd23d8e8d448a1ce2c688a598953610319a07,4c1fd23d8e8d448a1ce2c688a598953610319a07,"Add possibility of forcing a specific license URL in HttpMediaDrmCallback

Resubmit of https://github.com/google/ExoPlayer/pull/3136

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164971900"
ojw28,2017-09-05 20:06:02,https://api.github.com/repos/google/ExoPlayer/git/commits/24b4cb844b0aedc624ffdf52baabf640c12aa681,24b4cb844b0aedc624ffdf52baabf640c12aa681,"Fix attr inheritance in SimpleExoPlayerView

When creating PlaybackControlView inside SimpleExoPlayerView,
we want certain attributes to be passed through. This lets you
set control attributes on the SimpleExoPlayerView directly. We
don't want all attributes to be propagated though; only our own
custom ones.

Not sure if there's a cleaner way to do this. Pragmatically this
solution seems ... ok :)?

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167619801"
ojw28,2017-09-08 18:14:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a5302be664bf9f1f37477bdc0b70102e24cb98de,a5302be664bf9f1f37477bdc0b70102e24cb98de,"Destroy EGLSurface during DummySurface cleanup

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168020525"
ojw28,2017-09-08 16:42:13,https://api.github.com/repos/google/ExoPlayer/git/commits/09a8c7cd6ef02f7177363dcd4fb96975803c380a,09a8c7cd6ef02f7177363dcd4fb96975803c380a,"Enable rtmp in external demo app with extensions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168007345"
ojw28,2017-09-06 14:26:23,https://api.github.com/repos/google/ExoPlayer/git/commits/ab94bd8b3bdc8185749209f7edce6ce8b2f23fbe,ab94bd8b3bdc8185749209f7edce6ce8b2f23fbe,"Pick up rtmpClient fix

Issue: #3156

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167718081"
ojw28,2017-09-06 13:17:09,https://api.github.com/repos/google/ExoPlayer/git/commits/cdcdea2f98da3f1bfe5d18b4edb14f2437acfba7,cdcdea2f98da3f1bfe5d18b4edb14f2437acfba7,"DecryptionException cleanup + add missing header

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167711928"
ojw28,2017-09-06 12:40:33,https://api.github.com/repos/google/ExoPlayer/git/commits/613950143ce1f891a8803a237badbaa77248b6b5,613950143ce1f891a8803a237badbaa77248b6b5,"Workaround for SurfaceView not being hidden properly

This appears to be fixed in Oreo, but given how harmless
the workaround is we can probably just apply it on all
API levels to be sure.

Issue: #3160

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167709070"
ojw28,2017-09-06 10:51:04,https://api.github.com/repos/google/ExoPlayer/git/commits/8719d41e34af4c9c1bfeb7a5301e5226b3d12eaf,8719d41e34af4c9c1bfeb7a5301e5226b3d12eaf,"Fix position reporting during ads when period has non-zero window offset.

Reporting incorrect positions for ad playbacks was causing IMA to
think the ad wasn't playing, when in fact it was.

Issue: #3180

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167702032"
ojw28,2017-09-05 15:17:44,https://api.github.com/repos/google/ExoPlayer/git/commits/d187d294e517b7025fc5a263d5e5dc15a95b0f52,d187d294e517b7025fc5a263d5e5dc15a95b0f52,"Don't use MediaCodec.setOutputSurface on Nexus 7 with qcom decoder

Issue: #3236

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167581198"
ojw28,2017-09-05 15:03:07,https://api.github.com/repos/google/ExoPlayer/git/commits/2853bf8575ba3a0cc025d43b660f69cbac7394bf,2853bf8575ba3a0cc025d43b660f69cbac7394bf,"Upgrade gradle plugin / wrapper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167579719"
ojw28,2017-09-04 16:57:56,https://api.github.com/repos/google/ExoPlayer/git/commits/8676c4a0f42939d96c5462651f5b2f30a4d9104b,8676c4a0f42939d96c5462651f5b2f30a4d9104b,"Rewrite logic for enabling secure DummySurface

Issue: #3215

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167505797"
ojw28,2017-09-04 16:26:59,https://api.github.com/repos/google/ExoPlayer/git/commits/61ee1f6a27447ca89e3d6a12250d579d13f9a419,61ee1f6a27447ca89e3d6a12250d579d13f9a419,"Be robust against unexpected EOS in WebvttCueParser

Issue: #3228

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167504122"
ojw28,2017-09-04 15:55:20,https://api.github.com/repos/google/ExoPlayer/git/commits/5ceccac63d15ba9ac9b6d8189ae95f71a0f6b6ac,5ceccac63d15ba9ac9b6d8189ae95f71a0f6b6ac,"Additional secure DummySurface device exclusions

Merge: https://github.com/google/ExoPlayer/pull/3225

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167502127"
andrewlewis,2017-09-04 14:28:24,https://api.github.com/repos/google/ExoPlayer/git/commits/3d38e62205e2396864c5f4c45943377b1a38fdcb,3d38e62205e2396864c5f4c45943377b1a38fdcb,"Adding missing license header in IMA build.gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167496569"
andrewlewis,2017-09-04 13:47:03,https://api.github.com/repos/google/ExoPlayer/git/commits/a73601f36f68b867b794b944cdb7da0ccd2ffe7e,a73601f36f68b867b794b944cdb7da0ccd2ffe7e,"Allow EXIF tracks to be exposed

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167493800"
ojw28,2017-09-04 12:32:54,https://api.github.com/repos/google/ExoPlayer/git/commits/65b14baab879fa27ceb2dec5273c9d37ee4c0557,65b14baab879fa27ceb2dec5273c9d37ee4c0557,"Update moe eqiuvalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167488837"
ojw28,2017-09-04 10:34:57,https://api.github.com/repos/google/ExoPlayer/git/commits/92185aa33c1e681a679479dc80cf1f1d4fa2b607,92185aa33c1e681a679479dc80cf1f1d4fa2b607,Minor cleanup to AspectRatioFrameLayout
ojw28,2017-09-04 09:11:00,https://api.github.com/repos/google/ExoPlayer/git/commits/5cb78fa4c7b293b8c2d8cb32065bee9e7d8d21ef,5cb78fa4c7b293b8c2d8cb32065bee9e7d8d21ef,"Fix typo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167474040"
ojw28,2017-08-31 11:13:13,https://api.github.com/repos/google/ExoPlayer/git/commits/d9427750682dbca40a6d41170eed9379e8a29fba,d9427750682dbca40a6d41170eed9379e8a29fba,"Allow more aggressive switching for HLS with independent segments

We currently switch without downloading overlapping segments, but
we do not actually switch more aggressively. This change fixes
this. Note there's an implicit assumption made that if one media
playlist declares independent segments, the others will too. This
is almost certainly true in practice, and if it's not the penalty
isn't too bad (the player may try and switch to a higher quality
variant one segment's worth of buffer too soon).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167120992"
andrewlewis,2017-08-30 17:51:37,https://api.github.com/repos/google/ExoPlayer/git/commits/2d4efffd1208a715536fc0907b641c0677571514,2d4efffd1208a715536fc0907b641c0677571514,"Fix ContentDataSource bytesRemaining calculation

The bytesRemaining didn't always take into account any skipped bytes, which
meant that reaching the end of the file was not correctly detected in read().

Issue: #3216

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167016672"
andrewlewis,2017-08-30 17:20:37,https://api.github.com/repos/google/ExoPlayer/git/commits/e70df7c22007ff67e8c10e4f387dbc30d5f08d61,e70df7c22007ff67e8c10e4f387dbc30d5f08d61,"Use UTF-8 everywhere

UTF-8 is the default charset on Android so this should be a no-op change, but
makes the code portable (in case it runs on another platform).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167011583"
dbrain,2017-08-31 04:31:18,https://api.github.com/repos/google/ExoPlayer/git/commits/219ad8a73e51e3740b0c6bb03ec8f47e42f2f5ae,219ad8a73e51e3740b0c6bb03ec8f47e42f2f5ae,#3215 Additional secure DummySurface device exclusions
Shyri,2017-08-30 14:25:50,https://api.github.com/repos/google/ExoPlayer/git/commits/3137fcd1ca590a615fd5bbbac53f55024c160cdd,3137fcd1ca590a615fd5bbbac53f55024c160cdd,Add support for new codecs parameter string
andrewlewis,2017-08-29 09:15:08,https://api.github.com/repos/google/ExoPlayer/git/commits/64b1566ad4230dd092e40e80a054288366bae051,64b1566ad4230dd092e40e80a054288366bae051,"Use Math.abs in Sonic.java

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166820970"
andrewlewis,2017-08-23 13:53:11,https://api.github.com/repos/google/ExoPlayer/git/commits/bbb030829524a4efd56cb3898a3e4840714dc3cc,bbb030829524a4efd56cb3898a3e4840714dc3cc,"Allow subclasses to customize the MediaFormat

Make getMediaFormat protected so that subclasses can set additional MediaFormat
keys. For example, if the decoder output needs to be read back via an
ImageReader as YUV data it is necessary to set KEY_COLOR_FORMAT to
COLOR_FormatYUV420Flexible.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166195211"
stellabei,2017-08-24 23:13:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b80e3af2c978a482bceb7a8cb6fdfe41998ffe12,b80e3af2c978a482bceb7a8cb6fdfe41998ffe12,Support zoom mode for AspectRatioFrameLayout
stellabei,2017-08-24 21:31:33,https://api.github.com/repos/google/ExoPlayer/git/commits/9aa4aa8ff5667f6e9bce9a112708f6f91dcaea14,9aa4aa8ff5667f6e9bce9a112708f6f91dcaea14,Support aspect ratio fill mode for AspectRatioFrameLayout
ojw28,2017-08-22 14:41:32,https://api.github.com/repos/google/ExoPlayer/git/commits/8524fb343bc353c0ff8d4962320dd980cd8c826f,8524fb343bc353c0ff8d4962320dd980cd8c826f,"Use flavorDimensions for external demo app

- This is soon becoming mandatory.
- It also looks like future versions of com.android.tools.build
  are being distributed via Google's Maven repository.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166058299"
ojw28,2017-08-21 14:26:50,https://api.github.com/repos/google/ExoPlayer/git/commits/cc5cfd46c01afda58b43d0e5b8982ddacbd3a6e8,cc5cfd46c01afda58b43d0e5b8982ddacbd3a6e8,"Handle size==0 in MP4 atoms

Issue: #3191

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165925148"
ojw28,2017-08-21 13:31:41,https://api.github.com/repos/google/ExoPlayer/git/commits/85bc8a08dbb7aa960ec091d2b8cfb4c3a81991a1,85bc8a08dbb7aa960ec091d2b8cfb4c3a81991a1,"Fix broken link + minor doc tweak

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165920927"
tonihei,2017-08-21 10:49:38,https://api.github.com/repos/google/ExoPlayer/git/commits/351b8a60d1ec8c89ca22d85e9f99facd89175fe3,351b8a60d1ec8c89ca22d85e9f99facd89175fe3,"Remove isFirstWindow/isLastWindow from Timeline.

These methods are only used in one place, and offer duplicate
functionality to checking getNext(Previous)WindowIndex == C.INDEX_UNSET.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165910258"
andrewlewis,2017-08-21 07:47:34,https://api.github.com/repos/google/ExoPlayer/git/commits/4c51d386d5864cd7983a36ba683757672635c2d4,4c51d386d5864cd7983a36ba683757672635c2d4,"Allow the app to specify extra ad markers

Issue: #3184

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165895259"
ojw28,2017-08-17 22:13:12,https://api.github.com/repos/google/ExoPlayer/git/commits/47e3b4dc3e66b7174cdc9e4eb9e25261ab5a63bb,47e3b4dc3e66b7174cdc9e4eb9e25261ab5a63bb,Minor style tweaks
dulmandakh,2017-08-09 06:42:58,https://api.github.com/repos/google/ExoPlayer/git/commits/51dac5838da0e3466f36136d13fcaabfdcb89460,51dac5838da0e3466f36136d13fcaabfdcb89460,"expose setPropertyByteArray, setPropertyString

export setPropertyByteArray, setPropertyString of DefaultDrmSessionManager for easy customization."
ojw28,2017-08-17 21:19:41,https://api.github.com/repos/google/ExoPlayer/git/commits/d824aa9db712a57da39201829125a677c90dd925,d824aa9db712a57da39201829125a677c90dd925,"Improve MediaSource/MediaPeriod documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165628229"
AquilesCanta,2017-08-17 15:14:46,https://api.github.com/repos/google/ExoPlayer/git/commits/38bc289e71bc5a2516d6a3ff21076cbf932cf2ea,38bc289e71bc5a2516d6a3ff21076cbf932cf2ea,"Improve FORMAT_UNSUPPORTED_DRM related documentation and logging

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165580016"
ojw28,2017-08-17 14:48:49,https://api.github.com/repos/google/ExoPlayer/git/commits/7e9b1fc8ae793e360b094876175a0fcf3f94ccfe,7e9b1fc8ae793e360b094876175a0fcf3f94ccfe,"Work around issue with Xiaomi JB devices

Issue: #3171

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165577562"
andrewlewis,2017-08-16 11:47:51,https://api.github.com/repos/google/ExoPlayer/git/commits/94a5e9bc3abd955360c61ada39f293079081894d,94a5e9bc3abd955360c61ada39f293079081894d,"Restore the interrupted flag after blocking operations

If the main thread was interrupted during
ExoPlayerImplInternal.blockingSendMessage/release, the interrupted flag was
immediately set but then wait() was called on the next iteration. wait() would
immediately throw InterruptedException, causing the main thread to spin until
the blocking operation completed.

Instead of resetting the flag immediately, reset it after the blocking
operation completes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165426493"
ojw28,2017-08-15 11:45:22,https://api.github.com/repos/google/ExoPlayer/git/commits/0e16c43f0cd73bc6ea00e680bee5f72aa13bf29f,0e16c43f0cd73bc6ea00e680bee5f72aa13bf29f,"Destroy GL context when releasing dummy surface

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165293386"
ojw28,2017-08-15 11:14:24,https://api.github.com/repos/google/ExoPlayer/git/commits/04131a1ee143c44526238cb5685360ce7a491a39,04131a1ee143c44526238cb5685360ce7a491a39,"Update instructions to include Google Maven repository

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165291982"
ojw28,2017-08-15 11:06:29,https://api.github.com/repos/google/ExoPlayer/git/commits/a2a2acfd6a5ded91bcd37aa15ad0be7ed1fa6d83,a2a2acfd6a5ded91bcd37aa15ad0be7ed1fa6d83,"Disable secure dummy surface on all Samsung N devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165291627"
stellabei,2017-08-17 18:01:42,https://api.github.com/repos/google/ExoPlayer/git/commits/7bde58a46d3c992ba17d8016223d8ba41a42f486,7bde58a46d3c992ba17d8016223d8ba41a42f486,Support crop mode for AspectRatioFrameLayout
dbrain,2017-08-17 11:30:46,https://api.github.com/repos/google/ExoPlayer/git/commits/85d6c0f0a9ec7159880db6d5f7598409a85e9032,85d6c0f0a9ec7159880db6d5f7598409a85e9032,Fix possible subrip timing line NPE
WeiChungChang,2017-08-17 05:49:41,https://api.github.com/repos/google/ExoPlayer/git/commits/44fa0b446ebf1c4008e9e5e1dda1df4fafd4ef13,44fa0b446ebf1c4008e9e5e1dda1df4fafd4ef13,Support H262 video in MP4
ojw28,2017-08-11 14:47:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b9ead4b7d1a89b6cbcdcf9d50688e9f9e6d1c6fe,b9ead4b7d1a89b6cbcdcf9d50688e9f9e6d1c6fe,Restrict usage of secure DummySurface for all Samsung devices.
ojw28,2017-08-10 11:45:40,https://api.github.com/repos/google/ExoPlayer/git/commits/1f20e6f31ed0a8f4755be4e188632e27076a98fb,1f20e6f31ed0a8f4755be4e188632e27076a98fb,"Fix maskingX variables when timeline becomes empty

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164840037"
ojw28,2017-08-10 11:42:27,https://api.github.com/repos/google/ExoPlayer/git/commits/99f603c404302c4b0073e0111ba4a1422ad91d5b,99f603c404302c4b0073e0111ba4a1422ad91d5b,"Support multiple video/text/metadata outputs

We've seen more than one issue filed where a developer has
registered a video listener and been confused by the fact
their SimpleExoPlayerView no longer works properly. There
are also valid use cases for having multiple metadata/text
outputs.

Issue: #2933
Issue: #2800
Issue: #2286
Issue: #2240

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164839882"
marcbaechinger,2017-08-09 21:35:38,https://api.github.com/repos/google/ExoPlayer/git/commits/cf6c247bec92a17e2126b8a47be80cefa8f99e87,cf6c247bec92a17e2126b8a47be80cefa8f99e87,"set mediaSession flags properly and keep queue in sync when timeline changes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164774783"
ojw28,2017-08-09 10:27:13,https://api.github.com/repos/google/ExoPlayer/git/commits/5fedbf76db277bb2bb39ddba5a00f3d8cff66b51,5fedbf76db277bb2bb39ddba5a00f3d8cff66b51,"Document usage of the RTMP extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164706135"
ojw28,2017-08-09 10:26:18,https://api.github.com/repos/google/ExoPlayer/git/commits/154f17ef1e8abbcd7c3a006378dd1935748e186a,154f17ef1e8abbcd7c3a006378dd1935748e186a,"Fix minor Javadoc error

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164706078"
ojw28,2017-08-09 10:21:25,https://api.github.com/repos/google/ExoPlayer/git/commits/bc0829503acd094d58fecb6bde64f4b734654c5d,bc0829503acd094d58fecb6bde64f4b734654c5d,"Clean up terminology for MediaSession extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164705750"
ojw28,2017-08-08 17:54:06,https://api.github.com/repos/google/ExoPlayer/git/commits/74e8acf14f23fc60abe7c0a06dd3c03eeb3e2316,74e8acf14f23fc60abe7c0a06dd3c03eeb3e2316,"Minimal change to expose segment indices in DefaultDashChunkSource

Issue: #3037

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164614478"
ojw28,2017-09-08 18:14:53,https://api.github.com/repos/google/ExoPlayer/git/commits/5a4155f09fee738da4ebd024a4f1b0a071d0fd42,5a4155f09fee738da4ebd024a4f1b0a071d0fd42,"Destroy EGLSurface during DummySurface cleanup

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168020525"
ojw28,2017-09-08 16:42:13,https://api.github.com/repos/google/ExoPlayer/git/commits/40d443dc027c7a3e6ba45dd62ef6777906197dc1,40d443dc027c7a3e6ba45dd62ef6777906197dc1,"Enable rtmp in external demo app with extensions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=168007345"
tonihei,2017-09-08 14:54:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ec38d0d8ab8cc0d810d16d052fbf700b8fc603d8,ec38d0d8ab8cc0d810d16d052fbf700b8fc603d8,"Check thread is still alive before sending message in Loader.

The release callback handler in Loader might not be alive
anymore. Catch this case to prevent warnings about sending
messages on dead threads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167996538"
tonihei,2017-09-08 14:34:07,https://api.github.com/repos/google/ExoPlayer/git/commits/8f43dcd424c02ae15ceae578764d620409506a06,8f43dcd424c02ae15ceae578764d620409506a06,"Clear buffer in fake renderer in each iteration.

This simulates reading from the buffer (which is what actual
renderers would do). Otherwise the buffer always gets expanded
and might cause memory issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167994899"
tonihei,2017-09-08 11:05:38,https://api.github.com/repos/google/ExoPlayer/git/commits/b2627d63fdb0215f65096ef2fe0c8e47c341e4a2,b2627d63fdb0215f65096ef2fe0c8e47c341e4a2,"Allow ExoPlayerTestRunner to end when Player.stop() is called.

In this case the playback state transitions to IDLE, which isn't
caught so far. (This code is equivalent to the one in ExoHostedTest.java)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167980981"
andrewlewis,2017-09-07 08:45:56,https://api.github.com/repos/google/ExoPlayer/git/commits/7c3fe19d3f5e0a08d855d4564c5c09d9e41d2ba2,7c3fe19d3f5e0a08d855d4564c5c09d9e41d2ba2,"Migrate remaining tests to Robolectric

Remaining instrumentation tests either use android.os.Handler or rely on assets.
In the latter case, the tests are difficult to migrate due to differences
between the internal and external build systems, and configuration needed in
Android Studio. In addition, SimpleCacheSpanTest remains as an instrumentation
test because it fails due to a problem with string encoding on the internal
build (and two other tests in its package are kept with it because they depend
on it).

This test removes a dependency from testutils on Mockito, as a different
version of Mockito needs to be used for instrumentation tests vs Robolectric
tests, yet both sets of tests need to rely on testutils. Mockito setup is now
done directly in the tests that need it.

Move OggTestData to testutils so it can be used from both instrumentation and
Robolectric tests.

It may be possible to simplify assertions further using Truth but this is left
for possible later changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167831435"
ojw28,2017-09-06 18:05:37,https://api.github.com/repos/google/ExoPlayer/git/commits/7053284b02aa0c05cce9ac3c47d9725b046b0cb7,7053284b02aa0c05cce9ac3c47d9725b046b0cb7,Merge branch 'release-v2' into dev-v2
ojw28,2017-09-06 14:26:23,https://api.github.com/repos/google/ExoPlayer/git/commits/4869a2506960899a94215df1fbf536e6542ac984,4869a2506960899a94215df1fbf536e6542ac984,"Pick up rtmpClient fix

Issue: #3156

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167718081"
ojw28,2017-09-06 14:22:00,https://api.github.com/repos/google/ExoPlayer/git/commits/7d4190f3c84a223d189d5f0689778b1b047da886,7d4190f3c84a223d189d5f0689778b1b047da886,"Regroup final/non-final vars

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167717715"
ojw28,2017-09-06 13:17:09,https://api.github.com/repos/google/ExoPlayer/git/commits/c6fa034eba88fe1a7fc62aae3288006ff4f3ad6d,c6fa034eba88fe1a7fc62aae3288006ff4f3ad6d,"DecryptionException cleanup + add missing header

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167711928"
ojw28,2017-09-06 13:10:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d66143d96d3fab350ed67d437acfc927667001ae,d66143d96d3fab350ed67d437acfc927667001ae,"Add full stops

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167711267"
ojw28,2017-09-06 12:58:56,https://api.github.com/repos/google/ExoPlayer/git/commits/e7992513d3494c273cba15e97a9292527f46f668,e7992513d3494c273cba15e97a9292527f46f668,"Remove references to MediaDrm from DefaultDrmSession classes

Everything should go through the ExoMediaDrm layer. We still
need to abstract away the android.media exception classes, but
this is left as future work.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167710213"
ojw28,2017-09-06 12:40:33,https://api.github.com/repos/google/ExoPlayer/git/commits/013379fd3ee299ab6f24e8d42686af13249d54c2,013379fd3ee299ab6f24e8d42686af13249d54c2,"Workaround for SurfaceView not being hidden properly

This appears to be fixed in Oreo, but given how harmless
the workaround is we can probably just apply it on all
API levels to be sure.

Issue: #3160

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167709070"
ojw28,2017-09-06 10:51:04,https://api.github.com/repos/google/ExoPlayer/git/commits/17232f58a339809279c0d7f8432a8014ce72309b,17232f58a339809279c0d7f8432a8014ce72309b,"Fix position reporting during ads when period has non-zero window offset.

Reporting incorrect positions for ad playbacks was causing IMA to
think the ad wasn't playing, when in fact it was.

Issue: #3180

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167702032"
andrewlewis,2017-09-06 07:14:55,https://api.github.com/repos/google/ExoPlayer/git/commits/8ef6a2e7bd4f10c4e1600b67bfc94a1ab00865b7,8ef6a2e7bd4f10c4e1600b67bfc94a1ab00865b7,"Clear gapless playback metadata for clipped media

Also pass an unresolved end point to ClippingMediaPeriod. This removes some
assertions checking timestamps in the ClippingMediaPeriod, but makes it
possible to identify when the end point is at the end of the media.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167683358"
ojw28,2017-09-05 20:06:02,https://api.github.com/repos/google/ExoPlayer/git/commits/fb023da529d9d86ec2f7c921dae7ba084fa50e5c,fb023da529d9d86ec2f7c921dae7ba084fa50e5c,"Fix attr inheritance in SimpleExoPlayerView

When creating PlaybackControlView inside SimpleExoPlayerView,
we want certain attributes to be passed through. This lets you
set control attributes on the SimpleExoPlayerView directly. We
don't want all attributes to be propagated though; only our own
custom ones.

Not sure if there's a cleaner way to do this. Pragmatically this
solution seems ... ok :)?

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167619801"
andrewlewis,2017-09-05 15:47:02,https://api.github.com/repos/google/ExoPlayer/git/commits/e16610a82c696b6121301c792c7f04d5e36a37c7,e16610a82c696b6121301c792c7f04d5e36a37c7,"Fix import formatting

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167584287"
tonihei,2017-09-05 15:32:56,https://api.github.com/repos/google/ExoPlayer/git/commits/8413dab9dec518a3311762747084fac83d6e03c4,8413dab9dec518a3311762747084fac83d6e03c4,"Use clock in action schedule to handle delays.

This allows to use a fake clock and an action schedule with timed delays
together.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167582860"
ojw28,2017-09-05 15:17:44,https://api.github.com/repos/google/ExoPlayer/git/commits/0183a83047360f3bf2c60b2180ce356c75b454da,0183a83047360f3bf2c60b2180ce356c75b454da,"Don't use MediaCodec.setOutputSurface on Nexus 7 with qcom decoder

Issue: #3236

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167581198"
ojw28,2017-09-05 15:03:07,https://api.github.com/repos/google/ExoPlayer/git/commits/a90cef0cb5e581757b43264e923e06653cda183e,a90cef0cb5e581757b43264e923e06653cda183e,"Upgrade gradle plugin / wrapper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167579719"
tonihei,2017-09-05 12:50:43,https://api.github.com/repos/google/ExoPlayer/git/commits/2f4a3fe1f3a95ed9a8029c6e3d21e537852bc271,2f4a3fe1f3a95ed9a8029c6e3d21e537852bc271,"Add postDelayed operation to Clock interface.

The default implementation is just calling through to handler.postDelayed,
while the fake clock uses its internal time value to trigger the handler
calls at the correct time.

This is useful to apply a fake clock in situations where a handler is used to
post delayed messages.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167567914"
tonihei,2017-09-05 12:23:22,https://api.github.com/repos/google/ExoPlayer/git/commits/264f1c903def8a4f8ec7b65d52478470fc8a6358,264f1c903def8a4f8ec7b65d52478470fc8a6358,"Fix bug in FakeChunkSource.

In order to retrieve the data set, the track selection index was used, but
the data set is actually indexed by track group indices.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167566049"
ojw28,2017-09-04 16:57:56,https://api.github.com/repos/google/ExoPlayer/git/commits/bec5e6e2b2b59290963f7a22a6d005c8dac467e5,bec5e6e2b2b59290963f7a22a6d005c8dac467e5,"Rewrite logic for enabling secure DummySurface

Issue: #3215

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167505797"
ojw28,2017-09-04 16:26:59,https://api.github.com/repos/google/ExoPlayer/git/commits/a0df5bb50a817bf99c335be2479ab9293ec735bf,a0df5bb50a817bf99c335be2479ab9293ec735bf,"Be robust against unexpected EOS in WebvttCueParser

Issue: #3228

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167504122"
ojw28,2017-09-04 15:55:20,https://api.github.com/repos/google/ExoPlayer/git/commits/472df08f0837ebbdcd0b1c7e8269ad816b13269b,472df08f0837ebbdcd0b1c7e8269ad816b13269b,"Additional secure DummySurface device exclusions

Merge: https://github.com/google/ExoPlayer/pull/3225

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167502127"
andrewlewis,2017-09-04 14:28:24,https://api.github.com/repos/google/ExoPlayer/git/commits/c9f31a41cd45bfe0a522ee77dfbe1af8ffd97442,c9f31a41cd45bfe0a522ee77dfbe1af8ffd97442,"Adding missing license header in IMA build.gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167496569"
botaydotcom,2017-09-04 13:55:07,https://api.github.com/repos/google/ExoPlayer/git/commits/0d86f4475c4b30e5a1a0ac55a5479ca680fc2096,0d86f4475c4b30e5a1a0ac55a5479ca680fc2096,"Remove the resampling to 16bit step from FlacDecoder.

Currently FlacDecoder/FlacExtractor always perform resampling to 16bit. In some
case (with 24bit audio), this might lower the audio quality if the system
supports 24bit audio.
Since AudioTrack implementation supports resampling, we will remove the
resampling step, and return an output with the same bits-per-sample as the original stream.
User can choose to re-sample to 16bit in AudioTrack if necessary.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167494350"
andrewlewis,2017-09-04 13:47:03,https://api.github.com/repos/google/ExoPlayer/git/commits/bab2ce817e76431243aab61cb40425d163c3141d,bab2ce817e76431243aab61cb40425d163c3141d,"Allow EXIF tracks to be exposed

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167493800"
ojw28,2017-09-04 12:32:54,https://api.github.com/repos/google/ExoPlayer/git/commits/ab1e4df11aefe71c8069730ad5a9300733440f25,ab1e4df11aefe71c8069730ad5a9300733440f25,"Update moe eqiuvalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167488837"
ojw28,2017-09-04 14:28:50,https://api.github.com/repos/google/ExoPlayer/git/commits/0da8e1af6727aa0708ae498c83652957874e6628,0da8e1af6727aa0708ae498c83652957874e6628,"Merge pull request #3225 from dbrain/3215_additional_dummy_secure_surface_exclusions

#3215 Additional secure DummySurface device exclusions"
ojw28,2017-09-04 10:34:57,https://api.github.com/repos/google/ExoPlayer/git/commits/74b8c45e6dd9c13ed9a32a1aad1ce795535b2ac2,74b8c45e6dd9c13ed9a32a1aad1ce795535b2ac2,Minor cleanup to AspectRatioFrameLayout
ojw28,2017-09-04 09:33:02,https://api.github.com/repos/google/ExoPlayer/git/commits/1a6a6c901fb0e2442049a0eb6faeb7954a9356ee,1a6a6c901fb0e2442049a0eb6faeb7954a9356ee,"Merge pull request #3223 from Shyri/vp09-support

Add support for new codecs parameter string"
ojw28,2017-09-04 09:31:21,https://api.github.com/repos/google/ExoPlayer/git/commits/21363d2f8e451a9558d40e171ffc838d289b6fcd,21363d2f8e451a9558d40e171ffc838d289b6fcd,"Merge pull request #3187 from stellabei/stellabei/aspect-ratio-crop

Support zoom mode for AspectRatioFrameLayout"
ojw28,2017-09-04 09:11:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ba0bd729192f6f99e80cc11d647e3ddc41977dda,ba0bd729192f6f99e80cc11d647e3ddc41977dda,"Fix typo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167474040"
ojw28,2017-04-07 11:10:08,https://api.github.com/repos/google/ExoPlayer/git/commits/ca2bfbc56ea91169e2abdb56170340cf28e8e9f7,ca2bfbc56ea91169e2abdb56170340cf28e8e9f7,"DashManifestParser: Move schemeType up to DrmInitData

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167171407"
andrewlewis,2017-08-31 17:02:43,https://api.github.com/repos/google/ExoPlayer/git/commits/daafbb1f1ce0cae9a23c324a073ca38e02ed8a52,daafbb1f1ce0cae9a23c324a073ca38e02ed8a52,"Add missing Robolectric test path to codebase

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167151714"
andrewlewis,2017-08-31 16:33:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f15ce81c4763e2a4e6c606c9aeb8d24024b86440,f15ce81c4763e2a4e6c606c9aeb8d24024b86440,"Move some unit tests to use Robolectric

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167148146"
ojw28,2017-08-31 11:13:13,https://api.github.com/repos/google/ExoPlayer/git/commits/6bd0ba887c70e500724b4fc87d40db74f8d0c019,6bd0ba887c70e500724b4fc87d40db74f8d0c019,"Allow more aggressive switching for HLS with independent segments

We currently switch without downloading overlapping segments, but
we do not actually switch more aggressively. This change fixes
this. Note there's an implicit assumption made that if one media
playlist declares independent segments, the others will too. This
is almost certainly true in practice, and if it's not the penalty
isn't too bad (the player may try and switch to a higher quality
variant one segment's worth of buffer too soon).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167120992"
andrewlewis,2017-08-30 17:51:37,https://api.github.com/repos/google/ExoPlayer/git/commits/0b78837f35f54acc3ef41f5ceeb3b634df1cd142,0b78837f35f54acc3ef41f5ceeb3b634df1cd142,"Fix ContentDataSource bytesRemaining calculation

The bytesRemaining didn't always take into account any skipped bytes, which
meant that reaching the end of the file was not correctly detected in read().

Issue: #3216

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167016672"
marcbaechinger,2017-08-30 17:32:47,https://api.github.com/repos/google/ExoPlayer/git/commits/84c13ccbf3daf7814099137f2cfa27957893c664,84c13ccbf3daf7814099137f2cfa27957893c664,"Support setRepeatMode (and move shuffle action to PlaybackController)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167013507"
andrewlewis,2017-08-30 17:20:37,https://api.github.com/repos/google/ExoPlayer/git/commits/e80a93d7990db645707f579df58cb380abb1edd4,e80a93d7990db645707f579df58cb380abb1edd4,"Use UTF-8 everywhere

UTF-8 is the default charset on Android so this should be a no-op change, but
makes the code portable (in case it runs on another platform).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=167011583"
ojw28,2017-08-30 14:03:41,https://api.github.com/repos/google/ExoPlayer/git/commits/049d41db2a4a697e23a39271a9a2758c8bd90fbd,049d41db2a4a697e23a39271a9a2758c8bd90fbd,"Add license notes for extensions with non-Google dependencies

Issue: #3197

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166988657"
dbrain,2017-08-31 04:31:18,https://api.github.com/repos/google/ExoPlayer/git/commits/0c7f11606f0eaf3660511d4a478fc80de4c2e63d,0c7f11606f0eaf3660511d4a478fc80de4c2e63d,#3215 Additional secure DummySurface device exclusions
Shyri,2017-08-30 14:25:50,https://api.github.com/repos/google/ExoPlayer/git/commits/49c2926e45b2d9ee4fc41dd834074c61c80e2c76,49c2926e45b2d9ee4fc41dd834074c61c80e2c76,Add support for new codecs parameter string
ojw28,2017-08-29 22:51:36,https://api.github.com/repos/google/ExoPlayer/git/commits/6bf0b7f3de32b34cc58786474a302198cc18e421,6bf0b7f3de32b34cc58786474a302198cc18e421,"Fix moe config II

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166916769"
ojw28,2017-08-29 22:38:04,https://api.github.com/repos/google/ExoPlayer/git/commits/b0df6dce9823e11c45c881abf31ac8cb9a9ba92f,b0df6dce9823e11c45c881abf31ac8cb9a9ba92f,"Fix moe config

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166914821"
ojw28,2017-08-29 20:55:19,https://api.github.com/repos/google/ExoPlayer/git/commits/5bed2bf5032a4e5bea36a30a667a795ed172798a,5bed2bf5032a4e5bea36a30a667a795ed172798a,"Don't copy primary-track format to non-primary tracks

This time plumbing the track type in from the other side.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166898172"
ojw28,2017-08-29 19:15:50,https://api.github.com/repos/google/ExoPlayer/git/commits/d9cd13ce746c496adb6c327cb749e74afcfe2f05,d9cd13ce746c496adb6c327cb749e74afcfe2f05,"Automated rollback of changelist 166843123.

*** Reason for rollback ***

Doesn't work because trackOutputProvider can be null when extracting init data.

*** Original change description ***

Don't copy primary-track format to non-primary tracks

Copying non-primary-track formats to non-primary tracks
looks non-trivial (I tried; went down a dead-end), so
leaving that for now.

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166883654"
ojw28,2017-08-29 15:50:17,https://api.github.com/repos/google/ExoPlayer/git/commits/55e928f75acb78107b1defb702e08aa6f3aa42e5,55e928f75acb78107b1defb702e08aa6f3aa42e5,"Make LeanbackPlayerAdapter use a ControlDispatcher + Misc cleanup

1. Make LeanbackPlayerAdapter use a ControlDispatcher. This
   allows apps to suppress control events in some circumstances,
   and is in-line with our mobile controls.
2. Misc simplifications and cleanup to LeanbackPlayerAdapter.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166852816"
ojw28,2017-08-29 15:49:51,https://api.github.com/repos/google/ExoPlayer/git/commits/44dc3c3ab3ed599145fff5cf0986ee30880396fe,44dc3c3ab3ed599145fff5cf0986ee30880396fe,"Make all renderers DRM aware

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166852758"
ojw28,2017-08-29 15:22:30,https://api.github.com/repos/google/ExoPlayer/git/commits/b2c245281a59973def165e09e9961cd310f1ab8b,b2c245281a59973def165e09e9961cd310f1ab8b,"Parse SchemeData from urn:mpeg:dash:mp4protection:2011 element

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166849631"
AquilesCanta,2017-08-29 15:16:11,https://api.github.com/repos/google/ExoPlayer/git/commits/aafdd2267abd6c9191ef66e9cf109cc24e159e30,aafdd2267abd6c9191ef66e9cf109cc24e159e30,"Add media queue support to CastPlayer

Also workaround the non-repeatable queue and fix other minor issues.

Issue:#2283

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166848894"
ojw28,2017-08-29 14:19:48,https://api.github.com/repos/google/ExoPlayer/git/commits/f44e30c7543e63bb8aec54f27626d4c70e808c48,f44e30c7543e63bb8aec54f27626d4c70e808c48,"Fix mapping CLEARKEY_UUID to COMMON_PSSH_UUID

This mapping when we call into platform components also needs
to be applied when creating the MediaCrypto instance. The fix
is to stop propagating the UUID through all the createMediaCrypto
methods. This is unnecessary, since the eventual target already
knows its own UUID!

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166843372"
ojw28,2017-08-29 14:17:24,https://api.github.com/repos/google/ExoPlayer/git/commits/3e762270062726a690be50d285474175c81ae91f,3e762270062726a690be50d285474175c81ae91f,"Don't copy primary-track format to non-primary tracks

Copying non-primary-track formats to non-primary tracks
looks non-trivial (I tried; went down a dead-end), so
leaving that for now.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166843123"
andrewlewis,2017-08-29 09:15:08,https://api.github.com/repos/google/ExoPlayer/git/commits/ba6d208fe95b9c9eef431fdd6f6185794154e1a7,ba6d208fe95b9c9eef431fdd6f6185794154e1a7,"Use Math.abs in Sonic.java

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166820970"
erdemguven,2017-08-25 16:35:10,https://api.github.com/repos/google/ExoPlayer/git/commits/cc58b515b773be93ba4572d5ac221cae856ee1ae,cc58b515b773be93ba4572d5ac221cae856ee1ae,"Make Downloaders open source

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166486294"
tonihei,2017-08-25 15:37:38,https://api.github.com/repos/google/ExoPlayer/git/commits/30b31b56792664ebe181bc497282f075f6add1e5,30b31b56792664ebe181bc497282f075f6add1e5,"Support empty concatenations and empty timelines in concatenations.

Both cases were not supported so far. Added tests which all failed in the
previous code version and adapted the concatenated media sources to cope with
empty timelines and empty concatenations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166480344"
marcbaechinger,2017-08-25 14:43:15,https://api.github.com/repos/google/ExoPlayer/git/commits/01f481984437ce94bed16e71131d0ba084a2b70c,01f481984437ce94bed16e71131d0ba084a2b70c,"Introduce MediaSessionConnector.CommandReceiver interface and add TimelineQueueEditor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166475351"
tonihei,2017-08-25 09:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/1b9c904dbae7009fcb448b0db3b2286289f14925,1b9c904dbae7009fcb448b0db3b2286289f14925,"Add UI for shuffle mode.

This includes an option to show and hide the shuffle mode button. When
pressing the button, the shuffle mode of the player is toggled.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166455759"
ojw28,2017-07-23 08:55:50,https://api.github.com/repos/google/ExoPlayer/git/commits/6907ffb2852d56556c5a4186d6d7cfb00d8d7553,6907ffb2852d56556c5a4186d6d7cfb00d8d7553,"Remove unnecessary view casts

findViewById is now defined using generics, which allows
the types to be inferred.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166355555"
ojw28,2017-08-24 12:30:36,https://api.github.com/repos/google/ExoPlayer/git/commits/6e03dcdfa1fa18a7865085186b7e33790489d46c,6e03dcdfa1fa18a7865085186b7e33790489d46c,"Add LocalMediaDrmCallback. Useful for providing local keys.

Issue: #3178

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166330215"
ojw28,2017-08-24 10:37:32,https://api.github.com/repos/google/ExoPlayer/git/commits/57bad31e4c17883de178f7a743798c42b6c88dc4,57bad31e4c17883de178f7a743798c42b6c88dc4,"Update documentation with new demo app location

Plus a few misc doc fixes / adjustments

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166323135"
tonihei,2017-08-23 16:04:29,https://api.github.com/repos/google/ExoPlayer/git/commits/aa712114c66b5e92d73d0529e1cbdb7242e9cd50,aa712114c66b5e92d73d0529e1cbdb7242e9cd50,"Force stop hosted test after timeout.

When hosted tests run into a timeout, the outer test method stops.
However, the hosted test itself may continue running and needs to be
forced-stopped to ensure it does not block any resources needed by
subsequent test methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166208204"
tonihei,2017-08-23 14:40:05,https://api.github.com/repos/google/ExoPlayer/git/commits/eeebb3968b2491539aaacd310d9ebc276faddfb7,eeebb3968b2491539aaacd310d9ebc276faddfb7,"Implement shuffle mode logic in ExoPlayerImplInternal.

This is mostly connecting the already stored shuffleMode with the timeline queries
for the playback order.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166199330"
marcbaechinger,2017-08-23 14:32:53,https://api.github.com/repos/google/ExoPlayer/git/commits/1305b1155b73cc106c616bebd59ab8592b47acc2,1305b1155b73cc106c616bebd59ab8592b47acc2,"Migrate MediaSessionConnector to API 26 for shuffle mode.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166198698"
tonihei,2017-08-23 14:30:29,https://api.github.com/repos/google/ExoPlayer/git/commits/f7eba77ee0378a0886ad9cb9d2b9ddeda8ed2285,f7eba77ee0378a0886ad9cb9d2b9ddeda8ed2285,"Add shuffle support to dynamic concatenating media source.

The media source is initialized with a DefaultShuffleOrder which can be changed at
any time. Whenever the list of media source is changed, the shuffle order is adapted
accordingly (either on the app thread if the player is not prepared yet, or on the
player thread). The shuffle order is then used to construct the timeline.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166198488"
tonihei,2017-08-23 14:15:41,https://api.github.com/repos/google/ExoPlayer/git/commits/e15633e9060d409996ff0f98e4bf274d052e821f,e15633e9060d409996ff0f98e4bf274d052e821f,"Add shuffle support to ConcatenatingMediaSource.

The media source is initialized with a DefaultShuffleOrder which can be changed at
any time. This shuffle order is then used within the corresponding timeline.

The isRepeatOneAtomic flag is extended to also suppress shuffling (now called
isAtomic only).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166197184"
andrewlewis,2017-08-23 13:53:11,https://api.github.com/repos/google/ExoPlayer/git/commits/8115e11489cff49dec9cd15c208bc65fc2dfea41,8115e11489cff49dec9cd15c208bc65fc2dfea41,"Allow subclasses to customize the MediaFormat

Make getMediaFormat protected so that subclasses can set additional MediaFormat
keys. For example, if the decoder output needs to be read back via an
ImageReader as YUV data it is necessary to set KEY_COLOR_FORMAT to
COLOR_FormatYUV420Flexible.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166195211"
tonihei,2017-08-23 13:42:24,https://api.github.com/repos/google/ExoPlayer/git/commits/b27c25e88072007b39a7a3c283eed50c2d0efdcd,b27c25e88072007b39a7a3c283eed50c2d0efdcd,"Add fake shuffle order.

This just implements a reverse order which is different from the original order but
still deterministic for simplified testing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166194311"
tonihei,2017-08-23 13:00:51,https://api.github.com/repos/google/ExoPlayer/git/commits/9fd19d0e7c20818269c488e8fdd4d17d9528e5e0,9fd19d0e7c20818269c488e8fdd4d17d9528e5e0,"Add shuffle logic to concatenated timelines.

The implementation in the abstract base class takes care to forward the queries
to the correct methods given the shuffle mode and a given shuffle order.

All concatenated timeline implementations use an unshuffled order so far. The
handling of the shuffle orders will follow in other changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166191165"
tonihei,2017-08-23 12:59:32,https://api.github.com/repos/google/ExoPlayer/git/commits/4883a9ba9a44479d02d4c280648a213bdb741e47,4883a9ba9a44479d02d4c280648a213bdb741e47,"Add shuffle support to infinitely looping timeline.

In addition, let unit test assert window indices for both shuffle modes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166191069"
tonihei,2017-08-23 10:29:21,https://api.github.com/repos/google/ExoPlayer/git/commits/bd81181892879b3ca0a573b669cfbce14015cd24,bd81181892879b3ca0a573b669cfbce14015cd24,"Add shortcut methods to query next or previous window index.

This functionality is most likely needed by UI modules which currently need
to obtain the timeline, the current repeat and shuffle modes and are only then
able to query the next/previous window index using this information.

Adding these methods simplifies these cumbersome requests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166181202"
tonihei,2017-08-23 10:27:40,https://api.github.com/repos/google/ExoPlayer/git/commits/2c8d5f846e4c0e01b772c46f9626954a836a9a47,2c8d5f846e4c0e01b772c46f9626954a836a9a47,"Pass shuffle mode to timeline assertion helper methods.

This allows to test the expected behaviour of timeline with different shuffle modes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166181091"
tonihei,2017-08-23 08:08:08,https://api.github.com/repos/google/ExoPlayer/git/commits/10f1bd73961b972ec451076ed539ab7f189b1e62,10f1bd73961b972ec451076ed539ab7f189b1e62,"Add shuffle mode parameter to Timeline interface methods.

This parameter is used by methods such as getNextWindowIndex
and getPreviousWindowIndex to determine the playback order.
Additionally, there are method to query the first and last
window index given the shuffle mode.

None of the timeline implementations nor the ExoPlayer
implementation supports shuffling so far.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166170229"
stellabei,2017-08-24 23:13:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b0848216786d6ebfd35c898286ebdd22e4aa5234,b0848216786d6ebfd35c898286ebdd22e4aa5234,Support zoom mode for AspectRatioFrameLayout
stellabei,2017-08-24 21:31:33,https://api.github.com/repos/google/ExoPlayer/git/commits/50c485652cb0b52f593b8a4035dcd50e050747e1,50c485652cb0b52f593b8a4035dcd50e050747e1,Support aspect ratio fill mode for AspectRatioFrameLayout
tonihei,2017-08-22 15:00:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5214bfa7b1ec229667ac841ff27040fb7ff19fc6,5214bfa7b1ec229667ac841ff27040fb7ff19fc6,"Update ExoPlayerImplInternal with shuffle mode changes.

The shuffle mode is saved using a message on the playback thread.
After setting the shuffle mode, the same media period holder verification
as for repeat mode changes gets executed.

Note: the shuffle mode is not used yet to change the playback order.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166060231"
ojw28,2017-08-22 14:41:32,https://api.github.com/repos/google/ExoPlayer/git/commits/f0bd40a5b69b0740a100480768481651ba252a5d,f0bd40a5b69b0740a100480768481651ba252a5d,"Use flavorDimensions for external demo app

- This is soon becoming mandatory.
- It also looks like future versions of com.android.tools.build
  are being distributed via Google's Maven repository.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166058299"
tonihei,2017-07-16 06:33:01,https://api.github.com/repos/google/ExoPlayer/git/commits/6a8c99d037a411f2b45aab0c23d468a5d0e801eb,6a8c99d037a411f2b45aab0c23d468a5d0e801eb,"Support shuffle mode in MediaSessionConnector.

Changes to the player's shuffle mode are forwarded to the media session.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166057425"
tonihei,2017-08-22 14:27:27,https://api.github.com/repos/google/ExoPlayer/git/commits/b9a6a405391f8f7be1091cab1d791aa757996469,b9a6a405391f8f7be1091cab1d791aa757996469,"Add listener callback for shuffle mode changes.

The listener implementations do not do anything yet.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166056933"
AquilesCanta,2017-08-22 12:46:00,https://api.github.com/repos/google/ExoPlayer/git/commits/52ec70dd80d79396ba7bcea16422bc0dc2111200,52ec70dd80d79396ba7bcea16422bc0dc2111200,"Add support for KEYFORMAT and SAMPLE-AES (only parsing, not decryption)

Also add sample streams that use METHOD=SAMPLE-AES. Note that some of
the streams provide alternative EXT-X-KEY's. Support for alternative
decryption methods will be added in a later CL.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166048858"
tonihei,2017-08-22 10:49:50,https://api.github.com/repos/google/ExoPlayer/git/commits/c1d7e5bf9d4efc6ef1f3d2814cfd8174052bad59,c1d7e5bf9d4efc6ef1f3d2814cfd8174052bad59,"Add set/getShuffleModeEnabled to Player interface.

And implement a basic version of the methods in all implementations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=166041342"
ojw28,2017-08-21 14:26:50,https://api.github.com/repos/google/ExoPlayer/git/commits/f1a97317d9fb5c02c8427c990db456aba017086a,f1a97317d9fb5c02c8427c990db456aba017086a,"Handle size==0 in MP4 atoms

Issue: #3191

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165925148"
ojw28,2017-08-21 13:31:41,https://api.github.com/repos/google/ExoPlayer/git/commits/f1b3f3a177b144d86fcee3504927e9aac7b10596,f1b3f3a177b144d86fcee3504927e9aac7b10596,"Fix broken link + minor doc tweak

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165920927"
tonihei,2017-08-21 10:49:38,https://api.github.com/repos/google/ExoPlayer/git/commits/cb45a47da18f3c7867abc2b61a8b3f15f151bd89,cb45a47da18f3c7867abc2b61a8b3f15f151bd89,"Remove isFirstWindow/isLastWindow from Timeline.

These methods are only used in one place, and offer duplicate
functionality to checking getNext(Previous)WindowIndex == C.INDEX_UNSET.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165910258"
andrewlewis,2017-08-21 07:47:34,https://api.github.com/repos/google/ExoPlayer/git/commits/cec0c52c8d336bd54277e342379b81e1cf05745c,cec0c52c8d336bd54277e342379b81e1cf05745c,"Allow the app to specify extra ad markers

Issue: #3184

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165895259"
AquilesCanta,2017-08-18 20:57:53,https://api.github.com/repos/google/ExoPlayer/git/commits/9a9bb2192ca5b8115d8b1bb41fe1d92d585804ae,9a9bb2192ca5b8115d8b1bb41fe1d92d585804ae,"Fix third_party settings.gradle for demo-cast

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165748557"
erdemguven,2017-08-18 13:38:40,https://api.github.com/repos/google/ExoPlayer/git/commits/a1add8f9e69a824842b59cceb87947b67ef39469,a1add8f9e69a824842b59cceb87947b67ef39469,"Fix downcasting in DownloadAction.Serializers

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165699826"
AquilesCanta,2017-08-18 13:30:21,https://api.github.com/repos/google/ExoPlayer/git/commits/1e4f89954825b74d4064b1bb13e35f6a3b9a6759,1e4f89954825b74d4064b1bb13e35f6a3b9a6759,"Add support for the data URI scheme

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165699328"
ojw28,2017-08-17 22:18:58,https://api.github.com/repos/google/ExoPlayer/git/commits/cc9a93d9d9f5369c6af158541a01ad32b2b30d4b,cc9a93d9d9f5369c6af158541a01ad32b2b30d4b,Rm SS offline for now
ojw28,2017-08-17 22:13:12,https://api.github.com/repos/google/ExoPlayer/git/commits/4fa307d6549a9a6126527f95aa72581ba241b2c5,4fa307d6549a9a6126527f95aa72581ba241b2c5,Minor style tweaks
ojw28,2017-08-17 22:12:01,https://api.github.com/repos/google/ExoPlayer/git/commits/ce3042bffcfb538421fa5bd2e807c57248c9f496,ce3042bffcfb538421fa5bd2e807c57248c9f496,"Merge pull request #3190 from google/revert-3157-dulmandakh-patch-1

Revert ""expose setPropertyByteArray, setPropertyString"""
ojw28,2017-08-17 22:11:44,https://api.github.com/repos/google/ExoPlayer/git/commits/61078078df9fe9b7f2305f0ceb016a486cb02af2,61078078df9fe9b7f2305f0ceb016a486cb02af2,"Revert ""expose setPropertyByteArray, setPropertyString"""
dulmandakh,2017-08-09 06:42:58,https://api.github.com/repos/google/ExoPlayer/git/commits/7e586c3a8fcf7d1967ee2d34eb17bf83aec2106f,7e586c3a8fcf7d1967ee2d34eb17bf83aec2106f,"expose setPropertyByteArray, setPropertyString

export setPropertyByteArray, setPropertyString of DefaultDrmSessionManager for easy customization."
ojw28,2017-08-17 22:10:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6b7e0cb606b4e2782ca8a2f79755707b6e09dc46,6b7e0cb606b4e2782ca8a2f79755707b6e09dc46,"Merge pull request #3182 from WeiChungChang/Support_MP4_in_h262

Support H262 video in MP4"
ojw28,2017-08-17 22:09:57,https://api.github.com/repos/google/ExoPlayer/git/commits/cc5e16eccf6fd9e836e570a432bc5df4aa81b900,cc5e16eccf6fd9e836e570a432bc5df4aa81b900,"Merge pull request #3157 from dulmandakh/dulmandakh-patch-1

expose setPropertyByteArray, setPropertyString"
ojw28,2017-08-17 22:09:50,https://api.github.com/repos/google/ExoPlayer/git/commits/7ddcc46cbdc60c5f3f68375933f9f576de7f5eba,7ddcc46cbdc60c5f3f68375933f9f576de7f5eba,"Merge pull request #3185 from dbrain/subrip_timing_line_crash

Fix possible subrip timing line NPE"
ojw28,2017-08-17 21:20:56,https://api.github.com/repos/google/ExoPlayer/git/commits/2470b39d9520618c59a8c857085120dd8da2ffee,2470b39d9520618c59a8c857085120dd8da2ffee,"Split metadata and text outputs from their renderer classes

There will be non-ExoPlayer players that can output text
and metadata, so the outputs should be standalone. There
may also be ExoPlayer instances that use non-standard
text and metadata renderers, for which this change also
makes sense.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165628420"
ojw28,2017-08-17 21:19:41,https://api.github.com/repos/google/ExoPlayer/git/commits/4917929a3aa59b2a688994977fef8680464bff83,4917929a3aa59b2a688994977fef8680464bff83,"Improve MediaSource/MediaPeriod documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165628229"
ojw28,2017-07-19 10:26:49,https://api.github.com/repos/google/ExoPlayer/git/commits/106d88df41974ce3c2e5ed2cbd62de1c68e710ba,106d88df41974ce3c2e5ed2cbd62de1c68e710ba,"Some no-op LeanbackPlayerAdapter cleanup

- Have a single inner class for all listeners. This is inline
  with what we do elsewhere in the library.
- Avoid repeated getCallback() calls within methods.
- Seek to default position from ended state, rather than 0.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165603927"
AquilesCanta,2017-08-17 15:14:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e3f305b5c09de7b635125d22d6e14d80c9a4857b,e3f305b5c09de7b635125d22d6e14d80c9a4857b,"Improve FORMAT_UNSUPPORTED_DRM related documentation and logging

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165580016"
ojw28,2017-08-17 14:59:29,https://api.github.com/repos/google/ExoPlayer/git/commits/34960ad891645514917545926877ad8d009b9ed6,34960ad891645514917545926877ad8d009b9ed6,"Tweak and add READMEs + remove refs to V1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165578518"
ojw28,2017-08-17 14:48:49,https://api.github.com/repos/google/ExoPlayer/git/commits/4d7f37f5a9b55010f3a2f5354a45d86d63c80d25,4d7f37f5a9b55010f3a2f5354a45d86d63c80d25,"Work around issue with Xiaomi JB devices

Issue: #3171

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165577562"
AquilesCanta,2017-08-17 14:41:10,https://api.github.com/repos/google/ExoPlayer/git/commits/04d76fa8fc3f997580c38ef1965dd8e6a58a7f29,04d76fa8fc3f997580c38ef1965dd8e6a58a7f29,"Allow easier ExoPlayer/Cast integration

This CL adds the fundamental pieces for ExoPlayer/Cast integration and includes a
demo app to showcase this functionality. However, media queues should be supported
in the first release of this extension.

Issue:#2283

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165576892"
andrewlewis,2017-08-17 13:40:44,https://api.github.com/repos/google/ExoPlayer/git/commits/1cfd246cd32f901148c36d7671c6aebc93fa5361,1cfd246cd32f901148c36d7671c6aebc93fa5361,"Update extension README with usage instructions

Issue: #3162

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165572088"
ojw28,2017-08-17 11:04:01,https://api.github.com/repos/google/ExoPlayer/git/commits/a24f2b75b0e3c60813ef1d5e13728a8f0af3cb77,a24f2b75b0e3c60813ef1d5e13728a8f0af3cb77,"Host GTS content ourselves + prevent spurious test passes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165561808"
erdemguven,2017-08-16 15:45:10,https://api.github.com/repos/google/ExoPlayer/git/commits/978019a1a383eb4c87a3a628597a8c4df35ec433,978019a1a383eb4c87a3a628597a8c4df35ec433,"Add ProgressiveDownloadAction

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165447436"
andrewlewis,2017-08-16 14:29:11,https://api.github.com/repos/google/ExoPlayer/git/commits/8e45bd27df2b37be2b3ac9cfda3774698e497a0a,8e45bd27df2b37be2b3ac9cfda3774698e497a0a,"Add nullable annotations to Renderer constructors

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165437929"
andrewlewis,2017-08-16 11:47:51,https://api.github.com/repos/google/ExoPlayer/git/commits/bbc3b182bbd3bdfeeeb758c67d030b7e73e52615,bbc3b182bbd3bdfeeeb758c67d030b7e73e52615,"Restore the interrupted flag after blocking operations

If the main thread was interrupted during
ExoPlayerImplInternal.blockingSendMessage/release, the interrupted flag was
immediately set but then wait() was called on the next iteration. wait() would
immediately throw InterruptedException, causing the main thread to spin until
the blocking operation completed.

Instead of resetting the flag immediately, reset it after the blocking
operation completes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165426493"
andrewlewis,2017-08-15 16:04:00,https://api.github.com/repos/google/ExoPlayer/git/commits/e0b69b8115290b884f1f2f56eae1571449cfc620,e0b69b8115290b884f1f2f56eae1571449cfc620,"Add Format.copyWithRotationDegrees

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165314250"
ojw28,2017-08-15 14:36:28,https://api.github.com/repos/google/ExoPlayer/git/commits/f72cd2b01484698e8c6ffe6ea47d6dd71d6b1722,f72cd2b01484698e8c6ffe6ea47d6dd71d6b1722,"Add SmoothStreaming downloader and download action

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165305815"
ojw28,2017-08-15 12:26:13,https://api.github.com/repos/google/ExoPlayer/git/commits/b9f5cc7256041f869dfef259f6311cfed4d9c49d,b9f5cc7256041f869dfef259f6311cfed4d9c49d,"Add missing TrackKey class

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165296184"
ojw28,2017-08-15 12:23:15,https://api.github.com/repos/google/ExoPlayer/git/commits/4b706d948471c9d2e2794d4e780f3de9ac207796,4b706d948471c9d2e2794d4e780f3de9ac207796,"Add SsManifest.copy and TrackKey for SmoothStreaming downloads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165295985"
ojw28,2017-07-16 04:14:19,https://api.github.com/repos/google/ExoPlayer/git/commits/c94bce17b4d8c39046d81c7ec4aa16a9a8f43b75,c94bce17b4d8c39046d81c7ec4aa16a9a8f43b75,"Make data sources private in SegmentDownloader

Also fix SegmentDownloader.remove to not return early

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165295432"
ojw28,2017-08-15 11:45:22,https://api.github.com/repos/google/ExoPlayer/git/commits/f8e47553e8c34c2105b0865f33918f300d37a823,f8e47553e8c34c2105b0865f33918f300d37a823,"Destroy GL context when releasing dummy surface

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165293386"
ojw28,2017-08-15 11:14:24,https://api.github.com/repos/google/ExoPlayer/git/commits/757bcf7c6346a4c8757b1d3a462bc5a84a21123c,757bcf7c6346a4c8757b1d3a462bc5a84a21123c,"Update instructions to include Google Maven repository

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165291982"
ojw28,2017-08-15 11:06:29,https://api.github.com/repos/google/ExoPlayer/git/commits/00547c578345676bc26fdfe1d84339adfd7c067e,00547c578345676bc26fdfe1d84339adfd7c067e,"Disable secure dummy surface on all Samsung N devices

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165291627"
ojw28,2017-08-14 20:20:23,https://api.github.com/repos/google/ExoPlayer/git/commits/08d16c55d4713eb5865c05fff890f4a5770b0376,08d16c55d4713eb5865c05fff890f4a5770b0376,"Some Leanback extension + minVersion bump fixes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165219604"
ojw28,2017-08-14 15:31:59,https://api.github.com/repos/google/ExoPlayer/git/commits/cf6534ea5b50855488f78011d5907ef84101acc8,cf6534ea5b50855488f78011d5907ef84101acc8,"SegmentDownloader loadManifest cleanup.

- HlsDownloader.loadManifest (previously called getHlsPlaylist)
  suppressed errors for the offline case, where-as the DashUtil
  equivalent method did not. This change makes them consistent
  and moves both other to use ParsingLoadable.
- Enable GZIP for manifest loads in both cases.
- Use Uri rather than String to represent Uris. Previously the
  strings were parsed into Uris quite deep in the code, which
  isn't ideal if the parsing fails; you'd probably prefer the
  error to occur early at the top level.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165181398"
ojw28,2017-08-14 12:57:59,https://api.github.com/repos/google/ExoPlayer/git/commits/fb83872365f8023f019567c65757addccbc0dbda,fb83872365f8023f019567c65757addccbc0dbda,"Remove unused method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165168924"
ojw28,2017-08-14 10:15:43,https://api.github.com/repos/google/ExoPlayer/git/commits/870c8ae4df9b3a0157318bcd4790906efc48430e,870c8ae4df9b3a0157318bcd4790906efc48430e,"Fix canAcquireSession for ClearKey

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=165159376"
stellabei,2017-08-17 18:01:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f764fe70b0306d7650cf83345f06ce3dd753470e,f764fe70b0306d7650cf83345f06ce3dd753470e,Support crop mode for AspectRatioFrameLayout
dbrain,2017-08-17 11:30:46,https://api.github.com/repos/google/ExoPlayer/git/commits/571f98f546d7c846ed672ff5250e47b43177c3d9,571f98f546d7c846ed672ff5250e47b43177c3d9,Fix possible subrip timing line NPE
WeiChungChang,2017-08-17 05:49:41,https://api.github.com/repos/google/ExoPlayer/git/commits/469780f7ea5ec59ccf8b72b085ed98249724b195,469780f7ea5ec59ccf8b72b085ed98249724b195,Support H262 video in MP4
ojw28,2017-08-11 14:47:03,https://api.github.com/repos/google/ExoPlayer/git/commits/1829d71d29435ca1eb4240d4aed7cb1315e2b606,1829d71d29435ca1eb4240d4aed7cb1315e2b606,Restrict usage of secure DummySurface for all Samsung devices.
ojw28,2017-08-11 14:46:49,https://api.github.com/repos/google/ExoPlayer/git/commits/730d2dd18ffa8902d84e08adf807c8bbb9f8afc6,730d2dd18ffa8902d84e08adf807c8bbb9f8afc6,Formatting cleanup
ojw28,2017-08-11 14:43:43,https://api.github.com/repos/google/ExoPlayer/git/commits/2e950633c797d15f05bdfa3b3c2abba0faa6a2f0,2e950633c797d15f05bdfa3b3c2abba0faa6a2f0,"Merge pull request #3161 from DolbyLaboratories/dev-v2-eac3-7.1

Support 7.1 EAC3 in MP4, DASH and HLS formats"
ojw28,2017-08-11 13:27:59,https://api.github.com/repos/google/ExoPlayer/git/commits/c661ed42de666cbd6043dc6d43acd24058b67e8a,c661ed42de666cbd6043dc6d43acd24058b67e8a,"Add possibility of forcing a specific license URL in HttpMediaDrmCallback

Resubmit of https://github.com/google/ExoPlayer/pull/3136

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164971900"
ojw28,2017-08-10 16:34:25,https://api.github.com/repos/google/ExoPlayer/git/commits/40f34956a836557ba7dac681984bb076658715f1,40f34956a836557ba7dac681984bb076658715f1,"Bump minimum and target API levels + support lib version

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164863447"
ybai001,2017-08-10 06:32:52,https://api.github.com/repos/google/ExoPlayer/git/commits/fc9a58529a1fddc2ef9ade587266846e47bfc535,fc9a58529a1fddc2ef9ade587266846e47bfc535,"Support 7.1 EAC3 in MP4, DASH and HLS formats"
ojw28,2017-08-10 11:45:40,https://api.github.com/repos/google/ExoPlayer/git/commits/1b28d83f16e5a35e78082c79f8fed3c556122955,1b28d83f16e5a35e78082c79f8fed3c556122955,"Fix maskingX variables when timeline becomes empty

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164840037"
ojw28,2017-08-10 11:42:27,https://api.github.com/repos/google/ExoPlayer/git/commits/88bae5d9750333f0706e475d0024600ea057a1e6,88bae5d9750333f0706e475d0024600ea057a1e6,"Support multiple video/text/metadata outputs

We've seen more than one issue filed where a developer has
registered a video listener and been confused by the fact
their SimpleExoPlayerView no longer works properly. There
are also valid use cases for having multiple metadata/text
outputs.

Issue: #2933
Issue: #2800
Issue: #2286
Issue: #2240

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164839882"
ojw28,2017-08-10 11:31:01,https://api.github.com/repos/google/ExoPlayer/git/commits/5ab0c620bf84f8d24b9a1894359c25a17c7ab479,5ab0c620bf84f8d24b9a1894359c25a17c7ab479,"Clean up ClearKey UUIDs

- There is a proper ClearKey UUID now. This change requires
  it to be used instead of the Common PSSH UUID when instantiating
  DRM components.
- Internally, we'll map the ClearKey UUID onto the Common PSSH
  UUID where necessary to (a) access the ClearKey CDM on older
  devices, and (b) access drm init data stored under the Common
  PSSH UUID in the stream.

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164839213"
erdemguven,2017-08-10 09:25:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2d0044fee4f99097cc4c53854b5f91322adaf282,2d0044fee4f99097cc4c53854b5f91322adaf282,"Generic DownloadManager and DownloadService

Downloader specific parameters and constructor is moved to DownloadAction class.

DownloadAction objects need to be serialized so they can be passed in Intents and can be stored to
filesystem (to be implemented). So  DownloadAction.Serializer is added. Didn't use Serializable interface
because of the concerns over incompabilities when the new versions of classes are used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164831115"
marcbaechinger,2017-08-09 21:35:38,https://api.github.com/repos/google/ExoPlayer/git/commits/ab277675a15afa7d546bfa0c7e92a61bf5484dc3,ab277675a15afa7d546bfa0c7e92a61bf5484dc3,"set mediaSession flags properly and keep queue in sync when timeline changes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164774783"
AquilesCanta,2017-08-09 15:25:06,https://api.github.com/repos/google/ExoPlayer/git/commits/0d11ebdf2d814eb6dbe0a820ae5c4b7d415a95ba,0d11ebdf2d814eb6dbe0a820ae5c4b7d415a95ba,"Run optimage to optimize demo app's PNGs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164726319"
ojw28,2017-08-09 14:10:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b6b84839ed25476667abe6cdf6ccf0a41c8ab9b7,b6b84839ed25476667abe6cdf6ccf0a41c8ab9b7,"Add ErrorMessageProvider to util package

It's needed in multiple places. MediaSessionConnector uses it
today. Our leanback connector will also use it. Maybe
SimpleExoPlayerView should use one too, to show the message to
the user when an error occurs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164720020"
ojw28,2017-08-09 10:27:13,https://api.github.com/repos/google/ExoPlayer/git/commits/55d1abaa2190aaabc1c022aa2e080d018725a824,55d1abaa2190aaabc1c022aa2e080d018725a824,"Document usage of the RTMP extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164706135"
ojw28,2017-08-09 10:26:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ebbf9f635bdbb1b7b4ba418955bc5be207afeca6,ebbf9f635bdbb1b7b4ba418955bc5be207afeca6,"Fix minor Javadoc error

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164706078"
ojw28,2017-08-09 10:21:25,https://api.github.com/repos/google/ExoPlayer/git/commits/98d50c13ef9436ab018ee8381ebaf0a0adb6b6dc,98d50c13ef9436ab018ee8381ebaf0a0adb6b6dc,"Clean up terminology for MediaSession extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164705750"
ojw28,2017-08-08 17:54:06,https://api.github.com/repos/google/ExoPlayer/git/commits/91adba5d1bc8dae54ef62f3276f81df2559c388b,91adba5d1bc8dae54ef62f3276f81df2559c388b,"Minimal change to expose segment indices in DefaultDashChunkSource

Issue: #3037

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164614478"
ojw28,2017-08-10 11:57:06,https://api.github.com/repos/google/ExoPlayer/git/commits/ceb1e87219666f6c47f87f8f46df5de6f580a612,ceb1e87219666f6c47f87f8f46df5de6f580a612,"Revert ""Add possibility of forcing a specific license URL in HttpMediaDrmCallback""

This reverts commit 768a73b377d842aeefdd466cf7a5904f858cc8a4."
dulmandakh,2017-08-09 06:42:58,https://api.github.com/repos/google/ExoPlayer/git/commits/65e212c409800f49d823d66ed55fb799799c77f1,65e212c409800f49d823d66ed55fb799799c77f1,"expose setPropertyByteArray, setPropertyString

export setPropertyByteArray, setPropertyString of DefaultDrmSessionManager for easy customization."
ojw28,2017-08-08 16:21:37,https://api.github.com/repos/google/ExoPlayer/git/commits/3f31cec742f00998fd180e0623c2298f3a3fab53,3f31cec742f00998fd180e0623c2298f3a3fab53,"Merge pull request #3136 from jeoliva/force-drm-license-url

Add possibility of forcing a specific license URL in HttpMediaDrmCallback"
ojw28,2017-08-08 15:53:44,https://api.github.com/repos/google/ExoPlayer/git/commits/2f8c31d1731ec36f50d31405e01ba56055b6f451,2f8c31d1731ec36f50d31405e01ba56055b6f451,"Merge pull request #3151 from google/dev-v2-r2.5.1

r2.5.1"
ojw28,2017-08-08 11:07:13,https://api.github.com/repos/google/ExoPlayer/git/commits/a6fd4bdaf078375bc67820ec774ac0d1360c2dac,a6fd4bdaf078375bc67820ec774ac0d1360c2dac,"Support clip end greater than the child's duration

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164577001"
ojw28,2017-08-08 15:31:52,https://api.github.com/repos/google/ExoPlayer/git/commits/13bcc0062e44f823296968fe040442aaacfd3515,13bcc0062e44f823296968fe040442aaacfd3515,"Don't release a surface until we've stopped using it

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164596062"
ojw28,2017-08-08 15:30:17,https://api.github.com/repos/google/ExoPlayer/git/commits/c1827b10b6501b18bf68277b572e985c1315b76a,c1827b10b6501b18bf68277b572e985c1315b76a,"Bump to 2.5.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164595874"
ojw28,2017-08-07 20:28:01,https://api.github.com/repos/google/ExoPlayer/git/commits/371f675ae8d9076a859e28399c55d4aa7da2273a,371f675ae8d9076a859e28399c55d4aa7da2273a,"Fix missing source info refresh notification

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164502580"
ojw28,2017-08-08 15:31:52,https://api.github.com/repos/google/ExoPlayer/git/commits/026ac1d69b8c0afb8236029a914196abf6e4e2c3,026ac1d69b8c0afb8236029a914196abf6e4e2c3,"Don't release a surface until we've stopped using it

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164596062"
ojw28,2017-08-08 15:30:17,https://api.github.com/repos/google/ExoPlayer/git/commits/b8c6ed670138ee4f864dc9cd7ba9cb5ff8a43094,b8c6ed670138ee4f864dc9cd7ba9cb5ff8a43094,"Bump to 2.5.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164595874"
ojw28,2017-08-08 14:36:31,https://api.github.com/repos/google/ExoPlayer/git/commits/072788c88aa7f53ec2b671d7b95efd712fe0e2d8,072788c88aa7f53ec2b671d7b95efd712fe0e2d8,"Support building of version 1 PSSH atoms

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164590835"
ojw28,2017-08-08 11:07:13,https://api.github.com/repos/google/ExoPlayer/git/commits/24bf2aa0e25041203a25b7172b88a3a01e591076,24bf2aa0e25041203a25b7172b88a3a01e591076,"Support clip end greater than the child's duration

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164577001"
ojw28,2017-08-07 20:28:01,https://api.github.com/repos/google/ExoPlayer/git/commits/e45345e21b92df65510a64426b4ff031b90b58db,e45345e21b92df65510a64426b4ff031b90b58db,"Fix missing source info refresh notification

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164502580"
AquilesCanta,2017-08-07 18:05:12,https://api.github.com/repos/google/ExoPlayer/git/commits/38360f626729a75a016ba20a546b40405b30ea80,38360f626729a75a016ba20a546b40405b30ea80,"Add support for HLS's FRAME-RATE attribute

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164482135"
ojw28,2017-08-07 13:48:27,https://api.github.com/repos/google/ExoPlayer/git/commits/b96d7eee6e1f90083e8bec2b1a9f97b20dc767a4,b96d7eee6e1f90083e8bec2b1a9f97b20dc767a4,Merge branch 'release-v2' into dev-v2
ojw28,2017-08-07 13:45:41,https://api.github.com/repos/google/ExoPlayer/git/commits/0425ff6d417563f1e08e197919651eccbc6d6f61,0425ff6d417563f1e08e197919651eccbc6d6f61,Merge branch 'dev-v2' into release-v2
ojw28,2017-08-07 13:31:45,https://api.github.com/repos/google/ExoPlayer/git/commits/deb9b301b2c7ef66fdd7d8a3e58298a79ba9c619,deb9b301b2c7ef66fdd7d8a3e58298a79ba9c619,Merge branch 'dev-v2-r2.5.0' into release-v2
ojw28,2017-08-07 13:30:53,https://api.github.com/repos/google/ExoPlayer/git/commits/7a109f741153e2924f7e698dd5554491df10f635,7a109f741153e2924f7e698dd5554491df10f635,Merge branch 'release-v2' into dev-v2-r2.5.0
erdemguven,2017-08-07 12:22:15,https://api.github.com/repos/google/ExoPlayer/git/commits/e713ddc22d6976b55aa4e178e4cd1343e7219df0,e713ddc22d6976b55aa4e178e4cd1343e7219df0,"Disable test coverage again

https://issuetracker.google.com/issues/37019591 causes local variables can't be found while debugging.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164449443"
ojw28,2017-08-07 10:45:10,https://api.github.com/repos/google/ExoPlayer/git/commits/f88149385a63c407f0589f496b87a864a1aa32cd,f88149385a63c407f0589f496b87a864a1aa32cd,"Avoid rollover calculating sample offsets

I considered using Util.scaleLargeTimestamp for this, but
given sample offsets are relative and should always be
small (<<1s), it really shouldn't be necessary.

Issue: #3139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164443795"
ojw28,2017-08-07 08:54:51,https://api.github.com/repos/google/ExoPlayer/git/commits/15bcdf3b71f02b4ce2f8328625fb43a5b0f25fe6,15bcdf3b71f02b4ce2f8328625fb43a5b0f25fe6,"Don't use TextureView's SurfaceTexture unless available

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434943"
ojw28,2017-08-07 08:53:09,https://api.github.com/repos/google/ExoPlayer/git/commits/df05195f5fdaf12f83fa3e615d3cdc20e4dce401,df05195f5fdaf12f83fa3e615d3cdc20e4dce401,"Set correct Content-Type for ClearKey requests

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434858"
ojw28,2017-08-07 08:51:26,https://api.github.com/repos/google/ExoPlayer/git/commits/1f66f30ccdb51eea086619c6933cad0f73de4d15,1f66f30ccdb51eea086619c6933cad0f73de4d15,"Clean up extension READMEs

Issue: #1157

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434768"
ojw28,2017-08-07 08:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/13a580fdbca297f1406b8d9ab6f8e37bd4eb1a07,13a580fdbca297f1406b8d9ab6f8e37bd4eb1a07,"Finalize r2.5.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434615"
erdemguven,2017-08-07 12:22:15,https://api.github.com/repos/google/ExoPlayer/git/commits/427411befbff873b87fbc4846ab2953eafe902e7,427411befbff873b87fbc4846ab2953eafe902e7,"Disable test coverage again

https://issuetracker.google.com/issues/37019591 causes local variables can't be found while debugging.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164449443"
ojw28,2017-08-07 10:45:10,https://api.github.com/repos/google/ExoPlayer/git/commits/87012f22f27337d3074839bbe3881621f4a81875,87012f22f27337d3074839bbe3881621f4a81875,"Avoid rollover calculating sample offsets

I considered using Util.scaleLargeTimestamp for this, but
given sample offsets are relative and should always be
small (<<1s), it really shouldn't be necessary.

Issue: #3139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164443795"
ojw28,2017-08-07 08:54:51,https://api.github.com/repos/google/ExoPlayer/git/commits/865d74cde0cf3b135404a6e951de0d6efb8011ed,865d74cde0cf3b135404a6e951de0d6efb8011ed,"Don't use TextureView's SurfaceTexture unless available

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434943"
ojw28,2017-08-07 08:53:09,https://api.github.com/repos/google/ExoPlayer/git/commits/05179b4f1b36cb61e3ddee1653abe1239c9f986b,05179b4f1b36cb61e3ddee1653abe1239c9f986b,"Set correct Content-Type for ClearKey requests

Issue: #3138

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434858"
ojw28,2017-08-07 08:51:26,https://api.github.com/repos/google/ExoPlayer/git/commits/d4c45861f49c943836f8bae6300358bee34a32ad,d4c45861f49c943836f8bae6300358bee34a32ad,"Clean up extension READMEs

Issue: #1157

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434768"
ojw28,2017-08-07 08:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9ecec92b568c0c73fbb259ffd0ba4561a705a3f0,9ecec92b568c0c73fbb259ffd0ba4561a705a3f0,"Finalize r2.5.0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164434615"
AquilesCanta,2017-08-04 16:32:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b0da1f98f6d24a852968841833fb904d1af71c4b,b0da1f98f6d24a852968841833fb904d1af71c4b,"Remove unnecessary API level check in PlayerActivity of the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164271226"
andrewlewis,2017-08-04 15:55:43,https://api.github.com/repos/google/ExoPlayer/git/commits/b407b19296a75f34764ede59ed430a252f248b5c,b407b19296a75f34764ede59ed430a252f248b5c,"Log IMA LOG AdEvent ad data

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164267555"
andrewlewis,2017-07-13 07:03:45,https://api.github.com/repos/google/ExoPlayer/git/commits/fdcee8f1b6a13dc22972ae3cc28279edcebdc219,fdcee8f1b6a13dc22972ae3cc28279edcebdc219,"Fix detection of postroll when seeking to duration

Also mark all ads as played when the postroll plays, in the case the
player is backgrounded then resumed and the user seeks back.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164262738"
ojw28,2017-08-04 14:26:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ba46e472af2b6c5f5fad59337a72b5050880a093,ba46e472af2b6c5f5fad59337a72b5050880a093,"Fix playing local content after permission granted.

After maybeRequestReadExternalStoragePermission and the
subsequent granting of the permission, the media source
would never be created.

I can't see a case where initializePlayer shouldn't create
a new MediaSource, so I've just removed the condition.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164260074"
andrewlewis,2017-08-04 13:51:38,https://api.github.com/repos/google/ExoPlayer/git/commits/42eaee3db8cee10802ffdfae1fb22f655b10c961,42eaee3db8cee10802ffdfae1fb22f655b10c961,"Update playbackInfo even if there's no period holder

This is required to correctly update the playbackInfo.periodId when
seeking close to the end of a period with ads, as the seek operation
leads to an immediate source info refresh when midroll ads are marked as
played.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164257099"
andrewlewis,2017-08-04 13:20:38,https://api.github.com/repos/google/ExoPlayer/git/commits/c72278d23eb7da24f4f33d1a1f280499d316c8d9,c72278d23eb7da24f4f33d1a1f280499d316c8d9,"Separate handling of oldTimeline == null case

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164254522"
AquilesCanta,2017-08-04 16:32:51,https://api.github.com/repos/google/ExoPlayer/git/commits/f502171e5fe78382e3972e8832b690c6eba97d71,f502171e5fe78382e3972e8832b690c6eba97d71,"Remove unnecessary API level check in PlayerActivity of the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164271226"
andrewlewis,2017-08-04 15:55:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c449bae51aed45fcf28f95818a79a9670584ff23,c449bae51aed45fcf28f95818a79a9670584ff23,"Log IMA LOG AdEvent ad data

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164267555"
andrewlewis,2017-07-13 07:03:45,https://api.github.com/repos/google/ExoPlayer/git/commits/287b999723b2b73b9822ec897af84233cae6e5c8,287b999723b2b73b9822ec897af84233cae6e5c8,"Fix detection of postroll when seeking to duration

Also mark all ads as played when the postroll plays, in the case the
player is backgrounded then resumed and the user seeks back.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164262738"
ojw28,2017-08-04 14:26:19,https://api.github.com/repos/google/ExoPlayer/git/commits/c28ebf10f7f89b4b0a4b908a09788f533b762b00,c28ebf10f7f89b4b0a4b908a09788f533b762b00,"Fix playing local content after permission granted.

After maybeRequestReadExternalStoragePermission and the
subsequent granting of the permission, the media source
would never be created.

I can't see a case where initializePlayer shouldn't create
a new MediaSource, so I've just removed the condition.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164260074"
andrewlewis,2017-08-04 13:51:38,https://api.github.com/repos/google/ExoPlayer/git/commits/576f362912924cff21e24ed9f7c52389c50a982c,576f362912924cff21e24ed9f7c52389c50a982c,"Update playbackInfo even if there's no period holder

This is required to correctly update the playbackInfo.periodId when
seeking close to the end of a period with ads, as the seek operation
leads to an immediate source info refresh when midroll ads are marked as
played.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164257099"
andrewlewis,2017-08-04 13:20:38,https://api.github.com/repos/google/ExoPlayer/git/commits/08e58af6e7ac8707e59fd2c80c48c5d4569ba48e,08e58af6e7ac8707e59fd2c80c48c5d4569ba48e,"Separate handling of oldTimeline == null case

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164254522"
ojw28,2017-08-04 07:57:05,https://api.github.com/repos/google/ExoPlayer/git/commits/1203b534062b4b9ceefa59549fd72e796e0146ca,1203b534062b4b9ceefa59549fd72e796e0146ca,"Decrease number of Vpx input buffers

I think they're excessively sized also, but changing that
is a little more risky. And we should look at investigating
the input buffer size for all our decoder extensions,
rather than just this one.

Issue: #3120

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164234087"
ojw28,2017-08-03 17:06:28,https://api.github.com/repos/google/ExoPlayer/git/commits/6bf967263ba5816467516fae1bc86e796a08ac60,6bf967263ba5816467516fae1bc86e796a08ac60,"Remove dead sample link

Issue: #3135

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164138761"
ojw28,2017-08-03 15:26:44,https://api.github.com/repos/google/ExoPlayer/git/commits/de1f538e14738e0e8e84cc14156d005f264918d9,de1f538e14738e0e8e84cc14156d005f264918d9,"Bump version

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164126494"
andrewlewis,2017-08-03 12:19:02,https://api.github.com/repos/google/ExoPlayer/git/commits/5fbb58c62f77707eef49709348815f5b5f46afaa,5fbb58c62f77707eef49709348815f5b5f46afaa,"Take into account init data size for input buffer size

Issue: #2900

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164110904"
ojw28,2017-08-03 11:11:08,https://api.github.com/repos/google/ExoPlayer/git/commits/c2049ba1a7946c3e4c49b02098104a283ca13167,c2049ba1a7946c3e4c49b02098104a283ca13167,"Fix some lint warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164105662"
ojw28,2017-08-03 11:10:10,https://api.github.com/repos/google/ExoPlayer/git/commits/587704a2a0d9a4c4ce1a2281e0918f5615248b93,587704a2a0d9a4c4ce1a2281e0918f5615248b93,"Add some missing @param Javadoc to extensions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164105607"
ojw28,2017-08-03 10:33:22,https://api.github.com/repos/google/ExoPlayer/git/commits/838c4414eb63ce4a90119793b46b510e8acee639,838c4414eb63ce4a90119793b46b510e8acee639,"Fix targetSdkVersion to be consistent with gradle builds

The manifest value is always overridden in gradle builds,
so this is for internal builds only. The value should be
the same (i.e. 25!).

Also fix IMA build to force the right support library
version, attempt 2!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164103183"
AquilesCanta,2017-08-03 07:50:47,https://api.github.com/repos/google/ExoPlayer/git/commits/fbee0c85212088212a3c1e1db217263b1807e639,fbee0c85212088212a3c1e1db217263b1807e639,"Replace README reference to source with reference to javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164090619"
ojw28,2017-08-04 07:57:05,https://api.github.com/repos/google/ExoPlayer/git/commits/40f3f1cb784343657057bee8c212ba9e508e270b,40f3f1cb784343657057bee8c212ba9e508e270b,"Decrease number of Vpx input buffers

I think they're excessively sized also, but changing that
is a little more risky. And we should look at investigating
the input buffer size for all our decoder extensions,
rather than just this one.

Issue: #3120

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164234087"
ojw28,2017-08-03 17:18:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b664e92bb4084af281d8ab116bcd4cb3a7671030,b664e92bb4084af281d8ab116bcd4cb3a7671030,"Remove shuffle button since it doesn't work yet

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164141326"
ojw28,2017-08-03 17:06:28,https://api.github.com/repos/google/ExoPlayer/git/commits/95dd590016d064a47f142159afa70286ba63ec4c,95dd590016d064a47f142159afa70286ba63ec4c,"Remove dead sample link

Issue: #3135

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164138761"
ojw28,2017-08-03 15:26:44,https://api.github.com/repos/google/ExoPlayer/git/commits/1109bf50dd9cb9ed5108cf325559e139364e9872,1109bf50dd9cb9ed5108cf325559e139364e9872,"Bump version

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164126494"
tonihei,2017-08-03 15:22:45,https://api.github.com/repos/google/ExoPlayer/git/commits/53bc59b9d214a13b44a08fc088cb69971c40f2d8,53bc59b9d214a13b44a08fc088cb69971c40f2d8,"Add UI resources for shuffle mode.

Including strings, icon, and button.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164126101"
AquilesCanta,2017-08-03 15:17:26,https://api.github.com/repos/google/ExoPlayer/git/commits/72daef7a4c3ae5a9375f7d064d88bbc9f6f96da6,72daef7a4c3ae5a9375f7d064d88bbc9f6f96da6,"Don't read GaSpecificConfig unless required

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164125579"
tonihei,2017-08-03 14:22:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ccd05cbd04ca62659e4c1992dfeda912e2dbf7b9,ccd05cbd04ca62659e4c1992dfeda912e2dbf7b9,"Add fake simple exo player.

This implementation runs as fast as possible by triggering a simplified
playback loop continuously without waiting. The class only supports a basic
use case with a single-period timeline, no timeline update, no seeks or other
user-initiated actions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164120420"
tonihei,2017-08-03 13:45:18,https://api.github.com/repos/google/ExoPlayer/git/commits/6f7dc974c963169130a8d59d4890f771883d66d7,6f7dc974c963169130a8d59d4890f771883d66d7,"Add forwarding timeline to prevent repetition of boiler-plate code.

Multiple timelines work as a wrapper around another timeline and forward
most of the method calls to the wrapped timeline. Added a base class meant to
be overridden which handles all the boiler-plate forwarding.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164117264"
jeoliva,2017-08-04 07:47:54,https://api.github.com/repos/google/ExoPlayer/git/commits/768a73b377d842aeefdd466cf7a5904f858cc8a4,768a73b377d842aeefdd466cf7a5904f858cc8a4,"Add possibility of forcing a specific license URL in HttpMediaDrmCallback

- Renamed some license URL related variables to keep consistency across the code.
- Added a new parameter to HttpMediaDrmCallback that enables forcing defaultLicenseURL as the license acquisition URL."
tonihei,2017-08-03 13:32:22,https://api.github.com/repos/google/ExoPlayer/git/commits/3c6ad40481c3b4f2b1a757b7e182c1343a545d03,3c6ad40481c3b4f2b1a757b7e182c1343a545d03,"Add shuffle order interface and default implementation.

These classes maintain a shuffled order of indices allowing to query the
next, previous, first, and last indices. And also support inserting and
removing elements without changing the shuffled order of the rest.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164116287"
andrewlewis,2017-08-03 12:19:02,https://api.github.com/repos/google/ExoPlayer/git/commits/cb00b0209f551eefe7968633715ed3067b55aa08,cb00b0209f551eefe7968633715ed3067b55aa08,"Take into account init data size for input buffer size

Issue: #2900

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164110904"
ojw28,2017-08-03 11:11:08,https://api.github.com/repos/google/ExoPlayer/git/commits/db991873819d3bf6ab8b6cbe2514b89d03c1ef0e,db991873819d3bf6ab8b6cbe2514b89d03c1ef0e,"Fix some lint warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164105662"
ojw28,2017-08-03 11:10:10,https://api.github.com/repos/google/ExoPlayer/git/commits/78cdd08684ae7ad1f8cfe2793f5f9af52687f862,78cdd08684ae7ad1f8cfe2793f5f9af52687f862,"Add some missing @param Javadoc to extensions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164105607"
ojw28,2017-08-03 10:33:22,https://api.github.com/repos/google/ExoPlayer/git/commits/147d5bb3b21432d364820582d7f1b167ded65240,147d5bb3b21432d364820582d7f1b167ded65240,"Fix targetSdkVersion to be consistent with gradle builds

The manifest value is always overridden in gradle builds,
so this is for internal builds only. The value should be
the same (i.e. 25!).

Also fix IMA build to force the right support library
version, attempt 2!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164103183"
andrewlewis,2017-08-03 08:51:50,https://api.github.com/repos/google/ExoPlayer/git/commits/81cbd7348fab7a2ed2468beba7eb11cafacf0f38,81cbd7348fab7a2ed2468beba7eb11cafacf0f38,"Fix path to constants.gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164095350"
AquilesCanta,2017-08-03 07:50:47,https://api.github.com/repos/google/ExoPlayer/git/commits/a5f9f40bf0650adafac8ba69b98f8bbb3124d803,a5f9f40bf0650adafac8ba69b98f8bbb3124d803,"Replace README reference to source with reference to javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164090619"
tonihei,2017-08-02 16:26:58,https://api.github.com/repos/google/ExoPlayer/git/commits/19aa69e0f4a0f57816942fef0eeddf33f6c16a7e,19aa69e0f4a0f57816942fef0eeddf33f6c16a7e,"Remove child data holder helper from AbstractConcatenatedTimeline.

This helper class required a scratch instance to write on. Such a scratch
instance may violate the immuatability of the timelines if used by multiple
threads simultaneously.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163992458"
ojw28,2017-08-02 16:26:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a3df29a2462bed0f0c9a6c31d022de785baab9e9,a3df29a2462bed0f0c9a6c31d022de785baab9e9,"Some extractor fixes

- Fix Ogg extractor to work without sniffing.
- Fix extractors to handle seek() before init().
- Add tests for both issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163992343"
ojw28,2017-08-02 17:44:38,https://api.github.com/repos/google/ExoPlayer/git/commits/1f019ca80854885d2d42e1fa08acfed9527bb41c,1f019ca80854885d2d42e1fa08acfed9527bb41c,"Fix build.gradle to use modulePrefix

Issue: #3131

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=164004981"
tonihei,2017-08-02 16:26:58,https://api.github.com/repos/google/ExoPlayer/git/commits/5ca84ebfd8bc933c676c3b1c5e8194ab21a95002,5ca84ebfd8bc933c676c3b1c5e8194ab21a95002,"Remove child data holder helper from AbstractConcatenatedTimeline.

This helper class required a scratch instance to write on. Such a scratch
instance may violate the immuatability of the timelines if used by multiple
threads simultaneously.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163992458"
ojw28,2017-08-02 16:26:04,https://api.github.com/repos/google/ExoPlayer/git/commits/412138b2eaf475edc4d7c997aad569ae87573aca,412138b2eaf475edc4d7c997aad569ae87573aca,"Some extractor fixes

- Fix Ogg extractor to work without sniffing.
- Fix extractors to handle seek() before init().
- Add tests for both issues.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163992343"
ojw28,2017-08-02 14:07:38,https://api.github.com/repos/google/ExoPlayer/git/commits/49b83c01ca2d005f54530adef360b5e9ae9bd235,49b83c01ca2d005f54530adef360b5e9ae9bd235,"Throw ParserException if parsing unsupported media

This is for consistency with what we do elsewhere;
specifically in FragmentedMp4Extractor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163974960"
tonihei,2017-08-02 12:58:45,https://api.github.com/repos/google/ExoPlayer/git/commits/22ea9ed6875384800bcd86772709ee68c2ebdf67,22ea9ed6875384800bcd86772709ee68c2ebdf67,"Clean-up ExoHostedTest/HostActivity.

This change clearly seperates the hosting of a test (HostActivity) from
the internals of hosting an ExoPlayer lifecycle (ExoHostedTest).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163967960"
AquilesCanta,2017-08-02 12:57:38,https://api.github.com/repos/google/ExoPlayer/git/commits/55fe5d21a21ca257f631f8613e3ea6b26105333a,55fe5d21a21ca257f631f8613e3ea6b26105333a,"Create the demos dir

Now the demo app is under demos/main.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163967883"
ojw28,2017-08-02 10:07:56,https://api.github.com/repos/google/ExoPlayer/git/commits/cad25e5a4dba6e2b3d113c80ab5e25b5c8026e1d,cad25e5a4dba6e2b3d113c80ab5e25b5c8026e1d,"Further fix H262 segmentation

Issue: #2891

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163951910"
andrewlewis,2017-08-02 08:25:41,https://api.github.com/repos/google/ExoPlayer/git/commits/e604daaa0954381f1e6917d66fb410627a967935,e604daaa0954381f1e6917d66fb410627a967935,"Fix handling of H.262 CSD

The start code for H.262 codec-specific data may be across a packet boundary.
Before this change the offset passed to CsdBuffer.onData may have been before
the start point of the data in the newData buffer.

After this change, start codes are added directly to the CSD buffer when it's
filling and any start code bytes added by onData (at the end of a packet) are
discarded.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163943584"
ojw28,2017-08-01 17:20:54,https://api.github.com/repos/google/ExoPlayer/git/commits/0717782fdc4e0dedf5b253bb294d10640beae262,0717782fdc4e0dedf5b253bb294d10640beae262,Minor cleanup
ojw28,2017-08-01 15:08:58,https://api.github.com/repos/google/ExoPlayer/git/commits/18bb04d6d9fcca6fc3a077a75e97c32fd5305ddf,18bb04d6d9fcca6fc3a077a75e97c32fd5305ddf,"Bump version to 2.5.0-beta2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163830353"
ojw28,2017-08-01 14:50:12,https://api.github.com/repos/google/ExoPlayer/git/commits/b2da61f70bfb9b1fea13db63fd2ce6dac92dc3ad,b2da61f70bfb9b1fea13db63fd2ce6dac92dc3ad,"Clean up MediaSessionExt documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163828712"
andrewlewis,2017-08-01 11:44:02,https://api.github.com/repos/google/ExoPlayer/git/commits/395249a950ec73b3475ff84239f4d14dffa048bc,395249a950ec73b3475ff84239f4d14dffa048bc,"Fix sequence extension position calculation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163814942"
goffioul,2017-07-27 19:44:28,https://api.github.com/repos/google/ExoPlayer/git/commits/893c7f34ba333d290bdbffcf16c186b0b6dcbbe8,893c7f34ba333d290bdbffcf16c186b0b6dcbbe8,"Fix H262 segmentation.

Prepend sequence headers to the next frame, instead of appending them to
the previous frame. Tested decoders like FFMPEG and Google's
Android/MPEG2 expects to read the sequence headers before the first
frame they apply to. When sequence headers are appended to the previous
frame, these are ignored and this leads to incorrect decoding."
dbrain,2017-07-26 01:30:02,https://api.github.com/repos/google/ExoPlayer/git/commits/4a6a5b527fd411340a3a8300b29d7c222685f0f5,4a6a5b527fd411340a3a8300b29d7c222685f0f5,Allow PlaybackControlView to be overridden in SimpleExoPlayerView
ojw28,2017-08-02 10:07:56,https://api.github.com/repos/google/ExoPlayer/git/commits/8e08d982aba3edf87c74f6462a99cadc793fa487,8e08d982aba3edf87c74f6462a99cadc793fa487,"Further fix H262 segmentation

Issue: #2891

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163951910"
andrewlewis,2017-08-02 08:25:41,https://api.github.com/repos/google/ExoPlayer/git/commits/962a71314a670fb7e489a12444430f19623dce10,962a71314a670fb7e489a12444430f19623dce10,"Fix handling of H.262 CSD

The start code for H.262 codec-specific data may be across a packet boundary.
Before this change the offset passed to CsdBuffer.onData may have been before
the start point of the data in the newData buffer.

After this change, start codes are added directly to the CSD buffer when it's
filling and any start code bytes added by onData (at the end of a packet) are
discarded.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163943584"
ojw28,2017-08-01 17:20:54,https://api.github.com/repos/google/ExoPlayer/git/commits/1a95a35434ec335d0c25d16cb80200673fb5a69d,1a95a35434ec335d0c25d16cb80200673fb5a69d,Minor cleanup
ojw28,2017-08-01 15:08:58,https://api.github.com/repos/google/ExoPlayer/git/commits/c01c8cd2a6acee76532d9b32465a4b4743281c9b,c01c8cd2a6acee76532d9b32465a4b4743281c9b,"Bump version to 2.5.0-beta2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163830353"
ojw28,2017-08-01 14:50:12,https://api.github.com/repos/google/ExoPlayer/git/commits/13513b9c3eb881bc87028245ea569c409b9fae26,13513b9c3eb881bc87028245ea569c409b9fae26,"Clean up MediaSessionExt documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163828712"
andrewlewis,2017-08-01 11:44:02,https://api.github.com/repos/google/ExoPlayer/git/commits/55620348d4974ba8dfd0834e7ea968c41d6bab44,55620348d4974ba8dfd0834e7ea968c41d6bab44,"Fix sequence extension position calculation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163814942"
tonihei,2017-08-01 09:18:48,https://api.github.com/repos/google/ExoPlayer/git/commits/1151104e2f9c5e10da869dfb59860ca4a890e371,1151104e2f9c5e10da869dfb59860ca4a890e371,"Use TrackGroup instead of TrackSelection in FakeAdaptiveDataSet.

This was a bug as the data set should contain sample data for all available
tracks. Also added a unit test.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163806579"
ojw28,2017-08-01 10:09:30,https://api.github.com/repos/google/ExoPlayer/git/commits/08faafb4c16c96639ce648f7daee526708ddcceb,08faafb4c16c96639ce648f7daee526708ddcceb,"Merge pull request #3115 from goffioul/h262-segmentation

Fix H262 segmentation."
ojw28,2017-08-01 09:48:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b562eb215f0c0d20617e81918e3be64c28634302,b562eb215f0c0d20617e81918e3be64c28634302,"Merge pull request #3098 from dbrain/custom_playback_control_view

Allow PlaybackControlView to be overridden in SimpleExoPlayerView"
ojw28,2017-07-31 20:28:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9c2528a70f6fa56db6c9b10b794c5bf945731b1d,9c2528a70f6fa56db6c9b10b794c5bf945731b1d,Correctly handle reading 0 bits
ojw28,2017-07-31 16:50:08,https://api.github.com/repos/google/ExoPlayer/git/commits/85445536c31809d78351023ec26d3da18eea7f58,85445536c31809d78351023ec26d3da18eea7f58,"Fix 2.5.0 lint errors

- Publish IMA extension
- Force IMA to use the correct version of the support library
- Add missing sr translations for repeat mode strings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163705883"
ojw28,2017-07-31 15:08:29,https://api.github.com/repos/google/ExoPlayer/git/commits/bf4a460e4c8ae9c772f99fad69ebecd42849496b,bf4a460e4c8ae9c772f99fad69ebecd42849496b,"Fix typo in Id3Decoder

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163694825"
ojw28,2017-07-31 14:53:08,https://api.github.com/repos/google/ExoPlayer/git/commits/2b5bd800e3b3f2e85731f8bd7a7565bdac77610e,2b5bd800e3b3f2e85731f8bd7a7565bdac77610e,"Robustness fix for malformed ID3 metadata

Issue: #3116

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163693235"
ojw28,2017-07-31 14:00:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ecbcf09804c80f7a66d03c94f51f44be88b11803,ecbcf09804c80f7a66d03c94f51f44be88b11803,"Check for null entries in ConcatenatingMediaSource

We do this in the dynamic case, and I think we've seen
a few GitHub issues where developers do this and don't
understand what they've done wrong (because the failure
comes later).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163688557"
andrewlewis,2017-07-31 10:30:09,https://api.github.com/repos/google/ExoPlayer/git/commits/aeb2f620f11717aa0f1a413a5c7d5cd57ff48056,aeb2f620f11717aa0f1a413a5c7d5cd57ff48056,"Handle release() while initializing the ads manager

Also don't detach any attached player in release() to prevent a possible
NullPointerException if ImaAdsLoader.release() runs first, then the MediaSource
is released and detaches the player. This is safe because if the loader was
attached it's guaranteed to be detached.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163673750"
andrewlewis,2017-07-28 11:45:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ad5c8af01957975bb8eb61dc7f3edf60e2e4aa39,ad5c8af01957975bb8eb61dc7f3edf60e2e4aa39,"Allow apps to handle ad clicked/tapped events

Issue: #3106

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163455563"
AquilesCanta,2017-07-22 09:17:02,https://api.github.com/repos/google/ExoPlayer/git/commits/8e7a52483a38543d16a7cfd1d5a8c0717f5533e5,8e7a52483a38543d16a7cfd1d5a8c0717f5533e5,"Fix PlaybackControlView's repeat mode button update when player is null

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162824522"
ojw28,2017-07-31 16:50:08,https://api.github.com/repos/google/ExoPlayer/git/commits/957158b7ffe1a07d267bf31cb6a2cb52d672e8bb,957158b7ffe1a07d267bf31cb6a2cb52d672e8bb,"Fix 2.5.0 lint errors

- Publish IMA extension
- Force IMA to use the correct version of the support library
- Add missing sr translations for repeat mode strings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163705883"
ojw28,2017-07-31 15:08:29,https://api.github.com/repos/google/ExoPlayer/git/commits/516762946d52e09ece780046715716cafdb40c8a,516762946d52e09ece780046715716cafdb40c8a,"Fix typo in Id3Decoder

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163694825"
ojw28,2017-07-31 14:53:08,https://api.github.com/repos/google/ExoPlayer/git/commits/ecd9cff0588f739a815f79b0f7f7433282547166,ecd9cff0588f739a815f79b0f7f7433282547166,"Robustness fix for malformed ID3 metadata

Issue: #3116

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163693235"
ojw28,2017-07-31 14:00:10,https://api.github.com/repos/google/ExoPlayer/git/commits/3ec0ccabbc96ecd2164a6cd646493b92e72f7825,3ec0ccabbc96ecd2164a6cd646493b92e72f7825,"Check for null entries in ConcatenatingMediaSource

We do this in the dynamic case, and I think we've seen
a few GitHub issues where developers do this and don't
understand what they've done wrong (because the failure
comes later).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163688557"
ojw28,2017-07-31 12:49:58,https://api.github.com/repos/google/ExoPlayer/git/commits/c2d7e05429afeead1cac0d441f748b18c7319c0b,c2d7e05429afeead1cac0d441f748b18c7319c0b,"Propagate skipped input buffers through to CodecCounters

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163683081"
andrewlewis,2017-07-31 10:30:09,https://api.github.com/repos/google/ExoPlayer/git/commits/cdeea279739e4a5e9e418bee76051493ce6b8f5b,cdeea279739e4a5e9e418bee76051493ce6b8f5b,"Handle release() while initializing the ads manager

Also don't detach any attached player in release() to prevent a possible
NullPointerException if ImaAdsLoader.release() runs first, then the MediaSource
is released and detaches the player. This is safe because if the loader was
attached it's guaranteed to be detached.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163673750"
andrewlewis,2017-07-28 11:45:52,https://api.github.com/repos/google/ExoPlayer/git/commits/1f0c85bd73c3ba7bfe8ce913fe22f2a69bb9112a,1f0c85bd73c3ba7bfe8ce913fe22f2a69bb9112a,"Allow apps to handle ad clicked/tapped events

Issue: #3106

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163455563"
AquilesCanta,2017-07-28 11:39:57,https://api.github.com/repos/google/ExoPlayer/git/commits/bb044563245b3cf41772cf73ee5c75d84633f00b,bb044563245b3cf41772cf73ee5c75d84633f00b,"Fix IndexOutOfBounds when reading a multiple of 8 number of bits

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163455269"
tonihei,2017-07-27 15:34:46,https://api.github.com/repos/google/ExoPlayer/git/commits/5bd5af8c60b1996fd819d0250f7dce8e1d3f46e3,5bd5af8c60b1996fd819d0250f7dce8e1d3f46e3,"Replace canStop with blockUntilEnded in HostedActiviy.

The canStop method gets called every second in a seperate thread until the
test can be stopped. Replacing it with blockUntilEnded forwards the
responsibility to stop to the test itself which has better control over the
stop condition.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163343824"
erdemguven,2017-07-27 15:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/c3d7ccc3cb00bde4f1c2ae40d2e5a12ef8e494a8,c3d7ccc3cb00bde4f1c2ae40d2e5a12ef8e494a8,"Replace iterable foreach loops with indexed for loops

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163343347"
tonihei,2017-07-27 15:15:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ad5ca0812d532645a60407881244df6ecad0e957,ad5ca0812d532645a60407881244df6ecad0e957,"Add unit test for FakeDataSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163341994"
AquilesCanta,2017-07-27 14:20:41,https://api.github.com/repos/google/ExoPlayer/git/commits/84d19c464b04e0dc54a133ed5f56fdfb04ed8266,84d19c464b04e0dc54a133ed5f56fdfb04ed8266,"Add support for AAC-LATM in transport streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163337073"
AquilesCanta,2017-07-27 13:20:24,https://api.github.com/repos/google/ExoPlayer/git/commits/5278a63768e51222af9163331142978373c6d94d,5278a63768e51222af9163331142978373c6d94d,"Change copyRenditionsList parameters names

Also instantiate the resulting list with a predicted size to minimize
list resizing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163332285"
erdemguven,2017-07-26 15:58:02,https://api.github.com/repos/google/ExoPlayer/git/commits/bcc69c2da7afc8a8463b9ec11fab78af2305564a,bcc69c2da7afc8a8463b9ec11fab78af2305564a,"Add HlsMasterPlaylist.copy method

Creates a copy of this playlist which includes only the variants identified by the given variantUrls.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163212562"
erdemguven,2017-07-26 11:47:56,https://api.github.com/repos/google/ExoPlayer/git/commits/9936bc670293514811681cf9e1e3d89780f29ada,9936bc670293514811681cf9e1e3d89780f29ada,"Replace iterable foreach loops with indexed for loops

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163193118"
tonihei,2017-07-26 10:08:52,https://api.github.com/repos/google/ExoPlayer/git/commits/b631755b634b14ca13b25742869fc9d9f13f1d9d,b631755b634b14ca13b25742869fc9d9f13f1d9d,"Clean up test runner for ExoPlayer tests.

Currently the ExoPlayerWrapper is used to run tests using an ExoPlayer
implementation. Some properties of the test are set in the constructor, some
are set by overloading the class, others are hard-coded in the
ExoPlayerWrapper class, and a mechanism similar to the existing ActionSchedule
is missing.

This change does the following:
 1. Renames ExoPlayerWrapper to ExoPlayerTestRunner as it better reflects
    its purpose.
 2. Adds an internal Builder to easily set-up the test in a coherent way. This
    allows to only set necessary test components while using defaults for the rest.
 3. Integrate ActionSchedule.
 4. Apply the new structure to the existing tests currently using ExoPlayerWrapper.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163186578"
erdemguven,2017-07-26 10:03:48,https://api.github.com/repos/google/ExoPlayer/git/commits/cdb71a80aae7cc1bb605b74cf83623b2786e4990,cdb71a80aae7cc1bb605b74cf83623b2786e4990,"Remove empty line after copyright text

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163186057"
erdemguven,2017-07-25 20:45:54,https://api.github.com/repos/google/ExoPlayer/git/commits/2dc1870dd43003733e218a9d9d25a751c987d722,2dc1870dd43003733e218a9d9d25a751c987d722,"Simple Java style fix

Put space between ] and {.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163116816"
erdemguven,2017-07-25 10:41:23,https://api.github.com/repos/google/ExoPlayer/git/commits/3f7b4dc75fca331e13880a9a9daf04b697e5afba,3f7b4dc75fca331e13880a9a9daf04b697e5afba,"Add HlsDownloader

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=163052346"
tonihei,2017-07-24 11:16:47,https://api.github.com/repos/google/ExoPlayer/git/commits/3991a6198bf9d51ea06e4189f4aad3dfae3a9de4,3991a6198bf9d51ea06e4189f4aad3dfae3a9de4,"Extend ActionSchedule with new actions.

The new actions are: prepare source, set repeat mode, wait for timeline
change, wait for position discontinuity, execute Runnable.

Moreover, this change removes the restriction of using a SimpleExoPlayer to
allow ActionSchedule to be used in other scenarios.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162918554"
tonihei,2017-07-24 11:15:22,https://api.github.com/repos/google/ExoPlayer/git/commits/0411add91e383bead238403c584fbb01edebc25b,0411add91e383bead238403c584fbb01edebc25b,"Add fake adaptive media source.

This class extends the existing FakeMediaSource by creating a
FakeAdaptiveMediaPeriod instead of a FakeMediaPeriod.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162918487"
tonihei,2017-07-24 10:46:14,https://api.github.com/repos/google/ExoPlayer/git/commits/1bc01c09eefe4898de70b69d158ce700e45a65a6,1bc01c09eefe4898de70b69d158ce700e45a65a6,"Add fake adaptive media period.

This class extends the existing FakeMediaPeriod by using a ChunkSampleStream
with chunks from a FakeChunkSource instead of a FakeSampleStream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162916656"
AquilesCanta,2017-07-22 09:17:02,https://api.github.com/repos/google/ExoPlayer/git/commits/df562bc8d1d6d233e64dbf7e15df216df94aca7d,df562bc8d1d6d233e64dbf7e15df216df94aca7d,"Fix PlaybackControlView's repeat mode button update when player is null

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162824522"
goffioul,2017-07-27 19:44:28,https://api.github.com/repos/google/ExoPlayer/git/commits/908362bdf352883497a58ff4c520f69497463070,908362bdf352883497a58ff4c520f69497463070,"Fix H262 segmentation.

Prepend sequence headers to the next frame, instead of appending them to
the previous frame. Tested decoders like FFMPEG and Google's
Android/MPEG2 expects to read the sequence headers before the first
frame they apply to. When sequence headers are appended to the previous
frame, these are ignored and this leads to incorrect decoding."
dbrain,2017-07-26 01:30:02,https://api.github.com/repos/google/ExoPlayer/git/commits/be85da3a69b306e5d8ca9dc0faad806d51433aad,be85da3a69b306e5d8ca9dc0faad806d51433aad,Allow PlaybackControlView to be overridden in SimpleExoPlayerView
ojw28,2017-07-21 16:29:46,https://api.github.com/repos/google/ExoPlayer/git/commits/13732fe618c4e2c1da2ec758c8b8ee4c4dc5ff99,13732fe618c4e2c1da2ec758c8b8ee4c4dc5ff99,"Release notes + version bump for 2.5.0-beta1

There's no way to represent a beta in our integer versioning
scheme. I propose we just set it the same for all betas + the
stable release. The versioning for the demo app isn't that
important, so I've just put it directly to 2.5.0 as well.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162749130"
ojw28,2017-07-21 15:58:34,https://api.github.com/repos/google/ExoPlayer/git/commits/4436e94ba85212472083128ba57a2087f19feb4b,4436e94ba85212472083128ba57a2087f19feb4b,"Hardcode libopus output frequency to 48000Hz

Issue: #3080

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162746202"
andrewlewis,2017-07-21 15:21:19,https://api.github.com/repos/google/ExoPlayer/git/commits/cdfe57833dc91cc8f4e611d04627a72dd1b8e439,cdfe57833dc91cc8f4e611d04627a72dd1b8e439,"Update IMA extension README

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162742982"
ojw28,2017-07-21 14:52:07,https://api.github.com/repos/google/ExoPlayer/git/commits/3eb85446a2ea4823ed08249ab626bbf34082397e,3eb85446a2ea4823ed08249ab626bbf34082397e,"Fully document DefaultTrackSelector

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162740498"
ojw28,2017-07-21 14:51:27,https://api.github.com/repos/google/ExoPlayer/git/commits/9bb8b240d20a04ebd823c35a273ebc0f490f27b2,9bb8b240d20a04ebd823c35a273ebc0f490f27b2,"Improve Player/ExoPlayer Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162740451"
marcbaechinger,2017-07-21 13:56:03,https://api.github.com/repos/google/ExoPlayer/git/commits/6f600a8fa5486c0177a7b85c92b435b96805ea2f,6f600a8fa5486c0177a7b85c92b435b96805ea2f,"Take care playback preparer and queue navigator can not register overlapping
playback actions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162736210"
marcbaechinger,2017-07-21 11:48:03,https://api.github.com/repos/google/ExoPlayer/git/commits/3bc3900dba5b9bfb5b6f9b7e147233631207f498,3bc3900dba5b9bfb5b6f9b7e147233631207f498,"Do not update queue when the queue did not actually change to avoid
unnecessary updates are broadcasted to all clients.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162728670"
ojw28,2017-07-21 09:43:25,https://api.github.com/repos/google/ExoPlayer/git/commits/89181cf4bccfcfca91205ba95acfa7e47fff0b0b,89181cf4bccfcfca91205ba95acfa7e47fff0b0b,"Fully document MappingTrackSelector

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162721489"
andrewlewis,2017-07-20 14:05:34,https://api.github.com/repos/google/ExoPlayer/git/commits/07de4d1b2ca593ed917318eec06a75bc6eb8f840,07de4d1b2ca593ed917318eec06a75bc6eb8f840,"Handle ad skipping and content resume

SKIPPED can't be handled as CONTENT_RESUME_REQUESTED because after skipping an
ad there may be further ads to play in its ad group.

Remove workaround for handling unexpected playAd without stopAd, as the player
can instead recover when IMA sends CONTENT_RESUME_REQUESTED. This in turn fixes
handling of the case where playAd is called twice but IMA expects only the
first ad to play, when skipping a particular ad. (Add an ad tag where this
occurs to internal samples.)

Check whether a currently playing ad has been marked as played in
ExoPlayerImplInternal, and handle this case as a seek. This ensures that any
loaded ad periods are discarded in the case of CONTENT_RESUME_REQUESTED.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162610621"
ojw28,2017-07-20 14:02:52,https://api.github.com/repos/google/ExoPlayer/git/commits/94b08b27e96efb6886af3602968435f305539e16,94b08b27e96efb6886af3602968435f305539e16,"Fix MediaSession gradle file to use modulePrefix

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162610352"
andrewlewis,2017-07-20 12:57:25,https://api.github.com/repos/google/ExoPlayer/git/commits/554a399407317626acf789637eb186631eb23dc8,554a399407317626acf789637eb186631eb23dc8,"Switch to non-deprecated player constants

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162605429"
marcbaechinger,2017-07-20 12:44:21,https://api.github.com/repos/google/ExoPlayer/git/commits/8d56f904a068583eed2a387811edcd3643004424,8d56f904a068583eed2a387811edcd3643004424,"make MediaSessionConnector depend only to the Player interface

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162604746"
ojw28,2017-07-20 11:56:38,https://api.github.com/repos/google/ExoPlayer/git/commits/33f5bd6aed9c75e5e560ccea8369b64f7496eb14,33f5bd6aed9c75e5e560ccea8369b64f7496eb14,"Start better documenting track selection

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162601990"
ojw28,2017-07-20 11:56:02,https://api.github.com/repos/google/ExoPlayer/git/commits/19087a7fa0481dde8ae266d8b9cfe196477b2aa6,19087a7fa0481dde8ae266d8b9cfe196477b2aa6,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162601961"
ojw28,2017-07-20 11:51:59,https://api.github.com/repos/google/ExoPlayer/git/commits/54e869cbbdf3bc5abbc08a090839e288e6624945,54e869cbbdf3bc5abbc08a090839e288e6624945,"Update Timeline Javadoc to include brief mention of ad groups

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162601778"
ojw28,2017-07-19 19:05:45,https://api.github.com/repos/google/ExoPlayer/git/commits/cbffc14fa1ba2fa84379e95679f649cb8605e805,cbffc14fa1ba2fa84379e95679f649cb8605e805,"Merge pull request #3083 from google/dev-v2-r2.4.4

r2.4.4"
ojw28,2017-07-19 18:52:12,https://api.github.com/repos/google/ExoPlayer/git/commits/46ba81c45ec2fc12cc8a5d6f75d2048604a8ebba,46ba81c45ec2fc12cc8a5d6f75d2048604a8ebba,"Update release notes + bump version number

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162514848"
ojw28,2017-07-19 18:52:12,https://api.github.com/repos/google/ExoPlayer/git/commits/eb3860162671c0af65c6b4c0aa4206baa38f3461,eb3860162671c0af65c6b4c0aa4206baa38f3461,"Update release notes + bump version number

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162514848"
ojw28,2017-07-19 14:43:43,https://api.github.com/repos/google/ExoPlayer/git/commits/108f4f14f3b7788472153925cb67495df3c43c9a,108f4f14f3b7788472153925cb67495df3c43c9a,"Suppress no-op timeline changes in ExtractorMediaSource

When an ExtractorMediaSource is used in a concatenation, and
probably when using repeat modes, it needs to produce multiple
ExtractorMediaPeriods during usage. Currently we fire a
source info refresh every time a new ExtractorMediaPeriod
instance prepares, which triggers ExoPlayer.EventListener's
onTimelineChanged method. In nearly all cases the timeline is
unchanged after the first ExtractorMediaPeriod is prepared.
This change suppresses these no-op changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162484234"
ojw28,2017-07-19 13:15:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e5952d48595da297b97d1e8fe4291e044a1270d6,e5952d48595da297b97d1e8fe4291e044a1270d6,"Upgrade RTMP dependency

- Drop minimum version to new RTMP min version
- Publish the extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162477200"
ojw28,2017-07-24 04:16:16,https://api.github.com/repos/google/ExoPlayer/git/commits/5e203f482a567ce04bcd243097ceb96addad0c39,5e203f482a567ce04bcd243097ceb96addad0c39,"Correctly flush HlsSampleStreamWrapper when primary selection changes

Issue: #3079

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162473480"
andrewlewis,2017-07-19 11:54:31,https://api.github.com/repos/google/ExoPlayer/git/commits/9716b03f8fa11d855599008572da2f89419043a8,9716b03f8fa11d855599008572da2f89419043a8,"Fix isLastPeriod to take into account the played ad count

A content period just before a postroll ad group with all ads played
was not being marked as the last media period in the timeline period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162471919"
andrewlewis,2017-07-19 11:49:27,https://api.github.com/repos/google/ExoPlayer/git/commits/4658e619b3ed1ed12623145bbe2afaefcba19b3e,4658e619b3ed1ed12623145bbe2afaefcba19b3e,"Don't modify playWhenReady in ImaAdsLoader, except for playAd

Store playWhenReady when playAd is called, and restore it if necessary when the
content resumes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162471616"
andrewlewis,2017-07-18 17:23:07,https://api.github.com/repos/google/ExoPlayer/git/commits/5e81cf99dcf6381067e6eef43ec94e770315ec86,5e81cf99dcf6381067e6eef43ec94e770315ec86,"Fix comment typo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162368534"
AquilesCanta,2017-07-18 17:04:10,https://api.github.com/repos/google/ExoPlayer/git/commits/4f5ac9e04f192ebacc425754e494a9f380a1b79f,4f5ac9e04f192ebacc425754e494a9f380a1b79f,"Extract Player interface from ExoPlayer

This is the first step towards facilitating Cast integration to ExoPlayer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162366198"
andrewlewis,2017-07-18 16:52:30,https://api.github.com/repos/google/ExoPlayer/git/commits/41028fafbacb096930739225f1dc5cc71d253c27,41028fafbacb096930739225f1dc5cc71d253c27,"Workaround late event delivery from IMA

Remove assertions in pauseAd()/playAd(), which can fail if events are delivered
after detaching the player, and log warnings instead.

Use whether IMA has sent CONTENT_PAUSE_REQUESTED/CONTENT_RESUME_REQUESTED to
determine whether we pause/resume the AdsManager, matching the IMA
documentation.

Also clean up use of player.isPlayingAd vs playingAd.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162364751"
ojw28,2017-07-18 16:15:59,https://api.github.com/repos/google/ExoPlayer/git/commits/078c57413bad16055293065665d637bb156b633d,078c57413bad16055293065665d637bb156b633d,"Correctly reset the upstream format from SampleQueues in HLS

When resetting a SampleQueue, by default the upstream format
is not cleared. This is necessary for progressive playbacks,
since (a) the formats never change, and (b) the extractors
only output them once. So when a seek occurs, it's necessary
to clear all sample data from the queue, but retain the current
upstream format.

Uniquely for HLS, the media in a SampleQueue that we may read
from can be in a format not supported by the consuming renderers.
We clear all the sample data from the queue in this case, but
not the upstream format. Since we have an optimization that
allows the upstream format to be read in advance of another
sample being written into the queue, this can result in an
unsupported format being read by a consuming renderer. This
change ensures the upstream format is correctly cleared in the
problematic case.

Issue: #3079

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162360267"
tonihei,2017-07-18 14:53:18,https://api.github.com/repos/google/ExoPlayer/git/commits/b950a5e87491b83fc711669d1eb5c03dbb44cdb8,b950a5e87491b83fc711669d1eb5c03dbb44cdb8,"Add fake chunk source.

This chunk source retuns SimpleSampleMediaChunks based on the data definition
of a FakeAdaptiveDataSet.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162351688"
tonihei,2017-07-18 14:43:21,https://api.github.com/repos/google/ExoPlayer/git/commits/fb2dbf2c77d38c624791a50e9bf3c8698e238da3,fb2dbf2c77d38c624791a50e9bf3c8698e238da3,"Use Clock in DefaultBandwidthMeter instead of SystemClock.

The default behaviour stays the same as Clock.DEFAULT == SystemClock. And it
enables bandwidth measurements in tests with simulated clocks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162350852"
tonihei,2017-07-18 14:20:40,https://api.github.com/repos/google/ExoPlayer/git/commits/3ff9695a733a2da24bb2a4bacff11f16c3286581,3ff9695a733a2da24bb2a4bacff11f16c3286581,"Move getBufferedPositionUs into SequenceableLoader.

All implementations of SequenceableLoader already implement this method.
Moreover, all composite media periods contained an exact copy of an
implementation that now moved to CompositeSequencableLoader.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162349083"
ojw28,2017-07-18 14:08:49,https://api.github.com/repos/google/ExoPlayer/git/commits/e26b8824ddcd419fed7afe5294aad81b39df7226,e26b8824ddcd419fed7afe5294aad81b39df7226,"Add Downloader for progressive content

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162348129"
tonihei,2017-07-18 13:38:30,https://api.github.com/repos/google/ExoPlayer/git/commits/0717c3502f5d3336e76c804af38d30e1e650e602,0717c3502f5d3336e76c804af38d30e1e650e602,"Extend Clock interface with sleep method and add FakeClock.

The FakeClock allows to simulate timing behaviour including sleep time
for test cases.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162345258"
tonihei,2017-07-18 13:07:49,https://api.github.com/repos/google/ExoPlayer/git/commits/958f12e2cc9526f52240fca91cedbbc2b8dd8f58,958f12e2cc9526f52240fca91cedbbc2b8dd8f58,"Make isReady of FakeRenderer more realistic.

Currently the renderer is only ready when the input stream has more data to
read. Actual renderers, however, are also ready as long as their output buffer
contains some audio/video samples to play, roughly corresponding to the fact
that the playback time hasn't reached the timestamp of the last buffered
sample. Added a isready flag to FakeRenderer to simulate this behaviour.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162343074"
ojw28,2017-07-18 10:29:29,https://api.github.com/repos/google/ExoPlayer/git/commits/4fd516e35bef3f3e7d34a81adaf466f0758fc420,4fd516e35bef3f3e7d34a81adaf466f0758fc420,"Make MediaSessionConnector depend only on ExoPlayer

This is possible to do without passing the player instance to
custom action providers through their constructors, given we
no longer have a MuteActionProvider. Passing the player through
the constructors generalizes better to such cases, however, so
feels like the right thing to do.

It's also possible to use generics and keep passing the player
instance via the CustomActionProvider methods, but this adds
some unnecessary complexity.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162333043"
tonihei,2017-07-18 10:08:51,https://api.github.com/repos/google/ExoPlayer/git/commits/1d046d5da8c0eb1cadfa42420dd46fad83c2db6a,1d046d5da8c0eb1cadfa42420dd46fad83c2db6a,"Fix chunk count bug in FakeAdaptiveDataSet.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162331762"
tonihei,2017-07-18 08:47:59,https://api.github.com/repos/google/ExoPlayer/git/commits/f77e96bca8ca43746ab67fac3e735fd6b7b4df98,f77e96bca8ca43746ab67fac3e735fd6b7b4df98,"Allow to extend FakeDataSource.

Extensions can perform additional actions whenever data is read (e.g. sleeping
to simulate bandwidth restrictions).

Additionally, the factory class can also be overwritten and allows to set the
FakeDataSet later in case it is not available right away.

Moreover, this class now also uses a transfer listener similar to all real data sources.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162326000"
andrewlewis,2017-07-18 07:57:53,https://api.github.com/repos/google/ExoPlayer/git/commits/c28a2a4100e098ec2e68101e230d1b5d599e2ff0,c28a2a4100e098ec2e68101e230d1b5d599e2ff0,"Fix content position for postroll ads

The position returned by getContentPosition() could be C.TIME_END_OF_SOURCE.
Fix the content position stored in MediaPeriodInfos for postroll ads to be the
duration of the containing period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162322339"
marcbaechinger,2017-07-17 18:48:49,https://api.github.com/repos/google/ExoPlayer/git/commits/5be79d4f42848d40491d97c33a044eedaaa79f92,5be79d4f42848d40491d97c33a044eedaaa79f92,"Media session extension to connect ExoPlayer with the MediaSession of the
framework.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162245883"
ojw28,2017-07-17 16:31:07,https://api.github.com/repos/google/ExoPlayer/git/commits/387720d1821e3b1be95535cdd9d46603189a74bd,387720d1821e3b1be95535cdd9d46603189a74bd,"Allow module registrations + log player release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162223981"
ojw28,2017-07-17 16:11:52,https://api.github.com/repos/google/ExoPlayer/git/commits/da79dec6c14483bafe33c0c930a5d774d79f52ce,da79dec6c14483bafe33c0c930a5d774d79f52ce,"Make it a bit easier to sideload a subtitle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162221516"
ojw28,2017-07-17 16:06:53,https://api.github.com/repos/google/ExoPlayer/git/commits/daa214f82ae98b04f2cf913e7e5878eed3525756,daa214f82ae98b04f2cf913e7e5878eed3525756,"Reinstate gradle instructions for IMA extension

Note: Wont work quite yet; we need to actually do a
release for the instructions to become effective.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162220939"
tonihei,2017-07-17 15:44:57,https://api.github.com/repos/google/ExoPlayer/git/commits/81048ee7af2e0e8ab6f5c6a28461f19d387ae60d,81048ee7af2e0e8ab6f5c6a28461f19d387ae60d,"Add byte offset variable to fake data segments.

The value is automatically set at creation and allows simpler access to the
faked data position within the source.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162218095"
tonihei,2017-07-17 14:11:01,https://api.github.com/repos/google/ExoPlayer/git/commits/91341df7b05c44637b0cf474de55f56031ba869e,91341df7b05c44637b0cf474de55f56031ba869e,"Add fake adaptive data set.

This class defines the data of an adaptive media source. It currently has
chunks of equal length and size corresponding to the declared average bitrate
of the Formats.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162208008"
ojw28,2017-07-17 13:57:10,https://api.github.com/repos/google/ExoPlayer/git/commits/009369bf94e9202f7b2500df84ea8f0f853f0005,009369bf94e9202f7b2500df84ea8f0f853f0005,"Reduce calls from TsExtractor to ExtractorInput.read

We currently read at most 5 packets at a time from the
extractor input. Whether this is inefficient depends on
how efficiently the underlying DataSource handles lots
of small reads. It seems likely, however, that DataSource
implementations will in general more efficiently handle
fewer larger reads, and in the case of this extractor
it's trivial to do this.

Notes:
- The change appears to make little difference in my
  testing with DefaultHttpDataSource, although analysis
  in #3040 suggests that it does help.
- This change shouldn't have any negative implications
  (i.e. at worst it should be neutral wrt performance). In
  particular it should not make buffering any more likely,
  because the underlying DataSource should return fewer
  bytes than are being requested in the case that it
  cannot fully satisfy the requested amount.

Issue: #3040

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162206761"
andrewlewis,2017-07-17 13:30:00,https://api.github.com/repos/google/ExoPlayer/git/commits/6041b0fe9cbb9472ee58621d2251068791095225,6041b0fe9cbb9472ee58621d2251068791095225,"Handle VAST loading errors by playing content

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162204327"
andrewlewis,2017-07-17 10:00:30,https://api.github.com/repos/google/ExoPlayer/git/commits/706d4e51fedcd8fd6450888a590fd27cee959b96,706d4e51fedcd8fd6450888a590fd27cee959b96,"Don't offset the first period holder by the start position

If seek is called for a non-seekable period, when the period is prepared the
start position will be updated from the seek position to zero. Because the
start position is part of the renderer offset for the first loaded period
holder, after the update the renderer offset start position and the new start
position would no longer cancel out, leading to the player position being
negative.

The first period holder's renderer offset is the fixed base offset (60 seconds)
plus its start position, but the start position is always subtracted. Avoid
subtracting the start position for the first period holder so that when it
changes there is no need to update the renderer offset.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162188133"
tonihei,2017-07-17 08:42:21,https://api.github.com/repos/google/ExoPlayer/git/commits/508db5fd0aba3ee1824fc20177ae26ae7cb80fff,508db5fd0aba3ee1824fc20177ae26ae7cb80fff,"Allow multiple Formats per TrackGroup in testutil fake classes.

This enables adaptive media test cases using TrackGroups with multiple
Formats.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162182005"
tonihei,2017-07-17 08:27:27,https://api.github.com/repos/google/ExoPlayer/git/commits/8399de47060eab2e8428c7318ba9e9a345c03972,8399de47060eab2e8428c7318ba9e9a345c03972,"Move FakeDataSet to seperate class.

This allows to create extensions of FakeDataSet and also simplifies the
FakeDataSource class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=162180952"
AquilesCanta,2017-07-04 16:38:57,https://api.github.com/repos/google/ExoPlayer/git/commits/055abc759269e48dd4a9c7a1b315012d3abf0ac1,055abc759269e48dd4a9c7a1b315012d3abf0ac1,"Detect playlist stuck and playlist reset conditions in HLS

This CL aims that the player fails upon:

- Playlist that don't change in a suspiciously long time,
  which might mean there are server side issues.
- Playlist with a media sequence lower that its last snapshot
  and no overlapping segments.

This two error conditions are propagated through the renderer,
but not through MediaSource#maybeThrowSourceInfoRefreshError.

Issue:#2872

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160899995"
ojw28,2017-07-13 12:59:15,https://api.github.com/repos/google/ExoPlayer/git/commits/1855423734287861163ccb82258779555159dad8,1855423734287861163ccb82258779555159dad8,"Simplify + optimize VorbisBitArray

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161796758"
ojw28,2017-07-12 18:55:49,https://api.github.com/repos/google/ExoPlayer/git/commits/977fb225e3ba58965b16bda99483f5e5eef9313e,977fb225e3ba58965b16bda99483f5e5eef9313e,"Minor tweak to demo app

""Default (none)"" is sometimes just wrong, since the track
selector may attempt to select a track even if it exceeds
the renderer's capabilities. Just ""Default"", as it used to
be, was more accurate.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161695241"
ojw28,2017-07-12 16:53:20,https://api.github.com/repos/google/ExoPlayer/git/commits/a39ab8161e035174c862fb42b0c522baf42f22fb,a39ab8161e035174c862fb42b0c522baf42f22fb,"Fix FlacStreamInfo to not call readBits with a >32 value

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161677399"
ojw28,2017-07-12 16:25:08,https://api.github.com/repos/google/ExoPlayer/git/commits/17e73bdc7859852cab8821501da6c61bbcb7dc29,17e73bdc7859852cab8821501da6c61bbcb7dc29,"Optimize ParsableNalUnitBitArray

Apply the same learnings as in ParsableBitArray.

Issue: #3040

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161674119"
ojw28,2017-07-12 15:12:11,https://api.github.com/repos/google/ExoPlayer/git/commits/fba0546774133c0d7b78b575e96ba8208a88cab5,fba0546774133c0d7b78b575e96ba8208a88cab5,"Optimize ParsableBitArray

ParsableBitArray.readBit in particular was doing an excessive
amount of work. The new implementation is ~20% faster on desktop.

Issue: #3040

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161666420"
ojw28,2017-07-12 11:47:31,https://api.github.com/repos/google/ExoPlayer/git/commits/4cb5b349777ed6a71ab704200e7ccc6a8d1d3fe2,4cb5b349777ed6a71ab704200e7ccc6a8d1d3fe2,"Don't use ParsableBitArray to parse TS packet headers

Really low hanging fruit optimization for TS extraction.

ParsableBitArray is quite expensive. In particular readBits
contains at least 2 if blocks and a for loop, and was being
called 5 times per 188 byte packet (4 times via readBit). A
separate change will follow that optimizes readBit, but for
this particular case there's no real value to using a
ParsableBitArray anyway; use of ParsableBitArray IMO only
really becomes useful when you need to parse a bitstream more
than 4 bytes long, or where parsing the bitstream requires
some control flow (if/for) to parse.

There are probably other places where we're using
ParsableBitArray over-zealously. I'll roll that into a
tracking bug for looking in more detail at all extractors.

Issue: #3040

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161650940"
ojw28,2017-07-11 11:36:06,https://api.github.com/repos/google/ExoPlayer/git/commits/2665e42f85b5c64dd38439b49247bfbfa983cda2,2665e42f85b5c64dd38439b49247bfbfa983cda2,"Correctly propagate format identifier for CEA-608 in HLS

Issue: #3033

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161512537"
ojw28,2017-07-10 23:00:12,https://api.github.com/repos/google/ExoPlayer/git/commits/4233f81ed7d95d3f40d277f93820b03f6c50890d,4233f81ed7d95d3f40d277f93820b03f6c50890d,"Misc tweaks to UI components

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161454491"
ojw28,2017-07-04 10:32:23,https://api.github.com/repos/google/ExoPlayer/git/commits/f94db63366f8649fab29978d008fea35c761b837,f94db63366f8649fab29978d008fea35c761b837,"Fix reporting of width/height

1. maybeRenotifyVideoSizeChanged should report reported* variables
2. Add check into maybeNotifyVideoSizeChanged to suppress reporting
   in the case that the width and height are still unknown.

Issue: #3007

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160879625"
ojw28,2017-07-14 17:24:30,https://api.github.com/repos/google/ExoPlayer/git/commits/bf5495f2f5909751a6cdea12c7c4aadce3758127,bf5495f2f5909751a6cdea12c7c4aadce3758127,"Optimize in-buffer seeking for HLS

Also move to using an array to hold the SampleQueues,
as we've moved to doing in ExtractorMediaPeriod.

Issue: #551

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161972990"
ojw28,2017-07-14 14:54:12,https://api.github.com/repos/google/ExoPlayer/git/commits/a2ffcec2007ed07b13832418cf935ccd023716b0,a2ffcec2007ed07b13832418cf935ccd023716b0,"Fix NPE setting drm scheme type

drmInitData can be null in DASH if all of the init data is
specified at the manifest level instead. I took a look at
injecting the manifest format into the extractors, so that
we can actually copy the scheme type into it, but that's
at least non-trivial enough to delay for a subsequent CL.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161956246"
ojw28,2017-07-14 13:47:40,https://api.github.com/repos/google/ExoPlayer/git/commits/08698021735217596409a3426a15ecb9136703db,08698021735217596409a3426a15ecb9136703db,"Show last seek position when playing an ad

We'd normally expect playback controls to be hidden during
ad playback, although if they are visible for whatever reason,
it makes sense to set the position to the current content
position now that we have it.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161950098"
andrewlewis,2017-07-13 13:50:46,https://api.github.com/repos/google/ExoPlayer/git/commits/68e5e9173559f9e55d62ec136732353ed6060ddf,68e5e9173559f9e55d62ec136732353ed6060ddf,"Store the resume position even if the window is not seekable

Note: this temporarily exposes a bug where seeking a non-seekable source leads
to the player position being negative before playback starts.

Issue: #2655

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161801111"
ojw28,2017-07-13 12:59:15,https://api.github.com/repos/google/ExoPlayer/git/commits/8378c3dc1f0247d85d57ab81d75596a3a79345fb,8378c3dc1f0247d85d57ab81d75596a3a79345fb,"Simplify + optimize VorbisBitArray

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161796758"
erdemguven,2017-07-13 10:08:56,https://api.github.com/repos/google/ExoPlayer/git/commits/90398c581158f6d335fb69b5e07ed11af75f022d,90398c581158f6d335fb69b5e07ed11af75f022d,"Check if thread is interrupted before opening connection

On an old version of okhttp, opening connection clears the thread interrupt flag silently. This is a workaround
to reduce the effect of the bug.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161784435"
andrewlewis,2017-07-13 08:55:33,https://api.github.com/repos/google/ExoPlayer/git/commits/70c5bf70526cf177fb4ca21dd99160bf9f0895af,70c5bf70526cf177fb4ca21dd99160bf9f0895af,"Support resuming ads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161778560"
andrewlewis,2017-07-13 08:10:51,https://api.github.com/repos/google/ExoPlayer/git/commits/6c74a315562ecbb4c7d8f4757e33e33d6e49a6da,6c74a315562ecbb4c7d8f4757e33e33d6e49a6da,"Support resuming content after ads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161775394"
ojw28,2017-07-12 18:55:49,https://api.github.com/repos/google/ExoPlayer/git/commits/4f2fae4fba2c3ad36bf3a01e154a53884becc49c,4f2fae4fba2c3ad36bf3a01e154a53884becc49c,"Minor tweak to demo app

""Default (none)"" is sometimes just wrong, since the track
selector may attempt to select a track even if it exceeds
the renderer's capabilities. Just ""Default"", as it used to
be, was more accurate.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161695241"
ojw28,2017-07-12 16:53:20,https://api.github.com/repos/google/ExoPlayer/git/commits/0da2299c4966cc381ed52565d7f9637c257612dd,0da2299c4966cc381ed52565d7f9637c257612dd,"Fix FlacStreamInfo to not call readBits with a >32 value

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161677399"
ojw28,2017-07-12 16:25:08,https://api.github.com/repos/google/ExoPlayer/git/commits/5885f34d12fc88c2edde6e2379ff7c7e3fb1090a,5885f34d12fc88c2edde6e2379ff7c7e3fb1090a,"Optimize ParsableNalUnitBitArray

Apply the same learnings as in ParsableBitArray.

Issue: #3040

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161674119"
ojw28,2017-07-12 15:12:11,https://api.github.com/repos/google/ExoPlayer/git/commits/01c0ccbdbded9f1d7df22067a7c644772a1bba15,01c0ccbdbded9f1d7df22067a7c644772a1bba15,"Optimize ParsableBitArray

ParsableBitArray.readBit in particular was doing an excessive
amount of work. The new implementation is ~20% faster on desktop.

Issue: #3040

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161666420"
ojw28,2017-07-12 11:47:31,https://api.github.com/repos/google/ExoPlayer/git/commits/2b1614cc7bcc4d0b7dbd2a247a424d266a3b3c55,2b1614cc7bcc4d0b7dbd2a247a424d266a3b3c55,"Don't use ParsableBitArray to parse TS packet headers

Really low hanging fruit optimization for TS extraction.

ParsableBitArray is quite expensive. In particular readBits
contains at least 2 if blocks and a for loop, and was being
called 5 times per 188 byte packet (4 times via readBit). A
separate change will follow that optimizes readBit, but for
this particular case there's no real value to using a
ParsableBitArray anyway; use of ParsableBitArray IMO only
really becomes useful when you need to parse a bitstream more
than 4 bytes long, or where parsing the bitstream requires
some control flow (if/for) to parse.

There are probably other places where we're using
ParsableBitArray over-zealously. I'll roll that into a
tracking bug for looking in more detail at all extractors.

Issue: #3040

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161650940"
ojw28,2017-07-12 10:57:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ecc8f6c4fa394fe0ae5da3c3c3dc2f3779ec7102,ecc8f6c4fa394fe0ae5da3c3c3dc2f3779ec7102,"Upgrade dependencies

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161648060"
AquilesCanta,2017-07-11 18:28:08,https://api.github.com/repos/google/ExoPlayer/git/commits/f72833476e1501323fb5a05355718046e0d07bf8,f72833476e1501323fb5a05355718046e0d07bf8,"Add DRM support to RendererCapabilities

This CL also makes DefaultTrackSelector take it into account when RendererCapabilities
sets it to unsupported.

A following CL could add a DefaultTrackSelector parameter to force DRM ""known support"" for specific track types.

Issue:#1661
Issue:#1989
Issue:#2089

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161556467"
ojw28,2017-07-11 17:18:25,https://api.github.com/repos/google/ExoPlayer/git/commits/3c5688de73e8f6aa5825c20b187476f7d26dc9b1,3c5688de73e8f6aa5825c20b187476f7d26dc9b1,"Optimize in-queue seeking when non-AV tracks are present

Let's do it this way for now. Note there's an implicit
assumption in here that non-AV tracks consist of only
key-frames, but I think we'll not encounter any issues
in the real world as a result, we already make this
assumption in ChunkSampleStream, and actually tagging
every queue with this information explicitly is a very
painful amount of plumbing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161545383"
andrewlewis,2017-07-11 16:23:58,https://api.github.com/repos/google/ExoPlayer/git/commits/6b17e2cf3f67139ef6b00e47eeaf89bedb3398e7,6b17e2cf3f67139ef6b00e47eeaf89bedb3398e7,"Fix handling of postrolls

adsLoader.contentComplete was called twice which led to postrolls not seeing
the STARTED event.

Also make the onPositionDiscontinuity handler easier to follow by renaming
variables, and remove the adGroupIndex field.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161537765"
tonihei,2017-07-11 14:43:38,https://api.github.com/repos/google/ExoPlayer/git/commits/06216514765344926bda9f683e1fc8b9f466523e,06216514765344926bda9f683e1fc8b9f466523e,"Add buffer length metric to ABR playback test.

This metric is measured once every second.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161527345"
andrewlewis,2017-07-11 14:29:39,https://api.github.com/repos/google/ExoPlayer/git/commits/0b58c33632014bf485774b0c19ce2e92ae5ef42d,0b58c33632014bf485774b0c19ce2e92ae5ef42d,"Handle detaching and reattaching the ads loader

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161526026"
andrewlewis,2017-07-11 14:11:49,https://api.github.com/repos/google/ExoPlayer/git/commits/94683d1e8c69d6827e453cf3e1b0427d1c57cd0d,94683d1e8c69d6827e453cf3e1b0427d1c57cd0d,"Show ad markers for non-multi-window time bars

Ads don't have their own periods any more, so show ad group markers even if the
time bar is not multi-window.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161524411"
tonihei,2017-07-11 11:56:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6f2f8e49b8b8aed4ebb6e25d86d204db3a4d2565,6f2f8e49b8b8aed4ebb6e25d86d204db3a4d2565,"Add rebuffer test metrics to ABR playback tests.

This includes a metric logger class which logs events and generates metrics, and some changes to the Perfgate benchmark config to add the metrics. So far, only rebuffer counts, rebuffer time and startup time are measured, together with auxiliary values of total playback time used for testing and number of playback failures.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161513672"
ojw28,2017-07-11 11:36:06,https://api.github.com/repos/google/ExoPlayer/git/commits/0052a70f607ef3bd9523964075dba8173d6b52bb,0052a70f607ef3bd9523964075dba8173d6b52bb,"Correctly propagate format identifier for CEA-608 in HLS

Issue: #3033

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161512537"
andrewlewis,2017-07-11 09:25:21,https://api.github.com/repos/google/ExoPlayer/git/commits/ef56c9fe3958739fae9fa9f382c054b98c466ee9,ef56c9fe3958739fae9fa9f382c054b98c466ee9,"Move ad playback state into ImaAdsLoader

Once background and resuming is supported, the ads loader will be kept when the
player is destroyed and recreated. Move the state relating to the structure of
ads and what ads have been loaded/played out of the media source and into the
loader so the information is not lost when the source is released, in
preparation for supporting background and resuming.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161503571"
ojw28,2017-07-10 23:00:12,https://api.github.com/repos/google/ExoPlayer/git/commits/b31fd5bc7c14cce046807a608f1ca74eb3c29a61,b31fd5bc7c14cce046807a608f1ca74eb3c29a61,"Misc tweaks to UI components

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161454491"
tonihei,2017-07-10 16:20:56,https://api.github.com/repos/google/ExoPlayer/git/commits/45f94eab62026ae8769ca136b6fa19c4b5b666b5,45f94eab62026ae8769ca136b6fa19c4b5b666b5,"Allow moving media source within DynamicConcatenatingMediaSource.

This option allows to move the currently playing media source to another position
and also to move other media source without creating a new MediaSource object.

Issue:#1706

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161402022"
ojw28,2017-07-10 14:23:25,https://api.github.com/repos/google/ExoPlayer/git/commits/06b3b3ca8d8ee807008e1cbd5d94c6de5cf96df0,06b3b3ca8d8ee807008e1cbd5d94c6de5cf96df0,"Migrate HLS over to new SampleQueue methods

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161391296"
ojw28,2017-07-10 11:29:16,https://api.github.com/repos/google/ExoPlayer/git/commits/5ebbb6ef459ba45e1c42c07918eaa47dc0951071,5ebbb6ef459ba45e1c42c07918eaa47dc0951071,Merge branch 'jcable-dev-v2' into dev-v2
ojw28,2017-07-10 11:28:32,https://api.github.com/repos/google/ExoPlayer/git/commits/b333169ada4b370caf719d059a2de0f7d5123709,b333169ada4b370caf719d059a2de0f7d5123709,Merge branch 'dev-v2' of git://github.com/jcable/ExoPlayer into jcable-dev-v2
ojw28,2017-07-10 11:16:20,https://api.github.com/repos/google/ExoPlayer/git/commits/78e0545774a767c1060ebf9f16d14a04902bc571,78e0545774a767c1060ebf9f16d14a04902bc571,Re-add RTMP extension classes
tonihei,2017-07-10 08:41:51,https://api.github.com/repos/google/ExoPlayer/git/commits/68827878e9d2e9dc344efa4932e32665b400a949,68827878e9d2e9dc344efa4932e32665b400a949,"Fix RTMP library gradle file.
(GitHub issue #3038)

Module prefix was missing for library-core module.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161366375"
andrewlewis,2017-07-06 17:39:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4180b9656d46f26cdf62bb2e4d03cd068d569af5,4180b9656d46f26cdf62bb2e4d03cd068d569af5,"Show played ad groups

By default played ad groups are shown faded out. This helps the user know
whether they will see an ad when they seek to a given position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=161098491"
ojw28,2017-07-05 14:33:00,https://api.github.com/repos/google/ExoPlayer/git/commits/a0aa9a3803ce7f9862bde82095351e16f204e390,a0aa9a3803ce7f9862bde82095351e16f204e390,"Update moe equivalence

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160955809"
ojw28,2017-07-05 14:08:00,https://api.github.com/repos/google/ExoPlayer/git/commits/75242281601fcdd5cf365d0025e453a83d919863,75242281601fcdd5cf365d0025e453a83d919863,Clean up rtmp extension
ojw28,2017-07-05 14:04:58,https://api.github.com/repos/google/ExoPlayer/git/commits/1279b7dcf1165741dfcf001bc31a82effa898cb1,1279b7dcf1165741dfcf001bc31a82effa898cb1,"Merge pull request #2503 from b95505017/rtmp_client

Rtmp client"
ojw28,2017-07-05 14:04:49,https://api.github.com/repos/google/ExoPlayer/git/commits/0ecbe5dc04bcda27189637a88c6b6afd99f6d8d4,0ecbe5dc04bcda27189637a88c6b6afd99f6d8d4,Merge branch 'dev-v2' into rtmp_client
AquilesCanta,2017-07-04 16:38:57,https://api.github.com/repos/google/ExoPlayer/git/commits/a04663372fe6f3538fd27c322054769996bf84e4,a04663372fe6f3538fd27c322054769996bf84e4,"Detect playlist stuck and playlist reset conditions in HLS

This CL aims that the player fails upon:

- Playlist that don't change in a suspiciously long time,
  which might mean there are server side issues.
- Playlist with a media sequence lower that its last snapshot
  and no overlapping segments.

This two error conditions are propagated through the renderer,
but not through MediaSource#maybeThrowSourceInfoRefreshError.

Issue:#2872

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160899995"
ojw28,2017-07-04 10:32:23,https://api.github.com/repos/google/ExoPlayer/git/commits/dda3616f5ad2b83016bfe1f8a7fe427b29670a41,dda3616f5ad2b83016bfe1f8a7fe427b29670a41,"Fix reporting of width/height

1. maybeRenotifyVideoSizeChanged should report reported* variables
2. Add check into maybeNotifyVideoSizeChanged to suppress reporting
   in the case that the width and height are still unknown.

Issue: #3007

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160879625"
erdemguven,2017-07-04 08:53:38,https://api.github.com/repos/google/ExoPlayer/git/commits/37faead26ed36e23b85af13bfe0873e68e09e3c5,37faead26ed36e23b85af13bfe0873e68e09e3c5,"Rename some assert methods in CacheAsserts to better reflect what they do

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160873280"
tonihei,2017-07-03 14:42:57,https://api.github.com/repos/google/ExoPlayer/git/commits/05a77eef5d24e307113787f67d30d8722032708d,05a77eef5d24e307113787f67d30d8722032708d,"Move Extractor test assertion methods to ExtractorAsserts class.

This cleans up test the TestUtil class that in large parts consisted of
assertions for Extractor tests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160829066"
ojw28,2017-07-03 14:23:03,https://api.github.com/repos/google/ExoPlayer/git/commits/ad3d1e0cf2ea085d18627184a5213f47982b738a,ad3d1e0cf2ea085d18627184a5213f47982b738a,"Add reset() to SampleQueue. Deprecate reset(boolean) and disable()

The deprecated methods will be removed as soon as HLS is migrated
to use the new ones.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160827936"
andrewlewis,2017-07-03 14:14:56,https://api.github.com/repos/google/ExoPlayer/git/commits/d733bb4101330dcb7fb4ab7d3047299081bf577d,d733bb4101330dcb7fb4ab7d3047299081bf577d,"Fix video tunneling state transition to ready

Issue: #2985

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160827532"
tonihei,2017-07-03 14:10:21,https://api.github.com/repos/google/ExoPlayer/git/commits/960315c4d5647df949a9f942a01a886800845674,960315c4d5647df949a9f942a01a886800845674,"Move extractTimelineFromMediaSource to test util class.

This also ensures that TimelineAsserts only contains assert methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160827271"
AquilesCanta,2017-07-03 13:45:25,https://api.github.com/repos/google/ExoPlayer/git/commits/a82e51070b0e26466c34463c900f7d2a6b848b02,a82e51070b0e26466c34463c900f7d2a6b848b02,"Add playback tests for CENC/DASH streams.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160825705"
tonihei,2017-07-03 09:07:39,https://api.github.com/repos/google/ExoPlayer/git/commits/a9efb4553d978fc89e2b0b8a3cc96dbe34f9a8d9,a9efb4553d978fc89e2b0b8a3cc96dbe34f9a8d9,"Merge TimelineAsserts.FakeTimeline into FakeTimeline.

They serve the same purpose. One was defined as single window, multi-period
timeline, while the other was a multi-window, single-period-each timeline.

The combined FakeTimeline uses TimelineWindowDefinitions which allow multi-
window, multi-period fake timelines.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160808844"
ojw28,2017-06-30 18:07:03,https://api.github.com/repos/google/ExoPlayer/git/commits/2bebd526e1ece801ef53e6daeaaee76b0255ec6d,2bebd526e1ece801ef53e6daeaaee76b0255ec6d,"Merge pull request #3009 from google/dev-v2-r2.4.3

r2.4.3"
ojw28,2017-06-30 17:48:03,https://api.github.com/repos/google/ExoPlayer/git/commits/1b64d62e61dd68635df0df3a1a83d303db4d0b12,1b64d62e61dd68635df0df3a1a83d303db4d0b12,"Update release notes + bump version number

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160663100"
andrewlewis,2017-06-15 15:06:31,https://api.github.com/repos/google/ExoPlayer/git/commits/43daf0f2bb96bb514d22561dd4821f6ce7562aa9,43daf0f2bb96bb514d22561dd4821f6ce7562aa9,"Update MIME type in FLAC test data

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159104188"
ojw28,2017-06-30 17:48:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4ee0b2e1c86a714bc87206d4ae42fde9b3233da8,4ee0b2e1c86a714bc87206d4ae42fde9b3233da8,"Update release notes + bump version number

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160663100"
ojw28,2017-06-30 09:52:20,https://api.github.com/repos/google/ExoPlayer/git/commits/a579b8d82dd74dca8a4e6b666c0df693aa14aa80,a579b8d82dd74dca8a4e6b666c0df693aa14aa80,"Fix DvbParser bug

Issue: #2957

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160628086"
ojw28,2017-06-29 13:49:30,https://api.github.com/repos/google/ExoPlayer/git/commits/79f7db7fcd1285e1248045fd486a109dade941e4,79f7db7fcd1285e1248045fd486a109dade941e4,"Prefer Google over MediaTek for PCM decoding pre-O.

Issue: #2873

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160520136"
tonihei,2017-06-29 11:16:16,https://api.github.com/repos/google/ExoPlayer/git/commits/df84f2930cdb1f75d273668a96953c0aae102943,df84f2930cdb1f75d273668a96953c0aae102943,"Clarify JavaDoc of MediaPeriod.

Two of MediaPeriod's methods are only called after the media period has been
prepared. Added this to JavaDoc of these method to simplify implementations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160510373"
andrewlewis,2017-06-29 07:37:28,https://api.github.com/repos/google/ExoPlayer/git/commits/c33d16d6aec91ac2a445d5bbaf0f7138dd19c766,c33d16d6aec91ac2a445d5bbaf0f7138dd19c766,"Show larger scrubber handle when focused

Also remove updateScrubberState as it doesn't do anything useful.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160496133"
AquilesCanta,2017-06-27 16:38:31,https://api.github.com/repos/google/ExoPlayer/git/commits/efd17f86c5507a68e2568b2d4a30f9280eb53bab,efd17f86c5507a68e2568b2d4a30f9280eb53bab,"Add URLs EXT-X-STREAM-INF uris only once

This prevents ExoPlayer from thinking there are many more video tracks
than there actually are. And will prevent downloading multiple times
the same rendition once offline support for HLS is added.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160285777"
erdemguven,2017-06-26 13:51:52,https://api.github.com/repos/google/ExoPlayer/git/commits/6c24d9380560adfc7c2577cdadf49d770541c383,6c24d9380560adfc7c2577cdadf49d770541c383,"Fix FLAC extension native part compilation

In the latest NDK version (r15) compilation fails because 'memset' isn't defined. Included cstring header.

Issue: #2977

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160139022"
ojw28,2017-06-26 11:02:03,https://api.github.com/repos/google/ExoPlayer/git/commits/2f7de7d3e8a7b29f29d429d1deaffee7a33a5883,2f7de7d3e8a7b29f29d429d1deaffee7a33a5883,"Merge ContentDataSource fixes + tests from GitHub

https://github.com/google/ExoPlayer/pull/2963/files
https://github.com/google/ExoPlayer/commit/8bb643976fe20d1ec684291aa7bf5337e474bec4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160128047"
botaydotcom,2017-06-26 09:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/a5eba0162b08f786d5a57b28746737a9ed83504e,a5eba0162b08f786d5a57b28746737a9ed83504e,"Update DrmSessionException.

Make DrmSessionException takes in Throwable cause instead of Exception cause, which is more limiting and doesn't add any benefit.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160121486"
alexbirkett,2017-06-23 16:56:40,https://api.github.com/repos/google/ExoPlayer/git/commits/d4e598f4172352e1ab6eb916aed9de1c03686957,d4e598f4172352e1ab6eb916aed9de1c03686957,Make OkHttpDataSource userAgent parameter optional
ojw28,2017-06-23 16:44:27,https://api.github.com/repos/google/ExoPlayer/git/commits/fd9b162d0fe635e9dbbbcffd0ff1a63ee45cfc08,fd9b162d0fe635e9dbbbcffd0ff1a63ee45cfc08,"Fix setSelectionOverride(index, tracks, null)

Issue: #2988

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159958591"
ojw28,2017-06-23 16:37:28,https://api.github.com/repos/google/ExoPlayer/git/commits/d293cc4989ef4d67c9e7be171b943771c0271486,d293cc4989ef4d67c9e7be171b943771c0271486,Mini cleanup
ojw28,2017-06-23 16:20:51,https://api.github.com/repos/google/ExoPlayer/git/commits/5eb64dbe1208a61c157d87f1e33fc33180ad85c3,5eb64dbe1208a61c157d87f1e33fc33180ad85c3,Fix ContentDataSource and enhance tests to validate read data
koral--,2017-06-19 14:09:54,https://api.github.com/repos/google/ExoPlayer/git/commits/795e3be44029878b5772014f92a5fb435b335299,795e3be44029878b5772014f92a5fb435b335299,null AssetFileDescriptors support added in `ContentDataSource`
koral--,2017-06-19 10:46:09,https://api.github.com/repos/google/ExoPlayer/git/commits/66c461e65b57e289189846580ba42672539210e5,66c461e65b57e289189846580ba42672539210e5,Comments from https://github.com/google/ExoPlayer/pull/2963#discussion_r122669328 applied
koral--,2017-06-17 14:26:29,https://api.github.com/repos/google/ExoPlayer/git/commits/a0a50ac97913c006ef0a9033477ee045f7a26829,a0a50ac97913c006ef0a9033477ee045f7a26829,InputStream creation for ContentDataSource changed
koral--,2017-06-17 14:18:43,https://api.github.com/repos/google/ExoPlayer/git/commits/4b8cddbefd7f212b65b78c612ae7b12053bdb882,4b8cddbefd7f212b65b78c612ae7b12053bdb882,Introduced failing unit test for ContentDataSource
ojw28,2017-06-19 13:48:18,https://api.github.com/repos/google/ExoPlayer/git/commits/76faa5b6d2d271474bcae6ee106177aa53de3ed3,76faa5b6d2d271474bcae6ee106177aa53de3ed3,"Move clearing of joining deadline back to onStopped

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159421000"
ojw28,2017-05-07 04:37:26,https://api.github.com/repos/google/ExoPlayer/git/commits/92206b9fc2434027cd524be1901c13b8131d5eeb,92206b9fc2434027cd524be1901c13b8131d5eeb,"TTML: Ignore regions that don't declare origin and extent

Issue: #2953

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159218386"
ojw28,2017-04-07 06:08:04,https://api.github.com/repos/google/ExoPlayer/git/commits/e618080c7385e9ddf7217f668fd5635c86e34dec,e618080c7385e9ddf7217f668fd5635c86e34dec,"Adjust incorrect looking max-channel counts

Issue: #2940

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159099602"
andrewlewis,2017-06-15 09:36:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e8ee868a9f65a1e9013dee2729b46df9aa54a83b,e8ee868a9f65a1e9013dee2729b46df9aa54a83b,"Add support for mono input to the GVR extension

Issue: #2710

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159082518"
ojw28,2017-06-14 14:56:37,https://api.github.com/repos/google/ExoPlayer/git/commits/facfa5267787fd51e3ab04b89ad13c763e8cbc41,facfa5267787fd51e3ab04b89ad13c763e8cbc41,"Log frame counts when we see a spurious audio timestamp

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158977741"
ojw28,2017-06-30 14:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/c7924bfe222481e9e7002a1f9d4599110de2930c,c7924bfe222481e9e7002a1f9d4599110de2930c,"Clean up parseSampleEntryEncryptionData

It was a bit strange how it returned something via the return
value and something else via the ""out"" variable, and doing it
this way wasn't even saving any allocations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160645640"
ojw28,2017-06-30 13:05:42,https://api.github.com/repos/google/ExoPlayer/git/commits/51b98e817c09f58b5c5690d458c935feb9271b49,51b98e817c09f58b5c5690d458c935feb9271b49,"Make Android Studio happy (make State public)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160638478"
tonihei,2017-06-30 13:02:22,https://api.github.com/repos/google/ExoPlayer/git/commits/177a33bbee7c796d974f73954f292fb45d9201f7,177a33bbee7c796d974f73954f292fb45d9201f7,"Merge TimelineAsserts.StubMediaSource into FakeMediaSource.

The StubMediaSource was a subset of the FakeMediaSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160638245"
andrewlewis,2017-06-30 11:12:29,https://api.github.com/repos/google/ExoPlayer/git/commits/b3a7f8774f305c48e88b560999672fcff0630c9c,b3a7f8774f305c48e88b560999672fcff0630c9c,"Upgrade IMA dependencies and README

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160632943"
tonihei,2017-06-30 11:11:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9db0b8cce09c6ec72c2d58e192d4e744f399aa42,9db0b8cce09c6ec72c2d58e192d4e744f399aa42,"Move fake ExoPlayer component test classes to testutils.

Fake ExoPlayer componenets used within ExoPlayerTest.java can be useful for
other test classes and are therefore made available in testutils.
They can also be merged with other existing fake components.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160632908"
tonihei,2017-06-30 10:37:34,https://api.github.com/repos/google/ExoPlayer/git/commits/d54df32f25c55aaf37ee5cb5cf44c9f8d2d76625,d54df32f25c55aaf37ee5cb5cf44c9f8d2d76625,"Correct JavaDoc in TimelineAsserts.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160631095"
tonihei,2017-06-30 10:14:40,https://api.github.com/repos/google/ExoPlayer/git/commits/3b2cfa148ccb0a899484a3a47cb81ea2c72394c3,3b2cfa148ccb0a899484a3a47cb81ea2c72394c3,"Move Timeline assertions to testutils.

Some parts of TimelineTest provided common assertions and helper classes for
other tests. As such, they better fit into testutils. In line with other
assertion methods, the TimelineVerifier class has been converted to a set of
static assertion methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160629797"
ojw28,2017-06-30 09:52:20,https://api.github.com/repos/google/ExoPlayer/git/commits/04b57f9c8e9147a1d7511259aedf645a41fb90e7,04b57f9c8e9147a1d7511259aedf645a41fb90e7,"Fix DvbParser bug

Issue: #2957

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160628086"
botaydotcom,2017-06-29 17:33:14,https://api.github.com/repos/google/ExoPlayer/git/commits/28030b6c7eba2d3c7578db24761bee26c6b4f829,28030b6c7eba2d3c7578db24761bee26c6b4f829,"Temp workaround for [Internal: b/63092960]

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160543009"
tonihei,2017-06-29 16:48:46,https://api.github.com/repos/google/ExoPlayer/git/commits/84f4fe5cf9c5085a0631ace25644e9ad79ab06a6,84f4fe5cf9c5085a0631ace25644e9ad79ab06a6,"Recover from empty timelines.
(Related to GitHub #1706)

When the timeline becomes empty, the playback state transitions to ""ended"".
When the timeline becomes non-empty again, exceptions are thrown because MSG_DO_SOME_WORK is still regularly sent and media periods are getting prepared.

This change ensures that no MSG_DO_SOME_WORK messages are sent in ""ended"" state.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160537147"
ojw28,2017-06-29 16:48:28,https://api.github.com/repos/google/ExoPlayer/git/commits/ba0e5246d66d1c348062d6065e32009c60e86a42,ba0e5246d66d1c348062d6065e32009c60e86a42,"Properly handle replacement of the DRM session in LibvpxVideoRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160537100"
ojw28,2017-06-29 16:41:36,https://api.github.com/repos/google/ExoPlayer/git/commits/db177db6d9aa11b765a25496630f220bab2edc76,db177db6d9aa11b765a25496630f220bab2edc76,"DrmSession cleanup

These changes are in part related to handling playback of mixed clear
and encrypted content, where we might want to use a secure decoder
throughout, but only have drm init data and only care about the state
of the DrmSession during playback of encrypted parts.

- requiresSecureDecoderComponent became unnecessary when we added
  ExoMediaCrypto, which provides a layer in which requiresSecureDecoderComponent
  can be overridden.
- Relaxed requirements for obtaining the MediaCrypto. It's helpful
  to allow retrieval in the error state, since it can be used to
  instantiate a decoder and play clear samples.
- Deferred throwing of errors in renderer implementations. As long as
  we can get a MediaCrypto, we should init the codec. We can also
  play clear samples without failing if playClearSamplesWithoutKeys is
  true, regardless of the errors state.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160536365"
erdemguven,2017-06-29 14:30:24,https://api.github.com/repos/google/ExoPlayer/git/commits/beb07341070a9ff233d3773afed0e49fb416bf17,beb07341070a9ff233d3773afed0e49fb416bf17,"Extract base class from DashDownloaderFactory

This base class will be used to extend HlsDownloaderFactory from.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160523335"
AquilesCanta,2017-06-29 13:53:56,https://api.github.com/repos/google/ExoPlayer/git/commits/e344e9cbb756a384c437850028c3fb09e145a386,e344e9cbb756a384c437850028c3fb09e145a386,"Add SinglePeriodTimeline constructor to fill missing window information

Issue:#2930

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160520480"
ojw28,2017-06-29 13:49:30,https://api.github.com/repos/google/ExoPlayer/git/commits/51af85f263a34bce3ae518f1d457dcf540929750,51af85f263a34bce3ae518f1d457dcf540929750,"Prefer Google over MediaTek for PCM decoding pre-O.

Issue: #2873

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160520136"
tonihei,2017-06-29 13:01:49,https://api.github.com/repos/google/ExoPlayer/git/commits/69db6cb60bde95cbd7f86699f631dcbdc71b1ec9,69db6cb60bde95cbd7f86699f631dcbdc71b1ec9,"Add dynamic concatenating media source.
(GitHub issue #1706)

The media source allows adding or removing child sources before and after prepare() was called.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160516636"
tonihei,2017-06-29 12:58:39,https://api.github.com/repos/google/ExoPlayer/git/commits/a98d5bbd0a44930d7e179d228d0e662070f0c50e,a98d5bbd0a44930d7e179d228d0e662070f0c50e,"Do not start rebuffering after playback ended.

This is currently happening after toggling the repeat mode. This is line with
the rest of the implementation which requires a seek operation to resume
playback.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160516449"
andrewlewis,2017-06-29 11:22:22,https://api.github.com/repos/google/ExoPlayer/git/commits/1f815db367b5ca7112cd28f48c6879677379ae1e,1f815db367b5ca7112cd28f48c6879677379ae1e,"Switch the IMA extension to use in-period ads

This also adds support for seeking in periods with midroll ads.

Remove Timeline.Period.isAd.

Issue: #2617

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160510702"
tonihei,2017-06-29 11:16:16,https://api.github.com/repos/google/ExoPlayer/git/commits/6509dce6b7cea332b22449bfdd7bade6f74515be,6509dce6b7cea332b22449bfdd7bade6f74515be,"Clarify JavaDoc of MediaPeriod.

Two of MediaPeriod's methods are only called after the media period has been
prepared. Added this to JavaDoc of these method to simplify implementations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160510373"
erdemguven,2017-06-29 10:28:21,https://api.github.com/repos/google/ExoPlayer/git/commits/50530147d01a948ccd277e46bca8b0414bf87254,50530147d01a948ccd277e46bca8b0414bf87254,"Add a new test and extra checks to DashDownloadServiceTest

Modified old testRemoveAction to test removing content after it's fully downloaded.
Added a new testRemoveBeforeDownloadComplete which tests removing content before it's fully downloaded.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160507573"
erdemguven,2017-06-29 10:03:25,https://api.github.com/repos/google/ExoPlayer/git/commits/81d077c037e3d559d28fa95e596ef91788587add,81d077c037e3d559d28fa95e596ef91788587add,"Extract base class from DashDownloader

This base class will be used to extend HlsDownloader from.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160505710"
andrewlewis,2017-06-29 07:37:28,https://api.github.com/repos/google/ExoPlayer/git/commits/db11e3ddb6f48c897e7e9cdd40ad06b4911ce828,db11e3ddb6f48c897e7e9cdd40ad06b4911ce828,"Show larger scrubber handle when focused

Also remove updateScrubberState as it doesn't do anything useful.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160496133"
ojw28,2017-06-28 15:57:57,https://api.github.com/repos/google/ExoPlayer/git/commits/a543436b960cc97ec1dfdb1ac5efe5da6e99fbe0,a543436b960cc97ec1dfdb1ac5efe5da6e99fbe0,"SimpleExoPlayerView/DefaultTimebar fixes

- Restore making the playback controls visible on any key press.
- Turn anti-aliasing on for drawing the scrubber circle. It looks
  really ugly on some devices if you don't do this.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160413777"
andrewlewis,2017-06-28 15:42:49,https://api.github.com/repos/google/ExoPlayer/git/commits/c6e5b67626baae294d5c7a99dbac9f384bafb3fe,c6e5b67626baae294d5c7a99dbac9f384bafb3fe,"Move InlinedApi warning suppression to class level for C

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160412354"
andrewlewis,2017-06-28 15:02:07,https://api.github.com/repos/google/ExoPlayer/git/commits/71ffc7668c552ee2daed2da46424ca3226e104f9,71ffc7668c552ee2daed2da46424ca3226e104f9,"Support specifying AudioAttributes for AudioTrack

Add a compatibility AudioAttributes class so that the app can specify
audio attributes in the same way before and after API 21.

Deprecate SimpleExoPlayer.setStreamType. Add
SimpleExoPlayer.setAudioAttributes and MSG_SET_AUDIO_ATTRIBUTES.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160408574"
tonihei,2017-06-28 09:35:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c385ece69db39c904dceeb2026e70646c2bec981,c385ece69db39c904dceeb2026e70646c2bec981,"Move methods into MediaPeriodHolder.

Both methods make extensive use of MediaPeriodHolder internals.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160386401"
andrewlewis,2017-06-28 08:43:54,https://api.github.com/repos/google/ExoPlayer/git/commits/96fa66028467596e404ff491443329419efe1df3,96fa66028467596e404ff491443329419efe1df3,"Expose ad playback information on ExoPlayer

Also update the time bar to show ad markers using in-period ads and
remove support for periods being marked as ads.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160382805"
andrewlewis,2017-06-27 17:40:34,https://api.github.com/repos/google/ExoPlayer/git/commits/66d122710ee9df56000f8f35ab709f847dcd748f,66d122710ee9df56000f8f35ab709f847dcd748f,"Add support for in-period ads

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160294524"
ojw28,2017-06-27 17:11:26,https://api.github.com/repos/google/ExoPlayer/git/commits/d5c2cf79f403b89cc4f79b467714e2f746898135,d5c2cf79f403b89cc4f79b467714e2f746898135,"Update READMEs with new local build instructions

Issue: #2851
Issue: #2974

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160290097"
AquilesCanta,2017-06-27 16:38:31,https://api.github.com/repos/google/ExoPlayer/git/commits/efb367b417564a258a69140209e43f620c87537c,efb367b417564a258a69140209e43f620c87537c,"Add URLs EXT-X-STREAM-INF uris only once

This prevents ExoPlayer from thinking there are many more video tracks
than there actually are. And will prevent downloading multiple times
the same rendition once offline support for HLS is added.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160285777"
ojw28,2017-06-27 15:27:36,https://api.github.com/repos/google/ExoPlayer/git/commits/4a59c7cf409a3c9caf01217eeba74adb41ad30d2,4a59c7cf409a3c9caf01217eeba74adb41ad30d2,"Make it easier to use ExoPlayer modules in other projects II

With this change, it becomes possible to depend on ExoPlayer
locally in settings.gradle by doing:

gradle.ext.exoplayerRoot = 'path/to/exoplayer/root'
apply from: new File(gradle.ext.exoplayerRoot, 'core_settings.gradle')

You can optionally add a prefix onto ExoPlayer's module names
by adding:

gradle.ext.exoplayerModulePrefix = 'prefix'

Issue: #2851
Issue: #2974

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160277967"
andrewlewis,2017-06-27 14:46:33,https://api.github.com/repos/google/ExoPlayer/git/commits/26b32f60789c571a070da01d59449d02647736e0,26b32f60789c571a070da01d59449d02647736e0,"Move getPeriodPosition methods to Timeline

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160273929"
ojw28,2017-06-27 14:23:02,https://api.github.com/repos/google/ExoPlayer/git/commits/2a8eb5a2a11b8e51120e3aca3884c95c4c144e29,2a8eb5a2a11b8e51120e3aca3884c95c4c144e29,"Make it easier to use ExoPlayer modules in other projects

It's currently difficult to use ExoPlayer modules in other gradle
projects because they rely on constants and dependencies defined
in our own top level gradle file. This change moves the constants
into a separate file referenced directly from each module. It also
removes the need for the top level gradle file to declare a
dependency on com.novoda:bintray-release. This is now only needed
if ""exoplayerPublishEnabled = true"" is specified.

Issue: #2851
Issue: #2974

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160272072"
andrewlewis,2017-06-27 14:17:46,https://api.github.com/repos/google/ExoPlayer/git/commits/1dcad4d1733cf0f64be02d1bfaa184612bcfcef0,1dcad4d1733cf0f64be02d1bfaa184612bcfcef0,"Store a MediaPeriodId in PlaybackInfo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160271631"
andrewlewis,2017-06-27 13:29:29,https://api.github.com/repos/google/ExoPlayer/git/commits/675756d32dff5d9541909f38691ee9fccabc857b,675756d32dff5d9541909f38691ee9fccabc857b,"Create MediaPeriods based on an identifier not an index

This will allow MediaSources to provide MediaPeriods that correspond to ad
breaks in a timeline period rather than content for a timeline period, in a
future change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160267841"
andrewlewis,2017-06-27 10:41:30,https://api.github.com/repos/google/ExoPlayer/git/commits/d4059ecc6501d2b7f42c2c8fa24ecb3bd6bb2832,d4059ecc6501d2b7f42c2c8fa24ecb3bd6bb2832,"Use period holder indices to determine if a period was seen

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160257503"
erdemguven,2017-06-27 08:45:13,https://api.github.com/repos/google/ExoPlayer/git/commits/444dbeb4c405045dd5b51e1f68fa144f1989a3fe,444dbeb4c405045dd5b51e1f68fa144f1989a3fe,"Fix NPE in FakeDataSource.close()

If open() fails because of the file isn't available then fakeData is null.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160249214"
tonihei,2017-06-27 08:05:16,https://api.github.com/repos/google/ExoPlayer/git/commits/410228acb80f51303fd55572ff7cbf41983e4f39,410228acb80f51303fd55572ff7cbf41983e4f39,"Rename isLast to isFinal in MediaPeriodHolder.

This better reflects the purpose of this flag and makes code more readable.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160246573"
erdemguven,2017-06-26 14:31:32,https://api.github.com/repos/google/ExoPlayer/git/commits/3fbfe29d27ba84cdedafe9de09c4a36a004a6912,3fbfe29d27ba84cdedafe9de09c4a36a004a6912,"Modify CacheUtil.cache() for polling counters

Getting active status of caching is needed to display on UI. Instead of a listener interface polling was chosen because of simplicity and better suits to UI refreshing.

CachingCounters.downloadedBytes was updated after whole data is downloaded. Now it's updated for each read into buffer. Buffer length defines how finer these updates are.

CachingCounters.totalBytes is added so UI can display a progress bar.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160142048"
erdemguven,2017-06-26 13:51:52,https://api.github.com/repos/google/ExoPlayer/git/commits/a7ed199622500584d5070335f2381288198a53e7,a7ed199622500584d5070335f2381288198a53e7,"Fix FLAC extension native part compilation

In the latest NDK version (r15) compilation fails because 'memset' isn't defined. Included cstring header.

Issue: #2977

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160139022"
ojw28,2017-06-26 13:50:08,https://api.github.com/repos/google/ExoPlayer/git/commits/acbddbc0a5e628946b6311a2d03ae82f530e7bd3,acbddbc0a5e628946b6311a2d03ae82f530e7bd3,"Use regular array for SampleQueues in ExtractorMediaPeriod

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160138881"
ojw28,2017-06-26 11:45:01,https://api.github.com/repos/google/ExoPlayer/git/commits/c448463a05e31046d5dc4695aeebae58086a0393,c448463a05e31046d5dc4695aeebae58086a0393,"Move DashMediaSource and SsMediaSource to new SampleQueue methods

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160130540"
ojw28,2017-06-26 11:09:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1b71e3b40ddec3c61bef721dd27f8bb27f3130d1,1b71e3b40ddec3c61bef721dd27f8bb27f3130d1,"Move ExtractorMediaPeriod to new SampleQueue methods

This change allows you to enable/disable tracks within which
all samples are key-frames without any re-buffering (e.g. audio,
text and metadata). This effectively reverts V2 back to the
behavior in V1, only this time we're doing it properly. []ly
disabling/enabling, or disabling/enabling whilst paused, no longer
cause samples to get ""lost"" between the source and renderers.

Note it also becomes really easy to support a few other things,
although support is not exposed in this change:

- Enable/disable video tracks without any re-buffering, by
  changing the toKeyframe argument passed to discardTo to true.
- Retain media in the buffer for some time after it's been played
  (e.g. to support a single back-5s-seek efficiently), by
  subtracting the desired back-buffer time from the value that's
  passed to discardTo.

Issue: #2956
Issue: #2926

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160128586"
ojw28,2017-06-26 11:02:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b3c6f6fb31c95cca4ff10a93318680c66cd1da12,b3c6f6fb31c95cca4ff10a93318680c66cd1da12,"Merge ContentDataSource fixes + tests from GitHub

https://github.com/google/ExoPlayer/pull/2963/files
https://github.com/google/ExoPlayer/commit/8bb643976fe20d1ec684291aa7bf5337e474bec4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160128047"
botaydotcom,2017-06-26 09:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/70e6dd5930f912f261e0a39ece3564e747de558f,70e6dd5930f912f261e0a39ece3564e747de558f,"Update DrmSessionException.

Make DrmSessionException takes in Throwable cause instead of Exception cause, which is more limiting and doesn't add any benefit.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=160121486"
ojw28,2017-06-25 14:10:56,https://api.github.com/repos/google/ExoPlayer/git/commits/ea2f5cce8599e723276b05ab9745d60980dee66b,ea2f5cce8599e723276b05ab9745d60980dee66b,"Merge pull request #2994 from alexbirkett/feature/make-ok-http-data-source-ua-optional

Make OkHttpDataSource userAgent parameter optional"
ojw28,2017-06-23 16:44:27,https://api.github.com/repos/google/ExoPlayer/git/commits/c007e93ab0473a03c9dfe3202de7c51e3af143df,c007e93ab0473a03c9dfe3202de7c51e3af143df,"Fix setSelectionOverride(index, tracks, null)

Issue: #2988

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159958591"
tonihei,2017-06-23 14:57:19,https://api.github.com/repos/google/ExoPlayer/git/commits/363f2414d141b31c311630fa84dff1edb20c0a30,363f2414d141b31c311630fa84dff1edb20c0a30,"Fix check for last period index in ExoPlayerImplInternal

The if clause was never executed because nextLoadingPeriodIndex is set
to C.INDEX_UNSET instead of loadingPeriodIndex + 1.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159948661"
alexbirkett,2017-06-23 16:56:40,https://api.github.com/repos/google/ExoPlayer/git/commits/0572d190fee3992170b2cd3a7cbced01ac8b3ebf,0572d190fee3992170b2cd3a7cbced01ac8b3ebf,Make OkHttpDataSource userAgent parameter optional
ojw28,2017-06-23 16:37:28,https://api.github.com/repos/google/ExoPlayer/git/commits/555eb9d423d56e939b50e1c8b7db11fe6d7a679e,555eb9d423d56e939b50e1c8b7db11fe6d7a679e,Mini cleanup
ojw28,2017-06-23 16:20:51,https://api.github.com/repos/google/ExoPlayer/git/commits/8bb643976fe20d1ec684291aa7bf5337e474bec4,8bb643976fe20d1ec684291aa7bf5337e474bec4,Fix ContentDataSource and enhance tests to validate read data
ojw28,2017-06-23 14:45:21,https://api.github.com/repos/google/ExoPlayer/git/commits/2da22e9e0fc4c0935d662fcf288aa5bee6032d4d,2da22e9e0fc4c0935d662fcf288aa5bee6032d4d,"Merge pull request #2963 from DroidsOnRoids/dev-v2

Source length calculation in ContentDataSource changed"
tonihei,2017-06-23 12:09:01,https://api.github.com/repos/google/ExoPlayer/git/commits/6cde8335ffdd91127f9745e7a4a016120ad442d7,6cde8335ffdd91127f9745e7a4a016120ad442d7,"Add setter method to child data holder of abstract concatenated timeline.

Prevents that we forget to set variables.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159939180"
ojw28,2017-06-22 12:49:09,https://api.github.com/repos/google/ExoPlayer/git/commits/499f9370a2ada8169f1df17cb7c18157c7d92b37,499f9370a2ada8169f1df17cb7c18157c7d92b37,"Remove use of mod operator from SampleMetadataQueue

It's no more complicated to avoid it, and according to the
Art team it should be faster without.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159816746"
ojw28,2017-06-22 12:41:02,https://api.github.com/repos/google/ExoPlayer/git/commits/950c2159b00a2a0459de22569909bee6690f7ea9,950c2159b00a2a0459de22569909bee6690f7ea9,"Discard upstream allocations more aggressively + doc cleanup

- If we have <s1>garbage<s2> and discard <s2>, throw away
  the garbage too.
- Cleanup some documentation to consistently refer to the
  queue as ""queue"" rather than ""buffer"".

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159816309"
AquilesCanta,2017-06-22 11:03:31,https://api.github.com/repos/google/ExoPlayer/git/commits/aca80b8347796ba15913f78029e788ffa1e15082,aca80b8347796ba15913f78029e788ffa1e15082,"Add support for pattern encryption and default initialization vectors

This will extend our CENC modes support to cbcs and cens. The change was
not split into two different CLs due to lack of test content for
default initialization vectors, aside from AES-CBCS encrypted ones.

Issue:#1661
Issue:#1989
Issue:#2089

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159810371"
andrewlewis,2017-06-22 09:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/73b17a7e7b96c280343638081febdce3179f0cf1,73b17a7e7b96c280343638081febdce3179f0cf1,"Use HTTPS for all GCS URLs

Also update the dizzy sample to use HTTPS as it has moved
permanently.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159805004"
ojw28,2017-06-21 16:51:26,https://api.github.com/repos/google/ExoPlayer/git/commits/9bad78dce6439fcf0b99dff79a9d47dde6f7b6fa,9bad78dce6439fcf0b99dff79a9d47dde6f7b6fa,"Fix SampleMetadataQueue.getLargestQueuedTimestampUs

This was broken prior to my recent changes, since
largestDequeuedTimestampUs was only being updated in readData.
It should have been updated in the skip methods. as well.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159704945"
erdemguven,2017-06-21 14:04:59,https://api.github.com/repos/google/ExoPlayer/git/commits/531eb15ff46522b51aa1936c17f821bed4130b16,531eb15ff46522b51aa1936c17f821bed4130b16,"Move DashDownloadTestBase assert methods to CacheAsserts

CacheAsserts contains cache assertion methods for testing. It's easier to use in tests than DashDownloadTestBase which requires to be extended.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159688808"
ojw28,2017-06-21 14:03:05,https://api.github.com/repos/google/ExoPlayer/git/commits/8e49cab865c2ef02961ad1e03512fc1e63729510,8e49cab865c2ef02961ad1e03512fc1e63729510,"Start finalizing SampleQueue methods

It's a bit messy at the moment with the deprecated methods
in there, but on the read side the new set of methods is as
follows:

Modifies the start of buffer:
- discardTo(time, keyframe, ...) [this is new]
- discardToRead()
- discardToEnd()

Modifies the read position:
- rewind()
- advanceTo(time, keyframe, ...) [this is a generalization of skipToKeyframeBefore]
- advanceToEnd() [previously called skipAll]
- read(...)

Which seems quite nice and self-consistent, and is powerful
enough for everything that we need to do as we move MediaSource
implementations over to the new methods.

TODOs for subsequent changes:
- Re-order methods in the two classes so that they're actually in
  the same order, and move the deprecated ones out of the way
- Enhance SampleQueueTest to also cover new functionality, as we
  start transitioning MediaSource implementations over to use it.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159688660"
ojw28,2017-05-07 04:19:29,https://api.github.com/repos/google/ExoPlayer/git/commits/59ccd63544caadd4a1facee3b7ce5fa08e18f493,59ccd63544caadd4a1facee3b7ce5fa08e18f493,"Remove weird nextOffset state from SampleMetadataQueue

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159681714"
tonihei,2017-06-21 11:00:02,https://api.github.com/repos/google/ExoPlayer/git/commits/9154d54df9fe3d5e6699ab6c780f6148be406f64,9154d54df9fe3d5e6699ab6c780f6148be406f64,"Fix resolveSubsequentPeriod in EPII.

getNextPeriod might return C.INDEX_UNSET.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159676949"
erdemguven,2017-06-21 10:54:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ed060a8f3397253129224b96364718288e67942b,ed060a8f3397253129224b96364718288e67942b,"Add FakeDataSource.setTestData() to simplify adding random test data

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159676653"
erdemguven,2017-06-21 09:17:27,https://api.github.com/repos/google/ExoPlayer/git/commits/40039ed0a1a58e368916ed332933292597a97bac,40039ed0a1a58e368916ed332933292597a97bac,"Fix and move Util.getRemainderDataSpec() to DataSpec.subrange()

Made the method copy all of the fields of DataSpec in to the new instance. Also converted
it to an instance method of DataSpec for ease of usage, discovery and maintenance.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159670314"
erdemguven,2017-06-20 16:02:46,https://api.github.com/repos/google/ExoPlayer/git/commits/44f6dbb0ccb856391e67ca96c5a8bdc5bbf7e067,44f6dbb0ccb856391e67ca96c5a8bdc5bbf7e067,"Work around the error prone warning

Error prone check doesn't like we pass a variable named 'end' as start parameter and 'start' as end.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159567308"
ojw28,2017-06-20 14:01:35,https://api.github.com/repos/google/ExoPlayer/git/commits/467fd2535c030171a0520e4884de76ecd9308731,467fd2535c030171a0520e4884de76ecd9308731,"Expose new non-discarding SampleQueue read/skip methods

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159555748"
AquilesCanta,2017-06-20 13:48:44,https://api.github.com/repos/google/ExoPlayer/git/commits/0ffc3ffd291969194f30903630f748caf794d7ba,0ffc3ffd291969194f30903630f748caf794d7ba,"Fix DrmInitDataTest

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159554717"
AquilesCanta,2017-06-20 13:32:12,https://api.github.com/repos/google/ExoPlayer/git/commits/8d74ba4850df39c8ef8cb26e4d3b5b8bbf96be38,8d74ba4850df39c8ef8cb26e4d3b5b8bbf96be38,"Add support for cbc1 encryption scheme

Issue:#1661
Issue:#1989
Issue:#2089

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159553419"
erdemguven,2017-06-20 11:43:03,https://api.github.com/repos/google/ExoPlayer/git/commits/1c8f14b5fd68872da92eac7343f9735fc2859b1f,1c8f14b5fd68872da92eac7343f9735fc2859b1f,"Add support to run actions into FakeDataSource

An actions is triggered when the reading reaches action's position. This can be
used to make sure the code is in a certain state while testing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159545923"
ojw28,2017-06-20 09:54:20,https://api.github.com/repos/google/ExoPlayer/git/commits/ce8634507daf922c72b34e4cc0a35dbb931d3b8f,ce8634507daf922c72b34e4cc0a35dbb931d3b8f,"Add a read reference into our linked list of Allocations

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159538997"
AquilesCanta,2017-06-20 09:52:55,https://api.github.com/repos/google/ExoPlayer/git/commits/317a9944997d3bfaccb1deae1ac50acb2b8bf1e4,317a9944997d3bfaccb1deae1ac50acb2b8bf1e4,"Add type to DrmInitData.SchemeData

At the moment, only CENC-defined scheme types are known values.
This will allow having more information about the encryption
scheme through the format, which in turn will allow more informed
decisions on format support.

Issue:#1661
Issue:#1989
Issue:#2089

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159538907"
ojw28,2017-06-19 14:59:43,https://api.github.com/repos/google/ExoPlayer/git/commits/2c09f8e0e315d06600710e355734485e1cd971c1,2c09f8e0e315d06600710e355734485e1cd971c1,"Decouple start and read indices in SampleMetadataQueue

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159426366"
ojw28,2017-06-19 13:48:18,https://api.github.com/repos/google/ExoPlayer/git/commits/86f06faa8df1e8cbbfb0b298ed4fa9d98bae9703,86f06faa8df1e8cbbfb0b298ed4fa9d98bae9703,"Move clearing of joining deadline back to onStopped

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159421000"
tonihei,2017-06-19 13:23:22,https://api.github.com/repos/google/ExoPlayer/git/commits/de4ff4c5ec71698fb4d2ff9ce4572929d70d477a,de4ff4c5ec71698fb4d2ff9ce4572929d70d477a,"Extend HostActivity for reuse and silent timeout.

Added option to fail on timeout. Also reset internals in all cases
such that the activity can be used more than once.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159419176"
botaydotcom,2017-06-19 12:37:25,https://api.github.com/repos/google/ExoPlayer/git/commits/56ff2ef598d1bcc2e5f78d2fe8e27b20f731b386,56ff2ef598d1bcc2e5f78d2fe8e27b20f731b386,"Add getPlaybackLooper() to ExoPlayer v2.

A few components in ExoPlayer requires playback looper to operate (such as:
DrmSessionManager#acquireSession), so this CL add back getPlaybackLooper()
to facilitate such cases.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159416012"
andrewlewis,2017-06-16 14:51:58,https://api.github.com/repos/google/ExoPlayer/git/commits/d9ea8f71430bed129917b5eb9554a8f1debf8018,d9ea8f71430bed129917b5eb9554a8f1debf8018,"Allow disabling the initial discontinuity on ClippingMediaSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159227077"
tonihei,2017-06-16 13:41:19,https://api.github.com/repos/google/ExoPlayer/git/commits/56205893e5f392531baa9bc1d33a56858193a36e,56205893e5f392531baa9bc1d33a56858193a36e,"Remove initial discontinuity from ClippingMediaSource
(Fixing GitHub issue #2923)

Cuurently, ClippingMediaSource issues an initial discontinuity. This causes the
renderers to be disabled and re-enabled when this media source is used in a sequence
with other sources (or in a loop).

This change disables the use of an initial discontinuity for audio-only media under
the assumption that audio streams have random access capabilities.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159221963"
ojw28,2017-05-07 04:37:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c7948f2f7a9b9bee91b116fbcc61e727443453cf,c7948f2f7a9b9bee91b116fbcc61e727443453cf,"TTML: Ignore regions that don't declare origin and extent

Issue: #2953

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159218386"
tonihei,2017-06-15 15:53:47,https://api.github.com/repos/google/ExoPlayer/git/commits/023c9d56a914fe4c298f7abb553a0b5c060abaa9,023c9d56a914fe4c298f7abb553a0b5c060abaa9,"Simplify timeline test stub class.

Use an actual class for the stub media source instead of an anomymous class.
Allows to call assertReleased() on that class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159109143"
andrewlewis,2017-06-15 15:06:31,https://api.github.com/repos/google/ExoPlayer/git/commits/ed27017b0ca8061559d7ebcee98154c4e5c66c3e,ed27017b0ca8061559d7ebcee98154c4e5c66c3e,"Update MIME type in FLAC test data

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159104188"
koral--,2017-06-19 14:09:54,https://api.github.com/repos/google/ExoPlayer/git/commits/86ff19b55bd4b028b4b5215ee120b04c10b9c351,86ff19b55bd4b028b4b5215ee120b04c10b9c351,null AssetFileDescriptors support added in `ContentDataSource`
koral--,2017-06-19 10:46:09,https://api.github.com/repos/google/ExoPlayer/git/commits/50da6d870c1613c0e1bbcf67575ad30383f47593,50da6d870c1613c0e1bbcf67575ad30383f47593,Comments from https://github.com/google/ExoPlayer/pull/2963#discussion_r122669328 applied
koral--,2017-06-17 14:26:29,https://api.github.com/repos/google/ExoPlayer/git/commits/8caad492d4b605d1155770d39d0b34ed116735ea,8caad492d4b605d1155770d39d0b34ed116735ea,InputStream creation for ContentDataSource changed
koral--,2017-06-17 14:18:43,https://api.github.com/repos/google/ExoPlayer/git/commits/b77cc7c621bc6d7fe432ed0aef041829a41120c4,b77cc7c621bc6d7fe432ed0aef041829a41120c4,Introduced failing unit test for ContentDataSource
ojw28,2017-04-07 06:08:04,https://api.github.com/repos/google/ExoPlayer/git/commits/8af77acb01edbcc7fe7005d44a0146e25c6695eb,8af77acb01edbcc7fe7005d44a0146e25c6695eb,"Adjust incorrect looking max-channel counts

Issue: #2940

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159099602"
ojw28,2017-06-15 14:06:38,https://api.github.com/repos/google/ExoPlayer/git/commits/2a353a834dc8571e805cb8c7c6a7fdbd149b33a4,2a353a834dc8571e805cb8c7c6a7fdbd149b33a4,"Advance SampleQueue writeAllocationNode earlier

Previously, writeAllocationNode was not advanced to the
terminating node when finishing writing sample data that
fills exactly up to the end of the current write node.
This wasn't actually broken, but is confusing because it
causes edge cases where the start/read references could
temporarily refer the node after the current write node.
This change advances the write reference in this case,
removing this confusion and bringing the implementation
in line with what the design doc says happens.

Also making some simplification and consistency changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159099522"
andrewlewis,2017-06-15 09:36:46,https://api.github.com/repos/google/ExoPlayer/git/commits/a913fd952fff38c9e9978a7734a10cdab7c348c3,a913fd952fff38c9e9978a7734a10cdab7c348c3,"Add support for mono input to the GVR extension

Issue: #2710

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=159082518"
ojw28,2017-06-14 18:53:04,https://api.github.com/repos/google/ExoPlayer/git/commits/3ada4e178dc320abb73c01ec7bdf4535334e0a3d,3ada4e178dc320abb73c01ec7bdf4535334e0a3d,"Merge pull request #2952 from google/dev-v2-r2.4.2

r2.4.2"
andrewlewis,2017-06-14 10:34:19,https://api.github.com/repos/google/ExoPlayer/git/commits/4e578a1b2164c4c0a358f6ae28153383e133473f,4e578a1b2164c4c0a358f6ae28153383e133473f,"Increase MP3 sniffing distance

Issue: #2951

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158960483"
ojw28,2017-06-14 14:56:37,https://api.github.com/repos/google/ExoPlayer/git/commits/cdcdf1d37c84f4436d6aeee998fdf2590b8f7b81,cdcdf1d37c84f4436d6aeee998fdf2590b8f7b81,"Log frame counts when we see a spurious audio timestamp

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158977741"
andrewlewis,2017-06-14 10:34:19,https://api.github.com/repos/google/ExoPlayer/git/commits/810c120abcb10567f26f6ae2c8b4f22f2cb9a211,810c120abcb10567f26f6ae2c8b4f22f2cb9a211,"Increase MP3 sniffing distance

Issue: #2951

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158960483"
ojw28,2017-06-13 14:26:53,https://api.github.com/repos/google/ExoPlayer/git/commits/e4617567a3ce23980319d79e961e5043343edf4e,e4617567a3ce23980319d79e961e5043343edf4e,"Rename DefaultTrackOutput to SampleQueue

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158842843"
ojw28,2017-06-13 13:43:20,https://api.github.com/repos/google/ExoPlayer/git/commits/6362dfeb986b9f672c745349f674feba96c8ac12,6362dfeb986b9f672c745349f674feba96c8ac12,"Replace LinkedBlockingDeque with our own linked list

This will allow us to maintain a reference to the middle
of the queue, which is necessary to efficiently support
decoupling the read position from the start of the buffer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158839336"
ojw28,2017-06-13 13:34:02,https://api.github.com/repos/google/ExoPlayer/git/commits/f3e9166a4eabeb7b2ec8cffedf7c4914a91f48d5,f3e9166a4eabeb7b2ec8cffedf7c4914a91f48d5,"Use DummySurface on S8 where possible

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158838707"
ojw28,2017-06-13 13:19:59,https://api.github.com/repos/google/ExoPlayer/git/commits/fb12a659a2e06a70a4dc8db4f793068ce8a60f1b,fb12a659a2e06a70a4dc8db4f793068ce8a60f1b,"Fix discarding upstream from DefaultTrackOutput

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158837777"
ojw28,2017-06-13 13:10:31,https://api.github.com/repos/google/ExoPlayer/git/commits/0c1212b3099ff14177dc52f34985bd2831488c34,0c1212b3099ff14177dc52f34985bd2831488c34,Fix typo
ojw28,2017-06-13 12:35:10,https://api.github.com/repos/google/ExoPlayer/git/commits/0f5c30d3453c5faa32fe1378a8b38f125e834a9e,0f5c30d3453c5faa32fe1378a8b38f125e834a9e,Misc cleanup
ojw28,2017-06-13 12:21:01,https://api.github.com/repos/google/ExoPlayer/git/commits/c6dfccf3931d7351d007480ea21b80ea342135a5,c6dfccf3931d7351d007480ea21b80ea342135a5,"Merge pull request #2756 from kiall/par-debugview

Include Pixel Aspect Ratio in DebugTextViewHelper"
ojw28,2017-06-13 12:20:50,https://api.github.com/repos/google/ExoPlayer/git/commits/b95417e783d572df53da52f4bac1dbc9aabf3c22,b95417e783d572df53da52f4bac1dbc9aabf3c22,"Merge pull request #2943 from michalliu/dev-v2-fix

check if defaultRefreshRate is reasonable"
ojw28,2017-06-12 19:12:23,https://api.github.com/repos/google/ExoPlayer/git/commits/350998219acd01a1694fa1f927a1b79688ff0d0b,350998219acd01a1694fa1f927a1b79688ff0d0b,"Add test for DefaultTrackOutput

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158745843"
tonihei,2017-06-12 14:51:10,https://api.github.com/repos/google/ExoPlayer/git/commits/fa4f876668a5a1ed8f3e945c762df3beb1777b03,fa4f876668a5a1ed8f3e945c762df3beb1777b03,"UI parameter to disable automatically showing playback controls.
(Fixing GitHub issue #2699)

Added controllerAutoShow parameter to decide whether playback controls are
shown automatically. Default is true. Can be overwritten in the XML with
auto_show=false or via SimpleExoPlayerView.setControllerAutoShow(false).

Also inverted the logic of maybeShowControllers and showController.
SimpleExoPlayerView.(show/hide)Controller and PlaybackControlView.(show/hide)
now unconditionally do what they say to allow manual operation.
SimpleExoPlayerView.maybeShowController is used internally to automatically
show playback controls.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158712277"
tonihei,2017-06-12 14:46:48,https://api.github.com/repos/google/ExoPlayer/git/commits/dcc2f9bd67126b9ad9992941792203cde9629050,dcc2f9bd67126b9ad9992941792203cde9629050,"Add meta data class for AbstractConcatenatedTimeline.
(Preparation for GitHub issue #1706)

AbstractConcatenatedTimeline repeatly calls methods of its implementation to
query a specific child timeline. This may be inefficient if the implementation
repeatly executes the same code to find the timeline.

Changed the class such that it now queries all information at once using a meta
data class. As all methods need at least two of four variables anyway, this
doesn't generate unnecessary overhead.

Also generified the UID for the child indices to allow new implementations to
use some other UID besides the index.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158711979"
tonihei,2017-06-12 11:13:01,https://api.github.com/repos/google/ExoPlayer/git/commits/629edc2b9549e2151c204c09abe9e8b989fbcddf,629edc2b9549e2151c204c09abe9e8b989fbcddf,"Remove needsContinueLoading from ExoPlayerImplInternal

The same effect can be achieved by checking the isLoading variable of ExoPlayerImplInternal
because this variable is in almost all cases set simultaneously with loadingMediaPeriodHolder.needsContinueLoading.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158697948"
andrewlewis,2017-06-12 10:49:12,https://api.github.com/repos/google/ExoPlayer/git/commits/58280f979ee07a0fc30ed39a6e898f4966a7d901,58280f979ee07a0fc30ed39a6e898f4966a7d901,"Fix continueLoading in IMA deferred periods

continueLoading may be called during preparation, but this is not
handled correctly in the case where a deferred period doesn't
have a source yet.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158696539"
michalliu,2017-06-13 07:17:32,https://api.github.com/repos/google/ExoPlayer/git/commits/dbfbcd63125fbb34bfc98ac4786393617c3c16e1,dbfbcd63125fbb34bfc98ac4786393617c3c16e1,"check if defaultRefreshRate is reasonable

We found getDefaultDisplay has a very small chance returns null"
ojw28,2017-06-12 08:37:01,https://api.github.com/repos/google/ExoPlayer/git/commits/80be637dcc6c13110f157e07e7c28ba8d2d05b26,80be637dcc6c13110f157e07e7c28ba8d2d05b26,"Allow overriding of getCodecMaxValues

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158686545"
ojw28,2017-06-07 15:01:28,https://api.github.com/repos/google/ExoPlayer/git/commits/4510abf278bd5a8bf8eb2e8b310e701080cdce07,4510abf278bd5a8bf8eb2e8b310e701080cdce07,"Update handled schemes for timing element resolution.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158269487"
ojw28,2017-06-12 08:37:01,https://api.github.com/repos/google/ExoPlayer/git/commits/c980eae9c4c9a7768cccdf574ba1fd9723750d97,c980eae9c4c9a7768cccdf574ba1fd9723750d97,"Allow overriding of getCodecMaxValues

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158686545"
ojw28,2017-06-12 08:11:17,https://api.github.com/repos/google/ExoPlayer/git/commits/5cd3a9baa03ca37bbc8060791596d36162d22739,5cd3a9baa03ca37bbc8060791596d36162d22739,"Fix passing of invalid surface to video renderers

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158684924"
andrewlewis,2017-06-12 07:51:19,https://api.github.com/repos/google/ExoPlayer/git/commits/cb5b6fba01ba2a60b919b0b4377e202f40e75da9,cb5b6fba01ba2a60b919b0b4377e202f40e75da9,"Allow customization of ExtractorMediaSource's check interval

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158683582"
AquilesCanta,2017-06-09 15:45:50,https://api.github.com/repos/google/ExoPlayer/git/commits/646047f0885524c9da4e74795a5dd76fa68854cf,646047f0885524c9da4e74795a5dd76fa68854cf,"Add nullable annotation to onSourceInfoRefreshed's manifest argument

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158522507"
andrewlewis,2017-06-09 09:35:47,https://api.github.com/repos/google/ExoPlayer/git/commits/59315cf9233f2caba6a54d813458a64067c25756,59315cf9233f2caba6a54d813458a64067c25756,"Fix maximum read ahead logic for repeat mode

Separate MediaPeriodHolder.index and MediaPeriodHolder.periodIndex, so that the
latter is always a period index (which may repeat or jump) whereas the holder
index increases by one each time an item is added to the period holder queue.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158497639"
andrewlewis,2017-06-09 08:52:54,https://api.github.com/repos/google/ExoPlayer/git/commits/4e006a9616427a1b45ffd13d09a93b653fa6472c,4e006a9616427a1b45ffd13d09a93b653fa6472c,"Move positionUs parameter from createPeriod to prepare

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158494794"
ojw28,2017-06-08 17:18:45,https://api.github.com/repos/google/ExoPlayer/git/commits/047e0eb645826b4ba5cd0502319c238ba2550808,047e0eb645826b4ba5cd0502319c238ba2550808,"Renames to prepare for upcoming media buffer changes

Currently, media is discarded from DefaultTrackOutput
and SampleMetadataQueue as soon as it's been read. In
upcoming changes we'll decouple discard and read. This
will make it possible to retain already-read media in
these buffer classes, and allow the read position to
be moved backward as far as media is retained. This is
important for fixing an edge case around 608/EMSG
tracks, and could also underpin future features like
allowing retaining of X-seconds past media in the
buffer.

This change renames some variables and methods to
prepare for the upcoming changes. read/write indices
are renamed to start/end. The upcoming changes will
add a read index that's between the two. isEmpty is
inverted and renamed to hasNextSample, since it will
be possible to not have a next sample (because the
read index == end index) but for the buffer to not
be empty (because start index < read index).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158409630"
ojw28,2017-06-08 14:44:25,https://api.github.com/repos/google/ExoPlayer/git/commits/b7b0fef694a1a4477de11d40193f9c7645b695f2,b7b0fef694a1a4477de11d40193f9c7645b695f2,"Split InfoQueue into its own class

It's pretty big as an inner class, and is going to get a
little more complicated. I think it makes sense to be
able to consider it in isolation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158393754"
ojw28,2017-06-07 15:02:57,https://api.github.com/repos/google/ExoPlayer/git/commits/1b06ce740734e60d6a78f65720d84daf367cbc78,1b06ce740734e60d6a78f65720d84daf367cbc78,"Fix ArrayIndexOutOfBoundsException in DashMediaPeriod

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158269662"
ojw28,2017-06-07 15:01:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5908d2d7e2e92fa6143034886a351248bf98f1d8,5908d2d7e2e92fa6143034886a351248bf98f1d8,"Update handled schemes for timing element resolution.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158269487"
tonihei,2017-06-07 00:35:25,https://api.github.com/repos/google/ExoPlayer/git/commits/cdad6a4ef184995178091e9c16f45438f95b4c7e,cdad6a4ef184995178091e9c16f45438f95b4c7e,"Move playback test utils to testutils.

This allows other tests to reuse the util classes without having to link to playbacktests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158214560"
kiall,2017-04-30 11:37:15,https://api.github.com/repos/google/ExoPlayer/git/commits/c24ef592e77d6146983a3cf156e86f14dfcecd07,c24ef592e77d6146983a3cf156e86f14dfcecd07,"Include Pixel Aspect Ratio in DebugTextViewHelper

Add the video Pixel Aspect Ratio to the DebugTextViewHelper in order
to help debug issues related to PAR changes etc"
ojw28,2017-06-06 17:03:08,https://api.github.com/repos/google/ExoPlayer/git/commits/df99922ac13d273ac51d982b733ea5c771f2e155,df99922ac13d273ac51d982b733ea5c771f2e155,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158153988"
ojw28,2017-06-06 16:29:24,https://api.github.com/repos/google/ExoPlayer/git/commits/fb7cb507ea6440a12b674a2e38a3d94fca833cf1,fb7cb507ea6440a12b674a2e38a3d94fca833cf1,"Expose current scrubber position through onScrubStart

Issue: #2910

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158149904"
ojw28,2017-06-06 17:03:08,https://api.github.com/repos/google/ExoPlayer/git/commits/2439c582d408103b4360e0aed3cbe63a2057c492,2439c582d408103b4360e0aed3cbe63a2057c492,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158153988"
ojw28,2017-06-06 16:29:24,https://api.github.com/repos/google/ExoPlayer/git/commits/39b1c85c27aa982aa88707a125d9847378c055d1,39b1c85c27aa982aa88707a125d9847378c055d1,"Expose current scrubber position through onScrubStart

Issue: #2910

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158149904"
ojw28,2017-06-06 15:21:38,https://api.github.com/repos/google/ExoPlayer/git/commits/1ac8420b7fea5e695bbf4dce3b373b7c00b34d6d,1ac8420b7fea5e695bbf4dce3b373b7c00b34d6d,"Constraint buffered percentage to [0,100]

Issue: #2902

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158142754"
ojw28,2017-06-06 15:15:25,https://api.github.com/repos/google/ExoPlayer/git/commits/643083194d2e520a443c24778f9a570d14d3787d,643083194d2e520a443c24778f9a570d14d3787d,"Pass non-null logger into DefaultDrmSessionManager

Issue: #2903

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158142226"
AquilesCanta,2017-06-06 15:03:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a0c884849e501e110b04cd9cfc363119985791fc,a0c884849e501e110b04cd9cfc363119985791fc,"For HLS mode, pick the lowest PID track for each track type

This prevents strange behaviors for streams that changes the track declaration
order in the PMT.

NOTE: This should not change ANY behavior other than the one described above.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158140890"
ojw28,2017-06-06 14:31:01,https://api.github.com/repos/google/ExoPlayer/git/commits/79048ffae67c44e08330bd3b9328ca0f95267cc9,79048ffae67c44e08330bd3b9328ca0f95267cc9,"Further cleanup of updateSelectedTrack

- Return early if the selection is unchanged.
- Remove unnecessary variables.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158138187"
botaydotcom,2017-06-06 13:58:07,https://api.github.com/repos/google/ExoPlayer/git/commits/8241bb8a6e5f91e0dfa70800f8e187cfd9318c23,8241bb8a6e5f91e0dfa70800f8e187cfd9318c23,"Fix a minor bug with AdaptiveTrackSelection.

When updating track selection, we should only revert back from ideal
track selection to current track selection if the currently selected
track is not black-listed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158135644"
AquilesCanta,2017-06-05 12:28:01,https://api.github.com/repos/google/ExoPlayer/git/commits/df5e75b76c236e941c24dbc4f769cdc1fd369a9a,df5e75b76c236e941c24dbc4f769cdc1fd369a9a,"Pick the lowest quality video when capabilities are exceeded

Issue:#2901

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158006727"
andrewlewis,2017-06-04 14:02:13,https://api.github.com/repos/google/ExoPlayer/git/commits/cc748c30c72eb5b5c421de157358c8da8be999e9,cc748c30c72eb5b5c421de157358c8da8be999e9,"Add a null check in DummySurface static initializer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157958694"
andrewlewis,2017-06-02 16:48:58,https://api.github.com/repos/google/ExoPlayer/git/commits/9796a096983a55d95e29bc5f661489bca98bc9d6,9796a096983a55d95e29bc5f661489bca98bc9d6,"Assume CBR for MP3s with Info headers

Issue: #2895

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157841519"
ojw28,2017-05-31 14:23:13,https://api.github.com/repos/google/ExoPlayer/git/commits/c36793ab360a4a6edae97948520ede52427d6b73,c36793ab360a4a6edae97948520ede52427d6b73,"Move adaptation disabling workaround into MediaCodecUtil

This is necessary to make sure that the correct thing happens
where MediaCodecInfo.adaptive is queried directly (for example,
MediaCodecVideoRenderer uses the field to determine how to size
input buffers). Also disable adaptive on Nexus 10.

Issue: #2806

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157583473"
AquilesCanta,2017-05-31 10:59:24,https://api.github.com/repos/google/ExoPlayer/git/commits/80600ffe1be73e83631c8cc38f03db8e3cd0dfce,80600ffe1be73e83631c8cc38f03db8e3cd0dfce,"Ignore invalid EXT-X-PLAYLIST-TYPE values

Issue:#2889

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157571216"
ojw28,2017-05-31 10:16:47,https://api.github.com/repos/google/ExoPlayer/git/commits/c80b60f4ac571c7ca22607f7049d90db2629e98a,c80b60f4ac571c7ca22607f7049d90db2629e98a,"Constraint seeks within bounds for ConstantBitrateSeeker

We do this everywhere for index based seeking already.

Issue: #2876

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157568788"
andrewlewis,2017-05-31 08:46:49,https://api.github.com/repos/google/ExoPlayer/git/commits/854c8d0381ebcb7f2a756de711236899c2801829,854c8d0381ebcb7f2a756de711236899c2801829,"Fix DefaultTimeBar invalidation

Issue: #2871

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157562792"
AquilesCanta,2017-05-26 14:48:43,https://api.github.com/repos/google/ExoPlayer/git/commits/2795269daee2270fc2bda1512cefd86ef021f905,2795269daee2270fc2bda1512cefd86ef021f905,"Use AVERAGE-BANDWIDTH instead of BANDWIDTH when available

Also prevent BANDWIDTH's regex from matching the AVERAGE-BANDWIDTH attribute.

Issue:#2863

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157219453"
ojw28,2017-05-26 11:49:44,https://api.github.com/repos/google/ExoPlayer/git/commits/5a754fe7611856d333a74bc2c9dfb9f2c4abab28,5a754fe7611856d333a74bc2c9dfb9f2c4abab28,"Don't fail if we find a track is unsupported

Use AUDIO_UNKNOWN instead. This is in line with our handling
of video tracks with VIDEO_UNKNOWN.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157209428"
ojw28,2017-05-25 13:52:39,https://api.github.com/repos/google/ExoPlayer/git/commits/67cb7d8da5019af5f273b7be8885ef1281f302f7,67cb7d8da5019af5f273b7be8885ef1281f302f7,"Fix SmoothStreaming Timeline

There were a few things wrong. Specifically the case in
the ref'd issue. Also, the timeline was being marked as
non-dynamic in the empty-but-live case (it should be
marked dynamic as segments may be added later).

Issue: #2760

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157103727"
AquilesCanta,2017-05-24 16:48:39,https://api.github.com/repos/google/ExoPlayer/git/commits/22137f621535fd765eea411ac31fbf00af805667,22137f621535fd765eea411ac31fbf00af805667,"Flexibilize Util.parseXsDateTime to allow single digit hour

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156999955"
ojw28,2017-05-24 14:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/10f8944060356d575815c6570db9995a1a0d1e01,10f8944060356d575815c6570db9995a1a0d1e01,"Don't select more than one audio/video/text track by default

Issue: #2618

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156986606"
ojw28,2017-06-06 15:21:38,https://api.github.com/repos/google/ExoPlayer/git/commits/1316445c00328f9fc04845350800783aef55ba44,1316445c00328f9fc04845350800783aef55ba44,"Constraint buffered percentage to [0,100]

Issue: #2902

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158142754"
ojw28,2017-06-06 15:15:25,https://api.github.com/repos/google/ExoPlayer/git/commits/90c62f636ce7e1b27236f76f3bfc596ce6941b23,90c62f636ce7e1b27236f76f3bfc596ce6941b23,"Pass non-null logger into DefaultDrmSessionManager

Issue: #2903

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158142226"
AquilesCanta,2017-06-06 15:03:04,https://api.github.com/repos/google/ExoPlayer/git/commits/1637575d4b9d4786784a13b9dead540599ac730a,1637575d4b9d4786784a13b9dead540599ac730a,"For HLS mode, pick the lowest PID track for each track type

This prevents strange behaviors for streams that changes the track declaration
order in the PMT.

NOTE: This should not change ANY behavior other than the one described above.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158140890"
ojw28,2017-06-06 14:31:01,https://api.github.com/repos/google/ExoPlayer/git/commits/a3ee684e270abe9e271510428dc7851903ed2587,a3ee684e270abe9e271510428dc7851903ed2587,"Further cleanup of updateSelectedTrack

- Return early if the selection is unchanged.
- Remove unnecessary variables.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158138187"
botaydotcom,2017-06-06 13:58:07,https://api.github.com/repos/google/ExoPlayer/git/commits/c1bfab3c23a6c6eafc5842ba13f59cff1df8b6ee,c1bfab3c23a6c6eafc5842ba13f59cff1df8b6ee,"Fix a minor bug with AdaptiveTrackSelection.

When updating track selection, we should only revert back from ideal
track selection to current track selection if the currently selected
track is not black-listed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158135644"
erdemguven,2017-06-06 12:31:42,https://api.github.com/repos/google/ExoPlayer/git/commits/5c2c3c5c63aecfb8fe4b31db10aa7c48933cdfbb,5c2c3c5c63aecfb8fe4b31db10aa7c48933cdfbb,"Create a base class for DASH downloading related tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158129802"
tonihei,2017-06-05 23:03:39,https://api.github.com/repos/google/ExoPlayer/git/commits/edbc2046e2c6291e0e229638c78a507ea491c996,edbc2046e2c6291e0e229638c78a507ea491c996,"Clean-up manifest merge attributes.

1. Remove tools:replace in manifest files. This attribute is only needed to establish priority when two manifests are merged and have the same attribute with different values.
As this is not happening here, the attributes can be removed.

2. Some BUILD files also define a deprecated manifest merge strategy different from the android default merge strategy. For consistency these are set to ""android'.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158075128"
AquilesCanta,2017-06-05 12:28:01,https://api.github.com/repos/google/ExoPlayer/git/commits/10c2d3156b3aa8b4322bbd5d523a07f9d3f8e8ee,10c2d3156b3aa8b4322bbd5d523a07f9d3f8e8ee,"Pick the lowest quality video when capabilities are exceeded

Issue:#2901

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=158006727"
andrewlewis,2017-06-04 14:02:13,https://api.github.com/repos/google/ExoPlayer/git/commits/8dca0b941886b4eab9246c0a6a36c5f0dc5e44b5,8dca0b941886b4eab9246c0a6a36c5f0dc5e44b5,"Add a null check in DummySurface static initializer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157958694"
ojw28,2017-06-02 17:40:39,https://api.github.com/repos/google/ExoPlayer/git/commits/35cc0d65cde21395929e4750988d1502a0191ccb,35cc0d65cde21395929e4750988d1502a0191ccb,"Only update codecInfo when needed

This avoids calling getDecoderInfo repeatedly in the case
where shouldInitCodec return false (e.g. because we don't
have a surface and cannot instantiate a dummy surface).

Issue: #677

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157847702"
andrewlewis,2017-06-02 16:48:58,https://api.github.com/repos/google/ExoPlayer/git/commits/c5cf9090fc44f9502c97e404f4e185d84a44c5bc,c5cf9090fc44f9502c97e404f4e185d84a44c5bc,"Assume CBR for MP3s with Info headers

Issue: #2895

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157841519"
ojw28,2017-06-02 15:26:13,https://api.github.com/repos/google/ExoPlayer/git/commits/e98bee6163a354754fe0b383c3e2160865d754be,e98bee6163a354754fe0b383c3e2160865d754be,"Add surface attach/detach to *WithRendererDisabling tests

This will cause the test to exercise the code path of
instantiating a DummySurface, rendering to it for 10
seconds, then re-targeting the real surface again. For
secure content tests the code path is only exercised if
DummySurface.SECURE_SUPPORTED is true. The logic for
checking this is within MediaCodecVideoRenderer itself,
rather than being part of the test.

Issue: #677

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157833026"
ojw28,2017-06-02 15:10:58,https://api.github.com/repos/google/ExoPlayer/git/commits/ba9114c9c7691b38d91cdd00eae73ab3743860d5,ba9114c9c7691b38d91cdd00eae73ab3743860d5,"Automatically use DummySurface when possible

Issue: #677

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157831796"
ojw28,2017-06-02 14:39:33,https://api.github.com/repos/google/ExoPlayer/git/commits/32b5a802918ab01018fb39f6ee964ed7275d7b0a,32b5a802918ab01018fb39f6ee964ed7275d7b0a,"Deprecate LoopingMediaSource for indefinite looping

ExoPlayer.setRepeatMode should be preferred. Deprecate
the constructor and update the relevant documentation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157829207"
ojw28,2017-05-31 14:23:13,https://api.github.com/repos/google/ExoPlayer/git/commits/ea21af2ce9e60a064602f8a78c2394e90b1c208f,ea21af2ce9e60a064602f8a78c2394e90b1c208f,"Move adaptation disabling workaround into MediaCodecUtil

This is necessary to make sure that the correct thing happens
where MediaCodecInfo.adaptive is queried directly (for example,
MediaCodecVideoRenderer uses the field to determine how to size
input buffers). Also disable adaptive on Nexus 10.

Issue: #2806

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157583473"
AquilesCanta,2017-05-31 10:59:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0f27efae4465e0e48fd18850f2efe42de63046e1,0f27efae4465e0e48fd18850f2efe42de63046e1,"Ignore invalid EXT-X-PLAYLIST-TYPE values

Issue:#2889

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157571216"
ojw28,2017-05-31 10:16:47,https://api.github.com/repos/google/ExoPlayer/git/commits/b1fd99baaba91b3a8610666e60f4bc196cd556ff,b1fd99baaba91b3a8610666e60f4bc196cd556ff,"Constraint seeks within bounds for ConstantBitrateSeeker

We do this everywhere for index based seeking already.

Issue: #2876

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157568788"
andrewlewis,2017-05-31 08:46:49,https://api.github.com/repos/google/ExoPlayer/git/commits/bcd4bf0fd5e729168b2ed125dc28eae0ed3dc0b7,bcd4bf0fd5e729168b2ed125dc28eae0ed3dc0b7,"Fix DefaultTimeBar invalidation

Issue: #2871

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157562792"
AquilesCanta,2017-05-26 18:33:09,https://api.github.com/repos/google/ExoPlayer/git/commits/12ef97fc34376838e3eb09f16fc371d952577b64,12ef97fc34376838e3eb09f16fc371d952577b64,"Fix and complete MediaPlaylist javadocs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157243533"
ojw28,2017-05-26 17:36:29,https://api.github.com/repos/google/ExoPlayer/git/commits/122b2a1a3187a36a9d8e13f6add87cb3e2e1c2ba,122b2a1a3187a36a9d8e13f6add87cb3e2e1c2ba,"Use single TrackGroup for switchable adaptation sets

Issue: #2431

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157236031"
andrewlewis,2017-05-26 16:14:14,https://api.github.com/repos/google/ExoPlayer/git/commits/27fc82f0adf05c0246e5d1d6548cfb8ea41df11d,27fc82f0adf05c0246e5d1d6548cfb8ea41df11d,"Make repeatMode private

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157226768"
AquilesCanta,2017-05-26 15:31:41,https://api.github.com/repos/google/ExoPlayer/git/commits/cf6f1d7bf2e6119b2c2f2def797408990727a9a2,cf6f1d7bf2e6119b2c2f2def797408990727a9a2,"Move Period and Window to the top of timeline to match Exoplayer style

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157223090"
AquilesCanta,2017-05-26 14:48:43,https://api.github.com/repos/google/ExoPlayer/git/commits/53b52e784c2a7902b634348a2edfe81306318770,53b52e784c2a7902b634348a2edfe81306318770,"Use AVERAGE-BANDWIDTH instead of BANDWIDTH when available

Also prevent BANDWIDTH's regex from matching the AVERAGE-BANDWIDTH attribute.

Issue:#2863

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157219453"
AquilesCanta,2017-05-26 14:14:59,https://api.github.com/repos/google/ExoPlayer/git/commits/26728142eea52f16f8ce98734e915f0b92f54ca4,26728142eea52f16f8ce98734e915f0b92f54ca4,"Expose all ""other"" tags that start with #EXT through the playlist

""other"" includes tags for which there is no existing behavior defined.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157217270"
AquilesCanta,2017-05-26 12:10:04,https://api.github.com/repos/google/ExoPlayer/git/commits/3108b07c90334c69015b7bff045240aa169bb6e7,3108b07c90334c69015b7bff045240aa169bb6e7,"Minimize overlapping chunks if #EXT-X-INDEPENDENT-SEGMENTS is present

It is worth mentioning that the tag can be in the master playlist as well, which
means that it applies to all media playlists. There are a few tags with this
characteristic. This will be addressed in a later CL.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157210505"
ojw28,2017-05-26 11:49:44,https://api.github.com/repos/google/ExoPlayer/git/commits/2c20689237353472cad859335c488fa42ae83231,2c20689237353472cad859335c488fa42ae83231,"Don't fail if we find a track is unsupported

Use AUDIO_UNKNOWN instead. This is in line with our handling
of video tracks with VIDEO_UNKNOWN.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157209428"
ojw28,2017-05-26 11:48:11,https://api.github.com/repos/google/ExoPlayer/git/commits/9737046e53e1db976e77bfaa53e7901170b14e38,9737046e53e1db976e77bfaa53e7901170b14e38,"Parse SupplementalProperty elements in DASH adaptation sets

This will be used to merge adaptation sets that are marked for
seamless switching into single TrackGroups in DashMediaSource.

Issue: #2431

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157209358"
erdemguven,2017-05-26 10:03:48,https://api.github.com/repos/google/ExoPlayer/git/commits/5092efe301210f53ff69c475543f02c95b0c254f,5092efe301210f53ff69c475543f02c95b0c254f,"Add a comment to record the reason for restoring licenses before releasing

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157204373"
andrewlewis,2017-05-25 17:30:27,https://api.github.com/repos/google/ExoPlayer/git/commits/3daa7a084fe89dc241768403f61086694388a249,3daa7a084fe89dc241768403f61086694388a249,"Shorten the player type

The string is truncated to 20 character in IMA.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157122929"
ojw28,2017-05-25 13:52:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f8cbe53f20325dd06e920c0d989b891b760bf276,f8cbe53f20325dd06e920c0d989b891b760bf276,"Fix SmoothStreaming Timeline

There were a few things wrong. Specifically the case in
the ref'd issue. Also, the timeline was being marked as
non-dynamic in the empty-but-live case (it should be
marked dynamic as segments may be added later).

Issue: #2760

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157103727"
ojw28,2017-05-25 13:17:04,https://api.github.com/repos/google/ExoPlayer/git/commits/c4f7a2d62da280370dee61e102f0fe4eb74cc258,c4f7a2d62da280370dee61e102f0fe4eb74cc258,"Correctly transition to ended state

This fixes transitioning into the ended state if we see
endOfStream from the chunk source whilst in the pending
reset state. Prior to this fix we'd still be pending a
reset, and so readData would never allow EOS to be read
by the consuming renderer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157101755"
andrewlewis,2017-05-25 10:57:11,https://api.github.com/repos/google/ExoPlayer/git/commits/eb3a31c881d5c5426c11a28047949669ab664758,eb3a31c881d5c5426c11a28047949669ab664758,"Fix default position masking period index calculation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=157095116"
AquilesCanta,2017-05-24 16:48:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f16967cdfeda442128edc754cba0c40949a2d429,f16967cdfeda442128edc754cba0c40949a2d429,"Flexibilize Util.parseXsDateTime to allow single digit hour

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156999955"
ojw28,2017-05-24 14:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/695347c26b92edcbb225eb6d85ca4713362d11ce,695347c26b92edcbb225eb6d85ca4713362d11ce,"Don't select more than one audio/video/text track by default

Issue: #2618

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156986606"
ojw28,2017-05-23 17:12:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9f814850535afbe5a0123f7fa8fc2875ba2c5015,9f814850535afbe5a0123f7fa8fc2875ba2c5015,"Merge pull request #2860 from google/dev-2.4.1-rc

r2.4.1"
ojw28,2017-05-23 16:41:37,https://api.github.com/repos/google/ExoPlayer/git/commits/fe50459449413ae3a9f3a9bb720812547fbd63a8,fe50459449413ae3a9f3a9bb720812547fbd63a8,"Bump version and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156872383"
ojw28,2017-05-23 14:45:53,https://api.github.com/repos/google/ExoPlayer/git/commits/c14a14e51d5c9a6d29f101892fdf184d61f546f9,c14a14e51d5c9a6d29f101892fdf184d61f546f9,"Update gradle + bintray-release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156860658"
ojw28,2017-05-23 16:41:37,https://api.github.com/repos/google/ExoPlayer/git/commits/3a448f3a0ea935f9e11b8a6bd5db8b4a62144cf3,3a448f3a0ea935f9e11b8a6bd5db8b4a62144cf3,"Bump version and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156872383"
ojw28,2017-05-23 14:45:53,https://api.github.com/repos/google/ExoPlayer/git/commits/3b1e4b5ca9329cf161e64a5793261cf61388ed0d,3b1e4b5ca9329cf161e64a5793261cf61388ed0d,"Update gradle + bintray-release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156860658"
ojw28,2017-05-22 20:52:51,https://api.github.com/repos/google/ExoPlayer/git/commits/bf71ad48838169326b7f5f95c6a4a3f5723c8870,bf71ad48838169326b7f5f95c6a4a3f5723c8870,"Fix TTML positioning

Issue: #2824

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156781252"
ojw28,2017-05-16 01:11:45,https://api.github.com/repos/google/ExoPlayer/git/commits/fb3c19055691ed835c9594d9a92bdf76117b835f,fb3c19055691ed835c9594d9a92bdf76117b835f,"Clear the correct buffer in MediaCodecRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156131086"
ojw28,2017-05-16 01:06:20,https://api.github.com/repos/google/ExoPlayer/git/commits/a4a31546047a6bea63e41775fb8f4c8ff88cf9be,a4a31546047a6bea63e41775fb8f4c8ff88cf9be,"Clear up BaseRenderer.disable

- Call onDisabled last. onDisabled really shouldn't be doing
  anything with the stream, so pretty sure this is fine (and
  guarantees the stream is cleared properly even if onDisabled
  throws a RTE).
- Remove super.onDisabled calls from Text/Metadata renderers.
  This is just for consistency; we don't make such calls in
  other direct descendants of BaseRenderer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156130640"
andrewlewis,2017-05-15 22:36:20,https://api.github.com/repos/google/ExoPlayer/git/commits/a0f4bf0ee18a5f883530202a2aad0f53604b99cb,a0f4bf0ee18a5f883530202a2aad0f53604b99cb,"Constrain DefaultTimeBar maximum positions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156113616"
andrewlewis,2017-05-15 18:14:04,https://api.github.com/repos/google/ExoPlayer/git/commits/ecc4184e6c6ac8242fc796962f7eba936990077d,ecc4184e6c6ac8242fc796962f7eba936990077d,"Enable neon for libvpx on arm64-v8a

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156077889"
marcbaechinger,2017-05-15 05:26:39,https://api.github.com/repos/google/ExoPlayer/git/commits/e7ec4e6755e83162d1e2b3b44b6dce863348d01c,e7ec4e6755e83162d1e2b3b44b6dce863348d01c,"Enlarge size of data array of parsable packetArray if ogg packet size exceeds
the current size.

https://github.com/google/ExoPlayer/issues/2782

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156018137"
sillywab8,2017-05-12 13:24:40,https://api.github.com/repos/google/ExoPlayer/git/commits/1cda6e025e38608263572fb5a65b125c58b4334f,1cda6e025e38608263572fb5a65b125c58b4334f,Add support for AVC Level 5.2
mofneko,2017-05-11 12:11:21,https://api.github.com/repos/google/ExoPlayer/git/commits/9a2cac7f741101c58900da7c0070d66c4a578740,9a2cac7f741101c58900da7c0070d66c4a578740,Refactor: Change the position of variable.
ojw28,2017-05-23 14:21:21,https://api.github.com/repos/google/ExoPlayer/git/commits/5dca496b896c0738ffced72d69fe9345937eb723,5dca496b896c0738ffced72d69fe9345937eb723,"Merge pull request #2809 from mofneko/change-position-variable

Refactor: Change the position of variable."
ojw28,2017-05-23 14:21:04,https://api.github.com/repos/google/ExoPlayer/git/commits/dbc0cf8002b98deb7419db9ebdea1a9d0f7cf051,dbc0cf8002b98deb7419db9ebdea1a9d0f7cf051,"Merge pull request #2820 from sillywab8/support_avclevel52

Add support for AVC Level 5.2"
erdemguven,2017-05-23 10:32:42,https://api.github.com/repos/google/ExoPlayer/git/commits/72dcfd19c8c0086874898f00ed7527acc16ab999,72dcfd19c8c0086874898f00ed7527acc16ab999,"Automated g4 rollback of changelist 156712385.

*** Reason for rollback ***

This change may silently introduce bugs where both parameters are acceptable in both places. It's decided that the gain isn't worth the risk.

*** Original change description ***

Make the error messages the first parameter in Assertions methods to match JUnit methods

Reverse parameter order creates a slight confusion.

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156844728"
andrewlewis,2017-05-23 08:43:24,https://api.github.com/repos/google/ExoPlayer/git/commits/88fddb42eca2da65297cfacd1a068aadc47b2614,88fddb42eca2da65297cfacd1a068aadc47b2614,"Provide video frame timestamps to subclasses

Expose the stream offset to BaseRenderer subclasses.

Issue: #2267

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156837514"
ojw28,2017-05-22 20:52:51,https://api.github.com/repos/google/ExoPlayer/git/commits/e892e3a5c71ac4543f49d6e8b35359ee62a0f523,e892e3a5c71ac4543f49d6e8b35359ee62a0f523,"Fix TTML positioning

Issue: #2824

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156781252"
acr31,2017-05-22 15:22:10,https://api.github.com/repos/google/ExoPlayer/git/commits/78c4cb74ea3ec0076bb17307b4850dce3b733b56,78c4cb74ea3ec0076bb17307b4850dce3b733b56,"Fixes incorrectly-ordered arguments to calls to assertEquals
([]
This change has been automatically generated by an Error Prone check that
detects incorrect argument ordering on calls to assertEquals-style methods. See
[]

Cleanup change automatically generated by javacflume/refactory
Refactoring: third_party/java_src/error_prone/project/core/src/main/java/com/google/errorprone/bugpatterns/argumentselectiondefects:AssertEqualsArgumentOrderChecker_refactoring

Tested:
    TAP --sample for global presubmit queue
    []

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156739144"
erdemguven,2017-05-22 08:40:15,https://api.github.com/repos/google/ExoPlayer/git/commits/1687f1653eadc4eb22177f029d27b5179c2cbf5e,1687f1653eadc4eb22177f029d27b5179c2cbf5e,"Make the error messages the first parameter in Assertions methods to match JUnit methods

Reverse parameter order creates a slight confusion.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156712385"
ojw28,2017-05-17 20:55:24,https://api.github.com/repos/google/ExoPlayer/git/commits/60ebe15c4b35d215f6af524c381e5184d60928f8,60ebe15c4b35d215f6af524c381e5184d60928f8,Update README.md
ojw28,2017-05-17 20:53:29,https://api.github.com/repos/google/ExoPlayer/git/commits/6fdfdce19c568a18c7915a7b3c228e87a0383f41,6fdfdce19c568a18c7915a7b3c228e87a0383f41,Update README.md
ojw28,2017-05-17 20:52:19,https://api.github.com/repos/google/ExoPlayer/git/commits/d496621e4b60b4ff763d25174f08044b6f91a580,d496621e4b60b4ff763d25174f08044b6f91a580,Update README.md
ojw28,2017-05-17 20:51:36,https://api.github.com/repos/google/ExoPlayer/git/commits/27698496fe8cb319a9c982de3307aaea348898fa,27698496fe8cb319a9c982de3307aaea348898fa,Update README.md
ojw28,2017-05-17 20:46:20,https://api.github.com/repos/google/ExoPlayer/git/commits/a6c088050a1987536b673dc1756afb5d28e48f21,a6c088050a1987536b673dc1756afb5d28e48f21,Update IMA readme
ojw28,2017-05-17 20:37:09,https://api.github.com/repos/google/ExoPlayer/git/commits/16445356dce967bcb7efabb8d50ac53394eccbc5,16445356dce967bcb7efabb8d50ac53394eccbc5,Fix broken link
andrewlewis,2017-05-17 15:54:09,https://api.github.com/repos/google/ExoPlayer/git/commits/cdac347f8f175fb5ac5a9f4250d5462c6a083aed,cdac347f8f175fb5ac5a9f4250d5462c6a083aed,"Open source IMA extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156312761"
tonihei,2017-05-16 15:39:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4359d44331b6269b5516737a387bc41a6b99201d,4359d44331b6269b5516737a387bc41a6b99201d,"Rename CronetEngineFactory to CronetEngineWrapper

In addition, the class now accepts available Cronet instances and returns the
source of the current CronetEngine.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156185701"
tonihei,2017-05-16 11:58:14,https://api.github.com/repos/google/ExoPlayer/git/commits/1594e71917a37ce2f603cb462403b884023eebfd,1594e71917a37ce2f603cb462403b884023eebfd,"Test for changing repeat mode during playback
(Related to GitHub Issue #2577)

Added test to ExoPlayerTest which changes the repeat mode during playback.
Test verifies that ExoPlayer shows the periods in the intended order.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156168166"
ojw28,2017-05-16 01:11:45,https://api.github.com/repos/google/ExoPlayer/git/commits/8e0bf6cd2f26d2b9a2f794fb140b2e9a14ec04f0,8e0bf6cd2f26d2b9a2f794fb140b2e9a14ec04f0,"Clear the correct buffer in MediaCodecRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156131086"
ojw28,2017-05-16 01:06:20,https://api.github.com/repos/google/ExoPlayer/git/commits/72ba736a7f87c7f5eed8b5d00ddfa69f6574bef3,72ba736a7f87c7f5eed8b5d00ddfa69f6574bef3,"Clear up BaseRenderer.disable

- Call onDisabled last. onDisabled really shouldn't be doing
  anything with the stream, so pretty sure this is fine (and
  guarantees the stream is cleared properly even if onDisabled
  throws a RTE).
- Remove super.onDisabled calls from Text/Metadata renderers.
  This is just for consistency; we don't make such calls in
  other direct descendants of BaseRenderer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156130640"
andrewlewis,2017-05-15 22:36:20,https://api.github.com/repos/google/ExoPlayer/git/commits/84875bbe7b380bdd4f797c22d53650321836ce6f,84875bbe7b380bdd4f797c22d53650321836ce6f,"Constrain DefaultTimeBar maximum positions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156113616"
andrewlewis,2017-05-15 18:14:04,https://api.github.com/repos/google/ExoPlayer/git/commits/b31ec337ed60143248038a79a2c16d35516b76c3,b31ec337ed60143248038a79a2c16d35516b76c3,"Enable neon for libvpx on arm64-v8a

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156077889"
andrewlewis,2017-05-15 16:15:29,https://api.github.com/repos/google/ExoPlayer/git/commits/9a7306a4cc219feb33f24157629b8f8f393ddebb,9a7306a4cc219feb33f24157629b8f8f393ddebb,"Remove unnecessary throws clause

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156061458"
andrewlewis,2017-05-15 16:12:05,https://api.github.com/repos/google/ExoPlayer/git/commits/929ef172a01d5f253803680af6ed6711b21e4afd,929ef172a01d5f253803680af6ed6711b21e4afd,"Fix handling of removed periods

If a timeline update removed periods at the end of the timeline which
had been buffered, handleSourceInfoRefreshed would call
getNextPeriodIndex and get back -1 for the last period holder in the
new timeline. Then isLastPeriod(-1) could throw.

Fix this behavior so that the remainder of the timeline is discarded.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156061016"
marcbaechinger,2017-05-15 05:26:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f335fb936d223fcbb8822ef6ff3f45b31dd72f53,f335fb936d223fcbb8822ef6ff3f45b31dd72f53,"Enlarge size of data array of parsable packetArray if ogg packet size exceeds
the current size.

https://github.com/google/ExoPlayer/issues/2782

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=156018137"
tonihei,2017-05-11 09:31:13,https://api.github.com/repos/google/ExoPlayer/git/commits/3dd2f4af573addd561f80991e72ab3ce6c834d5a,3dd2f4af573addd561f80991e72ab3ce6c834d5a,"Tests for timeline repeat mode support.

Checking the expected next/previous window indices and if the correct window
or period gets returned.

TimelineTest defines mock classes and verification methods used by the specific
implementation tests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155727385"
sillywab8,2017-05-12 13:24:40,https://api.github.com/repos/google/ExoPlayer/git/commits/ed65958e5d114a74676ee63e23b74fd2790e8c7b,ed65958e5d114a74676ee63e23b74fd2790e8c7b,Add support for AVC Level 5.2
mofneko,2017-05-11 12:11:21,https://api.github.com/repos/google/ExoPlayer/git/commits/37ffb33183ca407463772184758799727b689988,37ffb33183ca407463772184758799727b689988,Refactor: Change the position of variable.
andrewlewis,2017-05-11 02:36:06,https://api.github.com/repos/google/ExoPlayer/git/commits/7eadfb1ff019f61f53cfb7d323cd77ba96c20cd6,7eadfb1ff019f61f53cfb7d323cd77ba96c20cd6,"Fix wrap_content handling in DefaultTimeBar

Issue: #2788

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155705318"
AquilesCanta,2017-05-09 10:20:40,https://api.github.com/repos/google/ExoPlayer/git/commits/8d6f5d86b40a04f49977b669c06f6b84e91d8b5a,8d6f5d86b40a04f49977b669c06f6b84e91d8b5a,"Make MODE_SINGLE_PMT the default mode

Even though this is not strictly spec compliant, this will make exoplayer
behave like it used to before multiple program support. Developers
who want to take advantage of the multiple program support are probably
less than the ones who only want their stream to ""just work"". This is
particularly useful for streams obtained after a filtering component,
like a tv tuner.

Issue:#2757

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155486122"
AquilesCanta,2017-05-09 10:14:58,https://api.github.com/repos/google/ExoPlayer/git/commits/70b628526a742a433fdf5d1fccbb9e1995e4297d,70b628526a742a433fdf5d1fccbb9e1995e4297d,"Propagate playlist loading error if it prevents playback

This imitates DashMediaSource's behavior.

Issue:#2623

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155485738"
ojw28,2017-01-07 11:59:20,https://api.github.com/repos/google/ExoPlayer/git/commits/1d6816d94b3eb3238abfaa38c2edda1a1e4d9e0f,1d6816d94b3eb3238abfaa38c2edda1a1e4d9e0f,"Avoid process death if OOM occurs on a loading thread

This is most commonly caused by malformed media, where
the media indicates that something we need to make an
allocation for is *really huge*. Failing playback is
appropriate for this case; killing the process is not.

Issue: #2780

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155408062"
andrewlewis,2017-05-08 07:25:59,https://api.github.com/repos/google/ExoPlayer/git/commits/963b7cbf72104e1fe1d61d8b218f620c4a39f5c1,963b7cbf72104e1fe1d61d8b218f620c4a39f5c1,"Fix interpolation for rate/pitch adjustment

Based on https://github.com/waywardgeek/sonic/commit/7b441933.

Issue: #2774

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155349817"
andrewlewis,2017-05-07 15:18:25,https://api.github.com/repos/google/ExoPlayer/git/commits/2d2fcf1510be02a2315d41dd1a49e01aa0f71db4,2d2fcf1510be02a2315d41dd1a49e01aa0f71db4,"Use native byte order for SimpleOutputBuffers

The default byte order for ByteBuffers is big endian, but platform decoder
output buffers use native byte order. AudioProcessors handle native byte order
input/output.

When using a software audio decoding extension the Sonic audio processor would
receive big endian input but was outputting to a native byte order buffer,
which could be little endian. This mismatch caused audio output to be
distorted.

After this change both platform decoder and extension decoder output buffers
should be in native byte order.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155320973"
mofneko,2017-05-08 11:05:10,https://api.github.com/repos/google/ExoPlayer/git/commits/65607b2736d3e51c59b66fa1a76712c98576b854,65607b2736d3e51c59b66fa1a76712c98576b854,Remove fully-qualified name
ojw28,2017-05-05 14:21:48,https://api.github.com/repos/google/ExoPlayer/git/commits/bcee02cde20f403c6f09960b9d6cb612c3edd5a9,bcee02cde20f403c6f09960b9d6cb612c3edd5a9,"Don't set MAX_INPUT_SIZE to unnecessarily large values

If the codec isn't adaptive, there's no need to accommodate
the width/height/input-size of streams that don't have the
same resolution as the current stream. This is because we'll
always need to instantiate a new codec anyway.

Issue: #2607

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155194458"
AquilesCanta,2017-05-05 10:49:22,https://api.github.com/repos/google/ExoPlayer/git/commits/68b3e0b54d0c34842c7ec35174e431b2d8f0284b,68b3e0b54d0c34842c7ec35174e431b2d8f0284b,"Expose no CC tracks if CLOSED-CAPTIONS=NONE is present

Issue:#2743

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155182859"
ojw28,2017-05-04 18:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/943141fb076a4aeb7e7c10d4830aef32caa46aca,943141fb076a4aeb7e7c10d4830aef32caa46aca,"Some minor cleanup related to track selection and caching

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155103828"
AquilesCanta,2017-05-04 10:29:10,https://api.github.com/repos/google/ExoPlayer/git/commits/bf61691c27612dca7de21223473125788bee8532,bf61691c27612dca7de21223473125788bee8532,"Fix javadocs typos

Issue:#2773

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155062917"
AquilesCanta,2017-05-04 10:24:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ed836d31e28867fc81005b4d2dff4891289e5a74,ed836d31e28867fc81005b4d2dff4891289e5a74,"Propagate EXT-X-DATERANGE tags with media playlists

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155062718"
ojw28,2017-05-03 08:32:22,https://api.github.com/repos/google/ExoPlayer/git/commits/8bffe5d11ef5bbdbaa892226b4cba4273351967a,8bffe5d11ef5bbdbaa892226b4cba4273351967a,"Add DummySurface for use with MediaCodec

A DummySurface is useful with MediaCodec on API levels 23+.
Rather than having to release a MediaCodec instance when the
app no longer has a real surface to output to, it's possible
to retain the MediaCodec, using MediaCodec.setOutputSurface
to target a DummySurface instance instead. When the app has
a real surface to output to again, it can call swap this
surface back in instantaneously. Without DummySurface a new
MediaCodec has to be instantiated at this point, and decoding
can only start from a key-frame in the media.

A future change may hook this up internally in MediaCodecRenderer
for supported use cases, although this looks a little awkward. If
this approach isn't viable, we can require applications wanting
this to set a DummySurface themselves. This isn't easy to do with
the way SimpleExoPlayerView.setPlayer works at the moment, however,
so some changes will be needed either way.

Issue: #677

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154931778"
falhassen,2017-05-02 17:09:55,https://api.github.com/repos/google/ExoPlayer/git/commits/60bf31ff24f492e8c0bbd798b76d3081e270a4ba,60bf31ff24f492e8c0bbd798b76d3081e270a4ba,"Use Looper.getMainLooper() in Handler constructors in ExoPlayer when needed.

Looper.myLooper(), the default looper, may be null in background threads. This adds a fallback to use the main app looper.

This will allow ExoPlayer instances to be built in background threads in Photos.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154845446"
andrewlewis,2017-05-02 13:38:57,https://api.github.com/repos/google/ExoPlayer/git/commits/e90e2caec4fe94d7fbb706c7da827c9f0ad3a1c7,e90e2caec4fe94d7fbb706c7da827c9f0ad3a1c7,"Improve DefaultTimeBar color customization

Add attributes for the scrubber handle color and unplayed color. If attributes
are missing, derive defaults from the played color.

Issue: #2740

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154825736"
AquilesCanta,2017-04-27 14:49:14,https://api.github.com/repos/google/ExoPlayer/git/commits/2e2b0085c1de98acfe054b3797de298a767566b1,2e2b0085c1de98acfe054b3797de298a767566b1,"Prevent text tracks with no language being selected by default

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154421706"
AOrobator,2017-05-03 14:49:36,https://api.github.com/repos/google/ExoPlayer/git/commits/dc80be0ca1c8c87ea4522f9efbb55dd346c836bd,dc80be0ca1c8c87ea4522f9efbb55dd346c836bd,"Improved Documentation

Added missing coma and fixed typo for EventListener#onTimelineChanged"
ojw28,2017-05-11 05:17:39,https://api.github.com/repos/google/ExoPlayer/git/commits/785fc761243720598b0b995bfda0dbbd5e361326,785fc761243720598b0b995bfda0dbbd5e361326,Delete gcore_versions.bzl
ojw28,2017-05-11 04:59:05,https://api.github.com/repos/google/ExoPlayer/git/commits/17cee63544d3f8cbbb8ddf9b1773a49a3ef9b6d5,17cee63544d3f8cbbb8ddf9b1773a49a3ef9b6d5,"Merge pull request #2794 from mofneko/fix-unused-variable

Fix unused variable"
andrewlewis,2017-05-11 02:36:06,https://api.github.com/repos/google/ExoPlayer/git/commits/496306192340f39c67f6e9095cd2d0015794d2f5,496306192340f39c67f6e9095cd2d0015794d2f5,"Fix wrap_content handling in DefaultTimeBar

Issue: #2788

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155705318"
tonihei,2017-05-10 16:18:01,https://api.github.com/repos/google/ExoPlayer/git/commits/c0d16ea2cb523d28477385ef6d6b619c21f77d1e,c0d16ea2cb523d28477385ef6d6b619c21f77d1e,"Possible NullPointerException in ExoPlayerImplInternal.setRepeatModeInternal

When readingPeriodHolder and playingPeriodHolder are both null, a
NullPointerException is thrown when trying to reassign readingPeriodHolder.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155635846"
andrewlewis,2017-05-10 14:30:52,https://api.github.com/repos/google/ExoPlayer/git/commits/a6220b8be36410e971086b3204118816fd37463f,a6220b8be36410e971086b3204118816fd37463f,"Handle control layouts with no repeat button

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155625893"
tonihei,2017-05-10 07:52:33,https://api.github.com/repos/google/ExoPlayer/git/commits/02c51ee01cf7d82983f89053f441543468e9a737,02c51ee01cf7d82983f89053f441543468e9a737,"Update period holders in ExoPlayerImplInternal when repeat mode changes.
(Relating to GitHub issue #2577)

Changing the repeat mode during playback may require to discard or rebuffer
certain periods because the requested order of playback changed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155600910"
tonihei,2017-05-09 15:53:29,https://api.github.com/repos/google/ExoPlayer/git/commits/8a210becefce8eaa5c101a6e075ace13b990370e,8a210becefce8eaa5c101a6e075ace13b990370e,"Add repeat mode support to Timeline implementations.
(Relating to GitHub Issue #2577)

The Timeline base class provides the default implementation.

Timeline wrappers (e.g. ClippingTimeline, ConcatatedTimeline) forward all
requests to the respective inner timelines. Some like ConcatenatedTimeline add
their own additional logic to bridge between the child timelines.

In addition, ConcatenatedTimeline and LoopingTimeline now have a common
abstract base class as they share most of their code.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155509269"
AquilesCanta,2017-05-09 10:20:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4abf64b7eff12685e282a98e7d805f8ef69185ac,4abf64b7eff12685e282a98e7d805f8ef69185ac,"Make MODE_SINGLE_PMT the default mode

Even though this is not strictly spec compliant, this will make exoplayer
behave like it used to before multiple program support. Developers
who want to take advantage of the multiple program support are probably
less than the ones who only want their stream to ""just work"". This is
particularly useful for streams obtained after a filtering component,
like a tv tuner.

Issue:#2757

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155486122"
AquilesCanta,2017-05-09 10:14:58,https://api.github.com/repos/google/ExoPlayer/git/commits/002dd72e702929a33d8940cfbaa758459e0067c6,002dd72e702929a33d8940cfbaa758459e0067c6,"Propagate playlist loading error if it prevents playback

This imitates DashMediaSource's behavior.

Issue:#2623

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155485738"
AquilesCanta,2017-05-09 09:20:43,https://api.github.com/repos/google/ExoPlayer/git/commits/1f43fb19985964566c0613205e39dbc0f4d5bb6d,1f43fb19985964566c0613205e39dbc0f4d5bb6d,"Introduce CryptoData parameter object

This will allow supporting more encryption schemes. Including some
that require more encryption data, like the encryption pattern.

Issue:#1661
Issue:#1989
Issue:#2089

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155481889"
mofneko,2017-05-09 12:20:57,https://api.github.com/repos/google/ExoPlayer/git/commits/86ac913df61b6fc79d8ed5a905c775ed10c832ff,86ac913df61b6fc79d8ed5a905c775ed10c832ff,Fix unused variable
ojw28,2017-05-08 22:14:14,https://api.github.com/repos/google/ExoPlayer/git/commits/0302fd6b4d5516c6a6ce67075ede7a880d859e92,0302fd6b4d5516c6a6ce67075ede7a880d859e92,"Merge pull request #2765 from AOrobator/dev-v2

Dev v2"
ojw28,2017-05-08 22:14:03,https://api.github.com/repos/google/ExoPlayer/git/commits/f302d528f884b28fa9efb83684bdaee6f7cde598,f302d528f884b28fa9efb83684bdaee6f7cde598,"Merge pull request #2787 from mofneko/remove-fully-qualified-name

Remove fully-qualified name"
ojw28,2017-01-07 11:59:20,https://api.github.com/repos/google/ExoPlayer/git/commits/812068a2087c2d5c1b7b84b39881aadd4a33555a,812068a2087c2d5c1b7b84b39881aadd4a33555a,"Avoid process death if OOM occurs on a loading thread

This is most commonly caused by malformed media, where
the media indicates that something we need to make an
allocation for is *really huge*. Failing playback is
appropriate for this case; killing the process is not.

Issue: #2780

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155408062"
tonihei,2017-05-08 16:19:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c70cd37c5a28e6b7fa2e9b87c032ff5a2b501ee4,c70cd37c5a28e6b7fa2e9b87c032ff5a2b501ee4,"Repeat mode UI

Added repeat mode toggle buttons to UI. Current mode gets forwarded to
Exoplayer instance, but without playback behaviour changes yet.
Translations for button descriptions are also missing - this will be another CL.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155386549"
tonihei,2017-05-08 16:19:27,https://api.github.com/repos/google/ExoPlayer/git/commits/df0d1b0f8a815a4a890690d714aee07952000a26,df0d1b0f8a815a4a890690d714aee07952000a26,"Removed superfluous dots in russian translation of repeat modes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155386511"
andrewlewis,2017-05-08 07:25:59,https://api.github.com/repos/google/ExoPlayer/git/commits/631cce9171f37f98a71caa6921f5d589af4bbf4f,631cce9171f37f98a71caa6921f5d589af4bbf4f,"Fix interpolation for rate/pitch adjustment

Based on https://github.com/waywardgeek/sonic/commit/7b441933.

Issue: #2774

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155349817"
andrewlewis,2017-05-07 15:18:25,https://api.github.com/repos/google/ExoPlayer/git/commits/4b5c521a3354eb573087a14f0da927b2aed44bef,4b5c521a3354eb573087a14f0da927b2aed44bef,"Use native byte order for SimpleOutputBuffers

The default byte order for ByteBuffers is big endian, but platform decoder
output buffers use native byte order. AudioProcessors handle native byte order
input/output.

When using a software audio decoding extension the Sonic audio processor would
receive big endian input but was outputting to a native byte order buffer,
which could be little endian. This mismatch caused audio output to be
distorted.

After this change both platform decoder and extension decoder output buffers
should be in native byte order.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155320973"
mofneko,2017-05-08 11:05:10,https://api.github.com/repos/google/ExoPlayer/git/commits/4f9cf44986b0dd381f43cc1bfa1f84e6a62fdbc6,4f9cf44986b0dd381f43cc1bfa1f84e6a62fdbc6,Remove fully-qualified name
ojw28,2017-05-05 14:21:48,https://api.github.com/repos/google/ExoPlayer/git/commits/7f66725953da42e78997838556a6ad1cdb95a046,7f66725953da42e78997838556a6ad1cdb95a046,"Don't set MAX_INPUT_SIZE to unnecessarily large values

If the codec isn't adaptive, there's no need to accommodate
the width/height/input-size of streams that don't have the
same resolution as the current stream. This is because we'll
always need to instantiate a new codec anyway.

Issue: #2607

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155194458"
AquilesCanta,2017-05-05 10:49:22,https://api.github.com/repos/google/ExoPlayer/git/commits/5d459c8103a00735260a2f849c00f98a1d6e865d,5d459c8103a00735260a2f849c00f98a1d6e865d,"Expose no CC tracks if CLOSED-CAPTIONS=NONE is present

Issue:#2743

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155182859"
ojw28,2017-05-04 18:30:25,https://api.github.com/repos/google/ExoPlayer/git/commits/4c39627ed16b0047b644eee3c9725785f86c080a,4c39627ed16b0047b644eee3c9725785f86c080a,"Some minor cleanup related to track selection and caching

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155103828"
tonihei,2017-05-04 14:51:14,https://api.github.com/repos/google/ExoPlayer/git/commits/ba9cbfbb910c0a241da82bc18d940345ddcd8269,ba9cbfbb910c0a241da82bc18d940345ddcd8269,"Localized strings for repeat modes.

Related to GitHub Issue #2577.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155078753"
tonihei,2017-05-04 13:11:12,https://api.github.com/repos/google/ExoPlayer/git/commits/4d1826dd3d079338495a2e5d178c244580c7ad42,4d1826dd3d079338495a2e5d178c244580c7ad42,"Add repeat mode mechanics to Exoplayer.
(Relating to GitHub Issue #2577)

All getter, setter and callbacks have been added and value of repeatMode is
passed to getNextXXXIndex methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155071985"
AquilesCanta,2017-05-04 10:29:10,https://api.github.com/repos/google/ExoPlayer/git/commits/3a5548d72aa7fa889ca6559fdb09070faf86e086,3a5548d72aa7fa889ca6559fdb09070faf86e086,"Fix javadocs typos

Issue:#2773

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155062917"
AquilesCanta,2017-05-04 10:24:19,https://api.github.com/repos/google/ExoPlayer/git/commits/b408750aa9daed185be188d9e671103897c34ff2,b408750aa9daed185be188d9e671103897c34ff2,"Propagate EXT-X-DATERANGE tags with media playlists

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=155062718"
ojw28,2017-05-03 08:32:22,https://api.github.com/repos/google/ExoPlayer/git/commits/7773831d88b910d323fa675dd3fb9aad98e3abfe,7773831d88b910d323fa675dd3fb9aad98e3abfe,"Add DummySurface for use with MediaCodec

A DummySurface is useful with MediaCodec on API levels 23+.
Rather than having to release a MediaCodec instance when the
app no longer has a real surface to output to, it's possible
to retain the MediaCodec, using MediaCodec.setOutputSurface
to target a DummySurface instance instead. When the app has
a real surface to output to again, it can call swap this
surface back in instantaneously. Without DummySurface a new
MediaCodec has to be instantiated at this point, and decoding
can only start from a key-frame in the media.

A future change may hook this up internally in MediaCodecRenderer
for supported use cases, although this looks a little awkward. If
this approach isn't viable, we can require applications wanting
this to set a DummySurface themselves. This isn't easy to do with
the way SimpleExoPlayerView.setPlayer works at the moment, however,
so some changes will be needed either way.

Issue: #677

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154931778"
falhassen,2017-05-02 17:09:55,https://api.github.com/repos/google/ExoPlayer/git/commits/6d01460b588afdc71294f2824477312e271ef93b,6d01460b588afdc71294f2824477312e271ef93b,"Use Looper.getMainLooper() in Handler constructors in ExoPlayer when needed.

Looper.myLooper(), the default looper, may be null in background threads. This adds a fallback to use the main app looper.

This will allow ExoPlayer instances to be built in background threads in Photos.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154845446"
andrewlewis,2017-05-02 13:38:57,https://api.github.com/repos/google/ExoPlayer/git/commits/c3158d3e682041f21cf0474dfdba6545f29be1ea,c3158d3e682041f21cf0474dfdba6545f29be1ea,"Improve DefaultTimeBar color customization

Add attributes for the scrubber handle color and unplayed color. If attributes
are missing, derive defaults from the played color.

Issue: #2740

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154825736"
tonihei,2017-05-02 12:15:56,https://api.github.com/repos/google/ExoPlayer/git/commits/d33a6b49f0ee3a36b9236bc76bc765fe0b7fd670,d33a6b49f0ee3a36b9236bc76bc765fe0b7fd670,"User-defined fallback if Cronet is not available

When using the CronetEngine.Builder class, it automatically selects the
Cronet version preferring higher version codes and falling back to a Java
Http implementation if no native or GMSCore version is available.

This version selection has now been moved into the CronetEngineFactory
class to always prefer GMSCore over natively bundled versions. We also
ignore the Cronet internal Java implementation. Instead, users of
CronetDataSourceFactory can provide their own fallback factory. If none is
provided, we use DefaultHttpDataSourceFactory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154821040"
tonihei,2017-05-02 11:09:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ab30d715c7b61d63ee664a48a03ca7a7a67ffa64,ab30d715c7b61d63ee664a48a03ca7a7a67ffa64,"Infinite loops using new Timeline features

Using the new getNextWindowIndex method of Timeline, LoopingMediaSource now
uses a InfinitelyLoopingTimeline which does not unroll the windows to
157 million iterations but just starts from the beginning. If an explicit
number of iterations is given, we still unroll.

This change also allows multi-window timebars to show infinitely looping
playlists correctly.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154817554"
tonihei,2017-05-02 09:34:59,https://api.github.com/repos/google/ExoPlayer/git/commits/94ffbb2b6ac2f210b6fd59086cb42364476c7aad,94ffbb2b6ac2f210b6fd59086cb42364476c7aad,"Support for Cronet from GMSCore (Blaze only)

The blaze BUILD file for the Cronet extension now has three options:
Using native bundled Cronet libs, using GMSCore, or using whichever is newer.
The GMSCore version is preselected (as it is the smallest), but other variants
may be used by uncommenting the respective lines.

The API is the same for all cases and the CronetEngine.Builder automatically
selects the newest option or falls back to default http.

To avoid that apps using this extension need to add a dependency to Cronet
themselves, I added a CronetEngineFactory to the Exoplayer extension.

Gradle builds can't be supported (as far as I can see), as the GMSCore Cronet
version is first party only.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154812029"
tonihei,2017-04-28 09:11:03,https://api.github.com/repos/google/ExoPlayer/git/commits/6d2fa12e163034fd8cc5321313760ae657cd8128,6d2fa12e163034fd8cc5321313760ae657cd8128,"Add getNextWindowIndex to Timeline
(Preparation for Repeat Toggle Function - GitHub Issue #2577)

In addition, Timeline now also got a getPreviousWindowIndex and a
getNextPeriodIndex method with default implementations.

Changed ExoPlayerImplInternal and PlaybackControlView to use these
methods at all occurances of period and window index operations.

Note: Does not include repeat mode yet and no timelines are actually
using it so far. Please wait for the next CLs for this.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154520664"
AquilesCanta,2017-04-27 14:49:14,https://api.github.com/repos/google/ExoPlayer/git/commits/5c723f4d3da3162cea11b9fc49aea004a3d2c87e,5c723f4d3da3162cea11b9fc49aea004a3d2c87e,"Prevent text tracks with no language being selected by default

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154421706"
AOrobator,2017-05-03 14:50:07,https://api.github.com/repos/google/ExoPlayer/git/commits/69db9a78e26977a41a0fb46b97c680ec0244dc9e,69db9a78e26977a41a0fb46b97c680ec0244dc9e,"Merge pull request #2 from AOrobator/AOrobator-patch-1

Improved Documentation"
AOrobator,2017-05-03 14:49:36,https://api.github.com/repos/google/ExoPlayer/git/commits/c4fff54d2ca0ce69ce9c7b63ae5082fa16091c4f,c4fff54d2ca0ce69ce9c7b63ae5082fa16091c4f,"Improved Documentation

Added missing coma and fixed typo for EventListener#onTimelineChanged"
ojw28,2017-04-26 15:23:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d979469659861f7fe1d39d153b90bdff1ab479cc,d979469659861f7fe1d39d153b90bdff1ab479cc,Merge branch 'dev-v2' into release-v2
ojw28,2017-04-26 15:23:31,https://api.github.com/repos/google/ExoPlayer/git/commits/b4fb8c3c4302a47e23e5b2bf61f331fcaacb3261,b4fb8c3c4302a47e23e5b2bf61f331fcaacb3261,Merge branch 'release-v2' into dev-v2
ojw28,2017-04-26 15:12:33,https://api.github.com/repos/google/ExoPlayer/git/commits/7761cdcd1ef0d7c9dd9cbe2231247b5d1ab6f9f7,7761cdcd1ef0d7c9dd9cbe2231247b5d1ab6f9f7,"Fill in release note TODOs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154298148"
ojw28,2017-04-26 14:44:33,https://api.github.com/repos/google/ExoPlayer/git/commits/1e12c0795476488b4065c50486d16fc1e022da25,1e12c0795476488b4065c50486d16fc1e022da25,"Move renderer building into a factory class.

To inject custom renderers into SimpleExoPlayer, developers
currently need to extend SimpleExoPlayer and override the
renderer building methods. This is in contrast to the rest
of the library, where we use proper injection. This change
restores consistency. I think it's fine to make
SimpleExoPlayer final again, but if we find people extending
it for non-renderer purposes, we can revert that part of the
change.

ExoPlayerFactory now has analogous methods for the simple
and non-simple cases, which is a nice outcome.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154295726"
tonihei,2017-04-26 08:24:30,https://api.github.com/repos/google/ExoPlayer/git/commits/0f9d9d56d6b4e2b1c5a8f3e83a7a843b14035034,0f9d9d56d6b4e2b1c5a8f3e83a7a843b14035034,"Fix scrub seek position estimation for multi window time bar.

When using a multi window time bar, the onScrubStop method uses another
method to estimate the seek position than the updateProgress method for
rendering the time bar. If the time line contains windows starting with an
ad period followed by other content, they differ in their behaviour.
 - updateProgress checks all periods and leaves out all ad periods
 - onScrubStop only checks windows and leaves them out when the first
   period is an ad.

Changed onScrubStop to fit approach in updateProgess.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154271628"
vigneshvg,2017-04-26 08:22:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f9c374235492389142ed2b59ad3cf444b1905afb,f9c374235492389142ed2b59ad3cf444b1905afb,"vp9_extension: Include cstring explicitly

Without this, newer android NDKs (r14+) fail to compile.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154271517"
ojw28,2017-04-25 18:50:34,https://api.github.com/repos/google/ExoPlayer/git/commits/9c2b0f6de2c444418ab8412fc575e83119d0cb93,9c2b0f6de2c444418ab8412fc575e83119d0cb93,"Fix lint errors when building release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154201059"
ojw28,2017-04-25 18:30:37,https://api.github.com/repos/google/ExoPlayer/git/commits/b88deaa1ca7b853cc20b0ca676f5d5b244680654,b88deaa1ca7b853cc20b0ca676f5d5b244680654,"Bump version and update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154198359"
vigneshvg,2017-04-25 16:06:28,https://api.github.com/repos/google/ExoPlayer/git/commits/9d76ab71336ed3bf68c73f6be4fd79d0976f7a54,9d76ab71336ed3bf68c73f6be4fd79d0976f7a54,"vp9_extension: Update libyuv build configuration

Disable libjpeg dependency when building libyuv.

Partially fixes Github Issue #2661

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154179126"
ojw28,2017-04-25 15:41:04,https://api.github.com/repos/google/ExoPlayer/git/commits/c50cfd8345829a1ab942e2b76c514c3885dbc4cd,c50cfd8345829a1ab942e2b76c514c3885dbc4cd,Minor additional cleanup of multiple DVB subtitles per PID support
ojw28,2017-04-25 15:38:06,https://api.github.com/repos/google/ExoPlayer/git/commits/f903098721739df4c7439cd95d4731a5694ac324,f903098721739df4c7439cd95d4731a5694ac324,Merge branch 'dev-v2' of persistent-https://github.com/google/ExoPlayer into dev-v2
ojw28,2017-04-25 14:42:03,https://api.github.com/repos/google/ExoPlayer/git/commits/fb88087ac4f6f58636c3fc90a94cd91bbdcb8f9a,fb88087ac4f6f58636c3fc90a94cd91bbdcb8f9a,"Tweak video renderer surface swaps

Fixes the following issues:

1. When a surface is set, it's expected that the renderer will
notify video size + when a frame is rendered to it. This is true
even if the surface isn't changing. Right now this is achieved
by setting renderedFirstFrame to false, but this is problematic
in the case that the surface isn't changing because (a) it will
force rendering of a subsequent frame to the output even when
paused, which is incorrect, and (b) isReady will return false
until this occurs.

2. When the surface really is changing, isReady can return false
until the first frame has been rendered into the new surface, which
will break seamless surface switching. This change allows isReady
to return true up to allowedJoiningTimeMs for this case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154171111"
AquilesCanta,2017-04-24 19:02:36,https://api.github.com/repos/google/ExoPlayer/git/commits/d3fe20cc64873472ef9c00e186d16a5884d9e453,d3fe20cc64873472ef9c00e186d16a5884d9e453,"Check the type of the (non-initial) loaded HLS playlist

This prevents illegal casts.

Issue:#2702

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154078240"
ojw28,2017-04-24 18:53:50,https://api.github.com/repos/google/ExoPlayer/git/commits/f0a72c4908c5c8e901f0a628132fea5b992ee3be,f0a72c4908c5c8e901f0a628132fea5b992ee3be,"Fix playback of DASH/VP9/SegmentList DASH content

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154077149"
ojw28,2017-04-24 13:51:42,https://api.github.com/repos/google/ExoPlayer/git/commits/8e8a6a2994296bbe0f36ec040669698cebf4d216,8e8a6a2994296bbe0f36ec040669698cebf4d216,"Support efficient switching between SimpleExoPlayerView instances

Prior to this change, the only way to switch SimpleExoPlayerView
was to do:

oldView.setPlayer(null);
newView.setPlayer(player);

This would cause the video renderer to have to transition through
oldSurface->noSurface->newSurface, which is inefficient (noSurface
requires platform decoders to be fully released).

After this change we support:

newView.setPlayer(player);
oldView.setPlayer(null);

This results in direct oldSurface->newSurface transitions, which are
seamless on Android M and above. The change also adds some robustness
against developers ending up with strange behavior as a result of
clearing the player from a view in a different ordering than we expect
w.r.t. registering of other listeners.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154044976"
ojw28,2017-04-24 11:35:25,https://api.github.com/repos/google/ExoPlayer/git/commits/4c0b53905402e9c9b9826033b8f58e531c38225d,4c0b53905402e9c9b9826033b8f58e531c38225d,"Allow disabling hide on touch for SimpleExoPlayerView

Issue: #2501

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=154036726"
ojw28,2017-04-24 15:03:19,https://api.github.com/repos/google/ExoPlayer/git/commits/51de6e53ebf7188bd6e469165986283f6ef75b3d,51de6e53ebf7188bd6e469165986283f6ef75b3d,Clean up multiple DVB subtitles per PID support
ojw28,2017-04-24 14:31:38,https://api.github.com/repos/google/ExoPlayer/git/commits/68ff7e0f6f179c589fa305d0904d7edcc3b6a455,68ff7e0f6f179c589fa305d0904d7edcc3b6a455,Merge branch 'tresvecesseis-dev-v2-dvbsubs-leftovers' into dev-v2
ojw28,2017-04-24 14:31:19,https://api.github.com/repos/google/ExoPlayer/git/commits/aa43556b796ee7d04c12990291d34950aa275266,aa43556b796ee7d04c12990291d34950aa275266,Merge branch 'dev-v2-dvbsubs-leftovers' of git://github.com/tresvecesseis/ExoPlayer into tresvecesseis-dev-v2-dvbsubs-leftovers
ojw28,2017-04-21 17:04:55,https://api.github.com/repos/google/ExoPlayer/git/commits/860eb26301ca5aea47f8a34a2394dc304fbf8096,860eb26301ca5aea47f8a34a2394dc304fbf8096,Misc cleanup for merged pull requests
ojw28,2017-04-21 16:57:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5381b4ec56b4105b750f73a15e4b87163f72f555,5381b4ec56b4105b750f73a15e4b87163f72f555,"Merge pull request #2683 from tylerjroach/dev-v2

Added mp3 support to FLV extractor"
ojw28,2017-04-21 16:56:49,https://api.github.com/repos/google/ExoPlayer/git/commits/4c096505d38b98a11d94c8df59b8191ac5ffa6a2,4c096505d38b98a11d94c8df59b8191ac5ffa6a2,"Merge pull request #2688 from tylerjroach/dev-v2-NALU-OOM-Fix

Fix potential OOM that can occur reading first NAL packet before seq header"
ojw28,2017-04-21 16:56:08,https://api.github.com/repos/google/ExoPlayer/git/commits/2e25eecf8414fbb9aebac7f2e7997735d851432f,2e25eecf8414fbb9aebac7f2e7997735d851432f,"Merge pull request #2708 from gpinigin/ffmpeg-host-platform

Simplify cross-compiling on Mac OS X host machine by copy-paste commands"
ojw28,2017-04-21 16:55:56,https://api.github.com/repos/google/ExoPlayer/git/commits/d8666ac03d99e22498434dec14c848b1765bfca4,d8666ac03d99e22498434dec14c848b1765bfca4,"Merge pull request #2715 from canatella/out-of-tree-build

Allow out of tree builds."
ojw28,2017-04-21 15:34:16,https://api.github.com/repos/google/ExoPlayer/git/commits/86ed73e74416f5609f27347c55e7fa61d4fde386,86ed73e74416f5609f27347c55e7fa61d4fde386,"Use method arguments instead of member variables

This is a no-op cleanup change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153830409"
ojw28,2017-04-21 14:57:37,https://api.github.com/repos/google/ExoPlayer/git/commits/1506b6d2b72ae51fd0215e5acddb42e2466266ef,1506b6d2b72ae51fd0215e5acddb42e2466266ef,"Pragmatic fix for Concat(source1, Looping(source2))

Issue: #2680

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153827243"
canatella,2017-04-21 09:32:00,https://api.github.com/repos/google/ExoPlayer/git/commits/41f4f24f539b8c647e7b8bb1f48bbad5383ef47a,41f4f24f539b8c647e7b8bb1f48bbad5383ef47a,"Allow out of tree builds.

Before modularisation of the code, it was possible to do an out of tree build
giving an -PbuildDir=someDir argument to gradle. With the modularisation, it's
broken as using -PbuildDir=someDir will force the same directory for each
projects, which breaks the gradle build system.

This commit adds a new externalBuildDir project property to allow out of tree
builds again. When set, it updates the buildDir property for each project to
point to ${externalBuildDir}/${project.name}. That way, the build artifacts are
written in the out of tree directory in a project specific folder.

To do an out of tree build, use

    gradle -PexternalBuildDir=someDir ...

It supports absolute and relative path. Relative path are interpreted against
the ExoPlayer root directory."
tresvecesseis,2017-04-20 19:32:59,https://api.github.com/repos/google/ExoPlayer/git/commits/3b7f47551c72a690e83e19042c7fa2002fd4390d,3b7f47551c72a690e83e19042c7fa2002fd4390d,Add support for multiple subtitle tracks per PID and subtitle type identification
tonihei,2017-04-18 16:28:03,https://api.github.com/repos/google/ExoPlayer/git/commits/da1b55ed4c2621f8a4ec49cf35a0a9f435188a70,da1b55ed4c2621f8a4ec49cf35a0a9f435188a70,"NullPointerException in CronetDataSource constructor

When calling CronetDataSourceFactory.createDataSourceInteral, a null pointer
is passed as clock to the CronetDataSource constructor which in turn throws a
NullPointerException. Can be prevented by using other constructor without
clock parameter.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153470874"
ojw28,2017-04-18 14:43:56,https://api.github.com/repos/google/ExoPlayer/git/commits/ecb62cccd50d891338253faf768d400df0ecfa66,ecb62cccd50d891338253faf768d400df0ecfa66,"Delete broken PriorityHandlerThread class

This class is unnecessary; you can simply pass a thread
priority to HandlerThread's own constructor. It's also
broken, since HandlerThread.run() immediately overrides
the priority being set!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153461225"
ojw28,2017-04-18 13:12:08,https://api.github.com/repos/google/ExoPlayer/git/commits/3c49044fb43060b28afe3da3d89544cabd28750a,3c49044fb43060b28afe3da3d89544cabd28750a,"Updates for ExoPlayer modularization

- Update relevant documentation
- Use individual modules for the demo app. Given it's
  preferable to use them over the full library, and that
  many people probably use the demo app as a starting
  point, we should set the right example even though we
  currently need to include all of them.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153454898"
ojw28,2017-04-18 12:56:43,https://api.github.com/repos/google/ExoPlayer/git/commits/8be85d4d2fa1e35281abf7bce2108719b3d72d21,8be85d4d2fa1e35281abf7bce2108719b3d72d21,"Consolidate version codes in root gradle file

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153453768"
erdemguven,2017-04-18 10:46:46,https://api.github.com/repos/google/ExoPlayer/git/commits/42e4100c0511b8dbd405f143e0d8aca84e2ea50b,42e4100c0511b8dbd405f143e0d8aca84e2ea50b,"Add DashDownloaderService which downloads DASH streams at the background

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153446615"
andrewlewis,2017-04-18 10:22:42,https://api.github.com/repos/google/ExoPlayer/git/commits/e87e2318d8cad794b0342a8e80217c9b3047ddf7,e87e2318d8cad794b0342a8e80217c9b3047ddf7,"Fully reset AudioProcessors on releasing AudioTrack

Issue: #2675

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153445372"
andrewlewis,2017-04-13 17:53:02,https://api.github.com/repos/google/ExoPlayer/git/commits/835839456ff7792afb6d7a768914696993eecf80,835839456ff7792afb6d7a768914696993eecf80,"Apply playback parameters when uninitialized

If AudioTrack.setPlaybackParameters was called before initialization (for
example, when an audio renderer is enabled) the parameters would actually be
dropped, because configure calls reset, which didn't apply draining playback
parameters if the track was not initialized. It would then overwrite the
draining parameters with the current parameters.

Set the playback parameters directly (without draining) for uninitialized tracks
so that the call to setPlaybackParameters in configure is a no-op.

Also, reset the stored channel count and sample rate when the audio processor
is released so that configure returns true when it is next used, which makes
sure that it gets flushed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153078759"
tonihei,2017-04-13 15:01:20,https://api.github.com/repos/google/ExoPlayer/git/commits/579d57b445400a6c32d2db31f2b315c494f10769,579d57b445400a6c32d2db31f2b315c494f10769,"Less memory allocations for repeated calls to SubtitleView.draw()

The draw method checks if all inputs are the same as in the previous call.
The options to strip the subtitle of its styles were applied each time,
in order to check if the final CharSequence is still the same.

This additional computation (and memory allocations) can be prevented by
checking if the original CharSequence (including all styles) and the
flags to remove those styles are the same. The actual style removal is now
part of setupTextlayout().

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=153061064"
ojw28,2017-04-12 15:06:31,https://api.github.com/repos/google/ExoPlayer/git/commits/12433ad146693b3d0816a1f9bd88437196bb0c73,12433ad146693b3d0816a1f9bd88437196bb0c73,"Support intercepting setPlayWhenReady calls

Issue: #2454

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152938743"
tonihei,2017-04-12 13:11:27,https://api.github.com/repos/google/ExoPlayer/git/commits/0a7011b3904abb2cb8d4d8834d1086da45b8d687,0a7011b3904abb2cb8d4d8834d1086da45b8d687,"Support default style in Tx3g decoder.

The track initialization data of Tx3g includes default style values for
font styles, colour, and font family. Additionally the decoder now supports
vertical subtitle placements other than the Tx3g default of 85% video height.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152930057"
erdemguven,2017-04-11 15:30:22,https://api.github.com/repos/google/ExoPlayer/git/commits/5a6a1af4412c3c48ac05a5498a2b1b53a29b1e0c,5a6a1af4412c3c48ac05a5498a2b1b53a29b1e0c,"Add DashDownloaderService which downloads DASH streams at the background

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152815185"
ojw28,2017-04-11 14:36:03,https://api.github.com/repos/google/ExoPlayer/git/commits/85adecf948a7c30c149e2cf0de8267c30c73f8d4,85adecf948a7c30c149e2cf0de8267c30c73f8d4,"Remove reflection + make it easy to set extractor flags

The idea of using reflection was so that a developer could
delete a package they didn't want and have everything else
still compile. However, a developer doing this is likely
building from source, in which case editing the factories
too is pretty trivial.

Removing the reflection makes specifying extractor flags
via the default factory easy, and removes the need for
special proguard config.

Issue: #2657

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152810423"
tonihei,2017-04-11 10:35:33,https://api.github.com/repos/google/ExoPlayer/git/commits/1dc8bb5bb17f1a627546eb7e8b4af8fb0cf31697,1dc8bb5bb17f1a627546eb7e8b4af8fb0cf31697,"Support 'styl' in Tx3g decoder.

Extended Tx3gDecoder to read additional information after subtitle text.
Currently parses font face, font size, and foreground colour.

Font identifier and other information provided in subtitle sample description
not yet supported.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152793774"
tylerjroach,2017-04-18 13:32:40,https://api.github.com/repos/google/ExoPlayer/git/commits/3b4d981891ca23b16a9d46666ef1b84256456d4a,3b4d981891ca23b16a9d46666ef1b84256456d4a,"If hasOutputFormat is true, nalUnitLengthFieldLengthDiff will never be 0"
rkrishnan2012,2017-04-18 02:07:33,https://api.github.com/repos/google/ExoPlayer/git/commits/329b8910cac6684ea4f67327fe434b182bff5e30,329b8910cac6684ea4f67327fe434b182bff5e30,Remove unnecessary check. sampleRateIndex is masked with 0x03 so it is constrained to be between 0 and 3.
rkrishnan2012,2017-04-14 16:11:04,https://api.github.com/repos/google/ExoPlayer/git/commits/896f63a3c38f92b34c0df0fb6eb9379eb83580e8,896f63a3c38f92b34c0df0fb6eb9379eb83580e8,Fixes OOM that can occur from reading first NAL packet before sequence header
gpinigin,2017-04-14 07:23:23,https://api.github.com/repos/google/ExoPlayer/git/commits/d27d6426c472ad296a45b5217024ab8f48833cc7,d27d6426c472ad296a45b5217024ab8f48833cc7,Simplify cross-compiling on Mac OS X host machine by copy-paste commands
tylerjroach,2017-04-13 18:56:22,https://api.github.com/repos/google/ExoPlayer/git/commits/59c44af4cb391a7bfd223f36b357cf74274fbd9d,59c44af4cb391a7bfd223f36b357cf74274fbd9d,Added mp3 support to FLV extractor
AquilesCanta,2017-04-10 18:06:32,https://api.github.com/repos/google/ExoPlayer/git/commits/f36500c20079dd965e4946ada18d936233ef0857,f36500c20079dd965e4946ada18d936233ef0857,"Add support for audio adaptation

When no video tracks or renderers are present, attempt audio adaptation.

Issue:#1975

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152708422"
AquilesCanta,2017-04-10 18:06:06,https://api.github.com/repos/google/ExoPlayer/git/commits/2a4df60b0167a9a4ea42afeaaf123dc7903600ea,2a4df60b0167a9a4ea42afeaaf123dc7903600ea,"Add pattern information to ExoPlayer's CryptoInfo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152708351"
ojw28,2017-04-10 16:41:54,https://api.github.com/repos/google/ExoPlayer/git/commits/0aee235e0aa2a9733ec22b77085961751bdc3b30,0aee235e0aa2a9733ec22b77085961751bdc3b30,"Make ID3 parser more robust (again)

I've also removed unnecessary ""empty"" cases, since to add them
everywhere would bloat the code quite a lot. Note that
new String(new byte[0], 0, 0, encoding) is valid and will produce
and empty string.

Issue: #2663

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152697288"
AquilesCanta,2017-04-10 12:05:22,https://api.github.com/repos/google/ExoPlayer/git/commits/c185963355d619b33579748f4bfed65b7dbeec87,c185963355d619b33579748f4bfed65b7dbeec87,"Add IntDef to reader internal state and default branch

Adding the default branch prevents linting warnings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152675789"
AquilesCanta,2017-04-10 11:13:12,https://api.github.com/repos/google/ExoPlayer/git/commits/8da2e2c8d535db53a527fc8d6e16f6c51b684aee,8da2e2c8d535db53a527fc8d6e16f6c51b684aee,"Track format changes in (E-)AC-3 syncframes

This allows propagating format changes to the track output.

Issue:#2552

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152672983"
andrewlewis,2017-04-10 09:17:35,https://api.github.com/repos/google/ExoPlayer/git/commits/147020f81610bb59088be5970ba44424aab92f45,147020f81610bb59088be5970ba44424aab92f45,"Hide player controls when an ad is playing

Also fix an issue where ad timelines with unknown ad period durations
would not be shown in multi-window mode. (The time bar doesn't use the
duration of ad periods, but shows a fix-size indicator instead.)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152666055"
andrewlewis,2017-04-07 14:05:27,https://api.github.com/repos/google/ExoPlayer/git/commits/d8c71df255352b45c4a0354b0830f3d75ac890cc,d8c71df255352b45c4a0354b0830f3d75ac890cc,"On re-preparation, suppress source info refresh until ack'ed

ExoPlayerImpl.prepare() replaces the timeline with an empty timeline. After this
happens, MSG_SOURCE_INFO_REFRESHED could be handled on the main thread and
could relate to the old source, so the player could expose a stale timeline.

Count pending prepares in ExoPlayerImpl so that source info refreshes can be
suppressed until preparation actually completes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152496255"
ojw28,2017-04-07 13:38:09,https://api.github.com/repos/google/ExoPlayer/git/commits/cf4358b8fa6f843997ba67ad2a40741a66b21bd6,cf4358b8fa6f843997ba67ad2a40741a66b21bd6,"Fix VP9 extension surface attach/detach + make it seamless

Issue: #2582

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152494408"
andrewlewis,2017-04-07 13:00:16,https://api.github.com/repos/google/ExoPlayer/git/commits/4b948774767305499fcc4a95e213e02752de1149,4b948774767305499fcc4a95e213e02752de1149,"Fix DefaultTimeBar vertical positioning in the demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152492104"
tonihei,2017-04-07 10:38:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ac0a4353dacd5deff660dbba10c0a63e354fe29b,ac0a4353dacd5deff660dbba10c0a63e354fe29b,"SubtitleView - New method setApplyEmbeddedFontSizes

When option is set to false, SubtitlePainter strips all absolute
and relative font size spans from the cue text.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152484724"
ojw28,2017-04-06 18:05:59,https://api.github.com/repos/google/ExoPlayer/git/commits/156bc52c8f73154bd847c352acb9227324ff7301,156bc52c8f73154bd847c352acb9227324ff7301,"Clean up DVB support

- Removed the PES_STRIPPED flag. It's unnecessary. We can strip
  PES in the TS extractor instead.
- Made nearly all of the object classes in DvbParser immutable.
  Else it's non-obvious that none of this state can be mutated.
- Made a a lot of the methods in DvbParser static for the same
  reason.
- Removed unnecessary null checks, code that was never executed,
  unused fields etc.
- Add proper flushing of DvbParser, to prevent corrupt output
  following a seek."
ojw28,2017-04-06 18:03:06,https://api.github.com/repos/google/ExoPlayer/git/commits/8c05b5b168e46000d235074f0865943e4e5ecada,8c05b5b168e46000d235074f0865943e4e5ecada,Merge branch 'tresvecesseis-dev-v2-dvbsubs' into dev-v2
ojw28,2017-04-06 18:02:51,https://api.github.com/repos/google/ExoPlayer/git/commits/538e71c0902c22e199f9dc7eec965d7f08c9fcdf,538e71c0902c22e199f9dc7eec965d7f08c9fcdf,Merge branch 'dev-v2-dvbsubs' of git://github.com/tresvecesseis/ExoPlayer into tresvecesseis-dev-v2-dvbsubs
tonihei,2017-04-05 11:29:26,https://api.github.com/repos/google/ExoPlayer/git/commits/6caa3e795f527328ef873c344399241c861f0cfb,6caa3e795f527328ef873c344399241c861f0cfb,"Demo app repeatedly shows ""audio/video not playable"" toast

Solved by adding saving reference to previous TrackGroup. Toast only displayed
after TrackGroup changed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152242954"
andrewlewis,2017-04-04 16:34:45,https://api.github.com/repos/google/ExoPlayer/git/commits/9bbc6d107188e4cb4b425933296d2e5a866fc71e,9bbc6d107188e4cb4b425933296d2e5a866fc71e,"Clean up FFmpeg extension instructions.

Also add instructions for building arm64-v8a and x86.

Issue: #2561

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152141270"
andrewlewis,2017-04-04 10:53:03,https://api.github.com/repos/google/ExoPlayer/git/commits/8208a75f0a840f2b666ed2c8f1d4029d582d0d4f,8208a75f0a840f2b666ed2c8f1d4029d582d0d4f,"Improve multi-window playback controls behavior.

Only enable multi-window mode when the duration of every period in the timeline
is known. Also, remove the warning logged when there are too many windows as it
doesn't add much.

The player's current period index was not masked while there were
unacknowledged seeks. This led to the displayed position jumping, between when
seekTo was called (after which the position would be masked but not the period
index) and the seek being acknowledged (at which point the time bar's position
would jump back to the seek position, due to the period index being resolved).
Mask the period index, like the window index, to fix this behavior.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152116040"
andrewlewis,2017-04-04 08:31:33,https://api.github.com/repos/google/ExoPlayer/git/commits/6a7db4b1ec4bf4864197bf5e9cabb0b744abebba,6a7db4b1ec4bf4864197bf5e9cabb0b744abebba,"Remove unused variable and parameter.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152107538"
erdemguven,2017-04-03 14:03:38,https://api.github.com/repos/google/ExoPlayer/git/commits/dd2914f5809bcfa519b64c19668f6583c13e8b39,dd2914f5809bcfa519b64c19668f6583c13e8b39,"Generalize manifest parser parameters in DASH and SmoothStreaming MediaSources

This allows custom parsers to be used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152005477"
andrewlewis,2017-04-03 13:35:56,https://api.github.com/repos/google/ExoPlayer/git/commits/107e0ebc467612d216bb8b46f66b352ffd6bb254,107e0ebc467612d216bb8b46f66b352ffd6bb254,"Fix scrubbing in timeline with too many windows.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=152003529"
ojw28,2017-04-03 11:06:46,https://api.github.com/repos/google/ExoPlayer/git/commits/5ee122cac88b2340daf9e86d73642c038e42556e,5ee122cac88b2340daf9e86d73642c038e42556e,"Add VERSION_SLASHY to ExoPlayerLibraryInfo

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151994281"
tresvecesseis,2017-04-04 13:04:47,https://api.github.com/repos/google/ExoPlayer/git/commits/38779de22593e3acf40ab6f7b4906021a59a0804,38779de22593e3acf40ab6f7b4906021a59a0804,Add support for multiple subtitle tracks per PID and for naming hearing impaired subtitles
ojw28,2017-03-31 18:38:41,https://api.github.com/repos/google/ExoPlayer/git/commits/757999758b7f77e6d3553d6b50e7ca87215355c5,757999758b7f77e6d3553d6b50e7ca87215355c5,Cleanup for merged pull requests
ojw28,2017-03-31 18:32:32,https://api.github.com/repos/google/ExoPlayer/git/commits/b127e162b6a1713ae43a8f77bf2448ead9514681,b127e162b6a1713ae43a8f77bf2448ead9514681,"Merge pull request #2329 from supercairos/dev-v2

Opus: use fixed max size in Opus decoding"
ojw28,2017-03-31 18:32:17,https://api.github.com/repos/google/ExoPlayer/git/commits/c3fa6d894336424e9e88474b43ca3a9f22609472,c3fa6d894336424e9e88474b43ca3a9f22609472,"Merge pull request #2612 from dessatel/dev-v2

Disables codecIsAdaptive for Odroid-XU4"
ojw28,2017-03-31 18:25:57,https://api.github.com/repos/google/ExoPlayer/git/commits/9a06b77b8a454db4950bac7a20b6fd12190b2721,9a06b77b8a454db4950bac7a20b6fd12190b2721,Delete stray test
ojw28,2017-03-31 17:49:09,https://api.github.com/repos/google/ExoPlayer/git/commits/8e7679082380897af3eade77242cffbafe39995c,8e7679082380897af3eade77242cffbafe39995c,"Remove deprecated readSource method

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151840862"
erdemguven,2017-03-31 13:48:40,https://api.github.com/repos/google/ExoPlayer/git/commits/64188748f436283766369bf9dfaead5eefebc1e2,64188748f436283766369bf9dfaead5eefebc1e2,"Move cache related generic methods from DashDownloader to CacheUtil

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151818564"
ojw28,2017-03-31 13:18:13,https://api.github.com/repos/google/ExoPlayer/git/commits/77e6d75bddfa29e812eba4905e7535b03146da0c,77e6d75bddfa29e812eba4905e7535b03146da0c,"Fix FLV parser to skip metadata we're not interested in

Issue: #2634

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151816597"
andrewlewis,2017-03-31 08:26:19,https://api.github.com/repos/google/ExoPlayer/git/commits/f7fff0d5835b42f6d6db7e46c7b1e546f84f545a,f7fff0d5835b42f6d6db7e46c7b1e546f84f545a,"Apply parameter adjustments with resetting.

Start draining the audio processors when the playback parameters change,
and when draining completes use the written frame count and next input
buffer presentation timestamp as an offset for applying the new playback
speed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151800074"
erdemguven,2017-03-30 15:44:19,https://api.github.com/repos/google/ExoPlayer/git/commits/a473e7300c3fb678763f5ac91f1b1d9466f3e468,a473e7300c3fb678763f5ac91f1b1d9466f3e468,"Move utility methods to DemoUtil from TrackSelectionHelper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151706338"
ojw28,2017-03-30 13:47:35,https://api.github.com/repos/google/ExoPlayer/git/commits/cc1a8f40341703db077329b2d1803401a278108c,cc1a8f40341703db077329b2d1803401a278108c,"Make playlist samples a little more interesting

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151696298"
ojw28,2017-03-29 19:11:57,https://api.github.com/repos/google/ExoPlayer/git/commits/035fab225da7570f320d0fb7f93b46532c072485,035fab225da7570f320d0fb7f93b46532c072485,"Rename skipToKeyframeBefore -> skipData and allow skipping to EOS

This change also ensures that format changes are read whilst the
renderer is enabled but without a codec. This is necessary to
ensure the drm session is updated (or replaced).

Updating the format is also needed so that the up-to-date format is
used in the case that the codec is initialized later due to the
surface being set. Previously, if an ABR change occurred between
the format being read and the surface being attached, we would
instantiate the codec and then immediately have to reconfigure it
when as a result of reading the up-to-date format. For a non-adaptive
codec this resulted in the codec being immediately released and
instantiated again!

Issue: #2582

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151608096"
ojw28,2017-03-29 12:08:02,https://api.github.com/repos/google/ExoPlayer/git/commits/9bc20d23a89c073c9d1052fd382b6bbb5a419c8f,9bc20d23a89c073c9d1052fd382b6bbb5a419c8f,"Print when frame is rendered in EventLogger + tidying

This is the boring part of a larger change that fixes
how video renderers behave when surfaces are attached and
detached whilst they're enabled or started.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151563031"
erdemguven,2017-03-29 09:41:19,https://api.github.com/repos/google/ExoPlayer/git/commits/68b8a5e54201221cb765e57e41585c855d08550a,68b8a5e54201221cb765e57e41585c855d08550a,"Downgrade jacoco to 0.7.4.201502262128 as a workaround for 'stuck in endless loop' issue

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151554130"
erdemguven,2017-03-28 16:06:21,https://api.github.com/repos/google/ExoPlayer/git/commits/103c3b631b1e8cba0b6d9d5fc959c73c5f66de22,103c3b631b1e8cba0b6d9d5fc959c73c5f66de22,"Add DashDownloader helper class to download dash streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151456161"
erdemguven,2017-03-28 14:47:17,https://api.github.com/repos/google/ExoPlayer/git/commits/2f9e082fe13226af043330b22fa2f9ae1fc3ac63,2f9e082fe13226af043330b22fa2f9ae1fc3ac63,"Enable gradle test code coverage for the library modules that aren't affected by 'stuck in endless loop' issue

'library-core' is still affected by https://code.google.com/p/android/issues/detail?id=226070

Code coverage report can be generated for the rest of the modules by:
./gradlew :[module name]:createDebugCoverageReport
Report is generated under:
[module folder]/buildout/reports/coverage/debug

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151448536"
ojw28,2017-03-28 12:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/e7a4c28ddeb6649745823a385cd0ee7cb208f19c,e7a4c28ddeb6649745823a385cd0ee7cb208f19c,"Fix missing NonNull annotations for overriding methods

If the super method has the annotation on an argument, then
the overriding method should have it too.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151440313"
andrewlewis,2017-03-28 10:27:32,https://api.github.com/repos/google/ExoPlayer/git/commits/1dcfae452a51ba84d50649d9717d0bb4d75039b4,1dcfae452a51ba84d50649d9717d0bb4d75039b4,"Avoid input/output copies in SonicAudioProcessor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151431376"
andrewlewis,2017-03-28 07:09:10,https://api.github.com/repos/google/ExoPlayer/git/commits/422c2d0ab7f5edb90aa2dba29df5a2d3fc71dd6f,422c2d0ab7f5edb90aa2dba29df5a2d3fc71dd6f,"Support escaped AAC AOTs.

Issue: #2514

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151418949"
ojw28,2017-03-27 18:44:32,https://api.github.com/repos/google/ExoPlayer/git/commits/21eecb679d396370ec41c5acf1d47d07c6a1a459,21eecb679d396370ec41c5acf1d47d07c6a1a459,"Make ID3 parsing more robust

- Validate frames for majorVersion 2 and 3 as well as 4
- Don't throw if top bit of frameSize is non-zero.

Issue: #2604

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151348836"
erdemguven,2017-03-27 16:42:37,https://api.github.com/repos/google/ExoPlayer/git/commits/1888bd291b21778b389e90ab701bc1e5f048cd2b,1888bd291b21778b389e90ab701bc1e5f048cd2b,"Make FakeDataSource FakeDataSet and FakeData structures accessible publicly for comparision in tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151331819"
ojw28,2017-03-27 13:52:34,https://api.github.com/repos/google/ExoPlayer/git/commits/5ebb3d44812322ee9788feec5ebf5a49b51cccd5,5ebb3d44812322ee9788feec5ebf5a49b51cccd5,"Correct allowTimeBeyondBuffer values for skipToKeyframeBefore calls

The only case where we should pass false is if we want to know
whether the passed time is within the buffered media. This is
relevant within seekTo implementations only.

This is related to (but does not fix) issue #2582

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151315676"
andrewlewis,2017-03-27 11:39:54,https://api.github.com/repos/google/ExoPlayer/git/commits/abcd177e8a940f5fe89288cd720abc7744e9416a,abcd177e8a940f5fe89288cd720abc7744e9416a,"Remove some unused Sonic functionality.

Also move it closer to the ExoPlayer code style.

Note: This change is intended to be purely cosmetic.

Issue: #26

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151307575"
andrewlewis,2017-03-24 12:23:02,https://api.github.com/repos/google/ExoPlayer/git/commits/9d20a8d41c0cc6cd01b20bd72f3bbfcf11e49cae,9d20a8d41c0cc6cd01b20bd72f3bbfcf11e49cae,"Add a custom time bar view.

Also add an isAd flag to Timeline.Period so that periods can be declared as
containing ads. The times of these periods are indicated using ad markers in
the new TimeBar.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151116208"
dessatel,2017-03-31 02:53:19,https://api.github.com/repos/google/ExoPlayer/git/commits/d84733c9cf73b9a2ab39cbef660fe6801c973045,d84733c9cf73b9a2ab39cbef660fe6801c973045,Disables Adaptive workaround for Odroid-XU4 up to SDK 19 in Samsung's Exynos AVC and AVC secure decoders
dessatel,2017-03-31 02:52:15,https://api.github.com/repos/google/ExoPlayer/git/commits/96f56716ce11115fd01fce14512ec4e67cdf957a,96f56716ce11115fd01fce14512ec4e67cdf957a,Disables Adaptive workaround for Odroid-XU4 up to SDK 19 in Samsung's Exynos AVC and AVC secure decoders
dessatel,2017-03-31 02:50:09,https://api.github.com/repos/google/ExoPlayer/git/commits/42f3dcf0da5ad2b3e352346647d630ac4f8684c6,42f3dcf0da5ad2b3e352346647d630ac4f8684c6,Disables Adaptive workaround for Odroid-XU4 up to SDK 19 in Samsung's Exynos AVC and AVC secure decoders
tresvecesseis,2017-03-30 23:48:29,https://api.github.com/repos/google/ExoPlayer/git/commits/d34d3f76be7cb4b7423b61cf03d85f2ad1df9dd4,d34d3f76be7cb4b7423b61cf03d85f2ad1df9dd4,Pull request review fixes
tresvecesseis,2017-03-28 22:14:32,https://api.github.com/repos/google/ExoPlayer/git/commits/6c9656dc9a42f3977a9bf013d722810806114ee5,6c9656dc9a42f3977a9bf013d722810806114ee5,some cleaning and class/method documentation
dessatel,2017-03-27 11:10:53,https://api.github.com/repos/google/ExoPlayer/git/commits/9aee406c8ef2755f23b7dc9aa12ad21f6c22ae70,9aee406c8ef2755f23b7dc9aa12ad21f6c22ae70,"Disables codecIsAdaptive for Odroid-XU4, comment updated"
dessatel,2017-03-27 10:58:04,https://api.github.com/repos/google/ExoPlayer/git/commits/c40b8156e9946fe95f321a33859f4932292f501f,c40b8156e9946fe95f321a33859f4932292f501f,Disables codecIsAdaptive for Odroid-XU4
tresvecesseis,2017-03-23 16:44:33,https://api.github.com/repos/google/ExoPlayer/git/commits/7e0ea5a65b818a2985c05f1fd9c86acfe22565c4,7e0ea5a65b818a2985c05f1fd9c86acfe22565c4,"Optimization of memory and draw operations, and proper treatment of filled regions (as far as we can infer from the specs)"
ojw28,2017-03-23 18:17:09,https://api.github.com/repos/google/ExoPlayer/git/commits/f4c33daf77fadd207a8e195242619fbaa06ac1c5,f4c33daf77fadd207a8e195242619fbaa06ac1c5,"Bump version for bugfix release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151028565"
andrewlewis,2017-03-23 18:08:11,https://api.github.com/repos/google/ExoPlayer/git/commits/0e6ef0edf69862e6c2ad4d4824b65bd331aa6145,0e6ef0edf69862e6c2ad4d4824b65bd331aa6145,"Add Sonic library for audio speed adjustment.

Add methods to ExoPlayer for setting/getting the playback speed, using
SonicAudioProcessor.

Remove PlaybackParams support, as the AudioTrack timestamp does not work
reliably on Marshmallow. The platform also uses Sonic and performance
should be comparable between the Java and native versions on recent Android
runtimes.

In a later change, SonicAudioProcessor will be made public so it can
be used in conjunction with other processors.

Issue: #26

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151027121"
ojw28,2017-03-23 16:38:01,https://api.github.com/repos/google/ExoPlayer/git/commits/6faf566344622a437dc24118b8682547e66f0f41,6faf566344622a437dc24118b8682547e66f0f41,"Fix NullPointerException enabling WebVtt subtitles in DASH

Issue: #2596

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151013802"
erdemguven,2017-02-07 08:32:45,https://api.github.com/repos/google/ExoPlayer/git/commits/14f1b33fcf0f40df4614571591fb9ea19b5754c9,14f1b33fcf0f40df4614571591fb9ea19b5754c9,"Make CacheDataSource.open() throw exception if resolved range doesn't cover position

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151006826"
ojw28,2017-03-23 15:03:58,https://api.github.com/repos/google/ExoPlayer/git/commits/7aff624477851485cddb9bb95fbb877355dc6ac4,7aff624477851485cddb9bb95fbb877355dc6ac4,"Fix typo on CEA-708 decoder

Issue: #2595

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151004198"
ojw28,2017-03-23 15:01:41,https://api.github.com/repos/google/ExoPlayer/git/commits/255523b4323b94b2e9fa0873f80b2f5873192cc5,255523b4323b94b2e9fa0873f80b2f5873192cc5,"Call DrmSession methods on the session not the manager

The way it was before worked, but it's not really documented
that DrmSession methods implemented by DefaultDrmSessionManager
can be called after the session has been released, and it feels
wrong to do this.

At some point we should probably consider moving the DrmSession
part of DefaultDrmSessionManager into an inner class, to force
usage in the ""normal"" way.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=151003855"
ojw28,2017-03-23 18:07:21,https://api.github.com/repos/google/ExoPlayer/git/commits/65770131994368c7cf04f62ee27266ed5afb3349,65770131994368c7cf04f62ee27266ed5afb3349,"Merge pull request #2598 from google/dev-v2-r2.3.1

r2.3.1"
ojw28,2017-03-23 17:59:20,https://api.github.com/repos/google/ExoPlayer/git/commits/6503f016e9b54b6818f04d364727f5d6d3407443,6503f016e9b54b6818f04d364727f5d6d3407443,Update release notes + bump versions
ojw28,2017-03-23 17:46:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c96f18f5ce4264752c39482a4b2a3b996663fc22,c96f18f5ce4264752c39482a4b2a3b996663fc22,"Fix skipping to keyframe to use correct position

Issue: #2575"
ojw28,2017-03-23 17:46:12,https://api.github.com/repos/google/ExoPlayer/git/commits/23b5921b828be728a345bcf4088edcd736f52ade,23b5921b828be728a345bcf4088edcd736f52ade,"Fix typo on CEA-708 decoder

Issue: #2595"
ojw28,2017-03-23 17:44:47,https://api.github.com/repos/google/ExoPlayer/git/commits/646f6a74c94e4ffb228ea018b61fff1eeb59e966,646f6a74c94e4ffb228ea018b61fff1eeb59e966,"Fix NullPointerException enabling WebVtt subtitles in DASH

Issue: #2596"
tresvecesseis,2017-03-23 07:55:20,https://api.github.com/repos/google/ExoPlayer/git/commits/0c49b81b48c83c906d009c1165fbe6b25e66f693,0c49b81b48c83c906d009c1165fbe6b25e66f693,"add DVB subtitle support, based in the TVHeadend spec, to the MatroskaExtractor"
tresvecesseis,2017-03-23 07:54:07,https://api.github.com/repos/google/ExoPlayer/git/commits/937675d1dbeb8fcaf31f2e7c67fe576115c204cc,937675d1dbeb8fcaf31f2e7c67fe576115c204cc,Add DVB sustitles support to the TsExtractor
tresvecesseis,2017-03-23 07:51:41,https://api.github.com/repos/google/ExoPlayer/git/commits/d8f61ad7e7090496a1d43e7a5cd31feb3abc478c,d8f61ad7e7090496a1d43e7a5cd31feb3abc478c,Add DVB subtitles support
ojw28,2017-03-22 20:05:33,https://api.github.com/repos/google/ExoPlayer/git/commits/42629701f84645448d9f4b1c171018fec1281394,42629701f84645448d9f4b1c171018fec1281394,"Work around broken VP8 decoder on Note 2

Issue: #1355

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150916986"
erdemguven,2017-03-22 12:47:00,https://api.github.com/repos/google/ExoPlayer/git/commits/8f636991ad152bca610562b2374e1064ebfbc34b,8f636991ad152bca610562b2374e1064ebfbc34b,"Add DummyDataSource

A dummy DataSource which provides no data.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150868950"
ojw28,2017-03-22 11:48:09,https://api.github.com/repos/google/ExoPlayer/git/commits/382ba7ecf0907d07765e3c14d45692845a6e7621,382ba7ecf0907d07765e3c14d45692845a6e7621,"Generate combined Javadoc

Notes:
- Now only generating a single module Javadoc task for the
  release variant.
- Combined Javadoc now includes extensions. VP9 is excluded
  for now since it's failing for an unknown reason.

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150865589"
ojw28,2017-03-22 11:21:16,https://api.github.com/repos/google/ExoPlayer/git/commits/88e74ef381d109b0ac0ba4193335704cf59d8f01,88e74ef381d109b0ac0ba4193335704cf59d8f01,"Generate Javadoc for each module individually

Notes:
- The VP9 one is failing claiming that the util package
  doesn't exist and that LibraryLoader cannot be found.
  Unsure why, since it appears to be setup exactly like
  other extensions (e.g. Opus) that does work.
- @link across modules will not work when generating
  Javadoc for a single module. This is WAI. I subsequent
  change will add an aggregated Javadoc generator that
  will generate Javadoc for all modules together and
  apply cross module @link correctly.

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150864273"
ojw28,2017-03-21 16:34:35,https://api.github.com/repos/google/ExoPlayer/git/commits/7ce8125194bffbc177008bdca2bfe2bc264961b6,7ce8125194bffbc177008bdca2bfe2bc264961b6,"Split DASH into a separate module

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150762237"
ojw28,2017-03-21 15:10:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b1a2ae1856d3637b3a852258e1828cc91eb808b6,b1a2ae1856d3637b3a852258e1828cc91eb808b6,"Remove DRM->DASH dependency in prep for DASH module split

Also renamed releaseResources->release to be consistent with the
rest of the library, and added some synchronization to ensure
correct usage.

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150753414"
erdemguven,2017-03-21 14:05:53,https://api.github.com/repos/google/ExoPlayer/git/commits/065d3dc5233f5291f56eee06d54c8ea3ccfe6f78,065d3dc5233f5291f56eee06d54c8ea3ccfe6f78,"Make FakeDataSource able to serve multiple fake files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150748155"
AquilesCanta,2017-03-21 11:52:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c32533cad8294c8f217340f796aaf226d0f58000,c32533cad8294c8f217340f796aaf226d0f58000,"Fixed the edit mode view for SimpleExoPlayerView

This CL makes SimpleExoPlayerView show a mock representation
when in the layout editor of AndroidStudio.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150739442"
andrewlewis,2017-03-21 10:01:16,https://api.github.com/repos/google/ExoPlayer/git/commits/f2e5c3b4c9677d902dd967de89bbb933129e7a56,f2e5c3b4c9677d902dd967de89bbb933129e7a56,"Fix imports.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150732864"
vigneshvg,2017-03-21 08:39:52,https://api.github.com/repos/google/ExoPlayer/git/commits/b6a1d0a55dc036d20aa67822b44e2955d73930ce,b6a1d0a55dc036d20aa67822b44e2955d73930ce,"extensions/vp9: Update filter & remove sort in libvpx.mk

Update the filter that selects %.asm.[sS] and remove the
""remove duplicates"" step in the android makefile.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150728021"
vigneshvg,2017-03-20 18:08:53,https://api.github.com/repos/google/ExoPlayer/git/commits/c8b9c7fe68588d72495ba01265c26d0a779b3c24,c8b9c7fe68588d72495ba01265c26d0a779b3c24,"extensions/vp9: Control symbol visibility with libvpx.ver

This change reduces the final .so size by ~9% for armv7/arm64.

Arch : Size_before : Size_after
armeabi-v7a : 300548 : 271876
arm64-v8a : 247632 : 223056

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150648668"
ojw28,2017-03-20 17:34:26,https://api.github.com/repos/google/ExoPlayer/git/commits/25a093b37c75ecd1853ede3570df6e3cbfac038e,25a093b37c75ecd1853ede3570df6e3cbfac038e,"Split HLS into a separate module

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150643456"
ojw28,2017-03-20 16:33:02,https://api.github.com/repos/google/ExoPlayer/git/commits/a9aca8dbf057a03f06292223f723c40b0f1fbded,a9aca8dbf057a03f06292223f723c40b0f1fbded,"Split SmoothStreaming into a separate module

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150634794"
ojw28,2017-03-20 14:56:36,https://api.github.com/repos/google/ExoPlayer/git/commits/58ac5720242e3893cecc66f476a862ba164da059,58ac5720242e3893cecc66f476a862ba164da059,"Tell Moe about new UI module + update external settings.gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150625313"
ojw28,2017-03-20 14:30:14,https://api.github.com/repos/google/ExoPlayer/git/commits/7b08e972e4de657b4b26cafe5bc6296403b36fbd,7b08e972e4de657b4b26cafe5bc6296403b36fbd,"Split UI components into separate module

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150623215"
ojw28,2017-03-20 14:20:39,https://api.github.com/repos/google/ExoPlayer/git/commits/de6e47f7e65fb4f7b59a14d3d934da119271d484,de6e47f7e65fb4f7b59a14d3d934da119271d484,"Fix skipping to keyframe to use correct position

Issue: #2575

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150622487"
ojw28,2017-03-20 10:56:53,https://api.github.com/repos/google/ExoPlayer/git/commits/f9767940cc982c8ce43609a13bd9e5cf17db4a80,f9767940cc982c8ce43609a13bd9e5cf17db4a80,"Fix misc issues

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150610549"
ojw28,2017-03-17 17:36:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ce55d1a712f686ba1749804302eca141d952a6dc,ce55d1a712f686ba1749804302eca141d952a6dc,"Modularize ExoPlayer steps 1 + 2.

1. Move entire library from v2/library/ to v2/library/core
2. Add v2/library/all that depends on v2/library/core

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150455693"
ojw28,2017-03-17 14:20:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f2de393d8395a42f3513b7a96fa76541f588d705,f2de393d8395a42f3513b7a96fa76541f588d705,"Correctly handle stream replacement in text renderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150436867"
ojw28,2017-03-17 21:00:45,https://api.github.com/repos/google/ExoPlayer/git/commits/569cec7fe81250db8a7aa49447c5b96ddd57d7a2,569cec7fe81250db8a7aa49447c5b96ddd57d7a2,Cleanup RELEASENOTES.md
ojw28,2017-03-17 20:55:45,https://api.github.com/repos/google/ExoPlayer/git/commits/2966ea71f050347152ca0f8a52e4186e5a5892f9,2966ea71f050347152ca0f8a52e4186e5a5892f9,Fix RELEASENOTES.md nesting.
ojw28,2017-03-17 20:53:09,https://api.github.com/repos/google/ExoPlayer/git/commits/3c447130a5aeb323fcf0c76816b02e2ae6777283,3c447130a5aeb323fcf0c76816b02e2ae6777283,Update RELEASENOTES.md
ojw28,2017-03-17 20:42:16,https://api.github.com/repos/google/ExoPlayer/git/commits/86230c451007534623c68ea9eedb6d15b8ef709a,86230c451007534623c68ea9eedb6d15b8ef709a,"Merge pull request #2570 from google/dev-v2

r2.3.0"
ojw28,2017-03-16 20:08:58,https://api.github.com/repos/google/ExoPlayer/git/commits/c8059e5969372113f3249455e32c85d2ee6fbf49,c8059e5969372113f3249455e32c85d2ee6fbf49,"Update release notes + bump versions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150358346"
ojw28,2017-03-16 12:53:58,https://api.github.com/repos/google/ExoPlayer/git/commits/b98de975f18712de850ac43d742b248699e95b16,b98de975f18712de850ac43d742b248699e95b16,"Make Util.inferContentType marginally smarter

Issue: #2513

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150310349"
erdemguven,2017-03-16 12:13:51,https://api.github.com/repos/google/ExoPlayer/git/commits/2fe478ad6a4034ce661a94b7166d981c6efddf3d,2fe478ad6a4034ce661a94b7166d981c6efddf3d,"Invert DashHostedTest and inner class Builder to make the design more natural

Builder class was renamed to DashTestRunner and DashHostedTest moved
into it as an inner class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150307988"
ojw28,2017-03-16 11:34:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9b0d24c909bc73f9410fa6f1a50064bf6f350548,9b0d24c909bc73f9410fa6f1a50064bf6f350548,"Fix stuck-buffering state when playing merged media

Also added a TODO to track clarifying SequenceableLoader
more accurately and auditing existing implementations.

Issue: #2396

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150305685"
AquilesCanta,2017-03-16 10:36:02,https://api.github.com/repos/google/ExoPlayer/git/commits/ce5c0c18f952caa19b863345252fd267804d7e83,ce5c0c18f952caa19b863345252fd267804d7e83,"Rename AdaptiveVideoTrackSelection to AdaptiveTrackSelection

This will allow us to use the same class for Audio adaptation.

Issue:#1975

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150302561"
AquilesCanta,2017-03-15 20:17:07,https://api.github.com/repos/google/ExoPlayer/git/commits/7c9b771ec890bfdfd76859e53a83311d2edc564e,7c9b771ec890bfdfd76859e53a83311d2edc564e,"Create HlsMediaSource.Manifest to hold playlist information

This allows the user to get the HlsMasterPlaylist through
Exoplayer.getCurrentManifest().

Issue:#2537

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150232455"
ojw28,2017-03-15 17:28:50,https://api.github.com/repos/google/ExoPlayer/git/commits/a6cea62c1b78d0fef48cdb73b8f41714cf43cd6e,a6cea62c1b78d0fef48cdb73b8f41714cf43cd6e,"Add gradle instructions to GVR readme + clean up FFMPEG readme

Note: Depending on the GVR extension via gradle wont work until
we actually push a release

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150208524"
vigneshvg,2017-03-15 17:28:49,https://api.github.com/repos/google/ExoPlayer/git/commits/ccc5e472b0a4c0e07cbf5760b017b9dd720e5d80,ccc5e472b0a4c0e07cbf5760b017b9dd720e5d80,"extensions/vp9: Fix open source build scripts

Fixes github issue #2339 [https://github.com/google/ExoPlayer/issues/2339]
Fixes github issue #2551 [https://github.com/google/ExoPlayer/issues/2551]

* Update the instructions to check out specific versions of libvpx and
  libyuv that are known to work with our build scripts.
* Forcing a particular version of libyuv because recent versions of
  libyuv are dependent on libjpeg (which isn't needed for the purpose
  of this extension).
* Going forward, let's keep generate_libvpx_android_configs.sh in sync
  with whatever version is specifed in the instructions in README.md
  (as of now it is v1.6.1).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150208517"
erdemguven,2017-03-15 15:47:48,https://api.github.com/repos/google/ExoPlayer/git/commits/76c9968211c704fa7b8811bbc1a4f8362f6cf32b,76c9968211c704fa7b8811bbc1a4f8362f6cf32b,"Add RepresentationKey and DashManifest copy method

RepresentationKey defines a representation location in a DashManifest.
DashManifest copy method creates a copy of the manifest which includes
only the representations pointed by the given RepresentationKeys.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150195990"
erdemguven,2017-03-15 14:49:51,https://api.github.com/repos/google/ExoPlayer/git/commits/f092c4446f5f2d2c81a904070ab773857e99fa88,f092c4446f5f2d2c81a904070ab773857e99fa88,"Move TestUtil.createTempFolder and TestUtil.recursiveDelete to Util class

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150190520"
ojw28,2017-03-15 13:47:35,https://api.github.com/repos/google/ExoPlayer/git/commits/d6db5066cda2872afe9b6c0bd6f2906b01a176ec,d6db5066cda2872afe9b6c0bd6f2906b01a176ec,"Improve publishing to Bintray

- Update bintray-release version
- Publish to exoplayer-test unless -PpublicRepo=true
- Publish GVR extension
- Minimize duplication with new publish.gradle

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150185740"
ojw28,2017-03-15 13:44:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a9617af29c2c760c8e439d390ef02f0b4e055a6b,a9617af29c2c760c8e439d390ef02f0b4e055a6b,"Use fast surface switching on API level 23+ when possible

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150185483"
AquilesCanta,2017-03-15 13:37:02,https://api.github.com/repos/google/ExoPlayer/git/commits/7c5f0b7d3b39ef2b1776e4bdb588289750580a31,7c5f0b7d3b39ef2b1776e4bdb588289750580a31,"Make Video track selections before others

This will allow us to make a single adaptive selection prioritizing
video selections.

Issue:#1975

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150185086"
ojw28,2017-03-15 13:32:47,https://api.github.com/repos/google/ExoPlayer/git/commits/db5f81ecfd9310adf4daf0875662be4dcc3f7652,db5f81ecfd9310adf4daf0875662be4dcc3f7652,"Allow disabling ID3 metadata parsing if not required

Issue: #2553

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150184824"
ojw28,2017-03-15 13:24:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d077e23daa730c8d5a85ce84fb301a41de439f1e,d077e23daa730c8d5a85ce84fb301a41de439f1e,"Improve DefaultExtractorInput's peek buffer sizing.

- Don't resize the peek buffer to be twice as large as a
  large amount!
- Trim the peek buffer, to allow large peek buffer allocations
  to be reclaimed.

Issue: #2553

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150184291"
ojw28,2017-03-14 17:12:28,https://api.github.com/repos/google/ExoPlayer/git/commits/70926057c5a5006b835f7c8921b649013cde2e43,70926057c5a5006b835f7c8921b649013cde2e43,"Fix some more incorrect playback test stream IDs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150080957"
ojw28,2017-03-14 16:51:13,https://api.github.com/repos/google/ExoPlayer/git/commits/8a411c310dfdaf37d03cd9ed612af6848175af46,8a411c310dfdaf37d03cd9ed612af6848175af46,"Suppress some lint errors

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150078703"
ojw28,2017-03-14 12:27:03,https://api.github.com/repos/google/ExoPlayer/git/commits/a26cb9cc3caf4556fdb6bf99848a109d53506367,a26cb9cc3caf4556fdb6bf99848a109d53506367,"No-op fix for playback tests

super.onQueueInputBuffer is no longer a no-op in all
configurations. It doesn't make any difference in practice
for these tests, but for completeness we should call up.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150056224"
AquilesCanta,2017-03-14 12:07:11,https://api.github.com/repos/google/ExoPlayer/git/commits/7c587c6b8290966eeb6893eaf98bc044bb545578,7c587c6b8290966eeb6893eaf98bc044bb545578,"Prevent playlist loading if refresh is already scheduled

This greatly reduces the amount of server requests issued by
the playlist tracker.

Issue:#2548

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150055046"
ojw28,2017-03-14 10:47:26,https://api.github.com/repos/google/ExoPlayer/git/commits/204537ed40e85134a1c5c91f0dd1e5453775043a,204537ed40e85134a1c5c91f0dd1e5453775043a,"Pre-modularization cleanup

- Use a variable for the (default) minSdkVersion. There will
  be more modules that need it, and it'll be easier to manage
  if it's in one place.

Issue: #2139

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=150050663"
ojw28,2017-03-13 21:48:32,https://api.github.com/repos/google/ExoPlayer/git/commits/4b1410bced49b8075d928f07a8b6ee62c54a86dd,4b1410bced49b8075d928f07a8b6ee62c54a86dd,"Simplify + Fix WV encrypted playback tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149993442"
ojw28,2017-03-13 16:25:44,https://api.github.com/repos/google/ExoPlayer/git/commits/139252c9d3921d26748aa1e04f9ef525eb3dc468,139252c9d3921d26748aa1e04f9ef525eb3dc468,Propagate defaultRequestProperties + make getDefaultRequestProperties final
ojw28,2017-03-13 15:21:11,https://api.github.com/repos/google/ExoPlayer/git/commits/3131074338568291e5142d88fdd76b4bbd3c94b5,3131074338568291e5142d88fdd76b4bbd3c94b5,"Upgrade dependencies

Issue: #2516

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149942409"
ojw28,2017-03-13 15:08:38,https://api.github.com/repos/google/ExoPlayer/git/commits/343a7302bd04d3bd99700188144937e74042bbb2,343a7302bd04d3bd99700188144937e74042bbb2,"Update gradle version

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149941369"
marcbaechinger,2017-03-10 19:38:51,https://api.github.com/repos/google/ExoPlayer/git/commits/aede0f894d4060379aa34308a7f8d18ba0050000,aede0f894d4060379aa34308a7f8d18ba0050000,"Propagate updates of default header fields of the HttpDataSource.BaseFactory to HttpDataSource instances.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149780233"
AquilesCanta,2017-03-10 17:19:54,https://api.github.com/repos/google/ExoPlayer/git/commits/952bde700b9c8f0a4181f727e165a1633515e72d,952bde700b9c8f0a4181f727e165a1633515e72d,"Ensure only timestamp adjustment masters set first sample timestamps

Without this, it is possible that a non timestamp master instances
the adjuster with its own chunk start time. When chunks are not
aligned, this breaks adjustment.

Issue:#2424

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149764488"
gauravmishra,2017-03-10 17:15:10,https://api.github.com/repos/google/ExoPlayer/git/commits/15aad266b6cab6c7ec8f69972d90f7ae1ec024fc,15aad266b6cab6c7ec8f69972d90f7ae1ec024fc,"Use separate Widevine license keys to package test audio for Exoplayer GTS.

Android doesn't support secure decoding for audio. Hence use Audio keys that always require L3 support only.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149764063"
ojw28,2017-03-13 10:00:35,https://api.github.com/repos/google/ExoPlayer/git/commits/6d61519421d8287001840a0825a43ca265836340,6d61519421d8287001840a0825a43ca265836340,"Merge pull request #2547 from LiveLike/program-date-time-regex

Support comma separators in ISO-8601 date/time format for milliseconds"
benwilber,2017-03-10 00:46:24,https://api.github.com/repos/google/ExoPlayer/git/commits/578b9545f0c03483db51d253b04af89a5dcb79e9,578b9545f0c03483db51d253b04af89a5dcb79e9,Support commas in ISO-8601 date/time format for millis
erdemguven,2017-03-10 13:54:25,https://api.github.com/repos/google/ExoPlayer/git/commits/f21cdcb9c5ea49c603f1ac3189604ff1cb0af1c7,f21cdcb9c5ea49c603f1ac3189604ff1cb0af1c7,"Allow null DataSink.Factory in CacheDataSourceFactory

CacheDataSource allows null DataSink. Do the same in CacheDataSourceFactory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149750696"
AquilesCanta,2017-03-10 13:32:52,https://api.github.com/repos/google/ExoPlayer/git/commits/cb0187959cd23b138d923aee106b3395163a72af,cb0187959cd23b138d923aee106b3395163a72af,"Fix NPE in HLS playback of non-muxed streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149749504"
cdrolle,2017-03-09 20:10:30,https://api.github.com/repos/google/ExoPlayer/git/commits/0cb9802e1bc16ec73bf63c0aacaad9bf6ef050b1,0cb9802e1bc16ec73bf63c0aacaad9bf6ef050b1,"Fixed CEA-708 issues

Caption characters weren't being assigned to the correct window and the lack of
pen location support was causing multiple lines (and words) to be concatenated.

As per the CEA-708-B specification, section 8.10.5, when we encounter a DefineWindow
command, we're also supposed to update the current window to the newly defined one.
We were not doing this previously, resulting in text that should have been in separate
windows being combined into one. Furthermore, some content uses the SetPenLocation
command to move the cursor down a line instead of appending a new line. As we don't
currently support SetPenLocation, this resulted in multiple lines (and words) being
concatenated together, potentially causing the text to extend past the edge of the
window/screen. This change implements a workaround (until SetPenLocation is properly
supported) for this issue in which setting the pen location to a new row will append
a new-line to that window.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149679613"
cdrolle,2017-03-09 19:18:15,https://api.github.com/repos/google/ExoPlayer/git/commits/b84c84cc765cd6b2d27e20330735b2d866d310b2,b84c84cc765cd6b2d27e20330735b2d866d310b2,"Fixed CEA-708 issue where cues weren't updated at the appropriate times

As per the CEA-708-B specification, section 8.10.4, cues don't necessarily
need either an ETX command or any of the C1 commands before being updated
with the latest buffered content. While those commands do indicate that the
cues should be updated immediately, the cues can also be updated after a
service block has been processed if it appended text to the buffer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149673162"
erdemguven,2017-03-08 16:57:26,https://api.github.com/repos/google/ExoPlayer/git/commits/b6773dba051e79f7791c80aff2396e8fa1886188,b6773dba051e79f7791c80aff2396e8fa1886188,"Add PriorityDataSourceFactory

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149543747"
AquilesCanta,2017-03-08 15:51:13,https://api.github.com/repos/google/ExoPlayer/git/commits/3be4451e13d604b9a036bd90e8fcefd77c62c5a8,3be4451e13d604b9a036bd90e8fcefd77c62c5a8,"Allow injection of DataSource's per type of data

This allows the client to define what data source is used for
media chunks, encryption chunks and playlists.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149537766"
erdemguven,2017-03-08 14:55:02,https://api.github.com/repos/google/ExoPlayer/git/commits/78e7c3c5104b146e7a8ff9ee68c5ea66dcb4287e,78e7c3c5104b146e7a8ff9ee68c5ea66dcb4287e,"Make CacheDataSourceFactory createDataSource return specific type

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149533820"
ojw28,2017-03-08 12:37:47,https://api.github.com/repos/google/ExoPlayer/git/commits/45c7fe9b00e0cc9068c245ba001dd67c420f12ab,45c7fe9b00e0cc9068c245ba001dd67c420f12ab,"Drain embedded track sample queues when not enabled.

I think it's likely we'll revert back to discarding media
in sync with the playback position for ExtractorMediaSource
and HlsMediaSource too, where the tracks are muxed with ones
we're requesting anyway.

Note: discardBuffer is named as it is because it'll also be
used to discard for enabled tracks soon, as a result of the
remaining TODO in ChunkSampleStream. For enabled tracks the
discard will also be conditional on the samples having been
consumed, obviously.

Issue: #2362
Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149525857"
ojw28,2017-03-08 12:09:05,https://api.github.com/repos/google/ExoPlayer/git/commits/09471defd72e7416f7560a926a335421f6378b40,09471defd72e7416f7560a926a335421f6378b40,"Enabled EMSG and CEA-608 embedded streams for DASH

Issue: #2362
Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149524412"
andrewlewis,2017-03-07 18:06:42,https://api.github.com/repos/google/ExoPlayer/git/commits/99e19a92af8641c24470a01031652f40eef80253,99e19a92af8641c24470a01031652f40eef80253,"Fix SampleStream javadoc.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149431794"
ojw28,2017-03-07 15:15:55,https://api.github.com/repos/google/ExoPlayer/git/commits/cda1b7b42b3c2bd5ea7bb5ccbd55234f7523cf57,cda1b7b42b3c2bd5ea7bb5ccbd55234f7523cf57,"Try and get people to stop ignoring the issue template. Again.

I'm also going to propose some canned responses that we can
copy/paste into issues that ignore the template, so that we
can be consistent about how we handle them.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149415502"
AquilesCanta,2017-03-03 11:24:42,https://api.github.com/repos/google/ExoPlayer/git/commits/e7462f05f5b5d4fe71ac328ef526d08242d2154c,e7462f05f5b5d4fe71ac328ef526d08242d2154c,"Add maxVideoBitrate to DefaultTrackSelector.Parameters

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149097876"
AquilesCanta,2017-03-02 16:19:41,https://api.github.com/repos/google/ExoPlayer/git/commits/8e9711e8aacda21932cc9a9eabd424bab3cfb41b,8e9711e8aacda21932cc9a9eabd424bab3cfb41b,"Allow packed audio without PRIV timestamps

We use the segments' start time when the timestmap is not present.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149006252"
erdemguven,2017-03-02 16:12:01,https://api.github.com/repos/google/ExoPlayer/git/commits/e40bba2852da6efb9e2141da0b237fe23900f393,e40bba2852da6efb9e2141da0b237fe23900f393,"Add Cache.getCachedBytes() which returns the length of the cached or not data block length

This method can be used to determine not cached parts of a content.
The 'length' parameter allows quicker responses without going through all adjacent spans.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149005688"
AquilesCanta,2017-03-02 15:52:10,https://api.github.com/repos/google/ExoPlayer/git/commits/247da48e9dfd2366720bfdc58723e5d3dc8b3a98,247da48e9dfd2366720bfdc58723e5d3dc8b3a98,"Make ElementaryStreamReader's public

This allows building a TsPayloadReader.Factory without
having to wrap the default one.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=149004102"
AquilesCanta,2017-03-09 12:16:54,https://api.github.com/repos/google/ExoPlayer/git/commits/5b98ff724626bc2390ddc329082bc364b1e170b1,5b98ff724626bc2390ddc329082bc364b1e170b1,"Merge pull request #2538 from mofneko/dev-v2-fix-unused-variable

Replace list access with local variable"
mofneko,2017-03-07 18:20:34,https://api.github.com/repos/google/ExoPlayer/git/commits/5b0192a3ddfb819145396cafb94023322c363413,5b0192a3ddfb819145396cafb94023322c363413,"Update HlsPlaylistTracker.java

Fix unused variable."
ojw28,2017-03-07 15:11:51,https://api.github.com/repos/google/ExoPlayer/git/commits/aaaa23e5e4a6771b06067bd28d728781990bd454,aaaa23e5e4a6771b06067bd28d728781990bd454,Update ISSUE_TEMPLATE
ojw28,2017-03-07 15:03:01,https://api.github.com/repos/google/ExoPlayer/git/commits/c50b570d463a2214e252ebca4b8840cd15d16768,c50b570d463a2214e252ebca4b8840cd15d16768,Update ISSUE_TEMPLATE
ojw28,2017-03-07 15:02:52,https://api.github.com/repos/google/ExoPlayer/git/commits/2ca14b025fc1bea3b5db6d9e23a259db02c4bf0b,2ca14b025fc1bea3b5db6d9e23a259db02c4bf0b,Update ISSUE_TEMPLATE
andrewlewis,2017-02-28 17:09:01,https://api.github.com/repos/google/ExoPlayer/git/commits/a9079f67aa031649edfa7427e0fa96bf65efa1ac,a9079f67aa031649edfa7427e0fa96bf65efa1ac,"Fix some documentation nits.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148776593"
ojw28,2017-02-28 14:54:27,https://api.github.com/repos/google/ExoPlayer/git/commits/ab8fd14724b0ee38e74b53cc5c9fed1c38c512b6,ab8fd14724b0ee38e74b53cc5c9fed1c38c512b6,"Support multiple track outputs from BaseMediaChunk

Issue: #2362
Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148764237"
andrewlewis,2017-02-28 14:46:51,https://api.github.com/repos/google/ExoPlayer/git/commits/d58008eeb7055fedde8a059b41cb3876a6048d32,d58008eeb7055fedde8a059b41cb3876a6048d32,"Rename BufferProcessor to AudioProcessor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148763781"
ojw28,2017-02-28 13:59:49,https://api.github.com/repos/google/ExoPlayer/git/commits/91639b26cd40d25094e1539417268fd14214d0d8,91639b26cd40d25094e1539417268fd14214d0d8,"Add some pipelining in MetadataRenderer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148760782"
andrewlewis,2017-02-27 17:42:03,https://api.github.com/repos/google/ExoPlayer/git/commits/1120e1027315687b3cca0de024c0d59fce2793a4,1120e1027315687b3cca0de024c0d59fce2793a4,"Add GVR spatial audio rendering extension.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148658631"
andrewlewis,2017-02-27 17:00:48,https://api.github.com/repos/google/ExoPlayer/git/commits/b3cfeaa17b6203c738df8e85b0868ddaebcfe3cb,b3cfeaa17b6203c738df8e85b0868ddaebcfe3cb,"Discard extra silent channels on Samsung Galaxy S6/S7.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148654495"
erdemguven,2017-02-27 16:25:54,https://api.github.com/repos/google/ExoPlayer/git/commits/2411d0fc7697e53897bb74c6575a46277a7e2788,2411d0fc7697e53897bb74c6575a46277a7e2788,"Move and rename PRIORITY_PLAYBACK to C constants class

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148651265"
erdemguven,2017-02-27 15:36:11,https://api.github.com/repos/google/ExoPlayer/git/commits/98f4fb85c210b2704a66e00c8477d4a41a234e9c,98f4fb85c210b2704a66e00c8477d4a41a234e9c,"Move utility methods to DashUtil class

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148647040"
AquilesCanta,2017-02-27 12:40:48,https://api.github.com/repos/google/ExoPlayer/git/commits/e26723cdc7cce0bbe0363db02525d5dfbeeb0011,e26723cdc7cce0bbe0363db02525d5dfbeeb0011,"Add MODE_SINGLE_PMT to TsExtractor

This mode allows the extractor to support streams with multiple
programs declared in the PAT, but only one PMT. This is necessary
to support tuner-obtained media.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148636312"
ojw28,2017-02-27 11:49:44,https://api.github.com/repos/google/ExoPlayer/git/commits/35988395d2aa7331be9b4d5640156bac28b4c83a,35988395d2aa7331be9b4d5640156bac28b4c83a,"Fix incorrect Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148633347"
ojw28,2017-02-24 19:19:42,https://api.github.com/repos/google/ExoPlayer/git/commits/ad857852e52972d6686b7020922f338374b07a63,ad857852e52972d6686b7020922f338374b07a63,"Discard subtitles with invalid positions

textWidth can be negative if textLeft extends parentRight (i.e.
the subtitle is positioned entirely off the screen to the RHS).
We should just discard and log a warning in this case.

Issue: #2497

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148481310"
andrewlewis,2017-02-24 11:07:48,https://api.github.com/repos/google/ExoPlayer/git/commits/129334d2a0b292d9e6fcca3471453ce8a2d84c6d,129334d2a0b292d9e6fcca3471453ce8a2d84c6d,"Clean up method ordering in ResamplingBufferProcessor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148444806"
andrewlewis,2017-02-24 10:18:22,https://api.github.com/repos/google/ExoPlayer/git/commits/5985f28e1baf121572d51ec954aa865e088cc0b6,5985f28e1baf121572d51ec954aa865e088cc0b6,"Add GVR extension and GvrBufferProcessor.

A GvrBufferProcessor can be passed to the player by overriding SimpleExoPlayer's
buildBufferProcessors method.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148442114"
ojw28,2017-02-23 22:20:34,https://api.github.com/repos/google/ExoPlayer/git/commits/88fc337db0dfcb606f414a35739b011cbce85fb1,88fc337db0dfcb606f414a35739b011cbce85fb1,"Expose empty CEA-608 and EMSG tracks for DASH

This change exposes declared CEA-608 and EMSG tracks. The
tracks currently provide no samples.

Issue: #2362
Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148390849"
ojw28,2017-02-23 21:30:19,https://api.github.com/repos/google/ExoPlayer/git/commits/d99cb28e6a987f47e6dfc33cd8e6f120bd3b369d,d99cb28e6a987f47e6dfc33cd8e6f120bd3b369d,"Correctly handle a SampleStream ending without providing a format

I'm going to introduce an EmptySampleStream that will be used in
some cases in conjunction as part of 608/EMSG support. This change
avoids EmptySampleStream having to provide a dummy format.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148383831"
AquilesCanta,2017-02-23 16:50:47,https://api.github.com/repos/google/ExoPlayer/git/commits/ef2541e654edf74d21fa30dcefab324e6901c9aa,ef2541e654edf74d21fa30dcefab324e6901c9aa,"Fix negative start time values

Issue:#2495

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148348663"
andrewlewis,2017-02-23 16:03:59,https://api.github.com/repos/google/ExoPlayer/git/commits/e3a57146d232eac6485ea3effd8f804339a6a7e2,e3a57146d232eac6485ea3effd8f804339a6a7e2,"Fix BufferProcessor.queueEndOfStream javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148344328"
ojw28,2017-02-23 16:02:24,https://api.github.com/repos/google/ExoPlayer/git/commits/563a3972840885f26c96c3206df693534797ab2b,563a3972840885f26c96c3206df693534797ab2b,"Merge remainder of https://github.com/google/ExoPlayer/pull/2372

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148344124"
andrewlewis,2017-02-23 14:54:20,https://api.github.com/repos/google/ExoPlayer/git/commits/82d33cde689fdd5888e1dcd2af877c1328cf8c01,82d33cde689fdd5888e1dcd2af877c1328cf8c01,"Add support for draining audio output.

At the end of playback, BufferProcessors need to be drained to process all
remaining data, then the output needs to be written to the AudioTrack before
stop() is called.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148339194"
ojw28,2017-02-23 15:48:36,https://api.github.com/repos/google/ExoPlayer/git/commits/69bd956bd7e49f0667ff36b7a123d894d6ff357f,69bd956bd7e49f0667ff36b7a123d894d6ff357f,"Merge pull request #2496 from wasabeef/dev-v2-naming-for-clearkey

Clarify naming for ClearKey DRM support"
wasabeef,2017-02-23 15:47:09,https://api.github.com/repos/google/ExoPlayer/git/commits/dc17163351f0a05ce180b0acec484eecf1fee5ff,dc17163351f0a05ce180b0acec484eecf1fee5ff,Clarify naming for ClearKey DRM support
ojw28,2017-02-23 14:51:58,https://api.github.com/repos/google/ExoPlayer/git/commits/5fe5076c8686a09608bbef8797e1c16fa8d80fd8,5fe5076c8686a09608bbef8797e1c16fa8d80fd8,Clarify naming for ClearKey DRM support
ojw28,2017-02-23 14:27:23,https://api.github.com/repos/google/ExoPlayer/git/commits/3bb08e58f68ee1cc5a288b601c5fec3068cd83da,3bb08e58f68ee1cc5a288b601c5fec3068cd83da,Cleanup of CENC support
ojw28,2017-02-23 14:17:11,https://api.github.com/repos/google/ExoPlayer/git/commits/7e02e58e16a48c62e2686dbacb391750475b408f,7e02e58e16a48c62e2686dbacb391750475b408f,"Merge pull request #2372 from wasabeef/dev-v2-cenc-clearkey

Added support for CENC ClearKey"
AquilesCanta,2017-02-23 09:55:56,https://api.github.com/repos/google/ExoPlayer/git/commits/3fc3349e9535d8763f9a4c34c1d9a9e2ce7024a3,3fc3349e9535d8763f9a4c34c1d9a9e2ce7024a3,"Add support for Caption Format Descriptor

This allows the TsExtractor to automatically determine the
closed caption tracks to expose by parsing available
descriptors.

Issue:#2161

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148321380"
ojw28,2017-02-22 15:39:05,https://api.github.com/repos/google/ExoPlayer/git/commits/698e081edab82c4293de0ada171d6bcb3eacd3fc,698e081edab82c4293de0ada171d6bcb3eacd3fc,"Handle empty PRIV frames

Issue: #2486

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148217936"
ojw28,2017-02-22 15:21:49,https://api.github.com/repos/google/ExoPlayer/git/commits/ddbced73174404bf6c177c03d5927fad72e1d031,ddbced73174404bf6c177c03d5927fad72e1d031,"Conditionally enable EMSG/608 based on manifest declarations

Issue: #2362
Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148216614"
andrewlewis,2017-02-22 14:25:29,https://api.github.com/repos/google/ExoPlayer/git/commits/682987a0cf077f9964c7cc79bf09b31d79de6b0e,682987a0cf077f9964c7cc79bf09b31d79de6b0e,"Separate input/output handling in BufferProcessors.

This allows BufferProcessors to partially and/or asynchronously handle
input/output. Document contract for queueInput and getOutput.

Update ResamplingBufferProcessor to use the new interface.

Separate submitting bytes vs. writing data to the AudioTrack.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148212269"
AquilesCanta,2017-02-22 12:11:55,https://api.github.com/repos/google/ExoPlayer/git/commits/896550883f6d183e3ef46351eb3e494df8eaefba,896550883f6d183e3ef46351eb3e494df8eaefba,"Add support for multiple CC channels in HLS

Issue:#2161

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148203980"
AquilesCanta,2017-02-20 18:11:19,https://api.github.com/repos/google/ExoPlayer/git/commits/e86629ef3ae29145f99e488f4e08441f5bb82cfc,e86629ef3ae29145f99e488f4e08441f5bb82cfc,"Allow exposing multiple CEA608 tracks for Transport Streams

This CL allows passing multiple formats describing CC channels to the
TS payload reader factory. As a simple usecase, ATSC can expose both
608 channels by passing a two element list with the corresponding
accessibility channels. The HLS media source can construct this list
from the EXT-X-MEDIA:TYPE=""CLOSED-CAPTIONS"" tags, including language
and selection flags. The interface extends without modification to
708.

Pending work:
* Multiple CC channels in HLS.
* caption_service_descriptor parsing for overriding the user's selection.
* 708 support in SEI reader.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148030293"
ojw28,2017-02-20 17:19:34,https://api.github.com/repos/google/ExoPlayer/git/commits/a84216c3a975d9abadfd4868186d23bad131d068,a84216c3a975d9abadfd4868186d23bad131d068,"Allow enabling of EMSG/608 outputs on DefaultDashChunkSource

Issue #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148027655"
AquilesCanta,2017-02-20 16:45:13,https://api.github.com/repos/google/ExoPlayer/git/commits/72e1eae6f55580ecae06f649078d051e7f6f1f0f,72e1eae6f55580ecae06f649078d051e7f6f1f0f,"Discard preparation chunk if track selection does not include it

This avoids breaking the player if the first variant is not
supported by the device.

Issue:#2353

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148025791"
ojw28,2017-02-20 16:15:52,https://api.github.com/repos/google/ExoPlayer/git/commits/55a3fca6f990d3b6d0097d018daac4ec4cd7bcab,55a3fca6f990d3b6d0097d018daac4ec4cd7bcab,"Clean up position restoration logic in demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148024082"
andrewlewis,2017-02-20 14:33:23,https://api.github.com/repos/google/ExoPlayer/git/commits/17762ebaa2f96ddb7709fb04aa740d538657583d,17762ebaa2f96ddb7709fb04aa740d538657583d,"Reformat @IntDef field/return type annotations.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=148018580"
wasabeef,2017-02-22 07:01:43,https://api.github.com/repos/google/ExoPlayer/git/commits/e0f7a124889f340f6b9db58efd3d4f577cb12126,e0f7a124889f340f6b9db58efd3d4f577cb12126,Added support for CENC ClearKey
jcable,2017-02-21 08:57:49,https://api.github.com/repos/google/ExoPlayer/git/commits/402c985aec5a0dd1a8a5d2cfd073fe18ade52c93,402c985aec5a0dd1a8a5d2cfd073fe18ade52c93,Merge branch 'dev-v2' of https://github.com/google/ExoPlayer into dev-v2
jcable,2017-02-21 08:38:30,https://api.github.com/repos/google/ExoPlayer/git/commits/d8746c3deed2f9433edf1ed062fcd805a3258db6,d8746c3deed2f9433edf1ed062fcd805a3258db6,remove unneeded local variable
jcable,2017-02-21 08:22:47,https://api.github.com/repos/google/ExoPlayer/git/commits/b0c39a12950cf95481168bc5668ba11870d9bcd0,b0c39a12950cf95481168bc5668ba11870d9bcd0,back out unneeded imports
ojw28,2017-02-20 13:13:13,https://api.github.com/repos/google/ExoPlayer/git/commits/11c16d83fdf65c6f35d8852e08baa7b75ffe1a47,11c16d83fdf65c6f35d8852e08baa7b75ffe1a47,Final nit fixes for Cue/SubtitlePainter
ojw28,2017-02-20 13:09:40,https://api.github.com/repos/google/ExoPlayer/git/commits/539072dbf4236610be56224c836b6b0d1677fdb3,539072dbf4236610be56224c836b6b0d1677fdb3,Remove useless Cue constructor
ojw28,2017-02-20 13:03:03,https://api.github.com/repos/google/ExoPlayer/git/commits/5fbf10969453d823ebe85e39573712669695ef41,5fbf10969453d823ebe85e39573712669695ef41,Use Math.round instead of floor.
ojw28,2017-02-20 13:01:00,https://api.github.com/repos/google/ExoPlayer/git/commits/31513202df8c186764ad5d2d1d14a8a7fa49a7f6,31513202df8c186764ad5d2d1d14a8a7fa49a7f6,Fix subtitle painter issues
ojw28,2017-02-20 12:55:07,https://api.github.com/repos/google/ExoPlayer/git/commits/21923ae1faa1db85256a016721bc238a20d2d2b8,21923ae1faa1db85256a016721bc238a20d2d2b8,m
ojw28,2017-02-20 12:51:56,https://api.github.com/repos/google/ExoPlayer/git/commits/f16058422df7f42f7a4a20ec9fa4a4128f55fd88,f16058422df7f42f7a4a20ec9fa4a4128f55fd88,Fix import order
ojw28,2017-02-20 12:47:00,https://api.github.com/repos/google/ExoPlayer/git/commits/276788bc50e2ab943f081b45da9b37b80bfbdb22,276788bc50e2ab943f081b45da9b37b80bfbdb22,Merge branch 'drhill-dev-v2_imagesubs' into dev-v2
ojw28,2017-02-20 12:46:51,https://api.github.com/repos/google/ExoPlayer/git/commits/e27a6eca890a4c58eff9c3d1441179a071582746,e27a6eca890a4c58eff9c3d1441179a071582746,Merge branch 'dev-v2_imagesubs' of git://github.com/drhill/ExoPlayer into drhill-dev-v2_imagesubs
ojw28,2017-02-20 11:35:06,https://api.github.com/repos/google/ExoPlayer/git/commits/edae29dff754fe4bd410fdb6fcedd60ed2266b9c,edae29dff754fe4bd410fdb6fcedd60ed2266b9c,Fix import order
ojw28,2017-02-20 11:33:43,https://api.github.com/repos/google/ExoPlayer/git/commits/37c15e7ceeeddeadf9d8b7afba991fa074f9f94c,37c15e7ceeeddeadf9d8b7afba991fa074f9f94c,Minor stylistic tweaks
ojw28,2017-02-20 11:26:32,https://api.github.com/repos/google/ExoPlayer/git/commits/bf120cac617278ff812a4422e1b97430b5850bce,bf120cac617278ff812a4422e1b97430b5850bce,"Merge pull request #2444 from twisstosin/dev-v2

Updated Gradle, Compile and Build Tools Version"
ojw28,2017-02-20 11:21:24,https://api.github.com/repos/google/ExoPlayer/git/commits/ba0aad4b77df63a3405e46a85094c6cc9691f4d6,ba0aad4b77df63a3405e46a85094c6cc9691f4d6,"Merge pull request #2468 from danysantiago/dev-v2

Add Flags to MP3 Extractor to force CBR Seeker"
danysantiago,2017-02-17 20:44:13,https://api.github.com/repos/google/ExoPlayer/git/commits/e9399f8684363cf0fc7e2a425513341b9d0b77f0,e9399f8684363cf0fc7e2a425513341b9d0b77f0,"Added flags to the mp3 extractor to control behavior of the extractor. Added FLAG_ENABLE_CONSTANT_BITRATE_SEEKING to let the extractor know that the CBR seeker is desired in the case where the seeker has determine the track is not seekable For example, in the case where the track has a Xing Header but no content table."
erdemguven,2017-02-17 15:57:49,https://api.github.com/repos/google/ExoPlayer/git/commits/c3d7eecd1f64ae6cdb120cb543d4994a10c2d02c,c3d7eecd1f64ae6cdb120cb543d4994a10c2d02c,"Fix ChunkExtractorWrapper.init(TrackOutput) calls with null TrackOutput after extractor initialized

InitializationChunk calls init(null). When the initialization and index data is separate they need to
be loaded separately which results to two init(null) calls.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147837985"
ojw28,2017-02-17 14:51:29,https://api.github.com/repos/google/ExoPlayer/git/commits/14507c45036bb4057f4c3d35bb5beb790cdfee22,14507c45036bb4057f4c3d35bb5beb790cdfee22,"Fix NPE parsing ContentProtection element

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147833328"
ojw28,2017-02-17 03:00:00,https://api.github.com/repos/google/ExoPlayer/git/commits/bc9dfa813911a5e9ffd4309c3cfb8bfdeac3a166,bc9dfa813911a5e9ffd4309c3cfb8bfdeac3a166,"Fix build

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147796398"
ojw28,2017-02-17 02:26:32,https://api.github.com/repos/google/ExoPlayer/git/commits/ba9a82e9823ce55bd0f1e5492556a06862657d16,ba9a82e9823ce55bd0f1e5492556a06862657d16,"Use execute instead of submit

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147794314"
twisstosin,2017-02-16 20:30:37,https://api.github.com/repos/google/ExoPlayer/git/commits/636eecf4e78f78323206375443934db40966d7a1,636eecf4e78f78323206375443934db40966d7a1,Reverted Font Size Change
ojw28,2017-02-16 17:49:27,https://api.github.com/repos/google/ExoPlayer/git/commits/4cca2f2d0a7edc4b05d94fa6c71559bfa2a910e1,4cca2f2d0a7edc4b05d94fa6c71559bfa2a910e1,"Remove unnecessary null check.

Issue #2462

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147731351"
ojw28,2017-02-16 17:22:25,https://api.github.com/repos/google/ExoPlayer/git/commits/fccaa07be3ff871fb424d077c8c5844a8782ac2f,fccaa07be3ff871fb424d077c8c5844a8782ac2f,"Merge pull request #2463 from purpleblues/dev-v2

Fixed a typing error"
ojw28,2017-02-16 17:22:01,https://api.github.com/repos/google/ExoPlayer/git/commits/26f4e528d55428d99795658014a4cc55d639c1ae,26f4e528d55428d99795658014a4cc55d639c1ae,"Merge pull request #2464 from jschamburger/dev-v2

Make DrmSessionException constructor public to enable creating custom DrmSessionManager implementations."
ojw28,2017-02-16 16:52:50,https://api.github.com/repos/google/ExoPlayer/git/commits/0d468ca7bf7382537f5540854dc268e8d1a4fa1b,0d468ca7bf7382537f5540854dc268e8d1a4fa1b,"DASH: Support mspr:pro element

Issue: #2386

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147725616"
purpleblues,2017-02-16 12:23:28,https://api.github.com/repos/google/ExoPlayer/git/commits/e74b729952a9b3018ee63f7dc4a8320ab8578de4,e74b729952a9b3018ee63f7dc4a8320ab8578de4,fixed a typing error
ojw28,2017-02-15 18:33:16,https://api.github.com/repos/google/ExoPlayer/git/commits/65d4b1cf5c75bf6416acb4836564745f5f57048e,65d4b1cf5c75bf6416acb4836564745f5f57048e,"Make CeaUtil robust against malformed SEI data

I've also added a TODO to not even bother trying to parse CEA from
SEI NAL units if they're fully or partially encrypted, which it's
possible to determine in the FMP4 extractor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147613979"
andrewlewis,2017-02-15 18:30:40,https://api.github.com/repos/google/ExoPlayer/git/commits/ec98bd9ea1d230c8b641c1d0dcff405b5677dfbd,ec98bd9ea1d230c8b641c1d0dcff405b5677dfbd,"Work around broken AAC decoder EoS handling on L.

SoftAAC2 would cause an exception to be thrown from
dequeueOutputBuffer/releaseOutputBuffer after queueing an end-of-stream buffer
for certain streams.

The bug was introduced in L and fixed in L MR1, so the workaround is targeted to
API 21.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147613659"
ojw28,2017-02-15 18:27:26,https://api.github.com/repos/google/ExoPlayer/git/commits/d6e15b79538b39c6ddf976bf18a951394816819c,d6e15b79538b39c6ddf976bf18a951394816819c,"DASH: Correctly handle empty segment indices

Issue: #1865

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147613244"
andrewlewis,2017-02-15 17:58:44,https://api.github.com/repos/google/ExoPlayer/git/commits/5c571e6e9d24086abede757f5be5d275cd67a515,5c571e6e9d24086abede757f5be5d275cd67a515,"Handle H.265/HEVC SEI NAL units in FragmentedMp4Extractor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147609330"
andrewlewis,2017-02-15 01:04:48,https://api.github.com/repos/google/ExoPlayer/git/commits/fd6012a72722a42c78cf0742c3986feaf76a8829,fd6012a72722a42c78cf0742c3986feaf76a8829,"Remove outputBuffer assertion in ResamplingBufferProcessor.

The outputBuffer is not necessarily empty after a flush, so the assertion could
fail in normal usage. The assertion can just be removed as the output buffer is
rewritten in full on every call to handleBuffer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147541016"
andrewlewis,2017-02-14 13:22:09,https://api.github.com/repos/google/ExoPlayer/git/commits/3691454b82506e23d0663e84becd6faa1265c772,3691454b82506e23d0663e84becd6faa1265c772,"Fix resuming after error for CEA-608 SEI in fMP4.

Also test SEI parsing in FragmentedMp4ExtractorTest.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147460699"
ojw28,2017-02-13 21:27:17,https://api.github.com/repos/google/ExoPlayer/git/commits/7625c1b862db7a0dc860832214a2beba79c22c17,7625c1b862db7a0dc860832214a2beba79c22c17,"Remove unnecessary configuration parameter.

- It's always fine to prefer the manifest drm init data. In
  DASH we always do this anyway. In SS the manifest and sample
  formats are identical.
- Optimized the case where the manifest and sample formats are
  identical by avoiding the format copy.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147385282"
ojw28,2017-02-13 18:03:50,https://api.github.com/repos/google/ExoPlayer/git/commits/8cb3b6ed07ba95cd2f9297b9c351d02c090e9dda,8cb3b6ed07ba95cd2f9297b9c351d02c090e9dda,"SmoothStreaming: Replace variant bitrate/start_time placeholders

Issue: #2447

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147358615"
ojw28,2017-02-13 17:35:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0316ab80dfbab737283c6a38b4f7dfd98d1747e1,0316ab80dfbab737283c6a38b4f7dfd98d1747e1,"Fix broken Javadoc

Issue: #2433

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147355544"
ojw28,2017-02-13 10:44:00,https://api.github.com/repos/google/ExoPlayer/git/commits/3bc320faaf2991913a838b881bf59069543e351e,3bc320faaf2991913a838b881bf59069543e351e,"Fix misleading method names.

Issue: #2414

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147325759"
cdrolle,2017-02-13 03:22:20,https://api.github.com/repos/google/ExoPlayer/git/commits/5bfad5d99b86a43fe70357b12fbe94aa185906f0,5bfad5d99b86a43fe70357b12fbe94aa185906f0,"Added sample mime type to the track list descriptions.

The addition of sample mime types can make it easier to identify tracks in the case of mixed media (e.g. CEA-608 and CEA-708 caption tracks). This change appends the mime type to the end of the track description for all media types.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147303187"
erdemguven,2017-02-10 17:49:15,https://api.github.com/repos/google/ExoPlayer/git/commits/f7fbbe993e90ffe60c6a3ec151529bd32bf8bd55,f7fbbe993e90ffe60c6a3ec151529bd32bf8bd55,"Fix ArrayIndexOutOfBoundsException while reading SEI NAL unit

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147165453"
cdrolle,2017-02-09 20:31:16,https://api.github.com/repos/google/ExoPlayer/git/commits/ef475eb9c9c8c1224043a61504f296c39db38778,ef475eb9c9c8c1224043a61504f296c39db38778,"Fixed potential bug in which old paint-on captions could be drawn overtop by pop-on captions as they weren't being cleared properly.

This fix was taken from YouTube's Cea608Decoder ([]

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=147066662"
erdemguven,2017-02-08 14:57:39,https://api.github.com/repos/google/ExoPlayer/git/commits/ef41303a04077dd323014ec3295950490a4ba635,ef41303a04077dd323014ec3295950490a4ba635,"Keep FlacStreamInfo unobfuscated as it is accessed from native methods

Issue: #2427

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146905629"
cdrolle,2017-02-07 15:15:39,https://api.github.com/repos/google/ExoPlayer/git/commits/de46ed7fb90f9ec421c77e5888bb8ae4572bff83,de46ed7fb90f9ec421c77e5888bb8ae4572bff83,"Fixed an issue with Cea608Decoder in which tab commands were not being used correctly.

Tab commands were being used cumulatively (i.e. moving the cursor farther and farther over) resulting in the text eventually trying to write beyond the bounds of the screen and throwing an exception.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146783284"
AquilesCanta,2017-02-03 17:01:31,https://api.github.com/repos/google/ExoPlayer/git/commits/7c8a3d006d7192bc69084972396327409c28ee94,7c8a3d006d7192bc69084972396327409c28ee94,"Flexibilize mp4 extensions detection for HLS chunks

This CL adds support  mp4 extensions of the form .m4_.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146479870"
ojw28,2017-02-03 15:06:58,https://api.github.com/repos/google/ExoPlayer/git/commits/d3f4da749c8313b78d0526cacdf4ad593a774506,d3f4da749c8313b78d0526cacdf4ad593a774506,"Propagate track type through ExtractorOutput.track

This allows binding by track type in ChunkExtractorWrapper, which
allows the EMSG and 608 tracks to be enabled on FragmentedMp4Extractor
in DefaultDashChunkSource. ChunkExtractorWrapper currently binds these
to DummyTrackOutputs.

Note: I wanted to pass the mimeType instead, since it's a more specific,
but unfortunately there's at least one place where it's not known at the
point of invoking track() (FlvExtractor).

Issue #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146471082"
erdemguven,2017-02-03 14:45:17,https://api.github.com/repos/google/ExoPlayer/git/commits/ebc5e327e679c94ed46e17d06b63514227df79cc,ebc5e327e679c94ed46e17d06b63514227df79cc,"Fix FLAC extension native part compilation issues

Issue: #2352

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146469547"
AquilesCanta,2017-02-03 13:50:22,https://api.github.com/repos/google/ExoPlayer/git/commits/f2d3af7deaf914957cf30f36b2e01821b609cac9,f2d3af7deaf914957cf30f36b2e01821b609cac9,"Delete dead code and fix javadocs from hls

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146466389"
andrewlewis,2017-02-02 19:53:28,https://api.github.com/repos/google/ExoPlayer/git/commits/c82319332fc6acb03a041fa2faf2b1b9486ea1b7,c82319332fc6acb03a041fa2faf2b1b9486ea1b7,"Omit clipped samples when applying edits for audio tracks.

Issue: #2408

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146389955"
cdrolle,2017-02-02 17:40:28,https://api.github.com/repos/google/ExoPlayer/git/commits/537a3ab5be3fcf285b17505ac64c28b5f68c8fbb,537a3ab5be3fcf285b17505ac64c28b5f68c8fbb,"Fixed 2 issues with Cea708Decoder.

The first issue occurs when we attempt to process a DtvCcPacket that hasn't been completely filled. In this case we attempted to extract data beyond the length of the packet, instead of dropping the packet as we should have. The other issue occurs when we encountered an invalid cc_data_pkt. In that case we were finalizing the entire DtvCcPacket, instead of just ignoring that particular cc_data_pkt as we should have.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146373074"
AquilesCanta,2017-02-01 16:01:34,https://api.github.com/repos/google/ExoPlayer/git/commits/0402191ace91a783010370249ca017b634518bc0,0402191ace91a783010370249ca017b634518bc0,"Make SeiReader injectable to H26xReaders

This CL is a no-op refactor but allows defining the outputted
channels through the TsPayloadReaderFactory.

Issue:#2161

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146243736"
ojw28,2017-02-01 16:00:48,https://api.github.com/repos/google/ExoPlayer/git/commits/ee3c5f875fe4b09346084b9648f9896cbb7d5329,ee3c5f875fe4b09346084b9648f9896cbb7d5329,"Simplify chunk package ahead of EMSG/608 piping

Issue: #2362
Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146243681"
erdemguven,2017-02-01 10:53:32,https://api.github.com/repos/google/ExoPlayer/git/commits/025a67cae950f4a8d11b2648b570e2e458bb90e8,025a67cae950f4a8d11b2648b570e2e458bb90e8,"Enable buffering for CacheDataSink by default

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146221487"
andrewlewis,2017-02-01 09:25:34,https://api.github.com/repos/google/ExoPlayer/git/commits/74acbe04e35a029b570b2476fbee4135febf110e,74acbe04e35a029b570b2476fbee4135febf110e,"Pass an array of BufferProcessors to the AudioTrack.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146215966"
AquilesCanta,2017-01-31 20:33:43,https://api.github.com/repos/google/ExoPlayer/git/commits/feeec77407f8c5878ce4294039520d788be45c9d,feeec77407f8c5878ce4294039520d788be45c9d,"Add support for multiple programs in a single TS

* Prevents calling endTracks() before all PMTs have been
  processed.
* Adds a unique ID to the format of each track. This allows
  the track selector to identify which track belongs to
  each program. The format of each id is
  ""<program number>/<track output id>"".

Note: This CL will break malformed TS files whose PAT
declares more PMTs than it actually contains, which
previously were supported. This does not apply for HLS
mode.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146151642"
andrewlewis,2017-01-31 17:29:09,https://api.github.com/repos/google/ExoPlayer/git/commits/4301606200d63462a109a94233b304839bbcc8b0,4301606200d63462a109a94233b304839bbcc8b0,"Add a BufferProcessor for resampling.

This initial version of the BufferProcessor interface assumes that buffers are
handled in their entirety on each invocation.

Move PCM resampling out of AudioTrack into a BufferProcessor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146128411"
erdemguven,2017-01-31 17:28:16,https://api.github.com/repos/google/ExoPlayer/git/commits/3edeec2495d9ca2c7f60b9edb212ecf5e6b40103,3edeec2495d9ca2c7f60b9edb212ecf5e6b40103,"Document passing null cacheWriteDataSink to CacheDataSource constructor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146128328"
ojw28,2017-01-31 16:13:15,https://api.github.com/repos/google/ExoPlayer/git/commits/7c1b2beb84f6f706490b3e7a241dce87d22ed370,7c1b2beb84f6f706490b3e7a241dce87d22ed370,"Support dyanmically setting key request headers

Issue: #1924

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146120465"
erdemguven,2017-01-31 15:47:28,https://api.github.com/repos/google/ExoPlayer/git/commits/af98ca661a43c3ef4ee52e57e5d592549e406eb6,af98ca661a43c3ef4ee52e57e5d592549e406eb6,"Refactor DashTest class

Moved DashHostedTest to top level classes. Added DashHostedTest.Builder. Move widevine offline tests to separate class with custom setUp and tearDown methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146118310"
ojw28,2017-01-31 15:45:03,https://api.github.com/repos/google/ExoPlayer/git/commits/8f482cb2ed99b49826b2140aaa53b270422560ed,8f482cb2ed99b49826b2140aaa53b270422560ed,"Fixing some Javadoc errors

- Cea708 Javadoc references private internals with @link. Doc
  about device accessibility settings doesn't relate to the
  decoder, either.
- Creator Javadoc unnecessary.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146118092"
cdrolle,2017-01-30 20:55:35,https://api.github.com/repos/google/ExoPlayer/git/commits/87e790f44d842b04bba9e107ee4c9327bf04b916,87e790f44d842b04bba9e107ee4c9327bf04b916,"Fixed issue with TextRenderer and RawCC 608/708 captions in which all the captions prior to the playback position would be rendered in [] succession when a VOD stream starts.

Instead of clearing the DECODE_ONLY flag for all input buffers in TextRenderer (i.e. for all caption types), we now only clear it on the output buffer in SimpleSubtitleDecoder. The number if input buffers in CeaDecoder has also been increased to reduce the delay before captions appear for playback sessions that start far ahead into the content.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146028680"
twisstosin,2017-02-14 18:23:08,https://api.github.com/repos/google/ExoPlayer/git/commits/460dc2561a07eca9e5bffaf334a0c9d6858581e9,460dc2561a07eca9e5bffaf334a0c9d6858581e9,Changed Text Size
twisstosin,2017-02-12 22:06:51,https://api.github.com/repos/google/ExoPlayer/git/commits/933b7faadd97d57c0b1de625c2600aa0caa2347a,933b7faadd97d57c0b1de625c2600aa0caa2347a,"Updated Gradle, Compile and Build Tools Version"
ojw28,2017-01-31 14:04:01,https://api.github.com/repos/google/ExoPlayer/git/commits/25a966dc2300161448fa74dee5ee98322ff65604,25a966dc2300161448fa74dee5ee98322ff65604,"Merge pull request #2402 from google/dev-v2

r2.2.0"
ojw28,2017-01-31 13:11:30,https://api.github.com/repos/google/ExoPlayer/git/commits/6a844ebce434aedb08879a2fca6b92fe76a085f8,6a844ebce434aedb08879a2fca6b92fe76a085f8,Merge branch 'release-v2' into dev-v2
ojw28,2017-01-30 18:44:47,https://api.github.com/repos/google/ExoPlayer/git/commits/a7dd0f7609150f0c4a77424501d51ee55bb1509c,a7dd0f7609150f0c4a77424501d51ee55bb1509c,"Merge pull request #2326 from devint1/alac-dev

Apple Lossless (ALAC) support"
ojw28,2017-01-30 17:32:57,https://api.github.com/repos/google/ExoPlayer/git/commits/4b8a6572fd3dac9ead1b7b016fc07893fb065f0d,4b8a6572fd3dac9ead1b7b016fc07893fb065f0d,"Fix resume position if user seeks whilst in error state

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=146001900"
AquilesCanta,2017-01-30 17:00:28,https://api.github.com/repos/google/ExoPlayer/git/commits/8ddfc12f05a2a0d0d5547dcd77a5b5cb0a572b6c,8ddfc12f05a2a0d0d5547dcd77a5b5cb0a572b6c,"Avoid resetting the tracks on BLWE media source reinitialization

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145998158"
ojw28,2017-01-30 16:20:29,https://api.github.com/repos/google/ExoPlayer/git/commits/615b707b1680c09185b23c3045413c629bf6c4df,615b707b1680c09185b23c3045413c629bf6c4df,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145994313"
AquilesCanta,2017-01-30 15:47:31,https://api.github.com/repos/google/ExoPlayer/git/commits/e6bbd397d55f46a95bfdacdc7051ee6ac992ff4d,e6bbd397d55f46a95bfdacdc7051ee6ac992ff4d,"Add support for HLS's #EXT-X-PLAYLIST-TYPE

Issue:#805

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145991145"
AquilesCanta,2017-01-30 15:00:28,https://api.github.com/repos/google/ExoPlayer/git/commits/7ee8567f4a80b2ec9018cb0761fca41ac9ff9c9e,7ee8567f4a80b2ec9018cb0761fca41ac9ff9c9e,"Fix demo app to avoid seeking if resume position is clear

This fixed the resume live window issue by modifying the demo app.

Issue:#2344

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145987470"
AquilesCanta,2017-01-30 13:38:43,https://api.github.com/repos/google/ExoPlayer/git/commits/9a90795041c20aa40c99de30fa188788b3c65f2a,9a90795041c20aa40c99de30fa188788b3c65f2a,"Resume from playback position by default when media source changes

Issue:#2369

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145982198"
AquilesCanta,2017-01-26 16:55:42,https://api.github.com/repos/google/ExoPlayer/git/commits/c49d142981ae1498840d6cd2b4f5be4461f037a3,c49d142981ae1498840d6cd2b4f5be4461f037a3,"Prevent old playlist snapshots from being used on live HLS streams

This aims to replace InvalidCodeResponse's with BLWE's caused by trying to
load chunks that have been removed from the server.

Issue:#2344

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145679171"
devint1,2017-01-28 21:15:41,https://api.github.com/repos/google/ExoPlayer/git/commits/6becba8c42ae87b715b822a01781eed6301ca2fb,6becba8c42ae87b715b822a01781eed6301ca2fb,"Only use ALAC workaround if sample rate is 0

This prevents the workaround from occuring once FFmpeg has the bug
patched."
devint1,2017-01-22 19:41:29,https://api.github.com/repos/google/ExoPlayer/git/commits/f7b2452d46365f092f83102a543d23609d85b0fc,f7b2452d46365f092f83102a543d23609d85b0fc,Reference ALAC sample rate bug
ojw28,2017-01-25 20:41:38,https://api.github.com/repos/google/ExoPlayer/git/commits/25c18ca1b461870a0aaad15c339a522a38226627,25c18ca1b461870a0aaad15c339a522a38226627,"Re-add playback tests to Moe migration

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145583193"
ojw28,2017-01-25 19:09:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ed69749957487fe5208f9cfe7eaa0e4b1eaed073,ed69749957487fe5208f9cfe7eaa0e4b1eaed073,"Update logo assets + shorten name

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145570392"
ojw28,2017-01-25 19:06:56,https://api.github.com/repos/google/ExoPlayer/git/commits/63e6bf5cf2d2be41eff2725ce241f9f523beaee6,63e6bf5cf2d2be41eff2725ce241f9f523beaee6,"Consolidate UnrecognizedInputFormatException

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145570097"
ojw28,2017-01-25 18:11:58,https://api.github.com/repos/google/ExoPlayer/git/commits/6f5c7b38a7077d81fe0fd9ff216ce8b5dd34ad09,6f5c7b38a7077d81fe0fd9ff216ce8b5dd34ad09,"Wait for first sync frame in MediaCodecRenderer

For the video renderer, it's not true that the source always
provides from a sync frame specifically in the case where
the surface has been replaced on the renderer. In this case
the source doesn't know that it should be providing from a
sync frame.

Issue: #2093

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145562222"
andrewlewis,2017-01-25 17:00:50,https://api.github.com/repos/google/ExoPlayer/git/commits/98db14e7e5e28ef409e23b0f8977727d2263eee6,98db14e7e5e28ef409e23b0f8977727d2263eee6,"Fix some documentation nits in AudioTrack.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145554504"
cdrolle,2017-01-25 16:36:36,https://api.github.com/repos/google/ExoPlayer/git/commits/e9ab71a28060e152e2d900956b155a69dfa619be,e9ab71a28060e152e2d900956b155a69dfa619be,"Modified CeaDecoder and CeaSubtitle so that it's correctly setting the subsampleOffset and making proper use of it.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145552166"
ojw28,2017-01-25 14:56:26,https://api.github.com/repos/google/ExoPlayer/git/commits/0a8dc41632fa4c95ff78bd33ccb06b586b09bbdb,0a8dc41632fa4c95ff78bd33ccb06b586b09bbdb,"Set max resolution from codec capabilities for ABR where resolutions are unknown

Issue: #2096

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145542983"
ojw28,2017-01-25 13:54:30,https://api.github.com/repos/google/ExoPlayer/git/commits/953c6855ec8cae75d962fadd56ea7812d4c80754,953c6855ec8cae75d962fadd56ea7812d4c80754,"FMP4 EMSG/CEA608 output bug fix + tweaks

- Fix to use different track ids for EMSG + CEA608, so they can
  both be enabled at once.
- Tweaked extractor to output formats prior to endTracks() when
  parsing the initial moov box. This makes it easier to handle
  multiple tracks through the chunk package. It may or may not
  be made a requirement (it's already true for the MKV extractor).

Issue: #2362
Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145538757"
erdemguven,2017-01-25 12:39:12,https://api.github.com/repos/google/ExoPlayer/git/commits/8970e80b25ad0e91c44d7089d46185829da896b6,8970e80b25ad0e91c44d7089d46185829da896b6,"Don't use the returned key set id if the request wasn't for an offline license key

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145533961"
ojw28,2017-01-24 12:41:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c01c2c34f731cf96baf1022e6cdbb68a9f0aca40,c01c2c34f731cf96baf1022e6cdbb68a9f0aca40,"Store full accessibility descriptors in parsed DASH manifest

Issue: #2362

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145402640"
ojw28,2017-01-24 12:24:29,https://api.github.com/repos/google/ExoPlayer/git/commits/4efdd14c659c151d5fddadb0280c26f1e69c2800,4efdd14c659c151d5fddadb0280c26f1e69c2800,"Allow FMP4 extractor to output CEA-608

Issue: #2362

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145401668"
AquilesCanta,2017-01-23 17:30:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b1ec5e3a2505140f3189d130993398cdc95ea557,b1ec5e3a2505140f3189d130993398cdc95ea557,"Move TimestampAdjuster from extractor to util

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145295850"
AquilesCanta,2017-01-23 16:30:39,https://api.github.com/repos/google/ExoPlayer/git/commits/497651c7b9b70ea4d84568506b88a9c682845fe6,497651c7b9b70ea4d84568506b88a9c682845fe6,"Ignore file extension for HLS Subtitle Renditions

According to the spec, subtitle renditions must be Webvtt media
segments.

Issue:#2025
Issue:#2355

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145289266"
AquilesCanta,2017-01-23 15:01:26,https://api.github.com/repos/google/ExoPlayer/git/commits/18d7cdf39f4d13270a23d06a4a51b24b6ec05fdb,18d7cdf39f4d13270a23d06a4a51b24b6ec05fdb,"Add pts adjustment in SpliceInfoDecoder

This allows the user to interpret PTSs in the playback timebase.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145280921"
ojw28,2017-01-23 12:19:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5debf5a14a95016f955f47658d4bc6390a6c2381,5debf5a14a95016f955f47658d4bc6390a6c2381,"Use bitrate as fixed track selection tie breaker

If we don't have resolutions (and therefore cannot determine
pixel counts) then use bitrate as a tie breaker instead. Also
use pixel count as a tie breaker if pixel counts are known
but equal. Streams with known pixel counts will always be
preferred over streams without.

Issue: #2343

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145269968"
erdemguven,2017-01-23 11:38:33,https://api.github.com/repos/google/ExoPlayer/git/commits/9ac0add4be89c91b46acce28e579a08249ce67d5,9ac0add4be89c91b46acce28e579a08249ce67d5,"Add a BUILD file with mobile harness target to playbacktests/src/androidTest folder

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145267137"
AquilesCanta,2017-01-23 11:13:35,https://api.github.com/repos/google/ExoPlayer/git/commits/d303db975ed770528e5b51a243c5023a54c8ec6e,d303db975ed770528e5b51a243c5023a54c8ec6e,"Re-initialize the DemoApp player on BLWE

This CL shows a de facto way to solve BLWEs until an in-player
solution is implemented.

Issue:#1782

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145265895"
devint1,2017-01-22 19:05:00,https://api.github.com/repos/google/ExoPlayer/git/commits/24724158b1622955c3af2cfcefeb19248deced1e,24724158b1622955c3af2cfcefeb19248deced1e,Use ParseableByteArray to get ALAC sample rate
jcable,2017-01-22 17:53:14,https://api.github.com/repos/google/ExoPlayer/git/commits/440aeea66ce5987bdbf69ccf7455759d81f0da91,440aeea66ce5987bdbf69ccf7455759d81f0da91,working but still with stateful decoder. Sample subtitle <span> encoder but this doesn't seem to be how webvtt does it so not being used.
jcable,2017-01-22 15:13:29,https://api.github.com/repos/google/ExoPlayer/git/commits/141568ab0e2a4b18620cfcee46dd649dbc9bb1fa,141568ab0e2a4b18620cfcee46dd649dbc9bb1fa,better merge
jcable,2017-01-22 15:07:03,https://api.github.com/repos/google/ExoPlayer/git/commits/6ec840cc804bb759233a66757bbe32ced8d91831,6ec840cc804bb759233a66757bbe32ced8d91831,Merge remote-tracking branch 'upstream/dev-v2' into dev-v2
jcable,2017-01-22 15:02:40,https://api.github.com/repos/google/ExoPlayer/git/commits/94a36402f1fbaed8207115db64715f85c03b9f74,94a36402f1fbaed8207115db64715f85c03b9f74,possible conflict resolution
ojw28,2017-01-20 20:50:02,https://api.github.com/repos/google/ExoPlayer/git/commits/55ca323cee1906e499e65acfdbb32a027f1e1376,55ca323cee1906e499e65acfdbb32a027f1e1376,Add upstream.crypto package (and friends).
ojw28,2017-01-20 19:17:37,https://api.github.com/repos/google/ExoPlayer/git/commits/52d47aa244f677bf32ba8c3b7c284f61e44b66db,52d47aa244f677bf32ba8c3b7c284f61e44b66db,"Fix possible track selection NPE

If no tracks are selected at the start of playback, TrackSelectorResult
isEquivalent(null) returned true, meaning we were keeping the old result
(i.e. null), which we then tried to de-reference.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145105702"
AquilesCanta,2017-01-20 16:40:37,https://api.github.com/repos/google/ExoPlayer/git/commits/63604493b41d232602eca3f658dacd4d6690ec9e,63604493b41d232602eca3f658dacd4d6690ec9e,"Fix memory leak in HlsMediaChunk's

Issue:#2319

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145089668"
ojw28,2017-01-20 15:31:51,https://api.github.com/repos/google/ExoPlayer/git/commits/26b303a4496b89a96aeea7e758174b7c80aa0f9e,26b303a4496b89a96aeea7e758174b7c80aa0f9e,"Pull assertion and layer of indirection out from ChunkExtractorWrapper

It should be possible to remove ChunkExtractorWrapper from the track
output side as well (currently all extractor output is funneled via
ChunkExtractorWrapper just so it can adjust the format, which is kind
of unnecessary).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145083620"
ojw28,2017-01-20 13:55:41,https://api.github.com/repos/google/ExoPlayer/git/commits/6e18c97c209f6635813787f028a6335a04811671,6e18c97c209f6635813787f028a6335a04811671,"Pull assertion and layer of indirection out from ChunkExtractorWrapper

It should be possible to remove ChunkExtractorWrapper from the track
output side as well (currently all extractor output is funneled via
ChunkExtractorWrapper just so it can adjust the format, which is kind
of unnecessary).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=145076891"
ojw28,2017-01-19 21:14:03,https://api.github.com/repos/google/ExoPlayer/git/commits/7abc34c6ae29e1a3f349563a2a00bd30ea3e5fa4,7abc34c6ae29e1a3f349563a2a00bd30ea3e5fa4,"Respect decode-only flag in MetadataRenderer

Issue #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144999973"
ojw28,2017-01-19 21:11:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9617986538dc9ec637efcdaaf14af5369ce3b2c6,9617986538dc9ec637efcdaaf14af5369ce3b2c6,"Remove redundant MetadataDecoder.canDecode method

This is no longer needed as MetadataDecoderFactory
figures out which decoder should be used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144999613"
ojw28,2017-01-19 21:09:05,https://api.github.com/repos/google/ExoPlayer/git/commits/641597d7086a16f9ebcb7e69094c04990c1108bc,641597d7086a16f9ebcb7e69094c04990c1108bc,"Add a flag to enable EMSG output from FMP4 extractor

Issue #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144999302"
ojw28,2017-01-19 21:05:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e3b3c8b69ca641ac4d8827ca8b65eb594692a158,e3b3c8b69ca641ac4d8827ca8b65eb594692a158,"Display EMSG metadata events in EventLogger

Issue #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144998826"
ojw28,2017-01-19 17:14:50,https://api.github.com/repos/google/ExoPlayer/git/commits/430d8e8a7a376545649e0de5f4aff4d2cc8c1d88,430d8e8a7a376545649e0de5f4aff4d2cc8c1d88,"Rename SingleTrackMetadataOutput ahead of real metadata support

Issue #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144969838"
ojw28,2017-01-19 16:59:42,https://api.github.com/repos/google/ExoPlayer/git/commits/ae01c1a6fd01302941677d8233e2afde601389d2,ae01c1a6fd01302941677d8233e2afde601389d2,"Move inband event streams to Representation

This is more consistent with our handling of DRM init data,
and is more correct. It'll be up to whoever's using the
manifest to look one layer deeper and figure out what event
streams are defined on all representations, if they wish to
do so.

Issue #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144968183"
ojw28,2017-01-19 14:45:31,https://api.github.com/repos/google/ExoPlayer/git/commits/d9be650b3be2a7d8c6c61af43f04fe2d91de60e3,d9be650b3be2a7d8c6c61af43f04fe2d91de60e3,"DASH: Fix propagation of language from manifest

Issue: #2335

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144956177"
erdemguven,2017-01-18 17:28:17,https://api.github.com/repos/google/ExoPlayer/git/commits/4b957cce47e0a7eab92f4f02635a31c5110984bd,4b957cce47e0a7eab92f4f02635a31c5110984bd,"Fix streaming license renew error

When the first streaming license request response provided to mediaDrm it might return an empty array instead of null.
This was set to offlineLicenseKeySetId which made the work like there is a valid offline license.
Simplified the code and made it to set offlineLicenseKeySetId only if there is sensible data in keySetId.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144843144"
ojw28,2017-01-18 14:11:15,https://api.github.com/repos/google/ExoPlayer/git/commits/51f96374d46110438ec6ca2e0ba9bac4061299bd,51f96374d46110438ec6ca2e0ba9bac4061299bd,"Make headers consisting across build.gradle files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144826116"
andrewlewis,2017-01-18 11:22:04,https://api.github.com/repos/google/ExoPlayer/git/commits/bc4dc591f560f9c829eb1dd07a8ca62e8af452aa,bc4dc591f560f9c829eb1dd07a8ca62e8af452aa,"Fix some style nits in ID3 chapter support.

Issue: #2316

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144815010"
ojw28,2017-01-18 10:51:14,https://api.github.com/repos/google/ExoPlayer/git/commits/877c7f4e30ae23401d5856ff2e41a44ea6413b98,877c7f4e30ae23401d5856ff2e41a44ea6413b98,"Some misc file rearrangement.

- Move .graffle files out of third_party
- Add logo .ai file
- Remove logo .svg files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144812776"
cdrolle,2017-01-17 18:35:18,https://api.github.com/repos/google/ExoPlayer/git/commits/18a24a1fde68753737030bac9c7d56e6e7c292e4,18a24a1fde68753737030bac9c7d56e6e7c292e4,"Added the CEA-708 support to the open-source project.

Issue: #1807

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144726542"
ojw28,2017-01-17 17:37:33,https://api.github.com/repos/google/ExoPlayer/git/commits/1ffe7753c644a166cd6395e4b63a3394f6545943,1ffe7753c644a166cd6395e4b63a3394f6545943,Another ID3 bug fix
ojw28,2017-01-17 17:21:10,https://api.github.com/repos/google/ExoPlayer/git/commits/f1e3d3f244ff90db6ea53a168c99fb710860e722,f1e3d3f244ff90db6ea53a168c99fb710860e722,"Enable tunneling end-to-end

- Tunneling can be enabled by calling:
  trackSelector.setTunnelingAudioSessionId(
      C.generateAudioSessionIdV21(this));

- If enabled, tunneling is automatically used when the renderers
  and track selection combination support it. Tunneling is
  automatically turned on and off through playlists if the support
  changes.

Issue: #1688"
ojw28,2017-01-17 15:49:51,https://api.github.com/repos/google/ExoPlayer/git/commits/c828d9b0bf13e430b442a4a0bf801fe7b6e808b5,c828d9b0bf13e430b442a4a0bf801fe7b6e808b5,Some ID3 bug fixes
ojw28,2017-01-17 15:33:35,https://api.github.com/repos/google/ExoPlayer/git/commits/48099ee52eeaa871ddc9c65d2898790b8e35a728,48099ee52eeaa871ddc9c65d2898790b8e35a728,Fix comments
ojw28,2017-01-17 15:29:30,https://api.github.com/repos/google/ExoPlayer/git/commits/27b8c31b85ab89cd74d6010e73a06313e7330a81,27b8c31b85ab89cd74d6010e73a06313e7330a81,Merge branch 'geekygecko-dev-v2' into dev-v2
ojw28,2017-01-17 15:29:07,https://api.github.com/repos/google/ExoPlayer/git/commits/5aff31c0615dd05cabb4a92b17d658aeff742da7,5aff31c0615dd05cabb4a92b17d658aeff742da7,Further improve ID3 parsing
ojw28,2017-01-17 13:53:50,https://api.github.com/repos/google/ExoPlayer/git/commits/31602af3e6ccbfd9d26f3234cafb3274e1d20026,31602af3e6ccbfd9d26f3234cafb3274e1d20026,Merge branch 'dev-v2' of git://github.com/geekygecko/ExoPlayer into geekygecko-dev-v2
ojw28,2017-01-17 12:06:14,https://api.github.com/repos/google/ExoPlayer/git/commits/7f967f305718bc2c9ee679fdd7d014eccef0356b,7f967f305718bc2c9ee679fdd7d014eccef0356b,"DASH: Parse Role elements to select default audio/text tracks

Issue: #2058

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144693705"
AquilesCanta,2017-01-17 11:58:15,https://api.github.com/repos/google/ExoPlayer/git/commits/6e481178eaee66fca53cd98452b0153845083c1b,6e481178eaee66fca53cd98452b0153845083c1b,"Track HLS discontinuities when playlist does not declare sequence

This is an initial version that does not handle cross-playlists
adjustment in an ideal way.

Issue:#1789

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144692969"
AquilesCanta,2017-01-17 11:57:51,https://api.github.com/repos/google/ExoPlayer/git/commits/7d7a15919556a3e6b7a0c3c61c532ffd7f8571e0,7d7a15919556a3e6b7a0c3c61c532ffd7f8571e0,"Provide sample timestamps and subsample offset for Splice info

This will allow recreating timestamp adjustment on the decoding side.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144692956"
ojw28,2017-01-17 11:08:04,https://api.github.com/repos/google/ExoPlayer/git/commits/0e0b23f11efae99cf380ea064567df80d5f5582e,0e0b23f11efae99cf380ea064567df80d5f5582e,"Update getTrackType for completeness

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144690284"
ojw28,2017-01-16 15:59:32,https://api.github.com/repos/google/ExoPlayer/git/commits/79a08991241340860ee40fd8155c87eb301daa07,79a08991241340860ee40fd8155c87eb301daa07,"Always re-send format if sample buffer is null

Also clear the playingPeriodHolder in the case the renderers
are being disabled. This is required to ensure that
setPlayingPeriodHolder isn't turned into a no-op, which will
break the seek.

Issue: #2330

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144635220"
geekygecko,2017-01-17 01:33:18,https://api.github.com/repos/google/ExoPlayer/git/commits/f6ecaddc881b6b7765cc19a93507d17e4f810443,f6ecaddc881b6b7765cc19a93507d17e4f810443,Improved ID3 chapter parsing code from feedback given.
geekygecko,2017-01-17 01:30:48,https://api.github.com/repos/google/ExoPlayer/git/commits/5153e9e977e1425558a4135859c0f17621d534fd,5153e9e977e1425558a4135859c0f17621d534fd,Improved ID3 chapter parsing code from feedback given.
ojw28,2017-01-16 11:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/60a3eda1e02e53b8ef8b977b70da4168695541fa,60a3eda1e02e53b8ef8b977b70da4168695541fa,"Support tunneling in video renderer

At this point the renderers all have TODOs in enable(),
and turning on tunneling is reduced to the problem of
propagating a tunneling ID to these points.

Issue: #1688

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144619393"
ojw28,2017-01-16 09:44:59,https://api.github.com/repos/google/ExoPlayer/git/commits/5742c877558693fc6cceb99b9166d08f0dda04ec,5742c877558693fc6cceb99b9166d08f0dda04ec,"Merge pull request #2327 from pipelka/audio-seek-fix

reconfigure audiotrack on format change"
geekygecko,2017-01-16 07:10:02,https://api.github.com/repos/google/ExoPlayer/git/commits/f2f1058066af4f9160ad56a9724288afaa350a16,f2f1058066af4f9160ad56a9724288afaa350a16,Added ID3 chapter support.
ojw28,2017-01-16 00:02:44,https://api.github.com/repos/google/ExoPlayer/git/commits/a418b132d901ef48a9383cf9c461e22c862a916b,a418b132d901ef48a9383cf9c461e22c862a916b,"Merge pull request #2318 from WeiChungChang/far_seek_improvement

Improve far seek performance of chunkSampleStream"
ojw28,2017-01-16 00:01:13,https://api.github.com/repos/google/ExoPlayer/git/commits/bd744fc50855ce74b94872e4af7ebf4f0ff9263c,bd744fc50855ce74b94872e4af7ebf4f0ff9263c,"Merge pull request #2314 from meteoorkip/vector-drawables

Fix vector drawable usage on API level 21 or above"
erdemguven,2017-01-13 17:01:59,https://api.github.com/repos/google/ExoPlayer/git/commits/418cd9e7e3c6b983a887288fe5f1eb569b0c4c43,418cd9e7e3c6b983a887288fe5f1eb569b0c4c43,"Make DefaultLoadControl use PriorityTaskManager if one is given

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144448491"
supercairos,2017-01-14 13:47:21,https://api.github.com/repos/google/ExoPlayer/git/commits/2cf8553049888d4fac70fba3777fb8a35cd8f5e9,2cf8553049888d4fac70fba3777fb8a35cd8f5e9,"opus: use fixed max size in Opus decoding as per documentation: If this is less than the maximum packet duration (120 ms; 5760 for 48kHz), this function will not be capable of decoding some packets."
pipelka,2017-01-14 11:14:37,https://api.github.com/repos/google/ExoPlayer/git/commits/24a0061caacc83685939441d4a956f140aee2ed4,24a0061caacc83685939441d4a956f140aee2ed4,"reconfigure audiotrack on format change

under certain circumstances (e.g. seek to a position where the input format
changed) the audio track needs a reconfigure even if there aren't any
pending buffers"
WeiChungChang,2017-01-14 02:22:27,https://api.github.com/repos/google/ExoPlayer/git/commits/2214a4c152fab862c928875f8265e77676d3652b,2214a4c152fab862c928875f8265e77676d3652b,'refine_to_make_flow_simpler'
devint1,2017-01-14 01:45:36,https://api.github.com/repos/google/ExoPlayer/git/commits/30c59c7a3f93387bbf2edd66a2089d54705dddf8,30c59c7a3f93387bbf2edd66a2089d54705dddf8,Apple Lossless (ALAC) support
andrewlewis,2017-01-13 16:39:30,https://api.github.com/repos/google/ExoPlayer/git/commits/5a16aee2c9c5ab73626a92da01c25bad03b8f969,5a16aee2c9c5ab73626a92da01c25bad03b8f969,"Use stereo for mono audio passthrough on fugu.

Also backport the Shield workaround to v1.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144446498"
ojw28,2017-01-13 16:11:08,https://api.github.com/repos/google/ExoPlayer/git/commits/270f68a95e5fb570cce0cfeeb09f3fb89076e471,270f68a95e5fb570cce0cfeeb09f3fb89076e471,"Add convenience methods to query current window

- Support querying whether the current window is dynamic
  and seekable. The new methods are similar to getDuration,
  which is also a convenience method for the current window.
- Improve demo app to restore positions in VOD items within
  playlists where the last item is live. Also restore the
  position within the window for live items unless the player
  failed with BehindLiveWindowException.

Issue: #2320

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144443898"
andrewlewis,2017-01-13 16:02:59,https://api.github.com/repos/google/ExoPlayer/git/commits/ca7febe442797c0c07b2b5db2be3686f255c3c7f,ca7febe442797c0c07b2b5db2be3686f255c3c7f,"Remove unused local variable in AudioTrack.java.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144443010"
AquilesCanta,2017-01-13 14:07:04,https://api.github.com/repos/google/ExoPlayer/git/commits/28e117d25fb211b18a815b961135b78e7a18abdb,28e117d25fb211b18a815b961135b78e7a18abdb,"Add support for #EXT-X-START tag

This overrides the start position relative to the window.

Issue:#1544

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144434903"
erdemguven,2017-01-13 13:03:00,https://api.github.com/repos/google/ExoPlayer/git/commits/63123f455c405d3828eba67bd5db7b4375175d3d,63123f455c405d3828eba67bd5db7b4375175d3d,"Add SimpleCache tests for encrypted index file

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144431191"
erdemguven,2017-01-13 12:46:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5f4d6506e0918405324dea20664a64485208ebe4,5f4d6506e0918405324dea20664a64485208ebe4,"Add argument checks and some javadoc to CachedContentIndex

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144430372"
ojw28,2017-01-13 12:16:45,https://api.github.com/repos/google/ExoPlayer/git/commits/0c53a4e9131b0c16413badedad24a4b0d05e29a4,0c53a4e9131b0c16413badedad24a4b0d05e29a4,"Add TrackSelectorResult

This class can accommodate extra information that may potentially
be specified by TrackSelectors in the future (e.g. configuration
for renderers). Even if we don't do this, it's cleaner to have a
proper class and an info field to refer to, as opposed to using a
Pair.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144428963"
erdemguven,2017-01-13 11:47:06,https://api.github.com/repos/google/ExoPlayer/git/commits/060f2a5d6f97185d9a21cf2bb3735293d9219a8a,060f2a5d6f97185d9a21cf2bb3735293d9219a8a,"Remove unnecessary parameter and local variables

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144427132"
erdemguven,2017-01-13 11:00:10,https://api.github.com/repos/google/ExoPlayer/git/commits/f194df114967e7f2a1dd42bd54d6a060b436dc2e,f194df114967e7f2a1dd42bd54d6a060b436dc2e,"Close InputStream after read

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144424329"
ojw28,2017-01-12 19:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/1eede5d5bb9c0271592b05dbd0db320214d09b18,1eede5d5bb9c0271592b05dbd0db320214d09b18,"Fix gradle/proguard setup

- Add proguard rules for libraries/extensions into .aar files
- Add proguard rules to retain CEA608/708 decoder constructors
- Remove lots of default config from gradle files
- Remove disabling of abort on lint error
- Enable optimizations on release builds of demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144350233"
AquilesCanta,2017-01-12 17:28:20,https://api.github.com/repos/google/ExoPlayer/git/commits/264ba8cfcff8452bbcb4a6761f816e179bba604b,264ba8cfcff8452bbcb4a6761f816e179bba604b,"Change MetadataDecoder interface to receive a MetadataInputBuffer

This allows passing a subsampleOffsetUs as in Text decoding.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144334172"
AquilesCanta,2017-01-12 17:27:11,https://api.github.com/repos/google/ExoPlayer/git/commits/4a6a8553e901af72c35edc0fa39f4ffca31ffc9d,4a6a8553e901af72c35edc0fa39f4ffca31ffc9d,"Check #EXTM3U header is present in HLS playlists

Issue:#2301

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144334062"
cdrolle,2017-01-12 16:45:59,https://api.github.com/repos/google/ExoPlayer/git/commits/706a6b83a94ff6adec1ca29627ff537f0194d11a,706a6b83a94ff6adec1ca29627ff537f0194d11a,"Removed the direct-referencing of the Cea608Decoder and Cea708Decoder classes from SubtitleDecoderFactory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144329795"
ojw28,2017-01-12 13:46:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e125ed705e0f9e33f54a6e397a2a443abedff0f7,e125ed705e0f9e33f54a6e397a2a443abedff0f7,"Report tunneling support via RendererCapabilities API

Also revert ability to query for a decoder that explicitly
supports tunneling, since in the new design we'll just be
querying the first decoder provided by the MediaCodecSelector
and then reporting what it supports. This is in line with
what we do when reporting support for adaptive switching.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144315746"
ojw28,2017-01-11 18:45:29,https://api.github.com/repos/google/ExoPlayer/git/commits/cd42434719bb79017be975d9048797267ee4ec4a,cd42434719bb79017be975d9048797267ee4ec4a,"Plumbing to enable tunneling on AudioTrack from renderers

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144223539"
ojw28,2017-01-11 18:12:42,https://api.github.com/repos/google/ExoPlayer/git/commits/3547c9034e563828fcd72e2a5e752effe0ace5de,3547c9034e563828fcd72e2a5e752effe0ace5de,"Report audio decoder adaptation support correctly

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144219518"
andrewlewis,2017-01-11 15:02:27,https://api.github.com/repos/google/ExoPlayer/git/commits/2906a2ea0924243a414497753644dc4c5e026df4,2906a2ea0924243a414497753644dc4c5e026df4,"Simplify AudioTrack.handleBuffer's return value.

Position discontinuities are notified via AudioTrack.Listener.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144202048"
ojw28,2017-01-11 10:28:03,https://api.github.com/repos/google/ExoPlayer/git/commits/444811c0105673bd04c46afce40484898b661a2f,444811c0105673bd04c46afce40484898b661a2f,"Don't overflow when dealing with large segment numbers

Issue: #2311

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144182445"
andrewlewis,2017-01-10 12:01:35,https://api.github.com/repos/google/ExoPlayer/git/commits/ce03b8c246dec3c4728848b21d9adb337f24a5c2,ce03b8c246dec3c4728848b21d9adb337f24a5c2,"Move AudioTrack initialization into handleBuffer.

Move initialization code from the audio renderers into handleBuffer. The audio
session id and tunneling enabled state can be altered using new setters.

This change is not intended to change the behavior of the audio renderers.
Before this change, the AudioTrack would always be reinitialized by the
renderers before calling handleBuffer.

Add a protected onAudioTrackUnderrun method for custom renderers that want to
implement custom handling of underruns.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144067149"
erdemguven,2017-01-10 10:53:21,https://api.github.com/repos/google/ExoPlayer/git/commits/5c89bbedb74ab8b5d7d1d5217f83a271accfd163,5c89bbedb74ab8b5d7d1d5217f83a271accfd163,"Fix leftover bytes in cached content index file

Extra calls to CipherOutputStream.close() causes each time extra 16 bytes written to the
underlying OutputStream. Prevented close() is called more than once and also discarded any
data in ReusableBufferedOutputStream buffer on reset().

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144063120"
jcable,2017-01-13 08:48:53,https://api.github.com/repos/google/ExoPlayer/git/commits/121486738bf8e1ddde60290e46453926ab9f6937,121486738bf8e1ddde60290e46453926ab9f6937,"10* was an experiment, not wanted."
jcable,2017-01-13 08:04:23,https://api.github.com/repos/google/ExoPlayer/git/commits/ff64d2b382e68327db69c4e6df4e82be0c1884bc,ff64d2b382e68327db69c4e6df4e82be0c1884bc,move Matroska specific code back to the Matroska extractor
WeiChungChang,2017-01-12 02:49:37,https://api.github.com/repos/google/ExoPlayer/git/commits/cb0394b9cf469b5ac0092ab178dd8763f2a11566,cb0394b9cf469b5ac0092ab178dd8763f2a11566,'improve_far_seek_of_chunkSampleStream'
jcable,2017-01-11 23:11:32,https://api.github.com/repos/google/ExoPlayer/git/commits/d71707f22009929032348acf2cdc34a2caa54afa,d71707f22009929032348acf2cdc34a2caa54afa,Make constructor clearer
meteoorkip,2017-01-11 16:36:10,https://api.github.com/repos/google/ExoPlayer/git/commits/28e221f92ee045ac4a8d4583c5ba7e0559784498,28e221f92ee045ac4a8d4583c5ba7e0559784498,Fix vector drawable usage on API level 21 or above
jcable,2017-01-11 08:13:43,https://api.github.com/repos/google/ExoPlayer/git/commits/8ae8ac79bc59795df5a16b7552c13bc83dbddf86,8ae8ac79bc59795df5a16b7552c13bc83dbddf86,move Matroska specific things to the MatroskaExtractor
ojw28,2017-01-10 10:27:41,https://api.github.com/repos/google/ExoPlayer/git/commits/deefe50abc205579de21c8be892cd1d89255ddee,deefe50abc205579de21c8be892cd1d89255ddee,"Handle ID3 frames that end with empty text field

Issue: #2309

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144061654"
andrewlewis,2017-01-10 09:08:26,https://api.github.com/repos/google/ExoPlayer/git/commits/bf65df1b356ed3e48410061cc499da57763eb7d0,bf65df1b356ed3e48410061cc499da57763eb7d0,"Allow ClippingMediaPeriod to be used on its own.

ClippingMediaPeriod may be a useful component for other MediaSources too so
remove its dependency on ClippingMediaSource.

Also allow the clipping end point to be TIME_END_OF_SOURCE, in which case
the clipping window extends to the end of the wrapped period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=144056285"
ojw28,2017-01-09 12:15:00,https://api.github.com/repos/google/ExoPlayer/git/commits/59ab0fa9f1e5f09d1e9182383184c7ab2acf6cfc,59ab0fa9f1e5f09d1e9182383184c7ab2acf6cfc,"Introduce MetadataDecoderFactory

This is analogous to what we do for text/subtitles, and
adds support for playlists where the type of metadata
changes from one playlist item to the next.

Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143948307"
jcable,2017-01-09 23:48:40,https://api.github.com/repos/google/ExoPlayer/git/commits/ac98874021d752a57006a1955a71f31a50cf4b12,ac98874021d752a57006a1955a71f31a50cf4b12,"move header into track.output.format object and then use it in the decoder create method.
This doesn't make a stateless decoder but it is a step in the right direction.
Note that subtitles are not rendering. Is there something wrong with the timecodes?"
ojw28,2017-01-06 16:25:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ae2e84df35c777d7b03ea7fa59bb8e01d82b26ed,ae2e84df35c777d7b03ea7fa59bb8e01d82b26ed,"Set HLS period duration when live stream ends

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143776633"
ojw28,2017-01-06 16:23:26,https://api.github.com/repos/google/ExoPlayer/git/commits/1da9e31d688053eb370d15637c4c75f0c1fb6882,1da9e31d688053eb370d15637c4c75f0c1fb6882,"Parse EMSG boxes in FragmentedMp4Extractor

Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143776526"
ojw28,2017-01-06 16:07:15,https://api.github.com/repos/google/ExoPlayer/git/commits/f2634d11f5abb80bb06596419e9d7cfa502726ed,f2634d11f5abb80bb06596419e9d7cfa502726ed,"Support emsg metadata decoding

Note: End to end emsg support is still non-functional.
There's some additional plumbing that still needs to
be done.

Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143775147"
erdemguven,2017-01-06 14:52:20,https://api.github.com/repos/google/ExoPlayer/git/commits/9d5c750fe914cc7c51f8afa49bb113121352510f,9d5c750fe914cc7c51f8afa49bb113121352510f,"Support offline drm key downloading and restoring

Renamed StreamingDrmSessionManager to DefaultDrmSessionManager and added functionality to download, restore, renew and release offline keys. Added a utility class, OfflineLicenseHelper, to facilitate use of DefaultDrmSessionManager for downloading, renewing and releasing offline keys.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143769955"
andrewlewis,2017-01-06 12:17:07,https://api.github.com/repos/google/ExoPlayer/git/commits/b2a153d56815961f369988ba52364a0de4d577e3,b2a153d56815961f369988ba52364a0de4d577e3,"Add a player test for renderers reading ahead.

Also move timeline, manifest and format verifications into the test* methods.

Issue: #2252

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143761969"
drhill,2017-01-06 02:27:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0468a80d4125af669c0dadf66bd53144db323423,0468a80d4125af669c0dadf66bd53144db323423,just use original plane width to calculate width proportion to use later as size and keep aspect ratio for height
ojw28,2017-01-05 21:40:23,https://api.github.com/repos/google/ExoPlayer/git/commits/9d48d4e4865a98282300194afc995d9783109067,9d48d4e4865a98282300194afc995d9783109067,"Support setting default headers on HttpDataSource.Factory's

Issue: #2166

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143703258"
andrewlewis,2017-01-05 17:11:50,https://api.github.com/repos/google/ExoPlayer/git/commits/a77bc8d457dc2691625c5f56792f2786230a7b0e,a77bc8d457dc2691625c5f56792f2786230a7b0e,"Close DataSources quietly.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143672900"
cdrolle,2017-01-05 16:15:29,https://api.github.com/repos/google/ExoPlayer/git/commits/01d22f8123e16880578d0e9352a033cd1fb2f42a,01d22f8123e16880578d0e9352a033cd1fb2f42a,"Handle empty RawCC files.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143667717"
ojw28,2017-01-05 14:58:13,https://api.github.com/repos/google/ExoPlayer/git/commits/8a0e76ba32145b90e33fcf0c80f3c7e05a2a2b9d,8a0e76ba32145b90e33fcf0c80f3c7e05a2a2b9d,"Make sure we don't read ahead of deferred enable/disable operations

Issue: #2290"
ojw28,2017-01-05 14:57:31,https://api.github.com/repos/google/ExoPlayer/git/commits/037aeaf7646cdf08c6996f5cf438bbabf759979d,037aeaf7646cdf08c6996f5cf438bbabf759979d,Some minor cleanup
ojw28,2017-01-05 12:38:06,https://api.github.com/repos/google/ExoPlayer/git/commits/0cacd388fdff22408b54e2b7de2021c5b11f2742,0cacd388fdff22408b54e2b7de2021c5b11f2742,"Merge pull request #2299 from hassanabidpk/rm--clippingtest

remove ClippingMediaSourceTest from library"
hassanabidpk,2017-01-05 12:31:08,https://api.github.com/repos/google/ExoPlayer/git/commits/75eb047e626ff5405c55cf1da382735124935c35,75eb047e626ff5405c55cf1da382735124935c35,remove ClippingMediaSourceTest from library
ojw28,2017-01-04 20:38:52,https://api.github.com/repos/google/ExoPlayer/git/commits/1d9d68dd12a424f528521f385294d31ca39d1f20,1d9d68dd12a424f528521f385294d31ca39d1f20,"Assume samples are at start of mdat when offset is negative

We've seen this issue reported three times now, so it's
obviously not an isolated problem. Do you think anything
bad will happen to non-SmoothStreaming playback cases if
I do this? I suspect not, but if you feel strongly I can
easily add a FLAG_WORKAROUND_X flag for it, and enable
it for SmoothStreaming only.

https://github.com/google/ExoPlayer/issues/2292
https://github.com/google/ExoPlayer/issues/2101
https://github.com/google/ExoPlayer/issues/1152

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143583714"
erdemguven,2017-01-04 17:12:02,https://api.github.com/repos/google/ExoPlayer/git/commits/4a0f224e1219d732eae3a4a4394d577974a119df,4a0f224e1219d732eae3a4a4394d577974a119df,"Add a new flag to DataSpec which permits content to be cached even if its length can not be resolved

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143560360"
ojw28,2017-01-04 16:19:04,https://api.github.com/repos/google/ExoPlayer/git/commits/5082d1f28232d192084e5472a15e2a6275c691e2,5082d1f28232d192084e5472a15e2a6275c691e2,"Some boilerplate for DASH EMSG support

- Parse EMSG leaf atoms during FMP4 extraction (although
  currently they're just discarded).
- Add readNullTerminatedString to ParsableByteArray.

Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143555965"
ojw28,2017-01-04 16:13:05,https://api.github.com/repos/google/ExoPlayer/git/commits/f735a86ebbb57b33dad2edfe4adb949ccb7f32ec,f735a86ebbb57b33dad2edfe4adb949ccb7f32ec,"Better handle inconsistent HLS timeline updates

Issue: #2249

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143555467"
ojw28,2017-01-04 15:57:13,https://api.github.com/repos/google/ExoPlayer/git/commits/44d6b1a2710965225943d941cb3c4150f4fc82a9,44d6b1a2710965225943d941cb3c4150f4fc82a9,"Add some initial plumbing for DASH EMSG support

Issue: #2176

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143554094"
ojw28,2017-01-04 15:10:54,https://api.github.com/repos/google/ExoPlayer/git/commits/21762622ac3b892865b2c08340d4ec45e3b7021e,21762622ac3b892865b2c08340d4ec45e3b7021e,"Fix typo in release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143550913"
ojw28,2017-01-04 14:59:38,https://api.github.com/repos/google/ExoPlayer/git/commits/ae30fe496aa11e5af28625953c7048975a2ef884,ae30fe496aa11e5af28625953c7048975a2ef884,"Fix potential NPE if source is released without being prepared

Issue: #2264

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143550088"
ojw28,2017-01-04 14:54:12,https://api.github.com/repos/google/ExoPlayer/git/commits/2512bd6e77fc53d46e29007963cd50ba64b21366,2512bd6e77fc53d46e29007963cd50ba64b21366,"Add test for decoding ID3 PRIV frame

I wrote this whilst investigating a user issue. It looks like
we don't need to do anything about the issue itself, but since
I wrote the test we may as well keep it!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143549697"
ojw28,2017-01-04 14:53:58,https://api.github.com/repos/google/ExoPlayer/git/commits/9f81b72291bb0bbe274577387e0747bdbadd7ffa,9f81b72291bb0bbe274577387e0747bdbadd7ffa,"Fix GTS playback test timestamp verifications

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143549680"
ojw28,2017-01-03 20:57:18,https://api.github.com/repos/google/ExoPlayer/git/commits/b7746609898ec9c7bfaa3590417f5db1efd4d07a,b7746609898ec9c7bfaa3590417f5db1efd4d07a,"Add multi-period ExoPlayer unit test

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143475824"
efimki,2017-01-03 20:55:20,https://api.github.com/repos/google/ExoPlayer/git/commits/dbfb187b6aa7bb427601ac2023bba63733121527,dbfb187b6aa7bb427601ac2023bba63733121527,"[Cronet] Replace usage of deprecated UrlRequestException with CronetException.

- Errors reported by native stack use org.chromium.net.NetworkException class.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143475649"
ojw28,2017-01-03 19:57:10,https://api.github.com/repos/google/ExoPlayer/git/commits/46245251e145e88cce22f5c0faf570109ad48566,46245251e145e88cce22f5c0faf570109ad48566,"Fix bad indent + clean up Format formatting

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143469714"
ojw28,2017-01-03 15:01:38,https://api.github.com/repos/google/ExoPlayer/git/commits/361241f81cd494a9daae80b769ed6d7cd1c37d99,361241f81cd494a9daae80b769ed6d7cd1c37d99,"Make SeekBar work properly with key events if focusable

This isn't perfect because it performs seeks whilst the
user is holding down L/R, rather than when they release
it. Performing the seek on release properly looks non
trivial, and would likely require extending SeekBar.

Issue: #2278

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143440580"
andrewlewis,2017-01-03 13:06:01,https://api.github.com/repos/google/ExoPlayer/git/commits/04968a6da511374e393a6becd34ac473fa9f2370,04968a6da511374e393a6becd34ac473fa9f2370,"Fix condition for re-enabling renderers to handle reading ahead.

Issue: #2252

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143433510"
ojw28,2017-01-03 13:02:01,https://api.github.com/repos/google/ExoPlayer/git/commits/faff5ec910d4f8bc8c1f7b2e709a325dc3ebe4a9,faff5ec910d4f8bc8c1f7b2e709a325dc3ebe4a9,"Add masking to correctly select renderer

Issue: #2269

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=143433012"
erdemguven,2016-12-22 17:27:20,https://api.github.com/repos/google/ExoPlayer/git/commits/39827fad2781de4a5f3f3da0c6636b62f515f3fc,39827fad2781de4a5f3f3da0c6636b62f515f3fc,"Allow specifying a custom cacheKey to ExtractorMediaSource

Issue: #2201

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142772885"
ojw28,2017-01-04 22:32:28,https://api.github.com/repos/google/ExoPlayer/git/commits/0b141aeeeec31d05d3e677e7dd66693cec83c482,0b141aeeeec31d05d3e677e7dd66693cec83c482,"Revert ""Improving handling of atoms with size less than header in FragmentedMp4Extractor.""

This reverts commit 71186ef16ee2f3dc07a4f9d1d696c273b1c6ca87."
ojw28,2017-01-04 14:55:36,https://api.github.com/repos/google/ExoPlayer/git/commits/dbebaa874f7943632291d736b32b08feb1cc69ff,dbebaa874f7943632291d736b32b08feb1cc69ff,"Merge pull request #2288 from sakuna63/release-v2

Fix RELEASENOTES.md"
sakuna63,2017-01-04 08:24:53,https://api.github.com/repos/google/ExoPlayer/git/commits/d816d26d83804339007806fca2ffd84316b2b975,d816d26d83804339007806fca2ffd84316b2b975,Fix RELEASENOTES.md
ojw28,2017-01-03 19:43:34,https://api.github.com/repos/google/ExoPlayer/git/commits/da9c10a1b4a2f5c79851501f0c66dfda5fd97351,da9c10a1b4a2f5c79851501f0c66dfda5fd97351,"Merge pull request #2285 from colinrtwhite/dev-v2

Use vector drawables for the SimpleExoPlayer player control buttons."
colinrtwhite,2017-01-03 04:09:59,https://api.github.com/repos/google/ExoPlayer/git/commits/b1ea1873d377b1c7fe539ee30b59c7fb790bf55e,b1ea1873d377b1c7fe539ee30b59c7fb790bf55e,Use Material Design drawables for the SimpleExoPlayer player control buttons.
ojw28,2017-01-03 14:59:37,https://api.github.com/repos/google/ExoPlayer/git/commits/1d8302c792ae818e29258566ca3a905095939861,1d8302c792ae818e29258566ca3a905095939861,"Merge pull request #2273 from meteoorkip/default_artwork

Add default artwork support to SimpleExoPlayerView"
meteoorkip,2016-12-31 21:48:14,https://api.github.com/repos/google/ExoPlayer/git/commits/eda393ba824e3345cdef20f060377a71e54c1a18,eda393ba824e3345cdef20f060377a71e54c1a18,"Add default artwork support to SimpleExoPlayerView

Add support for a default artwork image that is displayed if no artwork can be found in the metadata."
jcable,2017-01-02 15:49:30,https://api.github.com/repos/google/ExoPlayer/git/commits/ef2d7c7fd50334dbbfe70049a1be379f386533f4,ef2d7c7fd50334dbbfe70049a1be379f386533f4,tests pass.
jcable,2017-01-02 14:48:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b692d9fac5e54fabb1579f321d89a56eeda86d24,b692d9fac5e54fabb1579f321d89a56eeda86d24,tidy and make compatible with test.
jcable,2017-01-02 14:35:23,https://api.github.com/repos/google/ExoPlayer/git/commits/e99ad278471413514eca49727cb36f6ff2ac76b8,e99ad278471413514eca49727cb36f6ff2ac76b8,not needed
jcable,2017-01-02 14:29:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1364e2337d509d13626a69465b6c2157560e736c,1364e2337d509d13626a69465b6c2157560e736c,add test files for SSA.
jcable,2017-01-02 14:20:14,https://api.github.com/repos/google/ExoPlayer/git/commits/08e1d356adc5c257a6dbcb1037a3480654c69488,08e1d356adc5c257a6dbcb1037a3480654c69488,add changed files for SSA from branch
jcable,2017-01-02 14:07:29,https://api.github.com/repos/google/ExoPlayer/git/commits/246a0dc86ef4283a7d6d2efcfaf2b375c4c82cb2,246a0dc86ef4283a7d6d2efcfaf2b375c4c82cb2,add SSA/ASS specific files from branch
drhill,2016-12-21 12:54:23,https://api.github.com/repos/google/ExoPlayer/git/commits/8804ecded40be1ef52328d8321fccb11b179fdcc,8804ecded40be1ef52328d8321fccb11b179fdcc,remove unneeded changes
drhill,2016-12-21 03:49:18,https://api.github.com/repos/google/ExoPlayer/git/commits/44b21f2e3b65787aa6b5b547d5ac67e97a924a61,44b21f2e3b65787aa6b5b547d5ac67e97a924a61,"remove imagecue and add bitmap to cue with size_height, change to painter for displaying"
ojw28,2016-12-21 00:51:30,https://api.github.com/repos/google/ExoPlayer/git/commits/163a3a7bb876d309f5d28cc62473f093802d8aea,163a3a7bb876d309f5d28cc62473f093802d8aea,Delete HlsTest.java
ojw28,2016-12-21 00:51:06,https://api.github.com/repos/google/ExoPlayer/git/commits/807e2db02617a324968a5c672e050261e7bbca0a,807e2db02617a324968a5c672e050261e7bbca0a,Delete HlsTest
ojw28,2016-12-20 12:33:04,https://api.github.com/repos/google/ExoPlayer/git/commits/0d135d37b8e3d9118d80c3475aa08e2575efcf14,0d135d37b8e3d9118d80c3475aa08e2575efcf14,Add comment for workaround
ojw28,2016-12-20 12:26:20,https://api.github.com/repos/google/ExoPlayer/git/commits/efc8f6fe4248a85d2ffac218e33426ee9b23f64e,efc8f6fe4248a85d2ffac218e33426ee9b23f64e,"Merge pull request #2134 from drhill/dev-v2_passthroughChannelFix

fix 6.1 channel passthrough failing"
ojw28,2016-12-20 12:00:59,https://api.github.com/repos/google/ExoPlayer/git/commits/936f074e8e1d32106992dca8006ae668d6bbc8c6,936f074e8e1d32106992dca8006ae668d6bbc8c6,"Merge pull request #2231 from google/dev-v2-r2.1.1

r2.1.1"
ojw28,2016-12-20 11:28:19,https://api.github.com/repos/google/ExoPlayer/git/commits/cb3f3499265e5dbf50ac4544b5a3a8fe7fd0ad8c,cb3f3499265e5dbf50ac4544b5a3a8fe7fd0ad8c,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142539314"
ojw28,2016-12-20 11:28:19,https://api.github.com/repos/google/ExoPlayer/git/commits/a007d9a2e73a5cac811f82c8f57ac84aed527c03,a007d9a2e73a5cac811f82c8f57ac84aed527c03,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142539314"
ojw28,2016-12-19 14:56:04,https://api.github.com/repos/google/ExoPlayer/git/commits/f3d1065b5f26824535cea51dafa90daff13b90b4,f3d1065b5f26824535cea51dafa90daff13b90b4,"Fix large timestamps for HLS playbacks

- If there's no program-date-time then this change is
  a no-op.
- If there is a program-date-time this change considers
  the period as having started at the epoch rather than
  at the start of the content. The window is then set
  to start at the start of the content. This is a little
  weird, but is required so that the period sample
  timestamps match the start of the period. Note that
  this also brings the handling of on-demand in line
  with how the live case is handled, meaning there wont
  be weird changes if a live stream changes into an
  on-demand one.

Issue: #2224

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142442719"
ojw28,2016-12-16 14:03:28,https://api.github.com/repos/google/ExoPlayer/git/commits/ada19a25403ac11f4899624febfca8a2d17e17b2,ada19a25403ac11f4899624febfca8a2d17e17b2,"Correctly offset subsample timestamps.

This has always been broken in V2, but the issue is now also
visible for the very first period in the timeline because we
offset if by 60s. Previously the issue would only have been
visible from the start of the second period.

Issue: #2208

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142252702"
ojw28,2016-12-15 11:31:18,https://api.github.com/repos/google/ExoPlayer/git/commits/a6360ab6c05235302ae9a54c8dab7678fa880d5e,a6360ab6c05235302ae9a54c8dab7678fa880d5e,"Fix playback of media with >1MB preparation data

Also clarify when getNextLoadPositionUs and continueLoading
can be called.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142124497"
ojw28,2016-12-14 17:47:02,https://api.github.com/repos/google/ExoPlayer/git/commits/fc3ed0bf31c7c55c89aae74844134316759e349d,fc3ed0bf31c7c55c89aae74844134316759e349d,"Add missing # chars to release notes!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142028608"
ojw28,2016-12-19 14:56:04,https://api.github.com/repos/google/ExoPlayer/git/commits/ab88821614cd2762b4fb4f79234b8963c4deb11c,ab88821614cd2762b4fb4f79234b8963c4deb11c,"Fix large timestamps for HLS playbacks

- If there's no program-date-time then this change is
  a no-op.
- If there is a program-date-time this change considers
  the period as having started at the epoch rather than
  at the start of the content. The window is then set
  to start at the start of the content. This is a little
  weird, but is required so that the period sample
  timestamps match the start of the period. Note that
  this also brings the handling of on-demand in line
  with how the live case is handled, meaning there wont
  be weird changes if a live stream changes into an
  on-demand one.

Issue: #2224

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142442719"
drhill,2016-12-19 03:37:37,https://api.github.com/repos/google/ExoPlayer/git/commits/47d8b7ff164ae2b162913ec9fea92bcc7fa58839,47d8b7ff164ae2b162913ec9fea92bcc7fa58839,get source dimensions from plane stored in subs
drhill,2016-12-17 19:43:07,https://api.github.com/repos/google/ExoPlayer/git/commits/5d0501be8277201654152da3306dc98a4e55d86b,5d0501be8277201654152da3306dc98a4e55d86b,less interfacy.. more classy
drhill,2016-12-17 18:39:47,https://api.github.com/repos/google/ExoPlayer/git/commits/8277999b16894a5c54035d5b025d7c65bf9b35ec,8277999b16894a5c54035d5b025d7c65bf9b35ec,add imageview into simpleexoplayerview to display subtitles that are image based
ojw28,2016-12-16 15:24:51,https://api.github.com/repos/google/ExoPlayer/git/commits/4bb8793203ff280189d15849669304ebb138d814,4bb8793203ff280189d15849669304ebb138d814,"Deduplicate reported position discontinuities

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142257743"
ojw28,2016-12-16 14:03:28,https://api.github.com/repos/google/ExoPlayer/git/commits/e0586a48f02131d66fa2988d29a5064e5836ea6f,e0586a48f02131d66fa2988d29a5064e5836ea6f,"Correctly offset subsample timestamps.

This has always been broken in V2, but the issue is now also
visible for the very first period in the timeline because we
offset if by 60s. Previously the issue would only have been
visible from the start of the second period.

Issue: #2208

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142252702"
cdrolle,2016-12-15 20:23:48,https://api.github.com/repos/google/ExoPlayer/git/commits/65490f52f8b5c5f7925ec121801b59e3ec958d40,65490f52f8b5c5f7925ec121801b59e3ec958d40,"Added support for handling window/cue priority and fill color to Cue and SubtitlePainter.

Cue has been modified to optionally accept a fill color and a toggle specifying when to use the fill color. When the fill color toggle is set, then SubtitlePainter will use the fill color value instead of the color specified by the device's Accessibility settings. Cea708Decoder has also been modified to propagate that value, as well as cleaned up (in terms of documentation) to prepare it for inclusion in the open-source project.

There is also a new Cea708Cue, extending Cue, which holds the Cue's priority, which is used to sort potentially overlapping cues/windows.

Note that I've left the @ClosedSource annotation and logging in this CL. I intend to start testing the 608 and 708 functionality in the Fiber app to ensure that it works as expected on a wide-range of channels (as opposed to the single channel in ExoPlayer Demo) before removing these.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142173264"
astinus-1,2016-12-15 19:02:37,https://api.github.com/repos/google/ExoPlayer/git/commits/72097432bdf46804f1612c1b0a8b6a0ae41d729a,72097432bdf46804f1612c1b0a8b6a0ae41d729a,"Adding Widevine subsample VP9 clips

These are the new subsample clips used by the android-drm-team.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142162918"
ojw28,2016-08-30 09:28:31,https://api.github.com/repos/google/ExoPlayer/git/commits/04992fdaac6e3c320d8640e84e771c4f67715fad,04992fdaac6e3c320d8640e84e771c4f67715fad,"Move AudioTrack.SESSION_ID_NOT_SET to C

It's a nicer place for it to live once it starts being passed
around more widely (e.g. through the video renderer, for
tunneling)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142158460"
ojw28,2016-12-15 18:23:06,https://api.github.com/repos/google/ExoPlayer/git/commits/588124da766e1d9caaa1257d4e3b10721f990171,588124da766e1d9caaa1257d4e3b10721f990171,"Test playback of empty timeline completes successfully

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142157778"
ojw28,2016-12-15 15:09:45,https://api.github.com/repos/google/ExoPlayer/git/commits/5bb1d5dc99c8afc72b653cb19859470f4405a8e9,5bb1d5dc99c8afc72b653cb19859470f4405a8e9,"Add tunneling functionality to AudioTrack

Although the underlying platform AudioTrack is capable of
writing the AV sync header from M onward, I've opted not
to use the functionality since it appears to allocate an
unnecessary (and large) number of ByteBuffers. We can swap
over from O if this is addressed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142138988"
ojw28,2016-12-15 11:31:18,https://api.github.com/repos/google/ExoPlayer/git/commits/2c3ce7fee373e27bc11fa3f9f25bd1e028727a3a,2c3ce7fee373e27bc11fa3f9f25bd1e028727a3a,"Fix playback of media with >1MB preparation data

Also clarify when getNextLoadPositionUs and continueLoading
can be called.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142124497"
ojw28,2016-12-14 18:30:03,https://api.github.com/repos/google/ExoPlayer/git/commits/b7d118fda45ebbc08bd8754a1363fe11873553b1,b7d118fda45ebbc08bd8754a1363fe11873553b1,Merge branch 'dev-v2' of persistent-https://github.com/google/ExoPlayer into dev-v2
ojw28,2016-12-14 17:47:02,https://api.github.com/repos/google/ExoPlayer/git/commits/d422d2e6e606a213dd37aadb00bb71e4bf8e5a9d,d422d2e6e606a213dd37aadb00bb71e4bf8e5a9d,"Add missing # chars to release notes!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142028608"
ojw28,2016-12-14 18:06:52,https://api.github.com/repos/google/ExoPlayer/git/commits/fefef0f94195b448dd7c85a60457b3644dc07b9f,fefef0f94195b448dd7c85a60457b3644dc07b9f,"Merge pull request #2183 from WeiChungChang/proposal-fix

Fix the issue when the sequence of PTS is out of order by bidirectional prediction for skipToKeyframeBefore()"
ojw28,2016-12-14 17:08:41,https://api.github.com/repos/google/ExoPlayer/git/commits/10fa8e44af3bd11056b1f455881cd6fb44477eb1,10fa8e44af3bd11056b1f455881cd6fb44477eb1,Merge branch 'release-v2' of persistent-https://github.com/google/ExoPlayer into release-v2
ojw28,2016-12-14 17:08:03,https://api.github.com/repos/google/ExoPlayer/git/commits/e6778c90a1607da01feeba4d4bbf9a514655ed3c,e6778c90a1607da01feeba4d4bbf9a514655ed3c,Merge branch 'dev-v2-r2.1.0' into release-v2
ojw28,2016-12-14 17:07:31,https://api.github.com/repos/google/ExoPlayer/git/commits/8853050caa3d0a2cb1003aeeb1075fd84303c39d,8853050caa3d0a2cb1003aeeb1075fd84303c39d,Merge branch 'release-v2' into dev-v2-r2.1.0
ojw28,2016-12-14 17:00:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e65110e1ed06da1ab0b6dbbf252f7e49e4879ce8,e65110e1ed06da1ab0b6dbbf252f7e49e4879ce8,Remove ClippingMediaSource from release
ojw28,2016-12-14 15:45:11,https://api.github.com/repos/google/ExoPlayer/git/commits/42c7ea422dc37934ab85b58f2771e0635b04d0ba,42c7ea422dc37934ab85b58f2771e0635b04d0ba,"Update SDK_INT

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142016285"
ojw28,2016-12-14 15:28:58,https://api.github.com/repos/google/ExoPlayer/git/commits/88d2a6a3484520e8b2955b5e1e1d2c39ec46ec3d,88d2a6a3484520e8b2955b5e1e1d2c39ec46ec3d,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142015031"
erdemguven,2016-12-14 13:49:21,https://api.github.com/repos/google/ExoPlayer/git/commits/d5ac93f426d0d215604555c53cc5b009f1dc5e15,d5ac93f426d0d215604555c53cc5b009f1dc5e15,"Move playback tests to androidTest folder

This change makes Android Studio recognize tests as ""android test"" and run them on device by default.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142008012"
ojw28,2016-12-14 13:33:36,https://api.github.com/repos/google/ExoPlayer/git/commits/31e2fa8597df3aab1822d994f167517952eb8c85,31e2fa8597df3aab1822d994f167517952eb8c85,"Add hook for modifying or cancelling a user invoked seek

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=142007001"
erdemguven,2016-12-14 10:54:04,https://api.github.com/repos/google/ExoPlayer/git/commits/fc93940463542b41aa748ba7f74a2978e7022c48,fc93940463542b41aa748ba7f74a2978e7022c48,"Fix widevine playback tests

Passes drmSessionManager to DebugMediaCodecVideoRenderer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141997225"
andrewlewis,2016-08-29 00:27:59,https://api.github.com/repos/google/ExoPlayer/git/commits/f276eb2ce74411cc9e4c38bbdd1664678451a5dc,f276eb2ce74411cc9e4c38bbdd1664678451a5dc,"Add ClippingMediaSource.

ClippingMediaSource wraps a single period/window video-on-demand source and
exposes a specified time range within it.

Issue: #1988

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141991215"
AquilesCanta,2016-12-13 21:41:18,https://api.github.com/repos/google/ExoPlayer/git/commits/8a7628cb26917e39d2591ca9741ec88c30562f45,8a7628cb26917e39d2591ca9741ec88c30562f45,"Remove playlist adjustment on chunk loads

This is particularly problematic for subtitle tracks where adjustment
can be broken. Now, the primary url can change when clients ask for a
variant snapshot, instead of happening on chunk load as before.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141933689"
andrewlewis,2016-12-13 16:00:28,https://api.github.com/repos/google/ExoPlayer/git/commits/48072f21559ce5988e9dec0d58e505f843fd6897,48072f21559ce5988e9dec0d58e505f843fd6897,"Improve binary search functionality and javadoc.

Define what element is returned if inclusive is true and there are multiple
elements equal to the input value.

Clarify/fix javadoc.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141891741"
andrewlewis,2016-12-13 10:54:02,https://api.github.com/repos/google/ExoPlayer/git/commits/41d078ca4bd83df32d13b89d55913053816752a2,41d078ca4bd83df32d13b89d55913053816752a2,"Reset readEndOfStream in resetPosition.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141870244"
AquilesCanta,2016-12-12 20:37:09,https://api.github.com/repos/google/ExoPlayer/git/commits/0b1a6fe9b14279e40a8334ad3c9b2afd2bacbbd7,0b1a6fe9b14279e40a8334ad3c9b2afd2bacbbd7,"Ignore discontinuities in TSs for HLS

Issue:#1921
Issue:#1978
Issue:#2163
Issue:#2172

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141797474"
ojw28,2016-12-12 19:36:20,https://api.github.com/repos/google/ExoPlayer/git/commits/2a79931ec5892c751c629c800c019277d146752a,2a79931ec5892c751c629c800c019277d146752a,"Fix onTimelineChanged call (timeline should never be null).

Issue: #2186

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141790023"
ojw28,2016-12-13 19:37:30,https://api.github.com/repos/google/ExoPlayer/git/commits/ac9813729f79922e66970edd4189221005bb5519,ac9813729f79922e66970edd4189221005bb5519,"Merge pull request #2193 from luoser/patch-1

Change Sink to Source in license header"
luoser,2016-12-13 19:29:15,https://api.github.com/repos/google/ExoPlayer/git/commits/7e66ec5841c7f6072128fcb4daf27a7fc869fb49,7e66ec5841c7f6072128fcb4daf27a7fc869fb49,Change Sink to Source in license header
ojw28,2016-12-12 14:13:07,https://api.github.com/repos/google/ExoPlayer/git/commits/759cb3231545f3bc4cceae43ed77fdf007b28c5f,759cb3231545f3bc4cceae43ed77fdf007b28c5f,"Try exceeding renderer capabilities by default

Not sure what I think about this, but we're getting quite
a lot of issues reported where streams play fine but capabilities
indicate they wont. It's probably best just to cross our fingers
and hope for the best in such cases, as was the case in V1 when
using ExtractorSampleSource.

Issue: #2157
Issue: #2034
Issue: #2007

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141758070"
ojw28,2016-12-08 18:00:04,https://api.github.com/repos/google/ExoPlayer/git/commits/1055c520cca0346d6d65c764cca21684f404bf6a,1055c520cca0346d6d65c764cca21684f404bf6a,"Remove side effects from SeekMap.getPosition implementations

Issue: #2167

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141451444"
andrewlewis,2016-12-08 14:33:53,https://api.github.com/repos/google/ExoPlayer/git/commits/f45751872d1d49ff0f0fdd13c136d0656d9c22b9,f45751872d1d49ff0f0fdd13c136d0656d9c22b9,"Move track sample index updates out of getPosition(long).

This requires knowing the seek time in Extractor.seek, so that it's possible to
pick the latest synchronization sample at/before the seek time for each track
(rather than the earliest synchronization sample after the seek position).

Also remove the STATE_AFTER_SEEK state which should no longer be needed.

Issue: #2167

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141432598"
AquilesCanta,2016-12-07 19:39:01,https://api.github.com/repos/google/ExoPlayer/git/commits/2fce364936921e87b5fb1fbc3fd7b3e54a8ffcf5,2fce364936921e87b5fb1fbc3fd7b3e54a8ffcf5,"Ignore Splice Info in HLS TS media chunks

Issue:#2070

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141335458"
ojw28,2016-08-25 04:59:28,https://api.github.com/repos/google/ExoPlayer/git/commits/1518927e12a75bde636d9321a8f5b27db3120ed2,1518927e12a75bde636d9321a8f5b27db3120ed2,"Fix seeking backward from end of last period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141299172"
AquilesCanta,2016-12-07 11:58:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1cbc0fc678d73c1807a89cc8a1a50ea6fe685a83,1cbc0fc678d73c1807a89cc8a1a50ea6fe685a83,"Allow HlsPlaylistTracker to change the primaryHlsUrl

When the primary url is blacklisted (due to a 404, for example) or
the selected variant is different from primary url, allow the tracker
to change the url.

Issue:#87

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141291435"
WeiChungChang,2016-12-12 12:34:09,https://api.github.com/repos/google/ExoPlayer/git/commits/63966a373696adc13ff7fbd420911db05fc2cb77,63966a373696adc13ff7fbd420911db05fc2cb77,Fix the issue when the sequence of PTS is out of order by bidirectional prediction for skipToKeyframeBefore()
ojw28,2016-12-06 21:09:44,https://api.github.com/repos/google/ExoPlayer/git/commits/8765b1981ccda99f1b9f0cce8e40b3841a1b2318,8765b1981ccda99f1b9f0cce8e40b3841a1b2318,Revert: Rm newline
ojw28,2016-12-06 21:08:14,https://api.github.com/repos/google/ExoPlayer/git/commits/847e371ae740216d9f979e719da2f73096332a5a,847e371ae740216d9f979e719da2f73096332a5a,Rm newline
AquilesCanta,2016-12-06 16:33:30,https://api.github.com/repos/google/ExoPlayer/git/commits/a66b4a9badf58487dd46ecefb4c6c2d001cda2d4,a66b4a9badf58487dd46ecefb4c6c2d001cda2d4,"Parse ID3 sample timestamp for HLS audio chunks

Pending improvement:

* Peek just the required priv frame. Avoid decoding all id3 information.
* Sniff the used container format instead of using the extension.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141181781"
ojw28,2016-12-06 15:52:27,https://api.github.com/repos/google/ExoPlayer/git/commits/e5bc00ea94268fcb1ed11294c56bfa79167c36ed,e5bc00ea94268fcb1ed11294c56bfa79167c36ed,"Fix DataSourceInputStream + add unit test

Issue: #2162

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141177715"
ojw28,2016-08-14 04:37:05,https://api.github.com/repos/google/ExoPlayer/git/commits/2db7c50d7c0aad8359d85d579d49ab3ca42b5c0d,2db7c50d7c0aad8359d85d579d49ab3ca42b5c0d,"Fix test.

The definition of negative line indices was intentionally shifted
by one because the way VTT defines them doesn't appear to allow for
cues to be positioned at the very bottom of the screen in the case
that ANCHOR_TYPE_END is used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141168028"
ojw28,2016-12-06 13:26:56,https://api.github.com/repos/google/ExoPlayer/git/commits/4db6f1e49534d299e19192c860d9c774ac88029a,4db6f1e49534d299e19192c860d9c774ac88029a,"Expose whether decoders support tunneling

This is a first step toward supporting tunneled playback

Issue: #1688

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141167501"
ojw28,2016-12-06 13:21:07,https://api.github.com/repos/google/ExoPlayer/git/commits/99957bbae7be4385e064b57d0ae9e2c819dfb9c3,99957bbae7be4385e064b57d0ae9e2c819dfb9c3,"Correctly handle dynamic playlist modifications

- Fix bug where we'd try and call replaceStream having already
  notified the renderer that the current stream is final. This
  could occur if a period was added to the end of the playlist.
- If the current period being played is removed and a new period
  to play cannot be resolved, assume we've gone off the end of
  the playlist and transition to the ended state. This allows
  the current source to be re-used (unlike the previous behavior
  of considering it an error). Treat valid seeks that cannot be
  resolved due to concurrent timeline update similarly.
- Add seek sanity check back to ExoPlayerImpl. Meh. It's probably
  best to keep this, since it stops the exposed window index
  being invalid w.r.t the exposed timeline.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141167151"
ojw28,2016-12-06 11:16:31,https://api.github.com/repos/google/ExoPlayer/git/commits/9ea8b02083f4d1fd12abc7f9835a8f7a4a4b361e,9ea8b02083f4d1fd12abc7f9835a8f7a4a4b361e,"Correctly handle reading of an empty string without a terminating NUL byte

Issue: #2152

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141159330"
ojw28,2016-12-06 10:28:57,https://api.github.com/repos/google/ExoPlayer/git/commits/e86bfd6dbe71fc809b6e2c7d6ec0da3ddacef104,e86bfd6dbe71fc809b6e2c7d6ec0da3ddacef104,"Improvements for 608 positioning

- Infer likely left/center/right alignment for pop-on captions.
  This makes the rendering much better in practice, particularly
  when the captions were intended to be center aligned.
- Fix line anchoring.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141156222"
cdrolle,2016-12-05 19:42:52,https://api.github.com/repos/google/ExoPlayer/git/commits/88c0695bd001501381c739018bd8f9d11a8a0cdd,88c0695bd001501381c739018bd8f9d11a8a0cdd,"Added safe-area adjustment (i.e. padding) to CEA-608 captions and fixed minor issue with rollup.

CEA-608 specifies a ""safe-area"" in which the captions should be rendered. This change adjusts all of the cue positions so they are within that safe area. It also fixes a minor issue in which roll up captions would drift towards the last row if a preamble address code had the ""next row toggle"" bit set.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141077433"
AquilesCanta,2016-12-05 19:07:14,https://api.github.com/repos/google/ExoPlayer/git/commits/931670957fe29ec50f643db71c9bde053df2c076,931670957fe29ec50f643db71c9bde053df2c076,"Add support for multiple table sections in PSI section

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141073182"
ojw28,2016-12-05 12:19:49,https://api.github.com/repos/google/ExoPlayer/git/commits/db215ff156a6eb5e434a1b447fff6931b00560d1,db215ff156a6eb5e434a1b447fff6931b00560d1,"Make invalid seek positions fail on playback thread only

Seeks are permitted when there's no timeline, and in this
case playback necessarily fails on the playback thread when
the timeline becomes known. Pushing failure to the same
place when the timeline is known means there's only one
failure path for this case. A later CL will likely introduce
an InvalidSeekPositionException for this case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141037708"
ojw28,2016-12-05 12:06:01,https://api.github.com/repos/google/ExoPlayer/git/commits/88fc682ddeaa1e0fc4bc3ed652f2d214fdb9f75e,88fc682ddeaa1e0fc4bc3ed652f2d214fdb9f75e,"Expose manual playback control hiding from SimpleExoPlayerView

Issue #2146

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141036866"
andrewlewis,2016-12-05 10:48:27,https://api.github.com/repos/google/ExoPlayer/git/commits/01acc0e20130551e6c3f04069cbc4180c7b16bb7,01acc0e20130551e6c3f04069cbc4180c7b16bb7,"Remove unnecessary final.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=141031900"
drhill,2016-12-06 13:08:58,https://api.github.com/repos/google/ExoPlayer/git/commits/cc24c4e38bd222f8b43efaba513c76d0a9effe4b,cc24c4e38bd222f8b43efaba513c76d0a9effe4b,change to switch to avoid changing 4.0 tracks
ojw28,2016-12-02 19:48:59,https://api.github.com/repos/google/ExoPlayer/git/commits/fda2d143e46ff5d2dc24419bce73f54f7c8f481b,fda2d143e46ff5d2dc24419bce73f54f7c8f481b,CEA 608 bugfix
ojw28,2016-12-02 19:47:50,https://api.github.com/repos/google/ExoPlayer/git/commits/421dab433a1ee272e1af465828c6d3095ded6a1c,421dab433a1ee272e1af465828c6d3095ded6a1c,Restore accidentally clobbered SimpleExoPlayerView change
ojw28,2016-12-02 19:42:54,https://api.github.com/repos/google/ExoPlayer/git/commits/d6d59ef07ed9fcb6faaef64f28bd9ac73ff2e621,d6d59ef07ed9fcb6faaef64f28bd9ac73ff2e621,Restore accidentally clobbered MKV change
ojw28,2016-12-02 18:49:26,https://api.github.com/repos/google/ExoPlayer/git/commits/bbbd61e31949ec3807903f20227a32d8b457302f,bbbd61e31949ec3807903f20227a32d8b457302f,"Skip negative SubRip timecodes

Issue: #2145

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140868079"
andrewlewis,2016-12-02 18:23:28,https://api.github.com/repos/google/ExoPlayer/git/commits/e0649db513395d829da8db55f6bbd7f546148d46,e0649db513395d829da8db55f6bbd7f546148d46,"Handle input format changes in SimpleDecoderAudioRenderer.

This is implemented in the same way as in MediaCodecRenderer.

Move codec != null guard into feedInputBuffer to handle the case of an input
format change with no dequeued buffers where the codec can't be reinitialized
immediately.

Issue: #2111

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140864942"
erdemguven,2016-12-02 15:17:29,https://api.github.com/repos/google/ExoPlayer/git/commits/7ea16a6ae2264ba40127de8c23ed09c47c5be955,7ea16a6ae2264ba40127de8c23ed09c47c5be955,"Remove unused parameter

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140847027"
andrewlewis,2016-12-02 14:17:04,https://api.github.com/repos/google/ExoPlayer/git/commits/164b406e23cd10747686b1559b7a02a716a3d6a6,164b406e23cd10747686b1559b7a02a716a3d6a6,"Clean up loading period update.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140843106"
andrewlewis,2016-12-02 09:56:10,https://api.github.com/repos/google/ExoPlayer/git/commits/45bc4a0374e14c9f3231f95ca6c58c131a8d2edf,45bc4a0374e14c9f3231f95ca6c58c131a8d2edf,"Pass player and isTopLevelSource to MediaSource.prepareSource.

These additions are useful for sources that need to track the playback position
and control playback.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140828310"
ojw28,2016-12-02 16:29:11,https://api.github.com/repos/google/ExoPlayer/git/commits/0a52e823deef9593d0e7154b197a204fa2be30d8,0a52e823deef9593d0e7154b197a204fa2be30d8,Use constant for MPEG max frame size
ojw28,2016-12-02 16:28:35,https://api.github.com/repos/google/ExoPlayer/git/commits/b5437907cfcd3a0068159ced6f39066631221ddb,b5437907cfcd3a0068159ced6f39066631221ddb,"Merge pull request #2135 from drhill/dev-v2_mp2

add mp2 audio"
ojw28,2016-12-02 16:27:36,https://api.github.com/repos/google/ExoPlayer/git/commits/4c427f5b1361eaa3ad560326cc0925ab567fe382,4c427f5b1361eaa3ad560326cc0925ab567fe382,Merge branch 'drhill-dev-v2_subtitles_view' into dev-v2
ojw28,2016-12-02 16:27:29,https://api.github.com/repos/google/ExoPlayer/git/commits/a7736e101ff7a5d5810e5be1bef50b4e3d5887a6,a7736e101ff7a5d5810e5be1bef50b4e3d5887a6,Merge branch 'dev-v2_subtitles_view' of git://github.com/drhill/ExoPlayer into drhill-dev-v2_subtitles_view
drhill,2016-12-02 00:30:27,https://api.github.com/repos/google/ExoPlayer/git/commits/e22c42c7c22bcc4fa10d8282163ce1f6f5100c60,e22c42c7c22bcc4fa10d8282163ce1f6f5100c60,requested changes for simplicity
drhill,2016-12-01 21:41:23,https://api.github.com/repos/google/ExoPlayer/git/commits/3884641464ea5520f3e96b24292214524e13e2eb,3884641464ea5520f3e96b24292214524e13e2eb,switch to proper mimetype
drhill,2016-12-01 21:25:49,https://api.github.com/repos/google/ExoPlayer/git/commits/8fcc8c63efaaa3b37abaca13b6ba1d4c28311c1f,8fcc8c63efaaa3b37abaca13b6ba1d4c28311c1f,change to getview call instead of set property
ojw28,2016-12-01 19:29:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e803bff2b1438af13717065c0c037a64c406b252,e803bff2b1438af13717065c0c037a64c406b252,Don't log FileNotFoundException while reading cache index file
ojw28,2016-12-01 18:35:14,https://api.github.com/repos/google/ExoPlayer/git/commits/0cc874dd01b0c0830618cc6b80f25d6541a2de23,0cc874dd01b0c0830618cc6b80f25d6541a2de23,Fix indentation
ojw28,2016-12-01 18:31:49,https://api.github.com/repos/google/ExoPlayer/git/commits/54b4df703a3faa77d378c88dabdaac97ab3bf44e,54b4df703a3faa77d378c88dabdaac97ab3bf44e,Merge branch 'RikHeijdens-eia-608-improvements' into dev-v2
ojw28,2016-12-01 18:31:39,https://api.github.com/repos/google/ExoPlayer/git/commits/a6ccedf741a90f53744d8e71b45855ef6a122bf8,a6ccedf741a90f53744d8e71b45855ef6a122bf8,Merge branch 'eia-608-improvements' of git://github.com/RikHeijdens/ExoPlayer into RikHeijdens-eia-608-improvements
ojw28,2016-12-01 16:51:55,https://api.github.com/repos/google/ExoPlayer/git/commits/7a18738dfaf3d5c99b195b7020ca56b2cb41fe48,7a18738dfaf3d5c99b195b7020ca56b2cb41fe48,Clean up AudioTagPayloadReader
ojw28,2016-12-01 16:38:17,https://api.github.com/repos/google/ExoPlayer/git/commits/6e6f912ed11955cdf0a8327ff17c073fe5563932,6e6f912ed11955cdf0a8327ff17c073fe5563932,"Merge pull request #2140 from EENCloud/FLV_PCM_LAW_Support

Added FLV PCM law support"
EE-GSlomin,2016-11-29 17:36:34,https://api.github.com/repos/google/ExoPlayer/git/commits/2d1f151cb9eef4f26ce4b78e330550e56396a13e,2d1f151cb9eef4f26ce4b78e330550e56396a13e,Added support for PCM u/a-law audio in FLV containers
ojw28,2016-12-01 14:54:36,https://api.github.com/repos/google/ExoPlayer/git/commits/867bc7cb05d1d39680b4af371ee0d7cd6cded977,867bc7cb05d1d39680b4af371ee0d7cd6cded977,"Merge pull request #2138 from google/revert-2127-FLV_PCM_LAW_Support

Revert ""Added support for PCM u/a-law audio in FLV containers"""
ojw28,2016-12-01 14:54:27,https://api.github.com/repos/google/ExoPlayer/git/commits/17cd73d8ed55bacccd1f567b9bd30c882311168e,17cd73d8ed55bacccd1f567b9bd30c882311168e,"Revert ""Added support for PCM u/a-law audio in FLV containers"""
ojw28,2016-12-01 14:54:20,https://api.github.com/repos/google/ExoPlayer/git/commits/8601cd87665845aafa85699719e8705b39b93781,8601cd87665845aafa85699719e8705b39b93781,"Merge pull request #2127 from EENCloud/FLV_PCM_LAW_Support

Added support for PCM u/a-law audio in FLV containers"
ojw28,2016-12-01 13:28:35,https://api.github.com/repos/google/ExoPlayer/git/commits/53dcb82862e406d571c8a07c2db99419a7733655,53dcb82862e406d571c8a07c2db99419a7733655,"Merge pull request #2131

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140720011"
erdemguven,2016-12-01 11:55:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f3dbb746134b0eb2d56b7fdb721d9f5e810e2707,f3dbb746134b0eb2d56b7fdb721d9f5e810e2707,"Fix unnecessary rewrite of cache index file after CachedContentIndex.readFile()

Prevented readFile() setting ""changed"" boolean to true every time. It's set only if encryption key is set but the index file isn't encrypted.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140714173"
drhill,2016-12-01 00:44:47,https://api.github.com/repos/google/ExoPlayer/git/commits/214c55b6657596a0e2c814b58f7a9688652e4f35,214c55b6657596a0e2c814b58f7a9688652e4f35,add function to change subtitles style
drhill,2016-11-30 23:47:36,https://api.github.com/repos/google/ExoPlayer/git/commits/db4b478cc0a6ff34d25e5c60882000babf0a4b0a,db4b478cc0a6ff34d25e5c60882000babf0a4b0a,fix 6.1 channel passthrough failing
drhill,2016-11-12 00:08:17,https://api.github.com/repos/google/ExoPlayer/git/commits/0752f790c7aeca82768217ffa21a06e96942607e,0752f790c7aeca82768217ffa21a06e96942607e,add mp2 audio
ojw28,2016-11-30 21:14:07,https://api.github.com/repos/google/ExoPlayer/git/commits/836cefcdd6a0e7b8cfcfadcd5479619461bde575,836cefcdd6a0e7b8cfcfadcd5479619461bde575,"Remove CC validity checks in SeiReader (now performed in decoder)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140642357"
ojw28,2016-11-30 20:20:38,https://api.github.com/repos/google/ExoPlayer/git/commits/8bc7da5681386c52ce1415420b37719809ee8849,8bc7da5681386c52ce1415420b37719809ee8849,"Finish fixing playback control focus

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140635851"
ojw28,2016-11-30 18:46:18,https://api.github.com/repos/google/ExoPlayer/git/commits/195a93e5af12715c4d92b376fb6f40d8fd8885d8,195a93e5af12715c4d92b376fb6f40d8fd8885d8,"Fix playback control focus

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140623107"
andrewlewis,2016-11-30 17:33:32,https://api.github.com/repos/google/ExoPlayer/git/commits/8dc810405964770fe227a333b1b4d0f3fdfef0a3,8dc810405964770fe227a333b1b4d0f3fdfef0a3,"Load the next period only if its start point is known.

If a period has no enabled tracks it is considered to be fully buffered, even
if its duration is unknown. This would cause the offset of the next loading
period to be set based on the unset duration of the preceding period, in turn
causing the from of the player to expose a position based on an unset value.

Only load the next period when the current one has a known duration. If a
period has no enabled tracks and an unknown duration this causes the player to
play the period indefinitely.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140613858"
ojw28,2016-11-30 16:46:49,https://api.github.com/repos/google/ExoPlayer/git/commits/45c68a2fd55663addce79889c4a068b1f04983cf,45c68a2fd55663addce79889c4a068b1f04983cf,"Use separate mimeType for CEA-608 embedded in MP4

When CEA-608 is embedded in MP4 each packet consists of
cc_data_1 and cc_data_2 only. The marker_bits, cc_valid
and cc_type are implicit. As a result playback of CEA-608
embedded in MP4 broke when we started passing the extra
byte for the TS case (and adjusted the decoder to assume
the byte was present).

This change introduces a special mimeType for the case
where the byte is implicit (!). An alternative option
was to insert the extra byte every 2 bytes in the MP4
extractor, but this is really quite fiddly to get right.

Also made the loops in the 608/708 decoders robust against
input of the wrong length.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140609304"
AquilesCanta,2016-11-30 16:17:10,https://api.github.com/repos/google/ExoPlayer/git/commits/f702568776895531ebbe3dc8a49c0f4cf8fce122,f702568776895531ebbe3dc8a49c0f4cf8fce122,"Skip tables with unexpected table_id for PAT and PMT readers

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140606435"
ojw28,2016-11-30 16:04:25,https://api.github.com/repos/google/ExoPlayer/git/commits/289ae3ff38280f56d5af3371024d21ecb2f9758c,289ae3ff38280f56d5af3371024d21ecb2f9758c,"Make demo app visible in AndroidTV launcher

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140605251"
erdemguven,2016-11-30 14:23:47,https://api.github.com/repos/google/ExoPlayer/git/commits/257671467f6c97762f473c42709aecdd28d149bc,257671467f6c97762f473c42709aecdd28d149bc,"Fix possible failure in CachedContentIndex encrypted cache index file read.

Encryption key in index file is read by DataInputStream.read() which may return less bytes than required. Replaced it with readFully() which should read full length of data.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140597693"
AquilesCanta,2016-10-08 13:16:37,https://api.github.com/repos/google/ExoPlayer/git/commits/501f54a8a640ce799353ab001d67ed761834345e,501f54a8a640ce799353ab001d67ed761834345e,"Add #EXT-X-PROGRAM-DATE-TIME support for HLS media playlists

Issue:#747

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140525595"
ojw28,2016-11-29 17:33:10,https://api.github.com/repos/google/ExoPlayer/git/commits/91c58627be09cb0bc779d43778a55cd5ce76484f,91c58627be09cb0bc779d43778a55cd5ce76484f,"Fix lint errors

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140488486"
ojw28,2016-11-29 15:59:49,https://api.github.com/repos/google/ExoPlayer/git/commits/bfc2faa269aba3e006b5da547e7d0fbfc1033b6d,bfc2faa269aba3e006b5da547e7d0fbfc1033b6d,"Enable focus highlighting in track selection dialogs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140479099"
ojw28,2016-11-29 15:41:58,https://api.github.com/repos/google/ExoPlayer/git/commits/7bbe213e578a3f2de8bc7e9b4886c8d5e74a8dda,7bbe213e578a3f2de8bc7e9b4886c8d5e74a8dda,"Add option to select track that exceeds renderer capabilities

Leaving disabled by default for now, but we may want to consider
enabling it by default. Note that in V1 for ExtractorSampleSource
the behaviour was equivalent to this option being enabled, since
we didn't perform capabilities checks. For DASH/SS/HLS the V1
behaviour was equivalent to this option being disabled.

The type in PlayerActivity has been changed just to make it
easier to add a line that calls setParameters.

Issue: #2034
Issue: #2007
Issue: #2078

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140477568"
cdrolle,2016-11-28 22:14:26,https://api.github.com/repos/google/ExoPlayer/git/commits/2753664c6bc7427511d6f1b812008610e2732a23,2753664c6bc7427511d6f1b812008610e2732a23,"Fixed an error in the date and time parser's handling of time zones.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140400905"
ojw28,2016-11-28 18:35:56,https://api.github.com/repos/google/ExoPlayer/git/commits/2550362fa2f47b57ca710beeefbb48113b7c9156,2550362fa2f47b57ca710beeefbb48113b7c9156,"Clean up playback controls xml a little

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140374149"
ojw28,2016-11-28 17:59:05,https://api.github.com/repos/google/ExoPlayer/git/commits/eb81da7f2d503fa06f26fe4aed5d617d1f9177e2,eb81da7f2d503fa06f26fe4aed5d617d1f9177e2,"Remove unnecessary layer in view hierarchy

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140369506"
ojw28,2016-11-28 11:15:20,https://api.github.com/repos/google/ExoPlayer/git/commits/73220be19b95a27f16096b3e907aec86be758038,73220be19b95a27f16096b3e907aec86be758038,"drainOutputBuffer return false on EOS

I can't see how this would ever make a difference, but there's no
point in returning true. Either we've really reached EOS (in which
case outputStreamEnded will be true and the next drainOutputBuffer
will be turned into a no-op) or we've re-initialized the codec (in
which case there wont be anything to drain since we wont have fed
anything to the codec yet).

This change should also prevent the hypothetical NPE described in
issue #2096, although we're unsure how that NPE would occur unless
MediaCodecRenderer has been extended in an unusual way.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140338581"
andrewlewis,2016-11-28 09:57:13,https://api.github.com/repos/google/ExoPlayer/git/commits/f7132a7a7393668b32d657efb374db7e05ba4ca1,f7132a7a7393668b32d657efb374db7e05ba4ca1,"Fix compiler warning about assignment in conditional.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140332890"
andrewlewis,2016-11-28 08:45:12,https://api.github.com/repos/google/ExoPlayer/git/commits/f9c7343e767df93f4ec3f7ef5997e5c235241e0e,f9c7343e767df93f4ec3f7ef5997e5c235241e0e,"Add basic unit test for ExoPlayer/ExoPlayerImplInternal.

The simple verifications in this test may be useful for smoke testing, but the
coverage of ExoPlayerImplInternal is low. The intention is to add tests for
more complex logic in ExoPlayerImplInternal in later changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140327358"
EE-GSlomin,2016-11-29 17:36:34,https://api.github.com/repos/google/ExoPlayer/git/commits/4f2cced4da4b6c42f2da51f38516a17a415e13c3,4f2cced4da4b6c42f2da51f38516a17a415e13c3,Added support for PCM u/a-law audio in FLV containers
ojw28,2016-11-25 18:43:02,https://api.github.com/repos/google/ExoPlayer/git/commits/e56cf4903828c9144bcd75502b203ecd93930ca8,e56cf4903828c9144bcd75502b203ecd93930ca8,"Fix BuildConfig generation for internal builds

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140210128"
AquilesCanta,2016-11-25 18:26:05,https://api.github.com/repos/google/ExoPlayer/git/commits/c3c176d93c03fe9578161d35f4552d453a3a314e,c3c176d93c03fe9578161d35f4552d453a3a314e,"Move HLS extractor construction to HlsMediaChunk

This allows ID3 PRIV timestamp extraction and Extractor Sniffing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140209568"
ojw28,2016-11-25 18:17:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2e3ffe1e94a16d6ca1e5c09f818969cbcd531abe,2e3ffe1e94a16d6ca1e5c09f818969cbcd531abe,"Assume support for vertical video if rotated resolution supported

Issue: #2034

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140209306"
ojw28,2016-11-25 16:18:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ee9b7be2fa68d15ec505be1fd69740144fd61b46,ee9b7be2fa68d15ec505be1fd69740144fd61b46,"Fix issue with seeking before timeline available

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140204054"
andrewlewis,2016-11-25 16:02:45,https://api.github.com/repos/google/ExoPlayer/git/commits/76c58a34d32d06832f625115fae7df432b30b811,76c58a34d32d06832f625115fae7df432b30b811,"Clarify createPeriod javadoc.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140202942"
AquilesCanta,2016-11-25 15:30:23,https://api.github.com/repos/google/ExoPlayer/git/commits/9c612f94c5f8aee93b36365dc9d495eeb38a3502,9c612f94c5f8aee93b36365dc9d495eeb38a3502,"Chose timestamp adjustment master based on track selection

Select the timestamp master depending on track availability. If
a variant is being loaded, then that is the timestmap master.
Otherwise, if an audio track is being loaded, then the responsible
chunk source is the timestmap master. If no variant or audio
rendition is enabled, then a subtitle chunk source is selected as
timestamp master. This CL will become specially relevant once
ID3 PRIV timestamps are used for audio renditions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140201385"
ojw28,2016-11-25 15:21:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ce9ec79e5977e76512162dae355a596727e02b45,ce9ec79e5977e76512162dae355a596727e02b45,"Make Timeline always non-null from ExoPlayer

Note that we still have null timelines in ExoPlayerImplInternal.
This is deliberate; and is likely necessary to distinguish between
the no-timeline-yet and timeline-is-empty cases (we want to try
and process a pending seek for the latter, but not the former).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140200980"
AquilesCanta,2016-11-25 14:13:35,https://api.github.com/repos/google/ExoPlayer/git/commits/97a23ce5726757d82eba0b64cc2cb5d0cfd011f4,97a23ce5726757d82eba0b64cc2cb5d0cfd011f4,"Fix main thread playlist refreshes in HlsPlaylistTracker

The refresh handler in HlsPlaylistTracker was being instantiated in the
same thread as the MediaSource (i.e. Main thread).

Issue:#2108

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140197553"
ojw28,2016-11-24 17:08:10,https://api.github.com/repos/google/ExoPlayer/git/commits/894ae1a310cc2e1fe5ba59eb56c7fbeb751036d5,894ae1a310cc2e1fe5ba59eb56c7fbeb751036d5,"Improve SimpleExoPlayer flexibility

- Allow extension and overriding of renderer creation.
  Several developers have asked for this, so that they
  can use their own renderers (typically extensions to
  the core ones) without losing the ability to use
  SimpleExoPlayer.
- Add option to not attempt extension renderer creation,
  for efficiency.
- Align build variants for internal and external demo
  apps. This is slightly unfortunate, but convergence
  seems necessary for useExtensionRenderers.
- Fix DASH playback tests to use the debug video
  renderer.

Issue #2102

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140140915"
mgersh,2016-11-23 22:47:22,https://api.github.com/repos/google/ExoPlayer/git/commits/cbf5988803c658a911803f8f86d3900dc75bfffa,cbf5988803c658a911803f8f86d3900dc75bfffa,"Switch to Cronet 56_0_2924_0

This is the second CL in the 3 CL process to switch Cronet versions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140074017"
kul3r4,2016-11-23 18:00:33,https://api.github.com/repos/google/ExoPlayer/git/commits/ba49f513802dc6412719d52e20f684dcd667ef95,ba49f513802dc6412719d52e20f684dcd667ef95,"Cronet README fix

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140043801"
ojw28,2016-11-23 15:34:00,https://api.github.com/repos/google/ExoPlayer/git/commits/62bdb1b93a3f7344b669587d1108ca41e83ad418,62bdb1b93a3f7344b669587d1108ca41e83ad418,"Fix failure when a seek is performed with no enabled tracks

This issue affects ExtractorMediaSource only. We shouldn't
start loading in the case that we're prepared and have no
enabled tracks, since there's nothing that we need to load.
This was causing an assertion failure in startLoading.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140030650"
AquilesCanta,2016-11-23 15:13:36,https://api.github.com/repos/google/ExoPlayer/git/commits/a7dff14d3c14bd999bca7cb05fa8edf853b93362,a7dff14d3c14bd999bca7cb05fa8edf853b93362,"Keep TS packets with no continuity counter increase and no payload

This behavior is defined in ISO-13818-1, section 2.4.3.3(continuity_counter).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140029161"
ojw28,2016-11-23 11:36:05,https://api.github.com/repos/google/ExoPlayer/git/commits/eb62d00ea40957931e02fe30929eaf938d87a955,eb62d00ea40957931e02fe30929eaf938d87a955,"ExoPlayerImplInternal cleanup

- Fix handling of the currently playing period being
  removed. This didn't do the right thing at all.
- Relax rule on seekToPeriodPosition re-using an
  existing holder.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140014791"
ojw28,2016-11-23 11:00:16,https://api.github.com/repos/google/ExoPlayer/git/commits/b3726cf7619b95e2c011b74bc99283aea956805f,b3726cf7619b95e2c011b74bc99283aea956805f,"Support DASH multi-segment fetches

Note that multi-segment fetching is only possible in the
case that segments in a representation are defined to have
the same Uri and adjacent ranges (this is very rarely true
for live streams, but is quite often true for on-demand).
In the case that merging is requested but not possible,
the implementation will request one at a time.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140012443"
erdemguven,2016-11-23 10:35:22,https://api.github.com/repos/google/ExoPlayer/git/commits/b29ff0cf517cbb361c90edf208e855306999b7c7,b29ff0cf517cbb361c90edf208e855306999b7c7,"Make CacheDataSink use ReusableBufferedOutputStream

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=140010664"
erdemguven,2016-11-22 17:03:03,https://api.github.com/repos/google/ExoPlayer/git/commits/fa3d129b1468c58569e6c1c450a1486e9149ab84,fa3d129b1468c58569e6c1c450a1486e9149ab84,"Fix some of the issues pointed by android lint tool

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139915885"
AquilesCanta,2016-11-22 17:01:44,https://api.github.com/repos/google/ExoPlayer/git/commits/6101450302b96d27a5464f262bffc349fab6bfa5,6101450302b96d27a5464f262bffc349fab6bfa5,"Merge initialization chunk into HlsMediaChunk

This will allow creating the extractor in the HlsMediaChunk.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139915713"
AquilesCanta,2016-11-22 15:24:51,https://api.github.com/repos/google/ExoPlayer/git/commits/9ac7f64c8448551e5a5c3d69b40bb2d9e13c90f2,9ac7f64c8448551e5a5c3d69b40bb2d9e13c90f2,"Fix search to end of stream in HLS

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139905590"
andrewlewis,2016-11-22 14:30:14,https://api.github.com/repos/google/ExoPlayer/git/commits/77715fbfbe715721d48a0483cf045fa258118c80,77715fbfbe715721d48a0483cf045fa258118c80,"Fix some analysis warnings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139901449"
erdemguven,2016-11-08 03:27:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e84fa5835d0e6595646ded0857d59ba2dab4029c,e84fa5835d0e6595646ded0857d59ba2dab4029c,"Use ReusableBufferedOutputStream for cache index file write operation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139889957"
ojw28,2016-11-21 19:56:38,https://api.github.com/repos/google/ExoPlayer/git/commits/42fadfe083335f1de0f342e68dc5469c3ed41b39,42fadfe083335f1de0f342e68dc5469c3ed41b39,"Allow SsMediaSource to take an optional SsManifest

Also allow custom SsManifestParser injection.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139813660"
ojw28,2016-11-21 19:51:59,https://api.github.com/repos/google/ExoPlayer/git/commits/81ce6bba7a69063a6c8059b0597873cddc06dc0e,81ce6bba7a69063a6c8059b0597873cddc06dc0e,"Allow DashMediaSource to take an optional DashManifest

Also allow custom DashManifestParser injection, to
support parsing of custom elements and attributes that
service providers may wish to include in their manifests
(e.g. #2058).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139813108"
ojw28,2016-11-24 19:30:15,https://api.github.com/repos/google/ExoPlayer/git/commits/90e0919d09a9dd85ab3a03a74091d43a35ad360e,90e0919d09a9dd85ab3a03a74091d43a35ad360e,Update ISSUE_TEMPLATE
ojw28,2016-11-24 19:29:15,https://api.github.com/repos/google/ExoPlayer/git/commits/971bf768ffbcab5d39a4e40c89b6c7b16bc69e3e,971bf768ffbcab5d39a4e40c89b6c7b16bc69e3e,Update ISSUE_TEMPLATE
ojw28,2016-11-24 19:28:24,https://api.github.com/repos/google/ExoPlayer/git/commits/a3ca5c48b388cdcce89b016d0c635b31ec1f88e7,a3ca5c48b388cdcce89b016d0c635b31ec1f88e7,Update ISSUE_TEMPLATE
ojw28,2016-11-21 18:50:30,https://api.github.com/repos/google/ExoPlayer/git/commits/4f3ab7b22d0a8863907012da4be84fb705f2ed3a,4f3ab7b22d0a8863907012da4be84fb705f2ed3a,"ExoPlayerImplInternal: Some more minor cleanup

- This should be a no-op change
- Inline attemptRestart
- Clean up processing of pending seeks

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139804630"
ojw28,2016-11-21 18:45:25,https://api.github.com/repos/google/ExoPlayer/git/commits/9d7d8adc9c1cb9a683efac1ea06288fd393f9bfb,9d7d8adc9c1cb9a683efac1ea06288fd393f9bfb,"Allow changing of video scaling mode

Issue #2016

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139803888"
ojw28,2016-11-21 18:43:46,https://api.github.com/repos/google/ExoPlayer/git/commits/4846146827a99eb99c529aeab34c81248ffa3c5d,4846146827a99eb99c529aeab34c81248ffa3c5d,"Fix internal build to use new Cronet jars

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139803684"
andrewlewis,2016-11-21 17:55:55,https://api.github.com/repos/google/ExoPlayer/git/commits/ae0ac55b8db4d4aebbc15fa599c806d00e6b8be5,ae0ac55b8db4d4aebbc15fa599c806d00e6b8be5,"Add support for resetting the AudioTrack stream type.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139797714"
ojw28,2016-03-08 05:35:48,https://api.github.com/repos/google/ExoPlayer/git/commits/060ca4aecc11c850ccfbbfea7cef7f1bff9a8859,060ca4aecc11c850ccfbbfea7cef7f1bff9a8859,"ExoPlayerImplInternal cleanup

- Make handleSourceInfoRefreshed clearer.
- Remove bufferAheadPeriodCount. Seems error prone.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139774580"
wuchangchang,2016-11-18 22:56:39,https://api.github.com/repos/google/ExoPlayer/git/commits/6dbfdecbe00c8a09f97935889b530697074ea7cb,6dbfdecbe00c8a09f97935889b530697074ea7cb,"Let the mp4 extractor support ""camm"" metadata tracks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139626848"
ojw28,2016-11-18 12:07:20,https://api.github.com/repos/google/ExoPlayer/git/commits/4a30dff5241c759934ca287fb0838c35df0ed5b3,4a30dff5241c759934ca287fb0838c35df0ed5b3,"Fix NPE in TextTrackRenderer

Issue: #2081

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139566990"
AquilesCanta,2016-11-18 11:30:44,https://api.github.com/repos/google/ExoPlayer/git/commits/cafe603694b47b4e4096648681dfe01721eedbaf,cafe603694b47b4e4096648681dfe01721eedbaf,"Allow regressing media sequence numbers in HLS media playlists

This is techically not allowed by the spec[1] but might still occur in
certain scenarios. New playlists with older media sequence numbers are
ignored.

[1]: HLS draft version 20, section-6.2.1

Issue:#2059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139564889"
ojw28,2016-11-18 10:07:17,https://api.github.com/repos/google/ExoPlayer/git/commits/d890c2f48f1ed541781872b3df12abe36a41db6a,d890c2f48f1ed541781872b3df12abe36a41db6a,"Fix infinite loop -> ANR at end of HLS playbacks

continueLoading shouldn't return true unless it's done
something. Always returning true if endOfStream was
causing CompositeSequenceableLoader.continueLoading to
loop forever.

It looks like the same issue exists in ChunkSampleStream
as well, although I can't seem to provoke DASH or SS
playbacks into doing anything bad as a result.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139559834"
erdemguven,2016-11-17 22:15:45,https://api.github.com/repos/google/ExoPlayer/git/commits/35054f8f7ca65d9060e1b4924140c7addf12743d,35054f8f7ca65d9060e1b4924140c7addf12743d,"Added ReusableBufferedOutputStream.

ReusableBufferedOutputStream is a subclass of BufferedOutputStream with a reset(OutputStream) that allows an instance to be re-used with another underlying output stream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139505999"
andrewlewis,2016-11-17 14:32:08,https://api.github.com/repos/google/ExoPlayer/git/commits/1a62dad98065b9b3418c82c552a5ac8e66891c53,1a62dad98065b9b3418c82c552a5ac8e66891c53,"Remove TODO in ffmpeg extension README.md.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139453745"
ojw28,2016-11-17 14:02:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f57434006f49bc5dd5dfb620e292287f4cce89da,f57434006f49bc5dd5dfb620e292287f4cce89da,"Fix potential NPE in ExoPlayerImplInternal

I'll have a more thorough refactor of some of this class
fairly soon!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139451693"
ojw28,2016-11-17 13:59:32,https://api.github.com/repos/google/ExoPlayer/git/commits/61c9c169542204fde21a11cc479cd7a80c4fc71c,61c9c169542204fde21a11cc479cd7a80c4fc71c,"Make sure we report video size after Surface is set

Issue: #2077

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139451511"
erdemguven,2016-11-17 12:35:54,https://api.github.com/repos/google/ExoPlayer/git/commits/051be5c588b25b2d9d899ae89b195455007e3bb3,051be5c588b25b2d9d899ae89b195455007e3bb3,"Use buffers to speed up cache index file io.

Use BufferedOutputStream and BufferedInputStream while writing / reading.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139446039"
AquilesCanta,2016-11-17 11:58:01,https://api.github.com/repos/google/ExoPlayer/git/commits/a8a2ef4a24a5e5bdd86309195a0ede904ef5e0e2,a8a2ef4a24a5e5bdd86309195a0ede904ef5e0e2,"Blacklist HLS media playlists that return 4xx error codes

Issue:#87

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139443476"
AquilesCanta,2016-11-16 16:04:53,https://api.github.com/repos/google/ExoPlayer/git/commits/d6eb9cb79f8dead17a789b688664794aba2290ef,d6eb9cb79f8dead17a789b688664794aba2290ef,"Allow playlists of different size in HlsPlaylistTracker playlist adjustment

Issue:#2059

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139331670"
andrewlewis,2016-11-15 17:31:24,https://api.github.com/repos/google/ExoPlayer/git/commits/0effffb89fa02ac711eadcf3e167c9ea65783ab1,0effffb89fa02ac711eadcf3e167c9ea65783ab1,"Add support for reading .mp3 boxes in stsd.

This is used by Quicktime for MP3 tracks.

Issue: #2066

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139209989"
AquilesCanta,2016-11-15 16:30:17,https://api.github.com/repos/google/ExoPlayer/git/commits/21e3361dfe8fea5b82be3656af29d032dbab7c33,21e3361dfe8fea5b82be3656af29d032dbab7c33,"Move 3 private methods to the end of the class

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139204000"
andrewlewis,2016-11-15 12:49:34,https://api.github.com/repos/google/ExoPlayer/git/commits/348b58021ddd7af22c4d1886994f3bafd1eca930,348b58021ddd7af22c4d1886994f3bafd1eca930,"Move underrun detection into AudioTrack.

This removes duplication from SimpleDecoderAudioRenderer and
MediaCodecAudioRenderer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139187254"
botaydotcom,2016-11-14 19:47:43,https://api.github.com/repos/google/ExoPlayer/git/commits/74383716a6f6844f25898c0310dfe4dc708775b3,74383716a6f6844f25898c0310dfe4dc708775b3,"Update exoplayerv2 vp9 extension.

Reset RenderedFirstFrame when setting OuputBufferRenderer.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139100783"
AquilesCanta,2016-11-14 13:56:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6d5d054b45796162f135645539f96b2181bb38a9,6d5d054b45796162f135645539f96b2181bb38a9,"Fix lint in FlacExtractor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=139064912"
andrewlewis,2016-11-11 14:43:26,https://api.github.com/repos/google/ExoPlayer/git/commits/bcc6c9ef43d0cde391204b8c1f20bb2de8686f9d,bcc6c9ef43d0cde391204b8c1f20bb2de8686f9d,"Fix a typo.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138871293"
erdemguven,2016-10-08 02:06:24,https://api.github.com/repos/google/ExoPlayer/git/commits/ff1a008817db3e3bab93cf78f1b17dcaaf540688,ff1a008817db3e3bab93cf78f1b17dcaaf540688,"Delete temporary test folders on test exit.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138860196"
erdemguven,2016-11-10 18:54:13,https://api.github.com/repos/google/ExoPlayer/git/commits/92a98d1ce2a27266fa69927235929f45678aac40,92a98d1ce2a27266fa69927235929f45678aac40,"Encrypt SimpleCache index file.

Clean up AtomicFile and make it return a custom FileOutputStream
for writing which handles IOException automatically during write
operations.

It also syncs the file descriptor and deletes the backup file on
close() call. This fixes the order of flush and close operations
when the fileoutputstream is wrapped by another OutputStream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138779187"
ojw28,2016-11-10 15:34:29,https://api.github.com/repos/google/ExoPlayer/git/commits/8cc7dfda7dfae000e41aeb50840786547241ecf0,8cc7dfda7dfae000e41aeb50840786547241ecf0,"Fix threading issues between ExoPlayerImpl/ExoPlayerImplInternal

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138758739"
ojw28,2016-11-10 15:31:12,https://api.github.com/repos/google/ExoPlayer/git/commits/7ac1cab2d5c5c7b9d32e77555570209eb4b1442a,7ac1cab2d5c5c7b9d32e77555570209eb4b1442a,"Set language to null unless explicitly defined as ""und"" in container

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138758504"
ojw28,2016-11-10 00:07:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2620045b0dc0b6777c5cc7651c9430e1d3decf08,2620045b0dc0b6777c5cc7651c9430e1d3decf08,"Add debug logging when codec support checks fail

Issue: #2034

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138698239"
ojw28,2016-11-09 22:41:22,https://api.github.com/repos/google/ExoPlayer/git/commits/aefc5165fd8363bf62487c37dc4f743d4ed17208,aefc5165fd8363bf62487c37dc4f743d4ed17208,"Fix cache upgrade

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138687623"
vigneshvg,2016-11-09 18:06:23,https://api.github.com/repos/google/ExoPlayer/git/commits/ee8a7f17ff9c81db1cbe665c99eaa9de78f14233,ee8a7f17ff9c81db1cbe665c99eaa9de78f14233,"vp9_extension: Fix potential integer overflows

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138652561"
AquilesCanta,2016-11-09 13:36:37,https://api.github.com/repos/google/ExoPlayer/git/commits/b1fe274df39a9f964e9616f55f935fe4d309602a,b1fe274df39a9f964e9616f55f935fe4d309602a,"Replace java.text.ParseException for ExoPlayer's ParserException

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138628300"
andrewlewis,2016-11-09 08:59:00,https://api.github.com/repos/google/ExoPlayer/git/commits/8236efe6a544fc81b151fb42d7adf140e93902fc,8236efe6a544fc81b151fb42d7adf140e93902fc,"Provide an overlay FrameLayout in SimpleExoPlayerView.

This can be used by the app for showing arbitrary UI on top of the player (for
example, UI elements associated with an ad).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138610733"
ojw28,2016-11-08 17:41:45,https://api.github.com/repos/google/ExoPlayer/git/commits/d5cbb101ed291cadc574f83f3d09e4f7efe2dfd2,d5cbb101ed291cadc574f83f3d09e4f7efe2dfd2,"SimpleExoPlayerView: Remove a bit of dead code

These variables are never read, since the underlying control
view reads them directly from the attrs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138528246"
ojw28,2016-11-08 10:12:59,https://api.github.com/repos/google/ExoPlayer/git/commits/7b0effc2d0558ded401cf40ec7fe55f10bdb0624,7b0effc2d0558ded401cf40ec7fe55f10bdb0624,"Project default start pos to fix VOD->Live transitions

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138493584"
ojw28,2016-11-07 18:22:47,https://api.github.com/repos/google/ExoPlayer/git/commits/89ad5e6db3cbb1f09e38e6f68d0f590f7ae0e101,89ad5e6db3cbb1f09e38e6f68d0f590f7ae0e101,"Fix ExoPlayerImplInternal timestamp conversions

This fixes VOD->Live transitions, with the caveat that
the Live portion still ends up further behind the live
edge than intended. This will be fixed in a following
change.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138407066"
ojw28,2016-11-07 17:43:02,https://api.github.com/repos/google/ExoPlayer/git/commits/3c8db3b9cbf85038b7df0b1a084f3b625e3a781e,3c8db3b9cbf85038b7df0b1a084f3b625e3a781e,"Pass Timeline back with seek position

This change fixes the race condition where the internal
timeline is different to the externally visible timeline
when a seek is performed. We now resolve the seek position
using the externally visible timeline, then adjust the
period index as required for the internal timeline. If the
period is missing we follow similar logic for the existing
case where the playing period is removed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138402076"
cdrolle,2016-11-07 16:11:12,https://api.github.com/repos/google/ExoPlayer/git/commits/a4935a9ba0a632febcbe7a6b95e5875c2b1a4996,a4935a9ba0a632febcbe7a6b95e5875c2b1a4996,"Added support for multiple RawCC (CEA-608/CEA-708) tracks in DASH.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138392065"
AquilesCanta,2016-11-07 15:47:30,https://api.github.com/repos/google/ExoPlayer/git/commits/0354ef24d4bf0c19c9bc42b3a6485457c955100a,0354ef24d4bf0c19c9bc42b3a6485457c955100a,"Add support for splice info section reading in TS

This CL adds a SpliceInfoDecoder for the most common SCTE35 commands for splcing.
So far, it only includes TransportStreams, but porting it to HLS and DASH should be
fairly easy.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138389807"
botaydotcom,2016-11-07 14:27:48,https://api.github.com/repos/google/ExoPlayer/git/commits/4cd8c77053bc3bde32133b7c9e196c68bffafc51,4cd8c77053bc3bde32133b7c9e196c68bffafc51,"Add layer of indirection for DRM.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138383979"
erdemguven,2016-11-07 13:14:38,https://api.github.com/repos/google/ExoPlayer/git/commits/a6e277011617ff0b466925d08a4f98c14143d09d,a6e277011617ff0b466925d08a4f98c14143d09d,"Upgrade SimpleCacheSpan files during createCacheEntry call.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138379386"
erdemguven,2016-11-07 11:39:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ff77d1e72cc3836abf0a724b1791fa39176b7472,ff77d1e72cc3836abf0a724b1791fa39176b7472,"Add index file to hold header information for cached content.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138373878"
AquilesCanta,2016-11-04 17:48:14,https://api.github.com/repos/google/ExoPlayer/git/commits/992cfdecc250d20129516a922536e007fe371a4b,992cfdecc250d20129516a922536e007fe371a4b,"Feed timestamps from loaded chunks back to the playlist tracker

This is the first step towards allowing discontinuities in the
playlist tracking. Also changed durationSecs for durationUs in
MediaPlaylist.Segment.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138207732"
ojw28,2016-11-04 14:03:51,https://api.github.com/repos/google/ExoPlayer/git/commits/a5a2bc89f48a6ceff49f6a52ca93b5cfe8360cab,a5a2bc89f48a6ceff49f6a52ca93b5cfe8360cab,"Push window->period seekTo conversions into ExoPlayerImplInternal

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138185910"
ojw28,2016-11-04 11:07:57,https://api.github.com/repos/google/ExoPlayer/git/commits/3e2cb9f89ab5061b6cc1e67fceedbdb3075eafe3,3e2cb9f89ab5061b6cc1e67fceedbdb3075eafe3,"Fix incorrect renderer reset enable position

handlePeriodPrepared
->setPlayingPeriodHolder
->enableRenderers

passes rendererPositionUs to renderer.enable(), but
this value is not set correctly.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138176114"
ojw28,2016-11-03 17:00:24,https://api.github.com/repos/google/ExoPlayer/git/commits/6c7ead5d0cadb81dc46d221a66ff9e68fd150a76,6c7ead5d0cadb81dc46d221a66ff9e68fd150a76,"Document all the ways our new UI components can be customised.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138082864"
cdrolle,2016-11-03 15:47:24,https://api.github.com/repos/google/ExoPlayer/git/commits/d9421f4fb9d91aab39e5b5ac908e1bac8f241297,d9421f4fb9d91aab39e5b5ac908e1bac8f241297,"Fixed issue when VOD-style period is present in a dynamic manifest

A VOD-style period in a dynamic manifest would result in a NullPointerException.
Also fix another issue in which an unrecognized mime type would also result in
NullPointerException.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138075137"
AquilesCanta,2016-11-03 10:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/aaf38adc26e2d2333c67e5989c2d36a7b6627414,aaf38adc26e2d2333c67e5989c2d36a7b6627414,"Add support for HLS live seeking

In order to expose the live window, it is necessary (unlike before) to refresh
the live playlists being played periodically so as to know where the user can
seek to. For this, the HlsPlaylistTracker is added, which is basically a map
from HlsUrl's to playlist. One of the playlists involved in the playback will
be chosen to define the live window. The playlist tracker it periodically.
The rest of the playilst will be loaded lazily. N.B: This means that for VOD,
playlists are not refreshed at all. There are three important features missing
in this CL(that will be added in later CLs):

* Blacklisting HlsUrls that point to resources that return 4xx response codes.
    As per [Internal: b/18948961].
* Allow loaded chunks to feed timestamps back to the tracker, to fix any
    drifting in live playlists.
* Dinamically choose the HlsUrl that points to the playlist that defines the
    live window.

Other features:
--------------

The tracker can also be used for keeping track of discontinuities. In the case
of single variant playlists, this is particularly useful. Might also work if
there is a that the live playlists are aligned (but this is more like working
around the issue, than actually solving it). For this, see [Internal: b/32166568]
and [Internal: b/28985320].

Issue:#87

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=138054302"
ojw28,2016-07-20 03:28:30,https://api.github.com/repos/google/ExoPlayer/git/commits/7b3690a0a62793f75ade69c484bb2d975362026e,7b3690a0a62793f75ade69c484bb2d975362026e,"Fix onLoad* event media times for multi-period case

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137932100"
ojw28,2016-10-31 14:10:31,https://api.github.com/repos/google/ExoPlayer/git/commits/488c2d82708fcd547a5a0b19bd56160914ed8567,488c2d82708fcd547a5a0b19bd56160914ed8567,"Fixes for Issue #1962

- Use A/V tracks only for buffering position when available
  in ExtractorMediaPeriod.
- Fix layering of exo_simple_player_view so that subtitles
  are above album art. The test stream provided has both.
- Make album art in SimpleExoPlayer view respect the resize
  mode, like we do for video.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137698473"
AquilesCanta,2016-10-31 13:49:53,https://api.github.com/repos/google/ExoPlayer/git/commits/daf7b948a113a1a5981de99f06a16810c73e4f14,daf7b948a113a1a5981de99f06a16810c73e4f14,"Fix buffering state when selecting VTT track with no cues

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137697023"
ojw28,2016-10-27 16:58:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ee969b738e30f29bdd8fcdbaf5fe382b9c843eea,ee969b738e30f29bdd8fcdbaf5fe382b9c843eea,"Load all exolist.json asset files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137406773"
andrewlewis,2016-10-27 14:29:39,https://api.github.com/repos/google/ExoPlayer/git/commits/70cc98bb99e81d60ce691f1a4676e148af201347,70cc98bb99e81d60ce691f1a4676e148af201347,"Fix broken log call

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137392736"
ojw28,2016-10-27 14:05:06,https://api.github.com/repos/google/ExoPlayer/git/commits/ced03e9ad56f572de967b220e78887815bee457c,ced03e9ad56f572de967b220e78887815bee457c,"Merge pull request #2008 from google/dev-v2-id3

Merge ID3 support into dev-v2"
ojw28,2016-10-27 11:47:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c4b4e8457929d3d5413537f3c32226c996811422,c4b4e8457929d3d5413537f3c32226c996811422,Add artwork support to SimpleExoPlayerView + misc improvements
ojw28,2016-10-27 11:37:29,https://api.github.com/repos/google/ExoPlayer/git/commits/0c8f3c7270c465cbce27fb9194ad5b9f5ed6185c,0c8f3c7270c465cbce27fb9194ad5b9f5ed6185c,Merge branch 'dev-v2' into dev-v2-id3
ojw28,2016-10-27 11:37:22,https://api.github.com/repos/google/ExoPlayer/git/commits/8a89abcbf1d72793d4ed370fe7e15dae78575e34,8a89abcbf1d72793d4ed370fe7e15dae78575e34,Merge branch 'dev-v2-id3' into dev-v2
ojw28,2016-10-25 18:46:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2c54363204b04bfd58375f30eb6ccc214ef818c3,2c54363204b04bfd58375f30eb6ccc214ef818c3,"Report track groups and selections through ExoPlayer

TrackSelector no longer has a listener. Instead, tracks
change events are reported through ExoPlayer.EventListener.
Applications interested in retrieving the selection info
should retrieve it directly from the TrackSelector by
calling an exposed getter.

Pretty sure the ref'd issue is fixed as a side effect of
this change.

Issue: #1942

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137183073"
AquilesCanta,2016-10-25 16:00:19,https://api.github.com/repos/google/ExoPlayer/git/commits/0b8e9754ca7a8b2634aa3ebaa85681b51b540743,0b8e9754ca7a8b2634aa3ebaa85681b51b540743,"Pass initialization parameters to section readers

Unlike with PesReaders, sections don't have a standard way
of providing timestmaps or even generating tracks. We need
to pass this information so that readers decide what to do
with it.

Issue:#726

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137162494"
AquilesCanta,2016-10-25 13:37:41,https://api.github.com/repos/google/ExoPlayer/git/commits/1809836c2171b4452f57ab938fcc35d6d4826f38,1809836c2171b4452f57ab938fcc35d6d4826f38,"Provide a method for creating a reader for a particular PID

This allows the user to create section readers(usually) for reserved pids,
like SDT, EIT, CAT, etc.

Issue:#726

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137150853"
andrewlewis,2016-07-21 01:08:21,https://api.github.com/repos/google/ExoPlayer/git/commits/ba6368a07a36109fc3fa027705e6ab40258f8144,ba6368a07a36109fc3fa027705e6ab40258f8144,"Don't try to access the caption manager when in edit mode.

Issue: #1991

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137131819"
ojw28,2016-10-26 22:45:50,https://api.github.com/repos/google/ExoPlayer/git/commits/8caaf0b5d992d5a31e7771ca49ec76ff5232e84b,8caaf0b5d992d5a31e7771ca49ec76ff5232e84b,Big cleanup of mp4 metadata extraction
ojw28,2016-10-24 18:22:41,https://api.github.com/repos/google/ExoPlayer/git/commits/1b39d21ed41ebaaac47fe4a5f61ba40b77bee1dc,1b39d21ed41ebaaac47fe4a5f61ba40b77bee1dc,Fix indentation and missing javadoc
ojw28,2016-10-24 17:50:35,https://api.github.com/repos/google/ExoPlayer/git/commits/6dbce8810294c628c22c013ac9cacfbb3bd20e34,6dbce8810294c628c22c013ac9cacfbb3bd20e34,Merge branch 'dev-v2-id3' of persistent-https://github.com/google/ExoPlayer into dev-v2-id3
ojw28,2016-10-24 17:49:43,https://api.github.com/repos/google/ExoPlayer/git/commits/929620c189c746cc8a3c3c0124683cbce5c270a9,929620c189c746cc8a3c3c0124683cbce5c270a9,Merge branch 'dev-v2' into dev-v2-id3
ojw28,2016-10-24 16:55:45,https://api.github.com/repos/google/ExoPlayer/git/commits/99503e6e3a671160f4bfca078ae20c288ee515d7,99503e6e3a671160f4bfca078ae20c288ee515d7,"Fix playback of OGG with only a single payload page

Issue: #1976

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137044583"
ojw28,2016-10-24 15:48:17,https://api.github.com/repos/google/ExoPlayer/git/commits/5c83c28a1fa7c0b2c04eb5d38390484adc4c7e5b,5c83c28a1fa7c0b2c04eb5d38390484adc4c7e5b,"Blacklist another non-OMX decoder

Issue: #1986

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137035576"
ojw28,2016-10-24 15:24:41,https://api.github.com/repos/google/ExoPlayer/git/commits/790e5fd2a1110e9440db40447e564ac393cb99b5,790e5fd2a1110e9440db40447e564ac393cb99b5,"Update gradle wrapper

Code coverage is disabled in V2 to workaround
https://code.google.com/p/android/issues/detail?id=226070

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137032839"
ojw28,2016-10-24 11:04:55,https://api.github.com/repos/google/ExoPlayer/git/commits/819ebf703abb61b1ac3f4a60359a45266ac49cb4,819ebf703abb61b1ac3f4a60359a45266ac49cb4,"Assign track type TEXT for CEA708

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=137011920"
ojw28,2016-10-24 17:01:48,https://api.github.com/repos/google/ExoPlayer/git/commits/00f9fc6728f961dc55fcfff1db880811b5252966,00f9fc6728f961dc55fcfff1db880811b5252966,Don't propagate GaplessInfoHolder when parsing mp4 metadata
AquilesCanta,2016-07-18 07:49:41,https://api.github.com/repos/google/ExoPlayer/git/commits/6e69b985175afcc692ae4b4f1ed89ab3f993712c,6e69b985175afcc692ae4b4f1ed89ab3f993712c,"Avoid throwing an exception when an ID3 header is not found

Issue:#1966

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136836332"
AquilesCanta,2016-10-21 10:46:41,https://api.github.com/repos/google/ExoPlayer/git/commits/eeb37d73e7436a9f9be4fb53d36d843b82338a4e,eeb37d73e7436a9f9be4fb53d36d843b82338a4e,"Create the SectionPayloadReader interface

SectionPayloadReaders are provided to a SectionReader to
get whole sections(crc checked). This allows the injection
of custom section readers. E.G: SCTE35 messages.

Issue:#726

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136816612"
andrewlewis,2016-10-20 14:08:38,https://api.github.com/repos/google/ExoPlayer/git/commits/a0fe258e8d70a93ed8fd9cd296be44625ea03669,a0fe258e8d70a93ed8fd9cd296be44625ea03669,"Fix/suppress some analysis warnings.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136710546"
AquilesCanta,2016-10-20 13:29:45,https://api.github.com/repos/google/ExoPlayer/git/commits/862552c2edf0f1acdebb55a67ae9bd79fe455a08,862552c2edf0f1acdebb55a67ae9bd79fe455a08,"Convert ElementaryStreamReaderFactory into TsPayloadReaderFactory

In this CL:

* PesReader moves out of TsExtractor and becomes public.
* ElementaryStreamReaderFactory becomes TsPayloadReaderFactory and is
    moved to TsPayloadReader.
* The TsPayloadReaderFactory is in charge of wrapping any
    ElementaryStreamReaders with a PesReader.

Incoming:
* Extract SectionReader supperclass (analog to PesReader, but for
    sections) from Pat and Pmt readers.
* Add a ScteReader, wrapped by a section reader, and include it in
    the DefaultTsPayloadReaderFactory.

Issue:#726

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136707706"
ojw28,2016-10-20 12:04:12,https://api.github.com/repos/google/ExoPlayer/git/commits/0cff74dc704fa1d7fa6fd7d969398e7831384c24,0cff74dc704fa1d7fa6fd7d969398e7831384c24,"Clean up okhttp extension Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136702598"
AquilesCanta,2016-10-21 10:45:21,https://api.github.com/repos/google/ExoPlayer/git/commits/e4bafd964dffed35a60f82604d50e241d980932c,e4bafd964dffed35a60f82604d50e241d980932c,"Merge pull request #1979 from vitekn/dev-v2

Fix NPE in TsExtractor when ElementaryStreamReaderFactory returns null"
vitekn,2016-10-21 10:07:08,https://api.github.com/repos/google/ExoPlayer/git/commits/b2222f8cb7bc44d2f69c6037a015923623b7d46a,b2222f8cb7bc44d2f69c6037a015923623b7d46a,"Null pointer exception fixed

pesPayloadReader can be null here because DefaultStreamReader.init() can return null on unknown streamId. If we have a junk transport stream in our content an exception will be thrown."
ojw28,2016-10-20 11:43:38,https://api.github.com/repos/google/ExoPlayer/git/commits/6673483aca83e83445f3ca4ca61056af48d47cab,6673483aca83e83445f3ca4ca61056af48d47cab,"Merge pull request #1971 from google/dev-v2

Update dev-v2-id3"
ojw28,2016-10-20 11:33:44,https://api.github.com/repos/google/ExoPlayer/git/commits/d79f8f64de5d57d053a857be89006d44d756df2d,d79f8f64de5d57d053a857be89006d44d756df2d,"Merge pull request #1970 from google/dev-v2-r2.0.4

r2.0.4"
ojw28,2016-10-20 10:35:32,https://api.github.com/repos/google/ExoPlayer/git/commits/c7824c4660d2958ea331d23dbcca9cc74d39ad98,c7824c4660d2958ea331d23dbcca9cc74d39ad98,"Bump version to r2.0.4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136697697"
AquilesCanta,2016-10-19 16:58:41,https://api.github.com/repos/google/ExoPlayer/git/commits/8e0e0ca0dd56ecc5d32f9508014a001d7cb94c3c,8e0e0ca0dd56ecc5d32f9508014a001d7cb94c3c,"Fix NPE when trying to play H265 in Ts files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136607848"
ojw28,2016-10-20 11:20:45,https://api.github.com/repos/google/ExoPlayer/git/commits/924a0417438ed9bc3bc8cb899e40122478d4e101,924a0417438ed9bc3bc8cb899e40122478d4e101,Merge branch 'dev-v2' of persistent-https://github.com/google/ExoPlayer into dev-v2
ojw28,2016-10-20 10:35:32,https://api.github.com/repos/google/ExoPlayer/git/commits/f56b05f0d73f6ff0b646002c2a8d0acfd21fe723,f56b05f0d73f6ff0b646002c2a8d0acfd21fe723,"Bump version to r2.0.4

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136697697"
AquilesCanta,2016-10-19 16:58:41,https://api.github.com/repos/google/ExoPlayer/git/commits/bebbf29a786f98f5ffd37f072c9b44974ae60e5d,bebbf29a786f98f5ffd37f072c9b44974ae60e5d,"Fix NPE when trying to play H265 in Ts files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136607848"
ojw28,2016-10-20 11:00:35,https://api.github.com/repos/google/ExoPlayer/git/commits/aa660acf0300d0ac22f54bd3ba80ceab77f4b21e,aa660acf0300d0ac22f54bd3ba80ceab77f4b21e,Fix typo in comments
ojw28,2016-10-19 15:18:48,https://api.github.com/repos/google/ExoPlayer/git/commits/75b00753403487ed30baaa10d874659171a36fee,75b00753403487ed30baaa10d874659171a36fee,"Add explicit TargetApi annotation to remove lint error

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136597149"
ojw28,2016-10-19 14:59:35,https://api.github.com/repos/google/ExoPlayer/git/commits/0d679dad0d2fb8b5749f342b2cacaf961bbd6832,0d679dad0d2fb8b5749f342b2cacaf961bbd6832,"Fix use of API level 19 method

Issue: #1965

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136595233"
ojw28,2016-10-19 16:18:17,https://api.github.com/repos/google/ExoPlayer/git/commits/3e3248d712cffabd203c5547cdfff80b636feb69,3e3248d712cffabd203c5547cdfff80b636feb69,Yet more misc ID3 improvements
ojw28,2016-10-19 15:18:48,https://api.github.com/repos/google/ExoPlayer/git/commits/586e6257cd009d137e1fd9250f45036d3f06145a,586e6257cd009d137e1fd9250f45036d3f06145a,"Add explicit TargetApi annotation to remove lint error

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136597149"
ojw28,2016-10-19 14:59:35,https://api.github.com/repos/google/ExoPlayer/git/commits/3a5cb435412d6acce4407e7b6fae170b006cb00e,3a5cb435412d6acce4407e7b6fae170b006cb00e,"Fix use of API level 19 method

Issue: #1965

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136595233"
ojw28,2016-10-19 12:16:36,https://api.github.com/repos/google/ExoPlayer/git/commits/aa1002a0d616b2ce50ce52d2d18e5c223a1365cd,aa1002a0d616b2ce50ce52d2d18e5c223a1365cd,"Rollback ""Add REQUIRE_HTTPS flag""

*** Reason for rollback ***

Flag doesn't enforce what it says it enforces, due to redirects

*** Original change description ***

Add REQUIRE_HTTPS flag

Note that it's not possible for the library to enforce that
the flag is adhered to, since it's possible for applications
to inject custom implementations of DataSource (there's no
requirement they even extend HttpDataSource for network
requesting implementations). It's possible for applications
to replace pretty much anything in the library, so there's
no other place we could put the flag where we could make
this guarantee. Hence this is a best-effort that will work
when...

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136583459"
AquilesCanta,2016-10-18 18:55:47,https://api.github.com/repos/google/ExoPlayer/git/commits/aecbbdd36c669f1c98facac91b92eb07850bf38c,aecbbdd36c669f1c98facac91b92eb07850bf38c,"Replace IndexOutOfBounds Exception for BehindLiveWindowException

This is a problem when two invocations of getNextChunk that retrieve
chunks (i.e. not playlists) occur too apart in time. In that case
the last loaded chunk has a media sequence that is behind the current
playlist.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136501291"
ojw28,2016-10-18 18:53:00,https://api.github.com/repos/google/ExoPlayer/git/commits/1cfc432bb8a9db2feaf72b226a6cc0efceb881a6,1cfc432bb8a9db2feaf72b226a6cc0efceb881a6,"Add REQUIRE_HTTPS flag

Note that it's not possible for the library to enforce that
the flag is adhered to, since it's possible for applications
to inject custom implementations of DataSource (there's no
requirement they even extend HttpDataSource for network
requesting implementations). It's possible for applications
to replace pretty much anything in the library, so there's
no other place we could put the flag where we could make
this guarantee. Hence this is a best-effort that will work
when using HttpDataSource implementations that we provide.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136500947"
gkapish,2016-10-17 21:54:17,https://api.github.com/repos/google/ExoPlayer/git/commits/d3f78e48081d71b75bedeeeee870972a7f9a24a5,d3f78e48081d71b75bedeeeee870972a7f9a24a5,"Deprecate call to new UrlRequest.Builder(...)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136399474"
erdemguven,2016-10-17 15:13:33,https://api.github.com/repos/google/ExoPlayer/git/commits/06fb29c939e74f7198a12bcece7b668df05ee52f,06fb29c939e74f7198a12bcece7b668df05ee52f,"Support caching of multi segment DASH, HLS and Smooth Streaming.

Use sha1 of content uri if a custom cache key or content id isn't provided.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136351830"
ojw28,2016-10-18 14:17:01,https://api.github.com/repos/google/ExoPlayer/git/commits/7e352295d7f966b6e5b2b7520bd766840be8423d,7e352295d7f966b6e5b2b7520bd766840be8423d,Propagate ID3 data for MP3
ojw28,2016-10-18 14:02:35,https://api.github.com/repos/google/ExoPlayer/git/commits/7594f5b78ba216f6085675972f830b2ebfe230ee,7594f5b78ba216f6085675972f830b2ebfe230ee,Further enhance ID3 decoder + support
ojw28,2016-10-17 21:52:12,https://api.github.com/repos/google/ExoPlayer/git/commits/e2ff401ea1e50dc76ec50ad274a3f927388ec16a,e2ff401ea1e50dc76ec50ad274a3f927388ec16a,"Merge pull request #1958 from google/dev-v2

Merge dev-v2 into dev-v2-id3"
ojw28,2016-10-17 21:47:03,https://api.github.com/repos/google/ExoPlayer/git/commits/66652f65bbad83df8b6bef20a7d24943e7f6a17a,66652f65bbad83df8b6bef20a7d24943e7f6a17a,Make Id3Util final
ojw28,2016-10-17 21:45:09,https://api.github.com/repos/google/ExoPlayer/git/commits/4391014a7af98b227377b0f4bf75cac245914f33,4391014a7af98b227377b0f4bf75cac245914f33,Split genres into separate util class
ojw28,2016-10-17 21:35:21,https://api.github.com/repos/google/ExoPlayer/git/commits/110c8f6f1f4459b05e9943fd6f5c8521735bbfbe,110c8f6f1f4459b05e9943fd6f5c8521735bbfbe,Improvements to ID3 decoder
ojw28,2016-10-17 14:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/08256eee325bc6839da36235986c58354ae20a9d,08256eee325bc6839da36235986c58354ae20a9d,"Merge pull request #1955 from google/dev-v2

r2.0.3"
ojw28,2016-10-17 12:03:25,https://api.github.com/repos/google/ExoPlayer/git/commits/cecb1f5f765bc834a307d9f65315c880bf7844cd,cecb1f5f765bc834a307d9f65315c880bf7844cd,"Bump version + update release notes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136339035"
AquilesCanta,2016-10-14 18:16:16,https://api.github.com/repos/google/ExoPlayer/git/commits/e873b4b6abf4827b04fcf7074c7c00cd3e5073c4,e873b4b6abf4827b04fcf7074c7c00cd3e5073c4,"Change prepare() for maybePrepare() in HlsSampleStreamWrapper

This will allow asynchronous preparation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136176854"
ojw28,2016-10-17 13:38:56,https://api.github.com/repos/google/ExoPlayer/git/commits/50aeb20cc2f58ef6f5a0ad9ef52093b4be328ec3,50aeb20cc2f58ef6f5a0ad9ef52093b4be328ec3,"Make Id3Decoder stateless again

One issue with the previous implementation was that
isUnsynchronized would not be set back to false if
previously set to true and if the next header has
majorVersion >= 4. In general, having the decoder be
stateless is clearer (and thread safe, albeit that
this property is not required)."
ojw28,2016-10-13 15:23:39,https://api.github.com/repos/google/ExoPlayer/git/commits/6acf59c4fc12bfca9c77bdea3f69cf3b33d66d45,6acf59c4fc12bfca9c77bdea3f69cf3b33d66d45,"Fix Widevine L3 provisioning in V2

1. HttpMediaDrmCallback.executeProvisionRequest needs to specify
   an empty byte[], else we do a GET instead of a POST.
2. Content-Type should not be set when making the provision
   request, since there's no body.
3. DataSource implementations must correctly handle a non-null
   body with zero length. CronetDataSource was not handling this
   case. DefaultHttpDataSource was, but made a code modification
   to make it a little clearer. OkHttpDataSource seems to handle
   the case correctly, and it doens't look like the code can be
   made clearer.

Issue #1925

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136042641"
ojw28,2016-10-13 14:35:32,https://api.github.com/repos/google/ExoPlayer/git/commits/a22390c29b253694dd4db326bd5bb77c06b7e703,a22390c29b253694dd4db326bd5bb77c06b7e703,"Parse CEA-708 codec for rawCC

Note that actually handling CEA-708 is not yet implemented,
and so this is a no-op change from a behavior point of view.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136038439"
AquilesCanta,2016-10-13 11:54:13,https://api.github.com/repos/google/ExoPlayer/git/commits/e685edc179837f658bd551992c720dd8dc7bff9f,e685edc179837f658bd551992c720dd8dc7bff9f,"Make interface implementation consistent among ExtractorOutputs

The method track(int id) currently has different behaviours across
implementations. This CL maps ids to track outputs, which means
that successive calls with the same id will return the same
TrackOutput instance. Also fixes TsExtractor inconsistent behavior
after a seek.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136026721"
AquilesCanta,2016-10-13 11:40:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ff712aead598515a6c9d47bf3050f185c226774c,ff712aead598515a6c9d47bf3050f185c226774c,"Try not adapting before failing with BehindLiveWindowException in Hls

Issue:#1782

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=136025847"
ojw28,2016-10-12 15:48:37,https://api.github.com/repos/google/ExoPlayer/git/commits/64262085a71f822741b65d78c0e883abaa15d8c1,64262085a71f822741b65d78c0e883abaa15d8c1,"Block when surface being replaced is non-null

A blocking call is necessary where we want to guarantee that
the player wont access the surface after the method call has
returned. We currently only do this for the case:

Surface->Null

But we should also do it for the case:

SurfaceA->SurfaceB

Since the caller may reasonably do something like destroy
SurfaceA immediately after it's been replaced.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135921296"
AquilesCanta,2016-10-12 13:18:06,https://api.github.com/repos/google/ExoPlayer/git/commits/f18373eeb23b67e46cbc84e1467beba79eebd67b,f18373eeb23b67e46cbc84e1467beba79eebd67b,"Decouple TsExtractor's readers from TrackOutputs

This allows the injectable reader factory to be a stateless factory, allows
the seeking to be consistent and will allow multiple CC channel support later
on.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135909712"
ojw28,2016-10-11 18:27:27,https://api.github.com/repos/google/ExoPlayer/git/commits/94c7ee72527d219a54e90281dab8c1d9cd994eb4,94c7ee72527d219a54e90281dab8c1d9cd994eb4,"Cronet - Skip if server doesn't support range requests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135819142"
ojw28,2016-10-12 16:27:54,https://api.github.com/repos/google/ExoPlayer/git/commits/bffffb0fac093d7fb6934d266f48c59b4ecb6264,bffffb0fac093d7fb6934d266f48c59b4ecb6264,Minor ID3 tweaks
ojw28,2016-10-12 16:05:09,https://api.github.com/repos/google/ExoPlayer/git/commits/f4b8d9490a276e96bf5dbde308a5a3bc654ba206,f4b8d9490a276e96bf5dbde308a5a3bc654ba206,"Merge pull request #1935 from google/dev-v2

Update dev-v2-id3 with dev-v2"
ojw28,2016-10-11 15:29:55,https://api.github.com/repos/google/ExoPlayer/git/commits/996fe47f8cbafd3a9e6a0b2025a036414bd70a04,996fe47f8cbafd3a9e6a0b2025a036414bd70a04,"Fix NPE releasing HlsMediaPeriod

Issue: #1907

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135798950"
ojw28,2016-05-07 07:13:17,https://api.github.com/repos/google/ExoPlayer/git/commits/29f3eb5e5a0f720d55f73992c0817ac4f7c3b9b7,29f3eb5e5a0f720d55f73992c0817ac4f7c3b9b7,"Fixes for retries

- Fix issue in ExoPlayerImpl where the timeline was null'd
  but onTimelineChanged was not fired.
- Add the ability to not reset the timeline. This is useful
  for retries where you know the timeline will be the same
  as it was previously.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135797577"
ojw28,2016-10-11 14:20:44,https://api.github.com/repos/google/ExoPlayer/git/commits/83107cc25d402a5b405d67cdf4b3687d472d4f53,83107cc25d402a5b405d67cdf4b3687d472d4f53,"Fix missing release calls on loadingPeriodHolder

playingPeriodHolder can be null in the case that the first
period is still being prepared. We need to make sure we
release the period that's being prepared in such cases,
which is loadingPeriodHolder.

Issue: #1914

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135793472"
ojw28,2016-10-10 18:55:09,https://api.github.com/repos/google/ExoPlayer/git/commits/907b9bf4f65aef81ee12cb06840fd3fac555ed77,907b9bf4f65aef81ee12cb06840fd3fac555ed77,"Sanitize threading in CronetDataSource

- Move nearly all logic onto the calling thread (i.e. the thread
  calling open/read/close), to make threading correctness more
  obvious.
- Document which variables are read/written from which thread, and
  why the call sequences are safe.
- Fix thread safety issue that I think could probably cause data
  corruption in the case of a read timeout followed by another
  request into the DataSource.

Also:

- Relaxed content length checking to be consistent with the other
  http DataSource implementations, and avoided parsing the headers
  where they're not used.
- Fixed missing generics in CronetDataSourceFactory.
- Added TODO to work with servers that don't support partial range
  requests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135702217"
ojw28,2016-10-10 18:40:08,https://api.github.com/repos/google/ExoPlayer/git/commits/4fab402274c8bc9e8f495493868842cce05d0eff,4fab402274c8bc9e8f495493868842cce05d0eff,"Fix missing generics

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135700280"
ojw28,2016-10-10 17:44:13,https://api.github.com/repos/google/ExoPlayer/git/commits/d922a21160ebd8edd351e1d15e1b727e1768e0b2,d922a21160ebd8edd351e1d15e1b727e1768e0b2,"Select the cenc sinf atom explicitly

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135692709"
erdemguven,2016-10-10 16:09:47,https://api.github.com/repos/google/ExoPlayer/git/commits/1b81cfdb56b4ca1a56d8ca0427e6be6ed7068a62,1b81cfdb56b4ca1a56d8ca0427e6be6ed7068a62,"Rename build flavors and remove pre hashing of DataSpec key values.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135682130"
ojw28,2016-07-28 07:48:37,https://api.github.com/repos/google/ExoPlayer/git/commits/91f8328a5f1675a25d6546d4c79bcfdc175a535c,91f8328a5f1675a25d6546d4c79bcfdc175a535c,"UI component improvements

- Make sure no events are posted on PlaybackControlView
  if it's not attached to a window. This can cause leaks.
  The target hide time is recorded if necessary and
  processed when the view is re-attached.
- Deduplicated PlaybackControlView.VisibilityListener
  invocations.
- Fixed timeouts to be more intuitive (I think).
- Fixed initial visibility of PlaybackControlView when
  used as part of SimpleExoPlayerView.
- Made some more attributes configurable from layout xml.

Issue: #1908
Issue: #1919
Issue: #1923

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135679988"
ojw28,2016-10-06 17:55:09,https://api.github.com/repos/google/ExoPlayer/git/commits/97020e0bab87d8f7321c3f29ba4041904e227426,97020e0bab87d8f7321c3f29ba4041904e227426,"CronetDataSource: Fix getContentLength logging

This is a minor cleanup. The main thing it fixes is that
the ""Inconsistent headers"" and ""Unexpected Content-Range""
log messages were printing List<String> objects, rather
than the actual headers they are supposed to print.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135378074"
ojw28,2016-10-06 17:46:38,https://api.github.com/repos/google/ExoPlayer/git/commits/d95baa3ee95121b227497d0fe63a0481b7b8b0e8,d95baa3ee95121b227497d0fe63a0481b7b8b0e8,"CronetDataSource: Fix thread safety issue with requestProperties

The access in fillCurrentRequestPostBody wasn't protected with
synchronization. Furthermore, just synchronizing it wouldn't be
sufficient, since what we really need to check is whether the
Content-Type header has been added to the UrlRequest.Builder.
The contents of requestProperties may have changed between the
headers being added to UrlRequest.Builder and the call to
fillCurrentRequestPostBody.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135376904"
ojw28,2016-10-06 17:32:54,https://api.github.com/repos/google/ExoPlayer/git/commits/661b14020e02210f1bff436bc145c2c38663f115,661b14020e02210f1bff436bc145c2c38663f115,"Partial cleanup of CronetDataSource II

- Allow null Content-Type in response headers.
- Inline validateResponse, just because it makes it clearer
  what thread it's being executed on when inlined.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135375063"
ojw28,2016-10-06 17:20:55,https://api.github.com/repos/google/ExoPlayer/git/commits/ba56f9165cd7feae9a6039779de0bc311d8736d7,ba56f9165cd7feae9a6039779de0bc311d8736d7,"Partial cleanup of CronetDataSource

- Fix bug in getCurrentRequestStatus where we weren't
  blocking on the condition variable.
- Make methods static where possible.
- Clean up getUri implementation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135373586"
ojw28,2016-10-06 17:13:27,https://api.github.com/repos/google/ExoPlayer/git/commits/5803b2538d4f6a8ef45e95ec73b6c42cc974dcd9,5803b2538d4f6a8ef45e95ec73b6c42cc974dcd9,"No-op reorder of CronetDataSource methods

This change is a no-op reodering, as a precursor to
further cleanup. The public methods are grouped by
the class/interface they implement. The private methods
are ordered with things that will become static in
a subsequent change at the bottom.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135372629"
ojw28,2016-10-09 13:41:46,https://api.github.com/repos/google/ExoPlayer/git/commits/93c2133f2945f9cb7a9dd6bbcc714874bc5567ba,93c2133f2945f9cb7a9dd6bbcc714874bc5567ba,"Merge pull request #1909 from kaorimatz/okhttp-call-factory

Use Call.Factory instead of OkHttpClient"
kaorimatz,2016-10-07 12:00:27,https://api.github.com/repos/google/ExoPlayer/git/commits/880bdc181adf9805ec984b7d77687499d73c598f,880bdc181adf9805ec984b7d77687499d73c598f,"Use Call.Factory instead of OkHttpClient

This allows using alternate implementation of an HTTP client. We can use
OkHttpClient as before as it implements Call.Factory."
ojw28,2016-10-06 16:40:16,https://api.github.com/repos/google/ExoPlayer/git/commits/f94218a758bf6810520b5392521818b8c1b5e604,f94218a758bf6810520b5392521818b8c1b5e604,"Merge pull request #1905 from google/dev-v2

r2.0.2"
ojw28,2016-10-06 13:52:12,https://api.github.com/repos/google/ExoPlayer/git/commits/6c12ec629a30bbf42ab9cc53096647cb12998607,6c12ec629a30bbf42ab9cc53096647cb12998607,"Some minor UI refinements

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135353593"
ojw28,2016-10-05 20:16:58,https://api.github.com/repos/google/ExoPlayer/git/commits/d334dfdcba1eb676ff9c8708a263b0279afb4720,d334dfdcba1eb676ff9c8708a263b0279afb4720,"Fix merging of selected streams.

Playback would fail if a renderer is toggled from consuming from
one child to another in a single step.

Issue: #1900

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135270356"
ojw28,2016-10-05 18:56:24,https://api.github.com/repos/google/ExoPlayer/git/commits/2cf339e0953fd00bbd2b664ff1770464f33bebc8,2cf339e0953fd00bbd2b664ff1770464f33bebc8,"Bump version to 2.0.2 + document inclusion of OkHttp extension

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135260806"
ojw28,2016-10-05 14:15:41,https://api.github.com/repos/google/ExoPlayer/git/commits/89c438078e54bc6426d294c2ddc94436a5901a05,89c438078e54bc6426d294c2ddc94436a5901a05,"Fix retry crash in edge case

Configuration of retry currently fails if all of the
following are true, which is highly unlikely but does
occur in the ref'd issue.

1. Loading/extraction fails
2. Neither length of stream of a seek map is known
3. At least one track has been output by the extractor

Issue: #1899

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135228687"
ojw28,2016-10-05 10:39:19,https://api.github.com/repos/google/ExoPlayer/git/commits/1b90b7c12cfe0931134182d983609228df93fd12,1b90b7c12cfe0931134182d983609228df93fd12,"Factor out common variables for publishing

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135215320"
ojw28,2016-10-05 09:40:52,https://api.github.com/repos/google/ExoPlayer/git/commits/7c3fe15426e8150c92ee7589acf011872b0beb07,7c3fe15426e8150c92ee7589acf011872b0beb07,"Add convenience getPlayer methods to UI components

Issue: #1895

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135211179"
ojw28,2016-10-05 09:39:02,https://api.github.com/repos/google/ExoPlayer/git/commits/85d749d2d53cd7253dcd1e8b28ee64949946c717,85d749d2d53cd7253dcd1e8b28ee64949946c717,"Change mavenCentral -> jcenter

Ref: https://blog.bintray.com/2015/02/09/android-studio-migration-from-maven-central-to-jcenter/

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135211072"
ojw28,2016-10-04 19:30:50,https://api.github.com/repos/google/ExoPlayer/git/commits/b3c6f1caae9f67c66f1abb2a43d57788b4c0510b,b3c6f1caae9f67c66f1abb2a43d57788b4c0510b,"Finish cleaning DataSource implementations.

- Enfroce read returns 0 if readLength==0 everywhere.
- Fixes and simplifications for CronetDataSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135138232"
ojw28,2016-10-04 19:15:28,https://api.github.com/repos/google/ExoPlayer/git/commits/f8ed4cfdeeac04c6119b246bbaadb4907c3f79b7,f8ed4cfdeeac04c6119b246bbaadb4907c3f79b7,"Clean up some DataSource implementations

- Make read return 0 if readLength==0
- Return RESULT_END_OF_INPUT properly in the case that
  bytesRemaining is unset (this was broken previously,
  but only applies for assets > 2^31 bytes, so it's
  unlikely anyone ever hit this issue)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135136541"
ojw28,2016-10-04 14:17:09,https://api.github.com/repos/google/ExoPlayer/git/commits/7838a16dd8448efca76cf3b44e28e5b8f05a1f24,7838a16dd8448efca76cf3b44e28e5b8f05a1f24,"Publish OkHttp extension to Bintray.

It'll be a TODO to clean up some of the commonality between
publishing this and the core library (e.g. the version number
should really be spec'd in one place only). Just getting this
submitted for now so that we don't lose track of how I created
https://bintray.com/google/exoplayer/extension-okhttp

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135102459"
AquilesCanta,2016-10-04 13:57:20,https://api.github.com/repos/google/ExoPlayer/git/commits/e288880aaf1e952312141471326c5cd3aa22fed5,e288880aaf1e952312141471326c5cd3aa22fed5,"Fix Ac3 extractor sniff

Issue:#1875

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135100986"
ojw28,2016-10-04 13:49:50,https://api.github.com/repos/google/ExoPlayer/git/commits/f2beec4c82d0d3ba303b16fece61d02768037c1d,f2beec4c82d0d3ba303b16fece61d02768037c1d,"Fix playback tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135100455"
ojw28,2016-10-04 11:16:05,https://api.github.com/repos/google/ExoPlayer/git/commits/b29b4f7e1a66d78faedb468d3edba527e96ff0d3,b29b4f7e1a66d78faedb468d3edba527e96ff0d3,"MergingMediaPeriod + subtitle fixes

- Correctly null out streams[j] in the case that a renderer
  is being disabled.
- Read discontinuities from all children, not just enabled
  ones. This fixes a failure when reading a discontinuity
  with all renderers disabled.
- Add in some assertions to make incorrect stream selection
  failures obvious and immediate.
- Relocate subtitles so they're above the shutter (needed so
  they continue to be visible when video is disabled but
  text is still enabled).

Issue: #1854

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=135089944"
AquilesCanta,2016-10-03 17:21:24,https://api.github.com/repos/google/ExoPlayer/git/commits/6306c269885475c0a6f947245ed19b60a010ccfd,6306c269885475c0a6f947245ed19b60a010ccfd,"Add support for fragmented MP4 in HLS

This CL adds support for initialization segments in HLS. This is required mainly for(but not limited to) usage of fMP4. The fMP4 support only consists in creating the required extractor if the extension is .mp4, provided the initialization segment is correctly
loaded and passed to the extractor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134997636"
ojw28,2016-10-03 16:38:40,https://api.github.com/repos/google/ExoPlayer/git/commits/69af3897309efababfe4d7bacc03497c9fb9ede8,69af3897309efababfe4d7bacc03497c9fb9ede8,"Trim allocator on stop/reset by default

This prevents a large amount of memory from being held
in the case that a player instance is released, but the
application is holding dangling references to the player
that are preventing it from being garbage collected.

Issue: #1855

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134992945"
ojw28,2016-10-03 13:55:41,https://api.github.com/repos/google/ExoPlayer/git/commits/f75f3d75b26c8638c56e37cded54f3ac5fa58e0c,f75f3d75b26c8638c56e37cded54f3ac5fa58e0c,"Fix sideloaded subtitles

- Fix NPE issue in SingleSampleMediaPeriod.
- Delay handling of EOS in TextRenderer until the last
  subtitle is fully played out.

Issue: #1882

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134979286"
cdrolle,2016-09-30 14:33:10,https://api.github.com/repos/google/ExoPlayer/git/commits/37806ee792eb595d8524899a0386548d4600a56b,37806ee792eb595d8524899a0386548d4600a56b,"Added Basic CEA-708 caption support to ExoPlayer V2, roughly equivalent to the current state of CEA-608. It's still missing window (and the associated positioning and formatting) support, emulating a 3-line rollup.

Currently this has only been tested with the RawCC container, though it should work with anything that makes use of SeiReader (i.e. MPEG2-TS) with minimal changes to SeiReader.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134781660"
ojw28,2016-09-30 14:08:06,https://api.github.com/repos/google/ExoPlayer/git/commits/f8a8302f7bbcb47997095bd97b086eb633e49972,f8a8302f7bbcb47997095bd97b086eb633e49972,"Merge pull request #1879 from google/dev-v2

r2.0.1"
andrewlewis,2016-09-30 13:21:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c381093a485d956562bb824fa55ef67f38646929,c381093a485d956562bb824fa55ef67f38646929,"Update variable name in comment.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134776852"
andrewlewis,2016-09-30 12:46:14,https://api.github.com/repos/google/ExoPlayer/git/commits/ee4d297f22a3b6775a13a64cf9a97e229be21f00,ee4d297f22a3b6775a13a64cf9a97e229be21f00,"Fix seeking in the last period.

When reading the last period, the readingPeriodHolder was set to null in
updatePeriods if it was the last period. (This would occur almost immediately
when playing a single-period source.) seekToPeriodPosition suppresses reusing a
loaded/prepared period if the reading period and playing period did not match,
which meant that the whole timeline was recreated when seeking in the last
period.

Leave readingPeriodHolder non-null. This means that at all times either
playingPeriodHolder == readingPeriodHolder (and they could be null or
non-null), or playingPeriodHolder and readingPeriodHolder differ and are both
non-null.

Also fix an issue where streams were never forced to be recreated during track
reselection when reading ahead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134774238"
ojw28,2016-09-29 16:57:45,https://api.github.com/repos/google/ExoPlayer/git/commits/7971a18a836fe6bbb95fcd4f0ff994fd31836048,7971a18a836fe6bbb95fcd4f0ff994fd31836048,"Revert back to default cue parameters until we support positioning

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134673236"
ojw28,2016-09-29 15:08:51,https://api.github.com/repos/google/ExoPlayer/git/commits/21626c417e3545d767d4fac8661589489f87097b,21626c417e3545d767d4fac8661589489f87097b,"Bump version to 2.0.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134662367"
ojw28,2016-09-29 14:42:48,https://api.github.com/repos/google/ExoPlayer/git/commits/8bf0243daf3f20d421cc17d87f5fb9b51d30ef4b,8bf0243daf3f20d421cc17d87f5fb9b51d30ef4b,"Fix mp3 extraction failure for short frames

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134660133"
cdrolle,2016-09-28 15:30:50,https://api.github.com/repos/google/ExoPlayer/git/commits/040fe3b194572f680081fce3effb6c87d06ba9f8,040fe3b194572f680081fce3effb6c87d06ba9f8,"Refactored the text.eia608 package to text.cea.

All of the classes in the text.eia608 package have been moved to
text.cea, and renamed with the ""cea"" prefix instead of ""eia"". All of
the buffering logic has been extracted from Cea608Decoder (formerly
Eia608Decoder) into the abstract CeaDecoder, which Cea608Decoder
extends. Cea608Decoder also now expects a 3-byte sample (i.e. the
entire cc_data_pkt instead of just the cc_data_1 and cc_data_2 bytes).
Classes like RawCcExtractor and SeiReader, responsible for creating
these samples, have also been updated accordingly.

This change is a necessary precursor to adding support for multi
-channel CEA-608 and CEA-708 captions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134537482"
andrewlewis,2016-09-28 07:37:42,https://api.github.com/repos/google/ExoPlayer/git/commits/825ec70d319b9aba7dbe488f8139eb5392859cc9,825ec70d319b9aba7dbe488f8139eb5392859cc9,"Move preparation from MediaPeriod constructors to prepare().

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134504088"
AquilesCanta,2016-09-27 19:00:42,https://api.github.com/repos/google/ExoPlayer/git/commits/c7b5c967ff44e1c39b22a3509479c3431cdff5ac,c7b5c967ff44e1c39b22a3509479c3431cdff5ac,"Remove duplicate methods in DefaultTrackSelector

This encourages a single invalidation when setting different parameters.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134436136"
AquilesCanta,2016-09-27 18:36:54,https://api.github.com/repos/google/ExoPlayer/git/commits/ed5decfafc2a88216d0e05fbf71960a00c0e8698,ed5decfafc2a88216d0e05fbf71960a00c0e8698,"Add ElementaryStreamReader's factory to inject custom readers in TSExtractor

Issue:#726

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134433012"
erdemguven,2016-09-27 16:23:53,https://api.github.com/repos/google/ExoPlayer/git/commits/c82fd859becef278df2397eaf72551daa4f6010e,c82fd859becef278df2397eaf72551daa4f6010e,"Move build*DataSourceFactory methods to the DemoApplication class for easy customization.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134414869"
andrewlewis,2016-09-27 15:32:41,https://api.github.com/repos/google/ExoPlayer/git/commits/4a62b2688cf8c22545e54088c520bedcf4ba6764,4a62b2688cf8c22545e54088c520bedcf4ba6764,"Post onPrepared so it runs after createPeriod has finished.

Issue: #1853

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134409897"
andrewlewis,2016-09-27 15:05:22,https://api.github.com/repos/google/ExoPlayer/git/commits/85b61adb32cfc9a5b4cae83ce924994d0e9c020d,85b61adb32cfc9a5b4cae83ce924994d0e9c020d,"Call onPrepared/onSourceInfoRefreshed on the playback thread.

HlsSampleStreamWrapper and ExtractorMediaPeriod would call
onPrepared/onSourceInfoRefreshed from their loading threads. That was
problematic for ConcatenatingMediaSource and MergingMediaSource, which assume
that their callbacks are called on the same thread (iterating through timelines
from all sources and updating pendingTimelineSources respectively). This change
makes them post calls to the callbacks on the playback thread.

Generally, implementing a composite MediaSource is easier if
MediaPeriod.Callback's methods are all called on the same (playback) thread, so
this change makes that part of its contract.

Also post onContinueLoadingRequested from ExtractingLoadable because
MergingMediaPeriod.onContinueLoadingRequested reads trackGroups written on the
playback thread.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134407280"
ojw28,2016-09-27 11:12:23,https://api.github.com/repos/google/ExoPlayer/git/commits/eaf8218855940ea636212859ae6c7c5c9d493841,eaf8218855940ea636212859ae6c7c5c9d493841,"Fix shutter open/close behavior

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134389619"
cdrolle,2016-09-26 18:03:37,https://api.github.com/repos/google/ExoPlayer/git/commits/f5ebcb8d043292e3e9aad190900e9bcfc2f52296,f5ebcb8d043292e3e9aad190900e9bcfc2f52296,"Modified the default position parameters of the Cue objects created by
Eia608Decoder.

Full preamble positioning will be provided in a subsequent CL. This CL
also contains some minor cleanup in Eia608Decoder and adds some TODOs
to handle the second channel.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134299337"
AquilesCanta,2016-09-26 16:43:40,https://api.github.com/repos/google/ExoPlayer/git/commits/7273237b28e17cacc9fe9e58fff5ce9783026a65,7273237b28e17cacc9fe9e58fff5ce9783026a65,"Add an immutable holder for track selection parameters

This solves the thread unsafety issue of the default track selector and
allows atomic configuration changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134288525"
ojw28,2016-09-23 18:43:07,https://api.github.com/repos/google/ExoPlayer/git/commits/65eda1d105c894b6d359702587943dce9f35b77f,65eda1d105c894b6d359702587943dce9f35b77f,"Add missing generic types

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134099118"
ojw28,2016-09-23 15:49:04,https://api.github.com/repos/google/ExoPlayer/git/commits/88b9e8c615914d96e639c372115e7025ba641104,88b9e8c615914d96e639c372115e7025ba641104,"Clear the selection override even if renderer is disabled

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134078455"
AquilesCanta,2016-09-23 14:56:25,https://api.github.com/repos/google/ExoPlayer/git/commits/94cc606091799b4a03593582528a600494979b15,94cc606091799b4a03593582528a600494979b15,"Export variant codecs in HLS

Issue:#1772

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134073672"
andrewlewis,2016-09-23 14:49:27,https://api.github.com/repos/google/ExoPlayer/git/commits/8cf107408d2b6d15373dc8a6b938bfbec03e8b83,8cf107408d2b6d15373dc8a6b938bfbec03e8b83,"Replace stbl consistency assertions with a warning.

Issue: #1850

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134073096"
ojw28,2016-09-23 12:35:42,https://api.github.com/repos/google/ExoPlayer/git/commits/654d914bb65c8458d0c9713ac94f77164f7bee65,654d914bb65c8458d0c9713ac94f77164f7bee65,"Fix DefaultHttpDataSource read when requested length is 0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134063990"
falhassen,2016-09-22 23:00:43,https://api.github.com/repos/google/ExoPlayer/git/commits/f2cf086d760dfc3c0ccdc41edb628c97110075d7,f2cf086d760dfc3c0ccdc41edb628c97110075d7,"Fix content length calculation for gzipped files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=134011959"
ojw28,2016-09-22 12:57:00,https://api.github.com/repos/google/ExoPlayer/git/commits/57a2749a9d78c2c88a0b4da5e62dca8ff1c504d4,57a2749a9d78c2c88a0b4da5e62dca8ff1c504d4,"Fix playback of short duration content

Issue #1837

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133944552"
ojw28,2016-09-22 11:32:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a7d5f4b0694a07bd5c5d0f9e78ead86d3270f795,a7d5f4b0694a07bd5c5d0f9e78ead86d3270f795,"Automated rollback of ""Upgrade gradle to 2.14.1""

*** Reason for rollback ***

2.14.1 not compatible with 2.1.2. Oops.

*** Original change description ***

Upgrade gradle to 2.14.1

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133939282"
ojw28,2016-09-22 11:17:36,https://api.github.com/repos/google/ExoPlayer/git/commits/06b96bfa8e32ed57ba6c7eac4c23ce63a8b69ccd,06b96bfa8e32ed57ba6c7eac4c23ce63a8b69ccd,"Upgrade gradle to 2.14.1

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133938559"
andrewlewis,2016-09-22 09:53:01,https://api.github.com/repos/google/ExoPlayer/git/commits/1546da899bcba212fc269ad823802528e5f20eb5,1546da899bcba212fc269ad823802528e5f20eb5,"Use @IntDef where possible.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133932812"
mgersh,2016-09-21 18:00:38,https://api.github.com/repos/google/ExoPlayer/git/commits/e20d7034c710cc3470bc483ffc7fa514cce97b36,e20d7034c710cc3470bc483ffc7fa514cce97b36,"Switch to Cronet 55_0_2860_0

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133850026"
ojw28,2016-09-16 17:47:19,https://api.github.com/repos/google/ExoPlayer/git/commits/59ee4341c59c78c48bed0548af7694554fbaa68b,59ee4341c59c78c48bed0548af7694554fbaa68b,"Fix buffering issue for live streams

Issue: #1825

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133401980"
andrewlewis,2016-09-16 14:55:34,https://api.github.com/repos/google/ExoPlayer/git/commits/22728d9ae44c09a23a59c4ccc5e7453ce1e23ef5,22728d9ae44c09a23a59c4ccc5e7453ce1e23ef5,"Use new ParsableByteArray.reset where possible.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133384105"
ojw28,2016-09-15 16:01:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c17190319b6faf0583fb65b973e8924420498c11,c17190319b6faf0583fb65b973e8924420498c11,"Rename assets to avoid naming conflicts

Issue #1823

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133267642"
AquilesCanta,2016-09-15 10:56:08,https://api.github.com/repos/google/ExoPlayer/git/commits/70351bfae2ef13f35c0aa7629e50ea26f028afd5,70351bfae2ef13f35c0aa7629e50ea26f028afd5,"Create one HlsSampleStreamWrapper per track group

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133243031"
andrewlewis,2016-09-15 10:37:47,https://api.github.com/repos/google/ExoPlayer/git/commits/6a099f1c5706642d407fa317a201776057820779,6a099f1c5706642d407fa317a201776057820779,"Clean up MP3 synchronization and fix handling < 4 frames.

Also add a test MP3 stream with one frame.

Make FakeExtractorInput's end of input detection to apply also for peekFully, and
make its skip and read methods read at least one byte.

Issue: #1732

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133241641"
andrewlewis,2016-09-15 10:21:00,https://api.github.com/repos/google/ExoPlayer/git/commits/b1f9798b892a1285675d0f900dab3efd869f91d5,b1f9798b892a1285675d0f900dab3efd869f91d5,"Fix peeking the end of the stream then reading it.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133240502"
ojw28,2016-09-14 19:19:39,https://api.github.com/repos/google/ExoPlayer/git/commits/7d991cef305e95cae5cd2a9feadf4af8858b284b,7d991cef305e95cae5cd2a9feadf4af8858b284b,"Merge pull request #1822 from google/dev-v2

Fix crash on pre-api-21 devices."
ojw28,2016-09-14 19:13:32,https://api.github.com/repos/google/ExoPlayer/git/commits/ab49425e4360bef5e520a3fb554e03383aa15b58,ab49425e4360bef5e520a3fb554e03383aa15b58,"Fix crash on pre-api-21 devices.

The four-arg constructor didn't exist in ViewGroup for
earlier API levels. I think it can probably be safely
omitted, unless you know otherwise?

Issue: #1820

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133156975"
erdemguven,2016-09-14 14:05:15,https://api.github.com/repos/google/ExoPlayer/git/commits/5512aae4518ed563d645eea3ed9b5f3be4dbb964,5512aae4518ed563d645eea3ed9b5f3be4dbb964,"Revert CacheSpan EOS changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133123235"
ojw28,2016-09-14 13:37:13,https://api.github.com/repos/google/ExoPlayer/git/commits/80d08a6e254b26bcb7093af94d47701c0edfe6de,80d08a6e254b26bcb7093af94d47701c0edfe6de,"Fix the build

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133120924"
ojw28,2016-09-14 13:29:47,https://api.github.com/repos/google/ExoPlayer/git/commits/bf0d398ba86669be223994ec77412e2aeebf2335,bf0d398ba86669be223994ec77412e2aeebf2335,"Fix RawResourceDataSource remaining length

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133120449"
ojw28,2016-09-14 09:30:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e4cc2d6acdf2a846a3e62a2c22ee20eb3da58e1f,e4cc2d6acdf2a846a3e62a2c22ee20eb3da58e1f,"Set allowedVideoJoiningTimeMs to 0 to fix playback test failures

It defaults to 5000, which allows frames to be dropped in an
attempt to seamlessly rejoin when re-enabling video during an
ongoing playback. This causes performance failures when running
the test*AdaptiveWithRendererDisabling playback tests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133105110"
RikHeijdens,2016-09-14 13:47:07,https://api.github.com/repos/google/ExoPlayer/git/commits/98a5e199f9580a6a0d67096597e74388c064e587,98a5e199f9580a6a0d67096597e74388c064e587,Corrected vertical positioning
RikHeijdens,2016-09-14 13:32:53,https://api.github.com/repos/google/ExoPlayer/git/commits/b87463a85791e1e1600413cedf4c9adfd8615a64,b87463a85791e1e1600413cedf4c9adfd8615a64,Fixed an off by one error and fixed iterating through the cues
ojw28,2016-09-13 18:11:01,https://api.github.com/repos/google/ExoPlayer/git/commits/560071683ffa19c2906b75353fd72569e3606f27,560071683ffa19c2906b75353fd72569e3606f27,"Guide V2 + a few related code tweaks

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=133022058"
AquilesCanta,2016-09-13 11:48:34,https://api.github.com/repos/google/ExoPlayer/git/commits/76a05ce30fced43914c0a6713f96a1ed4d990be8,76a05ce30fced43914c0a6713f96a1ed4d990be8,"Fix race condition in timestamp adjustment for HLS

If a Webvtt HlsChunkSource got to schedule its chunk load before the
master HlsChunkSource (the one that downloads the TS or the fMP4
chunks), the player would never get past the buffering state.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132985792"
ojw28,2016-09-13 11:44:38,https://api.github.com/repos/google/ExoPlayer/git/commits/20757a1980c6f2cd7e2cd439c80292b2d7546574,20757a1980c6f2cd7e2cd439c80292b2d7546574,"Update some documentation for V2 + Rm extra blank line

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132985566"
ojw28,2016-09-13 10:43:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f4248410d90ccdda227103a15445e3b6c7d4b5c7,f4248410d90ccdda227103a15445e3b6c7d4b5c7,"PlaybackControlView improvements

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132981908"
ojw28,2016-09-12 19:31:21,https://api.github.com/repos/google/ExoPlayer/git/commits/f2229d920bd9611cb3daf48a37455c008cdce9e9,f2229d920bd9611cb3daf48a37455c008cdce9e9,"Move FlacJni to FlacDecoderJni

If/when we add the ability to query version information,
such methods will go into FlacLibrary for consistency with
the other extensions. The difference for Flac is that
since the decoder JNI is used by the extractor too, it
needs splitting into a separate from from FlacDecoder.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132904665"
ojw28,2016-09-12 18:52:41,https://api.github.com/repos/google/ExoPlayer/git/commits/de67fa5017d609dbd526468e3b84cc5169b0e51a,de67fa5017d609dbd526468e3b84cc5169b0e51a,"Allow replacement of libraries for Opus/Flac/Ffmpeg too

- Also make some of the naming more concise + misc style cleanup.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132899979"
ojw28,2016-09-12 17:48:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c46c6f18c22487e649249d713edf9e682b22707a,c46c6f18c22487e649249d713edf9e682b22707a,"Add DRM request headers to exolist.json format

Plus misc fixes related to the added samples.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132891534"
ojw28,2016-09-12 16:28:46,https://api.github.com/repos/google/ExoPlayer/git/commits/26e1306639c7f98825972cdcc4e573050a1f4ea8,26e1306639c7f98825972cdcc4e573050a1f4ea8,"Fix HLS Timeline.isDynamic

- Also fix an issue that allowed blacklisting of all tracks,
due to incorrect index being used.
- Also fix an issue with track deselection for HLS.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132882151"
andrewlewis,2016-09-12 15:30:42,https://api.github.com/repos/google/ExoPlayer/git/commits/2da35769ff69eb4dba69d8b74d1d8f5873316438,2da35769ff69eb4dba69d8b74d1d8f5873316438,"Fix some typos/consistency nits.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132876946"
ojw28,2016-09-12 11:40:44,https://api.github.com/repos/google/ExoPlayer/git/commits/383966b3074343ee0b679a0587e3d33c530dffc7,383966b3074343ee0b679a0587e3d33c530dffc7,"No-op cleanup for playback controls II

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132862043"
AquilesCanta,2016-09-12 11:40:12,https://api.github.com/repos/google/ExoPlayer/git/commits/625bb4ed48c9d70a44f9207c6604369b0c9b3c70,625bb4ed48c9d70a44f9207c6604369b0c9b3c70,"Fix PMT descriptors parsing bug

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132862014"
ojw28,2016-09-12 10:57:08,https://api.github.com/repos/google/ExoPlayer/git/commits/bcec5970231d7159afbfc2939ef215fe32326864,bcec5970231d7159afbfc2939ef215fe32326864,"No-op cleanup for playback controls

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132859943"
ojw28,2016-09-12 10:35:29,https://api.github.com/repos/google/ExoPlayer/git/commits/8190089b32ff56a4e176056c41e012f3bc1c5523,8190089b32ff56a4e176056c41e012f3bc1c5523,"Rename defaultStartPosition -> defaultPosition

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132858669"
ojw28,2016-09-12 10:26:37,https://api.github.com/repos/google/ExoPlayer/git/commits/94983675c2541d69613fff5404cd42f5580e50c9,94983675c2541d69613fff5404cd42f5580e50c9,"Expose an unknown mimeType video track rather throwing in parser

Issue: #631

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132858217"
ojw28,2016-09-12 10:16:37,https://api.github.com/repos/google/ExoPlayer/git/commits/67597ffc5aac66bdfa00c4c412c55763a6e356ea,67597ffc5aac66bdfa00c4c412c55763a6e356ea,"Keep player paused if it was paused when backgrounded

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132857692"
ojw28,2016-09-12 10:06:32,https://api.github.com/repos/google/ExoPlayer/git/commits/f2ddfb086786d9f26abd4d5a7cc0c954d85ee480,f2ddfb086786d9f26abd4d5a7cc0c954d85ee480,"Expose getPhysicalDisplaySize for non-primary display

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132856997"
ojw28,2016-09-09 18:13:14,https://api.github.com/repos/google/ExoPlayer/git/commits/da034da5d2ced6b2b0b42182f41eee15c4843de0,da034da5d2ced6b2b0b42182f41eee15c4843de0,"Release notes for 2.0.0 (and 1.5.11)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132694632"
AquilesCanta,2016-09-09 16:50:37,https://api.github.com/repos/google/ExoPlayer/git/commits/7e51c3af7402edf85b22a6d2a2aee4bf356c0b43,7e51c3af7402edf85b22a6d2a2aee4bf356c0b43,"Add continuity counter support in Transport Streams

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132684574"
AquilesCanta,2016-09-08 16:06:43,https://api.github.com/repos/google/ExoPlayer/git/commits/3bad28ac91ba7394254c89f226c14144ee559d40,3bad28ac91ba7394254c89f226c14144ee559d40,"Fix TsExtractor tests

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132561841"
AquilesCanta,2016-09-08 15:44:12,https://api.github.com/repos/google/ExoPlayer/git/commits/c78010c21210ea8b5f59fdf2ce9dc491c073b628,c78010c21210ea8b5f59fdf2ce9dc491c073b628,"Add support for language descriptors in MPEG-2 TS

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132559667"
erdemguven,2016-09-08 15:12:22,https://api.github.com/repos/google/ExoPlayer/git/commits/26466679dff3a9194ccc7b56618430e8de064376,26466679dff3a9194ccc7b56618430e8de064376,"Added CacheDataSourceFactory, FileDataSourceFactory and CacheDataSinkFactory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132556806"
AquilesCanta,2016-09-08 13:04:15,https://api.github.com/repos/google/ExoPlayer/git/commits/cab02289f5798ef330d8d8e15329c66791c66529,cab02289f5798ef330d8d8e15329c66791c66529,"Generalize the PtsTimestampAdjuster

This allows the adjustment of timestamps in microseconds along with
TS timestamps. This is useful for containers that include the
timestamps in microseconds format, like fMP4 and WebVTT.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132547521"
ojw28,2016-09-07 19:44:28,https://api.github.com/repos/google/ExoPlayer/git/commits/04c28c6d7dcd49091578dcc1953c3e8eb14a4d84,04c28c6d7dcd49091578dcc1953c3e8eb14a4d84,"Minimal change to fix seeking before prepare + finalize API

- This change fixes seeking before the prepare (or more
  accurately, before the timeline is set). The fix a minimal
  one to fix the behavior. It's inefficient compared to
  posting the pending seek onto the playback thread, which
  will be the long term solution.
- As of this change, I think we can call V2 ""done"". There are
  some loose ends to tie up, but the API is effectively
  finalized and the implementation is in a state where you
  can take it, use it and expect it to work.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132468107"
ojw28,2016-09-07 14:27:39,https://api.github.com/repos/google/ExoPlayer/git/commits/8f7084563182e2a1d5d5d9091e6b95ea8ae03ae5,8f7084563182e2a1d5d5d9091e6b95ea8ae03ae5,"Tweak VideoListener doc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132433848"
AquilesCanta,2016-09-07 10:22:41,https://api.github.com/repos/google/ExoPlayer/git/commits/651f5fafa7acb59ca392aca21b2a68bc96f4da2c,651f5fafa7acb59ca392aca21b2a68bc96f4da2c,"HLS: Instantiate an AC3 extractor for .ec3 files

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132417755"
AquilesCanta,2016-09-06 12:13:44,https://api.github.com/repos/google/ExoPlayer/git/commits/45d5d308b4a21fee32e0ae631ad9cfb495425d8c,45d5d308b4a21fee32e0ae631ad9cfb495425d8c,"Add transport error indicator support to TsExtractor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132307448"
AquilesCanta,2016-09-06 11:39:45,https://api.github.com/repos/google/ExoPlayer/git/commits/12b7bbf80302785cee00cf252ecb6b84d75dccb6,12b7bbf80302785cee00cf252ecb6b84d75dccb6,"Improve HLS master playlist parsing

Adds a few unused fields to HlsUrl and moves things towards the Hls
reimplementation we are looking for. Also fixes a bug related to
asuming every getNextChunk().loadable == null being related to
reaching the live edge.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132305206"
ojw28,2016-09-06 10:31:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5f39b93d304e77b5d44f8f9c46a688bd0c8dc28c,5f39b93d304e77b5d44f8f9c46a688bd0c8dc28c,"Properly release sample streams for DASH

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132301223"
ojw28,2016-09-05 15:28:35,https://api.github.com/repos/google/ExoPlayer/git/commits/e296d10c3fc21a43b4ca0ea96d2cec43bd0b29b4,e296d10c3fc21a43b4ca0ea96d2cec43bd0b29b4,"Start moving ExoPlayerImpl to use windows not periods

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132248872"
AquilesCanta,2016-09-02 17:35:13,https://api.github.com/repos/google/ExoPlayer/git/commits/32867217a309545715c10bace285dd03f52643ac,32867217a309545715c10bace285dd03f52643ac,"Improve profile/level check support for AVC

Issue:#1772

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132078273"
AquilesCanta,2016-09-08 13:49:57,https://api.github.com/repos/google/ExoPlayer/git/commits/da0bc3325109405230b0b7fa53326cad8ab19412,da0bc3325109405230b0b7fa53326cad8ab19412,Merge branch 'dev-v2' of https://github.com/google/ExoPlayer into pr_1803
AquilesCanta,2016-09-08 13:45:01,https://api.github.com/repos/google/ExoPlayer/git/commits/127ebbe0f9c87e8c3990e6f111f833283e5cd0fe,127ebbe0f9c87e8c3990e6f111f833283e5cd0fe,"Merge pull request #1803 from tresvecesseis/dev-v2-track_names

TsExtractor support for language code in the audio tracks."
AquilesCanta,2016-09-08 11:59:21,https://api.github.com/repos/google/ExoPlayer/git/commits/520e6caa60b06a06a114ab89a9d095dcb6773b9f,520e6caa60b06a06a114ab89a9d095dcb6773b9f,Fixed style things from pull request
tresvecesseis,2016-09-07 05:43:23,https://api.github.com/repos/google/ExoPlayer/git/commits/e2722dee39b20747b537de542135c3fb22e65e97,e2722dee39b20747b537de542135c3fb22e65e97,TsExtractor support for language code in the audio tracks.
cbfiddle,2016-09-05 22:39:40,https://api.github.com/repos/google/ExoPlayer/git/commits/776da107251e2e51f12d23986b7e83a2c39a2bdd,776da107251e2e51f12d23986b7e83a2c39a2bdd,Fix merge issue
cbfiddle,2016-09-03 03:11:26,https://api.github.com/repos/google/ExoPlayer/git/commits/18ab96349eda2030ec295e92d5ffbe8ab3104e61,18ab96349eda2030ec295e92d5ffbe8ab3104e61,Support ID3/Apple metadata parsing in MP3 and MP4 files
ojw28,2016-09-02 15:03:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c54169c192f02bdcbcb9095ee0618aea3d789171,c54169c192f02bdcbcb9095ee0618aea3d789171,"Move back to gradle version + plugin that doesn't hang.

New version hangs when running:
./gradlew :library:assembleAndroidTest --debug

Android Studio ""strongly recommends"" we upgrade to the
hanging version, but I guess we'll just have to ignore
that until the latest version works again!

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132063280"
ojw28,2016-09-02 12:55:46,https://api.github.com/repos/google/ExoPlayer/git/commits/f8c05ebd93728840f74d16f91110a3f03044c778,f8c05ebd93728840f74d16f91110a3f03044c778,"Better selection of default start position for live

If the live window has a small duration, we currently
end up setting the default start position to be right
at the start of the window. This increases the chance
of a BehindLiveWindowException.

With this change we impose a minimum 5s gap between
the start of the window and the default start position.
If the window is *really* small (<10s) then doing this
would push the default start position too close to the
end of the window. We don't have much time to play with
in either direction in this case, so we put the default
start position in the middle of the window and hope for
the best.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132054802"
erdemguven,2016-09-02 12:36:49,https://api.github.com/repos/google/ExoPlayer/git/commits/06a644eccd95fb2c67ac87ef96b9eff83bfe3644,06a644eccd95fb2c67ac87ef96b9eff83bfe3644,"DataSourceException: Used to specify a DataSource error.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132053698"
ojw28,2016-09-02 11:19:04,https://api.github.com/repos/google/ExoPlayer/git/commits/884bcb649e61c2bfec302aecae681aa530146c31,884bcb649e61c2bfec302aecae681aa530146c31,"Support looping with LoopingMediaSource

Now you can do cool things (if you really want to!) like
play a video twice, then play a second video, then loop
the whole thing, all seamlessly.

new LoopingMediaSource(
  new LoopingMediaSource(firstVideoSource, 2),
  secondVideoSource));

You can also just loop, which is probably more useful :).

Issue: #490

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132049599"
AquilesCanta,2016-09-02 11:17:57,https://api.github.com/repos/google/ExoPlayer/git/commits/fa500791c54a75552bbfee7878cf518954d0de04,fa500791c54a75552bbfee7878cf518954d0de04,"Rename Variant to HlsUrl and move into HlsMasterPlaylist

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132049545"
ojw28,2016-09-02 10:39:00,https://api.github.com/repos/google/ExoPlayer/git/commits/bd76ec8b13cfdd1007510eaf46d2c11bd3399a19,bd76ec8b13cfdd1007510eaf46d2c11bd3399a19,"Support duplicate entries in ConcatenatingMediaSource

People will inevitably try and do it, and it's pretty
easy to handle properly, so why not...

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=132047019"
ojw28,2016-09-01 16:43:54,https://api.github.com/repos/google/ExoPlayer/git/commits/d48bf94145e403838a8e3dada8a909602635b362,d48bf94145e403838a8e3dada8a909602635b362,"MergingMediaSource fixes

- Don't send a timeline to the listener until all children
  have reported their timelines.
- Propagate a proper merge error if merging fails.
- The PlayerActivity hack is necessary due to the way Andorid's
  MediaController widget attaches to the window :(. It'll go
  away once we get our own player controls.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131958169"
AquilesCanta,2016-09-01 14:42:13,https://api.github.com/repos/google/ExoPlayer/git/commits/a964da79224c0a7f96145d1819e1989bc1f6a75a,a964da79224c0a7f96145d1819e1989bc1f6a75a,"Add support for PATs spread across multiple packets

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131946543"
AquilesCanta,2016-09-01 11:05:58,https://api.github.com/repos/google/ExoPlayer/git/commits/a671ebd019b7895e0a4e05b1792f657b3468fa33,a671ebd019b7895e0a4e05b1792f657b3468fa33,"Add live media playlist refresh requests when live edge is reached

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131931868"
erdemguven,2016-09-01 11:03:47,https://api.github.com/repos/google/ExoPlayer/git/commits/860c6588c0eefad27c024a98a0118154b1f21c72,860c6588c0eefad27c024a98a0118154b1f21c72,"created DefaultHttpDataSourceFactory

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131931668"
ojw28,2016-09-01 11:01:57,https://api.github.com/repos/google/ExoPlayer/git/commits/ceebb4c561032b11fa356715b9637dde935d4e38,ceebb4c561032b11fa356715b9637dde935d4e38,"Fix incorrect index in DefaultAllocator.trim

This could cause us to ""lose"" allocations backed by an
initial block, meaning they became unavailable for use
despite still being allocated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131931465"
ojw28,2016-09-01 10:59:42,https://api.github.com/repos/google/ExoPlayer/git/commits/894376fbe63544c18e13bb420b19993933b4509f,894376fbe63544c18e13bb420b19993933b4509f,"Fix third_party Android Studio / Gradle config

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131931329"
ojw28,2016-09-01 10:27:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a779eabdc5d4c8aa362479bf7085c1dd579e8a48,a779eabdc5d4c8aa362479bf7085c1dd579e8a48,"Update SDK / Tools.

- Centralise compileSdkVersion, targetSdkVersion and
  buildToolsVersion in a single place for gradle.
- Bump compileSdkVersion and targetSdkVersion to 24.
- Bump com.android.tools.build version to re-enable
  instant start.
- Bump targetSdkVersion in manifests (needed for
  internal builds).
- Use standard expandable_list_item from Android in
  the demo app, since ours doesn't look right when
  targeting API level 24. We were also setting the
  theme on the wrong element in the manifest, so I'm
  removing that line.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131929216"
ojw28,2016-08-31 18:35:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c5114575feeb1588728ed88ff76f10b62c6c24bc,c5114575feeb1588728ed88ff76f10b62c6c24bc,"Fix demo app when built using ASWB

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131853683"
ojw28,2016-08-31 17:17:41,https://api.github.com/repos/google/ExoPlayer/git/commits/962b5940c2f6c8d30abd2bfc0cb629b9e229c04a,962b5940c2f6c8d30abd2bfc0cb629b9e229c04a,"Update ExoPlayer documentation + tweak method naming

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131843222"
ojw28,2016-08-31 14:07:39,https://api.github.com/repos/google/ExoPlayer/git/commits/9adce6b0071e5c3cb73151f39859a956af201893,9adce6b0071e5c3cb73151f39859a956af201893,"Make sure Cronet extension/tests are pushed to GitHub

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131825185"
RikHeijdens,2016-09-01 13:01:17,https://api.github.com/repos/google/ExoPlayer/git/commits/26fe1dc2384902ba3f3b5c36afca03162fc0dc0d,26fe1dc2384902ba3f3b5c36afca03162fc0dc0d,Removed unnecessary member variable
AquilesCanta,2016-08-31 10:48:39,https://api.github.com/repos/google/ExoPlayer/git/commits/50527c0a7df296a78d0f6da096622d98cca03926,50527c0a7df296a78d0f6da096622d98cca03926,"Add profile/level check support for AVC

Issue:#1772

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131812670"
ojw28,2016-08-31 10:08:14,https://api.github.com/repos/google/ExoPlayer/git/commits/d65feb682b7f98033027db76b1c200d269379e36,d65feb682b7f98033027db76b1c200d269379e36,"Make public util method to get physical display size

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131810070"
AquilesCanta,2016-08-30 18:10:28,https://api.github.com/repos/google/ExoPlayer/git/commits/f0c0b3efbf85728cb9ecde19977137e94177fb59,f0c0b3efbf85728cb9ecde19977137e94177fb59,"Decouple HlsSampleStream from HlsSampleStreamWrapper

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131731376"
ojw28,2016-08-30 15:59:11,https://api.github.com/repos/google/ExoPlayer/git/commits/797cd46e89cdb9c5788458c34e50581839ba02d7,797cd46e89cdb9c5788458c34e50581839ba02d7,"Detailed Javadoc for Timeline, Period and Window

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131715194"
erdemguven,2016-08-30 15:45:59,https://api.github.com/repos/google/ExoPlayer/git/commits/b88a5e1b12e3b3a2c53a79ab99a6a7108f3b33f0,b88a5e1b12e3b3a2c53a79ab99a6a7108f3b33f0,"Fix generateReleaseJavadoc ""unmappable character for encoding ASCII"" error.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131714051"
erdemguven,2016-08-30 11:58:44,https://api.github.com/repos/google/ExoPlayer/git/commits/bd7be1b5e7cc41a59ebbc348d394820fc857db92,bd7be1b5e7cc41a59ebbc348d394820fc857db92,"Cache support unbounded requests.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131696858"
ojw28,2016-08-30 11:06:18,https://api.github.com/repos/google/ExoPlayer/git/commits/dfad7451ca8039be6773f7e401e26e5076e218b1,dfad7451ca8039be6773f7e401e26e5076e218b1,"Rename media samples asset

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131693969"
ojw28,2016-02-07 03:58:34,https://api.github.com/repos/google/ExoPlayer/git/commits/98919fe7099f136e45a81939488a858235fa95e3,98919fe7099f136e45a81939488a858235fa95e3,"Add ExoMediaDrm/ExoMediaCrypto to V2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131693379"
ojw28,2016-08-30 10:42:27,https://api.github.com/repos/google/ExoPlayer/git/commits/1fbe62c662ca271eb5715dd6049644adbe8ddd19,1fbe62c662ca271eb5715dd6049644adbe8ddd19,"Update Opus decoder, move init ouput buffer to native code

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131692317"
ojw28,2016-08-26 15:32:51,https://api.github.com/repos/google/ExoPlayer/git/commits/f8311a48ede0f9b5e0bdb416b19a839454205c5a,f8311a48ede0f9b5e0bdb416b19a839454205c5a,"Add some convenience constructors for Cronet in V2

- The need to pass a Clock is pretty much only for testing, so
  make the constructor that takes one package private + use
  the system clock for public constructors.
- Add default timeout values.
- Also make sure we set Content-Type in all license requests,
  since when using Cronet the stack requires it to be set.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131404298"
AquilesCanta,2016-08-26 14:19:24,https://api.github.com/repos/google/ExoPlayer/git/commits/4f670addd20a4b5c336b8250e970a42e7d7f060c,4f670addd20a4b5c336b8250e970a42e7d7f060c,"Add support for AC-3 streams in HLS

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131398594"
AquilesCanta,2016-08-26 14:12:42,https://api.github.com/repos/google/ExoPlayer/git/commits/e48462d56431ebdec625c0c42e182116dd7716ac,e48462d56431ebdec625c0c42e182116dd7716ac,"Add codecs argument to createContainerFormat

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131398162"
AquilesCanta,2016-08-26 13:20:18,https://api.github.com/repos/google/ExoPlayer/git/commits/d72e26ff35326673ba375d31c8d59252d1241dab,d72e26ff35326673ba375d31c8d59252d1241dab,"Add CRC check for PMT

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131394778"
AquilesCanta,2016-08-26 13:00:31,https://api.github.com/repos/google/ExoPlayer/git/commits/6528aef2bb48f165f5a519e590104f60055fefe1,6528aef2bb48f165f5a519e590104f60055fefe1,"Add automatic E-AC-3 detection to the Ac3Reader

This is done through the bitstream id field and allows removing
the isEac3 parameter from the constructor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131393477"
kul3r4,2016-08-26 12:58:54,https://api.github.com/repos/google/ExoPlayer/git/commits/4df63314d487c34908f15f3d48df71376f51e066,4df63314d487c34908f15f3d48df71376f51e066,"Create Cronet extension in v2

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131393395"
ojw28,2016-08-26 11:47:15,https://api.github.com/repos/google/ExoPlayer/git/commits/b53fa245ce1791247a340e008b419773a1183165,b53fa245ce1791247a340e008b419773a1183165,"Fix ID3 EOS detection for two-byte encodings

Issue: #1774

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131389528"
AquilesCanta,2016-08-25 15:57:50,https://api.github.com/repos/google/ExoPlayer/git/commits/09c58004dc9c86771e7891fa6a16568531e1053c,09c58004dc9c86771e7891fa6a16568531e1053c,"Add an AC3 bitstream extractor

Defined in ATSC Standard: Digital Audio Compression (AC-3, E-AC-3).
Link: http://atsc.org/wp-content/uploads/2015/03/A52-201212-17.pdf.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131294260"
AquilesCanta,2016-08-25 15:55:30,https://api.github.com/repos/google/ExoPlayer/git/commits/af2b8fb7a61e4c49ecea652ed5324e5016b9cd4b,af2b8fb7a61e4c49ecea652ed5324e5016b9cd4b,"Add CRC32 check for PAT section

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131294029"
erdemguven,2016-08-25 15:28:39,https://api.github.com/repos/google/ExoPlayer/git/commits/b6b6a3cbc346d39a4920681f3d220d78f8e3a2f1,b6b6a3cbc346d39a4920681f3d220d78f8e3a2f1,"Merge build*DataSourceFactory methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131291816"
erdemguven,2016-08-25 14:53:50,https://api.github.com/repos/google/ExoPlayer/git/commits/8b3f489bc989fe71aab027fd295b3de631cdc420,8b3f489bc989fe71aab027fd295b3de631cdc420,"Tweak Demo app code to facilitate overriding Application methods and change the used DataSourceFactory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131288634"
ojw28,2016-08-24 17:57:44,https://api.github.com/repos/google/ExoPlayer/git/commits/0b6a93b468431bc5064d727471fdf9c57e8ff8cc,0b6a93b468431bc5064d727471fdf9c57e8ff8cc,"Workaround missing data offsets in FMP4

If they're omitted, it's reasonable to assume it's because
they were uninteresting (i.e. sample data always tightly
packed at the start of the mdat). This is an issue for some
SmoothStreaming streams.

We actually already play such streams successfully, but
that's only due to another bug to be fixed in a following CL.
The same is true for V1, but given the low impact nature,
the fix will be V2 only.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131191975"
ojw28,2016-08-24 17:51:48,https://api.github.com/repos/google/ExoPlayer/git/commits/abaa4f1aad4db31ada9bf8d98dcf41073af3344a,abaa4f1aad4db31ada9bf8d98dcf41073af3344a,"Don't update currentTrackBundle until end of block

If currentTrackBundle is updated at the start of the
block and then something goes wrong in the middle (e.g.
one of the skipFully calls) then the extractor wont
resume from the correct place.

This would be caught by our extractor tests if we had
a test sample that requires skipping to the sample data.
I'll try and construct one of those.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131191174"
ojw28,2016-08-24 17:50:18,https://api.github.com/repos/google/ExoPlayer/git/commits/42efb5413a095080f69a8b82e307f0d931a92f40,42efb5413a095080f69a8b82e307f0d931a92f40,"SmoothStreaming fixes

- The -1 needs to be a 0. My bad.
- Create AAC CSD if not defined in manifest, like in V1.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131190995"
AquilesCanta,2016-08-24 16:49:28,https://api.github.com/repos/google/ExoPlayer/git/commits/fd3d7be9c08461b97d984eb59dbae12f035be2ac,fd3d7be9c08461b97d984eb59dbae12f035be2ac,"Fix data_offset not present bug in FragmentedMp4Extractor

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131183033"
ojw28,2016-08-24 15:05:38,https://api.github.com/repos/google/ExoPlayer/git/commits/ef7dd697b15e8b6b76992ba1516f831f3af1ad30,ef7dd697b15e8b6b76992ba1516f831f3af1ad30,"Fix ContentDataSource handling of AssetFileDescriptor

Also tweak how the null checks happen in a few DataSource
implementations (should be no-op changes, but allow you
to look at close() and be happy it does the right thing
without having to loop at the open() implementations).

Issue: #1759

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131172427"
ojw28,2016-08-24 14:54:34,https://api.github.com/repos/google/ExoPlayer/git/commits/5f1a2c71f0de78f2cd1ce61e3e105a0901bcca93,5f1a2c71f0de78f2cd1ce61e3e105a0901bcca93,"Finalize V2 ExoPlayer API

There's still some internal to clean up to do, and in particular
it remains a TODO to be able to handle seek calls before the
timeline is set (for this CL, such calls are dropped). This change
does however finalize the API.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131171318"
ojw28,2016-08-24 13:26:27,https://api.github.com/repos/google/ExoPlayer/git/commits/298464ebe7e10867ec85b57d166c5438d52607ee,298464ebe7e10867ec85b57d166c5438d52607ee,"Fix broken documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131164881"
andrewlewis,2016-08-23 14:21:23,https://api.github.com/repos/google/ExoPlayer/git/commits/85915f2ac1b301cb055814348b0627c1ad82e4a1,85915f2ac1b301cb055814348b0627c1ad82e4a1,"Fix live window calculation and transition from VOD.

Fix the calculation of the seek window for multi-period DASH.

Snap the default initial position back to the start of its segment, to ensure
that the first sample provided when transitioning to a DASH live source is a
key-frame.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131052912"
ojw28,2016-08-23 07:55:21,https://api.github.com/repos/google/ExoPlayer/git/commits/458c7bfc05564e7a83bc8d66aab6ac6c0d5a214f,458c7bfc05564e7a83bc8d66aab6ac6c0d5a214f,"Simplify ExoPlayerImplInternal

- Remove playingPeriodEndPositionUs. It doesn't look like it's
  required.
- Rename time variables to make it clearer what they are.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=131027164"
ojw28,2016-08-22 14:51:23,https://api.github.com/repos/google/ExoPlayer/git/commits/94c908e89c40d1522d478f06a0993cea2521b96f,94c908e89c40d1522d478f06a0993cea2521b96f,"Rename Window->MediaWindow, Timline->MediaTimeline

Window is potentially confusing with Android's Window class.
Once Window is renamed, it makes sense to rename Timeline too.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130938392"
ojw28,2016-08-22 13:55:36,https://api.github.com/repos/google/ExoPlayer/git/commits/fb55254f900f7f195cc0ab327f9d159184930cb6,fb55254f900f7f195cc0ab327f9d159184930cb6,"Fix a bunch more Javadoc

Also inline a few methods/classes where they can be made
private and therefore be removed from the public API.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130935090"
erdemguven,2016-08-22 13:32:00,https://api.github.com/repos/google/ExoPlayer/git/commits/e003c5b6dcd4c8529713b2ce1c29a66e3d3a77aa,e003c5b6dcd4c8529713b2ce1c29a66e3d3a77aa,"Javadoc for FakeExtractorOutput.assertOutput()

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130933435"
AquilesCanta,2016-08-22 12:07:42,https://api.github.com/repos/google/ExoPlayer/git/commits/abdb8ddb6ebf1b785f3b17ae462c9542c08bb1d4,abdb8ddb6ebf1b785f3b17ae462c9542c08bb1d4,"Remove 1 track per type limitation in TsExtractor

Mainly, this allows the extractor to expose multiple audio tracks.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130928152"
ojw28,2016-08-22 10:22:04,https://api.github.com/repos/google/ExoPlayer/git/commits/d5607cfc47027944679356c398c49d6fbc3e8964,d5607cfc47027944679356c398c49d6fbc3e8964,"Make Javadoc compile with Java8

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130922558"
ojw28,2016-08-19 19:38:27,https://api.github.com/repos/google/ExoPlayer/git/commits/9f1fc274c9affc4630ea0a0ca0148f8a44216bb8,9f1fc274c9affc4630ea0a0ca0148f8a44216bb8,"Add SimpleExoPlayer.getVolume API

Issue: #1754

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130780466"
ojw28,2016-08-19 18:57:46,https://api.github.com/repos/google/ExoPlayer/git/commits/2c84f016fe12f220dc3da248f9c462286255f6d3,2c84f016fe12f220dc3da248f9c462286255f6d3,"Parse and expose proj and st3d/stereo_mode

As described in:
https://github.com/google/spatial-media/blob/master/docs/spherical-video-v2-rfc.md.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130776689"
ojw28,2016-08-19 18:46:55,https://api.github.com/repos/google/ExoPlayer/git/commits/1579b68cf63c0c3c2be310ce3c9e8caf933c7a99,1579b68cf63c0c3c2be310ce3c9e8caf933c7a99,"Sanitize constants

- Use a single constant for unset/unknown times across
  all time bases. Note also that this moves away from
  use of -1 for unset/unknown times in ms, which was a
  bad choice (it might conflict with real times, such
  as a time representing being just behind the start
  of a live window).
- Add a few other unset constants, and use them.
- Fix some hardcoding of -1 where existing constants
  should have been used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130775594"
andrewlewis,2016-08-19 15:36:11,https://api.github.com/repos/google/ExoPlayer/git/commits/725337dab3e0ece0b5d128fd42cad6b0062f0e05,725337dab3e0ece0b5d128fd42cad6b0062f0e05,"Fix VOD to live transitions.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130755346"
ojw28,2016-08-18 18:25:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f2ee7ef07bc4061b1b93d6677714351db3ae30e0,f2ee7ef07bc4061b1b93d6677714351db3ae30e0,"Fix formatting

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130662159"
ojw28,2016-08-18 18:07:57,https://api.github.com/repos/google/ExoPlayer/git/commits/83e466d1290923e2cdec75cdccda0be72b658b46,83e466d1290923e2cdec75cdccda0be72b658b46,"Toward API finalization

- Remove getNewPlayingPeriodIndex from MediaSource
- Remove all absolute references to period indices from
  Window. Their existence prevents ConcatenatingMediaSource
  from being able to efficiently handle children with
  large numbers of entries (e.g. a cursor backed source),
  since it would copy all windows into its merged timeline.
- Fix ExoPlayerImplInternal to attempt a restart in the
  case that the loading (but not yet prepared) period is
  removed, in absence of a playing period.
- Implement logic for finding the ""next"" period in the old
  timeline when attempting a retry.

Removing some of the nasty US<->MS conversions left as a
virtual TODO.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130659973"
andrewlewis,2016-08-18 11:39:59,https://api.github.com/repos/google/ExoPlayer/git/commits/eff82e920ecf023afce7128b251d40184d5269e8,eff82e920ecf023afce7128b251d40184d5269e8,"Fix DASH multi-period transitions and manifest updates.

Period transitions can either be to new windows (in which case the default
position for the new window should be loaded) or to the next period of the
current window (in which case the the new period should be played from zero).
Fix the logic for calculating the new period index to load to implement this.

In processManifest, periodsById may contain periods that have been removed from
the manifest, which are still being used by the player (it releases periods on
receiving the source info refresh after processManifest returns). Ignore
periods that have been removed from the manifest when calling updateManifest.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130626441"
ojw28,2016-08-18 08:49:50,https://api.github.com/repos/google/ExoPlayer/git/commits/c009028dad1dcd8581ba6f4d077b120934f42051,c009028dad1dcd8581ba6f4d077b120934f42051,"Prepare for removal of period based ExoPlayer methods

- This change marks the methods that will be removed, and
  renames the Window methods to remove ""Window"" from their
  names.
- The Window methods need to be made to work (rather than
  throw exceptions) when the timeline isn't set. Once that
  gets done in a subsequent CL, the deprecated methods will
  be removed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130612979"
andrewlewis,2016-08-18 08:49:09,https://api.github.com/repos/google/ExoPlayer/git/commits/1695e2ac48a1e523637267301d959bdd30a1b08e,1695e2ac48a1e523637267301d959bdd30a1b08e,"Fix DASH period index calculation.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130612920"
ojw28,2016-08-18 08:11:10,https://api.github.com/repos/google/ExoPlayer/git/commits/b2a28a140c1eb8349e50649b6687fe18b835eeb9,b2a28a140c1eb8349e50649b6687fe18b835eeb9,"Move default start position into Window

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130610236"
ojw28,2016-08-17 19:06:29,https://api.github.com/repos/google/ExoPlayer/git/commits/3e0bae616f2f4881cb3611e147592b14702d8251,3e0bae616f2f4881cb3611e147592b14702d8251,"Minor ExoPlayerImplInternal cleanup

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130547431"
ojw28,2016-08-17 16:27:51,https://api.github.com/repos/google/ExoPlayer/git/commits/0d2dbb165dbefe9bab91d1b10111c34d354ec31f,0d2dbb165dbefe9bab91d1b10111c34d354ec31f,"Demo app bug fixes

- Restore position to start of period if period is not
  seekable, rather than not at all.
- Get the correct window when saving position.
- Disable position restore in onNewIntent.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130527704"
cdrolle,2016-08-17 15:38:40,https://api.github.com/repos/google/ExoPlayer/git/commits/cdb0ef13c81cbaa4bc6e5e89842582da475f821a,cdb0ef13c81cbaa4bc6e5e89842582da475f821a,"Expose timeout values in DefaultDataSourceFactory.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130522990"
ojw28,2016-07-23 06:06:16,https://api.github.com/repos/google/ExoPlayer/git/commits/b35648eafb28767e2e2bbeec2533131de483b675,b35648eafb28767e2e2bbeec2533131de483b675,"Add window based methods to ExoPlayer

- This change also enables seeking in live windows in the
  ExoPlayer demo app.
- The added playlist doesn't transition properly by itself,
  but for manual transitions it works correctly, and
  demonstrates seeking into a default position.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130515880"
ojw28,2016-08-17 13:16:21,https://api.github.com/repos/google/ExoPlayer/git/commits/76bb10428b993d12490e9543a038e618d85f4d9e,76bb10428b993d12490e9543a038e618d85f4d9e,"Fix broken link

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130512224"
ojw28,2016-08-17 12:24:36,https://api.github.com/repos/google/ExoPlayer/git/commits/fa84aa2123b30e06c26cc84df0885167303fbb76,fa84aa2123b30e06c26cc84df0885167303fbb76,"Incremental step toward correct event propagation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130509123"
ojw28,2016-08-17 11:58:55,https://api.github.com/repos/google/ExoPlayer/git/commits/317a8ef19b153d038ecff5796442dbb2f0b52e66,317a8ef19b153d038ecff5796442dbb2f0b52e66,"Simplify DashMediaSource and simulate manifest refreshes

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130507478"
andrewlewis,2016-08-17 10:33:49,https://api.github.com/repos/google/ExoPlayer/git/commits/5296d5b19870d089d3b931c04afd5e3da318aaf3,5296d5b19870d089d3b931c04afd5e3da318aaf3,"Move isFinal flag to the Window.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130503190"
erdemguven,2016-08-16 18:06:48,https://api.github.com/repos/google/ExoPlayer/git/commits/671a15badff712b6f08e439f6b36ee5018f3d98d,671a15badff712b6f08e439f6b36ee5018f3d98d,"ExtractorMediaPeriod: Use URI sha1 hash as the DataSpec key.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130422264"
ojw28,2016-07-14 08:46:29,https://api.github.com/repos/google/ExoPlayer/git/commits/7bed85950e92308dbe76f3c1cc71427330213f89,7bed85950e92308dbe76f3c1cc71427330213f89,"Fix/improve SmoothStreaming live window

- Add missing callback call.
- Allow injection of live edge offset.
- Refine calculation of live window size to correctly
  handle just-started streams where the DVR window
  hasn't yet grown to full size.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130412465"
ojw28,2016-08-16 16:22:18,https://api.github.com/repos/google/ExoPlayer/git/commits/e0773f705f7959798b7476bcdd68e03eebb51ab2,e0773f705f7959798b7476bcdd68e03eebb51ab2,"Allow applications to specify the live edge offset.

Also allow use of suggestedPresentationDelay taken from the
manifest, and enable this by default.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130409924"
andrewlewis,2016-08-16 11:18:41,https://api.github.com/repos/google/ExoPlayer/git/commits/76f7fffb8d276b3d0545beddfd68f2b0c6dd7308,76f7fffb8d276b3d0545beddfd68f2b0c6dd7308,"Clean up period identifiers.

SinglePeriodTimelines can all use the same identifier, as their identifier is
wrapped in a pair with the (fixed) source index when they are concatenated with
other sources' timelines.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130386297"
ojw28,2016-08-16 08:45:42,https://api.github.com/repos/google/ExoPlayer/git/commits/bb8cbbfbe8358c7372d8f2e5f639a8cb4d74dd65,bb8cbbfbe8358c7372d8f2e5f639a8cb4d74dd65,"Allow mapping of period->window

This is a 1:1 mapping. This change formalises the fact,
and makes it possible to easily query the mapping.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130375111"
ojw28,2016-08-16 08:23:22,https://api.github.com/repos/google/ExoPlayer/git/commits/e35f9addaf148b46d1a25fdae7e8de4c9a6e14f1,e35f9addaf148b46d1a25fdae7e8de4c9a6e14f1,"Remove playWhenReadyCommitted.

This was always a bit of a hack; for Play Movies. It may well
no longer be necessary, and if not I'd like to think of a nicer
or more general way of doing it. We can always bring it back
if needed.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130373433"
ojw28,2016-08-16 07:34:08,https://api.github.com/repos/google/ExoPlayer/git/commits/18a86553434eea56fb1377c50a03cea1d8c43a06,18a86553434eea56fb1377c50a03cea1d8c43a06,"Javadoc cleanup: ExoPlayer#x -> #x

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130369177"
erdemguven,2016-08-15 17:17:01,https://api.github.com/repos/google/ExoPlayer/git/commits/096f85202e41a145599d5cc34c3ec340f0492763,096f85202e41a145599d5cc34c3ec340f0492763,"Use manifest URL sha1 hash as the content id.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130293908"
andrewlewis,2016-08-15 17:07:22,https://api.github.com/repos/google/ExoPlayer/git/commits/63ab601d7545c4073be88c23aee5ea78e5314543,63ab601d7545c4073be88c23aee5ea78e5314543,"Use consistent identifiers for extractor periods.

Also, fix clearing the timeline for source info changes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130292700"
andrewlewis,2016-08-15 16:36:42,https://api.github.com/repos/google/ExoPlayer/git/commits/80227840f61e68ce0a0da9b74c1c69224905b802,80227840f61e68ce0a0da9b74c1c69224905b802,"Post source info refreshes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130289294"
ojw28,2016-08-15 14:20:50,https://api.github.com/repos/google/ExoPlayer/git/commits/1a909fd1632c963ad855fbc198ddc659c88581a2,1a909fd1632c963ad855fbc198ddc659c88581a2,"Change SeekWindow -> Window, and add window duration.

- This avoids the need to have to use the timeline to
  calculate a window duration, which can be awkward.
- Window now represents a window of availability with
  an isSeekable flag, rather than a window of
  seekability.
- Promoted Timeline and Window to top package; they're
  pretty important :).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130278509"
andrewlewis,2016-08-15 10:32:19,https://api.github.com/repos/google/ExoPlayer/git/commits/b120bea029a2d1fc8fbcf6058726f5d7e41316be,b120bea029a2d1fc8fbcf6058726f5d7e41316be,"Don't reuse MediaPeriods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130266483"
ojw28,2016-08-15 10:18:59,https://api.github.com/repos/google/ExoPlayer/git/commits/b5e41a903dd3f1d1ef83a69efce48fb3f8378746,b5e41a903dd3f1d1ef83a69efce48fb3f8378746,"Remove buffered position edge case.

It's no longer safe to convert END_OF_SOURCE -> duration on
the main therad, since the Timeline from which the duration
is obtained is posted to the main thread, where-as the
buffered position is passed by updating a volatile. Hence
an update to the latter might become visible to the main
thread before the corresponding Timeline.

This change moves the conversion to the playback thread.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130265893"
andrewlewis,2016-08-12 17:22:51,https://api.github.com/repos/google/ExoPlayer/git/commits/6e24372414b6e38dec54d23644b913b3a654c694,6e24372414b6e38dec54d23644b913b3a654c694,"Use integers as identifiers for DASH periods.

This is in preparation for making it so that periods aren't reused.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130113382"
ojw28,2016-08-12 17:03:50,https://api.github.com/repos/google/ExoPlayer/git/commits/0ca81b1a4c595811586a29040ac0b55ac3acc25b,0ca81b1a4c595811586a29040ac0b55ac3acc25b,"Make sure TrackSelections refer to the correct TrackGroups

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130111048"
AquilesCanta,2016-08-12 13:38:16,https://api.github.com/repos/google/ExoPlayer/git/commits/fc5df6312d8abbf3d2aec91eef7acb2e724ede33,fc5df6312d8abbf3d2aec91eef7acb2e724ede33,"Add support for multiple truns in a single traf

This kind of mp4 files has been seen in Hls+fMp4 samples.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130094845"
ojw28,2016-08-12 13:27:17,https://api.github.com/repos/google/ExoPlayer/git/commits/d04fde1a53a891a0fef9025c7e0ca016af327235,d04fde1a53a891a0fef9025c7e0ca016af327235,"Distinguish dense vs sparse tracks for buffering purposes

- For audio/video, we should report the minimum largest
  queued timestamp. This ensures that buffering continues
  rather than stops in the case of bad sample interleaving.
- If there are ""sparse"" tracks then they should be ignored
  for this calculation, otherwise the buffered position can
  end up getting stuck at some small value (e.g. if there's
  a text track containing a single sample with a small
  timestamp).
- In the edge case that there are only ""sparse"" tracks, we
  probably want to take the maximum largest queued time
  instead.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130094266"
erdemguven,2016-08-12 10:15:41,https://api.github.com/repos/google/ExoPlayer/git/commits/c380ba2dc1ce891b6e82708cb994ef55aaf1e30d,c380ba2dc1ce891b6e82708cb994ef55aaf1e30d,"CacheSpan.isEOS (is end of stream) field shows whether the {@link CacheSpan} contains the end of the original stream.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130084365"
ojw28,2016-08-12 10:07:49,https://api.github.com/repos/google/ExoPlayer/git/commits/cc28aeadd8d81365480e924a5bb520e0ea6e982c,cc28aeadd8d81365480e924a5bb520e0ea6e982c,"Automated rollback

*** Reason for rollback ***

Referential equality was probably the right thing to do, since using .equals
breaks track selection in the case that a source exposes two or more tracks
whose formats are equal. We should fix the way overrides work instead.

*** Original change description ***

Fix multi-period transitions with track selection overrides

An override applies across periods provided they expose the
same track groups according to .equals, but the formats in
the override are then compared against the period's formats
according to ==. Use .equals consistently to fix.

***

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=130083840"
ojw28,2016-08-11 17:06:43,https://api.github.com/repos/google/ExoPlayer/git/commits/1811b01b0749c55abb3d6ce363001fff5ea94fdf,1811b01b0749c55abb3d6ce363001fff5ea94fdf,"Report duration only via Timeline

It's error prone (and more code) to report two ways

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129999117"
ojw28,2016-08-11 16:15:11,https://api.github.com/repos/google/ExoPlayer/git/commits/d8ffafea658609f46fc91853e25321742250e7a3,d8ffafea658609f46fc91853e25321742250e7a3,"Simplify Timeline classes a bit

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129993536"
erdemguven,2016-08-11 15:51:49,https://api.github.com/repos/google/ExoPlayer/git/commits/56bfa78f0a3ccf16bb9f9c2f0099e8bc34c6206b,56bfa78f0a3ccf16bb9f9c2f0099e8bc34c6206b,"Enable test coverage report generation for library project.

To generate the reports, under 'v2' folder run:
./gradlew createDebugCoverageReport

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129991223"
ojw28,2016-08-11 15:16:29,https://api.github.com/repos/google/ExoPlayer/git/commits/5deb948d1448b5380df41ce6f90a4351dc81f345,5deb948d1448b5380df41ce6f90a4351dc81f345,"Bugfix: If no renderers enabled, we don't need buffer

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129987973"
ojw28,2016-08-11 15:14:02,https://api.github.com/repos/google/ExoPlayer/git/commits/f9005c7a784ce7c27ac86fe285c2bd7f4096cbc5,f9005c7a784ce7c27ac86fe285c2bd7f4096cbc5,"Bugfix: Allow discontinuity on selectTracks

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129987709"
ojw28,2016-08-11 11:10:10,https://api.github.com/repos/google/ExoPlayer/git/commits/153c0aef2b01312c531835870cdd2a5f74a0b29d,153c0aef2b01312c531835870cdd2a5f74a0b29d,"Rework MediaPeriod track selection

This change allows MediaPeriod instances to replace
SampleStream instances when the selection isn't changing.
It also allows MediaPeriod instances to retain a
SampleStream but indicate that the renderer consuming
from it needs to be reset.

The change is used to fix the ref'd bug, and is used to
do the same thing in HLS without the need for the source
to report a discontinuity. Note that reporting discontinuity
could cause unnecessary failure when used as a child of
MergingMediaSource.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129971782"
ojw28,2016-08-11 09:49:13,https://api.github.com/repos/google/ExoPlayer/git/commits/9092c5665bf8d09fc74abd78d7377e8c08f69e92,9092c5665bf8d09fc74abd78d7377e8c08f69e92,"Bump V1 to 1.5.10 + Fix incorrect Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129966073"
vigneshvg,2016-08-10 21:06:47,https://api.github.com/repos/google/ExoPlayer/git/commits/a2dfc62e0825d9167e295476a1f595914dd4da81,a2dfc62e0825d9167e295476a1f595914dd4da81,"MatroskaExtractor: Implement subsample encryption

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129908648"
RikHeijdens,2016-08-31 09:55:41,https://api.github.com/repos/google/ExoPlayer/git/commits/4d18e623d602c54e2e4d60518627f926ce5402f0,4d18e623d602c54e2e4d60518627f926ce5402f0,"Split Cue Rendering up into 3 phases

Split Cue Rendering up into a layout, background drawing and foreground
drawing phase so that issues with overlapping 608 captions are being prevented."
RikHeijdens,2016-08-31 09:13:32,https://api.github.com/repos/google/ExoPlayer/git/commits/ad9f76eb62d9f2ee99466de965fc2c6a7eb4f746,ad9f76eb62d9f2ee99466de965fc2c6a7eb4f746,"Return a copy of the SpannableStringBuilder when building Cues

In order to force the SubtitlePainter to redraw cues"
RikHeijdens,2016-08-31 08:57:04,https://api.github.com/repos/google/ExoPlayer/git/commits/35fa5e2ef7d230f5704f562ec5a48d096ec9385f,35fa5e2ef7d230f5704f562ec5a48d096ec9385f,Fixed foreground color midrow codes being handled as background colors
RikHeijdens,2016-08-29 09:33:55,https://api.github.com/repos/google/ExoPlayer/git/commits/71d83f3e8478f05271845eb36a0a3f1bfec98808,71d83f3e8478f05271845eb36a0a3f1bfec98808,Caption lines as separate cues
RikHeijdens,2016-08-25 09:23:03,https://api.github.com/repos/google/ExoPlayer/git/commits/7cd94819c7a4a0222022cbfd49a1d77f30aa5812,7cd94819c7a4a0222022cbfd49a1d77f30aa5812,Took care of caption styling priorities
RikHeijdens,2016-08-25 08:07:05,https://api.github.com/repos/google/ExoPlayer/git/commits/176ce485696cfda8418e7426dc6a7e25999096f5,176ce485696cfda8418e7426dc6a7e25999096f5,Improved line and tab offset mapping
RikHeijdens,2016-08-24 14:27:23,https://api.github.com/repos/google/ExoPlayer/git/commits/ce55587db48ae0f7be24a4817af26a444f69cc8d,ce55587db48ae0f7be24a4817af26a444f69cc8d,"Fixed comment

Alpha is stored in the first byte of an integer"
RikHeijdens,2016-08-24 12:58:08,https://api.github.com/repos/google/ExoPlayer/git/commits/8b2af1244725b8d600c3f5ea2cceb4504728c7d9,8b2af1244725b8d600c3f5ea2cceb4504728c7d9,"Discard spans after seeking

Discard any spans that should not be applied because they don't belong
to what's in the current CC buffer."
RikHeijdens,2016-08-24 12:08:37,https://api.github.com/repos/google/ExoPlayer/git/commits/43e6e16168a7b7bc6e07e46396da1c26e524dc47,43e6e16168a7b7bc6e07e46396da1c26e524dc47,Implemented PAC and Midrow code handling for EIA-608 captions
ojw28,2016-08-10 18:48:43,https://api.github.com/repos/google/ExoPlayer/git/commits/f6fdcee9b3b2d1ea5500b149c6cf4b50cf8a48f2,f6fdcee9b3b2d1ea5500b149c6cf4b50cf8a48f2,"Parse stz2 Atoms during mp4 extraction.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129892143"
andrewlewis,2016-08-10 18:39:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e883b7c2704e42ba92f20176da60cc8c2b9c3429,e883b7c2704e42ba92f20176da60cc8c2b9c3429,"Clear the timeline on seeking if renderers are reading ahead.

If a renderer is reading ahead of the playing period, seeking within the
playing period would fail, because renderers would not be disabled but then try
to read from SampleStreams that have a released period.

Also, in the same circumstances, seeking within the reading period would fail,
because all renderers would be disabled, but their sample streams have already
been read. When they are reenabled they expect to see a format but don't
receive one.

In both cases, seeking can just clear the timeline. This only occurs in rare
circumstances when the player is reading ahead, so the cost of re-preparing
will not be incurred often, and allows the seeking logic to be simpler.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129891060"
ojw28,2016-07-27 08:03:01,https://api.github.com/repos/google/ExoPlayer/git/commits/932574a3cb38e554137c757873d2e435ad6169b0,932574a3cb38e554137c757873d2e435ad6169b0,"Fix us/ms conversion error.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129871792"
ojw28,2016-08-10 15:45:53,https://api.github.com/repos/google/ExoPlayer/git/commits/91c7551cc30328c4719a886daa97a92d57ab76e2,91c7551cc30328c4719a886daa97a92d57ab76e2,"Remove Timeline.UNKNOWN_PERIOD_COUNT

It's no longer used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129870115"
ojw28,2016-08-10 15:44:14,https://api.github.com/repos/google/ExoPlayer/git/commits/d10c811bd8a3e1a280d09b57321c5389649db9e2,d10c811bd8a3e1a280d09b57321c5389649db9e2,"Fix Tx3g decoding

Issue #1712

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129869936"
ojw28,2016-08-10 15:41:38,https://api.github.com/repos/google/ExoPlayer/git/commits/cd4cc1dc140e8b368b59a42289126ffe26339371,cd4cc1dc140e8b368b59a42289126ffe26339371,"Add absolute start time to Timeline

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129869741"
ojw28,2016-08-10 15:22:51,https://api.github.com/repos/google/ExoPlayer/git/commits/4502a464dd416923fdf648d93ff4a67360a13e86,4502a464dd416923fdf648d93ff4a67360a13e86,"Use ms for SeekWindow, for consistency with Timeline

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129868070"
ojw28,2016-08-10 15:21:50,https://api.github.com/repos/google/ExoPlayer/git/commits/c5a2f9b010e65bc71a5356d65083074997ca8ee5,c5a2f9b010e65bc71a5356d65083074997ca8ee5,"Expose seek window + start position for SmoothStreaming

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129867969"
ojw28,2016-08-10 11:22:26,https://api.github.com/repos/google/ExoPlayer/git/commits/2a15480102e753ae33bf4ef05da2853dd79b31f7,2a15480102e753ae33bf4ef05da2853dd79b31f7,"Fix SmoothStreaming

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129851843"
andrewlewis,2016-08-10 10:44:22,https://api.github.com/repos/google/ExoPlayer/git/commits/23981a6fc46281bd23815d7c9d22b64d837d3aee,23981a6fc46281bd23815d7c9d22b64d837d3aee,"Hide the shutter view when no video is being rendered.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129849825"
ojw28,2016-08-10 08:45:08,https://api.github.com/repos/google/ExoPlayer/git/commits/aab4e36d1ad6b7895afe8c11b81cfcd72cb01d0d,aab4e36d1ad6b7895afe8c11b81cfcd72cb01d0d,"Don't reuse SampleStream instance in SingleSampleMediaSource

Referential equality is going to become important for detecting
whether a SampleStream has been replaced, so we need to create
new instances as we do elsewhere.

This also enables multiple SampleStreams to be provided for a
single TrackGroup, as is also true for DASH and SmoothStreaming.
It's forbidden to ask for multiple SampleStreams from a single
TrackGroup currently, but we may choose to relax that at some
point (and indicate whether it's allowed as a flag on each
TrackGroup).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129842336"
ojw28,2016-08-09 20:35:18,https://api.github.com/repos/google/ExoPlayer/git/commits/665c9fc14cea5cbf5e92832ef4620f121b5f7a63,665c9fc14cea5cbf5e92832ef4620f121b5f7a63,"Fix DASH period duration reporting

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129787235"
andrewlewis,2016-08-09 14:56:06,https://api.github.com/repos/google/ExoPlayer/git/commits/cdb706bac80058ec5ca866cb74da2f2fface2656,cdb706bac80058ec5ca866cb74da2f2fface2656,"Fix period durations for single period and concatenated timelines.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129748865"
andrewlewis,2016-08-09 14:34:55,https://api.github.com/repos/google/ExoPlayer/git/commits/88bf1d0739ebf83da6853d4ad46d5fb3fa326fb2,88bf1d0739ebf83da6853d4ad46d5fb3fa326fb2,"Expose the seekable window.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129747377"
ojw28,2016-08-09 10:53:04,https://api.github.com/repos/google/ExoPlayer/git/commits/39482f244b0f5a5308d4f06ffa76dfe767a50895,39482f244b0f5a5308d4f06ffa76dfe767a50895,"Fix broken Javadoc

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129733571"
ojw28,2016-08-09 10:51:36,https://api.github.com/repos/google/ExoPlayer/git/commits/300ddc2aeff60b1b06d66f86bc91ee5c10dc08ce,300ddc2aeff60b1b06d66f86bc91ee5c10dc08ce,"Cronet extension project setup

- Add build test to [] so it runs in presubmit
- Tweak README.md instructions
- Use symlinks to make the extension usable in Android
  Studio internally, without taking any special action
- Remove unnecessary dependencies
- Simplify setup instructions in README.md

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129733466"
erdemguven,2016-08-08 15:20:59,https://api.github.com/repos/google/ExoPlayer/git/commits/bd37216902528011138f6b265ad85309dc1d44ac,bd37216902528011138f6b265ad85309dc1d44ac,"CacheSpan and Util.un/escapeFileName tests.

Fixed CacheSpan regexp for line breaks characters in key.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129631446"
ojw28,2016-08-08 14:16:49,https://api.github.com/repos/google/ExoPlayer/git/commits/b15ceba7807f60228281a5e5ae66c3af0d35e994,b15ceba7807f60228281a5e5ae66c3af0d35e994,"Enhance DefaultTrackSelector part 2

- Support specifying a preferred text language.
- Score based selection for text/audio/other tracks.
- Prefer default tracks to non-default ones.
- Allow overriding of base select*Track methods.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129626994"
andrewlewis,2016-08-08 13:55:32,https://api.github.com/repos/google/ExoPlayer/git/commits/95f41134569f22e5c0fe9a058a5fec14b8c9fd1e,95f41134569f22e5c0fe9a058a5fec14b8c9fd1e,"Fix seeking into a different period that has been prepared.

When seekToPeriodPosition found that the seek destination period was already
prepared, it would not disable/re-enable renderers. This was fine if the
playing period wasn't changing, but in other cases the renderers would be left
reading the incorrect streams (and the underlying periods may have been
released).

Also, transition to the buffering state before re-enabling renderers, so that
the renderers are not started until leaving the buffering state.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129625632"
ojw28,2016-08-08 13:38:08,https://api.github.com/repos/google/ExoPlayer/git/commits/57832724444b06ab7d3c316fd1ebce6890c1f39d,57832724444b06ab7d3c316fd1ebce6890c1f39d,"Fix missing generics

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129624395"
ojw28,2016-08-08 13:05:29,https://api.github.com/repos/google/ExoPlayer/git/commits/a7cb98d99110f46bd819c4c0838668b1f9bf1293,a7cb98d99110f46bd819c4c0838668b1f9bf1293,"Pass source to TransferListener events

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129622239"
andrewlewis,2016-08-08 06:59:23,https://api.github.com/repos/google/ExoPlayer/git/commits/3ef837341ef24b6cc7162b4f5e7e325bdd11f40c,3ef837341ef24b6cc7162b4f5e7e325bdd11f40c,"Don't use OMX.qcom.audio.decoder.mp3 on LGE Optimus API 16.

Issue: #1714

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129600348"
AquilesCanta,2016-08-04 16:14:23,https://api.github.com/repos/google/ExoPlayer/git/commits/52d95398789a26ba29f1c501ad3e151329809e09,52d95398789a26ba29f1c501ad3e151329809e09,"Fix NPE in track selection view

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129336905"
andrewlewis,2016-08-04 13:51:17,https://api.github.com/repos/google/ExoPlayer/git/commits/c2c41558e5f893991c2e2270b8ae29b84b6864e3,c2c41558e5f893991c2e2270b8ae29b84b6864e3,"Merge the internal timeline into ExoPlayerImplInternal.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129325922"
ojw28,2016-08-03 17:05:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ee565300cb3d68f76bd04599bce0b8c8b56faa0c,ee565300cb3d68f76bd04599bce0b8c8b56faa0c,"Enhance DefaultTrackSelector part 1

- Enforce viewport constraints for fixed video track selection.
- Select best fixed video track, not the first one.
- Better handling of video tracks with unknown dimensions.
- Mini bug fix.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129226593"
ojw28,2016-08-03 14:41:04,https://api.github.com/repos/google/ExoPlayer/git/commits/2395f13682085c1098f3e513674ce96f8e8d7aae,2395f13682085c1098f3e513674ce96f8e8d7aae,"Tweak project structure

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129212987"
ojw28,2016-08-03 11:34:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e26f72d4546658a814b9dc9b2be2c36f9602e080,e26f72d4546658a814b9dc9b2be2c36f9602e080,"Update @return to Returns where appropriate

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129201483"
ojw28,2016-08-02 12:30:12,https://api.github.com/repos/google/ExoPlayer/git/commits/490c5fea7836f743cd7ddbe09b0447a7a49a9705,490c5fea7836f743cd7ddbe09b0447a7a49a9705,"Further improve codec reconfiguration

- Only setup a codec to allow adaptation to other compatible
  formats in the stream. If something like the mimeType is
  changing adaptation will never be possible, so there's no
  point.
- Incorporate maxInputSize into the reconfiguration logic.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129088464"
erdemguven,2016-08-02 11:26:33,https://api.github.com/repos/google/ExoPlayer/git/commits/bd7c8fed1b0c662aa951f4a47d08a65759f8ea27,bd7c8fed1b0c662aa951f4a47d08a65759f8ea27,"While buffering check for errors even if renderes are ready.

On an edge case, player may get stuck when the renderers are ready but the buffer doesn't get full enough because of a fatal error in data source. An example state can be created by starting a live DASH stream and switching between normal and slow network connections.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129084824"
ojw28,2016-08-02 10:56:34,https://api.github.com/repos/google/ExoPlayer/git/commits/9a272068b461d2fee463143d64c0608e7daa1794,9a272068b461d2fee463143d64c0608e7daa1794,"Allow resetting of position when setting source

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129083335"
ojw28,2016-08-02 10:29:33,https://api.github.com/repos/google/ExoPlayer/git/commits/90ceade08f23914de667572714fe76c14b628850,90ceade08f23914de667572714fe76c14b628850,"Add option to manually replace manifest URI

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129081694"
ojw28,2016-08-02 10:27:22,https://api.github.com/repos/google/ExoPlayer/git/commits/af8f1b8387c1c05c31f4ae68b12823edd4110f2b,af8f1b8387c1c05c31f4ae68b12823edd4110f2b,"Fix multi-period transitions with track selection overrides

An override applies across periods provided they expose the
same track groups according to .equals, but the formats in
the override are then compared against the period's formats
according to ==. Use .equals consistently to fix.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129081591"
ojw28,2016-08-02 10:27:16,https://api.github.com/repos/google/ExoPlayer/git/commits/1bea48f2495f0853b2ac8096a8ca3cbd55d0c670,1bea48f2495f0853b2ac8096a8ca3cbd55d0c670,"Suppress noop format changes

For self-initializing segments, DefaultTrackOutput receives
a null format and then the actual format. This broke the
deduplication logic in InfoQueue.format, since there were
two transitions: FormatX->Null and Null->FormatX. This CL
allows deduplication to succeed in this case.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129081583"
ojw28,2016-08-02 10:13:45,https://api.github.com/repos/google/ExoPlayer/git/commits/5345702ec574c8766aa0b3ba7dc19cfcf5e6d2b8,5345702ec574c8766aa0b3ba7dc19cfcf5e6d2b8,"Improve formatting in demo app track selector

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129080823"
ojw28,2016-08-01 18:06:57,https://api.github.com/repos/google/ExoPlayer/git/commits/02a79f8c5123cfb5c2ebe165d471e323c07e7afe,02a79f8c5123cfb5c2ebe165d471e323c07e7afe,"Improve video canReconfigureCodec accuracy

The codec cannot be reconfigured if the format rotation
changes, or if the format dimensions exceed the current
decoder's configured maximum dimensions.

Issue #1707

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=129004187"
ojw28,2016-08-01 15:51:03,https://api.github.com/repos/google/ExoPlayer/git/commits/ced790673776cde535c7833f3f5e6b7df28fbc18,ced790673776cde535c7833f3f5e6b7df28fbc18,"Make track selection dialog d-pad friendly

This wont help much until the buttons to get the dialogs
to display are focusable! Use of MediaController seems to
make that tricky (to be continued...).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128989328"
ojw28,2016-08-01 15:23:48,https://api.github.com/repos/google/ExoPlayer/git/commits/17014e6264d2b0aba62f6746e4de8ab3382f70b8,17014e6264d2b0aba62f6746e4de8ab3382f70b8,"Fix concat media source premature listener invocation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128987095"
andrewlewis,2016-08-01 14:43:05,https://api.github.com/repos/google/ExoPlayer/git/commits/c1729b640cca5cb40806986be2f0dabbf281052b,c1729b640cca5cb40806986be2f0dabbf281052b,"Allow seeking to a default position in a period.

When seeking to the default position in a period, the containing source may
actually return a position in another period. Multi-period live sources can do
this to seek the player to the live edge.

ExoPlayerImplInternal uses the same functionality when the playback position
reaches the end of a period to determine what period/position to play next.
This means that when playback transitions to a multi-period live source from
some other source (playing a concatenation of those two sources), the player
will play the live edge rather than the beginning of the earliest period.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128984355"
ojw28,2016-08-01 13:31:45,https://api.github.com/repos/google/ExoPlayer/git/commits/abd5653dc42be99066d3320cbdcb99262d01ad55,abd5653dc42be99066d3320cbdcb99262d01ad55,"Add Util.getUtf8Bytes to avoid warnings

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128980489"
ojw28,2016-08-01 13:15:21,https://api.github.com/repos/google/ExoPlayer/git/commits/3604d589c1ffb3399dcd867ee57591fc0f4fad47,3604d589c1ffb3399dcd867ee57591fc0f4fad47,"Deduplication AVC/HEVC config parsing + other TODOs

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128979671"
andrewlewis,2016-07-12 01:09:35,https://api.github.com/repos/google/ExoPlayer/git/commits/8d122a101d86071e6edb45cd859a93b25b7c3c5e,8d122a101d86071e6edb45cd859a93b25b7c3c5e,"Use new import ordering.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128967776"
andrewlewis,2016-07-29 13:19:15,https://api.github.com/repos/google/ExoPlayer/git/commits/f89e1700546dc46310b1ea542ee3796c4bfb0ccb,f89e1700546dc46310b1ea542ee3796c4bfb0ccb,"Remove --disable-vp10 from vp9 extension configuration.

The option was removed in
https://chromium.googlesource.com/webm/libvpx/+/67edc5e83be285004804c67c5348bbc81503a04d%5E%21/#F2.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128801977"
ojw28,2016-07-28 18:25:00,https://api.github.com/repos/google/ExoPlayer/git/commits/846f8e1d4685822d4816504127be1b3f4656b886,846f8e1d4685822d4816504127be1b3f4656b886,"Enable track blacklisting for DASH and SmoothStreaming

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128721068"
ojw28,2016-07-28 17:33:08,https://api.github.com/repos/google/ExoPlayer/git/commits/f66b90e34b92c442015f736750df6c4890781f8d,f66b90e34b92c442015f736750df6c4890781f8d,"Eliminate cruft from the demo apps's PlayerActivity

Useful functionality promoted to core library:

1. Management of SurfaceHolder.Callback lifecycle
   promoted to SimpleExoPlayer
2. Ability to determine whether audio/video tracks
   exist but are all unsupported promoted to
   MappingTrackSelector.TrackInfo
3. Read external storage permissions check promoted
   to Util
4. SubtitleView given ability to act directly as a
   TextRenderer.Output to remove layer of indirection
5. SubtitleView given ability to configure itself to
   user's platform wide caption styling
6. KeyCompatibleMediaController promoted to library's
   UI package.

Relocation of boring stuff:

1. ID3 frame logging moved to EventLogger.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128714230"
ojw28,2016-07-28 16:33:15,https://api.github.com/repos/google/ExoPlayer/git/commits/3501332dd3ac8221c17db6f99d9c757136a1da7c,3501332dd3ac8221c17db6f99d9c757136a1da7c,"Converge track selection to a single place.

This change merges the duties of FormatEvaluator into
TrackSelection classes, so that both the static and
dynamic parts of track selection are implemented in a
single place.

New feature: Demo app now allows you to enable random
adaptation in the track selection dialog.

Notes:

- It should be quite easy to allow application side
track blacklisting in addition to source side, as an
extension to this. That would effectively allow
applications to do seamless/deferred track selection
by creating a TrackSelection with all tracks enabled,
and then toggling the blacklist flags to select the
ones they want to be active.

- It should be trivial to implement format blacklisting
for DASH and SS as an extension to this. Will do in a
follow up CL.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128707517"
ojw28,2016-07-28 16:28:21,https://api.github.com/repos/google/ExoPlayer/git/commits/5eb6190682cae5831bed5154ec4bb0eca457661a,5eb6190682cae5831bed5154ec4bb0eca457661a,"Fix branch documentation

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128707067"
erdemguven,2016-07-28 16:24:09,https://api.github.com/repos/google/ExoPlayer/git/commits/2040615cc80c40b1776c515a5237345f5173cd49,2040615cc80c40b1776c515a5237345f5173cd49,"Support for added and removed DASH periods.

Logic and some code is copied from V1.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128706688"
ojw28,2016-07-28 10:32:37,https://api.github.com/repos/google/ExoPlayer/git/commits/c82a3db5ac00941c91b01069125990069dabb0b6,c82a3db5ac00941c91b01069125990069dabb0b6,"Enable next/prev seeking in demo app

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128682992"
ojw28,2016-07-28 09:27:52,https://api.github.com/repos/google/ExoPlayer/git/commits/2f20fd7c03db771f4437e892d3fca59dbe96ffae,2f20fd7c03db771f4437e892d3fca59dbe96ffae,"Simple language + Javadoc consistency

- Invoked --> Called
- Gets --> Returns
- ""True if X. False otherwise."" --> ""Whether X.""
- Removed some @returns where the Javadoc is in ""Returns X"" form

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128678638"
andrewlewis,2016-07-28 08:22:09,https://api.github.com/repos/google/ExoPlayer/git/commits/dfdb3bbc950f9994cba9a424f531d3157b39c5af,dfdb3bbc950f9994cba9a424f531d3157b39c5af,"Count buffer ahead periods rather than using their indices.

This is in preparation for allowing MediaSources to skip over periods when one
period ends, which is needed for starting to play a multi-period live stream
that is concatenated on to another period at the live edge.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128674659"
AquilesCanta,2016-07-27 15:55:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5818409f4ed8979c7e0d6f7ebe3b7d650cab5797,5818409f4ed8979c7e0d6f7ebe3b7d650cab5797,"Add viewport size filtering to the DefaultTrackSelector

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128590422"
ojw28,2016-07-27 14:46:46,https://api.github.com/repos/google/ExoPlayer/git/commits/242bdffc80a263f28776fab116e90f35c62dc3e3,242bdffc80a263f28776fab116e90f35c62dc3e3,"Fix a few warnings.

- Suppress spurious resource type warnings.
- Make AS happy by making private method non-final.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128584391"
ojw28,2016-07-27 09:47:14,https://api.github.com/repos/google/ExoPlayer/git/commits/ac59bde2be43f045f827cc0a01f8affb577bc670,ac59bde2be43f045f827cc0a01f8affb577bc670,"Fix up a bunch more Javadoc.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128565942"
ojw28,2016-07-26 18:14:15,https://api.github.com/repos/google/ExoPlayer/git/commits/3cb58626212984c54f19f9d86e6e309076381ae7,3cb58626212984c54f19f9d86e6e309076381ae7,"Only pass ""throwing"" part of Loader to MediaSource children

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128492613"
cdrolle,2016-07-26 15:16:20,https://api.github.com/repos/google/ExoPlayer/git/commits/47346c39c17697201f8f1e6ff1c687a32c66cb45,47346c39c17697201f8f1e6ff1c687a32c66cb45,"Fixed minor error that occurred when the manifest was updated.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128472884"
ojw28,2016-07-26 14:55:41,https://api.github.com/repos/google/ExoPlayer/git/commits/dae87b66dd5a2c9d24df0314575868e59ea0342b,dae87b66dd5a2c9d24df0314575868e59ea0342b,"MediaPeriod.getDurationUs must report duration when known.

As per the spec of MediaPeriod.getDurationUs, when a live
stream ends we need to start returning the correct final
duration.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128471183"
ojw28,2016-07-26 14:54:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c5aa376bc41b4b02159b55e2a58a560061e94088,c5aa376bc41b4b02159b55e2a58a560061e94088,"Rename only part of FormatEvaluator/TrackSelection merge

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128471102"
ojw28,2016-07-26 13:23:18,https://api.github.com/repos/google/ExoPlayer/git/commits/bf0bdd8d7ccc02765dd2f115a86c5f60a45b404a,bf0bdd8d7ccc02765dd2f115a86c5f60a45b404a,"Move SsMediaPeriod in its own file

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128465118"
ojw28,2016-07-26 12:30:23,https://api.github.com/repos/google/ExoPlayer/git/commits/1722019e0c702db7e7e970639db8e810625c5f86,1722019e0c702db7e7e970639db8e810625c5f86,"Move SmoothStreaming manifest refresh to source level.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128461778"
cdrolle,2016-07-25 21:08:33,https://api.github.com/repos/google/ExoPlayer/git/commits/1d79c26b3446ab921633419f29ea515319cb4c38,1d79c26b3446ab921633419f29ea515319cb4c38,"Added support for RawCC (i.e. out-of-band EIA-608)

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128397367"
ojw28,2016-07-25 20:16:40,https://api.github.com/repos/google/ExoPlayer/git/commits/75e2aee92e24cb6dcf7b486057750b17a7412c2f,75e2aee92e24cb6dcf7b486057750b17a7412c2f,"Fix janky post-track-selection behavior for HLS

We were forgetting to reset renderers during track
selections where muxed media is used.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128391816"
ojw28,2016-07-25 18:04:31,https://api.github.com/repos/google/ExoPlayer/git/commits/0b4284d0602ba84163b27ba3b9c9258ee0c68ea0,0b4284d0602ba84163b27ba3b9c9258ee0c68ea0,"Remove TrackGroup.adaptive flag.

It's only ""needed"" for HLS, and this requirement will
go away soon. It's safe to remove the flag ahead of
this because a TrackSelector can/should not attempt to
adapt between multiple audio/text tracks.

Also remove unnecessary restrictions on TrackGroups
being non-empty and only of known types.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128376601"
andrewlewis,2016-07-23 07:09:42,https://api.github.com/repos/google/ExoPlayer/git/commits/d657360341f55e0be36111ba5dfefbd512b4f182,d657360341f55e0be36111ba5dfefbd512b4f182,"Expose period information from MediaSources.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128357449"
andrewlewis,2016-07-31 06:14:23,https://api.github.com/repos/google/ExoPlayer/git/commits/2a70a58f0ab7582f4bd32dd9ef50424deaa9f12d,2a70a58f0ab7582f4bd32dd9ef50424deaa9f12d,"Fix non-DRM playback.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128353039"
ojw28,2016-07-25 13:55:45,https://api.github.com/repos/google/ExoPlayer/git/commits/eca3edb9404f794dca2b9a3b0c7572fff434dc71,eca3edb9404f794dca2b9a3b0c7572fff434dc71,"Small cleanup of Util constants.

- Remove null checks (never happens).
- Use ""const"".equals(Util.CONST) where possible.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128351654"
gauravmishra,2016-07-25 12:12:58,https://api.github.com/repos/google/ExoPlayer/git/commits/1624135c20f439f747181dd54dbffd3d839b20ce,1624135c20f439f747181dd54dbffd3d839b20ce,"Parse widevine tag in manifest for secure decryption.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128345063"
ojw28,2016-07-22 18:00:22,https://api.github.com/repos/google/ExoPlayer/git/commits/abcd10513a08bf45f9c13691f261d3c7450116f3,abcd10513a08bf45f9c13691f261d3c7450116f3,"Do TODO in HlsChunkSource

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128190311"
ojw28,2016-07-22 17:49:13,https://api.github.com/repos/google/ExoPlayer/git/commits/9e9634a1a26bd4338b548603513bd6ba8554d3a6,9e9634a1a26bd4338b548603513bd6ba8554d3a6,"Delete disabled tests

The classes these tests are written for have changed
so much we'll have to write them again. We can refer
to V1 if we want to look at what the old tests did, so
there's no need to keep this file in the V2 tree at
the moment.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128189076"
ojw28,2016-07-22 10:57:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ba0a4235a0a3d988e4726cafc22bf30f50c6aad0,ba0a4235a0a3d988e4726cafc22bf30f50c6aad0,"Consistent Javadoc for text package

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128160177"
ojw28,2016-07-22 10:39:12,https://api.github.com/repos/google/ExoPlayer/git/commits/f0b73e5d5bf3c36c635b0d274412e7ef0add3df3,f0b73e5d5bf3c36c635b0d274412e7ef0add3df3,"Consistent Javadoc for upstream package

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128159118"
ojw28,2016-07-22 10:38:13,https://api.github.com/repos/google/ExoPlayer/git/commits/692d756ee601b0952ff2eec00d8905fb339b4aa6,692d756ee601b0952ff2eec00d8905fb339b4aa6,"Simplification: Move common logic to TrackSelection

- TrackSelection now exposes the selected formats, ordered
  by decreasing bandwidth. This removes the need for DASH,
  SS and HLS to do the sorting individually.
- The change also removes the need to reconstruct TrackSelection
  instances with a different group index in various places
  (e.g. MergingMediaPeriod).
- This is also a step toward potentially packaging the
  FormatEvaluator inside of the TrackSelection (TBD).

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128159064"
ojw28,2016-07-21 18:35:38,https://api.github.com/repos/google/ExoPlayer/git/commits/6f1b24f10f4f89dbaceb23e7eacd348ba9dfd1e4,6f1b24f10f4f89dbaceb23e7eacd348ba9dfd1e4,"Add some missing Javadoc from the drm package

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128085240"
erdemguven,2016-07-21 18:14:43,https://api.github.com/repos/google/ExoPlayer/git/commits/0909446133e50e5bc111afe6a93ea8a7cb40d828,0909446133e50e5bc111afe6a93ea8a7cb40d828,"Don't let renderer input buffer get too big if codec not available.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128082468"
AquilesCanta,2016-07-21 17:00:52,https://api.github.com/repos/google/ExoPlayer/git/commits/68156ac7a40fa3610daab21a76b7188f6e9d51ef,68156ac7a40fa3610daab21a76b7188f6e9d51ef,"Ignore sequence numbers when switching variants in HLS

According to the spec, there is no mandatory relation between segments'
sequence numbers of different variants. This CL ignores sequence numbers
when switching variants:

* In vod, the switching playback position is obtained by adding the
    duration of previous segments.
* In live playback this is not possible. It is assumed that the
    different live media playlists do not drift apart too much, so
    the playback position is obtained by subtracting the duration
    in reverse order.

In later CLs, the described mechanisms will become the fallback methods
by replacing them with the use of EXT-X-PROGRAM-DATE-TIME information
or more reliable sources.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128072663"
AquilesCanta,2016-07-21 16:51:08,https://api.github.com/repos/google/ExoPlayer/git/commits/98c5b2b8d0b7534723a5521be2179898c49bde5e,98c5b2b8d0b7534723a5521be2179898c49bde5e,"Treat empty stss boxes as absent

ISSUE: #1681

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128071668"
ojw28,2016-07-21 14:51:30,https://api.github.com/repos/google/ExoPlayer/git/commits/05187ad519758f732d8c295704e63b4c04e17018,05187ad519758f732d8c295704e63b4c04e17018,"Add new buildout dirs to gitignore

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128060676"
erdemguven,2016-07-21 10:56:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d785519ea0d597f9adfd52d22774526e91c82bdd,d785519ea0d597f9adfd52d22774526e91c82bdd,"Javadoc for FakeExtractorOutput.WRITE_DUMP.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=128045581"
cdrolle,2016-07-20 16:09:07,https://api.github.com/repos/google/ExoPlayer/git/commits/5a7b046462c527f6a72384b8ac444e042c324fec,5a7b046462c527f6a72384b8ac444e042c324fec,"Re-added call to schedule manifest refreshes.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127951757"
ojw28,2016-07-20 10:01:14,https://api.github.com/repos/google/ExoPlayer/git/commits/48f666a0e3d34731d4465f4f745dbcfcfecba9e7,48f666a0e3d34731d4465f4f745dbcfcfecba9e7,"Merge HlsParserUtil into HlsPlaylistParser

It's the only place that uses it.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127927164"
ojw28,2016-07-20 09:41:11,https://api.github.com/repos/google/ExoPlayer/git/commits/722e05b8baced6e52b11b43fb8aeedc6a61b01ae,722e05b8baced6e52b11b43fb8aeedc6a61b01ae,"Some brevity/consistency renaming in source package

SmoothStreaming -> Ss
MediaPresentationDescription -> DashManifest
DashSingleSegmentIndex -> SingleSegmentIndex

Moved DASH and Ss manifest classes to matching
manifest packages for consistency. For Hls the
package is called playlist still, since that's
what they're widely known as.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127925961"
ojw28,2016-07-19 16:47:37,https://api.github.com/repos/google/ExoPlayer/git/commits/fc457e4c1bf6d372852cbc0e3d8bfe86a235608f,fc457e4c1bf6d372852cbc0e3d8bfe86a235608f,"Move default DRM callback implementation to library

This also removes direct use of HttpURLConnection and
allows use of any HttpDataSource for license requests,
which means those using OkHttp can finally use the
same network stack for license requests as they're using
for everything else, without having to implement their
own callback.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127841045"
gauravmishra,2016-07-19 13:44:26,https://api.github.com/repos/google/ExoPlayer/git/commits/a61828a67516d87798fbc203fecb26886e297d5b,a61828a67516d87798fbc203fecb26886e297d5b,"Merge widevine playback tests to v2.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127825954"
andrewlewis,2016-07-19 12:27:49,https://api.github.com/repos/google/ExoPlayer/git/commits/2ed55d97d1d56837d844abd09aa906e41d323b18,2ed55d97d1d56837d844abd09aa906e41d323b18,"Work around broken VP8 decoders.

Issue: #548

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127821150"
ojw28,2016-07-19 10:57:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9304cb3f8fdeda394ce5a22968841de0e5e78117,9304cb3f8fdeda394ce5a22968841de0e5e78117,"Plumb key-rotation and drm-playlist support

With this change, MediaCodecRenderer acquires a session
from its DrmSessionManager whenever the DrmInitData in
the format changes. The DrmSessionManager is permitted
to return the same session if it can be re-used.

This plumbing adds support for:

1. Key-rotation, in the case that a key-rotation-aware
   DrmSessionManager is used. Such an implementation will
   return the same DrmSession for every aquisition, but
   will be making use of multiple MediaDrm instances within
   that session to enable the rotation.

2. Playlists with mixed clear and protected content. One
   final piece to this will be to have each MediaPeriod
   provide its own license URL. We could also allow each
   MediaPeriod to specify the DRM UUID, but switching from
   PlayReady to Widevine in a playlist seems like quite a
   hypothetical thing.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127816046"
ojw28,2016-07-19 09:51:43,https://api.github.com/repos/google/ExoPlayer/git/commits/ba9a610ac239489640cd0ee2d6ea9e56a213f1b4,ba9a610ac239489640cd0ee2d6ea9e56a213f1b4,"Put additional Javadoc files under src

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127811486"
cushon,2016-07-19 02:29:32,https://api.github.com/repos/google/ExoPlayer/git/commits/00224877464c4006f288884f236409d93cd3c61d,00224877464c4006f288884f236409d93cd3c61d,"Avoid ""unnecessary boolean expression"" warning

This is a no-op change to avoid an error-prone unnecessary
boolean expression warning.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127787709"
ojw28,2016-07-18 18:51:18,https://api.github.com/repos/google/ExoPlayer/git/commits/6c2a9677633d81ac4fc4a4b0a46eae4f94dcd6cf,6c2a9677633d81ac4fc4a4b0a46eae4f94dcd6cf,"BandwidthMeter shouldn't extend TransferListener

There may be other ways to estimate bandwidth that don't
require listening to our own transfers.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127741651"
ojw28,2016-07-18 18:17:09,https://api.github.com/repos/google/ExoPlayer/git/commits/74b43e26bd38431ed93db9a222844c308d2e5013,74b43e26bd38431ed93db9a222844c308d2e5013,"Allow injection of custom ChunkSources

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127737169"
ojw28,2016-07-18 18:07:07,https://api.github.com/repos/google/ExoPlayer/git/commits/5360ddc519392037c3af0887d5d0dafeafe4c110,5360ddc519392037c3af0887d5d0dafeafe4c110,"Allow injection of custom FormatEvaluators

This was possible previously, but now we support things
like multi-period DASH we need to do the injection in
the form of factories rather than concrete instances.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127735816"
ojw28,2016-07-18 17:30:38,https://api.github.com/repos/google/ExoPlayer/git/commits/e7d95aff34f27b4bfa08716fd48a0188797566ab,e7d95aff34f27b4bfa08716fd48a0188797566ab,"Update Renderer documentation

- Cleaned up documentation
- Removed getIndex from Renderer interface
- Renamed reset to be positionReset

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127731006"
erdemguven,2016-07-15 17:12:57,https://api.github.com/repos/google/ExoPlayer/git/commits/ff914afd7f9c488956a5164d863ef71a6916650f,ff914afd7f9c488956a5164d863ef71a6916650f,"Propagate MediaSource loading errors to the player.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127551577"
ojw28,2016-07-15 16:53:44,https://api.github.com/repos/google/ExoPlayer/git/commits/98a0c5f05c6caf2c8238a855742b32076c742191,98a0c5f05c6caf2c8238a855742b32076c742191,"Fix restoring of position.

This change restores ExoPlayer to its previous behaviour.
I think we'll want a ""resetPosition"" boolean parameter on
setMediaSource at some point, but no need to add it right
now. Note that this would not always reset to the start
of the source. For a live playback it will reset to the
desired position (normally somewhere slightly behind the
live edge).

Issue: #1667
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127549700"
andrewlewis,2016-07-15 13:54:18,https://api.github.com/repos/google/ExoPlayer/git/commits/15631e12a8b9175329ff452ea4d2f8e96c7de758,15631e12a8b9175329ff452ea4d2f8e96c7de758,"Fix seeking to a non-loaded period.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127536151"
ojw28,2016-07-15 12:53:12,https://api.github.com/repos/google/ExoPlayer/git/commits/8a36ce697e3bcec6f9a7a64e10a7a16850094110,8a36ce697e3bcec6f9a7a64e10a7a16850094110,"Add Renderer.getCapabilities

Renderer no longer extends RendererCapabilities after this
change. Capabilities are instead accessed via a getter.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127532634"
ojw28,2016-07-15 11:16:23,https://api.github.com/repos/google/ExoPlayer/git/commits/dcc1ac56df877b0b90e28f4cb1bf03eb11c6c981,dcc1ac56df877b0b90e28f4cb1bf03eb11c6c981,"Make Renderer an interface

In V1 we received complaints that Renderer was too locked down.
In particular, it wasn't possible to implement a Renderer that
wrapped another Renderer, since most of the methods were package
private and final (e.g. enable).

This change defines Renderer as a proper interface, removing
this limitation. A method-reordering-only change will follow
this one, to get things into a nice consistent/sane order in
each of the Renderer classes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127527995"
ojw28,2016-07-15 10:45:59,https://api.github.com/repos/google/ExoPlayer/git/commits/7c551081f511355048c044c1f371153fb681a4c3,7c551081f511355048c044c1f371153fb681a4c3,"Only pass RendererCapabilities to TrackSelectors

We should only give a TrackSelector access to what it
needs, not the whole Renderer. This is particular true
if [] happens, since more Renderer methods
will become publicly visible.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127526473"
AquilesCanta,2016-07-14 16:43:23,https://api.github.com/repos/google/ExoPlayer/git/commits/97d9c94c1a6e598108d2927013dd32ebbf1c1275,97d9c94c1a6e598108d2927013dd32ebbf1c1275,"Fix a typo and variable declaration order in Period
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127441130"
ojw28,2016-07-14 16:31:47,https://api.github.com/repos/google/ExoPlayer/git/commits/553023e63fd03311190559d7967530a509cb18db,553023e63fd03311190559d7967530a509cb18db,"Fix DASH periods mis-reporting their duration + cleanup

DashMediaPeriod.releasePeriod resets duration to 0, but
instances are currently being re-used through multiple
prepare/release cycles. Hence the duration needs to be
retained. This change fixes this issue, and also makes
variables final in DashMediaPeriod where possible.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127440080"
erdemguven,2016-07-14 15:54:27,https://api.github.com/repos/google/ExoPlayer/git/commits/bc77c3eb8229f1bc9882c03edcdf49312658ecef,bc77c3eb8229f1bc9882c03edcdf49312658ecef,"Call MediaSource prepare/release methods in ExoPlayerImplInternal.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127436600"
ojw28,2016-07-14 10:41:43,https://api.github.com/repos/google/ExoPlayer/git/commits/2d8b51a709ad881328e8f693f961c57545d93149,2d8b51a709ad881328e8f693f961c57545d93149,"Convert extractor factory classes to static final objects
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127415273"
ojw28,2016-07-13 16:43:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f758082d400bbe42116cc319be16bc5eb2c25e7d,f758082d400bbe42116cc319be16bc5eb2c25e7d,"Big (and hopefully near-final) rename.

1. Rename ""extensions"" package to ""decoder"". It's used by both
   text and (should be used by) metadata, so it's no longer just
   for extensions.
2. Move Buffer objects move into the decoder package.
3. Rename SubtitleParser and MetadataParser to SubtitleDecoder
   and MetadataDecoder respectively, since they extend Decoder.
   Ditto for all subclasses.
4. Subtitle and Metadata decoders now throw their own exception
   types rather than ParserException.
5. Move MediaCodec classes into a mediacodec package, with the
   exception of the concrete audio and video renderers.
6. Create an audio package to hold the two audio renderer classes
   plus related util classes.
7. Create a video package to hold the one video renderer class
   plus related util classes.

After this change the following nice properties hold:

1. Want a video renderer? Look in the video package. Ditto for
   audio, text and metadata.
2. All TrackRenderer implementations use a decoder of some kind
   to decode buffers received from the source, so we have
   consistent terminology there.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127326805"
ojw28,2016-07-13 14:55:14,https://api.github.com/repos/google/ExoPlayer/git/commits/4f718363b5914036e82ade50efc00bda71e6bd2e,4f718363b5914036e82ade50efc00bda71e6bd2e,"Remove BandwidthMeter from SimpleExoPlayer

The BandwidthMeter should only be used by MediaSource
instances and the objects they reference, so there's
really no reason for the player to need to know about it.

This change sacrifices DebugTextViewHelper showing the
estimated bandwidth, but I think that's a price worth
paying.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127316755"
erdemguven,2016-07-13 14:40:56,https://api.github.com/repos/google/ExoPlayer/git/commits/4a5bb559206324ac663be162a7ba6686df135cff,4a5bb559206324ac663be162a7ba6686df135cff,"Split DashMediaSource MediaPeriod implementation into DashMediaPeriod and support multiple periods.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127315877"
AquilesCanta,2016-07-13 13:53:34,https://api.github.com/repos/google/ExoPlayer/git/commits/a0c15957259384f3fd4a8c893324c50b2c3f1ab2,a0c15957259384f3fd4a8c893324c50b2c3f1ab2,"Add support for CEA608 in MP4 and fMP4

Issue: #1658
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127312721"
andrewlewis,2016-07-13 08:45:34,https://api.github.com/repos/google/ExoPlayer/git/commits/11e2e0e640075c168ab8e3c0ae13393e50df5e05,11e2e0e640075c168ab8e3c0ae13393e50df5e05,"Release Extractors on the loader's thread.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127294338"
ojw28,2016-07-12 20:02:03,https://api.github.com/repos/google/ExoPlayer/git/commits/62ebcaf8539e0b7b32b3876031352976a7071665,62ebcaf8539e0b7b32b3876031352976a7071665,"Remove unnecessary res placeholder files

I think these were needed for Eclipse only.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127232262"
ojw28,2016-07-12 20:01:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ea0cfdeeb13b6172f1522479e62dbd5fff8b6fe6,ea0cfdeeb13b6172f1522479e62dbd5fff8b6fe6,"Remove dead code from SmoothStreamingChunkSource
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127232159"
vigneshvg,2016-07-12 17:46:41,https://api.github.com/repos/google/ExoPlayer/git/commits/6b4918fa9b29926cfe96e10376d313f968d245bd,6b4918fa9b29926cfe96e10376d313f968d245bd,"vp9: Expose libvpx build configuration
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127216536"
andrewlewis,2016-07-12 14:19:28,https://api.github.com/repos/google/ExoPlayer/git/commits/acef34a6f3dab60eea8b837f29d118315f57ce5e,acef34a6f3dab60eea8b837f29d118315f57ce5e,"Set the output buffer position/limit only if it's non-null.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127196797"
ojw28,2016-07-12 14:12:28,https://api.github.com/repos/google/ExoPlayer/git/commits/d4d1640808be2216a75afa57e3a085251e0034e7,d4d1640808be2216a75afa57e3a085251e0034e7,"Use extension rather than composition for track selection

It doesn't look like TrackSelectionPolicy is going to be
useful other than with DefaultTrackSelector, and it's kinda
confusing dealing with both ""selector"" and ""policy""
terminology. This change does the following:

DefaultTrackSelector -> selector.MappingTrackSelector
DefaultTrackSelectionPolicy -> selector.DefaultTrackSelector
TrackSelectionPolicy -> [deleted]
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127196326"
ojw28,2016-07-12 13:57:25,https://api.github.com/repos/google/ExoPlayer/git/commits/67be677ddf21b079d2e8ccea13251d443346bd56,67be677ddf21b079d2e8ccea13251d443346bd56,"Move more classes under source package

- Chunk package is only useful to source packages.
- BehindLiveWindowException is a source exception.
- SequenceableLoader is related to sources.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127195307"
andrewlewis,2016-07-12 13:13:56,https://api.github.com/repos/google/ExoPlayer/git/commits/e4b08117fc6b16a5037140edb4fc0921496109c1,e4b08117fc6b16a5037140edb4fc0921496109c1,"Use adaptation workaround on N7v1.

Also, only enable the workaround when the resolution isn't changing but the
format is changing.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127192637"
ojw28,2016-07-12 13:11:39,https://api.github.com/repos/google/ExoPlayer/git/commits/de27b2e0437aeb8d6eafcba33fb90537cdf91b98,de27b2e0437aeb8d6eafcba33fb90537cdf91b98,"TrackStream -> source.SampleStream

Also addded result constants to C to remove the dependency
on TrackStream from extractor.DefaultTrackOutput.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127192488"
ojw28,2016-07-12 10:54:37,https://api.github.com/repos/google/ExoPlayer/git/commits/be9d77c59cd25f8b48e3665c8b5db1a433a5fb38,be9d77c59cd25f8b48e3665c8b5db1a433a5fb38,"Add new UI package.

There aren't really enough classes to justify it right
now, but if we're going to do a VideoView equivalent and
sensible player controls at some point, it's worth making
now to get classes into the correct place.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127184374"
AquilesCanta,2016-07-12 09:34:13,https://api.github.com/repos/google/ExoPlayer/git/commits/9385b4fdf478967a62d45d54fc7769830c6b2fb6,9385b4fdf478967a62d45d54fc7769830c6b2fb6,"Add version to SampleChooserActivity for Exoplayer2
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127179274"
andrewlewis,2016-07-11 17:45:24,https://api.github.com/repos/google/ExoPlayer/git/commits/c936aee4123e05844493d5415c9b3d76e98e18e0,c936aee4123e05844493d5415c9b3d76e98e18e0,"Fix condition for working around broken decoders.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127102633"
ojw28,2016-07-11 16:14:17,https://api.github.com/repos/google/ExoPlayer/git/commits/bcca373f5b1af3d151a51aad77302b7fd05068c8,bcca373f5b1af3d151a51aad77302b7fd05068c8,"Rename DecoderInfo -> MediaCodecDecoderInfo

All other MediaCodec specific classes are prefixed MediaCodec,
and we now have other decoders that aren't not related to
MediaCodec.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127093330"
andrewlewis,2016-07-11 15:55:59,https://api.github.com/repos/google/ExoPlayer/git/commits/fdf26d6a1f10cb07a2e6301b7e4225e44b4b8825,fdf26d6a1f10cb07a2e6301b7e4225e44b4b8825,"Work around volantis adaptation issue.

The volantis H.264/AVC decoder could get stuck when adapting between certain
stream formats where there was no change in resolution.

Queue a small Baseline profile SPS, PPS and IDR slice during adaptation on this
device, to force reallocation of reference frames.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127091330"
erdemguven,2016-07-11 15:02:57,https://api.github.com/repos/google/ExoPlayer/git/commits/464869cf5713b0e564eaafd1c94467655b5655ee,464869cf5713b0e564eaafd1c94467655b5655ee,"Fix DASH duration.

As multi period DASH isn't supported yet use the duration of the first period only.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127086808"
ojw28,2016-07-11 11:28:48,https://api.github.com/repos/google/ExoPlayer/git/commits/4e86c55361447c027a9ca0cff59075bceeb1e67a,4e86c55361447c027a9ca0cff59075bceeb1e67a,"Introduce source package for sources
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127073630"
andrewlewis,2016-07-11 11:22:05,https://api.github.com/repos/google/ExoPlayer/git/commits/b8fef7bf9933921557a08f1882ea9ffdf5dadd45,b8fef7bf9933921557a08f1882ea9ffdf5dadd45,"Delete Eclipse .cproject files.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127073328"
ojw28,2016-07-11 11:17:59,https://api.github.com/repos/google/ExoPlayer/git/commits/a89bf3a4776b618e5debf1089fe51377a335e54e,a89bf3a4776b618e5debf1089fe51377a335e54e,"Allow merging of both periods and sources.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127073129"
ojw28,2016-07-11 09:08:17,https://api.github.com/repos/google/ExoPlayer/git/commits/9558a4cb997d9a4413417565eada24439831e823,9558a4cb997d9a4413417565eada24439831e823,"Rename TrackRenderer -> Renderer
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=127065122"
ojw28,2016-07-08 15:45:19,https://api.github.com/repos/google/ExoPlayer/git/commits/8e0354c0a638270bd213b1410fc9534addf8f685,8e0354c0a638270bd213b1410fc9534addf8f685,"Finalize class naming

SampleSourceProvider -> MediaSource
SampleSource -> MediaPeriod
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126914964"
ojw28,2016-07-08 15:23:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c9ec7beb928591c00c106eea8bd9401f769f27db,c9ec7beb928591c00c106eea8bd9401f769f27db,"Add streamType/capabilities for extension audio renderers
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126913487"
AquilesCanta,2016-07-08 12:49:47,https://api.github.com/repos/google/ExoPlayer/git/commits/a845f1c4cc0880e6349865b436e9e63b4faa6d9e,a845f1c4cc0880e6349865b436e9e63b4faa6d9e,"Add soft video constrains to DefaultTrackSelectionPolicy

Also make filterHdVideoTracks override setMaxVideoSize.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126904080"
ojw28,2016-07-08 12:05:48,https://api.github.com/repos/google/ExoPlayer/git/commits/08bd4546ca025abb94a9aae3e076be732b2e420e,08bd4546ca025abb94a9aae3e076be732b2e420e,"Blacklist mp3 decoder on HTC One S

Issue: #377
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126901901"
ojw28,2016-07-08 10:01:52,https://api.github.com/repos/google/ExoPlayer/git/commits/dbb43567a33a6cb3cb511a76c21d26f8d72ee8fe,dbb43567a33a6cb3cb511a76c21d26f8d72ee8fe,"Finalize v2 directory + package name

- The package is renamed to avoid conflicts with v1, should any
app wish to include both v1 and v2 for a period of time. This is
similar to the approach used by some other open source projects
(e.g. okhttp).
- Copyright year is updated everywhere for completeness.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126895326"
andrewlewis,2016-07-08 07:57:45,https://api.github.com/repos/google/ExoPlayer/git/commits/af3452d231c904600bf9e2c08f3f59565b2683fe,af3452d231c904600bf9e2c08f3f59565b2683fe,"Make SampleSources reusable and implement SampleSourceProvider.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126888556"
andrewlewis,2016-07-07 14:42:57,https://api.github.com/repos/google/ExoPlayer/git/commits/42d78b35590beb0fc39bd527bbc8259010793731,42d78b35590beb0fc39bd527bbc8259010793731,"Fix seeking before a source is set.

Before this change, calling seekTo then setPlayWhenReady would cause the player
throw an error, due to using the sample source provider before it's set.

Transition to the buffering state in seekToInternal only if we have a sample
source provider.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126804528"
ojw28,2016-07-07 13:25:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e02ca775f3aa68acd59e780e1b1274d2bc8524ed,e02ca775f3aa68acd59e780e1b1274d2bc8524ed,"Optimize release of multiple allocations.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126799524"
ojw28,2016-07-07 12:04:15,https://api.github.com/repos/google/ExoPlayer/git/commits/1a3de408ac0656ea140083fce420dc9b6da275b6,1a3de408ac0656ea140083fce420dc9b6da275b6,"A few bug fixes.

1. Suppress onContinueLoadingRequested until a source is
   prepared (since such calls are not supposed to be made
   until after preparation has completed).
2. Don't use the format evaluator in HlsChunkSource prior
   to prepration completing.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126794616"
ojw28,2016-07-07 11:24:28,https://api.github.com/repos/google/ExoPlayer/git/commits/8c0e0b690ea34415c633f7d352a3a6e92ea19b35,8c0e0b690ea34415c633f7d352a3a6e92ea19b35,"Don't abbreviate String as Str
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126792706"
ojw28,2016-07-07 11:21:05,https://api.github.com/repos/google/ExoPlayer/git/commits/85741ff2d3235b43cbe42d39d7061af31b464f8e,85741ff2d3235b43cbe42d39d7061af31b464f8e,"TTML: Parse and use frameRate/Multiplier + tickRate
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126792535"
ojw28,2016-07-07 10:49:58,https://api.github.com/repos/google/ExoPlayer/git/commits/2426907f34510ebff1d9b918fab901d4737da1fa,2426907f34510ebff1d9b918fab901d4737da1fa,"Fix positioning issues with ttml regions.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126790829"
ojw28,2016-07-07 10:24:37,https://api.github.com/repos/google/ExoPlayer/git/commits/d3cd0c2ee45f3e12a053012d6f3f017c8984b850,d3cd0c2ee45f3e12a053012d6f3f017c8984b850,"Fix another broken link (by removal).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126789395"
AquilesCanta,2016-07-06 15:57:56,https://api.github.com/repos/google/ExoPlayer/git/commits/b523ff8d818bb0fe6caa4aa5256a03fea64a14f9,b523ff8d818bb0fe6caa4aa5256a03fea64a14f9,"Added javadoc to DefaultTrackSelectionPolicy methods

Also fixed language comparison using Locale's.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126703125"
ojw28,2016-07-06 13:47:29,https://api.github.com/repos/google/ExoPlayer/git/commits/19d65a7a9dcbbcbeed12a93e19f76aabbc2f0075,19d65a7a9dcbbcbeed12a93e19f76aabbc2f0075,"Report loading on/off changes via ExoPlayer.

Also attempt to clear up naming a little, using ""buffering"" to
mean the user visible buffering state, and ""loading"" to mean a
source being loaded.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126693592"
andrewlewis,2016-07-06 13:20:08,https://api.github.com/repos/google/ExoPlayer/git/commits/f4239eb571ab09eb515c27141d744a90d60f52b6,f4239eb571ab09eb515c27141d744a90d60f52b6,"Release Extractors when ExtractorSampleSource is released.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126691912"
ojw28,2016-07-06 10:22:52,https://api.github.com/repos/google/ExoPlayer/git/commits/660b26e3ad18c5d0be339c030b7255ec43835fcf,660b26e3ad18c5d0be339c030b7255ec43835fcf,"Make NetworkLock non-static and less specific.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126682871"
andrewlewis,2016-07-06 07:27:28,https://api.github.com/repos/google/ExoPlayer/git/commits/dd031691b0c9a8c97863d9e0dccec3b1dcb233ff,dd031691b0c9a8c97863d9e0dccec3b1dcb233ff,"Pass an ExtractorsFactory to ExtractorSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126672854"
ojw28,2016-07-05 18:53:27,https://api.github.com/repos/google/ExoPlayer/git/commits/06fd826a5c16f3ee8de4ba51a9281d3fde6ba1b5,06fd826a5c16f3ee8de4ba51a9281d3fde6ba1b5,"Restore injection of non-default retry count.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126646585"
ojw28,2016-07-14 10:52:34,https://api.github.com/repos/google/ExoPlayer/git/commits/49a93daf9e999df0a878be7e3c4f710e9a6ba104,49a93daf9e999df0a878be7e3c4f710e9a6ba104,"Restore HLS playback tests.

This fixes HlsChunkSource to allow selection of variants
other than the first one (as originally ordered in the
master playlist) in the case that the first one is
blacklisted. Having done this, the two disabled tests can
be restored.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126646547"
ojw28,2016-07-05 16:17:35,https://api.github.com/repos/google/ExoPlayer/git/commits/8db06a332f356be38372ae50f47343722fb08ed4,8db06a332f356be38372ae50f47343722fb08ed4,"Fix HlsTrackStreamWrapper chunk queue updating

Also fix possible repeat-preparation for HlsTrackStreamWrapper
and ExtractorSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126640380"
ojw28,2016-07-05 13:53:35,https://api.github.com/repos/google/ExoPlayer/git/commits/7b9e47ec6b9430c036504c65ccbc58780498b8fd,7b9e47ec6b9430c036504c65ccbc58780498b8fd,"Event based buffering.

At a high level, everything that we need to load in sync
with anything else now implements a new SequenceableLoader
class. This includes ChunkTrackStream, since multiple
demuxed tracks in DASH/SS need to be loaded in sync with
one another. At a higher level, SampleSources are also
SequenceableLoaders, which allows them to be kept in sync
by MultiSampleSource.

CompositeSequenceableLoader is able to load multiple
instances SequenceableLoaders in sync with one another,
and is used in various places where this is required.

This change also removes LoadControl registration, which
was complicated and error prone.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126632861"
andrewlewis,2016-07-05 13:25:21,https://api.github.com/repos/google/ExoPlayer/git/commits/7b673fe432d4871198a44399d1f1bdfe5d91c6b7,7b673fe432d4871198a44399d1f1bdfe5d91c6b7,"Fix miscellaneous consistency/formatting things.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126631393"
ojw28,2016-07-05 10:34:02,https://api.github.com/repos/google/ExoPlayer/git/commits/f0f25aef83a21446889706f9f4fb2648a997808e,f0f25aef83a21446889706f9f4fb2648a997808e,"Support playlists in exolist.json.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126622342"
AquilesCanta,2016-06-30 18:34:50,https://api.github.com/repos/google/ExoPlayer/git/commits/9f017d71ef96b02b7ea365221c254ad9ff633c5d,9f017d71ef96b02b7ea365221c254ad9ff633c5d,"Add HD content filtering to DefaultTrackSelectionPolicy
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126324788"
andrewlewis,2016-06-30 15:44:39,https://api.github.com/repos/google/ExoPlayer/git/commits/a476e090bcfd7dc79c6b40b08d3654fa994d03ac,a476e090bcfd7dc79c6b40b08d3654fa994d03ac,"Use getConstructor().newInstance() in ExtractorSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126306436"
andrewlewis,2016-06-30 10:41:46,https://api.github.com/repos/google/ExoPlayer/git/commits/2e77f02e7e4b558f976d9757873d0a4ad413826d,2e77f02e7e4b558f976d9757873d0a4ad413826d,"Remove non-standard color constant.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126286809"
andrewlewis,2016-06-29 16:55:09,https://api.github.com/repos/google/ExoPlayer/git/commits/33fc6126a7829a3356db9ec14f6bd485a0e058a8,33fc6126a7829a3356db9ec14f6bd485a0e058a8,"Improve track selection with renderers reading ahead (playlists #6)
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126202210"
ojw28,2016-06-29 15:54:23,https://api.github.com/repos/google/ExoPlayer/git/commits/bd3574dfbad4ca43d2dada7099ef0bf0fab67277,bd3574dfbad4ca43d2dada7099ef0bf0fab67277,"Allow SampleSourceProvider concatenation, simplify demo.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126196431"
ojw28,2016-06-29 14:28:59,https://api.github.com/repos/google/ExoPlayer/git/commits/5c2bb2a8520c4ad9dad978b884db4a330fe90d08,5c2bb2a8520c4ad9dad978b884db4a330fe90d08,"Use the correct format for init segments loads.

This is causing getTrackIndex to fail for live playbacks.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126189387"
ojw28,2016-06-29 10:45:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e33278436f5536df0e2eb2111245c4e7c42d0e18,e33278436f5536df0e2eb2111245c4e7c42d0e18,"Misc bugfixes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126175948"
ojw28,2016-06-29 09:55:31,https://api.github.com/repos/google/ExoPlayer/git/commits/ca81444f95437b754e6f807c85290f2a184fd4dc,ca81444f95437b754e6f807c85290f2a184fd4dc,"Event based preparation.

- Removes the load delay that was previously present after
  source preparation.
- Prevents premature failure in the case that the buffering
  source fails to prepare.
- SampleSource.Callback will get a second method in a
  subsequent CL, approximately meaning ""tell me if I can load
  more stuff"". This will remove the need for LoadControl and
  the complexity that comes with it.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126172573"
ojw28,2016-06-28 09:25:07,https://api.github.com/repos/google/ExoPlayer/git/commits/76f426e9440c7cd199161998aab58cd4e4f0214d,76f426e9440c7cd199161998aab58cd4e4f0214d,"Introduce a global buffering policy.

This is required for buffering to work properly across
playlist transitions. It's also much simpler, since
specifying the buffering policy becomes independent of
the type of media being played (i.e. the source).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126051755"
andrewlewis,2016-06-27 13:51:50,https://api.github.com/repos/google/ExoPlayer/git/commits/fdd90256f4fe2d595e5a403a7fea5b666aa92eba,fdd90256f4fe2d595e5a403a7fea5b666aa92eba,"Allow renderers to read ahead further than the next source.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125951381"
andrewlewis,2016-06-23 18:30:56,https://api.github.com/repos/google/ExoPlayer/git/commits/6031f89fe96e20bbf4107a299acd4c40b42856e7,6031f89fe96e20bbf4107a299acd4c40b42856e7,"Limit the maximum number of sources to buffer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125698923"
andrewlewis,2016-06-23 17:27:49,https://api.github.com/repos/google/ExoPlayer/git/commits/aa313f234d02ee8a3d25af46f70b629eb8eb30a7,aa313f234d02ee8a3d25af46f70b629eb8eb30a7,"Set TrackStreams to be final on renderers that will be disabled.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125691172"
ojw28,2016-06-23 16:27:20,https://api.github.com/repos/google/ExoPlayer/git/commits/494510d6adca2ac658ed96392ab0a6f397794682,494510d6adca2ac658ed96392ab0a6f397794682,"Fix ready and ended conditions.

1. The readiness of the timeline is only relevant if there
   aren't any enabled renderers. It's also only ready if
   the source after the playing source is actually prepared
   (if not, we're waiting for preparation).
2. Prevent early transition to the ENDED state when the
   playback position hits the duration, but we're not at the
   final entry in the playlist.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125685193"
ojw28,2016-06-23 15:27:55,https://api.github.com/repos/google/ExoPlayer/git/commits/a8883baa69ab4309985aa913fcd83c79bbdeed02,a8883baa69ab4309985aa913fcd83c79bbdeed02,"Start cleaning up buffering.

- Always continue loading if we've got less than the minimum
  amount of media in the buffer.
- Use LoadControl in ExtractorSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125679669"
ojw28,2016-06-23 14:50:58,https://api.github.com/repos/google/ExoPlayer/git/commits/5055a4aa9173aeae14114aee7fe7d4629d3430a0,5055a4aa9173aeae14114aee7fe7d4629d3430a0,"Some restructing to make ExoPlayerImplInternal clearer.

- Update playbackInfo duration/position/bufferedPosition in a
  single place.
- Remove sampleSource variable, and remove side effects from
  getSampleSource. There was actually a subtle bug where
  getSampleSource wasn't called by anything where no renderers
  where enabled (meaning the source never transitioned).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125676540"
ojw28,2016-06-23 13:31:10,https://api.github.com/repos/google/ExoPlayer/git/commits/8eb1f3f57c260d75d020f65f290d81a45106e32d,8eb1f3f57c260d75d020f65f290d81a45106e32d,"Remove resumeInternal from ExoPlayerImplInternal.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125670965"
ojw28,2016-06-23 13:18:20,https://api.github.com/repos/google/ExoPlayer/git/commits/291b210be37c79464005da851538a251aad6af70,291b210be37c79464005da851538a251aad6af70,"A source is fully buffered if it has no enabled tracks.

Also, getBufferedPosition shouldn't be called if no tracks
are selected.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125670213"
ojw28,2016-06-07 05:00:09,https://api.github.com/repos/google/ExoPlayer/git/commits/2746d59ea8cc26457a7e3fc1cdf69341d86867c1,2746d59ea8cc26457a7e3fc1cdf69341d86867c1,"Handle TrackStream transitions in isSourceReady.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125669080"
ojw28,2016-06-23 11:01:01,https://api.github.com/repos/google/ExoPlayer/git/commits/79cbd390ab8397419cef1966465c256eccc65f6b,79cbd390ab8397419cef1966465c256eccc65f6b,"bufferedPositionUs cannot be UNSET.

Also do some naming cleanup + do ms->us seek conversion
in ExoPlayerImpl, since that's where we now do all the
conversions coming out of the player.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125662973"
andrewlewis,2016-06-23 10:29:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e1d3c932fad86761141a4347c21f133c34098862,e1d3c932fad86761141a4347c21f133c34098862,"Only update track streams in updateTrackStreams.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125661172"
andrewlewis,2016-06-23 10:06:05,https://api.github.com/repos/google/ExoPlayer/git/commits/fc2cdef208b766991e35bbb3cbcde46babfdc9be,fc2cdef208b766991e35bbb3cbcde46babfdc9be,"Don't return a TrackStream from TrackRenderer.disable.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125659817"
erdemguven,2016-06-23 10:00:14,https://api.github.com/repos/google/ExoPlayer/git/commits/adc7ecec098386fb75e217eea0484888a19d2484,adc7ecec098386fb75e217eea0484888a19d2484,"Support MPEG-TS streams that start/end with an incomplete TS packet or lost sync.

Issue: #1332
Issue: #1101
Issue: #1083
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125659191"
AquilesCanta,2016-06-23 09:52:41,https://api.github.com/repos/google/ExoPlayer/git/commits/762ec41f954bf06f6327aecaa365e62e77b7a13d,762ec41f954bf06f6327aecaa365e62e77b7a13d,"Add support for HLS track selection flags
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125658752"
ojw28,2016-06-22 17:42:45,https://api.github.com/repos/google/ExoPlayer/git/commits/3e6c0ced829814a7a527da5853e92486eecc7ef7,3e6c0ced829814a7a527da5853e92486eecc7ef7,"A mini bit of Timeline simplification.

Pretty sure this does the same thing.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125581858"
ojw28,2016-06-22 17:26:37,https://api.github.com/repos/google/ExoPlayer/git/commits/5eca6694741869d8331dd15a32ffc9d9f991381f,5eca6694741869d8331dd15a32ffc9d9f991381f,"Move renderers into Timeline.

The outer class should only deal with the enabled renderers.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125579652"
andrewlewis,2016-06-22 17:21:07,https://api.github.com/repos/google/ExoPlayer/git/commits/2073f3fce374d2af5152550cd7228f0772c518d5,2073f3fce374d2af5152550cd7228f0772c518d5,"Expose source indices via ExoPlayer (playlists #5).

ExoPlayer.EventListener.onPositionDiscontinuity is notified during seeking and
transitioning from one source to the next.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125578976"
ojw28,2016-06-21 18:43:51,https://api.github.com/repos/google/ExoPlayer/git/commits/f9fa54cd5dd1c90da2ae1db95b78c4a4b222dd83,f9fa54cd5dd1c90da2ae1db95b78c4a4b222dd83,"Have seekTo return new position directly.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125476407"
AquilesCanta,2016-06-21 17:58:22,https://api.github.com/repos/google/ExoPlayer/git/commits/e71cdb1bad421bdec63572ab41f9a3da8de128d5,e71cdb1bad421bdec63572ab41f9a3da8de128d5,"Filter track support by profile and level

This CL only provides checks for HEVC codecs and adds codec information to Format
instances in DASH. Right now, we check that the supported profiles are advertised
individually and that the supported level is equal or higher than the requested codec
level.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125470489"
erdemguven,2016-06-21 15:38:11,https://api.github.com/repos/google/ExoPlayer/git/commits/0139f3f27699a777a56006adaf800374774b46da,0139f3f27699a777a56006adaf800374774b46da,"Remove unnecessary cloning.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125454697"
erdemguven,2016-06-21 13:40:10,https://api.github.com/repos/google/ExoPlayer/git/commits/6376f3a898652d88bbddd7c40c29e253807d0eaa,6376f3a898652d88bbddd7c40c29e253807d0eaa,"Upgrade gradle to benefit from instant run 'again'.

Now it needs to be 2.1.2 to support instant run.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125445366"
ojw28,2016-07-07 19:15:27,https://api.github.com/repos/google/ExoPlayer/git/commits/52c534215839ab0dde87d2369f37db3eaf2dfba8,52c534215839ab0dde87d2369f37db3eaf2dfba8,getBufferedPosition can't return unknown anymore
ojw28,2016-06-20 13:16:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4c434005d4be3dc3d9d114e75a2214e238f40e08,4c434005d4be3dc3d9d114e75a2214e238f40e08,"Remove/simplify some extractor tests.

We have our snazzy new file-based extractor tests now,
and the other ones have historically proven way more
hassle than they're worth (e.g. I spent a good few hours
once just trying to work out how to fix the Mp4 extractor
test, having established it was the test and not the
code that was broken!).

I think some more can go from the ogg package, but leaving
in place for now because it's a bit less clear what to
get rid of.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125330072"
erdemguven,2016-06-17 09:27:26,https://api.github.com/repos/google/ExoPlayer/git/commits/53cc88e2dce417422256807b7e1de163a10f78ca,53cc88e2dce417422256807b7e1de163a10f78ca,"DefaultOggSeeker small optimization.

skipToNextPage() isn't necessary anymore.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=125147444"
ojw28,2016-06-15 19:19:43,https://api.github.com/repos/google/ExoPlayer/git/commits/4fe6e5d7552804a826e92d55cce2e247399306af,4fe6e5d7552804a826e92d55cce2e247399306af,"Misc fixes for playback tests.

- AllowedVideoJoiningTimeMs must be set to 0 for tests so
  that tests which disable/enable video renderers don't
  register a large number of dropped frames.
- Fixed a threading issue that could cause occassional test
  failure.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124978843"
ojw28,2016-06-15 19:15:43,https://api.github.com/repos/google/ExoPlayer/git/commits/aab551e90704c6481e4448334d9440376ef03035,aab551e90704c6481e4448334d9440376ef03035,"Add HlsTest to V2.

The ones that are commented out are legitimately broken
and will need a library fix.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124978438"
ojw28,2016-06-15 19:01:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e9f9df8faa2abeab53431cc979ae6e3e6852bc60,e9f9df8faa2abeab53431cc979ae6e3e6852bc60,"Track selection UI needs to scroll.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124976833"
ojw28,2016-06-15 18:58:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ec4c7d3acf3fdd743a4b84ceeb09dd4d7d47dd29,ec4c7d3acf3fdd743a4b84ceeb09dd4d7d47dd29,"Remove Eclipse support. Simplify manifests.

It looks like the manifests are essentially pointless,
but various tools are unhappy if I delete them.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124976509"
andrewlewis,2016-06-15 14:30:57,https://api.github.com/repos/google/ExoPlayer/git/commits/66a5c96c5a3e2eb6b23d84cdf9c92f64d6faabc2,66a5c96c5a3e2eb6b23d84cdf9c92f64d6faabc2,"Calculate ExtractorSampleSource duration if unknown (playlists #4).

When buffering playlist items after the currently-playing one,
continueBuffering should take a position that is negative because the playback
position is before the start of the source being buffered. This change makes
sure that ExtractorSampleSources always have a known duration when they are
fully buffered, which means that the correct (negative) source-relative
position can be calculated.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124949409"
erdemguven,2016-06-15 09:22:30,https://api.github.com/repos/google/ExoPlayer/git/commits/e6267cd253fc8fa6571f636bfb06f716554f38fb,e6267cd253fc8fa6571f636bfb06f716554f38fb,"DefaultOggSeeker: use skipFully() instead skip().

skip() may skip less than what we want here.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124930478"
ojw28,2016-06-14 18:46:08,https://api.github.com/repos/google/ExoPlayer/git/commits/c45a3959b680efa316dd0861a0b3583a60ba7d8c,c45a3959b680efa316dd0861a0b3583a60ba7d8c,"Bump version to 1.5.9.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124864123"
andrewlewis,2016-06-14 17:00:31,https://api.github.com/repos/google/ExoPlayer/git/commits/365812e820603b2229064724ad751b80e59ba371,365812e820603b2229064724ad751b80e59ba371,"Remove FrameworkSampleSource.

ExtractorSampleSource covers almost all use cases (except for AMR, AVI and
legacy Widevine). The FLAC extension must be compiled for support for FLAC
extraction.

FrameworkSampleSource has device-specific issues, makes blocking calls to the
underlying MediaExtractor, and does not provide much control over buffering.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124850102"
andrewlewis,2016-06-14 14:45:45,https://api.github.com/repos/google/ExoPlayer/git/commits/a6b7cfb5e4ab1fd4f227d54fb8ff7f86e80f6a69,a6b7cfb5e4ab1fd4f227d54fb8ff7f86e80f6a69,"Close ParsingLoadable input streams that fail to open.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124836804"
ojw28,2016-06-14 14:44:05,https://api.github.com/repos/google/ExoPlayer/git/commits/bd248ffee577dbece6e817e94f920f5c1e8e39ab,bd248ffee577dbece6e817e94f920f5c1e8e39ab,"Ahem (fix bad constant value).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124836700"
erdemguven,2016-06-14 13:41:43,https://api.github.com/repos/google/ExoPlayer/git/commits/61df9aeb26b3722b6b22c98811a22494a6c0226a,61df9aeb26b3722b6b22c98811a22494a6c0226a,"DashChunkSource: Workaround for missing segment at the end of the period.

Issue: #836
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124832221"
ojw28,2016-06-14 13:25:23,https://api.github.com/repos/google/ExoPlayer/git/commits/266c0dce40bc1bdaf3888560945a18bcd3d84542,266c0dce40bc1bdaf3888560945a18bcd3d84542,"Add DashTest to V2
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124831095"
ojw28,2016-06-13 16:22:50,https://api.github.com/repos/google/ExoPlayer/git/commits/f4e4fd51c62bfaa96ffc67778a5932787e8c84bb,f4e4fd51c62bfaa96ffc67778a5932787e8c84bb,"Clean up chunked media source event listeners.

- Event listener is now at the SampleSource level, since the
  individual ChunkTrackStream instances are created internally.
- Event listener receives events corresponding to loads made
  at the SampleSource level (e.g. manifest fetches) in addition
  to those made by the ChunkTrackStream instances.
- Added ability for FormatEvaluators to propagate arbitrary
  information (as an Object) through to the listeners. This was
  a request from YouTube.
- Added significantly more information to each event, for example
  the DataSpec that defines the load being made is now passed, as
  is timing information.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124732984"
erdemguven,2016-06-13 14:31:01,https://api.github.com/repos/google/ExoPlayer/git/commits/172bc4e8d8ba3790a92233b022919b7efa156ab1,172bc4e8d8ba3790a92233b022919b7efa156ab1,"Increase mkv test sample file seek granularity to have better seek results.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124724113"
ojw28,2016-06-13 14:06:44,https://api.github.com/repos/google/ExoPlayer/git/commits/5cd7deffe7d29bec67bb2108c4181f2181aa6310,5cd7deffe7d29bec67bb2108c4181f2181aa6310,"Add playback tests to V2.

DashTest will be migrated separately, since it's a little
more work.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124722462"
ojw28,2016-06-13 13:47:22,https://api.github.com/repos/google/ExoPlayer/git/commits/0978227a846f1802526c3a3ef7d0f1783f926c88,0978227a846f1802526c3a3ef7d0f1783f926c88,"Create a new CodecCounters on enable

If the same instance is reset then rapidly re-enabling the
renderer after disabling it can prevent an application from
reading the final values at the time when the renderer was
disabled. Hence we now instantiate a new CodecCounters each
time. This is needed to migrate DashTest to V2.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124721106"
andrewlewis,2016-06-13 11:36:06,https://api.github.com/repos/google/ExoPlayer/git/commits/7ae9bf409bb10b5e84183d945754f527fcd0f216,7ae9bf409bb10b5e84183d945754f527fcd0f216,"Play a sequence of sources (playlists #3).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124713796"
ojw28,2016-06-13 11:10:30,https://api.github.com/repos/google/ExoPlayer/git/commits/df4e4a72fa3a5e19f8486a0e40f23934483663b6,df4e4a72fa3a5e19f8486a0e40f23934483663b6,"Print the name of the decoder we failed to query.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124712775"
andrewlewis,2016-06-13 09:07:13,https://api.github.com/repos/google/ExoPlayer/git/commits/189a2502c58e765ab238d58e830226657b87fe0e,189a2502c58e765ab238d58e830226657b87fe0e,"Fix order of arguments in Format.copyWithDrmInitData.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124705921"
andrewlewis,2016-06-10 14:27:20,https://api.github.com/repos/google/ExoPlayer/git/commits/2a3b4f67800329853c7db30a2ecfda85c3eb6b5e,2a3b4f67800329853c7db30a2ecfda85c3eb6b5e,"Don't flip() TextTrackRenderer EoS input buffers.

TextTrackRenderer would unconditionally flip input buffers read from its
source TrackStream, but the data could be null in the case where the buffer
signaled end of stream. Only flip if the corresponding flag is not set.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124559077"
erdemguven,2016-06-10 13:40:49,https://api.github.com/repos/google/ExoPlayer/git/commits/4279e221384579a096897eeb5269cfefe8dfdc54,4279e221384579a096897eeb5269cfefe8dfdc54,"TestUtil.assertOutput() also tests seeking.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124556278"
AquilesCanta,2016-06-10 11:45:40,https://api.github.com/repos/google/ExoPlayer/git/commits/461751b194fc81006a3b1582a2cbb519090f509e,461751b194fc81006a3b1582a2cbb519090f509e,"Add codec profiles for video container/sample formats.

This allows better decoding support checking.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124550351"
ojw28,2016-06-10 11:30:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ca9bd5e8e4665b2f72d91939a9db14b10bcecdea,ca9bd5e8e4665b2f72d91939a9db14b10bcecdea,"Define DATA_TYPE constants in C.

Things like manifests are loaded not in the context of a Chunk,
but we want to eventually be reporting all loading events. So
it makes senes to define data types at a global level.

Also added {@code} in a few places for consistency.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124549737"
erdemguven,2016-06-09 14:27:47,https://api.github.com/repos/google/ExoPlayer/git/commits/1afe480a30485d51872fd81e4265b94bcaae2067,1afe480a30485d51872fd81e4265b94bcaae2067,"FakeExtractorOutput: add option to write dump files to external storage.

So dump files can be created easily.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124455709"
erdemguven,2016-06-09 11:28:40,https://api.github.com/repos/google/ExoPlayer/git/commits/b206cff98c07ebee1aa375c4f112ef947d2d7ee1,b206cff98c07ebee1aa375c4f112ef947d2d7ee1,"FakeExtractorInput: Fix exception type

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124446331"
erdemguven,2016-06-08 16:07:05,https://api.github.com/repos/google/ExoPlayer/git/commits/4b3c72c057c64fd835562fe93c4aebaa0b5454be,4b3c72c057c64fd835562fe93c4aebaa0b5454be,"FlacExtractorTest
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124357946"
erdemguven,2016-06-08 15:38:14,https://api.github.com/repos/google/ExoPlayer/git/commits/544d88ca56ea5c0e2a73d8cea16c5c3d842c7058,544d88ca56ea5c0e2a73d8cea16c5c3d842c7058,"PsExtractorTest
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124355441"
erdemguven,2016-06-08 13:39:13,https://api.github.com/repos/google/ExoPlayer/git/commits/110c819939f99b80e23c2b4781ed46e37cfcebcc,110c819939f99b80e23c2b4781ed46e37cfcebcc,"FragmentedMp4ExtractorTest
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124346810"
ojw28,2016-06-08 13:01:58,https://api.github.com/repos/google/ExoPlayer/git/commits/4a3980c71ee422a4ead9e5d89ac158874f0d10cd,4a3980c71ee422a4ead9e5d89ac158874f0d10cd,"Add format change events to SimpleExoPlayer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124344637"
erdemguven,2016-06-08 10:14:51,https://api.github.com/repos/google/ExoPlayer/git/commits/80b10b5fc1b7f85909271eb3aae3d3844980aa8f,80b10b5fc1b7f85909271eb3aae3d3844980aa8f,"TestUtil.consumeTestData(): Make sure extractor doesn't use the position holder out of purpose.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124335837"
erdemguven,2016-06-08 10:11:53,https://api.github.com/repos/google/ExoPlayer/git/commits/98b7e7f4e20928f36396340e6763b4b4b0d94f92,98b7e7f4e20928f36396340e6763b4b4b0d94f92,"AdtsExtractorTest
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124335597"
erdemguven,2016-06-08 09:47:02,https://api.github.com/repos/google/ExoPlayer/git/commits/57d6c49e73065903417bb21484d5c4fbf7f737b6,57d6c49e73065903417bb21484d5c4fbf7f737b6,"TsExtractorTest: Speed up the test with a smaller test sample file.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124333753"
erdemguven,2016-06-08 09:28:40,https://api.github.com/repos/google/ExoPlayer/git/commits/b5a9e4181b1165824298c9e8a621da6a3f9a776b,b5a9e4181b1165824298c9e8a621da6a3f9a776b,"FlacJni: Add exceptions to jni methods' definitions.

These methods call read(...) method which may throw these exceptions.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124332828"
erdemguven,2016-06-07 14:30:34,https://api.github.com/repos/google/ExoPlayer/git/commits/cec658d573966fb21cb8cf57e393cebefdde0c8c,cec658d573966fb21cb8cf57e393cebefdde0c8c,"ExtractorInput.setRetryPosition(): Called when reading fails and the required retry position is different from the last position.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124242428"
ojw28,2016-06-07 09:33:20,https://api.github.com/repos/google/ExoPlayer/git/commits/1a1a454d09ace7fbf1e8f3f95cd0182a82b66b0e,1a1a454d09ace7fbf1e8f3f95cd0182a82b66b0e,"Remove stray break from HLS playlist parser.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124225444"
ojw28,2016-06-07 09:27:51,https://api.github.com/repos/google/ExoPlayer/git/commits/aa73e137d62705a1934b01dfcd483b412fa9704c,aa73e137d62705a1934b01dfcd483b412fa9704c,"Propagate manifest format info through to renderers.

DASH and SS manifests define potentially useful information
that isn't present in the actual media streams. Primarily
the representation id, but bitrate, fps and language may
also be defined only at the manifest leve. This change merges
the information into the sample format that's propagated to
the renderers.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124225175"
ojw28,2016-06-05 13:23:41,https://api.github.com/repos/google/ExoPlayer/git/commits/cb9a64da330e3c0cc5ac5ebc3f03a6bed089bcac,cb9a64da330e3c0cc5ac5ebc3f03a6bed089bcac,"Merge ID3 parsing improvements from GitHub.

- Parse APIC and TextInformation frames.
- In MPEG-TS, don't mind if packets contain end padding.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124079930"
ojw28,2016-06-03 22:05:23,https://api.github.com/repos/google/ExoPlayer/git/commits/444d21563c3d280d5c5435404b281a4521d5af26,444d21563c3d280d5c5435404b281a4521d5af26,"Fix MediaCodecUtil regression.

On older devices getCapabilitiesForType calls fail for some
secondary codecs. We didn't used to call getCapabilitiesForType
on secondary codecs, and so avoided this issue.

This change suppresses any exceptions encountered when
querying secondary decoders on API levels prior to N, to
restore previous behavior when a failure occurs.

Issue: #1534
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=124010242"
andrewlewis,2016-06-03 19:01:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e684e42994dd94a7b3a88d6367367feec65d61ea,e684e42994dd94a7b3a88d6367367feec65d61ea,"Clean up DefaultDataSources and add factory for okhttp DataSources.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123991352"
ojw28,2016-06-03 17:39:39,https://api.github.com/repos/google/ExoPlayer/git/commits/c622483f798ebc6e82fef8893d3848845de0ef24,c622483f798ebc6e82fef8893d3848845de0ef24,"Enable seamless rejoing for Vp9 extension.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123982330"
ojw28,2016-06-03 16:51:06,https://api.github.com/repos/google/ExoPlayer/git/commits/afa1ad1a6a7fbfe0ff5df6987de3292113527150,afa1ad1a6a7fbfe0ff5df6987de3292113527150,"Keep playback position advancing when all renderers are disabled.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123977520"
ojw28,2016-06-03 16:40:45,https://api.github.com/repos/google/ExoPlayer/git/commits/69bd31f7c2a6d060ac991d3ee218e0c4dad98767,69bd31f7c2a6d060ac991d3ee218e0c4dad98767,"Fix video renderer rejoining.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123976645"
andrewlewis,2016-06-03 16:16:59,https://api.github.com/repos/google/ExoPlayer/git/commits/a100175b72eddaa774d7c8ce7a3a6999394ae1bf,a100175b72eddaa774d7c8ce7a3a6999394ae1bf,"Rename TrackRenderer.reset to TrackRenderer.onReset.

This allows the TrackRenderer superclass to do things when the renderer is
reset, and makes resetting consistent with other 'events' on renderers.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123974633"
ojw28,2016-06-03 15:04:35,https://api.github.com/repos/google/ExoPlayer/git/commits/ff745ac444968591b93a559d691b1cd17ba7cc85,ff745ac444968591b93a559d691b1cd17ba7cc85,"Make ExtractorSampleSource constructor consistent.

The allocator and buffering policy (e.g. how large the buffer
is) is moving to the top level as part of playlist support,
so it no longer makes sense to inject these parameters as
args into ExtractorSampleSource's constructor.

Instantiating the allocator and buffer size inside of the
source is temporary and only until they're moved up.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123968976"
AquilesCanta,2016-06-03 14:02:19,https://api.github.com/repos/google/ExoPlayer/git/commits/6fd610fc5fa21ba79139da34202650c9be6d39d9,6fd610fc5fa21ba79139da34202650c9be6d39d9,"Added max video size selection to DefaultTrackSelectionPolicy.

It is possible to add use of this feature in the demo app, restricting the selected
tracks to the viewport size. But it should be added in a future CL.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123965232"
erdemguven,2016-06-03 13:52:55,https://api.github.com/repos/google/ExoPlayer/git/commits/ebd37cfb8e5e453468fc3ed79e24849657d3ff21,ebd37cfb8e5e453468fc3ed79e24849657d3ff21,"Moved testutils package to a seperate module so it can be accessed by the tests in other modules.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123964784"
AquilesCanta,2016-06-03 13:32:46,https://api.github.com/repos/google/ExoPlayer/git/commits/105ef1da2dea8ce71b118f4b6b6feac446518efe,105ef1da2dea8ce71b118f4b6b6feac446518efe,"Discard trailing ctts entries with 0 sample counts

The bug this cl fixes is basically an uncaught case of []

Issue: #1567
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123963779"
ojw28,2016-06-03 11:52:52,https://api.github.com/repos/google/ExoPlayer/git/commits/443a656ada46fe2c2c15d822d4f1b6c5edaff9ad,443a656ada46fe2c2c15d822d4f1b6c5edaff9ad,"Fix build.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123958609"
ojw28,2016-06-03 11:35:33,https://api.github.com/repos/google/ExoPlayer/git/commits/7ef028c67b657239810abe3200928070ec7319d0,7ef028c67b657239810abe3200928070ec7319d0,"Fix delivery of onLoadCanceled to occur before thread dies.

This removes ""message sent on dead thread"" warnings in nearly
all cases, and guarantees delivery of load cancelation to event
listeners.

Issue: #426
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123957691"
ojw28,2016-06-03 11:28:51,https://api.github.com/repos/google/ExoPlayer/git/commits/8e717e2dee7efe06580458b9ee455202fc1c8884,8e717e2dee7efe06580458b9ee455202fc1c8884,"Properly disable sample queues when not selected.

- The main goal of this change is to remove the need for
  discardSamplesForDisabledTracks() in continueBuffering
  in HlsTrackStreamWrapper and ExtractorSampleSource. As
  a result we'll also save one Allocation per disabled
  track.
- Another benefit of this change is that Allocator.trim
  calls can no longer be dropped. This could previously
  happen on player release if the playback thread's
  Looper quit before delivery of onLoadCanceled which
  performed the trim in the case that a load needed to be
  canceled at the time of the release.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123957434"
ojw28,2016-06-02 18:23:06,https://api.github.com/repos/google/ExoPlayer/git/commits/14cb76a112818237a23e29d081241df379b17286,14cb76a112818237a23e29d081241df379b17286,"Make ExoPlayer systrace consistent.

Plus remove some unused util methods + make a few
warnings go away.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123888046"
ojw28,2016-06-02 18:06:17,https://api.github.com/repos/google/ExoPlayer/git/commits/5cde3aa314ab689d62b51b37f401bb287dc8169f,5cde3aa314ab689d62b51b37f401bb287dc8169f,"Show toast if media contains only unplayable audio/video.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123885817"
ojw28,2016-01-07 08:33:57,https://api.github.com/repos/google/ExoPlayer/git/commits/00aef6ddb70c15a8b67f5dffc0d648d4945ffa1c,00aef6ddb70c15a8b67f5dffc0d648d4945ffa1c,"Always include extension renderers in SimplePlayer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123868547"
ojw28,2016-06-02 11:36:37,https://api.github.com/repos/google/ExoPlayer/git/commits/4888592c76be25d74378817451c1e7eba044ee54,4888592c76be25d74378817451c1e7eba044ee54,"Fix HLS track selection.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123851448"
erdemguven,2016-06-02 10:42:21,https://api.github.com/repos/google/ExoPlayer/git/commits/94fa2ecfe5edb3e7dfd7b07a03609b8f489b9287,94fa2ecfe5edb3e7dfd7b07a03609b8f489b9287,"WavExtractorTest and TsExtractorTest
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123848524"
ojw28,2016-06-02 10:28:05,https://api.github.com/repos/google/ExoPlayer/git/commits/ed19a582a7d390289e16a2c9403bf1242f865d71,ed19a582a7d390289e16a2c9403bf1242f865d71,"Suppress source release failures.

This is similar to suppression of failures disabling the
renderers (in the block above).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123847812"
andrewlewis,2016-06-02 10:21:52,https://api.github.com/repos/google/ExoPlayer/git/commits/0565d8e100e77cc48bcb6a54fae0c0d08b7aaa7a,0565d8e100e77cc48bcb6a54fae0c0d08b7aaa7a,"Handle non-AAC/AVC encrypted audio/video sample entries.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123847497"
erdemguven,2016-06-02 10:14:11,https://api.github.com/repos/google/ExoPlayer/git/commits/ecad3bb3967fe23a5e8a88bf7d65b6a9f746c249,ecad3bb3967fe23a5e8a88bf7d65b6a9f746c249,"MatroskaExtractorTest: removed unused local variables.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123847017"
erdemguven,2016-06-02 09:56:09,https://api.github.com/repos/google/ExoPlayer/git/commits/d99679a960e06ba828fa613c3f1aa3e7c97ffffe,d99679a960e06ba828fa613c3f1aa3e7c97ffffe,"flv, mkv and mp4 extractor sample tests.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123845660"
ojw28,2016-06-02 09:49:59,https://api.github.com/repos/google/ExoPlayer/git/commits/e652116806dfad861b52ed666e9f12fa755b4fd7,e652116806dfad861b52ed666e9f12fa755b4fd7,"Treat unchecking of all boxes as disabling, not default.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123845317"
ojw28,2016-06-01 11:51:32,https://api.github.com/repos/google/ExoPlayer/git/commits/eb021cabd186794f4a7e2fb69f19892e422af6ca,eb021cabd186794f4a7e2fb69f19892e422af6ca,"Small cleanup.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123739334"
ojw28,2016-06-01 10:26:45,https://api.github.com/repos/google/ExoPlayer/git/commits/53b50a61feb688a2e1b3455ada9dc44dc902c125,53b50a61feb688a2e1b3455ada9dc44dc902c125,"Use manifest load start time to dictate refresh period.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123734239"
ojw28,2016-06-01 10:07:37,https://api.github.com/repos/google/ExoPlayer/git/commits/7f70ee911b88565d59bf155b262be0b89312f8d2,7f70ee911b88565d59bf155b262be0b89312f8d2,"Clean up chunked Sample/Chunk sources.

- Remove need for SampleSources to ref ChunkSources.
- Correctly propagate errors loading manifests through
  ChunkSource components.
- Fix some misc warnings.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123732918"
erdemguven,2016-05-31 14:51:46,https://api.github.com/repos/google/ExoPlayer/git/commits/7aae5805b837eefab8835de6bd488132d69fb890,7aae5805b837eefab8835de6bd488132d69fb890,"Added Mp3ExtractorTest and modified Mp3Extractor to pass the test.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123640738"
erdemguven,2016-05-31 14:22:11,https://api.github.com/repos/google/ExoPlayer/git/commits/5a4d82c7c2fd5ceb7a78cc4af7227fcf69123e80,5a4d82c7c2fd5ceb7a78cc4af7227fcf69123e80,"TestUtil.assertOutput() uses ""*.unklen.dump"" file if only it exists and simulateUnknownLength is true.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123638992"
ojw28,2016-05-31 13:13:38,https://api.github.com/repos/google/ExoPlayer/git/commits/911d86bf2fc334396b8b801188b25f17d268438d,911d86bf2fc334396b8b801188b25f17d268438d,"Use Loader directly for manifest + utc timing loads.

Aside from deleting code, this change (a) adds retry
functionality for initial manifest fetches, (b) uses
the same loader for the utc timing fetch as for the
manifest.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123634812"
AquilesCanta,2016-05-31 08:52:49,https://api.github.com/repos/google/ExoPlayer/git/commits/b61b3ab011e0cdf3aed01c3b13b72c56457654a6,b61b3ab011e0cdf3aed01c3b13b72c56457654a6,"Fixed premature linebreak
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123620174"
erdemguven,2016-05-28 21:11:34,https://api.github.com/repos/google/ExoPlayer/git/commits/430985322decaa11330f84a684ab35b7de5d0c96,430985322decaa11330f84a684ab35b7de5d0c96,"TestUtil.assertOutput() uses ExtractorFactory to create a new instance of the Extractor for each combination of simulation parameters.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123506162"
ojw28,2016-05-27 16:36:40,https://api.github.com/repos/google/ExoPlayer/git/commits/8322592ee8959eb509badea2ad4d9ff4e244dd81,8322592ee8959eb509badea2ad4d9ff4e244dd81,"Fix flag issue causing corrupt output on DRM playbacks.

The issue is visible for DRM playbacks because
BUFFER_FLAG_ENCRYPTED is being cleared, which results
in trying to play encrypted samples without decryption.
The issue would have also incorrectly cleared key frame
flags too, for both clear and encrypted playbacks, but
I don't think we're using that flag downstream anywhere
and so the issue wasn't visible.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123426582"
AquilesCanta,2016-05-27 15:16:25,https://api.github.com/repos/google/ExoPlayer/git/commits/7bab9cabfb9fb7f882ff2578db7ce6b18719078c,7bab9cabfb9fb7f882ff2578db7ce6b18719078c,"Added support for video track selection

We allow 2 configurations: Forcing seamless adaptiveness and allowing
mixed mime types adaptation.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123420364"
ojw28,2016-05-27 14:26:22,https://api.github.com/repos/google/ExoPlayer/git/commits/8744e8dce9e1e78fd121334bd2e264a0cdcf01b2,8744e8dce9e1e78fd121334bd2e264a0cdcf01b2,"Refactor #6.HLS.4

Pull more logic up to HlsSampleSource. Somewhat regretfully,
this also backs out the optimization work done toward the
ref'd issue. I think that's one for another time perhaps...

Issue: #551
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123417413"
ojw28,2016-05-27 12:24:11,https://api.github.com/repos/google/ExoPlayer/git/commits/6d62962ab038d447404a86083a59a836e113f195,6d62962ab038d447404a86083a59a836e113f195,"Bump version to 2.0.0.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123410989"
erdemguven,2016-05-27 12:12:59,https://api.github.com/repos/google/ExoPlayer/git/commits/651237ac4f0cfa5506382e8f8ee5eda17355af0f,651237ac4f0cfa5506382e8f8ee5eda17355af0f,"Moved/renamed OggExtractorFileTests.parseFile(...) methods to TestUtil.assertOutput(...).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123410374"
ojw28,2016-05-27 12:11:14,https://api.github.com/repos/google/ExoPlayer/git/commits/800006d08d25651bdde2b19fec9b15a04797dca2,800006d08d25651bdde2b19fec9b15a04797dca2,"Remove TODOs that we have little urge to actually do.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123410274"
erdemguven,2016-05-27 11:12:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ccfb6beb3016c382f7aea27ffe2df5b8281ba345,ccfb6beb3016c382f7aea27ffe2df5b8281ba345,"FakeExtractorOutput dump() and assertEquals(..., String dumpFile) methods to facilitate extractor test writing.

Changed OggExtractorFileTests to use dump files.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123407516"
ojw28,2016-05-27 10:56:01,https://api.github.com/repos/google/ExoPlayer/git/commits/abc5c41ff4b54a5090104e7401f7cef04848f0cd,abc5c41ff4b54a5090104e7401f7cef04848f0cd,"Provide setPlaybackParams convenience method.

It's not a comprehensive solution for setting the
playback speed because (a) it doesn't apply when
audio is disabled, and (b) we do some timestamp
interpolation in a few places where we assume real
time. However in practice it works pretty well and
most apps probably don't allow disabling of audio,
so I think it makes sense to expose it.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123406605"
andrewlewis,2016-05-27 07:13:40,https://api.github.com/repos/google/ExoPlayer/git/commits/5cf7c2ecf41f245ba24e6a77970992423d904a00,5cf7c2ecf41f245ba24e6a77970992423d904a00,"Separate enabling/setting TrackStreams in renderers (playlists #1).

This is in preparation for changing the TrackStream while keeping the renderer
enabled, to give seamless transitions for playlists.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123394733"
erdemguven,2016-05-26 15:16:16,https://api.github.com/repos/google/ExoPlayer/git/commits/17f8ac8adf6a22a177040bd2dcc77efff7371d3d,17f8ac8adf6a22a177040bd2dcc77efff7371d3d,"Validate Extractor behavior when load position is reset to 0 following an error.

Added a new method TestUtil.consumeTestData() to emulate
the exact behaviour and modified OggExtractorFileTests to
use it. Rest of the test will be fixed in follow up CLs.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123320538"
andrewlewis,2016-05-26 13:13:04,https://api.github.com/repos/google/ExoPlayer/git/commits/c2b89d62859c67e4a589de1f6b6acfd605d5099f,c2b89d62859c67e4a589de1f6b6acfd605d5099f,"Add SampleSourceProvider as a factory for SampleSources (playlists #2).

Initially only the first source index is used. In a later change,
ExoPlayerImplInternal will create SampleSources for different playlist item
indices as necessary.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123312595"
ojw28,2016-05-26 12:43:04,https://api.github.com/repos/google/ExoPlayer/git/commits/c650ab64bca0a7a0636772b4b73d1130ccdb6266,c650ab64bca0a7a0636772b4b73d1130ccdb6266,"Less silly generics for Loader.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123310694"
ojw28,2016-05-26 11:00:31,https://api.github.com/repos/google/ExoPlayer/git/commits/1ea149a4d2e45523d95f46a60459602a12c9797f,1ea149a4d2e45523d95f46a60459602a12c9797f,"Refactor #6.HLS.3

- Pull loading of the initial manifest up to HlsSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123305312"
ojw28,2016-05-26 10:43:17,https://api.github.com/repos/google/ExoPlayer/git/commits/e74fc80aab1b1b24a4e775152613068d9500dc33,e74fc80aab1b1b24a4e775152613068d9500dc33,"Loader improvements.

This change moves generally useful functionality (load timing
and fatal error propagation) inside of Loader, so that callers
don't have to duplicate effort.

The change also makes use of generics so that the callback
receives a Loadable with a more specific type.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123304369"
ojw28,2016-05-26 10:09:16,https://api.github.com/repos/google/ExoPlayer/git/commits/db79f7989f928bb2f16dd153500663eb88813d06,db79f7989f928bb2f16dd153500663eb88813d06,"Fix a few warnings.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123302488"
ojw28,2016-05-25 17:36:34,https://api.github.com/repos/google/ExoPlayer/git/commits/10329eb1114301b6ec8d200ee7da30046fa75aa3,10329eb1114301b6ec8d200ee7da30046fa75aa3,"Allow delivery to multiple messages in a single message.

Where multiple messages are required to be sent in order
to perform a player reconfiguration, it will usually be
desirable to process all messages in a single ""transaction""
(i.e. without any rendering happening when only some of
the messages have been applied).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123228334"
ojw28,2016-05-25 16:21:23,https://api.github.com/repos/google/ExoPlayer/git/commits/ff7819e86a50d2187eda852381d2af3c478d27f5,ff7819e86a50d2187eda852381d2af3c478d27f5,"Delete another class from the demo app.

Merge the two MediaDrmCallback classes, since they're pretty
much identical.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123220343"
ojw28,2016-05-25 13:38:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f995509448ae2c194374d29fd1b45cbc6cfa1a5a,f995509448ae2c194374d29fd1b45cbc6cfa1a5a,"Give MSG constants different values.

This should be a no-op change, but it seems sensible to
have them not overlap.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123208140"
ojw28,2016-05-25 12:41:29,https://api.github.com/repos/google/ExoPlayer/git/commits/35d7dad047ce5f5f277be33ddec528b4b72c1455,35d7dad047ce5f5f277be33ddec528b4b72c1455,"Clean up SimpleExoPlayer.

- Simplify setSurface by always blocking when the surface
  is being cleared.
- Add analogous setVolume API.
- Support setting of playback params for extension audio
  decoders. We can probably use this to add a setPlaybackRate
  API to SimpleExoPlayer for API level 23 and above only,
  but we'd probably want to make sure it works properly when
  there's no audio track too, so some thought will be
  required.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123204581"
ojw28,2016-05-25 12:24:32,https://api.github.com/repos/google/ExoPlayer/git/commits/7d229003ad93382f2e783f6c7e3f2277bab5804d,7d229003ad93382f2e783f6c7e3f2277bab5804d,"Add flexibility to DrmSessionManager.

DrmSessionManager is now an actual manager. For each session
request it may return a shared session (as things work now,
and as is suitable for Widevine VOD) or a separate instance
(e.g. for PlayReady where audio and video are protected with
different keys).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123203664"
andrewlewis,2016-05-25 12:20:08,https://api.github.com/repos/google/ExoPlayer/git/commits/da2cfd601d225cf4acb838a08a994ef6d30b64c8,da2cfd601d225cf4acb838a08a994ef6d30b64c8,"Keep intermediate .so files inside the ffmpeg directory.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123203428"
ojw28,2016-05-25 10:49:23,https://api.github.com/repos/google/ExoPlayer/git/commits/c0cad7f396891e67810c87a9debafa0c7b82fcff,c0cad7f396891e67810c87a9debafa0c7b82fcff,"Load demo app samples from json.

Also handle .exolist.json links. This lets you put a list of
samples somewhere (e.g. on the web). Clicking it opens the
app and displays the samples it defines.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123198928"
erdemguven,2016-05-25 08:50:02,https://api.github.com/repos/google/ExoPlayer/git/commits/b6755c145e0f06360f7852a9b1f9ad67cec47533,b6755c145e0f06360f7852a9b1f9ad67cec47533,"DefaultOggSeeker loop fix.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123191416"
vigneshvg,2016-05-24 23:42:48,https://api.github.com/repos/google/ExoPlayer/git/commits/9609302b3d4e7272fe48752db5a79c5a06ef2354,9609302b3d4e7272fe48752db5a79c5a06ef2354,"Support VPx in ISO-BMFF (MP4) Container

Netflix created a spec to encapsulate VPx codecs in ISO-BMFF (MP4)
Container [1]. This CL adds support for VP8 and VP9 video codecs
in the MP4 container.

[1] https://github.com/Netflix/vp9-dash/blob/master/Downloads/VPCodecISOMediaFileFormatBinding.pdf
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123160650"
ojw28,2016-05-24 10:38:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ced7de15a9f5a0d3f9b550dd941b2f3b3f1678b8,ced7de15a9f5a0d3f9b550dd941b2f3b3f1678b8,"Promote DemoPlayer to library as SimpleExoPlayer.

DemoPlayer moves into core library as SimpleExoPlayer, which
implements ExoPlayer.

Issue: #383
Issue: #592
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=123090184"
ojw28,2016-05-23 12:08:37,https://api.github.com/repos/google/ExoPlayer/git/commits/075e095cbae80c3ef62f51ef24995db379358ce0,075e095cbae80c3ef62f51ef24995db379358ce0,"Assume AAC-LC (or HE-AAC) in MPEG-TS.

Issue: #774
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122987179"
AquilesCanta,2016-05-23 11:27:15,https://api.github.com/repos/google/ExoPlayer/git/commits/c539db68ca4c03a3f3907f5d3086b1b0ea53a74c,c539db68ca4c03a3f3907f5d3086b1b0ea53a74c,"Add first default track selection policies

With this CL:
* The first supported video track found is selected.
* The first supported audio track with preferred language is selected.
  If none, we fallback to the first supported one.
* For text, we only present a selection if one of the tracks has the
  preferred language and the track is flagged as forced.

TODO list:
* Add a selection policy for video (probably related with adaptiveness).
* We should decide what to do with the default flag.
* Perhaps, if no audio with the preferred language(assuming there is one)
  is found, we should fall back to a text track that has the preferred
  language.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122985006"
ojw28,2016-05-23 10:10:45,https://api.github.com/repos/google/ExoPlayer/git/commits/58953d370fd378b81102a2079f37e8c1350d1690,58953d370fd378b81102a2079f37e8c1350d1690,"Simplify DemoPlayer + misc surrounding components.

1. Properly split out listening responsibilities so that
   DemoPlayer only listens to its own components.
2. Revert StreamingDrmSessionManager UnsupportedDrmScheme
   exceptions back to how they worked in V1, and inject
   a DrmSessionManager rather than a MediaDrmCallback into
   DemoPlayer.

This much better prepares DemoPlayer for promotion into
the core ExoPlayer library, since it removes assumptions
such as what SampleSource and DrmSessionManager impls
might be used with it.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122980952"
andrewlewis,2016-05-23 09:32:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ddde6edb925f32cc0f126134ba6e072dfa7048e1,ddde6edb925f32cc0f126134ba6e072dfa7048e1,"Add FFmpeg extension.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122978403"
erdemguven,2016-05-23 09:31:15,https://api.github.com/repos/google/ExoPlayer/git/commits/9981a83c0512e5a29077d5df2f2b29911260dee1,9981a83c0512e5a29077d5df2f2b29911260dee1,"Fix Ogg/Flac sync exception.

Restores input position after flac block size read.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122978325"
erdemguven,2016-05-23 09:09:36,https://api.github.com/repos/google/ExoPlayer/git/commits/731d4283abf18acc9caa7d502998b9854022d522,731d4283abf18acc9caa7d502998b9854022d522,"Ogg/Opus and Ogg/Flac search seeking
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122977123"
ojw28,2016-05-19 17:16:44,https://api.github.com/repos/google/ExoPlayer/git/commits/7465db2a22b6fcfcc7a97716c8aa4f1c1236b5ad,7465db2a22b6fcfcc7a97716c8aa4f1c1236b5ad,"Merge ID3 parsing improvements from GitHub.

- Parse APIC and TextInformation frames.
- In MPEG-TS, don't mind if packets contain end padding.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122743786"
ojw28,2016-05-19 17:05:21,https://api.github.com/repos/google/ExoPlayer/git/commits/83b43a6fe620f9ce74066f6b06c35e134b07d094,83b43a6fe620f9ce74066f6b06c35e134b07d094,"Assume 360p 4:3 H264 is supported from JB.

Issue: #1534
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122742666"
andrewlewis,2016-05-19 14:42:47,https://api.github.com/repos/google/ExoPlayer/git/commits/fb3fdb34c7bf4f0f7a737f4af89c94953ccf96e2,fb3fdb34c7bf4f0f7a737f4af89c94953ccf96e2,"Send H.265 parameter sets in TSs to the decoder.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122730598"
andrewlewis,2016-05-19 14:33:50,https://api.github.com/repos/google/ExoPlayer/git/commits/7d9541848e8d46722a7cd6fc5e680425d4aa2927,7d9541848e8d46722a7cd6fc5e680425d4aa2927,"Rename mpdIntent to intent.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122730041"
ojw28,2016-05-19 11:19:00,https://api.github.com/repos/google/ExoPlayer/git/commits/7d4c786e2157328f82eed67273fd9003ea33c96f,7d4c786e2157328f82eed67273fd9003ea33c96f,"Make DRM work in ExoPlayer V2.

Bigger changes will be coming, but this gets DRM back
up and working again.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122719062"
AquilesCanta,2016-05-18 16:06:00,https://api.github.com/repos/google/ExoPlayer/git/commits/80f67d908af4b741e26cfe8190f5071be20eb7ef,80f67d908af4b741e26cfe8190f5071be20eb7ef,"Add flagDefault and flagForced support for Matroska
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122636596"
ojw28,2016-05-18 11:29:35,https://api.github.com/repos/google/ExoPlayer/git/commits/d43824710e09b1ee6e15af7a39b8bfbcaf76d994,d43824710e09b1ee6e15af7a39b8bfbcaf76d994,"Fix seeking with WAV files.

Previously, rounding down to the nearest frame wasn't
being done correctly; seeking could seek into a sample.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122618668"
ojw28,2016-05-18 09:29:52,https://api.github.com/repos/google/ExoPlayer/git/commits/362ea1d7255f71626b41287084048f98084be3ce,362ea1d7255f71626b41287084048f98084be3ce,"Update moe to include third_party jars.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122612016"
AquilesCanta,2016-05-17 20:47:47,https://api.github.com/repos/google/ExoPlayer/git/commits/fce17e7ffc399df66135e966f47c668414471aec,fce17e7ffc399df66135e966f47c668414471aec,"Added a trackSelectionFlags field to format.

This field will allow us to flexibly add information provided by the container
or streaming manifests related to the tracks that must be selected.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122559858"
ojw28,2016-05-17 13:49:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a16a333df2b99d2530363fb19c445ce8e6b834d3,a16a333df2b99d2530363fb19c445ce8e6b834d3,"Clean up renderer event listeners.

- Don't report errors to listeners if playback will immediately
  fail. Doing so is redundant, since such errors are immediately
  reported through ExoPlayer's listener as a result of playback
  failure. We were also reporting these errors inconsistently
  across renderers.
- Reduce code duplication through EventDispatcher classes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122519976"
ojw28,2016-05-17 11:33:06,https://api.github.com/repos/google/ExoPlayer/git/commits/bfee449ed8b6c2b138c74b4ee38588a3935045b2,bfee449ed8b6c2b138c74b4ee38588a3935045b2,"Fix FMP4 playback duration and absent tfdt handling.

- Parse duration from mehd box for FMP4.
- Handle absent tfdt boxes by accumulating decode time
  from one fragment to the next.

Issue: #1529
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122512416"
ojw28,2016-05-17 09:52:01,https://api.github.com/repos/google/ExoPlayer/git/commits/9e65693e91efb59b978108fb1939dacbfa576295,9e65693e91efb59b978108fb1939dacbfa576295,"Misc cleanup.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122506577"
ojw28,2016-05-16 20:46:34,https://api.github.com/repos/google/ExoPlayer/git/commits/a43144decf24b9df1e38a6f34feb011b53f1cdbb,a43144decf24b9df1e38a6f34feb011b53f1cdbb,"Don't require playback Looper to build DRM session manager.

This is required because in V2 we'll be instantiating DRM
session managers before the ExoPlayer instance (and hence
we wont have the Looper). This logic will be further cleaned
up in later CLs that overhaul DrmSessionManager in more
depth.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122453765"
andrewlewis,2016-05-16 16:55:40,https://api.github.com/repos/google/ExoPlayer/git/commits/537f193c8877f6f1ddf05f177968a311bc37d2e0,537f193c8877f6f1ddf05f177968a311bc37d2e0,"Improve precision of fragmented/unfragmented MP4 sniffing.

Search up to 4 KB for both fragmented and unfragmented files.

Detect files with an mvex box in their moov box as fragmented.

Fix reading of brands.

Issue: #1523
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122429548"
ojw28,2016-05-16 16:23:38,https://api.github.com/repos/google/ExoPlayer/git/commits/ecf50c4f9e54a4abf9ee541d9d7e8c7cc9ab3745,ecf50c4f9e54a4abf9ee541d9d7e8c7cc9ab3745,"Fix too-long TAG + remove unused methods.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122426685"
ojw28,2016-05-16 16:00:53,https://api.github.com/repos/google/ExoPlayer/git/commits/2e8e8aba9db9a30175b133e39012e73f70867e80,2e8e8aba9db9a30175b133e39012e73f70867e80,"Always inject loadable retry count.

Now [DASH/SS]SampleSource instances are creating ChunkTrackStream
instances dynamically, it makes sense to always require that the
min retry count be injected from that level. The SampleSource
implementations should also use the retry count when refreshing
the manifest.

The option to configure the retry count on the SampleSource classes
will arrive in a later CL.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122424774"
ojw28,2016-05-16 15:40:14,https://api.github.com/repos/google/ExoPlayer/git/commits/6977c8f455f3a608e1c3c0c9cd53c17d374e668a,6977c8f455f3a608e1c3c0c9cd53c17d374e668a,"Bit of naming/documentation cleanup.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122423250"
AquilesCanta,2016-05-16 15:24:58,https://api.github.com/repos/google/ExoPlayer/git/commits/2f4bfc3f5fd49e3a356180869a81751dd301a0c5,2f4bfc3f5fd49e3a356180869a81751dd301a0c5,"Add the TrackSelectionPolicy to decouple track ""assignment"" and selection

Allows the user to provide their own criteria for selecting one of the available tracks
without having to reimplement the track assignment logic, i.e. linking type x tracks with
type x renderer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122422087"
ojw28,2016-05-16 15:13:19,https://api.github.com/repos/google/ExoPlayer/git/commits/23769fe82e66eb32a626acea4c3e7f54be170d2b,23769fe82e66eb32a626acea4c3e7f54be170d2b,"Work around broken AAC decoder.

Issue: #1528
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122421357"
ojw28,2016-05-16 14:42:32,https://api.github.com/repos/google/ExoPlayer/git/commits/ebca7f9a212de04ba0c2e1bc14517ae628fdfcf2,ebca7f9a212de04ba0c2e1bc14517ae628fdfcf2,"Add missing issue template.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122419424"
ojw28,2016-05-16 14:20:01,https://api.github.com/repos/google/ExoPlayer/git/commits/ca49d6ff40fbe0a17367c30fc2da1dbf854b0243,ca49d6ff40fbe0a17367c30fc2da1dbf854b0243,"Refactor #6.HLS.2

Rename HlsSampleSource2 -> HlsSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122418334"
ojw28,2016-05-16 13:32:22,https://api.github.com/repos/google/ExoPlayer/git/commits/770f2c2c58157e2e5e311c60ecc8bba73ae75d3d,770f2c2c58157e2e5e311c60ecc8bba73ae75d3d,"Refactor #6.HLS.1

1. Merge HlsOutput and HlsSampleSource -> HlsTrackStreamWrapper.
2. Rename HlsSource -> HlsSampleSource2. This will be renamed to
   HlsSampleSource in a subsequent CL.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122415970"
andrewlewis,2016-05-16 12:13:24,https://api.github.com/repos/google/ExoPlayer/git/commits/51cf8bed2992b3e64d5158173d1ca74eee4a2581,51cf8bed2992b3e64d5158173d1ca74eee4a2581,"Fix UUID constant reference.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122412543"
ojw28,2016-05-16 11:10:21,https://api.github.com/repos/google/ExoPlayer/git/commits/d70f4a8fc7610d0758fb2b2590d13911b3e18ace,d70f4a8fc7610d0758fb2b2590d13911b3e18ace,"Update FMP4 samples.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122409929"
ojw28,2016-05-16 10:22:44,https://api.github.com/repos/google/ExoPlayer/git/commits/d689a8fdfd0f7162f857229aa6d80a0d7f7b5b7c,d689a8fdfd0f7162f857229aa6d80a0d7f7b5b7c,"Make Format implement Parcelable.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122407769"
ojw28,2016-05-13 14:47:40,https://api.github.com/repos/google/ExoPlayer/git/commits/efaea811941c009ed09ebd6556596e059afd7e9c,efaea811941c009ed09ebd6556596e059afd7e9c,"Use CodecCounters consistently in all renderers.

- Increment skippedBufferCount for VPX and ADTR.
- Set maxConsecutiveDroppedOutputBufferCount count for VPX.
  Tweak its meaning to ignore skipped frames.
- Remove outputFormat/outputBuffer changed counts. These add
  limited value. Also, MediaCodec is moving toward a model where
  you don't see the output buffers changing because you dequeue
  them one at a time (like how our extension decoders work).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122258530"
ojw28,2016-05-13 11:59:12,https://api.github.com/repos/google/ExoPlayer/git/commits/3760f514a9a4ab823b8416a1710bdd92993c2754,3760f514a9a4ab823b8416a1710bdd92993c2754,"Flesh out ExoPlayer extensions.

1. AudioDecoderTrackRenderer now reports decoder initialization
   and AudioTrack underruns.
2. AudioDecoderTrackRenderer can now render more than one output
   buffer per call to doSomeWork, to be consistent with
   MediaCodecAudioTrackRenderer. This may also prevent audio
   underruns in the case that audio is fragmented into many small
   buffers.
3. AudioDecoderTrackRenderer now has an overridable method that
   receives the audio session id, to be consistent with
   MediaCodecAudioTrackRenderer.
4. Fix unsafe event notification in LibvpxVideoTrackRenderer.
5. Vpx and AudioDecoder extensions now increment the CodecCounter
   inputBufferCount field correctly.
6. Decoders now have names :).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122250009"
ojw28,2016-05-13 11:04:13,https://api.github.com/repos/google/ExoPlayer/git/commits/97c633f128dce4f91132b317969fcf9269486981,97c633f128dce4f91132b317969fcf9269486981,"Advertise adaptive support in LibvpxVideoTrackRenderer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122247836"
andrewlewis,2016-05-13 10:58:23,https://api.github.com/repos/google/ExoPlayer/git/commits/7e58f4cd9dbc62aa3ebbbeed3e4414354ecf06cd,7e58f4cd9dbc62aa3ebbbeed3e4414354ecf06cd,"Allow AudioDecoderTrackRenderers to override their output formats.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122247516"
andrewlewis,2016-05-13 10:39:50,https://api.github.com/repos/google/ExoPlayer/git/commits/403f164b75e1298e9a7a103202e538ca019f3fd7,403f164b75e1298e9a7a103202e538ca019f3fd7,"Pass the sample Format to AudioDecoderTrackRenderer.createDecoder.

The FFmpeg extension can support various different MIME types, so pass the
whole format to configure the decoder.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122246589"
ojw28,2016-05-13 09:20:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ea8d0a7aef0749c3b4d3b1775ca41aad92bfc726,ea8d0a7aef0749c3b4d3b1775ca41aad92bfc726,"Move UUID constants to C, and make C an interface.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122242006"
ojw28,2016-05-12 15:27:36,https://api.github.com/repos/google/ExoPlayer/git/commits/b53a941ffdcbc0596acbc90fb6e0f273bc682ade,b53a941ffdcbc0596acbc90fb6e0f273bc682ade,"Fix crash (by calling correct DecoderInfo constructor).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122159478"
ojw28,2016-05-12 15:03:28,https://api.github.com/repos/google/ExoPlayer/git/commits/e29cb37403b7f100050fc0d155298171be884c9d,e29cb37403b7f100050fc0d155298171be884c9d,"Fix WavExtractor bug.

When skipToData is called the peek position is not equal
to the read position of the input. Hence peeking a chunk
header and then skipping by that amount wont do the right
thing :)!
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122157603"
ojw28,2016-05-12 15:02:27,https://api.github.com/repos/google/ExoPlayer/git/commits/9bfe62a5a55c4f396c90a2a8675c2d54f3a5856c,9bfe62a5a55c4f396c90a2a8675c2d54f3a5856c,"Support 32-bit WAV.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122157513"
ojw28,2016-05-12 15:01:36,https://api.github.com/repos/google/ExoPlayer/git/commits/7301b538290cccf1be73582e5c8376c8f6b90961,7301b538290cccf1be73582e5c8376c8f6b90961,"Add MediaCodecSelector.getPassthroughDecoderInfo.

Issue: #1518
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122157463"
andrewlewis,2016-05-12 14:59:23,https://api.github.com/repos/google/ExoPlayer/git/commits/180d10334a4735291f377ca92da08e420f9d1167,180d10334a4735291f377ca92da08e420f9d1167,"Add .cproject for FLAC Eclipse build.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122157285"
andrewlewis,2016-05-12 13:12:50,https://api.github.com/repos/google/ExoPlayer/git/commits/1dcd454477806d106cd627809b12702ae9c1e143,1dcd454477806d106cd627809b12702ae9c1e143,"Rename util.extensions package to extensions.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122151232"
ojw28,2016-05-12 11:38:03,https://api.github.com/repos/google/ExoPlayer/git/commits/68d39b51596b540d825ef633ac4091d5a32a063a,68d39b51596b540d825ef633ac4091d5a32a063a,"Remove DecoderInputBuffer.size
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122146105"
ojw28,2016-05-11 20:12:41,https://api.github.com/repos/google/ExoPlayer/git/commits/f9f95d638bbe23f7c9f584e7500a5d1f8c7c0feb,f9f95d638bbe23f7c9f584e7500a5d1f8c7c0feb,"Make ExtractorSampleSource amenable to proguarding.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122085277"
ojw28,2016-05-11 19:19:17,https://api.github.com/repos/google/ExoPlayer/git/commits/356288a0185dd96272f8cce6dbb45ec478a6d402,356288a0185dd96272f8cce6dbb45ec478a6d402,"Fix documentation.

- Merge guide.md updates from GitHub.
- Update Opus repository.
- Fix missing link in Opus README.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122080285"
ojw28,2016-05-11 19:17:01,https://api.github.com/repos/google/ExoPlayer/git/commits/af78ff849a868fbdbba1ecdc3c5b123840ff7d15,af78ff849a868fbdbba1ecdc3c5b123840ff7d15,"Add MediaCodecSelector.getPassthroughDecoderInfo.

Issue: #1518
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122080068"
andrewlewis,2016-05-11 17:11:07,https://api.github.com/repos/google/ExoPlayer/git/commits/7980e495a7e0d176e1bace5f2d3f706172f2167d,7980e495a7e0d176e1bace5f2d3f706172f2167d,"Remove an extra blank line in ExtractorSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122065476"
ojw28,2016-05-11 15:07:38,https://api.github.com/repos/google/ExoPlayer/git/commits/5ca9f62753dffb2fd389d6750cc38950cad7d1fa,5ca9f62753dffb2fd389d6750cc38950cad7d1fa,"Refactor #6.HLS.0

Mechanical step to create a new HlsSource in the library.
Note that naming is now confusing. This will be fixed in
the next CL, when:

HlsSource -> HlsSampleSource
HlsSampleSource+HlsOutput -> HlsOutput
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=122054800"
erdemguven,2016-05-10 16:55:14,https://api.github.com/repos/google/ExoPlayer/git/commits/9ee3030b791c907328fcfbc9a53d61b22ef33df3,9ee3030b791c907328fcfbc9a53d61b22ef33df3,"Opus initialization data should be in native order.

http://developer.android.com/reference/android/media/MediaCodec.html#CSD
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121957004"
ojw28,2016-05-10 15:40:40,https://api.github.com/repos/google/ExoPlayer/git/commits/58c0ab1779aab9c7a07e22d268f37c57aac7f44e,58c0ab1779aab9c7a07e22d268f37c57aac7f44e,"Broaden OMX.SEC.MP3.Decoder blacklisting.

Issue: #398
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121949973"
andrewlewis,2016-05-10 13:53:46,https://api.github.com/repos/google/ExoPlayer/git/commits/cba4d80277de3db06b0adf3f9c062a524f96ad26,cba4d80277de3db06b0adf3f9c062a524f96ad26,"Add extension renderers before library renderers.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121942162"
erdemguven,2016-05-10 13:39:09,https://api.github.com/repos/google/ExoPlayer/git/commits/19859eef96735c53304c7b357c80261c59e0b9f3,19859eef96735c53304c7b357c80261c59e0b9f3,"Upgrade gradle to version 2.1.0 to benefit from instant run.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121941168"
ojw28,2016-05-10 13:26:07,https://api.github.com/repos/google/ExoPlayer/git/commits/73c90ca0bcbf93418a505a5ca5d904d7b1ffa982,73c90ca0bcbf93418a505a5ca5d904d7b1ffa982,"Enable FF/RW using Fugu remote.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121940474"
erdemguven,2016-05-10 13:24:59,https://api.github.com/repos/google/ExoPlayer/git/commits/3674f9598e428ff2f0201d43479a141d439d1b48,3674f9598e428ff2f0201d43479a141d439d1b48,"ogg't'opus reader

Support for opus content in ogg container.
TODO: Sample duration and seeking.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121940392"
ojw28,2016-05-10 10:58:12,https://api.github.com/repos/google/ExoPlayer/git/commits/30ab3bef9a6f28829d1c1ef2a59fb08129f874e7,30ab3bef9a6f28829d1c1ef2a59fb08129f874e7,"Bump version to 1.5.8.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121931978"
ojw28,2016-05-10 09:33:15,https://api.github.com/repos/google/ExoPlayer/git/commits/b61e7cdbc42b5f8fb6f84eac26c2673f3cb0c279,b61e7cdbc42b5f8fb6f84eac26c2673f3cb0c279,"Support 8-bit and 24-bit PCM with re-sampling.

This is a cleaned up version of the pull request below,
which will be merged with this change then applied on top.

https://github.com/google/ExoPlayer/pull/1490

Issue: #1246
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121926682"
ojw28,2016-05-09 10:44:08,https://api.github.com/repos/google/ExoPlayer/git/commits/9f2707cfa326941cd4b1a9c184292a42113a068a,9f2707cfa326941cd4b1a9c184292a42113a068a,"Push DrmInitData into Format.

- This means DrmInitData is propagated through sample queues (i.e.
  is effectively attached to every sample, so we can see when it
  changes when reading from the queue).
- It also allows different DrmInitData per track, which is possible
  in muxed MKV/WebM, and per Representation for DASH, although we
  wont be able to seamlessly adapt in the latter case.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121821928"
ojw28,2016-05-06 17:15:33,https://api.github.com/repos/google/ExoPlayer/git/commits/e284d6166a471e8724997b42fcd8b98efc298f42,e284d6166a471e8724997b42fcd8b98efc298f42,"Remove AudioTrack API level 16 dependency.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121685491"
ojw28,2016-05-06 16:45:30,https://api.github.com/repos/google/ExoPlayer/git/commits/523f2662efb3d3b5cfe706368a0b6290c357c0c8,523f2662efb3d3b5cfe706368a0b6290c357c0c8,"Skip arbitrary chunks before WAV fmt chunk.

I've seen a sample that has a LIST chunk prior to fmt. It
seems best just to skip all chunks until the format is
located. As per the RIFF spec:

""Programs must expect (and ignore) any unknown chunks
encountered, as with all RIFF forms.""

https://www.aelius.com/njh/wavemetatools/doc/riffmci.pdf
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121682470"
ojw28,2016-05-06 16:44:42,https://api.github.com/repos/google/ExoPlayer/git/commits/99c0ba005aa78b2efbd99436f3a4061a0a891859,99c0ba005aa78b2efbd99436f3a4061a0a891859,"Add support for TTML Regions extent

This allows limiting the horizontal extension of the cues.
NOTE: So far, we only support percentages for size magnitudes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121682404"
erdemguven,2016-05-06 15:08:46,https://api.github.com/repos/google/ExoPlayer/git/commits/642b2009f32dad6237393de599b538db2882ddfd,642b2009f32dad6237393de599b538db2882ddfd,"Add extensions to v2 demo app.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121674924"
cdrolle,2016-05-06 10:10:03,https://api.github.com/repos/google/ExoPlayer/git/commits/cf0a31a7bb52d633f43e298df95732392390544e,cf0a31a7bb52d633f43e298df95732392390544e,"Fixed an NPE with self-initializing DASH segments.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121660680"
ojw28,2016-05-05 10:16:00,https://api.github.com/repos/google/ExoPlayer/git/commits/27132bb2da97d670cd9489d6d2dada2a9634026f,27132bb2da97d670cd9489d6d2dada2a9634026f,"Update MediaCodecUtil in V2.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121566154"
ojw28,2016-05-05 10:08:29,https://api.github.com/repos/google/ExoPlayer/git/commits/7f9888746878b8c7da714cb384553c2e2fb64f0e,7f9888746878b8c7da714cb384553c2e2fb64f0e,"Add support for rechunking fixed-sample-size data.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121565738"
ojw28,2016-05-05 09:58:12,https://api.github.com/repos/google/ExoPlayer/git/commits/1fea3fe3c077395777e98922ee67ff2e28818b0a,1fea3fe3c077395777e98922ee67ff2e28818b0a,"Add support for TTML regions.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121564959"
cdrolle,2016-05-04 21:23:51,https://api.github.com/repos/google/ExoPlayer/git/commits/d978398faf941405aafeb29cec92c02ebbdbf61c,d978398faf941405aafeb29cec92c02ebbdbf61c,"Added SubtitleParser interface (extending Decoder)

SubtitleParser includes a method updating the current
playback position for parsers that need to be aware
of the position in order to determine how to batch
captions (i.e. Eia608Parser).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121519712"
ojw28,2016-05-04 18:17:34,https://api.github.com/repos/google/ExoPlayer/git/commits/6e86cafce0915d8be726de3f6d08191b52957d52,6e86cafce0915d8be726de3f6d08191b52957d52,"Fix broken test.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121501144"
ojw28,2016-05-04 12:41:06,https://api.github.com/repos/google/ExoPlayer/git/commits/6e5ae4eddca8a364a1ba95544cc50b3412f2cad8,6e5ae4eddca8a364a1ba95544cc50b3412f2cad8,"Simplify DrmInitData.

- This moves to a single DrmInitData implementation that supports
  both specific and universal UUID matching. You can also do a
  combination of the two, which was not previously possible.
- The object model is simplified as a result. This is a precursor
  to a change where DrmInitData will be included directly in the
  Format to enable key rotation.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121472592"
erdemguven,2016-05-04 11:37:16,https://api.github.com/repos/google/ExoPlayer/git/commits/686816a610db27b95e42e05224e7010ce73979c2,686816a610db27b95e42e05224e7010ce73979c2,"Fix format constructor parameter order.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121468904"
AquilesCanta,2016-05-03 13:15:06,https://api.github.com/repos/google/ExoPlayer/git/commits/45a46c3e6eaa5c593cde1b230474c65255565cbb,45a46c3e6eaa5c593cde1b230474c65255565cbb,"Add getTrackType to allow track selection

In order to apply track type specific policies in
the track selection, we need to know the type of
the track renderer, this method returns one of the
constants defined in C.java of the form TRACK_TYPE_*
to allow renderer classification.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121369021"
ojw28,2016-05-03 11:09:40,https://api.github.com/repos/google/ExoPlayer/git/commits/6b9c43e578c9440a2f0af72f8aee6173760283b7,6b9c43e578c9440a2f0af72f8aee6173760283b7,"Avoid expensive equality checks in DefaultTrackOutput.

If the media format changes from one Format object to another
one that's is equal (but not the same object), readData would
end up performing an expensive equality evaluation on every
invocation.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121362300"
andrewlewis,2016-04-29 10:06:12,https://api.github.com/repos/google/ExoPlayer/git/commits/c2bd01a75654495c013bfb9cdb51142600bd035c,c2bd01a75654495c013bfb9cdb51142600bd035c,"Removed unused parameter.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121102072"
ojw28,2016-04-29 09:53:52,https://api.github.com/repos/google/ExoPlayer/git/commits/f0e6fff011e0395ace1892e4ff4400b4cc6a223a,f0e6fff011e0395ace1892e4ff4400b4cc6a223a,"Remove unused private constants.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121101188"
ojw28,2016-04-28 14:46:19,https://api.github.com/repos/google/ExoPlayer/git/commits/a1299ea7221154f278063853233f35d93de9b35d,a1299ea7221154f278063853233f35d93de9b35d,"Have DrmInitData classes implement hashCode/equals.

This will be required for key rotation to work, since
we'll need a way to determine whether or not the init
data has changed.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121018211"
andrewlewis,2016-04-28 12:44:10,https://api.github.com/repos/google/ExoPlayer/git/commits/9b57487845251256ab26bbec0db9f8795005210b,9b57487845251256ab26bbec0db9f8795005210b,"Handle gapless audio metadata in elst.

Only edit lists that truncate the first/last sample are supported, which is
sufficient to handle AAC encoder delay/padding.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121011278"
ojw28,2016-04-28 09:52:51,https://api.github.com/repos/google/ExoPlayer/git/commits/23cb9532c58b01035f2bc8c346bfa2b0b503703c,23cb9532c58b01035f2bc8c346bfa2b0b503703c,"Refactor #6.5: Restore DASH UTC timing element support.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121002218"
ojw28,2016-04-28 09:45:07,https://api.github.com/repos/google/ExoPlayer/git/commits/0841d043b8eaf737065c031fa72e35af3f9817c0,0841d043b8eaf737065c031fa72e35af3f9817c0,"Refactor #6.4: Create child source instances on demand.

Dash/SS SampleSources now instantiate ChunkSource and
ChunkSampleSource (renamed to ChunkTrackStream) instances
on demand as tracks are enabled. The TrackGroups exposed
by the DASH/SS SampleSources are now constructed at the
top level.

Note that this change resolves the TODOs at the top of the
ChunkSource classes, allowing multiple adaptation sets of
the same type.

Next steps will include:

- Bring back UTC timing element support for DASH, which
  will be an extra request during preparation in  the DASH
  SampleSource.
- Simplification of manifest fetching to use a Loader directly
  in the two top level SampleSource classes. ManifestFetcher
  should eventually go away once HLS no longer needs it.
- Eventually, some consolidation between DASH/SS. There's a
  lot of common code there now.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121001777"
ojw28,2016-04-28 09:37:43,https://api.github.com/repos/google/ExoPlayer/git/commits/d82bb3f65753e08600a96f7fdd2c5a1cd846ba5a,d82bb3f65753e08600a96f7fdd2c5a1cd846ba5a,"Refactor #6.3: Pull drm parsing up to SS SampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121001478"
ojw28,2016-04-28 09:34:06,https://api.github.com/repos/google/ExoPlayer/git/commits/eb3460b3aa8a198900f9604a9b038ae53ee19761,eb3460b3aa8a198900f9604a9b038ae53ee19761,"Refactor #6.2: Start to simplify components.

Parse the duration of the media directly from the manifest
in the DASH/SS SampleSource implementations.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121001296"
ojw28,2016-04-28 09:31:04,https://api.github.com/repos/google/ExoPlayer/git/commits/b38d0045533a97b668b3d6de922d6afe1e942ff6,b38d0045533a97b668b3d6de922d6afe1e942ff6,"Refactor #6.1: Pull up manifest requests.

This change pulls manifest refresh responsibility up to the
top level Dash/SS SampleSource implementations. In following
steps more of the manifest processing logic will be pulled
up (e.g. extracting track groups from the initial manifest),
which will allow ChunkSampleSource/ChunkSource instances to
be further simplified and created on demand.

I've avoided moving/renaming anything for now, so as to keep
it fairly easy to review.

Note that this change does the TODO related to releasing the
manifest fetchers.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121001139"
ojw28,2016-04-28 09:28:42,https://api.github.com/repos/google/ExoPlayer/git/commits/15a890c3cea91366195bc13d699c7796811542ff,15a890c3cea91366195bc13d699c7796811542ff,"Refactor #6.0: Add SampleSources for DASH and SS.

This is a mechanical change. The two new SampleSource classes
are forked from MultiSampleSource, with the logic that previously
was in the demo app's SourceBuilder methods copied into the
corresponding constructors. Subsequent steps will:

1. Pull the initial manifest processing from DashChunkSource and
SmoothStreamingChunkSource into the new SampleSource classes.
2. Remove the construction of ChunkSampleSource instances from
the constructors, instead instantiating children only as needed
when tracks are enabled.
3. Simplify ChunkSampleSource down into a ChunkTrackStream object.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=121001021"
cdrolle,2016-04-27 17:04:17,https://api.github.com/repos/google/ExoPlayer/git/commits/3d14c7242d3a3d260fb6734129d5aad94a21b0bd,3d14c7242d3a3d260fb6734129d5aad94a21b0bd,"Refactored Eia608Parser so that it manipulates the caption string builder directly, avoiding unnecessary object allocation.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120926283"
erdemguven,2016-04-27 10:53:26,https://api.github.com/repos/google/ExoPlayer/git/commits/ab3489efc1a8caf872058f390360bfd4c7d57b27,ab3489efc1a8caf872058f390360bfd4c7d57b27,"Remove unnecessary reset() method.

pageHeader.headerArray is only used in getNextSeekPosition()
in which populatePageHeader() resets them both at the beginning
anyway.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120902428"
ojw28,2016-04-26 16:52:52,https://api.github.com/repos/google/ExoPlayer/git/commits/784a18a188bb6e7258e6e952abf21d39abe66faf,784a18a188bb6e7258e6e952abf21d39abe66faf,"Use C constants as event source ids.

The construction currently in SourceBuilder will be
moving inside of the core lib, so it can't refer to
DemoPlayer constants.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120822759"
andrewlewis,2016-04-26 16:20:57,https://api.github.com/repos/google/ExoPlayer/git/commits/845d250442bdac155ec56014f9121be1ac349c61,845d250442bdac155ec56014f9121be1ac349c61,"Restore renderer.isEnded check when updating the playback position.

If rendererMediaClock is non-null, the rendererMediaClockSource is enabled or
started, so remove the check in updatePositionUs.

When disabling renderers for track selection, renderers with changing track
selections always transition from started -> enabled.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120819483"
ojw28,2016-04-26 16:00:43,https://api.github.com/repos/google/ExoPlayer/git/commits/e88eeba85985b0be1719760268ccaff3ba3941f5,e88eeba85985b0be1719760268ccaff3ba3941f5,"Fix compiler warnings.

- You can't link to a generic type (apparently).
- Suppress unchecked conversion warning.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120817601"
ojw28,2016-04-26 14:40:01,https://api.github.com/repos/google/ExoPlayer/git/commits/7313c26a56b85e810d6a69aa672c3eb51e0e3b97,7313c26a56b85e810d6a69aa672c3eb51e0e3b97,"Properly document processOutputBuffer.

Plus add processOutputBuffersChanged just for consistency
with processOutputBuffer and processOutputFormat.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120811608"
cdrolle,2016-04-25 22:38:02,https://api.github.com/repos/google/ExoPlayer/git/commits/0bd26b74b26141cf4e6007a1c426461e78c41589,0bd26b74b26141cf4e6007a1c426461e78c41589,"Remove Eia608TrackRenderer

Functionality is moved into Eia608Parser, so that Eia608Parser
can be used with TextTrackRenderer, similar to all the other
text/subtitle formats. Modified some of the other
text/subtitle-related classes to support the new behaviour.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120755145"
ojw28,2016-04-25 17:51:12,https://api.github.com/repos/google/ExoPlayer/git/commits/6c4523365354087419465ce0f1c29714ec387571,6c4523365354087419465ce0f1c29714ec387571,"Attempt to make drainOutputBuffer clearer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120722975"
AquilesCanta,2016-04-25 17:02:38,https://api.github.com/repos/google/ExoPlayer/git/commits/81383f802251251ba62ce5d0a51d2e535b7647ff,81383f802251251ba62ce5d0a51d2e535b7647ff,"Add full selector support to CSS in WebVTT

This CL allows near-complete support to CSS selectors (I say near because not every
CSS rule applies to WebVTT).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120717498"
ojw28,2016-04-25 16:25:21,https://api.github.com/repos/google/ExoPlayer/git/commits/5cbf75b619f3b3ab19ca30af383b10fdb98fd39e,5cbf75b619f3b3ab19ca30af383b10fdb98fd39e,"Make AudioTrack.handleBuffer more sane.

Now uses buffer position + limit in both new and legacy modes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120713837"
erdemguven,2016-04-25 12:53:11,https://api.github.com/repos/google/ExoPlayer/git/commits/d1eb43ad62b24b6a78227480f9faf020111d9bc6,d1eb43ad62b24b6a78227480f9faf020111d9bc6,"V2 Extension fixes
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120699171"
ojw28,2016-04-25 11:18:23,https://api.github.com/repos/google/ExoPlayer/git/commits/da5e4dbe921cdf1b9941189bc69027d02ab51b62,da5e4dbe921cdf1b9941189bc69027d02ab51b62,"Fix wrong-way-round-sign. Oops!
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120694784"
andrewlewis,2016-04-25 10:52:08,https://api.github.com/repos/google/ExoPlayer/git/commits/50f5616266bf36a67af9a60638b0aa1546a0f643,50f5616266bf36a67af9a60638b0aa1546a0f643,"Fix documentation and logging in LongArray.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120693278"
andrewlewis,2016-04-25 10:26:02,https://api.github.com/repos/google/ExoPlayer/git/commits/c60470339befb06bbb289db742bbc9143cda04c3,c60470339befb06bbb289db742bbc9143cda04c3,"Remove unused parameter from ChunkSource.continueBuffering.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120691990"
ojw28,2016-04-25 09:53:38,https://api.github.com/repos/google/ExoPlayer/git/commits/ab615682b5c61617e19c85a6f71073cfd230b222,ab615682b5c61617e19c85a6f71073cfd230b222,"Fix green screen problem when using VpxRenderer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120689946"
ojw28,2016-04-22 16:15:55,https://api.github.com/repos/google/ExoPlayer/git/commits/854acaa1ac8a0a42d318fed3e724b4fcec9057b8,854acaa1ac8a0a42d318fed3e724b4fcec9057b8,"Set decode only flag in DefaultTrackOutput.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120553402"
ojw28,2016-04-22 14:41:13,https://api.github.com/repos/google/ExoPlayer/git/commits/9a893e3003a0e1336d9ffc051a8524a11d79a5b4,9a893e3003a0e1336d9ffc051a8524a11d79a5b4,"Fix thread-safety issue using DefaultTrackOutput.

Reading the format and/or a sample needs to be done as a
single operation. Else you can have a situation where the
queue is initially empty, and this happens:

1) Read downstream format X
2) Read downstream format X (unchanged)
3) Write format Y
4) Write first sample
5) Read first sample

The first sample then appears to be format X rather than Y.

Note that readData in the SampleSource implementations always
looks roughly the same. readReset is identical in all cases.
isReady is identical in all cases now I've fixed them to be
that way. So it should be pretty easy to get DefaultTrackOutput
to implement TrackStream directly, at which point a whole load
of duplication will disappear.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120546377"
ojw28,2016-04-22 10:06:30,https://api.github.com/repos/google/ExoPlayer/git/commits/90b70818243bdd1a7758e50f08fcf445c6095d91,90b70818243bdd1a7758e50f08fcf445c6095d91,"Propagate resets at the source rather than track level.

- Code is simpler. We only ever reset all tracks.
- Allows the standalone media clock to be updated properly. This
  allows simpler recovery for live streams in ExtractorSampleSource.
- Fixes #1285 and paves the way for a fix for #758.

Issue: #1285
Issue: #758
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120530682"
ojw28,2016-04-22 10:02:05,https://api.github.com/repos/google/ExoPlayer/git/commits/2b13165738df01ff21bb323966def95d7f4e0001,2b13165738df01ff21bb323966def95d7f4e0001,"Optimize HLS seeking.

I think the concept of a sparse track might need formalizing
in Format at some point. We should probably do a similar thing
with sparse tracks in ExtractorSampleSource as well. WDYT?

Issue: #551
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120530195"
ojw28,2016-04-21 15:50:24,https://api.github.com/repos/google/ExoPlayer/git/commits/b1de997388a064d20200806523614f690dfe00b2,b1de997388a064d20200806523614f690dfe00b2,"Remove incorrect AudioTrack timestamp adjustment.

This is just wrong. I think there used to be an off-by-one
timestamp error in YouTube's fmp4 streams, and this code
was initially designed exclusively to play such streams. I
don't see this issue any more though, if it was ever there!
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120447694"
ojw28,2016-04-21 11:09:55,https://api.github.com/repos/google/ExoPlayer/git/commits/e390bdf98ce66a684d4ce656095bdbe4b43f553a,e390bdf98ce66a684d4ce656095bdbe4b43f553a,"Align Chunk/HLS sample sources.

Having moved HLS to use single sample queues per track, these
classes have become relatively similar. This CL aligns the two
to make this more obvious. It remains unclear whether it'll
ever be sensible to merge them; there are still some niggly
complications for HLS.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120429618"
AquilesCanta,2016-04-20 14:59:34,https://api.github.com/repos/google/ExoPlayer/git/commits/c11fda04e500166a5da9d5a0a338fffcb2400f4b,c11fda04e500166a5da9d5a0a338fffcb2400f4b,"Add CSS Specificity score system to WebvttCssStyle

This CL provides the necessary infrastructure to add styling by class. This was separated
into two different CLs to ease reviewing.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120336976"
ojw28,2016-04-20 14:44:47,https://api.github.com/repos/google/ExoPlayer/git/commits/0fc53f6e370f44e3e7bb34e3a793bc92c20cdd73,0fc53f6e370f44e3e7bb34e3a793bc92c20cdd73,"Fix Flac test + bring v2 fully in sync (I think!).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120335929"
ojw28,2016-04-20 14:19:11,https://api.github.com/repos/google/ExoPlayer/git/commits/6635dd0ef7fd461b5410b1b894bfcfd6e1db67a4,6635dd0ef7fd461b5410b1b894bfcfd6e1db67a4,"Fix infinite loop in AdtsExtractor sniffing malformed or non-ADTS streams.

Here is a WAV that exhibits this issue:
https://storage.googleapis.com/courtside-public/dcower/reaper_16bit_nonbwf.wav
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120334203"
ojw28,2016-04-20 14:18:18,https://api.github.com/repos/google/ExoPlayer/git/commits/157f5ff886225608801a8b70c93ae1b211a02f6d,157f5ff886225608801a8b70c93ae1b211a02f6d,"Workaround for issue #1443
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120334164"
ojw28,2016-04-20 14:17:33,https://api.github.com/repos/google/ExoPlayer/git/commits/8f2e56d59b0d1de098987aa393dbbdca43072e06,8f2e56d59b0d1de098987aa393dbbdca43072e06,"Add support for a bext chunk *before* the fmt chunk in WAV files.

This can occur in some Broadcast Wave Format (BWF) files, such as those
produced by the Zoom H2n. See the included sample for an example.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120334117"
ojw28,2016-04-20 14:16:12,https://api.github.com/repos/google/ExoPlayer/git/commits/b3f732cd05037d0e3827e31ee0ddbb038f1846ff,b3f732cd05037d0e3827e31ee0ddbb038f1846ff,"Fix parsing of QT sample desc version 2.

Also support ""lpcm"" and ""sowt"" sample descriptors.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120334017"
ojw28,2016-04-20 13:59:04,https://api.github.com/repos/google/ExoPlayer/git/commits/2a37b02ee2642c1e74084962d96d6ebc4a3b98e1,2a37b02ee2642c1e74084962d96d6ebc4a3b98e1,"Merge updates from GitHub.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120332794"
ojw28,2016-04-20 13:57:41,https://api.github.com/repos/google/ExoPlayer/git/commits/7638bea016cf1b7743128f42b96c7c8f00d5e292,7638bea016cf1b7743128f42b96c7c8f00d5e292,"Bring V2 ogg extractor up to date.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120332721"
andrewlewis,2016-04-20 13:43:06,https://api.github.com/repos/google/ExoPlayer/git/commits/6f32636f406d7b4c5ce122c3b9969dce2ac81e43,6f32636f406d7b4c5ce122c3b9969dce2ac81e43,"Use long instead of int for MP3 sample counter.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120331805"
ojw28,2016-04-20 12:09:37,https://api.github.com/repos/google/ExoPlayer/git/commits/2e0518f47bf745db327495d34443bd6e1c0be156,2e0518f47bf745db327495d34443bd6e1c0be156,"Apply Android studio code analysis suggestions.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120326293"
ojw28,2016-04-20 11:48:39,https://api.github.com/repos/google/ExoPlayer/git/commits/48bc98f1ed243798128f9ae3c08de548d27d2706,48bc98f1ed243798128f9ae3c08de548d27d2706,"Naming cleanup.

- RollingSampleBuffer -> DefaultTrackOutput
- TsChunk -> HlsMediaChunk
- Established hls.playlist package for HLS playlist things
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120325049"
ojw28,2016-04-19 17:07:26,https://api.github.com/repos/google/ExoPlayer/git/commits/69b431b8c2f0ba00d042b9d205e149eb294dfe79,69b431b8c2f0ba00d042b9d205e149eb294dfe79,"Stop using SparseArray where a regular array will do.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120240634"
ojw28,2016-04-19 17:04:53,https://api.github.com/repos/google/ExoPlayer/git/commits/b5bdbedfd5027aade9d2265744401d2f3f5870de,b5bdbedfd5027aade9d2265744401d2f3f5870de,"Move HLS to use a single RollingSampleBuffer per track.

Notes:
- RollingSampleBuffer will be renamed DefaultTrackOutput in a
  following CL, and variable naming will be sanitized.
- TsChunk will also be renamed to HlsMediaChunk, since it can
  be used for non-TS containers (e.g. MP3).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120240243"
erdemguven,2016-04-19 14:10:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a7d785947884af3addb8602b8d5aea79009595e0,a7d785947884af3addb8602b8d5aea79009595e0,"Shared super class for LibflacAudioTrackRenderer and LibopusAudioTrackRenderer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120225655"
ojw28,2016-04-19 08:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/a760c9bfd94c5e74a4c548b35ced86a0621e63bc,a760c9bfd94c5e74a4c548b35ced86a0621e63bc,"Use RollingSampleBuffer directly for non-HLS.

This also fixes the largest queued timestamp to be the
correct value if upstream samples are discarded.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120207054"
ojw28,2016-04-19 08:48:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5ce210e374ab4c0a078c9b3607c4d2b222e8043a,5ce210e374ab4c0a078c9b3607c4d2b222e8043a,"Propagate format information through RollingSampleBuffer.

At this point the only reason preventing the chunk package
from using RollingSampleBuffer directly, rather than
DefaultTrackOutput, is that the latter maintains the largest
parsed timestamp. This will be pushed inside the former in
the next CL. Following that, splicing logic will also be
pushed inside of RollingSampleBuffer, and HLS will be moved
over to using a single RollingSampleBuffer per track, with
the splicing done inline.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120206658"
andrewlewis,2016-04-18 15:30:51,https://api.github.com/repos/google/ExoPlayer/git/commits/febf86c54e93f72ee7f339d66e7b7e9375907a52,febf86c54e93f72ee7f339d66e7b7e9375907a52,"Clean up demo app source building.

- Rename preparePlayer to initializePlayer, to reflect the fact that the
preparing state is gone. Replace playerNeedsPrepare with playerNeedsSource.
- playWhenReady is now always true in calls to initializePlayer.
- Handle the intent just before setting the source.
- Use URIs consistently instead of Strings to avoid reparsing.
- onShown becomes initializePlayer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120125576"
ojw28,2016-04-18 15:03:52,https://api.github.com/repos/google/ExoPlayer/git/commits/4e0638ce06310f16a8ae1f0cfd6ebccd43dc113e,4e0638ce06310f16a8ae1f0cfd6ebccd43dc113e,"Remove unnecessary extension of DefaultTrackOutput.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120123489"
ojw28,2016-04-18 15:02:16,https://api.github.com/repos/google/ExoPlayer/git/commits/4451be929d6ebe000e883c4558369f042412d98f,4451be929d6ebe000e883c4558369f042412d98f,"Move sample offset application to RollingSampleBuffer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120123335"
ojw28,2016-04-18 15:00:20,https://api.github.com/repos/google/ExoPlayer/git/commits/ffb4aeaa8cd31066e832b6109cdb3043a3fa51e4,ffb4aeaa8cd31066e832b6109cdb3043a3fa51e4,"Remove pointless constructor argument.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120123223"
ojw28,2016-04-18 14:58:28,https://api.github.com/repos/google/ExoPlayer/git/commits/17d7a0cb4bb1396541eca2bfbc3bc14a6873a496,17d7a0cb4bb1396541eca2bfbc3bc14a6873a496,"Make RollingSampleBuffer implement TrackOutput

This is the first step toward merging of RollingSampleBuffer
and DefaultTrackOutput, which is a precursor to removing some
indirection for DASH/SS playbacks, and to moving HLS playbacks
to use a single output buffer per track (with inline splicing).

Where this is heading is that sample format changes will
eventually be attached to samples in the rolling buffer. This
will eliminate the need for piping sample formats around the
edges of the rolling buffer (e.g. via redirection in
ChunkExtractorWrapper and BaseMediaChunk.getSampleFormat).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120123093"
andrewlewis,2016-04-18 14:06:43,https://api.github.com/repos/google/ExoPlayer/git/commits/4161dc8d62dc1bb0e3ed5af41a36c53f5c12b32b,4161dc8d62dc1bb0e3ed5af41a36c53f5c12b32b,"Infer TYPE_SS for .isml.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120119973"
ojw28,2016-04-18 12:53:54,https://api.github.com/repos/google/ExoPlayer/git/commits/5e93c0b6e425706cf16cfdf7c55e6d6f60ecf0a4,5e93c0b6e425706cf16cfdf7c55e6d6f60ecf0a4,"Fix spurious comment.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120115490"
andrewlewis,2016-04-18 10:14:47,https://api.github.com/repos/google/ExoPlayer/git/commits/d7ac074088a25cbb8f8733e8b16ae9942887b011,d7ac074088a25cbb8f8733e8b16ae9942887b011,"Fix Android NDK links.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120107182"
ojw28,2016-04-18 10:11:00,https://api.github.com/repos/google/ExoPlayer/git/commits/fa04c713f6998fff1d1db0abee9a21b2dae5ac3d,fa04c713f6998fff1d1db0abee9a21b2dae5ac3d,"Discard all sample data for disabled tracks.

There's a more nuanced version of this where we actually
disable on the loading side, but it's quite tricky to get
the threading just right. I have a change that I'll
probably manage to clean up and send out at some point.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120106967"
ojw28,2016-04-18 09:42:10,https://api.github.com/repos/google/ExoPlayer/git/commits/1e4a3c162ec56dd0f71499fba9d089b5402a4d4b,1e4a3c162ec56dd0f71499fba9d089b5402a4d4b,"Remove setVideoScalingMode call that doesn't do anything.

Oops, forgot this from my previous CL!
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=120104992"
ojw28,2016-04-15 14:08:30,https://api.github.com/repos/google/ExoPlayer/git/commits/ed188d1bc872cd1860a309e4131876b0a7fa9a87,ed188d1bc872cd1860a309e4131876b0a7fa9a87,"Apply video scaling mode correctly.

Issue: #1428
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119952373"
ojw28,2016-04-15 11:43:26,https://api.github.com/repos/google/ExoPlayer/git/commits/c99250d9c51e8f258e78d0097be1a5cbbb39286a,c99250d9c51e8f258e78d0097be1a5cbbb39286a,"Constant simplification.

- Use same constant for unknown/unset microsecond times/durations.
- Change constant values to be nowhere near the ""normal"" range.
- Misc cleanup.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119944019"
ojw28,2016-04-14 15:32:26,https://api.github.com/repos/google/ExoPlayer/git/commits/28e926602fe4e92abf0a605dc1b070a8ba8e30cb,28e926602fe4e92abf0a605dc1b070a8ba8e30cb,"Remove layer of indirection when piping sample data.

For DASH + SS, sample data is currently plumbed through:

Extractor
->ChunkExtractorWrapper
->ContainerMediaChunk
->DefaultTrackOutput
->RollingSampleNBuffer

This change bypasses the ContainerMediaChunk layer. It
should be possible to completely delete DefaultTrackOutput
in the future, but such a change may well be tied to
changes in HLS format splicing + how we buffer (or don't
buffer) disabled tracks.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119853857"
ojw28,2016-04-14 12:50:54,https://api.github.com/repos/google/ExoPlayer/git/commits/628a209b9ba6cacc4f3ee4f52f6cf16ea0cfac75,628a209b9ba6cacc4f3ee4f52f6cf16ea0cfac75,"Add Eclipse projects for extension tests.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119843448"
AquilesCanta,2016-06-07 04:41:05,https://api.github.com/repos/google/ExoPlayer/git/commits/7ad34c5c5c3959c228bec9bcbe9fa43f43cfd3b1,7ad34c5c5c3959c228bec9bcbe9fa43f43cfd3b1,"Fix hashCode method for TrackSelection
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119842923"
ojw28,2016-04-14 12:39:50,https://api.github.com/repos/google/ExoPlayer/git/commits/d9dcc58dcac18b8d2558592b9913095cf09c28de,d9dcc58dcac18b8d2558592b9913095cf09c28de,"Simplify source building.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119842861"
andrewlewis,2016-04-14 11:20:22,https://api.github.com/repos/google/ExoPlayer/git/commits/e4ee19513ced62165e47211a6d558e3e8d951550,e4ee19513ced62165e47211a6d558e3e8d951550,"Remove ExoPlayer.STATE_PREPARING.

prepare(SampleSource) is renamed to setSource(SampleSource). The player
immediately transitions to STATE_BUFFERING when the source is set, at which
point doSomeWork is called.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119838825"
erdemguven,2016-04-13 17:20:57,https://api.github.com/repos/google/ExoPlayer/git/commits/2b0f2ec3bca58796bc4a698aabeb14ff66d56164,2b0f2ec3bca58796bc4a698aabeb14ff66d56164,"Add opus and flac tests to MOE
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119759105"
ojw28,2016-04-13 17:12:02,https://api.github.com/repos/google/ExoPlayer/git/commits/3ae1c615d96144a5e7f462b39248f9917ed700a0,3ae1c615d96144a5e7f462b39248f9917ed700a0,"LoadControl - Start cleaning up usage somewhat.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119758106"
ojw28,2016-04-13 16:16:45,https://api.github.com/repos/google/ExoPlayer/git/commits/fec7798005d54297ba902ebb809b1229aa5eeed8,fec7798005d54297ba902ebb809b1229aa5eeed8,"Remove dead code + simplify commitSample.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119752741"
erdemguven,2016-04-13 15:21:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ba7b1b7bf17bb7891f29529f3278292ced307258,ba7b1b7bf17bb7891f29529f3278292ced307258,"Copy vp9 extension v1 -> v2
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119748182"
AquilesCanta,2016-04-13 15:19:38,https://api.github.com/repos/google/ExoPlayer/git/commits/51df2dce46473ebd56f79225c3bb079e5bced7c5,51df2dce46473ebd56f79225c3bb079e5bced7c5,"Add support for voice selection in WebVTT CSS

Allow styling <v Someone>Hello</v> with ::cue(v[voice=""Someone""]) { ... }.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119748009"
andrewlewis,2016-04-13 14:13:38,https://api.github.com/repos/google/ExoPlayer/git/commits/e594eccd4d290a862e2f45e85677804d3ce39095,e594eccd4d290a862e2f45e85677804d3ce39095,"Merge SampleSourceTrackRenderer into TrackRenderer.

TrackRenderer and SampleSourceTrackRenderer both now use a TrackStream
so they can be merged.

(This may also be useful for adding playlist support, in case TrackStreams need
to be replaced during playback.)
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119743228"
AquilesCanta,2016-04-13 11:50:42,https://api.github.com/repos/google/ExoPlayer/git/commits/c2beffc6c56b12cc8fe7b1e2aee06aa623b7afd9,c2beffc6c56b12cc8fe7b1e2aee06aa623b7afd9,"WebVTT CSS Styling -- Support for element selectors

This CL allows style blocks to reference elements. For example: we could style
a cue with text ""Sometimes <b>bold</b> is not enough"" with the style block
::cue(b) { ... }.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119734779"
ojw28,2016-04-13 11:23:41,https://api.github.com/repos/google/ExoPlayer/git/commits/f963c626af7d785c45d755d4646e25b90c32bde6,f963c626af7d785c45d755d4646e25b90c32bde6,"Remove seeking to live edge.

This is in preparation for the player knowing about the live
window, at which point only correct playback positions will be
passed into ChunkSource implementations. Note that both
implementations bound the chunk index within range in case of,
for example, off-by-one errors caused by very recent manifest
updates.

This will temporarily cause live playbacks to always start at
the beginning of the current live window (we'll be trying to
play from t=0, which will be adjusted to the start of the live
window as a result of the bounding).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119733559"
ojw28,2016-04-13 11:16:49,https://api.github.com/repos/google/ExoPlayer/git/commits/730e4ac953b4628de0df03845d0b78e269471ae6,730e4ac953b4628de0df03845d0b78e269471ae6,"Remove workaround for FrameworkSampleSource.

FrameworkSampleSource will still be useful for audio, where
sample interleaving isn't an issue. We could optionally add
a ""don't wait for first frame"" boolean to the video renderer
if we *really* need to keep some form of this workaround in
place, but I'd rather not do so for now.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119733224"
ojw28,2016-04-13 11:11:47,https://api.github.com/repos/google/ExoPlayer/git/commits/35e0dd84017d0a50da24fa727b5f70e8d583a0e2,35e0dd84017d0a50da24fa727b5f70e8d583a0e2,"Use a single set of track type constants.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119732992"
andrewlewis,2016-04-13 10:38:37,https://api.github.com/repos/google/ExoPlayer/git/commits/72025d7ea5d274565fb6f7cba5101579f11a8a14,72025d7ea5d274565fb6f7cba5101579f11a8a14,"Add cd command to FLAC readme. Set executable bit in opus.

Also add jni/flac directory to .gitignore.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119730955"
ojw28,2016-04-12 17:57:27,https://api.github.com/repos/google/ExoPlayer/git/commits/956cbe4a0997c136061e99546b0aa06f1392a64e,956cbe4a0997c136061e99546b0aa06f1392a64e,"Delete Clock/FakeClock from V2 until we need them.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119655941"
erdemguven,2016-04-12 15:55:44,https://api.github.com/repos/google/ExoPlayer/git/commits/192f566a1bcbaae98bf0a4584a203c2463ba7137,192f566a1bcbaae98bf0a4584a203c2463ba7137,"Copy opus extension v1->v2
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119643009"
AquilesCanta,2016-04-12 14:02:45,https://api.github.com/repos/google/ExoPlayer/git/commits/767c7ab1692d13cafac7251bed44ccbd0d411c0f,767c7ab1692d13cafac7251bed44ccbd0d411c0f,"Fixed id referencing in WebVTT CSS styling

In CSS, ids are references using #. The absence of # references elements.

NOTE: If the id of a cue was ""1"", we support its reference with ::cue(#1).
In CSS, however, this is not valid, and the number should be escaped with
\3 as in ::cue(\31). We still do not use number escaping (and I doubt
whether we should at some point).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119634708"
AquilesCanta,2016-04-12 09:29:56,https://api.github.com/repos/google/ExoPlayer/git/commits/def59ebb2633f990979e02b327cc84a6cead8d43,def59ebb2633f990979e02b327cc84a6cead8d43,"Replaced full reference with import

This CL removes a warning by adding the import, and removes a qualified reference in the process.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119618343"
AquilesCanta,2016-04-11 17:54:31,https://api.github.com/repos/google/ExoPlayer/git/commits/efe76def895934e08f27ca31a87c803b8e7cdccb,efe76def895934e08f27ca31a87c803b8e7cdccb,"Add support to CSS in WebVTT files

This CL adds the support of CSS styling in Cues through id and ""universal"" cue selector.
The more sophisticated selectors will be left for later, because they requier a bit more
complex logic. Also narrowed a little bit the responsibilities of the WebvttCueParser to
move some to the WebvttParser.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119547731"
erdemguven,2016-04-11 17:27:27,https://api.github.com/repos/google/ExoPlayer/git/commits/087cf9546ff76f69efd0f900c08281d59515787e,087cf9546ff76f69efd0f900c08281d59515787e,"Copy main/extensions/flac -> experimental/extensions/flac
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119544516"
andrewlewis,2016-04-11 15:21:23,https://api.github.com/repos/google/ExoPlayer/git/commits/eb877f0cb7013ecd646899f84b2055ede971d853,eb877f0cb7013ecd646899f84b2055ede971d853,"Handle udta as a leaf atom.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119532634"
ojw28,2016-04-11 11:18:20,https://api.github.com/repos/google/ExoPlayer/git/commits/7170ff380c4570c9a3fc6f65e522b2ae182f28e6,7170ff380c4570c9a3fc6f65e522b2ae182f28e6,"Remove V1 DASH multi-period + seeking-in-window from V2.

Both of these features are being promoted to first class
citizens in V2 (multi-period support will be handled via
playlists, seeking-in-window will be handled by exposing
the window/timeline from the player and via the normal
seek API). For now, it's much easier to continue the
refactoring process with the features removed.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119518675"
ojw28,2016-04-06 22:52:39,https://api.github.com/repos/google/ExoPlayer/git/commits/ebc5f0e7beeecdcc424c806b044029e6050ee5d9,ebc5f0e7beeecdcc424c806b044029e6050ee5d9,"Update README/RELEASENOTES from main.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119211619"
ojw28,2016-04-06 18:21:19,https://api.github.com/repos/google/ExoPlayer/git/commits/e5d028c425578b2cb37fb0571b2b57f5134109f5,e5d028c425578b2cb37fb0571b2b57f5134109f5,"Merge https://github.com/google/ExoPlayer/pull/1397.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119182077"
ojw28,2016-04-06 18:12:28,https://api.github.com/repos/google/ExoPlayer/git/commits/92ac270ce57b16bdbc1bec8a7fc8fef4b4c0b147,92ac270ce57b16bdbc1bec8a7fc8fef4b4c0b147,"Return C constant rather than -1, as documented.

Note that the DataSourceInputStream read methods
are implementing a different interface (InputStream,
not DataSource), which is why -1 is still used in
that case.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119180851"
erdemguven,2016-04-06 10:32:27,https://api.github.com/repos/google/ExoPlayer/git/commits/05ef643e28e4b0a9d5acede9775803397d0786c4,05ef643e28e4b0a9d5acede9775803397d0786c4,"Copy from V1: Extractor.release() method releases all kept resources.

This method is needed by FlacExtractor to release native resources.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119143922"
ojw28,2016-04-05 14:59:25,https://api.github.com/repos/google/ExoPlayer/git/commits/7c35e38b4e284b5f5f5b094500a7da02f019a671,7c35e38b4e284b5f5f5b094500a7da02f019a671,"Fix a few issues with SmoothStreaming in V2.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119049397"
andrewlewis,2016-04-05 07:00:51,https://api.github.com/repos/google/ExoPlayer/git/commits/3c1239826c43afb85ee4155a7b8c809b34df8612,3c1239826c43afb85ee4155a7b8c809b34df8612,"Rename webm.WebmExtractor to mkv.MatroskaExtractor.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=119020538"
ojw28,2016-04-04 17:36:00,https://api.github.com/repos/google/ExoPlayer/git/commits/b977265f59bd4f4100fb9af28653d7c4b1860d1e,b977265f59bd4f4100fb9af28653d7c4b1860d1e,"Remove dead code.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118954433"
ojw28,2016-04-04 10:51:11,https://api.github.com/repos/google/ExoPlayer/git/commits/9282710f046ccd585dd5c3bb42e11236f733ac67,9282710f046ccd585dd5c3bb42e11236f733ac67,"Decouple next chunk evaluation and queue trimming.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118925372"
andrewlewis,2016-04-04 10:28:57,https://api.github.com/repos/google/ExoPlayer/git/commits/1581b915d3dcfbd037c45b629982a406a6ef5234,1581b915d3dcfbd037c45b629982a406a6ef5234,"Fix documentation super-nit.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118924198"
ojw28,2016-04-04 09:47:14,https://api.github.com/repos/google/ExoPlayer/git/commits/e9fcbafcb4d2fc668cb75484d6d2ecdd108e8f3c,e9fcbafcb4d2fc668cb75484d6d2ecdd108e8f3c,"Make OkHttp extension work in Eclipse/[].
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118921673"
andrewlewis,2016-04-01 14:33:59,https://api.github.com/repos/google/ExoPlayer/git/commits/3208e2067335c7de94eed2d69ca2da841c62bb05,3208e2067335c7de94eed2d69ca2da841c62bb05,"Add ParsableNalUnitBitArray which unescapes while reading.

This replaces calls to unescape except for SEI unescaping.

Use the new ParsableNalUnitBitArray for reading the slice header in HLS
access unit detection and slice_type reading.

Unescape the SPS before parsing in FLV and MP4. Before this change it was
parsed in its original (escaped) form.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118777869"
ojw28,2016-04-01 14:01:33,https://api.github.com/repos/google/ExoPlayer/git/commits/e4d815d164297b86152d393ad2e76577b2ff7a40,e4d815d164297b86152d393ad2e76577b2ff7a40,"Add OkHttp extension to V2.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118775995"
ojw28,2016-04-01 13:53:13,https://api.github.com/repos/google/ExoPlayer/git/commits/b041b72bae6c8051d7752ca43aacedd58bba2ac8,b041b72bae6c8051d7752ca43aacedd58bba2ac8,"Yet more simplifications.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118775612"
ojw28,2016-04-01 13:47:45,https://api.github.com/repos/google/ExoPlayer/git/commits/9c2a971109a417384582d87b7fc17a852a5cbb60,9c2a971109a417384582d87b7fc17a852a5cbb60,"Simple method re-ordering of SampleSource implementations.

The only change that's not re-ordering is to add a Util method
for usToMs to replace the ones in the HLS and Chunk sources.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118775359"
ojw28,2016-04-01 13:44:15,https://api.github.com/repos/google/ExoPlayer/git/commits/292b2402e610973dcc95b32850183678e17e0403,292b2402e610973dcc95b32850183678e17e0403,"More SampleSource simplification.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118775144"
ojw28,2016-04-01 13:38:35,https://api.github.com/repos/google/ExoPlayer/git/commits/a4d17282f12285a6a0c41f3193dddd5c21ac608e,a4d17282f12285a6a0c41f3193dddd5c21ac608e,"Have loader implement retry logic.

This was made possible by the simplification of how DASH/SS
chunk replacement works. It is also a step towards eliminating
continueBuffering(), since continueBuffering() calls are no
longer relied upon to resume a backed off load.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118774865"
ojw28,2016-04-01 13:34:29,https://api.github.com/repos/google/ExoPlayer/git/commits/d83b89cfd0bba53d7b5fa9f3c9d9f348f822497f,d83b89cfd0bba53d7b5fa9f3c9d9f348f822497f,"Minor documentation tweak.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118774671"
ojw28,2016-03-31 21:58:32,https://api.github.com/repos/google/ExoPlayer/git/commits/b0c8a6132db6ff0a5eb94586c159bf5db69aed66,b0c8a6132db6ff0a5eb94586c159bf5db69aed66,"Add DataSourceFactory + implementation.

Step 6 of the refactor involves moving the logic that's
currently in the SourceBuilder classes in the demo app
into new SampleSource classes in the library. These classes
will construct video/audio/text pipelines on-demand (i.e.
when tracks are enabled) rather than constructing them all
up front as is currently the case in the SourceBuilder
classes. Hence we need a way to instantiate DataSource
instances (i.e. a DataSourceFactory ;)).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118722180"
ojw28,2016-03-30 16:17:21,https://api.github.com/repos/google/ExoPlayer/git/commits/5f37e3c8fb71ff6f4ef8d7f00fe946c2e7f29a8d,5f37e3c8fb71ff6f4ef8d7f00fe946c2e7f29a8d,"Ensure we re-enter the correct state after seeking.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118579021"
ojw28,2016-03-30 15:07:36,https://api.github.com/repos/google/ExoPlayer/git/commits/3187bd082984664835884c3878baa7f9c9919eaa,3187bd082984664835884c3878baa7f9c9919eaa,"Align DASH/SS/HLS chunk replacement mechanisms.

DASH + SS previously had a ridiculously complicated chunk
replacement mechanism in resumeFromBackOff. It also didn't
allow replacement of the first media chunk in the queue,
even though it's possible to remove it in the case that no
corresponding samples have been consumed.

This CL moves DASH + SS to the simpler model used in the
HLS implementation, where the chunk source has a single
opportunity to cancel (and hence later replace) the chunk
when the load error occurs. With this change comes the
ability to replace the first media chunk in the queue in
all cases where it's possible to do so.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118573418"
ojw28,2016-03-30 10:15:51,https://api.github.com/repos/google/ExoPlayer/git/commits/d8e6b096c4b9eeaba2e49d8f28a5bf72bd8e6c0f,d8e6b096c4b9eeaba2e49d8f28a5bf72bd8e6c0f,"Refine fix for limbo state.

This fixes some nuances with the initial solution. Mainly,
that the TrackStreams returned by selectTrack could not be
used safely until after endTrackSelection was invoked. It
also reduces the need for member variables to track state
between the track selection methods.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118556651"
ojw28,2016-03-30 10:04:44,https://api.github.com/repos/google/ExoPlayer/git/commits/305d8aa0493425d9c1627f54754e21a588c9817e,305d8aa0493425d9c1627f54754e21a588c9817e,"Improve ExoCacheTest.

- Use FakeDataSource as the upstream source.
- Actually validate that caching is happening (i.e. reads happen
  on the upstream source only if the data hasn't been read through
  the CacheDataSource already).
- Move FakeClock to sit alongside the other Fake classes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118555903"
ojw28,2016-03-29 16:34:37,https://api.github.com/repos/google/ExoPlayer/git/commits/6cc507aac00d5561a71526420b016368658beb63,6cc507aac00d5561a71526420b016368658beb63,"Make all DataSource implementations implement getUri.

In V2 we'll at some point start using DataSource factories
for creating DataSource instances. If there are two DataSource
interfaces this gets unnecessarily awkward.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118470751"
ojw28,2016-03-29 13:30:52,https://api.github.com/repos/google/ExoPlayer/git/commits/d869a8d2fad0f1f427c56a0a1372d08d362d2a65,d869a8d2fad0f1f427c56a0a1372d08d362d2a65,"Fix networked WAV extraction (where # bytes read < # bytes requested).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118457489"
andrewlewis,2016-03-29 12:50:58,https://api.github.com/repos/google/ExoPlayer/git/commits/ce47d7be38efaf493a7360e2c9be33cc226bf8c7,ce47d7be38efaf493a7360e2c9be33cc226bf8c7,"Fix TextTrackRenderer.isEnded().
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118455206"
andrewlewis,2016-03-24 17:18:30,https://api.github.com/repos/google/ExoPlayer/git/commits/ce9b309aa150c8f9768a18c7a7fa26b064953e2d,ce9b309aa150c8f9768a18c7a7fa26b064953e2d,"Rename SampleHolder to DecoderInputBuffer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118040127"
ojw28,2016-03-24 16:39:05,https://api.github.com/repos/google/ExoPlayer/git/commits/98fb6d150db2b546c9cce7f9bb2bdbcd985878f4,98fb6d150db2b546c9cce7f9bb2bdbcd985878f4,"Tighten when various SampleSource methods can be called.

This removes the need for each SampleSource implementation to
implement 3x ""if(condition) {noop}"" tests (ChunkSampleSource
and SingleSampleSource were missing some of these checks).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118036233"
ojw28,2016-03-24 15:54:24,https://api.github.com/repos/google/ExoPlayer/git/commits/050b0b66da1ab9da5b01ac332451e88d06eba499,050b0b66da1ab9da5b01ac332451e88d06eba499,"Fix starting playback from t!=0
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118032818"
ojw28,2016-03-24 14:16:49,https://api.github.com/repos/google/ExoPlayer/git/commits/f09b86a1bb20bd6054abd38ad16972897e614952,f09b86a1bb20bd6054abd38ad16972897e614952,"Fix SampleSource limbo state - Part II

This change optimizes startup and track selection for HLS. Changes
in HlsChunkSource avoid unnecessary re-requests for media playlists.
Changes in HlsSampleSource optimize exit from the limbo state (i.e.
when endTrackSelection is first called).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118026962"
ojw28,2016-03-24 13:30:11,https://api.github.com/repos/google/ExoPlayer/git/commits/b3ce415e880fc9502f1334c1451a68cef0efb703,b3ce415e880fc9502f1334c1451a68cef0efb703,"Fix SampleSource limbo state by introducing explicit ""selecting tracks"" state.

1. SampleSource now has an explicit track selection state. This state is entered
   after the source is prepared, and also by calling startTrackSelection.
2. endTrackSelection commits selection changes, and is responsible for doing the
   right thing w.r.t starting/stopping/restarting load operations.
3. All sources now start or restart a load in the case of a new track selection.
   This fixes a problem where a source could be advanced by repeatedly disabling
   and re-enabling whilst paused. Some sources didn't restart a load in this case,
   since the position was unchanged, however the downstream renderer would then
   consume media up to the first keyframe in order to render something. Hence
   each disable/re-enable would advance by a keyframe.
4. This change will enable a subsequent change where we'll discard media for
   non-selected tracks earlier than we do currently (i.e. we'll hook the extractor
   to a dummy track output, so the samples will never be written to a rolling
   buffer). This will enable a further subsequent change where buffer contributions
   are per-renderer rather than per-source.

Issue: #1041
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118024436"
andrewlewis,2016-03-24 13:27:04,https://api.github.com/repos/google/ExoPlayer/git/commits/24b2c09287276945ded18de6b0a8bce27eca4bf8,24b2c09287276945ded18de6b0a8bce27eca4bf8,"Use longs rather than ints for HLS byterange.

Issue: #1387
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118024270"
ojw28,2016-03-24 13:01:19,https://api.github.com/repos/google/ExoPlayer/git/commits/454b3e896c37336f1a8d58426f07587abe2dc8ce,454b3e896c37336f1a8d58426f07587abe2dc8ce,"Make demo app ready for multi-window environment coming with N.

* Do not stop playback onPause but onStop in N and greater.
* Fix back navigation after app has been put to background.
* Make VIEW intent work when PlaybackActitivty is already launched.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118022964"
andrewlewis,2016-03-24 12:38:00,https://api.github.com/repos/google/ExoPlayer/git/commits/d5c80a31e8416a89315a18acedc64ecf0facebc2,d5c80a31e8416a89315a18acedc64ecf0facebc2,"Update list of ExoPlayer extractors in FrameworkSampleSource.java.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118021856"
ojw28,2016-03-24 12:32:10,https://api.github.com/repos/google/ExoPlayer/git/commits/1e78ee82cee2fc8e0eb4049bf1852c49a2d976f0,1e78ee82cee2fc8e0eb4049bf1852c49a2d976f0,"WAV extractor fixes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118021575"
ojw28,2016-03-24 12:30:47,https://api.github.com/repos/google/ExoPlayer/git/commits/0ee45550c98fb05bbe47e2df89a5e2dda93571c4,0ee45550c98fb05bbe47e2df89a5e2dda93571c4,"Use longs rather than ints for HLS byterange.

Issue #1387
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118021498"
ojw28,2016-03-24 12:29:51,https://api.github.com/repos/google/ExoPlayer/git/commits/b9d2224550455ecc8caf89a081c4762e56c6ad54,b9d2224550455ecc8caf89a081c4762e56c6ad54,"Treat streams claiming to be AAC Main as AAC LC.

Issue: #1383
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=118021452"
andrewlewis,2016-03-23 19:42:29,https://api.github.com/repos/google/ExoPlayer/git/commits/8571c81076f9c9a5cdccf42c4bff6ebd6108eb72,8571c81076f9c9a5cdccf42c4bff6ebd6108eb72,"Move resetting the peek position to ExtractorSampleSource.

This fixes an issue where the PsExtractor would start reading
unsynchronized if sniff was called.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117958077"
andrewlewis,2016-03-23 08:36:39,https://api.github.com/repos/google/ExoPlayer/git/commits/1175f50fb8370873fcbea113495ec9aea999d567,1175f50fb8370873fcbea113495ec9aea999d567,"Partially merge InputBuffer and SampleHolder.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117908518"
wuchangchang,2016-03-22 21:40:16,https://api.github.com/repos/google/ExoPlayer/git/commits/0d1ae1dd67f0efc849fc23cee732e5af1d5d79cd,0d1ae1dd67f0efc849fc23cee732e5af1d5d79cd,"Change the signature of onQueuedInputBuffer

Expose the input buffer for Exoplayer V2. This allows subclasses to
parse the input buffer before it is decoded. One particular usage
of this is to allow parsing user data stored in the tracks
(e.g. SEI in H264), and incorporate the user data into the rendering.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117865971"
andrewlewis,2016-03-22 12:17:22,https://api.github.com/repos/google/ExoPlayer/git/commits/8353463bf5befae815e5c584fdf0916d436ee5f2,8353463bf5befae815e5c584fdf0916d436ee5f2,"Detect sample boundaries in H.264 TSs without AUDs.

Issue: #1263
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117813106"
andrewlewis,2016-03-22 11:20:56,https://api.github.com/repos/google/ExoPlayer/git/commits/fc716b5711a16b96bd10955f942ea5159093b96b,fc716b5711a16b96bd10955f942ea5159093b96b,"Signal end of stream in SampleHolder flags.

Also use MediaCodec buffer flag constants instead of those on MediaExtractor.

This is in preparation for merging InputBuffer and SampleHolder.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117810136"
ojw28,2016-03-22 11:07:23,https://api.github.com/repos/google/ExoPlayer/git/commits/733f2ccd1cffa3f51c48dcfb47ad1aae309bae18,733f2ccd1cffa3f51c48dcfb47ad1aae309bae18,"Add WavExtractor for extracting samples from WAV files.

This version only supports 16-bit uncompressed PCM. A follow-up CL will
add support for other sample bit depths.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117809475"
ojw28,2016-03-22 11:01:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a49c8dc86d48baeb5214181e7a82d8b991a03630,a49c8dc86d48baeb5214181e7a82d8b991a03630,"Added loadErrorNotification to SingleSampleSource.

Also hooked up DemoPlayer to ExtractorSampleSource events.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117809051"
ojw28,2016-03-22 11:00:20,https://api.github.com/repos/google/ExoPlayer/git/commits/27ab1a2e65fc2485392a84975cb11e290ced2908,27ab1a2e65fc2485392a84975cb11e290ced2908,"Merge updates from GitHub.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117808998"
ojw28,2016-03-22 10:59:35,https://api.github.com/repos/google/ExoPlayer/git/commits/5b06bfd5a8b04df836e681706f50dd132a917e5b,5b06bfd5a8b04df836e681706f50dd132a917e5b,"Fixed TS+H262 playback when no pts is available

If this situation is encountered, we assume that the encoder has a good reason to
do this and use the last pts + frameDuration as new pts.

Issue: #1295
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117808961"
ojw28,2016-03-22 10:53:00,https://api.github.com/repos/google/ExoPlayer/git/commits/1ca5378cda8f888003d2e45809111efe14d8c3c8,1ca5378cda8f888003d2e45809111efe14d8c3c8,"Track input/output cleanup.

- Remove special DefaultTrackOutput.sampleData method, and have
  SingleSampleMediaChunk use the regular one instead.
- Make DummyTrackOutput behave correctly is allowEndOfInput is
  false.
- Simplify progress tracking in ExtractorSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117808659"
AquilesCanta,2016-03-21 16:45:08,https://api.github.com/repos/google/ExoPlayer/git/commits/60ba7823e0e28d3574d82c04d50a921e53763908,60ba7823e0e28d3574d82c04d50a921e53763908,"Add Css styles in the WebVTT parser

This is the first version and is still not linked to the WebVTT parser nor
does it support all the intended features, but it was left this way to
ease the review a little bit.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117722492"
ojw28,2016-03-21 15:39:23,https://api.github.com/repos/google/ExoPlayer/git/commits/e7a27245e7d8638778b8f5819e54d231d6a16f88,e7a27245e7d8638778b8f5819e54d231d6a16f88,"Use new-style for loops specifically for arrays.

As per: http://developer.android.com/training/articles/perf-tips.html
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117716743"
ojw28,2016-03-21 11:13:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2469f631ae6fe21df3794f676767023e5161f2b7,2469f631ae6fe21df3794f676767023e5161f2b7,"Restore SampleSource.disable API
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117701759"
cdrolle,2016-03-18 17:27:52,https://api.github.com/repos/google/ExoPlayer/git/commits/14c5114049569177d6ff0f1377e9b80d9bfd1844,14c5114049569177d6ff0f1377e9b80d9bfd1844,"Fixed issue in which unknown sample mime types would cause MediaPresentationDescription to throw an NPE.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117560114"
ojw28,2016-03-18 17:09:09,https://api.github.com/repos/google/ExoPlayer/git/commits/d870f378784583f3d995fc38f92b3258fc9abfa1,d870f378784583f3d995fc38f92b3258fc9abfa1,"Always use same Format objects during DASH live playbacks.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117558066"
ojw28,2016-03-18 17:08:09,https://api.github.com/repos/google/ExoPlayer/git/commits/4a38b2cade27af4a1e942fa17f598442a478ed69,4a38b2cade27af4a1e942fa17f598442a478ed69,"Fully reset state when displaying track selections.

When showing a track selection for a renderer, the override
variable could end up being retained from some previous call
to show a track selection for some other renderer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117557994"
ojw28,2016-03-18 14:20:44,https://api.github.com/repos/google/ExoPlayer/git/commits/03ed811c7caa8413e225c8a3f8f45873b78afeb3,03ed811c7caa8413e225c8a3f8f45873b78afeb3,"Add missing eclipse files to experimental.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117544932"
ojw28,2016-03-18 14:00:31,https://api.github.com/repos/google/ExoPlayer/git/commits/0dc0d703979d204433d3be63479c39c51451d56d,0dc0d703979d204433d3be63479c39c51451d56d,"Use SimpleDecoder for subtitles.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117543706"
ojw28,2016-03-17 12:48:54,https://api.github.com/repos/google/ExoPlayer/git/commits/ed4f83979e38a3f624f5ac08dc6ed460250e1920,ed4f83979e38a3f624f5ac08dc6ed460250e1920,"Add extensions package to V2.

- Not doing any renaming for now. It'll be easier to wait
  until after the extensions themselves are brought across.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117438338"
ojw28,2016-03-16 14:03:19,https://api.github.com/repos/google/ExoPlayer/git/commits/3c5a509af8c65ec06da6dcb700df6444a9ed274a,3c5a509af8c65ec06da6dcb700df6444a9ed274a,"Remove unused method.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117338990"
ojw28,2016-03-16 14:01:16,https://api.github.com/repos/google/ExoPlayer/git/commits/1eff6cf210940893afdf28d30251626f1dbc1552,1eff6cf210940893afdf28d30251626f1dbc1552,"Bring back multi-audio and VTT support for HLS.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117338865"
andrewlewis,2016-03-16 13:59:50,https://api.github.com/repos/google/ExoPlayer/git/commits/1d4305cb91d9e91269e55aeefe7fcd61d2be22ad,1d4305cb91d9e91269e55aeefe7fcd61d2be22ad,"Remove redundant modifiers in ExoPlayer.java.

Based on

http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.3
http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.5
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117338783"
ojw28,2016-03-16 10:34:28,https://api.github.com/repos/google/ExoPlayer/git/commits/16e1eaf4101f96ee4105124c9488b55bd7d19f94,16e1eaf4101f96ee4105124c9488b55bd7d19f94,"Removed VorbisUtilTests throws declarations to avoid warning
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117326253"
ojw28,2016-03-15 17:29:36,https://api.github.com/repos/google/ExoPlayer/git/commits/a067bd0965ea78f63ff41bbe9c50987ba92be3a5,a067bd0965ea78f63ff41bbe9c50987ba92be3a5,"Make OggVorbisExtractor seekable.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117252304"
ojw28,2016-03-15 17:27:27,https://api.github.com/repos/google/ExoPlayer/git/commits/4ffa3556dd60a7e423a97930484a308be60daac1,4ffa3556dd60a7e423a97930484a308be60daac1,"Fix parsing of expandable class size.

Issue #1351
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117252069"
ojw28,2016-03-15 17:25:04,https://api.github.com/repos/google/ExoPlayer/git/commits/378b76363d16a6cd313267671941670c1d5d5b1b,378b76363d16a6cd313267671941670c1d5d5b1b,"Support non-square pixels in MKV.

Issue: #1360
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117251799"
ojw28,2016-03-15 17:23:39,https://api.github.com/repos/google/ExoPlayer/git/commits/8b22333ee9785004b1b19f66bc4140859d6fca03,8b22333ee9785004b1b19f66bc4140859d6fca03,"Make default audio capabilities public + update extractor list.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117251647"
ojw28,2016-03-15 15:41:22,https://api.github.com/repos/google/ExoPlayer/git/commits/1ead229ac5098b256b5cfa1c5b672c8b437d3d1d,1ead229ac5098b256b5cfa1c5b672c8b437d3d1d,"Misc configuration updates for V2.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117242101"
ojw28,2016-03-15 15:39:17,https://api.github.com/repos/google/ExoPlayer/git/commits/9777945ce2ef84248738c24652aacb39a53b086a,9777945ce2ef84248738c24652aacb39a53b086a,"Fix the 0 sample count ctts entry bug

When the ctts contained an entry that had a 0-valued entry count, the
parser would miss every other entry, failing the final assertion.
The standard does not seem to prevent the value 0 in the sample_count
field, so we need to allow it.

Issue: #1326
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117241945"
ojw28,2016-03-15 15:37:31,https://api.github.com/repos/google/ExoPlayer/git/commits/f04e412a1c1b1f57a8921852ce6ed3d9fb08a263,f04e412a1c1b1f57a8921852ce6ed3d9fb08a263,"Improve unsupported edts handling

When the edited sample sequence does not contain any sync sample Exoplayer does not provide
support. This CL changes the ArrayIndexOutOfBoundsException for a more explicative
ParserException.

Issue: #1336
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117241805"
ojw28,2016-03-15 14:28:17,https://api.github.com/repos/google/ExoPlayer/git/commits/f5b7ea676d214818b100ec0cba0dfcc27f360a46,f5b7ea676d214818b100ec0cba0dfcc27f360a46,"Consider udta box as leaf

The MP4 standard considers the udta box as a regular container box. Quicktime, however,
considers it as a container (of only leaf atoms) that can have a terminating 32 bit
integer with value 0. Since this breaks the principle of not having content in container
boxes, this CL considers the udta box as a leaf box that contains other boxes and does
the parsing manually.

Issue: #1315
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117237255"
ojw28,2016-03-15 14:25:20,https://api.github.com/repos/google/ExoPlayer/git/commits/bbceb459fdb79ebc2b736834f222b4891cd73439,bbceb459fdb79ebc2b736834f222b4891cd73439,"Add loading error notification to ExtractorSampleSource
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117237109"
ojw28,2016-03-15 14:14:12,https://api.github.com/repos/google/ExoPlayer/git/commits/6fc8057146d362f193aa37f7c7ef258d08e60859,6fc8057146d362f193aa37f7c7ef258d08e60859,"Fix empty container box bug for fMP4 extractor

This fix derives from issue #1308, which came up in unfragmented mp4 files.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117236416"
ojw28,2016-03-15 14:13:02,https://api.github.com/repos/google/ExoPlayer/git/commits/eeddd6d8df21922909303c902b746e34d071fbb9,eeddd6d8df21922909303c902b746e34d071fbb9,"Allow multiple renderers with MediaClock as long as only one is enabled.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117236319"
ojw28,2016-03-15 14:11:48,https://api.github.com/repos/google/ExoPlayer/git/commits/d0fa6bdbcc8efa60ad73ea007621883c9490e424,d0fa6bdbcc8efa60ad73ea007621883c9490e424,"Fix handling of self initializing segments in DASH

The parsing of multiple moov boxes for a single ExtractorOutput incurred in
an assertion failure due to repeated track declarations. This CL makes each
new moov box replace any previous one. This change is transparent to the
client, no flags are provided to allow this feature.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117236246"
ojw28,2016-03-15 13:52:10,https://api.github.com/repos/google/ExoPlayer/git/commits/5f3fa3955b4dc4ef7b76033960ecebb691375e45,5f3fa3955b4dc4ef7b76033960ecebb691375e45,"Set default max input size for H.263 and MPEG-4 video.

The minimum compression ratio matches the Nexus 5X MPEG-4 video decoder.

Issue: #1290
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117234657"
ojw28,2016-03-15 13:47:35,https://api.github.com/repos/google/ExoPlayer/git/commits/9d5aa0f983a0eb5ca48aea77836b74298c7c2029,9d5aa0f983a0eb5ca48aea77836b74298c7c2029,"Fix the build.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117234408"
ojw28,2016-03-15 12:23:11,https://api.github.com/repos/google/ExoPlayer/git/commits/7208819018806425aff5b332ca76e21d890982c9,7208819018806425aff5b332ca76e21d890982c9,"Count input buffers.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117228451"
ojw28,2016-03-15 12:20:39,https://api.github.com/repos/google/ExoPlayer/git/commits/0135aaa12271b73597d15cca16db9650cb989b11,0135aaa12271b73597d15cca16db9650cb989b11,"Migrate ExoCache CacheSpan filenames from v1 to v2

V2 supports encoding special characters while on disk.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117228319"
ojw28,2016-03-15 12:18:44,https://api.github.com/repos/google/ExoPlayer/git/commits/1ca32cced885fda1679e2e8049d1ce136004eb1e,1ca32cced885fda1679e2e8049d1ce136004eb1e,"Fix empty container box bug

If a container box is empty, it is never removed
from the container box stack, breaking the extractor.

Issue: #1308
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117228211"
ojw28,2016-03-15 12:17:48,https://api.github.com/repos/google/ExoPlayer/git/commits/37e00c8c6f278009e236f4c8606fe2d9dcac1073,37e00c8c6f278009e236f4c8606fe2d9dcac1073,"Support multiplexed fMP4.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117228173"
ojw28,2016-03-15 12:00:29,https://api.github.com/repos/google/ExoPlayer/git/commits/c08c5b6f4c6ddab84a099c0e90b6f561e759af4e,c08c5b6f4c6ddab84a099c0e90b6f561e759af4e,"Increase gradle version to 2.10 and Android Plugin for Gradle to 1.5.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117226973"
ojw28,2016-03-15 11:59:33,https://api.github.com/repos/google/ExoPlayer/git/commits/d20ce3fa167427608312ce6bd8833338dddf6259,d20ce3fa167427608312ce6bd8833338dddf6259,"Added FLAC to the Webm list of known types.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117226935"
ojw28,2016-03-15 11:27:59,https://api.github.com/repos/google/ExoPlayer/git/commits/9a40a4c77da4d13bc2ea3796a13c2768fff4dcdb,9a40a4c77da4d13bc2ea3796a13c2768fff4dcdb,"Clean up enabled renderers + processing of resets.

- Made enabledRenderers an array to avoid loads of method calls.
- Made if so that enabled renderers are always called in a consistent
  order, rather than their order changing if they're enabled/disabled
  over time. This is likely to make performance more predictable.
- Split out reading of resets into a separate method. This method is
  now called directly after seeking on the source, so as to ensure
  instant propagation of the new position from source->renderers in
  the common case.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117225639"
ojw28,2016-03-15 11:23:54,https://api.github.com/repos/google/ExoPlayer/git/commits/9b467b7c1b3d90fcd5c5ecf0629e89b4972bdde1,9b467b7c1b3d90fcd5c5ecf0629e89b4972bdde1,"DASH: Ignore stream defined index if manifest defines one.

Issue: #1287
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117225449"
ojw28,2016-03-15 11:22:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ae2e8589788b2be64f594689d4562236c57821ad,ae2e8589788b2be64f594689d4562236c57821ad,"Fix incorrect playback speed of mono audio on MTK/JB devices.

Issue #801
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117225377"
ojw28,2016-03-15 11:06:30,https://api.github.com/repos/google/ExoPlayer/git/commits/8447781a44c7cc2b69a69e23ba5492f13f2ebe22,8447781a44c7cc2b69a69e23ba5492f13f2ebe22,"Add workaround to discard NAL units up to the first SPS.

Some devices fail to decode an avc3 stream that doesn't start with an SPS (for
example, if an access unit delimiter appears first). Workaround the issue by
discarding input sample data up to the first SPS on those devices.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117224602"
ojw28,2016-03-15 11:05:08,https://api.github.com/repos/google/ExoPlayer/git/commits/fb1d2d9ee8d6624839fe196509586dba02855743,fb1d2d9ee8d6624839fe196509586dba02855743,"Add hooks for timestamp checking in MediaCodecTrackRenderer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117224468"
ojw28,2016-03-15 11:03:15,https://api.github.com/repos/google/ExoPlayer/git/commits/26ad44248a387502861466c3765073ff17f12256,26ad44248a387502861466c3765073ff17f12256,"Fix a bug where ID3 data was read as sample data.

When reading unknown duration files with CBR seeking, the Mp3Extractor could
try to read sample data from 0. This happened because synchronization did not
skip over the ID3 data when it immediately found valid frames. When the invalid
sample data is read, the extractor tries to resynchronize from the next byte
(at offset 1), and this fails because the ID3 data at the start of the file is
longer than the synchronization search distance.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117224270"
ojw28,2016-03-15 11:02:33,https://api.github.com/repos/google/ExoPlayer/git/commits/d9d6b8540d143b2d9705cb1c64de7165618201c8,d9d6b8540d143b2d9705cb1c64de7165618201c8,"HLS: Ignore AAC/H264 streams if we know they don't exist.

This is needed to support fully demuxed audio in HLS. For the
sample I have the video (only) variant still declares an AAC
stream. I suspect there's at least one toolchain out there that
hardcodes H264 and AAC streams in TS output.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117224224"
ojw28,2016-03-15 11:01:18,https://api.github.com/repos/google/ExoPlayer/git/commits/9cfff0b0283d038976ed437bd656cdea197bb30c,9cfff0b0283d038976ed437bd656cdea197bb30c,"Merge cleaned version of https://github.com/google/ExoPlayer/pull/1234.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117224172"
ojw28,2016-03-15 10:58:57,https://api.github.com/repos/google/ExoPlayer/git/commits/99606f6e2e0dd67160666289e3302a0160d653f4,99606f6e2e0dd67160666289e3302a0160d653f4,"Allow equality assertions on FakeExtractorOutput.

The idea here is that you'll be able to feed data through an extractor
to a FakeExtractorOutput, then do the same again with some or all of the
simulated flakiness settings toggled on FakeExtractorInput, and then
assert that the output was the same in both cases.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117224019"
ojw28,2016-03-15 10:03:18,https://api.github.com/repos/google/ExoPlayer/git/commits/a1fc0a6b0079cf4ca27ce59a8f8618effb3c6e91,a1fc0a6b0079cf4ca27ce59a8f8618effb3c6e91,"Set max input size for H.265/HEVC.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220851"
ojw28,2016-03-15 10:01:49,https://api.github.com/repos/google/ExoPlayer/git/commits/b1c356fbab8d585565dbcb5adda4bf84116fee1b,b1c356fbab8d585565dbcb5adda4bf84116fee1b,"Simplify (i.e. remove) waiting for first sync frame.

The upstream source (or its stream) should always provide data
starting from a sync frame, so this logic shouldn't be necessary.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220759"
ojw28,2016-03-15 09:58:24,https://api.github.com/repos/google/ExoPlayer/git/commits/b37e9f698089d4412851cfcc3890a37849a6d186,b37e9f698089d4412851cfcc3890a37849a6d186,"For both alignment cue setting value and position cue setting alignment value,
allow ""center"".
This value (and not ""middle"") is listed in
https://w3c.github.io/webvtt/ ( WebVTT: The Web Video Text Tracks Format, Draft
Community Group Report, 21 December 2015).

Leaving the behavior for ""middle"" unchanged.
It was the value listed in older drafts, e.g.
https://www.w3.org/TR/2014/WD-webvtt1-20141113/ ( W3C First Public Working
Draft 13 November 2014 )
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220612"
ojw28,2016-03-15 09:56:39,https://api.github.com/repos/google/ExoPlayer/git/commits/16f57e3919c8f3a5b8fbc7913322c220ef377165,16f57e3919c8f3a5b8fbc7913322c220ef377165,"Ignore repeated control characters in EIA608 subtitles.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220536"
ojw28,2016-03-15 09:55:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a1c74cb259a9fa1fc8dcb8e6b87a998770ec9a7a,a1c74cb259a9fa1fc8dcb8e6b87a998770ec9a7a,"Give a calculation for H.264 level picture size limits.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220482"
ojw28,2016-03-15 09:53:48,https://api.github.com/repos/google/ExoPlayer/git/commits/5a6d1435ab635d327af8134ee32ddb4de1452109,5a6d1435ab635d327af8134ee32ddb4de1452109,"Fix overzealous ContentProtection filtering.

Failing to parse a UUID from a ContentProtection should only
result in filtering if there was actually a cenc:pssh element
there for us to get it from.

Issue: #1256
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220417"
ojw28,2016-03-15 09:52:36,https://api.github.com/repos/google/ExoPlayer/git/commits/7cddd1b1d9da31afa6c77ea84715212390a262fd,7cddd1b1d9da31afa6c77ea84715212390a262fd,"Move OGG extractor to use FakeExtractorInput + Simplify.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220360"
ojw28,2016-03-15 09:47:22,https://api.github.com/repos/google/ExoPlayer/git/commits/bccffb017d98f0306855ff11d38867220a708d33,bccffb017d98f0306855ff11d38867220a708d33,"Cleanup - Make PesReader classes static.

This avoids accessing PtsTimestampAdjuster through a thunk method,
and allows the PesReader classes to be static, which is nice in
general.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220139"
ojw28,2016-03-15 09:45:55,https://api.github.com/repos/google/ExoPlayer/git/commits/02a2d5f9329803ed4f1d229e8efb4efb2ad58cae,02a2d5f9329803ed4f1d229e8efb4efb2ad58cae,"Guidelines on filing issues + release notes update.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220082"
ojw28,2016-03-15 09:44:24,https://api.github.com/repos/google/ExoPlayer/git/commits/300b58e530a59f73fae7824102aad9d3a0e76411,300b58e530a59f73fae7824102aad9d3a0e76411,"Introduce FakeExtractorInput (based loosely on RecordableExtractorInput).

- Use it to simplify a bunch of tests.
- Will also replace RecordableExtractorInput in a subsequent CL.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117220030"
ojw28,2016-03-15 09:42:11,https://api.github.com/repos/google/ExoPlayer/git/commits/a1a48abe920ddc6d1bb2f720ec5aff9995f3bb21,a1a48abe920ddc6d1bb2f720ec5aff9995f3bb21,"Apply gapless playback metadata for MP3/MP4 playback using MediaCodec.

Issue: #497
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117219944"
ojw28,2016-03-15 09:40:05,https://api.github.com/repos/google/ExoPlayer/git/commits/ba88091c7b27b5271dc2bdae912500f7f17a6b2f,ba88091c7b27b5271dc2bdae912500f7f17a6b2f,"Added MPEG2-Program Stream extractor.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117219856"
ojw28,2016-03-14 18:49:55,https://api.github.com/repos/google/ExoPlayer/git/commits/2b4dcbef3fc94b2c3ec1614a34b7460b28dfdc46,2b4dcbef3fc94b2c3ec1614a34b7460b28dfdc46,"Fix parsing of version 1 pssh boxes, and ignore version 2+.

Issue: #1195
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117155301"
ojw28,2016-03-14 17:56:40,https://api.github.com/repos/google/ExoPlayer/git/commits/64d7f2f846af7b72d8742f86004780b566cdf420,64d7f2f846af7b72d8742f86004780b566cdf420,"Deduplicate functions for parsing hex strings.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117149421"
ojw28,2016-03-14 17:43:18,https://api.github.com/repos/google/ExoPlayer/git/commits/554817cca6f5fbfe450fb8c090f4e5d8b6b9c053,554817cca6f5fbfe450fb8c090f4e5d8b6b9c053,"Extract gapless playback data in MP4 files.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117148015"
ojw28,2016-03-14 16:41:10,https://api.github.com/repos/google/ExoPlayer/git/commits/2380857bf247f3d1f3d95144e74a2eb9fcbe4581,2380857bf247f3d1f3d95144e74a2eb9fcbe4581,"Clip the skip length in DefaultExtractorInput.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117141509"
ojw28,2016-03-14 16:39:59,https://api.github.com/repos/google/ExoPlayer/git/commits/a6ba84ade66879e3d020c7891c03e057335f034e,a6ba84ade66879e3d020c7891c03e057335f034e,"Update Mpd parser duration calculation.

Set the duration to the sum of the final period's start
+ duration (if available) if MPD@mediaPresentationDuration
isn't set in the manifest.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117141391"
ojw28,2016-03-14 15:49:12,https://api.github.com/repos/google/ExoPlayer/git/commits/61adcf98d263d2af044a7a520559e7f20a1174af,61adcf98d263d2af044a7a520559e7f20a1174af,"Fix issue seeking backward when using SingleSampleSource.

Issue: #1193
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117136800"
ojw28,2016-03-14 15:47:18,https://api.github.com/repos/google/ExoPlayer/git/commits/c98f7e83481173f67d0dbae1430d402c0d225124,c98f7e83481173f67d0dbae1430d402c0d225124,"Fixed the Mp4 embedded WebVTT playback

Issue: #1185
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117136646"
ojw28,2016-03-14 15:43:50,https://api.github.com/repos/google/ExoPlayer/git/commits/028ce2582c205d07b05ba7fef8da48aadcb006d6,028ce2582c205d07b05ba7fef8da48aadcb006d6,"Fix handling of extended ID3 tags in MPEG-TS/HLS.

Issue #1181
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117136370"
ojw28,2016-03-14 14:25:22,https://api.github.com/repos/google/ExoPlayer/git/commits/b76db7acd2d1fcc9bff529e2d915c3d5731e367a,b76db7acd2d1fcc9bff529e2d915c3d5731e367a,"Fix Javadoc typo.

Issue: #1235
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117131149"
ojw28,2016-03-14 14:22:35,https://api.github.com/repos/google/ExoPlayer/git/commits/c8d81abd5283ca4a86a94c362d7f040b14fd249d,c8d81abd5283ca4a86a94c362d7f040b14fd249d,"WebM extractor tests: Fix up byte/int conversions.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117131005"
ojw28,2016-03-14 14:11:49,https://api.github.com/repos/google/ExoPlayer/git/commits/9d732d8c27d0315ab9a4f0c40736874d23a9af86,9d732d8c27d0315ab9a4f0c40736874d23a9af86,"Robustness fixes for WebM extractor.

- readFully calls when reading a string or varint may have 0 length.
  The behavior of a 0 length read isn't well defined either at the
  ExtractorInput or DataSource level, particularly when the read may
  also coincide with EOS. We'll work on defining these cases properly
  going forward, but in the meantime this fix avoids attempting 0
  length reads.
- [Aside] UTF8 the is guaranteed default charset on Android.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117130356"
ojw28,2016-03-14 14:04:02,https://api.github.com/repos/google/ExoPlayer/git/commits/9f4e46bd3c905f667a8f0570b3466d61d85ccb1b,9f4e46bd3c905f667a8f0570b3466d61d85ccb1b,"Discard CSD buffers from the raw decoder in passthrough mode.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117129870"
ojw28,2016-03-14 13:59:03,https://api.github.com/repos/google/ExoPlayer/git/commits/835a9e9abed3f0b4fbb8ddb54bb4ad701621327f,835a9e9abed3f0b4fbb8ddb54bb4ad701621327f,"Use a separate MIME type for DTS Express.

DTS Express (which is DTS LBR according to http://www.mp4ra.org/codecs.html) is
not supported for passthrough playback currently. Associate a different MIME
type with it so that we don't try to use DTS passthrough for playing DTS
Express.

The MIME type for DTS Express is just vnd.dts.hd, with a profile parameter
indicating that it's DTS Express rather than one of the other formats.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117129583"
ojw28,2016-03-14 13:14:01,https://api.github.com/repos/google/ExoPlayer/git/commits/e116125c40437fd5c1cca1efa190cb624a8f26f4,e116125c40437fd5c1cca1efa190cb624a8f26f4,"DashChunkSource: Handle minor timing differences

Handle minor timing difference between the different media content
and the available range values as specified in the MPD.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117127112"
ojw28,2016-03-14 13:11:05,https://api.github.com/repos/google/ExoPlayer/git/commits/c2eb9d5598daf8ddc265a0917310502dfc56fd16,c2eb9d5598daf8ddc265a0917310502dfc56fd16,"Disable funky FRC on L on nVidia shield.

The logic in the platform was causing captions and the reported
playback position to gradually drift out of sync with respect to
audio and video.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117126970"
ojw28,2016-03-14 12:37:52,https://api.github.com/repos/google/ExoPlayer/git/commits/8ef4af135823a466e0319cd48c34fbd21d244a01,8ef4af135823a466e0319cd48c34fbd21d244a01,"Fix incorrect position calculation in VBRI seeker.

Issue: #1197
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117125081"
ojw28,2016-03-14 11:36:56,https://api.github.com/repos/google/ExoPlayer/git/commits/d3d63101d1b4266ae41c7341add5df33b23eec81,d3d63101d1b4266ae41c7341add5df33b23eec81,"[Refactor - Step #5] Introduce TrackSelector

Notes:

- The way this works is that every time the player needs to
  select some tracks it invokes the TrackSelector. When a
  track selection is actually activated (i.e. ""hits the
  screen"") it gets passed back to the TrackSelector, which
  allows it to expose the current tracks through an API that
  it may choose to define. Since playlist support doesn't exist
  yet, it's currently the case that the pass-back always occurs
  immediately.
- A TrackSelector can invalidate its previous selections if its
  selection criteria changes. This will force the player to invoke
  it again to make a new selection. If the new selection is the
  same as the previous one for a renderer then the player handles
  this efficiently (i.e. turns it into a no-op).
- DefaultTrackSelector supports disabling/enabling of renderers.
  Separately, it supports overrides to select specific formats.
  Since formats may change (playlists/periods), overrides are
  specific to not only the renderer but also the set of formats
  that are available to it. If the formats available to a renderer
  change then the override will no longer apply. If the same set
  of formats become available at some point later, it will apply
  once more. This will nicely handle cases like ad-insertion where
  the ads have different formats, but all segments of main content
  use the same set of formats.
- In general, in  multi-period or playlist cases, the preferred
  way of selecting formats will be via constraints (e.g. ""don't play
  HD"", ""prefer higher quality audio"") rather than explicit format
  selections. The ability to set various constraints on
  DefaultTrackSelector is future work.

Note about the demo app:

- I've removed the verbose log toggle. I doubt anyone has
  ever used it! I've also removed the background audio option.
  Without using a service it can't be considered a reference
  implementation, so it's probably best to leave developers to
  figure this one out. Finally, listening to AudioCapabilities
  has also gone. This will be replaced by having the player
  detect and handle the capabilities change internally in a
  future CL. This will work by allowing a renderer to invalidate
  the track selections when its capabilities change, much like
  how a selector is able to invalidate the track selections in
  this CL.
- It's now possible to enable ABR with an arbitrary subset of
  tracks.
- Unsupported tracks are shown grayed out in the UI. I'm not
  showing tracks that aren't associated to any renderer, but we
  could optionally add that later.
- Every time the tracks change, there's logcat output showing
  all of the tracks and which ones are enabled. Unassociated
  tracks are displayed in this output.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=117122202"
ojw28,2016-03-08 11:42:19,https://api.github.com/repos/google/ExoPlayer/git/commits/9c98c4bb109b833c88b138b4f0c39f6d733df9e4,9c98c4bb109b833c88b138b4f0c39f6d733df9e4,"Make Track[Group|GroupArray|Selection] consistent.

- I don't think the length is useful in hashCode; if the length
  is different then Arrays.hashCode should account for that.
- ""this."" just for consistency across these classes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=116641142"
ojw28,2016-03-08 10:51:53,https://api.github.com/repos/google/ExoPlayer/git/commits/00191848f725961db0a70c18dc4520125bf5e266,00191848f725961db0a70c18dc4520125bf5e266,"Make TrackSelection implement equals/hashCode.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=116638211"
ojw28,2016-02-25 16:06:53,https://api.github.com/repos/google/ExoPlayer/git/commits/73400907fc3b04b8e05bae9a67455e24a2d3490d,73400907fc3b04b8e05bae9a67455e24a2d3490d,"Introduce TrackGroupArray.

This change replaces TrackGroup[] with TrackGroupArray. This is
to allow equality based hashCode and equals implementations.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=115563146"
ojw28,2016-02-25 15:51:36,https://api.github.com/repos/google/ExoPlayer/git/commits/d1cb4bc1af76d71212039fe6747e25fe1d0383f4,d1cb4bc1af76d71212039fe6747e25fe1d0383f4,"Fix hasSampleFormat in experimental version. Oops!
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=115561885"
ojw28,2016-02-24 16:32:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1208d8ec75b611c210c540b2b1cd95b4e30487b5,1208d8ec75b611c210c540b2b1cd95b4e30487b5,"Allow more precise reporting of format support.

This change allows a TrackRenderer to distinguish between the
""I don't support this type at all"" case and the ""I am a general
purpose renderer of this type, but cannot support the specific
subtype"" case.

Bug=26622675
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=115454950"
ojw28,2016-02-22 19:32:40,https://api.github.com/repos/google/ExoPlayer/git/commits/6ba4fa3b51b972cc8dd7af2c3688f2a45896807a,6ba4fa3b51b972cc8dd7af2c3688f2a45896807a,"Make SampleSource interfaces right for TrackSelector.

The TrackSelector API will look like:

TrackSelection[] selectTrack(
    TrackRenderer[] renderers, TrackGroup[] trackGroups);

In this CL:

- SampleSources return TrackGroup[], so that the result can be easily
  passed to the selector.
- TrackStream gets its own file to sit alongside other Track* classes.
- A TrackSelection object is introduced to encapsulate group and track
  indices.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=115251331"
ojw28,2016-02-18 15:49:42,https://api.github.com/repos/google/ExoPlayer/git/commits/39a924451a590517effc3c3f94260b63c6a3dc0b,39a924451a590517effc3c3f94260b63c6a3dc0b,"Return format and adaptation support from single method.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114963314"
ojw28,2016-02-16 17:52:22,https://api.github.com/repos/google/ExoPlayer/git/commits/0e60335064c87b0d62665eab0ac2a5f8a048e236,0e60335064c87b0d62665eab0ac2a5f8a048e236,"Add structure to ExoPlaybackException.

- Add a top level failure type (source/renderer/unexpected),
  and convenience methods for retrieving the underlying cause
  without needing to cast.
- Also add renderer index in the case of renderer failures.
- setIndex/getIndex is a little . . . unclean, but alternatives
  involve either having the top line of the stack trace be a
  non-interesting line, or loads of try/catch blocks in
  ExoPlayerImplInternal.

Issue: #777
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114763073"
ojw28,2016-02-16 13:18:47,https://api.github.com/repos/google/ExoPlayer/git/commits/c48dd4f3e37706a4df90c53a2e54862af0d196dc,c48dd4f3e37706a4df90c53a2e54862af0d196dc,"Use FormatEvaluator for HLS.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114743795"
ojw28,2016-02-12 18:23:21,https://api.github.com/repos/google/ExoPlayer/git/commits/a7adcce018a41ecb69dbbfd25ac6811d2ae3cc5e,a7adcce018a41ecb69dbbfd25ac6811d2ae3cc5e,"One Format object to rule them all.

- Format can represent both container and sample formats.
  If a container contains a single track (as is true in
  DASH and SmoothStreaming) then the container Format can
  also contain sufficient information about the samples
  to allow for track selection. This avoids the Format to
  MediaFormat conversions that we were previously doing in
  ChunkSource implementations.

- One important result of this change is that adaptive
  format evaluation and static format selection now use the
  same format objects, which is a whole lot less confusing
  for someone who wants to implement both initial selection
  and subsequent adaptation logic. It's not in the V2 doc,
  but it may well make sense if the TrackSelector not only
  selects the tracks to enable for an adaptive playback, but
  also injects a FormatEvaluator when enabling them that will
  control the subsequent adaptive selections. That would make
  it so that all format selection logic originates from the
  same place.

- As part of this change, the adaptiveX variables are removed
  from the format object; they don't really correspond to a
  single format. This also saves on having to inject the max
  video dimensions through a bunch of classes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114546777"
ojw28,2016-02-12 18:14:45,https://api.github.com/repos/google/ExoPlayer/git/commits/362d0400cd6334552566774b213912ee6acf63d3,362d0400cd6334552566774b213912ee6acf63d3,"Don't pass chunk list to ChunkSource.disable().
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114545827"
ojw28,2016-02-11 13:52:21,https://api.github.com/repos/google/ExoPlayer/git/commits/782817d524c28e361f60ea920df0cbea68c82911,782817d524c28e361f60ea920df0cbea68c82911,"Remove durationUs from MediaFormat.

Duration was originally included in MediaFormat to match the
framework class, but it actually doesn't make much sense. In
many containers there's no such thing as per-stream duration,
and in any case we don't really care. Setting the duration on
each format required excessive piping.

This change moves duration into SeekMap instead, which seems
to make a lot more sense because it's at the container level,
and because being able to seek is generally couplied with
knowing how long the stream is.

This change is also a step toward merging Format and MediaFormat
into a single class (because Format doesn't have a duration),
which is coming soon.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114428500"
ojw28,2016-02-11 13:39:57,https://api.github.com/repos/google/ExoPlayer/git/commits/ebf87a36197e1a2fe8e23757b27bb7afdea27c52,ebf87a36197e1a2fe8e23757b27bb7afdea27c52,"Simplify codec configuration.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114427767"
ojw28,2016-02-11 13:35:02,https://api.github.com/repos/google/ExoPlayer/git/commits/335bb0aff2085caaceb7305c9830e6d7db019a0f,335bb0aff2085caaceb7305c9830e6d7db019a0f,"Implement decoder capability checks in MediaCodecTrackRenderers.

[Step 4 - Partial, of []

- The capabilities checks previously performed in VideoFormatSelectorUtil
  are now performed in MediaCodecVideoTrackRenderer. This means they'll be
  useful for non-chunk use cases (e.g. when using ExtractorSampleSource).
- Added capabilities checks for audio in MediaCodecAudioTrackRenderer. We
  didn't check audio capabilities previously.
- Added functionality to allow a TrackRenderer to indicate the extent of
  its adaptive support.

The idea here is that a TrackSelector (to be introduced) will have access to:

(a) TrackGroups from the SampleSource that indicate whether they support
adaptive playbacks and the formats of each individual track.
(b) TrackRenderers that indicate whether they support adaptive playbacks as
well as how capable they are of rendering formats of individual tracks.

This is everything that a TrackSelector needs from the player components in
order to decide how to wire things up. Note that a TrackSelector may opt to
treat FORMAT_EXCEEDS_CAPABILITIES as FORMAT_HANDLED at its own risk, if it
thinks that it (or the user) knows better. This is a request that we've seen
from third parties for better handling cases where capabilities aren't
accurately reported by the underlying platform.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=114427428"
ojw28,2016-01-28 15:14:58,https://api.github.com/repos/google/ExoPlayer/git/commits/43e1e7e83a15ddcab42545b56767273e86f0dec8,43e1e7e83a15ddcab42545b56767273e86f0dec8,"ExoPlayer V2 Refactor - Misc

Delete SingleSampleChunkSource. I don't think it's really
useful for anything, now we have SingleSampleSource.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=113259289"
ojw28,2016-01-28 15:14:27,https://api.github.com/repos/google/ExoPlayer/git/commits/ce324f1ca928ca8ee846853652996b95593498b8,ce324f1ca928ca8ee846853652996b95593498b8,"ExoPlayer V2 Refactor - Step 7 (partial)

This change removes the need for SourceBuilders to load their
manifests before building their sources. This is done by pushing
initial manifest loads into the ChunkSource classes. This simplifies
the SourceBuilders a lot, and also DemoPlayer.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=113259259"
ojw28,2016-01-27 13:16:32,https://api.github.com/repos/google/ExoPlayer/git/commits/be47148940cd5c6589025ea96b7b440584f740ec,be47148940cd5c6589025ea96b7b440584f740ec,"ExoPlayer V2 Refactor - Step 4

Notes:
1. The logic in ExoPlayerImplInternal is very temporary, until we
   have proper TrackSelector implementations. Ignore the fact that
   it's crazy and has loads of nesting.
2. This change removes all capabilities checking. TrackRenderer
   implementations will be updated to perform these checks in a
   subsequent CL.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=113151233"
ojw28,2016-01-26 13:43:04,https://api.github.com/repos/google/ExoPlayer/git/commits/6cb20525cbb15d14c78f68506cd1bdc7ac7c1c75,6cb20525cbb15d14c78f68506cd1bdc7ac7c1c75,"ExoPlayer V2 Refactor - Step 3

Move binding of tracks<->renderers to ExoPlayerImplInternal.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=113046018"
ojw28,2016-01-26 13:05:41,https://api.github.com/repos/google/ExoPlayer/git/commits/cdae9ac5d26b18f5a84c4dbd79568ee1e6ae239b,cdae9ac5d26b18f5a84c4dbd79568ee1e6ae239b,"ExoPlayer V2 Refactor - Steps 1/2.

GitHub note - Apologies for the cryptic change descriptions,
they relate to a design doc that's not externally visible.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=113043764"
ojw28,2016-06-15 12:36:09,https://api.github.com/repos/google/ExoPlayer/git/commits/61d581fe4401a70e8d0884d79e0a9553685b6e67,61d581fe4401a70e8d0884d79e0a9553685b6e67,Prepare for 2.x push
ojw28,2016-01-22 16:00:22,https://api.github.com/repos/google/ExoPlayer/git/commits/39a7cea987e4d19a5d5f1818146ac53da03ae0f3,39a7cea987e4d19a5d5f1818146ac53da03ae0f3,Bump version to 1.5.4
ojw28,2016-01-22 15:55:16,https://api.github.com/repos/google/ExoPlayer/git/commits/7d9007af28a2c33bb6cc283c4bc8f00bd41b82ab,7d9007af28a2c33bb6cc283c4bc8f00bd41b82ab,Update release notes
AquilesCanta,2016-01-22 15:01:33,https://api.github.com/repos/google/ExoPlayer/git/commits/a8a9e0de2a3e4cfe15d929c0b923f5e7350755f7,a8a9e0de2a3e4cfe15d929c0b923f5e7350755f7,"Removed permissions from the library manifest

Fixes: #1176
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112781092"
ojw28,2016-01-22 13:42:13,https://api.github.com/repos/google/ExoPlayer/git/commits/da2752137b7295b0ef6efc82e076259517751ee0,da2752137b7295b0ef6efc82e076259517751ee0,"Add proguard config for Opus extension.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112776882"
andrewlewis,2016-01-22 12:59:17,https://api.github.com/repos/google/ExoPlayer/git/commits/a9720457d8b134df973240cb0abc20b652e34ee9,a9720457d8b134df973240cb0abc20b652e34ee9,"Add support for playing DTS in HLS.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112774678"
ojw28,2016-01-22 12:19:49,https://api.github.com/repos/google/ExoPlayer/git/commits/a02fd14c318837149299dd73887f21a585ac49ae,a02fd14c318837149299dd73887f21a585ac49ae,Fix Eclipse project for library tests.
ojw28,2016-01-22 00:32:12,https://api.github.com/repos/google/ExoPlayer/git/commits/7bf8080950fdb7d0b4a9c7f4522b0c9e058c996c,7bf8080950fdb7d0b4a9c7f4522b0c9e058c996c,"ExoPlayer: Remove deprecated methods.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112736771"
ojw28,2016-01-21 21:58:01,https://api.github.com/repos/google/ExoPlayer/git/commits/d804446b343401f6487f62777c9a23173f79309b,d804446b343401f6487f62777c9a23173f79309b,"Implement seeking via a single code path.

When a seek is performed, renderers currently perform the
actions that they need to take in two places: Some changes
are performed in seekTo implementations. Other changes are
performed when discontinuities are read from the source.

In HLS we need to perform what is effectively a seek
originating in the source. To support this, this CL allows
discontinuities read from the source to modify the playback
position. All actions that renderers perform as a result
of a seek are moved to be performed when a discontinuity is
received.

Best way to understand CL:
- Look at SampleSource interface change and then at the
  concrete implementations, to make sure they've been
  changed properly.
- Look at SampleSourceTrackRenderer change.
- Look at concrete renderers. The general pattern is that
  code previously performed in seekTo and READ_DISCONTINUITY
  is merged into onDiscontinuity().

Note: This will be further untangled in V2.

Issue #676
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112720746"
andrewlewis,2016-01-21 18:38:04,https://api.github.com/repos/google/ExoPlayer/git/commits/3f0244e2149c8cff842f7cbc91c920ca0a38140f,3f0244e2149c8cff842f7cbc91c920ca0a38140f,"Read gapless playback metadata in files with Xing metadata.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112699916"
andrewlewis,2016-01-21 18:32:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4bea0b184f908a3add9991c8267132786b05552e,4bea0b184f908a3add9991c8267132786b05552e,"Fix warnings in OggVorbisExtractorTest and VorbisBitArrayTest.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112699244"
andrewlewis,2016-01-21 17:35:02,https://api.github.com/repos/google/ExoPlayer/git/commits/9d89d48f56251dc69f19ad273ec30e259debbe5c,9d89d48f56251dc69f19ad273ec30e259debbe5c,"Fix ParsableByteArrayTest.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112693523"
andrewlewis,2016-01-21 17:05:56,https://api.github.com/repos/google/ExoPlayer/git/commits/bed89730a7f641be862b8d765089d37cb6f0395b,bed89730a7f641be862b8d765089d37cb6f0395b,"Fix path to Mockito for Eclipse.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112691130"
andrewlewis,2016-01-21 16:01:04,https://api.github.com/repos/google/ExoPlayer/git/commits/588d5a6e556c76e46da596f32321dd519656a125,588d5a6e556c76e46da596f32321dd519656a125,"Parse encoder delay and padding from ID3 metadata in MP3.

Based on AOSP's MP3Extractor.cpp and ID3.cpp.

Issue: #497
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112685664"
andrewlewis,2016-01-21 15:26:27,https://api.github.com/repos/google/ExoPlayer/git/commits/25fb2a826e3d39f3dfda52d21d2b37afb417f693,25fb2a826e3d39f3dfda52d21d2b37afb417f693,"Merge MP3 sniffing/synchronization functionality.

As part of this change, Extractor.sniff may read/skip (not just peek) if it
returns true. This allows Extractors to avoid parsing the input a second time in
read.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112683272"
andrewlewis,2016-01-21 13:34:30,https://api.github.com/repos/google/ExoPlayer/git/commits/e6637c50c249fb027aad5a97b347263d3ff80b24,e6637c50c249fb027aad5a97b347263d3ff80b24,"Fix a couple of compilation warnings.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112676296"
ojw28,2016-01-22 11:45:04,https://api.github.com/repos/google/ExoPlayer/git/commits/89ce1ccedff72da5c7efc4ee50bfcd2d67e45818,89ce1ccedff72da5c7efc4ee50bfcd2d67e45818,OggVorbisExtractor (WIP - Seeking not yet enabled)
ojw28,2016-01-22 11:40:27,https://api.github.com/repos/google/ExoPlayer/git/commits/88fa1495c47b8c14358167839eea0a14885ba130,88fa1495c47b8c14358167839eea0a14885ba130,"Use consistent naming for Xing headers/tags.

Also fix a couple of style nits."
ojw28,2016-01-22 11:40:02,https://api.github.com/repos/google/ExoPlayer/git/commits/cef1f12f1dc60714b8d4b4ff8a3b5d2c47607cbb,cef1f12f1dc60714b8d4b4ff8a3b5d2c47607cbb,Add readString to ParsableByteArray
ojw28,2016-01-22 11:38:06,https://api.github.com/repos/google/ExoPlayer/git/commits/eda8ac4e016be24a9821ce62a046c01142731772,eda8ac4e016be24a9821ce62a046c01142731772,Add eventSourceId to onAvailableRangeChange events
ojw28,2016-01-22 11:35:36,https://api.github.com/repos/google/ExoPlayer/git/commits/00068c8954f7dd277afc5b7b2b25131401642a71,00068c8954f7dd277afc5b7b2b25131401642a71,Add vpx extension playback test.
andrewlewis,2016-01-18 17:00:01,https://api.github.com/repos/google/ExoPlayer/git/commits/783467b8fb8087feb44da5f2c160f9c87631e7bb,783467b8fb8087feb44da5f2c160f9c87631e7bb,"Work around broken MP3 decoder.

Issue: #398
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112412961"
ojw28,2016-01-18 13:37:52,https://api.github.com/repos/google/ExoPlayer/git/commits/a049382cd743b35f665af251ca493e21f864a771,a049382cd743b35f665af251ca493e21f864a771,"Treat seeks in HLS live to be at t=0, as in ExtractorSampleSource.

This makes sense until we need to support seeking in the live window.

Issue: #676
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112402026"
ojw28,2016-01-18 11:13:12,https://api.github.com/repos/google/ExoPlayer/git/commits/cef0f7a0b184293e92dba6d1dacbb04917d1970f,cef0f7a0b184293e92dba6d1dacbb04917d1970f,"Apply flush workaround on S5 Mini devices with Exynos chipset.

Also apply the workaround for the secure variant of OMX.SEC.avc.dec.
Note that it's not necessary to do the same for the RK decoder in
the method below, since that workaround is targeted at SDK_INT<=17
and secure decoders only came along in 18.

Issue: #603
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112395376"
ojw28,2016-01-16 15:37:07,https://api.github.com/repos/google/ExoPlayer/git/commits/c01d0096ab72c19d254d2150f80f4eb773ae2e23,c01d0096ab72c19d254d2150f80f4eb773ae2e23,"Merge pull request #1155 from bartsidee/1095-dev

link track language attribute in Smoothstream parser"
ojw28,2016-01-15 19:18:19,https://api.github.com/repos/google/ExoPlayer/git/commits/9ab6c9616946744f8cc27a7e8a300628c36234af,9ab6c9616946744f8cc27a7e8a300628c36234af,Make TtmlColorParser comment a little clearer.
ojw28,2016-01-15 19:13:58,https://api.github.com/repos/google/ExoPlayer/git/commits/c60dac7c467aaa99511e956caa37f1bd21ab5394,c60dac7c467aaa99511e956caa37f1bd21ab5394,Further tweaks to TTML color parsing.
ojw28,2016-01-15 19:06:27,https://api.github.com/repos/google/ExoPlayer/git/commits/7974a61476e9f494076fad1f8ee8f6df0a87c83c,7974a61476e9f494076fad1f8ee8f6df0a87c83c,"Fix TtmlColorParser test.

Also simplify the implementation slightly."
ojw28,2016-01-15 18:53:39,https://api.github.com/repos/google/ExoPlayer/git/commits/afafd08346f4b8f4b4bbdb1b2c6595b0a1a02e4f,afafd08346f4b8f4b4bbdb1b2c6595b0a1a02e4f,Merge branch 'aptly-io-fix_rgba_color_tuple' into dev
ojw28,2016-01-15 18:53:30,https://api.github.com/repos/google/ExoPlayer/git/commits/b5c8595655015f65d3f8b8198ac93ebbdccda30b,b5c8595655015f65d3f8b8198ac93ebbdccda30b,Resolve merge conflict
andrewlewis,2016-01-15 17:14:19,https://api.github.com/repos/google/ExoPlayer/git/commits/284b7e7f28752438191015487900a82797a3bcbf,284b7e7f28752438191015487900a82797a3bcbf,"Comment (e-)AC-3/DTS descriptor tags.

Also, use terminology from ATSC spec in Ac3Util comment.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112254908"
andrewlewis,2016-01-15 17:13:25,https://api.github.com/repos/google/ExoPlayer/git/commits/0900c535640689540fdaf6468e7d30bae621635b,0900c535640689540fdaf6468e7d30bae621635b,"Set the passthrough buffer size based on encoded format bit rates.

After this change, AC-3 uses about 20 KB and DTS uses 49 KB.

For comparison, 'normal' PCM playbacks use by default (depending on the device
and input format) about 45 KB. For passthrough, the following buffer sizes were
used before this change:
- Nexus Player AC-3: 23 KB
- Nexus Player DTS: 25 KB
- NVIDIA Shield AC-3: 15 KB
- NVIDIA Shield DTS: 16 KB (caused underruns in some DTS-HD playbacks)
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112254836"
andrewlewis,2016-01-15 16:43:00,https://api.github.com/repos/google/ExoPlayer/git/commits/9bb124a0113f951ba195a876256564adc3cd342a,9bb124a0113f951ba195a876256564adc3cd342a,"Use uppercase for hex literals.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112252404"
AquilesCanta,2016-01-15 14:11:44,https://api.github.com/repos/google/ExoPlayer/git/commits/5baf55176bdf0f88cd7b45a3473dc8b617eae07a,5baf55176bdf0f88cd7b45a3473dc8b617eae07a,"Add support for Cue Settings and Spanned text in MP4WebVTT

Using the provided methods by the previous refactors, it is now possible to use all of the WebVTT features already available.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112243172"
ojw28,2016-01-14 18:18:54,https://api.github.com/repos/google/ExoPlayer/git/commits/d45f0b8b6d0210cfe7115641d71eaebdefae7f50,d45f0b8b6d0210cfe7115641d71eaebdefae7f50,"Reflow comments in Util.java
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112163984"
bemeyvif,2016-01-14 22:11:57,https://api.github.com/repos/google/ExoPlayer/git/commits/e6132ed7421684edea84b83134df5482a5a38cd5,e6132ed7421684edea84b83134df5482a5a38cd5,"Fix RGBA color tuple parsing

The TTML 1 spec. defines an exact RGBA color tuple as #rrggbbaa
See https://www.w3.org/TR/ttml1/#style-value-color

Android's internal representation is ARGB.
The correct parsing therefore requires a bit of extra byte shuffling ..."
ojw28,2016-01-14 18:01:55,https://api.github.com/repos/google/ExoPlayer/git/commits/df7a96a7c4c9132720ca3104b91829daa0791976,df7a96a7c4c9132720ca3104b91829daa0791976,"Map SDK_INT for dev devices.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112162208"
ojw28,2016-01-14 17:59:11,https://api.github.com/repos/google/ExoPlayer/git/commits/e3da2cfb402b290dc10480a594d21e2ef226f156,e3da2cfb402b290dc10480a594d21e2ef226f156,"Treat .vtt as Webvtt as well as .webvtt.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112161960"
ojw28,2016-01-14 17:57:46,https://api.github.com/repos/google/ExoPlayer/git/commits/949317a41ad7d465e57395d4a5d71c0d64104d62,949317a41ad7d465e57395d4a5d71c0d64104d62,"Minor tweaks to merged pull requests.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112161860"
ojw28,2016-01-14 15:50:12,https://api.github.com/repos/google/ExoPlayer/git/commits/be2aedbd53612ca6bde3bc8ee5c3acae16905d77,be2aedbd53612ca6bde3bc8ee5c3acae16905d77,"Don't consider switching tracks as ""joining"".

I'm not really sure how best to document this in TrackRenderer;
it's a bit of a weird feature. For now, I've gone with the vague
approach.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112150939"
andrewlewis,2016-01-14 15:26:44,https://api.github.com/repos/google/ExoPlayer/git/commits/317842a6b7bf1cd8e5600c6fac27cedad2539524,317842a6b7bf1cd8e5600c6fac27cedad2539524,"Use expandable headers in the sample chooser.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112149442"
ojw28,2016-01-14 15:24:03,https://api.github.com/repos/google/ExoPlayer/git/commits/2690f569af8e861bfba3e650176bb935996db42d,2690f569af8e861bfba3e650176bb935996db42d,"Enable track selection + WebVTT for HLS.

See the documentation of buildTracks for the gory details.

Issue: #151
Issue: #676
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112149293"
AquilesCanta,2016-01-14 14:25:25,https://api.github.com/repos/google/ExoPlayer/git/commits/b6b97a8683864ce39d7bfca9f817556fcddcbe4d,b6b97a8683864ce39d7bfca9f817556fcddcbe4d,"Expose cue settings parser

This CL exposes the cue settings parser in order to allow its usage from the MP4Webvtt extractor. Also fixes a few mistakes from the previous related CL.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112145806"
ojw28,2016-01-14 13:43:41,https://api.github.com/repos/google/ExoPlayer/git/commits/6b9a1b16f1b0af4cab0f4a5ed8257a70fdcc8b46,6b9a1b16f1b0af4cab0f4a5ed8257a70fdcc8b46,"Fix issues playing FLV content.

* AudioTagPayloadReader was strangely parsing an audioSpecificConfig
  itself, using the parsed values to build a new audioSpecificConfig,
  then passing the newly constructed instance to be parsed by
  CodecSpecificDataUtil. Unfortunately the translation was lossy ;).
* Treat Duration=0 as an unknown duration.

Issue #1137
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112143569"
ojw28,2016-01-14 13:40:12,https://api.github.com/repos/google/ExoPlayer/git/commits/bc1d76a3eb882a11ae40e888cfcf5dbb96e7dd7c,bc1d76a3eb882a11ae40e888cfcf5dbb96e7dd7c,"Fix ParsableByteArray.readLine + discard BOM at start of line.

- I think \r and \n are handled the wrong way around?
- We only expect to encounter a BOM sequence at the start of a
  file, but it feels fine to automatically discard it in all
  cases for simplicity. A BOM sequence doesn't mean anything in
  UTF-8. See https://en.wikipedia.org/wiki/Byte_order_mark. Note
  that I think the advice not to remove it on that page relates
  only to the case where the file is being edited + saved.

Issue #1136
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112143407"
andrewlewis,2016-01-14 08:58:57,https://api.github.com/repos/google/ExoPlayer/git/commits/5ef11233919775184f0c4d0e1fd6c8bb3e6b2dac,5ef11233919775184f0c4d0e1fd6c8bb3e6b2dac,"Clarify @param bufferSizeContribution documentation.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=112127698"
ojw28,2016-01-12 14:55:53,https://api.github.com/repos/google/ExoPlayer/git/commits/59cf3e02f5d5001a9094781381b1b65af3bd49df,59cf3e02f5d5001a9094781381b1b65af3bd49df,"HlsChunkSource: Expose stuff for WebVtt/Variant selection.

Issue: #151
Issue: #676
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111945466"
ojw28,2016-01-12 13:57:20,https://api.github.com/repos/google/ExoPlayer/git/commits/2a9eeaa893c6275a74b1ad283a331452b1bf005d,2a9eeaa893c6275a74b1ad283a331452b1bf005d,"Fix HlsSampleSource use of LoadControl.

There are multiple issues with HlsSampleSource's use of
LoadControl that become apparent when you attempt to use
the same LoadControl for loads by another source.

* In the ""limbo"" state HlsSampleSource doesn't start any
  new loads, but doesn't update the LoadControl to tell
  it that it doesn't want to load anything either. This
  can prevent another source from starting the loads that
  it needs to make to complete preparation, causing
  playback to become stuck.
* The LoadControl isn't updated properly when the EOS is
  reached. This can cause playback to become stuck near
  the end of the media.
* If HlsSampleSource is released from being in the ""limbo""
  state, it doesn't unregister itself with the control.

Issue: #151
Issue: #676
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111942009"
ojw28,2016-01-12 13:43:24,https://api.github.com/repos/google/ExoPlayer/git/commits/43fcb369249a61d9de6eea09637f5b02aa8dc007,43fcb369249a61d9de6eea09637f5b02aa8dc007,"Use APPLICATION_M3U8 as the mimeType for media playlists.

Given we need to do this in HlsPlaylistParser in the normal
case (i.e. not MEDIA_TAG), we may as well just be consistent
and do it everywhere.

Issue: #151
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111941335"
erdemguven,2016-01-11 11:53:42,https://api.github.com/repos/google/ExoPlayer/git/commits/8c8794878dc1425c339d37169149b66997a77c8c,8c8794878dc1425c339d37169149b66997a77c8c,"Fixed demo-misc-vp9-opus-sw DASH check
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111839055"
andrewlewis,2016-01-11 10:12:21,https://api.github.com/repos/google/ExoPlayer/git/commits/b7d5ce366a59d248900bee1365e45299145b5870,b7d5ce366a59d248900bee1365e45299145b5870,"Add a comment to explain the input size calculation.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111833857"
RileyA,2016-01-11 02:56:50,https://api.github.com/repos/google/ExoPlayer/git/commits/c6cdf7e083c81dc58fbe52a69d54dee9eb9e61ba,c6cdf7e083c81dc58fbe52a69d54dee9eb9e61ba,"Add limited support for edit lists in fragmented MP4s.

Currently only supports a single offset to the full media timeline
(indicated by a duration of 0). This is most often used to fix the
non-zero starting presentation timestamp introduced when B-frames
are present.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111816916"
vigneshvg,2016-01-08 18:49:28,https://api.github.com/repos/google/ExoPlayer/git/commits/bb55fd8e47f515ede75eeceb44764f6b526c9fd6,bb55fd8e47f515ede75eeceb44764f6b526c9fd6,"opus: Add CodecCounters support

Fixes Issue #1047
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111708934"
ojw28,2016-01-08 16:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/ab9e3bac4682ca84bc9632e9eaa3a9ee3690ffd0,ab9e3bac4682ca84bc9632e9eaa3a9ee3690ffd0,"Introduce HlsTrackSelector.

This is equivalent to DashTrackSelector and SmoothStreamingTrackSelector.
This is a step toward allowing HlsChunkSource to expose multiple tracks,
which is a requirement for supporting WebVtt.

This change also enables WebVtt extractor instantiation.

Issue: #151
Issue: #676
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111698833"
ojw28,2016-01-08 15:31:37,https://api.github.com/repos/google/ExoPlayer/git/commits/00f8deda3d7b558794986fcc6be47d49ea3a5b2b,00f8deda3d7b558794986fcc6be47d49ea3a5b2b,"Introduce PtsTimestampAdjusterProvider for HLS WebVTT.

This allows the same adjusters to be used by multiple
HlsChunkSource instances. This is necessary because
WebVTT chunks will be loaded by a second chunk source
to the one loading audio/video. In both cases the same
timestamp adjustments will need to be applied.

Each source may transition from one discontinuity sequence
to the next at a slightly different time, so it's necessary
to maintain a separate adjuster for each sequence.

An adjuster can only be initialized correctly using audio/video
and not WebVTT, because the start time in a WebVTT file in
HLS doesn't necessarily correspond to the chunk start time,
which means the timestamp offset calculated by the adjuster
could end up being incorrect. Hence sources providing WebVTT
chunks will set isMasterSource to false. Lovely, right :(?

Issue: #151
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111693126"
erdemguven,2016-01-08 14:10:04,https://api.github.com/repos/google/ExoPlayer/git/commits/86c4fb3ac2c3c19dee13a3690d94670a4741290d,86c4fb3ac2c3c19dee13a3690d94670a4741290d,"In demo-misc-vp9-opus-sw removed FilePickerActivity and copied demo player permissions bug fix
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111689012"
ojw28,2016-01-08 14:06:21,https://api.github.com/repos/google/ExoPlayer/git/commits/b9ec51dbedffa677e5b5419b05f0394d2fc951f3,b9ec51dbedffa677e5b5419b05f0394d2fc951f3,"SmoothStreaming track selector feature parity with DASH.

This gives DefaultSmoothStreamingTrackSelector feature parity
with DefaultDashTrackSelector. Note that the code duplication
across these classes will go away eventually, when we rework
track selection as described in Github Issue #1121.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111688784"
ojw28,2016-01-07 19:03:38,https://api.github.com/repos/google/ExoPlayer/git/commits/00e903b32e05fb4ba137c59fcb30a776e88ca77e,00e903b32e05fb4ba137c59fcb30a776e88ca77e,"Don't pass maxWidth/Height for non-video streams.

This is a no-op change for clarity only. maxWidth/maxHeight
don't mean anything for AAC/MP3, so it makes sense to pass
MediaFormat.NO_VALUE in all cases.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111619832"
AquilesCanta,2016-01-07 18:33:52,https://api.github.com/repos/google/ExoPlayer/git/commits/651996983b4a890eb69d48def05045896c71a0cb,651996983b4a890eb69d48def05045896c71a0cb,"Refactored the Webvtt parsing classes

Moved the behaviors related to Cue's to the WebvttCueParser class.
This way, the parsing methods will be more easily accessible to
other classes, such as the MP4Webvtt parser. This class also has
some methods that require state to avoid repetitive avoidable
allocations. The method visibility is subject to changes in
further CLs.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111616824"
ojw28,2016-01-07 17:58:18,https://api.github.com/repos/google/ExoPlayer/git/commits/0aa4d3d20974b6c436a67c0da1125847ee430ef6,0aa4d3d20974b6c436a67c0da1125847ee430ef6,"Remove dead code.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111613354"
andrewlewis,2016-01-07 16:49:05,https://api.github.com/repos/google/ExoPlayer/git/commits/664c80da15b78e886504d6560af8799e5a8dff2b,664c80da15b78e886504d6560af8799e5a8dff2b,"Set a max input size for VP8 and VP9.

Issue: #1090
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111607802"
ojw28,2016-01-06 17:13:28,https://api.github.com/repos/google/ExoPlayer/git/commits/cc1f3e5cac818bd360f1787f7d9cb41d957b534a,cc1f3e5cac818bd360f1787f7d9cb41d957b534a,"Clean up parser exception a little + add descriptions.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111515406"
ojw28,2016-01-06 17:01:51,https://api.github.com/repos/google/ExoPlayer/git/commits/27e11f1f1a767ebdca75ea54158713a03d465af7,27e11f1f1a767ebdca75ea54158713a03d465af7,"Workaround flushing issues on S-3 JB MR2.

Targeting to all API level 19 devices using the OMX.SEC.avc.dec
decoder is probably the right thing to do. It shouldn't have
negative implications if we apply the workaround on devices that
don't really need it, except to slow down seeking slightly due
to decoder re-allocation. Given we're talking about JB, I think
the priority should be to ""make sure it works"".

Issue: #951
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111514406"
ojw28,2016-01-06 15:20:29,https://api.github.com/repos/google/ExoPlayer/git/commits/9e3e61901e894879c00c156e0b4cc246806a264d,9e3e61901e894879c00c156e0b4cc246806a264d,"Remove stray line break (ineffectively busy).
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111507159"
ojw28,2016-01-06 12:53:35,https://api.github.com/repos/google/ExoPlayer/git/commits/18927795356b5455a8495b677976947d4f8f2788,18927795356b5455a8495b677976947d4f8f2788,"Increment frame timestamps (TS/H.262).

We normally expect each frame to come in its own PES packet,
but it seems that this is not always the case. This change
uses the frame rate in the stream to increment the frame
timestamp in the case of multiple frames contained within
a single PES.

Note that since we don't expect 100s of frames in a single
PES, or anything close to that really, the rounding errors
that may accumulate due to use of a frame duration should be
fine.

Issue: #1112
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111499052"
andrewlewis,2016-01-06 12:25:42,https://api.github.com/repos/google/ExoPlayer/git/commits/d740bf9f23b3f8b242b5524eaac000eb19fcd2eb,d740bf9f23b3f8b242b5524eaac000eb19fcd2eb,"Handle edit lists with one 0 duration edit.

Issue: #1102
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111497855"
ojw28,2016-01-05 14:54:54,https://api.github.com/repos/google/ExoPlayer/git/commits/5b54dc5f8fdd37dc2c9ca05e66deb962d4579c9d,5b54dc5f8fdd37dc2c9ca05e66deb962d4579c9d,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
erdemguven,2016-01-05 12:42:59,https://api.github.com/repos/google/ExoPlayer/git/commits/69a42b60f8df36d514149c4e465732dbeb699af7,69a42b60f8df36d514149c4e465732dbeb699af7,"Implement ID3 Metadata support for audio only HLS.

Issue: #862
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111403855"
AquilesCanta,2016-01-05 12:16:20,https://api.github.com/repos/google/ExoPlayer/git/commits/1e4f2f6a1fceb9a39df723525556933d2b9f18c2,1e4f2f6a1fceb9a39df723525556933d2b9f18c2,"Refactored WebvttCueParser methods to be static

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111402555"
andrewlewis,2016-01-05 09:38:09,https://api.github.com/repos/google/ExoPlayer/git/commits/7c103ca5f845b353ce2bd55c6b92c6035091deb3,7c103ca5f845b353ce2bd55c6b92c6035091deb3,"Using ExtractorInput.peek* instead of BufferingInput.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111394118"
gauravmishra,2016-01-04 21:01:58,https://api.github.com/repos/google/ExoPlayer/git/commits/c1e99277d238e6bd5460aeaa1f2813bdca0259b3,c1e99277d238e6bd5460aeaa1f2813bdca0259b3,"Check support for adaptive playback
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111348701"
AquilesCanta,2016-01-04 17:07:05,https://api.github.com/repos/google/ExoPlayer/git/commits/681df4e4aa492c5cfb672651230ddaaa09b3ebad,681df4e4aa492c5cfb672651230ddaaa09b3ebad,"Refactored the SubtitleParser's parse() signature

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111326567"
AquilesCanta,2016-01-04 17:07:05,https://api.github.com/repos/google/ExoPlayer/git/commits/6b599751c6b4ee719131632c88aa718a4eb84608,6b599751c6b4ee719131632c88aa718a4eb84608,"Refactored the SubtitleParser's parse() signature

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111326567"
ojw28,2016-01-04 17:04:30,https://api.github.com/repos/google/ExoPlayer/git/commits/9bcd1069b110fc7158f630905d93ecbe17da5a1f,9bcd1069b110fc7158f630905d93ecbe17da5a1f,"Blacklist CIPVorbisDecoder.

Issue: #1111
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111326378"
ojw28,2016-01-04 16:57:08,https://api.github.com/repos/google/ExoPlayer/git/commits/18a39f3350c72b4daa958d9cc821602102be2308,18a39f3350c72b4daa958d9cc821602102be2308,"Add ability to not offset in PtsTimestampAdjuster.

Issue: #1078
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111325745"
andrewlewis,2016-01-04 15:00:56,https://api.github.com/repos/google/ExoPlayer/git/commits/890dd5afb59440870b1ec2e853e8a384a7c682b4,890dd5afb59440870b1ec2e853e8a384a7c682b4,"Add a peekFully overload with allowEndOfInput.

This is in preparation for removing BufferingInput,
and using peeking instead.

Also add tests for peeking with allowEndOfInput and
resetPeekPosition.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111318236"
ojw28,2016-01-04 14:03:23,https://api.github.com/repos/google/ExoPlayer/git/commits/030f26fd2d1c381f35bbed0be0f1746be3625ed9,030f26fd2d1c381f35bbed0be0f1746be3625ed9,"Fix an unsafe check in FragmentedMp4Extractor.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111315463"
gauravmishra,2016-01-04 12:13:41,https://api.github.com/repos/google/ExoPlayer/git/commits/81a74af933b127bf323a8b45eb16945c88500e4f,81a74af933b127bf323a8b45eb16945c88500e4f,"Adding tests for H265

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=111310622"
AquilesCanta,2015-12-23 15:40:05,https://api.github.com/repos/google/ExoPlayer/git/commits/c31473c5964a6f1faa75934d31d8b333e99e712c,c31473c5964a6f1faa75934d31d8b333e99e712c,"Work around for the Choreographer's resource leak.

This CL adds a class responsible for managing the lifecycle
of a single Choreographer to be shared among all
VideoFrameReleaseTimeHelper instances.

Issue: #1066
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110839824"
gauravmishra,2015-12-22 14:59:47,https://api.github.com/repos/google/ExoPlayer/git/commits/f2fd57cde17e1b62ce2b3c1b5ce6cf20f9958ca9,f2fd57cde17e1b62ce2b3c1b5ce6cf20f9958ca9,"Adding dummy device report log.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110768506"
AquilesCanta,2015-12-17 18:15:15,https://api.github.com/repos/google/ExoPlayer/git/commits/33a2b2d0c55ad9201549e09de48b40410af7a567,33a2b2d0c55ad9201549e09de48b40410af7a567,"Added test cases to the MP4Webvtt parser

This CL is prepares the ground for refactoring the Webvtt parser,
so as to use the common parsing algorithms in both parsers. In order
to do this, the Webvtt Parser will be refactored. As a side note, many
more test cases will be added once the new subtitle features are
implemented. Some useful test cases have also been left for a following
CL, to allow an easy code review.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110466914"
ojw28,2015-12-17 16:02:37,https://api.github.com/repos/google/ExoPlayer/git/commits/dd497b12596d081f202c687be1be20f46c7e3b33,dd497b12596d081f202c687be1be20f46c7e3b33,"Don't check a framerate if we don't have one.

Seems (marginally) nicer than making one up :). I didn't
realize there was a method that didn't require a framerate
to be passed!
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110456874"
andrewlewis,2016-01-04 13:27:52,https://api.github.com/repos/google/ExoPlayer/git/commits/6eea4bdbc34dea86a5bc81991163ca26761cae83,6eea4bdbc34dea86a5bc81991163ca26761cae83,"Merge pull request #1105 from IanDBird/eac3-fixes

Improve identification of (E)AC3 content in MPEGTS and tweak EAC3 parsing"
IanDBird,2016-01-04 08:59:36,https://api.github.com/repos/google/ExoPlayer/git/commits/2b1816c1f286fa29770008c1a24b6173062e4477,2b1816c1f286fa29770008c1a24b6173062e4477,Skip substream id field when parsing EAC3 sync frame format
IanDBird,2016-01-04 08:58:57,https://api.github.com/repos/google/ExoPlayer/git/commits/e33345e5b80074f7c960ace0b1055ebc83c6f0dd,e33345e5b80074f7c960ace0b1055ebc83c6f0dd,Add support to identify (E)AC3 streams via TS descriptor tag
andrewlewis,2015-12-17 12:15:48,https://api.github.com/repos/google/ExoPlayer/git/commits/f4c10dc560fbe46a4fee8bea9b6d7079d3e03ed0,f4c10dc560fbe46a4fee8bea9b6d7079d3e03ed0,Don't hold a lock while rendering in VpxRenderer.
ojw28,2015-12-17 12:15:09,https://api.github.com/repos/google/ExoPlayer/git/commits/b9607321fec71839a2668f609461bb1ab8b28545,b9607321fec71839a2668f609461bb1ab8b28545,Simplify DefaultExtractorInput
ojw28,2015-12-17 12:14:26,https://api.github.com/repos/google/ExoPlayer/git/commits/cf13280590a412a0640ae3036c5b13b943fc54ed,cf13280590a412a0640ae3036c5b13b943fc54ed,Allow onOutputFormatChanged to throw ExoPlaybackException
ojw28,2015-12-16 20:55:04,https://api.github.com/repos/google/ExoPlayer/git/commits/3f05ddbcc16100fb749f80a5c23a551f8fb9bac8,3f05ddbcc16100fb749f80a5c23a551f8fb9bac8,Enforce 80 char line limit in README.md
ojw28,2015-12-16 20:49:19,https://api.github.com/repos/google/ExoPlayer/git/commits/0dbd7aae54ccf8f7310bb4d1b937ffe2c5f2d703,0dbd7aae54ccf8f7310bb4d1b937ffe2c5f2d703,Restore correct version of README (oops).
ojw28,2015-12-16 17:50:53,https://api.github.com/repos/google/ExoPlayer/git/commits/7fbffc873c5d96727e31371f1d5ee7a15dd979b2,7fbffc873c5d96727e31371f1d5ee7a15dd979b2,"Expose control over decoder selection.

This allows implementation and injection of custom MediaCodecSelector
instances. By injecting a custom selector, it's possible for applications
to exert more control over which decoder(s) they instantiate. For example,
applications can force use of a software decoder.

GitHub Issue #938
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110369810"
andrewlewis,2015-12-15 10:07:51,https://api.github.com/repos/google/ExoPlayer/git/commits/8d6c4b8eb5d122b80d325e01fa99dfe817b81ee0,8d6c4b8eb5d122b80d325e01fa99dfe817b81ee0,"Only allow one input buffer to be dequeued at a time.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110238340"
andrewlewis,2015-12-15 08:05:07,https://api.github.com/repos/google/ExoPlayer/git/commits/3a958ed522230053964829febaa282195cc260c6,3a958ed522230053964829febaa282195cc260c6,"Only return true from isReady after rendering.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110231626"
erdemguven,2015-12-14 16:15:23,https://api.github.com/repos/google/ExoPlayer/git/commits/f16b8baf75df49674942b161eb0a20f9dbd6aa0f,f16b8baf75df49674942b161eb0a20f9dbd6aa0f,"ExtractorInput new skip methods to make skip methods analogous to the three read methods.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110155932"
ojw28,2015-12-16 20:33:50,https://api.github.com/repos/google/ExoPlayer/git/commits/009b454b6997ebd774fc7df8750f1d88e2c1939f,009b454b6997ebd774fc7df8750f1d88e2c1939f,Add InputStream to byte[] method to Util.
ojw28,2015-12-16 20:33:04,https://api.github.com/repos/google/ExoPlayer/git/commits/7f8ddeac39269744c720104e93deea668ee4bcf6,7f8ddeac39269744c720104e93deea668ee4bcf6,Added  little endian methods to ParsableByteArray.
ojw28,2015-12-16 19:57:14,https://api.github.com/repos/google/ExoPlayer/git/commits/50d5cbea70bc05876e4af9a52a5c8febe130c5aa,50d5cbea70bc05876e4af9a52a5c8febe130c5aa,"Don't treat network_PID as program_map_PID.

Issue: #1068
Issue: #1001"
ojw28,2015-12-14 14:53:39,https://api.github.com/repos/google/ExoPlayer/git/commits/cbb2cfbf81fc90d981040bb7188d7914df81a354,cbb2cfbf81fc90d981040bb7188d7914df81a354,"Merge pull request #1057 from emakar/dev

blacklisted broken mp3 decoder on api lower than 20"
emakar,2015-12-14 14:50:54,https://api.github.com/repos/google/ExoPlayer/git/commits/7fce590db2ed83456b287e090f14326145343c0e,7fce590db2ed83456b287e090f14326145343c0e,blacklisted broken mp3 decoder on api lower than 20
ojw28,2015-12-14 10:41:40,https://api.github.com/repos/google/ExoPlayer/git/commits/558ae15a77a7c6b76f1595e0ae09e18cfe58b58a,558ae15a77a7c6b76f1595e0ae09e18cfe58b58a,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
erdemguven,2015-12-14 09:10:18,https://api.github.com/repos/google/ExoPlayer/git/commits/a1d5626fe70baed961644a41fc34f23fdc75749f,a1d5626fe70baed961644a41fc34f23fdc75749f,"Fixed DefaultExtractorInput.read(...) to allow to read bytes in the peek buffer
when the dataSource reaches to the end.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110131793"
AquilesCanta,2015-12-11 17:53:27,https://api.github.com/repos/google/ExoPlayer/git/commits/80bd91e636734adea426ff87526f1fa7ef21a5a1,80bd91e636734adea426ff87526f1fa7ef21a5a1,"Add ""Webvtt embedded in MP4"" support

Issue: #689
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110003312"
andrewlewis,2015-12-11 15:34:23,https://api.github.com/repos/google/ExoPlayer/git/commits/63dc769bffda4422a4f3f516cfd0eb4d4a76992f,63dc769bffda4422a4f3f516cfd0eb4d4a76992f,"Improve seeking in MP3 files with XING headers.

Fix behavior of getTimeUs when seeking after the last entry in the table of
contents. Round correctly in getPosition, clipping to the stream duration based
on the input length (if known), falling back to the stream size from the header.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109993852"
bemeyvif,2015-12-12 20:09:43,https://api.github.com/repos/google/ExoPlayer/git/commits/cd1b991c48c06191a352029faa109da3666dc9e0,cd1b991c48c06191a352029faa109da3666dc9e0,"Allow multiple identical but intermittent spans

Multiple identical TTML fontStyles or fontWeights or textDecorations
on the content for a specific moment were rendered as if there's only
one decoration (span).
That's because SpannableStringBuilder.setSpan(span, start, end, flag)
found an earlier set span (the static allocated span's reference
is the same each time) and only refreshed this first span's start and
end values instead of adding a new span at its (new) different range.
This patch removes the static data members;
this makes the newly allocated span objects distinguishable.
A correct implementation is favoured over worries about memory
consumption."
andrewlewis,2015-12-10 17:33:48,https://api.github.com/repos/google/ExoPlayer/git/commits/36ea0f8acd5c032234e19f72efc0bc7057cf33b9,36ea0f8acd5c032234e19f72efc0bc7057cf33b9,"Fix Seeker.getTimeUs for positions before the first frame.

Issue: #1038
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109906628"
ojw28,2015-12-10 14:31:28,https://api.github.com/repos/google/ExoPlayer/git/commits/f37fcddfb02664fc102a5c4146f9a87954bec43c,f37fcddfb02664fc102a5c4146f9a87954bec43c,"Tweak DashTest VP9 constants.

This is a no-op change that just makes the definitions consistent
with the H264 ones, for general neatness/consistency reasons.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109892547"
ojw28,2015-12-14 09:57:18,https://api.github.com/repos/google/ExoPlayer/git/commits/d15da1ff73e8d98bb21c708c9923ec2adfd5eefb,d15da1ff73e8d98bb21c708c9923ec2adfd5eefb,"Merge pull request #1055 from aptly-io/fix_multi_stylespan_per_ttml_cue

Allow multiple identical but intermittent spans"
bemeyvif,2015-12-12 20:09:43,https://api.github.com/repos/google/ExoPlayer/git/commits/d753378b2f5111bd715968530f2cf552015e2351,d753378b2f5111bd715968530f2cf552015e2351,"Allow multiple identical but intermittent spans

Multiple identical TTML fontStyles or fontWeights or textDecorations
on the content for a specific moment were rendered as if there's only
one decoration (span).
That's because SpannableStringBuilder.setSpan(span, start, end, flag)
found an earlier set span (the static allocated span's reference
is the same each time) and only refreshed this first span's start and
end values instead of adding a new span at its (new) different range.
This patch removes the static data members;
this makes the newly allocated span objects distinguishable.
A correct implementation is favoured over worries about memory
consumption."
andrewlewis,2015-12-10 17:33:48,https://api.github.com/repos/google/ExoPlayer/git/commits/38148b303fe5df9e646fba1aba818761df297f9f,38148b303fe5df9e646fba1aba818761df297f9f,"Fix Seeker.getTimeUs for positions before the first frame.

Issue: #1038
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109906628"
ojw28,2015-12-10 14:31:28,https://api.github.com/repos/google/ExoPlayer/git/commits/99b34a1287fe55fd6ddcc2302793ade6bfce6d30,99b34a1287fe55fd6ddcc2302793ade6bfce6d30,"Tweak DashTest VP9 constants.

This is a no-op change that just makes the definitions consistent
with the H264 ones, for general neatness/consistency reasons.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109892547"
ojw28,2015-12-10 18:16:27,https://api.github.com/repos/google/ExoPlayer/git/commits/7bc341f385551974354f7b3d07cded7bdbb0d720,7bc341f385551974354f7b3d07cded7bdbb0d720,Update README.md
ojw28,2015-12-10 18:13:27,https://api.github.com/repos/google/ExoPlayer/git/commits/8a839fcf950258dd27375b2d187e25b036958ee2,8a839fcf950258dd27375b2d187e25b036958ee2,Update README.md
ojw28,2015-12-10 18:12:16,https://api.github.com/repos/google/ExoPlayer/git/commits/4ff5b1f06b5f9738c5d3c3b66e4a385f3a37f960,4ff5b1f06b5f9738c5d3c3b66e4a385f3a37f960,Update README.md
ojw28,2015-12-10 18:10:30,https://api.github.com/repos/google/ExoPlayer/git/commits/f2f3f01d61585f356ae3496127b40b69ca06deac,f2f3f01d61585f356ae3496127b40b69ca06deac,Update README.md
ojw28,2015-12-10 18:08:39,https://api.github.com/repos/google/ExoPlayer/git/commits/748e5f301308b40e4cc55ca36af0ac4629b0418e,748e5f301308b40e4cc55ca36af0ac4629b0418e,Update README.md
ojw28,2015-12-10 18:06:46,https://api.github.com/repos/google/ExoPlayer/git/commits/247ac80b52387f0b5f78d69689aa1a14a5475639,247ac80b52387f0b5f78d69689aa1a14a5475639,Update README.md
ojw28,2015-12-10 17:50:12,https://api.github.com/repos/google/ExoPlayer/git/commits/f926d6a67ec7c844627b66caa9724089dd8dabbf,f926d6a67ec7c844627b66caa9724089dd8dabbf,"Merge pull request #1044 from ryanseys/dev

Clean up README.md"
ryanseys,2015-12-10 17:47:03,https://api.github.com/repos/google/ExoPlayer/git/commits/f8b935795546e46d530d45c6ce0968ef37ae7318,f8b935795546e46d530d45c6ce0968ef37ae7318,"Clean up README.md

- Remove redundant Readme in title
- Remove unnecessary Description header
- Move installation steps to immediately follow description
- Reword some parts for clarification"
ojw28,2015-12-08 17:57:11,https://api.github.com/repos/google/ExoPlayer/git/commits/345e4ec74e81c4413022d5952017e9e71f3c6af6,345e4ec74e81c4413022d5952017e9e71f3c6af6,"Bump version to 1.5.3.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109698010"
ojw28,2015-12-08 17:17:30,https://api.github.com/repos/google/ExoPlayer/git/commits/bdc7633f5a26893aed1e7c0e3b3643b77888abe3,bdc7633f5a26893aed1e7c0e3b3643b77888abe3,Cleanup in TsExtractor.
ojw28,2015-12-08 12:16:26,https://api.github.com/repos/google/ExoPlayer/git/commits/84307eff507fa428662fda660b4d6dd512984c77,84307eff507fa428662fda660b4d6dd512984c77,"Document ChunkSampleSource constructors.

Issue: #1030
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109674800"
ojw28,2015-12-08 10:10:00,https://api.github.com/repos/google/ExoPlayer/git/commits/d7f40be3852330b0352b444ec7e381ef96e19086,d7f40be3852330b0352b444ec7e381ef96e19086,"Update release notes.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109667763"
ojw28,2015-12-08 11:39:12,https://api.github.com/repos/google/ExoPlayer/git/commits/c0b19ed72b664266fc48a428179044e54cd42563,c0b19ed72b664266fc48a428179044e54cd42563,"Merge pull request #1007 from alex3d/large-pmt

Fixed large PMT packet parsing"
ojw28,2015-12-07 17:59:33,https://api.github.com/repos/google/ExoPlayer/git/commits/fb7ddb722c7d377d54817caebb53d014d679b283,fb7ddb722c7d377d54817caebb53d014d679b283,"Minor tweaks to AudioTrack playback params logic.

- Use allowDefaults to fix crash if params are passed without
  the speed being explicitly set.
- Allow null to be passed to clear previously set params.
- Clarify in doc that the passed params shouldn't be modified
  after they're passed.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109591580"
vigneshvg,2015-12-07 11:00:52,https://api.github.com/repos/google/ExoPlayer/git/commits/00f84fc85fd21c4910344b19be3f98bb0b49b943,00f84fc85fd21c4910344b19be3f98bb0b49b943,"Move APP_PLATFORM to Application.mk

Fixes github Issue #944
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109563981"
vigneshvg,2015-12-07 09:30:20,https://api.github.com/repos/google/ExoPlayer/git/commits/e4cf93d04cd0288a189acefe66f8aaabbe72a4b7,e4cf93d04cd0288a189acefe66f8aaabbe72a4b7,"Fix libyuv clone URL

Fixes Github issue #1015
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109559497"
vigneshvg,2015-12-07 09:22:46,https://api.github.com/repos/google/ExoPlayer/git/commits/42984653fb7f470b37862816c6baa4c493119be3,42984653fb7f470b37862816c6baa4c493119be3,"Update libyuv URL in vp9 extension instructions
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109559103"
andrewlewis,2015-12-03 17:59:02,https://api.github.com/repos/google/ExoPlayer/git/commits/20e3ca73eccd3b182fa377bd25ef478cf07ba501,20e3ca73eccd3b182fa377bd25ef478cf07ba501,"Don't use CIPMP3Decoder.

Issue: #1000
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109318738"
andrewlewis,2015-12-01 17:31:40,https://api.github.com/repos/google/ExoPlayer/git/commits/46481fabccf3cbfe3fccde310e9e4ac2dc4a58b4,46481fabccf3cbfe3fccde310e9e4ac2dc4a58b4,"Mark AudioTrackUtilV23 overriding methods with @Override.

-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109093558"
andrewlewis,2015-12-01 08:17:51,https://api.github.com/repos/google/ExoPlayer/git/commits/c685e279728f0504f4bac81e616091c1a4c1cc07,c685e279728f0504f4bac81e616091c1a4c1cc07,"Fix {Opus,Vpx}DecoderWrapper flush() buffer handling.

Currently, input/output buffers can 'leak' if they are dequeued then the decoder
is flush()ed. This happens if an input buffer is dequeued then a discontinuity
is read, or an output buffer is dequeued and is early. If this happens several
times, no more buffers are available.

This change makes flush() work like MediaCodec: it returns all dequeued
input/output buffers to the codec. Keeping the behavior in line with MediaCodec
might make it easier to factor out a common decoder interface in the future.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=109054178"
AquilesCanta,2015-11-30 18:05:56,https://api.github.com/repos/google/ExoPlayer/git/commits/1855a5a97d5fb6e6733d390148923a4c559f6546,1855a5a97d5fb6e6733d390148923a4c559f6546,"Fixed FFWD/RWD keys support in DemoPlayer

Overrided the dispatchKeyEvent of MediaController to allow FFWD and RWD through
remote control keys.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=108989028"
AquilesCanta,2015-11-30 10:20:24,https://api.github.com/repos/google/ExoPlayer/git/commits/6570ef0e483cf6bc2908c0e4b4ff7316a9453f8e,6570ef0e483cf6bc2908c0e4b4ff7316a9453f8e,"Add support for AudioTrack pitch/speed alteration on API 23.

Issue #26
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=108958826"
alex3d,2015-11-30 16:26:20,https://api.github.com/repos/google/ExoPlayer/git/commits/f752a023c81ef2b19b389f5d6b616724233ad83d,f752a023c81ef2b19b389f5d6b616724233ad83d,Fixed large (>ts packet) PMT parsing
andrewlewis,2015-11-30 16:01:35,https://api.github.com/repos/google/ExoPlayer/git/commits/33506adab5732e46ef90e5fa650707862e5e8a36,33506adab5732e46ef90e5fa650707862e5e8a36,Remove executable bit from some test assets.
ojw28,2015-11-27 18:10:47,https://api.github.com/repos/google/ExoPlayer/git/commits/daaebd7d72c40ad474278e6f701830f8995f3357,daaebd7d72c40ad474278e6f701830f8995f3357,Remove file that shouldn't be checked in
ojw28,2015-11-27 18:09:56,https://api.github.com/repos/google/ExoPlayer/git/commits/9925f8f9b83f432d057ca2136f42007999818c70,9925f8f9b83f432d057ca2136f42007999818c70,Add proguard config for VP9 extension
ojw28,2015-11-27 16:38:30,https://api.github.com/repos/google/ExoPlayer/git/commits/a6bfe02d24bba6dade58a7a996ddb0959307b8bc,a6bfe02d24bba6dade58a7a996ddb0959307b8bc,"Add additional Widevine samples + improve errors.

* Add additional Widevine samples.
* Improve error messaging in demo app around decoders.
* Display toasts for playback errors related to missing insecure
  decoders, missing secure decoders, decoder instantiation failure
  and decoder query failure.
* Remove checks from SampleChooserActivity, since the above largely
  covers off this problem."
ojw28,2015-11-27 16:03:37,https://api.github.com/repos/google/ExoPlayer/git/commits/c2df814b5890826d667eae73e5c7f05ca8614414,c2df814b5890826d667eae73e5c7f05ca8614414,"Add special WebvttExtractor for HLS.

This is the main component required to enable WebVTT subtitles in HLS.
It passes through each WebVTT file as a sample, and derives the correct,
adjusted timestamp for each of them on the way through.

Not yet wired up because we need to properly share the same
PtsTimestampAdjuster everywhere, and also stop instantiating new instances
of the adjuster. The adjuster will also need to correctly handle
discontinuities, since we'll no longer be creating new instances of it.

Issue: #151"
ojw28,2015-11-27 16:02:12,https://api.github.com/repos/google/ExoPlayer/git/commits/1a9b2be5510bd9698c90aeaaa28a9e1ba965c0a6,1a9b2be5510bd9698c90aeaaa28a9e1ba965c0a6,"WebVTT styling.

- parse webvtt cue
- remove all tags from string (supported or not)
- apply spans for b, i and u
- honor class names in tags to properly parse the cue but do not apply styles for them"
ojw28,2015-11-27 15:59:25,https://api.github.com/repos/google/ExoPlayer/git/commits/cdb6ac40738fc0d1b265840b3e8fc634e00c40d6,cdb6ac40738fc0d1b265840b3e8fc634e00c40d6,"Added a isLocalFileUrlOrPath(Uri) method to remove manual checks

Also replaced the manual checks with a call to this method"
ojw28,2015-11-27 15:58:11,https://api.github.com/repos/google/ExoPlayer/git/commits/c667feca4b156ef90b31fea87bd2c55985cb8c4e,c667feca4b156ef90b31fea87bd2c55985cb8c4e,"Get the physical display resolution if possible.

Issue: #800"
ojw28,2015-11-27 15:57:20,https://api.github.com/repos/google/ExoPlayer/git/commits/c62e535cf047c43a122a11c675413d7efa920a0b,c62e535cf047c43a122a11c675413d7efa920a0b,"Make HLS behind-live-window behavior consistent.

- Propagate BehindLiveWindowException if we fall off the back
  of an HLS live stream.
- Consolidate seekPositionUs and playbackPositionUs into a
  single parameter.

Issue: #765"
ojw28,2015-11-27 15:56:46,https://api.github.com/repos/google/ExoPlayer/git/commits/81040e8d231748b1e22506dc74f396c7443c6421,81040e8d231748b1e22506dc74f396c7443c6421,Remove stray author tag
ojw28,2015-11-25 17:07:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4bb8bea9528a803a201b809e8bd4abe3f0b460e8,4bb8bea9528a803a201b809e8bd4abe3f0b460e8,"Subtitle renditions can be represented by Variant instances.

This will make it easier to use HlsChunkSource with WebVTT HLS
media playlists."
ojw28,2015-11-25 17:07:09,https://api.github.com/repos/google/ExoPlayer/git/commits/0236831e48cb64989f9dd8498b39c3be850362c9,0236831e48cb64989f9dd8498b39c3be850362c9,Remove author tags.
ojw28,2015-11-25 17:05:59,https://api.github.com/repos/google/ExoPlayer/git/commits/761b8137eb9e7b222c21cdbe11496d24118580d9,761b8137eb9e7b222c21cdbe11496d24118580d9,Use API level 23 constants.
ojw28,2015-11-25 17:05:20,https://api.github.com/repos/google/ExoPlayer/git/commits/72f093c4f6d66cea021756e1cbe931b52f55a79e,72f093c4f6d66cea021756e1cbe931b52f55a79e,"WebVTT parser improvements.

* Split findNextCueHeader and validateWebVttHeader into static methods.
  This is a step toward WebVTT in HLS, where we'll need to re-use these
  to peek at the top of the WebVTT file (they'll be moved into a util
  class).
* Made parser robust against bad cue headers + added a test.
* Removed spurious looking assertion in WebvttSubtitle."
ojw28,2015-11-25 17:03:57,https://api.github.com/repos/google/ExoPlayer/git/commits/963e604ffd1cab42112121901b4908ed30bdcc25,963e604ffd1cab42112121901b4908ed30bdcc25,"Misc cleanup.

- Remove some unnecessary condition checking.
- Rename variable to a better name."
ojw28,2015-11-25 17:03:11,https://api.github.com/repos/google/ExoPlayer/git/commits/dc94e44b1ffc056261ffe012491d8c079e2a359f,dc94e44b1ffc056261ffe012491d8c079e2a359f,"Make output mode a tri-state flag instead of binary

This CL fixes the case when a surface is attached *after* playback
has started."
ojw28,2015-11-25 17:02:19,https://api.github.com/repos/google/ExoPlayer/git/commits/61fb0c558ef181138705a55e33261af0b30f9d35,61fb0c558ef181138705a55e33261af0b30f9d35,"Fixed demo player permissions bug

API 23 requires the permissions to be granted at runtime.
This CL submits a solution for EXTERNAL_STORAGE, since it
is the only dangerous privilege required so far."
ojw28,2015-11-25 17:01:21,https://api.github.com/repos/google/ExoPlayer/git/commits/1fc32d56c8b0583384e9909a00fc137d527883b8,1fc32d56c8b0583384e9909a00fc137d527883b8,check maximum consecutively dropped frames in video tests
ojw28,2015-11-25 17:00:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ddaa9092ec6cda22145f0f562e4463f01f312175,ddaa9092ec6cda22145f0f562e4463f01f312175,"Parse the sequence number at discontinuities.

This is required to match up segments in one playlist (e.g. VTT)
to those in another (e.g. Audio/Video)."
ojw28,2015-11-25 16:50:30,https://api.github.com/repos/google/ExoPlayer/git/commits/6f62b499c505fbf33bfa15dd3509922166e29611,6f62b499c505fbf33bfa15dd3509922166e29611,Merge seek/playback positions in ChunkSource interface.
ojw28,2015-11-25 16:49:25,https://api.github.com/repos/google/ExoPlayer/git/commits/f11a204b4abb6ed56fc6dd7fc8d15af977b83604,f11a204b4abb6ed56fc6dd7fc8d15af977b83604,"Remove caption parser strict modes.

They don't seem particularly useful; they don't technically force
strict compliance, but rather just catch a few token things in
each case. Furthermore, for playback, probably the right thing to
do is to always turn strict mode off."
ojw28,2015-11-25 16:48:45,https://api.github.com/repos/google/ExoPlayer/git/commits/4fbe4fc7d56875620f757ba952d553cd120a3b1e,4fbe4fc7d56875620f757ba952d553cd120a3b1e,Throw correct exception.
ojw28,2015-11-25 16:47:52,https://api.github.com/repos/google/ExoPlayer/git/commits/042bd2ff826d3dee65aab014fe4b5a8cc1d06051,042bd2ff826d3dee65aab014fe4b5a8cc1d06051,Clean up WebvttParser somewhat.
ojw28,2015-11-25 16:47:05,https://api.github.com/repos/google/ExoPlayer/git/commits/7e2fffe74dd7ac77246c6ebc0dd63ef3dc60b16e,7e2fffe74dd7ac77246c6ebc0dd63ef3dc60b16e,"Make sure we use the correct mimeType with DRM initialization data.

We were previously using the container format of the media being
played as the mimeType generating key requests, but this is not
always correct. As an example, where a manifest contains webm streams
but specifies initialization data using cenc:pssh elements in the
manifest, the media has a webm mimeType, but the DRM initialization
data has an mp4 mimeType."
ojw28,2015-11-25 16:45:37,https://api.github.com/repos/google/ExoPlayer/git/commits/ad7237b5d02339075cd9d58d8e57e35439fcd8e2,ad7237b5d02339075cd9d58d8e57e35439fcd8e2,Handle E-AC-3 audio in HLS.
ojw28,2015-11-25 16:44:43,https://api.github.com/repos/google/ExoPlayer/git/commits/9fd575e1beefc3787b25e7f1ef91a0a346a0a146,9fd575e1beefc3787b25e7f1ef91a0a346a0a146,Allow Representations to have custom cache keys.
ojw28,2015-11-25 16:43:56,https://api.github.com/repos/google/ExoPlayer/git/commits/632ccc6c2070d2186d323951607699dc0c236c52,632ccc6c2070d2186d323951607699dc0c236c52,"Simplify passthrough playback rate calculation.

This change also fixes pre-M DTS HD passthrough playback on NVIDIA Shield."
ojw28,2015-11-25 16:42:12,https://api.github.com/repos/google/ExoPlayer/git/commits/b8e7e1077ec2635de84428edf51f5df29e45f9ea,b8e7e1077ec2635de84428edf51f5df29e45f9ea,"Fix bad pixel w:h ratio calculation in H262 reader.

It appears the spec calculation gives the h:w pixel ratio, where-as
we want w:h. It's pretty easy to convince oneself that this way round
is correct. Consider a video that's 100px by 100px, and setting
aspectRatioCode=3 to achieve this. The pixelWidthHeightRatio needs to
be 16/9 and not 9/16 :).

Issue: #965"
ojw28,2015-11-17 16:35:17,https://api.github.com/repos/google/ExoPlayer/git/commits/18ae955fea6c8d7f978b236292d00a9029547be0,18ae955fea6c8d7f978b236292d00a9029547be0,Update release notes.
ojw28,2015-11-17 16:29:42,https://api.github.com/repos/google/ExoPlayer/git/commits/57ee90a96c62d25721b77ec1488559c783604963,57ee90a96c62d25721b77ec1488559c783604963,Clean up AudioTrack.
ojw28,2015-11-17 16:27:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a4f1e3ce53f0bf83d3ebc69a837d5ed4345dc69a,a4f1e3ce53f0bf83d3ebc69a837d5ed4345dc69a,Don't re-buffer when AudioTrack underruns occur.
ojw28,2015-11-17 16:21:03,https://api.github.com/repos/google/ExoPlayer/git/commits/80d699920c0d2caa5112f901ccbdcee870ef54c0,80d699920c0d2caa5112f901ccbdcee870ef54c0,"If we have an output buffer, we're ready."
ojw28,2015-11-17 16:18:43,https://api.github.com/repos/google/ExoPlayer/git/commits/c92bc3e6c287871a7436a46863997611ba477ef6,c92bc3e6c287871a7436a46863997611ba477ef6,Enhance DASH playback tests
ojw28,2015-11-17 16:06:43,https://api.github.com/repos/google/ExoPlayer/git/commits/e65f7264583d3ccc49143b6e442381a4ead91261,e65f7264583d3ccc49143b6e442381a4ead91261,Allow video format filtering without viewport constraint.
ojw28,2015-11-17 16:03:10,https://api.github.com/repos/google/ExoPlayer/git/commits/80e829d7d12a41f80e40a06845d31955d190b47f,80e829d7d12a41f80e40a06845d31955d190b47f,Fix some warnings.
ojw28,2015-11-17 16:01:28,https://api.github.com/repos/google/ExoPlayer/git/commits/8234a251103294589bb4fd8c876d27a91eb2bdc5,8234a251103294589bb4fd8c876d27a91eb2bdc5,"Add H262 support for TS.

Built on top of https://github.com/google/ExoPlayer/pull/915."
ojw28,2015-11-17 15:55:57,https://api.github.com/repos/google/ExoPlayer/git/commits/b1e4283058e1ec47fe9555dacbdb23b6e0f60063,b1e4283058e1ec47fe9555dacbdb23b6e0f60063,Some cleanup to TS H264/H265 readers.
ojw28,2015-11-17 15:52:58,https://api.github.com/repos/google/ExoPlayer/git/commits/d96fe37c05693a0682d466f435ac8b9d8eb362f6,d96fe37c05693a0682d466f435ac8b9d8eb362f6,Don't use getClass().getSimpleName() where it's pointless to do so
ojw28,2015-11-17 15:52:16,https://api.github.com/repos/google/ExoPlayer/git/commits/bcbfe9f7083e98e7c1784d38e585dc35c59b3228,bcbfe9f7083e98e7c1784d38e585dc35c59b3228,Add AMR-NB and AMR-WB support to ExoPlayer
ojw28,2015-11-17 15:50:20,https://api.github.com/repos/google/ExoPlayer/git/commits/b293cf2a76b6181fd8c4261c74d5a705f24eb739,b293cf2a76b6181fd8c4261c74d5a705f24eb739,"Parse QuickTime variant audio sample entries.

Issue: #958"
ojw28,2015-11-17 15:45:42,https://api.github.com/repos/google/ExoPlayer/git/commits/830229c8218dc10001cf521a9d9dbe6360d9f6cf,830229c8218dc10001cf521a9d9dbe6360d9f6cf,Fix Libopus renderer's isReady to take into account outputBuffer avail.
ojw28,2015-11-17 15:43:48,https://api.github.com/repos/google/ExoPlayer/git/commits/f8d2229f522fb607274476ad7540e2e8bae75e27,f8d2229f522fb607274476ad7540e2e8bae75e27,Fix build break
ojw28,2015-11-17 15:43:24,https://api.github.com/repos/google/ExoPlayer/git/commits/a3f894b86ba85503da361bc3db97e1c7d25aa32f,a3f894b86ba85503da361bc3db97e1c7d25aa32f,Add support for extracting E-AC-3 in Matroska files.
ojw28,2015-11-17 15:42:40,https://api.github.com/repos/google/ExoPlayer/git/commits/5de7638f74704b980a2c0f565ade86d17eadb633,5de7638f74704b980a2c0f565ade86d17eadb633,Handle laggy manifest servers.  Don't reprocess discarded manifests twice.
ojw28,2015-11-17 15:41:30,https://api.github.com/repos/google/ExoPlayer/git/commits/b27dc9b7dc10db03db4410586bc642c6b0fbc34e,b27dc9b7dc10db03db4410586bc642c6b0fbc34e,Clean up E-AC-3 naming.
ojw28,2015-11-17 15:38:54,https://api.github.com/repos/google/ExoPlayer/git/commits/269757cb3ec162b0a6316cc86bd8c9dc783afce0,269757cb3ec162b0a6316cc86bd8c9dc783afce0,Clean up MP4/FMP4 shouldParse methods.
ojw28,2015-11-17 15:32:25,https://api.github.com/repos/google/ExoPlayer/git/commits/3cbb1fa1b99ba86d32c6a9ae9ce364ea9abdccf7,3cbb1fa1b99ba86d32c6a9ae9ce364ea9abdccf7,Tweak error string
ojw28,2015-11-13 14:04:32,https://api.github.com/repos/google/ExoPlayer/git/commits/be95968fe293f2eb8d8e47ef2e5ed96ae31b2c74,be95968fe293f2eb8d8e47ef2e5ed96ae31b2c74,"Merge pull request #957 from Bastian35022/dev

 Check for valid periods in DASH MPD after parsing."
Bastian35022,2015-11-13 13:44:50,https://api.github.com/repos/google/ExoPlayer/git/commits/1f309f7edf910501dccbf85101280b94d01b8ba1,1f309f7edf910501dccbf85101280b94d01b8ba1,Check for valid periods in DASH MPD after parsing.
ojw28,2015-11-05 03:11:06,https://api.github.com/repos/google/ExoPlayer/git/commits/a0b52bc136ae153615ebf1caffd4b5f2caafc537,a0b52bc136ae153615ebf1caffd4b5f2caafc537,"Merge pull request #919 from castlabs/feature/smooth_streaming_mime_types

Added missing MimeTypes to Smooth Streaming manifest parser"
ojw28,2015-10-30 12:02:18,https://api.github.com/repos/google/ExoPlayer/git/commits/a679e39ab76a4d471bca4be3e177b2edfa182fe6,a679e39ab76a4d471bca4be3e177b2edfa182fe6,Limit max line length to 100 chars.
ojw28,2015-10-30 11:58:36,https://api.github.com/repos/google/ExoPlayer/git/commits/2cb6db2b42939f052e428b00a530b2929a3f073f,2cb6db2b42939f052e428b00a530b2929a3f073f,Update Widevine VP9 samples
andrewlewis,2015-10-29 16:37:48,https://api.github.com/repos/google/ExoPlayer/git/commits/c53495e7e2c59e1a6a9c26d957019143cf5f56bd,c53495e7e2c59e1a6a9c26d957019143cf5f56bd,"Check all descriptors for a registration_descriptor.

Issue: #898"
andrewlewis,2015-10-29 16:28:00,https://api.github.com/repos/google/ExoPlayer/git/commits/b64986ce8275dc3c723bb15bf9f00a808ab19b16,b64986ce8275dc3c723bb15bf9f00a808ab19b16,Blacklist bad decoders
ojw28,2015-10-28 22:04:32,https://api.github.com/repos/google/ExoPlayer/git/commits/ffc925f19464cdd50e58cf5d548a5fe89ce0abd9,ffc925f19464cdd50e58cf5d548a5fe89ce0abd9,"Merge pull request #885 from RikHeijdens/parse-hls-name-label

Parse HLS NAME label from the MasterPlaylist"
RikHeijdens,2015-10-28 20:57:29,https://api.github.com/repos/google/ExoPlayer/git/commits/d49d3e2cd3f92d87737eed9b5c4a35224a0bca6f,d49d3e2cd3f92d87737eed9b5c4a35224a0bca6f,"Changed formatName to something more concise

And fixed the indentation"
RikHeijdens,2015-10-28 15:14:05,https://api.github.com/repos/google/ExoPlayer/git/commits/4a77d1a44e6eb0883625fda1575a831a5fec8b2b,4a77d1a44e6eb0883625fda1575a831a5fec8b2b,Remove unnecessary getter
RikHeijdens,2015-10-28 15:10:58,https://api.github.com/repos/google/ExoPlayer/git/commits/022c1ad6ddf1b5b968772811105e20c591476f4c,022c1ad6ddf1b5b968772811105e20c591476f4c,Store HLS trackname in the Variant class instead of Format class
RikHeijdens,2015-10-28 15:02:44,https://api.github.com/repos/google/ExoPlayer/git/commits/1c1f5af5d2830932c770a712d7a608369f706ddf,1c1f5af5d2830932c770a712d7a608369f706ddf,Changed the use of the name variable
ojw28,2015-10-28 13:42:40,https://api.github.com/repos/google/ExoPlayer/git/commits/b9224160a36a911095d77089c4d4f9d5d538bb20,b9224160a36a911095d77089c4d4f9d5d538bb20,Use equals rather than == for string equality
ojw28,2015-10-27 21:06:38,https://api.github.com/repos/google/ExoPlayer/git/commits/4237e3d391e3e265944544f6408b545bd5f21f5e,4237e3d391e3e265944544f6408b545bd5f21f5e,Cleanup following #884 II
ojw28,2015-10-27 21:03:16,https://api.github.com/repos/google/ExoPlayer/git/commits/02cc495f1c10e3302e76b98454bfa325106c3851,02cc495f1c10e3302e76b98454bfa325106c3851,Cleanup following #884
ojw28,2015-10-27 20:38:10,https://api.github.com/repos/google/ExoPlayer/git/commits/e252dddeb010a81da637e4c3dc814e234561daa6,e252dddeb010a81da637e4c3dc814e234561daa6,Merge branch 'RikHeijdens-mediaformat-id-dash' into dev
ojw28,2015-10-27 20:37:54,https://api.github.com/repos/google/ExoPlayer/git/commits/f4b07ab1470ad7b81071941ff1638fa36b1cbacb,f4b07ab1470ad7b81071941ff1638fa36b1cbacb,Resolve conflicts
ojw28,2015-10-27 20:18:28,https://api.github.com/repos/google/ExoPlayer/git/commits/f16ba3baacdc9f7a4fd2a2720eeb78df68f9764b,f16ba3baacdc9f7a4fd2a2720eeb78df68f9764b,Update release notes
ojw28,2015-10-27 20:07:54,https://api.github.com/repos/google/ExoPlayer/git/commits/cda5b2035344ba3ce3191f8d1e8e7ef0c3f5712f,cda5b2035344ba3ce3191f8d1e8e7ef0c3f5712f,Bump version to 1.5.2
ojw28,2015-10-27 18:57:26,https://api.github.com/repos/google/ExoPlayer/git/commits/62a89ae90cf30f98f01fed18cda55ef64f01c853,62a89ae90cf30f98f01fed18cda55ef64f01c853,tweak javadoc
ojw28,2015-10-27 18:36:24,https://api.github.com/repos/google/ExoPlayer/git/commits/dd4d4e8f7ec298aeb36776043507db3515a682b7,dd4d4e8f7ec298aeb36776043507db3515a682b7,Add libopus/libvpx availability checks
ojw28,2015-10-27 18:23:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4422e8a0155642a4708e1f50b1fb2c340c78f56d,4422e8a0155642a4708e1f50b1fb2c340c78f56d,Further cleanup to FLV extractor
ojw28,2015-10-27 18:20:53,https://api.github.com/repos/google/ExoPlayer/git/commits/f91ea9039dae92793fc62caa4080d4a58a947771,f91ea9039dae92793fc62caa4080d4a58a947771,"Read AC-3 and HEVC signaled by private registration_descriptor.

Issue: #898"
ojw28,2015-10-26 15:53:29,https://api.github.com/repos/google/ExoPlayer/git/commits/6fb5052d2fb6208fd56d5ade55a5f45d0bfa34d9,6fb5052d2fb6208fd56d5ade55a5f45d0bfa34d9,Fix vp9 samples
ojw28,2015-10-26 15:52:36,https://api.github.com/repos/google/ExoPlayer/git/commits/22a302c28e9f3bdc990f19a258323b9c9a94d00f,22a302c28e9f3bdc990f19a258323b9c9a94d00f,Fix widevine samples
ojw28,2015-10-26 15:34:29,https://api.github.com/repos/google/ExoPlayer/git/commits/195c0c8884be83a03f5a8ac1376f2201ff0dcc13,195c0c8884be83a03f5a8ac1376f2201ff0dcc13,"Fix parsing of multi-channel AAC audio specific config in MP4 and ADTS.

Previously, when spectral band replication (SBR) or parametric
stereo (PS) was in use in an MPEG-4 stream, the channel configuration
chosen was likely incorrect. The channel configuration was *always*
incorrect for 7.1 audio (gave 7 channels instead of 8)."
ojw28,2015-10-26 15:33:53,https://api.github.com/repos/google/ExoPlayer/git/commits/9246fbbe7d838c02462408636d02a6fd1c2763a7,9246fbbe7d838c02462408636d02a6fd1c2763a7,Add exception type for manifest load errors.
ojw28,2015-10-26 15:32:49,https://api.github.com/repos/google/ExoPlayer/git/commits/f3113e7055bb2474d52f192a8fbacf752d35de22,f3113e7055bb2474d52f192a8fbacf752d35de22,Use MediaCodecUtil.IsSizeAndRateSupportedV21 where available.
ojw28,2015-10-26 15:31:09,https://api.github.com/repos/google/ExoPlayer/git/commits/a74fd17e925ae4146aade446d667ca62cf4c1923,a74fd17e925ae4146aade446d667ca62cf4c1923,"Handle curle braces in SystemID UUID.

Issue: #863"
ojw28,2015-10-26 15:29:10,https://api.github.com/repos/google/ExoPlayer/git/commits/21c1b8ca0644d3abf63b2f0141974952c5c1e0e3,21c1b8ca0644d3abf63b2f0141974952c5c1e0e3,"Add basic handling for edit lists in MP4 streams.

Issue: #874"
ojw28,2015-10-26 15:28:10,https://api.github.com/repos/google/ExoPlayer/git/commits/b03278f2bf5c0eb114730ffc63bf172560915ecb,b03278f2bf5c0eb114730ffc63bf172560915ecb,Don't assume representations are video in first two DashChunkSource constructors.
ojw28,2015-10-26 15:26:05,https://api.github.com/repos/google/ExoPlayer/git/commits/4d9dd3f6e64be9379c3e10750345c02a2e421fb5,4d9dd3f6e64be9379c3e10750345c02a2e421fb5,Remove spurious blank line
ojw28,2015-10-26 15:25:46,https://api.github.com/repos/google/ExoPlayer/git/commits/941ca3f3045eea47858676db895de67af4f05075,941ca3f3045eea47858676db895de67af4f05075,Add readShort to ParsableByteArray
ojw28,2015-10-26 15:25:02,https://api.github.com/repos/google/ExoPlayer/git/commits/0de2d3a863efac93399273ce7d317f33aba8e227,0de2d3a863efac93399273ce7d317f33aba8e227,Add VP9 playback tests
ojw28,2015-10-26 15:23:06,https://api.github.com/repos/google/ExoPlayer/git/commits/b766253116d687e15c6052e3ef25d1b419933973,b766253116d687e15c6052e3ef25d1b419933973,m
ojw28,2015-10-26 15:19:10,https://api.github.com/repos/google/ExoPlayer/git/commits/14c190310c8db1c43eb349c2b6e9f4125b217421,14c190310c8db1c43eb349c2b6e9f4125b217421,Fix broken Javadoc
ojw28,2015-10-26 15:18:53,https://api.github.com/repos/google/ExoPlayer/git/commits/c59fc4756501496ffcdc45c0c4725aaae2176f7a,c59fc4756501496ffcdc45c0c4725aaae2176f7a,Throw ParserException from parsers when a parse exception occurs.
ojw28,2015-10-26 15:16:56,https://api.github.com/repos/google/ExoPlayer/git/commits/13aaa5a5db234657ff2e136d8505d70bd4c27134,13aaa5a5db234657ff2e136d8505d70bd4c27134,Use C.MICROS_PER_SECOND more consistently.
ojw28,2015-10-26 15:15:42,https://api.github.com/repos/google/ExoPlayer/git/commits/daa583591520057148b3ad0b4ba90af26b996053,daa583591520057148b3ad0b4ba90af26b996053,"Timestamp HEVC samples based on the first NALU's timestamp.

Issue: #893"
ojw28,2015-10-26 15:11:39,https://api.github.com/repos/google/ExoPlayer/git/commits/c0a81e1138078d9539332b62311ed35f4cd18455,c0a81e1138078d9539332b62311ed35f4cd18455,Update Widevine test streams.
ojw28,2015-10-26 15:02:32,https://api.github.com/repos/google/ExoPlayer/git/commits/c0f0cbcb7a645dc59158b499d81ed22ec4fa56d5,c0f0cbcb7a645dc59158b499d81ed22ec4fa56d5,Move to target API level 23
ojw28,2015-10-26 14:53:27,https://api.github.com/repos/google/ExoPlayer/git/commits/d8b1f9efccc09597fb426e39c11eba51aa3c028f,d8b1f9efccc09597fb426e39c11eba51aa3c028f,"Add API to get the version of native decoders

Add API to get the version of underlying libvpx and libopus
decoders. Also update the demo app to show the version in the UI."
RikHeijdens,2015-10-26 13:59:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ec65fe952c292495c9837b9ec88b78b901e8fd86,ec65fe952c292495c9837b9ec88b78b901e8fd86,Fixed code indentation
RikHeijdens,2015-10-26 13:59:05,https://api.github.com/repos/google/ExoPlayer/git/commits/bc3125c5d26c68c5724de8c82063653e9893a597,bc3125c5d26c68c5724de8c82063653e9893a597,Fixed MediaFormatTests
ojw28,2015-10-26 11:56:25,https://api.github.com/repos/google/ExoPlayer/git/commits/02d42753ec99775fc0a4f1c528f27295f83f6677,02d42753ec99775fc0a4f1c528f27295f83f6677,A couple of final tweaks
ojw28,2015-10-26 11:52:23,https://api.github.com/repos/google/ExoPlayer/git/commits/cdad156bae4354811ddac42b053998a3fbe0b510,cdad156bae4354811ddac42b053998a3fbe0b510,Further tweaks to ScriptTagPayloadReader
ojw28,2015-10-26 11:14:34,https://api.github.com/repos/google/ExoPlayer/git/commits/dff17f244c59add82e78e46a772ad0393f63a37f,dff17f244c59add82e78e46a772ad0393f63a37f,Some probably correct tweaks to ScriptTagPayloadReader
ojw28,2015-10-26 10:44:19,https://api.github.com/repos/google/ExoPlayer/git/commits/950cc70003d7633d69afb2e2d4d0859c9b1fa0c6,950cc70003d7633d69afb2e2d4d0859c9b1fa0c6,Purely stylistic changes to FLV extractor
ojw28,2015-10-26 10:24:30,https://api.github.com/repos/google/ExoPlayer/git/commits/fb75b65a70672536ebeaf2cc2e851934872f0367,fb75b65a70672536ebeaf2cc2e851934872f0367,Fix compile error.
ojw28,2015-10-26 10:17:53,https://api.github.com/repos/google/ExoPlayer/git/commits/f133524c2fc9da17ac36ff274b25df5e9a2405f7,f133524c2fc9da17ac36ff274b25df5e9a2405f7,"Merge pull request #828 from jeoliva/flv-experiment

FLV (H.264 + AAC) support"
RikHeijdens,2015-10-23 13:56:00,https://api.github.com/repos/google/ExoPlayer/git/commits/282a3fe818472c565c294888856f950bc1a911db,282a3fe818472c565c294888856f950bc1a911db,Converted trackId into String
jeoliva,2015-09-29 14:20:41,https://api.github.com/repos/google/ExoPlayer/git/commits/3e36f529f8fe8ef4c3550dc00f16684c532d0da0,3e36f529f8fe8ef4c3550dc00f16684c532d0da0,FLV Support - Added Video Reader and parsing improvements
RikHeijdens,2015-10-20 19:52:35,https://api.github.com/repos/google/ExoPlayer/git/commits/1b469f422f4599b9a5aca779d4c41f23cb4dcef8,1b469f422f4599b9a5aca779d4c41f23cb4dcef8,Synced with upstream
RikHeijdens,2015-10-20 19:49:45,https://api.github.com/repos/google/ExoPlayer/git/commits/1d31521710738aa4a6577f6d5ed4d2db8fdf554a,1d31521710738aa4a6577f6d5ed4d2db8fdf554a,"Merge branch 'dev' of github.com:/google/ExoPlayer into mediaformat-id-dash

Syncing my fork"
RikHeijdens,2015-10-20 19:20:44,https://api.github.com/repos/google/ExoPlayer/git/commits/1cefde0d0a9f4dc4214fc56f37c168523abca545,1cefde0d0a9f4dc4214fc56f37c168523abca545,Deleted unnecessary file used for testing
RikHeijdens,2015-10-20 19:01:44,https://api.github.com/repos/google/ExoPlayer/git/commits/10f3be6d509428c4bc9f4a1610dda0271dbdcdd8,10f3be6d509428c4bc9f4a1610dda0271dbdcdd8,"Hls NAME parsing changes

-   NAME is optionial now in the Hls Manifest
-   Use the id field in Format to store the NAME instead of
    a field in Variant to mimic DASH's behaviour
    (see the DASH Id PR, which is not merged yet at this time)."
RikHeijdens,2015-10-20 18:51:31,https://api.github.com/repos/google/ExoPlayer/git/commits/eb282639c59e9c5ba5390bb6d5403a822bd35cbd,eb282639c59e9c5ba5390bb6d5403a822bd35cbd,"Parse NAME label from HLS Master Playlist

The HlsPlaylistParser now parses the ""NAME"" property
from the MasterHlsPlaylist and saves it in the Variant"
RikHeijdens,2015-10-20 17:59:10,https://api.github.com/repos/google/ExoPlayer/git/commits/42351d31273e18b288197bebbeb6a18587dc3ae8,42351d31273e18b288197bebbeb6a18587dc3ae8,"Added id property to MediaFormat

Added the property 'id' to the MediaFormat class
 which serves as an identifier for the track.

DASH Representations will have the ""id's"" from their
Media Presentation Description mapped to the id property
 in the MediaFormat class that will represent the track.

We needed this for an use case where we wanted to read the 'id'
value from the DASH representation and present it to the user
in order for the user to select the right track."
ojw28,2015-10-14 11:12:03,https://api.github.com/repos/google/ExoPlayer/git/commits/0545c58dee9380ead1d483b99e16d8cc041afef5,0545c58dee9380ead1d483b99e16d8cc041afef5,Bump version to 1.5.1
ojw28,2015-10-14 11:01:30,https://api.github.com/repos/google/ExoPlayer/git/commits/b89339f5f74e32ee5d2ad278f75fb40435a6dc7f,b89339f5f74e32ee5d2ad278f75fb40435a6dc7f,Update release notes
ojw28,2015-10-14 10:51:16,https://api.github.com/repos/google/ExoPlayer/git/commits/6d44ec560eb5d9ac38644d0ecb6a942f8f9a58b3,6d44ec560eb5d9ac38644d0ecb6a942f8f9a58b3,"Skip to the sample/auxiliary data offset in fragmented MP4 streams.

The sample data position is the sum of the data offset and the base data offset.
The base data offset is either specified in the stream, or defaults to the first
byte position in the moof box. (We only support one traf per moof currently, so
the offset does not need to be assigned for later track fragments.) The data
position can optionally be offset by a data position read from the trun.

The auxiliary information offset is calculated in the same way, but using an
offset read from the saio box.

Issue: #837
Issue: #861"
ojw28,2015-10-12 16:59:14,https://api.github.com/repos/google/ExoPlayer/git/commits/aa647745a28138b744a7536491f8960f05d1460f,aa647745a28138b744a7536491f8960f05d1460f,No-op re-orderings.
ojw28,2015-10-12 16:58:01,https://api.github.com/repos/google/ExoPlayer/git/commits/0b1c8897bc4e589ce6a96a353abc8782fd535707,0b1c8897bc4e589ce6a96a353abc8782fd535707,Bump bintray release version.
ojw28,2015-10-12 16:57:10,https://api.github.com/repos/google/ExoPlayer/git/commits/20e05a31b2a71e8cfe22cde4bcf0fe5ea073bb0b,20e05a31b2a71e8cfe22cde4bcf0fe5ea073bb0b,"Do TTML color parsing directly in Exoplayer.

- Added TtmlColorParser to workaround JellyBean issues with named colors.
- Support rgb and rgba expressions as well."
ojw28,2015-10-12 11:34:17,https://api.github.com/repos/google/ExoPlayer/git/commits/414ad053141cc697cb2d932d277d345e9a51121b,414ad053141cc697cb2d932d277d345e9a51121b,Fix package for vp9opus demo.
ojw28,2015-10-12 11:32:49,https://api.github.com/repos/google/ExoPlayer/git/commits/b7d242e2c10911dc6288248990ca39ecb199287a,b7d242e2c10911dc6288248990ca39ecb199287a,Add missing Eclipse files for playback tests.
ojw28,2015-10-12 11:32:10,https://api.github.com/repos/google/ExoPlayer/git/commits/bcb9f8282df7b05a66329e5115511c67f1651d2d,bcb9f8282df7b05a66329e5115511c67f1651d2d,"Enable SmoothFrameTimeHelper by default.

Context:
- Currently, playback is significantly more juddery with it disabled,
  particularly on AndroidTV.
- We should be able to do the ""best"" job of this internally, so injection
  doesn't buy anything useful. If someone has a better implementation for
  adjusting the frame release, they should improve the core library."
ojw28,2015-10-12 11:28:14,https://api.github.com/repos/google/ExoPlayer/git/commits/9b4e9723e5f459ac86e621ae01a70929b4aba16e,9b4e9723e5f459ac86e621ae01a70929b4aba16e,"Don't use SEC VP8 decoder on Galaxy S3s.

The only Samsung devices with names starting ""d2"" that we're aware of
are Galaxy S3 variants, and also one Samsung Galaxy Pocket Neo d2aio
SAMSUNG-SGH-I747Z. This change speculatively includes that device too because
its name is very similar to SAMSUNG-SGH-I747 which is known to be affected.

Issue: #548"
ojw28,2015-10-12 11:26:58,https://api.github.com/repos/google/ExoPlayer/git/commits/c4235d0e8dfff9c7cb930645cec19997390dbb1c,c4235d0e8dfff9c7cb930645cec19997390dbb1c,"Ignore tfdt boxes for SmoothStreaming playbacks.

Issue #838"
ojw28,2015-10-12 11:25:58,https://api.github.com/repos/google/ExoPlayer/git/commits/79055066813123c939c29e5a5e223a5ff043b91e,79055066813123c939c29e5a5e223a5ff043b91e,"On Sony Bravia devices check for 4k panel.

Documentation: https://developer.sony.com/develop/tvs/android-tv/design-guide/

On API 23 we should also check Display.Mode (where supported).

Issue: #800"
ojw28,2015-10-12 11:24:48,https://api.github.com/repos/google/ExoPlayer/git/commits/952bd4e73cf261be9baa6b251d59cfff3d455783,952bd4e73cf261be9baa6b251d59cfff3d455783,"Don't calculate a maximum input size for H.264 on Sony 4k TV.

Issue: #800"
ojw28,2015-10-12 11:21:16,https://api.github.com/repos/google/ExoPlayer/git/commits/a764b359e80112f02bb3964a3936b62275ffd44d,a764b359e80112f02bb3964a3936b62275ffd44d,"Add support for DTS passthrough on supporting devices before API 23.

NVIDIA Shield before API 23 supports DTS passthrough, so this change inlines the
constant value."
ojw28,2015-10-12 11:20:15,https://api.github.com/repos/google/ExoPlayer/git/commits/a5ebb49a1a1b2bda285f72d90b92f8fb99de17be,a5ebb49a1a1b2bda285f72d90b92f8fb99de17be,Set the maximum input size based on the sample table for MP4s.
ojw28,2015-10-12 11:18:12,https://api.github.com/repos/google/ExoPlayer/git/commits/3682141ee1c43d967c53406165a874a4dfad33c7,3682141ee1c43d967c53406165a874a4dfad33c7,"webm_extractor: Re-sync to next level 1 element on invalid data

Try re-sync'ing to the next level 1 element when invalid data is found. This
corrects the behavior for test case 4 in the mkv test suite.

Partially Fixes Issue #631"
ojw28,2015-10-12 11:16:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ab489d35e96f6e09a4115d479f82d0b152c6d402,ab489d35e96f6e09a4115d479f82d0b152c6d402,"Don't pass keyboard escape key to media controller.

This makes it possible to exit the player when using e.g. an Android TV with a
keyboard."
ojw28,2015-10-12 11:15:13,https://api.github.com/repos/google/ExoPlayer/git/commits/bcb4ea4f703e667e910d8b4016ddab67d11af2eb,bcb4ea4f703e667e910d8b4016ddab67d11af2eb,"Allow launching of ExoPlayer demo app via adb shell.

For example:
adb shell am start -a com.google.android.exoplayer.demo.action.VIEW -d http://..."
ojw28,2015-10-12 11:12:43,https://api.github.com/repos/google/ExoPlayer/git/commits/6bf817f107ded1bc749d78dd599b6fd8e41d684e,6bf817f107ded1bc749d78dd599b6fd8e41d684e,"Workaround EOS propagation for all devices with RK decoder.

As per the end of the related issue, it's likely that all devices
running the affected API levels + decoder are affected by the same
issue.

Issue #464"
ojw28,2015-10-12 11:03:31,https://api.github.com/repos/google/ExoPlayer/git/commits/98426a782fff0279b89e3bfa81fbbbb3070fbf26,98426a782fff0279b89e3bfa81fbbbb3070fbf26,"Merge pull request #857 from IanDBird/dev-truehd

Add support for TrueHD audio codec in WebMExtractor"
ojw28,2015-10-12 11:03:26,https://api.github.com/repos/google/ExoPlayer/git/commits/8c53590b9b26a8b86fea0c42f65956a539030d0a,8c53590b9b26a8b86fea0c42f65956a539030d0a,"Merge pull request #858 from IanDBird/dev-mpeg2

Add support for MPEG2 video codec in WebMExtractor"
IanDBird,2015-10-09 13:38:39,https://api.github.com/repos/google/ExoPlayer/git/commits/e933e2d49f31c1ecc5144d203e72e719c9200195,e933e2d49f31c1ecc5144d203e72e719c9200195,Add support for MPEG2 video codec in WebMExtractor
IanDBird,2015-10-09 13:12:48,https://api.github.com/repos/google/ExoPlayer/git/commits/ee8a00b68ab1d032d700957efdecd0bcaf16d785,ee8a00b68ab1d032d700957efdecd0bcaf16d785,Add support for TrueHD audio codec in WebMExtractor
ojw28,2015-10-09 11:40:33,https://api.github.com/repos/google/ExoPlayer/git/commits/2d967a1b6d1007302737b06f8a2fedc6bd2738a5,2d967a1b6d1007302737b06f8a2fedc6bd2738a5,"Merge pull request #856 from IanDBird/dev

Make MediaCodecUtil.getMediaCodecInfo public"
IanDBird,2015-10-09 11:33:01,https://api.github.com/repos/google/ExoPlayer/git/commits/6a5cd6889258df6b9a08b770e2bf351a5bb30e18,6a5cd6889258df6b9a08b770e2bf351a5bb30e18,Make MediaCodecUtil.getMediaCodecInfo public
ojw28,2015-10-01 16:33:02,https://api.github.com/repos/google/ExoPlayer/git/commits/5b81612c3b63aa19262c1e87960d4d61477ba721,5b81612c3b63aa19262c1e87960d4d61477ba721,Tweak okhttp package name
ojw28,2015-09-29 20:58:12,https://api.github.com/repos/google/ExoPlayer/git/commits/01597d02085f86661a1cf3e931a7ca859017e74d,01597d02085f86661a1cf3e931a7ca859017e74d,Fix markup
ojw28,2015-09-29 20:56:41,https://api.github.com/repos/google/ExoPlayer/git/commits/851cde2e0e53eb342c72f68271145a2d8b7f3728,851cde2e0e53eb342c72f68271145a2d8b7f3728,Update RELEASENOTES
ojw28,2015-09-29 20:55:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ba6cb05e0a6acd5f550c7750bc18b39534d99cba,ba6cb05e0a6acd5f550c7750bc18b39534d99cba,Update ReadMe files.
ojw28,2015-09-29 20:51:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e1d6f8618bf3f7af80a925f4ac5919885d43ade2,e1d6f8618bf3f7af80a925f4ac5919885d43ade2,Package restructuring
ojw28,2015-09-29 20:41:35,https://api.github.com/repos/google/ExoPlayer/git/commits/19c7520e68ccaa5236344229de36ce2741690b2c,19c7520e68ccaa5236344229de36ce2741690b2c,Better gradle package names
ojw28,2015-09-29 20:27:37,https://api.github.com/repos/google/ExoPlayer/git/commits/0ff03e40bd5879c3b9d73ba9db1681d12fb1785f,0ff03e40bd5879c3b9d73ba9db1681d12fb1785f,Okhttp extension - Update gradle build
ojw28,2015-09-29 20:24:45,https://api.github.com/repos/google/ExoPlayer/git/commits/af1ffeccc7933d3312a6066b6342b8b88746a254,af1ffeccc7933d3312a6066b6342b8b88746a254,OkHttp extension - Add eclipse project
ojw28,2015-09-29 20:10:34,https://api.github.com/repos/google/ExoPlayer/git/commits/434a2733a3735315627569cceef3abf9950de9c1,434a2733a3735315627569cceef3abf9950de9c1,"OkHttp extension modifications.

1. Change package name (rm ""datasource"")
2. Require injection of OkHttpClient through all constructors, and
   remove allowCrossProtocolRedirect/connectTimeout/readTimeout
   constructor arguments. The client should be configured with these
   prior to injection.
3. Fix code style to be consistent with the project.
4. Simplify call to get contentLength. I'm pretty sure okhttp returns
   the correct value when gzip is enabled, so there's no need to check
   this in the data source.
5. Misc cleanups."
ojw28,2015-09-29 20:06:46,https://api.github.com/repos/google/ExoPlayer/git/commits/2112bc24e33a153058326b88704908fb41343ad7,2112bc24e33a153058326b88704908fb41343ad7,"Merge pull request #735 from b95505017/okhttp_http_data_source

Add an extension that provide DataSource using OkHttp"
jeoliva,2015-09-29 01:30:57,https://api.github.com/repos/google/ExoPlayer/git/commits/8ddc73511e0129f73b09f76d8028753c9b1f67d6,8ddc73511e0129f73b09f76d8028753c9b1f67d6,FLV Support - Added Audio and Script Data readers
ojw28,2015-09-29 10:40:59,https://api.github.com/repos/google/ExoPlayer/git/commits/62ce0ff00970083992241241fbdd0ed6c9de24b7,62ce0ff00970083992241241fbdd0ed6c9de24b7,Fix indentation.
ojw28,2015-09-29 10:37:40,https://api.github.com/repos/google/ExoPlayer/git/commits/d8934e27512f2a7ed7090a87285dad55a9842057,d8934e27512f2a7ed7090a87285dad55a9842057,"Make mapping from position to time more accurate in XING MP3 streams.

This change keeps the proportion offset * 256 as a floating point value rather
than rounding it before linear interpolation, which will increase precision
slightly when seeking in streams with XING headers.

In practice, this won't make much of a difference because precise seeking in VBR
MP3s with XING headers seems not to be possible without reading the entire file,
due to the fact that the (uneven) distribution of bits is represented by a fixed
number of table of contents entries."
ojw28,2015-09-29 10:36:26,https://api.github.com/repos/google/ExoPlayer/git/commits/15da18d900d9865d82897089ac36f117deaec284,15da18d900d9865d82897089ac36f117deaec284,"Fix format selection bug.

Issue: #825"
ojw28,2015-09-28 19:56:28,https://api.github.com/repos/google/ExoPlayer/git/commits/427cb34aca0b0252ed429961f1014550cf3399e0,427cb34aca0b0252ed429961f1014550cf3399e0,Bump version to 1.5.0
ojw28,2015-09-28 19:24:46,https://api.github.com/repos/google/ExoPlayer/git/commits/dce74f42090642fb0a0dc0edbfd755b3a5813dfe,dce74f42090642fb0a0dc0edbfd755b3a5813dfe,Add onDrmKeysLoaded back again (oops)
ojw28,2015-09-28 19:23:45,https://api.github.com/repos/google/ExoPlayer/git/commits/e96e6180463da64d5c7473bb062bd99a39004dad,e96e6180463da64d5c7473bb062bd99a39004dad,"Clean up expansion of sample buffers.

- The old approach was technically incorrect, because the checks
were ""capacity < sampleSize"" and hence neglected the fact that
the buffer position may be greater than 0 (e.g. if the caller
wants to prefix the sample with some additional data).

- Also proactively throw an exception if the buffer is too small,
rather than wait for the failure when we actually do the write."
ojw28,2015-09-28 11:38:35,https://api.github.com/repos/google/ExoPlayer/git/commits/15c2f9c32871857a8665bd2b1badc2f1d287bc0d,15c2f9c32871857a8665bd2b1badc2f1d287bc0d,"Explicitly set max input size for H264 decoders.

This works around an issue where some devices, such as the Acer Iconia,
don't allocate large enough input buffers for H264.

Issue: #616
Issue: #714"
ojw28,2015-09-28 11:36:28,https://api.github.com/repos/google/ExoPlayer/git/commits/decb7f58c781d439bc4d5a2e4e55af7ee8dbfa71,decb7f58c781d439bc4d5a2e4e55af7ee8dbfa71,"Expose container track identifier via MediaFormat.

Issue: #770"
ojw28,2015-09-28 11:34:19,https://api.github.com/repos/google/ExoPlayer/git/commits/979fd083b42e74af05aa8bbebaa0c5434c83cd43,979fd083b42e74af05aa8bbebaa0c5434c83cd43,"Don't invoke adaptiveTrack with 0 or 1 representations.

0 will crash. 1 is pointless."
ojw28,2015-09-28 11:25:30,https://api.github.com/repos/google/ExoPlayer/git/commits/e8895c8746487351ededbe0dd072f3fb31468c75,e8895c8746487351ededbe0dd072f3fb31468c75,Fix AudioTrack EOS handling in ExoPlayer.
ojw28,2015-09-28 11:25:05,https://api.github.com/repos/google/ExoPlayer/git/commits/e035e4de7f12e5fb1124dbcca12d5a47a708d778,e035e4de7f12e5fb1124dbcca12d5a47a708d778,"Let MediaController handle whatever keys it wants to handle.

....Except BACK and MENU, which only make sense if the the controller
is visible."
ojw28,2015-09-28 11:24:35,https://api.github.com/repos/google/ExoPlayer/git/commits/15052052eecdb8509a959962600f400d5e368486,15052052eecdb8509a959962600f400d5e368486,Clean up TrackRenderer TODOs
ojw28,2015-09-28 11:24:13,https://api.github.com/repos/google/ExoPlayer/git/commits/b81ac8cdc2d223a7b35a27b53551eef90f84a174,b81ac8cdc2d223a7b35a27b53551eef90f84a174,"Added robustness for chunk removal.

Issue #812"
ojw28,2015-09-28 11:22:54,https://api.github.com/repos/google/ExoPlayer/git/commits/42416b82dbaacbb7381e66fb4baf035b0491fba9,42416b82dbaacbb7381e66fb4baf035b0491fba9,"Fixed issue in which DashChunkSource didn't make use of the most recent
manifest."
ojw28,2015-09-28 11:22:12,https://api.github.com/repos/google/ExoPlayer/git/commits/c3e0d34aa1e6f81afea8dfe6a215d1ad2d4e4e42,c3e0d34aa1e6f81afea8dfe6a215d1ad2d4e4e42,Fixed int overflow issue with callbacks on very long-running streams.
ojw28,2015-09-28 11:20:27,https://api.github.com/repos/google/ExoPlayer/git/commits/e4e02f91891f1b6b944e2b7b5ade5ae06f47f913,e4e02f91891f1b6b944e2b7b5ade5ae06f47f913,Further improve WebVTT parser according to WebVTT spec
ojw28,2015-09-28 11:16:26,https://api.github.com/repos/google/ExoPlayer/git/commits/71f542f7c2628a027df8ea0788dbb10e1efa6d32,71f542f7c2628a027df8ea0788dbb10e1efa6d32,"If a parser really wants to throw a runtime exception, don't crash."
ojw28,2015-09-28 11:15:53,https://api.github.com/repos/google/ExoPlayer/git/commits/ee80be9217e9a18061f70f6bb4c4aff887defd65,ee80be9217e9a18061f70f6bb4c4aff887defd65,Fix comment typo
ojw28,2015-09-28 10:59:10,https://api.github.com/repos/google/ExoPlayer/git/commits/e652019bb3eb2041218ecf928c10b3166f728f78,e652019bb3eb2041218ecf928c10b3166f728f78,Tweak new drm listener method. Fix demo app
ojw28,2015-09-28 10:16:29,https://api.github.com/repos/google/ExoPlayer/git/commits/6cb029d8c156897d324d8a3ec63aca8fda914ff3,6cb029d8c156897d324d8a3ec63aca8fda914ff3,"Merge pull request #818 from pakerfeldt/on-drm-session-ready

Add onDrmSessionReady callback"
pakerfeldt,2015-09-24 12:40:04,https://api.github.com/repos/google/ExoPlayer/git/commits/95db1eacd12957a242ffff8c602fffc8d451394f,95db1eacd12957a242ffff8c602fffc8d451394f,"Add onKeysLoaded callback

This adds a callback for when DRM keys have been loaded."
ojw28,2015-09-18 17:25:25,https://api.github.com/repos/google/ExoPlayer/git/commits/765d1659be1eb8833bacb458cbaf78131fb143d9,765d1659be1eb8833bacb458cbaf78131fb143d9,"Return ""seeked to"" position immediately after seek."
ojw28,2015-09-18 17:25:07,https://api.github.com/repos/google/ExoPlayer/git/commits/c1b8352e33b2348dc1c3d71b8d5c5e3532fd60c4,c1b8352e33b2348dc1c3d71b8d5c5e3532fd60c4,Stylistic tweaks.
ojw28,2015-09-18 17:24:33,https://api.github.com/repos/google/ExoPlayer/git/commits/88452d95eeceacfc138463e83c958eedb46e1006,88452d95eeceacfc138463e83c958eedb46e1006,Playback test tweaks.
ojw28,2015-09-18 17:23:50,https://api.github.com/repos/google/ExoPlayer/git/commits/da97e30e3387eb2e564d441e93ff54ac89b3e651,da97e30e3387eb2e564d441e93ff54ac89b3e651,"Support mp3 media segments in HLS.

Issue #804"
ojw28,2015-09-18 17:23:28,https://api.github.com/repos/google/ExoPlayer/git/commits/c960636d2824af83b7e9f90867c74df8ac9f6636,c960636d2824af83b7e9f90867c74df8ac9f6636,Stylistic cleanup.
ojw28,2015-09-18 17:22:40,https://api.github.com/repos/google/ExoPlayer/git/commits/cf27b83e8a556a0e6be572e16527154372eeebf4,cf27b83e8a556a0e6be572e16527154372eeebf4,Implement handlesTrack using MediaCodecUtil.
ojw28,2015-09-18 17:21:26,https://api.github.com/repos/google/ExoPlayer/git/commits/8022d28e049f0a3b3db1fe1a06dda28aaf669176,8022d28e049f0a3b3db1fe1a06dda28aaf669176,Make certain we have appropriate locks held for playback tests.
ojw28,2015-09-18 17:20:47,https://api.github.com/repos/google/ExoPlayer/git/commits/3538e57797b799411a3e32eb098db49194b75a55,3538e57797b799411a3e32eb098db49194b75a55,"Work around incorrect timestamp handling on Sony Xperia E.

Also include more Sony Xperia Z devices in the MP3 workaround."
ojw28,2015-09-18 17:20:12,https://api.github.com/repos/google/ExoPlayer/git/commits/6ef8c3a61bbc524e93499495d1342a23ba9b2c61,6ef8c3a61bbc524e93499495d1342a23ba9b2c61,"Avoid loading the first HLS segment twice.

Issue: #788"
ojw28,2015-09-18 17:19:28,https://api.github.com/repos/google/ExoPlayer/git/commits/8a723706d62a4621f9aa97a99af6997d25c72ef5,8a723706d62a4621f9aa97a99af6997d25c72ef5,"Provide more flexibility for setting caption font size.

- Respect any padding set on SubtitleLayout.
- Allow specification of absolute, fractional and fractional-ignoring-padding
  text sizes."
ojw28,2015-09-18 17:18:15,https://api.github.com/repos/google/ExoPlayer/git/commits/7f9b12982da435ee99e1c57afbf4e1c184059b69,7f9b12982da435ee99e1c57afbf4e1c184059b69,Use consistent buffer sizes in demo app.
ojw28,2015-09-18 10:58:28,https://api.github.com/repos/google/ExoPlayer/git/commits/d6801389de13fb4f076ec6b7b27f8552957a226a,d6801389de13fb4f076ec6b7b27f8552957a226a,"Merge pull request #807 from castlabs/feature/parse_audio_channels_only_for_mpeg_dash

Parse audioChannels only when on mpeg-dash"
ojw28,2015-09-17 15:34:33,https://api.github.com/repos/google/ExoPlayer/git/commits/de68c982ab93f102b3541ba86fc7a8f58ea333d5,de68c982ab93f102b3541ba86fc7a8f58ea333d5,"Merge pull request #795 from jeoliva/webvtt-parser-improvements

Improve WebVTT parser according to WebVTT spec"
ojw28,2015-09-17 14:15:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1be3f9dcbc5c0108975456e2d71a91a0319895fc,1be3f9dcbc5c0108975456e2d71a91a0319895fc,"Merge pull request #796 from souji1103/dev

Prevent ArrayIndexOutOfBoundsException when proguard is enabled"
jeoliva,2015-09-11 00:58:56,https://api.github.com/repos/google/ExoPlayer/git/commits/925795cb4f110d1cb3dcaea29d550c60b5355dc5,925795cb4f110d1cb3dcaea29d550c60b5355dc5,"Improve WebVTT parser according to WebVTT spec

- Line parameter
  - Added support for value and line alignment attributes.
  - Support negative numbers when line is an absolute number (not a
percentage).
- Position parameter
  - Added support for value and position alignment attributes
- Added support for WebVTT comment blocks
- Percentage values now accept decimal numbers (as webvtt spec states)
- Added new WebVTT tests for testing all new implemented features"
souji1103,2015-09-16 00:04:04,https://api.github.com/repos/google/ExoPlayer/git/commits/e2ed741dddd66519e796d8611574b27dc21d9423,e2ed741dddd66519e796d8611574b27dc21d9423,"prevented excess loop, reading pes header"
ojw28,2015-09-15 12:45:54,https://api.github.com/repos/google/ExoPlayer/git/commits/d7697176ed98787d6d67e0dbb994b26d95fcfb10,d7697176ed98787d6d67e0dbb994b26d95fcfb10,"Include language in audio formats.

Issue: #437"
ojw28,2015-09-15 12:44:52,https://api.github.com/repos/google/ExoPlayer/git/commits/b6f15a17e0f0a260f6e3a81040d227142da4e191,b6f15a17e0f0a260f6e3a81040d227142da4e191,"TTML improvements.

- do not denormalize styles at parsing time but only put normalized style info
into TtmlNode tree. Resolve styles on demand when Cues are requested for a
given timeUs.
- create TtmlRenderUtil to have static render functions separate
- added unit test for TtmlRenderUtil
- adjusted testing strategy for unit test to check resolved style on Spannables after rendering"
ojw28,2015-09-15 12:43:42,https://api.github.com/repos/google/ExoPlayer/git/commits/908e4dfd5df4840a1d1fcb45d293bebd011e3bce,908e4dfd5df4840a1d1fcb45d293bebd011e3bce,"Search for synch' when sniffing ADTS and check four frames.

Issue: #791"
ojw28,2015-09-15 12:43:12,https://api.github.com/repos/google/ExoPlayer/git/commits/721956710f446f6d476366f0b5d4b1c7c4aa3211,721956710f446f6d476366f0b5d4b1c7c4aa3211,Remove MediaFormat.create methods that don't take a duration.
ojw28,2015-09-15 12:42:16,https://api.github.com/repos/google/ExoPlayer/git/commits/e7926145c6798f14cda0939cfc4bb3aaa8306be0,e7926145c6798f14cda0939cfc4bb3aaa8306be0,"Fix overflow for DASH live streams using large timescales.

Issue: #789"
ojw28,2015-09-15 12:41:55,https://api.github.com/repos/google/ExoPlayer/git/commits/74186c2cd0d12a6da053ba1dfde720f8354560b6,74186c2cd0d12a6da053ba1dfde720f8354560b6,Try harder before allowing playback tests to fail.
ojw28,2015-09-15 12:41:42,https://api.github.com/repos/google/ExoPlayer/git/commits/ab46d263ad64d9c3be2cf5b4c550e9b70b8bdbdc,ab46d263ad64d9c3be2cf5b4c550e9b70b8bdbdc,"Use decoders with names that don't start ""OMX."".

There is no guarantee codec names start with this prefix in >= L.

Issue: #782"
ojw28,2015-09-10 18:19:17,https://api.github.com/repos/google/ExoPlayer/git/commits/5050913ba01ad055a0be1c7a4031b4a6653378be,5050913ba01ad055a0be1c7a4031b4a6653378be,Update release notes.
ojw28,2015-09-10 18:03:14,https://api.github.com/repos/google/ExoPlayer/git/commits/e6e1e2c1d1c7e0eea6fc85920248ed5f0a99e11c,e6e1e2c1d1c7e0eea6fc85920248ed5f0a99e11c,Tweaking TTML parsing logic.
ojw28,2015-09-10 17:31:08,https://api.github.com/repos/google/ExoPlayer/git/commits/04342f2b7653fa4fd3e3c26f82d9ac8c3dc14d36,04342f2b7653fa4fd3e3c26f82d9ac8c3dc14d36,"Don't use toLowerCase :).

It can do weird things if the device has an unusual default Locale.
Util.toLowerInvariant uses the US Locale, which does the right thing
in this case."
ojw28,2015-09-10 17:30:47,https://api.github.com/repos/google/ExoPlayer/git/commits/eeb73a86ea21d07c59ac010ce499517f000ca76f,eeb73a86ea21d07c59ac010ce499517f000ca76f,"Improve sniffer behavior for fragmented MP4.

- Allow a moof box to exceed the search size.
- Return immediately after reading an ftyp box with no compatible types.

Issue: #784"
ojw28,2015-09-10 17:30:13,https://api.github.com/repos/google/ExoPlayer/git/commits/6f9019a4e390a951d454368fa78e752d5de5f476,6f9019a4e390a951d454368fa78e752d5de5f476,"Use DTS to set timestamp adjustment where available.

Partial fix for #778"
ojw28,2015-09-10 17:29:36,https://api.github.com/repos/google/ExoPlayer/git/commits/1f3bd97a2df2f6d9806f50fc68b81e4c1e128741,1f3bd97a2df2f6d9806f50fc68b81e4c1e128741,Add non-strict SubRip parsing (enabled by default).
ojw28,2015-09-10 17:28:50,https://api.github.com/repos/google/ExoPlayer/git/commits/ede7a69d958711242315600d8a5008f7e3d76b53,ede7a69d958711242315600d8a5008f7e3d76b53,Change DTS MIME type to vnd.dts.
ojw28,2015-09-10 17:27:03,https://api.github.com/repos/google/ExoPlayer/git/commits/ab66dfa7c221bad2cffcb6bf7dc1be0caf6c1aa9,ab66dfa7c221bad2cffcb6bf7dc1be0caf6c1aa9,Parsing embedded TTML styling.
ojw28,2015-09-10 17:24:31,https://api.github.com/repos/google/ExoPlayer/git/commits/95fcb3b411c24ddaca37518d111638ba22d823f0,95fcb3b411c24ddaca37518d111638ba22d823f0,"Draw subtitles over the shutter.

This allows the demo app to display subtitles without video
(when there's no video, the shutter view does not hide itself)."
ojw28,2015-09-10 17:23:20,https://api.github.com/repos/google/ExoPlayer/git/commits/e48851d8ccc16e03c443ff875a32a7511b76a43d,e48851d8ccc16e03c443ff875a32a7511b76a43d,"Share PTS timestamp adjustment across format changes.

When switching format in HLS, we instantiate a new extractor, which
adjusts TS presentation timestamps so that they align properly with
the start of the first segment in the new format. Some HLS streams
appear to have slightly misalignment that causes a glitch when using
this approach.

It's better to re-use the same timestamp adjustment across formats,
and only reset it when seeking or when there's an actual discontinuity.
This is because the HLS spec guarantees PTS timestamp alignment across
different formats.

We'll also need something like PtsTimestampAdjuster to share between
separated audio and WebVTT tracks, which also contain PTS timestamps
that are aligned, and will need to share a common adjustment.

Issue: #692"
ojw28,2015-09-10 17:22:44,https://api.github.com/repos/google/ExoPlayer/git/commits/7d38d2ef3c9d1cd316b0b33199c6cabf21b3f320,7d38d2ef3c9d1cd316b0b33199c6cabf21b3f320,"CuePainter fixes for caption styling.

- Don't allow ""nothing has changed"" optimization in the case
  that only styling has changed (TextUtils.equals will return
  true in this case, but we shouldn't optimize).
- Add functionality to suppress embedded styling; seems useful
  to have.
- Added ""this."" for clarity."
ojw28,2015-09-10 17:22:07,https://api.github.com/repos/google/ExoPlayer/git/commits/68f2dc5998780886beb08a62c42b832e3746a185,68f2dc5998780886beb08a62c42b832e3746a185,Remove MultiTrackChunkSource (multi track now supported directly).
ojw28,2015-09-10 17:21:21,https://api.github.com/repos/google/ExoPlayer/git/commits/e6ca2df5144185159b4a0a37445cb204f353557f,e6ca2df5144185159b4a0a37445cb204f353557f,"Fix end-of-stream for live streams.

Issue: #764"
ojw28,2015-09-10 17:20:07,https://api.github.com/repos/google/ExoPlayer/git/commits/89fcafec5bfc831522db3a600b5bf97692453ef6,89fcafec5bfc831522db3a600b5bf97692453ef6,Correctly set a format duration.
ojw28,2015-09-10 17:17:13,https://api.github.com/repos/google/ExoPlayer/git/commits/820433de06dc6f86fb2c1e2a922400ae6ee6e32f,820433de06dc6f86fb2c1e2a922400ae6ee6e32f,"Call stop() to fully play out remaining audio!

Issue: #707"
ojw28,2015-09-10 17:16:42,https://api.github.com/repos/google/ExoPlayer/git/commits/9bcc00f369dca153432bdf52191bd2d5c4cebfb3,9bcc00f369dca153432bdf52191bd2d5c4cebfb3,Fix reported buffered position for HLS across format switches.
ojw28,2015-09-10 17:16:23,https://api.github.com/repos/google/ExoPlayer/git/commits/a7ba393d54637c693f54ae372a1b605848d19a80,a7ba393d54637c693f54ae372a1b605848d19a80,"When multiple BaseURL elements are present, prefer the first one.

Issue: #771"
ojw28,2015-09-10 17:15:15,https://api.github.com/repos/google/ExoPlayer/git/commits/4a29be498b9946a3332143f2bce6ce409fd24dd4,4a29be498b9946a3332143f2bce6ce409fd24dd4,"Correctly use ""current-manifest-live"" v.s. ""stream-is-live""

When a live stream ends, what typically happens is that the manifest
is refreshed and the refreshed version is not marked as live/dynamic.
When this happens we:

1. Don't want the duration of the track to change.
2. Still want to consider the possibility that we may have fallen behind
   the live window.
3. Don't want to allow futher manifest refreshes.

This change uses the right thing in the right place."
ojw28,2015-09-10 17:12:32,https://api.github.com/repos/google/ExoPlayer/git/commits/143a4deee8ad37ed3c46f2cf9a4bb41ccad4a698,143a4deee8ad37ed3c46f2cf9a4bb41ccad4a698,"If no buffers were queued, handle EoS directly.

Issue: #707"
ojw28,2015-09-10 17:11:18,https://api.github.com/repos/google/ExoPlayer/git/commits/59a789b340ae2357317c81a7730d50e8f30d2f80,59a789b340ae2357317c81a7730d50e8f30d2f80,Include missing durations in AC3/DTS formats.
ojw28,2015-09-09 13:31:49,https://api.github.com/repos/google/ExoPlayer/git/commits/e13e23e3e030b49d3e1dac17ba93ef4bcf837a71,e13e23e3e030b49d3e1dac17ba93ef4bcf837a71,"Merge pull request #776 from IanDBird/srt-fix

Ignore extra returns in Subrip parsing"
IanDBird,2015-09-09 10:56:10,https://api.github.com/repos/google/ExoPlayer/git/commits/4b69fad6b7b2bdaef0b4080b62a933e60746f1b3,4b69fad6b7b2bdaef0b4080b62a933e60746f1b3,Ignore extra returns in Subrip parsing
ojw28,2015-09-07 12:59:55,https://api.github.com/repos/google/ExoPlayer/git/commits/5c0745cedff6a0c2f373ff63a787780dcf491607,5c0745cedff6a0c2f373ff63a787780dcf491607,"Add some generally useful error propagation logic for HLS.

Issue #765"
ojw28,2015-09-07 12:59:18,https://api.github.com/repos/google/ExoPlayer/git/commits/fb8f0113c636eff73de205fb9119e02456616381,fb8f0113c636eff73de205fb9119e02456616381,"Hide captions when the track is disabled.

Issue #763"
ojw28,2015-09-07 12:58:54,https://api.github.com/repos/google/ExoPlayer/git/commits/5d1052f6ec99eb8f1ed326359cb00e1d7592112b,5d1052f6ec99eb8f1ed326359cb00e1d7592112b,"Allow specifying the AudioTrack's stream type.

Issue: #755"
ojw28,2015-09-07 12:58:31,https://api.github.com/repos/google/ExoPlayer/git/commits/ab2aac9d3f63b697de02c51ef1e732e353136acd,ab2aac9d3f63b697de02c51ef1e732e353136acd,Infer mime types from DASH manifest.
ojw28,2015-09-07 12:57:45,https://api.github.com/repos/google/ExoPlayer/git/commits/9592a8a4ffcbd238cf4d2aa9f96527fce3cc85e3,9592a8a4ffcbd238cf4d2aa9f96527fce3cc85e3,Fix IFR parsing
ojw28,2015-09-07 12:56:54,https://api.github.com/repos/google/ExoPlayer/git/commits/8c3f93d6bf2ee92806fb43355eaea10f3e15ae7a,8c3f93d6bf2ee92806fb43355eaea10f3e15ae7a,"Start to fix media mime types.

- Admit we don't know the mime type (using unknown mime types) rather
  than passing the container mime type.
- Pass the correct mime type for opus, vp9 and vp8, and remove the incorrect
  container checks in the corresponding extensions."
ojw28,2015-09-07 12:55:35,https://api.github.com/repos/google/ExoPlayer/git/commits/4104a8def991b135700b895025efae53f86b553a,4104a8def991b135700b895025efae53f86b553a,Handle raw TTML in DASH correctly.
ojw28,2015-09-01 13:27:01,https://api.github.com/repos/google/ExoPlayer/git/commits/0c968703c829db38855c480c2ae760cae87dfd70,0c968703c829db38855c480c2ae760cae87dfd70,"Add playback tests (work in progress).

All valid Android devices should pass these tests."
ojw28,2015-09-01 13:24:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e6a93a08dea787dd9486b3debe2b7f1c0f72a0df,e6a93a08dea787dd9486b3debe2b7f1c0f72a0df,"Update instructions for building with latest libvpx.

- Fix building with APP_ABI=all by configuring for all architectures.
- Keep vpx_dsp which is required for building successfully.
- Use perl -pi -e not sed, for building on Macs."
ojw28,2015-09-01 13:23:35,https://api.github.com/repos/google/ExoPlayer/git/commits/7a0f00ce41d20502dd296fa47daf76e132e51c1a,7a0f00ce41d20502dd296fa47daf76e132e51c1a,No-op setting volume to current volume.
ojw28,2015-09-01 13:23:10,https://api.github.com/repos/google/ExoPlayer/git/commits/3c65df92c25302f14899ecb1d7d23d73a5dae80b,3c65df92c25302f14899ecb1d7d23d73a5dae80b,"Allow multiple sources for text.

Issue #753"
ojw28,2015-09-01 13:22:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ecd48da1de4160eab30aef279eec14025be148b4,ecd48da1de4160eab30aef279eec14025be148b4,"Multi-track support for DASH.

- With this change, you can select from the individual video formats in
the demo app, as well as the regular ""auto"" (adaptive) track.
- DashRendererBuilder no longer needs to create MultiTrackChunkSource
instances for the multiple tracks to be exposed."
ojw28,2015-09-01 13:20:23,https://api.github.com/repos/google/ExoPlayer/git/commits/6cf261aed7b8e5a3c97d398d34749a80f44247dc,6cf261aed7b8e5a3c97d398d34749a80f44247dc,Move default SmoothStreaming track selection to library.
ojw28,2015-09-01 13:19:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4b2991267e4fbea4b2230cd582f8af2b5047689b,4b2991267e4fbea4b2230cd582f8af2b5047689b,Some renaming to make format use slightly clearer.
ojw28,2015-09-01 13:19:06,https://api.github.com/repos/google/ExoPlayer/git/commits/fae6c65367c6154d15b5c99a9eeb866ee36ba568,fae6c65367c6154d15b5c99a9eeb866ee36ba568,"Be robust against manifests that don't define top level duration explicitly.

I think such manifests are invalid, and I haven't seen any examples,
but given it's trivial to fill in the duration if the periods define
durations, it seems worth being robust."
ojw28,2015-09-01 13:18:16,https://api.github.com/repos/google/ExoPlayer/git/commits/2f4c96781d3ba3bc6c048abb7210867d4c901b91,2f4c96781d3ba3bc6c048abb7210867d4c901b91,"Refactor handling of period start times and durations.

- It's not possible to determine a period's duration just from the
corresponding Period element in a DASH manifest. It's necessary
to look at the start time of the next period (or the duration of the
manifest for the last period) to determine how long a period is. We
don't currently do this in the parser, and hence set duration incorrectly.
We also set period start times incorrectly because we don't set it to
equal to sum of the durations of prior periods in the case where it's
not explicitly defined.

- We're currently propagating these (incorrect) values all over the place
through data-structures that we build when parsing the Period element.

- This CL removes this redundancy, storing only the start time of each
period in Period elements, and not propagating it elsewhere. It's then
used when required in DashChunkSource."
ojw28,2015-09-01 13:17:21,https://api.github.com/repos/google/ExoPlayer/git/commits/cb85dc25aa74978c59ee04d83fac9728318cb77f,cb85dc25aa74978c59ee04d83fac9728318cb77f,Clean up max dimension handling.
ojw28,2015-09-01 13:16:36,https://api.github.com/repos/google/ExoPlayer/git/commits/4a9ff7b094473df1586fdffee2c14069a0514b59,4a9ff7b094473df1586fdffee2c14069a0514b59,Correctly propagate END_OF_STREAM through Opus decoder.
ojw28,2015-09-01 13:16:02,https://api.github.com/repos/google/ExoPlayer/git/commits/a953e7217f800314698e6108b380526a7af56ccd,a953e7217f800314698e6108b380526a7af56ccd,Fix naming/documentation for SmoothStreaming.
ojw28,2015-09-01 13:15:20,https://api.github.com/repos/google/ExoPlayer/git/commits/a704b3d3387dd2453bc64f21bacc83910becea80,a704b3d3387dd2453bc64f21bacc83910becea80,Tweak video renderer.
ojw28,2015-09-01 13:14:46,https://api.github.com/repos/google/ExoPlayer/git/commits/39babb779f7c38ca3e767523a3bef8d77d2591c1,39babb779f7c38ca3e767523a3bef8d77d2591c1,Magic tests fix...
ojw28,2015-09-01 13:14:10,https://api.github.com/repos/google/ExoPlayer/git/commits/f8824ac390fc070bfd23cc54f51ce17b4de5d4d7,f8824ac390fc070bfd23cc54f51ce17b4de5d4d7,Support dynamic TimeRange for DASH live.
ojw28,2015-09-01 13:13:22,https://api.github.com/repos/google/ExoPlayer/git/commits/d5f8d1a1b1a73652b5b359dce8cbe89c34fe729e,d5f8d1a1b1a73652b5b359dce8cbe89c34fe729e,Don't crash updating a representation without an index.
ojw28,2015-09-01 13:12:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ebeafe23c08fff21fd234c86add280f5c25e4877,ebeafe23c08fff21fd234c86add280f5c25e4877,"Refactor multi-period Period updates.

The main change here is to add PeriodHolder.updatePeriod, which is
analogous to RepresentationHolder.updateRepresentation."
ojw28,2015-09-01 13:12:22,https://api.github.com/repos/google/ExoPlayer/git/commits/b55a80dbf99b519a0b75dd83d95d13da12242543,b55a80dbf99b519a0b75dd83d95d13da12242543,Fixed potential issue in which a live-edge latency greater than the duration of the manifest would result in the latest available time being lower than the earliest available time.
ojw28,2015-09-01 13:11:50,https://api.github.com/repos/google/ExoPlayer/git/commits/476cefa7cca4e529643ba54880a7424b278eecf0,476cefa7cca4e529643ba54880a7424b278eecf0,Remove extra constructors.
ojw28,2015-09-01 13:11:01,https://api.github.com/repos/google/ExoPlayer/git/commits/35a744a5d48c86843a0dca23199b7b88d352165e,35a744a5d48c86843a0dca23199b7b88d352165e,Use perl for in-place substitution.
ojw28,2015-09-01 13:07:28,https://api.github.com/repos/google/ExoPlayer/git/commits/96734144ba1c4cbc0fe7d2ddf120e392c4d3af42,96734144ba1c4cbc0fe7d2ddf120e392c4d3af42,"Extract DTS samples in DASH, MP4 and Matroska."
ojw28,2015-09-01 13:06:16,https://api.github.com/repos/google/ExoPlayer/git/commits/bca2d16cc15de3d3659c2ff00ebe9aff71ab6536,bca2d16cc15de3d3659c2ff00ebe9aff71ab6536,Specify locale when using String.format.
ojw28,2015-09-01 13:05:43,https://api.github.com/repos/google/ExoPlayer/git/commits/adf82c7f5e57d93dd7301a727f3611ff23916f71,adf82c7f5e57d93dd7301a727f3611ff23916f71,"Correctly read mimeType for ISO 13818-7 objectTypeIndication values.

Issue: #731"
ojw28,2015-09-01 13:04:47,https://api.github.com/repos/google/ExoPlayer/git/commits/83568ca52f806cf983fcb1daee2d4b621c6cc5d0,83568ca52f806cf983fcb1daee2d4b621c6cc5d0,Support MKV embedded SubRip captions.
ojw28,2015-09-01 13:03:45,https://api.github.com/repos/google/ExoPlayer/git/commits/009d4d0c2cb0244aa1466a2bd62eb54b95c5c24e,009d4d0c2cb0244aa1466a2bd62eb54b95c5c24e,"Fix retries if failure occurrs when reading seek map.

The following sequence was problematic:

1. See start of a cluster having not output a seek map. Decide
   to seek for the cues. Enter CUES_STATE_BUILDING state.
2. Error occurs before seek map is output.
3. ExtractorSampleSource isn't prepared yet, so restarts from the
   start of the stream.
4. See start of the same cluster having not output a seek map.
   This time cuesState is CUES_STATE_BUILDING, so we just carry
   on. We then fill the buffer with sample data, despite the
   source not being prepared, at which point we get stuck.

It's unclear to me why cuesState needed three states, so I've rm'd
the BUILDING state. Step (4) above will now do the same thing as
in step (1). If the failure repeats, we'll eventually fail, which
is WAI."
ojw28,2015-09-01 13:02:16,https://api.github.com/repos/google/ExoPlayer/git/commits/b3ba7e16c12804a521490c5c696a6da5c5c8862e,b3ba7e16c12804a521490c5c696a6da5c5c8862e,Close DefaultHttpDataSource connections quietly.
ojw28,2015-09-01 13:01:43,https://api.github.com/repos/google/ExoPlayer/git/commits/10badcc43050e3e39a3ca6df860ca690265c14b1,10badcc43050e3e39a3ca6df860ca690265c14b1,"Support multi-track in MKV/WebM extractor.

Issue: #514"
ojw28,2015-09-01 13:01:06,https://api.github.com/repos/google/ExoPlayer/git/commits/e07c35815e796395dbc0a92bb4e294eea5817968,e07c35815e796395dbc0a92bb4e294eea5817968,"Don't move to next subtitle too soon.

Second time lucky. We should just move to the next subtitle
when it's started. Simples."
ojw28,2015-09-01 13:00:37,https://api.github.com/repos/google/ExoPlayer/git/commits/530aa265ff6e8b54e93cd54cab883d17eef7dc97,530aa265ff6e8b54e93cd54cab883d17eef7dc97,"Fix playback of MKV audio tracks that use default channel/frequency vals.

Also do some significant cleanup to the extractor."
ojw28,2015-09-01 12:59:34,https://api.github.com/repos/google/ExoPlayer/git/commits/64c0e5c9971e9d907ae334856961a481dc068871,64c0e5c9971e9d907ae334856961a481dc068871,"Use XING headers without size/table of contents.

These MP3s are unseekable but allow calculating the VBR duration correctly.

Treat streams as live only if they are unseekable and lack a duration.

Issue: #713"
ojw28,2015-09-01 12:58:57,https://api.github.com/repos/google/ExoPlayer/git/commits/6799d6dad057b12818501d1b7355ddfa383bae71,6799d6dad057b12818501d1b7355ddfa383bae71,Fixed issue where calling valueAt on a SparseArray with an index greater than the size of the SparseArray would sometimes return the class' internal DELETED object and cause a ClassCastException.
ojw28,2015-09-01 12:58:22,https://api.github.com/repos/google/ExoPlayer/git/commits/7bf1d891688020e32eb53453d0a4d9362b7b6aaf,7bf1d891688020e32eb53453d0a4d9362b7b6aaf,Fixed overlapping captions.
ojw28,2015-09-01 12:57:51,https://api.github.com/repos/google/ExoPlayer/git/commits/9231520ee82b7b132f0f50a9d915d70cf210f694,9231520ee82b7b132f0f50a9d915d70cf210f694,"Some misc cleanup.

- Remove unused method in DashChunkSource.
- Remove inputEncoding parameter for subtitle parsers. We're
  ignoring it in all but one of the parsers, and for the one
  that does use it, it'll only ever receive null, since that's
  all we're passing.
- Make TextTrackRenderer advance to the next subtitle even if
  the current one hasn't finished, in the case that they overlap.
  This shouldn't ever really happen, but it seems best to trust
  the start time of the new sample rather than the last event
  time of the previous one."
ojw28,2015-09-01 12:56:40,https://api.github.com/repos/google/ExoPlayer/git/commits/eb3829c7c8e7baa6ee9de0092c1a98a21143546b,eb3829c7c8e7baa6ee9de0092c1a98a21143546b,"Always show track language if we have it.

May as well. Also specifically fixes showing the language
for subtitle tracks that have application/* mime types."
ojw28,2015-09-01 12:56:10,https://api.github.com/repos/google/ExoPlayer/git/commits/8e9aadc5e58701448625ffbbe9952bd3b7f4286d,8e9aadc5e58701448625ffbbe9952bd3b7f4286d,"Workaround for vorbis EOS flush bug (23361053).

I'm assuming this will be fixed in API level 24."
ojw28,2015-09-01 12:55:02,https://api.github.com/repos/google/ExoPlayer/git/commits/879da812189305f8823174db909b3f7350da5938,879da812189305f8823174db909b3f7350da5938,"Expose more sensible HLS track information.

- Video track is always marked as adaptive, the resolution is
  stripped out (since it's otherwise just set to whatever the
  resolution of the first selected variant is), and the max
  dimensions are set.

Issue #514"
ojw28,2015-09-01 12:54:00,https://api.github.com/repos/google/ExoPlayer/git/commits/0efaec59b82638f83bfad406ebb03b85219f261a,0efaec59b82638f83bfad406ebb03b85219f261a,"Implemented limited support for multi-period DASH manifests.

Limitation: Successive periods must expose the same adaptation
sets and representations.

GitHub Issue: #557"
ojw28,2015-09-01 12:52:30,https://api.github.com/repos/google/ExoPlayer/git/commits/f69f94899185bbfd805dc82ff79bc710570e11b7,f69f94899185bbfd805dc82ff79bc710570e11b7,Fixed issue in which ContainerMediaChunk would throw an NPE for self-initializing chunks.
ojw28,2015-08-27 09:58:46,https://api.github.com/repos/google/ExoPlayer/git/commits/01a037f49694a66e67e633458777a0928000626d,01a037f49694a66e67e633458777a0928000626d,"Merge pull request #741 from pakerfeldt/unfinal-streamingdrmsessionmanager

Enable override of open/close in StreamingDrmSessionManager"
pakerfeldt,2015-08-27 07:20:57,https://api.github.com/repos/google/ExoPlayer/git/commits/c37380049233ee5138ab1ec0f1634506397c1504,c37380049233ee5138ab1ec0f1634506397c1504,"Enable override of open/close in StreamingDrmSessionManager

Make it so that extensions of StreamingDrmSessionManager may override open/close."
b95505017,2015-08-23 16:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/0df29a6497618b6a11fe5025dc6f89a3b1293a90,0df29a6497618b6a11fe5025dc6f89a3b1293a90,Add an extension that provide DataSource using OkHttp
ojw28,2015-08-19 15:35:32,https://api.github.com/repos/google/ExoPlayer/git/commits/25fe9db5d15ca23104dab2c240d4d2e168b12e50,25fe9db5d15ca23104dab2c240d4d2e168b12e50,"Set the sync flag on all audio samples in WebM.

Issue: #690"
ojw28,2015-08-19 15:34:59,https://api.github.com/repos/google/ExoPlayer/git/commits/cde1c27e2b9860d4cc3c9ea49bf5c46ee5632bd2,cde1c27e2b9860d4cc3c9ea49bf5c46ee5632bd2,"Make Opus codec-specific data match the platform.

Issue: #690"
ojw28,2015-08-19 15:34:20,https://api.github.com/repos/google/ExoPlayer/git/commits/02f1efd118bca66f7007cafe8849ab23f82d0439,02f1efd118bca66f7007cafe8849ab23f82d0439,"Add bitrate to MediaFormat.

Issue: #514"
ojw28,2015-08-19 15:33:01,https://api.github.com/repos/google/ExoPlayer/git/commits/ff201db98155ec006f95a479783cb91bcbbf23ae,ff201db98155ec006f95a479783cb91bcbbf23ae,"Allow renderers to pull tracks from multiple sample sources.

This is needed for several use cases:

- ExtractorSampleSource with option to play both embedded and out-of-band
  subtitles.
- HLS multi-audio and out-of-band-webvtt."
ojw28,2015-08-19 15:32:33,https://api.github.com/repos/google/ExoPlayer/git/commits/ea7caf4f91e29dc4787666a50e12009df08f78d1,ea7caf4f91e29dc4787666a50e12009df08f78d1,Bit of a hack to pass through original MediaFormat from FrameworkSampleSource.
ojw28,2015-08-19 15:32:01,https://api.github.com/repos/google/ExoPlayer/git/commits/c9d980801384047ea1ad8130757f848e92d1ed92,c9d980801384047ea1ad8130757f848e92d1ed92,"Make getRendererEnabled behavior the same as it used to be, until it's removed."
ojw28,2015-08-19 15:31:28,https://api.github.com/repos/google/ExoPlayer/git/commits/679fa8de0387de8da71724ab94dfddcdca05526a,679fa8de0387de8da71724ab94dfddcdca05526a,Only use passthrough for passthrough MIME types.
ojw28,2015-08-19 15:29:30,https://api.github.com/repos/google/ExoPlayer/git/commits/e770e5c24ba5c463133011d034c2f473ea25ce25,e770e5c24ba5c463133011d034c2f473ea25ce25,"Multi-track - The (nearly) final step.

- Migrate demo app to use new APIs.
- Add multi-track support for ExtractorSampleSource case.
- Add multi-track support for SmoothStreaming use case.

The final step is to add support back for the DASH use case and
delete MultiTrackChunkSource. This is blocked on multi-period support
landing, in order to prevent a horrendous merge conflict. We also
need to update HLS to expose sensible track information.

Issue: #514"
ojw28,2015-08-19 11:04:13,https://api.github.com/repos/google/ExoPlayer/git/commits/57250036bff2d2ccfccf0ce17391d11cff833afa,57250036bff2d2ccfccf0ce17391d11cff833afa,"Merge pull request #724 from hori-ryota/feature/bugfix-of-parse-aes-url-for-hls

Fixed bug of AES URI Pattern for hls"
hori-ryota,2015-08-19 08:34:28,https://api.github.com/repos/google/ExoPlayer/git/commits/3714751b95ca1659c1ffbb056aa1f4e3abfc5813,3714751b95ca1659c1ffbb056aa1f4e3abfc5813,Fixed bug of AES URI Pattern for hls
ojw28,2015-08-17 16:15:53,https://api.github.com/repos/google/ExoPlayer/git/commits/3b9ca40b05edf1be97b896a37c8dee0a2b88dcb7,3b9ca40b05edf1be97b896a37c8dee0a2b88dcb7,"Add ISO 14496-30 embedded TTML (stpp) subtitle support.

Issue: #689"
ojw28,2015-08-17 16:14:21,https://api.github.com/repos/google/ExoPlayer/git/commits/38f2413290e1f5174b78cdaeb1b8935e5b4b5a25,38f2413290e1f5174b78cdaeb1b8935e5b4b5a25,"Allow ChunkSource an opportunity to fail preparation.

When ChunkSource implementations implement multi-track for DASH and SS,
format selection will move inside of ChunkSource. If we, for example, fail
to query the decoder to determine which tracks are playable, we need an
opportunity to fail (i.e. say we're not prepared, so that maybeThrowError
is called, from which we can throw).

This may go away in the future if we remove the distinct preparation step
and treat tracks/formats as things that can change dynamically, but for now
this is what we have.

Issue #514."
ojw28,2015-08-17 16:13:23,https://api.github.com/repos/google/ExoPlayer/git/commits/d49d5a1765445a35230c0866d84a3880d3076251,d49d5a1765445a35230c0866d84a3880d3076251,"Fix reading HEVC in MPEG TS.

Fix reading the first slice flag, which before could cause a read out of bounds
if the NAL unit started at the end of the buffer.

Handle non-VCL NAL units by flushing a pending sample when starting to read one."
ojw28,2015-08-17 16:12:33,https://api.github.com/repos/google/ExoPlayer/git/commits/37ebec6e826bac0f09c17e977f7341f76127e2b4,37ebec6e826bac0f09c17e977f7341f76127e2b4,"Skip more than one ID3 header.

Issue: 713"
ojw28,2015-08-17 16:11:37,https://api.github.com/repos/google/ExoPlayer/git/commits/90f9f7314d0125106c558458f5ca6e90dd67473e,90f9f7314d0125106c558458f5ca6e90dd67473e,"Allow MediaFormat to express that it's adaptive (not yet used).

Also:
- Better document MediaFormat.
- Document getFormat to indicate what it's good (and not good) for."
ojw28,2015-08-17 16:08:09,https://api.github.com/repos/google/ExoPlayer/git/commits/6e527c550f7eed01937c0f4531e710dc7df4f6cd,6e527c550f7eed01937c0f4531e710dc7df4f6cd,"Expose new multi-track APIs in the ExoPlayer interface + plumb
multi-track support upstream to the ChunkSource interface.

This change does not yet make use of the newly exposed APIs. This
will come in a subsequent CL.

Issue #514."
ojw28,2015-08-13 19:36:50,https://api.github.com/repos/google/ExoPlayer/git/commits/bf77f3b28969942c278ec98a53bcdb6d6b2cb713,bf77f3b28969942c278ec98a53bcdb6d6b2cb713,"Simplify subtitle parsing.

- Currently all subtitles we parse contain timestamps relative to the sample
  timestamp, however we add the sample timestamp in inconsistent ways (sometimes
  in the Subtitle, sometimes in the SubtitleParser). This change converges on
  a single approach. It also paves the way for passing absolute offsets to use
  instead, and being able to apply them in a consistent way in a single place
  (PlayableSubtitle). This functionality will be required for ISO 14496-30 TTML
  embedded subtitles.

Issue: #689"
ojw28,2015-08-13 19:35:52,https://api.github.com/repos/google/ExoPlayer/git/commits/fbf590fdf691af57bbbbf6afacde867c69e59604,fbf590fdf691af57bbbbf6afacde867c69e59604,Fix reading PCM configuration in HEVC SPS.
ojw28,2015-08-13 19:32:09,https://api.github.com/repos/google/ExoPlayer/git/commits/6b44c6e6b1aad560a44abeb5372239bb19726ed1,6b44c6e6b1aad560a44abeb5372239bb19726ed1,"Fix single sample loading + seeking in HLS.

Issue #587"
ojw28,2015-08-13 10:19:34,https://api.github.com/repos/google/ExoPlayer/git/commits/87457d5042b3b64b060be41faaeebf0b7bd9d1d0,87457d5042b3b64b060be41faaeebf0b7bd9d1d0,Add CodecCounters to LibvpxVideoTrackRenderer.
ojw28,2015-08-13 10:18:15,https://api.github.com/repos/google/ExoPlayer/git/commits/d3995eaa7ad2e8406c1c86f3035f31d762352baf,d3995eaa7ad2e8406c1c86f3035f31d762352baf,"Fix rotation handling as far as is possible.

Issue: #91"
ojw28,2015-08-11 17:23:22,https://api.github.com/repos/google/ExoPlayer/git/commits/8db1331021c46a6357a70ebc6f68b59ccbcff3c0,8db1331021c46a6357a70ebc6f68b59ccbcff3c0,"Propagate MediaFormat instead of TrackInfo.

Issue #514."
ojw28,2015-08-11 17:18:19,https://api.github.com/repos/google/ExoPlayer/git/commits/f7ffeb75cf3681ba4557a5f02f4c60f28e40bc5f,f7ffeb75cf3681ba4557a5f02f4c60f28e40bc5f,"Parse pixel aspect ratio from SPS for use when there's no pasp atom.

Issue: #697"
ojw28,2015-08-11 17:17:33,https://api.github.com/repos/google/ExoPlayer/git/commits/69466adbe3e25bc77a3a2798c50823547edee107,69466adbe3e25bc77a3a2798c50823547edee107,Remove unused exception class.
ojw28,2015-08-11 17:16:56,https://api.github.com/repos/google/ExoPlayer/git/commits/02c7525ff7d98b861d45aa32741611df6a339a89,02c7525ff7d98b861d45aa32741611df6a339a89,Remove custom VTT logic.
ojw28,2015-08-11 17:12:43,https://api.github.com/repos/google/ExoPlayer/git/commits/dbaeecc4da6769bc2441bb108fdfba6413cdbc0e,dbaeecc4da6769bc2441bb108fdfba6413cdbc0e,"Improve DASH manifest parsing.

- Parse all attributes that may exist in either the AdaptationSet or
  in the child Representation elements at both levels.
- Correctly infer TYPE_TEXT for Representation elements whose mimeType
  is application/mp4 and whose codecs attribute indicates a known text
  codec type.

Issue: #689"
ojw28,2015-08-11 17:11:35,https://api.github.com/repos/google/ExoPlayer/git/commits/d6152dc36a0066d3f2bf43a6d1ce57341e10a7a8,d6152dc36a0066d3f2bf43a6d1ce57341e10a7a8,Use MediaFormat.language in hashCode and equals.
ojw28,2015-08-11 17:10:46,https://api.github.com/repos/google/ExoPlayer/git/commits/7d306ae593dea44624705e3d8656defe07d6f36b,7d306ae593dea44624705e3d8656defe07d6f36b,"Add language to MediaFormat + parse it from mdhd box.

+ Move conversion from framework -> exo format to FrameworkSampleSource.
+ Improve MediaFormat conversion test."
ojw28,2015-08-11 17:08:23,https://api.github.com/repos/google/ExoPlayer/git/commits/b2206866f0eecc52af53681ec340f61ba7d38d2a,b2206866f0eecc52af53681ec340f61ba7d38d2a,"Use audio passthrough if possible, falling back to on-device codecs.

Remove MPEG TS stream filtering based on AudioCapabilities.

Pass AudioCapabilities to MediaCodecAudioTrackRenderer so it can choose between
passthrough/raw and decoding for AC-3 tracks."
ojw28,2015-08-11 17:06:21,https://api.github.com/repos/google/ExoPlayer/git/commits/6085d185faa41871f76a8ddf3d5825bd0cc5e361,6085d185faa41871f76a8ddf3d5825bd0cc5e361,"Internal plumbing for multi-track support.

- Generalize rendererEnabledFlags to be selected track indices through
  ExoPlayerImpl/ExoPlayerImplInternal.
- Selecting an out-of-bound track index (e.g. -1) is equivalent to
  disabling a renderer prior to the generalization.
- A prepared TrackRenderer that exposes 0 tracks is equivalent to a
  TrackRenderer in the STATE_IGNORE state prior to the generalization.

Issue #514."
ojw28,2015-08-11 17:04:00,https://api.github.com/repos/google/ExoPlayer/git/commits/13f4a3e3bdbde53534cfb36bd3f00462f32a6a93,13f4a3e3bdbde53534cfb36bd3f00462f32a6a93,"Common base class for SampleSource based TrackRenderers.

This will allow multi-track support when consuming from a SampleSource to
be added in a single class, rather than in 6. Prep for Issue #514."
ojw28,2015-08-11 17:00:42,https://api.github.com/repos/google/ExoPlayer/git/commits/150b3cdb1930c8e22438f853a9c91356d8878cbd,150b3cdb1930c8e22438f853a9c91356d8878cbd,"Call AudioTrack.flush() before AudioTrack.release().

On NVIDIA Shield, recreated passthrough AudioTracks have incorrect playback head
positions, due to shared state with the previously destroyed passthrough
AudioTrack. Calling AudioTrack.flush() before AudioTrack.release() ensures this
state is cleared.

This is a safe change so I have not made it a device-specific workaround. The
combined time for flush and release is less than 10 ms (with flush normally
taking less than two ms)."
ojw28,2015-08-11 16:59:24,https://api.github.com/repos/google/ExoPlayer/git/commits/f129812b7042e046d6061c37c8414b605cd5182a,f129812b7042e046d6061c37c8414b605cd5182a,Clean up AudioCapabilities.
ojw28,2015-08-11 16:52:13,https://api.github.com/repos/google/ExoPlayer/git/commits/adf98b0fccd323f5afc149590371254218443728,adf98b0fccd323f5afc149590371254218443728,"Make seekTo(currentPosition) a no-op in ExoPlayer.

- Also avoid boxing when passing the seek position to the background
  thread.

Issue: #654"
ojw28,2015-08-11 16:48:45,https://api.github.com/repos/google/ExoPlayer/git/commits/6ee6bc5c5978d3f44da6e09a75e57c32833eacde,6ee6bc5c5978d3f44da6e09a75e57c32833eacde,"webm demo app: Fix crash on screen touch

Fix crash on screen touch before starting playback. mediaController cannot be
used until after setMediaPlayer has been called on it."
ojw28,2015-08-11 16:47:02,https://api.github.com/repos/google/ExoPlayer/git/commits/ce26e601ed9e12bf9ebecde6359527415336641c,ce26e601ed9e12bf9ebecde6359527415336641c,"Fix typo in H265Reader.

See H.265/HEVC specification subsection 7.3.4."
ojw28,2015-08-07 16:28:03,https://api.github.com/repos/google/ExoPlayer/git/commits/ab3f623767525c3e0c6b555e3aa3f3fa2bfa50d2,ab3f623767525c3e0c6b555e3aa3f3fa2bfa50d2,"Workaround broken devices.

Issue #464
Issue #665"
ojw28,2015-08-04 15:07:54,https://api.github.com/repos/google/ExoPlayer/git/commits/a7d843f90d0929855af638167dcd28417c1499bf,a7d843f90d0929855af638167dcd28417c1499bf,Increment version to 1.4.2
ojw28,2015-08-04 12:53:57,https://api.github.com/repos/google/ExoPlayer/git/commits/3bd52c74bb18471888f2aa0b84f02d98695e3de4,3bd52c74bb18471888f2aa0b84f02d98695e3de4,Update release notes
ojw28,2015-08-04 12:50:15,https://api.github.com/repos/google/ExoPlayer/git/commits/039cddd6c0480e48bba51930aad761fd4096aa79,039cddd6c0480e48bba51930aad761fd4096aa79,Don't require comma in EXTINF tags
ojw28,2015-08-03 14:18:23,https://api.github.com/repos/google/ExoPlayer/git/commits/d3ce56f9bc97e58f7bee487f92dc0d8c097c9d88,d3ce56f9bc97e58f7bee487f92dc0d8c097c9d88,Fix commented code
ojw28,2015-08-03 14:17:41,https://api.github.com/repos/google/ExoPlayer/git/commits/574e554e015eceba4fa2c8488df52b250c2cb5ef,574e554e015eceba4fa2c8488df52b250c2cb5ef,Make classes/methods final to prevent uncontrolled extension.
ojw28,2015-08-03 13:52:52,https://api.github.com/repos/google/ExoPlayer/git/commits/6b775efd4d74f179ac34003b679ef2f68304388b,6b775efd4d74f179ac34003b679ef2f68304388b,Fix playback of HLS media playlists
ojw28,2015-07-30 19:34:17,https://api.github.com/repos/google/ExoPlayer/git/commits/1a5d12359df09de6fc20fee74bcf3e3a98881208,1a5d12359df09de6fc20fee74bcf3e3a98881208,"Fail fast if we can't play anything.

Issue: #672"
ojw28,2015-07-30 16:16:19,https://api.github.com/repos/google/ExoPlayer/git/commits/ed51b5824206970c92f6e7684ded1c2d4788fccb,ed51b5824206970c92f6e7684ded1c2d4788fccb,Fix backoff for SingleSampleSource.
ojw28,2015-07-30 16:13:24,https://api.github.com/repos/google/ExoPlayer/git/commits/5f51a4ff83577afe19a8ba2678b5be0d0e6aaeb4,5f51a4ff83577afe19a8ba2678b5be0d0e6aaeb4,Cleanup - Make RollingSampleBuffer append methods more consistent.
ojw28,2015-07-30 09:05:54,https://api.github.com/repos/google/ExoPlayer/git/commits/0d42032ada8418a686ec32babd9839c9e8af3d74,0d42032ada8418a686ec32babd9839c9e8af3d74,Aes128DataSource should be final.
ojw28,2015-07-30 09:05:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a56c00268d5b64ec0f6f02dd795ad0a868dd725f,a56c00268d5b64ec0f6f02dd795ad0a868dd725f,"Remove ability to disable frame accurate seek.

Everything I've seen that uses ExoPlayer sets it to true, and
setting it to false is poorly supported / likely to result in
bad initial A/V sync after each seek."
ojw28,2015-07-29 21:34:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e90ad9c47db99472db1be5f74bfffd2d95282234,e90ad9c47db99472db1be5f74bfffd2d95282234,"Make Aes128DataSource private to the HLS package.

Issue: #662"
ojw28,2015-07-29 20:58:59,https://api.github.com/repos/google/ExoPlayer/git/commits/1f0e6a5c46b05ca27cfd607771c5d40acc7bae89,1f0e6a5c46b05ca27cfd607771c5d40acc7bae89,"Simplify subtitle loading with a SingleSampleSource.

Issue: #587"
ojw28,2015-07-29 20:49:19,https://api.github.com/repos/google/ExoPlayer/git/commits/98ecc209be81c3936c2c7682507205d1a629594f,98ecc209be81c3936c2c7682507205d1a629594f,"Improvements to Mp4Extractor and FragmentedMp4Extractor.

- Make Mp4Extractor more robust when resuming from read failures.
- Made FragmentedMp4Extractor handle atoms with extended sizes.

Issue #652"
ojw28,2015-07-29 20:48:17,https://api.github.com/repos/google/ExoPlayer/git/commits/2f0aec43ec24a04fd1a0a004e0dea9539df8a177,2f0aec43ec24a04fd1a0a004e0dea9539df8a177,"Don't print warning if we get a SeekMap when reading DASH chunks.

Both FragmentedMp4Extractor and WebmExtractor now invoke seekMap() with
SeekMap.UNSEEKABLE if there isn't an index in the stream, so DASH playbacks
will end up printing this warning every 5 seconds or so. This is obviously
not desirable, so this CL just removes the warning! The alternative would
have been to print a warning if the value is anything other than UNSEEKABLE,
but it doesn't really seem worth it."
ojw28,2015-07-27 15:32:55,https://api.github.com/repos/google/ExoPlayer/git/commits/48826836d15d7ea57a4ea55fb48d1823b95a93e4,48826836d15d7ea57a4ea55fb48d1823b95a93e4,"Put tests where they belong + bump bintray-release version.

Issue: #651"
ojw28,2015-07-27 15:20:40,https://api.github.com/repos/google/ExoPlayer/git/commits/08dc691ff7b1e4449493ba0fa77ddb9456f37702,08dc691ff7b1e4449493ba0fa77ddb9456f37702,"Allow playback of unseekable fmp4 media.

This is useful to allow playback of individual segments from a
DASH stream as regular fmp4 files. These segments don't typically
contain a segment index. For playback to start, we need to invoke
seekMap with the UNSEEKABLE index. We do this if we haven't seen
a segment index when we encounter an mdat box (if one were present,
it would have been located earlier than this point)."
ojw28,2015-07-27 11:45:23,https://api.github.com/repos/google/ExoPlayer/git/commits/e89c40cfd3464f5a6c13b8e0498d569194abd955,e89c40cfd3464f5a6c13b8e0498d569194abd955,"Handle renderer building cancellation.

If the manifest server response arrived after the player was released, the
renderer builder would set up renderers for a released player, causing an
exception to the thrown in the DASH case.

Also fix Issue #657"
ojw28,2015-07-23 13:50:57,https://api.github.com/repos/google/ExoPlayer/git/commits/9e0ca9e7f00d2b5bb288577a6a0b3df5af1d378c,9e0ca9e7f00d2b5bb288577a6a0b3df5af1d378c,"Add support for reading MPEG 4 SP in matroska streams.

Issue: #641"
ojw28,2015-07-23 12:44:52,https://api.github.com/repos/google/ExoPlayer/git/commits/03305c92cf41acb88565d2dc9cc81f6323c77aec,03305c92cf41acb88565d2dc9cc81f6323c77aec,Modified timing of manifest fetches to compensate for drift due to fetch time.
ojw28,2015-07-23 12:44:11,https://api.github.com/repos/google/ExoPlayer/git/commits/7ea199638e785ddfbf56605c65297e5da4c63f9c,7ea199638e785ddfbf56605c65297e5da4c63f9c,"Content/Asset data sources - Handle >2^31 byte files correctly.

Issue #641"
ojw28,2015-07-23 12:43:48,https://api.github.com/repos/google/ExoPlayer/git/commits/b57b80f723dbcbff0cfa275926df428af59dda11,b57b80f723dbcbff0cfa275926df428af59dda11,"Multiple small fixes for subtitles/mp4.

1. [Cleanup] Remove unused Track types, including TYPE_TIME_CODE.
2. Add subtitle track type, which is different to the existing text type.
3. Set duration on the media formats for text and subtitle tracks. This
   was causing the player to report unknown media duration for mp4 files
   containing such tracks.
4. Make TextTrackRenderer do the right thing when not started.

Issue: #635"
ojw28,2015-07-23 12:14:06,https://api.github.com/repos/google/ExoPlayer/git/commits/b44de0d2509abfb39a15b343957a7d4338e08d26,b44de0d2509abfb39a15b343957a7d4338e08d26,"Improve sniffer error reporting.

- Make UnrecognizedInputFormatException public so the app can more easily handle
  it when it is propagated to onPlayerError.
- Format the description using the simple class names for the extractors.
- Don't retry loading after it's thrown, but just throw immediately."
ojw28,2015-07-23 12:12:57,https://api.github.com/repos/google/ExoPlayer/git/commits/4c1fb0c9772fa76dc6e7695ee904a337cc56167c,4c1fb0c9772fa76dc6e7695ee904a337cc56167c,Don't catch API 19 exception from newInstance.
ojw28,2015-07-23 12:12:01,https://api.github.com/repos/google/ExoPlayer/git/commits/a44a78c72d4c1267bd64ffa4437c56090ee8c4db,a44a78c72d4c1267bd64ffa4437c56090ee8c4db,Fix some HEVC and H.263 nits.
ojw28,2015-07-23 12:09:52,https://api.github.com/repos/google/ExoPlayer/git/commits/9dc1bfbbe7bdba0ddf483f6fd7ee4b0d8f97534a,9dc1bfbbe7bdba0ddf483f6fd7ee4b0d8f97534a,Support POST requests with DefaultHttpDataSource/DataSpec
ojw28,2015-07-22 17:46:46,https://api.github.com/repos/google/ExoPlayer/git/commits/6b03e6a17c8a970e41c39bdc686c1ced77371319,6b03e6a17c8a970e41c39bdc686c1ced77371319,"Fix MP4+MKV sniffing to handle empty atoms / EBML elements.

Issue: #641"
ojw28,2015-07-22 15:14:11,https://api.github.com/repos/google/ExoPlayer/git/commits/648f224d98d62f748bccfb40dcac37750fc4f580,648f224d98d62f748bccfb40dcac37750fc4f580,"Merge pull request #639 from IanDBird/mkv-hevc

Add support for HEVC video in Matroska files"
ojw28,2015-07-22 15:14:04,https://api.github.com/repos/google/ExoPlayer/git/commits/a9d9a46c4239fe2d37010d8cf621bd4520b934b2,a9d9a46c4239fe2d37010d8cf621bd4520b934b2,"Merge pull request #643 from Ood-Tsen/s263

add support s263"
Ood-Tsen,2015-07-22 13:08:38,https://api.github.com/repos/google/ExoPlayer/git/commits/cf2e539a31f8b2bd82f1fc85c05aed082f30049e,cf2e539a31f8b2bd82f1fc85c05aed082f30049e,add support s263
ojw28,2015-07-21 16:39:38,https://api.github.com/repos/google/ExoPlayer/git/commits/85e0bca33d7cd4d1052a7bebfc6ab6abadc2df19,85e0bca33d7cd4d1052a7bebfc6ab6abadc2df19,"Add support for choosing an extractor based on sniffing the container.

- ExtractorSampleSource takes an array of extractors to test for suitability.
- Extractors now implement a sniff() method that returns whether they can
  extract samples in the input stream's format.
- Switch demo app samples to use format detection.

Issue: #438"
ojw28,2015-07-21 16:36:07,https://api.github.com/repos/google/ExoPlayer/git/commits/87daa912d74f505660b7a854fb69c7e4c3a0bf45,87daa912d74f505660b7a854fb69c7e4c3a0bf45,Remove dead code (failed==false in all cases)
ojw28,2015-07-21 16:35:09,https://api.github.com/repos/google/ExoPlayer/git/commits/3b34b0682c49d58dd131710ad59d42ba0b2f8a83,3b34b0682c49d58dd131710ad59d42ba0b2f8a83,"Handle the last MP3 sample being truncated without throwing.

Issue: #599"
ojw28,2015-07-21 16:34:37,https://api.github.com/repos/google/ExoPlayer/git/commits/ed2b65654c2684d85debfd24b6366bddfb40366f,ed2b65654c2684d85debfd24b6366bddfb40366f,Cleanup UdpDataSource.
IanDBird,2015-07-21 14:24:35,https://api.github.com/repos/google/ExoPlayer/git/commits/646b39622fbfa4fb9308c0094658113e808f8fc0,646b39622fbfa4fb9308c0094658113e808f8fc0,Add support for HEVC video in Matroska files
ojw28,2015-07-21 09:07:49,https://api.github.com/repos/google/ExoPlayer/git/commits/a2f10399e7e6249b4cc389e6241149a6cd1a9b49,a2f10399e7e6249b4cc389e6241149a6cd1a9b49,Improve error propagation
ojw28,2015-07-21 09:05:22,https://api.github.com/repos/google/ExoPlayer/git/commits/5df6854fea8412a95384a4bed7c2ff50ab382adc,5df6854fea8412a95384a4bed7c2ff50ab382adc,Noop tweak to DefaultHttpDataSource
ojw28,2015-07-21 09:05:04,https://api.github.com/repos/google/ExoPlayer/git/commits/e7950555d3acaba105f46fb83e7496ae0e4a4312,e7950555d3acaba105f46fb83e7496ae0e4a4312,Generalize MulticastDataSource to UdpDataSource
ojw28,2015-07-21 09:02:54,https://api.github.com/repos/google/ExoPlayer/git/commits/4451b065711863bf714e6f1406a42276ec7ee1c3,4451b065711863bf714e6f1406a42276ec7ee1c3,Use default subtitle parsers in demo app
ojw28,2015-07-21 09:01:15,https://api.github.com/repos/google/ExoPlayer/git/commits/eb4920bb2a5039115920efa463a2bad3d955ba64,eb4920bb2a5039115920efa463a2bad3d955ba64,"Better compatibility with MKV test streams.

1. Fix seeking in test2.mkv by handling non-default timescale
   after duration.
2. Fix handling of missing cues in test6.mkv by allowing playback
   to continue (but all seeks will reset to t=0).

Issue #631"
ojw28,2015-07-21 08:59:22,https://api.github.com/repos/google/ExoPlayer/git/commits/7bc1241e06ee06d6f693d4ec69bc9f6f6fbff167,7bc1241e06ee06d6f693d4ec69bc9f6f6fbff167,Reflect subtitle parsers.
ojw28,2015-07-21 08:58:36,https://api.github.com/repos/google/ExoPlayer/git/commits/6082bb67691bcacab235793c29cc0b5ca0a68e53,6082bb67691bcacab235793c29cc0b5ca0a68e53,Always use timed video frame release on V21+.
ojw28,2015-07-21 08:57:51,https://api.github.com/repos/google/ExoPlayer/git/commits/508e1cabe1123f6d3766789f364463adbd6a98bf,508e1cabe1123f6d3766789f364463adbd6a98bf,"Always null inputStream, even if closing it failed."
ojw28,2015-07-17 18:07:46,https://api.github.com/repos/google/ExoPlayer/git/commits/cd83bbb740e5844e2e96d837db2e13580d4971fd,cd83bbb740e5844e2e96d837db2e13580d4971fd,Fix release notes
ojw28,2015-07-17 11:01:32,https://api.github.com/repos/google/ExoPlayer/git/commits/d8c874f7d81cb74a4094bcab42f9d102474fa112,d8c874f7d81cb74a4094bcab42f9d102474fa112,Correct grammar
ojw28,2015-07-17 10:34:00,https://api.github.com/repos/google/ExoPlayer/git/commits/0279a9f791138fc4746ba1005a79ae610a6dcdd6,0279a9f791138fc4746ba1005a79ae610a6dcdd6,Bump version to 1.4.1
ojw28,2015-07-17 10:30:48,https://api.github.com/repos/google/ExoPlayer/git/commits/119c4736067445e01627ea01b3d04609d52f593f,119c4736067445e01627ea01b3d04609d52f593f,Temporary fix to prevent premature failures during HLS playbacks II.
ojw28,2015-07-16 20:48:14,https://api.github.com/repos/google/ExoPlayer/git/commits/7c2d6355650e311be38a40115fed359bec4ab0ab,7c2d6355650e311be38a40115fed359bec4ab0ab,Minor fixes for Javadoc warnings
ojw28,2015-07-16 19:22:35,https://api.github.com/repos/google/ExoPlayer/git/commits/8a7d68da6c9d2d63a53e1fa8e08acf592c453ae8,8a7d68da6c9d2d63a53e1fa8e08acf592c453ae8,Don't render empty cues
ojw28,2015-07-16 18:30:14,https://api.github.com/repos/google/ExoPlayer/git/commits/ebe9ae6b13126cb12aa595aefc35daab195e6704,ebe9ae6b13126cb12aa595aefc35daab195e6704,"In continueBuffering, return whether a particular track has samples.

Issue: #595"
ojw28,2015-07-16 17:26:50,https://api.github.com/repos/google/ExoPlayer/git/commits/17c1b630b813db4ca94aa89c9309531da5dbb9e0,17c1b630b813db4ca94aa89c9309531da5dbb9e0,Bump version to 1.4.0
ojw28,2015-07-16 16:59:41,https://api.github.com/repos/google/ExoPlayer/git/commits/67b47756815931db0bc2b5858d55424fc768b133,67b47756815931db0bc2b5858d55424fc768b133,Temporary fix to prevent premature failures during HLS playbacks
ojw28,2015-07-15 18:55:35,https://api.github.com/repos/google/ExoPlayer/git/commits/85256bef411bd8a267309a6dc8bfa312d82825ec,85256bef411bd8a267309a6dc8bfa312d82825ec,"Add support for MP3 audio in Matroska files.

GitHub issue: #589"
ojw28,2015-07-15 17:53:32,https://api.github.com/repos/google/ExoPlayer/git/commits/79db618ba63195c08bfda64c5a3b50906e36f5ef,79db618ba63195c08bfda64c5a3b50906e36f5ef,"Add support for header stripping in Matroska streams.

Issue: #589"
ojw28,2015-07-15 17:52:57,https://api.github.com/repos/google/ExoPlayer/git/commits/6c2b3c875da14f4d4aa23ed709fd7d868f5697b8,6c2b3c875da14f4d4aa23ed709fd7d868f5697b8,Handle unbounded ranges in DASH manifests.
ojw28,2015-07-15 10:27:10,https://api.github.com/repos/google/ExoPlayer/git/commits/2b0f68a0abaabf3cdac29624b3b429512ca19670,2b0f68a0abaabf3cdac29624b3b429512ca19670,Rm Timescale from AudioTrack. Not required.
ojw28,2015-07-15 10:15:21,https://api.github.com/repos/google/ExoPlayer/git/commits/72d42fbc9faaf56980401d33fb2e5c93d2e161b4,72d42fbc9faaf56980401d33fb2e5c93d2e161b4,"Fix an issue where retrying WebM extraction failed.

The ID_SEGMENT can only be read once, as seeing the element a second time is
assumed to indicate that the file contains multiple segment elements (which is
not supported).

This change allows the element to be read twice if it is at the same position,
so that retrying loading from the start can succeed."
ojw28,2015-07-15 10:14:37,https://api.github.com/repos/google/ExoPlayer/git/commits/31e5e0edaf6ef30aca39a0e5603e389ff1a71bd4,31e5e0edaf6ef30aca39a0e5603e389ff1a71bd4,"Clear outputBuffer.flags in VpxDecoderWrapper.decodeBuffer()

This ensures FLAG_END_OF_STREAM doesn't get permanently stuck."
ojw28,2015-07-15 10:11:41,https://api.github.com/repos/google/ExoPlayer/git/commits/4282d7c22b0d3b97276de2e3324bdc8238d71de5,4282d7c22b0d3b97276de2e3324bdc8238d71de5,"Update MediaCodecTrackRenderer.

1. Workaround for decoders that fail to handle the END_OF_STREAM flag.
2. Revert processing of final output buffer if it's non-empty. This
   introduced another bug (#596)

Reverts: b88012f51ff3df1d8a35c032c5f585bc994a81ba
Issue: #417
Issue: #596"
ojw28,2015-07-15 10:10:53,https://api.github.com/repos/google/ExoPlayer/git/commits/884e7a41707348c6a5a48e4342b4986bc7b2bad5,884e7a41707348c6a5a48e4342b4986bc7b2bad5,"Optimize captions.

SubtitleLayout no longer trigger re-layouts of the view hierarchy.
Instead, the SubtitleLayout just invalidates itself. This is made
possible by making SubtitleLayout a regular View that draws each Cue
directly onto the canvas, rather than having SubtitleLayout be a
ViewGroup with a child View for each Cue."
ojw28,2015-07-15 10:10:09,https://api.github.com/repos/google/ExoPlayer/git/commits/8b08efce794a99ecd93651ad396bc2c5aea26a63,8b08efce794a99ecd93651ad396bc2c5aea26a63,Fix warnings in WebM demo app
ojw28,2015-07-15 10:09:20,https://api.github.com/repos/google/ExoPlayer/git/commits/c1e1497d1397a32e2c3d9476d9c87843451e6b1d,c1e1497d1397a32e2c3d9476d9c87843451e6b1d,"Change how subtitles are laid out in the demo app.

The SubtitleLayout is now properly aligned with the surface.
This means the subtitles remain on top of the video in portrait
mode, rather than being huge and below it."
ojw28,2015-07-15 10:05:15,https://api.github.com/repos/google/ExoPlayer/git/commits/fe52a486f47331a2c898802a2b2da5ac8ca645de,fe52a486f47331a2c898802a2b2da5ac8ca645de,Inject Allocator into ExtractorSampleSource.
ojw28,2015-07-15 10:01:44,https://api.github.com/repos/google/ExoPlayer/git/commits/b4879236b58a7c3214b0a58f1d329e315f9a20e8,b4879236b58a7c3214b0a58f1d329e315f9a20e8,"Document usage of MATCH_LONGEST_US.

Handling of this constant is already in place everywhere, this
just documents that its use is allowed."
andrewlewis,2015-07-10 10:47:24,https://api.github.com/repos/google/ExoPlayer/git/commits/23580049514f514c2f786e5571b842fa3ffcf158,23580049514f514c2f786e5571b842fa3ffcf158,"Add device-specific workarounds for VP8 and MP3.

Avoid using the VP8 decoder on Samsung Galaxy S4 Mini.
Issue: #548

Avoid using the MP3 decoder on Sony Xperia Z/API level 16.
Issue: #377"
andrewlewis,2015-07-10 10:46:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c47c6816e4cc0d04c41e7c16f734cc8d90c04d1d,c47c6816e4cc0d04c41e7c16f734cc8d90c04d1d,Detect frames using first_slice_segment_in_pic_flag.
ojw28,2015-06-30 12:50:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ead8abf09f48149b7b69b3471eaa256ff57614f2,ead8abf09f48149b7b69b3471eaa256ff57614f2,Fixed incorrect caption sizes after device orientation change.
ojw28,2015-06-30 12:49:03,https://api.github.com/repos/google/ExoPlayer/git/commits/35a9f2635c8f6c7aed7696588b1c8154307c29a7,35a9f2635c8f6c7aed7696588b1c8154307c29a7,"Use Locale.US in calls to String.format.

Issue: #585"
ojw28,2015-06-26 16:14:55,https://api.github.com/repos/google/ExoPlayer/git/commits/f03e1cd572d846692c74febeb69289b1d949a0b8,f03e1cd572d846692c74febeb69289b1d949a0b8,Updatae release notes
ojw28,2015-06-26 15:53:46,https://api.github.com/repos/google/ExoPlayer/git/commits/588be2bd4b44fd15fd4636a0f7f482647190d4fa,588be2bd4b44fd15fd4636a0f7f482647190d4fa,Fix intermittent decoder crash when playing MP3 inside MP4
ojw28,2015-06-26 13:44:10,https://api.github.com/repos/google/ExoPlayer/git/commits/3bcd9ca6c3bc506cc91b00cb5526d4f907fe4fdf,3bcd9ca6c3bc506cc91b00cb5526d4f907fe4fdf,Simplify HLS MP3 support.
ojw28,2015-06-26 13:41:59,https://api.github.com/repos/google/ExoPlayer/git/commits/0c577ce2ce0bc1f7b34e98be112cd804791283a2,0c577ce2ce0bc1f7b34e98be112cd804791283a2,Merge branch 'tresvecesseis-dev' into dev
ojw28,2015-06-26 13:41:47,https://api.github.com/repos/google/ExoPlayer/git/commits/7fb5b86579d596e5fc9d0183c021a833d0adfa39,7fb5b86579d596e5fc9d0183c021a833d0adfa39,Merge branch 'dev' of git://github.com/tresvecesseis/ExoPlayer into dev
ojw28,2015-06-26 13:38:28,https://api.github.com/repos/google/ExoPlayer/git/commits/faff85784bb382551ffa5f4574988962826d9e8e,faff85784bb382551ffa5f4574988962826d9e8e,Use the right overload of createAudioFormat in Ac3Util.
ojw28,2015-06-26 13:37:48,https://api.github.com/repos/google/ExoPlayer/git/commits/a4ff13d7da0878ed07030db1691d5c2169d90dfa,a4ff13d7da0878ed07030db1691d5c2169d90dfa,"Set a MIME type based on the esds ObjectTypeIndication.

Issue: #576"
ojw28,2015-06-26 13:35:57,https://api.github.com/repos/google/ExoPlayer/git/commits/a626a5e5d4aecb816bc392f1e6049b7c1a2103d7,a626a5e5d4aecb816bc392f1e6049b7c1a2103d7,Take period start time into account when calculating segment times.
ojw28,2015-06-26 13:33:08,https://api.github.com/repos/google/ExoPlayer/git/commits/2b27137e9e1a11595853c244e44f863d18e3be9e,2b27137e9e1a11595853c244e44f863d18e3be9e,"Fix bug that caused failure when all renderers disabled.

Prior to this change, there was a bug where playback would
fail with the following steps:

1. Start playback.
2. Pause playback.
3. Disable all renderers.
4. Enable at least one renderer.
5. Resume playback."
ojw28,2015-06-26 13:31:13,https://api.github.com/repos/google/ExoPlayer/git/commits/33d55631ed43b63e029667ae04d89af886a925a0,33d55631ed43b63e029667ae04d89af886a925a0,"Fix handling of pixel aspect ratio change.

The new logic assumes that an input format change will be
followed by an output format change, but I think this is
pretty much guaranteed. If this weren't to happen then the
new pixel aspect ratio wont be picked up, but I think it's
extremely unlikely (it would require the format to stay
exactly the same except for the pixel aspect ratio, which
would be bizarre)."
ojw28,2015-06-26 13:29:45,https://api.github.com/repos/google/ExoPlayer/git/commits/c7635c9dbd4f89fc469819955bf776d780c225cb,c7635c9dbd4f89fc469819955bf776d780c225cb,"Add some audio hooks.

This makes it easier to add an extension for adjusting
audio playback rate."
ojw28,2015-06-26 13:28:50,https://api.github.com/repos/google/ExoPlayer/git/commits/b88012f51ff3df1d8a35c032c5f585bc994a81ba,b88012f51ff3df1d8a35c032c5f585bc994a81ba,"Process final output buffer if it's non-empty.

Issue: #417"
ojw28,2015-06-26 13:27:45,https://api.github.com/repos/google/ExoPlayer/git/commits/a175ecbff36ebcce2bb8f1b73a16e4f276eed09e,a175ecbff36ebcce2bb8f1b73a16e4f276eed09e,Update WebVTT test to check we handle comment in header.
ojw28,2015-06-26 13:27:17,https://api.github.com/repos/google/ExoPlayer/git/commits/fb31fe0fe43d95fa108d9d51f31e7c6a07a60c15,fb31fe0fe43d95fa108d9d51f31e7c6a07a60c15,Fix stale comment
ojw28,2015-06-26 13:26:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b394c4612821eee2246b365776173858656c2d8f,b394c4612821eee2246b365776173858656c2d8f,Add utility method to query whether device is an AndroidTV.
ojw28,2015-06-26 13:26:31,https://api.github.com/repos/google/ExoPlayer/git/commits/a1ab1fc2a2b7562f699d5af6a89e78ad8fae74e7,a1ab1fc2a2b7562f699d5af6a89e78ad8fae74e7,"Detect WebVTT file header according to the spec:

1. An optional U+FEFF BYTE ORDER MARK (BOM) character.
2. The string ""WEBVTT"".
3. Optionally, either a U+0020 SPACE character or a U+0009 CHARACTER
   TABULATION (tab) character followed by any number of characters that
   are not U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR) characters.
4. Exactly one WebVTT line terminators to terminate the line with the file
   magic and separate it from the rest of the body.

Issue: #580"
ojw28,2015-06-26 13:24:37,https://api.github.com/repos/google/ExoPlayer/git/commits/712756c3e85d6ed9cd411735bfbda3e0de4ab754,712756c3e85d6ed9cd411735bfbda3e0de4ab754,Cleanup regex in MPD parser
ojw28,2015-06-26 13:24:00,https://api.github.com/repos/google/ExoPlayer/git/commits/98d446aa6d5e3b9fac970927a93df8f66aa978e2,98d446aa6d5e3b9fac970927a93df8f66aa978e2,"Allow seeding of RandomEvaluator.

This is useful for reproducibility in playback tests."
ojw28,2015-06-26 13:23:34,https://api.github.com/repos/google/ExoPlayer/git/commits/194b4ae081a54f032ff4fd597c1b9e45cb768b0b,194b4ae081a54f032ff4fd597c1b9e45cb768b0b,Fix link to be https
ojw28,2015-06-25 19:57:21,https://api.github.com/repos/google/ExoPlayer/git/commits/c06f844ee1a78ac8e20451abb6f89e26cd586db8,c06f844ee1a78ac8e20451abb6f89e26cd586db8,SUPER!
ojw28,2015-06-25 18:17:00,https://api.github.com/repos/google/ExoPlayer/git/commits/ed856b2a71ab4c1c1ef76d0e790aac6e6ba9ac84,ed856b2a71ab4c1c1ef76d0e790aac6e6ba9ac84,Test
ojw28,2015-06-25 17:51:20,https://api.github.com/repos/google/ExoPlayer/git/commits/5e65b40864268ed404b7be1ad270c4bd52e3beb1,5e65b40864268ed404b7be1ad270c4bd52e3beb1,Merge branch 'dev' of git://github.com/tresvecesseis/ExoPlayer into tresvecesseis-dev
andrewlewis,2015-06-23 16:57:41,https://api.github.com/repos/google/ExoPlayer/git/commits/e32854660790116192fe4dc8e126e85517ad0be8,e32854660790116192fe4dc8e126e85517ad0be8,"Make reusable fakes for extractor+track outputs.

Improve Mp4Extractor test.

Add support for Xiph lacing in Matroska files.

Add support for EBML lacing in Matroska files.

Handle the initial sticky intent for HDMI audio plug."
ojw28,2015-06-22 14:57:06,https://api.github.com/repos/google/ExoPlayer/git/commits/bc14e87cfb5525ac9cf4f8245db67250f33b4980,bc14e87cfb5525ac9cf4f8245db67250f33b4980,Tighten package visibility
ojw28,2015-06-22 14:50:18,https://api.github.com/repos/google/ExoPlayer/git/commits/4092e8ca0f5e729566a8071171109efefcf882cb,4092e8ca0f5e729566a8071171109efefcf882cb,Fix GitHub issue #572
ojw28,2015-06-22 10:08:00,https://api.github.com/repos/google/ExoPlayer/git/commits/91b47cfe6b6843fb0a46258ae630f462dc8f7d5a,91b47cfe6b6843fb0a46258ae630f462dc8f7d5a,Tweak
ojw28,2015-06-22 10:04:23,https://api.github.com/repos/google/ExoPlayer/git/commits/2f268a996274057d154bc3ed5172a0224818d056,2f268a996274057d154bc3ed5172a0224818d056,Fix final issues with HLS 404 handling #537
ojw28,2015-06-19 19:05:34,https://api.github.com/repos/google/ExoPlayer/git/commits/97aaee6d1505e52f0c502c19758ba59de27dc959,97aaee6d1505e52f0c502c19758ba59de27dc959,Fix crash introduced by previous change.
ojw28,2015-06-19 18:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/b8df8ecb47d838f4e3c184cbcbb64a397b1384a2,b8df8ecb47d838f4e3c184cbcbb64a397b1384a2,"Final fixes for correctly handling chunk load failures in HLS.

An accumulation of several fixes:

1. Change to HlsExtractorWrapper is just a move + documentating
   things that were already true + adding a precondition in the
   configureSpliceTo method.

2. Change in HlsSampleSource.readData ensures that configureSpliceTo
   and hasSamples aren't called on an extractor that isn't prepared.

3. The other change in HlsSampleSource ensures the correct ""previous""
   TsChunk is used. If a TsChunk fails to load and is replaced, the
   previous chunk should be the one before that whose load completed
   successfully.

4. Determine switchingVariantSpliced based on the actual format of the
   previous chunk, so it's set correctly in the case of a TsChunk load
   failure and subsequent replacement."
ojw28,2015-06-19 12:31:16,https://api.github.com/repos/google/ExoPlayer/git/commits/203f3ab7321a21900cc842ba9f0ef17fe29a1607,203f3ab7321a21900cc842ba9f0ef17fe29a1607,"Get the current extractor properly.

This fixes the case where we need to switch from one variant to
another during preparation, having loaded zero samples, because
the first chunk for that variant gave us a 404 error. In this
case the first extractor will have no samples, and there will
be a second extractor that does."
ojw28,2015-06-18 17:53:22,https://api.github.com/repos/google/ExoPlayer/git/commits/55862a77b1a8264e4e97b8a1bbc6fb2805c59742,55862a77b1a8264e4e97b8a1bbc6fb2805c59742,Remove dead code
ojw28,2015-06-18 17:01:47,https://api.github.com/repos/google/ExoPlayer/git/commits/51a8635ba2fa470ef93ccf6d48a3de0fadb2150f,51a8635ba2fa470ef93ccf6d48a3de0fadb2150f,"Make HlsChunkSource sane again.

There was a mess where we were indexing into both a list of variants
and a (differently ordered and possibly of differing length) list of
formats. This sanitises everything."
ojw28,2015-06-18 16:31:14,https://api.github.com/repos/google/ExoPlayer/git/commits/e0316d1c16ac2f4f1ea8b96585fb2807900b1775,e0316d1c16ac2f4f1ea8b96585fb2807900b1775,"Refine TTML parsing logic + setup for adding styling information.

1. Refine the way TtmlNode handles whitespace collapsing when constructing
   the output text. Can of worms.
2. Start using SpannableStringBuilder. This will allow attaching of spans
   in getText as nodes are encountered, which is how we'll be incorporating
   styling information into the result."
ojw28,2015-06-18 13:30:08,https://api.github.com/repos/google/ExoPlayer/git/commits/efa92ac168f99f9ef8bd7dee098bfadb7d2511f7,efa92ac168f99f9ef8bd7dee098bfadb7d2511f7,Tiny cleanup
ojw28,2015-06-18 13:29:28,https://api.github.com/repos/google/ExoPlayer/git/commits/773a69ddf967a6b6c2a14e68c3c4ad6975fab295,773a69ddf967a6b6c2a14e68c3c4ad6975fab295,Remove redundant types
ojw28,2015-06-18 13:28:54,https://api.github.com/repos/google/ExoPlayer/git/commits/160a88baf9a86e388fa317dd00c76fbae92bdaa2,160a88baf9a86e388fa317dd00c76fbae92bdaa2,Steps toward enabling seeking in DASH live
ojw28,2015-06-18 13:24:53,https://api.github.com/repos/google/ExoPlayer/git/commits/8e58a3f5f58db1f92ebf52de76c31c8139f3d036,8e58a3f5f58db1f92ebf52de76c31c8139f3d036,"Steps toward full multi-track support.

1. Remove requirement for TrackRenderer implementations to report
   current position, unless they are time sources.
2. Expose whether renderers have media to play. The immediate benefit
   of this is to solve the referenced GitHub issue, and also to only
   display the appropriate Audio/Video/Text buttons in the demo app
   for the media being played. This is also a natural step toward
   multi-track support.

Github issue: #541"
ojw28,2015-06-18 13:22:17,https://api.github.com/repos/google/ExoPlayer/git/commits/2c29d88330dbf0bfe8fc4722a0b06f4563afb9dc,2c29d88330dbf0bfe8fc4722a0b06f4563afb9dc,Remove unnecessary call to seekTo.
ojw28,2015-06-18 13:21:32,https://api.github.com/repos/google/ExoPlayer/git/commits/0ee8c07fe5ad94e38621f4ffcf9d11930b87a9f5,0ee8c07fe5ad94e38621f4ffcf9d11930b87a9f5,"Better handle duration + disabled renderers

- Fix bug where duration of initially disabled tracks wasn't correctly
  incorporated into the overall duration reported by the player.
- Don't transition to STATE_ENDED unless the position has reached the
  duration, if the duration is known. This allows for ""playback"" to
  continue when all renderers are disabled, rather than jumping straight
  to STATE_ENDED."
ojw28,2015-06-18 13:18:51,https://api.github.com/repos/google/ExoPlayer/git/commits/9de1bb7a0118db4ce3cdca1538ef5788b5b07503,9de1bb7a0118db4ce3cdca1538ef5788b5b07503,Add Matroska sample
ojw28,2015-06-18 13:18:09,https://api.github.com/repos/google/ExoPlayer/git/commits/072c63c33e859659d181e4350563c4f2ba54374a,072c63c33e859659d181e4350563c4f2ba54374a,"Handle stbl atoms with no samples.

Github issue: #554"
ojw28,2015-06-18 13:17:32,https://api.github.com/repos/google/ExoPlayer/git/commits/8c98c588e8742756088750a675ab78e25e325cd2,8c98c588e8742756088750a675ab78e25e325cd2,Add support for fixed-size lacing in Matroska streams.
ojw28,2015-06-18 13:16:37,https://api.github.com/repos/google/ExoPlayer/git/commits/4c4782c72dfb63fb0dbb0ca7d739c0095c16fc50,4c4782c72dfb63fb0dbb0ca7d739c0095c16fc50,"Pass whole PSSH box to MediaDrm (except in the WV+L case).

This fixes SmoothStreaming on AndroidTV, and also removes a
warning that gets logged when using Widevine/FMP4."
ojw28,2015-06-18 13:13:54,https://api.github.com/repos/google/ExoPlayer/git/commits/d0ba265290ef77046db4cdcebfbd256a3dcf6572,d0ba265290ef77046db4cdcebfbd256a3dcf6572,"Fix some MPD parsing issues.

- contentType can be defined on an AdaptationSet.
- language can be defined either in AdaptationSet or in a contained
  ContentComponent.
- The id from the AdaptationSet should come from the AdaptationSet."
ojw28,2015-06-18 13:12:33,https://api.github.com/repos/google/ExoPlayer/git/commits/54d207f3ce3933a4b547dbedba9c784e00327232,54d207f3ce3933a4b547dbedba9c784e00327232,Default caption parsers to non-strict parsing.
ojw28,2015-06-18 13:11:33,https://api.github.com/repos/google/ExoPlayer/git/commits/39adcabf7d9507c4ac30962e8cd49a2d84954dc3,39adcabf7d9507c4ac30962e8cd49a2d84954dc3,"Blacklist variants if media or encryption loads fail, in addition
to if the playlist load fails.

NB - I'm aware the casting is a bit messy, but I don't want a common
interface because I'm hopeful that TsChunk will go away at some point.

Issue: #537"
tresvecesseis,2015-06-17 21:00:31,https://api.github.com/repos/google/ExoPlayer/git/commits/dd3a4a91394068349c5423505dbd81fd56d537e6,dd3a4a91394068349c5423505dbd81fd56d537e6,"fix audio channels CodecSpecificDataUtil bugs

  * fix channel number encoding using the AUDIO_SPECIFIC_CONFIG_CHANNEL_COUNT_TABLE
  * allocate the correct number of bits (4) int the CodecSpecificDataUtil struct"
ojw28,2015-06-16 12:50:22,https://api.github.com/repos/google/ExoPlayer/git/commits/ecf7d1be9e68d665bb61d1b43b3daec0933e0ddd,ecf7d1be9e68d665bb61d1b43b3daec0933e0ddd,Fix HLS track selection
ojw28,2015-06-15 17:02:35,https://api.github.com/repos/google/ExoPlayer/git/commits/eea57d0d76020dfcfec33ec964204a9e58b17707,eea57d0d76020dfcfec33ec964204a9e58b17707,Enhance WebM extractor tests
ojw28,2015-06-15 17:01:46,https://api.github.com/repos/google/ExoPlayer/git/commits/854fa928fbdeefcd6452d24dab5d91e59b86129d,854fa928fbdeefcd6452d24dab5d91e59b86129d,Fix read H.264 in WebM when the NAL unit length field length is not 4.
ojw28,2015-06-15 16:43:53,https://api.github.com/repos/google/ExoPlayer/git/commits/49f4fe7810c3e049278223558422813bd4a709c4,49f4fe7810c3e049278223558422813bd4a709c4,Rename URL->URI for manifest fetching
ojw28,2015-06-15 16:43:06,https://api.github.com/repos/google/ExoPlayer/git/commits/ded106053ca7d8abc5cb9757cce674112459ef15,ded106053ca7d8abc5cb9757cce674112459ef15,Remove spurious blank line
ojw28,2015-06-15 16:40:04,https://api.github.com/repos/google/ExoPlayer/git/commits/9902efc5db5d35f542a53bfa675d528cc5d9d0da,9902efc5db5d35f542a53bfa675d528cc5d9d0da,Update release notes
ojw28,2015-06-15 16:38:51,https://api.github.com/repos/google/ExoPlayer/git/commits/164d8b4242903aea3b984fc72277366418279228,164d8b4242903aea3b984fc72277366418279228,Rework application of Mpd.Location + fix test.
ojw28,2015-06-15 15:16:41,https://api.github.com/repos/google/ExoPlayer/git/commits/04d6672e2c9df5735cb861d783a313f63a739747,04d6672e2c9df5735cb861d783a313f63a739747,"Merge pull request #536 from T-Pham/dev

Fetch next Dash manifest using URL in Location directive if exists"
T-Pham,2015-06-10 15:00:22,https://api.github.com/repos/google/ExoPlayer/git/commits/c0ecc223597d5661ecd225770cece5bd2750d77d,c0ecc223597d5661ecd225770cece5bd2750d77d,Fetch next Dash manifest using URL in Location directive if exists
ojw28,2015-06-12 16:53:58,https://api.github.com/repos/google/ExoPlayer/git/commits/8cf7d372e969ad38ce7538901f84718cb13837d5,8cf7d372e969ad38ce7538901f84718cb13837d5,Fix test URL
ojw28,2015-06-12 16:52:56,https://api.github.com/repos/google/ExoPlayer/git/commits/a70c1f1a4b0b5cba16b8d1d5f7310b1974ead0ad,a70c1f1a4b0b5cba16b8d1d5f7310b1974ead0ad,"Remove requirement to specify downstream renderer count.

This makes it so that it's no longer necessary to specify the number
of downstream renderers to HlsSampleSource, FrameworkSampleSource and
ExtractorSampleSource, by forcing the downstream renderers to register
with the SampleSource instances in their constructors. This eliminates
a common source of subtle client bugs where the passed value is incorrect."
ojw28,2015-06-12 16:46:41,https://api.github.com/repos/google/ExoPlayer/git/commits/15dc87b037fe908c9763c58bab51ac754c078d0f,15dc87b037fe908c9763c58bab51ac754c078d0f,"Add flag to force spurious audio timestamps to fail playback.

For enabling during device test runs."
ojw28,2015-06-12 16:45:27,https://api.github.com/repos/google/ExoPlayer/git/commits/e8fd3025e31e745c41dd65f8dac8445abc4caf5b,e8fd3025e31e745c41dd65f8dac8445abc4caf5b,Fix propagation of sample encryption key for webm
ojw28,2015-06-12 16:44:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ead25a9dfe19ed1761f2f6372dbb4a6c4ad5c111,ead25a9dfe19ed1761f2f6372dbb4a6c4ad5c111,Call incrementalPrepare directly from prepare
ojw28,2015-06-12 16:44:01,https://api.github.com/repos/google/ExoPlayer/git/commits/02c978e16c238944a931e1e169f75efc9963126e,02c978e16c238944a931e1e169f75efc9963126e,Further cleanup subtitle implementations.
ojw28,2015-06-12 16:36:48,https://api.github.com/repos/google/ExoPlayer/git/commits/bdd1968abe5fc1b24ee46858f14d547b9a3a5f5c,bdd1968abe5fc1b24ee46858f14d547b9a3a5f5c,Allow reading of response headers from HttpDataSource implementations
ojw28,2015-06-10 17:30:00,https://api.github.com/repos/google/ExoPlayer/git/commits/36617264019db70ee10bf9980f1f710c208599a3,36617264019db70ee10bf9980f1f710c208599a3,"Allow multiple chunk loads to prepare a HLS stream.

Issue: #530"
ojw28,2015-06-10 17:19:05,https://api.github.com/repos/google/ExoPlayer/git/commits/87dfaff74b1b7a0f914374b7692d801cb01a3414,87dfaff74b1b7a0f914374b7692d801cb01a3414,Fix SRT test
ojw28,2015-06-10 17:03:34,https://api.github.com/repos/google/ExoPlayer/git/commits/1b1769bb6d57163a0edbf45e2b674dd0b75af3cb,1b1769bb6d57163a0edbf45e2b674dd0b75af3cb,Further simplify SRT support
ojw28,2015-06-10 16:48:01,https://api.github.com/repos/google/ExoPlayer/git/commits/fbbf3f27fdce46950f5cbe5e57fcc07325eb52f3,fbbf3f27fdce46950f5cbe5e57fcc07325eb52f3,Simplify Subrip support
ojw28,2015-06-10 16:46:53,https://api.github.com/repos/google/ExoPlayer/git/commits/71252784e905797217e1fd0cc049e482c627031b,71252784e905797217e1fd0cc049e482c627031b,"Merge pull request #498 from ened/subtitle/srt

Subrip (SRT) support"
ened,2015-05-27 03:08:05,https://api.github.com/repos/google/ExoPlayer/git/commits/2fb2e5a5097e287ab28893ebfaf3e8018459e84a,2fb2e5a5097e287ab28893ebfaf3e8018459e84a,Subrip (SRT) support.
ojw28,2015-06-05 19:04:56,https://api.github.com/repos/google/ExoPlayer/git/commits/24e897d39f493415459866901013b271c2c6e82e,24e897d39f493415459866901013b271c2c6e82e,Further H264/H265 code deduping + fix NAL unescaping.
ojw28,2015-06-05 17:45:45,https://api.github.com/repos/google/ExoPlayer/git/commits/ae466cc59ba2233f74a7c4b4ef4380a598eaa5a0,ae466cc59ba2233f74a7c4b4ef4380a598eaa5a0,Allow fmp4 in demo app (demuxed only)
ojw28,2015-06-05 17:37:09,https://api.github.com/repos/google/ExoPlayer/git/commits/4bced734d09bcd4bd610ea5a3ae3f5aed16211aa,4bced734d09bcd4bd610ea5a3ae3f5aed16211aa,Update release notes
ojw28,2015-06-05 17:30:59,https://api.github.com/repos/google/ExoPlayer/git/commits/a3aed0eaedc72b7b71010ec80c520cbbe23ad689,a3aed0eaedc72b7b71010ec80c520cbbe23ad689,Update settings.gradle
ojw28,2015-06-05 17:30:19,https://api.github.com/repos/google/ExoPlayer/git/commits/218d02fc59d185c062f7d376f749c71d6f5df0a1,218d02fc59d185c062f7d376f749c71d6f5df0a1,Allow Webm extractor to extract Matroska files
ojw28,2015-06-05 17:29:37,https://api.github.com/repos/google/ExoPlayer/git/commits/362ccea31035ef7c553ac9b4dcafc65c9b4c145d,362ccea31035ef7c553ac9b4dcafc65c9b4c145d,Clean up permissions
ojw28,2015-06-05 17:28:42,https://api.github.com/repos/google/ExoPlayer/git/commits/926bc805f5090d8162808dc022bfd4ed0ac5b85d,926bc805f5090d8162808dc022bfd4ed0ac5b85d,Add some useful Systrace
ojw28,2015-06-05 17:27:20,https://api.github.com/repos/google/ExoPlayer/git/commits/96c1e670c45346fa03bcff0453499ec205c66ee8,96c1e670c45346fa03bcff0453499ec205c66ee8,De-duplicate code for H264/H265 in MPEG-TS.
ojw28,2015-06-05 17:26:20,https://api.github.com/repos/google/ExoPlayer/git/commits/10efe7904dee2ca7460342c4553251a0977a5034,10efe7904dee2ca7460342c4553251a0977a5034,Cleanup
ojw28,2015-06-05 17:24:42,https://api.github.com/repos/google/ExoPlayer/git/commits/955c7b25a44b3ea15012a46e924847828bf93826,955c7b25a44b3ea15012a46e924847828bf93826,Doc fix
ojw28,2015-06-05 17:24:22,https://api.github.com/repos/google/ExoPlayer/git/commits/1732aa761c72e0b35dcd393edbe1a749c085556f,1732aa761c72e0b35dcd393edbe1a749c085556f,"Set MediaFormat for VTT chunks + cleanup.

ChunkSampleSource had a null check solely for the VTT case,
where DashChunkSource wasn't setting a MediaFormat on VTT
chunks. It's trivial to do so, and is more consistent, so I've
done that and removed the null check. Also done some small
tidying."
ojw28,2015-06-04 14:46:32,https://api.github.com/repos/google/ExoPlayer/git/commits/01affbb93ef685e91ab38b085dfaccb8bb011406,01affbb93ef685e91ab38b085dfaccb8bb011406,Simplify tx3g support.
ojw28,2015-06-04 14:07:29,https://api.github.com/repos/google/ExoPlayer/git/commits/254bc5a8cc922dbc1494eb42561760302b7d08ec,254bc5a8cc922dbc1494eb42561760302b7d08ec,"Merge pull request #509 from Ood-Tsen/tx3g

parse mp4 tx3g"
ojw28,2015-06-04 10:41:35,https://api.github.com/repos/google/ExoPlayer/git/commits/c992d9c4338f9568346650d024ed8a4ec6a918fb,c992d9c4338f9568346650d024ed8a4ec6a918fb,"Merge pull request #517 from google/dev-webm-vp9-opus

Merge webm/vp9 native extensions into dev."
Ood-Tsen,2015-06-03 12:28:30,https://api.github.com/repos/google/ExoPlayer/git/commits/b95b0aad5c7c6418b788fc70a91c2f534d52972b,b95b0aad5c7c6418b788fc70a91c2f534d52972b,clean the list while forward seek.
Ood-Tsen,2015-06-03 12:02:42,https://api.github.com/repos/google/ExoPlayer/git/commits/fd2ebc767c9f9e565df02c99f4c719c66aadb193,fd2ebc767c9f9e565df02c99f4c719c66aadb193,keep maximum number of subtitles to four.
Ood-Tsen,2015-06-02 13:00:22,https://api.github.com/repos/google/ExoPlayer/git/commits/106ebbf7dfd37f5feba24200e6ed3192e7a3e494,106ebbf7dfd37f5feba24200e6ed3192e7a3e494,clean up unused code.
andrewlewis,2015-06-01 16:42:43,https://api.github.com/repos/google/ExoPlayer/git/commits/5b186a2aa43f29983374a3c9be5af34059bb2345,5b186a2aa43f29983374a3c9be5af34059bb2345,Add support for reading H.265 in MPEG TS.
Ood-Tsen,2015-06-01 12:47:55,https://api.github.com/repos/google/ExoPlayer/git/commits/39607551aa222a2d92abb0c501db78ed8eae6dd1,39607551aa222a2d92abb0c501db78ed8eae6dd1,add title.
Ood-Tsen,2015-06-01 11:47:46,https://api.github.com/repos/google/ExoPlayer/git/commits/f42ed8920215c78ee61df924a06d120a3d1c50b3,f42ed8920215c78ee61df924a06d120a3d1c50b3,parse mp4 tx3g
andrewlewis,2015-05-29 11:52:05,https://api.github.com/repos/google/ExoPlayer/git/commits/02d5cb8109d71e9883b3abd5c748c595cb1f215c,02d5cb8109d71e9883b3abd5c748c595cb1f215c,"Use Build.DEVICE not Build.PRODUCT.

On HTC Butterfly these match, but Build.DEVICE is actually the right value to
use.

Issue: #377"
ojw28,2015-05-28 16:21:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e34ef4018852cfd013f56820a46dd25583bcda64,e34ef4018852cfd013f56820a46dd25583bcda64,"Merge pull request #503 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-28 16:19:30,https://api.github.com/repos/google/ExoPlayer/git/commits/cb1e6ad41822deb0ba38b33f35ded760b8b7dd3d,cb1e6ad41822deb0ba38b33f35ded760b8b7dd3d,Tweak project configuration
ojw28,2015-05-28 16:18:26,https://api.github.com/repos/google/ExoPlayer/git/commits/a85a169604ef09a12c72a82b6f85dd79dadde7fd,a85a169604ef09a12c72a82b6f85dd79dadde7fd,Simplify the demo app.
ojw28,2015-05-28 16:14:52,https://api.github.com/repos/google/ExoPlayer/git/commits/b806109cfd63f4aedf19f388c1091b81f61bead2,b806109cfd63f4aedf19f388c1091b81f61bead2,"Make HlsSampleSource use LoadControl.

This will be needed for keeping WebVTT subtitle and separate
audio tracks is sync whilst loading.

Issue: #151"
ojw28,2015-05-28 16:11:28,https://api.github.com/repos/google/ExoPlayer/git/commits/ea29c71d94cb013115b3bff26e971f693770bdde,ea29c71d94cb013115b3bff26e971f693770bdde,Temporarily revert bounded live seeking. It's causing issues in its current form.
ojw28,2015-05-28 16:08:39,https://api.github.com/repos/google/ExoPlayer/git/commits/aa249e9f7f07d138da68ba794393c8e89b1cd710,aa249e9f7f07d138da68ba794393c8e89b1cd710,Fixed issue in which the segment/chunk shift value could become incorrect.
ojw28,2015-05-28 16:07:12,https://api.github.com/repos/google/ExoPlayer/git/commits/99edc6a4b447399d62f578d0aeed0eabbeddd98c,99edc6a4b447399d62f578d0aeed0eabbeddd98c,"Avoid using OMX.qcom.audio.decoder.mp3 on HTC Butterfly.

This OMX component is listed but can't be instantiated on this device.

According to the GitHub issue, some other devices are also affected, so these
will have to be added too.

Issue: #377"
ojw28,2015-05-28 16:06:26,https://api.github.com/repos/google/ExoPlayer/git/commits/5c9c15ae6e6a30b7635b4d9888ee58e987e3bd0b,5c9c15ae6e6a30b7635b4d9888ee58e987e3bd0b,Add support for extracting H.265/HEVC data in MP4 files.
ojw28,2015-05-22 20:50:29,https://api.github.com/repos/google/ExoPlayer/git/commits/ece3ac63c8201af8eaa041057d53ad9352b8322e,ece3ac63c8201af8eaa041057d53ad9352b8322e,webm branch cleanup
ojw28,2015-05-22 20:46:42,https://api.github.com/repos/google/ExoPlayer/git/commits/9f9e432d522853a6735fa8783ac107d619640c3f,9f9e432d522853a6735fa8783ac107d619640c3f,"Merge pull request #487 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-22 20:45:13,https://api.github.com/repos/google/ExoPlayer/git/commits/ac54b4f696d65fe03533af6e7428c751ceb51b35,ac54b4f696d65fe03533af6e7428c751ceb51b35,Cleanup/Sync with internal tree
ojw28,2015-05-22 20:40:22,https://api.github.com/repos/google/ExoPlayer/git/commits/67d0154960b3e4a413b57359ebd6f1004b4636f2,67d0154960b3e4a413b57359ebd6f1004b4636f2,Use Java7 <> syntax
ojw28,2015-05-22 20:37:21,https://api.github.com/repos/google/ExoPlayer/git/commits/91bcec82f5067cb95296f4caf84ae3633bbaf290,91bcec82f5067cb95296f4caf84ae3633bbaf290,Support an up-front block allocation in DefaultAllocator.
ojw28,2015-05-22 20:36:35,https://api.github.com/repos/google/ExoPlayer/git/commits/79d557dd80d6d1c38725ef4c49b5ef03c80fbcfa,79d557dd80d6d1c38725ef4c49b5ef03c80fbcfa,"Move WEBVTT custom header constants.

They're current location is annoying, because it creates a dependency
from the dash package to the webvtt package. For apps like Play Movies
where WEBVTT isn't used, it's nice just to delete the whole package at
import time, which requires that this dependency be removed."
ojw28,2015-05-22 20:34:51,https://api.github.com/repos/google/ExoPlayer/git/commits/efd0b1e3cfa5f315348c39f03832c8a4d48ce739,efd0b1e3cfa5f315348c39f03832c8a4d48ce739,Updated all ExoPlayer Eclipse projects to use Java 1.7.
ojw28,2015-05-22 19:59:48,https://api.github.com/repos/google/ExoPlayer/git/commits/c42b265e6541b81f9eeb16461705842eebaf4fec,c42b265e6541b81f9eeb16461705842eebaf4fec,"Merge pull request #485 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-22 19:57:24,https://api.github.com/repos/google/ExoPlayer/git/commits/54e2c2833cd4c5d5938f36da77518e52cd87d87a,54e2c2833cd4c5d5938f36da77518e52cd87d87a,Bump to 1.3.3
ojw28,2015-05-22 19:47:49,https://api.github.com/repos/google/ExoPlayer/git/commits/19552f8e48d84beba4431726d6bfb0460faf96cd,19552f8e48d84beba4431726d6bfb0460faf96cd,Update README
ojw28,2015-05-22 19:43:38,https://api.github.com/repos/google/ExoPlayer/git/commits/4e1c4f00aceaafe296dbf3fe0d4c0f66814bb05d,4e1c4f00aceaafe296dbf3fe0d4c0f66814bb05d,Resolution is INTxINT
ojw28,2015-05-22 19:40:36,https://api.github.com/repos/google/ExoPlayer/git/commits/a60dc5803e667d53db7a952dab46baf1457540e7,a60dc5803e667d53db7a952dab46baf1457540e7,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
ojw28,2015-05-22 19:40:26,https://api.github.com/repos/google/ExoPlayer/git/commits/fd7345b4c49a5db23d9c798b080b5471b2df5907,fd7345b4c49a5db23d9c798b080b5471b2df5907,"Merge pull request #483 from kellyschrock/hls_aac_fix

HLS AAC fix"
ojw28,2015-05-22 19:39:28,https://api.github.com/repos/google/ExoPlayer/git/commits/250cab2dac085efb20eb90c906c15c2fd97c90dd,250cab2dac085efb20eb90c906c15c2fd97c90dd,"Fix AudioTrack typos.

Issue: #479"
ojw28,2015-05-22 19:38:23,https://api.github.com/repos/google/ExoPlayer/git/commits/30011285bbc17ad095182457ed4849ddead85ef8,30011285bbc17ad095182457ed4849ddead85ef8,"Add TRICK_PLAY constant to core Exo.

Seems generally useful to have."
ojw28,2015-05-22 19:37:52,https://api.github.com/repos/google/ExoPlayer/git/commits/3e62b63eb254bd1d5e818c303015b0c0ea7ed605,3e62b63eb254bd1d5e818c303015b0c0ea7ed605,"Try and use httpDataSource if scheme isn't recognised.

Issue: #473"
kellyschrock,2015-05-22 01:35:09,https://api.github.com/repos/google/ExoPlayer/git/commits/08d337365e11007f7a2edac4902f26737fdaeb66,08d337365e11007f7a2edac4902f26737fdaeb66,"HLS AAC fix

Fixes issue where an NPE occurs when RollingSampleBuffer is created
with a null Allocator."
ojw28,2015-05-19 14:24:18,https://api.github.com/repos/google/ExoPlayer/git/commits/253a0105f7acc79f40ee5d7faa23d2ba5fe77aaf,253a0105f7acc79f40ee5d7faa23d2ba5fe77aaf,Cleanup
ojw28,2015-05-19 14:19:59,https://api.github.com/repos/google/ExoPlayer/git/commits/658a7ffba59b94f028b5e3a0b51ad853ab3781d2,658a7ffba59b94f028b5e3a0b51ad853ab3781d2,Step towards enhanced Webvtt parser to support HTML-rich captions and positioning.
ojw28,2015-05-19 14:16:29,https://api.github.com/repos/google/ExoPlayer/git/commits/709fc7735b9038ab8ea8399b4e2308587d98bd80,709fc7735b9038ab8ea8399b4e2308587d98bd80,First steps toward implementing bounded live seek.
ojw28,2015-05-19 14:03:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4aee221fb3bf58076eee3f84c353905b33a04bdf,4aee221fb3bf58076eee3f84c353905b33a04bdf,Fix webm demo
ojw28,2015-05-19 13:57:00,https://api.github.com/repos/google/ExoPlayer/git/commits/e3a7fc4da7ca82a7f8bf86a15cb11fd41f2d5a5e,e3a7fc4da7ca82a7f8bf86a15cb11fd41f2d5a5e,"Merge pull request #469 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-19 13:37:29,https://api.github.com/repos/google/ExoPlayer/git/commits/763d68f26c641e345112c07551038488e089af2f,763d68f26c641e345112c07551038488e089af2f,Bump to 1.3.2
ojw28,2015-05-19 13:23:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c86a5378c754b0223209b5fbd6227503078961be,c86a5378c754b0223209b5fbd6227503078961be,Update release notes 3
ojw28,2015-05-19 13:22:23,https://api.github.com/repos/google/ExoPlayer/git/commits/e55448924e65907d60f2839f36c33518137409a8,e55448924e65907d60f2839f36c33518137409a8,Update release notes 2
ojw28,2015-05-19 13:20:27,https://api.github.com/repos/google/ExoPlayer/git/commits/f88283d614c348edef2251c41251dfadc29505b7,f88283d614c348edef2251c41251dfadc29505b7,Update release notes
ojw28,2015-05-19 13:14:53,https://api.github.com/repos/google/ExoPlayer/git/commits/6ae97ced3aeb9678567453899fb1b4fb6de17ff0,6ae97ced3aeb9678567453899fb1b4fb6de17ff0,"Support content:// URIs, and some cleanup/consistency tweaks.

- There's definitely potential for more code sharing in these
classes, but deferring for now.
- Also made no-scheme default to file://, and allowed smoothstreaming
URLs to be specified with or without the /Manifest suffix."
ojw28,2015-05-19 13:13:31,https://api.github.com/repos/google/ExoPlayer/git/commits/a9c977a79e0be0cf40903aaa89ce7e8514de777d,a9c977a79e0be0cf40903aaa89ce7e8514de777d,"Fix Mp3Extractor synchronization when loading retries.

Before preparation, and when seeking, Mp3Extractor did not handle retrying:
- synchronizedHeader was set before the header was known to be valid, which
  means that after seeing one valid frame header and then failing to read, the
  synchronization would be treated as complete.
- The input buffer would keep data loaded during synchronization but on the next
  call to synchronize when retrying it was not returned to the mark position to
  re-parse the data.

This change fixes these issues."
ojw28,2015-05-19 13:12:59,https://api.github.com/repos/google/ExoPlayer/git/commits/675c7738c14e81f56292e0e1b7e246f1c6ce1e58,675c7738c14e81f56292e0e1b7e246f1c6ce1e58,Let DefaultUriDataSource load assets.
ojw28,2015-05-19 13:06:48,https://api.github.com/repos/google/ExoPlayer/git/commits/f474afbf5e0a0b3f22307eac2f93f1135d4c6828,f474afbf5e0a0b3f22307eac2f93f1135d4c6828,"Fix handling of widths/heights when choosing formats.

- Make HlsPlaylistParser treat non-positive dimensions as unknown.
- Make HlsPlaylistParser parse floating point resolutions, because
  technically that's how they're spec'd.
- Make VideoFormatSelectorUtil treat non-position dimensions as unknown.

Issue: #461"
ojw28,2015-05-19 13:05:50,https://api.github.com/repos/google/ExoPlayer/git/commits/059b80c1ab798c85e43280a768f239c6d1c7286a,059b80c1ab798c85e43280a768f239c6d1c7286a,"Improve DataSource implementations:

1. Make DefaultUriDataSource robust against exceptions through from close().
2. Make AssetDataSource handle file:///android_asset/ URIs."
ojw28,2015-05-19 13:05:08,https://api.github.com/repos/google/ExoPlayer/git/commits/672906060ca64763f7209cddbf932e865db3bb19,672906060ca64763f7209cddbf932e865db3bb19,"Fix missing ID3 events

When I moved the id3Reader instantiation out of the while
loop (below where it is now) it was no longer guarded by
the streamTypes.get(streamType) deduping check. This brings
back an equivalent check."
ojw28,2015-05-19 13:03:39,https://api.github.com/repos/google/ExoPlayer/git/commits/cd6c5c39848faeaecd14693fbe3f6bb25128fb84,cd6c5c39848faeaecd14693fbe3f6bb25128fb84,"Fix CBR seeking when XING header is present.

When a XING header is present but not usable (due to missing fields), CBR
seeking can be used instead. It relies on the bitrate. The bitrate from the
unusable XING header is not correct, which leads to incorrect seeking.

Also fix VBRI seeking by setting the correct offset on the frame to parse. Few
people seem to use that format, but I have found two very short truncated
samples which were falling back to the CBR case before but are using VBRI with
this change."
ojw28,2015-05-19 13:02:40,https://api.github.com/repos/google/ExoPlayer/git/commits/d03fb105165f0724b8e576f84b85503c169b233d,d03fb105165f0724b8e576f84b85503c169b233d,"Remove readBitsLong, use readBits instead"
ojw28,2015-05-19 13:01:59,https://api.github.com/repos/google/ExoPlayer/git/commits/dd7a79688396843f40bdb507e3c7ea00e27e966b,dd7a79688396843f40bdb507e3c7ea00e27e966b,Make constant public
ojw28,2015-05-19 13:00:49,https://api.github.com/repos/google/ExoPlayer/git/commits/0dfc1d3bb799ee2c48b51f9b6b32b0e350161b4d,0dfc1d3bb799ee2c48b51f9b6b32b0e350161b4d,Don't sample the timestamp/latency for AC-3 passthrough playback.
ojw28,2015-05-19 12:56:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9f53ea81169f8e1f680a35450dad78d58f16b034,9f53ea81169f8e1f680a35450dad78d58f16b034,Tweak documentation 3
ojw28,2015-05-19 12:56:13,https://api.github.com/repos/google/ExoPlayer/git/commits/35737bb9895936e80c1495122410913810e5a609,35737bb9895936e80c1495122410913810e5a609,Tweak documentation 2
ojw28,2015-05-19 12:54:59,https://api.github.com/repos/google/ExoPlayer/git/commits/d0ea014ba3dae62ec0d124034de1cd7d71f549e4,d0ea014ba3dae62ec0d124034de1cd7d71f549e4,Tweak documentation
ojw28,2015-05-19 12:50:31,https://api.github.com/repos/google/ExoPlayer/git/commits/b9688742c672c02291c58845ee846bf34e4b46c7,b9688742c672c02291c58845ee846bf34e4b46c7,Add changelog to track high level changes of each release
ojw28,2015-05-18 12:54:28,https://api.github.com/repos/google/ExoPlayer/git/commits/820525695a0853e5e21b98d0af2bce2eafda6d2c,820525695a0853e5e21b98d0af2bce2eafda6d2c,"Merge pull request #465 from Ood-Tsen/contentDataSource

support content uri (e.q. content://xxx)"
ojw28,2015-05-13 09:29:37,https://api.github.com/repos/google/ExoPlayer/git/commits/ea9611acebffcd0b96856e4f440ad2fef0d43c61,ea9611acebffcd0b96856e4f440ad2fef0d43c61,"Merge pull request #454 from pakerfeldt/property-setter

Support setting properties on MediaDrm"
pakerfeldt,2015-05-13 08:41:22,https://api.github.com/repos/google/ExoPlayer/git/commits/1469f11aa3432369fbd687f9fb28fc35291e1c7a,1469f11aa3432369fbd687f9fb28fc35291e1c7a,Support setting properties on MediaDrm
ojw28,2015-05-12 17:44:28,https://api.github.com/repos/google/ExoPlayer/git/commits/c4fd6c2b1f0d7743f3ca7d45056e733e34322e90,c4fd6c2b1f0d7743f3ca7d45056e733e34322e90,"Merge pull request #448 from google/dev

Bump to 1.3.1"
ojw28,2015-05-12 17:42:46,https://api.github.com/repos/google/ExoPlayer/git/commits/5ca5df0bb2cc65dd55ce4f12eae6379b4f025ac6,5ca5df0bb2cc65dd55ce4f12eae6379b4f025ac6,Bump to 1.3.1
ojw28,2015-05-12 17:32:22,https://api.github.com/repos/google/ExoPlayer/git/commits/e1b7ccf15e9a0b67528c08b56c1c9d2768f0c94a,e1b7ccf15e9a0b67528c08b56c1c9d2768f0c94a,Fix versions
ojw28,2015-05-12 17:15:59,https://api.github.com/repos/google/ExoPlayer/git/commits/093596377113ab5e9a0f0ba8a5f4dcd44f6d494f,093596377113ab5e9a0f0ba8a5f4dcd44f6d494f,"Merge pull request #447 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-12 16:02:47,https://api.github.com/repos/google/ExoPlayer/git/commits/b7b9dc1c2ec0a852dab74b67bf2144776f33fac4,b7b9dc1c2ec0a852dab74b67bf2144776f33fac4,Fix javadoc location in readme
ojw28,2015-05-12 15:57:39,https://api.github.com/repos/google/ExoPlayer/git/commits/06cbb4e74689d6adf38fcbe556f7c6db0408f514,06cbb4e74689d6adf38fcbe556f7c6db0408f514,Fix doc image refs
ojw28,2015-05-12 15:53:47,https://api.github.com/repos/google/ExoPlayer/git/commits/683b67cc191d683b7375d5a331d6736048ee07a5,683b67cc191d683b7375d5a331d6736048ee07a5,Correct javadoc header
ojw28,2015-05-12 14:23:21,https://api.github.com/repos/google/ExoPlayer/git/commits/2dabad3bc3c3165f9b2b32c4e878d5b29985da88,2dabad3bc3c3165f9b2b32c4e878d5b29985da88,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
ojw28,2015-05-12 14:22:43,https://api.github.com/repos/google/ExoPlayer/git/commits/5ca3378b71cea75c709f4979e0bb9c41b84d6cbf,5ca3378b71cea75c709f4979e0bb9c41b84d6cbf,Rm doc dir from dev
ojw28,2015-05-12 14:21:42,https://api.github.com/repos/google/ExoPlayer/git/commits/8a347d1a5d8c3c01daef28f3049718423cc7895a,8a347d1a5d8c3c01daef28f3049718423cc7895a,Use https
ojw28,2015-05-12 14:10:07,https://api.github.com/repos/google/ExoPlayer/git/commits/cd55fc068f55d7b5d1c6b621e3cfcf1b033303e9,cd55fc068f55d7b5d1c6b621e3cfcf1b033303e9,Gradle for Javadoc
ojw28,2015-05-12 13:15:41,https://api.github.com/repos/google/ExoPlayer/git/commits/350cffb6d6de546890b18a3d520c049a891340e5,350cffb6d6de546890b18a3d520c049a891340e5,"Merge pull request #446 from ened/gradle-plugin-1.2.3

Gradle plugin 1.2.3"
ojw28,2015-05-12 09:43:22,https://api.github.com/repos/google/ExoPlayer/git/commits/fc31992a0164b88c8a28912c3904c1e9914cb512,fc31992a0164b88c8a28912c3904c1e9914cb512,Update README 2
ojw28,2015-05-12 09:12:22,https://api.github.com/repos/google/ExoPlayer/git/commits/639690079e53b153a8e7602d761acf8d7d76a784,639690079e53b153a8e7602d761acf8d7d76a784,Tweak README
ened,2015-05-12 02:11:00,https://api.github.com/repos/google/ExoPlayer/git/commits/4f5496d4a6bb157bc2463bfc813048b75a8cf8dc,4f5496d4a6bb157bc2463bfc813048b75a8cf8dc,Gradle plugin 1.2.3
ojw28,2015-05-11 20:29:12,https://api.github.com/repos/google/ExoPlayer/git/commits/e7bb9dc0d86279ccc6cac4dfce48d03c0b8a6af6,e7bb9dc0d86279ccc6cac4dfce48d03c0b8a6af6,"Merge pull request #445 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-11 20:24:31,https://api.github.com/repos/google/ExoPlayer/git/commits/acad036b80205304b7e896795abbec2b2bf7a66a,acad036b80205304b7e896795abbec2b2bf7a66a,Fix link
ojw28,2015-05-11 20:23:12,https://api.github.com/repos/google/ExoPlayer/git/commits/4cebae7dcefa3db1f1cd79c5f9bdfbe49d44e22e,4cebae7dcefa3db1f1cd79c5f9bdfbe49d44e22e,Update README
ojw28,2015-05-11 20:18:23,https://api.github.com/repos/google/ExoPlayer/git/commits/caf41fb1f1dea8f5697c05b8b712f6b6e7460972,caf41fb1f1dea8f5697c05b8b712f6b6e7460972,Bring branch up to speed with dev
ojw28,2015-05-11 20:17:17,https://api.github.com/repos/google/ExoPlayer/git/commits/dd41d14ac327f480f8f8d8f8a30c8fedc5139a25,dd41d14ac327f480f8f8d8f8a30c8fedc5139a25,"Merge pull request #444 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-11 20:16:02,https://api.github.com/repos/google/ExoPlayer/git/commits/166c2f7cc0c48961ca5efd15a9bb14261345ba15,166c2f7cc0c48961ca5efd15a9bb14261345ba15,"Fix two issues related to seeking with AC-3 output.

When a passthrough AudioTrack is replaced (due to seeking) the new one behaves
as if it is still emptying data from the old one, with its playback position
advancing until it runs out of data.

Data written while the 'old' AudioTrack was emptying would be discarded, so
avoid writing to the new AudioTrack while the old one is still emptying.

Also avoid using AudioTrack.getTimestamp with passthrough tracks, as this causes
the playback position to jump to a position that breaks audio/video
synchronization."
ojw28,2015-05-11 20:11:53,https://api.github.com/repos/google/ExoPlayer/git/commits/79c7798d841239aad034c232bdc9e6abd664b113,79c7798d841239aad034c232bdc9e6abd664b113,Reorganize BandwidthMeter interface
ojw28,2015-05-11 20:10:20,https://api.github.com/repos/google/ExoPlayer/git/commits/64cc380fe15435f3c497f417c5723c7adf57c4f2,64cc380fe15435f3c497f417c5723c7adf57c4f2,"Avoid loading first chunk when preparing HLS for non-zero position.

This also fixes a technical mistake where HlsChunkSource is fed
seekPositionUs=-1 when obtaining the first chunk. This is wrong,
but the usage of this variable within HlsChunkSource enforces that
the seek must stay within bounds, so we get away with it.

Issue: #385"
ojw28,2015-05-11 20:05:37,https://api.github.com/repos/google/ExoPlayer/git/commits/116a18848f51dc61cd7512824d20bda088c62cc1,116a18848f51dc61cd7512824d20bda088c62cc1,Alter default exo buffertime value to 2500ms.
ojw28,2015-05-11 20:04:51,https://api.github.com/repos/google/ExoPlayer/git/commits/12d05a0917a85a9fa5b7dea8e3f322fe2a618f70,12d05a0917a85a9fa5b7dea8e3f322fe2a618f70,Bump target API level to 22.
ojw28,2015-05-11 20:03:30,https://api.github.com/repos/google/ExoPlayer/git/commits/b0abda43ecdf2dfa1d0c2f2f0070a965ed9666e9,b0abda43ecdf2dfa1d0c2f2f0070a965ed9666e9,"Ensure we configure a new extractor when we need one.

Issue: #400"
ojw28,2015-05-11 20:02:38,https://api.github.com/repos/google/ExoPlayer/git/commits/770ad7f06ff4cdba1021c7423a7916517c5065c9,770ad7f06ff4cdba1021c7423a7916517c5065c9,"Fix edge case in HlsSampleSource.

1. prepare() needs to load a TsChunk to actually prepare the source.
2. Source is prepared, but no tracks are enabled (this is why it's
   an edge case - no-one is likely to be doing this!).
3. The TsChunk load completes.

We should not load additional chunks in this case."
ojw28,2015-05-11 20:01:35,https://api.github.com/repos/google/ExoPlayer/git/commits/dd5eabdf4a5c6e0de641656d8bc7db2d3042c853,dd5eabdf4a5c6e0de641656d8bc7db2d3042c853,Signal EoS when seeking ExtractorSampleSource to the end of a track.
ojw28,2015-05-11 15:24:17,https://api.github.com/repos/google/ExoPlayer/git/commits/2ce33c257a73a064b3145cb11740d6c485e7a506,2ce33c257a73a064b3145cb11740d6c485e7a506,"Merge pull request #436 from ened/dev

Simple gradle updates"
ojw28,2015-05-08 16:09:39,https://api.github.com/repos/google/ExoPlayer/git/commits/861d6749ef24b4b1b97855418dc9d7fe36a933b2,861d6749ef24b4b1b97855418dc9d7fe36a933b2,Remove ability to extend the default FormatEvaluator implementations.
ojw28,2015-05-08 16:08:59,https://api.github.com/repos/google/ExoPlayer/git/commits/9f77c4009e5d8dc51e5df08592dead8c636f73ef,9f77c4009e5d8dc51e5df08592dead8c636f73ef,Clip seek position to the inputLength - 1.
ojw28,2015-05-08 16:08:13,https://api.github.com/repos/google/ExoPlayer/git/commits/d9071710cfda98f743f575a8c7f8f64a0e834f84,d9071710cfda98f743f575a8c7f8f64a0e834f84,"Read AC-3 tracks in MPEG TSs only if AC-3 playback is supported.

Partly fixes #434 as the AC-3 stream will now be ignored if the
audio capabilities don't allow it to be played back."
ojw28,2015-05-08 16:06:59,https://api.github.com/repos/google/ExoPlayer/git/commits/d8af120b98b7fbbba6e5abaaf540c29ef502bbff,d8af120b98b7fbbba6e5abaaf540c29ef502bbff,"Fix treating all DVB data as AC-3.

Issue #434"
ojw28,2015-05-08 16:06:27,https://api.github.com/repos/google/ExoPlayer/git/commits/7437ee39d81f86ff61cdc1f9d8784dbf165a9c4c,7437ee39d81f86ff61cdc1f9d8784dbf165a9c4c,Remove deprecated method.
ojw28,2015-05-08 16:05:54,https://api.github.com/repos/google/ExoPlayer/git/commits/54b71a57436f4622a3661918f5553dd1fd6c2355,54b71a57436f4622a3661918f5553dd1fd6c2355,"Allow cross-protocol redirects.

Issue: #423"
ojw28,2015-05-08 16:05:04,https://api.github.com/repos/google/ExoPlayer/git/commits/4527539efe053715b33e29a59966e7fd039d2423,4527539efe053715b33e29a59966e7fd039d2423,"Handle cenc:pssh elements in DASH manifests.

Issue: #407"
ojw28,2015-05-08 16:04:21,https://api.github.com/repos/google/ExoPlayer/git/commits/3360f5eda5fde56e51154b1182ffafde6caafbaf,3360f5eda5fde56e51154b1182ffafde6caafbaf,Enable passthrough based on the input MIME type.
ojw28,2015-05-08 16:03:05,https://api.github.com/repos/google/ExoPlayer/git/commits/a1083d360ad3ed77facf2ce543c4440363b37daf,a1083d360ad3ed77facf2ce543c4440363b37daf,Prevent wrapping detection on new passthrough AudioTracks.
ojw28,2015-05-08 16:02:23,https://api.github.com/repos/google/ExoPlayer/git/commits/de5bce3400129b4b6400237e64cc3e70bcf4044c,de5bce3400129b4b6400237e64cc3e70bcf4044c,Apply passthrough workarounds only on platform API versions 21/22.
ened,2015-05-07 08:35:53,https://api.github.com/repos/google/ExoPlayer/git/commits/3079bf1d7502dd14ae7356a1a4e64523d5ccc5a8,3079bf1d7502dd14ae7356a1a4e64523d5ccc5a8,gradle updates
ojw28,2015-05-05 19:41:12,https://api.github.com/repos/google/ExoPlayer/git/commits/5d92cc8324431c2d89b2796dd177c3bcaf03b78a,5d92cc8324431c2d89b2796dd177c3bcaf03b78a,Make changes to Opus/Vp9 projects to build against new dev
ojw28,2015-05-05 19:38:36,https://api.github.com/repos/google/ExoPlayer/git/commits/102e0ce879cb63ef112213a3154794f4936386d9,102e0ce879cb63ef112213a3154794f4936386d9,"Merge pull request #431 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-05-05 19:34:34,https://api.github.com/repos/google/ExoPlayer/git/commits/02ea6f8937c85f2ae5a231f77abb34e44244a8c6,02ea6f8937c85f2ae5a231f77abb34e44244a8c6,Fix TYPE values.
ojw28,2015-05-05 19:34:07,https://api.github.com/repos/google/ExoPlayer/git/commits/9d73104472b20e060421463f7762b2595f0164b7,9d73104472b20e060421463f7762b2595f0164b7,Remove unused imports.
ojw28,2015-05-05 19:33:25,https://api.github.com/repos/google/ExoPlayer/git/commits/9921dfd1ced208f4dd4d37cd92d3debcb963a501,9921dfd1ced208f4dd4d37cd92d3debcb963a501,Deprecate FrameworkSampleSource as a deterrent.
ojw28,2015-05-05 19:32:28,https://api.github.com/repos/google/ExoPlayer/git/commits/37827be8cbea4bf930af379df88f0ba99cbd9bb5,37827be8cbea4bf930af379df88f0ba99cbd9bb5,"Use a UriDataSource for DASH manifests.

This allows loading a manifest from a file:// URI."
ojw28,2015-05-05 19:32:06,https://api.github.com/repos/google/ExoPlayer/git/commits/6909c948b93bd8b232a622ca7f5aa910d48bf5cf,6909c948b93bd8b232a622ca7f5aa910d48bf5cf,Remove SuppressLint in AudioTrack.
ojw28,2015-05-05 19:31:34,https://api.github.com/repos/google/ExoPlayer/git/commits/d2ba5cfd97499429821bd0c863a642bf531d9fe8,d2ba5cfd97499429821bd0c863a642bf531d9fe8,"Add TYPE_M4A, which is equivalent to TYPE_MP4."
ojw28,2015-05-05 19:30:52,https://api.github.com/repos/google/ExoPlayer/git/commits/9dcb17f21a839fb86d79d764bac36c1a206124e5,9dcb17f21a839fb86d79d764bac36c1a206124e5,Clean up DataSourceInputStream
ojw28,2015-05-05 19:30:32,https://api.github.com/repos/google/ExoPlayer/git/commits/a63883a8c8074dc8d39524e7889c50d8066f2928,a63883a8c8074dc8d39524e7889c50d8066f2928,"Fix format equality checking.

For Live SmoothStreaming, referential equality checking
isn't enough (it breaks once the manifest is updated).
Updated other instances too just for consistency."
ojw28,2015-05-05 19:12:32,https://api.github.com/repos/google/ExoPlayer/git/commits/8eb7349987b11dfe625490a0132144656347ed5b,8eb7349987b11dfe625490a0132144656347ed5b,Fix broken demo links
ojw28,2015-05-05 12:51:03,https://api.github.com/repos/google/ExoPlayer/git/commits/ab402bd13e5d853068ff5fbcb369f2b5e4599cb4,ab402bd13e5d853068ff5fbcb369f2b5e4599cb4,"Merge pull request #429 from gitanuj/datasourceinputstream-fix

Fix DataSourceInputStream.read() for EOF cases"
gitanuj,2015-05-05 11:00:09,https://api.github.com/repos/google/ExoPlayer/git/commits/2a06c2641c8a1c4bc146fdb227f6f10f2e6a97d7,2a06c2641c8a1c4bc146fdb227f6f10f2e6a97d7,Fix DataSourceInputStream.read() for EOF cases
ojw28,2015-05-01 19:43:42,https://api.github.com/repos/google/ExoPlayer/git/commits/7f58a0be8192c375565d7c77950200ee0a38c011,7f58a0be8192c375565d7c77950200ee0a38c011,"Use TYPE_MP4 instead of TYPE_OTHER for Dizzy.

Issue: #72
Issue: #292
Issue: #302
Issue: #425
Issue: #424"
ojw28,2015-05-01 19:37:14,https://api.github.com/repos/google/ExoPlayer/git/commits/1cac22d2a29eb99718570e2c4c6e18c9f6395f1d,1cac22d2a29eb99718570e2c4c6e18c9f6395f1d,Add support for standalone WebM playbacks.
ojw28,2015-05-01 19:35:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b3594051a1546c6d271da1285e9518ebb127c4b6,b3594051a1546c6d271da1285e9518ebb127c4b6,"Fix DemoPlayer's spurious transition through STATE_IDLE.

The spurious transitions were caused by calling pushTrackSelection
in onRenderers after changing the renderer building state to BUILT
and before calling player.prepare. pushTrackSelection can cause the
ExoPlayer to generate state changes, since it can call setPlayWhenReady.
This change transitions the renderer building state later, so that
when this happens getPlaybackState correctly masks the state and
returns STATE_PREPARING."
ojw28,2015-05-01 19:34:57,https://api.github.com/repos/google/ExoPlayer/git/commits/79cdd036828223bf2da29f8091252add27799aed,79cdd036828223bf2da29f8091252add27799aed,Filter unsupported video formats for HLS.
ojw28,2015-05-01 19:33:52,https://api.github.com/repos/google/ExoPlayer/git/commits/b405d3d9b73d2854c5ae7f173755917807e13045,b405d3d9b73d2854c5ae7f173755917807e13045,"Have Representation, TrackElement and Variant consistently expose Format.

And delete things that we're parsing but don't use from TrackElement."
ojw28,2015-05-01 19:32:42,https://api.github.com/repos/google/ExoPlayer/git/commits/8673cafce882dc8d441b7507917741473aa4022b,8673cafce882dc8d441b7507917741473aa4022b,"Move Allocator to HlsSampleSource (from HlsChunkSource).

- This makes HLS consistent with Chunk/ExtractorSampleSource.
- It needs to be consistent for WebVTT in HLS.
- Also trim the allocator when done."
ojw28,2015-05-01 19:31:49,https://api.github.com/repos/google/ExoPlayer/git/commits/0c5a1a6c35be56e9d25a70d7fb1cba952dbf2eed,0c5a1a6c35be56e9d25a70d7fb1cba952dbf2eed,Distinguish exceptions caught at top level.
ojw28,2015-05-01 19:31:21,https://api.github.com/repos/google/ExoPlayer/git/commits/efb9ff1fe737e15d79e3cb75b43ba71c376d0eda,efb9ff1fe737e15d79e3cb75b43ba71c376d0eda,"Play standalone MPEG-TS files.

- Have TsExtractor report a SeekMap to the output.
- Implement TsExtractor.reset to reset extractor state.
- Add 1x sample."
ojw28,2015-05-01 19:30:00,https://api.github.com/repos/google/ExoPlayer/git/commits/cfab852096b7fdb6d4d81a99ab6eabe0b20bd7c0,cfab852096b7fdb6d4d81a99ab6eabe0b20bd7c0,Remove pointless references to ElementaryStreamReaders.
ojw28,2015-05-01 19:29:32,https://api.github.com/repos/google/ExoPlayer/git/commits/d82343d06cee2b9412ac88acc93cb6fc4eda4340,d82343d06cee2b9412ac88acc93cb6fc4eda4340,Remove MediaFormat.bitrate.
ojw28,2015-05-01 19:28:49,https://api.github.com/repos/google/ExoPlayer/git/commits/54f97c952e77fbbda64f6330ac3747806d456718,54f97c952e77fbbda64f6330ac3747806d456718,"Reintroduce Allocation abstraction.

Play movies has an Allocator that attempts to allocate a single
huge byte[] up front to minimize the risk of GC pauses. This abstraction
will be required to keep that when updating them to the new Exo."
ojw28,2015-05-01 19:27:11,https://api.github.com/repos/google/ExoPlayer/git/commits/9b112cf94df6c552abaa21371de9fbdb8db065b1,9b112cf94df6c552abaa21371de9fbdb8db065b1,"Video format selection.

Making Representation and TrackElement extend Format will simplify
this further (TBC whether this is a good idea!).

Issue: #393"
ojw28,2015-05-01 19:25:19,https://api.github.com/repos/google/ExoPlayer/git/commits/fafcd79e1b8bed1c4323049d6e2ea9af029fed70,fafcd79e1b8bed1c4323049d6e2ea9af029fed70,"Move AC-3 bitrate calculation into Ac3Util.

This is in preparation for removing bitrate from MediaFormat."
ojw28,2015-05-01 19:24:50,https://api.github.com/repos/google/ExoPlayer/git/commits/6bf62770bddd9b6a6e694b0b513a39ca3d051cf4,6bf62770bddd9b6a6e694b0b513a39ca3d051cf4,Make sure that the process dies if a loading task throws Error.
ojw28,2015-05-01 19:24:27,https://api.github.com/repos/google/ExoPlayer/git/commits/1d528b80eaa85449a02f800f507e13e4e5186ea8,1d528b80eaa85449a02f800f507e13e4e5186ea8,Move getUserAgent from DemoUtil to library's Util.
ojw28,2015-05-01 19:23:33,https://api.github.com/repos/google/ExoPlayer/git/commits/6cb46e454905f704067409f1a682dd5b8a625c95,6cb46e454905f704067409f1a682dd5b8a625c95,"webm_extractor: Add VP8 to the list of codecs.

VP8 can be decoded by MediaCodec (since very early versions of android). Now that we want WebmExtractor to be general purpose, adding VP8 makes sense as it is a common use case."
ojw28,2015-05-01 19:23:02,https://api.github.com/repos/google/ExoPlayer/git/commits/5ea7424ee3b3fced67dd85651d51cf186bdca648,5ea7424ee3b3fced67dd85651d51cf186bdca648,Tidy up AssetDataSource.
ojw28,2015-05-01 19:22:31,https://api.github.com/repos/google/ExoPlayer/git/commits/053e5b9f1cec5f277652f5e9fd831569c2407bf5,053e5b9f1cec5f277652f5e9fd831569c2407bf5,Fix javadoc warning.
ojw28,2015-05-01 19:22:03,https://api.github.com/repos/google/ExoPlayer/git/commits/ce3d5c9a5997c3072a587aefeacb8d33438d3fe8,ce3d5c9a5997c3072a587aefeacb8d33438d3fe8,Throw when getMinBufferSize returns an error value.
ojw28,2015-05-01 19:21:36,https://api.github.com/repos/google/ExoPlayer/git/commits/e6c7defc7930254d18a74088ea46add0e7e18838,e6c7defc7930254d18a74088ea46add0e7e18838,"Make ParsableBitArray.data public, like ParsableByteArray."
ojw28,2015-05-01 19:20:47,https://api.github.com/repos/google/ExoPlayer/git/commits/7ad55dbf2c834b3b938b5f292b6f2b053ec192bf,7ad55dbf2c834b3b938b5f292b6f2b053ec192bf,"webm_extractor: Add support for parsing BlockGroup element

This CL adds support for parsing BlockGroup elements for all
codecs (not just opus). It also adds a test to verify the new
behavior."
ojw28,2015-05-01 19:18:54,https://api.github.com/repos/google/ExoPlayer/git/commits/99304eb44ea5a7915e6c0fc86c22bd77a9aa0b97,99304eb44ea5a7915e6c0fc86c22bd77a9aa0b97,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
ojw28,2015-05-01 19:10:47,https://api.github.com/repos/google/ExoPlayer/git/commits/aed45bb2ca1a6e7b25a33cdc59ff1eb95c9c3a00,aed45bb2ca1a6e7b25a33cdc59ff1eb95c9c3a00,Add support for reading AC-3 audio in HLS.
ojw28,2015-05-01 19:10:47,https://api.github.com/repos/google/ExoPlayer/git/commits/39082d19181226012f641009a84407357abd695e,39082d19181226012f641009a84407357abd695e,"Move AC-3 header parsing into a new Ac3Util class.

This is in preparation for adding support for AC-3 in HLS.

Also parse E-AC-3 boxes."
ojw28,2015-05-01 19:13:53,https://api.github.com/repos/google/ExoPlayer/git/commits/9b6c30525ec438ad8bc03e5a6afbff442b2f941a,9b6c30525ec438ad8bc03e5a6afbff442b2f941a,"webm_extractor_tests: Add tests for multi track Webm Extractor Support

Refactor the extractor tests to enable testing of multi track Webm support.

Github Issue: #363"
ojw28,2015-05-01 19:13:19,https://api.github.com/repos/google/ExoPlayer/git/commits/48fc9635a919f4a32f866f0bf8b50ff12fa979f9,48fc9635a919f4a32f866f0bf8b50ff12fa979f9,"webm_extractor: Add support for Cues present at the end of file

This CL adds support for WebM files which have Cues present at the end of the file (i.e.) after Clusters. The file referenced in the bug can now be played back using the demo app. It adds a new flag to WebmExtractor which should be set to true only when being used through ExtractorSampleSource. All others (e.g. DASH) should not set it.

Reference file: http://demos.webmproject.org/exoplayer/glass_vp9_vorbis_cues_at_end.webm"
ojw28,2015-05-01 19:12:28,https://api.github.com/repos/google/ExoPlayer/git/commits/6cccfc1caa13c00a7be8b640e31ad0840746b14a,6cccfc1caa13c00a7be8b640e31ad0840746b14a,"Make Atom.getAtomTypeString public.

I've found myself doing this a couple of times during local
debugging. It's harmless to have it public, and seems pretty
useful for debugging inside of the mp4 package."
ojw28,2015-05-01 19:11:57,https://api.github.com/repos/google/ExoPlayer/git/commits/b787852e71346ce96ae0f0687c62ba52f80e98b7,b787852e71346ce96ae0f0687c62ba52f80e98b7,Correctly stop previous renderers if prepare is called again.
ojw28,2015-05-01 19:11:27,https://api.github.com/repos/google/ExoPlayer/git/commits/88daaa882ce75de78ec7e74ead50e13cdb435428,88daaa882ce75de78ec7e74ead50e13cdb435428,Fix NPE if source is released having never been prepared.
ojw28,2015-05-01 19:10:47,https://api.github.com/repos/google/ExoPlayer/git/commits/837090e8f9a67553b840b6a1988da873cb299f60,837090e8f9a67553b840b6a1988da873cb299f60,"Move AC-3 header parsing into a new Ac3Util class.

This is in preparation for adding support for AC-3 in HLS.

Also parse E-AC-3 boxes."
ojw28,2015-04-24 10:51:11,https://api.github.com/repos/google/ExoPlayer/git/commits/26c5461b100cd4438f554d09007fd343e1fef7f3,26c5461b100cd4438f554d09007fd343e1fef7f3,"Merge pull request #408 from dnutcracker/dev

fix for issue #403"
ojw28,2015-04-22 15:24:12,https://api.github.com/repos/google/ExoPlayer/git/commits/f273c73123be236d9594613f00a0dde12d641cb9,f273c73123be236d9594613f00a0dde12d641cb9,"Support NALUnitLengthFieldLength != 4.

Seems a little hacky to define this in Track, but there doesn't seem to
be a particularly nice alternative.

Issue: #406"
ojw28,2015-04-22 15:23:33,https://api.github.com/repos/google/ExoPlayer/git/commits/afb1a93059794b432cf6fa9509a603ddb3b73fa4,afb1a93059794b432cf6fa9509a603ddb3b73fa4,"Refine ExtractorSampleSource retry.

I was hoping not to avoid this, but in the case of a parsing
failure during preparation we keep retrying forever!"
ojw28,2015-04-22 15:22:48,https://api.github.com/repos/google/ExoPlayer/git/commits/1a01dcc55af8ebe435c664baeb42100dfb225c83,1a01dcc55af8ebe435c664baeb42100dfb225c83,"Separate UriDataSource from HttpDataSource.

Using a file:// URL for loading an HLS stream (for testing) would fail due to
casting the connection to an HttpURLConnection in DefaultHttpDataSource.

This change makes UriDataSource an interface for objects that are DataSources
with URIs. That allows for reading manifests for HLS using just a UriDataSource
rather than an HttpDataSource (URLs in the playlist are relative to the data
source's URL so the getUri method is needed)."
ojw28,2015-04-22 15:20:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d43d55edebeec09404e635ea4233c067e3e2aa29,d43d55edebeec09404e635ea4233c067e3e2aa29,Add minSdkVersion note to build.gradle.
ojw28,2015-04-22 15:19:48,https://api.github.com/repos/google/ExoPlayer/git/commits/a1336978adbf4940d3550599131f52b19abc6d90,a1336978adbf4940d3550599131f52b19abc6d90,Fix DataSpec toString formatting.
ojw28,2015-04-22 15:18:23,https://api.github.com/repos/google/ExoPlayer/git/commits/c807c69a93b39c574ffc685263d56f5d82274c38,c807c69a93b39c574ffc685263d56f5d82274c38,"webm_extractor: Support for multiple tracks

Github Issue: #363"
ojw28,2015-04-22 15:17:36,https://api.github.com/repos/google/ExoPlayer/git/commits/f637fde962d7d82cc0ce0d6f767248efab18942a,f637fde962d7d82cc0ce0d6f767248efab18942a,Allow overriding of codec buffer dequeue block time.
ojw28,2015-04-22 15:16:42,https://api.github.com/repos/google/ExoPlayer/git/commits/1a9bf018a4134852aafd25b127a8296611558f2a,1a9bf018a4134852aafd25b127a8296611558f2a,Add frame rate to Format for use in format selection (when known).
ojw28,2015-04-22 15:14:46,https://api.github.com/repos/google/ExoPlayer/git/commits/a7e2b719c5c6278bc93e1d382acb7677b9f1caf7,a7e2b719c5c6278bc93e1d382acb7677b9f1caf7,"Call init() on the extractor only once for each chunk.

On retrying loading a chunk, the state of the extractor was reset due to a call
to seek(). Prevent this call by only calling init() if no bytes were loaded.

Also make the DefaultExtractorInput use the loading position not the original
stream position so that its getPosition() method returns offsets relative to
the start of the stream, which fixes a bug where the chunk index offsets would
be relative to the wrong position if there was a retry while loading the chunk."
ojw28,2015-04-22 15:13:19,https://api.github.com/repos/google/ExoPlayer/git/commits/21e69f3154ee4d21153cad6ef473d683ee1970ee,21e69f3154ee4d21153cad6ef473d683ee1970ee,"Add more loading info (including chunk loading times) to
BaseChunkSampleSourceEventListener.onLoadCompleted."
ojw28,2015-04-22 15:11:23,https://api.github.com/repos/google/ExoPlayer/git/commits/3a1325b0af009b7aada70fcdd95ff3dcadae4158,3a1325b0af009b7aada70fcdd95ff3dcadae4158,Make TsExtractor consistent with AdtsExtractor.
ojw28,2015-04-17 19:12:11,https://api.github.com/repos/google/ExoPlayer/git/commits/55e08ff712b7be66d6fd8545d46ed29f6b472e22,55e08ff712b7be66d6fd8545d46ed29f6b472e22,"Avoid time discontinuity when retrying a live stream.

Issue: #227
Issue: #389"
ojw28,2015-04-17 19:10:31,https://api.github.com/repos/google/ExoPlayer/git/commits/faf0e2c1471179f0dfaa3a547719c5121920a962,faf0e2c1471179f0dfaa3a547719c5121920a962,"Improve retry logic.

1. Reset retry count to 0 if a Loadable makes progress.
2. Handle resume correctly in the case of live streams.

Issue: #227
Issue: #389"
ojw28,2015-04-17 19:09:45,https://api.github.com/repos/google/ExoPlayer/git/commits/4c94a846d5486af4cf3a7169aa0e1b1ad85a547e,4c94a846d5486af4cf3a7169aa0e1b1ad85a547e,"webm_extractor: Fix issue in vorbis extraction.

Vorbis decoder in android MediaCodec [1] expects the last 4 bytes of the sample to be the number of samples in the current page. This definition holds good only for Ogg and is irrelevant for WebM. So we always set this to -1 (the decoder will ignore this value if we set it to -1). The android platform media extractor [2] does the same."
ojw28,2015-04-17 19:08:54,https://api.github.com/repos/google/ExoPlayer/git/commits/b1aac839e68d837611eb11dcda86d6e5e75e81fc,b1aac839e68d837611eb11dcda86d6e5e75e81fc,"Don't feed AC-3 input when the audio track is paused.

This works around an issue the audio track continues to play audio data written
after calling AudioTrack.pause(), which breaks rebuffering behavior (as video
can never catch up if audio continues to be consumed, in some circumstances).

Also don't increment the timestamp wrap count if the track is paused, to work
around an issue where the playback head position jumps back to zero after the
AudioTrack position jumps back to zero."
ojw28,2015-04-17 19:07:04,https://api.github.com/repos/google/ExoPlayer/git/commits/c4eee71fa204d33da48dba6659368eca284a4a3d,c4eee71fa204d33da48dba6659368eca284a4a3d,"Support AAC without platform MediaExtractor.

Issue: #231
Issue: #227"
ojw28,2015-04-17 19:04:52,https://api.github.com/repos/google/ExoPlayer/git/commits/fb97fca04e339d5dbe23a92bb4d300901aa04c74,fb97fca04e339d5dbe23a92bb4d300901aa04c74,Handle dynamic appearance/disappearance of ID3 track in HLS.
ojw28,2015-04-17 19:04:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5f74226d675191c2191b780a1021113b621a5a9f,5f74226d675191c2191b780a1021113b621a5a9f,Make the audio track session workaround flag non-final.
ojw28,2015-04-17 19:03:24,https://api.github.com/repos/google/ExoPlayer/git/commits/508e13e0bd96d27475851de6106546ae52c98897,508e13e0bd96d27475851de6106546ae52c98897,Clean up + optimize ParsableByteArray.
ojw28,2015-04-17 19:02:20,https://api.github.com/repos/google/ExoPlayer/git/commits/9092fad8e8ae6de7e7681181763fe96c8545d73a,9092fad8e8ae6de7e7681181763fe96c8545d73a,Fix subtitles.
ojw28,2015-04-17 19:01:59,https://api.github.com/repos/google/ExoPlayer/git/commits/052371784166e10aee551e37184840594b29aa68,052371784166e10aee551e37184840594b29aa68,Fix crash.
ojw28,2015-04-17 19:01:06,https://api.github.com/repos/google/ExoPlayer/git/commits/e84c8521698b52b95ae2f9949a99f8ff1354e524,e84c8521698b52b95ae2f9949a99f8ff1354e524,"Select E-AC-3 in preference to AC-3, and remove other tracks."
ojw28,2015-04-17 18:59:58,https://api.github.com/repos/google/ExoPlayer/git/commits/3f1638de9508978235effdc2b0bbb28d31c4f5bb,3f1638de9508978235effdc2b0bbb28d31c4f5bb,"Use ENCODING_PCM_16BIT for keepSessionIdAudioTrack.

ENCODING_PCM_8BIT support is not required."
ojw28,2015-04-17 18:59:03,https://api.github.com/repos/google/ExoPlayer/git/commits/e4e6a1caf0298a325d1276d1fd958e4e1c300348,e4e6a1caf0298a325d1276d1fd958e4e1c300348,"Switch from AudioFormat.ENCODING_DEFAULT to .ENCODING_PCM_16BIT.

AudioTrack.getMinBufferSize does not handle ENCODING_DEFAULT so
switch back to ENCODING_PCM_16BIT."
ojw28,2015-04-17 18:57:56,https://api.github.com/repos/google/ExoPlayer/git/commits/31552b8cdf42d4839212263ec3e983cb46dd883a,31552b8cdf42d4839212263ec3e983cb46dd883a,Handle play/pause button in the Demo app on Android TV.
ojw28,2015-04-14 15:45:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c3bf60b1a912d6fe28e09ebc66bafd5467d688bb,c3bf60b1a912d6fe28e09ebc66bafd5467d688bb,Add JavaDoc to remove lint warning about unused variable.
ojw28,2015-04-14 15:44:01,https://api.github.com/repos/google/ExoPlayer/git/commits/7cf6aa86d20e669330870cf5b5cc5e5a1b7139fb,7cf6aa86d20e669330870cf5b5cc5e5a1b7139fb,"Properly document in code how to pass CustomData to PlayReady DRM.

Issue: #339"
ojw28,2015-04-14 15:42:24,https://api.github.com/repos/google/ExoPlayer/git/commits/d9b3582baacd932dd86c3af5a01e6b30ba2f1650,d9b3582baacd932dd86c3af5a01e6b30ba2f1650,"Use OMX.google.raw.decoder for passthrough playback.

The OMX component needs to be configured with a format that has a
MIME type of audio/raw. Remove Ac3PassthroughAudioTrackRenderer,
which is no longer used."
ojw28,2015-04-13 18:36:16,https://api.github.com/repos/google/ExoPlayer/git/commits/ed1dbddc756e901d71db710d89cf893a80037c74,ed1dbddc756e901d71db710d89cf893a80037c74,"Trim memory when disabling ExtractorSampleSource.

This prevents memory leakage even in the case where the app
is still holding a reference (direct or indirect) to the
Allocator."
ojw28,2015-04-13 18:03:04,https://api.github.com/repos/google/ExoPlayer/git/commits/0d69a2eae8942fb93039c73686740130d115592c,0d69a2eae8942fb93039c73686740130d115592c,"Implement event reporting from HlsSampleSource.

Issue: #275"
ojw28,2015-04-13 17:57:31,https://api.github.com/repos/google/ExoPlayer/git/commits/e21f7801b50f09cc974cfb62ede8f6a3b9fb9247,e21f7801b50f09cc974cfb62ede8f6a3b9fb9247,Major surgery to move all playback modes to the new Extractor model.
tresvecesseis,2015-04-13 14:54:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e5acc5a2c86466c26917f810deff2455f9b4272b,e5acc5a2c86466c26917f810deff2455f9b4272b,resync with Extractor changes
tresvecesseis,2015-04-13 13:56:43,https://api.github.com/repos/google/ExoPlayer/git/commits/da7ae2a9253b500409b184ad561d89633f565488,da7ae2a9253b500409b184ad561d89633f565488,Merge remote-tracking branch 'upstream/dev' into dev
ojw28,2015-04-11 01:09:40,https://api.github.com/repos/google/ExoPlayer/git/commits/265adf9a8f066a24f20d6f691a9218196afdf885,265adf9a8f066a24f20d6f691a9218196afdf885,Move chunk trigger constants into Chunk.
ojw28,2015-04-11 01:05:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a17ffa66f236ec3647696c3e80cfee73b3834bfa,a17ffa66f236ec3647696c3e80cfee73b3834bfa,Delete test for the removed source package.
ojw28,2015-04-11 01:03:43,https://api.github.com/repos/google/ExoPlayer/git/commits/ad56490bde6dd0bc7d2cfcbc207639b28f86ecc9,ad56490bde6dd0bc7d2cfcbc207639b28f86ecc9,Add ability to discard from write-side of DefaultTrackOutput.
ojw28,2015-04-11 01:00:47,https://api.github.com/repos/google/ExoPlayer/git/commits/4c8f9a8c6fb6d831d76ef122bf7f479fdaaf18c3,4c8f9a8c6fb6d831d76ef122bf7f479fdaaf18c3,"Remove source package, and restore original FrameworkSampleSource."
ojw28,2015-04-11 00:58:34,https://api.github.com/repos/google/ExoPlayer/git/commits/587edf8e2b5a227f6b869ce0ea51361cfbedb9b3,587edf8e2b5a227f6b869ce0ea51361cfbedb9b3,Add new style mp4/fmp4 extractors.
ojw28,2015-04-11 00:42:48,https://api.github.com/repos/google/ExoPlayer/git/commits/f002e6a76e31028783b92f21aa595107ca926ba6,f002e6a76e31028783b92f21aa595107ca926ba6,Add test for DefaultExtractorInput + trivial Extractor sanity checks.
ojw28,2015-04-11 00:33:31,https://api.github.com/repos/google/ExoPlayer/git/commits/7d8141e41900933554cc7946888fb43ff653c036,7d8141e41900933554cc7946888fb43ff653c036,Add new style mp3 extractor.
ojw28,2015-04-11 00:25:49,https://api.github.com/repos/google/ExoPlayer/git/commits/4a1fed9e8697a9db9de26a618b886678d9802145,4a1fed9e8697a9db9de26a618b886678d9802145,Add new style WebM extractor.
ojw28,2015-04-11 00:12:40,https://api.github.com/repos/google/ExoPlayer/git/commits/6c5af232303ccf8166c8d4bc8266984a8a5ced93,6c5af232303ccf8166c8d4bc8266984a8a5ced93,Minor tweaks to HlsSampleSource.
ojw28,2015-04-11 00:07:41,https://api.github.com/repos/google/ExoPlayer/git/commits/da656e6f26ac49e88f5abc5a7a90aa1bbf5c3a3e,da656e6f26ac49e88f5abc5a7a90aa1bbf5c3a3e,More steps towards unified extractors.
ojw28,2015-04-10 23:59:00,https://api.github.com/repos/google/ExoPlayer/git/commits/53a47524a1d6f81487cf16db245cb8fc066e6410,53a47524a1d6f81487cf16db245cb8fc066e6410,"Support non-square pixels in HLS.

Github issue: #375"
ojw28,2015-04-10 23:55:38,https://api.github.com/repos/google/ExoPlayer/git/commits/37d12ff14a606d20a7a4df4591e5cabb26a13d1e,37d12ff14a606d20a7a4df4591e5cabb26a13d1e,Steps toward generalizing the Extractor interface for all extractors.
ojw28,2015-04-10 23:23:46,https://api.github.com/repos/google/ExoPlayer/git/commits/3a551c73ba78100292d133c0bc54811f6d195319,3a551c73ba78100292d133c0bc54811f6d195319,"Move hls.parser to a new extractor package.

This package will house all extractors, which will be unified
to implement a single Extractor interface."
ojw28,2015-04-10 22:41:45,https://api.github.com/repos/google/ExoPlayer/git/commits/fc176b9cbe5cdbaa662738eb737ac0d3d5aca2ab,fc176b9cbe5cdbaa662738eb737ac0d3d5aca2ab,"Fix TsExtractor bug.

The limit on the ts packet buffer can be reduced during processing
if it's discovered to have padding. Hence we need to reset it back
to the ts packet size before processing each packet."
ojw28,2015-04-10 22:31:03,https://api.github.com/repos/google/ExoPlayer/git/commits/61443b2f1266012282f282ff3e5ce06c6432f5dd,61443b2f1266012282f282ff3e5ce06c6432f5dd,"Relocate content of Mp4Util to more sensible locations.

- Atom related stuff in Mp4Util is moved to Atom.
- Remainder of Mp4Util is renamed to H264Util."
ojw28,2015-04-10 22:15:52,https://api.github.com/repos/google/ExoPlayer/git/commits/fea2140d57e5e4d422b923790018017f5aa71ab9,fea2140d57e5e4d422b923790018017f5aa71ab9,Add ability to query size/rate support in MediaCodecUtil.
ojw28,2015-04-10 22:12:47,https://api.github.com/repos/google/ExoPlayer/git/commits/38efb1fc3f37a71ffa7a8fd7c6b3a2e1aafc19e9,38efb1fc3f37a71ffa7a8fd7c6b3a2e1aafc19e9,Clean up Aes128DataSource.
ojw28,2015-04-10 22:06:57,https://api.github.com/repos/google/ExoPlayer/git/commits/6bf52dd69c9ea253f6a536a3b197a23975bb5de0,6bf52dd69c9ea253f6a536a3b197a23975bb5de0,Report decoder initialization information out of track renderer.
ojw28,2015-04-10 22:03:50,https://api.github.com/repos/google/ExoPlayer/git/commits/a17123c49b02c62512c854709a36a59de2f0612d,a17123c49b02c62512c854709a36a59de2f0612d,Clean up codec reinitialization.
ojw28,2015-04-10 22:01:09,https://api.github.com/repos/google/ExoPlayer/git/commits/380c427fb3ac73c339f4d054394ed55c8130b826,380c427fb3ac73c339f4d054394ed55c8130b826,Make MediaCodecVideoTrackRenderer easier to extend.
ojw28,2015-04-10 22:00:23,https://api.github.com/repos/google/ExoPlayer/git/commits/a085d2f29b24f3d6ae85fcd10d654c723eac32af,a085d2f29b24f3d6ae85fcd10d654c723eac32af,Add END_OF_INPUT constant + start using it.
ojw28,2015-04-10 21:56:13,https://api.github.com/repos/google/ExoPlayer/git/commits/608d685b2c91aa5b777bd56ccf44705db80b6e6f,608d685b2c91aa5b777bd56ccf44705db80b6e6f,Add missing header.
ojw28,2015-04-10 21:55:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d745384d9935cf2db3296bab06e12ca1ea5fe2b8,d745384d9935cf2db3296bab06e12ca1ea5fe2b8,Change decodeOnly to be a sample flag.
ojw28,2015-04-10 21:39:15,https://api.github.com/repos/google/ExoPlayer/git/commits/70b0e55a8b934d2fe91e7fab62eb8604cd41c9cf,70b0e55a8b934d2fe91e7fab62eb8604cd41c9cf,Remove deprecated bandwidth parameter.
ojw28,2015-04-10 21:38:06,https://api.github.com/repos/google/ExoPlayer/git/commits/c9010256432c8b09982b6a2c4f7fbfaa17b7c2ac,c9010256432c8b09982b6a2c4f7fbfaa17b7c2ac,"Don't attempt license request when keys expire.

- Keys should not expire during normal playbacks of correctly configured content.
- Attempting to refresh on expiration causes a race condition, that may result
  in either failure or brief re-buffer, for the 30s license test video.
- This change provides deterministic behavior, which is to always fail."
ojw28,2015-04-10 21:36:07,https://api.github.com/repos/google/ExoPlayer/git/commits/d108c13535e4f9f47b9f36bc463520a5f69105fe,d108c13535e4f9f47b9f36bc463520a5f69105fe,Remove deprecated method.
ojw28,2015-04-10 21:35:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4dc8e8f951510c16928603b8ce2d91700f6e3af3,4dc8e8f951510c16928603b8ce2d91700f6e3af3,Add audio and m3u8 mime types.
ojw28,2015-04-10 21:34:06,https://api.github.com/repos/google/ExoPlayer/git/commits/ecaf329b0d5d425d5b12858bf291f4d6cdb3add9,ecaf329b0d5d425d5b12858bf291f4d6cdb3add9,Improve ParsableByteArray performance + enhance API.
ojw28,2015-04-10 21:33:10,https://api.github.com/repos/google/ExoPlayer/git/commits/ed658b8e8d4ad839d721bc79ff4f2175a9ff5413,ed658b8e8d4ad839d721bc79ff4f2175a9ff5413,Attempt to guard against ExoCache corruption.
ojw28,2015-04-10 21:29:51,https://api.github.com/repos/google/ExoPlayer/git/commits/cfcbca6c958c613f7f03dc6c4010b86801b32176,cfcbca6c958c613f7f03dc6c4010b86801b32176,Make FileDataSource throw EOFException.
ojw28,2015-04-10 21:26:00,https://api.github.com/repos/google/ExoPlayer/git/commits/362dc5f382e3a87f04fed017248e225eeb416396,362dc5f382e3a87f04fed017248e225eeb416396,"Don't fail if server doesn't support partial requests.

Some servers, probably edge cache machines that exclusively serve
chunked media, don't support partial requests. Which is kind of
vaguely reasonable for that particular case. This change modifies
DefaultHttpDataSource to correctly handle this case, by manually
skipping data up to the requested position (and making sure not to
read more data than the requested length)."
ojw28,2015-04-10 21:24:39,https://api.github.com/repos/google/ExoPlayer/git/commits/1a198b8a300b87784d7a283894a9d2662f6dbe7c,1a198b8a300b87784d7a283894a9d2662f6dbe7c,"Minor cleanup (remove deprecated method, fix javadoc)"
ojw28,2015-04-01 12:56:15,https://api.github.com/repos/google/ExoPlayer/git/commits/9183525b5e95e9bb6161b2d07f933798322ed6ef,9183525b5e95e9bb6161b2d07f933798322ed6ef,"Merge pull request #221 from martinbonnin/better_input_format_change_for_non_adaptive_codecs

better handling of input format change for non-adaptive codecs"
ojw28,2015-03-31 10:29:42,https://api.github.com/repos/google/ExoPlayer/git/commits/fcc2138e9fc41a1a21614caca54bac16a1fa8d07,fcc2138e9fc41a1a21614caca54bac16a1fa8d07,"Merge pull request #374 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-03-31 10:28:51,https://api.github.com/repos/google/ExoPlayer/git/commits/acd1b9acff42e79d1671ab3def7bdb141c742baa,acd1b9acff42e79d1671ab3def7bdb141c742baa,Enable ContentProtect elements at the Representation level
ojw28,2015-03-30 14:56:39,https://api.github.com/repos/google/ExoPlayer/git/commits/5a5935cb72857580803573f0d44703516d332558,5a5935cb72857580803573f0d44703516d332558,"Fix HLS playlist parsing of boolean attributes.

The regex included quotation marks like X=""YES"", but the manifests
don't actually contain them, for examples X=YES."
ojw28,2015-03-10 10:50:15,https://api.github.com/repos/google/ExoPlayer/git/commits/85be2aed0a5e5487504905d45c1a565d288feee2,85be2aed0a5e5487504905d45c1a565d288feee2,Add ability to release via Bintray.
ojw28,2015-03-25 12:13:53,https://api.github.com/repos/google/ExoPlayer/git/commits/d27b6de119ab04a0616635f666483297dc018ceb,d27b6de119ab04a0616635f666483297dc018ceb,Release AudioTrack when done.
ojw28,2015-03-25 12:12:44,https://api.github.com/repos/google/ExoPlayer/git/commits/7f44d8f9b920b2ff7949695b706acf05343ff238,7f44d8f9b920b2ff7949695b706acf05343ff238,"Merge pull request #367 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-03-25 12:08:45,https://api.github.com/repos/google/ExoPlayer/git/commits/b73b9a0509b194e11e3ad7f051cf380c22118758,b73b9a0509b194e11e3ad7f051cf380c22118758,Add workaround for #252 (but don't enable it by default).
ojw28,2015-03-17 12:36:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e54d07c1b09ee051d4ceedcde12f50433111c45d,e54d07c1b09ee051d4ceedcde12f50433111c45d,Fix issue with new extractor input
andrewlewis,2015-03-13 18:10:37,https://api.github.com/repos/google/ExoPlayer/git/commits/5e4a35fa7ea719cc9ce17d03ca6d4abc67125f39,5e4a35fa7ea719cc9ce17d03ca6d4abc67125f39,"Add Mp4SampleExtractor, for reading unfragmented MP4 files."
andrewlewis,2015-03-13 18:06:00,https://api.github.com/repos/google/ExoPlayer/git/commits/6d8c4dd41649c5bd5b9eed3b18a560721d68322b,6d8c4dd41649c5bd5b9eed3b18a560721d68322b,Add workaround for slow okhttp InputStream.close() on API levels 19/20.
ojw28,2015-03-13 11:47:51,https://api.github.com/repos/google/ExoPlayer/git/commits/a22ccf9254fdf087e0a9d6abc76e7e8d740019ae,a22ccf9254fdf087e0a9d6abc76e7e8d740019ae,"Another baby step to unified extractors.

- Have extractors read from an ExtractorInput. Benefits of this are
  (a) The ability to do a ""full"" read or skip of a specified number
  of bytes, (b) The ability to do multiple reads in your extractor's
  read method. The ExtractorInput will throw an InterruptedException
  if the read has been canceled.

- Provides the extractor with the ability to query the absolute
  position of the data being read in the stream. This is needed for
  things like parsing a segment index in fragmented mp4, where the
  position of the end of the box in the stream is required because
  the index offsets are all specified relative to that position."
ojw28,2015-03-13 11:44:27,https://api.github.com/repos/google/ExoPlayer/git/commits/1111dd73a0812da5c333879a4b44a8d282fc0ba3,1111dd73a0812da5c333879a4b44a8d282fc0ba3,"Further simplify HlsExtractor interface.

- Move to builder naming.
- Propagate formats to the TrackOutput instances, rather than having
  them be read through the Extractor. There was actually some weird
  indexing going on here before (which happened to work, but wasn't
  well defined)."
ojw28,2015-03-12 19:44:18,https://api.github.com/repos/google/ExoPlayer/git/commits/04cead415ad7c7fd6427de65ecb7f94a0dc14367,04cead415ad7c7fd6427de65ecb7f94a0dc14367,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
ojw28,2015-03-12 19:42:00,https://api.github.com/repos/google/ExoPlayer/git/commits/12807a7d4b5ec1ebb8f62c69be5616fd6e68bd04,12807a7d4b5ec1ebb8f62c69be5616fd6e68bd04,Simplify encryption handling in HLS.
ojw28,2015-03-12 19:42:00,https://api.github.com/repos/google/ExoPlayer/git/commits/fb36f85e0d5e4c9f7c5e0d92586b004b71f43496,fb36f85e0d5e4c9f7c5e0d92586b004b71f43496,Simplify encryption handling in HLS.
ojw28,2015-03-12 16:43:24,https://api.github.com/repos/google/ExoPlayer/git/commits/fabd4705501b2be9434dadeb0a83f18913f4a942,fabd4705501b2be9434dadeb0a83f18913f4a942,"Merge pull request #354 from canatella/aes-iv-fix

Fix AES decryption of HLS streams."
dmveygo,2015-03-12 09:23:29,https://api.github.com/repos/google/ExoPlayer/git/commits/94dd9c41f4cd048baa3b62193a7a5c215c0ed8b1,94dd9c41f4cd048baa3b62193a7a5c215c0ed8b1,"Fix AES decryption of HLS streams.

As per http://tools.ietf.org/html/draft-pantos-http-live-streaming-04#section-5.2,
the initializaton vector (IV) of the AES decryption algorithm should be set to:
- the IV attribute value if present,
- the sequence number otherwise.

Currently, the IV is set once and use over all next media sequences
where the IV attribute is not set. The fix is to use the provided IV if
given or use the current media sequence number."
ojw28,2015-03-11 19:21:33,https://api.github.com/repos/google/ExoPlayer/git/commits/5ca2e0fd95d580df34599c84b37f9e1e4f49da87,5ca2e0fd95d580df34599c84b37f9e1e4f49da87,"First step toward extractor unification.

- It's probably easiest to think of this as a standalone HLS change, which is splitting out the ""loading"" and ""consuming"" sides of HlsExtractor and a good structural change in its own right. To do this, HlsExtractorWrapper becomes a final class implementing the consuming side. HlsExtractor becomes an interface defining the loading side.

- The bigger picture is that, hopefully, HlsExtractor will become a lightweight extractor interface that can be used throughout the library. Because it doesn't need to implement the consuming side, we'll save on having to re-implement the consuming side for every extractor (we'll probably need one consuming side implementation for HLS/DASH/SmoothStreaming, and a second one for everything else, both of which will use SampleQueue). It's expected that the HlsExtractor interface will need to change to accommodate all use cases.

- The next step in unification will be to try and have FragmentedMp4Extractor implement HlsExtractor (which will need renaming). Once this is done, I'll try and move the chunk package over to use the HlsExtractor interface."
ojw28,2015-03-11 15:49:53,https://api.github.com/repos/google/ExoPlayer/git/commits/becc6fca4cbdeeddfac5cd5050d9f00081374802,becc6fca4cbdeeddfac5cd5050d9f00081374802,"Enhance SampleQueue/RollingSampleBuffer to support other use cases.

- This is a step toward hopefully converging HLS and CHUNK packages.
- Add support for encrypted samples.
- Add support for appending from a DataSource."
ojw28,2015-03-11 15:48:12,https://api.github.com/repos/google/ExoPlayer/git/commits/5d0457152d46052a32209ec11ee6237eaecf3a76,5d0457152d46052a32209ec11ee6237eaecf3a76,Remove need for InlinedApi with a few more C constants.
ojw28,2015-03-10 21:44:20,https://api.github.com/repos/google/ExoPlayer/git/commits/56a509d8e43b459bdefbd115b85aa7103c16770c,56a509d8e43b459bdefbd115b85aa7103c16770c,"Clean up handling of encrypted samples in fmp4/webm extractors.

- The fmp4 extractor was reading from sampleEncryptionData even
  for not-encrypted samples, which I'm pretty sure isn't right.
  Fixed this. For all encrypted content I've seen, this change
  will be a no-op because isEncrypted is always true if there's
  an encryptionBox present.
- Made webm extractor only set cryptoInfo if isEncrypted is true.
- Align variable naming in the two extractors, for clarity."
ojw28,2015-03-10 19:48:41,https://api.github.com/repos/google/ExoPlayer/git/commits/5e11b9f008fcbe4ef4ad7611d08a99c0a3c562d7,5e11b9f008fcbe4ef4ad7611d08a99c0a3c562d7,Add DrmInitData (missed from a previous commit).
ojw28,2015-03-10 19:43:25,https://api.github.com/repos/google/ExoPlayer/git/commits/eba16e55b01e31c83eb001ef20093d276df3f100,eba16e55b01e31c83eb001ef20093d276df3f100,Support delayed loading by Loader.
ojw28,2015-03-10 19:42:48,https://api.github.com/repos/google/ExoPlayer/git/commits/8c1088559e85a07d0090c03ebf684e2ff52d2d21,8c1088559e85a07d0090c03ebf684e2ff52d2d21,"Generalize getPsshInfo to properly accomodate WebM.

- Rather than returning a map, return a DrmInitData object,
  with mapped and non-mapped implementations.
- Include a suitable mimeType to pass to the MediaDrm. Previously
  we were incorrectly passing the mimeType of the samples,
  where-as MediaDrm expects the container mimeType. Note that
  it doesn't matter whether the mimeType starts with ""video"" or
  ""audio"", hence using video mimeTypes everywhere."
ojw28,2015-03-10 19:37:47,https://api.github.com/repos/google/ExoPlayer/git/commits/eec6458b435027da1609da4d9468edfeb691e22f,eec6458b435027da1609da4d9468edfeb691e22f,Add handling of Extended Western European character set for CEA-608.
ojw28,2015-03-10 19:36:37,https://api.github.com/repos/google/ExoPlayer/git/commits/4192ac56afe9ef10ef8826d58d2875a7a182286a,4192ac56afe9ef10ef8826d58d2875a7a182286a,WebM Extractor support for Encrypted content.
ojw28,2015-03-10 19:07:19,https://api.github.com/repos/google/ExoPlayer/git/commits/1ebaaaebd5ba35928efbfd47e04e885fcc516583,1ebaaaebd5ba35928efbfd47e04e885fcc516583,"Parse EXT-X-MEDIA tags with SUBTITLES type.

Not yet used by anything.

Issue: #151"
ojw28,2015-03-10 19:06:07,https://api.github.com/repos/google/ExoPlayer/git/commits/be103106cb46515a04833d803f44afc2ac963df0,be103106cb46515a04833d803f44afc2ac963df0,"HLS: Better stream selection at start of playback.

- Correctly handle bandwidth NO_ESTIMATE case.
- Don't consider switching without a previous chunk."
ojw28,2015-03-10 19:04:38,https://api.github.com/repos/google/ExoPlayer/git/commits/489e99158f18f10c64acc3a76e3b47086b478498,489e99158f18f10c64acc3a76e3b47086b478498,"Remove getDurationUs from the SampleExtractor interface.

Set the duration on the MediaFormat instead."
ojw28,2015-03-10 19:02:24,https://api.github.com/repos/google/ExoPlayer/git/commits/f3f9c845cd85d9b4cd15e523cbf7a20f26c5b555,f3f9c845cd85d9b4cd15e523cbf7a20f26c5b555,Add test for DefaultSampleSource.
ojw28,2015-03-10 19:01:11,https://api.github.com/repos/google/ExoPlayer/git/commits/cdf19430ef5fbab1877b40c3f8c62e30d05335c4,cdf19430ef5fbab1877b40c3f8c62e30d05335c4,Remove TrackInfo from the SampleExtractor interface.
ojw28,2015-03-06 16:44:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5dedf5d930ead6c696c68fadac5850590713ae98,5dedf5d930ead6c696c68fadac5850590713ae98,"Merge pull request #340 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-03-06 16:39:00,https://api.github.com/repos/google/ExoPlayer/git/commits/fbd0a57e5c0a24fa7d4ae6ae56f63d271b411837,fbd0a57e5c0a24fa7d4ae6ae56f63d271b411837,Push tests.
ojw28,2015-03-05 11:56:00,https://api.github.com/repos/google/ExoPlayer/git/commits/462fea3eaf265557f818e31deef3429759f51cbd,462fea3eaf265557f818e31deef3429759f51cbd,"Correctly resolve Uris according to RFC3986.

Issue: #327"
tresvecesseis,2015-03-04 19:46:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9208c655d18a492fc908b354c75b8927108f6eeb,9208c655d18a492fc908b354c75b8927108f6eeb,fix false positives in sync word detection thanks to @jeoliva
ojw28,2015-03-04 11:02:43,https://api.github.com/repos/google/ExoPlayer/git/commits/457557b56fe80d15a47ddde5bc78241075c2c262,457557b56fe80d15a47ddde5bc78241075c2c262,Parse ISO8601 timestamps using UTC timezone.
ojw28,2015-03-03 18:16:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a1d4a5e154031796033f4774f03e4505cde3bcd1,a1d4a5e154031796033f4774f03e4505cde3bcd1,"Continue waiting for keys until the codec is flushed.

It was possible for a codec input buffer to be filled with two frames' worth of
data, if seekTo was called after populating a buffer, if waitingForKeys was true
and seeking did not trigger a flush. This caused the CryptoInfo to be configured
as if the input buffer contained a large amount of reconfiguration data as
cleartext.

Move resetting waitingForKeys to flushCodec, so that we don't try to read the
next sample from the source until the first one has been consumed or discarded."
ojw28,2015-03-03 17:17:02,https://api.github.com/repos/google/ExoPlayer/git/commits/baea1cd12dc5f0b23e3c57b37811b8d72d76f1c5,baea1cd12dc5f0b23e3c57b37811b8d72d76f1c5,Add ftyp atom def
ojw28,2015-03-03 17:15:43,https://api.github.com/repos/google/ExoPlayer/git/commits/b9addf28b2d7950b810cdfe6a50776d3a110bf71,b9addf28b2d7950b810cdfe6a50776d3a110bf71,Formatting tweaks for enhanced ID3 support + support in demo app.
ojw28,2015-03-03 17:14:48,https://api.github.com/repos/google/ExoPlayer/git/commits/0c6566bce7caba5c6920517160a89d06def33b92,0c6566bce7caba5c6920517160a89d06def33b92,"Add flags to DataSpec. Support GZIP option.

Also remove uriIsFullStream. It's not doing anything particularly
useful, so I think it makes sense to remove it from the public API;
it's unlikely anyone is using it.

Issue: #329"
ojw28,2015-03-03 17:11:21,https://api.github.com/repos/google/ExoPlayer/git/commits/3868b1d4cbd67677924f5831b95669c0cd8929eb,3868b1d4cbd67677924f5831b95669c0cd8929eb,"Clean up media playlist blacklisting / fix nits.

It seems fairly safe to assume a playlist wont be blacklisted
within 1ms of the device booting :)."
andudo,2015-03-03 05:23:59,https://api.github.com/repos/google/ExoPlayer/git/commits/2bb2e2c44f6921d15fae3788472fc58fbf7d233a,2bb2e2c44f6921d15fae3788472fc58fbf7d233a,"Merge pull request #324 from jeoliva/id3

Add support for GEOB and PRIV ID3 frames."
jeoliva,2015-02-27 23:47:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b03c8a713b4d94a135b2c487223e043afd40724d,b03c8a713b4d94a135b2c487223e043afd40724d,"Mime type string always finish with a single 0 byte

Mime type string always finish with a single 0 byte"
jeoliva,2015-02-27 21:09:05,https://api.github.com/repos/google/ExoPlayer/git/commits/88475e4feedc68107779e44f135746086044538e,88475e4feedc68107779e44f135746086044538e,"Fixed issue in the calculation of size of objectData

- Fixed issue in the calculation of size of objectData
- Indentation fixes"
tresvecesseis,2015-02-27 13:29:21,https://api.github.com/repos/google/ExoPlayer/git/commits/2ce938d650195ca7c5cb0327673145550ad875a4,2ce938d650195ca7c5cb0327673145550ad875a4,Added MPEG audio support to TsExtractor v.2
jeoliva,2015-02-27 10:02:37,https://api.github.com/repos/google/ExoPlayer/git/commits/1739af685a2b2cca76c253dc9c4733db9b3a1e43,1739af685a2b2cca76c253dc9c4733db9b3a1e43,"Removed indexOfNot method

Removed the unused method indexOfNot"
jeoliva,2015-02-27 09:57:43,https://api.github.com/repos/google/ExoPlayer/git/commits/f33cdd97e6d9ce92073ca46ac77d1481bce89b47,f33cdd97e6d9ce92073ca46ac77d1481bce89b47,"Fixed an issue when looking for termination string in UTF-16 and UTF-16BE

Modified parse method to take into account different lengths for the
termination character (1 for UTF-8 and ISO-8859-1; 2 for UTF-16 and
UTF-16BE)."
jeoliva,2015-02-26 20:54:29,https://api.github.com/repos/google/ExoPlayer/git/commits/c135bb7a57414ef77e5effee98a400cbb7eba738,c135bb7a57414ef77e5effee98a400cbb7eba738,"Fixes for correctly supporting UTF-16 and UTF-16BE charsets

For fields encoded using UTF-16 or UTF-16BE charsets when looking for
termination character we have to look for two zero consecutive bytes.

Otherwise, as many characters encoded with UTF-16 or UTF-16BE has one
of their 2 bytes set with the value zero, we will be truncating text
fields."
tresvecesseis,2015-02-26 18:12:58,https://api.github.com/repos/google/ExoPlayer/git/commits/1545a052f0899ac657c3a5d8dccb280848684793,1545a052f0899ac657c3a5d8dccb280848684793,Added MPEG audio support to TsExtractor
jeoliva,2015-02-26 15:49:05,https://api.github.com/repos/google/ExoPlayer/git/commits/ebbd022a524677d3623ab37281c3d7476f66f64d,ebbd022a524677d3623ab37281c3d7476f66f64d,"Added new ID3 frames

- Added support for ID3 frames of types GEOB and PRIV.

 - GEOB type is commonly used by dynamic ads provider to include in the
stream information about the ads to be played.
 - PRIV type is commonly used for time synchronization (example:
synchronizing playback of a live stream and its webvtt captions) and
also by analytics companies to include tracking information in the
stream.

- Added a sample stream from Apple that contains ID3 metadata."
ojw28,2015-02-25 14:33:26,https://api.github.com/repos/google/ExoPlayer/git/commits/ea95db2375c552ef4f19fc7bfaa39ebf11d7d27c,ea95db2375c552ef4f19fc7bfaa39ebf11d7d27c,"Merge pull request #316 from jeoliva/blackplaylist_management

Better management of blacklisted playlists"
ojw28,2015-02-25 14:13:04,https://api.github.com/repos/google/ExoPlayer/git/commits/07855aadcf4b9aedee9cf3477366ef1aabbfda89,07855aadcf4b9aedee9cf3477366ef1aabbfda89,Fix build after pull from dev
ojw28,2015-02-25 14:04:48,https://api.github.com/repos/google/ExoPlayer/git/commits/7f70db976570adb68d48760d34267beb6c088c09,7f70db976570adb68d48760d34267beb6c088c09,"Merge pull request #321 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-02-25 13:39:15,https://api.github.com/repos/google/ExoPlayer/git/commits/006986cc58bae6758cd75ea7bc21a0da4eae9646,006986cc58bae6758cd75ea7bc21a0da4eae9646,"Make NetworkLoadable use an injected HttpDataSource.

Note: I'm fairly confident that NetworkLoadable.Parser implementations
can live without the inputEncoding being specified. But not completely
100%...

Issue: #311
Issue: #56"
ojw28,2015-02-25 13:34:31,https://api.github.com/repos/google/ExoPlayer/git/commits/2ce17b601fa5b46f9c9d63a93d123676a06ea853,2ce17b601fa5b46f9c9d63a93d123676a06ea853,"Correctly bound search into segment indices.

The return value here assumed that the time being searched for
was beyond the start time of the last segment. This fix also
handles the case where the time is prior to the start of the
first segment."
ojw28,2015-02-25 12:09:06,https://api.github.com/repos/google/ExoPlayer/git/commits/d2da3bbf8a2dd5af202c89f2817ab1daa14ae613,d2da3bbf8a2dd5af202c89f2817ab1daa14ae613,"Simplify NetworkLoader/Parser/ManifestParser

The only downside of this change is that MediaPresentationDescriptionParser
is no longer stateless."
ojw28,2015-02-25 11:48:55,https://api.github.com/repos/google/ExoPlayer/git/commits/0fdcb3347c3cec744c145489ad827f921a08c738,0fdcb3347c3cec744c145489ad827f921a08c738,"continueBuffering should return true when ended.

This issue didn't have any material impact on playbacks, but
fixing it anyway to be technically correct."
ojw28,2015-02-25 11:37:39,https://api.github.com/repos/google/ExoPlayer/git/commits/d6ebd49c6320f058afa7ceda3cd135e86131d6c8,d6ebd49c6320f058afa7ceda3cd135e86131d6c8,"Two small fixes for HLS.

1. Clear prefixFlags when a NAL unit is found.
2. continueBuffering should return true if loading is finished."
jeoliva,2015-02-23 21:42:53,https://api.github.com/repos/google/ExoPlayer/git/commits/2ac7046ffcba342f5f176563b5a1287eb217995f,2ac7046ffcba342f5f176563b5a1287eb217995f,"Clear stale blacklisted playlist when getting next variant index

Calling clearStaleBlacklistedPlaylist within getNextVariantIndex method."
jeoliva,2015-02-23 19:40:37,https://api.github.com/repos/google/ExoPlayer/git/commits/4fe62b9b0a31f95c3b5ca43e277544caa0b440e9,4fe62b9b0a31f95c3b5ca43e277544caa0b440e9,"Clear stale blacklist in getChunkOperation

Clear stale blacklist in getChunkOperation before getting next variant.
This ensures:
1.- Player resilience to failures, always trying to look for a working
playlist that allows player to non stop playback.
2.- High quality blacklisted playlists can be reused in case they go up
after a failure. Player always trying to provide the best user
experience."
jeoliva,2015-02-23 19:06:49,https://api.github.com/repos/google/ExoPlayer/git/commits/f8a9da90e81dde23fb8ee97c7b435d2da0f9eee0,f8a9da90e81dde23fb8ee97c7b435d2da0f9eee0,"Renaming methods and code formating

- Method evaluatePlayListBlackListedTimestamps renamed to
clearStaleBlacklistedPlaylists
- Code formatted to be consistent with style elsewhere."
jeoliva,2015-02-23 14:14:09,https://api.github.com/repos/google/ExoPlayer/git/commits/20a40f5d113cfdfe84aadc111395a6dfcb28f216,20a40f5d113cfdfe84aadc111395a6dfcb28f216,"Better management of blacklisted playlists

Added an expiration time field to playlists blacklisted to allow
Exoplayer to continue playback when playlists that failed were
recovered from a bad state.

In live environments, some times occur that primary encoder stop
working for a while. In that cases, HLS failover mechanism in the
player should detect the situation and switch to playlists served by
the backup encoder (in case a backup encoder exists). This was well
managed before these changes.

However, and to ensure a playback experience that can recover itself
from temporary issues, we cannot blacklist a playlist forever. When
streaming live events using HLS, it is quite typical that the player
needs to switch from primary to backup playlists, and from backup to
primary ones, from time to time to have playback working when temporary
issues in the network/encoder are happening. Most of the issues are
recoverable, so what I have implemented is a mechanism that makes
blacklisted playlist to be available again after a while (60 seconds).

Evaluation of this algorithm should happen just when something fails.
If player is working with a backup playlist, it shouldnt switch to the
primary one at least something fail."
ojw28,2015-02-20 15:18:28,https://api.github.com/repos/google/ExoPlayer/git/commits/430d06d467e7d570d4ac0b487a412f097372afe9,430d06d467e7d570d4ac0b487a412f097372afe9,"Merge pull request #313 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-02-20 15:10:25,https://api.github.com/repos/google/ExoPlayer/git/commits/6d14fc3330fe1ad47970e6ba8e7dbf036a22bbfb,6d14fc3330fe1ad47970e6ba8e7dbf036a22bbfb,"Implement UTC time synchronization for DASH Live.

Support is provided for the following schemes:

urn:mpeg:dash:utc:direct:2012
urn:mpeg:dash:utc:http-iso:2014
urn:mpeg:dash:utc:http-xsdate:2012
urn:mpeg:dash:utc:http-xsdate:2014"
ojw28,2015-02-20 15:07:22,https://api.github.com/repos/google/ExoPlayer/git/commits/4076b08e4bc5b261aba6e8f514af063a64b9ae23,4076b08e4bc5b261aba6e8f514af063a64b9ae23,Naming tweak
ojw28,2015-02-19 11:32:27,https://api.github.com/repos/google/ExoPlayer/git/commits/654d37fe290eac770300c066500362d914a7f2fd,654d37fe290eac770300c066500362d914a7f2fd,"Merge pull request #310 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-02-19 11:22:42,https://api.github.com/repos/google/ExoPlayer/git/commits/b5100886896ad35a32e6105a9d005c3209a81a9b,b5100886896ad35a32e6105a9d005c3209a81a9b,"Fix EIA-608 issues.

- Data needs to be unescaped before it's passed to SeiReader.
- SeiReader should loop over potentially multiple child messages.
- I also changed the sample passed to the EIA-608 renderer so that
  it's the entire sei message payload. The first 8 bytes are
  unnecessary, but it seems nicer conceptually to do it this way.

Issue: #295"
ojw28,2015-02-19 10:59:50,https://api.github.com/repos/google/ExoPlayer/git/commits/00ec7ef0c14ec41545f3a873b7e7c6c30b419050,00ec7ef0c14ec41545f3a873b7e7c6c30b419050,"Merge pull request #307 from jeoliva/issue_codec_regex

Issue with regular expression for CODEC attribute"
jeoliva,2015-02-19 00:17:35,https://api.github.com/repos/google/ExoPlayer/git/commits/e84bce61304dbfc639d2447deafbfcdcb37269b9,e84bce61304dbfc639d2447deafbfcdcb37269b9,"Fixed issue in CODEC regular expression

Previous regular expression for extracting codec information was wrong,
given a line that defines a variant it added information from CODEC=
text to the end of the line (including also information about
RESOLUTION or alternate rendition groups as part of the CODEC field).

This is not causing a functional problem (at least known by me)
although is making codecs field storing information that is not related
with the codec."
ojw28,2015-02-18 23:42:42,https://api.github.com/repos/google/ExoPlayer/git/commits/f6a0cb963b68f7b36649ee7ead9c24d55b22f5f9,f6a0cb963b68f7b36649ee7ead9c24d55b22f5f9,Update CONTRIBUTING.md
ojw28,2015-02-18 23:39:10,https://api.github.com/repos/google/ExoPlayer/git/commits/1649aa63813f66cabc4c7b293ba7868c9e68fbcf,1649aa63813f66cabc4c7b293ba7868c9e68fbcf,Update CONTRIBUTING.md
ojw28,2015-02-18 19:11:52,https://api.github.com/repos/google/ExoPlayer/git/commits/abac6b7dd6662bb4893566a4a04bf9804ee0599d,abac6b7dd6662bb4893566a4a04bf9804ee0599d,Fix off-by-one-bug preventing NAL unit detection at the limit.
ojw28,2015-02-18 15:15:20,https://api.github.com/repos/google/ExoPlayer/git/commits/b03c5c5753810a6d0076374f69aa8744059dd3e8,b03c5c5753810a6d0076374f69aa8744059dd3e8,"Ensure we always seek after selecting a track.

Some extractor implementations underneath MediaExtractor require a seekTo
call after tracks are selected to ensure samples are read from the correct
position. De-duplicating logic was preventing this from happening in some
cases, causing issues like:

https://github.com/google/ExoPlayer/issues/301

Note that seeking all tracks a side effect of track selection sucks if
you already have one or more tracks selected, because it introduces
discontinuities to the already selected tracks. However, in general, it
*is* necessary to specify the position for the track being selected,
because the underlying extractor doesn't have enough information to know
where to start reading from. It can't determine this based on the read
positions of the already selected tracks, because the samples in these
tracks might be very sparse with respect to time.

I think a more optimal fix would be to change the SampleExtractor
interface to receive the current position as an argument to selectTrack.
For our own extractors, we'd seek the newly selected track to that
position, whilst the already enabled tracks would be left in their
current positions (if possible). For FrameworkSampleExtractor we'd
still have no choice but to call seekTo on the extractor to seek all
of the tracks. This solution ends up being more complex though, because:

- The SampleExtractor then needs a way of telling DefaultSampleSource
  which tracks were actually seeked, so that the pendingDiscontinuities
  flags can be set correctly.
- It's a weird API that requires the ""current playback position to seek
  only the track being enabled""

So it may not be worth it! I think this fix is definitely good for now,
in any case.

Issue: #301"
ojw28,2015-02-18 15:09:45,https://api.github.com/repos/google/ExoPlayer/git/commits/cc7a15b79b84673fddc2f711342b687002f66dc0,cc7a15b79b84673fddc2f711342b687002f66dc0,Fix bad assertion
ojw28,2015-02-17 16:04:44,https://api.github.com/repos/google/ExoPlayer/git/commits/526c64294a77a36ef543c6b48718794ab389c592,526c64294a77a36ef543c6b48718794ab389c592,"Handle the edge case of zero-length chunks.

Issue: #289"
ojw28,2015-02-17 15:41:59,https://api.github.com/repos/google/ExoPlayer/git/commits/a1e196fe200629b096a9b85f3927cdd72a7428d7,a1e196fe200629b096a9b85f3927cdd72a7428d7,"Add support for elementary AAC/ADTS streams.

- This change:

1. Extracts HlsExtractor interface from TsExtractor.
2. Adds AdtsExtractor for AAC/ADTS streams, which turned out to be
   really easy.

Selection of the ADTS extractor relies on seeing the .aac extension.
This is at least guaranteed not to break anything that works already
(since no-one is going to be using .aac as the extension for something
that's not elementary AAC/ADTS).

Issue: #209"
ojw28,2015-02-16 22:30:28,https://api.github.com/repos/google/ExoPlayer/git/commits/b46d1fc7cc2516cc29c629954ed0d69364098d97,b46d1fc7cc2516cc29c629954ed0d69364098d97,Bump dev version to 1.3.x
ojw28,2015-02-16 22:22:25,https://api.github.com/repos/google/ExoPlayer/git/commits/3472e86c369e114cf8b9e1b03a55193816e11284,3472e86c369e114cf8b9e1b03a55193816e11284,Correctly reset ADTSreader state
ojw28,2015-02-13 20:38:09,https://api.github.com/repos/google/ExoPlayer/git/commits/8f0d576fedd80826b1f38e614080671946fbb48a,8f0d576fedd80826b1f38e614080671946fbb48a,"Merge pull request #293 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-02-13 20:36:27,https://api.github.com/repos/google/ExoPlayer/git/commits/40411269daef787f52cab19b5c0bdb884faefd4d,40411269daef787f52cab19b5c0bdb884faefd4d,Use C.SAMPLE_FLAG_SYNC
ojw28,2015-02-13 20:34:30,https://api.github.com/repos/google/ExoPlayer/git/commits/9d480ecd204cfd2cd3585c28765f420e7384c162,9d480ecd204cfd2cd3585c28765f420e7384c162,Fix broken javadoc link
ojw28,2015-02-13 20:20:45,https://api.github.com/repos/google/ExoPlayer/git/commits/bc99435b4855bf3d776005de6e81e9f13e1f8f8d,bc99435b4855bf3d776005de6e81e9f13e1f8f8d,Add C.SAMPLE_FLAG_SYNC and removed InlinedApi suppression in a few places.
ojw28,2015-02-13 20:13:11,https://api.github.com/repos/google/ExoPlayer/git/commits/5f64a1fde75824331c9c9294b7116eb2bb5f033a,5f64a1fde75824331c9c9294b7116eb2bb5f033a,"Restrict HLS buffering by total buffer size as well as duration.

This prevents excessive memory consumption when switching to
very high bitrate streams.

Issue: #278"
ojw28,2015-02-13 20:11:12,https://api.github.com/repos/google/ExoPlayer/git/commits/c3788c0931da5c63ac1dcca5b81f0303ae30323e,c3788c0931da5c63ac1dcca5b81f0303ae30323e,"Eliminate memory copy of H264 data through H264 reader.

I think this is the limit of how far we should be pushing complexity
v.s. efficiency. It's a little complicated to understand, but probably
worth it since the H264 bitstream is the majority of the data.

Issue: #278"
ojw28,2015-02-13 19:32:01,https://api.github.com/repos/google/ExoPlayer/git/commits/37e6946cd9f4abddebba3a945811d70aa00fad02,37e6946cd9f4abddebba3a945811d70aa00fad02,"Finally - Remove Sample, fix GC churn + inefficient memory usage.

Use of Sample objects was inefficient for several reasons:

- Lots of objects (1 per sample, obviously).
- When switching up bitrates, there was a tendency for all Sample
  instances to need to expand, which effectively led to our whole
  media buffer being GC'd as each Sample discarded its byte[] to
  obtain a larger one.
- When a keyframe was encountered, the Sample would typically need
  to expand to accommodate it. Over time, this would lead to a
  gradual increase in the population of Samples that were sized to
  accommodate keyframes. These Sample instances were then typically
  underutilized whenever recycled to hold a non-keyframe, leading
  to inefficient memory usage.

This CL introduces RollingBuffer, which tightly packs pending sample
data into a byte[]s obtained from an underlying BufferPool. Which
fixes all of the above. There is still an issue where the total
memory allocation may grow when switching up bitrate, but we can
easily fix that from this point, if we choose to restrict the buffer
based on allocation size rather than time.

Issue: #278"
ojw28,2015-02-13 19:31:01,https://api.github.com/repos/google/ExoPlayer/git/commits/28166d8c0d34441ee000d624dbd86672c9810d37,28166d8c0d34441ee000d624dbd86672c9810d37,Rename ParsableByteArray.length() to limit(). Add capacity().
ojw28,2015-02-13 19:27:52,https://api.github.com/repos/google/ExoPlayer/git/commits/321005e4b1be588366413c7537a008e066beb3b2,321005e4b1be588366413c7537a008e066beb3b2,Use 'bitrate' not 'bit-rate' consistently.
ojw28,2015-02-13 19:26:49,https://api.github.com/repos/google/ExoPlayer/git/commits/d1360ad7d2769e0eb0c511ca93ccd58919556e8d,d1360ad7d2769e0eb0c511ca93ccd58919556e8d,"Pragmatic fix for ""stuck-in-ready-state"" when seeking near the
end of some streams."
ojw28,2015-02-12 17:24:23,https://api.github.com/repos/google/ExoPlayer/git/commits/066334dad7f82a9e954b0ee7efd0bb0d742987b8,066334dad7f82a9e954b0ee7efd0bb0d742987b8,"Continue TsExtractor refactor.

- Remove TsExtractor's knowledge of Sample.
- Push handling of Sample objects into SampleQueue as much
  as possible. This is a precursor to replacing Sample objects
  with a different type of backing memory. Ideally, the
  individual readers shouldn't know how the sample data is
  stored. This is true after this CL, with the except of the
  TODO in H264Reader.
- Avoid double-scanning every H264 sample for NAL units, by
  moving the scan for SEI units from SeiReader into H264Reader.

Issue: #278"
ojw28,2015-02-12 17:02:34,https://api.github.com/repos/google/ExoPlayer/git/commits/61a86295fd3c798e24083acd228d11f832770b68,61a86295fd3c798e24083acd228d11f832770b68,"Fix for video-only playbacks transitioning straight to STATE_ENDED.

The complexity around not enabling the video renderer before it
has a valid surface is because MediaCodecTrackRenderer supports
a ""discard"" mode where it pulls through and discards samples
without a decoder. This mode means that if the demo app were to
enable the renderer before supplying the surface, the renderer
could discard the first few frames prior to getting the surface,
meaning video rendering wouldn't happen until the following sync
frame.

To get a handle on complexity, I think we're better off just removing
support for this mode, which nicely decouples how the demo app
handles surfaces v.s. how it handles enabling/disabling renderers."
ojw28,2015-02-12 12:48:27,https://api.github.com/repos/google/ExoPlayer/git/commits/784431f3e08099a4f22a130eb2a3f2e1b054879d,784431f3e08099a4f22a130eb2a3f2e1b054879d,"Move EIA reordering back to the renderer (sorry for churn).

Reordering in the extractor isn't going to work well with the
optimizations I'm making there. This change moves sorting back
to the renderer, although keeps all of the renderer
simplifications. It's basically just moving where the sort
happens from one place to another."
ojw28,2015-02-12 12:46:58,https://api.github.com/repos/google/ExoPlayer/git/commits/f7fb4d4c358b86a2ab031b4a5852f0ba8bcb3128,f7fb4d4c358b86a2ab031b4a5852f0ba8bcb3128,"Optimize NAL unit search.

I'm not really a fan of micro-optimizations, but given this method
scans through every H264 frame in the HLS case, it seems worthwhile.
The trick here is to examine the first 7 bits of the third byte
first. If they're not all 0s, then we know that we haven't found a
NAL unit, and also that we wont find one at the next two positions.
This allows the loop to increment 3 bytes at a time.

Speedup is around 60% on Art according to some ad-hoc benchmarking."
ojw28,2015-02-12 12:09:57,https://api.github.com/repos/google/ExoPlayer/git/commits/3568ecaf001a792441e36fca22b784ee1463deb3,3568ecaf001a792441e36fca22b784ee1463deb3,"Split TsExtractor into multiple files.

There's no code change here at all, except for how TsExtractor's
getLargestSampleTimestamp method works."
ojw28,2015-02-11 14:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/92f085bc5823243ca0b8f136283256fc5a188737,92f085bc5823243ca0b8f136283256fc5a188737,"Remove intermediate copy steps in TsExtractor.

1. AdtsReader would previously copy all data through an intermediate
adtsBuffer. This change eliminates the additional copy step, and
instead copies directly into Sample objects.

2. PesReader would previously accumulate a whole packet by copying
multiple TS packets into an intermediate buffer. This change
eliminates this copy step. After the change, TS packet buffers
are propagated directly to PesPayloadReaders, which are required
to handle partial payload data correctly. The copy steps in the
extractor are simplified from:

DataSource->Ts_BitArray->Pes_BitArray->Sample->SampleHolder

To:

DataSource->Ts_BitArray->Sample->SampleHolder

Issue: #278"
ojw28,2015-02-10 22:13:01,https://api.github.com/repos/google/ExoPlayer/git/commits/797fa7f872a3e61d20e9dabd486078f889795793,797fa7f872a3e61d20e9dabd486078f889795793,"Make TsExtractor use ParsableByteArray where possible.

- TsExtractor is now based on ParsableByteArray rather than BitArray.
  This makes is much clearer that, for the most part, data is byte
  aligned. It will allow us to optimize TsExtractor without worrying
  about arbitrary bit offsets.
- BitArray is renamed ParsableBitArray for consistency, and is now
  exclusively for bit-stream level reading.
- There are some temporary methods in ParsableByteArray that should be
  cleared up once the optimizations are in place.

Issue: #278"
ojw28,2015-02-10 12:25:13,https://api.github.com/repos/google/ExoPlayer/git/commits/7c66b6ed3b953adbe518203027d0ccba94e7cbc8,7c66b6ed3b953adbe518203027d0ccba94e7cbc8,"HLS optimization #1 (refactor).

This is the start of a sequence of changes to fix the ref'd
github issue. Currently TsExtractor involves multiple memory
copy steps:

DataSource->Ts_BitArray->Pes_BitArray->Sample->SampleHolder

This is inefficient, but more importantly, the copy into
Sample is problematic, because Samples are of dynamically
varying size. The way we end up expanding Sample objects to
be large enough to hold the data being written means that we
end up gradually expanding all Sample objects in the pool
(which wastes memory), and that we generate a lot of GC churn,
particularly when switching to a higher quality which can
trigger all Sample objects to expand.

The fix will be to reduce the copy steps to:

DataSource->TsPacket->SampleHolder

We will track Pes and Sample data with lists of pointers into
TsPackets, rather than actually copying the data. We will
recycle these pointers.

The following steps are approximately how the refactor will
progress:

1. Start reducing use of BitArray. It's going to be way too
complicated to track bit-granularity offsets into multiple packets,
and allow reading across packet boundaries. In practice reads
from Ts packets are all byte aligned except for small sections,
so we'll move over to using ParsableByteArray instead, so we
only need to track byte offsets.

2. Move TsExtractor to use ParsableByteArray except for small
sections where we really need bit-granularity offsets.

3. Do the actual optimization.

Issue: #278"
ojw28,2015-02-09 17:29:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ccac9fad4e61eae184b329b93e9ae2501cf79eb6,ccac9fad4e61eae184b329b93e9ae2501cf79eb6,"Merge pull request #287 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-02-09 17:28:07,https://api.github.com/repos/google/ExoPlayer/git/commits/b0a3c30a90039bad8d2364c6d214836d5d437c81,b0a3c30a90039bad8d2364c6d214836d5d437c81,"Improve EIA608 caption support.

- Also make text renderers respect the decodeOnly flag.
- Also fix AC3 passthrough to always allocate direct buffers."
ojw28,2015-02-09 17:25:39,https://api.github.com/repos/google/ExoPlayer/git/commits/32f0eb1278dacc1c78faf031a4a1db86ab617bac,32f0eb1278dacc1c78faf031a4a1db86ab617bac,Enhance mp4 parsing.
ojw28,2015-02-06 12:01:24,https://api.github.com/repos/google/ExoPlayer/git/commits/876fa41b431b41b62542ba5e97097292c80b0ab6,876fa41b431b41b62542ba5e97097292c80b0ab6,"Merge pull request #283 from google/dev

dev -> dev-webm-vp9-opus"
ojw28,2015-02-06 11:52:14,https://api.github.com/repos/google/ExoPlayer/git/commits/147bbe6d55370977dc8a92ac2e6fccfbf5a678ca,147bbe6d55370977dc8a92ac2e6fccfbf5a678ca,"Simplify demo application.

- Remove simple variant. Maintaining both simple + full is
  unnecessary effort.
- Remove need to specify content id in Sample definition,
  except where it's actually required (for DRM requests in
  the Widevine GTS samples)"
ojw28,2015-02-06 11:43:37,https://api.github.com/repos/google/ExoPlayer/git/commits/bfa1de68d8528af30d6863c82e059753c0f403d1,bfa1de68d8528af30d6863c82e059753c0f403d1,"Move common MP4 parsing code to CommonMp4AtomParsers and Mp4Util.

Also add parseMp4vFromParent and return the track's duration in parseTrak.

This is in preparation for adding a non-fragmented MP4 extractor."
ojw28,2015-02-06 11:32:46,https://api.github.com/repos/google/ExoPlayer/git/commits/a968e5535bd8b3d756f4a1de89354bf33a86d523,a968e5535bd8b3d756f4a1de89354bf33a86d523,"Continue playback of tracks with longer duration than the timesource.

If the timesource track renderer ends, but other track renderers
haven't finished, the player would get stuck in a pending state.
This change enables automatic switching to the media clock in the
case that the timesource renderer has ended, which allows other
renderers to continue to play."
ojw28,2015-02-06 11:32:08,https://api.github.com/repos/google/ExoPlayer/git/commits/03ef3d148f3007a1112fe4060850181945b80ca2,03ef3d148f3007a1112fe4060850181945b80ca2,Add MP4V mimetype.
ojw28,2015-02-06 11:31:13,https://api.github.com/repos/google/ExoPlayer/git/commits/fbf75e12636c05cfd794cd04e89ca0edd5cb1344,fbf75e12636c05cfd794cd04e89ca0edd5cb1344,Fix SubtitleView to redraw if text changes but bounds stay the same.
ojw28,2015-02-03 12:44:18,https://api.github.com/repos/google/ExoPlayer/git/commits/7505944497340585c627e2cc47eaf5ab15680454,7505944497340585c627e2cc47eaf5ab15680454,"Separate leaf/container children in ContainerAtom.

Add a utility for converting named atom types to integers.

Add atom types for non-fragmented MP4 parsing."
ojw28,2015-02-03 12:43:09,https://api.github.com/repos/google/ExoPlayer/git/commits/5bfc5f373be48ce782f980509c868e3942db27a0,5bfc5f373be48ce782f980509c868e3942db27a0,Bug fixes for ByteArrayDataSource.
ojw28,2015-02-03 12:41:49,https://api.github.com/repos/google/ExoPlayer/git/commits/0ef28abbec08c74a1598e03dc80d0073ea7a98a7,0ef28abbec08c74a1598e03dc80d0073ea7a98a7,"Modified Webvtt parser to handle cue identifiers and tags.

Issue: #268"
vigneshvg,2015-02-02 21:31:31,https://api.github.com/repos/google/ExoPlayer/git/commits/3338a09c70ad8dbf2d771117cd4c6c02a0e189bb,3338a09c70ad8dbf2d771117cd4c6c02a0e189bb,Update .gitignore to ignore VP9/Opus specific files.
vigneshvg,2015-02-02 21:26:52,https://api.github.com/repos/google/ExoPlayer/git/commits/10070a2d93c702a335986622096269268e9ab348,10070a2d93c702a335986622096269268e9ab348,"Add demo app for WebM Native Extensions

Add a demo app that can be used as a reference for how to use the native VP9 and
Opus Extensions."
vigneshvg,2015-02-02 21:25:46,https://api.github.com/repos/google/ExoPlayer/git/commits/7113d2ab6f9d35bca224c78022de2a0397def56d,7113d2ab6f9d35bca224c78022de2a0397def56d,"Add Opus Native Extension

Add Opus Native Extension that can be used to playback Opus using the native
libopus library."
vigneshvg,2015-02-02 21:24:24,https://api.github.com/repos/google/ExoPlayer/git/commits/dd726001a8c8754f0d20f8703cd281c678152eca,dd726001a8c8754f0d20f8703cd281c678152eca,"Add VP9 Native Extension

Add VP9 Native Extension that can be used to playback VP9 using the native
libvpx library."
ojw28,2015-02-02 19:54:56,https://api.github.com/repos/google/ExoPlayer/git/commits/c1a2f3d0c2141235f230378c9cd4c26a88da4568,c1a2f3d0c2141235f230378c9cd4c26a88da4568,Add AOSP header.
ojw28,2015-02-02 19:51:37,https://api.github.com/repos/google/ExoPlayer/git/commits/7b9b7c6e3b69831a1a8826ce49efc860e048b74d,7b9b7c6e3b69831a1a8826ce49efc860e048b74d,"Handle non-indexed representations.

These may occur in VOD streams where a representation's data
is small enough not to require segmentation or an index. For
example subtitle files.

Issue: #268"
ojw28,2015-02-02 14:59:30,https://api.github.com/repos/google/ExoPlayer/git/commits/d1fe33cdf81a810f69cc5e87dd766c62e251acd8,d1fe33cdf81a810f69cc5e87dd766c62e251acd8,"Add DefaultSampleSource and SampleExtractor interface.

SampleExtractor will initially only be implemented by FrameworkSampleExtractor
which delegates to a MediaExtractor, but eventually it will also be implemented
by additional extractors.

The sample extractor can be used as a source of samples via DefaultSampleSource."
ojw28,2015-02-02 14:56:33,https://api.github.com/repos/google/ExoPlayer/git/commits/6f3ccc3615584b1a3b2290ae05c587b8219e6de4,6f3ccc3615584b1a3b2290ae05c587b8219e6de4,"Handle byte-order-mark prefix to WebVTT file.

Issue: #268"
martinbonnin,2015-01-27 17:37:27,https://api.github.com/repos/google/ExoPlayer/git/commits/e33e1d79227913b2b234364f53c946679af50722,e33e1d79227913b2b234364f53c946679af50722,cleaner test
martinbonnin,2015-01-27 17:35:40,https://api.github.com/repos/google/ExoPlayer/git/commits/c228017fe4a4b2024c2a2515d785876e0fe43482,c228017fe4a4b2024c2a2515d785876e0fe43482,rename hasQueuedOneInputBuffer to hasQueuedInputBuffer
ojw28,2015-01-27 17:00:46,https://api.github.com/repos/google/ExoPlayer/git/commits/ed0b02d09bacdf809f6ef2960f6a0c9c5927c2fb,ed0b02d09bacdf809f6ef2960f6a0c9c5927c2fb,"Package restructuring to accommodate incoming features (sorry).

This may be painful in terms of applications having to change their
imports. Sorry about that."
andudo,2015-01-27 16:48:15,https://api.github.com/repos/google/ExoPlayer/git/commits/27c0e7d77611af6074b7d008d255090d3f064474,27c0e7d77611af6074b7d008d255090d3f064474,"Merge pull request #267 from google/dev-hls

Merge dev-hls -> dev"
ojw28,2015-01-27 15:12:33,https://api.github.com/repos/google/ExoPlayer/git/commits/b7be7bc01b96f63be3892750ce0bc204e7100eb3,b7be7bc01b96f63be3892750ce0bc204e7100eb3,Fix handling of PTS wraparound.
ojw28,2015-01-27 15:11:44,https://api.github.com/repos/google/ExoPlayer/git/commits/ee83468084f9fb1b53e6063481a0dff484e88922,ee83468084f9fb1b53e6063481a0dff484e88922,Blacklist playlists that 404/410.
ojw28,2015-01-27 15:10:34,https://api.github.com/repos/google/ExoPlayer/git/commits/c6c6f2d83ea2664dbf297e930660d37285020a1f,c6c6f2d83ea2664dbf297e930660d37285020a1f,"Merge pull request #266 from google/dev

dev -> dev-hls"
martinbonnin,2015-01-27 09:44:02,https://api.github.com/repos/google/ExoPlayer/git/commits/424b29f996fd5211625ff407689ddb337b6e05a1,424b29f996fd5211625ff407689ddb337b6e05a1,"remove REINIT_STATE_DO_REINIT_NOW state, reinit directly when needed."
ojw28,2015-01-26 16:18:41,https://api.github.com/repos/google/ExoPlayer/git/commits/ce2f681bd342f3d84479ce625efceaafb3c216cc,ce2f681bd342f3d84479ce625efceaafb3c216cc,Add directories for extensions + additional demos
ojw28,2015-01-26 15:18:27,https://api.github.com/repos/google/ExoPlayer/git/commits/db5cc21c338b0a44c67e569444ed30af660f5698,db5cc21c338b0a44c67e569444ed30af660f5698,Revert test
ojw28,2015-01-26 15:12:17,https://api.github.com/repos/google/ExoPlayer/git/commits/fda8f6d35a784068918429d4da5b155b3fa9a1f9,fda8f6d35a784068918429d4da5b155b3fa9a1f9,Test
ojw28,2015-01-26 15:01:25,https://api.github.com/repos/google/ExoPlayer/git/commits/7b41741db0b03f5e78291e62df2268a9ba32871c,7b41741db0b03f5e78291e62df2268a9ba32871c,Revert test.
ojw28,2015-01-26 15:01:00,https://api.github.com/repos/google/ExoPlayer/git/commits/76f44eeb137330497820bcc485b5fd905d231311,76f44eeb137330497820bcc485b5fd905d231311,Test.
ojw28,2015-01-26 14:49:33,https://api.github.com/repos/google/ExoPlayer/git/commits/f1a7784eb1f74781fe761dd9416aa2b0eeccdf5c,f1a7784eb1f74781fe761dd9416aa2b0eeccdf5c,"Fix DASH Live edge calculation.

Also added clamping to getSegmentNum in one case where
it was not already implemented, and defined this behavior
property in the getSegmentNum javadoc.

Issue: #262"
ojw28,2015-01-26 14:08:38,https://api.github.com/repos/google/ExoPlayer/git/commits/a64df69f8553c64d1e5b421cad81af292cc9ca7b,a64df69f8553c64d1e5b421cad81af292cc9ca7b,"Refine last segment calculation.

This makes the calculation correct for the case where periodDurationMs
does not divide exactly into durationMs."
ojw28,2015-01-26 14:08:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e5381811125a0f7d874dfff763ee7ec4c1e84660,e5381811125a0f7d874dfff763ee7ec4c1e84660,"Merge pull request #264 from IhorZak/dev

Fixed wrong calculation of last segment number when using segment templa..."
IhorZak,2015-01-25 16:47:16,https://api.github.com/repos/google/ExoPlayer/git/commits/1a363849e26553cb6bcfd1297b7a2feffadd16f8,1a363849e26553cb6bcfd1297b7a2feffadd16f8,Fixed wrong calculation of last segment number when using segment template without segment timeline.
ojw28,2015-01-23 22:32:21,https://api.github.com/repos/google/ExoPlayer/git/commits/95341440da54151411e727ddc1693220d2b39b18,95341440da54151411e727ddc1693220d2b39b18,"Merge pull request #263 from google/dev

dev -> dev-hls"
ojw28,2015-01-23 22:25:39,https://api.github.com/repos/google/ExoPlayer/git/commits/14d1317ce0c629d300f0e69ea7777e3507bbb517,14d1317ce0c629d300f0e69ea7777e3507bbb517,Replace tabs with spaces.
ojw28,2015-01-23 22:23:59,https://api.github.com/repos/google/ExoPlayer/git/commits/4f65e94e93bab3ac590d1d7c84786c8879b0c2ca,4f65e94e93bab3ac590d1d7c84786c8879b0c2ca,Add Javadoc to ParsableByteArray.
ojw28,2015-01-23 22:18:54,https://api.github.com/repos/google/ExoPlayer/git/commits/59b04df4c38092b6633abc5df3b1c330af63bbb6,59b04df4c38092b6633abc5df3b1c330af63bbb6,Fix incorrect max height calculation.
ojw28,2015-01-23 16:09:27,https://api.github.com/repos/google/ExoPlayer/git/commits/06ddb036c844c3373135100ce8367df2a713df51,06ddb036c844c3373135100ce8367df2a713df51,"Merge pull request #260 from mine260309/dev-hls

Fix a signed right shift issue in BitArray.readUnsignedByte()"
mine260309,2015-01-23 15:52:46,https://api.github.com/repos/google/ExoPlayer/git/commits/80602b16846da1c7a9e9df1b5eb051adb8498dfc,80602b16846da1c7a9e9df1b5eb051adb8498dfc,Make BitArray.readUnsignedByte() a bit more clear by using int value instead of byte to prevent unnecessary convert from int to byte.
mine260309,2015-01-23 08:44:23,https://api.github.com/repos/google/ExoPlayer/git/commits/a9b2120fc961215ad09f3e52578964ae27caccde,a9b2120fc961215ad09f3e52578964ae27caccde,"Fix an issue in BitArray.readUnsignedByte() returns incorrect value when bitOffset is not zero and data[byteOffset + 1] starts with bit 1.
This is caused by signed right shift, the fix is simply to make it unsigned right shift."
andudo,2015-01-22 17:53:33,https://api.github.com/repos/google/ExoPlayer/git/commits/b30f55f1470d49e47ce3e4fa79a15c77beb6b22a,b30f55f1470d49e47ce3e4fa79a15c77beb6b22a,Process only type == 0 captions. #156
martinbonnin,2015-01-22 09:24:51,https://api.github.com/repos/google/ExoPlayer/git/commits/79708f43f8d9665a3c984e618899e3b12eff8f9b,79708f43f8d9665a3c984e618899e3b12eff8f9b,handle the case when flushCodec() is called while reiniting the decoders
ojw28,2015-01-21 23:52:31,https://api.github.com/repos/google/ExoPlayer/git/commits/ef396933f8f1c20e0b9f43a01fdd5bfe5470748d,ef396933f8f1c20e0b9f43a01fdd5bfe5470748d,"Merge pull request #255 from google/dev

dev -> dev-hls"
ojw28,2015-01-21 17:06:10,https://api.github.com/repos/google/ExoPlayer/git/commits/5941882df021e62e6bedc354c0b71f3eeb81ed34,5941882df021e62e6bedc354c0b71f3eeb81ed34,"Merge pull request #254 from SongArc/dev

FrameworkSampleSource with FileDescriptor"
andudo,2015-01-21 16:54:23,https://api.github.com/repos/google/ExoPlayer/git/commits/4158ede6e312ae718f165b1b48c952189d67b27a,4158ede6e312ae718f165b1b48c952189d67b27a,Move Closed Captions processing to Eia608TrackRenderer. Use TextRenderer interface for captions. Sort captions based on video frames DTS. Add better control characters and special characters in basic North American character set support. Fixes #156
Nezz,2015-01-21 16:44:48,https://api.github.com/repos/google/ExoPlayer/git/commits/8547f0c05d6911efae35aa3b2dfb61600f698995,8547f0c05d6911efae35aa3b2dfb61600f698995,Replaced tabs with spaces
Nezz,2015-01-21 01:44:21,https://api.github.com/repos/google/ExoPlayer/git/commits/796e5bc7d64af7d59c0b48dd9b257c9f1d990b76,796e5bc7d64af7d59c0b48dd9b257c9f1d990b76,FrameworkSampleSource with FileDescriptor #246
ojw28,2015-01-12 17:44:42,https://api.github.com/repos/google/ExoPlayer/git/commits/fe43377104de176286a57ae05e399a32c55ac838,fe43377104de176286a57ae05e399a32c55ac838,Increase retry count to 3
ojw28,2015-01-12 17:43:44,https://api.github.com/repos/google/ExoPlayer/git/commits/06e9e5d3eac6c73db8a3431b2e591f6ec61c54be,06e9e5d3eac6c73db8a3431b2e591f6ec61c54be,"Merge pull request #234 from google/dev

dev -> dev-hls"
ojw28,2015-01-12 17:40:55,https://api.github.com/repos/google/ExoPlayer/git/commits/a879819dd31754782348f95cf64ec15629c9bb29,a879819dd31754782348f95cf64ec15629c9bb29,"Force callers into MediaCodecUtil to catch any exceptions that occur.

Issue: #217
Issue: #228"
ojw28,2015-01-12 17:38:21,https://api.github.com/repos/google/ExoPlayer/git/commits/286365ada86e89dc6f71bff3314cdad00555327a,286365ada86e89dc6f71bff3314cdad00555327a,Use Long.SIZE.
ojw28,2015-01-12 17:37:25,https://api.github.com/repos/google/ExoPlayer/git/commits/3ca12d0c39722084434812ceddbc0c2e15f13dfd,3ca12d0c39722084434812ceddbc0c2e15f13dfd,"Update min retry count to 3.

Empirical testing in shows increased robustness."
ojw28,2015-01-12 17:37:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e8d2c00cf7486897e790b80bd3e6bc16e3f67d08,e8d2c00cf7486897e790b80bd3e6bc16e3f67d08,Add trace to chunk fetches.
ojw28,2015-01-12 17:35:43,https://api.github.com/repos/google/ExoPlayer/git/commits/f65a093596b268698262c39aaafdb29ac280b015,f65a093596b268698262c39aaafdb29ac280b015,"AudioTrack enhancements.

- Workaround issue where video may freeze whilst audio continues
  on some devices that have entered bad states.
- Fix wrap-around for playbacks lasting more than 27 hours."
ojw28,2015-01-12 17:34:00,https://api.github.com/repos/google/ExoPlayer/git/commits/224fc2eef8eb16b009c7c2b2b02978cb92412c5c,224fc2eef8eb16b009c7c2b2b02978cb92412c5c,"Omit range header if the range is 0-.

Apparently some servers don't like it, and in general it's
unnecessary to set the header for this case."
ojw28,2015-01-06 20:15:42,https://api.github.com/repos/google/ExoPlayer/git/commits/a6e94af267f97fc8dfdc5f4b2a0d2119aa721cf5,a6e94af267f97fc8dfdc5f4b2a0d2119aa721cf5,"Merge pull request #226 from google/dev

Refine logic for determining AudioTrack size."
ojw28,2015-01-06 20:13:50,https://api.github.com/repos/google/ExoPlayer/git/commits/1613c9c7a8ee7c719a04b7156d8fbf925527af75,1613c9c7a8ee7c719a04b7156d8fbf925527af75,"Refine logic for determining AudioTrack size.

- Target 4x the minimum specified by the framework.
- Impose a minimum duration (250ms).
- Impose a maximum duration (750ms, or the minimum
  specified by the framework if that's larger).

I've removed the ability to specify the multiplication
factor, since the underlying implementation is getting more
complicated, and we should really be able to figure this out
internally."
ojw28,2015-01-02 17:38:59,https://api.github.com/repos/google/ExoPlayer/git/commits/869ecbfcf317fd77f16b1e54686dcf8d7d7acb2f,869ecbfcf317fd77f16b1e54686dcf8d7d7acb2f,"Merge pull request #225 from google/dev

dev -> dev-hls"
ojw28,2015-01-02 17:36:36,https://api.github.com/repos/google/ExoPlayer/git/commits/8cb37d7935b6a7719d1876531ec94dc65c36c19a,8cb37d7935b6a7719d1876531ec94dc65c36c19a,Merge branch 'dev' of persistent-https://github.com/google/ExoPlayer into dev
ojw28,2015-01-02 17:35:57,https://api.github.com/repos/google/ExoPlayer/git/commits/d906e405a176ace5807daaf92ef5843fa4082d7b,d906e405a176ace5807daaf92ef5843fa4082d7b,Propagate AudioTrack errors.
ojw28,2015-01-02 17:31:33,https://api.github.com/repos/google/ExoPlayer/git/commits/2128ceb777bfcdf0be699946833a6eca087b8cdc,2128ceb777bfcdf0be699946833a6eca087b8cdc,"Merge pull request #220 from martinbonnin/log_all_audiotrack_write_errors

log all AudioTrack errors"
martinbonnin,2015-01-02 17:09:14,https://api.github.com/repos/google/ExoPlayer/git/commits/75b5a59f597973d2cae77bbe83c826ee9eb6a344,75b5a59f597973d2cae77bbe83c826ee9eb6a344,Oooops... bad comparison
martinbonnin,2014-12-23 12:47:50,https://api.github.com/repos/google/ExoPlayer/git/commits/e8a8c49a97d5cc56e2e8fb4c5e9b6cb00fcc77c1,e8a8c49a97d5cc56e2e8fb4c5e9b6cb00fcc77c1,"better handling of input format change for non-adaptive codecs

* this fixes a bug when switching from HE-AAC 22050Hz to AAC 44100Hz (the AudioTrack was not reset and we were trying to send a bad number of bytes, triggering a ""AudioTrack.write() called with invalid size"" error)
* this also improves quality switches, making it almost seamless"
martinbonnin,2014-12-23 12:02:29,https://api.github.com/repos/google/ExoPlayer/git/commits/eec4e24ef0b04355879340e437d78294996e2f14,eec4e24ef0b04355879340e437d78294996e2f14,log all audio errors
ojw28,2014-12-23 10:53:58,https://api.github.com/repos/google/ExoPlayer/git/commits/f745be8978e784e1f4fc753f65e661bce801a374,f745be8978e784e1f4fc753f65e661bce801a374,"Merge pull request #219 from google/dev

Include gradle plugin 1.0.0"
ojw28,2014-12-23 10:53:29,https://api.github.com/repos/google/ExoPlayer/git/commits/a96a7fe78289ed9126907c476ae7312489cf1042,a96a7fe78289ed9126907c476ae7312489cf1042,"Merge pull request #218 from google/master

Include gradle plugin 1.0.0"
ojw28,2014-12-23 10:50:07,https://api.github.com/repos/google/ExoPlayer/git/commits/e3eeddab218ecc63f2b4d2cc4781ae9b3afbd0b6,e3eeddab218ecc63f2b4d2cc4781ae9b3afbd0b6,"Merge pull request #216 from ened/gradle-plugin-100

Include gradle plugin 1.0.0"
ened,2014-12-22 02:34:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e4ea9c1056e4430044115ca677f19e948544d98b,e4ea9c1056e4430044115ca677f19e948544d98b,Include gradle plugin 1.0.0
ojw28,2014-12-20 12:00:41,https://api.github.com/repos/google/ExoPlayer/git/commits/f39d83cf752ee4dfd23e8d5ec26ef9973b747cf3,f39d83cf752ee4dfd23e8d5ec26ef9973b747cf3,"Merge pull request #215 from google/dev

dev -> dev-hls"
ojw28,2014-12-20 11:59:19,https://api.github.com/repos/google/ExoPlayer/git/commits/4c0554d0d76462a436c4f43528a8f2cf9eecf0a7,4c0554d0d76462a436c4f43528a8f2cf9eecf0a7,Start adding support for more formats in WebM container.
ojw28,2014-12-20 11:57:49,https://api.github.com/repos/google/ExoPlayer/git/commits/ed6fcb638e0198d6018705d3c26321ace0bdf41b,ed6fcb638e0198d6018705d3c26321ace0bdf41b,Fix reading single byte from DataSourceInputStream.
ojw28,2014-12-20 11:57:05,https://api.github.com/repos/google/ExoPlayer/git/commits/0414b0d2f6cfda21c1db13166ff55d4b6cd20d2c,0414b0d2f6cfda21c1db13166ff55d4b6cd20d2c,"Fix assertion fail on seek.

Issue: #214"
ojw28,2014-12-19 12:13:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c497b78ffe04752b3593e5cfc7a763438b907edb,c497b78ffe04752b3593e5cfc7a763438b907edb,"Fix memory leak in TsExtractor when not all tracks are enabled.

Previously samples belonging to disabled tracks would just
accumulate in an arbitrarily long queue in TsExtractor. We
need to actively throw samples away from disabled tracks up
to the current playback position, so as to prevent this.

Issue: #174"
ojw28,2014-12-19 12:12:04,https://api.github.com/repos/google/ExoPlayer/git/commits/1fce55f6fe15991106202c8054b51fa2c0b53195,1fce55f6fe15991106202c8054b51fa2c0b53195,"HLS: Consider all programs.

I'm not sure exactly what the implications of this change are,
but I'd really hope that only one program in each stream is carrying
audio/video. For GoPro cameras, they expose the video stream in
the second program, for some reason.

Issue: #116"
ojw28,2014-12-19 12:11:17,https://api.github.com/repos/google/ExoPlayer/git/commits/0756c3d28c33026a90be6dff88a2b9806e16be30,0756c3d28c33026a90be6dff88a2b9806e16be30,"Relax assertion.

We've seen a few streams where this assertion fails. If you
just skip the packet, things appear to recover correctly in
all cases I've seen, so replacing failure with a warning."
ojw28,2014-12-19 12:10:16,https://api.github.com/repos/google/ExoPlayer/git/commits/ea21eba87e25a33e7587f27aad2686d8686e48ba,ea21eba87e25a33e7587f27aad2686d8686e48ba,Allow re-enabling video track without transition through buffering state.
ojw28,2014-12-19 12:09:06,https://api.github.com/repos/google/ExoPlayer/git/commits/5cf781ab9f1af27bd65c71a6d0b67952058572d6,5cf781ab9f1af27bd65c71a6d0b67952058572d6,"Merge pull request #211 from google/dev

dev -> dev-hls"
ojw28,2014-12-19 12:07:39,https://api.github.com/repos/google/ExoPlayer/git/commits/7f91a6d4d8095dc6a78c478aafccad7d24ee44f3,7f91a6d4d8095dc6a78c478aafccad7d24ee44f3,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
ojw28,2014-12-19 12:06:00,https://api.github.com/repos/google/ExoPlayer/git/commits/99b438e4c4fa1b40653c0da07d9fff2479777a9d,99b438e4c4fa1b40653c0da07d9fff2479777a9d,"Don't request that the server use DEFLATE compression.

If the server actually gives us a DEFLATE response, we
fail to handle it properly!"
ojw28,2014-12-19 12:05:03,https://api.github.com/repos/google/ExoPlayer/git/commits/4d6c9f27c2a2ae982acedf7df45b9fd2656300b7,4d6c9f27c2a2ae982acedf7df45b9fd2656300b7,Minor cleanup of AudioTrack.
ojw28,2014-12-18 10:29:06,https://api.github.com/repos/google/ExoPlayer/git/commits/cc830d6fdb6d708eb587814b640252cd42176e05,cc830d6fdb6d708eb587814b640252cd42176e05,"Merge pull request #208 from alexandrite/fix-mp3-buffer

AudioTrack will mark 0-size buffers as consumed"
alexandrite,2014-12-17 19:30:49,https://api.github.com/repos/google/ExoPlayer/git/commits/52e5b8e848c2d6a4593c8a5de84fcca6f7a7badc,52e5b8e848c2d6a4593c8a5de84fcca6f7a7badc,"AudioTrack will mark 0-size buffers as consumed

This can happen in the first, non-codec-config output buffer
from MediaCodec, while decoding MP3 data.

This issue was discovered on Nexus 5's running both KitKat
Lollippop."
ojw28,2014-12-17 19:25:12,https://api.github.com/repos/google/ExoPlayer/git/commits/83e80f98fba4e7c37dbcc96c933ddd3af56da6dd,83e80f98fba4e7c37dbcc96c933ddd3af56da6dd,"Merge pull request #207 from google/dev

dev -> dev-hls"
ojw28,2014-12-17 19:22:52,https://api.github.com/repos/google/ExoPlayer/git/commits/ee823a95fc737b7495ee021c90af37cc0b03aa22,ee823a95fc737b7495ee021c90af37cc0b03aa22,Add launcher icon source.
ojw28,2014-12-17 19:19:39,https://api.github.com/repos/google/ExoPlayer/git/commits/48540c2ba0492b9d35272f4403b240ac43906149,48540c2ba0492b9d35272f4403b240ac43906149,Add icon for demo app.
ojw28,2014-12-17 19:18:33,https://api.github.com/repos/google/ExoPlayer/git/commits/3a9d08edb58529f1c2e0a271e2422e1e5030ba7e,3a9d08edb58529f1c2e0a271e2422e1e5030ba7e,Misc performance/correctness tweaks.
ojw28,2014-12-17 19:16:02,https://api.github.com/repos/google/ExoPlayer/git/commits/f1fe109bfaef903e85380abb190b0efe0498177e,f1fe109bfaef903e85380abb190b0efe0498177e,"Fix AC3Passthrough

- Handle read returning NOTHING_READ for AC-3 streams.
- Remove extra checks for the audio track being initialized.
- Call isInitialized() instead of checking audioTrack != null."
ojw28,2014-12-15 15:30:21,https://api.github.com/repos/google/ExoPlayer/git/commits/39c07d570c75f7cf11206f802ec807a770b4278c,39c07d570c75f7cf11206f802ec807a770b4278c,"Adapt HLS on non-adaptive devices.

This just brings HLS treatment in the demo app in line with
DASH and SmoothStreaming."
ojw28,2014-12-15 15:12:21,https://api.github.com/repos/google/ExoPlayer/git/commits/1face38709ddd3b8acba72d44fbe37db54291f57,1face38709ddd3b8acba72d44fbe37db54291f57,"Merge pull request #204 from google/dev

dev -> dev-hls"
ojw28,2014-12-15 15:06:05,https://api.github.com/repos/google/ExoPlayer/git/commits/57068a6406974060394e528be9bd28d8c125072e,57068a6406974060394e528be9bd28d8c125072e,Clear subtitle when text disabled.
ojw28,2014-12-15 15:05:06,https://api.github.com/repos/google/ExoPlayer/git/commits/57faa497561488cd81d485fb13849f0c9348c90d,57faa497561488cd81d485fb13849f0c9348c90d,"Fix crash running ExoPlayer demo on JB. My bad!

- We can't refer to UnsupportedSchemeException outside of the
V18 compat inner classes.
- There were also a few missing return; calls."
ojw28,2014-12-15 15:04:38,https://api.github.com/repos/google/ExoPlayer/git/commits/11eb1c222b6fd5cd49d1013a3f8ac290d4d467b2,11eb1c222b6fd5cd49d1013a3f8ac290d4d467b2,"Identify AC-3 tracks by codecs=""ac-3"", not the MIME type."
ojw28,2014-12-15 15:03:10,https://api.github.com/repos/google/ExoPlayer/git/commits/595147de9b4c0cf6ec1d784597457cba1af97507,595147de9b4c0cf6ec1d784597457cba1af97507,Enforce sliding window of available segments for DASH DVB.
ojw28,2014-12-15 15:02:29,https://api.github.com/repos/google/ExoPlayer/git/commits/978a4d857a436788249b0c439929109d09d9ddb8,978a4d857a436788249b0c439929109d09d9ddb8,"Handle getting the audio track's position before the first AC-3 buffer.

ac3Bitrate is set only after the first buffer is handled, which meant that
getting the playback position would cause a divide by zero before then.

When playing back AC-3 content, the ac3Bitrate will always be set after the
first buffer is handled, so return a 0 position if it is not set."
ojw28,2014-12-12 14:25:48,https://api.github.com/repos/google/ExoPlayer/git/commits/b80569237b575b7619e0eff73c305c116a782a91,b80569237b575b7619e0eff73c305c116a782a91,Correctly propagate fatal load error.
ojw28,2014-12-12 14:24:05,https://api.github.com/repos/google/ExoPlayer/git/commits/4c29eb58f1daa78802bebf49ddba2a578a7e5d3e,4c29eb58f1daa78802bebf49ddba2a578a7e5d3e,Merge branch 'dev' into dev-hls
ojw28,2014-12-12 14:23:43,https://api.github.com/repos/google/ExoPlayer/git/commits/0cb8169323c2292f531a7c52e661f61e0b28f840,0cb8169323c2292f531a7c52e661f61e0b28f840,Merge branch 'dev-hls' into dev
ojw28,2014-12-12 14:18:44,https://api.github.com/repos/google/ExoPlayer/git/commits/5a3340d638cfeb3809f435b1b0118f2acce15079,5a3340d638cfeb3809f435b1b0118f2acce15079,Add initial AC3 passthrough support.
ojw28,2014-12-12 14:13:58,https://api.github.com/repos/google/ExoPlayer/git/commits/81bf68b1cb9e689c24ebc38e47f98ee71fc4a143,81bf68b1cb9e689c24ebc38e47f98ee71fc4a143,Minor doc fixes.
ojw28,2014-12-12 14:12:00,https://api.github.com/repos/google/ExoPlayer/git/commits/9d4e1773474579ac1be07ca588ff06bd75dce10d,9d4e1773474579ac1be07ca588ff06bd75dce10d,"Support DASH Live TTML subtitles.

Also add missing file."
ojw28,2014-12-12 14:07:48,https://api.github.com/repos/google/ExoPlayer/git/commits/bb024fda088f67cf552017bc3ca4a9cf164a4a87,bb024fda088f67cf552017bc3ca4a9cf164a4a87,"Partial support for DASH DVB Live streams.

- Adds support for dash manifests that define SegmentTemplate
  but no SegmentTimeline.
- Assumes that the device clock is correct when calculating which
  segments to load. The final step here is to use the Utc timing
  element in the DASH manifest to obtain an accurate client clock.
- Doesn't yet enforce that the client shouldn't load segments that
  are in the future or behind the live window."
ojw28,2014-12-12 14:05:45,https://api.github.com/repos/google/ExoPlayer/git/commits/ae55b12bd8455758f23dfffa9e2d007af2ae5383,ae55b12bd8455758f23dfffa9e2d007af2ae5383,"Don't require samples to specify whether they're encrypted.

This wasn't actually used for anything other than showing a
toast, which is now generated based on the manifest instead."
ojw28,2014-12-12 14:02:14,https://api.github.com/repos/google/ExoPlayer/git/commits/099bbe048f338bbd7470e2782e9488fa94946d84,099bbe048f338bbd7470e2782e9488fa94946d84,Correctly handle audio and video only DASH streams.
ojw28,2014-12-12 13:59:45,https://api.github.com/repos/google/ExoPlayer/git/commits/3e33fddbc195b4329d8bfd06b23d4c1cf462a04d,3e33fddbc195b4329d8bfd06b23d4c1cf462a04d,Correctly handle audio-only SmoothStreaming streams.
ojw28,2014-12-11 10:26:50,https://api.github.com/repos/google/ExoPlayer/git/commits/1554db1673db2983566caa830dcc819ca8c1d1cb,1554db1673db2983566caa830dcc819ca8c1d1cb,"Skip bad PES packets

Issue: #200"
ojw28,2014-12-10 16:52:40,https://api.github.com/repos/google/ExoPlayer/git/commits/34372deb9a583bd647df7aaa612da18d4947b4f8,34372deb9a583bd647df7aaa612da18d4947b4f8,"Merge pull request #199 from google/dev

Release 1.1.0"
ojw28,2014-12-10 14:08:10,https://api.github.com/repos/google/ExoPlayer/git/commits/035671b722286f7ea22e5bdf6a1fc1b76a9ca525,035671b722286f7ea22e5bdf6a1fc1b76a9ca525,"Merge pull request #198 from google/dev

dev -> dev-hls"
ojw28,2014-12-10 14:05:51,https://api.github.com/repos/google/ExoPlayer/git/commits/f15e3973e05cfbb88c1283a5b8869c7e18c093cf,f15e3973e05cfbb88c1283a5b8869c7e18c093cf,Fix discovery of secure decoders on some L devices.
ojw28,2014-12-10 14:04:58,https://api.github.com/repos/google/ExoPlayer/git/commits/86b2209ad03ebccdb4212b8f1bd470cc595bb10f,86b2209ad03ebccdb4212b8f1bd470cc595bb10f,"Bump version to 1.1.0.

Also update gradle files."
ojw28,2014-12-08 20:19:24,https://api.github.com/repos/google/ExoPlayer/git/commits/a25421889168df7c3ffc72842ee7c39a4da3025e,a25421889168df7c3ffc72842ee7c39a4da3025e,No-op format changes.
ojw28,2014-12-08 20:18:10,https://api.github.com/repos/google/ExoPlayer/git/commits/87ca1b3465c35c96b68ca04d24a872cad71ae072,87ca1b3465c35c96b68ca04d24a872cad71ae072,"Skip previously loaded HLS data after an error occurs.

Github issue: #183"
ojw28,2014-12-08 20:17:17,https://api.github.com/repos/google/ExoPlayer/git/commits/1344b36da94b3393b5ef05662db9f13324f33d29,1344b36da94b3393b5ef05662db9f13324f33d29,"Merge pull request #194 from google/dev

dev -> dev-hls"
ojw28,2014-12-08 20:15:06,https://api.github.com/repos/google/ExoPlayer/git/commits/c4b2a0121230cb533a658fd6c55b4c01199a3000,c4b2a0121230cb533a658fd6c55b4c01199a3000,"Allow out-of-band pssh data for DASH playbacks.

This fixes the referenced issue, except that the MPD parser
needs to actually parse out UUID and binary data for schemes
that we wish to support. Alternatively, it's easy to applications
to do this themselves by extending the parser and overriding
the parseContentProtection and buildContentProtection methods.

Github Issue: #119"
ojw28,2014-12-08 20:13:52,https://api.github.com/repos/google/ExoPlayer/git/commits/2f0a1779e2183b990885b099d1beed38438d9bac,2f0a1779e2183b990885b099d1beed38438d9bac,"Stop piping PSSH information through the extractor.

It's cleaner to not inject data into the extractor only
so that it can be read out as though it were parsed from
the stream. This is also an incremental step towards
fixing Github issue #119."
ojw28,2014-12-08 20:12:04,https://api.github.com/repos/google/ExoPlayer/git/commits/cf80c4d9cb3de06e9861bb85ca3242ded6e6b072,cf80c4d9cb3de06e9861bb85ca3242ded6e6b072,Allow passing of optional parameters in MediaDrm key requests.
ojw28,2014-12-08 20:10:52,https://api.github.com/repos/google/ExoPlayer/git/commits/01151c9c65810a9fff439f5901a85bde4e6a4f63,01151c9c65810a9fff439f5901a85bde4e6a4f63,Don't append base uri if chunkUrl is absolute.
ojw28,2014-12-08 20:08:53,https://api.github.com/repos/google/ExoPlayer/git/commits/0a888a0d4f11356f6021e63e5ba473d9c0a5fd77,0a888a0d4f11356f6021e63e5ba473d9c0a5fd77,"Merge pull request #193 from google/dev-hls-spspps

Add SPS/PPS to the media format."
ojw28,2014-12-08 11:36:51,https://api.github.com/repos/google/ExoPlayer/git/commits/7ca1de22759ab507f5c0a378f71abe3beb885ec3,7ca1de22759ab507f5c0a378f71abe3beb885ec3,Experiment to add SPS/PPS to the media format.
ojw28,2014-12-05 17:58:56,https://api.github.com/repos/google/ExoPlayer/git/commits/5d7820542cd351d33915b1c8ed1c2740d306f47d,5d7820542cd351d33915b1c8ed1c2740d306f47d,"Merge pull request #189 from google/dev

dev -> dev-hls"
ojw28,2014-12-05 17:53:24,https://api.github.com/repos/google/ExoPlayer/git/commits/c8e5988e6d2ca8c2391042adb2f3ea0443f937f3,c8e5988e6d2ca8c2391042adb2f3ea0443f937f3,"Fix handling of unknown duration in FMP4.

Issue: 186"
ojw28,2014-12-05 17:52:30,https://api.github.com/repos/google/ExoPlayer/git/commits/6f1832fb66df5f9b8844d595ab0b13ef7dab3e34,6f1832fb66df5f9b8844d595ab0b13ef7dab3e34,"Support negative-fronted xs:duration values.

Issue: 186"
ojw28,2014-12-05 17:51:52,https://api.github.com/repos/google/ExoPlayer/git/commits/fc8c08d240ee0bac3d40e8d816c780bdf0ab0178,fc8c08d240ee0bac3d40e8d816c780bdf0ab0178,Fix #187
ojw28,2014-12-03 18:50:31,https://api.github.com/repos/google/ExoPlayer/git/commits/3d775c164106d6709c4238ea6a02e61ee20f7afa,3d775c164106d6709c4238ea6a02e61ee20f7afa,Use C constants + minor cleanup.
ojw28,2014-12-03 18:48:20,https://api.github.com/repos/google/ExoPlayer/git/commits/511dd9435a7697402c215fce9471fac54bb66db4,511dd9435a7697402c215fce9471fac54bb66db4,Merge branch 'dev' into dev-hls
ojw28,2014-12-03 18:45:13,https://api.github.com/repos/google/ExoPlayer/git/commits/4efc0abde92a07c91d54c55ac32f821aec004eb7,4efc0abde92a07c91d54c55ac32f821aec004eb7,"Implement DASH Live.

Note: This adds support for the majority of DASH live streams,
however we do not yet correctly support live streams that rely
on UtcTimingElements in their manifests.

Issue: #52"
ojw28,2014-12-03 18:33:36,https://api.github.com/repos/google/ExoPlayer/git/commits/6652f864bd69f04b1793eaeadc63edf80ba2571b,6652f864bd69f04b1793eaeadc63edf80ba2571b,Audio improvements.
ojw28,2014-12-03 18:30:56,https://api.github.com/repos/google/ExoPlayer/git/commits/2e1f9897e76005978444eb617a862c1cdfa6b5c1,2e1f9897e76005978444eb617a862c1cdfa6b5c1,Fixed issue in which setting a representation duration to unknown wasn't handled correctly.
ojw28,2014-12-03 18:30:15,https://api.github.com/repos/google/ExoPlayer/git/commits/dc644ae86d3aeaf15c53aac50faaddacd193af22,dc644ae86d3aeaf15c53aac50faaddacd193af22,Make single MICROS_PER_SECOND constant + use it everywhere.
ojw28,2014-12-03 18:26:48,https://api.github.com/repos/google/ExoPlayer/git/commits/656fc0b0ca4b2ba5269227848a5da9294d4854f5,656fc0b0ca4b2ba5269227848a5da9294d4854f5,"Make sure SmoothStreaming manifest durations are -1 for Live.

Plus start to properly document the SmoothStreaming package.
Note that where the documentation is a little vague, this is
because the original SmoothStreaming documentation is equally
vague!"
ojw28,2014-12-03 18:10:30,https://api.github.com/repos/google/ExoPlayer/git/commits/c2d55acab52941cb883c891e6973b0aa4457ec5b,c2d55acab52941cb883c891e6973b0aa4457ec5b,"Get Exo+HLS memory usage more under control.

- Split sample pools for video/audio/misc, since the typical
  required sample sizes are very different (and so it becomes
  inefficient to use a sample sized for video to hold audio).
- Add TODO for further improvements.

Issue: #174"
ojw28,2014-11-27 18:18:02,https://api.github.com/repos/google/ExoPlayer/git/commits/b9f32539247e70bbb3d3472c4116dc179b0950f8,b9f32539247e70bbb3d3472c4116dc179b0950f8,"Merge pull request #176 from google/dev

dev -> dev-hls"
ojw28,2014-11-27 18:15:16,https://api.github.com/repos/google/ExoPlayer/git/commits/165562d8808cc46578d1732f76112c732c53662e,165562d8808cc46578d1732f76112c732c53662e,Add VSYNC aligning smooth frame release helper.
ojw28,2014-11-27 18:14:19,https://api.github.com/repos/google/ExoPlayer/git/commits/2969bba60fd502bbac2d11cdab399fdd3b438ea3,2969bba60fd502bbac2d11cdab399fdd3b438ea3,"Fix timestamp rollover issue for DASH live.

The timestamp scaling in SegmentBase.getSegmentTimeUs was
overflowing for some streams. Apply a similar trick to that
applied in the SmoothStreaming case to fix it."
ojw28,2014-11-27 18:12:46,https://api.github.com/repos/google/ExoPlayer/git/commits/c5342630328fcda01eeec01784d63d43b0c0d352,c5342630328fcda01eeec01784d63d43b0c0d352,Enhance parsing of xs:duration to support year/month/day.
ojw28,2014-11-27 18:11:43,https://api.github.com/repos/google/ExoPlayer/git/commits/1a557a06c1a25989d9fc644c64762c4561a9a218,1a557a06c1a25989d9fc644c64762c4561a9a218,Support SmoothStreaming repeated chunk tags.
ojw28,2014-11-26 17:21:41,https://api.github.com/repos/google/ExoPlayer/git/commits/40f3172237fcb0c58eb07c2766c989cd501e15ae,40f3172237fcb0c58eb07c2766c989cd501e15ae,"HLS: More control over buffering + tweak caption impl.

- Move all three buffering constants to a single class (the
  chunk source).
- Increase the target buffer to 40s for increased robustness
  against temporary network blips.
- Make values configurable via the chunk source constructor.
- Treat captions as a text track for HLS. This allows them to
  be enabled/disabled through the demo app UI.

Issue: #165"
ojw28,2014-11-26 12:08:46,https://api.github.com/repos/google/ExoPlayer/git/commits/8e2801ce9b4ab0091ec1681832f9de4c1acdbdc8,8e2801ce9b4ab0091ec1681832f9de4c1acdbdc8,"Improve HLS ABR.

- Add options to switch abruptly at segment boundaries. Third
  parties who guarantee keyframes at the start of segments will
  want this, because it makes switching more efficient and hence
  rebuffering less likely.
- Switch quality faster when performing a splicing switch (when
  we detect that we need to switch variant, we now immediately
  request the same segment as we did last time for the new variant,
  rather than requesting one more segment for the old variant
  before doing this."
ojw28,2014-11-26 12:01:36,https://api.github.com/repos/google/ExoPlayer/git/commits/410fcdeb87084af7b5338c068fdde4163ed055e7,410fcdeb87084af7b5338c068fdde4163ed055e7,"Merge HLS playlist parsers, make a single parser identify the
playlist type (master or media).

Issue: #155"
ojw28,2014-11-26 11:26:39,https://api.github.com/repos/google/ExoPlayer/git/commits/f9f3b82d9335e7f557d50bfc1de6840776c64609,f9f3b82d9335e7f557d50bfc1de6840776c64609,"Merge pull request #172 from google/dev

dev -> dev-hls"
ojw28,2014-11-26 11:23:15,https://api.github.com/repos/google/ExoPlayer/git/commits/ab00a4da03bfc5ddcc2ed29b0be31cc6308dabe7,ab00a4da03bfc5ddcc2ed29b0be31cc6308dabe7,Allow non-strict webvtt parsing.
ojw28,2014-11-26 11:22:54,https://api.github.com/repos/google/ExoPlayer/git/commits/7dfebc2e11f4d696e0e729adafe7c8a469bee669,7dfebc2e11f4d696e0e729adafe7c8a469bee669,Make default retry count public.
ojw28,2014-11-21 17:55:38,https://api.github.com/repos/google/ExoPlayer/git/commits/f034ee7d403fb9aa33e553c0874c443ffb47791f,f034ee7d403fb9aa33e553c0874c443ffb47791f,"Merge pull request #169 from google/dev

Correctly handle redirection when requesting manifests."
ojw28,2014-11-21 17:54:55,https://api.github.com/repos/google/ExoPlayer/git/commits/69c7cb09c8389f3ba5f9be8165a2db754c244880,69c7cb09c8389f3ba5f9be8165a2db754c244880,Correctly handle redirection when requesting manifests.
ojw28,2014-11-21 00:32:12,https://api.github.com/repos/google/ExoPlayer/git/commits/52b95c1f8362a7efcf6b992f267b72075faed3ff,52b95c1f8362a7efcf6b992f267b72075faed3ff,"Merge pull request #166 from google/dev

dev -> dev-hls"
ojw28,2014-11-21 00:30:48,https://api.github.com/repos/google/ExoPlayer/git/commits/8c980c8892c088802702afb077a796d17b07964b,8c980c8892c088802702afb077a796d17b07964b,"Merge pull request #164 from talklittle/dev

gradle plugin 0.14.4 fixes"
talklittle,2014-11-20 23:54:48,https://api.github.com/repos/google/ExoPlayer/git/commits/9658534b937812f20b12016c34d39d0f3bb3b882,9658534b937812f20b12016c34d39d0f3bb3b882,demo: compileSdkVersion 21 (was 19)
talklittle,2014-11-20 20:18:54,https://api.github.com/repos/google/ExoPlayer/git/commits/66c48a1151f5fa9e59d8ef3a91e5e789fe10b57c,66c48a1151f5fa9e59d8ef3a91e5e789fe10b57c,"gradle: compileSdkVersion 21

fixes broken import statements"
talklittle,2014-11-20 20:18:35,https://api.github.com/repos/google/ExoPlayer/git/commits/f7589ceee22f64f42ec2af3cf314b72ea53cd83f,f7589ceee22f64f42ec2af3cf314b72ea53cd83f,gradle: fix demo build.gradle
talklittle,2014-11-20 20:18:13,https://api.github.com/repos/google/ExoPlayer/git/commits/5447081d17eb209f9fee8956ce0251214bdcdb7a,5447081d17eb209f9fee8956ce0251214bdcdb7a,gradle: 2.2.1-rc-1 wrapper jar and distribution url
talklittle,2014-11-19 23:30:54,https://api.github.com/repos/google/ExoPlayer/git/commits/0ce3e6e8a6adf5bcecf660abb23e91fcef928cb0,0ce3e6e8a6adf5bcecf660abb23e91fcef928cb0,fix compatibility with android gradle plugin 0.14
ojw28,2014-11-20 17:11:02,https://api.github.com/repos/google/ExoPlayer/git/commits/03e859d7745e720e2c4242ec9f66bd625dc91870,03e859d7745e720e2c4242ec9f66bd625dc91870,"Fix handling of encrypted media if IV changes.

1. Correctly replace the AES data source if IV changes.
2. Check the largest timestamp for being equal to MIN_VALUE, and
   handle this case properly.
3. Clean up AES data source a little.

Issue: #162"
ojw28,2014-11-20 14:59:22,https://api.github.com/repos/google/ExoPlayer/git/commits/81e2c9f0d3ea0fd934fbb4f01ae20bb81c7adf66,81e2c9f0d3ea0fd934fbb4f01ae20bb81c7adf66,"Fix https://github.com/google/ExoPlayer/issues/159.

The actual fix here is to not call discardExtractors in HlsSampleSource
whilst the loading thread that's pushing data into it is still running.
It's required to wait for that thread to have exited before doing this.

Issue: #159"
ojw28,2014-11-20 14:58:06,https://api.github.com/repos/google/ExoPlayer/git/commits/8c07847b00552247540536a11e0cacc30482ba6f,8c07847b00552247540536a11e0cacc30482ba6f,Properly propagate errors that occur during preparation.
ojw28,2014-11-20 12:23:29,https://api.github.com/repos/google/ExoPlayer/git/commits/2798b430cabcb547faeac41056ed39d914825592,2798b430cabcb547faeac41056ed39d914825592,Delete spurious file.
ojw28,2014-11-20 11:12:06,https://api.github.com/repos/google/ExoPlayer/git/commits/b501f8ab398c6277d114eb2de0ebe21ae3abb998,b501f8ab398c6277d114eb2de0ebe21ae3abb998,"Merge pull request #160 from google/dev

dev -> dev-hls"
ojw28,2014-11-20 11:04:38,https://api.github.com/repos/google/ExoPlayer/git/commits/33c37ebc82a9ffbe59d040b3be09f34e3a465e85,33c37ebc82a9ffbe59d040b3be09f34e3a465e85,"Fix AudioTrack position reporting whilst paused.

Issue: #158"
ojw28,2014-11-20 11:03:47,https://api.github.com/repos/google/ExoPlayer/git/commits/2a832fd3c495c224fea934335a7b7c62bd80cbe5,2a832fd3c495c224fea934335a7b7c62bd80cbe5,Minor stylistic tweaks.
ojw28,2014-11-19 16:10:17,https://api.github.com/repos/google/ExoPlayer/git/commits/faf196a581520f1f3164388bb25a68c90446c897,faf196a581520f1f3164388bb25a68c90446c897,"Merge pull request #154 from google/dev

Merge dev -> dev-hls"
ojw28,2014-11-19 16:08:38,https://api.github.com/repos/google/ExoPlayer/git/commits/d506d7660da070163d90f3730dc981ca1a5357b5,d506d7660da070163d90f3730dc981ca1a5357b5,"Merge pull request #147 from jonasl/dev-gc

MediaCodecTrackRenderer: Avoid excessive garbage generation"
ojw28,2014-11-19 16:08:27,https://api.github.com/repos/google/ExoPlayer/git/commits/25ddeab57d7bcf45a583a5dc05a63de7e0934d6f,25ddeab57d7bcf45a583a5dc05a63de7e0934d6f,"Merge pull request #146 from jonasl/dev-hls-crop

TsExtractor: Account for frame cropping when parsing SPS"
ojw28,2014-11-19 16:06:33,https://api.github.com/repos/google/ExoPlayer/git/commits/826c73a16bfb7212524d563420b5ed2ff79a0873,826c73a16bfb7212524d563420b5ed2ff79a0873,"Fix renderer count.

Issue: #153"
ojw28,2014-11-19 15:58:26,https://api.github.com/repos/google/ExoPlayer/git/commits/127bcd18c386108aa6ee5a9370ea2ad6a9e3855d,127bcd18c386108aa6ee5a9370ea2ad6a9e3855d,"Bring internal/external branches closer.

- Unredact internal error ids.
- Move images."
ojw28,2014-11-19 10:34:49,https://api.github.com/repos/google/ExoPlayer/git/commits/4280511a33e961ad18670cb99432cc617ce32dfe,4280511a33e961ad18670cb99432cc617ce32dfe,Seamless splicing for adaptive HLS.
ojw28,2014-11-19 10:10:53,https://api.github.com/repos/google/ExoPlayer/git/commits/87d0be252e8d4d655a6f301b5d65e3d1426e4c0d,87d0be252e8d4d655a6f301b5d65e3d1426e4c0d,"Merge pull request #149 from google/dev

dev -> dev-hls"
andudo,2014-11-19 00:36:44,https://api.github.com/repos/google/ExoPlayer/git/commits/3cfe894b93bbf2ff7dc1e48bb8b3d8d228fa0550,3cfe894b93bbf2ff7dc1e48bb8b3d8d228fa0550,"Additional IV fix. Trim sign bit from BigInteger.toByteArray() output, if it creates a 17th byte for it. #145"
jonasl,2014-11-15 00:13:13,https://api.github.com/repos/google/ExoPlayer/git/commits/255c3b27f6ee08e09007addb6f177bebc62d8c0e,255c3b27f6ee08e09007addb6f177bebc62d8c0e,"MediaCodecTrackRenderer: Avoid excessive garbage generation

Looking up a long in a HashSet<Long> auto boxes the long and leaves
it for the GC. As decodeOnly is relatively infrequent it's much
better to do a simple linear search in a List<Long>. That way
we can avoid boxing every incoming time stamp value. In the general
case this will be linear searching in an empty list, a very fast
operation.

Signed-off-by: Jonas Larsson <jonas@hallerud.se>"
andudo,2014-11-18 19:48:40,https://api.github.com/repos/google/ExoPlayer/git/commits/15d3df6a5852e2ba483364d03f9031f106974b5f,15d3df6a5852e2ba483364d03f9031f106974b5f,Add EIA-608 (CEA-608) Closed Captioning support for HLS #68
andudo,2014-11-18 19:11:02,https://api.github.com/repos/google/ExoPlayer/git/commits/c57484f90a554cc86af5ab7351e8a4569970214c,c57484f90a554cc86af5ab7351e8a4569970214c,Fix for IV bigger than 32 bits #145
andudo,2014-11-18 19:05:34,https://api.github.com/repos/google/ExoPlayer/git/commits/3abcefa00cdc8432a4a79af7bf568d753a9c3ce1,3abcefa00cdc8432a4a79af7bf568d753a9c3ce1,Add EXT-X-BYTERANGE support #139
ojw28,2014-11-18 19:03:04,https://api.github.com/repos/google/ExoPlayer/git/commits/bc303b730ad34d421a14598f05cba26ed34eacb1,bc303b730ad34d421a14598f05cba26ed34eacb1,"Factor out AudioTrack from MediaCodecAudioTrackRenderer.

AudioTrack contains the portions of MediaCodecAudioTrackRenderer that handle the
platform AudioTrack instance, including synchronization (playback position
smoothing), non-blocking writes and releasing.

This refactoring should not affect the behavior of audio playback, and is in
preparation for adding an Ac3PassthroughAudioTrackRenderer that will use the
AudioTrack."
ojw28,2014-11-18 19:02:32,https://api.github.com/repos/google/ExoPlayer/git/commits/44bc01b28d3da0cf17368575b558bb66f38d289e,44bc01b28d3da0cf17368575b558bb66f38d289e,Add receiver for HDMI plugged-in configuration changes.
ojw28,2014-11-18 19:02:20,https://api.github.com/repos/google/ExoPlayer/git/commits/7cd201c28b9e26a4bd9b6049af3a89add26f316f,7cd201c28b9e26a4bd9b6049af3a89add26f316f,Add missing class.
ojw28,2014-11-18 19:00:30,https://api.github.com/repos/google/ExoPlayer/git/commits/2472637264ecf51bbc3dafcd285d1d2f72715f50,2472637264ecf51bbc3dafcd285d1d2f72715f50,Add support for extracting Vorbis audio in WebM Extractor.
ojw28,2014-11-18 18:57:07,https://api.github.com/repos/google/ExoPlayer/git/commits/6a544da2f8266e13173a4643b8fc8c9d22d2ba4e,6a544da2f8266e13173a4643b8fc8c9d22d2ba4e,Use new MediaCodecList APIs on L.
ojw28,2014-11-18 18:54:45,https://api.github.com/repos/google/ExoPlayer/git/commits/685e1d1f06507771de29807c8874d3664316a9d8,685e1d1f06507771de29807c8874d3664316a9d8,"Minimize memory leak risks.

Remove implicit back-reference from playback thread to player."
jonasl,2014-11-14 22:34:00,https://api.github.com/repos/google/ExoPlayer/git/commits/467f19568b73b4fa236d8c97ff2fc583d08bf05d,467f19568b73b4fa236d8c97ff2fc583d08bf05d,"TsExtractor: Account for frame cropping when parsing SPS

Passing uncropped dimensions to certain decoders will make them
output frames without proper cropping set.

Signed-off-by: Jonas Larsson <jonas@hallerud.se>"
ojw28,2014-11-14 18:32:22,https://api.github.com/repos/google/ExoPlayer/git/commits/360d452dade2dda732bb49d9642787f5b12b0775,360d452dade2dda732bb49d9642787f5b12b0775,Avoid seeking if seekPosition==currentPosition
ojw28,2014-11-14 18:31:55,https://api.github.com/repos/google/ExoPlayer/git/commits/eb1210d410988492865ef1f025c449f256e3eabc,eb1210d410988492865ef1f025c449f256e3eabc,Make sampleQueue thread safe
ojw28,2014-11-14 16:31:47,https://api.github.com/repos/google/ExoPlayer/git/commits/6b123590cab361ecee7ebef3b010eff043d6c7a2,6b123590cab361ecee7ebef3b010eff043d6c7a2,Correctly propagate errors
ojw28,2014-11-14 16:31:23,https://api.github.com/repos/google/ExoPlayer/git/commits/643f33f7e97fb638ba0b779e5faf547a14b55e6a,643f33f7e97fb638ba0b779e5faf547a14b55e6a,Properly handle different profiles (skipping SPS data as needed).
ojw28,2014-11-13 16:32:10,https://api.github.com/repos/google/ExoPlayer/git/commits/fd519016209391698d4a5a828f6f7deac73e88ff,fd519016209391698d4a5a828f6f7deac73e88ff,"Big HLS update. Add start of adaptive support, but leave disabled for now."
ojw28,2014-11-13 16:23:44,https://api.github.com/repos/google/ExoPlayer/git/commits/6c6ba900a9da4abea158920323ac6b18d78d58f9,6c6ba900a9da4abea158920323ac6b18d78d58f9,Fix the build.
ojw28,2014-11-13 16:20:13,https://api.github.com/repos/google/ExoPlayer/git/commits/0005f41fe9b03b646bbf5b78d5809e0b00061b5f,0005f41fe9b03b646bbf5b78d5809e0b00061b5f,"Merge pull request #138 from google/dev

dev -> dev-hls"
ojw28,2014-11-13 16:16:02,https://api.github.com/repos/google/ExoPlayer/git/commits/cb0684597609a8a158e6a5792ea644e868eb68ec,cb0684597609a8a158e6a5792ea644e868eb68ec,Minor linebreak fixes
ojw28,2014-11-13 16:13:55,https://api.github.com/repos/google/ExoPlayer/git/commits/d14e11c507f2d11b934b6a6e97aff7558a2eaacb,d14e11c507f2d11b934b6a6e97aff7558a2eaacb,Additional extraction for AC3
ojw28,2014-11-13 16:13:02,https://api.github.com/repos/google/ExoPlayer/git/commits/456d53e178e8535e99dc58a117d3e86e598ac22d,456d53e178e8535e99dc58a117d3e86e598ac22d,Minor cleanup.
ojw28,2014-11-13 16:11:52,https://api.github.com/repos/google/ExoPlayer/git/commits/2d97d31a9e549eb73b4106ae1f981a9704651a8e,2d97d31a9e549eb73b4106ae1f981a9704651a8e,Add ability to make fine-grained frame release timestamp adjustments
ojw28,2014-11-13 16:10:21,https://api.github.com/repos/google/ExoPlayer/git/commits/f1c646b79374be6e7488208820dfcee378ce79f0,f1c646b79374be6e7488208820dfcee378ce79f0,Add diagnostic info to decoder exceptions + minor cleanup
ojw28,2014-11-13 16:08:43,https://api.github.com/repos/google/ExoPlayer/git/commits/59688397fa7800005f567faad1e91539ea270bf1,59688397fa7800005f567faad1e91539ea270bf1,Suppress deprecation warnings
ojw28,2014-11-13 16:08:16,https://api.github.com/repos/google/ExoPlayer/git/commits/bc871c94a6490b0b5577ec377a291afdd4dd8ff7,bc871c94a6490b0b5577ec377a291afdd4dd8ff7,Add bitrate to MediaFormat
ojw28,2014-11-13 16:06:49,https://api.github.com/repos/google/ExoPlayer/git/commits/4460b7c62605ce1c938878698b98c976f5f5156e,4460b7c62605ce1c938878698b98c976f5f5156e,Fix typo
ojw28,2014-11-10 08:49:20,https://api.github.com/repos/google/ExoPlayer/git/commits/7b5c4d705ff3a6b1798555e0a9383b3a019f3189,7b5c4d705ff3a6b1798555e0a9383b3a019f3189,"Merge pull request #131 from google/dev-l

Merge dev-l into dev-hls, now L SDK is released."
ojw28,2014-11-10 08:47:59,https://api.github.com/repos/google/ExoPlayer/git/commits/441d7f4e17d6ab02cbb37b7ec67bf6c9ede9d069,441d7f4e17d6ab02cbb37b7ec67bf6c9ede9d069,"Merge pull request #130 from google/dev-l

Merge dev-l into dev, now L SDK is released."
ojw28,2014-11-06 19:30:47,https://api.github.com/repos/google/ExoPlayer/git/commits/5abb413f4e4670e011edf6bc52820817678cfbdf,5abb413f4e4670e011edf6bc52820817678cfbdf,"Merge pull request #127 from google/dev

dev -> dev-l"
ojw28,2014-11-06 19:30:24,https://api.github.com/repos/google/ExoPlayer/git/commits/e9dacb08df74ed552e4c2295fbe8c33619daaa31,e9dacb08df74ed552e4c2295fbe8c33619daaa31,"Merge pull request #126 from google/dev

dev -> dev-hls"
ojw28,2014-11-06 19:28:21,https://api.github.com/repos/google/ExoPlayer/git/commits/1653e81687933735b3c192a5ebdcf1de79295a88,1653e81687933735b3c192a5ebdcf1de79295a88,Add configurable retry count to ChunkSampleSource
ojw28,2014-11-06 19:27:28,https://api.github.com/repos/google/ExoPlayer/git/commits/eccf8d792433d8048f79b0a79ac7659307fc330c,eccf8d792433d8048f79b0a79ac7659307fc330c,Minor Webvtt parsing tweaks
ojw28,2014-11-06 19:26:41,https://api.github.com/repos/google/ExoPlayer/git/commits/d2e73dd566175c57e7afa481987a5be8fdd025eb,d2e73dd566175c57e7afa481987a5be8fdd025eb,Add brackets to make expression clearer.
ojw28,2014-11-06 19:22:14,https://api.github.com/repos/google/ExoPlayer/git/commits/aeb17e6a8830081794a40be1963d134fcdb5fdcb,aeb17e6a8830081794a40be1963d134fcdb5fdcb,HLS improvements + steps towards ABR.
ojw28,2014-11-06 19:17:22,https://api.github.com/repos/google/ExoPlayer/git/commits/9790430a626c8b1a0b894529df95ad32cffe5510,9790430a626c8b1a0b894529df95ad32cffe5510,Trim whitespace from codecs
ojw28,2014-11-05 17:25:02,https://api.github.com/repos/google/ExoPlayer/git/commits/55b4272a466a42e5a441746bb8f02380de0cefdf,55b4272a466a42e5a441746bb8f02380de0cefdf,Pro-actively parse the final PES packet.
ojw28,2014-11-05 17:15:39,https://api.github.com/repos/google/ExoPlayer/git/commits/e6c7e296473682a57bf7e55937aae9c37d7693df,e6c7e296473682a57bf7e55937aae9c37d7693df,"Merge pull request #121 from google/dev

dev -> dev-l"
andudo,2014-11-05 16:54:45,https://api.github.com/repos/google/ExoPlayer/git/commits/71f918c01b3318f42cc9b2d7f83b4976e7c20bbb,71f918c01b3318f42cc9b2d7f83b4976e7c20bbb,ID3 refactoring to match apple's player behavior #67
andudo,2014-11-04 19:24:13,https://api.github.com/repos/google/ExoPlayer/git/commits/b946ad9234f34b3a498a96911402974d9b0048b8,b946ad9234f34b3a498a96911402974d9b0048b8,Specify UserAgent for ManifestFetcher in HlsRendererBuilder.
andudo,2014-11-04 19:20:36,https://api.github.com/repos/google/ExoPlayer/git/commits/c781fcd13d52f7ae413a7aa7a13864e569609096,c781fcd13d52f7ae413a7aa7a13864e569609096,"Merge pull request #117 from google/dev

Add cookies support and use the same UserAgent in ManifestFetcher and in..."
andudo,2014-11-04 19:06:37,https://api.github.com/repos/google/ExoPlayer/git/commits/712e46085deab098ae043725c406e9c7939d9553,712e46085deab098ae043725c406e9c7939d9553,Add cookies support and use the same UserAgent in ManifestFetcher and in HttpDataSource.
andudo,2014-11-04 18:38:22,https://api.github.com/repos/google/ExoPlayer/git/commits/a76addba5d59637dec40653698e7dc3551534ced,a76addba5d59637dec40653698e7dc3551534ced,Add AES-128 encryption support for HLS #69 and parsing logic for CODECS and RESOLUTION attributes.
ojw28,2014-11-03 15:58:30,https://api.github.com/repos/google/ExoPlayer/git/commits/38375670a6a0162c1fbd6094d8f3d67aa2f2c8ae,38375670a6a0162c1fbd6094d8f3d67aa2f2c8ae,"Merge pull request #115 from google/dev

Use largeHeap in demo app"
ojw28,2014-11-03 15:56:55,https://api.github.com/repos/google/ExoPlayer/git/commits/a21c9ebc31d154a963effa65f1297fc8b1c4d860,a21c9ebc31d154a963effa65f1297fc8b1c4d860,"Merge pull request #114 from google/dev

Use largeHeap in demo app"
ojw28,2014-11-03 15:54:58,https://api.github.com/repos/google/ExoPlayer/git/commits/dedbd5367f35ce70ace99f77c314653392de9231,dedbd5367f35ce70ace99f77c314653392de9231,Use largeHeap in demo app
ojw28,2014-11-03 12:21:45,https://api.github.com/repos/google/ExoPlayer/git/commits/059835e357ec11f54f52831704fe9490da801bf3,059835e357ec11f54f52831704fe9490da801bf3,"Merge pull request #113 from google/dev

dev -> dev-l"
ojw28,2014-11-03 12:21:04,https://api.github.com/repos/google/ExoPlayer/git/commits/f4a5cd637fe13791b2aebc13e38ba4df5b60627b,f4a5cd637fe13791b2aebc13e38ba4df5b60627b,"Merge pull request #112 from google/dev

dev -> dev-hls"
ojw28,2014-11-03 12:06:35,https://api.github.com/repos/google/ExoPlayer/git/commits/deb7f2badd8719ea9cf55038e325d1dc75c482b9,deb7f2badd8719ea9cf55038e325d1dc75c482b9,Add AAC test stream.
ojw28,2014-11-03 12:01:53,https://api.github.com/repos/google/ExoPlayer/git/commits/19eb7795fe27d78193808a0cccdfa6bdc0b540df,19eb7795fe27d78193808a0cccdfa6bdc0b540df,"Fix default startNumber.

Issue: #108"
ojw28,2014-11-03 12:01:25,https://api.github.com/repos/google/ExoPlayer/git/commits/da26b03d9cf4e63fed9bf3f6d0115159c6b16fb0,da26b03d9cf4e63fed9bf3f6d0115159c6b16fb0,Minor setup tweaks.
ojw28,2014-10-28 19:48:54,https://api.github.com/repos/google/ExoPlayer/git/commits/4c146ee28d6a867a08b850f10d2be0b6051b1298,4c146ee28d6a867a08b850f10d2be0b6051b1298,"Neaten TsExtractor a little.

- Add a readBit method to BitsArray for reading a boolean flag.
- Make things accessed from inner classes package visibility to avoid
  the compiler generating thunk methods."
ojw28,2014-10-28 19:30:00,https://api.github.com/repos/google/ExoPlayer/git/commits/d71b9b7ca11b5fa556e8d931cc94308884f31a4f,d71b9b7ca11b5fa556e8d931cc94308884f31a4f,"Merge pull request #100 from google/dev

dev -> dev-l"
ojw28,2014-10-28 19:29:29,https://api.github.com/repos/google/ExoPlayer/git/commits/b6bbf50c0ed8f6ded9110bc6457c3bee6fdec17b,b6bbf50c0ed8f6ded9110bc6457c3bee6fdec17b,"Merge pull request #99 from google/dev

dev -> dev-hls"
ojw28,2014-10-28 19:25:10,https://api.github.com/repos/google/ExoPlayer/git/commits/2422912be841003e2c8f5fd9f657304f1565341b,2422912be841003e2c8f5fd9f657304f1565341b,"Refactor HLS support.

- The HlsSampleSource now owns the extractor. TsChunk is more or less dumb.
  The previous model was weird, because you'd end up ""reading"" samples from
  TsChunk objects that were actually parsed from the previous chunk (due to
  the way the extractor was shared and maintained internal queues).
- Split out consuming and reading in the extractor.
- Make it so we consume 5s ahead. This is a window we allow for uneven
  interleaving, whilst preventing huge read-ahead (e.g. in the case of sparse
  ID3 samples).
- Avoid flushing the extractor for a discontinuity until it has been fully
  drained of previously parsed samples. This avoids skipping media shortly
  before discontinuities.
- Also made start-up faster by avoiding double-loading the first segment.

Issue: #3"
ojw28,2014-10-28 18:22:26,https://api.github.com/repos/google/ExoPlayer/git/commits/78f34cf480516bf1d63279e63a55a49591af7e6c,78f34cf480516bf1d63279e63a55a49591af7e6c,Add svg source for diagrams.
ojw28,2014-10-28 17:55:21,https://api.github.com/repos/google/ExoPlayer/git/commits/11cbe2819eceef362be7103d16698ff2f62b7bcb,11cbe2819eceef362be7103d16698ff2f62b7bcb,Clean up project files.
andudo,2014-10-28 17:24:12,https://api.github.com/repos/google/ExoPlayer/git/commits/d3a05c9a44cde42097a55058e2906e2395b636a6,d3a05c9a44cde42097a55058e2906e2395b636a6,Add ID3 Timed Metadata support for HLS #67
ojw28,2014-10-28 14:25:12,https://api.github.com/repos/google/ExoPlayer/git/commits/ca310100283388140bd5b77f4d17ba4104af9019,ca310100283388140bd5b77f4d17ba4104af9019,Add HLS support to simple variant of demo app. Plus cleanup.
ojw28,2014-10-28 14:19:18,https://api.github.com/repos/google/ExoPlayer/git/commits/dd2921f9b27586d06bbc48fd930bd1f663663ce6,dd2921f9b27586d06bbc48fd930bd1f663663ce6,"Merge pull request #97 from google/dev

dev"
ojw28,2014-10-28 14:18:56,https://api.github.com/repos/google/ExoPlayer/git/commits/3bee259de90003d555df9eb4daccbace5f75bc1a,3bee259de90003d555df9eb4daccbace5f75bc1a,"Merge pull request #96 from google/dev

dev -> dev-hls"
ojw28,2014-10-28 14:15:52,https://api.github.com/repos/google/ExoPlayer/git/commits/552db2fa7c8e83ee934f490e4873154789fdf367,552db2fa7c8e83ee934f490e4873154789fdf367,"Avoid spurious preparing->idle->preparing transition in demo app.

Issue #81"
ojw28,2014-10-28 14:12:55,https://api.github.com/repos/google/ExoPlayer/git/commits/c34f7368aeb28d21a9255e995f8b0e346dc61527,c34f7368aeb28d21a9255e995f8b0e346dc61527,Minor tweak to UriDataSource.
ojw28,2014-10-28 10:08:42,https://api.github.com/repos/google/ExoPlayer/git/commits/5ba3f1eea34e22ee71e2ef1f83e17b6a4d756fcf,5ba3f1eea34e22ee71e2ef1f83e17b6a4d756fcf,Fix build.
ojw28,2014-10-27 11:20:39,https://api.github.com/repos/google/ExoPlayer/git/commits/b5c4148f8f587cf19abb4e611fa726b58bdf6cb2,b5c4148f8f587cf19abb4e611fa726b58bdf6cb2,Use UriDataSource in demo app.
ojw28,2014-10-27 11:06:31,https://api.github.com/repos/google/ExoPlayer/git/commits/119eb6712ad0c8ebe577d744eadaf45780907c2d,119eb6712ad0c8ebe577d744eadaf45780907c2d,"Merge pull request #93 from google/dev

Dev -> Dev-hls"
ojw28,2014-10-27 11:06:10,https://api.github.com/repos/google/ExoPlayer/git/commits/1057a458120adad850eb83708aa26009541d36ce,1057a458120adad850eb83708aa26009541d36ce,"Merge pull request #92 from google/dev

Dev -> Dev-l"
ojw28,2014-10-27 11:00:04,https://api.github.com/repos/google/ExoPlayer/git/commits/192cdc66a2ba13292f3cfd7090dc8c810302e53f,192cdc66a2ba13292f3cfd7090dc8c810302e53f,Ignore secure decoders. They shouldn't be explicitly listed.
ojw28,2014-10-27 10:59:37,https://api.github.com/repos/google/ExoPlayer/git/commits/067422a491da0fe5955a98946961bf3827b90b74,067422a491da0fe5955a98946961bf3827b90b74,Cleanup TextTrackRenderer.
ojw28,2014-10-27 10:56:52,https://api.github.com/repos/google/ExoPlayer/git/commits/5f6b197355e27e5bad497f1c9859c4f22e8824b5,5f6b197355e27e5bad497f1c9859c4f22e8824b5,"Allow direct and indirect buffer replacement.

Also tweak ManifestFetcher."
ojw28,2014-10-27 10:54:51,https://api.github.com/repos/google/ExoPlayer/git/commits/ae6e082d2f4ed4304211a9c818afd81e5b8a7388,ae6e082d2f4ed4304211a9c818afd81e5b8a7388,Add a UriDataSource for reading from file or network.
ojw28,2014-10-27 10:53:39,https://api.github.com/repos/google/ExoPlayer/git/commits/6aeb989327a9cdd1dd2ce9d924083310e825f522,6aeb989327a9cdd1dd2ce9d924083310e825f522,Add some MimeTypes that will be useful in the future.
ojw28,2014-10-27 10:52:45,https://api.github.com/repos/google/ExoPlayer/git/commits/f859205438a496c7859233e5880b086984bd58d7,f859205438a496c7859233e5880b086984bd58d7,Let FileDataSource report to a TransferListener.
ojw28,2014-10-27 10:51:45,https://api.github.com/repos/google/ExoPlayer/git/commits/b8415dba599ef681f371f25b2fc9df21ed2bc9e0,b8415dba599ef681f371f25b2fc9df21ed2bc9e0,"Parse all UUID boxes, not just the first one."
ojw28,2014-10-20 15:59:46,https://api.github.com/repos/google/ExoPlayer/git/commits/4c348d8aa6554c2f27c4d105f471488842154567,4c348d8aa6554c2f27c4d105f471488842154567,"Merge pull request #83 from google/dev

Pull dev -> dev-l"
ojw28,2014-10-20 15:59:18,https://api.github.com/repos/google/ExoPlayer/git/commits/c2c7a75681642989c3facf8958479be73906c740,c2c7a75681642989c3facf8958479be73906c740,"Merge pull request #82 from google/dev

Pull dev -> dev-hls"
ojw28,2014-10-20 15:55:38,https://api.github.com/repos/google/ExoPlayer/git/commits/1f0d41188656acb619014dde3f6f01a980f298ae,1f0d41188656acb619014dde3f6f01a980f298ae,Make mpd parser more ameanable for extension.
ojw28,2014-10-20 15:54:51,https://api.github.com/repos/google/ExoPlayer/git/commits/5a8713321914344286527fc8fd8a343074b8b650,5a8713321914344286527fc8fd8a343074b8b650,Add case for 7.1 audio.
ojw28,2014-10-20 15:53:43,https://api.github.com/repos/google/ExoPlayer/git/commits/5f0be427a46a6b902091cf46bda2a02deba3453e,5f0be427a46a6b902091cf46bda2a02deba3453e,"Update HlsSampleSource + correctly propagate error from prepare.

Issue: #81"
ojw28,2014-10-20 15:45:56,https://api.github.com/repos/google/ExoPlayer/git/commits/48536118039c46787836287aa7ed9f06710906a1,48536118039c46787836287aa7ed9f06710906a1,"Remove additional ""/"" from merged URLs.

Issue: #81"
ojw28,2014-10-15 19:42:26,https://api.github.com/repos/google/ExoPlayer/git/commits/60d162df18076b4db3034b8ff944da86d372a2ef,60d162df18076b4db3034b8ff944da86d372a2ef,Fix overflow when comparing HLS Segments for long videos.
ojw28,2014-10-09 20:55:10,https://api.github.com/repos/google/ExoPlayer/git/commits/fcd9ec6c23a556cea61ae1c7145471d4e18ed0f7,fcd9ec6c23a556cea61ae1c7145471d4e18ed0f7,Tweak audio renderer to match dev/dev-hls.
ojw28,2014-10-09 16:54:30,https://api.github.com/repos/google/ExoPlayer/git/commits/fd3016cd13805150c0dac32220b328be071c8c51,fd3016cd13805150c0dac32220b328be071c8c51,"Use setVolume on API level 21 devices, plus minor naming cleanup."
ojw28,2014-10-09 16:31:36,https://api.github.com/repos/google/ExoPlayer/git/commits/d2e480f01b73fd252a64776ec31f95fd816eb11e,d2e480f01b73fd252a64776ec31f95fd816eb11e,"Merge pull request #75 from google/dev

Merge dev -> dev-hls"
ojw28,2014-10-09 16:31:05,https://api.github.com/repos/google/ExoPlayer/git/commits/989bbef24eaab393de6df70608d16c34147e1a33,989bbef24eaab393de6df70608d16c34147e1a33,"Merge pull request #74 from google/dev

Merge dev -> dev-l"
ojw28,2014-10-09 16:27:20,https://api.github.com/repos/google/ExoPlayer/git/commits/759431048d7c990c2c3ef8a28e73c8e3e843b680,759431048d7c990c2c3ef8a28e73c8e3e843b680,"Treat ""no chunk to load yet"" in the same way as finished.

The key change here is that nextLoadPositionUs is set to -1
if we're not loading but don't have a next chunk ready to
load. This ensures that ""missing chunks"" in one stream don't
prevent chunks in another stream from loading. This occurs
in SmoothStreaming with TTML subtitles, where the chunks are
sparse."
ojw28,2014-10-09 16:26:01,https://api.github.com/repos/google/ExoPlayer/git/commits/027d9eefbdfdfbc74208376cc1834e54a8cd1d93,027d9eefbdfdfbc74208376cc1834e54a8cd1d93,"Smoother playback #1.

Propagate elapsedRealtimeUs to the video renderer. This allows
the renderer to calculate and adjust for the elapsed time since
the start of the current rendering loop. Typically this is <2ms,
but there situations where it can go higher (normally when the
video renderer ends up processing more than 1 output buffer in
a single loop).

Also made variable naming more consistent throughout the package."
ojw28,2014-10-09 16:19:14,https://api.github.com/repos/google/ExoPlayer/git/commits/3b4409ae0b1627d2dd238d15e2723c029b1ee181,3b4409ae0b1627d2dd238d15e2723c029b1ee181,Allow relaxation of TTML validity requirement when parsing subtitles.
ojw28,2014-10-09 16:17:43,https://api.github.com/repos/google/ExoPlayer/git/commits/d4e824634c85f4f2b6b0bfac200a7bbfeddd3aba,d4e824634c85f4f2b6b0bfac200a7bbfeddd3aba,"Throw a checked exception rather than unchecked one.

So that we actually catch it, rather than having the process crash!"
ojw28,2014-10-09 16:16:13,https://api.github.com/repos/google/ExoPlayer/git/commits/43712ce41c659181bf8f7f8b3d133732a5ace9be,43712ce41c659181bf8f7f8b3d133732a5ace9be,Cap AudioTrack latencies at 10 seconds and log a warning if too large.
ojw28,2014-10-09 16:13:14,https://api.github.com/repos/google/ExoPlayer/git/commits/ac18ac087bf9d178580112edf386fb56016da786,ac18ac087bf9d178580112edf386fb56016da786,Fix missing ->IN_SYNC transition.
ojw28,2014-10-02 11:23:08,https://api.github.com/repos/google/ExoPlayer/git/commits/be721943c614ea04a9bbdc316ac3f2d5097b5ab5,be721943c614ea04a9bbdc316ac3f2d5097b5ab5,Fix incorrect condition.
ojw28,2014-10-01 21:17:32,https://api.github.com/repos/google/ExoPlayer/git/commits/1c92b28b16722b94229438c50ab70f6bee093e88,1c92b28b16722b94229438c50ab70f6bee093e88,"Merge pull request #65 from google/dev

Add file missing from ""Improve subtitle handling"" change."
ojw28,2014-10-01 21:17:11,https://api.github.com/repos/google/ExoPlayer/git/commits/7794df7bd834e7b649fc9c2a41788179769bd699,7794df7bd834e7b649fc9c2a41788179769bd699,"Merge pull request #64 from google/dev

Add file missing from ""Improve subtitle handling"" change."
ojw28,2014-10-01 21:14:44,https://api.github.com/repos/google/ExoPlayer/git/commits/dec40bcbd36e84a35367160a008818a9402ac04f,dec40bcbd36e84a35367160a008818a9402ac04f,"Add file missing from ""Improve subtitle handling"" change."
ojw28,2014-10-01 21:10:16,https://api.github.com/repos/google/ExoPlayer/git/commits/f4d3079bba4178a71311d22b749182a1f08545af,f4d3079bba4178a71311d22b749182a1f08545af,"Merge pull request #63 from google/dev

Update dev-l"
ojw28,2014-10-01 21:09:48,https://api.github.com/repos/google/ExoPlayer/git/commits/422f23aceb4695583c5b94b4b17ef003fdd28cda,422f23aceb4695583c5b94b4b17ef003fdd28cda,"Merge pull request #62 from google/dev

Update dev-hls"
andudo,2014-10-01 20:54:50,https://api.github.com/repos/google/ExoPlayer/git/commits/d64036c5ed0d34d3dd3c17cb2ef3101882e2aeab,d64036c5ed0d34d3dd3c17cb2ef3101882e2aeab,Add basic HLS support (VOD and Live) with EXT-X-DISCONTINUITY.
ojw28,2014-10-01 20:27:25,https://api.github.com/repos/google/ExoPlayer/git/commits/8c665e3dd2d0c6dfb9a29e29f8885a9658461455,8c665e3dd2d0c6dfb9a29e29f8885a9658461455,"Improve subtitle handling.

- Move parsing onto a background thread. This is analogous
  to how frame decoding is pushed to MediaCodec, and should
  prevent possible jank when new subtitle samples are parsed.
  This is more important for out-of-band subtitles, which can
  take a second or two to parse fully.

- Add Useful DataSpec method."
ojw28,2014-10-01 20:26:12,https://api.github.com/repos/google/ExoPlayer/git/commits/ea1ab674a402e446e3d024099897ab4dd9d8c39d,ea1ab674a402e446e3d024099897ab4dd9d8c39d,Strip trailing newline from WebVTT subtitles.
ojw28,2014-10-01 20:25:02,https://api.github.com/repos/google/ExoPlayer/git/commits/9fc963acc647b9cec4e9b0064c32bd8e6459b915,9fc963acc647b9cec4e9b0064c32bd8e6459b915,Add missing param documentation.
ojw28,2014-10-01 20:23:50,https://api.github.com/repos/google/ExoPlayer/git/commits/8ea3f9805c495a0deef051aca2909b3533158c34,8ea3f9805c495a0deef051aca2909b3533158c34,Add class to enable loading of out-of-band subtitle files.
ojw28,2014-09-29 15:59:08,https://api.github.com/repos/google/ExoPlayer/git/commits/e99aaa4d67606183026228da78d258c45e25d8ec,e99aaa4d67606183026228da78d258c45e25d8ec,Update CaptionStyleCompat for L.
ojw28,2014-09-25 19:29:44,https://api.github.com/repos/google/ExoPlayer/git/commits/9cfe5fcf44337e3eeee52ba9326cfd3273aa722a,9cfe5fcf44337e3eeee52ba9326cfd3273aa722a,"API level 21 enhancements for ExoPlayer playbacks.

- Use native frame release timing in video renderer for
  smoother video playback.
- Avoid unnecessary memory copy steps in audio renderer.
- Use non-blocking AudioTrack API."
ojw28,2014-09-25 19:15:59,https://api.github.com/repos/google/ExoPlayer/git/commits/dd30632aa1522b47d14b0ad9aaad45c5ccaf4b19,dd30632aa1522b47d14b0ad9aaad45c5ccaf4b19,"SmoothStreaming Live support.

Issue: #12"
ojw28,2014-09-25 19:13:40,https://api.github.com/repos/google/ExoPlayer/git/commits/4adf8f77f49fa1d7f21f3629e68fc94b6c5f9c4a,4adf8f77f49fa1d7f21f3629e68fc94b6c5f9c4a,Tweak stop/disable cycles.
ojw28,2014-09-23 10:21:44,https://api.github.com/repos/google/ExoPlayer/git/commits/fc230733aed9ec2f17764da16cff45cb163a364b,fc230733aed9ec2f17764da16cff45cb163a364b,"Ignore blockingSendMessage calls after release.

Previously we'd end up blocking forever in this case, which
is the worst thing we could do :). We could either throw an
exception or just print a warning. Printing a warning is more
in line with what other methods do (Handler prints a ""sending
message to dead thread"" warning)."
ojw28,2014-09-23 10:17:36,https://api.github.com/repos/google/ExoPlayer/git/commits/da125bb5ccd67c94dcc9c82d0d1754802b222fdf,da125bb5ccd67c94dcc9c82d0d1754802b222fdf,"Merge DashLiveMpdFetcher logic into generic ManifestFetcher.

This allows ManifestFetcher to both execute the initial
manifest load and be plugged into an ExoPlayer ChunkSource,
where it can be used for repeated manfiest refreshes during
live playback."
ojw28,2014-09-23 10:14:16,https://api.github.com/repos/google/ExoPlayer/git/commits/f82a331728650ef8f40aa93e00c493f8902a9b58,f82a331728650ef8f40aa93e00c493f8902a9b58,"Fix StreamingDrmSessionmanager.

Use locally bound variable instead of class variable."
ojw28,2014-09-23 10:13:54,https://api.github.com/repos/google/ExoPlayer/git/commits/1ed048dba80f4b3e2e9e8da8aff4578f2e24b0d1,1ed048dba80f4b3e2e9e8da8aff4578f2e24b0d1,Clean up TTML timestamp parsing.
ojw28,2014-09-23 10:13:31,https://api.github.com/repos/google/ExoPlayer/git/commits/7cb55e23f6877fccdc376b705c16e8eb8b051c36,7cb55e23f6877fccdc376b705c16e8eb8b051c36,Correctly handle zero length fragmentRun.
ojw28,2014-09-23 10:13:09,https://api.github.com/repos/google/ExoPlayer/git/commits/4fdd68facf9861dfbdf48d9c86c1a53a361b3f54,4fdd68facf9861dfbdf48d9c86c1a53a361b3f54,Fix SmoothStreamingManifest to handle large timestamps.
ojw28,2014-09-19 17:36:12,https://api.github.com/repos/google/ExoPlayer/git/commits/c4e1c3543c6857e897293e9f75aeeddd65830085,c4e1c3543c6857e897293e9f75aeeddd65830085,Enhance Loader API.
ojw28,2014-09-19 17:34:46,https://api.github.com/repos/google/ExoPlayer/git/commits/ce5eea72d2e2331a2d4057bf835b85da53f1a892,ce5eea72d2e2331a2d4057bf835b85da53f1a892,Auto-infer character encoding.
ojw28,2014-09-19 17:34:05,https://api.github.com/repos/google/ExoPlayer/git/commits/4344675098bd221271b3135873af1c6aa0c9b631,4344675098bd221271b3135873af1c6aa0c9b631,Add WebVTT parser.
ojw28,2014-09-19 17:33:23,https://api.github.com/repos/google/ExoPlayer/git/commits/525b309764303af559f4c37add838983128a2d6e,525b309764303af559f4c37add838983128a2d6e,SmoothStreaming - Parse last chunk duration.
ojw28,2014-09-19 17:32:21,https://api.github.com/repos/google/ExoPlayer/git/commits/f52742b10030cbd55d0a3ed3c2f4ccddbdbed740,f52742b10030cbd55d0a3ed3c2f4ccddbdbed740,"Ensure that we try and call release on a renderer

Do this even if stop/disable fails."
ojw28,2014-09-19 17:31:17,https://api.github.com/repos/google/ExoPlayer/git/commits/4e96caa623d1ceed484d06e049bc8c27c1e9aea7,4e96caa623d1ceed484d06e049bc8c27c1e9aea7,"Resolve reference Uris correctly.

Ignore the path of the base Uri if the reference starts with ""/"".
Spec - http://tools.ietf.org/html/rfc3986#section-5.2.2"
ojw28,2014-09-19 17:30:21,https://api.github.com/repos/google/ExoPlayer/git/commits/bf95592b2c7f1998b676b0fe5c21af3ee9fbe907,bf95592b2c7f1998b676b0fe5c21af3ee9fbe907,Remove unused import. Tweak documentation.
ojw28,2014-09-19 17:29:34,https://api.github.com/repos/google/ExoPlayer/git/commits/8378019839ae4c37264d0bcd9f37f481c28c7a35,8378019839ae4c37264d0bcd9f37f481c28c7a35,Fix SmoothStreaming where audio FourCC is missing.
ojw28,2014-09-19 17:26:04,https://api.github.com/repos/google/ExoPlayer/git/commits/b2fc944af14c6d87e6eeb48ef5dc8e4bf6906ee7,b2fc944af14c6d87e6eeb48ef5dc8e4bf6906ee7,"Remove getLoadedData API from ExoPlayer components.

This API wasn't particularly nice. Best to remove it whilst
hopefully no-one is using it. Leaving the ReadHead abstraction
in place, since it might well prove useful in the future."
ojw28,2014-09-11 17:03:11,https://api.github.com/repos/google/ExoPlayer/git/commits/c19faa63cd97ba8f8ce4cb26b05488cafa81c479,c19faa63cd97ba8f8ce4cb26b05488cafa81c479,A few tiny bug fixes.
ojw28,2014-09-11 15:34:35,https://api.github.com/repos/google/ExoPlayer/git/commits/ec90eac301ba212b3bd6c3c70e26c66a65138597,ec90eac301ba212b3bd6c3c70e26c66a65138597,Support anamorphic video content.
ojw28,2014-09-11 15:30:39,https://api.github.com/repos/google/ExoPlayer/git/commits/6c3ae7f1757789936294b6ba79586dbf7ca43f31,6c3ae7f1757789936294b6ba79586dbf7ca43f31,Add SubtitleView and CaptionStyleCompat to ExoPlayer.
ojw28,2014-09-11 15:26:43,https://api.github.com/repos/google/ExoPlayer/git/commits/e4b35e884aec5313f4b2a0f2102fe359433f7cc6,e4b35e884aec5313f4b2a0f2102fe359433f7cc6,Transition ExoPlayer to use longs for ms timestamps.
ojw28,2014-09-11 15:23:50,https://api.github.com/repos/google/ExoPlayer/git/commits/d85f4abb2ba2ff374720445c7999af9a0b473b63,d85f4abb2ba2ff374720445c7999af9a0b473b63,Support negative media timestamps (if people *really* want to send us them!).
ojw28,2014-09-11 15:23:13,https://api.github.com/repos/google/ExoPlayer/git/commits/6b2b6ca4799ef7c8a38c86d8ece60e95d70cdfb1,6b2b6ca4799ef7c8a38c86d8ece60e95d70cdfb1,Prevent device provisioning when another device provisioning request is already under process.
ojw28,2014-09-11 15:22:40,https://api.github.com/repos/google/ExoPlayer/git/commits/bc01a4f48d3afd2f612e4f91694c36f4f980c42d,bc01a4f48d3afd2f612e4f91694c36f4f980c42d,"Relax MediaCodecVideoTrackRenderer.canReconfigureCodec().

Allow non-H264 adaptive decoders."
ojw28,2014-09-11 15:19:26,https://api.github.com/repos/google/ExoPlayer/git/commits/bf5ee6ff230a60a0c7c716c902712d24ea08aaa0,bf5ee6ff230a60a0c7c716c902712d24ea08aaa0,"1. Parse live attributes from SmoothStreaming manifest.

2. Common interface for manifest parsers.
- This effectively moves the common interface from the Fetcher level
  (i.e. ManifestFetcher) to the Parser level (i.e. ManifestParser).
- The motivation here is to allow the implementation of components that
  can work with a generic ManifestParser implementation."
ojw28,2014-09-11 15:09:52,https://api.github.com/repos/google/ExoPlayer/git/commits/d4e35358a1737f5e5d7261735cdaf1b89e67c463,d4e35358a1737f5e5d7261735cdaf1b89e67c463,Fix bad assertion. It doesn't hold for TTML subtitle chunks.
ojw28,2014-09-08 10:41:56,https://api.github.com/repos/google/ExoPlayer/git/commits/280ccb16305dc085f6009072c624e753f34fb61c,280ccb16305dc085f6009072c624e753f34fb61c,"Merge pull request #43 from google/dev

Merge 1.0.13 to master"
ojw28,2014-09-08 10:38:20,https://api.github.com/repos/google/ExoPlayer/git/commits/6e9ba9ba47e842b9074a26ded3e0b079492eb6e8,6e9ba9ba47e842b9074a26ded3e0b079492eb6e8,Bump version to 1.0.13.
ojw28,2014-09-08 10:35:39,https://api.github.com/repos/google/ExoPlayer/git/commits/ddd2d004f0031842899e4a5015913ace4f1155b2,ddd2d004f0031842899e4a5015913ace4f1155b2,"Make SmoothStreaming manifest more robust.
- Skips unrecognized elements rather than crashing.
- FourCC treated as required for video and optional elsewhere,
  as per the SmoothStreaming spec.
- Only parse initData text when we're actually in the ProtectionHeader element"
ojw28,2014-09-08 10:34:06,https://api.github.com/repos/google/ExoPlayer/git/commits/181eceaf4bbed9697ac38a62a80b0d377d929f2c,181eceaf4bbed9697ac38a62a80b0d377d929f2c,Fixed MPD date/time parsing issue.
ojw28,2014-09-08 10:33:12,https://api.github.com/repos/google/ExoPlayer/git/commits/52a300f1fd56d96b6ea2bea8b55cd3b4a6f57832,52a300f1fd56d96b6ea2bea8b55cd3b4a6f57832,Merge fMP4/H264 and WebM/VP9 DASH implementations.
ojw28,2014-09-08 10:23:35,https://api.github.com/repos/google/ExoPlayer/git/commits/1ddd5c6e166e97cda0b02b47d11365f1632d11a7,1ddd5c6e166e97cda0b02b47d11365f1632d11a7,Parse some DASH manifest components for DVB LIVE.
ojw28,2014-09-08 10:21:18,https://api.github.com/repos/google/ExoPlayer/git/commits/5d35698d8faa8a62ec22351f8d801691e05b0f5b,5d35698d8faa8a62ec22351f8d801691e05b0f5b,"Make MediaCodecTrackRenderer discard non-keyframes after seek.
This means that after a decoder flush, the renderer will avoid
feeding non-keyframes into the decoder until it has received and
fed the first keyframe. The decoder has no way of correctly
decoding non-keyframes that arrive before a keyframe."
ojw28,2014-09-08 10:20:11,https://api.github.com/repos/google/ExoPlayer/git/commits/5059690a7a1f80f9277d028a128592c4b376164d,5059690a7a1f80f9277d028a128592c4b376164d,Add https->http redirect sample video.
ojw28,2014-09-08 10:18:36,https://api.github.com/repos/google/ExoPlayer/git/commits/5b2f0566a74a7e2ac64895822623e4388ffec172,5b2f0566a74a7e2ac64895822623e4388ffec172,"Fix potential cause of infinite-spinner-without-failure.
It looks like for the case of self-contained media segments,
it's possible to get stuck without failure in the case that
the load fails having loaded less than the length of the init
data."
ojw28,2014-09-08 10:17:21,https://api.github.com/repos/google/ExoPlayer/git/commits/92e320812113825c6a33a6a1fd573599554b9e2d,92e320812113825c6a33a6a1fd573599554b9e2d,"Don't try and read a trackEncryptionBox unless we actually have a saiz atom to parse.

Issue: #35"
ojw28,2014-09-08 10:15:44,https://api.github.com/repos/google/ExoPlayer/git/commits/14048b013a967e5956a67ee5ba314d3bb94ab458,14048b013a967e5956a67ee5ba314d3bb94ab458,"Add disclaimer to stop people getting confused by the minSdkVersion.

Issue: #31"
ojw28,2014-09-08 10:14:22,https://api.github.com/repos/google/ExoPlayer/git/commits/d465ab70291a1a16d34c4346a511f27b3b57935f,d465ab70291a1a16d34c4346a511f27b3b57935f,"Call FormatHolder what it really is.

Since we have a Format class as well, it's very confusing that
FormatHolder actually holds a MediaFormat. I think it's quite
likely that Format will need promoting into the root package as
part of the HLS work, which will make this even more confusing
(although it is possible that for HLS we'll define yet another
Format class, if it turns out we need significantly different
fields).

Note - I deliberately avoided renaming the formatHolder
args/params, because they're not particularly ambiguous and
because it introduces some ugly line breaks."
ojw28,2014-09-08 10:11:01,https://api.github.com/repos/google/ExoPlayer/git/commits/3b25928a133e2c6e49bf5636e7bb8561f103e68f,3b25928a133e2c6e49bf5636e7bb8561f103e68f,Make audio renderer more robust to bad getTimestamp values.
ojw28,2014-09-08 10:09:53,https://api.github.com/repos/google/ExoPlayer/git/commits/a7b88cd6a9bac4de5ef47b23e0d7fb50c570b3a6,a7b88cd6a9bac4de5ef47b23e0d7fb50c570b3a6,"Tighten isReady() up again.
- Bring back requirement for the first video frame to be rendered
  before isReady returns true, *unless* we've deduced that the
  upstream source is serving multiple renderers.
- Ditto for requiring that the audio track has some buffered data."
ojw28,2014-09-08 10:07:16,https://api.github.com/repos/google/ExoPlayer/git/commits/98a7573812f3031f2d3d2fd4ba2d86d7e2e2c818,98a7573812f3031f2d3d2fd4ba2d86d7e2e2c818,"Minor changes to fix Javadoc.

- cache ref didn't work because it referred to a private variable
  (which isn't documented) from a public interface definition
  (which is). Meaning the Javadoc generator was trying to link
  to documentation that didn't exist."
ojw28,2014-08-14 16:04:34,https://api.github.com/repos/google/ExoPlayer/git/commits/79c2f535c6f811361c9ffa674de4a5dba2120b85,79c2f535c6f811361c9ffa674de4a5dba2120b85,"Merge pull request #29 from google/dev

Merge 1.0.12 to master"
ojw28,2014-08-14 15:19:30,https://api.github.com/repos/google/ExoPlayer/git/commits/cc04fd1e76b988ac696271501355b71875ec13f0,cc04fd1e76b988ac696271501355b71875ec13f0,Fix the build.
ojw28,2014-08-14 14:45:33,https://api.github.com/repos/google/ExoPlayer/git/commits/5b9c92cb83f0b72ccae7f80ad17ccde9a72c212b,5b9c92cb83f0b72ccae7f80ad17ccde9a72c212b,Bump version to 1.0.12.
ojw28,2014-08-14 14:44:09,https://api.github.com/repos/google/ExoPlayer/git/commits/4e7b333aee2af26376230c054eee0d25c443134d,4e7b333aee2af26376230c054eee0d25c443134d,Support chunked requests.
ojw28,2014-08-12 20:35:13,https://api.github.com/repos/google/ExoPlayer/git/commits/af6e144adc5bb4dbf7d2022e56c01baf0879396e,af6e144adc5bb4dbf7d2022e56c01baf0879396e,"Fix bug introduced supporting self-contained media chunks.

The equals check we perform needs to ignore the max dimensions.
This tended to work in practice because formats would be the
same object, but in the case where different format objects
are used, things can break."
ojw28,2014-08-12 13:16:28,https://api.github.com/repos/google/ExoPlayer/git/commits/5cfa9adaccedb78834eec094c221fe543d954e22,5cfa9adaccedb78834eec094c221fe543d954e22,Add missing C file.
ojw28,2014-08-12 13:13:43,https://api.github.com/repos/google/ExoPlayer/git/commits/58e9e61688002a7d75d2e3841a1b5d745559a4e3,58e9e61688002a7d75d2e3841a1b5d745559a4e3,Remove unnecessary SuppressWarning annotations.
ojw28,2014-08-12 13:12:05,https://api.github.com/repos/google/ExoPlayer/git/commits/e0a29c841ebcfb887c5562e4f12f985799e61b4a,e0a29c841ebcfb887c5562e4f12f985799e61b4a,Don't release AudioTrack unless we have to.
ojw28,2014-08-12 12:55:38,https://api.github.com/repos/google/ExoPlayer/git/commits/4a745b1cd84172e8d58c55ca561dd22ec5d339c3,4a745b1cd84172e8d58c55ca561dd22ec5d339c3,Optimize out quite a few allocations in FragmentedMp4Parser.
ojw28,2014-08-11 18:42:04,https://api.github.com/repos/google/ExoPlayer/git/commits/005e98fc34f7fc24d00673f930f29b9b21283983,005e98fc34f7fc24d00673f930f29b9b21283983,"Simplify parsing of encryption data + support SENC boxes.

Issue: #4"
ojw28,2014-08-11 17:38:39,https://api.github.com/repos/google/ExoPlayer/git/commits/8ec88402617cf8ba26803bc5aeacf650956726df,8ec88402617cf8ba26803bc5aeacf650956726df,"Minor cleanup.

- Add constants class. Currently housing a single lonely variable,
which is used generally throughout the library, and so no longer
nicely fits into a specific class.

- Rename a few other constants to add clear units.

- Made minor tweak to ExoPlayer documentation."
ojw28,2014-08-11 16:42:08,https://api.github.com/repos/google/ExoPlayer/git/commits/25a532656c25d5ce82e0f1b5cddc3e2e9b8f7e73,25a532656c25d5ce82e0f1b5cddc3e2e9b8f7e73,"Optimize some CodecCounter inefficiency.

1. Use ints rather than longs.
2. Remove some counters that dont seem hugely useful.
3. Replace use of volatile with explicit method calls that
   cause a memory barrier. This is a lot more efficient than
   using volatile because it can be invoked only once per
   doSomeWork."
ojw28,2014-08-01 14:56:26,https://api.github.com/repos/google/ExoPlayer/git/commits/9a124120ff3f2759fb08c0ff05b45c363cf6d065,9a124120ff3f2759fb08c0ff05b45c363cf6d065,"Changes around renderer readiness and extraction.

- Make MediaCodecTrackRenderer.isReady more permissive.
  This largely fixes #21
- Bring WebmExtractor closer to FragmentedMp4Extractor.
  The two will probably be placed under a common interface
  fairly soon, which will allow significant code
  deduplication."
ojw28,2014-08-01 14:54:32,https://api.github.com/repos/google/ExoPlayer/git/commits/41ff1e4071d3e06a3bb7e0e542bae7d5bfc8a60b,41ff1e4071d3e06a3bb7e0e542bae7d5bfc8a60b,Add CacheDataSource.Listener.
ojw28,2014-08-01 14:53:49,https://api.github.com/repos/google/ExoPlayer/git/commits/b1992c384895637ed232a93b193ac16a72f48e44,b1992c384895637ed232a93b193ac16a72f48e44,Don't call doSomeWork if we're preparing
ojw28,2014-08-01 14:53:08,https://api.github.com/repos/google/ExoPlayer/git/commits/2a82ff353b8b8a613a874a8d75e39b485a1a68a0,2a82ff353b8b8a613a874a8d75e39b485a1a68a0,"Make DefaultWebmExtractor handle cues and format independently.

* Remove concept of being prepared by simply reporting if format
and/or cues are known.
* Allow replacement of format and/or cues later in the stream.
* Initialization and index segments can be parsed independently
of one another but must be in order due to internal WebM dependencies.
* Let seekTo() work even when cues are unknown."
ojw28,2014-08-01 14:51:48,https://api.github.com/repos/google/ExoPlayer/git/commits/32464e6de4f6a79bffc4e634f2dc59dfae3d4a9d,32464e6de4f6a79bffc4e634f2dc59dfae3d4a9d,Fix integer variant of library version.
ojw28,2014-08-01 14:51:21,https://api.github.com/repos/google/ExoPlayer/git/commits/ad26085e5c7a911101fd2415db3b2c45a129a53f,ad26085e5c7a911101fd2415db3b2c45a129a53f,Finish painful bytes/sec -> bits/sec conversion.
ojw28,2014-08-01 14:44:15,https://api.github.com/repos/google/ExoPlayer/git/commits/0f57a5f1cf16e9e0abe98fbc025ce03831c371c2,0f57a5f1cf16e9e0abe98fbc025ce03831c371c2,Merge branch 'dev' of persistent-https://github.com/google/ExoPlayer into dev
ojw28,2014-07-28 13:31:20,https://api.github.com/repos/google/ExoPlayer/git/commits/ef6be7957df4911e2eef6aa92aedd459e78ab42e,ef6be7957df4911e2eef6aa92aedd459e78ab42e,Merge branch 'dev' of https://github.com/google/ExoPlayer into dev
ojw28,2014-07-28 13:29:21,https://api.github.com/repos/google/ExoPlayer/git/commits/b3277c666b14651023b42eecb3ce5e436d62af33,b3277c666b14651023b42eecb3ce5e436d62af33,Add language to Format (+other misc fix).
ojw28,2014-07-24 10:23:36,https://api.github.com/repos/google/ExoPlayer/git/commits/c1259969f80ba2feb51734c9b37dce938b9d2843,c1259969f80ba2feb51734c9b37dce938b9d2843,"Merge pull request #17 from rejasupotaro/dev

Thanks!"
rejasupotaro,2014-07-15 08:49:46,https://api.github.com/repos/google/ExoPlayer/git/commits/e33f5a514c79f3b3126a7f12aa668fe3aea61c3b,e33f5a514c79f3b3126a7f12aa668fe3aea61c3b,Update README.md
rejasupotaro,2014-07-15 08:43:34,https://api.github.com/repos/google/ExoPlayer/git/commits/fa83b2fa5e9b7e348b763c1f6b1822e8b6cf9340,fa83b2fa5e9b7e348b763c1f6b1822e8b6cf9340,Add jarRelease task
rejasupotaro,2014-07-15 08:38:50,https://api.github.com/repos/google/ExoPlayer/git/commits/5a888f3a6de3694e7da4b56b2939d2ae50bedc63,5a888f3a6de3694e7da4b56b2939d2ae50bedc63,Update tools version
rejasupotaro,2014-07-15 08:35:26,https://api.github.com/repos/google/ExoPlayer/git/commits/50f69f22dfe35dc65119b03454410f24998755c1,50f69f22dfe35dc65119b03454410f24998755c1,Add gitignore
ojw28,2014-07-18 13:56:36,https://api.github.com/repos/google/ExoPlayer/git/commits/553a1d2ec15b3d34f76aff720d42de2f663eb55f,553a1d2ec15b3d34f76aff720d42de2f663eb55f,"Merge pull request #16 from google/dev

Add missing files."
ojw28,2014-07-18 13:55:24,https://api.github.com/repos/google/ExoPlayer/git/commits/bb5cfd52c52dfc328c2aef2b54fbb57407331b7e,bb5cfd52c52dfc328c2aef2b54fbb57407331b7e,Add missing files.
ojw28,2014-07-18 13:43:59,https://api.github.com/repos/google/ExoPlayer/git/commits/4228f2cfa376155aae80ff4561b83ce999697951,4228f2cfa376155aae80ff4561b83ce999697951,"Merge pull request #15 from google/dev

Merge 1.0.11 to master"
ojw28,2014-07-18 13:37:46,https://api.github.com/repos/google/ExoPlayer/git/commits/1ed65dfb85797a48ef062552c7708aa3b9143ac6,1ed65dfb85797a48ef062552c7708aa3b9143ac6,Add some additional information to README.md.
ojw28,2014-07-18 13:31:55,https://api.github.com/repos/google/ExoPlayer/git/commits/edb5446440e717b7ba96e2dca765689d823ac728,edb5446440e717b7ba96e2dca765689d823ac728,Bump version to 1.0.11.
ojw28,2014-07-18 13:30:30,https://api.github.com/repos/google/ExoPlayer/git/commits/62d17cabf0d57013593ef9a69c75f649259c33f7,62d17cabf0d57013593ef9a69c75f649259c33f7,"Add support for SegmentTemplate and SegmentList mpds.

Misc Notes:
- Removed content type filters because some of third parties
  don't set content type."
ojw28,2014-07-17 10:28:05,https://api.github.com/repos/google/ExoPlayer/git/commits/87461821fe0c4d502c91a449b9578e6c13ca31ad,87461821fe0c4d502c91a449b9578e6c13ca31ad,"Define DashSegmentIndex wrapper.

This paves the way for SegmentTemplate and SegmentList based
mpds, which will implement DashSegmentIndex directly rather than
parsing an index from the media stream.

- Define DashSegmentIndex.
- Make use of DashSegmentIndex in chunk sources.
- Define an implementation of DashSegmentIndex that wraps a SegmentIndex.
- Add method that will allow Representations to return a DashSegmentIndex
  directly in the future.
- Add support for non-contiguous index and initialization data in media streams.
  For the Webm case this isn't enabled yet due to extractor limitations.
- Removed ability to fetch multiple chunks. This functionality does not extend
  properly to SegmentList and SegmentTemplate variants of DASH."
ojw28,2014-07-15 17:32:37,https://api.github.com/repos/google/ExoPlayer/git/commits/d7d14037b811187a8e1ed6b885932ceb68422609,d7d14037b811187a8e1ed6b885932ceb68422609,"Add utility classes for SegmentTemplate/SegmentList refactor.

A step towards supporting SegmentTemplate style MPDs."
ojw28,2014-07-15 12:55:59,https://api.github.com/repos/google/ExoPlayer/git/commits/058333565d3f0e25e3a4d96789dd76c3c58a1c31,058333565d3f0e25e3a4d96789dd76c3c58a1c31,"Use bits/sec instead of bytes/sec for format bandwidth.

Why: This was a bad initial choice. Manifests typically define bandwidth in
bits/sec. If you divide by 8 then you're throwing away information due to
rounding. Unfortunately it turns out that SegmentTemplate based manifests
require you to be able to recall the bitrate exactly (because it's substituted
in during segment URL construction).

Medium term: We should consider converting all our bandwidth estimation
over to bits/sec as well.

Note1: Also changed Period id to be a string, to match the mpd spec.
Note2: Made small optimization in FormatEvaluator to not consider discarding
the first chunk (durationBeforeThisSegmentUs will always be negative, and even
in the error case where it's not, removing the first thunk should be an error)."
ojw28,2014-07-15 11:47:08,https://api.github.com/repos/google/ExoPlayer/git/commits/4366afc273d058928b947d3e6795484eb6d7bc19,4366afc273d058928b947d3e6795484eb6d7bc19,"Support self-contained media chunks.

- Support parsing of moov atoms contained within each chunk.
- Also do a small cleanup to WebM parser."
ojw28,2014-07-10 11:01:12,https://api.github.com/repos/google/ExoPlayer/git/commits/16fe6a809e97b4b348cb542a095faf49e7cee0fc,16fe6a809e97b4b348cb542a095faf49e7cee0fc,"More flexible mimeType handling in mpd parser.

- Allow the content type of an adaptation set to be inferred
from the mimeTypes of the contained representations.
- Ensure the contained mimeTypes are consistent with one
another, and with the adaptation set.

Ref: Issue #2"
ojw28,2014-07-09 22:20:23,https://api.github.com/repos/google/ExoPlayer/git/commits/686ac2a6f5200572a97c66a6e5e325a4e46a31af,686ac2a6f5200572a97c66a6e5e325a4e46a31af,Refactor WebM extractor.
ojw28,2014-07-09 22:15:58,https://api.github.com/repos/google/ExoPlayer/git/commits/9e16dec2f84be1192c0b1562cdc55d5314d1e8d3,9e16dec2f84be1192c0b1562cdc55d5314d1e8d3,"Add support for relative baseUrls in DASH manifests.

Ref: Issue #2"
ojw28,2014-07-09 14:34:42,https://api.github.com/repos/google/ExoPlayer/git/commits/1b957268a6b52e952ece23eb3515678344c8c4d9,1b957268a6b52e952ece23eb3515678344c8c4d9,"Add utility methods for inexact ceil/floor binary searches.

This change also fixes issue #5"
ojw28,2014-07-07 16:06:01,https://api.github.com/repos/google/ExoPlayer/git/commits/f1213a7656070b23e0684cf6166c2731b4150dae,f1213a7656070b23e0684cf6166c2731b4150dae,Fix NaN comparison error.
ojw28,2014-07-07 14:55:01,https://api.github.com/repos/google/ExoPlayer/git/commits/43b7efa9866f0db1bb08b1e8ff695114e8a1c303,43b7efa9866f0db1bb08b1e8ff695114e8a1c303,"Widen support for fMP4 streams.

- Add support for parsing avc3 boxes.
- Make workaround for signed sample offsets in trun files always enabled.
- Generalize remaining workaround into a flag, to make it easy to add additional workarounds going forward without changing the API.
- Fix DataSourceStream bug where read wouldn't return -1 having fully read segment whose spec length was unbounded."
ojw28,2014-07-07 13:41:45,https://api.github.com/repos/google/ExoPlayer/git/commits/b398c594fa15d56217c5482f0ff9740c757274ec,b398c594fa15d56217c5482f0ff9740c757274ec,Fix minSdkVersion for demo app
ojw28,2014-07-04 00:10:52,https://api.github.com/repos/google/ExoPlayer/git/commits/e4ae7e08db296d5b65b04d6951009fb16be103d2,e4ae7e08db296d5b65b04d6951009fb16be103d2,Small javadoc tweak.
ojw28,2014-07-04 00:06:20,https://api.github.com/repos/google/ExoPlayer/git/commits/47c0bbd6b57bc26b92dbb5ec0fad514db46f7392,47c0bbd6b57bc26b92dbb5ec0fad514db46f7392,"Propagate erors to ChunkSource implementations.

This can help custom ChunkSource implementations to act on
this information. For example an adaptive implementation may
choose to blacklist a problematic format if loads of that
format keep failing."
ojw28,2014-07-04 00:04:10,https://api.github.com/repos/google/ExoPlayer/git/commits/4fd4c8951865e246b128c987174f7c8ed2297a6d,4fd4c8951865e246b128c987174f7c8ed2297a6d,Refactored ExoPlayer to use String-based format ids.
ojw28,2014-07-03 23:52:19,https://api.github.com/repos/google/ExoPlayer/git/commits/563b434de26a717b54a7d1b117bbd72763d11f1f,563b434de26a717b54a7d1b117bbd72763d11f1f,"Keep audio time in sync with arbitrary decodeOnly samples.

AudioTrack time will go out of sync if the decodeOnly flag
is set of arbitrary samples (as opposed to just those following
a seek). It's a pretty obscure case and it would be weird for
anyone to do it, but we should be robust against it anyway."
ojw28,2014-07-03 23:47:44,https://api.github.com/repos/google/ExoPlayer/git/commits/50b276fe31985b3e6cd631363c8d23cc5616eb81,50b276fe31985b3e6cd631363c8d23cc5616eb81,Fixed issue in which MediaChunk.seekToStart might not actually seek to the start of the segment.
ojw28,2014-07-03 23:45:09,https://api.github.com/repos/google/ExoPlayer/git/commits/8cad3873933239a589af8e6dcb5e526f2b012e4d,8cad3873933239a589af8e6dcb5e526f2b012e4d,Fix ChunkSource disable definition.
ojw28,2014-07-03 23:29:18,https://api.github.com/repos/google/ExoPlayer/git/commits/ea796f916cc1b1045990f63171e96e21a6c29330,ea796f916cc1b1045990f63171e96e21a6c29330,"Enhance Cache/SimpleCache.

1. Fix SimpleCache startReadWrite asymmetry. Allow more concurrency.

- startReadWrite does not have the concept of a read lock. Once
  a cached span is returned, the caller can do whatever it likes
  for as long as it wants to. This allows a read to be performed
  in parallel with a write that starts after it.
- If there's an ongoing write, startReadWrite will block even if
  the return operation will be a read. So there's a weird asymmetry
  where reads can happen in parallel with writes, but only if the
  reads were started first.
- This CL removes the asymmetry, by allowing a read to start even
  if the write lock is held.
- Note that the reader needs to be prepared for the thing it's
  reading to disappear, but this was already the case, and will
  always be the case since the reader will need to handle disk
  read failures anyway.

2. Add isCached method."
ojw28,2014-06-16 11:55:31,https://api.github.com/repos/google/ExoPlayer/git/commits/27ab5c83a604407e8649aa4cca1cda0e101b9aab,27ab5c83a604407e8649aa4cca1cda0e101b9aab,Initial drop. 1.0.10.
